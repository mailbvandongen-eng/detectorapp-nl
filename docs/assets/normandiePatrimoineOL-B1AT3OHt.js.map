{"version":3,"file":"normandiePatrimoineOL-B1AT3OHt.js","sources":["../../src/layers/normandiePatrimoineOL.ts"],"sourcesContent":["import { Vector as VectorLayer } from 'ol/layer'\nimport { Vector as VectorSource } from 'ol/source'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Fill, Stroke } from 'ol/style'\n\n// Normandie Heritage Sites (Sites Class√©s & Sites Inscrits)\n// Data from DREAL Normandie via data.gouv.fr\n// 623 protected heritage sites (376 Class√©s + 247 Inscrits)\n\nexport async function createNormandiePatrimoineLayerOL() {\n  try {\n    const response = await fetch('/detectorapp-nl/data/sites_patrimoine_normandie.geojson')\n\n    if (!response.ok) {\n      throw new Error(`Normandie patrimoine fetch error: ${response.status}`)\n    }\n\n    const geojson = await response.json()\n    console.log(`üèõÔ∏è Normandie Patrimoine: loaded ${geojson.features?.length || 0} heritage sites`)\n\n    const source = new VectorSource({\n      features: new GeoJSON().readFeatures(geojson, {\n        dataProjection: 'EPSG:4326',\n        featureProjection: 'EPSG:3857'\n      })\n    })\n\n    const layer = new VectorLayer({\n      source: source,\n      properties: { title: 'Sites Patrimoine Normandie' },\n      visible: false,\n      zIndex: 29,\n      style: (feature) => {\n        const type = feature.get('type_protection')\n        // Class√© = red (highest protection), Inscrit = orange\n        const color = type === 'Class√©' ? 'rgba(220, 38, 38, 0.4)' : 'rgba(245, 158, 11, 0.4)'\n        const strokeColor = type === 'Class√©' ? '#dc2626' : '#f59e0b'\n\n        return new Style({\n          fill: new Fill({ color }),\n          stroke: new Stroke({ color: strokeColor, width: 2 })\n        })\n      }\n    })\n\n    return layer\n  } catch (error) {\n    console.error('‚ùå Failed to load Normandie Patrimoine:', error)\n    return new VectorLayer({\n      source: new VectorSource(),\n      properties: { title: 'Sites Patrimoine Normandie' },\n      visible: false\n    })\n  }\n}\n"],"names":["createNormandiePatrimoineLayerOL","response","geojson","source","VectorSource","GeoJSON","VectorLayer","feature","type","color","strokeColor","Style","Fill","Stroke","error"],"mappings":"8GASA,eAAsBA,GAAmC,CACvD,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,yDAAyD,EAEtF,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,qCAAqCA,EAAS,MAAM,EAAE,EAGxE,MAAMC,EAAU,MAAMD,EAAS,KAAA,EAC/B,QAAQ,IAAI,oCAAoCC,EAAQ,UAAU,QAAU,CAAC,iBAAiB,EAE9F,MAAMC,EAAS,IAAIC,EAAa,CAC9B,SAAU,IAAIC,IAAU,aAAaH,EAAS,CAC5C,eAAgB,YAChB,kBAAmB,WAAA,CACpB,CAAA,CACF,EAoBD,OAlBc,IAAII,EAAY,CAC5B,OAAAH,EACA,WAAY,CAAE,MAAO,4BAAA,EACrB,QAAS,GACT,OAAQ,GACR,MAAQI,GAAY,CAClB,MAAMC,EAAOD,EAAQ,IAAI,iBAAiB,EAEpCE,EAAQD,IAAS,SAAW,yBAA2B,0BACvDE,EAAcF,IAAS,SAAW,UAAY,UAEpD,OAAO,IAAIG,EAAM,CACf,KAAM,IAAIC,EAAK,CAAE,MAAAH,EAAO,EACxB,OAAQ,IAAII,EAAO,CAAE,MAAOH,EAAa,MAAO,EAAG,CAAA,CACpD,CACH,CAAA,CACD,CAGH,OAASI,EAAO,CACd,eAAQ,MAAM,yCAA0CA,CAAK,EACtD,IAAIR,EAAY,CACrB,OAAQ,IAAIF,EACZ,WAAY,CAAE,MAAO,4BAAA,EACrB,QAAS,EAAA,CACV,CACH,CACF"}