import{C as Z,g as k,f as Y,V as P,i as q,I as h,b as $,c as Q,d as w,e as v,h as ee,j as M,k as te,L as se,l as B,m as X,n as ie,o as re,r as ne,p as ae,E as U,u as oe,q as le,S as ce,s as ue,t as C,v as ge,w as S,x as he,B as de,D as E,y as me,z as K,A as W,F as pe,T as m,a as p,X as ye}from"./index-sepMzkky.js";class Ie extends Z{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const r=e.layerStatesArray[e.layerIndex],t=e.pixelRatio,n=e.viewState,s=n.resolution,a=this.getLayer().getSource(),l=e.viewHints;let o=e.extent;if(r.extent!==void 0&&(o=k(o,Y(r.extent,n.projection))),!l[P.ANIMATING]&&!l[P.INTERACTING]&&!q(o))if(a){const c=n.projection,u=a.getImage(o,s,t,c);u&&(this.loadImage(u)?this.image=u:u.getState()===h.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const r=this.frameState;if(!r)return null;const t=this.getLayer(),n=$(r.pixelToCoordinateTransform,e.slice()),s=t.getExtent();if(s&&!Q(s,n))return null;const a=this.image.getExtent(),l=this.image.getImage(),o=w(a),c=Math.floor(l.width*((n[0]-a[0])/o));if(c<0||c>=l.width)return null;const u=v(a),g=Math.floor(l.height*((a[3]-n[1])/u));return g<0||g>=l.height?null:this.getImageData(l,c,g)}renderFrame(e,r){const t=this.image,n=t.getExtent(),s=t.getResolution(),[a,l]=Array.isArray(s)?s:[s,s],o=t.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,g=e.viewState,y=g.center,R=g.resolution,f=u*a/(R*o),A=u*l/(R*o);this.prepareContainer(e,r);const I=this.context.canvas.width,T=this.context.canvas.height,d=this.getRenderContext(e);let H=!1,D=!0;if(c.extent){const L=Y(c.extent,g.projection);D=ee(L,e.extent),H=D&&!M(L,e.extent),H&&this.clipUnrotated(d,e,L)}const _=t.getImage(),O=te(this.tempTransform,I/2,T/2,f,A,0,o*(n[0]-y[0])/a,o*(y[1]-n[3])/l);this.renderedResolution=l*u/o;const G=_.width*O[0],V=_.height*O[3];if(this.getLayer().getSource().getInterpolate()||(d.imageSmoothingEnabled=!1),this.preRender(d,e),D&&G>=.5&&V>=.5){const L=O[4],J=O[5],N=c.opacity;N!==1&&(d.save(),d.globalAlpha=N),d.drawImage(_,0,0,+_.width,+_.height,L,J,G,V),N!==1&&d.restore()}return this.postRender(this.context,e),H&&d.restore(),d.imageSmoothingEnabled=!0,this.container}}class Ee extends se{constructor(e){e=e||{},super(e)}}class F extends Ee{constructor(e){super(e)}createRenderer(){return new Ie(this)}getData(e){return super.getData(e)}}function b(i){return Array.isArray(i)?Math.min(...i):i}class _e extends B{constructor(e,r,t,n,s,a,l){let o=e.getExtent();o&&e.canWrapX()&&(o=o.slice(),o[0]=-1/0,o[2]=1/0);let c=r.getExtent();c&&r.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const u=c?k(t,c):t,g=X(u),y=ie(e,r,g,n),R=le,f=new re(e,r,u,o,y*R,n),A=f.calculateSourceExtent(),I=q(A)?null:a(A,y,s),T=I?h.IDLE:h.EMPTY,d=I?I.getPixelRatio():1;super(t,n,d,T),this.targetProj_=r,this.maxSourceExtent_=o,this.triangulation_=f,this.targetResolution_=n,this.targetExtent_=t,this.sourceImage_=I,this.sourcePixelRatio_=d,this.interpolate_=l,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==h.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==h.LOADED){const r=w(this.targetExtent_)/this.targetResolution_,t=v(this.targetExtent_)/this.targetResolution_;this.canvas_=ne(r,t,this.sourcePixelRatio_,b(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==h.IDLE){this.state=h.LOADING,this.changed();const e=this.sourceImage_.getState();e==h.LOADED||e==h.ERROR?this.reproject_():(this.sourceListenerKey_=ae(this.sourceImage_,U.CHANGE,r=>{const t=this.sourceImage_.getState();(t==h.LOADED||t==h.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){oe(this.sourceListenerKey_),this.sourceListenerKey_=null}}const x={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Le extends de{constructor(e,r){super(e),this.image=r}}class we extends ce{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const r=this.getResolutions();if(r){const t=ue(r,e,0);e=r[t]}return e}getImage(e,r,t,n){const s=this.getProjection();if(!s||!n||C(s,n))return s&&(n=s),this.getImageInternal(e,r,t,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&C(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==r&&ge(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new _e(s,n,e,r,t,(a,l,o)=>this.getImageInternal(a,l,o,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,r,t,n){if(this.loader){const s=z(e,r,t,1),a=this.findNearestResolution(r);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&M(this.wantedExtent_,s)||M(this.image.getExtent(),s))&&(this.wantedResolution_&&b(this.wantedResolution_)===a||b(this.image.getResolution())===a)))return this.image;this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new B(s,a,t,this.loader),this.image.addEventListener(U.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const r=e.target;let t;switch(r.getState()){case h.LOADING:this.loading=!0,t=x.IMAGELOADSTART;break;case h.LOADED:this.loading=!1,t=x.IMAGELOADEND;break;case h.ERROR:this.loading=!1,t=x.IMAGELOADERROR;break;default:return}this.hasListener(t)&&this.dispatchEvent(new Le(t,r))}}function Re(i,e){i.getImage().src=e}function z(i,e,r,t){const n=e/r,s=X(i),a=S(w(i)/n,E),l=S(v(i)/n,E),o=S((t-1)*a/2,E),c=a+2*o,u=S((t-1)*l/2,E),g=l+2*u;return he(s,n,0,[c,g])}function fe(i,e,r,t,n,s){const a=n.getCode().split(/:(?=\d+$)/).pop(),l=r/t,o=[W(w(e)/l,E),W(v(e)/l,E)];s.SIZE=o[0]+","+o[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*t:90*t);const c=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return pe(c,s)}function Ae(i){const e=i.load?i.load:K,r=me(i.projection||"EPSG:3857"),t=i.ratio??1.5,n=i.crossOrigin??null;return function(s,a,l){l=i.hidpi?l:1;const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(o,i.params),s=z(s,a,l,t);const c=fe(i.url,s,a,l,r,o),u=new Image;return u.crossOrigin=n,e(u,c).then(g=>{const y=w(s)/g.width*l;return{image:g,extent:s,resolution:y,pixelRatio:l}})}}class j extends we{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:Re,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,r,t,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=Ae({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),K(s))})),super.getImageInternal(e,r,t,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}function Se(){return new F({properties:{title:"AHN4 Hillshade NL",type:"arcgis"},visible:!1,opacity:.7,source:new j({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Hillshade"})},crossOrigin:"anonymous",attributions:"© Esri Nederland, AHN"})})}function ve(){return new F({properties:{title:"AHN4 Multi-Hillshade NL",type:"arcgis"},visible:!1,opacity:.7,source:new j({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Hillshade (Multidirectionaal)"})},crossOrigin:"anonymous",attributions:"© Esri Nederland, AHN"})})}function Te(){return new F({properties:{title:"AHN4 Helling NL",type:"arcgis"},visible:!1,opacity:.6,source:new j({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"Slope Degrees"})},crossOrigin:"anonymous",attributions:"© Esri Nederland, AHN"})})}function He(){return new m({properties:{title:"World Hillshade",type:"overlay"},visible:!1,opacity:.6,source:new ye({url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}",attributions:"© Esri",crossOrigin:"anonymous",maxZoom:23})})}function De(){return new m({properties:{title:"Hillshade Vlaanderen 25cm",type:"wms"},visible:!1,opacity:.7,source:new p({url:"https://geo.api.vlaanderen.be/DHMV/wms",params:{LAYERS:"DHMV_II_HILL_25cm",STYLES:"",TILED:!0,FORMAT:"image/png"},serverType:"geoserver",crossOrigin:"anonymous"})})}function Ne(){return new m({properties:{title:"Skyview Vlaanderen 25cm",type:"wms"},visible:!1,opacity:.7,source:new p({url:"https://geo.api.vlaanderen.be/DHMV/wms",params:{LAYERS:"DHMV_II_SVF_25cm",STYLES:"",TILED:!0,FORMAT:"image/png"},serverType:"geoserver",crossOrigin:"anonymous"})})}function xe(){return new m({properties:{title:"DTM Vlaanderen 1m",type:"wms"},visible:!1,opacity:.6,source:new p({url:"https://geo.api.vlaanderen.be/DHMV/wms",params:{LAYERS:"DHMVII_DTM_1m",STYLES:"",TILED:!0,FORMAT:"image/png"},serverType:"geoserver",crossOrigin:"anonymous"})})}function Me(){return new m({properties:{title:"Hillshade NRW 25cm",type:"wms"},visible:!1,opacity:.7,source:new p({url:"https://www.wms.nrw.de/geobasis/wms_nw_dgm-schummerung",params:{LAYERS:"nw_dgm-schummerung_pan",STYLES:"",TILED:!0,FORMAT:"image/png"},crossOrigin:"anonymous"})})}function be(){return new m({properties:{title:"Hillshade NRW Kleur",type:"wms"},visible:!1,opacity:.7,source:new p({url:"https://www.wms.nrw.de/geobasis/wms_nw_dgm-schummerung",params:{LAYERS:"nw_dgm-schummerung_col",STYLES:"",TILED:!0,FORMAT:"image/png"},crossOrigin:"anonymous"})})}function Fe(){return new m({properties:{title:"Hillshade Frankrijk",type:"wms"},visible:!1,opacity:.7,source:new p({url:"https://data.geopf.fr/wms-r/wms",params:{LAYERS:"ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW",STYLES:"estompage_grayscale",TILED:!0,FORMAT:"image/png"},crossOrigin:"anonymous"})})}function je(){return new m({properties:{title:"LiDAR HD Frankrijk",type:"wms"},visible:!1,opacity:.7,source:new p({url:"https://data.geopf.fr/wms-r/wms",params:{LAYERS:"IGNF_LIDAR-HD_MNT_ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW",STYLES:"",TILED:!0,FORMAT:"image/png"},crossOrigin:"anonymous"})})}function Ge(){return new m({properties:{title:"RGE Alti Frankrijk 1m",type:"wms"},visible:!1,opacity:.6,source:new p({url:"https://data.geopf.fr/wms-r/wms",params:{LAYERS:"ELEVATION.ELEVATIONGRIDCOVERAGE.HIGHRES",STYLES:"",TILED:!0,FORMAT:"image/png"},crossOrigin:"anonymous"})})}function Ve(){return new m({properties:{title:"Hoogtelijn Frankrijk",type:"wms"},visible:!1,opacity:.8,source:new p({url:"https://data.geopf.fr/wms-r/wms",params:{LAYERS:"ELEVATION.CONTOUR.LINE",STYLES:"",TILED:!0,FORMAT:"image/png"},crossOrigin:"anonymous"})})}function Ye(){return new m({properties:{title:"Hillshade Wallonië",type:"wms"},visible:!1,opacity:.7,source:new p({url:"https://geoservices.wallonie.be/arcgis/services/RELIEF/WALLONIE_MNT_2021_2022_HILLSHADE/MapServer/WMSServer",params:{LAYERS:"0",STYLES:"",TILED:!0,FORMAT:"image/png"},crossOrigin:"anonymous"})})}export{Se as createAHN4HillshadeLayerOL,ve as createAHN4MultiHillshadeLayerOL,Te as createAHN4SlopeLayerOL,xe as createDHMVDTMLayerOL,De as createDHMVHillshadeLayerOL,Ne as createDHMVSkyviewLayerOL,Ve as createFranceContourLayerOL,Fe as createFranceHillshadeLayerOL,je as createFranceLidarHDHillshadeLayerOL,Ge as createFranceRGEAltiLayerOL,be as createNRWHillshadeColorLayerOL,Me as createNRWHillshadeLayerOL,Ye as createWallonieHillshadeLayerOL,He as createWorldHillshadeLayerOL};
//# sourceMappingURL=hillshadeLayers-BgOZtFfI.js.map
