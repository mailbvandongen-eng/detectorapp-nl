{"version":3,"file":"layerLoaderOL-VbIOTuij.js","sources":["../../node_modules/topojson-client/src/identity.js","../../node_modules/topojson-client/src/transform.js","../../node_modules/topojson-client/src/reverse.js","../../node_modules/topojson-client/src/feature.js","../../src/utils/layerLoaderOL.js"],"sourcesContent":["export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","/**\r\n * Layer Loader for OpenLayers\r\n * Utilities for loading GeoJSON and TopoJSON data\r\n */\r\n\r\nimport GeoJSON from 'ol/format/GeoJSON'\r\nimport * as topojson from 'topojson-client'\r\n\r\n/**\r\n * Load GeoJSON from URL\r\n */\r\nexport async function loadGeoJSON(url) {\r\n  try {\r\n    const response = await fetch(url)\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to load ${url}: ${response.statusText}`)\r\n    }\r\n    const data = await response.json()\r\n    console.log(`✓ Loaded GeoJSON from ${url}`)\r\n    return data\r\n  } catch (error) {\r\n    console.error(`Error loading GeoJSON from ${url}:`, error)\r\n    throw error\r\n  }\r\n}\r\n\r\n/**\r\n * Load TopoJSON and convert to GeoJSON\r\n */\r\nexport async function loadTopoJSON(url) {\r\n  try {\r\n    const response = await fetch(url)\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to load ${url}: ${response.statusText}`)\r\n    }\r\n    const topoData = await response.json()\r\n\r\n    // Get first object from topology\r\n    const objectName = Object.keys(topoData.objects)[0]\r\n    const geojson = topojson.feature(topoData, topoData.objects[objectName])\r\n\r\n    console.log(`✓ Loaded and converted TopoJSON from ${url}`)\r\n    return geojson\r\n  } catch (error) {\r\n    console.error(`Error loading TopoJSON from ${url}:`, error)\r\n    throw error\r\n  }\r\n}\r\n\r\n/**\r\n * Parse GeoJSON to OpenLayers features\r\n */\r\nexport function parseGeoJSON(geojson) {\r\n  const format = new GeoJSON({\r\n    featureProjection: 'EPSG:3857' // Web Mercator (OpenLayers default)\r\n  })\r\n  return format.readFeatures(geojson)\r\n}\r\n"],"names":["identity","x","transform","x0","y0","kx","ky","dx","dy","input","i","j","n","output","reverse","array","t","feature_default","topology","o","feature","id","bbox","properties","geometry","object","transformPoint","arcs","arc","points","a","k","point","p","line","ring","polygon","type","coordinates","loadGeoJSON","url","response","data","error","loadTopoJSON","topoData","objectName","geojson","topojson.feature","parseGeoJSON","GeoJSON"],"mappings":"wCAAe,SAAAA,EAASC,EAAG,CACzB,OAAOA,CACT,CCAe,SAAAC,EAASA,EAAW,CACjC,GAAIA,GAAa,KAAM,OAAOF,EAC9B,IAAIG,EACAC,EACAC,EAAKH,EAAU,MAAM,CAAC,EACtBI,EAAKJ,EAAU,MAAM,CAAC,EACtBK,EAAKL,EAAU,UAAU,CAAC,EAC1BM,EAAKN,EAAU,UAAU,CAAC,EAC9B,OAAO,SAASO,EAAOC,EAAG,CACnBA,IAAGP,EAAKC,EAAK,GAClB,IAAIO,EAAI,EAAGC,EAAIH,EAAM,OAAQI,EAAS,IAAI,MAAMD,CAAC,EAGjD,IAFAC,EAAO,CAAC,GAAKV,GAAMM,EAAM,CAAC,GAAKJ,EAAKE,EACpCM,EAAO,CAAC,GAAKT,GAAMK,EAAM,CAAC,GAAKH,EAAKE,EAC7BG,EAAIC,GAAGC,EAAOF,CAAC,EAAIF,EAAME,CAAC,EAAG,EAAEA,EACtC,OAAOE,CACT,CACF,CClBe,SAAAC,EAASC,EAAOH,EAAG,CAEhC,QADII,EAAGL,EAAII,EAAM,OAAQL,EAAIC,EAAIC,EAC1BF,EAAI,EAAEC,GAAGK,EAAID,EAAML,CAAC,EAAGK,EAAML,GAAG,EAAIK,EAAMJ,CAAC,EAAGI,EAAMJ,CAAC,EAAIK,CAClE,CCAe,SAAAC,EAASC,EAAUC,EAAG,CACnC,OAAI,OAAOA,GAAM,WAAUA,EAAID,EAAS,QAAQC,CAAC,GAC1CA,EAAE,OAAS,qBACZ,CAAC,KAAM,oBAAqB,SAAUA,EAAE,WAAW,IAAI,SAASA,EAAG,CAAE,OAAOC,EAAQF,EAAUC,CAAC,CAAG,CAAC,CAAC,EACpGC,EAAQF,EAAUC,CAAC,CAC3B,CAEA,SAASC,EAAQF,EAAUC,EAAG,CAC5B,IAAIE,EAAKF,EAAE,GACPG,EAAOH,EAAE,KACTI,EAAaJ,EAAE,YAAc,KAAO,CAAA,EAAKA,EAAE,WAC3CK,EAAWC,EAAOP,EAAUC,CAAC,EACjC,OAAOE,GAAM,MAAQC,GAAQ,KAAO,CAAC,KAAM,UAAW,WAAYC,EAAY,SAAUC,CAAQ,EAC1FF,GAAQ,KAAO,CAAC,KAAM,UAAW,GAAID,EAAI,WAAYE,EAAY,SAAUC,CAAQ,EACnF,CAAC,KAAM,UAAW,GAAIH,EAAI,KAAMC,EAAM,WAAYC,EAAY,SAAUC,CAAQ,CACxF,CAEO,SAASC,EAAOP,EAAUC,EAAG,CAClC,IAAIO,EAAiBxB,EAAUgB,EAAS,SAAS,EAC7CS,EAAOT,EAAS,KAEpB,SAASU,EAAIlB,EAAGmB,EAAQ,CAClBA,EAAO,QAAQA,EAAO,IAAG,EAC7B,QAASC,EAAIH,EAAKjB,EAAI,EAAI,CAACA,EAAIA,CAAC,EAAGqB,EAAI,EAAGnB,EAAIkB,EAAE,OAAQC,EAAInB,EAAG,EAAEmB,EAC/DF,EAAO,KAAKH,EAAeI,EAAEC,CAAC,EAAGA,CAAC,CAAC,EAEjCrB,EAAI,GAAGI,EAAQe,EAAQjB,CAAC,CAC9B,CAEA,SAASoB,EAAMC,EAAG,CAChB,OAAOP,EAAeO,CAAC,CACzB,CAEA,SAASC,EAAKP,EAAM,CAElB,QADIE,EAAS,CAAA,EACJnB,EAAI,EAAGE,EAAIe,EAAK,OAAQjB,EAAIE,EAAG,EAAEF,EAAGkB,EAAID,EAAKjB,CAAC,EAAGmB,CAAM,EAChE,OAAIA,EAAO,OAAS,GAAGA,EAAO,KAAKA,EAAO,CAAC,CAAC,EACrCA,CACT,CAEA,SAASM,EAAKR,EAAM,CAElB,QADIE,EAASK,EAAKP,CAAI,EACfE,EAAO,OAAS,GAAGA,EAAO,KAAKA,EAAO,CAAC,CAAC,EAC/C,OAAOA,CACT,CAEA,SAASO,EAAQT,EAAM,CACrB,OAAOA,EAAK,IAAIQ,CAAI,CACtB,CAEA,SAASX,EAASL,EAAG,CACnB,IAAIkB,EAAOlB,EAAE,KAAMmB,EACnB,OAAQD,EAAI,CACV,IAAK,qBAAsB,MAAO,CAAC,KAAMA,EAAM,WAAYlB,EAAE,WAAW,IAAIK,CAAQ,CAAC,EACrF,IAAK,QAASc,EAAcN,EAAMb,EAAE,WAAW,EAAG,MAClD,IAAK,aAAcmB,EAAcnB,EAAE,YAAY,IAAIa,CAAK,EAAG,MAC3D,IAAK,aAAcM,EAAcJ,EAAKf,EAAE,IAAI,EAAG,MAC/C,IAAK,kBAAmBmB,EAAcnB,EAAE,KAAK,IAAIe,CAAI,EAAG,MACxD,IAAK,UAAWI,EAAcF,EAAQjB,EAAE,IAAI,EAAG,MAC/C,IAAK,eAAgBmB,EAAcnB,EAAE,KAAK,IAAIiB,CAAO,EAAG,MACxD,QAAS,OAAO,IACtB,CACI,MAAO,CAAC,KAAMC,EAAM,YAAaC,CAAW,CAC9C,CAEA,OAAOd,EAASL,CAAC,CACnB,CC1DO,eAAeoB,EAAYC,EAAK,CACrC,GAAI,CACF,MAAMC,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,kBAAkBD,CAAG,KAAKC,EAAS,UAAU,EAAE,EAEjE,MAAMC,EAAO,MAAMD,EAAS,KAAI,EAChC,eAAQ,IAAI,yBAAyBD,CAAG,EAAE,EACnCE,CACT,OAASC,EAAO,CACd,cAAQ,MAAM,8BAA8BH,CAAG,IAAKG,CAAK,EACnDA,CACR,CACF,CAKO,eAAeC,EAAaJ,EAAK,CACtC,GAAI,CACF,MAAMC,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,kBAAkBD,CAAG,KAAKC,EAAS,UAAU,EAAE,EAEjE,MAAMI,EAAW,MAAMJ,EAAS,KAAI,EAG9BK,EAAa,OAAO,KAAKD,EAAS,OAAO,EAAE,CAAC,EAC5CE,EAAUC,EAAiBH,EAAUA,EAAS,QAAQC,CAAU,CAAC,EAEvE,eAAQ,IAAI,wCAAwCN,CAAG,EAAE,EAClDO,CACT,OAASJ,EAAO,CACd,cAAQ,MAAM,+BAA+BH,CAAG,IAAKG,CAAK,EACpDA,CACR,CACF,CAKO,SAASM,EAAaF,EAAS,CAIpC,OAHe,IAAIG,EAAQ,CACzB,kBAAmB,WACvB,CAAG,EACa,aAAaH,CAAO,CACpC","x_google_ignoreList":[0,1,2,3]}