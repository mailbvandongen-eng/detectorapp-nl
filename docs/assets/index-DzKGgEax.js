const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/amkOL-jC-pxhFc.js","assets/layerLoaderOL-BREJsQ1O.js","assets/romeinsOL-CbTh6IfK.js","assets/kastelenOL-BOCgC3Eq.js","assets/iconStyles-EkjMAvDS.js","assets/ruinesOL-3qBmDZth.js","assets/hunebeddenOL-DYjK9iCw.js","assets/uikavArcheoPuntenOL-C2-Cbl0L.js","assets/uikavVlakkenOL-DCNqdlK0.js","assets/uikavBufferlaagOL-A9_b9OUS.js","assets/uikavExpertOL-Czg2Nqy7.js","assets/uikavUiterwaardenOL-De8xm-6F.js","assets/speeltuinenOL-BYW1yqFt.js","assets/museaOL-D_gxZinZ.js","assets/strandjesOL-CiJXPrPQ.js","assets/parkenOL-CevbJ8Eg.js","assets/kringloopwinkelsOL-CX84HEOi.js","assets/fossielenOL-CInv1aWM.js","assets/fossielUtils-C-wuDbED.js","assets/fossielenBelgieOL-DguL5J4p.js","assets/fossielenDuitslandOL-Bb3v3xdx.js","assets/fossielenFrankrijkOL-BP3mjHDj.js","assets/bunkersOL-B5Xn4HTg.js","assets/grafheuvelsOL-BQyrJc6n.js","assets/slagveldenOL-CC-s0yEF.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function MI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var o2={exports:{}},Ig={},l2={exports:{}},Kt={};var c4;function WG(){if(c4)return Kt;c4=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function g(ee){return ee===null||typeof ee!="object"?null:(ee=d&&ee[d]||ee["@@iterator"],typeof ee=="function"?ee:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,v={};function w(ee,j,ne){this.props=ee,this.context=j,this.refs=v,this.updater=ne||p}w.prototype.isReactComponent={},w.prototype.setState=function(ee,j){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,j,"setState")},w.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function T(){}T.prototype=w.prototype;function R(ee,j,ne){this.props=ee,this.context=j,this.refs=v,this.updater=ne||p}var k=R.prototype=new T;k.constructor=R,E(k,w.prototype),k.isPureReactComponent=!0;var N=Array.isArray,O=Object.prototype.hasOwnProperty,B={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function b(ee,j,ne){var re,Q={},ge=null,De=null;if(j!=null)for(re in j.ref!==void 0&&(De=j.ref),j.key!==void 0&&(ge=""+j.key),j)O.call(j,re)&&!P.hasOwnProperty(re)&&(Q[re]=j[re]);var Ve=arguments.length-2;if(Ve===1)Q.children=ne;else if(1<Ve){for(var Ae=Array(Ve),Oe=0;Oe<Ve;Oe++)Ae[Oe]=arguments[Oe+2];Q.children=Ae}if(ee&&ee.defaultProps)for(re in Ve=ee.defaultProps,Ve)Q[re]===void 0&&(Q[re]=Ve[re]);return{$$typeof:n,type:ee,key:ge,ref:De,props:Q,_owner:B.current}}function M(ee,j){return{$$typeof:n,type:ee.type,key:j,ref:ee.ref,props:ee.props,_owner:ee._owner}}function F(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===n}function V(ee){var j={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(ne){return j[ne]})}var W=/\/+/g;function D(ee,j){return typeof ee=="object"&&ee!==null&&ee.key!=null?V(""+ee.key):j.toString(36)}function Ie(ee,j,ne,re,Q){var ge=typeof ee;(ge==="undefined"||ge==="boolean")&&(ee=null);var De=!1;if(ee===null)De=!0;else switch(ge){case"string":case"number":De=!0;break;case"object":switch(ee.$$typeof){case n:case e:De=!0}}if(De)return De=ee,Q=Q(De),ee=re===""?"."+D(De,0):re,N(Q)?(ne="",ee!=null&&(ne=ee.replace(W,"$&/")+"/"),Ie(Q,j,ne,"",function(Oe){return Oe})):Q!=null&&(F(Q)&&(Q=M(Q,ne+(!Q.key||De&&De.key===Q.key?"":(""+Q.key).replace(W,"$&/")+"/")+ee)),j.push(Q)),1;if(De=0,re=re===""?".":re+":",N(ee))for(var Ve=0;Ve<ee.length;Ve++){ge=ee[Ve];var Ae=re+D(ge,Ve);De+=Ie(ge,j,ne,Ae,Q)}else if(Ae=g(ee),typeof Ae=="function")for(ee=Ae.call(ee),Ve=0;!(ge=ee.next()).done;)ge=ge.value,Ae=re+D(ge,Ve++),De+=Ie(ge,j,ne,Ae,Q);else if(ge==="object")throw j=String(ee),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return De}function Le(ee,j,ne){if(ee==null)return ee;var re=[],Q=0;return Ie(ee,re,"","",function(ge){return j.call(ne,ge,Q++)}),re}function Fe(ee){if(ee._status===-1){var j=ee._result;j=j(),j.then(function(ne){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=ne)},function(ne){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=ne)}),ee._status===-1&&(ee._status=0,ee._result=j)}if(ee._status===1)return ee._result.default;throw ee._result}var Ce={current:null},ce={transition:null},Re={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:ce,ReactCurrentOwner:B};function me(){throw Error("act(...) is not supported in production builds of React.")}return Kt.Children={map:Le,forEach:function(ee,j,ne){Le(ee,function(){j.apply(this,arguments)},ne)},count:function(ee){var j=0;return Le(ee,function(){j++}),j},toArray:function(ee){return Le(ee,function(j){return j})||[]},only:function(ee){if(!F(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},Kt.Component=w,Kt.Fragment=t,Kt.Profiler=i,Kt.PureComponent=R,Kt.StrictMode=r,Kt.Suspense=l,Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,Kt.act=me,Kt.cloneElement=function(ee,j,ne){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var re=E({},ee.props),Q=ee.key,ge=ee.ref,De=ee._owner;if(j!=null){if(j.ref!==void 0&&(ge=j.ref,De=B.current),j.key!==void 0&&(Q=""+j.key),ee.type&&ee.type.defaultProps)var Ve=ee.type.defaultProps;for(Ae in j)O.call(j,Ae)&&!P.hasOwnProperty(Ae)&&(re[Ae]=j[Ae]===void 0&&Ve!==void 0?Ve[Ae]:j[Ae])}var Ae=arguments.length-2;if(Ae===1)re.children=ne;else if(1<Ae){Ve=Array(Ae);for(var Oe=0;Oe<Ae;Oe++)Ve[Oe]=arguments[Oe+2];re.children=Ve}return{$$typeof:n,type:ee.type,key:Q,ref:ge,props:re,_owner:De}},Kt.createContext=function(ee){return ee={$$typeof:a,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:s,_context:ee},ee.Consumer=ee},Kt.createElement=b,Kt.createFactory=function(ee){var j=b.bind(null,ee);return j.type=ee,j},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(ee){return{$$typeof:o,render:ee}},Kt.isValidElement=F,Kt.lazy=function(ee){return{$$typeof:f,_payload:{_status:-1,_result:ee},_init:Fe}},Kt.memo=function(ee,j){return{$$typeof:u,type:ee,compare:j===void 0?null:j}},Kt.startTransition=function(ee){var j=ce.transition;ce.transition={};try{ee()}finally{ce.transition=j}},Kt.unstable_act=me,Kt.useCallback=function(ee,j){return Ce.current.useCallback(ee,j)},Kt.useContext=function(ee){return Ce.current.useContext(ee)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(ee){return Ce.current.useDeferredValue(ee)},Kt.useEffect=function(ee,j){return Ce.current.useEffect(ee,j)},Kt.useId=function(){return Ce.current.useId()},Kt.useImperativeHandle=function(ee,j,ne){return Ce.current.useImperativeHandle(ee,j,ne)},Kt.useInsertionEffect=function(ee,j){return Ce.current.useInsertionEffect(ee,j)},Kt.useLayoutEffect=function(ee,j){return Ce.current.useLayoutEffect(ee,j)},Kt.useMemo=function(ee,j){return Ce.current.useMemo(ee,j)},Kt.useReducer=function(ee,j,ne){return Ce.current.useReducer(ee,j,ne)},Kt.useRef=function(ee){return Ce.current.useRef(ee)},Kt.useState=function(ee){return Ce.current.useState(ee)},Kt.useSyncExternalStore=function(ee,j,ne){return Ce.current.useSyncExternalStore(ee,j,ne)},Kt.useTransition=function(){return Ce.current.useTransition()},Kt.version="18.3.1",Kt}var u4;function Pp(){return u4||(u4=1,l2.exports=WG()),l2.exports}var h4;function HG(){if(h4)return Ig;h4=1;var n=Pp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var f,d={},g=null,p=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(p=l.ref);for(f in l)r.call(l,f)&&!s.hasOwnProperty(f)&&(d[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)d[f]===void 0&&(d[f]=l[f]);return{$$typeof:e,type:o,key:g,ref:p,props:d,_owner:i.current}}return Ig.Fragment=t,Ig.jsx=a,Ig.jsxs=a,Ig}var f4;function KG(){return f4||(f4=1,o2.exports=HG()),o2.exports}var y=KG(),C_={},c2={exports:{}},rs={},u2={exports:{}},h2={};var d4;function YG(){return d4||(d4=1,(function(n){function e(ce,Re){var me=ce.length;ce.push(Re);e:for(;0<me;){var ee=me-1>>>1,j=ce[ee];if(0<i(j,Re))ce[ee]=Re,ce[me]=j,me=ee;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var Re=ce[0],me=ce.pop();if(me!==Re){ce[0]=me;e:for(var ee=0,j=ce.length,ne=j>>>1;ee<ne;){var re=2*(ee+1)-1,Q=ce[re],ge=re+1,De=ce[ge];if(0>i(Q,me))ge<j&&0>i(De,Q)?(ce[ee]=De,ce[ge]=me,ee=ge):(ce[ee]=Q,ce[re]=me,ee=re);else if(ge<j&&0>i(De,me))ce[ee]=De,ce[ge]=me,ee=ge;else break e}}return Re}function i(ce,Re){var me=ce.sortIndex-Re.sortIndex;return me!==0?me:ce.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],f=1,d=null,g=3,p=!1,E=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ce){for(var Re=t(u);Re!==null;){if(Re.callback===null)r(u);else if(Re.startTime<=ce)r(u),Re.sortIndex=Re.expirationTime,e(l,Re);else break;Re=t(u)}}function N(ce){if(v=!1,k(ce),!E)if(t(l)!==null)E=!0,Fe(O);else{var Re=t(u);Re!==null&&Ce(N,Re.startTime-ce)}}function O(ce,Re){E=!1,v&&(v=!1,T(b),b=-1),p=!0;var me=g;try{for(k(Re),d=t(l);d!==null&&(!(d.expirationTime>Re)||ce&&!V());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,g=d.priorityLevel;var j=ee(d.expirationTime<=Re);Re=n.unstable_now(),typeof j=="function"?d.callback=j:d===t(l)&&r(l),k(Re)}else r(l);d=t(l)}if(d!==null)var ne=!0;else{var re=t(u);re!==null&&Ce(N,re.startTime-Re),ne=!1}return ne}finally{d=null,g=me,p=!1}}var B=!1,P=null,b=-1,M=5,F=-1;function V(){return!(n.unstable_now()-F<M)}function W(){if(P!==null){var ce=n.unstable_now();F=ce;var Re=!0;try{Re=P(!0,ce)}finally{Re?D():(B=!1,P=null)}}else B=!1}var D;if(typeof R=="function")D=function(){R(W)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Le=Ie.port2;Ie.port1.onmessage=W,D=function(){Le.postMessage(null)}}else D=function(){w(W,0)};function Fe(ce){P=ce,B||(B=!0,D())}function Ce(ce,Re){b=w(function(){ce(n.unstable_now())},Re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){E||p||(E=!0,Fe(O))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(ce){switch(g){case 1:case 2:case 3:var Re=3;break;default:Re=g}var me=g;g=Re;try{return ce()}finally{g=me}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,Re){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var me=g;g=ce;try{return Re()}finally{g=me}},n.unstable_scheduleCallback=function(ce,Re,me){var ee=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ee+me:ee):me=ee,ce){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=me+j,ce={id:f++,callback:Re,priorityLevel:ce,startTime:me,expirationTime:j,sortIndex:-1},me>ee?(ce.sortIndex=me,e(u,ce),t(l)===null&&ce===t(u)&&(v?(T(b),b=-1):v=!0,Ce(N,me-ee))):(ce.sortIndex=j,e(l,ce),E||p||(E=!0,Fe(O))),ce},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ce){var Re=g;return function(){var me=g;g=Re;try{return ce.apply(this,arguments)}finally{g=me}}}})(h2)),h2}var g4;function XG(){return g4||(g4=1,u2.exports=YG()),u2.exports}var m4;function qG(){if(m4)return rs;m4=1;var n=Pp(),e=XG();function t(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(c,h){a(c,h),a(c+"Capture",h)}function a(c,h){for(i[c]=h,c=0;c<h.length;c++)r.add(h[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function g(c){return l.call(d,c)?!0:l.call(f,c)?!1:u.test(c)?d[c]=!0:(f[c]=!0,!1)}function p(c,h,m,x){if(m!==null&&m.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return x?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function E(c,h,m,x){if(h===null||typeof h>"u"||p(c,h,m,x))return!0;if(x)return!1;if(m!==null)switch(m.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function v(c,h,m,x,S,I,G){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=x,this.attributeNamespace=S,this.mustUseProperty=m,this.propertyName=c,this.type=h,this.sanitizeURL=I,this.removeEmptyString=G}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new v(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];w[h]=new v(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new v(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new v(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new v(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new v(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new v(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new v(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new v(c,5,!1,c.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(T,R);w[h]=new v(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(T,R);w[h]=new v(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(T,R);w[h]=new v(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new v(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new v(c,1,!1,c.toLowerCase(),null,!0,!0)});function k(c,h,m,x){var S=w.hasOwnProperty(h)?w[h]:null;(S!==null?S.type!==0:x||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(E(h,m,S,x)&&(m=null),x||S===null?g(h)&&(m===null?c.removeAttribute(h):c.setAttribute(h,""+m)):S.mustUseProperty?c[S.propertyName]=m===null?S.type===3?!1:"":m:(h=S.attributeName,x=S.attributeNamespace,m===null?c.removeAttribute(h):(S=S.type,m=S===3||S===4&&m===!0?"":""+m,x?c.setAttributeNS(x,h,m):c.setAttribute(h,m))))}var N=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),B=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),V=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),ce=Symbol.iterator;function Re(c){return c===null||typeof c!="object"?null:(c=ce&&c[ce]||c["@@iterator"],typeof c=="function"?c:null)}var me=Object.assign,ee;function j(c){if(ee===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);ee=h&&h[1]||""}return`
`+ee+c}var ne=!1;function re(c,h){if(!c||ne)return"";ne=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(we){var x=we}Reflect.construct(c,[],h)}else{try{h.call()}catch(we){x=we}c.call(h.prototype)}else{try{throw Error()}catch(we){x=we}c()}}catch(we){if(we&&x&&typeof we.stack=="string"){for(var S=we.stack.split(`
`),I=x.stack.split(`
`),G=S.length-1,ie=I.length-1;1<=G&&0<=ie&&S[G]!==I[ie];)ie--;for(;1<=G&&0<=ie;G--,ie--)if(S[G]!==I[ie]){if(G!==1||ie!==1)do if(G--,ie--,0>ie||S[G]!==I[ie]){var ae=`
`+S[G].replace(" at new "," at ");return c.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",c.displayName)),ae}while(1<=G&&0<=ie);break}}}finally{ne=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?j(c):""}function Q(c){switch(c.tag){case 5:return j(c.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return c=re(c.type,!1),c;case 11:return c=re(c.type.render,!1),c;case 1:return c=re(c.type,!0),c;default:return""}}function ge(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case P:return"Fragment";case B:return"Portal";case M:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case Ie:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case V:return(c.displayName||"Context")+".Consumer";case F:return(c._context.displayName||"Context")+".Provider";case W:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Le:return h=c.displayName||null,h!==null?h:ge(c.type)||"Memo";case Fe:h=c._payload,c=c._init;try{return ge(c(h))}catch{}}return null}function De(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(h);case 8:return h===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Ve(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Ae(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Oe(c){var h=Ae(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),x=""+c[h];if(!c.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,I=m.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return S.call(this)},set:function(G){x=""+G,I.call(this,G)}}),Object.defineProperty(c,h,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(G){x=""+G},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Te(c){c._valueTracker||(c._valueTracker=Oe(c))}function ue(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var m=h.getValue(),x="";return c&&(x=Ae(c)?c.checked?"true":"false":c.value),c=x,c!==m?(h.setValue(c),!0):!1}function C(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function qe(c,h){var m=h.checked;return me({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function q(c,h){var m=h.defaultValue==null?"":h.defaultValue,x=h.checked!=null?h.checked:h.defaultChecked;m=Ve(h.value!=null?h.value:m),c._wrapperState={initialChecked:x,initialValue:m,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function ft(c,h){h=h.checked,h!=null&&k(c,"checked",h,!1)}function Y(c,h){ft(c,h);var m=Ve(h.value),x=h.type;if(m!=null)x==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(x==="submit"||x==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?se(c,h.type,m):h.hasOwnProperty("defaultValue")&&se(c,h.type,Ve(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function z(c,h,m){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var x=h.type;if(!(x!=="submit"&&x!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,m||h===c.value||(c.value=h),c.defaultValue=h}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function se(c,h,m){(h!=="number"||C(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var Ne=Array.isArray;function xe(c,h,m,x){if(c=c.options,h){h={};for(var S=0;S<m.length;S++)h["$"+m[S]]=!0;for(m=0;m<c.length;m++)S=h.hasOwnProperty("$"+c[m].value),c[m].selected!==S&&(c[m].selected=S),S&&x&&(c[m].defaultSelected=!0)}else{for(m=""+Ve(m),h=null,S=0;S<c.length;S++){if(c[S].value===m){c[S].selected=!0,x&&(c[S].defaultSelected=!0);return}h!==null||c[S].disabled||(h=c[S])}h!==null&&(h.selected=!0)}}function Xe(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return me({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Je(c,h){var m=h.value;if(m==null){if(m=h.children,h=h.defaultValue,m!=null){if(h!=null)throw Error(t(92));if(Ne(m)){if(1<m.length)throw Error(t(93));m=m[0]}h=m}h==null&&(h=""),m=h}c._wrapperState={initialValue:Ve(m)}}function ht(c,h){var m=Ve(h.value),x=Ve(h.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),h.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),x!=null&&(c.defaultValue=""+x)}function mt(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function St(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bt(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?St(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var _r,Ea=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,m,x,S){MSApp.execUnsafeLocalFunction(function(){return c(h,m,x,S)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(_r=_r||document.createElement("div"),_r.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=_r.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function Di(c,h){if(h){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=h;return}}c.textContent=h}var ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wa=["Webkit","ms","Moz","O"];Object.keys(ei).forEach(function(c){wa.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),ei[h]=ei[c]})});function Es(c,h,m){return h==null||typeof h=="boolean"||h===""?"":m||typeof h!="number"||h===0||ei.hasOwnProperty(c)&&ei[c]?(""+h).trim():h+"px"}function Xs(c,h){c=c.style;for(var m in h)if(h.hasOwnProperty(m)){var x=m.indexOf("--")===0,S=Es(m,h[m],x);m==="float"&&(m="cssFloat"),x?c.setProperty(m,S):c[m]=S}}var Sa=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ti(c,h){if(h){if(Sa[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function Ta(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ws=null;function Ss(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Gr=null,ni=null,pn=null;function Ts(c){if(c=ug(c)){if(typeof Gr!="function")throw Error(t(280));var h=c.stateNode;h&&(h=z1(h),Gr(c.stateNode,c.type,h))}}function Is(c){ni?pn?pn.push(c):pn=[c]:ni=c}function Yn(){if(ni){var c=ni,h=pn;if(pn=ni=null,Ts(c),h)for(c=0;c<h.length;c++)Ts(h[c])}}function qi(c,h){return c(h)}function Cr(){}var Xn=!1;function br(c,h,m){if(Xn)return c(h,m);Xn=!0;try{return qi(c,h,m)}finally{Xn=!1,(ni!==null||pn!==null)&&(Cr(),Yn())}}function Pr(c,h){var m=c.stateNode;if(m===null)return null;var x=z1(m);if(x===null)return null;m=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(c=c.type,x=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!x;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(t(231,h,typeof m));return m}var yr=!1;if(o)try{var Qt={};Object.defineProperty(Qt,"passive",{get:function(){yr=!0}}),window.addEventListener("test",Qt,Qt),window.removeEventListener("test",Qt,Qt)}catch{yr=!1}function rr(c,h,m,x,S,I,G,ie,ae){var we=Array.prototype.slice.call(arguments,3);try{h.apply(m,we)}catch(ze){this.onError(ze)}}var hr=!1,Zi=null,U=!1,Z=null,K={onError:function(c){hr=!0,Zi=c}};function X(c,h,m,x,S,I,G,ie,ae){hr=!1,Zi=null,rr.apply(K,arguments)}function J(c,h,m,x,S,I,G,ie,ae){if(X.apply(this,arguments),hr){if(hr){var we=Zi;hr=!1,Zi=null}else throw Error(t(198));U||(U=!0,Z=we)}}function te(c){var h=c,m=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(m=h.return),c=h.return;while(c)}return h.tag===3?m:null}function _e(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Pe(c){if(te(c)!==c)throw Error(t(188))}function pe(c){var h=c.alternate;if(!h){if(h=te(c),h===null)throw Error(t(188));return h!==c?null:c}for(var m=c,x=h;;){var S=m.return;if(S===null)break;var I=S.alternate;if(I===null){if(x=S.return,x!==null){m=x;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===m)return Pe(S),c;if(I===x)return Pe(S),h;I=I.sibling}throw Error(t(188))}if(m.return!==x.return)m=S,x=I;else{for(var G=!1,ie=S.child;ie;){if(ie===m){G=!0,m=S,x=I;break}if(ie===x){G=!0,x=S,m=I;break}ie=ie.sibling}if(!G){for(ie=I.child;ie;){if(ie===m){G=!0,m=I,x=S;break}if(ie===x){G=!0,x=I,m=S;break}ie=ie.sibling}if(!G)throw Error(t(189))}}if(m.alternate!==x)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?c:h}function ve(c){return c=pe(c),c!==null?Ee(c):null}function Ee(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=Ee(c);if(h!==null)return h;c=c.sibling}return null}var $e=e.unstable_scheduleCallback,et=e.unstable_cancelCallback,ut=e.unstable_shouldYield,We=e.unstable_requestPaint,He=e.unstable_now,Nt=e.unstable_getCurrentPriorityLevel,_n=e.unstable_ImmediatePriority,wn=e.unstable_UserBlockingPriority,$n=e.unstable_NormalPriority,Ia=e.unstable_LowPriority,qs=e.unstable_IdlePriority,As=null,fr=null;function Wl(c){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(As,c,void 0,(c.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:Su,io=Math.log,Zs=Math.LN2;function Su(c){return c>>>=0,c===0?32:31-(io(c)/Zs|0)|0}var so=64,Hl=4194304;function hn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Yo(c,h){var m=c.pendingLanes;if(m===0)return 0;var x=0,S=c.suspendedLanes,I=c.pingedLanes,G=m&268435455;if(G!==0){var ie=G&~S;ie!==0?x=hn(ie):(I&=G,I!==0&&(x=hn(I)))}else G=m&~S,G!==0?x=hn(G):I!==0&&(x=hn(I));if(x===0)return 0;if(h!==0&&h!==x&&(h&S)===0&&(S=x&-x,I=h&-h,S>=I||S===16&&(I&4194240)!==0))return h;if((x&4)!==0&&(x|=m&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=x;0<h;)m=31-qn(h),S=1<<m,x|=c[m],h&=~S;return x}function Tu(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iu(c,h){for(var m=c.suspendedLanes,x=c.pingedLanes,S=c.expirationTimes,I=c.pendingLanes;0<I;){var G=31-qn(I),ie=1<<G,ae=S[G];ae===-1?((ie&m)===0||(ie&x)!==0)&&(S[G]=Tu(ie,h)):ae<=h&&(c.expiredLanes|=ie),I&=~ie}}function z0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function $0(){var c=so;return so<<=1,(so&4194240)===0&&(so=64),c}function W0(c){for(var h=[],m=0;31>m;m++)h.push(c);return h}function Au(c,h,m){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-qn(h),c[h]=m}function VE(c,h){var m=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var x=c.eventTimes;for(c=c.expirationTimes;0<m;){var S=31-qn(m),I=1<<S;h[S]=0,x[S]=-1,c[S]=-1,m&=~I}}function H0(c,h){var m=c.entangledLanes|=h;for(c=c.entanglements;m;){var x=31-qn(m),S=1<<x;S&h|c[x]&h&&(c[x]|=h),m&=~S}}var Jt=0;function ao(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var K0,df,Y0,X0,q0,oo=!1,gf=[],lo=null,co=null,ri=null,Ru=new Map,Xo=new Map,Rs=[],R1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kl(c,h){switch(c){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Ru.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(h.pointerId)}}function Aa(c,h,m,x,S,I){return c===null||c.nativeEvent!==I?(c={blockedOn:h,domEventName:m,eventSystemFlags:x,nativeEvent:I,targetContainers:[S]},h!==null&&(h=ug(h),h!==null&&df(h)),c):(c.eventSystemFlags|=x,h=c.targetContainers,S!==null&&h.indexOf(S)===-1&&h.push(S),c)}function C1(c,h,m,x,S){switch(h){case"focusin":return lo=Aa(lo,c,h,m,x,S),!0;case"dragenter":return co=Aa(co,c,h,m,x,S),!0;case"mouseover":return ri=Aa(ri,c,h,m,x,S),!0;case"pointerover":var I=S.pointerId;return Ru.set(I,Aa(Ru.get(I)||null,c,h,m,x,S)),!0;case"gotpointercapture":return I=S.pointerId,Xo.set(I,Aa(Xo.get(I)||null,c,h,m,x,S)),!0}return!1}function mf(c){var h=ku(c.target);if(h!==null){var m=te(h);if(m!==null){if(h=m.tag,h===13){if(h=_e(m),h!==null){c.blockedOn=h,q0(c.priority,function(){Y0(m)});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Ln(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var m=pf(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var x=new m.constructor(m.type,m);ws=x,m.target.dispatchEvent(x),ws=null}else return h=ug(m),h!==null&&df(h),c.blockedOn=m,!1;h.shift()}return!0}function b1(c,h,m){Ln(c)&&m.delete(h)}function GE(){oo=!1,lo!==null&&Ln(lo)&&(lo=null),co!==null&&Ln(co)&&(co=null),ri!==null&&Ln(ri)&&(ri=null),Ru.forEach(b1),Xo.forEach(b1)}function Yl(c,h){c.blockedOn===h&&(c.blockedOn=null,oo||(oo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,GE)))}function Xl(c){function h(S){return Yl(S,c)}if(0<gf.length){Yl(gf[0],c);for(var m=1;m<gf.length;m++){var x=gf[m];x.blockedOn===c&&(x.blockedOn=null)}}for(lo!==null&&Yl(lo,c),co!==null&&Yl(co,c),ri!==null&&Yl(ri,c),Ru.forEach(h),Xo.forEach(h),m=0;m<Rs.length;m++)x=Rs[m],x.blockedOn===c&&(x.blockedOn=null);for(;0<Rs.length&&(m=Rs[0],m.blockedOn===null);)mf(m),m.blockedOn===null&&Rs.shift()}var qo=N.ReactCurrentBatchConfig,Zo=!0;function uo(c,h,m,x){var S=Jt,I=qo.transition;qo.transition=null;try{Jt=1,Z0(c,h,m,x)}finally{Jt=S,qo.transition=I}}function P1(c,h,m,x){var S=Jt,I=qo.transition;qo.transition=null;try{Jt=4,Z0(c,h,m,x)}finally{Jt=S,qo.transition=I}}function Z0(c,h,m,x){if(Zo){var S=pf(c,h,m,x);if(S===null)ZE(c,h,x,ho,m),Kl(c,x);else if(C1(S,c,h,m,x))x.stopPropagation();else if(Kl(c,x),h&4&&-1<R1.indexOf(c)){for(;S!==null;){var I=ug(S);if(I!==null&&K0(I),I=pf(c,h,m,x),I===null&&ZE(c,h,x,ho,m),I===S)break;S=I}S!==null&&x.stopPropagation()}else ZE(c,h,x,null,m)}}var ho=null;function pf(c,h,m,x){if(ho=null,c=Ss(x),c=ku(c),c!==null)if(h=te(c),h===null)c=null;else if(m=h.tag,m===13){if(c=_e(h),c!==null)return c;c=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return ho=c,null}function _f(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nt()){case _n:return 1;case wn:return 4;case $n:case Ia:return 16;case qs:return 536870912;default:return 16}default:return 16}}var Cs=null,yf=null,Qo=null;function k1(){if(Qo)return Qo;var c,h=yf,m=h.length,x,S="value"in Cs?Cs.value:Cs.textContent,I=S.length;for(c=0;c<m&&h[c]===S[c];c++);var G=m-c;for(x=1;x<=G&&h[m-x]===S[I-x];x++);return Qo=S.slice(c,1<x?1-x:void 0)}function Cu(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function fo(){return!0}function Q0(){return!1}function vi(c){function h(m,x,S,I,G){this._reactName=m,this._targetInst=S,this.type=x,this.nativeEvent=I,this.target=G,this.currentTarget=null;for(var ie in c)c.hasOwnProperty(ie)&&(m=c[ie],this[ie]=m?m(I):I[ie]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?fo:Q0,this.isPropagationStopped=Q0,this}return me(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),h}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bu=vi(go),ql=me({},go,{view:0,detail:0}),vf=vi(ql),xf,Ef,bs,Pu=me({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gt,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==bs&&(bs&&c.type==="mousemove"?(xf=c.screenX-bs.screenX,Ef=c.screenY-bs.screenY):Ef=xf=0,bs=c),xf)},movementY:function(c){return"movementY"in c?c.movementY:Ef}}),J0=vi(Pu),M1=me({},Pu,{dataTransfer:0}),N1=vi(M1),wf=me({},ql,{relatedTarget:0}),ii=vi(wf),L1=me({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),O1=vi(L1),Zl=me({},go,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_=vi(Zl),A=me({},go,{data:0}),L=vi(A),H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},de={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Se={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rt(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=Se[c])?!!h[c]:!1}function Gt(){return rt}var dr=me({},ql,{key:function(c){if(c.key){var h=H[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Cu(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?de[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gt,charCode:function(c){return c.type==="keypress"?Cu(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Cu(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Sn=vi(dr),vr=me({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ps=vi(vr),Jo=me({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gt}),mo=vi(Jo),po=me({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sf=vi(po),eg=me({},Pu,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),VV=vi(eg),GV=[9,13,27,32],BE=o&&"CompositionEvent"in window,tg=null;o&&"documentMode"in document&&(tg=document.documentMode);var BV=o&&"TextEvent"in window&&!tg,tb=o&&(!BE||tg&&8<tg&&11>=tg),nb=" ",rb=!1;function ib(c,h){switch(c){case"keyup":return GV.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sb(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Tf=!1;function UV(c,h){switch(c){case"compositionend":return sb(h);case"keypress":return h.which!==32?null:(rb=!0,nb);case"textInput":return c=h.data,c===nb&&rb?null:c;default:return null}}function zV(c,h){if(Tf)return c==="compositionend"||!BE&&ib(c,h)?(c=k1(),Qo=yf=Cs=null,Tf=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return tb&&h.locale!=="ko"?null:h.data;default:return null}}var $V={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ab(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!$V[c.type]:h==="textarea"}function ob(c,h,m,x){Is(x),h=G1(h,"onChange"),0<h.length&&(m=new bu("onChange","change",null,m,x),c.push({event:m,listeners:h}))}var ng=null,rg=null;function WV(c){Ib(c,0)}function D1(c){var h=bf(c);if(ue(h))return c}function HV(c,h){if(c==="change")return h}var lb=!1;if(o){var UE;if(o){var zE="oninput"in document;if(!zE){var cb=document.createElement("div");cb.setAttribute("oninput","return;"),zE=typeof cb.oninput=="function"}UE=zE}else UE=!1;lb=UE&&(!document.documentMode||9<document.documentMode)}function ub(){ng&&(ng.detachEvent("onpropertychange",hb),rg=ng=null)}function hb(c){if(c.propertyName==="value"&&D1(rg)){var h=[];ob(h,rg,c,Ss(c)),br(WV,h)}}function KV(c,h,m){c==="focusin"?(ub(),ng=h,rg=m,ng.attachEvent("onpropertychange",hb)):c==="focusout"&&ub()}function YV(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return D1(rg)}function XV(c,h){if(c==="click")return D1(h)}function qV(c,h){if(c==="input"||c==="change")return D1(h)}function ZV(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Ra=typeof Object.is=="function"?Object.is:ZV;function ig(c,h){if(Ra(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var m=Object.keys(c),x=Object.keys(h);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var S=m[x];if(!l.call(h,S)||!Ra(c[S],h[S]))return!1}return!0}function fb(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function db(c,h){var m=fb(c);c=0;for(var x;m;){if(m.nodeType===3){if(x=c+m.textContent.length,c<=h&&x>=h)return{node:m,offset:h-c};c=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=fb(m)}}function gb(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?gb(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function mb(){for(var c=window,h=C();h instanceof c.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)c=h.contentWindow;else break;h=C(c.document)}return h}function $E(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function QV(c){var h=mb(),m=c.focusedElem,x=c.selectionRange;if(h!==m&&m&&m.ownerDocument&&gb(m.ownerDocument.documentElement,m)){if(x!==null&&$E(m)){if(h=x.start,c=x.end,c===void 0&&(c=h),"selectionStart"in m)m.selectionStart=h,m.selectionEnd=Math.min(c,m.value.length);else if(c=(h=m.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var S=m.textContent.length,I=Math.min(x.start,S);x=x.end===void 0?I:Math.min(x.end,S),!c.extend&&I>x&&(S=x,x=I,I=S),S=db(m,I);var G=db(m,x);S&&G&&(c.rangeCount!==1||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==G.node||c.focusOffset!==G.offset)&&(h=h.createRange(),h.setStart(S.node,S.offset),c.removeAllRanges(),I>x?(c.addRange(h),c.extend(G.node,G.offset)):(h.setEnd(G.node,G.offset),c.addRange(h)))}}for(h=[],c=m;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<h.length;m++)c=h[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var JV=o&&"documentMode"in document&&11>=document.documentMode,If=null,WE=null,sg=null,HE=!1;function pb(c,h,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;HE||If==null||If!==C(x)||(x=If,"selectionStart"in x&&$E(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),sg&&ig(sg,x)||(sg=x,x=G1(WE,"onSelect"),0<x.length&&(h=new bu("onSelect","select",null,h,m),c.push({event:h,listeners:x}),h.target=If)))}function F1(c,h){var m={};return m[c.toLowerCase()]=h.toLowerCase(),m["Webkit"+c]="webkit"+h,m["Moz"+c]="moz"+h,m}var Af={animationend:F1("Animation","AnimationEnd"),animationiteration:F1("Animation","AnimationIteration"),animationstart:F1("Animation","AnimationStart"),transitionend:F1("Transition","TransitionEnd")},KE={},_b={};o&&(_b=document.createElement("div").style,"AnimationEvent"in window||(delete Af.animationend.animation,delete Af.animationiteration.animation,delete Af.animationstart.animation),"TransitionEvent"in window||delete Af.transitionend.transition);function j1(c){if(KE[c])return KE[c];if(!Af[c])return c;var h=Af[c],m;for(m in h)if(h.hasOwnProperty(m)&&m in _b)return KE[c]=h[m];return c}var yb=j1("animationend"),vb=j1("animationiteration"),xb=j1("animationstart"),Eb=j1("transitionend"),wb=new Map,Sb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ql(c,h){wb.set(c,h),s(h,[c])}for(var YE=0;YE<Sb.length;YE++){var XE=Sb[YE],eG=XE.toLowerCase(),tG=XE[0].toUpperCase()+XE.slice(1);Ql(eG,"on"+tG)}Ql(yb,"onAnimationEnd"),Ql(vb,"onAnimationIteration"),Ql(xb,"onAnimationStart"),Ql("dblclick","onDoubleClick"),Ql("focusin","onFocus"),Ql("focusout","onBlur"),Ql(Eb,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ag="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nG=new Set("cancel close invalid load scroll toggle".split(" ").concat(ag));function Tb(c,h,m){var x=c.type||"unknown-event";c.currentTarget=m,J(x,h,void 0,c),c.currentTarget=null}function Ib(c,h){h=(h&4)!==0;for(var m=0;m<c.length;m++){var x=c[m],S=x.event;x=x.listeners;e:{var I=void 0;if(h)for(var G=x.length-1;0<=G;G--){var ie=x[G],ae=ie.instance,we=ie.currentTarget;if(ie=ie.listener,ae!==I&&S.isPropagationStopped())break e;Tb(S,ie,we),I=ae}else for(G=0;G<x.length;G++){if(ie=x[G],ae=ie.instance,we=ie.currentTarget,ie=ie.listener,ae!==I&&S.isPropagationStopped())break e;Tb(S,ie,we),I=ae}}}if(U)throw c=Z,U=!1,Z=null,c}function jn(c,h){var m=h[rw];m===void 0&&(m=h[rw]=new Set);var x=c+"__bubble";m.has(x)||(Ab(h,c,2,!1),m.add(x))}function qE(c,h,m){var x=0;h&&(x|=4),Ab(m,c,x,h)}var V1="_reactListening"+Math.random().toString(36).slice(2);function og(c){if(!c[V1]){c[V1]=!0,r.forEach(function(m){m!=="selectionchange"&&(nG.has(m)||qE(m,!1,c),qE(m,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[V1]||(h[V1]=!0,qE("selectionchange",!1,h))}}function Ab(c,h,m,x){switch(_f(h)){case 1:var S=uo;break;case 4:S=P1;break;default:S=Z0}m=S.bind(null,h,m,c),S=void 0,!yr||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(S=!0),x?S!==void 0?c.addEventListener(h,m,{capture:!0,passive:S}):c.addEventListener(h,m,!0):S!==void 0?c.addEventListener(h,m,{passive:S}):c.addEventListener(h,m,!1)}function ZE(c,h,m,x,S){var I=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var G=x.tag;if(G===3||G===4){var ie=x.stateNode.containerInfo;if(ie===S||ie.nodeType===8&&ie.parentNode===S)break;if(G===4)for(G=x.return;G!==null;){var ae=G.tag;if((ae===3||ae===4)&&(ae=G.stateNode.containerInfo,ae===S||ae.nodeType===8&&ae.parentNode===S))return;G=G.return}for(;ie!==null;){if(G=ku(ie),G===null)return;if(ae=G.tag,ae===5||ae===6){x=I=G;continue e}ie=ie.parentNode}}x=x.return}br(function(){var we=I,ze=Ss(m),Ke=[];e:{var Be=wb.get(c);if(Be!==void 0){var gt=bu,yt=c;switch(c){case"keypress":if(Cu(m)===0)break e;case"keydown":case"keyup":gt=Sn;break;case"focusin":yt="focus",gt=ii;break;case"focusout":yt="blur",gt=ii;break;case"beforeblur":case"afterblur":gt=ii;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=J0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=N1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=mo;break;case yb:case vb:case xb:gt=O1;break;case Eb:gt=Sf;break;case"scroll":gt=vf;break;case"wheel":gt=VV;break;case"copy":case"cut":case"paste":gt=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Ps}var xt=(h&4)!==0,gr=!xt&&c==="scroll",fe=xt?Be!==null?Be+"Capture":null:Be;xt=[];for(var le=we,ye;le!==null;){ye=le;var Qe=ye.stateNode;if(ye.tag===5&&Qe!==null&&(ye=Qe,fe!==null&&(Qe=Pr(le,fe),Qe!=null&&xt.push(lg(le,Qe,ye)))),gr)break;le=le.return}0<xt.length&&(Be=new gt(Be,yt,null,m,ze),Ke.push({event:Be,listeners:xt}))}}if((h&7)===0){e:{if(Be=c==="mouseover"||c==="pointerover",gt=c==="mouseout"||c==="pointerout",Be&&m!==ws&&(yt=m.relatedTarget||m.fromElement)&&(ku(yt)||yt[el]))break e;if((gt||Be)&&(Be=ze.window===ze?ze:(Be=ze.ownerDocument)?Be.defaultView||Be.parentWindow:window,gt?(yt=m.relatedTarget||m.toElement,gt=we,yt=yt?ku(yt):null,yt!==null&&(gr=te(yt),yt!==gr||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(gt=null,yt=we),gt!==yt)){if(xt=J0,Qe="onMouseLeave",fe="onMouseEnter",le="mouse",(c==="pointerout"||c==="pointerover")&&(xt=Ps,Qe="onPointerLeave",fe="onPointerEnter",le="pointer"),gr=gt==null?Be:bf(gt),ye=yt==null?Be:bf(yt),Be=new xt(Qe,le+"leave",gt,m,ze),Be.target=gr,Be.relatedTarget=ye,Qe=null,ku(ze)===we&&(xt=new xt(fe,le+"enter",yt,m,ze),xt.target=ye,xt.relatedTarget=gr,Qe=xt),gr=Qe,gt&&yt)t:{for(xt=gt,fe=yt,le=0,ye=xt;ye;ye=Rf(ye))le++;for(ye=0,Qe=fe;Qe;Qe=Rf(Qe))ye++;for(;0<le-ye;)xt=Rf(xt),le--;for(;0<ye-le;)fe=Rf(fe),ye--;for(;le--;){if(xt===fe||fe!==null&&xt===fe.alternate)break t;xt=Rf(xt),fe=Rf(fe)}xt=null}else xt=null;gt!==null&&Rb(Ke,Be,gt,xt,!1),yt!==null&&gr!==null&&Rb(Ke,gr,yt,xt,!0)}}e:{if(Be=we?bf(we):window,gt=Be.nodeName&&Be.nodeName.toLowerCase(),gt==="select"||gt==="input"&&Be.type==="file")var wt=HV;else if(ab(Be))if(lb)wt=qV;else{wt=YV;var Ct=KV}else(gt=Be.nodeName)&&gt.toLowerCase()==="input"&&(Be.type==="checkbox"||Be.type==="radio")&&(wt=XV);if(wt&&(wt=wt(c,we))){ob(Ke,wt,m,ze);break e}Ct&&Ct(c,Be,we),c==="focusout"&&(Ct=Be._wrapperState)&&Ct.controlled&&Be.type==="number"&&se(Be,"number",Be.value)}switch(Ct=we?bf(we):window,c){case"focusin":(ab(Ct)||Ct.contentEditable==="true")&&(If=Ct,WE=we,sg=null);break;case"focusout":sg=WE=If=null;break;case"mousedown":HE=!0;break;case"contextmenu":case"mouseup":case"dragend":HE=!1,pb(Ke,m,ze);break;case"selectionchange":if(JV)break;case"keydown":case"keyup":pb(Ke,m,ze)}var bt;if(BE)e:{switch(c){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else Tf?ib(c,m)&&(Lt="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Lt="onCompositionStart");Lt&&(tb&&m.locale!=="ko"&&(Tf||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Tf&&(bt=k1()):(Cs=ze,yf="value"in Cs?Cs.value:Cs.textContent,Tf=!0)),Ct=G1(we,Lt),0<Ct.length&&(Lt=new L(Lt,c,null,m,ze),Ke.push({event:Lt,listeners:Ct}),bt?Lt.data=bt:(bt=sb(m),bt!==null&&(Lt.data=bt)))),(bt=BV?UV(c,m):zV(c,m))&&(we=G1(we,"onBeforeInput"),0<we.length&&(ze=new L("onBeforeInput","beforeinput",null,m,ze),Ke.push({event:ze,listeners:we}),ze.data=bt))}Ib(Ke,h)})}function lg(c,h,m){return{instance:c,listener:h,currentTarget:m}}function G1(c,h){for(var m=h+"Capture",x=[];c!==null;){var S=c,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Pr(c,m),I!=null&&x.unshift(lg(c,I,S)),I=Pr(c,h),I!=null&&x.push(lg(c,I,S))),c=c.return}return x}function Rf(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Rb(c,h,m,x,S){for(var I=h._reactName,G=[];m!==null&&m!==x;){var ie=m,ae=ie.alternate,we=ie.stateNode;if(ae!==null&&ae===x)break;ie.tag===5&&we!==null&&(ie=we,S?(ae=Pr(m,I),ae!=null&&G.unshift(lg(m,ae,ie))):S||(ae=Pr(m,I),ae!=null&&G.push(lg(m,ae,ie)))),m=m.return}G.length!==0&&c.push({event:h,listeners:G})}var rG=/\r\n?/g,iG=/\u0000|\uFFFD/g;function Cb(c){return(typeof c=="string"?c:""+c).replace(rG,`
`).replace(iG,"")}function B1(c,h,m){if(h=Cb(h),Cb(c)!==h&&m)throw Error(t(425))}function U1(){}var QE=null,JE=null;function ew(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var tw=typeof setTimeout=="function"?setTimeout:void 0,sG=typeof clearTimeout=="function"?clearTimeout:void 0,bb=typeof Promise=="function"?Promise:void 0,aG=typeof queueMicrotask=="function"?queueMicrotask:typeof bb<"u"?function(c){return bb.resolve(null).then(c).catch(oG)}:tw;function oG(c){setTimeout(function(){throw c})}function nw(c,h){var m=h,x=0;do{var S=m.nextSibling;if(c.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(x===0){c.removeChild(S),Xl(h);return}x--}else m!=="$"&&m!=="$?"&&m!=="$!"||x++;m=S}while(m);Xl(h)}function Jl(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function Pb(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return c;h--}else m==="/$"&&h++}c=c.previousSibling}return null}var Cf=Math.random().toString(36).slice(2),_o="__reactFiber$"+Cf,cg="__reactProps$"+Cf,el="__reactContainer$"+Cf,rw="__reactEvents$"+Cf,lG="__reactListeners$"+Cf,cG="__reactHandles$"+Cf;function ku(c){var h=c[_o];if(h)return h;for(var m=c.parentNode;m;){if(h=m[el]||m[_o]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(c=Pb(c);c!==null;){if(m=c[_o])return m;c=Pb(c)}return h}c=m,m=c.parentNode}return null}function ug(c){return c=c[_o]||c[el],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function bf(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function z1(c){return c[cg]||null}var iw=[],Pf=-1;function ec(c){return{current:c}}function Vn(c){0>Pf||(c.current=iw[Pf],iw[Pf]=null,Pf--)}function Dn(c,h){Pf++,iw[Pf]=c.current,c.current=h}var tc={},xi=ec(tc),Qi=ec(!1),Mu=tc;function kf(c,h){var m=c.type.contextTypes;if(!m)return tc;var x=c.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===h)return x.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in m)S[I]=h[I];return x&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=S),S}function Ji(c){return c=c.childContextTypes,c!=null}function $1(){Vn(Qi),Vn(xi)}function kb(c,h,m){if(xi.current!==tc)throw Error(t(168));Dn(xi,h),Dn(Qi,m)}function Mb(c,h,m){var x=c.stateNode;if(h=h.childContextTypes,typeof x.getChildContext!="function")return m;x=x.getChildContext();for(var S in x)if(!(S in h))throw Error(t(108,De(c)||"Unknown",S));return me({},m,x)}function W1(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||tc,Mu=xi.current,Dn(xi,c),Dn(Qi,Qi.current),!0}function Nb(c,h,m){var x=c.stateNode;if(!x)throw Error(t(169));m?(c=Mb(c,h,Mu),x.__reactInternalMemoizedMergedChildContext=c,Vn(Qi),Vn(xi),Dn(xi,c)):Vn(Qi),Dn(Qi,m)}var tl=null,H1=!1,sw=!1;function Lb(c){tl===null?tl=[c]:tl.push(c)}function uG(c){H1=!0,Lb(c)}function nc(){if(!sw&&tl!==null){sw=!0;var c=0,h=Jt;try{var m=tl;for(Jt=1;c<m.length;c++){var x=m[c];do x=x(!0);while(x!==null)}tl=null,H1=!1}catch(S){throw tl!==null&&(tl=tl.slice(c+1)),$e(_n,nc),S}finally{Jt=h,sw=!1}}return null}var Mf=[],Nf=0,K1=null,Y1=0,Qs=[],Js=0,Nu=null,nl=1,rl="";function Lu(c,h){Mf[Nf++]=Y1,Mf[Nf++]=K1,K1=c,Y1=h}function Ob(c,h,m){Qs[Js++]=nl,Qs[Js++]=rl,Qs[Js++]=Nu,Nu=c;var x=nl;c=rl;var S=32-qn(x)-1;x&=~(1<<S),m+=1;var I=32-qn(h)+S;if(30<I){var G=S-S%5;I=(x&(1<<G)-1).toString(32),x>>=G,S-=G,nl=1<<32-qn(h)+S|m<<S|x,rl=I+c}else nl=1<<I|m<<S|x,rl=c}function aw(c){c.return!==null&&(Lu(c,1),Ob(c,1,0))}function ow(c){for(;c===K1;)K1=Mf[--Nf],Mf[Nf]=null,Y1=Mf[--Nf],Mf[Nf]=null;for(;c===Nu;)Nu=Qs[--Js],Qs[Js]=null,rl=Qs[--Js],Qs[Js]=null,nl=Qs[--Js],Qs[Js]=null}var ks=null,Ms=null,Wn=!1,Ca=null;function Db(c,h){var m=ra(5,null,null,0);m.elementType="DELETED",m.stateNode=h,m.return=c,h=c.deletions,h===null?(c.deletions=[m],c.flags|=16):h.push(m)}function Fb(c,h){switch(c.tag){case 5:var m=c.type;return h=h.nodeType!==1||m.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,ks=c,Ms=Jl(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,ks=c,Ms=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(m=Nu!==null?{id:nl,overflow:rl}:null,c.memoizedState={dehydrated:h,treeContext:m,retryLane:1073741824},m=ra(18,null,null,0),m.stateNode=h,m.return=c,c.child=m,ks=c,Ms=null,!0):!1;default:return!1}}function lw(c){return(c.mode&1)!==0&&(c.flags&128)===0}function cw(c){if(Wn){var h=Ms;if(h){var m=h;if(!Fb(c,h)){if(lw(c))throw Error(t(418));h=Jl(m.nextSibling);var x=ks;h&&Fb(c,h)?Db(x,m):(c.flags=c.flags&-4097|2,Wn=!1,ks=c)}}else{if(lw(c))throw Error(t(418));c.flags=c.flags&-4097|2,Wn=!1,ks=c}}}function jb(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ks=c}function X1(c){if(c!==ks)return!1;if(!Wn)return jb(c),Wn=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!ew(c.type,c.memoizedProps)),h&&(h=Ms)){if(lw(c))throw Vb(),Error(t(418));for(;h;)Db(c,h),h=Jl(h.nextSibling)}if(jb(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(h===0){Ms=Jl(c.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++}c=c.nextSibling}Ms=null}}else Ms=ks?Jl(c.stateNode.nextSibling):null;return!0}function Vb(){for(var c=Ms;c;)c=Jl(c.nextSibling)}function Lf(){Ms=ks=null,Wn=!1}function uw(c){Ca===null?Ca=[c]:Ca.push(c)}var hG=N.ReactCurrentBatchConfig;function hg(c,h,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var x=m.stateNode}if(!x)throw Error(t(147,c));var S=x,I=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(G){var ie=S.refs;G===null?delete ie[I]:ie[I]=G},h._stringRef=I,h)}if(typeof c!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,c))}return c}function q1(c,h){throw c=Object.prototype.toString.call(h),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function Gb(c){var h=c._init;return h(c._payload)}function Bb(c){function h(fe,le){if(c){var ye=fe.deletions;ye===null?(fe.deletions=[le],fe.flags|=16):ye.push(le)}}function m(fe,le){if(!c)return null;for(;le!==null;)h(fe,le),le=le.sibling;return null}function x(fe,le){for(fe=new Map;le!==null;)le.key!==null?fe.set(le.key,le):fe.set(le.index,le),le=le.sibling;return fe}function S(fe,le){return fe=uc(fe,le),fe.index=0,fe.sibling=null,fe}function I(fe,le,ye){return fe.index=ye,c?(ye=fe.alternate,ye!==null?(ye=ye.index,ye<le?(fe.flags|=2,le):ye):(fe.flags|=2,le)):(fe.flags|=1048576,le)}function G(fe){return c&&fe.alternate===null&&(fe.flags|=2),fe}function ie(fe,le,ye,Qe){return le===null||le.tag!==6?(le=t2(ye,fe.mode,Qe),le.return=fe,le):(le=S(le,ye),le.return=fe,le)}function ae(fe,le,ye,Qe){var wt=ye.type;return wt===P?ze(fe,le,ye.props.children,Qe,ye.key):le!==null&&(le.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===Fe&&Gb(wt)===le.type)?(Qe=S(le,ye.props),Qe.ref=hg(fe,le,ye),Qe.return=fe,Qe):(Qe=x_(ye.type,ye.key,ye.props,null,fe.mode,Qe),Qe.ref=hg(fe,le,ye),Qe.return=fe,Qe)}function we(fe,le,ye,Qe){return le===null||le.tag!==4||le.stateNode.containerInfo!==ye.containerInfo||le.stateNode.implementation!==ye.implementation?(le=n2(ye,fe.mode,Qe),le.return=fe,le):(le=S(le,ye.children||[]),le.return=fe,le)}function ze(fe,le,ye,Qe,wt){return le===null||le.tag!==7?(le=Uu(ye,fe.mode,Qe,wt),le.return=fe,le):(le=S(le,ye),le.return=fe,le)}function Ke(fe,le,ye){if(typeof le=="string"&&le!==""||typeof le=="number")return le=t2(""+le,fe.mode,ye),le.return=fe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case O:return ye=x_(le.type,le.key,le.props,null,fe.mode,ye),ye.ref=hg(fe,null,le),ye.return=fe,ye;case B:return le=n2(le,fe.mode,ye),le.return=fe,le;case Fe:var Qe=le._init;return Ke(fe,Qe(le._payload),ye)}if(Ne(le)||Re(le))return le=Uu(le,fe.mode,ye,null),le.return=fe,le;q1(fe,le)}return null}function Be(fe,le,ye,Qe){var wt=le!==null?le.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return wt!==null?null:ie(fe,le,""+ye,Qe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case O:return ye.key===wt?ae(fe,le,ye,Qe):null;case B:return ye.key===wt?we(fe,le,ye,Qe):null;case Fe:return wt=ye._init,Be(fe,le,wt(ye._payload),Qe)}if(Ne(ye)||Re(ye))return wt!==null?null:ze(fe,le,ye,Qe,null);q1(fe,ye)}return null}function gt(fe,le,ye,Qe,wt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return fe=fe.get(ye)||null,ie(le,fe,""+Qe,wt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case O:return fe=fe.get(Qe.key===null?ye:Qe.key)||null,ae(le,fe,Qe,wt);case B:return fe=fe.get(Qe.key===null?ye:Qe.key)||null,we(le,fe,Qe,wt);case Fe:var Ct=Qe._init;return gt(fe,le,ye,Ct(Qe._payload),wt)}if(Ne(Qe)||Re(Qe))return fe=fe.get(ye)||null,ze(le,fe,Qe,wt,null);q1(le,Qe)}return null}function yt(fe,le,ye,Qe){for(var wt=null,Ct=null,bt=le,Lt=le=0,zr=null;bt!==null&&Lt<ye.length;Lt++){bt.index>Lt?(zr=bt,bt=null):zr=bt.sibling;var on=Be(fe,bt,ye[Lt],Qe);if(on===null){bt===null&&(bt=zr);break}c&&bt&&on.alternate===null&&h(fe,bt),le=I(on,le,Lt),Ct===null?wt=on:Ct.sibling=on,Ct=on,bt=zr}if(Lt===ye.length)return m(fe,bt),Wn&&Lu(fe,Lt),wt;if(bt===null){for(;Lt<ye.length;Lt++)bt=Ke(fe,ye[Lt],Qe),bt!==null&&(le=I(bt,le,Lt),Ct===null?wt=bt:Ct.sibling=bt,Ct=bt);return Wn&&Lu(fe,Lt),wt}for(bt=x(fe,bt);Lt<ye.length;Lt++)zr=gt(bt,fe,Lt,ye[Lt],Qe),zr!==null&&(c&&zr.alternate!==null&&bt.delete(zr.key===null?Lt:zr.key),le=I(zr,le,Lt),Ct===null?wt=zr:Ct.sibling=zr,Ct=zr);return c&&bt.forEach(function(hc){return h(fe,hc)}),Wn&&Lu(fe,Lt),wt}function xt(fe,le,ye,Qe){var wt=Re(ye);if(typeof wt!="function")throw Error(t(150));if(ye=wt.call(ye),ye==null)throw Error(t(151));for(var Ct=wt=null,bt=le,Lt=le=0,zr=null,on=ye.next();bt!==null&&!on.done;Lt++,on=ye.next()){bt.index>Lt?(zr=bt,bt=null):zr=bt.sibling;var hc=Be(fe,bt,on.value,Qe);if(hc===null){bt===null&&(bt=zr);break}c&&bt&&hc.alternate===null&&h(fe,bt),le=I(hc,le,Lt),Ct===null?wt=hc:Ct.sibling=hc,Ct=hc,bt=zr}if(on.done)return m(fe,bt),Wn&&Lu(fe,Lt),wt;if(bt===null){for(;!on.done;Lt++,on=ye.next())on=Ke(fe,on.value,Qe),on!==null&&(le=I(on,le,Lt),Ct===null?wt=on:Ct.sibling=on,Ct=on);return Wn&&Lu(fe,Lt),wt}for(bt=x(fe,bt);!on.done;Lt++,on=ye.next())on=gt(bt,fe,Lt,on.value,Qe),on!==null&&(c&&on.alternate!==null&&bt.delete(on.key===null?Lt:on.key),le=I(on,le,Lt),Ct===null?wt=on:Ct.sibling=on,Ct=on);return c&&bt.forEach(function($G){return h(fe,$G)}),Wn&&Lu(fe,Lt),wt}function gr(fe,le,ye,Qe){if(typeof ye=="object"&&ye!==null&&ye.type===P&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case O:e:{for(var wt=ye.key,Ct=le;Ct!==null;){if(Ct.key===wt){if(wt=ye.type,wt===P){if(Ct.tag===7){m(fe,Ct.sibling),le=S(Ct,ye.props.children),le.return=fe,fe=le;break e}}else if(Ct.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===Fe&&Gb(wt)===Ct.type){m(fe,Ct.sibling),le=S(Ct,ye.props),le.ref=hg(fe,Ct,ye),le.return=fe,fe=le;break e}m(fe,Ct);break}else h(fe,Ct);Ct=Ct.sibling}ye.type===P?(le=Uu(ye.props.children,fe.mode,Qe,ye.key),le.return=fe,fe=le):(Qe=x_(ye.type,ye.key,ye.props,null,fe.mode,Qe),Qe.ref=hg(fe,le,ye),Qe.return=fe,fe=Qe)}return G(fe);case B:e:{for(Ct=ye.key;le!==null;){if(le.key===Ct)if(le.tag===4&&le.stateNode.containerInfo===ye.containerInfo&&le.stateNode.implementation===ye.implementation){m(fe,le.sibling),le=S(le,ye.children||[]),le.return=fe,fe=le;break e}else{m(fe,le);break}else h(fe,le);le=le.sibling}le=n2(ye,fe.mode,Qe),le.return=fe,fe=le}return G(fe);case Fe:return Ct=ye._init,gr(fe,le,Ct(ye._payload),Qe)}if(Ne(ye))return yt(fe,le,ye,Qe);if(Re(ye))return xt(fe,le,ye,Qe);q1(fe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,le!==null&&le.tag===6?(m(fe,le.sibling),le=S(le,ye),le.return=fe,fe=le):(m(fe,le),le=t2(ye,fe.mode,Qe),le.return=fe,fe=le),G(fe)):m(fe,le)}return gr}var Of=Bb(!0),Ub=Bb(!1),Z1=ec(null),Q1=null,Df=null,hw=null;function fw(){hw=Df=Q1=null}function dw(c){var h=Z1.current;Vn(Z1),c._currentValue=h}function gw(c,h,m){for(;c!==null;){var x=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),c===m)break;c=c.return}}function Ff(c,h){Q1=c,hw=Df=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(es=!0),c.firstContext=null)}function ea(c){var h=c._currentValue;if(hw!==c)if(c={context:c,memoizedValue:h,next:null},Df===null){if(Q1===null)throw Error(t(308));Df=c,Q1.dependencies={lanes:0,firstContext:c}}else Df=Df.next=c;return h}var Ou=null;function mw(c){Ou===null?Ou=[c]:Ou.push(c)}function zb(c,h,m,x){var S=h.interleaved;return S===null?(m.next=m,mw(h)):(m.next=S.next,S.next=m),h.interleaved=m,il(c,x)}function il(c,h){c.lanes|=h;var m=c.alternate;for(m!==null&&(m.lanes|=h),m=c,c=c.return;c!==null;)c.childLanes|=h,m=c.alternate,m!==null&&(m.childLanes|=h),m=c,c=c.return;return m.tag===3?m.stateNode:null}var rc=!1;function pw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $b(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function sl(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function ic(c,h,m){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,(rn&2)!==0){var S=x.pending;return S===null?h.next=h:(h.next=S.next,S.next=h),x.pending=h,il(c,m)}return S=x.interleaved,S===null?(h.next=h,mw(x)):(h.next=S.next,S.next=h),x.interleaved=h,il(c,m)}function J1(c,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194240)!==0)){var x=h.lanes;x&=c.pendingLanes,m|=x,h.lanes=m,H0(c,m)}}function Wb(c,h){var m=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var S=null,I=null;if(m=m.firstBaseUpdate,m!==null){do{var G={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};I===null?S=I=G:I=I.next=G,m=m.next}while(m!==null);I===null?S=I=h:I=I.next=h}else S=I=h;m={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:x.shared,effects:x.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=h}function e_(c,h,m,x){var S=c.updateQueue;rc=!1;var I=S.firstBaseUpdate,G=S.lastBaseUpdate,ie=S.shared.pending;if(ie!==null){S.shared.pending=null;var ae=ie,we=ae.next;ae.next=null,G===null?I=we:G.next=we,G=ae;var ze=c.alternate;ze!==null&&(ze=ze.updateQueue,ie=ze.lastBaseUpdate,ie!==G&&(ie===null?ze.firstBaseUpdate=we:ie.next=we,ze.lastBaseUpdate=ae))}if(I!==null){var Ke=S.baseState;G=0,ze=we=ae=null,ie=I;do{var Be=ie.lane,gt=ie.eventTime;if((x&Be)===Be){ze!==null&&(ze=ze.next={eventTime:gt,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var yt=c,xt=ie;switch(Be=h,gt=m,xt.tag){case 1:if(yt=xt.payload,typeof yt=="function"){Ke=yt.call(gt,Ke,Be);break e}Ke=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=xt.payload,Be=typeof yt=="function"?yt.call(gt,Ke,Be):yt,Be==null)break e;Ke=me({},Ke,Be);break e;case 2:rc=!0}}ie.callback!==null&&ie.lane!==0&&(c.flags|=64,Be=S.effects,Be===null?S.effects=[ie]:Be.push(ie))}else gt={eventTime:gt,lane:Be,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},ze===null?(we=ze=gt,ae=Ke):ze=ze.next=gt,G|=Be;if(ie=ie.next,ie===null){if(ie=S.shared.pending,ie===null)break;Be=ie,ie=Be.next,Be.next=null,S.lastBaseUpdate=Be,S.shared.pending=null}}while(!0);if(ze===null&&(ae=Ke),S.baseState=ae,S.firstBaseUpdate=we,S.lastBaseUpdate=ze,h=S.shared.interleaved,h!==null){S=h;do G|=S.lane,S=S.next;while(S!==h)}else I===null&&(S.shared.lanes=0);ju|=G,c.lanes=G,c.memoizedState=Ke}}function Hb(c,h,m){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var x=c[h],S=x.callback;if(S!==null){if(x.callback=null,x=m,typeof S!="function")throw Error(t(191,S));S.call(x)}}}var fg={},yo=ec(fg),dg=ec(fg),gg=ec(fg);function Du(c){if(c===fg)throw Error(t(174));return c}function _w(c,h){switch(Dn(gg,h),Dn(dg,c),Dn(yo,fg),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Bt(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Bt(h,c)}Vn(yo),Dn(yo,h)}function jf(){Vn(yo),Vn(dg),Vn(gg)}function Kb(c){Du(gg.current);var h=Du(yo.current),m=Bt(h,c.type);h!==m&&(Dn(dg,c),Dn(yo,m))}function yw(c){dg.current===c&&(Vn(yo),Vn(dg))}var Zn=ec(0);function t_(c){for(var h=c;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var vw=[];function xw(){for(var c=0;c<vw.length;c++)vw[c]._workInProgressVersionPrimary=null;vw.length=0}var n_=N.ReactCurrentDispatcher,Ew=N.ReactCurrentBatchConfig,Fu=0,Qn=null,kr=null,Br=null,r_=!1,mg=!1,pg=0,fG=0;function Ei(){throw Error(t(321))}function ww(c,h){if(h===null)return!1;for(var m=0;m<h.length&&m<c.length;m++)if(!Ra(c[m],h[m]))return!1;return!0}function Sw(c,h,m,x,S,I){if(Fu=I,Qn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,n_.current=c===null||c.memoizedState===null?pG:_G,c=m(x,S),mg){I=0;do{if(mg=!1,pg=0,25<=I)throw Error(t(301));I+=1,Br=kr=null,h.updateQueue=null,n_.current=yG,c=m(x,S)}while(mg)}if(n_.current=a_,h=kr!==null&&kr.next!==null,Fu=0,Br=kr=Qn=null,r_=!1,h)throw Error(t(300));return c}function Tw(){var c=pg!==0;return pg=0,c}function vo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?Qn.memoizedState=Br=c:Br=Br.next=c,Br}function ta(){if(kr===null){var c=Qn.alternate;c=c!==null?c.memoizedState:null}else c=kr.next;var h=Br===null?Qn.memoizedState:Br.next;if(h!==null)Br=h,kr=c;else{if(c===null)throw Error(t(310));kr=c,c={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Br===null?Qn.memoizedState=Br=c:Br=Br.next=c}return Br}function _g(c,h){return typeof h=="function"?h(c):h}function Iw(c){var h=ta(),m=h.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var x=kr,S=x.baseQueue,I=m.pending;if(I!==null){if(S!==null){var G=S.next;S.next=I.next,I.next=G}x.baseQueue=S=I,m.pending=null}if(S!==null){I=S.next,x=x.baseState;var ie=G=null,ae=null,we=I;do{var ze=we.lane;if((Fu&ze)===ze)ae!==null&&(ae=ae.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),x=we.hasEagerState?we.eagerState:c(x,we.action);else{var Ke={lane:ze,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};ae===null?(ie=ae=Ke,G=x):ae=ae.next=Ke,Qn.lanes|=ze,ju|=ze}we=we.next}while(we!==null&&we!==I);ae===null?G=x:ae.next=ie,Ra(x,h.memoizedState)||(es=!0),h.memoizedState=x,h.baseState=G,h.baseQueue=ae,m.lastRenderedState=x}if(c=m.interleaved,c!==null){S=c;do I=S.lane,Qn.lanes|=I,ju|=I,S=S.next;while(S!==c)}else S===null&&(m.lanes=0);return[h.memoizedState,m.dispatch]}function Aw(c){var h=ta(),m=h.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var x=m.dispatch,S=m.pending,I=h.memoizedState;if(S!==null){m.pending=null;var G=S=S.next;do I=c(I,G.action),G=G.next;while(G!==S);Ra(I,h.memoizedState)||(es=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),m.lastRenderedState=I}return[I,x]}function Yb(){}function Xb(c,h){var m=Qn,x=ta(),S=h(),I=!Ra(x.memoizedState,S);if(I&&(x.memoizedState=S,es=!0),x=x.queue,Rw(Qb.bind(null,m,x,c),[c]),x.getSnapshot!==h||I||Br!==null&&Br.memoizedState.tag&1){if(m.flags|=2048,yg(9,Zb.bind(null,m,x,S,h),void 0,null),Ur===null)throw Error(t(349));(Fu&30)!==0||qb(m,h,S)}return S}function qb(c,h,m){c.flags|=16384,c={getSnapshot:h,value:m},h=Qn.updateQueue,h===null?(h={lastEffect:null,stores:null},Qn.updateQueue=h,h.stores=[c]):(m=h.stores,m===null?h.stores=[c]:m.push(c))}function Zb(c,h,m,x){h.value=m,h.getSnapshot=x,Jb(h)&&eP(c)}function Qb(c,h,m){return m(function(){Jb(h)&&eP(c)})}function Jb(c){var h=c.getSnapshot;c=c.value;try{var m=h();return!Ra(c,m)}catch{return!0}}function eP(c){var h=il(c,1);h!==null&&Ma(h,c,1,-1)}function tP(c){var h=vo();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_g,lastRenderedState:c},h.queue=c,c=c.dispatch=mG.bind(null,Qn,c),[h.memoizedState,c]}function yg(c,h,m,x){return c={tag:c,create:h,destroy:m,deps:x,next:null},h=Qn.updateQueue,h===null?(h={lastEffect:null,stores:null},Qn.updateQueue=h,h.lastEffect=c.next=c):(m=h.lastEffect,m===null?h.lastEffect=c.next=c:(x=m.next,m.next=c,c.next=x,h.lastEffect=c)),c}function nP(){return ta().memoizedState}function i_(c,h,m,x){var S=vo();Qn.flags|=c,S.memoizedState=yg(1|h,m,void 0,x===void 0?null:x)}function s_(c,h,m,x){var S=ta();x=x===void 0?null:x;var I=void 0;if(kr!==null){var G=kr.memoizedState;if(I=G.destroy,x!==null&&ww(x,G.deps)){S.memoizedState=yg(h,m,I,x);return}}Qn.flags|=c,S.memoizedState=yg(1|h,m,I,x)}function rP(c,h){return i_(8390656,8,c,h)}function Rw(c,h){return s_(2048,8,c,h)}function iP(c,h){return s_(4,2,c,h)}function sP(c,h){return s_(4,4,c,h)}function aP(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function oP(c,h,m){return m=m!=null?m.concat([c]):null,s_(4,4,aP.bind(null,h,c),m)}function Cw(){}function lP(c,h){var m=ta();h=h===void 0?null:h;var x=m.memoizedState;return x!==null&&h!==null&&ww(h,x[1])?x[0]:(m.memoizedState=[c,h],c)}function cP(c,h){var m=ta();h=h===void 0?null:h;var x=m.memoizedState;return x!==null&&h!==null&&ww(h,x[1])?x[0]:(c=c(),m.memoizedState=[c,h],c)}function uP(c,h,m){return(Fu&21)===0?(c.baseState&&(c.baseState=!1,es=!0),c.memoizedState=m):(Ra(m,h)||(m=$0(),Qn.lanes|=m,ju|=m,c.baseState=!0),h)}function dG(c,h){var m=Jt;Jt=m!==0&&4>m?m:4,c(!0);var x=Ew.transition;Ew.transition={};try{c(!1),h()}finally{Jt=m,Ew.transition=x}}function hP(){return ta().memoizedState}function gG(c,h,m){var x=lc(c);if(m={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null},fP(c))dP(h,m);else if(m=zb(c,h,m,x),m!==null){var S=ji();Ma(m,c,x,S),gP(m,h,x)}}function mG(c,h,m){var x=lc(c),S={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null};if(fP(c))dP(h,S);else{var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var G=h.lastRenderedState,ie=I(G,m);if(S.hasEagerState=!0,S.eagerState=ie,Ra(ie,G)){var ae=h.interleaved;ae===null?(S.next=S,mw(h)):(S.next=ae.next,ae.next=S),h.interleaved=S;return}}catch{}m=zb(c,h,S,x),m!==null&&(S=ji(),Ma(m,c,x,S),gP(m,h,x))}}function fP(c){var h=c.alternate;return c===Qn||h!==null&&h===Qn}function dP(c,h){mg=r_=!0;var m=c.pending;m===null?h.next=h:(h.next=m.next,m.next=h),c.pending=h}function gP(c,h,m){if((m&4194240)!==0){var x=h.lanes;x&=c.pendingLanes,m|=x,h.lanes=m,H0(c,m)}}var a_={readContext:ea,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},pG={readContext:ea,useCallback:function(c,h){return vo().memoizedState=[c,h===void 0?null:h],c},useContext:ea,useEffect:rP,useImperativeHandle:function(c,h,m){return m=m!=null?m.concat([c]):null,i_(4194308,4,aP.bind(null,h,c),m)},useLayoutEffect:function(c,h){return i_(4194308,4,c,h)},useInsertionEffect:function(c,h){return i_(4,2,c,h)},useMemo:function(c,h){var m=vo();return h=h===void 0?null:h,c=c(),m.memoizedState=[c,h],c},useReducer:function(c,h,m){var x=vo();return h=m!==void 0?m(h):h,x.memoizedState=x.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},x.queue=c,c=c.dispatch=gG.bind(null,Qn,c),[x.memoizedState,c]},useRef:function(c){var h=vo();return c={current:c},h.memoizedState=c},useState:tP,useDebugValue:Cw,useDeferredValue:function(c){return vo().memoizedState=c},useTransition:function(){var c=tP(!1),h=c[0];return c=dG.bind(null,c[1]),vo().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,m){var x=Qn,S=vo();if(Wn){if(m===void 0)throw Error(t(407));m=m()}else{if(m=h(),Ur===null)throw Error(t(349));(Fu&30)!==0||qb(x,h,m)}S.memoizedState=m;var I={value:m,getSnapshot:h};return S.queue=I,rP(Qb.bind(null,x,I,c),[c]),x.flags|=2048,yg(9,Zb.bind(null,x,I,m,h),void 0,null),m},useId:function(){var c=vo(),h=Ur.identifierPrefix;if(Wn){var m=rl,x=nl;m=(x&~(1<<32-qn(x)-1)).toString(32)+m,h=":"+h+"R"+m,m=pg++,0<m&&(h+="H"+m.toString(32)),h+=":"}else m=fG++,h=":"+h+"r"+m.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},_G={readContext:ea,useCallback:lP,useContext:ea,useEffect:Rw,useImperativeHandle:oP,useInsertionEffect:iP,useLayoutEffect:sP,useMemo:cP,useReducer:Iw,useRef:nP,useState:function(){return Iw(_g)},useDebugValue:Cw,useDeferredValue:function(c){var h=ta();return uP(h,kr.memoizedState,c)},useTransition:function(){var c=Iw(_g)[0],h=ta().memoizedState;return[c,h]},useMutableSource:Yb,useSyncExternalStore:Xb,useId:hP,unstable_isNewReconciler:!1},yG={readContext:ea,useCallback:lP,useContext:ea,useEffect:Rw,useImperativeHandle:oP,useInsertionEffect:iP,useLayoutEffect:sP,useMemo:cP,useReducer:Aw,useRef:nP,useState:function(){return Aw(_g)},useDebugValue:Cw,useDeferredValue:function(c){var h=ta();return kr===null?h.memoizedState=c:uP(h,kr.memoizedState,c)},useTransition:function(){var c=Aw(_g)[0],h=ta().memoizedState;return[c,h]},useMutableSource:Yb,useSyncExternalStore:Xb,useId:hP,unstable_isNewReconciler:!1};function ba(c,h){if(c&&c.defaultProps){h=me({},h),c=c.defaultProps;for(var m in c)h[m]===void 0&&(h[m]=c[m]);return h}return h}function bw(c,h,m,x){h=c.memoizedState,m=m(x,h),m=m==null?h:me({},h,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var o_={isMounted:function(c){return(c=c._reactInternals)?te(c)===c:!1},enqueueSetState:function(c,h,m){c=c._reactInternals;var x=ji(),S=lc(c),I=sl(x,S);I.payload=h,m!=null&&(I.callback=m),h=ic(c,I,S),h!==null&&(Ma(h,c,S,x),J1(h,c,S))},enqueueReplaceState:function(c,h,m){c=c._reactInternals;var x=ji(),S=lc(c),I=sl(x,S);I.tag=1,I.payload=h,m!=null&&(I.callback=m),h=ic(c,I,S),h!==null&&(Ma(h,c,S,x),J1(h,c,S))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var m=ji(),x=lc(c),S=sl(m,x);S.tag=2,h!=null&&(S.callback=h),h=ic(c,S,x),h!==null&&(Ma(h,c,x,m),J1(h,c,x))}};function mP(c,h,m,x,S,I,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,I,G):h.prototype&&h.prototype.isPureReactComponent?!ig(m,x)||!ig(S,I):!0}function pP(c,h,m){var x=!1,S=tc,I=h.contextType;return typeof I=="object"&&I!==null?I=ea(I):(S=Ji(h)?Mu:xi.current,x=h.contextTypes,I=(x=x!=null)?kf(c,S):tc),h=new h(m,I),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=o_,c.stateNode=h,h._reactInternals=c,x&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=I),h}function _P(c,h,m,x){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,x),h.state!==c&&o_.enqueueReplaceState(h,h.state,null)}function Pw(c,h,m,x){var S=c.stateNode;S.props=m,S.state=c.memoizedState,S.refs={},pw(c);var I=h.contextType;typeof I=="object"&&I!==null?S.context=ea(I):(I=Ji(h)?Mu:xi.current,S.context=kf(c,I)),S.state=c.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(bw(c,h,I,m),S.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(h=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),h!==S.state&&o_.enqueueReplaceState(S,S.state,null),e_(c,m,S,x),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308)}function Vf(c,h){try{var m="",x=h;do m+=Q(x),x=x.return;while(x);var S=m}catch(I){S=`
Error generating stack: `+I.message+`
`+I.stack}return{value:c,source:h,stack:S,digest:null}}function kw(c,h,m){return{value:c,source:null,stack:m??null,digest:h??null}}function Mw(c,h){try{console.error(h.value)}catch(m){setTimeout(function(){throw m})}}var vG=typeof WeakMap=="function"?WeakMap:Map;function yP(c,h,m){m=sl(-1,m),m.tag=3,m.payload={element:null};var x=h.value;return m.callback=function(){g_||(g_=!0,Kw=x),Mw(c,h)},m}function vP(c,h,m){m=sl(-1,m),m.tag=3;var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var S=h.value;m.payload=function(){return x(S)},m.callback=function(){Mw(c,h)}}var I=c.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(m.callback=function(){Mw(c,h),typeof x!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var G=h.stack;this.componentDidCatch(h.value,{componentStack:G!==null?G:""})}),m}function xP(c,h,m){var x=c.pingCache;if(x===null){x=c.pingCache=new vG;var S=new Set;x.set(h,S)}else S=x.get(h),S===void 0&&(S=new Set,x.set(h,S));S.has(m)||(S.add(m),c=NG.bind(null,c,h,m),h.then(c,c))}function EP(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function wP(c,h,m,x,S){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(h=sl(-1,1),h.tag=2,ic(m,h,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=S,c)}var xG=N.ReactCurrentOwner,es=!1;function Fi(c,h,m,x){h.child=c===null?Ub(h,null,m,x):Of(h,c.child,m,x)}function SP(c,h,m,x,S){m=m.render;var I=h.ref;return Ff(h,S),x=Sw(c,h,m,x,I,S),m=Tw(),c!==null&&!es?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~S,al(c,h,S)):(Wn&&m&&aw(h),h.flags|=1,Fi(c,h,x,S),h.child)}function TP(c,h,m,x,S){if(c===null){var I=m.type;return typeof I=="function"&&!e2(I)&&I.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(h.tag=15,h.type=I,IP(c,h,I,x,S)):(c=x_(m.type,null,x,h,h.mode,S),c.ref=h.ref,c.return=h,h.child=c)}if(I=c.child,(c.lanes&S)===0){var G=I.memoizedProps;if(m=m.compare,m=m!==null?m:ig,m(G,x)&&c.ref===h.ref)return al(c,h,S)}return h.flags|=1,c=uc(I,x),c.ref=h.ref,c.return=h,h.child=c}function IP(c,h,m,x,S){if(c!==null){var I=c.memoizedProps;if(ig(I,x)&&c.ref===h.ref)if(es=!1,h.pendingProps=x=I,(c.lanes&S)!==0)(c.flags&131072)!==0&&(es=!0);else return h.lanes=c.lanes,al(c,h,S)}return Nw(c,h,m,x,S)}function AP(c,h,m){var x=h.pendingProps,S=x.children,I=c!==null?c.memoizedState:null;if(x.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dn(Bf,Ns),Ns|=m;else{if((m&1073741824)===0)return c=I!==null?I.baseLanes|m:m,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,Dn(Bf,Ns),Ns|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=I!==null?I.baseLanes:m,Dn(Bf,Ns),Ns|=x}else I!==null?(x=I.baseLanes|m,h.memoizedState=null):x=m,Dn(Bf,Ns),Ns|=x;return Fi(c,h,S,m),h.child}function RP(c,h){var m=h.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(h.flags|=512,h.flags|=2097152)}function Nw(c,h,m,x,S){var I=Ji(m)?Mu:xi.current;return I=kf(h,I),Ff(h,S),m=Sw(c,h,m,x,I,S),x=Tw(),c!==null&&!es?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~S,al(c,h,S)):(Wn&&x&&aw(h),h.flags|=1,Fi(c,h,m,S),h.child)}function CP(c,h,m,x,S){if(Ji(m)){var I=!0;W1(h)}else I=!1;if(Ff(h,S),h.stateNode===null)c_(c,h),pP(h,m,x),Pw(h,m,x,S),x=!0;else if(c===null){var G=h.stateNode,ie=h.memoizedProps;G.props=ie;var ae=G.context,we=m.contextType;typeof we=="object"&&we!==null?we=ea(we):(we=Ji(m)?Mu:xi.current,we=kf(h,we));var ze=m.getDerivedStateFromProps,Ke=typeof ze=="function"||typeof G.getSnapshotBeforeUpdate=="function";Ke||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ie!==x||ae!==we)&&_P(h,G,x,we),rc=!1;var Be=h.memoizedState;G.state=Be,e_(h,x,G,S),ae=h.memoizedState,ie!==x||Be!==ae||Qi.current||rc?(typeof ze=="function"&&(bw(h,m,ze,x),ae=h.memoizedState),(ie=rc||mP(h,m,ie,x,Be,ae,we))?(Ke||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(h.flags|=4194308)):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=ae),G.props=x,G.state=ae,G.context=we,x=ie):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{G=h.stateNode,$b(c,h),ie=h.memoizedProps,we=h.type===h.elementType?ie:ba(h.type,ie),G.props=we,Ke=h.pendingProps,Be=G.context,ae=m.contextType,typeof ae=="object"&&ae!==null?ae=ea(ae):(ae=Ji(m)?Mu:xi.current,ae=kf(h,ae));var gt=m.getDerivedStateFromProps;(ze=typeof gt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ie!==Ke||Be!==ae)&&_P(h,G,x,ae),rc=!1,Be=h.memoizedState,G.state=Be,e_(h,x,G,S);var yt=h.memoizedState;ie!==Ke||Be!==yt||Qi.current||rc?(typeof gt=="function"&&(bw(h,m,gt,x),yt=h.memoizedState),(we=rc||mP(h,m,we,x,Be,yt,ae)||!1)?(ze||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(x,yt,ae),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(x,yt,ae)),typeof G.componentDidUpdate=="function"&&(h.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof G.componentDidUpdate!="function"||ie===c.memoizedProps&&Be===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ie===c.memoizedProps&&Be===c.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=yt),G.props=x,G.state=yt,G.context=ae,x=we):(typeof G.componentDidUpdate!="function"||ie===c.memoizedProps&&Be===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ie===c.memoizedProps&&Be===c.memoizedState||(h.flags|=1024),x=!1)}return Lw(c,h,m,x,I,S)}function Lw(c,h,m,x,S,I){RP(c,h);var G=(h.flags&128)!==0;if(!x&&!G)return S&&Nb(h,m,!1),al(c,h,I);x=h.stateNode,xG.current=h;var ie=G&&typeof m.getDerivedStateFromError!="function"?null:x.render();return h.flags|=1,c!==null&&G?(h.child=Of(h,c.child,null,I),h.child=Of(h,null,ie,I)):Fi(c,h,ie,I),h.memoizedState=x.state,S&&Nb(h,m,!0),h.child}function bP(c){var h=c.stateNode;h.pendingContext?kb(c,h.pendingContext,h.pendingContext!==h.context):h.context&&kb(c,h.context,!1),_w(c,h.containerInfo)}function PP(c,h,m,x,S){return Lf(),uw(S),h.flags|=256,Fi(c,h,m,x),h.child}var Ow={dehydrated:null,treeContext:null,retryLane:0};function Dw(c){return{baseLanes:c,cachePool:null,transitions:null}}function kP(c,h,m){var x=h.pendingProps,S=Zn.current,I=!1,G=(h.flags&128)!==0,ie;if((ie=G)||(ie=c!==null&&c.memoizedState===null?!1:(S&2)!==0),ie?(I=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(S|=1),Dn(Zn,S&1),c===null)return cw(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(G=x.children,c=x.fallback,I?(x=h.mode,I=h.child,G={mode:"hidden",children:G},(x&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=G):I=E_(G,x,0,null),c=Uu(c,x,m,null),I.return=h,c.return=h,I.sibling=c,h.child=I,h.child.memoizedState=Dw(m),h.memoizedState=Ow,c):Fw(h,G));if(S=c.memoizedState,S!==null&&(ie=S.dehydrated,ie!==null))return EG(c,h,G,x,ie,S,m);if(I){I=x.fallback,G=h.mode,S=c.child,ie=S.sibling;var ae={mode:"hidden",children:x.children};return(G&1)===0&&h.child!==S?(x=h.child,x.childLanes=0,x.pendingProps=ae,h.deletions=null):(x=uc(S,ae),x.subtreeFlags=S.subtreeFlags&14680064),ie!==null?I=uc(ie,I):(I=Uu(I,G,m,null),I.flags|=2),I.return=h,x.return=h,x.sibling=I,h.child=x,x=I,I=h.child,G=c.child.memoizedState,G=G===null?Dw(m):{baseLanes:G.baseLanes|m,cachePool:null,transitions:G.transitions},I.memoizedState=G,I.childLanes=c.childLanes&~m,h.memoizedState=Ow,x}return I=c.child,c=I.sibling,x=uc(I,{mode:"visible",children:x.children}),(h.mode&1)===0&&(x.lanes=m),x.return=h,x.sibling=null,c!==null&&(m=h.deletions,m===null?(h.deletions=[c],h.flags|=16):m.push(c)),h.child=x,h.memoizedState=null,x}function Fw(c,h){return h=E_({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function l_(c,h,m,x){return x!==null&&uw(x),Of(h,c.child,null,m),c=Fw(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function EG(c,h,m,x,S,I,G){if(m)return h.flags&256?(h.flags&=-257,x=kw(Error(t(422))),l_(c,h,G,x)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(I=x.fallback,S=h.mode,x=E_({mode:"visible",children:x.children},S,0,null),I=Uu(I,S,G,null),I.flags|=2,x.return=h,I.return=h,x.sibling=I,h.child=x,(h.mode&1)!==0&&Of(h,c.child,null,G),h.child.memoizedState=Dw(G),h.memoizedState=Ow,I);if((h.mode&1)===0)return l_(c,h,G,null);if(S.data==="$!"){if(x=S.nextSibling&&S.nextSibling.dataset,x)var ie=x.dgst;return x=ie,I=Error(t(419)),x=kw(I,x,void 0),l_(c,h,G,x)}if(ie=(G&c.childLanes)!==0,es||ie){if(x=Ur,x!==null){switch(G&-G){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(x.suspendedLanes|G))!==0?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,il(c,S),Ma(x,c,S,-1))}return Jw(),x=kw(Error(t(421))),l_(c,h,G,x)}return S.data==="$?"?(h.flags|=128,h.child=c.child,h=LG.bind(null,c),S._reactRetry=h,null):(c=I.treeContext,Ms=Jl(S.nextSibling),ks=h,Wn=!0,Ca=null,c!==null&&(Qs[Js++]=nl,Qs[Js++]=rl,Qs[Js++]=Nu,nl=c.id,rl=c.overflow,Nu=h),h=Fw(h,x.children),h.flags|=4096,h)}function MP(c,h,m){c.lanes|=h;var x=c.alternate;x!==null&&(x.lanes|=h),gw(c.return,h,m)}function jw(c,h,m,x,S){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:S}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=x,I.tail=m,I.tailMode=S)}function NP(c,h,m){var x=h.pendingProps,S=x.revealOrder,I=x.tail;if(Fi(c,h,x.children,m),x=Zn.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&MP(c,m,h);else if(c.tag===19)MP(c,m,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}x&=1}if(Dn(Zn,x),(h.mode&1)===0)h.memoizedState=null;else switch(S){case"forwards":for(m=h.child,S=null;m!==null;)c=m.alternate,c!==null&&t_(c)===null&&(S=m),m=m.sibling;m=S,m===null?(S=h.child,h.child=null):(S=m.sibling,m.sibling=null),jw(h,!1,S,m,I);break;case"backwards":for(m=null,S=h.child,h.child=null;S!==null;){if(c=S.alternate,c!==null&&t_(c)===null){h.child=S;break}c=S.sibling,S.sibling=m,m=S,S=c}jw(h,!0,m,null,I);break;case"together":jw(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function c_(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function al(c,h,m){if(c!==null&&(h.dependencies=c.dependencies),ju|=h.lanes,(m&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(t(153));if(h.child!==null){for(c=h.child,m=uc(c,c.pendingProps),h.child=m,m.return=h;c.sibling!==null;)c=c.sibling,m=m.sibling=uc(c,c.pendingProps),m.return=h;m.sibling=null}return h.child}function wG(c,h,m){switch(h.tag){case 3:bP(h),Lf();break;case 5:Kb(h);break;case 1:Ji(h.type)&&W1(h);break;case 4:_w(h,h.stateNode.containerInfo);break;case 10:var x=h.type._context,S=h.memoizedProps.value;Dn(Z1,x._currentValue),x._currentValue=S;break;case 13:if(x=h.memoizedState,x!==null)return x.dehydrated!==null?(Dn(Zn,Zn.current&1),h.flags|=128,null):(m&h.child.childLanes)!==0?kP(c,h,m):(Dn(Zn,Zn.current&1),c=al(c,h,m),c!==null?c.sibling:null);Dn(Zn,Zn.current&1);break;case 19:if(x=(m&h.childLanes)!==0,(c.flags&128)!==0){if(x)return NP(c,h,m);h.flags|=128}if(S=h.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Dn(Zn,Zn.current),x)break;return null;case 22:case 23:return h.lanes=0,AP(c,h,m)}return al(c,h,m)}var LP,Vw,OP,DP;LP=function(c,h){for(var m=h.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Vw=function(){},OP=function(c,h,m,x){var S=c.memoizedProps;if(S!==x){c=h.stateNode,Du(yo.current);var I=null;switch(m){case"input":S=qe(c,S),x=qe(c,x),I=[];break;case"select":S=me({},S,{value:void 0}),x=me({},x,{value:void 0}),I=[];break;case"textarea":S=Xe(c,S),x=Xe(c,x),I=[];break;default:typeof S.onClick!="function"&&typeof x.onClick=="function"&&(c.onclick=U1)}ti(m,x);var G;m=null;for(we in S)if(!x.hasOwnProperty(we)&&S.hasOwnProperty(we)&&S[we]!=null)if(we==="style"){var ie=S[we];for(G in ie)ie.hasOwnProperty(G)&&(m||(m={}),m[G]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(i.hasOwnProperty(we)?I||(I=[]):(I=I||[]).push(we,null));for(we in x){var ae=x[we];if(ie=S?.[we],x.hasOwnProperty(we)&&ae!==ie&&(ae!=null||ie!=null))if(we==="style")if(ie){for(G in ie)!ie.hasOwnProperty(G)||ae&&ae.hasOwnProperty(G)||(m||(m={}),m[G]="");for(G in ae)ae.hasOwnProperty(G)&&ie[G]!==ae[G]&&(m||(m={}),m[G]=ae[G])}else m||(I||(I=[]),I.push(we,m)),m=ae;else we==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ie=ie?ie.__html:void 0,ae!=null&&ie!==ae&&(I=I||[]).push(we,ae)):we==="children"?typeof ae!="string"&&typeof ae!="number"||(I=I||[]).push(we,""+ae):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(i.hasOwnProperty(we)?(ae!=null&&we==="onScroll"&&jn("scroll",c),I||ie===ae||(I=[])):(I=I||[]).push(we,ae))}m&&(I=I||[]).push("style",m);var we=I;(h.updateQueue=we)&&(h.flags|=4)}},DP=function(c,h,m,x){m!==x&&(h.flags|=4)};function vg(c,h){if(!Wn)switch(c.tailMode){case"hidden":h=c.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function wi(c){var h=c.alternate!==null&&c.alternate.child===c.child,m=0,x=0;if(h)for(var S=c.child;S!==null;)m|=S.lanes|S.childLanes,x|=S.subtreeFlags&14680064,x|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)m|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=x,c.childLanes=m,h}function SG(c,h,m){var x=h.pendingProps;switch(ow(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wi(h),null;case 1:return Ji(h.type)&&$1(),wi(h),null;case 3:return x=h.stateNode,jf(),Vn(Qi),Vn(xi),xw(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(c===null||c.child===null)&&(X1(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Ca!==null&&(qw(Ca),Ca=null))),Vw(c,h),wi(h),null;case 5:yw(h);var S=Du(gg.current);if(m=h.type,c!==null&&h.stateNode!=null)OP(c,h,m,x,S),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!x){if(h.stateNode===null)throw Error(t(166));return wi(h),null}if(c=Du(yo.current),X1(h)){x=h.stateNode,m=h.type;var I=h.memoizedProps;switch(x[_o]=h,x[cg]=I,c=(h.mode&1)!==0,m){case"dialog":jn("cancel",x),jn("close",x);break;case"iframe":case"object":case"embed":jn("load",x);break;case"video":case"audio":for(S=0;S<ag.length;S++)jn(ag[S],x);break;case"source":jn("error",x);break;case"img":case"image":case"link":jn("error",x),jn("load",x);break;case"details":jn("toggle",x);break;case"input":q(x,I),jn("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!I.multiple},jn("invalid",x);break;case"textarea":Je(x,I),jn("invalid",x)}ti(m,I),S=null;for(var G in I)if(I.hasOwnProperty(G)){var ie=I[G];G==="children"?typeof ie=="string"?x.textContent!==ie&&(I.suppressHydrationWarning!==!0&&B1(x.textContent,ie,c),S=["children",ie]):typeof ie=="number"&&x.textContent!==""+ie&&(I.suppressHydrationWarning!==!0&&B1(x.textContent,ie,c),S=["children",""+ie]):i.hasOwnProperty(G)&&ie!=null&&G==="onScroll"&&jn("scroll",x)}switch(m){case"input":Te(x),z(x,I,!0);break;case"textarea":Te(x),mt(x);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(x.onclick=U1)}x=S,h.updateQueue=x,x!==null&&(h.flags|=4)}else{G=S.nodeType===9?S:S.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=St(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof x.is=="string"?c=G.createElement(m,{is:x.is}):(c=G.createElement(m),m==="select"&&(G=c,x.multiple?G.multiple=!0:x.size&&(G.size=x.size))):c=G.createElementNS(c,m),c[_o]=h,c[cg]=x,LP(c,h,!1,!1),h.stateNode=c;e:{switch(G=Ta(m,x),m){case"dialog":jn("cancel",c),jn("close",c),S=x;break;case"iframe":case"object":case"embed":jn("load",c),S=x;break;case"video":case"audio":for(S=0;S<ag.length;S++)jn(ag[S],c);S=x;break;case"source":jn("error",c),S=x;break;case"img":case"image":case"link":jn("error",c),jn("load",c),S=x;break;case"details":jn("toggle",c),S=x;break;case"input":q(c,x),S=qe(c,x),jn("invalid",c);break;case"option":S=x;break;case"select":c._wrapperState={wasMultiple:!!x.multiple},S=me({},x,{value:void 0}),jn("invalid",c);break;case"textarea":Je(c,x),S=Xe(c,x),jn("invalid",c);break;default:S=x}ti(m,S),ie=S;for(I in ie)if(ie.hasOwnProperty(I)){var ae=ie[I];I==="style"?Xs(c,ae):I==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&Ea(c,ae)):I==="children"?typeof ae=="string"?(m!=="textarea"||ae!=="")&&Di(c,ae):typeof ae=="number"&&Di(c,""+ae):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(i.hasOwnProperty(I)?ae!=null&&I==="onScroll"&&jn("scroll",c):ae!=null&&k(c,I,ae,G))}switch(m){case"input":Te(c),z(c,x,!1);break;case"textarea":Te(c),mt(c);break;case"option":x.value!=null&&c.setAttribute("value",""+Ve(x.value));break;case"select":c.multiple=!!x.multiple,I=x.value,I!=null?xe(c,!!x.multiple,I,!1):x.defaultValue!=null&&xe(c,!!x.multiple,x.defaultValue,!0);break;default:typeof S.onClick=="function"&&(c.onclick=U1)}switch(m){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return wi(h),null;case 6:if(c&&h.stateNode!=null)DP(c,h,c.memoizedProps,x);else{if(typeof x!="string"&&h.stateNode===null)throw Error(t(166));if(m=Du(gg.current),Du(yo.current),X1(h)){if(x=h.stateNode,m=h.memoizedProps,x[_o]=h,(I=x.nodeValue!==m)&&(c=ks,c!==null))switch(c.tag){case 3:B1(x.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&B1(x.nodeValue,m,(c.mode&1)!==0)}I&&(h.flags|=4)}else x=(m.nodeType===9?m:m.ownerDocument).createTextNode(x),x[_o]=h,h.stateNode=x}return wi(h),null;case 13:if(Vn(Zn),x=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Wn&&Ms!==null&&(h.mode&1)!==0&&(h.flags&128)===0)Vb(),Lf(),h.flags|=98560,I=!1;else if(I=X1(h),x!==null&&x.dehydrated!==null){if(c===null){if(!I)throw Error(t(318));if(I=h.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[_o]=h}else Lf(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;wi(h),I=!1}else Ca!==null&&(qw(Ca),Ca=null),I=!0;if(!I)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=m,h):(x=x!==null,x!==(c!==null&&c.memoizedState!==null)&&x&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(Zn.current&1)!==0?Mr===0&&(Mr=3):Jw())),h.updateQueue!==null&&(h.flags|=4),wi(h),null);case 4:return jf(),Vw(c,h),c===null&&og(h.stateNode.containerInfo),wi(h),null;case 10:return dw(h.type._context),wi(h),null;case 17:return Ji(h.type)&&$1(),wi(h),null;case 19:if(Vn(Zn),I=h.memoizedState,I===null)return wi(h),null;if(x=(h.flags&128)!==0,G=I.rendering,G===null)if(x)vg(I,!1);else{if(Mr!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(G=t_(c),G!==null){for(h.flags|=128,vg(I,!1),x=G.updateQueue,x!==null&&(h.updateQueue=x,h.flags|=4),h.subtreeFlags=0,x=m,m=h.child;m!==null;)I=m,c=x,I.flags&=14680066,G=I.alternate,G===null?(I.childLanes=0,I.lanes=c,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=G.childLanes,I.lanes=G.lanes,I.child=G.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=G.memoizedProps,I.memoizedState=G.memoizedState,I.updateQueue=G.updateQueue,I.type=G.type,c=G.dependencies,I.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return Dn(Zn,Zn.current&1|2),h.child}c=c.sibling}I.tail!==null&&He()>Uf&&(h.flags|=128,x=!0,vg(I,!1),h.lanes=4194304)}else{if(!x)if(c=t_(G),c!==null){if(h.flags|=128,x=!0,m=c.updateQueue,m!==null&&(h.updateQueue=m,h.flags|=4),vg(I,!0),I.tail===null&&I.tailMode==="hidden"&&!G.alternate&&!Wn)return wi(h),null}else 2*He()-I.renderingStartTime>Uf&&m!==1073741824&&(h.flags|=128,x=!0,vg(I,!1),h.lanes=4194304);I.isBackwards?(G.sibling=h.child,h.child=G):(m=I.last,m!==null?m.sibling=G:h.child=G,I.last=G)}return I.tail!==null?(h=I.tail,I.rendering=h,I.tail=h.sibling,I.renderingStartTime=He(),h.sibling=null,m=Zn.current,Dn(Zn,x?m&1|2:m&1),h):(wi(h),null);case 22:case 23:return Qw(),x=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==x&&(h.flags|=8192),x&&(h.mode&1)!==0?(Ns&1073741824)!==0&&(wi(h),h.subtreeFlags&6&&(h.flags|=8192)):wi(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function TG(c,h){switch(ow(h),h.tag){case 1:return Ji(h.type)&&$1(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return jf(),Vn(Qi),Vn(xi),xw(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return yw(h),null;case 13:if(Vn(Zn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(t(340));Lf()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Vn(Zn),null;case 4:return jf(),null;case 10:return dw(h.type._context),null;case 22:case 23:return Qw(),null;case 24:return null;default:return null}}var u_=!1,Si=!1,IG=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Gf(c,h){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(x){ir(c,h,x)}else m.current=null}function Gw(c,h,m){try{m()}catch(x){ir(c,h,x)}}var FP=!1;function AG(c,h){if(QE=Zo,c=mb(),$E(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var S=x.anchorOffset,I=x.focusNode;x=x.focusOffset;try{m.nodeType,I.nodeType}catch{m=null;break e}var G=0,ie=-1,ae=-1,we=0,ze=0,Ke=c,Be=null;t:for(;;){for(var gt;Ke!==m||S!==0&&Ke.nodeType!==3||(ie=G+S),Ke!==I||x!==0&&Ke.nodeType!==3||(ae=G+x),Ke.nodeType===3&&(G+=Ke.nodeValue.length),(gt=Ke.firstChild)!==null;)Be=Ke,Ke=gt;for(;;){if(Ke===c)break t;if(Be===m&&++we===S&&(ie=G),Be===I&&++ze===x&&(ae=G),(gt=Ke.nextSibling)!==null)break;Ke=Be,Be=Ke.parentNode}Ke=gt}m=ie===-1||ae===-1?null:{start:ie,end:ae}}else m=null}m=m||{start:0,end:0}}else m=null;for(JE={focusedElem:c,selectionRange:m},Zo=!1,pt=h;pt!==null;)if(h=pt,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,pt=c;else for(;pt!==null;){h=pt;try{var yt=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var xt=yt.memoizedProps,gr=yt.memoizedState,fe=h.stateNode,le=fe.getSnapshotBeforeUpdate(h.elementType===h.type?xt:ba(h.type,xt),gr);fe.__reactInternalSnapshotBeforeUpdate=le}break;case 3:var ye=h.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Qe){ir(h,h.return,Qe)}if(c=h.sibling,c!==null){c.return=h.return,pt=c;break}pt=h.return}return yt=FP,FP=!1,yt}function xg(c,h,m){var x=h.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var S=x=x.next;do{if((S.tag&c)===c){var I=S.destroy;S.destroy=void 0,I!==void 0&&Gw(h,m,I)}S=S.next}while(S!==x)}}function h_(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&c)===c){var x=m.create;m.destroy=x()}m=m.next}while(m!==h)}}function Bw(c){var h=c.ref;if(h!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof h=="function"?h(c):h.current=c}}function jP(c){var h=c.alternate;h!==null&&(c.alternate=null,jP(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[_o],delete h[cg],delete h[rw],delete h[lG],delete h[cG])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function VP(c){return c.tag===5||c.tag===3||c.tag===4}function GP(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||VP(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Uw(c,h,m){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?m.nodeType===8?m.parentNode.insertBefore(c,h):m.insertBefore(c,h):(m.nodeType===8?(h=m.parentNode,h.insertBefore(c,m)):(h=m,h.appendChild(c)),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=U1));else if(x!==4&&(c=c.child,c!==null))for(Uw(c,h,m),c=c.sibling;c!==null;)Uw(c,h,m),c=c.sibling}function zw(c,h,m){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?m.insertBefore(c,h):m.appendChild(c);else if(x!==4&&(c=c.child,c!==null))for(zw(c,h,m),c=c.sibling;c!==null;)zw(c,h,m),c=c.sibling}var si=null,Pa=!1;function sc(c,h,m){for(m=m.child;m!==null;)BP(c,h,m),m=m.sibling}function BP(c,h,m){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(As,m)}catch{}switch(m.tag){case 5:Si||Gf(m,h);case 6:var x=si,S=Pa;si=null,sc(c,h,m),si=x,Pa=S,si!==null&&(Pa?(c=si,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):si.removeChild(m.stateNode));break;case 18:si!==null&&(Pa?(c=si,m=m.stateNode,c.nodeType===8?nw(c.parentNode,m):c.nodeType===1&&nw(c,m),Xl(c)):nw(si,m.stateNode));break;case 4:x=si,S=Pa,si=m.stateNode.containerInfo,Pa=!0,sc(c,h,m),si=x,Pa=S;break;case 0:case 11:case 14:case 15:if(!Si&&(x=m.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){S=x=x.next;do{var I=S,G=I.destroy;I=I.tag,G!==void 0&&((I&2)!==0||(I&4)!==0)&&Gw(m,h,G),S=S.next}while(S!==x)}sc(c,h,m);break;case 1:if(!Si&&(Gf(m,h),x=m.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=m.memoizedProps,x.state=m.memoizedState,x.componentWillUnmount()}catch(ie){ir(m,h,ie)}sc(c,h,m);break;case 21:sc(c,h,m);break;case 22:m.mode&1?(Si=(x=Si)||m.memoizedState!==null,sc(c,h,m),Si=x):sc(c,h,m);break;default:sc(c,h,m)}}function UP(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new IG),h.forEach(function(x){var S=OG.bind(null,c,x);m.has(x)||(m.add(x),x.then(S,S))})}}function ka(c,h){var m=h.deletions;if(m!==null)for(var x=0;x<m.length;x++){var S=m[x];try{var I=c,G=h,ie=G;e:for(;ie!==null;){switch(ie.tag){case 5:si=ie.stateNode,Pa=!1;break e;case 3:si=ie.stateNode.containerInfo,Pa=!0;break e;case 4:si=ie.stateNode.containerInfo,Pa=!0;break e}ie=ie.return}if(si===null)throw Error(t(160));BP(I,G,S),si=null,Pa=!1;var ae=S.alternate;ae!==null&&(ae.return=null),S.return=null}catch(we){ir(S,h,we)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)zP(h,c),h=h.sibling}function zP(c,h){var m=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(ka(h,c),xo(c),x&4){try{xg(3,c,c.return),h_(3,c)}catch(xt){ir(c,c.return,xt)}try{xg(5,c,c.return)}catch(xt){ir(c,c.return,xt)}}break;case 1:ka(h,c),xo(c),x&512&&m!==null&&Gf(m,m.return);break;case 5:if(ka(h,c),xo(c),x&512&&m!==null&&Gf(m,m.return),c.flags&32){var S=c.stateNode;try{Di(S,"")}catch(xt){ir(c,c.return,xt)}}if(x&4&&(S=c.stateNode,S!=null)){var I=c.memoizedProps,G=m!==null?m.memoizedProps:I,ie=c.type,ae=c.updateQueue;if(c.updateQueue=null,ae!==null)try{ie==="input"&&I.type==="radio"&&I.name!=null&&ft(S,I),Ta(ie,G);var we=Ta(ie,I);for(G=0;G<ae.length;G+=2){var ze=ae[G],Ke=ae[G+1];ze==="style"?Xs(S,Ke):ze==="dangerouslySetInnerHTML"?Ea(S,Ke):ze==="children"?Di(S,Ke):k(S,ze,Ke,we)}switch(ie){case"input":Y(S,I);break;case"textarea":ht(S,I);break;case"select":var Be=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var gt=I.value;gt!=null?xe(S,!!I.multiple,gt,!1):Be!==!!I.multiple&&(I.defaultValue!=null?xe(S,!!I.multiple,I.defaultValue,!0):xe(S,!!I.multiple,I.multiple?[]:"",!1))}S[cg]=I}catch(xt){ir(c,c.return,xt)}}break;case 6:if(ka(h,c),xo(c),x&4){if(c.stateNode===null)throw Error(t(162));S=c.stateNode,I=c.memoizedProps;try{S.nodeValue=I}catch(xt){ir(c,c.return,xt)}}break;case 3:if(ka(h,c),xo(c),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Xl(h.containerInfo)}catch(xt){ir(c,c.return,xt)}break;case 4:ka(h,c),xo(c);break;case 13:ka(h,c),xo(c),S=c.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(Hw=He())),x&4&&UP(c);break;case 22:if(ze=m!==null&&m.memoizedState!==null,c.mode&1?(Si=(we=Si)||ze,ka(h,c),Si=we):ka(h,c),xo(c),x&8192){if(we=c.memoizedState!==null,(c.stateNode.isHidden=we)&&!ze&&(c.mode&1)!==0)for(pt=c,ze=c.child;ze!==null;){for(Ke=pt=ze;pt!==null;){switch(Be=pt,gt=Be.child,Be.tag){case 0:case 11:case 14:case 15:xg(4,Be,Be.return);break;case 1:Gf(Be,Be.return);var yt=Be.stateNode;if(typeof yt.componentWillUnmount=="function"){x=Be,m=Be.return;try{h=x,yt.props=h.memoizedProps,yt.state=h.memoizedState,yt.componentWillUnmount()}catch(xt){ir(x,m,xt)}}break;case 5:Gf(Be,Be.return);break;case 22:if(Be.memoizedState!==null){HP(Ke);continue}}gt!==null?(gt.return=Be,pt=gt):HP(Ke)}ze=ze.sibling}e:for(ze=null,Ke=c;;){if(Ke.tag===5){if(ze===null){ze=Ke;try{S=Ke.stateNode,we?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(ie=Ke.stateNode,ae=Ke.memoizedProps.style,G=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,ie.style.display=Es("display",G))}catch(xt){ir(c,c.return,xt)}}}else if(Ke.tag===6){if(ze===null)try{Ke.stateNode.nodeValue=we?"":Ke.memoizedProps}catch(xt){ir(c,c.return,xt)}}else if((Ke.tag!==22&&Ke.tag!==23||Ke.memoizedState===null||Ke===c)&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===c)break e;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===c)break e;ze===Ke&&(ze=null),Ke=Ke.return}ze===Ke&&(ze=null),Ke.sibling.return=Ke.return,Ke=Ke.sibling}}break;case 19:ka(h,c),xo(c),x&4&&UP(c);break;case 21:break;default:ka(h,c),xo(c)}}function xo(c){var h=c.flags;if(h&2){try{e:{for(var m=c.return;m!==null;){if(VP(m)){var x=m;break e}m=m.return}throw Error(t(160))}switch(x.tag){case 5:var S=x.stateNode;x.flags&32&&(Di(S,""),x.flags&=-33);var I=GP(c);zw(c,I,S);break;case 3:case 4:var G=x.stateNode.containerInfo,ie=GP(c);Uw(c,ie,G);break;default:throw Error(t(161))}}catch(ae){ir(c,c.return,ae)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function RG(c,h,m){pt=c,$P(c)}function $P(c,h,m){for(var x=(c.mode&1)!==0;pt!==null;){var S=pt,I=S.child;if(S.tag===22&&x){var G=S.memoizedState!==null||u_;if(!G){var ie=S.alternate,ae=ie!==null&&ie.memoizedState!==null||Si;ie=u_;var we=Si;if(u_=G,(Si=ae)&&!we)for(pt=S;pt!==null;)G=pt,ae=G.child,G.tag===22&&G.memoizedState!==null?KP(S):ae!==null?(ae.return=G,pt=ae):KP(S);for(;I!==null;)pt=I,$P(I),I=I.sibling;pt=S,u_=ie,Si=we}WP(c)}else(S.subtreeFlags&8772)!==0&&I!==null?(I.return=S,pt=I):WP(c)}}function WP(c){for(;pt!==null;){var h=pt;if((h.flags&8772)!==0){var m=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Si||h_(5,h);break;case 1:var x=h.stateNode;if(h.flags&4&&!Si)if(m===null)x.componentDidMount();else{var S=h.elementType===h.type?m.memoizedProps:ba(h.type,m.memoizedProps);x.componentDidUpdate(S,m.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&Hb(h,I,x);break;case 3:var G=h.updateQueue;if(G!==null){if(m=null,h.child!==null)switch(h.child.tag){case 5:m=h.child.stateNode;break;case 1:m=h.child.stateNode}Hb(h,G,m)}break;case 5:var ie=h.stateNode;if(m===null&&h.flags&4){m=ie;var ae=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&m.focus();break;case"img":ae.src&&(m.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var we=h.alternate;if(we!==null){var ze=we.memoizedState;if(ze!==null){var Ke=ze.dehydrated;Ke!==null&&Xl(Ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Si||h.flags&512&&Bw(h)}catch(Be){ir(h,h.return,Be)}}if(h===c){pt=null;break}if(m=h.sibling,m!==null){m.return=h.return,pt=m;break}pt=h.return}}function HP(c){for(;pt!==null;){var h=pt;if(h===c){pt=null;break}var m=h.sibling;if(m!==null){m.return=h.return,pt=m;break}pt=h.return}}function KP(c){for(;pt!==null;){var h=pt;try{switch(h.tag){case 0:case 11:case 15:var m=h.return;try{h_(4,h)}catch(ae){ir(h,m,ae)}break;case 1:var x=h.stateNode;if(typeof x.componentDidMount=="function"){var S=h.return;try{x.componentDidMount()}catch(ae){ir(h,S,ae)}}var I=h.return;try{Bw(h)}catch(ae){ir(h,I,ae)}break;case 5:var G=h.return;try{Bw(h)}catch(ae){ir(h,G,ae)}}}catch(ae){ir(h,h.return,ae)}if(h===c){pt=null;break}var ie=h.sibling;if(ie!==null){ie.return=h.return,pt=ie;break}pt=h.return}}var CG=Math.ceil,f_=N.ReactCurrentDispatcher,$w=N.ReactCurrentOwner,na=N.ReactCurrentBatchConfig,rn=0,Ur=null,xr=null,ai=0,Ns=0,Bf=ec(0),Mr=0,Eg=null,ju=0,d_=0,Ww=0,wg=null,ts=null,Hw=0,Uf=1/0,ol=null,g_=!1,Kw=null,ac=null,m_=!1,oc=null,p_=0,Sg=0,Yw=null,__=-1,y_=0;function ji(){return(rn&6)!==0?He():__!==-1?__:__=He()}function lc(c){return(c.mode&1)===0?1:(rn&2)!==0&&ai!==0?ai&-ai:hG.transition!==null?(y_===0&&(y_=$0()),y_):(c=Jt,c!==0||(c=window.event,c=c===void 0?16:_f(c.type)),c)}function Ma(c,h,m,x){if(50<Sg)throw Sg=0,Yw=null,Error(t(185));Au(c,m,x),((rn&2)===0||c!==Ur)&&(c===Ur&&((rn&2)===0&&(d_|=m),Mr===4&&cc(c,ai)),ns(c,x),m===1&&rn===0&&(h.mode&1)===0&&(Uf=He()+500,H1&&nc()))}function ns(c,h){var m=c.callbackNode;Iu(c,h);var x=Yo(c,c===Ur?ai:0);if(x===0)m!==null&&et(m),c.callbackNode=null,c.callbackPriority=0;else if(h=x&-x,c.callbackPriority!==h){if(m!=null&&et(m),h===1)c.tag===0?uG(XP.bind(null,c)):Lb(XP.bind(null,c)),aG(function(){(rn&6)===0&&nc()}),m=null;else{switch(ao(x)){case 1:m=_n;break;case 4:m=wn;break;case 16:m=$n;break;case 536870912:m=qs;break;default:m=$n}m=r4(m,YP.bind(null,c))}c.callbackPriority=h,c.callbackNode=m}}function YP(c,h){if(__=-1,y_=0,(rn&6)!==0)throw Error(t(327));var m=c.callbackNode;if(zf()&&c.callbackNode!==m)return null;var x=Yo(c,c===Ur?ai:0);if(x===0)return null;if((x&30)!==0||(x&c.expiredLanes)!==0||h)h=v_(c,x);else{h=x;var S=rn;rn|=2;var I=ZP();(Ur!==c||ai!==h)&&(ol=null,Uf=He()+500,Gu(c,h));do try{kG();break}catch(ie){qP(c,ie)}while(!0);fw(),f_.current=I,rn=S,xr!==null?h=0:(Ur=null,ai=0,h=Mr)}if(h!==0){if(h===2&&(S=z0(c),S!==0&&(x=S,h=Xw(c,S))),h===1)throw m=Eg,Gu(c,0),cc(c,x),ns(c,He()),m;if(h===6)cc(c,x);else{if(S=c.current.alternate,(x&30)===0&&!bG(S)&&(h=v_(c,x),h===2&&(I=z0(c),I!==0&&(x=I,h=Xw(c,I))),h===1))throw m=Eg,Gu(c,0),cc(c,x),ns(c,He()),m;switch(c.finishedWork=S,c.finishedLanes=x,h){case 0:case 1:throw Error(t(345));case 2:Bu(c,ts,ol);break;case 3:if(cc(c,x),(x&130023424)===x&&(h=Hw+500-He(),10<h)){if(Yo(c,0)!==0)break;if(S=c.suspendedLanes,(S&x)!==x){ji(),c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=tw(Bu.bind(null,c,ts,ol),h);break}Bu(c,ts,ol);break;case 4:if(cc(c,x),(x&4194240)===x)break;for(h=c.eventTimes,S=-1;0<x;){var G=31-qn(x);I=1<<G,G=h[G],G>S&&(S=G),x&=~I}if(x=S,x=He()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*CG(x/1960))-x,10<x){c.timeoutHandle=tw(Bu.bind(null,c,ts,ol),x);break}Bu(c,ts,ol);break;case 5:Bu(c,ts,ol);break;default:throw Error(t(329))}}}return ns(c,He()),c.callbackNode===m?YP.bind(null,c):null}function Xw(c,h){var m=wg;return c.current.memoizedState.isDehydrated&&(Gu(c,h).flags|=256),c=v_(c,h),c!==2&&(h=ts,ts=m,h!==null&&qw(h)),c}function qw(c){ts===null?ts=c:ts.push.apply(ts,c)}function bG(c){for(var h=c;;){if(h.flags&16384){var m=h.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var x=0;x<m.length;x++){var S=m[x],I=S.getSnapshot;S=S.value;try{if(!Ra(I(),S))return!1}catch{return!1}}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function cc(c,h){for(h&=~Ww,h&=~d_,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var m=31-qn(h),x=1<<m;c[m]=-1,h&=~x}}function XP(c){if((rn&6)!==0)throw Error(t(327));zf();var h=Yo(c,0);if((h&1)===0)return ns(c,He()),null;var m=v_(c,h);if(c.tag!==0&&m===2){var x=z0(c);x!==0&&(h=x,m=Xw(c,x))}if(m===1)throw m=Eg,Gu(c,0),cc(c,h),ns(c,He()),m;if(m===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Bu(c,ts,ol),ns(c,He()),null}function Zw(c,h){var m=rn;rn|=1;try{return c(h)}finally{rn=m,rn===0&&(Uf=He()+500,H1&&nc())}}function Vu(c){oc!==null&&oc.tag===0&&(rn&6)===0&&zf();var h=rn;rn|=1;var m=na.transition,x=Jt;try{if(na.transition=null,Jt=1,c)return c()}finally{Jt=x,na.transition=m,rn=h,(rn&6)===0&&nc()}}function Qw(){Ns=Bf.current,Vn(Bf)}function Gu(c,h){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,sG(m)),xr!==null)for(m=xr.return;m!==null;){var x=m;switch(ow(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&$1();break;case 3:jf(),Vn(Qi),Vn(xi),xw();break;case 5:yw(x);break;case 4:jf();break;case 13:Vn(Zn);break;case 19:Vn(Zn);break;case 10:dw(x.type._context);break;case 22:case 23:Qw()}m=m.return}if(Ur=c,xr=c=uc(c.current,null),ai=Ns=h,Mr=0,Eg=null,Ww=d_=ju=0,ts=wg=null,Ou!==null){for(h=0;h<Ou.length;h++)if(m=Ou[h],x=m.interleaved,x!==null){m.interleaved=null;var S=x.next,I=m.pending;if(I!==null){var G=I.next;I.next=S,x.next=G}m.pending=x}Ou=null}return c}function qP(c,h){do{var m=xr;try{if(fw(),n_.current=a_,r_){for(var x=Qn.memoizedState;x!==null;){var S=x.queue;S!==null&&(S.pending=null),x=x.next}r_=!1}if(Fu=0,Br=kr=Qn=null,mg=!1,pg=0,$w.current=null,m===null||m.return===null){Mr=1,Eg=h,xr=null;break}e:{var I=c,G=m.return,ie=m,ae=h;if(h=ai,ie.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var we=ae,ze=ie,Ke=ze.tag;if((ze.mode&1)===0&&(Ke===0||Ke===11||Ke===15)){var Be=ze.alternate;Be?(ze.updateQueue=Be.updateQueue,ze.memoizedState=Be.memoizedState,ze.lanes=Be.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var gt=EP(G);if(gt!==null){gt.flags&=-257,wP(gt,G,ie,I,h),gt.mode&1&&xP(I,we,h),h=gt,ae=we;var yt=h.updateQueue;if(yt===null){var xt=new Set;xt.add(ae),h.updateQueue=xt}else yt.add(ae);break e}else{if((h&1)===0){xP(I,we,h),Jw();break e}ae=Error(t(426))}}else if(Wn&&ie.mode&1){var gr=EP(G);if(gr!==null){(gr.flags&65536)===0&&(gr.flags|=256),wP(gr,G,ie,I,h),uw(Vf(ae,ie));break e}}I=ae=Vf(ae,ie),Mr!==4&&(Mr=2),wg===null?wg=[I]:wg.push(I),I=G;do{switch(I.tag){case 3:I.flags|=65536,h&=-h,I.lanes|=h;var fe=yP(I,ae,h);Wb(I,fe);break e;case 1:ie=ae;var le=I.type,ye=I.stateNode;if((I.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(ac===null||!ac.has(ye)))){I.flags|=65536,h&=-h,I.lanes|=h;var Qe=vP(I,ie,h);Wb(I,Qe);break e}}I=I.return}while(I!==null)}JP(m)}catch(wt){h=wt,xr===m&&m!==null&&(xr=m=m.return);continue}break}while(!0)}function ZP(){var c=f_.current;return f_.current=a_,c===null?a_:c}function Jw(){(Mr===0||Mr===3||Mr===2)&&(Mr=4),Ur===null||(ju&268435455)===0&&(d_&268435455)===0||cc(Ur,ai)}function v_(c,h){var m=rn;rn|=2;var x=ZP();(Ur!==c||ai!==h)&&(ol=null,Gu(c,h));do try{PG();break}catch(S){qP(c,S)}while(!0);if(fw(),rn=m,f_.current=x,xr!==null)throw Error(t(261));return Ur=null,ai=0,Mr}function PG(){for(;xr!==null;)QP(xr)}function kG(){for(;xr!==null&&!ut();)QP(xr)}function QP(c){var h=n4(c.alternate,c,Ns);c.memoizedProps=c.pendingProps,h===null?JP(c):xr=h,$w.current=null}function JP(c){var h=c;do{var m=h.alternate;if(c=h.return,(h.flags&32768)===0){if(m=SG(m,h,Ns),m!==null){xr=m;return}}else{if(m=TG(m,h),m!==null){m.flags&=32767,xr=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Mr=6,xr=null;return}}if(h=h.sibling,h!==null){xr=h;return}xr=h=c}while(h!==null);Mr===0&&(Mr=5)}function Bu(c,h,m){var x=Jt,S=na.transition;try{na.transition=null,Jt=1,MG(c,h,m,x)}finally{na.transition=S,Jt=x}return null}function MG(c,h,m,x){do zf();while(oc!==null);if((rn&6)!==0)throw Error(t(327));m=c.finishedWork;var S=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var I=m.lanes|m.childLanes;if(VE(c,I),c===Ur&&(xr=Ur=null,ai=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||m_||(m_=!0,r4($n,function(){return zf(),null})),I=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||I){I=na.transition,na.transition=null;var G=Jt;Jt=1;var ie=rn;rn|=4,$w.current=null,AG(c,m),zP(m,c),QV(JE),Zo=!!QE,JE=QE=null,c.current=m,RG(m),We(),rn=ie,Jt=G,na.transition=I}else c.current=m;if(m_&&(m_=!1,oc=c,p_=S),I=c.pendingLanes,I===0&&(ac=null),Wl(m.stateNode),ns(c,He()),h!==null)for(x=c.onRecoverableError,m=0;m<h.length;m++)S=h[m],x(S.value,{componentStack:S.stack,digest:S.digest});if(g_)throw g_=!1,c=Kw,Kw=null,c;return(p_&1)!==0&&c.tag!==0&&zf(),I=c.pendingLanes,(I&1)!==0?c===Yw?Sg++:(Sg=0,Yw=c):Sg=0,nc(),null}function zf(){if(oc!==null){var c=ao(p_),h=na.transition,m=Jt;try{if(na.transition=null,Jt=16>c?16:c,oc===null)var x=!1;else{if(c=oc,oc=null,p_=0,(rn&6)!==0)throw Error(t(331));var S=rn;for(rn|=4,pt=c.current;pt!==null;){var I=pt,G=I.child;if((pt.flags&16)!==0){var ie=I.deletions;if(ie!==null){for(var ae=0;ae<ie.length;ae++){var we=ie[ae];for(pt=we;pt!==null;){var ze=pt;switch(ze.tag){case 0:case 11:case 15:xg(8,ze,I)}var Ke=ze.child;if(Ke!==null)Ke.return=ze,pt=Ke;else for(;pt!==null;){ze=pt;var Be=ze.sibling,gt=ze.return;if(jP(ze),ze===we){pt=null;break}if(Be!==null){Be.return=gt,pt=Be;break}pt=gt}}}var yt=I.alternate;if(yt!==null){var xt=yt.child;if(xt!==null){yt.child=null;do{var gr=xt.sibling;xt.sibling=null,xt=gr}while(xt!==null)}}pt=I}}if((I.subtreeFlags&2064)!==0&&G!==null)G.return=I,pt=G;else e:for(;pt!==null;){if(I=pt,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:xg(9,I,I.return)}var fe=I.sibling;if(fe!==null){fe.return=I.return,pt=fe;break e}pt=I.return}}var le=c.current;for(pt=le;pt!==null;){G=pt;var ye=G.child;if((G.subtreeFlags&2064)!==0&&ye!==null)ye.return=G,pt=ye;else e:for(G=le;pt!==null;){if(ie=pt,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:h_(9,ie)}}catch(wt){ir(ie,ie.return,wt)}if(ie===G){pt=null;break e}var Qe=ie.sibling;if(Qe!==null){Qe.return=ie.return,pt=Qe;break e}pt=ie.return}}if(rn=S,nc(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(As,c)}catch{}x=!0}return x}finally{Jt=m,na.transition=h}}return!1}function e4(c,h,m){h=Vf(m,h),h=yP(c,h,1),c=ic(c,h,1),h=ji(),c!==null&&(Au(c,1,h),ns(c,h))}function ir(c,h,m){if(c.tag===3)e4(c,c,m);else for(;h!==null;){if(h.tag===3){e4(h,c,m);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ac===null||!ac.has(x))){c=Vf(m,c),c=vP(h,c,1),h=ic(h,c,1),c=ji(),h!==null&&(Au(h,1,c),ns(h,c));break}}h=h.return}}function NG(c,h,m){var x=c.pingCache;x!==null&&x.delete(h),h=ji(),c.pingedLanes|=c.suspendedLanes&m,Ur===c&&(ai&m)===m&&(Mr===4||Mr===3&&(ai&130023424)===ai&&500>He()-Hw?Gu(c,0):Ww|=m),ns(c,h)}function t4(c,h){h===0&&((c.mode&1)===0?h=1:(h=Hl,Hl<<=1,(Hl&130023424)===0&&(Hl=4194304)));var m=ji();c=il(c,h),c!==null&&(Au(c,h,m),ns(c,m))}function LG(c){var h=c.memoizedState,m=0;h!==null&&(m=h.retryLane),t4(c,m)}function OG(c,h){var m=0;switch(c.tag){case 13:var x=c.stateNode,S=c.memoizedState;S!==null&&(m=S.retryLane);break;case 19:x=c.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(h),t4(c,m)}var n4;n4=function(c,h,m){if(c!==null)if(c.memoizedProps!==h.pendingProps||Qi.current)es=!0;else{if((c.lanes&m)===0&&(h.flags&128)===0)return es=!1,wG(c,h,m);es=(c.flags&131072)!==0}else es=!1,Wn&&(h.flags&1048576)!==0&&Ob(h,Y1,h.index);switch(h.lanes=0,h.tag){case 2:var x=h.type;c_(c,h),c=h.pendingProps;var S=kf(h,xi.current);Ff(h,m),S=Sw(null,h,x,c,S,m);var I=Tw();return h.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Ji(x)?(I=!0,W1(h)):I=!1,h.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,pw(h),S.updater=o_,h.stateNode=S,S._reactInternals=h,Pw(h,x,c,m),h=Lw(null,h,x,!0,I,m)):(h.tag=0,Wn&&I&&aw(h),Fi(null,h,S,m),h=h.child),h;case 16:x=h.elementType;e:{switch(c_(c,h),c=h.pendingProps,S=x._init,x=S(x._payload),h.type=x,S=h.tag=FG(x),c=ba(x,c),S){case 0:h=Nw(null,h,x,c,m);break e;case 1:h=CP(null,h,x,c,m);break e;case 11:h=SP(null,h,x,c,m);break e;case 14:h=TP(null,h,x,ba(x.type,c),m);break e}throw Error(t(306,x,""))}return h;case 0:return x=h.type,S=h.pendingProps,S=h.elementType===x?S:ba(x,S),Nw(c,h,x,S,m);case 1:return x=h.type,S=h.pendingProps,S=h.elementType===x?S:ba(x,S),CP(c,h,x,S,m);case 3:e:{if(bP(h),c===null)throw Error(t(387));x=h.pendingProps,I=h.memoizedState,S=I.element,$b(c,h),e_(h,x,null,m);var G=h.memoizedState;if(x=G.element,I.isDehydrated)if(I={element:x,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){S=Vf(Error(t(423)),h),h=PP(c,h,x,m,S);break e}else if(x!==S){S=Vf(Error(t(424)),h),h=PP(c,h,x,m,S);break e}else for(Ms=Jl(h.stateNode.containerInfo.firstChild),ks=h,Wn=!0,Ca=null,m=Ub(h,null,x,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Lf(),x===S){h=al(c,h,m);break e}Fi(c,h,x,m)}h=h.child}return h;case 5:return Kb(h),c===null&&cw(h),x=h.type,S=h.pendingProps,I=c!==null?c.memoizedProps:null,G=S.children,ew(x,S)?G=null:I!==null&&ew(x,I)&&(h.flags|=32),RP(c,h),Fi(c,h,G,m),h.child;case 6:return c===null&&cw(h),null;case 13:return kP(c,h,m);case 4:return _w(h,h.stateNode.containerInfo),x=h.pendingProps,c===null?h.child=Of(h,null,x,m):Fi(c,h,x,m),h.child;case 11:return x=h.type,S=h.pendingProps,S=h.elementType===x?S:ba(x,S),SP(c,h,x,S,m);case 7:return Fi(c,h,h.pendingProps,m),h.child;case 8:return Fi(c,h,h.pendingProps.children,m),h.child;case 12:return Fi(c,h,h.pendingProps.children,m),h.child;case 10:e:{if(x=h.type._context,S=h.pendingProps,I=h.memoizedProps,G=S.value,Dn(Z1,x._currentValue),x._currentValue=G,I!==null)if(Ra(I.value,G)){if(I.children===S.children&&!Qi.current){h=al(c,h,m);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var ie=I.dependencies;if(ie!==null){G=I.child;for(var ae=ie.firstContext;ae!==null;){if(ae.context===x){if(I.tag===1){ae=sl(-1,m&-m),ae.tag=2;var we=I.updateQueue;if(we!==null){we=we.shared;var ze=we.pending;ze===null?ae.next=ae:(ae.next=ze.next,ze.next=ae),we.pending=ae}}I.lanes|=m,ae=I.alternate,ae!==null&&(ae.lanes|=m),gw(I.return,m,h),ie.lanes|=m;break}ae=ae.next}}else if(I.tag===10)G=I.type===h.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(t(341));G.lanes|=m,ie=G.alternate,ie!==null&&(ie.lanes|=m),gw(G,m,h),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===h){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}Fi(c,h,S.children,m),h=h.child}return h;case 9:return S=h.type,x=h.pendingProps.children,Ff(h,m),S=ea(S),x=x(S),h.flags|=1,Fi(c,h,x,m),h.child;case 14:return x=h.type,S=ba(x,h.pendingProps),S=ba(x.type,S),TP(c,h,x,S,m);case 15:return IP(c,h,h.type,h.pendingProps,m);case 17:return x=h.type,S=h.pendingProps,S=h.elementType===x?S:ba(x,S),c_(c,h),h.tag=1,Ji(x)?(c=!0,W1(h)):c=!1,Ff(h,m),pP(h,x,S),Pw(h,x,S,m),Lw(null,h,x,!0,c,m);case 19:return NP(c,h,m);case 22:return AP(c,h,m)}throw Error(t(156,h.tag))};function r4(c,h){return $e(c,h)}function DG(c,h,m,x){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(c,h,m,x){return new DG(c,h,m,x)}function e2(c){return c=c.prototype,!(!c||!c.isReactComponent)}function FG(c){if(typeof c=="function")return e2(c)?1:0;if(c!=null){if(c=c.$$typeof,c===W)return 11;if(c===Le)return 14}return 2}function uc(c,h){var m=c.alternate;return m===null?(m=ra(c.tag,h,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=h,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,h=c.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function x_(c,h,m,x,S,I){var G=2;if(x=c,typeof c=="function")e2(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case P:return Uu(m.children,S,I,h);case b:G=8,S|=8;break;case M:return c=ra(12,m,h,S|2),c.elementType=M,c.lanes=I,c;case D:return c=ra(13,m,h,S),c.elementType=D,c.lanes=I,c;case Ie:return c=ra(19,m,h,S),c.elementType=Ie,c.lanes=I,c;case Ce:return E_(m,S,I,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case F:G=10;break e;case V:G=9;break e;case W:G=11;break e;case Le:G=14;break e;case Fe:G=16,x=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return h=ra(G,m,h,S),h.elementType=c,h.type=x,h.lanes=I,h}function Uu(c,h,m,x){return c=ra(7,c,x,h),c.lanes=m,c}function E_(c,h,m,x){return c=ra(22,c,x,h),c.elementType=Ce,c.lanes=m,c.stateNode={isHidden:!1},c}function t2(c,h,m){return c=ra(6,c,null,h),c.lanes=m,c}function n2(c,h,m){return h=ra(4,c.children!==null?c.children:[],c.key,h),h.lanes=m,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function jG(c,h,m,x,S){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=W0(0),this.expirationTimes=W0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W0(0),this.identifierPrefix=x,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function r2(c,h,m,x,S,I,G,ie,ae){return c=new jG(c,h,m,ie,ae),h===1?(h=1,I===!0&&(h|=8)):h=0,I=ra(3,null,null,h),c.current=I,I.stateNode=c,I.memoizedState={element:x,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},pw(I),c}function VG(c,h,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:x==null?null:""+x,children:c,containerInfo:h,implementation:m}}function i4(c){if(!c)return tc;c=c._reactInternals;e:{if(te(c)!==c||c.tag!==1)throw Error(t(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Ji(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(c.tag===1){var m=c.type;if(Ji(m))return Mb(c,m,h)}return h}function s4(c,h,m,x,S,I,G,ie,ae){return c=r2(m,x,!0,c,S,I,G,ie,ae),c.context=i4(null),m=c.current,x=ji(),S=lc(m),I=sl(x,S),I.callback=h??null,ic(m,I,S),c.current.lanes=S,Au(c,S,x),ns(c,x),c}function w_(c,h,m,x){var S=h.current,I=ji(),G=lc(S);return m=i4(m),h.context===null?h.context=m:h.pendingContext=m,h=sl(I,G),h.payload={element:c},x=x===void 0?null:x,x!==null&&(h.callback=x),c=ic(S,h,G),c!==null&&(Ma(c,S,G,I),J1(c,S,G)),G}function S_(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function a4(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<h?m:h}}function i2(c,h){a4(c,h),(c=c.alternate)&&a4(c,h)}function GG(){return null}var o4=typeof reportError=="function"?reportError:function(c){console.error(c)};function s2(c){this._internalRoot=c}T_.prototype.render=s2.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(t(409));w_(c,h,null,null)},T_.prototype.unmount=s2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Vu(function(){w_(null,c,null,null)}),h[el]=null}};function T_(c){this._internalRoot=c}T_.prototype.unstable_scheduleHydration=function(c){if(c){var h=X0();c={blockedOn:null,target:c,priority:h};for(var m=0;m<Rs.length&&h!==0&&h<Rs[m].priority;m++);Rs.splice(m,0,c),m===0&&mf(c)}};function a2(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function I_(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function l4(){}function BG(c,h,m,x,S){if(S){if(typeof x=="function"){var I=x;x=function(){var we=S_(G);I.call(we)}}var G=s4(h,x,c,0,null,!1,!1,"",l4);return c._reactRootContainer=G,c[el]=G.current,og(c.nodeType===8?c.parentNode:c),Vu(),G}for(;S=c.lastChild;)c.removeChild(S);if(typeof x=="function"){var ie=x;x=function(){var we=S_(ae);ie.call(we)}}var ae=r2(c,0,!1,null,null,!1,!1,"",l4);return c._reactRootContainer=ae,c[el]=ae.current,og(c.nodeType===8?c.parentNode:c),Vu(function(){w_(h,ae,m,x)}),ae}function A_(c,h,m,x,S){var I=m._reactRootContainer;if(I){var G=I;if(typeof S=="function"){var ie=S;S=function(){var ae=S_(G);ie.call(ae)}}w_(h,G,c,S)}else G=BG(m,h,c,S,x);return S_(G)}K0=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var m=hn(h.pendingLanes);m!==0&&(H0(h,m|1),ns(h,He()),(rn&6)===0&&(Uf=He()+500,nc()))}break;case 13:Vu(function(){var x=il(c,1);if(x!==null){var S=ji();Ma(x,c,1,S)}}),i2(c,1)}},df=function(c){if(c.tag===13){var h=il(c,134217728);if(h!==null){var m=ji();Ma(h,c,134217728,m)}i2(c,134217728)}},Y0=function(c){if(c.tag===13){var h=lc(c),m=il(c,h);if(m!==null){var x=ji();Ma(m,c,h,x)}i2(c,h)}},X0=function(){return Jt},q0=function(c,h){var m=Jt;try{return Jt=c,h()}finally{Jt=m}},Gr=function(c,h,m){switch(h){case"input":if(Y(c,m),h=m.name,m.type==="radio"&&h!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<m.length;h++){var x=m[h];if(x!==c&&x.form===c.form){var S=z1(x);if(!S)throw Error(t(90));ue(x),Y(x,S)}}}break;case"textarea":ht(c,m);break;case"select":h=m.value,h!=null&&xe(c,!!m.multiple,h,!1)}},qi=Zw,Cr=Vu;var UG={usingClientEntryPoint:!1,Events:[ug,bf,z1,Is,Yn,Zw]},Tg={findFiberByHostInstance:ku,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zG={bundleType:Tg.bundleType,version:Tg.version,rendererPackageName:Tg.rendererPackageName,rendererConfig:Tg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ve(c),c===null?null:c.stateNode},findFiberByHostInstance:Tg.findFiberByHostInstance||GG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var R_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!R_.isDisabled&&R_.supportsFiber)try{As=R_.inject(zG),fr=R_}catch{}}return rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UG,rs.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a2(h))throw Error(t(200));return VG(c,h,null,m)},rs.createRoot=function(c,h){if(!a2(c))throw Error(t(299));var m=!1,x="",S=o4;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onRecoverableError!==void 0&&(S=h.onRecoverableError)),h=r2(c,1,!1,null,null,m,!1,x,S),c[el]=h.current,og(c.nodeType===8?c.parentNode:c),new s2(h)},rs.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=ve(h),c=c===null?null:c.stateNode,c},rs.flushSync=function(c){return Vu(c)},rs.hydrate=function(c,h,m){if(!I_(h))throw Error(t(200));return A_(null,c,h,!0,m)},rs.hydrateRoot=function(c,h,m){if(!a2(c))throw Error(t(405));var x=m!=null&&m.hydratedSources||null,S=!1,I="",G=o4;if(m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onRecoverableError!==void 0&&(G=m.onRecoverableError)),h=s4(h,null,c,1,m??null,S,!1,I,G),c[el]=h.current,og(c),x)for(c=0;c<x.length;c++)m=x[c],S=m._getVersion,S=S(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,S]:h.mutableSourceEagerHydrationData.push(m,S);return new T_(h)},rs.render=function(c,h,m){if(!I_(h))throw Error(t(200));return A_(null,c,h,!1,m)},rs.unmountComponentAtNode=function(c){if(!I_(c))throw Error(t(40));return c._reactRootContainer?(Vu(function(){A_(null,null,c,!1,function(){c._reactRootContainer=null,c[el]=null})}),!0):!1},rs.unstable_batchedUpdates=Zw,rs.unstable_renderSubtreeIntoContainer=function(c,h,m,x){if(!I_(m))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return A_(c,h,m,!1,x)},rs.version="18.3.1-next-f1338f8080-20240426",rs}var p4;function ZG(){if(p4)return c2.exports;p4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),c2.exports=qG(),c2.exports}var _4;function QG(){if(_4)return C_;_4=1;var n=ZG();return C_.createRoot=n.createRoot,C_.hydrateRoot=n.hydrateRoot,C_}var JG=QG();const eB=MI(JG);var oe=Pp();const tB=MI(oe),as={ADD:"add",REMOVE:"remove"},Xd={PROPERTYCHANGE:"propertychange"},Ft={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class xx{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function nB(n,e,t){let r,i;t=t||_l;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function _l(n,e){return n>e?1:n<e?-1:0}function rB(n,e){return n<e?1:n>e?-1:0}function Ex(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function iB(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function yn(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function pu(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function sB(n,e,t){const r=e||_l;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function Dm(){return!0}function wx(){return!1}function Fm(){}function xO(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!pu(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function EO(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function kp(n){for(const e in n)delete n[e]}function Th(n){let e;for(e in n)return!1;return!e}class $o{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let Mp=class extends xx{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new $o(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let l;for(let u=0,f=i.length;u<f;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(s):l=i[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[r]===0){let u=o[r];for(delete o[r];u--;)this.removeEventListener(r,Fm);delete a[r]}return l}disposeInternal(){this.listeners_&&kp(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Fm,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function nn(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function $y(n,e,t,r){return nn(n,e,t,r,!0)}function Fn(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),kp(n))}class Np extends Mp{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ft.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=nn(this,e[s],t);return i}return nn(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=$y(this,e[s],t)}else r=$y(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)aB(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Np.prototype.on;Np.prototype.once;Np.prototype.un;function aB(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Fn(n[e]);else Fn(n)}function Mt(){throw new Error("Unimplemented abstract method.")}let oB=0;function un(n){return n.ol_uid||(n.ol_uid=String(++oB))}class y4 extends $o{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Wo extends Np{constructor(e){super(),this.on,this.once,this.un,un(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new y4(r,e,t)),r=Xd.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new y4(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Th(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const v4={LENGTH:"length"};class b_ extends $o{constructor(e,t,r){super(e),this.element=t,this.index=r}}class fa extends Wo{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(v4.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new b_(as.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new b_(as.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new b_(as.REMOVE,i,e)),this.dispatchEvent(new b_(as.ADD,t,e))}updateLength_(){this.set(v4.LENGTH,this.array_.length)}assertUnique_(e,t){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function En(n,e){if(!n)throw new Error(e)}let qa=class wO extends Wo{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new wO(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Fn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=nn(e,Ft.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?lB(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function lB(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(En(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const Wr={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function x4(n){const e=$s();for(let t=0,r=n.length;t<r;++t)sm(e,n[t]);return e}function jm(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function SO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Xh(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Ih(n,e){return NI(n,e[0],e[1])}function Nc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function NI(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function VS(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let l=Wr.UNKNOWN;return a<t?l=l|Wr.LEFT:a>i&&(l=l|Wr.RIGHT),o<r?l=l|Wr.BELOW:o>s&&(l=l|Wr.ABOVE),l===Wr.UNKNOWN&&(l=Wr.INTERSECTING),l}function $s(){return[1/0,1/0,-1/0,-1/0]}function Qc(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Lp(n){return Qc(1/0,1/0,-1/0,-1/0,n)}function TO(n,e){const t=n[0],r=n[1];return Qc(t,r,t,r,e)}function LI(n,e,t,r,i){const s=Lp(i);return AO(s,n,e,t,r)}function qd(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function IO(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function sm(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function AO(n,e,t,r,i){for(;t<r;t+=i)cB(n,e[t],e[t+1]);return n}function cB(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function RO(n,e){let t;return t=e(Sx(n)),t||(t=e(Tx(n)),t)||(t=e(Ix(n)),t)||(t=e(qh(n)),t)?t:!1}function GS(n){let e=0;return w0(n)||(e=Yt(n)*Sr(n)),e}function Sx(n){return[n[0],n[1]]}function Tx(n){return[n[2],n[1]]}function Fo(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function uB(n,e){let t;if(e==="bottom-left")t=Sx(n);else if(e==="bottom-right")t=Tx(n);else if(e==="top-left")t=qh(n);else if(e==="top-right")t=Ix(n);else throw new Error("Invalid corner");return t}function Wy(n,e,t,r,i){const[s,a,o,l,u,f,d,g]=CO(n,e,t,r);return Qc(Math.min(s,o,u,d),Math.min(a,l,f,g),Math.max(s,o,u,d),Math.max(a,l,f,g),i)}function CO(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),l=i*a,u=i*o,f=s*a,d=s*o,g=n[0],p=n[1];return[g-l+d,p-u-f,g-l-d,p-u+f,g+l-d,p+u+f,g+l+d,p+u-f,g-l+d,p-u-f]}function Sr(n){return n[3]-n[1]}function yl(n,e,t){const r=t||$s();return zi(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Lp(r),r}function qh(n){return[n[0],n[3]]}function Ix(n){return[n[2],n[3]]}function Yt(n){return n[2]-n[0]}function zi(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function w0(n){return n[2]<n[0]||n[3]<n[1]}function hB(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function fB(n,e,t){let r=!1;const i=VS(n,e),s=VS(n,t);if(i===Wr.INTERSECTING||s===Wr.INTERSECTING)r=!0;else{const a=n[0],o=n[1],l=n[2],u=n[3],f=e[0],d=e[1],g=t[0],p=t[1],E=(p-d)/(g-f);let v,w;s&Wr.ABOVE&&!(i&Wr.ABOVE)&&(v=g-(p-u)/E,r=v>=a&&v<=l),!r&&s&Wr.RIGHT&&!(i&Wr.RIGHT)&&(w=p-(g-l)*E,r=w>=o&&w<=u),!r&&s&Wr.BELOW&&!(i&Wr.BELOW)&&(v=g-(p-o)/E,r=v>=a&&v<=l),!r&&s&Wr.LEFT&&!(i&Wr.LEFT)&&(w=p-(g-a)*E,r=w>=o&&w<=u)}return r}function bO(n,e){const t=e.getExtent(),r=Fo(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Yt(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function PO(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];bO(n,e);const i=Yt(r);if(Yt(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function Gn(n,e,t){return Math.min(Math.max(n,e),t)}function dB(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const l=((n-t)*a+(e-r)*o)/(a*a+o*o);l>1?(t=i,r=s):l>0&&(t+=a*l,r+=o*l)}return _h(n,e,t,r)}function _h(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function gB(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const l=Math.abs(n[o][r]);l>s&&(s=l,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const l=-n[o][r]/n[r][r];for(let u=r;u<e+1;u++)r==u?n[o][u]=0:n[o][u]+=l*n[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function E4(n){return n*180/Math.PI}function vl(n){return n*Math.PI/180}function zc(n,e){const t=n%e;return t*e<0?t+e:t}function Fs(n,e,t){return n+t*(e-n)}function Op(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Hy(n,e){return Math.round(Op(n,e))}function P_(n,e){return Math.floor(Op(n,e))}function Lc(n,e){return Math.ceil(Op(n,e))}function BS(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function Ag(n,e,t){const r=""+n;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function kO(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const s=parseInt(t[i]||"0",10),a=parseInt(r[i]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function mB(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Ky(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function OI(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function pB(n,e){return n[0]*=e,n[1]*=e,n}function MO(n,e){if(e.canWrapX()){const t=Yt(e.getExtent()),r=NO(n,e,t);r&&(n[0]-=r*t)}return n}function NO(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Yt(r),i=Math.floor((n[0]-r[0])/t)),i}function LO(...n){console.warn(...n)}const Zd={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Ax=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Zd[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Dp=6378137,xd=Math.PI*Dp,_B=[-xd,-xd,xd,xd],yB=[-180,-85,180,85],k_=Dp*Math.log(Math.tan(Math.PI/2));class $f extends Ax{constructor(e){super({code:e,units:"m",extent:_B,global:!0,worldExtent:yB,getPointResolution:function(t,r){return t/Math.cosh(r[1]/Dp)}})}}const w4=[new $f("EPSG:3857"),new $f("EPSG:102100"),new $f("EPSG:102113"),new $f("EPSG:900913"),new $f("http://www.opengis.net/def/crs/EPSG/0/3857"),new $f("http://www.opengis.net/gml/srs/epsg.xml#3857")];function vB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=xd*n[s]/180;let a=Dp*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>k_?a=k_:a<-k_&&(a=-k_),e[s+1]=a}return e}function xB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/xd,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Dp))/Math.PI-90;return e}const EB=6378137,S4=[-180,-90,180,90],wB=Math.PI*EB/180;class zu extends Ax{constructor(e,t){super({code:e,units:"degrees",extent:S4,axisOrientation:t,global:!0,metersPerUnit:wB,worldExtent:S4})}}const T4=[new zu("CRS:84"),new zu("EPSG:4326","neu"),new zu("urn:ogc:def:crs:OGC:1.3:CRS84"),new zu("urn:ogc:def:crs:OGC:2:84"),new zu("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new zu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new zu("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let US={};function py(n){return US[n]||US[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function SB(n,e){US[n]=e}let Md={};function Ah(n,e,t){const r=n.getCode(),i=e.getCode();r in Md||(Md[r]={}),Md[r][i]=t}function _y(n,e){return n in Md&&e in Md[n]?Md[n][e]:null}const Yy=.9996,pa=.00669438,Rx=pa*pa,Cx=Rx*pa,ch=pa/(1-pa),I4=Math.sqrt(1-pa),Qd=(1-I4)/(1+I4),OO=Qd*Qd,DI=OO*Qd,FI=DI*Qd,DO=FI*Qd,FO=1-pa/4-3*Rx/64-5*Cx/256,TB=3*pa/8+3*Rx/32+45*Cx/1024,IB=15*Rx/256+45*Cx/1024,AB=35*Cx/3072,RB=3/2*Qd-27/32*DI+269/512*DO,CB=21/16*OO-55/32*FI,bB=151/96*DI-417/128*DO,PB=1097/512*FI,Xy=6378137;function kB(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/Yy/(Xy*FO),o=a+RB*Math.sin(2*a)+CB*Math.sin(4*a)+bB*Math.sin(6*a)+PB*Math.sin(8*a),l=Math.sin(o),u=l*l,f=Math.cos(o),d=l/f,g=d*d,p=g*g,E=1-pa*u,v=Math.sqrt(1-pa*u),w=Xy/v,T=(1-pa)/E,R=ch*f**2,k=R*R,N=r/(w*Yy),O=N*N,B=O*N,P=B*N,b=P*N,M=b*N,F=o-d/T*(O/2-P/24*(5+3*g+10*R-4*k-9*ch))+M/720*(61+90*g+298*R+45*p-252*ch-3*k);let V=(N-B/6*(1+2*g+R)+b/120*(5-2*R+28*g-3*k+8*ch+24*p))/f;return V=BS(V+vl(jO(t.number)),-Math.PI,Math.PI),[E4(V),E4(F)]}const A4=-80,R4=84,MB=-180,NB=180;function LB(n,e,t){n=BS(n,MB,NB),e<A4?e=A4:e>R4&&(e=R4);const r=vl(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,l=o*o,u=vl(n),f=jO(t.number),d=vl(f),g=Xy/Math.sqrt(1-pa*i**2),p=ch*s**2,E=s*BS(u-d,-Math.PI,Math.PI),v=E*E,w=v*E,T=w*E,R=T*E,k=R*E,N=Xy*(FO*r-TB*Math.sin(2*r)+IB*Math.sin(4*r)-AB*Math.sin(6*r)),O=Yy*g*(E+w/6*(1-o+p)+R/120*(5-18*o+l+72*p-58*ch))+5e5;let B=Yy*(N+g*a*(v/2+T/24*(5-o+9*p+4*p**2)+k/720*(61-58*o+l+600*p-330*ch)));return t.north||(B+=1e7),[O,B]}function jO(n){return(n-1)*6-180+3}const OB=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function VO(n){let e=0;for(const i of OB){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function C4(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],u=t[o+1],f=n(l,u,e);r[o]=f[0],r[o+1]=f[1]}return r}}function DB(n){return VO(n)?new Ax({code:n,units:"m"}):null}function FB(n){const e=VO(n.getCode());return e?{forward:C4(LB,e),inverse:C4(kB,e)}:null}const jB=63710088e-1;function b4(n,e,t){t=t||jB;const r=vl(n[1]),i=vl(e[1]),s=(i-r)/2,a=vl(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const VB=[FB],GB=[DB];let zS=!0;function GO(n){zS=!1}function jI(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function qy(n){SB(n.getCode(),n),Ah(n,n,jI)}function BB(n){n.forEach(qy)}function Nn(n){if(typeof n!="string")return n;const e=py(n);if(e)return e;for(const t of GB){const r=t(n);if(r)return r}return null}function Zy(n,e,t,r){n=Nn(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/Zd[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=GI(n,Nn("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=o(u,u,2);const f=b4(u.slice(0,2),u.slice(2,4)),d=b4(u.slice(4,6),u.slice(6,8));i=(f+d)/2}const l=r?Zd[r]:n.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function $S(n){BB(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Ah(e,t,jI)})})}function UB(n,e,t,r){n.forEach(function(i){e.forEach(function(s){Ah(i,s,t),Ah(s,i,r)})})}function VI(n,e){return n?typeof n=="string"?Nn(n):n:Nn(e)}function WS(n){return(function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),l=o.length;for(let u=0,f=i;u<f;++u)t[a+u]=u>=l?e[a+u]:o[u]}return t})}function zB(n,e,t,r){const i=Nn(n),s=Nn(e);Ah(i,s,WS(t)),Ah(s,i,WS(r))}function Rh(n,e){return GO(),Fp(n,"EPSG:4326","EPSG:3857")}function sn(n,e){const t=Fp(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=zc(r+180,360)-180),t}function yh(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||GI(n,e)===jI)&&t}function GI(n,e){const t=n.getCode(),r=e.getCode();let i=_y(t,r);if(i)return i;let s=null,a=null;for(const l of VB)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=f2(s.inverse,a.forward);else{const l=_y(t,o);l&&(i=f2(l,a.forward))}else{const l=_y(o,r);l&&(i=f2(s.inverse,l))}return i&&(qy(n),qy(e),Ah(n,e,i)),i}function f2(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function Vm(n,e){const t=Nn(n),r=Nn(e);return GI(t,r)}function Fp(n,e,t){const r=Vm(e,t);if(!r){const i=Nn(e).getCode(),s=Nn(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}function HS(n,e){return n}function ul(n,e){return zS&&!Ky(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(zS=!1,LO("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function BO(n,e){return n}function Ao(n,e){return n}function P4(n,e,t){return function(r){let i,s;if(n.canWrapX()){const a=n.getExtent(),o=Yt(a);r=r.slice(0),s=NO(r,n,o),s&&(r[0]=r[0]-s*o),r[0]=Gn(r[0],a[0],a[2]),r[1]=Gn(r[1],a[1],a[3]),i=t(r)}else i=t(r);return s&&e.canWrapX()&&(i[0]+=s*Yt(e.getExtent())),i}}function $B(){$S(w4),$S(T4),UB(T4,w4,vB,xB)}$B();new Array(6);function Ha(){return[1,0,0,1,0,0]}function WB(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Or(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function jo(n,e,t,r,i,s,a,o){const l=Math.sin(s),u=Math.cos(s);return n[0]=r*u,n[1]=i*l,n[2]=-r*l,n[3]=i*u,n[4]=a*r*u-o*r*l+e,n[5]=a*i*l+o*i*u+t,n}function UO(n,e){const t=HB(e);En(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*l-a*o)/t,n[5]=-(r*l-i*o)/t,n}function HB(n){return n[0]*n[3]-n[1]*n[2]}const KB=[1e5,1e5,1e5,1e5,2,2];function YB(n){return"matrix("+n.join(", ")+")"}function KS(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function XB(n,e){const t=KS(n),r=KS(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*KB[i])!==0)return!1;return!0}function $c(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=r){const u=n[l],f=n[l+1];s[o++]=i[0]*u+i[2]*f+i[4],s[o++]=i[1]*u+i[3]*f+i[5];for(let d=2;d<a;d++)s[o++]=n[l+d]}return s&&s.length!=o&&(s.length=o),s}function zO(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),l=Math.sin(i),u=s[0],f=s[1];let d=0;for(let g=e;g<t;g+=r){const p=n[g]-u,E=n[g+1]-f;a[d++]=u+p*o-E*l,a[d++]=f+p*l+E*o;for(let v=g+2;v<g+r;++v)a[d++]=n[v]}return a&&a.length!=d&&(a.length=d),a}function qB(n,e,t,r,i,s,a,o){o=o||[];const l=a[0],u=a[1];let f=0;for(let d=e;d<t;d+=r){const g=n[d]-l,p=n[d+1]-u;o[f++]=l+i*g,o[f++]=u+s*p;for(let E=d+2;E<d+r;++E)o[f++]=n[E]}return o&&o.length!=f&&(o.length=f),o}function ZB(n,e,t,r,i,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=r){a[o++]=n[l]+i,a[o++]=n[l+1]+s;for(let u=l+2;u<l+r;++u)a[o++]=n[u]}return a&&a.length!=o&&(a.length=o),a}const k4=Ha(),QB=[NaN,NaN];class $O extends Wo{constructor(){super(),this.extent_=$s(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=xO((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Mt()}closestPointXY(e,t,r,i){return Mt()}containsXY(e,t){return this.closestPointXY(e,t,QB,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Mt()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Lp(t),this.extentRevision_=this.getRevision()}return hB(this.extent_,e)}rotate(e,t){Mt()}scale(e,t,r){Mt()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Mt()}getType(){return Mt()}applyTransform(e){Mt()}intersectsExtent(e){return Mt()}translate(e,t){Mt()}transform(e,t){const r=Nn(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const l=r.getExtent(),u=r.getWorldExtent(),f=Sr(u)/Sr(l);jo(k4,u[0],u[3],f,-f,0,0,0);const d=$c(s,0,s.length,o,k4,a),g=Vm(r,t);return g?g(d,d,o):d}:Vm(r,t);return this.applyTransform(i),this}}class Zh extends $O{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return LI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Mt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=M4(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Mt()}setLayout(e,t,r){let i;if(e)i=M4(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Qh(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();zO(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Fo(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();qB(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();ZB(r,0,r.length,i,e,t,r),this.changed()}}}function Qh(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function M4(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function JB(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return $c(r,0,r.length,i,e,t)}function N4(n,e,t,r,i,s,a){const o=n[e],l=n[e+1],u=n[t]-o,f=n[t+1]-l;let d;if(u===0&&f===0)d=e;else{const g=((i-o)*u+(s-l)*f)/(u*u+f*f);if(g>1)d=t;else if(g>0){for(let p=0;p<r;++p)a[p]=Fs(n[e+p],n[t+p],g);a.length=r;return}else d=e}for(let g=0;g<r;++g)a[g]=n[d+g];a.length=r}function BI(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],l=n[e+1],u=_h(s,a,o,l);u>i&&(i=u),s=o,a=l}return i}function UI(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=BI(n,e,o,r,i),e=o}return i}function eU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=UI(n,e,o,r,i),e=o[o.length-1]}return i}function zI(n,e,t,r,i,s,a,o,l,u,f){if(e==t)return u;let d,g;if(i===0){if(g=_h(a,o,n[e],n[e+1]),g<u){for(d=0;d<r;++d)l[d]=n[e+d];return l.length=r,g}return u}f=f||[NaN,NaN];let p=e+r;for(;p<t;)if(N4(n,p-r,p,r,a,o,f),g=_h(a,o,f[0],f[1]),g<u){for(u=g,d=0;d<r;++d)l[d]=f[d];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(g)-Math.sqrt(u))/i|0,1);if(s&&(N4(n,t-r,e,r,a,o,f),g=_h(a,o,f[0],f[1]),g<u)){for(u=g,d=0;d<r;++d)l[d]=f[d];l.length=r}return u}function $I(n,e,t,r,i,s,a,o,l,u,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const p=t[d];u=zI(n,e,p,r,i,s,a,o,l,u,f),e=p}return u}function tU(n,e,t,r,i,s,a,o,l,u,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const p=t[d];u=$I(n,e,p,r,i,s,a,o,l,u,f),e=p[p.length-1]}return u}function nU(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function bx(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function jp(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=bx(n,e,t[a],r);i[s++]=l,e=l}return i.length=s,i}function WO(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=jp(n,e,t[a],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function Oc(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function Gm(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=Oc(n,e,l,r,i[s]),e=l}return i.length=s,i}function YS(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=l.length===1&&l[0]===e?[]:Gm(n,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function Qy(n,e,t,r,i,s,a){let o,l;const u=(t-e)/r;if(u===1)o=e;else if(u===2)o=e,l=i;else if(u!==0){let f=n[e],d=n[e+1],g=0;const p=[0];for(let w=e+r;w<t;w+=r){const T=n[w],R=n[w+1];g+=Math.sqrt((T-f)*(T-f)+(R-d)*(R-d)),p.push(g),f=T,d=R}const E=i*g,v=nB(p,E);v<0?(l=(E-p[-v-2])/(p[-v-1]-p[-v-2]),o=e+(-v-2)*r):o=e+v*r}a=a>1?a:2,s=s||new Array(a);for(let f=0;f<a;++f)s[f]=o===void 0?NaN:l===void 0?n[o+f]:Fs(n[o+f],n[o+r+f],l);return s}function XS(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,l=t/r;for(;o<l;){const g=o+l>>1;i<n[(g+1)*r-1]?l=g:o=g+1}const u=n[o*r-1];if(i==u)return n.slice((o-1)*r,(o-1)*r+r);const f=n[(o+1)*r-1],d=(i-u)/(f-u);a=[];for(let g=0;g<r-1;++g)a.push(Fs(n[(o-1)*r+g],n[o*r+g],d));return a.push(i),a}function rU(n,e,t,r,i,s,a){if(a)return XS(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let l=0,u=t.length;l<u;++l){const f=t[l];if(e!=f){if(i<n[e+r-1])return null;if(i<=n[f-1])return XS(n,e,f,r,i,!1);e=f}}return null}function iU(n,e,t,r,i){return!RO(i,function(a){return!uh(n,e,t,r,a[0],a[1])})}function uh(n,e,t,r,i,s){let a=0,o=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const u=n[e],f=n[e+1];l<=s?f>s&&(u-o)*(s-l)-(i-o)*(f-l)>0&&a++:f<=s&&(u-o)*(s-l)-(i-o)*(f-l)<0&&a--,o=u,l=f}return a!==0}function WI(n,e,t,r,i,s){if(t.length===0||!uh(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(uh(n,t[a-1],t[a],r,i,s))return!1;return!0}function sU(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const l=t[a];if(WI(n,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function HO(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Px(n,e,t,r,i,s){return s=s??AO($s(),n,e,t,r),zi(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:HO(n,e,t,r,function(a,o){return fB(i,a,o)}):!1}function aU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(Px(n,e,t[s],r,i))return!0;e=t[s]}return!1}function KO(n,e,t,r,i){return!!(Px(n,e,t,r,i)||uh(n,e,t,r,i[0],i[1])||uh(n,e,t,r,i[0],i[3])||uh(n,e,t,r,i[2],i[1])||uh(n,e,t,r,i[2],i[3]))}function YO(n,e,t,r,i){if(!KO(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(iU(n,t[s-1],t[s],r,i)&&!Px(n,t[s-1],t[s],r,i))return!1;return!0}function oU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(YO(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function HI(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const l=n[o],u=n[o+1];a+=Math.sqrt((l-i)*(l-i)+(u-s)*(u-s)),i=l,s=u}return a}function kx(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[e,t-r];let f=0;for(;u.length>0;){const d=u.pop(),g=u.pop();let p=0;const E=n[g],v=n[g+1],w=n[d],T=n[d+1];for(let R=g+r;R<d;R+=r){const k=n[R],N=n[R+1],O=dB(k,N,E,v,w,T);O>p&&(f=R,p=O)}p>i&&(l[(f-e)/r]=1,g+r<f&&u.push(g,f),f+r<d&&u.push(f,d))}for(let d=0;d<o;++d)l[d]&&(s[a++]=n[e+d*r],s[a++]=n[e+d*r+1]);return a}function XO(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l];a=kx(n,e,f,r,i,s,a),o.push(a),e=f}return a}function Yu(n,e){return e*Math.round(n/e)}function lU(n,e,t,r,i,s,a){if(e==t)return a;let o=Yu(n[e],i),l=Yu(n[e+1],i);e+=r,s[a++]=o,s[a++]=l;let u,f;do if(u=Yu(n[e],i),f=Yu(n[e+1],i),e+=r,e==t)return s[a++]=u,s[a++]=f,a;while(u==o&&f==l);for(;e<t;){const d=Yu(n[e],i),g=Yu(n[e+1],i);if(e+=r,d==u&&g==f)continue;const p=u-o,E=f-l,v=d-o,w=g-l;if(p*w==E*v&&(p<0&&v<p||p==v||p>0&&v>p)&&(E<0&&w<E||E==w||E>0&&w>E)){u=d,f=g;continue}s[a++]=u,s[a++]=f,o=u,l=f,u=d,f=g}return s[a++]=u,s[a++]=f,a}function KI(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l];a=lU(n,e,f,r,i,s,a),o.push(a),e=f}return a}function cU(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l],d=[];a=KI(n,e,f,r,i,s,a,d),o.push(d),e=f[f.length-1]}return a}class Vo extends Zh{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){yn(this.flatCoordinates,e),this.changed()}clone(){const e=new Vo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Xh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(BI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return HO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,XS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Oc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Qy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return HI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=kx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Vo(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Px(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bx(this.flatCoordinates,0,e,this.stride),this.changed()}}let Za=class qO extends Zh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new qO(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=_h(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let l=0;l<o;++l)r[l]=s[l];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return TO(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return NI(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=nU(this.flatCoordinates,0,e,this.stride),this.changed()}};const da={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ch=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",uU=Ch.includes("safari")&&!Ch.includes("chrom");uU&&(Ch.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ch));const hU=Ch.includes("webkit")&&!Ch.includes("edge"),ZO=Ch.includes("macintosh"),fU=typeof devicePixelRatio<"u"?devicePixelRatio:1,Bs=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,YI=typeof Image<"u"&&Image.prototype.decode,QO=typeof createImageBitmap=="function",JO=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),_t={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Fr(n,e,t,r){let i;return t&&t.length?i=t.shift():Bs?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let d2;function Jy(){return d2||(d2=Fr(1,1)),d2}function Mx(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function L4(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function dU(n){for(;n.lastChild;)n.lastChild.remove()}function gU(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function eD(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function Dc(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}const XI=[NaN,NaN,NaN,0];let g2;function mU(){return g2||(g2=Fr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),g2}const pU=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,_U=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,yU=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,vU=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function M_(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function am(n){throw new Error('failed to parse "'+n+'" as color')}function tD(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(_U)||n.match(pU)||n.match(yU);if(s){const a=s[4],o=100/255;return[Gn(M_(s[1],o)+.5|0,0,255),Gn(M_(s[2],o)+.5|0,0,255),Gn(M_(s[3],o)+.5|0,0,255),a!==void 0?Gn(M_(a,100),0,1):1]}am(n)}if(n.startsWith("#")){if(vU.test(n)){const s=n.substring(1),a=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,u=s.length;l<u;l+=a){let f=parseInt(s.substring(l,l+a),16);a===1&&(f+=f<<4),o[l/a]=f}return o[3]=o[3]/255,o}am(n)}const e=mU();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&am(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return tD(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Op(i[3]/255,3),i}function xU(n){return typeof n=="string"?n:ZI(n)}const EU=1024,Rg={};let m2=0;function wU(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function p2(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function _2(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function y2(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function v2(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function O4(n){const e=y2(n[0]),t=y2(n[1]),r=y2(n[2]),i=v2(e*.222488403+t*.716873169+r*.06060791),s=500*(v2(e*.452247074+t*.399439023+r*.148375274)-i),a=200*(i-v2(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(a,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+a*a),o<0?o+360:o,n[3]]}function SU(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=_2(e),s=_2(e+t/500*Math.cos(r)),a=_2(e-t/200*Math.sin(r)),o=p2(s*3.021973625-i*1.617392459-a*.404875592),l=p2(s*-.943766287+i*1.916279586+a*.027607165),u=p2(s*.069407491-i*.22898585+a*1.159737864);return[Gn(o+.5|0,0,255),Gn(l+.5|0,0,255),Gn(u+.5|0,0,255),n[3]]}function qI(n){if(n==="none")return XI;if(Rg.hasOwnProperty(n))return Rg[n];if(m2>=EU){let t=0;for(const r in Rg)(t++&3)===0&&(delete Rg[r],--m2)}const e=tD(n);e.length!==4&&am(n);for(const t of e)isNaN(t)&&am(n);return Rg[n]=e,++m2,e}function bh(n){return Array.isArray(n)?n:qI(n)}function ZI(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class nD extends Mp{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?_t.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(Ft.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==_t.IDLE&&this.loader){this.state=_t.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;EO(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||QO&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=_t.LOADED}).catch(r=>{this.state=_t.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function TU(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[$y(r,Ft.LOAD,function(){a=!0,s||e()})];return r.src&&YI?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(a?e():t())})):o.push($y(r,Ft.ERROR,t)),function(){i=!1,o.forEach(Fn)}}function IU(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function rD(n,e){return e&&(n.src=e),n.src&&YI?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):IU(n)}function iD(n,e){return e&&(n.src=e),n.src&&YI&&QO?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):rD(n)}class AU{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=x2(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=x2(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=x2(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===_t.IDLE&&i.load(),i.getImageState()===_t.LOADING?i.ready().then(()=>{this.patternCache_[a]=Jy().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=Jy().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function x2(n,e,t){const r=t?bh(t):"null";return e+":"+n+":"+r}const ga=new AU;let Cg=null;class sD extends Mp{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?_t.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===_t.LOADED){Cg||(Cg=Fr(1,1,void 0,{willReadFrequently:!0})),Cg.drawImage(this.image_,0,0);try{Cg.getImageData(0,0,1,1),this.tainted_=!1}catch{Cg=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ft.CHANGE)}handleImageError_(){this.imageState_=_t.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=_t.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Fr(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===_t.IDLE){this.image_||this.initializeImage_(),this.imageState_=_t.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&rD(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==_t.LOADED)return;const t=this.image_,r=Fr(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=xU(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===_t.LOADED||this.imageState_===_t.ERROR)e();else{const t=()=>{(this.imageState_===_t.LOADED||this.imageState_===_t.ERROR)&&(this.removeEventListener(Ft.CHANGE,t),e())};this.addEventListener(Ft.CHANGE,t)}})),this.ready_}}function ev(n,e,t,r,i,s){let a=e===void 0?void 0:ga.get(e,t,i);return a||(a=new sD(n,n&&"src"in n?n.src||void 0:e,t,r,i),ga.set(e,t,i,a,s)),s&&a&&!ga.getPattern(e,t,i)&&ga.set(e,t,i,a,s),a}function Ro(n){return n?Array.isArray(n)?ZI(n):typeof n=="object"&&"src"in n?RU(n):n:null}function RU(n){if(!n.offset||!n.size)return ga.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=ga.getPattern(e,void 0,n.color);if(t)return t;const r=ga.get(n.src,"anonymous",null);if(r.getImageState()!==_t.LOADED)return null;const i=Fr(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),ev(i.canvas,e,void 0,_t.LOADED,n.color,!0),ga.getPattern(e,void 0,n.color)}class aD{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const N_="ol-hidden",Vp="ol-unselectable",QI="ol-control",D4="ol-collapsed",CU=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),F4=["style","variant","weight","size","lineHeight","family"],qS={normal:400,bold:700},ZS=function(n){const e=n.match(CU);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=F4.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[F4[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in qS&&(t.weight=qS[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t},oD="10px sans-serif",os="#000",Jd="round",xl=[],El=0,e0="round",Bm=10,Um="#000",zm="center",tv="middle",hh=[0,0,0,0],$m=1,od=new Wo;let bg=null,j4;const QS={},bU=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function PU(n,e,t){return`${n} ${e} 16px "${t}"`}const kU=(function(){let e,t;async function r(s){await t.ready;const a=await t.load(s);if(a.length===0)return!1;const o=ZS(s),l=o.families[0].toLowerCase(),u=o.weight;return a.some(f=>{const d=f.family.replace(/^['"]|['"]$/g,"").toLowerCase(),g=qS[f.weight]||f.weight;return d===l&&f.style===o.style&&g==u})}async function i(){await t.ready;let s=!0;const a=od.getProperties(),o=Object.keys(a).filter(l=>a[l]<100);for(let l=o.length-1;l>=0;--l){const u=o[l];let f=a[u];f<100&&(await r(u)?(kp(QS),od.set(u,100)):(f+=10,od.set(u,f,!0),f<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=Bs?self.fonts:document.fonts);const a=ZS(s);if(!a)return;const o=a.families;let l=!1;for(const u of o){if(bU.has(u))continue;const f=PU(a.style,a.weight,u);od.get(f)===void 0&&(od.set(f,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),MU=(function(){let n;return function(e){let t=QS[e];if(t==null){if(Bs){const r=ZS(e),i=lD(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);QS[e]=t}return t}})();function lD(n,e){return bg||(bg=Fr(1,1)),n!=j4&&(bg.font=n,j4=bg.font),bg.measureText(e)}function cD(n,e){return lD(n,e).width}function V4(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,cD(n,s)),0);return t[e]=r,r}function NU(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,l=0;for(let u=0,f=e.length;u<=f;u+=2){const d=e[u];if(d===`
`||u===f){s=Math.max(s,a),i.push(a),a=0,o+=l,l=0;continue}const g=e[u+1]||n.font,p=cD(g,d);t.push(p),a+=p;const E=MU(g);r.push(E),l=Math.max(l,E)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function LU(n,e,t,r,i,s,a,o,l,u,f){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=d=>d.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,u),n.scale(f[0],f[1]),OU(r,n)):f[0]<0||f[1]<0?(n.translate(l,u),n.scale(f[0],f[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,l,u,a*f[0],o*f[1]),n.restore()}function OU(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class DU extends aD{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Op(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ha()}drawImages_(e,t,r,i){if(!this.image_)return;const s=$c(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let f=0,d=s.length;f<d;f+=2){const g=s[f]-this.imageAnchorX_,p=s[f+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=g+this.imageAnchorX_,v=p+this.imageAnchorY_;jo(o,E,v,1,1,u,-E,-v),a.save(),a.transform.apply(a,o),a.translate(E,v),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=$c(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=$c(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!zi(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=JB(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!zi(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(zi(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(i,s,a[l],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!zi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!zi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];i=this.drawRings_(r,i,u,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),pu(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:zm;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Ro(r||os)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),f=s||xl;this.strokeState_={lineCap:i!==void 0?i:Jd,lineDash:this.pixelRatio_===1?f:f.map(d=>d*this.pixelRatio_),lineDashOffset:(a||El)*this.pixelRatio_,lineJoin:o!==void 0?o:e0,lineWidth:(l!==void 0?l:$m)*this.pixelRatio_,miterLimit:u!==void 0?u:Bm,strokeStyle:Ro(r||Um)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const p=t.getColor();this.textFillState_={fillStyle:Ro(p||os)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),E=r.getLineCap(),v=r.getLineDash(),w=r.getLineDashOffset(),T=r.getLineJoin(),R=r.getWidth(),k=r.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:Jd,lineDash:v||xl,lineDashOffset:w||El,lineJoin:T!==void 0?T:e0,lineWidth:R!==void 0?R:$m,miterLimit:k!==void 0?k:Bm,strokeStyle:Ro(p||Um)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),f=e.getText(),d=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:oD,textAlign:d!==void 0?d:zm,textBaseline:g!==void 0?g:tv},this.text_=f!==void 0?Array.isArray(f)?f.reduce((p,E,v)=>p+=v%2?" ":E,""):f:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const FU=.5,uD={Point:WU,LineString:UU,Polygon:KU,MultiPoint:HU,MultiLineString:zU,MultiPolygon:$U,GeometryCollection:BU,Circle:VU};function jU(n,e){return parseInt(un(n),10)-parseInt(un(e),10)}function G4(n,e){const t=hD(n,e);return t*t}function hD(n,e){return FU*n/e}function VU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r)}}function B4(n,e,t,r,i,s,a,o){const l=[],u=t.getImage();if(u){let g=!0;const p=u.getImageState();p==_t.LOADED||p==_t.ERROR?g=!1:p==_t.IDLE&&u.load(),g&&l.push(u.ready())}const f=t.getFill();f&&f.loading()&&l.push(f.ready());const d=l.length>0;return d&&Promise.all(l).then(()=>i(null)),GU(n,e,t,r,s,a,o),d}function GU(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(r,i);if(t.getRenderer())fD(n,l,t,e,a);else{const f=uD[l.getType()];f(n,l,t,e,a,s)}}function fD(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,l=a.length;o<l;++o)fD(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function BU(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const u=uD[a[o].getType()];u(n,a[o],t,r,i,s)}}function UU(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function zU(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function $U(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function WU(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),l=o&&o.getText(),u=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=_t.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(a,u),f.drawPoint(e,r,i)}if(l){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o,u),f.drawText(e,r,i)}}function HU(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),f=s&&o&&u?{}:void 0;if(o){if(a.getImageState()!=_t.LOADED)return;const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(a,f),d.drawMultiPoint(e,r,i)}if(u){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(l,f),d.drawText(e,r,i)}}function KU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}let YU=!1;function XU(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=YU,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=e.getType();try{let f;u=="text"||u=="json"?f=o.responseText:u=="xml"?f=o.responseXML||o.responseText:u=="arraybuffer"&&(f=o.response),f?s(e.readFeatures(f,{extent:t,featureProjection:i}),e.readProjection(f)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function U4(n,e){return function(t,r,i,s,a){XU(n,e,t,r,i,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),a!==void 0&&a()})}}function qU(n,e){return[[-1/0,-1/0,1/0,1/0]]}function dD(n,e,t,r){const i=[];let s=$s();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=LI(n,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function JI(n,e,t,r,i,s,a){let o,l,u,f,d,g,p;const E=i[s+1],v=[];for(let R=0,k=t.length;R<k;++R){const N=t[R];for(f=n[N-r],g=n[N-r+1],o=e;o<N;o+=r)d=n[o],p=n[o+1],(E<=g&&p<=E||g<=E&&E<=p)&&(u=(E-g)/(p-g)*(d-f)+f,v.push(u)),f=d,g=p}let w=NaN,T=-1/0;for(v.sort(_l),f=v[0],o=1,l=v.length;o<l;++o){d=v[o];const R=Math.abs(d-f);R>T&&(u=(f+d)/2,WI(n,e,t,r,u,E)&&(w=u,T=R)),f=d}return isNaN(w)&&(w=i[s]),a?(a.push(w,E,T),a):[w,E,T]}function gD(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=JI(n,e,l,r,i,2*a,s),e=l[l.length-1]}return s}function ZU(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function eA(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],l=n[e+1];i+=(o-s)*(l+a),s=o,a=l}return i===0?void 0:i>0}function tA(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=eA(n,e,o,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=o}return!0}function mD(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!tA(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function nv(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=eA(n,e,o,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&ZU(n,e,o,r),e=o}return e}function JS(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=nv(n,e,t[s],r,i);return e}function QU(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=eA(n,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=l}return t}class Ka extends $O{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Fn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(nn(e[t],Ft.CHANGE,this.changed,this))}clone(){const e=new Ka(E2(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Xh(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Lp(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)IO(e,t[r].getExtent());return e}getGeometries(){return E2(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(i=!0)}return i?new Ka(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Fo(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(E2(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function E2(n){return n.map(e=>e.clone())}function pD(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,l=0;for(;e<t;e+=r){const u=n[e]-s,f=n[e+1]-a;i+=l*u-o*f,o=u,l=f}return i/2}function _D(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=pD(n,e,o,r),e=o}return i}function JU(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=_D(n,e,o,r),e=o[o.length-1]}return i}class Wm extends Zh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Wm(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Xh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(BI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return pD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Oc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=kx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Wm(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bx(this.flatCoordinates,0,e,this.stride),this.changed()}}class Jc extends Zh{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let l=0,u=i.length;l<u;++l){const f=i[l];yn(s,f.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){yn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Jc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Xh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(UI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$I(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,rU(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return Gm(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Vo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a],u=new Vo(e.slice(s,l),r);i.push(u),s=l}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=HI(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const l=i[a],u=Qy(t,r,l,s,.5);yn(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=XO(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new Jc(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return aU(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=jp(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class S0 extends Zh{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){yn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new S0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Xh(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=_h(e,t,s[o],s[o+1]);if(u<i){i=u;for(let f=0;f<a;++f)r[f]=s[o+f];r.length=a}}return i}getCoordinates(){return Oc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Za(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new Za(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(NI(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bx(this.flatCoordinates,0,e,this.stride),this.changed()}}class Qa extends Zh{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?yn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Qa(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Xh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(UI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$I(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return WI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return _D(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),nv(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Gm(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Fo(this.getExtent());this.flatInteriorPoint_=JI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Za(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Wm(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=new Wm(t.slice(s,l),e);i.push(u),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;tA(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=nv(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=KI(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Qa(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return YO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=jp(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function z4(n){if(w0(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Qa(s,"XY",[s.length])}class t0 extends Zh{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,l=i.length;o<l;++o){const u=i[o],f=s.length,d=u.getEnds();for(let g=0,p=d.length;g<p;++g)d[g]+=f;yn(s,u.getFlatCoordinates()),a.push(d)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;yn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new t0(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Xh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(eU(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return sU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return JU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),JS(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,YS(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=dD(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=gD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new S0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;mD(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=JS(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=cU(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new t0(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Qa(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a].slice(),u=l[l.length-1];if(s!==0)for(let d=0,g=l.length;d<g;++d)l[d]-=s;const f=new Qa(t.slice(s,u),e,l);i.push(f),s=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return oU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=WO(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const $4=Ha();class js{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?TO(this.flatCoordinates_):LI(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Fo(this.getExtent());this.flatInteriorPoints_=JI(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=QU(this.flatCoordinates_,this.ends_),t=dD(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=gD(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Qy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=Qy(e,t,a,2,.5);yn(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Nn(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Sr(r)/Sr(t);jo($4,r[0],r[3],i,-i,0,0,0),$c(this.flatCoordinates_,0,this.flatCoordinates_.length,2,$4,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new js(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=xO((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=kx(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=XO(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=KI(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new js(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}js.prototype.getFlatCoordinates=js.prototype.getOrientedFlatCoordinates;function yD(n,e,t=0,r=n.length-1,i=ez){for(;r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,f=Math.log(l),d=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(t,Math.floor(e-u*d/l+g)),E=Math.min(r,Math.floor(e+(l-u)*d/l+g));yD(n,e,p,E,i)}const s=n[e];let a=t,o=r;for(Pg(n,t,e),i(n[r],s)>0&&Pg(n,t,r);a<o;){for(Pg(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Pg(n,t,o):(o++,Pg(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Pg(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function ez(n,e){return n<e?-1:n>e?1:0}let vD=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!O_(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?i(o):o;O_(e,l)&&(t.leaf?r.push(o):S2(e,l)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!O_(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(O_(e,a)){if(t.leaf||S2(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ld([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),r.leaf){const f=tz(e,r.children,t);if(f!==-1)return r.children.splice(f,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&S2(r,i)?(s.push(r),a.push(o),o=0,l=r,r=r.children[0]):l?(o++,r=l.children[o],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=ld(e.slice(t,r+1)),Wf(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=ld([]),o.leaf=!1,o.height=i;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));W4(e,t,r,u,this.compareMinX);for(let f=t;f<=r;f+=u){const d=Math.min(f+u-1,r);W4(e,f,d,l,this.compareMinY);for(let g=f;g<=d;g+=l){const p=Math.min(g+l-1,d);o.children.push(this._build(e,g,p,i-1))}}return Wf(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const u=t.children[l],f=w2(u),d=iz(e,u)-f;d<a?(a=d,s=f<s?f:s,o=u):d===a&&f<s&&(s=f,o=u)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Ug(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=ld(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,Wf(r,this.toBBox),Wf(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=ld([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Wf(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const l=Bg(e,0,o,this.toBBox),u=Bg(e,o,r,this.toBBox),f=sz(l,u),d=w2(l)+w2(u);f<s?(s=f,i=o,a=d<a?d:a):f===s&&d<a&&(a=d,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:nz,s=e.leaf?this.compareMinY:rz,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=Bg(e,0,t,s),o=Bg(e,r-t,r,s);let l=L_(a)+L_(o);for(let u=t;u<r-t;u++){const f=e.children[u];Ug(a,e.leaf?s(f):f),l+=L_(a)}for(let u=r-t-1;u>=t;u--){const f=e.children[u];Ug(o,e.leaf?s(f):f),l+=L_(o)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Ug(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():Wf(e[t],this.toBBox)}};function tz(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function Wf(n,e){Bg(n,0,n.children.length,e,n)}function Bg(n,e,t,r,i){i||(i=ld(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Ug(i,n.leaf?r(a):a)}return i}function Ug(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function nz(n,e){return n.minX-e.minX}function rz(n,e){return n.minY-e.minY}function w2(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function L_(n){return n.maxX-n.minX+(n.maxY-n.minY)}function iz(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function sz(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function S2(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function O_(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function ld(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function W4(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;yD(n,a,e,t,i),s.push(e,a,a,t)}}class H4{constructor(e){this.rbush_=new vD(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[un(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=l,this.items_[un(o)]=l}this.rbush_.load(r)}remove(e){const t=un(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[un(t)],i=[r.minX,r.minY,r.maxX,r.maxY];qd(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return Th(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Qc(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class nA extends Wo{constructor(e){super(),this.projection=Nn(e.projection),this.attributions_=K4(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=K4(e),this.changed()}setState(e){this.state_=e,this.changed()}}function K4(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const ia={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class fc extends $o{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Gp extends nA{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Fm,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(En(this.format_,"`format` must be set when `url` is set"),this.loader_=U4(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:qU;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new H4:null,this.loadedExtentsRtree_=new H4,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new fa(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=un(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new fc(ia.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof js||(this.featureChangeKeys_[e]=[nn(t,Ft.CHANGE,this.handleFeatureChange_,this),nn(t,Xd.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof js){const s=this.idIndex_[i];s instanceof js?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(En(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=un(o);this.addToIndex_(l,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],l=un(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const f=u.getExtent();t.push(f),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(ia.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new fc(ia.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ia.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(ia.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(as.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(as.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Fn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new fc(ia.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof js||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof js||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Th(this.nullGeometryFeatures_)||yn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=PO(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Dm,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const f=u.getGeometry(),d=o;if(o=f instanceof js?0:f.closestPointXY(r,i,a,o),o<d){s=u;const g=Math.sqrt(o);l[0]=r-g,l[1]=i-g,l[2]=r+g,l[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=un(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new fc(ia.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:un(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Th(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const l=s[a];i.forEachInExtent(l,function(f){return Nc(f.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new fc(ia.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new fc(ia.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new fc(ia.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(qd(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=un(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Fn),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(ia.REMOVEFEATURE)&&this.dispatchEvent(new fc(ia.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){En(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(U4(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Qr{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Qr({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=ev(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===_t.IDLE&&t.load(),t.getImageState()===_t.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?un(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:bh(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class hs{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new hs({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Y4(n){return n[0]>0&&n[1]>0}function az(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function fs(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Nx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=fs(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Nx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Mt()}getImage(e){return Mt()}getHitDetectionImage(){return Mt()}getPixelRatio(e){return 1}getImageState(){return Mt()}getImageSize(){return Mt()}getOrigin(){return Mt()}getSize(){return Mt()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=fs(e)}listenImageChange(e){Mt()}load(){Mt()}unlistenImageChange(e){Mt()}ready(){return Promise.resolve()}}class Lx extends Nx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?_t.LOADING:_t.LOADED,this.imageState_===_t.LOADING&&this.ready().then(()=>this.imageState_=_t.LOADED),this.render()}clone(){const e=this.getScale(),t=new Lx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=ga.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,a=Math.ceil(s.size*e),o=Fr(a,a);this.draw_(s,o,e),i=o.canvas,ga.set(r,null,null,new sD(i,void 0,null,_t.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const B=i;i=s,s=B}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),f=i-u,d=Math.sqrt(l*l+f*f),g=d/l;if(e==="miter"&&g<=r)return g*t;const p=t/2/g,E=t/2*(f/d),w=Math.sqrt((i+p)*(i+p)+E*E)-i;if(this.radius2_===void 0||e==="bevel")return w*2;const T=i*Math.sin(o),R=Math.sqrt(i*i-T*T),k=s-R,O=Math.sqrt(T*T+k*k)/T;if(O<=r){const B=O*t/2-s-i;return 2*Math.max(w,B)}return w*2}createRenderOptions(){let e=Jd,t=e0,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=Ro(this.stroke_.getColor()??Um),o=this.stroke_.getWidth()??$m,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??e0,e=this.stroke_.getLineCap()??Jd,r=this.stroke_.getMiterLimit()??Bm);const l=this.calculateLineJoinSize_(t,o,r),u=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:o,size:f,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=os),t.fillStyle=Ro(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=bh(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Fr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,u=o%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=os,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class bl extends Lx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new bl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class nr{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=X4,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new nr({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=X4,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function oz(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(En(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let T2=null;function xD(n,e){if(!T2){const t=new Qr({color:"rgba(255,255,255,0.4)"}),r=new hs({color:"#3399CC",width:1.25});T2=[new nr({image:new bl({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return T2}function X4(n){return n.getGeometry()}const lz="#333";class Jh{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=fs(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Qr({color:lz}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Jh({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Qr?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=fs(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Kr={ANIMATING:0,INTERACTING:1},At={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},D_=[At.FILL],Fc=[At.STROKE],fh=[At.BEGIN_PATH],q4=[At.CLOSE_PATH];class Bp extends aD{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)i[0]=e[o],i[1]=e[o+1],Ih(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(t+=i);let f=e[t],d=e[t+1];const g=this.tmpCoordinate_;let p=!0,E,v,w;for(E=t+i;E<r;E+=i)g[0]=e[E],g[1]=e[E+1],w=VS(u,g),w!==v?(p&&(o[l++]=f,o[l++]=d,p=!1),o[l++]=g[0],o[l++]=g[1]):w===Wr.INTERSECTING?(o[l++]=g[0],o[l++]=g[1],p=!1):p=!0,f=g[0],d=g[1],v=w;return(s&&p||E===t+i)&&(o[l++]=f,o[l++]=d),l}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const l=r[a],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,f,d,g,p;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),g=[];const E=e.getEndss();p=0;for(let v=0,w=E.length;v<w;++v){const T=[];p=this.drawCustomCoordinates_(u,p,E[v],o,T),g.push(T)}this.instructions.push([At.CUSTOM,l,g,e,r,YS,s]),this.hitDetectionInstructions.push([At.CUSTOM,l,g,e,i||r,YS,s]);break;case"Polygon":case"MultiLineString":d=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),o,d),this.instructions.push([At.CUSTOM,l,d,e,r,Gm,s]),this.hitDetectionInstructions.push([At.CUSTOM,l,d,e,i||r,Gm,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([At.CUSTOM,l,f,e,r,Oc,s]),this.hitDetectionInstructions.push([At.CUSTOM,l,f,e,i||r,Oc,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(u,o),f>l&&(this.instructions.push([At.CUSTOM,l,f,e,r,Oc,s]),this.hitDetectionInstructions.push([At.CUSTOM,l,f,e,i||r,Oc,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),f=this.coordinates.length,this.instructions.push([At.CUSTOM,l,f,e,r,void 0,s]),this.hitDetectionInstructions.push([At.CUSTOM,l,f,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[At.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[At.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==At.END_GEOMETRY?a=t:s==At.BEGIN_GEOMETRY&&(i[2]=t,iB(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Ro(r||os)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Ro(r||Um);const i=e.getLineCap();t.lineCap=i!==void 0?i:Jd;const s=e.getLineDash();t.lineDash=s?s.slice():xl;const a=e.getLineDashOffset();t.lineDashOffset=a||El;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:e0;const l=e.getWidth();t.lineWidth=l!==void 0?l:$m;const u=e.getMiterLimit();t.miterLimit=u!==void 0?u:Bm,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[At.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[At.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!pu(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[At.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=SO(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;jm(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class cz extends Bp{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Ih(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([At.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([At.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||Ih(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([At.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([At.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class uz extends Bp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[At.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,El],fh);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(Fc),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,El],fh);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let f=0;for(let d=0,g=o.length;d<g;++d)f=this.drawFlatCoordinates_(l,f,o[d],u);this.hitDetectionInstructions.push(Fc),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Fc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Fc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(fh)}}class Z4 extends Bp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=r.length;this.instructions.push(fh),this.hitDetectionInstructions.push(fh);for(let u=0;u<l;++u){const f=r[u],d=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,f,i,!0,!o),p=[At.MOVE_TO_LINE_TO,d,g];this.instructions.push(p),this.hitDetectionInstructions.push(p),o&&(this.instructions.push(q4),this.hitDetectionInstructions.push(q4)),t=f}return a&&(this.instructions.push(D_),this.hitDetectionInstructions.push(D_)),o&&(this.instructions.push(Fc),this.hitDetectionInstructions.push(Fc)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_FILL_STYLE,os]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,El]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const f=[At.CIRCLE,u];this.instructions.push(fh,f),this.hitDetectionInstructions.push(fh,f),i.fillStyle!==void 0&&(this.instructions.push(D_),this.hitDetectionInstructions.push(D_)),i.strokeStyle!==void 0&&(this.instructions.push(Fc),this.hitDetectionInstructions.push(Fc)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_FILL_STYLE,os]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,El]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_FILL_STYLE,os]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,El]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let f=0;for(let d=0,g=o.length;d<g;++d)f=this.drawFlatCoordinatess_(l,f,o[d],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=Yu(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function hz(n,e,t,r,i){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+i<r;){const[u,f]=l.slice(-2),d=e[a+i],g=e[a+i+1],p=Math.sqrt((d-u)*(d-u)+(g-f)*(g-f));if(o+=p,o>=n){const E=(n-o+p)/p,v=Fs(u,d,E),w=Fs(f,g,E);l.push(v,w),s.push(l),l=[v,w],o==n&&(a+=i),o=0}else if(o<n)l.push(e[a+i],e[a+i+1]),a+=i;else{const E=p-o,v=Fs(u,d,E/p),w=Fs(f,g,E/p);l.push(v,w),s.push(l),l=[v,w],o=0,a+=i}}return o>0&&s.push(l),s}function fz(n,e,t,r,i){let s=t,a=t,o=0,l=0,u=t,f,d,g,p,E,v,w,T,R,k;for(d=t;d<r;d+=i){const N=e[d],O=e[d+1];E!==void 0&&(R=N-E,k=O-v,p=Math.sqrt(R*R+k*k),w!==void 0&&(l+=g,f=Math.acos((w*R+T*k)/(g*p)),f>n&&(l>o&&(o=l,s=u,a=d),l=0,u=d-i)),g=p,w=R,T=k),E=N,v=O}return l+=p,l>o?[u,d]:[s,a]}const rv={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class dz extends Bp{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[os]={fillStyle:os},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let l=o.length;const u=e.getType();let f=null,d=e.getStride();if(a.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!zi(this.maxExtent,e.getExtent()))return;let g;if(f=e.getFlatCoordinates(),u=="LineString")g=[f.length];else if(u=="MultiLineString")g=e.getEnds();else if(u=="Polygon")g=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const w=e.getEndss();g=[];for(let T=0,R=w.length;T<R;++T)g.push(w[T][0])}this.beginGeometry(e,t,r);const p=a.repeat,E=p?void 0:a.textAlign;let v=0;for(let w=0,T=g.length;w<T;++w){let R;p?R=hz(p*this.resolution,f,v,g[w],d):R=[f.slice(v,g[w])];for(let k=0,N=R.length;k<N;++k){const O=R[k];let B=0,P=O.length;if(E==null){const M=fz(a.maxAngle,O,0,O.length,2);B=M[0],P=M[1]}for(let M=B;M<P;M+=d)o.push(O[M],O[M+1]);const b=o.length;v=g[w],this.drawChars_(l,b),l=b}}this.endGeometry(t)}else{let g=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),d=2;break;case"Polygon":f=e.getFlatInteriorPoint(),a.overflow||g.push(f[2]/this.resolution),d=3;break;case"MultiPolygon":const N=e.getFlatInteriorPoints();f=[];for(let O=0,B=N.length;O<B;O+=3)a.overflow||g.push(N[O+2]/this.resolution),f.push(N[O],N[O+1]);if(f.length===0)return;d=2;break}const p=this.appendFlatPointCoordinates(f,d);if(p===l)return;if(g&&(p-l)/2!==f.length/d){let N=l/2;g=g.filter((O,B)=>{const P=o[(N+B)*2]===f[B*d]&&o[(N+B)*2+1]===f[B*d+1];return P||--N,P})}this.saveTextStates_();const E=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,v=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let w=a.padding;if(w!=hh&&(a.scale[0]<0||a.scale[1]<0)){let N=a.padding[0],O=a.padding[1],B=a.padding[2],P=a.padding[3];a.scale[0]<0&&(O=-O,P=-P),a.scale[1]<0&&(N=-N,B=-B),w=[N,O,B,P]}const T=this.pixelRatio;this.instructions.push([At.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,w==hh?hh:w.map(function(N){return N*T}),E,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const R=1/T,k=E?E.slice(0):null;k&&(k[1]=os),this.hitDetectionInstructions.push([At.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[R,R],NaN,this.declutterMode_,this.declutterImageWithText_,w,k,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?os:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||zm,justify:t.justify,textBaseline:t.textBaseline||tv,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=rv[i.textBaseline],f=this.textOffsetY_*l,d=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([At.DRAW_CHARS,e,t,u,i.overflow,o,i.maxAngle,l,f,s,g*l,d,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([At.DRAW_CHARS,e,t,u,i.overflow,o&&os,i.maxAngle,l,f,s,g*l,d,a,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Ro(a.getColor()||os)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const v=o.getLineDash(),w=o.getLineDashOffset(),T=o.getWidth(),R=o.getMiterLimit();s.lineCap=o.getLineCap()||Jd,s.lineDash=v?v.slice():xl,s.lineDashOffset=w===void 0?El:w,s.lineJoin=o.getLineJoin()||e0,s.lineWidth=T===void 0?$m:T,s.miterLimit=R===void 0?Bm:R,s.strokeStyle=Ro(o.getColor()||Um)}r=this.textState_;const l=e.getFont()||oD;kU(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||tv,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||hh,r.scale=u===void 0?[1,1]:u;const f=e.getOffsetX(),d=e.getOffsetY(),g=e.getRotateWithView(),p=e.getKeepUpright(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=g===void 0?!1:g,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=E===void 0?0:E,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:un(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+un(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const gz={Circle:Z4,Default:Bp,Image:cz,LineString:uz,Polygon:Z4,Text:dz};class mz{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=gz[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function pz(n,e,t,r,i,s,a,o,l,u,f,d,g=!0){let p=n[e],E=n[e+1],v=0,w=0,T=0,R=0;function k(){v=p,w=E,e+=r,p=n[e],E=n[e+1],R+=T,T=Math.sqrt((p-v)*(p-v)+(E-w)*(E-w))}do k();while(e<t-r&&R+T<s);let N=T===0?0:(s-R)/T;const O=Fs(v,p,N),B=Fs(w,E,N),P=e-r,b=R,M=s+o*l(u,i,f);for(;e<t-r&&R+T<M;)k();N=T===0?0:(M-R)/T;const F=Fs(v,p,N),V=Fs(w,E,N);let W=!1;if(g)if(d){const Ce=[O,B,F,V];zO(Ce,0,4,2,d,Ce,Ce),W=Ce[0]>Ce[2]}else W=O>F;const D=Math.PI,Ie=[],Le=P+r===e;e=P,T=0,R=b,p=n[e],E=n[e+1];let Fe;if(Le){k(),Fe=Math.atan2(E-w,p-v),W&&(Fe+=Fe>0?-D:D);const Ce=(F+O)/2,ce=(V+B)/2;return Ie[0]=[Ce,ce,(M-s)/2,Fe,i],Ie}i=i.replace(/\n/g," ");for(let Ce=0,ce=i.length;Ce<ce;){k();let Re=Math.atan2(E-w,p-v);if(W&&(Re+=Re>0?-D:D),Fe!==void 0){let Q=Re-Fe;if(Q+=Q>D?-2*D:Q<-D?2*D:0,Math.abs(Q)>a)return null}Fe=Re;const me=Ce;let ee=0;for(;Ce<ce;++Ce){const Q=W?ce-Ce-1:Ce,ge=o*l(u,i[Q],f);if(e+r<t&&R+T<s+ee+ge/2)break;ee+=ge}if(Ce===me)continue;const j=W?i.substring(ce-me,ce-Ce):i.substring(me,Ce);N=T===0?0:(s+ee/2-R)/T;const ne=Fs(v,p,N),re=Fs(w,E,N);Ie.push([ne,re,ee/2,Re,j]),s+=ee}return Ie}class ED{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Jy(),{get:(e,t)=>{if(typeof Jy()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Hf=$s(),dc=[],ll=[],cl=[],gc=[];function Q4(n){return n[3].declutterBox}const J4=new RegExp("[-----]");function I2(n,e){return e==="start"?e=J4.test(n)?"right":"left":e==="end"&&(e=J4.test(n)?"left":"right"),rv[e]}function _z(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function yz(n,e,t){return t%2===0&&(n+=e),n}class vz{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Ha(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new ED:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,f=[l.scale[0]*u,l.scale[1]*u],d=l.justify?rv[l.justify]:I2(Array.isArray(e)?e[0]:e,l.textAlign||zm),g=i&&a.lineWidth?a.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(_z,[]),{width:E,height:v,widths:w,heights:T,lineWidths:R}=NU(l,p),k=E+g,N=[],O=(k+2)*f[0],B=(v+g)*f[1],P={width:O<0?Math.floor(O):Math.ceil(O),height:B<0?Math.floor(B):Math.ceil(B),contextInstructions:N};(f[0]!=1||f[1]!=1)&&N.push("scale",f),i&&(N.push("strokeStyle",a.strokeStyle),N.push("lineWidth",g),N.push("lineCap",a.lineCap),N.push("lineJoin",a.lineJoin),N.push("miterLimit",a.miterLimit),N.push("setLineDash",[a.lineDash]),N.push("lineDashOffset",a.lineDashOffset)),r&&N.push("fillStyle",o.fillStyle),N.push("textBaseline","middle"),N.push("textAlign","center");const b=.5-d;let M=d*k+b*g;const F=[],V=[];let W=0,D=0,Ie=0,Le=0,Fe;for(let Ce=0,ce=p.length;Ce<ce;Ce+=2){const Re=p[Ce];if(Re===`
`){D+=W,W=0,M=d*k+b*g,++Le;continue}const me=p[Ce+1]||l.font;me!==Fe&&(i&&F.push("font",me),r&&V.push("font",me),Fe=me),W=Math.max(W,T[Ie]);const ee=[Re,M+b*w[Ie]+d*(w[Ie]-R[Le]),.5*(g+W)+D];M+=w[Ie],i&&F.push("strokeText",ee),r&&V.push("fillText",ee),++Ie}return Array.prototype.push.apply(N,F),Array.prototype.push.apply(N,V),this.labels_[s]=P,P}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,l,u,f,d,g,p,E,v,w){o*=g[0],l*=g[1];let T=r-o,R=i-l;const k=s+u>e?e-u:s,N=a+f>t?t-f:a,O=E[3]+k*g[0]+E[1],B=E[0]+N*g[1]+E[2],P=T-E[3],b=R-E[0];(v||d!==0)&&(dc[0]=P,gc[0]=P,dc[1]=b,ll[1]=b,ll[0]=P+O,cl[0]=ll[0],cl[1]=b+B,gc[1]=cl[1]);let M;return d!==0?(M=jo(Ha(),r,i,1,1,d,-r,-i),Or(M,dc),Or(M,ll),Or(M,cl),Or(M,gc),Qc(Math.min(dc[0],ll[0],cl[0],gc[0]),Math.min(dc[1],ll[1],cl[1],gc[1]),Math.max(dc[0],ll[0],cl[0],gc[0]),Math.max(dc[1],ll[1],cl[1],gc[1]),Hf)):Qc(Math.min(P,P+O),Math.min(b,b+B),Math.max(P,P+O),Math.max(b,b+B),Hf),p&&(T=Math.round(T),R=Math.round(R)),{drawImageX:T,drawImageY:R,drawImageW:k,drawImageH:N,originX:u,originY:f,declutterBox:{minX:Hf[0],minY:Hf[1],maxX:Hf[2],maxY:Hf[3],value:w},canvasTransform:M,scale:g}}replayImageOrLabel_(e,t,r,i,s,a,o){const l=!!(a||o),u=i.declutterBox,f=o?o[2]*i.scale[0]/2:0;return u.minX-f<=t[0]&&u.maxX+f>=0&&u.minY-f<=t[1]&&u.maxY+f>=0&&(l&&this.replayTextBackground_(e,dc,ll,cl,gc,a,o),LU(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Or(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],l=this.pixelRatio,u=I2(Array.isArray(e)?e[0]:e,s.textAlign||zm),f=rv[s.textBaseline||tv],d=o&&o.lineWidth?o.lineWidth:0,g=a.width/l-2*s.scale[0],p=u*g+2*(.5-u)*d,E=f*a.height/l+2*(.5-f)*d;return{label:a,anchorX:p,anchorY:E}}execute_(e,t,r,i,s,a,o,l){const u=this.zIndexContext_;let f;this.pixelCoordinates_&&pu(r,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=$c(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),WB(this.renderedTransform_,r));let d=0;const g=i.length;let p=0,E,v,w,T,R,k,N,O,B,P,b,M,F,V=0,W=0;const D=this.coordinateCache_,Ie=this.viewRotation_,Le=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Fe={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ie},Ce=this.instructions!=i||this.overlaps?0:200;let ce,Re,me,ee;for(;d<g;){const j=i[d];switch(j[0]){case At.BEGIN_GEOMETRY:ce=j[1],ee=j[3],ce.getGeometry()?o!==void 0&&!zi(o,ee.getExtent())?d=j[2]+1:++d:d=j[2],u&&(u.zIndex=j[4]);break;case At.BEGIN_PATH:V>Ce&&(this.fill_(e),V=0),W>Ce&&(e.stroke(),W=0),!V&&!W&&(e.beginPath(),R=NaN,k=NaN),++d;break;case At.CIRCLE:p=j[1];const re=f[p],Q=f[p+1],ge=f[p+2],De=f[p+3],Ve=ge-re,Ae=De-Q,Oe=Math.sqrt(Ve*Ve+Ae*Ae);e.moveTo(re+Oe,Q),e.arc(re,Q,Oe,0,2*Math.PI,!0),++d;break;case At.CLOSE_PATH:e.closePath(),++d;break;case At.CUSTOM:p=j[1],E=j[2];const Te=j[3],ue=j[4],C=j[5];Fe.geometry=Te,Fe.feature=ce,d in D||(D[d]=[]);const qe=D[d];C?C(f,p,E,2,qe):(qe[0]=f[p],qe[1]=f[p+1],qe.length=2),u&&(u.zIndex=j[6]),ue(qe,Fe),++d;break;case At.DRAW_IMAGE:p=j[1],E=j[2],B=j[3],v=j[4],w=j[5];let q=j[6];const ft=j[7],Y=j[8],z=j[9],se=j[10];let Ne=j[11];const xe=j[12];let Xe=j[13];T=j[14]||"declutter";const Je=j[15];if(!B&&j.length>=20){P=j[19],b=j[20],M=j[21],F=j[22];const Yn=this.drawLabelWithPointPlacement_(P,b,M,F);B=Yn.label,j[3]=B;const qi=j[23];v=(Yn.anchorX-qi)*this.pixelRatio,j[4]=v;const Cr=j[24];w=(Yn.anchorY-Cr)*this.pixelRatio,j[5]=w,q=B.height,j[6]=q,Xe=B.width,j[13]=Xe}let ht;j.length>25&&(ht=j[25]);let mt,St,Bt;j.length>17?(mt=j[16],St=j[17],Bt=j[18]):(mt=hh,St=null,Bt=null),se&&Le?Ne+=Ie:!se&&!Le&&(Ne-=Ie);let _r=0;for(;p<E;p+=2){if(ht&&ht[_r++]<Xe/this.pixelRatio)continue;const Yn=this.calculateImageOrLabelDimensions_(B.width,B.height,f[p],f[p+1],Xe,q,v,w,Y,z,Ne,xe,s,mt,!!St||!!Bt,ce),qi=[e,t,B,Yn,ft,St,Bt];if(l){let Cr,Xn,br;if(Je){const Qt=E-p;if(!Je[Qt]){Je[Qt]={args:qi,declutterMode:T};continue}const rr=Je[Qt];Cr=rr.args,Xn=rr.declutterMode,delete Je[Qt],br=Q4(Cr)}let Pr,yr;if(Cr&&(Xn!=="declutter"||!l.collides(br))&&(Pr=!0),(T!=="declutter"||!l.collides(Yn.declutterBox))&&(yr=!0),Xn==="declutter"&&T==="declutter"){const Qt=Pr&&yr;Pr=Qt,yr=Qt}Pr&&(Xn!=="none"&&l.insert(br),this.replayImageOrLabel_.apply(this,Cr)),yr&&(T!=="none"&&l.insert(Yn.declutterBox),this.replayImageOrLabel_.apply(this,qi))}else this.replayImageOrLabel_.apply(this,qi)}++d;break;case At.DRAW_CHARS:const Ea=j[1],Di=j[2],ei=j[3],wa=j[4];F=j[5];const Es=j[6],Xs=j[7],Sa=j[8];M=j[9];const ti=j[10];P=j[11],Array.isArray(P)&&(P=P.reduce(yz,"")),b=j[12];const Ta=[j[13],j[13]];T=j[14]||"declutter";const ws=j[15],Ss=this.textStates[b],Gr=Ss.font,ni=[Ss.scale[0]*Xs,Ss.scale[1]*Xs];let pn;Gr in this.widths_?pn=this.widths_[Gr]:(pn={},this.widths_[Gr]=pn);const Ts=HI(f,Ea,Di,2),Is=Math.abs(ni[0])*V4(Gr,P,pn);if(wa||Is<=Ts){const Yn=this.textStates[b].textAlign,qi=(Ts-Is)*I2(P,Yn),Cr=pz(f,Ea,Di,2,P,qi,Es,Math.abs(ni[0]),V4,Gr,pn,Le?0:this.viewRotation_,ws);e:if(Cr){const Xn=[];let br,Pr,yr,Qt,rr;if(M)for(br=0,Pr=Cr.length;br<Pr;++br){rr=Cr[br],yr=rr[4],Qt=this.createLabel(yr,b,"",M),v=rr[2]+(ni[0]<0?-ti:ti),w=ei*Qt.height+(.5-ei)*2*ti*ni[1]/ni[0]-Sa;const hr=this.calculateImageOrLabelDimensions_(Qt.width,Qt.height,rr[0],rr[1],Qt.width,Qt.height,v,w,0,0,rr[3],Ta,!1,hh,!1,ce);if(l&&T==="declutter"&&l.collides(hr.declutterBox))break e;Xn.push([e,t,Qt,hr,1,null,null])}if(F)for(br=0,Pr=Cr.length;br<Pr;++br){rr=Cr[br],yr=rr[4],Qt=this.createLabel(yr,b,F,""),v=rr[2],w=ei*Qt.height-Sa;const hr=this.calculateImageOrLabelDimensions_(Qt.width,Qt.height,rr[0],rr[1],Qt.width,Qt.height,v,w,0,0,rr[3],Ta,!1,hh,!1,ce);if(l&&T==="declutter"&&l.collides(hr.declutterBox))break e;Xn.push([e,t,Qt,hr,1,null,null])}l&&T!=="none"&&l.load(Xn.map(Q4));for(let hr=0,Zi=Xn.length;hr<Zi;++hr)this.replayImageOrLabel_.apply(this,Xn[hr])}}++d;break;case At.END_GEOMETRY:if(a!==void 0){ce=j[1];const Yn=a(ce,ee,T);if(Yn)return Yn}++d;break;case At.FILL:Ce?V++:this.fill_(e),++d;break;case At.MOVE_TO_LINE_TO:for(p=j[1],E=j[2],Re=f[p],me=f[p+1],e.moveTo(Re,me),R=Re+.5|0,k=me+.5|0,p+=2;p<E;p+=2)Re=f[p],me=f[p+1],N=Re+.5|0,O=me+.5|0,(p==E-2||N!==R||O!==k)&&(e.lineTo(Re,me),R=N,k=O);++d;break;case At.SET_FILL_STYLE:this.alignAndScaleFill_=j[2],V&&(this.fill_(e),V=0,W&&(e.stroke(),W=0)),e.fillStyle=j[1],++d;break;case At.SET_STROKE_STYLE:W&&(e.stroke(),W=0),this.setStrokeStyle_(e,j),++d;break;case At.STROKE:Ce?W++:e.stroke(),++d;break;default:++d;break}}V&&this.fill_(e),W&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const rh=["Polygon","Circle","LineString","Image","Text","Default"],wD=["Image","Text"],xz=rh.filter(n=>!wD.includes(n));class Ez{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ha(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new vz(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,l=jo(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Fr(o,o));const f=this.hitDetectionContext_;f.canvas.width!==o||f.canvas.height!==o?(f.canvas.width=o,f.canvas.height=o):u||f.clearRect(0,0,o,o);let d;this.renderBuffer_!==void 0&&(d=$s(),sm(d,e),jm(d,t*(this.renderBuffer_+i),d));const g=wz(i);let p;function E(O,B,P){const b=f.getImageData(0,0,o,o).data;for(let M=0,F=g.length;M<F;M++)if(b[g[M]]>0){if(!a||P==="none"||p!=="Image"&&p!=="Text"||a.includes(O)){const V=(g[M]-3)/4,W=i-V%o,D=i-(V/o|0),Ie=s(O,B,W*W+D*D);if(Ie)return Ie}f.clearRect(0,0,o,o);break}}const v=Object.keys(this.executorsByZIndex_).map(Number);v.sort(_l);let w,T,R,k,N;for(w=v.length-1;w>=0;--w){const O=v[w].toString();for(R=this.executorsByZIndex_[O],T=rh.length-1;T>=0;--T)if(p=rh[T],k=R[p],k!==void 0&&(N=k.executeHitDetection(f,l,r,E,d),N))return N}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return $c(o,0,8,2,e,o),o}isEmpty(){return Th(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?rB:_l),a=a||rh;const u=rh.length;for(let f=0,d=l.length;f<d;++f){const g=l[f].toString(),p=this.executorsByZIndex_[g];for(let E=0,v=a.length;E<v;++E){const w=a[E],T=p[w];if(T!==void 0){const R=o===null?void 0:T.getZIndexContext(),k=R?R.getContext():e,N=this.maxExtent_&&w!=="Image"&&w!=="Text";if(N&&(k.save(),this.clip(k,r)),!R||w==="Text"||w==="Image"?T.execute(k,t,r,i,s,o):R.pushFunction(O=>T.execute(O,t,r,i,s,o)),N&&k.restore(),R){R.offset();const O=l[f]*u+rh.indexOf(w);this.deferredZIndexContexts_[O]||(this.deferredZIndexContexts_[O]=[]),this.deferredZIndexContexts_[O].push(R)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(_l);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const A2={};function wz(n){if(A2[n]!==void 0)return A2[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=r[o];l||(l=[],r[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return A2[n]=i,i}function ek(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let Up=class SD extends Nx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;En(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||un(a)),En(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),En(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=_t.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?_t.LOADED:_t.IDLE:l=_t.LOADING:l=_t.LOADED),this.color_=e.color!==void 0?bh(e.color):null,this.iconImage_=ev(a,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,f;if(e.size)[u,f]=e.size;else{const d=this.getImage(1);if(d.width&&d.height)u=d.width,f=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(ek(p[0],p[1],e.width,e.height))};this.listenImageChange(g);return}}u!==void 0&&this.setScale(ek(u,f,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new SD({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=ev(null,e,this.crossOrigin_,_t.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==_t.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==_t.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ft.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ft.CHANGE,e)}ready(){return this.iconImage_.ready()}};const To=.5;function Sz(n,e,t,r,i,s,a,o,l){const u=i,f=n[0]*To,d=n[1]*To,g=Fr(f,d);g.imageSmoothingEnabled=!1;const p=g.canvas,E=new DU(g,To,i,null,a,o,null),v=t.length,w=Math.floor((256*256*256-1)/v),T={};for(let k=1;k<=v;++k){const N=t[k-1],O=N.getStyleFunction()||r;if(!O)continue;let B=O(N,s);if(!B)continue;Array.isArray(B)||(B=[B]);const b=(k*w).toString(16).padStart(7,"#00000");for(let M=0,F=B.length;M<F;++M){const V=B[M],W=V.getGeometryFunction()(N);if(!W||!zi(u,W.getExtent()))continue;const D=V.clone(),Ie=D.getFill();Ie&&Ie.setColor(b);const Le=D.getStroke();Le&&(Le.setColor(b),Le.setLineDash(null)),D.setText(void 0);const Fe=V.getImage();if(Fe){const me=Fe.getImageSize();if(!me)continue;const ee=Fr(me[0],me[1],void 0,{alpha:!1}),j=ee.canvas;ee.fillStyle=b,ee.fillRect(0,0,j.width,j.height),D.setImage(new Up({img:j,anchor:Fe.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Fe.getOrigin(),opacity:1,size:Fe.getSize(),scale:Fe.getScale(),rotation:Fe.getRotation(),rotateWithView:Fe.getRotateWithView()}))}const Ce=D.getZIndex()||0;let ce=T[Ce];ce||(ce={},T[Ce]=ce,ce.Polygon=[],ce.Circle=[],ce.LineString=[],ce.Point=[]);const Re=W.getType();if(Re==="GeometryCollection"){const me=W.getGeometriesArrayRecursive();for(let ee=0,j=me.length;ee<j;++ee){const ne=me[ee];ce[ne.getType().replace("Multi","")].push(ne,D)}}else ce[Re.replace("Multi","")].push(W,D)}}const R=Object.keys(T).map(Number).sort(_l);for(let k=0,N=R.length;k<N;++k){const O=T[R[k]];for(const B in O){const P=O[B];for(let b=0,M=P.length;b<M;b+=2){E.setStyle(P[b+1]);for(let F=0,V=e.length;F<V;++F)E.setTransform(e[F]),E.drawGeometry(P[b])}}}return g.getImageData(0,0,p.width,p.height)}function Tz(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*To),s=Math.floor(Math.round(n[1])*To),a=(Gn(i,0,t.width-1)+Gn(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],f=t.data[a+2]+256*(l+256*o),d=Math.floor((256*256*256-1)/e.length);f&&f%d===0&&r.push(e[f/d-1])}return r}class TD extends $o{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const Iz=5;class Az extends Np{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Iz}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Mt()}getData(e){return null}prepareFrame(e){return Mt()}renderFrame(e,t){return Mt()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===_t.LOADED||t.getState()===_t.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=_t.LOADED&&t!=_t.ERROR&&e.addEventListener(Ft.CHANGE,this.boundHandleImageChange_),t==_t.IDLE&&(e.load(),t=e.getState()),t==_t.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const tk=[];let cd=null;function Rz(){cd=Fr(1,1,void 0,{willReadFrequently:!0})}class rA extends Az{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ha(),this.pixelTransform=Ha(),this.inversePixelTransform=Ha(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){cd||Rz(),cd.clearRect(0,0,1,1);let i;try{cd.drawImage(e,t,r,1,1,0,0,1,1),i=cd.getImageData(0,0,1,1).data}catch{return cd=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&pu(bh(e.style.backgroundColor),bh(r)))){const o=e.firstElementChild;Dc(o)&&(a=o.getContext("2d"))}if(a&&XB(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=Bs?eD():document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Fr();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=qh(r),s=Ix(r),a=Tx(r),o=Sx(r);Or(t.coordinateToPixelTransform,i),Or(t.coordinateToPixelTransform,s),Or(t.coordinateToPixelTransform,a),Or(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;Or(l,i),Or(l,s),Or(l,a),Or(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(Yt(r)/i*a),l=Math.round(Sr(r)/i*a);jo(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-l/2),UO(this.inversePixelTransform,this.pixelTransform);const u=YB(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const f=this.context.canvas;f.width!=o||f.height!=l?(f.width=o,f.height=l):this.context.clearRect(0,0,o,l),u!==f.style.transform&&(f.style.transform=u)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new TD(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(da.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(da.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ED),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(da.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(da.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const l=s/2,u=a/2,f=i/t,d=-f,g=-e[0]+o,p=-e[1];return jo(this.tempTransform,l,u,f,d,-r,g,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Cz extends rA{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=$s(),this.wrappedRenderedExtent_=$s(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,f=l.getExtent(),d=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),p=t.pixelRatio,E=t.viewHints,v=!(E[Kr.ANIMATING]||E[Kr.INTERACTING]),w=this.context,T=Math.round(Yt(i)/o*p),R=Math.round(Sr(i)/o*p),k=d.getWrapX()&&l.canWrapX(),N=k?Yt(f):null,O=k?Math.ceil((i[2]-f[2])/N)+1:1;let B=k?Math.floor((i[0]-f[0])/N):0;do{let P=this.getRenderTransform(a,o,0,p,T,R,B*N);t.declutter&&(P=P.slice(0)),e.execute(w,[w.canvas.width,w.canvas.height],P,u,v,r===void 0?rh:r?wD:xz,r?g&&t.declutter[g]:void 0)}while(++B<O)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Fr(this.context.canvas.width,this.context.canvas.height,tk))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Mx(this.context),tk.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(da.PRERENDER)||this.getLayer().hasListener(da.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const l=Ao(r.extent);o=zi(l,e.extent),this.clipped_=o&&!Nc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),f=[],d=r[0]*To,g=r[1]*To;f.push(this.getRenderTransform(i,s,a,To,d,g,0).slice());const p=u.getSource(),E=o.getExtent();if(p.getWrapX()&&o.canWrapX()&&!Nc(E,l)){let v=l[0];const w=Yt(E);let T=0,R;for(;v<E[0];)--T,R=w*T,f.push(this.getRenderTransform(i,s,a,To,d,g,R).slice()),v+=w;for(T=0,v=l[2];v>E[2];)++T,R=w*T,f.push(this.getRenderTransform(i,s,a,To,d,g,R).slice()),v-=w}this.hitDetectionImageData_=Sz(r,f,this.renderedFeatures_,u.getStyleFunction(),l,s,a,G4(s,this.renderedPixelRatio_))}t(Tz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),u={},f=function(g,p,E){const v=un(g),w=u[v];if(w){if(w!==!0&&E<w.distanceSq){if(E===0)return u[v]=!0,s.splice(s.lastIndexOf(w),1),i(g,l,p);w.geometry=p,w.distanceSq=E}}else{if(E===0)return u[v]=!0,i(g,l,p);s.push(u[v]={feature:g,layer:l,geometry:p,distanceSq:E,callback:i})}},d=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,f,d?t.declutter?.[d]?.all().map(g=>g.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Kr.ANIMATING],s=e.viewHints[Kr.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,f=u.projection,d=u.resolution,g=e.pixelRatio,p=t.getRevision(),E=t.getRenderBuffer();let v=t.getRenderOrder();v===void 0&&(v=jU);const w=u.center.slice(),T=jm(l,E*d),R=T.slice(),k=[T.slice()],N=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!Nc(N,e.extent)){const Ie=Yt(N),Le=Math.max(Yt(T)/2,Ie);T[0]=N[0]-Le,T[2]=N[2]+Le,MO(w,f);const Fe=bO(k[0],f);Fe[0]<N[0]&&Fe[2]<N[2]?k.push([Fe[0]+Ie,Fe[1],Fe[2]+Ie,Fe[3]]):Fe[0]>N[0]&&Fe[2]>N[2]&&k.push([Fe[0]-Ie,Fe[1],Fe[2]-Ie,Fe[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==p&&this.renderedRenderOrder_==v&&this.renderedFrameDeclutter_===!!e.declutter&&Nc(this.wrappedRenderedExtent_,T))return pu(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const O=new mz(hD(d,g),T,d,g);let B;for(let Ie=0,Le=k.length;Ie<Le;++Ie)r.loadFeatures(k[Ie],d,f);const P=G4(d,g);let b=!0;const M=(Ie,Le)=>{let Fe;const Ce=Ie.getStyleFunction()||t.getStyleFunction();if(Ce&&(Fe=Ce(Ie,d)),Fe){const ce=this.renderFeature(Ie,P,Fe,O,B,this.getLayer().getDeclutter(),Le);b=b&&!ce}},F=BO(T),V=r.getFeaturesInExtent(F);v&&V.sort(v);for(let Ie=0,Le=V.length;Ie<Le;++Ie)M(V[Ie],Ie);this.renderedFeatures_=V,this.ready=b;const W=O.finish(),D=new Ez(T,d,g,r.getOverlaps(),W,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=p,this.renderedRenderOrder_=v,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=T,this.renderedCenter_=w,this.renderedProjection_=f,this.renderedPixelRatio_=g,this.replayGroup_=D,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,f=r.length;u<f;++u)l=B4(i,e,r[u],t,this.boundHandleStyleImageChange_,s,a,o)||l;else l=B4(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return l}}let ef=0;const Ui=1<<ef++,en=1<<ef++,ls=1<<ef++,Va=1<<ef++,Ph=1<<ef++,zg=1<<ef++,F_=Math.pow(2,ef)-1,iA={[Ui]:"boolean",[en]:"number",[ls]:"string",[Va]:"color",[Ph]:"number[]",[zg]:"size"},bz=Object.keys(iA).map(Number).sort(_l);function Pz(n){return n in iA}function $g(n){const e=[];for(const t of bz)Wg(n,t)&&e.push(iA[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Wg(n,e){return(n&e)===e}function mc(n,e){return n===e}class Lr{constructor(e,t){if(!Pz(e))throw new Error(`literal expressions must have a specific type, got ${$g(e)}`);this.type=e,this.value=t}}class kz{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function ID(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function mi(n,e,t){switch(typeof n){case"boolean":{if(mc(e,ls))return new Lr(ls,n?"true":"false");if(!Wg(e,Ui))throw new Error(`got a boolean, but expected ${$g(e)}`);return new Lr(Ui,n)}case"number":{if(mc(e,zg))return new Lr(zg,fs(n));if(mc(e,Ui))return new Lr(Ui,!!n);if(mc(e,ls))return new Lr(ls,n.toString());if(!Wg(e,en))throw new Error(`got a number, but expected ${$g(e)}`);return new Lr(en,n)}case"string":{if(mc(e,Va))return new Lr(Va,qI(n));if(mc(e,Ui))return new Lr(Ui,!!n);if(!Wg(e,ls))throw new Error(`got a string, but expected ${$g(e)}`);return new Lr(ls,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Uz(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(mc(e,zg)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Lr(zg,n)}if(mc(e,Va)){if(n.length===3)return new Lr(Va,[...n,1]);if(n.length===4)return new Lr(Va,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Wg(e,Ph))throw new Error(`got an array of numbers, but expected ${$g(e)}`);return new Lr(Ph,n)}const Me={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Mz={[Me.Get]:Ot(Ut(1,1/0),nk),[Me.Var]:Ot(Ut(1,1),Nz),[Me.Has]:Ot(Ut(1,1/0),nk),[Me.Id]:Ot(Lz,Kf),[Me.Concat]:Ot(Ut(2,1/0),fn(ls)),[Me.GeometryType]:Ot(Oz,Kf),[Me.LineMetric]:Ot(Kf),[Me.Resolution]:Ot(R2,Kf),[Me.Zoom]:Ot(R2,Kf),[Me.Time]:Ot(R2,Kf),[Me.Any]:Ot(Ut(2,1/0),fn(Ui)),[Me.All]:Ot(Ut(2,1/0),fn(Ui)),[Me.Not]:Ot(Ut(1,1),fn(Ui)),[Me.Equal]:Ot(Ut(2,2),fn(F_)),[Me.NotEqual]:Ot(Ut(2,2),fn(F_)),[Me.GreaterThan]:Ot(Ut(2,2),fn(en)),[Me.GreaterThanOrEqualTo]:Ot(Ut(2,2),fn(en)),[Me.LessThan]:Ot(Ut(2,2),fn(en)),[Me.LessThanOrEqualTo]:Ot(Ut(2,2),fn(en)),[Me.Multiply]:Ot(Ut(2,1/0),rk),[Me.Coalesce]:Ot(Ut(2,1/0),rk),[Me.Divide]:Ot(Ut(2,2),fn(en)),[Me.Add]:Ot(Ut(2,1/0),fn(en)),[Me.Subtract]:Ot(Ut(2,2),fn(en)),[Me.Clamp]:Ot(Ut(3,3),fn(en)),[Me.Mod]:Ot(Ut(2,2),fn(en)),[Me.Pow]:Ot(Ut(2,2),fn(en)),[Me.Abs]:Ot(Ut(1,1),fn(en)),[Me.Floor]:Ot(Ut(1,1),fn(en)),[Me.Ceil]:Ot(Ut(1,1),fn(en)),[Me.Round]:Ot(Ut(1,1),fn(en)),[Me.Sin]:Ot(Ut(1,1),fn(en)),[Me.Cos]:Ot(Ut(1,1),fn(en)),[Me.Atan]:Ot(Ut(1,2),fn(en)),[Me.Sqrt]:Ot(Ut(1,1),fn(en)),[Me.Match]:Ot(Ut(4,1/0),ik,Fz),[Me.Between]:Ot(Ut(3,3),fn(en)),[Me.Interpolate]:Ot(Ut(6,1/0),ik,jz),[Me.Case]:Ot(Ut(3,1/0),Dz,Vz),[Me.In]:Ot(Ut(2,2),Gz),[Me.Number]:Ot(Ut(1,1/0),fn(F_)),[Me.String]:Ot(Ut(1,1/0),fn(F_)),[Me.Array]:Ot(Ut(1,1/0),fn(en)),[Me.Color]:Ot(Ut(1,4),fn(en)),[Me.Band]:Ot(Ut(1,3),fn(en)),[Me.Palette]:Ot(Ut(2,2),Bz),[Me.ToString]:Ot(Ut(1,1),fn(Ui|en|ls|Va))};function nk(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new Lr(en,a);break}case"string":{i[s]=new Lr(ls,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function Nz(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new Lr(ls,r)]}function Lz(n,e,t){t.featureId=!0}function Oz(n,e,t){t.geometryType=!0}function R2(n,e,t){t.mapState=!0}function Kf(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Ut(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function rk(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=mi(n[s+1],e,t);i[s]=a}return i}function fn(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=mi(e[a+1],n,r);s[a]=o}return s}}function Dz(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function ik(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function Fz(n,e,t){const r=n.length-1,i=ls|en|Ui,s=mi(n[1],i,t),a=mi(n[n.length-1],e,t),o=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const u=mi(n[l+2],s.type,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=mi(n[l+3],a.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...o,a]}function jz(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new Lr(en,i);let a;try{a=mi(n[2],en,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const u=mi(n[l+3],en,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=mi(n[l+4],e,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,a,...o]}function Vz(n,e,t){const r=mi(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=mi(n[s+1],Ui,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=mi(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function Gz(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=ls}else i=en;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const l=mi(r[o],i,t);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[mi(n[1],i,t),...s]}function Bz(n,e,t){let r;try{r=mi(n[1],en,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=mi(i[a],Va,t)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof Lr))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function Ot(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new kz(t,i,...s)}}function Uz(n,e,t){const r=n[0],i=Mz[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function AD(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return AD(n.getGeometries()[0]);default:return""}}function RD(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Vl(n,e,t){const r=mi(n,e,t);return Ja(r)}function Ja(n,e){if(n instanceof Lr){if(n.type===Va&&typeof n.value=="string"){const r=qI(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Me.Number:case Me.String:case Me.Coalesce:return zz(n);case Me.Get:case Me.Var:case Me.Has:return $z(n);case Me.Id:return r=>r.featureId;case Me.GeometryType:return r=>r.geometryType;case Me.Concat:{const r=n.args.map(i=>Ja(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Me.Resolution:return r=>r.resolution;case Me.Any:case Me.All:case Me.Between:case Me.In:case Me.Not:return Hz(n);case Me.Equal:case Me.NotEqual:case Me.LessThan:case Me.LessThanOrEqualTo:case Me.GreaterThan:case Me.GreaterThanOrEqualTo:return Wz(n);case Me.Multiply:case Me.Divide:case Me.Add:case Me.Subtract:case Me.Clamp:case Me.Mod:case Me.Pow:case Me.Abs:case Me.Floor:case Me.Ceil:case Me.Round:case Me.Sin:case Me.Cos:case Me.Atan:case Me.Sqrt:return Kz(n);case Me.Case:return Yz(n);case Me.Match:return Xz(n);case Me.Interpolate:return qz(n);case Me.ToString:return Zz(n);default:throw new Error(`Unsupported operator ${t}`)}}function zz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ja(n.args[s]);switch(t){case Me.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Me.Number:case Me.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function $z(n,e){const r=n.args[0].value;switch(n.operator){case Me.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const f=s[o].value;a=a[f]}return a};case Me.Var:return i=>i.variables[r];case Me.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const f=s[o].value;if(!a||!Object.hasOwn(a,f))return!1;a=a[f]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Wz(n,e){const t=n.operator,r=Ja(n.args[0]),i=Ja(n.args[1]);switch(t){case Me.Equal:return s=>r(s)===i(s);case Me.NotEqual:return s=>r(s)!==i(s);case Me.LessThan:return s=>r(s)<i(s);case Me.LessThanOrEqualTo:return s=>r(s)<=i(s);case Me.GreaterThan:return s=>r(s)>i(s);case Me.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Hz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ja(n.args[s]);switch(t){case Me.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Me.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Me.Between:return s=>{const a=i[0](s),o=i[1](s),l=i[2](s);return a>=o&&a<=l};case Me.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case Me.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Kz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ja(n.args[s]);switch(t){case Me.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case Me.Divide:return s=>i[0](s)/i[1](s);case Me.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case Me.Subtract:return s=>i[0](s)-i[1](s);case Me.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const l=i[2](s);return a>l?l:a};case Me.Mod:return s=>i[0](s)%i[1](s);case Me.Pow:return s=>Math.pow(i[0](s),i[1](s));case Me.Abs:return s=>Math.abs(i[0](s));case Me.Floor:return s=>Math.floor(i[0](s));case Me.Ceil:return s=>Math.ceil(i[0](s));case Me.Round:return s=>Math.round(i[0](s));case Me.Sin:return s=>Math.sin(i[0](s));case Me.Cos:return s=>Math.cos(i[0](s));case Me.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Me.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Yz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Ja(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function Xz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Ja(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t-1;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function qz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Ja(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,l;for(let u=2;u<t;u+=2){const f=r[u](i);let d=r[u+1](i);const g=Array.isArray(d);if(g&&(d=wU(d)),f>=a)return u===2?d:g?Qz(s,a,o,l,f,d):Hg(s,a,o,l,f,d);o=f,l=d}return l}}function Zz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ja(n.args[s]);switch(t){case Me.ToString:return s=>{const a=i[0](s);return n.args[0].type===Va?ZI(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Hg(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+l*(s-r)}function Qz(n,e,t,r,i,s){if(i-t===0)return r;const o=O4(r),l=O4(s);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const f=[Hg(n,e,t,o[0],i,l[0]),Hg(n,e,t,o[1],i,l[1]),o[2]+Hg(n,e,t,0,i,u),Hg(n,e,t,r[3],i,s[3])];return SU(f)}function Jz(n){return!0}function e$(n){const e=ID(),t=t$(n,e),r=RD();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=AD(i.getGeometry())),t(r)}}function sk(n){const e=ID(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=eT(n[a],e);const i=RD(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const u=a.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const f=r[u](i);f&&(s[l]=f,l+=1)}return s.length=l,s}}function t$(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?Vl(s.filter,Ui,e):Jz;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=eT(s.style[u],e)}else o=[eT(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const l=r[o].filter;if(l(i)&&!(n[o].else&&a)){a=!0;for(const u of r[o].styles){const f=u(i);f&&s.push(f)}}}return s}}function eT(n,e){const t=Hm(n,"",e),r=Km(n,"",e),i=n$(n,e),s=r$(n,e),a=cs(n,"z-index",e);if(!t&&!r&&!i&&!s&&!Th(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new nr;return function(l){let u=!0;if(t){const f=t(l);f&&(u=!1),o.setFill(f)}if(r){const f=r(l);f&&(u=!1),o.setStroke(f)}if(i){const f=i(l);f&&(u=!1),o.setText(f)}if(s){const f=s(l);f&&(u=!1),o.setImage(f)}return a&&o.setZIndex(a(l)),u?null:o}}function Hm(n,e,t){let r;if(e+"fill-pattern-src"in n)r=o$(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=sA(n,e+"fill-color",t)}if(!r)return null;const i=new Qr;return function(s){const a=r(s);return a===XI?null:(i.setColor(a),i)}}function Km(n,e,t){const r=cs(n,e+"stroke-width",t),i=sA(n,e+"stroke-color",t);if(!r&&!i)return null;const s=hl(n,e+"stroke-line-cap",t),a=hl(n,e+"stroke-line-join",t),o=CD(n,e+"stroke-line-dash",t),l=cs(n,e+"stroke-line-dash-offset",t),u=cs(n,e+"stroke-miter-limit",t),f=new hs;return function(d){if(i){const g=i(d);if(g===XI)return null;f.setColor(g)}if(r&&f.setWidth(r(d)),s){const g=s(d);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(g)}if(a){const g=a(d);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(g)}return o&&f.setLineDash(o(d)),l&&f.setLineDashOffset(l(d)),u&&f.setMiterLimit(u(d)),f}}function n$(n,e){const t="text-",r=hl(n,t+"value",e);if(!r)return null;const i=Hm(n,t,e),s=Hm(n,t+"background-",e),a=Km(n,t,e),o=Km(n,t+"background-",e),l=hl(n,t+"font",e),u=cs(n,t+"max-angle",e),f=cs(n,t+"offset-x",e),d=cs(n,t+"offset-y",e),g=Nd(n,t+"overflow",e),p=hl(n,t+"placement",e),E=cs(n,t+"repeat",e),v=Ox(n,t+"scale",e),w=Nd(n,t+"rotate-with-view",e),T=cs(n,t+"rotation",e),R=hl(n,t+"align",e),k=hl(n,t+"justify",e),N=hl(n,t+"baseline",e),O=Nd(n,t+"keep-upright",e),B=CD(n,t+"padding",e),P=Dx(n,t+"declutter-mode"),b=new Jh({declutterMode:P});return function(M){if(b.setText(r(M)),i&&b.setFill(i(M)),s&&b.setBackgroundFill(s(M)),a&&b.setStroke(a(M)),o&&b.setBackgroundStroke(o(M)),l&&b.setFont(l(M)),u&&b.setMaxAngle(u(M)),f&&b.setOffsetX(f(M)),d&&b.setOffsetY(d(M)),g&&b.setOverflow(g(M)),p){const F=p(M);if(F!=="point"&&F!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(F)}if(E&&b.setRepeat(E(M)),v&&b.setScale(v(M)),w&&b.setRotateWithView(w(M)),T&&b.setRotation(T(M)),R){const F=R(M);if(F!=="left"&&F!=="center"&&F!=="right"&&F!=="end"&&F!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(F)}if(k){const F=k(M);if(F!=="left"&&F!=="right"&&F!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(F)}if(N){const F=N(M);if(F!=="bottom"&&F!=="top"&&F!=="middle"&&F!=="alphabetic"&&F!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(F)}return B&&b.setPadding(B(M)),O&&b.setKeepUpright(O(M)),b}}function r$(n,e){return"icon-src"in n?i$(n,e):"shape-points"in n?s$(n,e):"circle-radius"in n?a$(n,e):null}function i$(n,e){const t="icon-",r=t+"src",i=bD(n[r],r),s=iv(n,t+"anchor",e),a=Ox(n,t+"scale",e),o=cs(n,t+"opacity",e),l=iv(n,t+"displacement",e),u=cs(n,t+"rotation",e),f=Nd(n,t+"rotate-with-view",e),d=ok(n,t+"anchor-origin"),g=lk(n,t+"anchor-x-units"),p=lk(n,t+"anchor-y-units"),E=h$(n,t+"color"),v=c$(n,t+"cross-origin"),w=u$(n,t+"offset"),T=ok(n,t+"offset-origin"),R=sv(n,t+"width"),k=sv(n,t+"height"),N=l$(n,t+"size"),O=Dx(n,t+"declutter-mode"),B=new Up({src:i,anchorOrigin:d,anchorXUnits:g,anchorYUnits:p,color:E,crossOrigin:v,offset:w,offsetOrigin:T,height:k,width:R,size:N,declutterMode:O});return function(P){return o&&B.setOpacity(o(P)),l&&B.setDisplacement(l(P)),u&&B.setRotation(u(P)),f&&B.setRotateWithView(f(P)),a&&B.setScale(a(P)),s&&B.setAnchor(s(P)),B}}function s$(n,e){const t="shape-",r=t+"points",i=t+"radius",s=tT(n[r],r),a=tT(n[i],i),o=Hm(n,t,e),l=Km(n,t,e),u=Ox(n,t+"scale",e),f=iv(n,t+"displacement",e),d=cs(n,t+"rotation",e),g=Nd(n,t+"rotate-with-view",e),p=sv(n,t+"radius2"),E=sv(n,t+"angle"),v=Dx(n,t+"declutter-mode"),w=new Lx({points:s,radius:a,radius2:p,angle:E,declutterMode:v});return function(T){return o&&w.setFill(o(T)),l&&w.setStroke(l(T)),f&&w.setDisplacement(f(T)),d&&w.setRotation(d(T)),g&&w.setRotateWithView(g(T)),u&&w.setScale(u(T)),w}}function a$(n,e){const t="circle-",r=Hm(n,t,e),i=Km(n,t,e),s=cs(n,t+"radius",e),a=Ox(n,t+"scale",e),o=iv(n,t+"displacement",e),l=cs(n,t+"rotation",e),u=Nd(n,t+"rotate-with-view",e),f=Dx(n,t+"declutter-mode"),d=new bl({radius:5,declutterMode:f});return function(g){return s&&d.setRadius(s(g)),r&&d.setFill(r(g)),i&&d.setStroke(i(g)),o&&d.setDisplacement(o(g)),l&&d.setRotation(l(g)),u&&d.setRotateWithView(u(g)),a&&d.setScale(a(g)),d}}function cs(n,e,t){if(!(e in n))return;const r=Vl(n[e],en,t);return function(i){return tT(r(i),e)}}function hl(n,e,t){if(!(e in n))return null;const r=Vl(n[e],ls,t);return function(i){return bD(r(i),e)}}function o$(n,e,t){const r=hl(n,e+"pattern-src",t),i=ak(n,e+"pattern-offset",t),s=ak(n,e+"pattern-size",t),a=sA(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function Nd(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ui,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function sA(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Va,t);return function(i){return PD(r(i),e)}}function CD(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ph,t);return function(i){return zp(r(i),e)}}function iv(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ph,t);return function(i){const s=zp(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function ak(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ph,t);return function(i){return kD(r(i),e)}}function Ox(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ph|en,t);return function(i){return f$(r(i),e)}}function sv(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function l$(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return fs(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function c$(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function ok(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function lk(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function u$(n,e){const t=n[e];if(t!==void 0)return zp(t,e)}function Dx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function h$(n,e){const t=n[e];if(t!==void 0)return PD(t,e)}function zp(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function bD(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function tT(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function PD(n,e){if(typeof n=="string")return n;const t=zp(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function kD(n,e){const t=zp(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function f$(n,e){return typeof n=="number"?n:kD(n,e)}const Na={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function ck(n,e,t){return(function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,u=e?0:s[1]*i,f=o?o[0]:0,d=o?o[1]:0;let g=n[0]+l/2+f,p=n[2]-l/2+f,E=n[1]+u/2+d,v=n[3]-u/2+d;g>p&&(g=(p+g)/2,p=g),E>v&&(E=(v+E)/2,v=E);let w=Gn(r[0],g,p),T=Gn(r[1],E,v);if(a&&t&&i){const R=30*i;w+=-R*Math.log(1+Math.max(0,g-r[0])/R)+R*Math.log(1+Math.max(0,r[0]-p)/R),T+=-R*Math.log(1+Math.max(0,E-r[1])/R)+R*Math.log(1+Math.max(0,r[1]-v)/R)}return[w,T]})}function d$(n){return n}function MD(n){return Math.pow(n,3)}function T0(n){return 1-MD(1-n)}function g$(n){return 3*n*n-2*n*n*n}function m$(n){return n}function aA(n,e,t,r){const i=Yt(e)/t[0],s=Sr(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function oA(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Gn(r,t/2,e*2)}function p$(n,e,t,r){return e=e!==void 0?e:!0,(function(i,s,a,o){if(i!==void 0){const l=n[0],u=n[n.length-1],f=t?aA(l,t,a,r):l;if(o)return e?oA(i,f,u):Gn(i,u,f);const d=Math.min(f,i),g=Math.floor(Ex(n,d,s));return n[g]>f&&g<n.length-1?n[g+1]:n[g]}})}function _$(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(a,o,l,u){if(a!==void 0){const f=i?aA(e,i,l,s):e;if(u)return r?oA(a,f,t):Gn(a,t,f);const d=1e-9,g=Math.ceil(Math.log(e/f)/Math.log(n)-d),p=-o*(.5-d)+.5,E=Math.min(f,a),v=Math.floor(Math.log(e/E)/Math.log(n)+p),w=Math.max(g,v),T=e/Math.pow(n,w);return Gn(T,t,f)}})}function uk(n,e,t,r,i){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const u=r?aA(n,r,o,i):n;return!t||!l?Gn(s,e,u):oA(s,u,e)}})}function lA(n){if(n!==void 0)return 0}function hk(n){if(n!==void 0)return n}function y$(n){const e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function v$(n){const e=vl(5);return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}const x$=42,cA=256,C2=0;class Io extends Wo{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=VI(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&GO(),e.center&&(e.center=ul(e.center,this.projection_)),e.extent&&(e.extent=Ao(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Na)delete t[o];this.setProperties(t,!0);const r=w$(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=E$(e),s=r.constraint,a=S$(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=ul(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ul(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===t){r&&j_(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const f=arguments[i],d={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||g$,callback:r};if(f.center&&(d.sourceCenter=a,d.targetCenter=f.center.slice(),a=d.targetCenter),f.zoom!==void 0?(d.sourceResolution=o,d.targetResolution=this.getResolutionForZoom(f.zoom),o=d.targetResolution):f.resolution&&(d.sourceResolution=o,d.targetResolution=f.resolution,o=d.targetResolution),f.rotation!==void 0){d.sourceRotation=l;const g=zc(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+g,l=d.targetRotation}T$(d)?d.complete=!0:s+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(Kr.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Kr.ANIMATING]>0}getInteracting(){return this.hints_[Kr.INTERACTING]>0}cancelAnimations(){this.setHint(Kr.ANIMATING,-this.hints_[Kr.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&j_(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l.complete)continue;const u=e-l.start;let f=l.duration>0?u/l.duration:1;f>=1?(l.complete=!0,f=1):s=!1;const d=l.easing(f);if(l.sourceCenter){const g=l.sourceCenter[0],p=l.sourceCenter[1],E=l.targetCenter[0],v=l.targetCenter[1];this.nextCenter_=l.targetCenter;const w=g+d*(E-g),T=p+d*(v-p);this.targetCenter_=[w,T]}if(l.sourceResolution&&l.targetResolution){const g=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(g,0,p,!0);this.targetCenter_=this.calculateCenterZoom(E,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const g=d===1?zc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(Kr.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&j_(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],OI(r,e-this.getRotation()),mB(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&HS(e,this.getProjection())}getCenterInternal(){return this.get(Na.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return BO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();En(t,"The view center is not defined");const r=this.getResolution();En(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return En(i!==void 0,"The view rotation is not defined"),Wy(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Na.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ao(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Yt(e)/t[0],i=Sr(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(s){return t/Math.pow(e,s*i)})}getRotation(){return this.get(Na.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return(function(a){return Math.log(r/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=b2(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Ex(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Gn(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Gn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(En(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){En(!w0(e),"Cannot fit empty extent provided as `geometry`");const i=Ao(e,this.getProjection());r=z4(i)}else if(e.getType()==="Circle"){const i=Ao(e.getExtent(),this.getProjection());r=z4(i),r.rotate(this.getRotation(),Fo(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,u=-1/0,f=-1/0;for(let d=0,g=s.length;d<g;d+=a){const p=s[d]*r-s[d+1]*i,E=s[d]*i+s[d+1]*r;o=Math.min(o,p),l=Math.min(l,E),u=Math.max(u,p),f=Math.max(f,E)}return[o,l,u,f]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),f=Math.sin(u),d=Math.cos(u),g=Fo(o);g[0]+=(i[1]-i[3])/2*l,g[1]+=(i[0]-i[2])/2*l;const p=g[0]*d-g[1]*f,E=g[1]*d+g[0]*f,v=this.getConstrainedCenter([p,E],l),w=t.callback?t.callback:Fm;t.duration!==void 0?this.animateInternal({resolution:l,center:v,duration:t.duration,easing:t.easing},w):(this.targetResolution_=l,this.targetCenter_=v,this.applyTargetState_(!1,!0),j_(w,!0))}centerOn(e,t,r){this.centerOnInternal(ul(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(b2(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),l=b2(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=HS(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ul(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ul(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ul(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(Na.ROTATION)!==i&&this.set(Na.ROTATION,i),this.get(Na.RESOLUTION)!==a&&(this.set(Na.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Na.CENTER)||!Ky(this.get(Na.CENTER),o))&&this.set(Na.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!Ky(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:T0,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Kr.INTERACTING,1)}endInteraction(e,t,r){r=r&&ul(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Kr.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function j_(n,e){setTimeout(function(){n(e)},0)}function E$(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return ck(n.extent,n.constrainOnlyCenter,t)}const e=VI(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ck(t,!1,!1)}return d$}function w$(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:C2,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,g=VI(n.projection,"EPSG:3857"),p=g.getExtent();let E=n.constrainOnlyCenter,v=n.extent;if(!u&&!v&&g.isGlobal()&&(E=!1,v=p),n.resolutions!==void 0){const w=n.resolutions;t=w[a],r=w[o]!==void 0?w[o]:w[w.length-1],n.constrainResolution?e=p$(w,f,!E&&v,d):e=uk(t,r,f,!E&&v,d)}else{const T=(p?Math.max(Yt(p),Sr(p)):360*Zd.degrees/g.getMetersPerUnit())/cA/Math.pow(2,C2),R=T/Math.pow(2,28-C2);t=n.maxResolution,t!==void 0?a=0:t=T/Math.pow(l,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,o):r=T/Math.pow(l,o):r=R),o=a+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,o-a),n.constrainResolution?e=_$(l,t,r,f,!E&&v,d):e=uk(t,r,f,!E&&v,d)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:l}}function S$(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?v$():t===!1?hk:typeof t=="number"?y$(t):hk}return lA}function T$(n){return!(n.sourceCenter&&n.targetCenter&&!Ky(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function b2(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,a=-a;const u=o*s-l*a,f=l*s+o*a;return[u,f]}const Tn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class ND extends Wo{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Tn.OPACITY]=e.opacity!==void 0?e.opacity:1,En(typeof t[Tn.OPACITY]=="number","Layer opacity must be a number"),t[Tn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Tn.Z_INDEX]=e.zIndex,t[Tn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Tn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Tn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Tn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Gn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Mt()}getLayerStatesArray(e){return Mt()}getExtent(){return this.get(Tn.EXTENT)}getMaxResolution(){return this.get(Tn.MAX_RESOLUTION)}getMinResolution(){return this.get(Tn.MIN_RESOLUTION)}getMinZoom(){return this.get(Tn.MIN_ZOOM)}getMaxZoom(){return this.get(Tn.MAX_ZOOM)}getOpacity(){return this.get(Tn.OPACITY)}getSourceState(){return Mt()}getVisible(){return this.get(Tn.VISIBLE)}getZIndex(){return this.get(Tn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Tn.EXTENT,e)}setMaxResolution(e){this.set(Tn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Tn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Tn.MAX_ZOOM,e)}setMinZoom(e){this.set(Tn.MIN_ZOOM,e)}setOpacity(e){En(typeof e=="number","Layer opacity must be a number"),this.set(Tn.OPACITY,e)}setVisible(e){this.set(Tn.VISIBLE,e)}setZIndex(e){this.set(Tn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class $p extends ND{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Tn.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Tn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Fn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=nn(e,Ft.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Io?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return uA(i,t.viewState)&&(!s||zi(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof Io?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Tn.MAP,e)}getMapInternal(){return this.get(Tn.MAP)}setMap(e){this.mapPrecomposeKey_&&(Fn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Fn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=nn(e,da.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=nn(this,Ft.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);En(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Tn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function uA(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const fk={RENDER_ORDER:"renderOrder"};class LD extends $p{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(fk.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new vD(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(fk.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?xD:e;const t=I$(e);this.styleFunction_=e===null?void 0:oz(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function I$(n){if(n===void 0)return xD;if(!n)return null;if(typeof n=="function"||n instanceof nr)return n;if(!Array.isArray(n))return sk([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof nr){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof nr))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return e$(i)}return sk(n)}class Wp extends LD{constructor(e){super(e)}createRenderer(){return new Cz(this)}}const pc={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Ac extends $o{constructor(e,t){super(e),this.layer=t}}const P2={LAYERS:"layers"};let Fx=class OD extends ND{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(P2.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new fa(r.slice(),{unique:!0}):En(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new fa(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Fn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(nn(e,as.ADD,this.handleLayersAdd_,this),nn(e,as.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Fn);kp(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new Ac(pc.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[nn(e,Xd.PROPERTYCHANGE,this.handleLayerChange_,this),nn(e,Ft.CHANGE,this.handleLayerChange_,this)];e instanceof OD&&t.push(nn(e,pc.ADDLAYER,this.handleLayerGroupAdd_,this),nn(e,pc.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[un(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Ac(pc.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Ac(pc.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Ac(pc.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=un(t);this.listenerKeys_[r].forEach(Fn),delete this.listenerKeys_[r],this.dispatchEvent(new Ac(pc.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(P2.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new Ac(pc.REMOVELAYER,r[i]))}this.set(P2.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const l=t[a];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=yl(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}};const Rt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class hA extends Mp{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(Ft.CHANGE)}release(){this.setState(Rt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Rt.EMPTY){if(this.state!==Rt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Mt()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:MD(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function nT(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const A$=new Error("disposed"),R$=[256,256];class dk extends hA{constructor(e){const t=Rt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=nT(this.data_);return e?[e.width,e.height]:R$}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Rt.IDLE&&this.state!==Rt.ERROR)return;this.state=Rt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Rt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Rt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(A$),this.controller_=null),super.disposeInternal()}}class DD extends hA{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,Bs?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Rt.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=Rt.ERROR,this.unlistenImage_(),this.image_=C$(),this.changed()}handleImageLoad_(){if(Bs)this.state=Rt.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Rt.LOADED:this.state=Rt.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==Rt.ERROR&&(this.state=Rt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Rt.IDLE&&(this.state=Rt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=TU(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function C$(){const n=Fr(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let k2;const Ld=[];function gk(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function M2(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function b$(){if(k2===void 0){const n=Fr(6,6,Ld);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",gk(n,4,5,4,0),gk(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;k2=M2(e,0)||M2(e,4)||M2(e,8),Mx(n),Ld.push(n.canvas)}return k2}function av(n,e,t,r){const i=Fp(t,e,n);let s=Zy(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||Ih(l,i)){const u=Zy(n,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function P$(n,e,t,r){const i=Fo(t);let s=av(n,e,i,r);return(!isFinite(s)||s<=0)&&RO(t,function(a){return s=av(n,e,a,r),isFinite(s)&&s>0}),s}function FD(n,e,t,r,i,s,a,o,l,u,f,d,g,p){const E=Fr(Math.round(t*n),Math.round(t*e),Ld);if(d||(E.imageSmoothingEnabled=!1),l.length===0)return E.canvas;E.scale(t,t);function v(O){return Math.round(O*t)/t}E.globalCompositeOperation="lighter";const w=$s();l.forEach(function(O,B,P){IO(w,O.extent)});let T;const R=t/r,k=(d?1:1+Math.pow(2,-24))/R;(!g||l.length!==1||u!==0)&&(T=Fr(Math.round(Yt(w)*R),Math.round(Sr(w)*R),Ld),d||(T.imageSmoothingEnabled=!1),l.forEach(function(O,B,P){if(O.image.width>0&&O.image.height>0){if(O.clipExtent){T.save();const W=(O.clipExtent[0]-w[0])*R,D=-(O.clipExtent[3]-w[3])*R,Ie=Yt(O.clipExtent)*R,Le=Sr(O.clipExtent)*R;T.rect(d?W:Math.round(W),d?D:Math.round(D),d?Ie:Math.round(W+Ie)-Math.round(W),d?Le:Math.round(D+Le)-Math.round(D)),T.clip()}const b=(O.extent[0]-w[0])*R,M=-(O.extent[3]-w[3])*R,F=Yt(O.extent)*R,V=Sr(O.extent)*R;T.drawImage(O.image,u,u,O.image.width-2*u,O.image.height-2*u,d?b:Math.round(b),d?M:Math.round(M),d?F:Math.round(b+F)-Math.round(b),d?V:Math.round(M+V)-Math.round(M)),O.clipExtent&&T.restore()}}));const N=qh(a);return o.getTriangles().forEach(function(O,B,P){const b=O.source,M=O.target;let F=b[0][0],V=b[0][1],W=b[1][0],D=b[1][1],Ie=b[2][0],Le=b[2][1];const Fe=v((M[0][0]-N[0])/s),Ce=v(-(M[0][1]-N[1])/s),ce=v((M[1][0]-N[0])/s),Re=v(-(M[1][1]-N[1])/s),me=v((M[2][0]-N[0])/s),ee=v(-(M[2][1]-N[1])/s),j=F,ne=V;F=0,V=0,W-=j,D-=ne,Ie-=j,Le-=ne;const re=[[W,D,0,0,ce-Fe],[Ie,Le,0,0,me-Fe],[0,0,W,D,Re-Ce],[0,0,Ie,Le,ee-Ce]],Q=gB(re);if(!Q)return;if(E.save(),E.beginPath(),b$()||!d){E.moveTo(ce,Re);const De=4,Ve=Fe-ce,Ae=Ce-Re;for(let Oe=0;Oe<De;Oe++)E.lineTo(ce+v((Oe+1)*Ve/De),Re+v(Oe*Ae/(De-1))),Oe!=De-1&&E.lineTo(ce+v((Oe+1)*Ve/De),Re+v((Oe+1)*Ae/(De-1)));E.lineTo(me,ee)}else E.moveTo(ce,Re),E.lineTo(Fe,Ce),E.lineTo(me,ee);E.clip(),E.transform(Q[0],Q[2],Q[1],Q[3],Fe,Ce),E.translate(w[0]-j,w[3]-ne);let ge;if(T)ge=T.canvas,E.scale(k,-k);else{const De=l[0],Ve=De.extent;ge=De.image,E.scale(Yt(Ve)/ge.width,-Sr(Ve)/ge.height)}E.drawImage(ge,0,0),E.restore()}),T&&(Mx(T),Ld.push(T.canvas)),f&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,o.getTriangles().forEach(function(O,B,P){const b=O.target,M=(b[0][0]-N[0])/s,F=-(b[0][1]-N[1])/s,V=(b[1][0]-N[0])/s,W=-(b[1][1]-N[1])/s,D=(b[2][0]-N[0])/s,Ie=-(b[2][1]-N[1])/s;E.beginPath(),E.moveTo(V,W),E.lineTo(M,F),E.lineTo(D,Ie),E.closePath(),E.stroke()}),E.restore()),E.canvas}const k$=10,mk=.25;class jD{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let l={};const u=o?WS(k=>Or(o,Fp(k,this.targetProj_,this.sourceProj_))):Vm(this.targetProj_,this.sourceProj_);this.transformInv_=function(k){const N=k[0]+"/"+k[1];return l[N]||(l[N]=u(k)),l[N]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Yt(i)>=Yt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Yt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Yt(this.targetProj_.getExtent()):null;const f=qh(r),d=Ix(r),g=Tx(r),p=Sx(r),E=this.transformInv_(f),v=this.transformInv_(d),w=this.transformInv_(g),T=this.transformInv_(p),R=k$+(a?Math.max(0,Math.ceil(Math.log2(GS(r)/(a*a*256*256)))):0);if(this.addQuad_(f,d,g,p,E,v,w,T,R),this.wrapsXInSource_){let k=1/0;this.triangles_.forEach(function(N,O,B){k=Math.min(k,N.source[0][0],N.source[1][0],N.source[2][0])}),this.triangles_.forEach(N=>{if(Math.max(N.source[0][0],N.source[1][0],N.source[2][0])-k>this.sourceWorldWidth_/2){const O=[[N.source[0][0],N.source[0][1]],[N.source[1][0],N.source[1][1]],[N.source[2][0],N.source[2][1]]];O[0][0]-k>this.sourceWorldWidth_/2&&(O[0][0]-=this.sourceWorldWidth_),O[1][0]-k>this.sourceWorldWidth_/2&&(O[1][0]-=this.sourceWorldWidth_),O[2][0]-k>this.sourceWorldWidth_/2&&(O[2][0]-=this.sourceWorldWidth_);const B=Math.min(O[0][0],O[1][0],O[2][0]);Math.max(O[0][0],O[1][0],O[2][0])-B<this.sourceWorldWidth_/2&&(N.source=O)}})}l={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,l,u){const f=x4([s,a,o,l]),d=this.sourceWorldWidth_?Yt(f)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1;let E=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const w=x4([e,t,r,i]);E=Yt(w)/this.targetWorldWidth_>mk||E}!p&&this.sourceProj_.isGlobal()&&d&&(E=d>mk||E)}if(!E&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!zi(f,this.maxSourceExtent_))return;let v=0;if(!E&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)E=!0;else if(v=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(u>0){if(!E){const w=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(w);let R;p?R=(zc(s[0],g)+zc(o[0],g))/2-zc(T[0],g):R=(s[0]+o[0])/2-T[0];const k=(s[1]+o[1])/2-T[1];E=R*R+k*k>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const w=[(t[0]+r[0])/2,(t[1]+r[1])/2],T=this.transformInv_(w),R=[(i[0]+e[0])/2,(i[1]+e[1])/2],k=this.transformInv_(R);this.addQuad_(e,t,w,R,s,a,T,k,u-1),this.addQuad_(R,w,r,i,k,T,o,l,u-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],T=this.transformInv_(w),R=[(r[0]+i[0])/2,(r[1]+i[1])/2],k=this.transformInv_(R);this.addQuad_(e,w,R,i,s,T,k,l,u-1),this.addQuad_(w,t,r,R,T,a,o,k,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(v&11)==0&&this.addTriangle_(e,r,i,s,o,l),(v&14)==0&&this.addTriangle_(e,r,t,s,o,a),v&&((v&13)==0&&this.addTriangle_(t,i,e,a,l,s),(v&7)==0&&this.addTriangle_(t,i,r,a,l,o))}calculateSourceExtent(){const e=$s();return this.triangles_.forEach(function(t,r,i){const s=t.source;sm(e,s[0]),sm(e,s[1]),sm(e,s[2])}),e}getTriangles(){return this.triangles_}}const VD=.5;class GD extends hA{constructor(e,t,r,i,s,a,o,l,u,f,d,g){super(s,Rt.IDLE,g),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=i.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let v=this.sourceTileGrid_.getExtent();const w=E?yl(p,E):p;if(GS(w)===0){this.state=Rt.EMPTY;return}const T=e.getExtent();T&&(v?v=yl(v,T):v=T);const R=i.getResolution(this.wrappedTileCoord_[0]),k=P$(e,r,w,R);if(!isFinite(k)||k<=0){this.state=Rt.EMPTY;return}const N=f!==void 0?f:VD;if(this.triangulation_=new jD(e,r,w,v,k*N,R),this.triangulation_.getTriangles().length===0){this.state=Rt.EMPTY;return}this.sourceZ_=t.getZForResolution(k);let O=this.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(O[1]=Gn(O[1],v[1],v[3]),O[3]=Gn(O[3],v[1],v[3])):O=yl(O,v)),!GS(O))this.state=Rt.EMPTY;else{let B=0,P=0;e.canWrapX()&&(B=Yt(T),P=Math.floor((O[0]-T[0])/B)),PO(O.slice(),e,!0).forEach(M=>{const F=t.getTileRangeForExtentAndZ(M,this.sourceZ_);for(let V=F.minX;V<=F.maxX;V++)for(let W=F.minY;W<=F.maxY;W++){const D=u(this.sourceZ_,V,W,o);if(D){const Ie=P*B;this.sourceTiles_.push({tile:D,offset:Ie})}}++P}),this.sourceTiles_.length===0&&(this.state=Rt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==Rt.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Rt.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=FD(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Rt.LOADED}this.changed()}load(){if(this.state==Rt.IDLE){this.state=Rt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Rt.IDLE||r==Rt.LOADING){e++;const i=nn(t,Ft.CHANGE,s=>{const a=t.getState();(a==Rt.LOADED||a==Rt.ERROR||a==Rt.EMPTY)&&(Fn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Rt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Fn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Mx(this.canvas_.getContext("2d")),Ld.push(this.canvas_),this.canvas_=null),super.release()}}class fA{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Yf(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new fA(n,e,t,r)}class pk{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof xx&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return En(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return En(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){En(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function ov(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function M$(n,e,t){return n+"/"+e+"/"+t}function yy(n,e,t,r,i){return`${un(n)},${e},${M$(t,r,i)}`}function BD(n){return N$(n[0],n[1],n[2])}function N$(n,e,t){return(e<<n)+t}function L$(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class O$ extends rA{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=yl(l,Ao(t.extent,i.projection))),!o[Kr.ANIMATING]&&!o[Kr.INTERACTING]&&!w0(l))if(a){const u=i.projection,f=a.getImage(l,s,r,u);f&&(this.loadImage(f)?this.image=f:f.getState()===_t.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Or(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ih(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),l=Yt(a),u=Math.floor(o.width*((i[0]-a[0])/l));if(u<0||u>=o.width)return null;const f=Sr(a),d=Math.floor(o.height*((a[3]-i[1])/f));return d<0||d>=o.height?null:this.getImageData(o,u,d)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,d=e.viewState,g=d.center,p=d.resolution,E=f*a/(p*l),v=f*o/(p*l);this.prepareContainer(e,t);const w=this.context.canvas.width,T=this.context.canvas.height,R=this.getRenderContext(e);let k=!1,N=!0;if(u.extent){const M=Ao(u.extent,d.projection);N=zi(M,e.extent),k=N&&!Nc(M,e.extent),k&&this.clipUnrotated(R,e,M)}const O=r.getImage(),B=jo(this.tempTransform,w/2,T/2,E,v,0,l*(i[0]-g[0])/a,l*(g[1]-i[3])/o);this.renderedResolution=o*f/l;const P=O.width*B[0],b=O.height*B[3];if(this.getLayer().getSource().getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,e),N&&P>=.5&&b>=.5){const M=B[4],F=B[5],V=u.opacity;V!==1&&(R.save(),R.globalAlpha=V),R.drawImage(O,0,0,+O.width,+O.height,M,F,P,b),V!==1&&R.restore()}return this.postRender(this.context,e),k&&R.restore(),R.imageSmoothingEnabled=!0,this.container}}class D$ extends $p{constructor(e){e=e||{},super(e)}}class F$ extends D${constructor(e){super(e)}createRenderer(){return new O$(this)}getData(e){return super.getData(e)}}function N2(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function j$(n,e,t){const r=n[t];return r?r.delete(e):!1}function _k(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=yl(e,Ao(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=yl(e,i))}return e}class V$ extends rA{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=$s(),this.tempTileRange_=new fA(0,0,0,0),this.tempTileCoord_=ov(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new pk(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new pk(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),l=yy(o,o.getKey(),e,t,r);let u;if(s.containsKey(l))u=s.get(l);else{const f=i.viewState.projection,d=o.getProjection();if(u=o.getTile(e,t,r,i.pixelRatio,f,!d||yh(d,f)?void 0:this.getSourceTileCache()),!u)return null;s.set(l,u)}return u}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Or(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ih(s,i))return null;const a=t.viewState,o=r.getRenderSource(),l=o.getTileGridForProjection(a.projection),u=o.getTilePixelRatio(t.pixelRatio);for(let f=l.getZForResolution(a.resolution);f>=l.getMinZoom();--f){const d=l.getTileCoordForCoordAndZ(i,f),g=this.getTile(f,d[1],d[2],t);if(!g||g.getState()!==Rt.LOADED)continue;const p=l.getOrigin(f),E=fs(l.getTileSize(f)),v=l.getResolution(f);let w;if(g instanceof DD||g instanceof GD)w=g.getImage();else if(g instanceof dk){if(w=nT(g.getData()),!w)continue}else continue;const T=Math.floor(u*((i[0]-p[0])/v-d[1]*E[0])),R=Math.floor(u*((p[1]-i[1])/v-d[2]*E[1])),k=Math.round(u*o.getGutterForProjection(a.projection));return this.getImageData(w,T+k,R+k)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),l=o.getRenderSource(),u=l.getTileGridForProjection(a.projection),f=un(l);f in e.wantedTiles||(e.wantedTiles[f]={});const d=e.wantedTiles[f],g=o.getMapInternal(),p=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(o.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):u.getResolution(0)),l.zDirection)),E=a.rotation,v=E?CO(a.center,a.resolution,E,e.size):void 0;for(let w=r;w>=p;--w){const T=u.getTileRangeForExtentAndZ(t,w,this.tempTileRange_),R=u.getResolution(w);for(let k=T.minX;k<=T.maxX;++k)for(let N=T.minY;N<=T.maxY;++N){if(E&&!u.tileCoordIntersectsViewport([w,k,N],v))continue;const O=this.getTile(w,k,N,e);if(!O||!N2(i,O,w))continue;const P=O.getKey();if(d[P]=!0,O.getState()===Rt.IDLE&&!e.tileQueue.isKeyQueued(P)){const b=ov(w,k,N,this.tempTileCoord_);e.tileQueue.enqueue([O,f,u.getTileCoordCenter(b),R])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const u=yy(this.getLayer().getSource(),o[l],i,s,a);if(r.containsKey(u)){const f=r.peek(u);if(f.getState()===Rt.LOADED)return f.endTransition(un(this)),N2(t,f,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,l=this.getLayer().getRenderSource(),u=l.getKey();for(let f=s.minX;f<=s.maxX;++f)for(let d=s.minY;d<=s.maxY;++d){const g=yy(l,u,r,f,d);let p=!1;if(o.containsKey(g)){const E=o.peek(g);E.getState()===Rt.LOADED&&(N2(i,E,r),p=!0)}p||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,a=i.resolution,o=i.center,l=e.pixelRatio,u=this.getLayer(),f=u.getSource(),d=f.getTileGridForProjection(s),g=d.getZForResolution(a,f.zDirection),p=d.getResolution(g),E=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==E&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=E):this.renderedSourceKey_=E;let v=e.extent;const w=f.getTilePixelRatio(l);this.prepareContainer(e,t);const T=this.context.canvas.width,R=this.context.canvas.height,k=r.extent&&Ao(r.extent);k&&(v=yl(v,Ao(r.extent)));const N=p*T/2/w,O=p*R/2/w,B=[o[0]-N,o[1]-O,o[0]+N,o[1]+O],P={};this.renderedTiles.length=0;const b=u.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const ce=d.getZForResolution(i.nextResolution,f.zDirection),Re=_k(e,e.nextExtent);this.enqueueTiles(e,Re,ce,P,b)}const M=_k(e,v);if(this.enqueueTiles(e,M,g,P,0),b>0&&setTimeout(()=>{this.enqueueTiles(e,M,g-1,P,b-1)},0),!(g in P))return this.container;const F=un(this),V=e.time;for(const ce of P[g]){const Re=ce.getState();if(Re===Rt.EMPTY)continue;const me=ce.tileCoord;if(Re===Rt.LOADED&&ce.getAlpha(F,V)===1){ce.endTransition(F);continue}if(Re!==Rt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(me,P)){j$(P,ce,g),e.animate=!0;continue}if(this.findAltTiles_(d,me,g+1,P))continue;const ne=d.getMinZoom();for(let re=g-1;re>=ne&&!this.findAltTiles_(d,me,re,P);--re);}const W=p/a*l/w,D=this.getRenderContext(e);jo(this.tempTransform,T/2,R/2,W,W,0,-T/2,-R/2),r.extent&&this.clipUnrotated(D,e,k),f.getInterpolate()||(D.imageSmoothingEnabled=!1),this.preRender(D,e);const Ie=Object.keys(P).map(Number);Ie.sort(_l);let Le;const Fe=[],Ce=[];for(let ce=Ie.length-1;ce>=0;--ce){const Re=Ie[ce],me=f.getTilePixelSize(Re,l,s),j=d.getResolution(Re)/p,ne=me[0]*j*W,re=me[1]*j*W,Q=d.getTileCoordForCoordAndZ(qh(B),Re),ge=d.getTileCoordExtent(Q),De=Or(this.tempTransform,[w*(ge[0]-B[0])/p,w*(B[3]-ge[3])/p]),Ve=w*f.getGutterForProjection(s);for(const Ae of P[Re]){if(Ae.getState()!==Rt.LOADED)continue;const Oe=Ae.tileCoord,Te=Q[1]-Oe[1],ue=Math.round(De[0]-(Te-1)*ne),C=Q[2]-Oe[2],qe=Math.round(De[1]-(C-1)*re),q=Math.round(De[0]-Te*ne),ft=Math.round(De[1]-C*re),Y=ue-q,z=qe-ft,se=Ie.length===1;let Ne=!1;Le=[q,ft,q+Y,ft,q+Y,ft+z,q,ft+z];for(let xe=0,Xe=Fe.length;xe<Xe;++xe)if(!se&&Re<Ce[xe]){const Je=Fe[xe];zi([q,ft,q+Y,ft+z],[Je[0],Je[3],Je[4],Je[7]])&&(Ne||(D.save(),Ne=!0),D.beginPath(),D.moveTo(Le[0],Le[1]),D.lineTo(Le[2],Le[3]),D.lineTo(Le[4],Le[5]),D.lineTo(Le[6],Le[7]),D.moveTo(Je[6],Je[7]),D.lineTo(Je[4],Je[5]),D.lineTo(Je[2],Je[3]),D.lineTo(Je[0],Je[1]),D.clip())}Fe.push(Le),Ce.push(Re),this.drawTile(Ae,e,q,ft,Y,z,Ve,se),Ne&&D.restore(),this.renderedTiles.unshift(Ae),this.updateUsedTiles(e.usedTiles,f,Ae)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!qd(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&D.restore(),D.imageSmoothingEnabled=!0,this.renderComplete){const ce=(Re,me)=>{const ee=un(f),j=me.wantedTiles[ee],ne=j?Object.keys(j).length:0;this.updateCacheSize(ne),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(ce)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,l){let u;if(e instanceof dk){if(u=nT(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const f=this.getRenderContext(t),d=un(this),g=t.layerStatesArray[t.layerIndex],p=g.opacity*(l?e.getAlpha(d,t.time):1),E=p!==f.globalAlpha;E&&(f.save(),f.globalAlpha=p),f.drawImage(u,o,o,u.width-2*o,u.height-2*o,r,i,s,a),E&&f.restore(),p!==g.opacity?t.animate=!0:l&&e.endTransition(d)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=un(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const V_={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class G$ extends $p{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(V_.PRELOAD)}setPreload(e){this.set(V_.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(V_.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(V_.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Xu extends G${constructor(e){super(e)}createRenderer(){return new V$(this,{cacheSize:this.getCacheSize()})}}function rT(n){return Array.isArray(n)?Math.min(...n):n}const Xf=[0,0,0],_c=5;class UD{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,En(sB(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,En(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=qh(r)),En(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,En(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:cA,En(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new fA(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,l=i.maxY;o<=l;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=Yf(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return Yf(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return Yf(s,a,s,a,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(s*l),f=Math.floor(a*l);if(t<i)return Yf(u,u,f,f,r);const d=Math.floor(l*(s+1))-1,g=Math.floor(l*(a+1))-1;return Yf(u,d,f,g,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Xf);const i=Xf[1],s=Xf[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Xf);const a=Xf[1],o=Xf[2];return Yf(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=fs(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=fs(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,l=a+s[0]*i,u=o+s[1]*i;return Qc(a,o,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),l=this.getOrigin(a),u=fs(this.getTileSize(a),this.tmpSize_);let f=o*(e-l[0])/r/u[0],d=o*(l[1]-t)/r/u[1];return i?(f=Lc(f,_c)-1,d=Lc(d,_c)-1):(f=P_(f,_c),d=P_(d,_c)),ov(a,f,d,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),l=fs(this.getTileSize(r),this.tmpSize_);let u=(e-a[0])/o/l[0],f=(a[1]-t)/o/l[1];return i?(u=Lc(u,_c)-1,f=Lc(f,_c)-1):(u=P_(u,_c),f=P_(f,_c)),ov(r,u,f,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Ex(this.resolutions_,e,t||0);return Gn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return KO(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function zD(n){let e=n.getDefaultTileGrid();return e||(e=$$(n),n.setDefaultTileGrid(e)),e}function B$(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=dA(t);if(!Ih(s,i)){const a=Yt(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function U$(n,e,t,r){r=r!==void 0?r:"top-left";const i=$D(n,e,t);return new UD({extent:n,origin:uB(n,r),resolutions:i,tileSize:t})}function z$(n){const e=n||{},t=e.extent||Nn("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:$D(t,e.maxZoom,e.tileSize,e.maxResolution)};return new UD(r)}function $D(n,e,t,r){e=e!==void 0?e:x$,t=fs(t!==void 0?t:cA);const i=Sr(n),s=Yt(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=r/Math.pow(2,l);return o}function $$(n,e,t,r){const i=dA(n);return U$(i,e,t,r)}function dA(n){n=Nn(n);let e=n.getExtent();if(!e){const t=180*Zd.degrees/n.getMetersPerUnit();e=Qc(-t,-t,t,t)}return e}function gA(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const W$=/\{z\}/g,H$=/\{x\}/g,K$=/\{y\}/g,Y$=/\{-y\}/g;function X$(n,e,t,r,i){return n.replace(W$,e.toString()).replace(H$,t.toString()).replace(K$,r.toString()).replace(Y$,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function q$(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function Z$(n,e){return(function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return X$(n,a,t[1],t[2],s)})}function Q$(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Z$(n[i],e);return J$(r)}function J$(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;const i=BD(e),s=zc(i,n.length);return n[s](e,t,r)})}class eW extends nA{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&fs(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||un(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s,a){return Mt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:zD(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=fs(i.getTileSize(e),this.tmpSize);return s==1?a:az(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=B$(i,e,r)),L$(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class tW extends $o{constructor(e,t){super(e),this.tile=t}}const L2={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class mA extends eW{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===mA.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=un(t),i=t.getState();let s;i==Rt.LOADING?(this.tileLoadingKeys_[r]=!0,s=L2.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Rt.ERROR?L2.TILELOADERROR:i==Rt.LOADED?L2.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new tW(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=q$(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Q$(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class WD extends mA{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:HD,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:DD,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!yh(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||yh(t,e)))return this.tileGrid;const r=un(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=zD(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,i,s):void 0,f=new this.tileClass(o,u!==void 0?Rt.IDLE:Rt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,f.addEventListener(Ft.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,r,i,s,a){const o=this.getProjection();if(!o||!s||yh(o,s))return this.getTileInternal(e,t,r,i,o||s);const l=[e,t,r],u=this.getKey(),f=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new GD(o,f,s,d,l,g,this.getTilePixelRatio(i),this.getGutter(),(E,v,w,T)=>this.getTileInternal(E,v,w,T,o,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=u,p}getTileInternal(e,t,r,i,s,a){const o=this.getKey(),l=yy(this,o,e,t,r);if(a&&a.containsKey(l))return a.get(l);const u=this.createTile_(e,t,r,i,s,o);return a?.set(l,u),u}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Nn(e);if(r){const i=un(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function HD(n,e){if(Bs){const t=n.getCrossOrigin();let r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const a=n.getImage();a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),s.close?.(),a.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class ud extends WD{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:z$({extent:dA(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const nW="modulepreload",rW=function(n){return"/detectorapp-nl/"+n},yk={},dt=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(t.map(u=>{if(u=rW(u),u in yk)return;yk[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":nW,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((p,E)=>{g.addEventListener("load",p),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};class iW extends nD{constructor(e,t,r,i,s,a,o){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const f=u?yl(r,u):r,d=Fo(f),g=av(e,t,d,i),p=VD,E=new jD(e,t,f,l,g*p,i),v=E.calculateSourceExtent(),w=w0(v)?null:a(v,g,s),T=w?_t.IDLE:_t.EMPTY,R=w?w.getPixelRatio():1;super(r,i,R,T),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=E,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=w,this.sourcePixelRatio_=R,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==_t.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==_t.LOADED){const t=Yt(this.targetExtent_)/this.targetResolution_,r=Sr(this.targetExtent_)/this.targetResolution_;this.canvas_=FD(t,r,this.sourcePixelRatio_,rT(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==_t.IDLE){this.state=_t.LOADING,this.changed();const e=this.sourceImage_.getState();e==_t.LOADED||e==_t.ERROR?this.reproject_():(this.sourceListenerKey_=nn(this.sourceImage_,Ft.CHANGE,t=>{const r=this.sourceImage_.getState();(r==_t.LOADED||r==_t.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Fn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const jc=4,O2={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class sW extends $o{constructor(e,t){super(e),this.image=t}}class aW extends nA{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Ex(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||yh(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&yh(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&qd(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new iW(s,i,e,t,r,(a,o,l)=>this.getImageInternal(a,o,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=KD(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Nc(this.wantedExtent_,s)||Nc(this.image.getExtent(),s))&&(this.wantedResolution_&&rT(this.wantedResolution_)===a||rT(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new nD(s,a,r,this.loader),this.image.addEventListener(Ft.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case _t.LOADING:this.loading=!0,r=O2.IMAGELOADSTART;break;case _t.LOADED:this.loading=!1,r=O2.IMAGELOADEND;break;case _t.ERROR:this.loading=!1,r=O2.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new sW(r,t))}}function oW(n,e){n.getImage().src=e}function KD(n,e,t,r){const i=e/t,s=Fo(n),a=Lc(Yt(n)/i,jc),o=Lc(Sr(n)/i,jc),l=Lc((r-1)*a/2,jc),u=a+2*l,f=Lc((r-1)*o/2,jc),d=o+2*f;return Wy(s,i,0,[u,d])}function lW(n,e,t,r,i,s){const a=i.getCode().split(/:(?=\d+$)/).pop(),o=t/r,l=[Hy(Yt(e)/o,jc),Hy(Sr(e)/o,jc)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return gA(u,s)}function cW(n){const e=n.load?n.load:iD,t=Nn(n.projection||"EPSG:3857"),r=n.ratio??1.5,i=n.crossOrigin??null;return function(s,a,o){o=n.hidpi?o:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,n.params),s=KD(s,a,o,r);const u=lW(n.url,s,a,o,t,l),f=new Image;return f.crossOrigin=i,e(f,u).then(d=>{const g=Yt(s)/d.width*o;return{image:d,extent:s,resolution:g,pixelRatio:o}})}}class uW extends aW{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:oW,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=cW({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),iD(s))})),super.getImageInternal(e,t,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const iT="1.3.0";function hW(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const s=r.getAxisOrientation(),a=kO(i.VERSION,"1.3")>=0;i[a?"CRS":"SRS"]=r.getCode();const o=a&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=o.join(","),gA(n,i)}function fW(n,e,t,r,i,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=e/t,l=[Hy(Yt(n)/o,jc),Hy(Sr(n)/o,jc)];if(t!=1)switch(a){case"geoserver":const f=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+f:s.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return hW(i,n,l,r,s)}function vk(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:iT,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}const dW='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class gW extends ud{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[dW];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,a)=>{const o=s.getImage();!Bs&&o instanceof HTMLImageElement&&(o.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||HD)(s,a)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const lv=1/0;class mW{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,kp(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){En(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=lv?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),f=u<i&&r[u]<r[l]?u:l;t[e]=t[f],r[e]=r[f],e=f}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==lv?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=l,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class pW extends mW{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ft.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Rt.LOADED||r===Rt.ERROR||r===Rt.EMPTY){r!==Rt.ERROR&&t.removeEventListener(Ft.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Rt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function _W(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return lv;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class yW extends WD{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=$s(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const s=Nn(r),a=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(a));const l=Fp(e,s,a),u=av(a,s,e,t),f=o.getZForResolution(u,this.zDirection),d=o.getResolution(f),g=o.getTileCoordForCoordAndZ(l,f);if(o.getResolutions().length<=g[0])return;let p=o.getTileCoordExtent(g,this.tmpExtent_);const E=this.gutter_;E!==0&&(p=jm(p,d*E,p));const v={QUERY_LAYERS:this.params_.LAYERS};Object.assign(v,vk(this.params_,"GetFeatureInfo"),i);const w=Math.floor((l[0]-p[0])/d),T=Math.floor((p[3]-l[1])/d);return v[this.v13_?"I":"X"]=w,v[this.v13_?"J":"Y"]=T,this.getRequestUrl_(g,p,1,a||s,v)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:iT,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,t),gA(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,s){const a=this.urls;if(!a)return;let o;if(a.length==1)o=a[0];else{const l=zc(BD(e),a.length);o=a[l]}return fW(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,o,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||iT;this.v13_=kO(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=i.getResolution(e[0]);let a=i.getTileCoordExtent(e,this.tmpExtent_);const o=this.gutter_;o!==0&&(a=jm(a,s*o,a));const l=Object.assign({},vk(this.params_,"GetMap"));return this.getRequestUrl_(e,a,t,r,l)}}class hd extends $o{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class Sc extends hd{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const sr={SINGLECLICK:"singleclick",CLICK:Ft.CLICK,DBLCLICK:Ft.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},sT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class vW extends Mp{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=nn(r,sT.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=nn(r,sT.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ft.TOUCHMOVE,this.boundHandleTouchMove_,JO?{passive:!1}:!1)}emulateClick_(e){let t=new Sc(sr.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Sc(sr.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Sc(sr.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==sr.POINTERUP||t.type==sr.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==sr.POINTERDOWN||t.type==sr.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Sc(sr.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Fn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Sc(sr.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(nn(r,sr.POINTERMOVE,this.handlePointerMove_,this),nn(r,sr.POINTERUP,this.handlePointerUp_,this),nn(this.element_,sr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(nn(this.element_.getRootNode(),sr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Sc(sr.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Sc(sr.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Fn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ft.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Fn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Fn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Tc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ii={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class jx extends Wo{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)Fn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Fm&&this.listenerKeys.push(nn(e,Tc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class xW extends jx{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Ft.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Vp+" "+QI+(this.collapsed_&&this.collapsible_?" "+D4:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=u,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>EO(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!pu(t,this.renderedAttributions_)){dU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(D4),this.collapsed_?L4(this.collapseLabel_,this.label_):L4(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class EW extends jx{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(Ft.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Vp+" "+QI,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(N_)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:T0}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(N_);!s&&r===0?this.element.classList.add(N_):s&&r!==0&&this.element.classList.remove(N_)}this.label_.style.transform=i}this.rotation_=r}}class wW extends jx{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=l,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(Ft.CLICK,this.handleClick_.bind(this,r),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=u,d.appendChild(typeof o=="string"?document.createTextNode(o):o),d.addEventListener(Ft.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+Vp+" "+QI,p=this.element;p.className=g,p.appendChild(f),p.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:T0})):r.setZoom(s)}}}function SW(n){n=n||{};const e=new fa;return(n.zoom===void 0||n.zoom)&&e.push(new wW(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new EW(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new xW(n.attributionOptions)),e}class TW{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const xk={ACTIVE:"active"};class Hp extends Wo{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(xk.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(xk.ACTIVE,e)}setMap(e){this.map_=e}}function IW(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:m$,center:n.getConstrainedCenter(i)})}}function pA(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:T0})}class AW extends Hp{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==sr.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();pA(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function aT(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const RW=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},CW=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},YD=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?CW(n):!0},bW=Dm,XD=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(hU&&ZO&&e.ctrlKey)},qD=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},PW=function(n){const e=n.originalEvent;return ZO?e.metaKey:e.ctrlKey},kW=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ZD=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},D2=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},MW=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Kp extends Hp{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==sr.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==sr.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==sr.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==sr.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function _A(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class NW extends Kp{constructor(e){super({stopDown:wx}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:aT(qD,MW);this.condition_=e.onFocusOnly?aT(YD,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(_A(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();pB(s,o.getResolution()),OI(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:T0})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class LW extends Kp{constructor(e){e=e||{},super({stopDown:wx}),this.condition_=e.condition?e.condition:RW,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!D2(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===lA)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return D2(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return D2(e)&&XD(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class OW extends xx{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Qa([i])}getGeometry(){return this.geometry_}}const qf={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class kg extends $o{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class DW extends Kp{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new OW(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??XD,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new kg(qf.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new kg(t?qf.BOXEND:qf.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new kg(qf.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new kg(qf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new kg(qf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class FW extends DW{constructor(e){e=e||{};const t=e.condition?e.condition:kW;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:T0})}}const $u={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class jW extends Hp{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return qD(t)&&ZD(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ft.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==$u.DOWN||i==$u.LEFT||i==$u.RIGHT||i==$u.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;i==$u.DOWN?u=-o:i==$u.LEFT?l=-o:i==$u.RIGHT?l=o:u=o;const f=[l,u];OI(f,a.getRotation()),IW(a,f,this.duration_),r.preventDefault(),t=!0}}return!t}}class VW extends Hp{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!PW(t)&&ZD(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ft.KEYDOWN||e.type==Ft.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();pA(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const GW=40,BW=300;class UW extends Hp{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:bW;this.condition_=e.onFocusOnly?aT(YD,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ft.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=GW;break;case WheelEvent.DOM_DELTA_PAGE:s*=BW;break}if(s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Gn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),pA(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class zW extends Kp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=wx),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==lA&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(_A(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class $W extends Kp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=wx),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(_A(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function WW(n){n=n||{};const e=new fa,t=new TW(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new LW),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new AW({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new NW({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new zW),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new $W({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new jW),e.push(new VW({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new UW({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new FW({duration:n.zoomDuration})),e}class HW extends xx{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Mt()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;jo(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),UO(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,l){let u;const f=t.viewState;function d(N,O,B,P){return s.call(a,O,N?B:null,P)}const g=f.projection,p=MO(e.slice(),g),E=[[0,0]];if(g.canWrapX()&&i){const N=g.getExtent(),O=Yt(N);E.push([-O,0],[O,0])}const v=t.layerStatesArray,w=v.length,T=[],R=[];for(let N=0;N<E.length;N++)for(let O=w-1;O>=0;--O){const B=v[O],P=B.layer;if(P.hasRenderer()&&uA(B,f)&&o.call(l,P)){const b=P.getRenderer(),M=P.getSource();if(b&&M){const F=M.getWrapX()?p:e,V=d.bind(null,B.managed);R[0]=F[0]+E[N][0],R[1]=F[1]+E[N][1],u=b.forEachFeatureAtCoordinate(R,t,r,V,T)}if(u)return u}}if(T.length===0)return;const k=1/T.length;return T.forEach((N,O)=>N.distanceSq+=O*k),T.sort((N,O)=>N.distanceSq-O.distanceSq),T.some(N=>u=N.callback(N.feature,N.layer,N.geometry)),u}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,Dm,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){Mt()}scheduleExpireIconCache(e){ga.canExpireCache()&&e.postRenderFunctions.push(KW)}}function KW(n,e){ga.expire()}class YW extends HW{constructor(e){super(e),this.fontChangeListenerKey_=nn(od,Xd.PROPERTYCHANGE,e.redrawText,e),this.element_=Bs?eD():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Vp+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new TD(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Fn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(da.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,f)=>u.zIndex-f.zIndex);t.some(u=>u.layer instanceof LD&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let u=0,f=t.length;u<f;++u){const d=t[u];e.layerIndex=u;const g=d.layer,p=g.getSourceState();if(!uA(d,i)||p!="ready"&&p!="undefined"){g.unrender();continue}const E=g.render(e,a);E&&(E!==a&&(this.children_.push(E),a=E),s.push(d))}this.declutter(e,s),gU(this.element_,this.children_);const l=this.getMap().getTargetElement();if(Dc(l)){const u=l.getContext("2d");for(const f of this.children_){const d=f.firstElementChild||f,g=f.style.backgroundColor;if(g&&(!Dc(d)||d.width>0)&&(u.fillStyle=g,u.fillRect(0,0,l.width,l.height)),Dc(d)&&d.width>0){const p=f.style.opacity||d.style.opacity;u.globalAlpha=p===""?1:Number(p);const E=d.style.transform;if(E)u.setTransform(...KS(E));else{const v=parseFloat(d.style.width)/d.width,w=parseFloat(d.style.height)/d.height;u.setTransform(v,0,0,w,0,0)}u.drawImage(d,0,0)}}u.globalAlpha=1,u.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(da.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function QD(n){if(n instanceof $p){n.setMapInternal(null);return}n instanceof Fx&&n.getLayers().forEach(QD)}function JD(n,e){if(n instanceof $p){n.setMapInternal(e);return}if(n instanceof Fx){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)JD(t[r],e)}}let XW=class extends Wo{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=qW(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:fU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ha(),this.pixelToCoordinateTransform_=Ha(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Bs||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Bs||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Bs?new fa:SW()),this.interactions=t.interactions||(Bs?new fa:WW({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new pW(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ii.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ii.VIEW,this.handleViewChanged_),this.addChangeListener(Ii.SIZE,this.handleSizeChanged_),this.addChangeListener(Ii.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof Io)&&e.view.then(function(i){r.setView(new Io(i))}),this.controls.addEventListener(as.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(as.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(as.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(as.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(as.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(as.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){JD(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:Dm,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Fx?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:Dm,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(Ii.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return HS(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Or(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ii.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof fa){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ul(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Or(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ii.SIZE)}getView(){return this.get(Ii.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return _W(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new Sc(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===sT.POINTERDOWN||r===Ft.WHEEL||r===Ft.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[Kr.ANIMATING]||a[Kr.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(da.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(da.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new hd(Tc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new hd(Tc.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Fn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ft.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ft.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Dc(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Dc(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new YW(this)),!Dc(t)){this.mapBrowserEventHandler_=new vW(this,this.moveTolerance_);for(const i in sr)this.mapBrowserEventHandler_.addEventListener(sr[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ft.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ft.WHEEL,this.boundHandleBrowserEvent_,JO?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[nn(r,Ft.KEYDOWN,this.handleBrowserEvent,this),nn(r,Ft.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Fn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Fn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=nn(e,Xd.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=nn(e,Ft.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Fn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Ac("addlayer",e)),this.layerGroupPropertyListenerKeys_=[nn(e,Xd.PROPERTYCHANGE,this.render,this),nn(e,Ft.CHANGE,this.render,this),nn(e,"addlayer",this.handleLayerAdd_,this),nn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){QD(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&Y4(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Wy(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:un(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=Wy(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!w0(this.previousExtent_)&&!qd(s.extent,this.previousExtent_))&&(this.dispatchEvent(new hd(Tc.MOVESTART,this,i)),this.previousExtent_=Lp(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Kr.ANIMATING]&&!s.viewHints[Kr.INTERACTING]&&!qd(s.extent,this.previousExtent_)&&(this.dispatchEvent(new hd(Tc.MOVEEND,this,s)),SO(s.extent,this.previousExtent_))),this.dispatchEvent(new hd(Tc.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Tc.LOADSTART)||this.hasListener(Tc.LOADEND)||this.hasListener(da.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Ac("removelayer",t)),this.set(Ii.LAYERGROUP,e)}setSize(e){this.set(Ii.SIZE,e)}setTarget(e){this.set(Ii.TARGET,e)}setView(e){if(!e||e instanceof Io){this.set(Ii.VIEW,e);return}this.set(Ii.VIEW,new Io);const t=this;e.then(function(r){t.setView(new Io(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){let i,s;if(Dc(e))i=e.width,s=e.height;else{const a=getComputedStyle(e);i=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),s=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(t=[Math.max(0,i),Math.max(0,s)],!Y4(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&LO("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!pu(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function qW(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Fx({layers:n.layers});t[Ii.LAYERGROUP]=r,t[Ii.TARGET]=n.target,t[Ii.VIEW]=n.view instanceof Io?n.view:new Io;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new fa(n.controls.slice()):(En(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new fa(n.interactions.slice()):(En(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new fa(n.overlays.slice()):(En(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new fa,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const F2="units",ZW=[1,2,5],Mg=25.4/.28;class QW extends jx{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Vp,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(F2,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(F2)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(F2,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let a=Zy(r,e.resolution,t,s);const o=this.minWidth_*(this.dpi_||Mg)/Mg,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Mg)/Mg:void 0;let u=o*a,f="";if(i=="degrees"){const k=Zd.degrees;u*=k,u<k/60?(f="",a*=3600):u<k?(f="",a*=60):f=""}else if(i=="imperial")u<.9144?(f="in",a/=.0254):u<1609.344?(f="ft",a/=.3048):(f="mi",a/=1609.344);else if(i=="nautical")a/=1852,f="NM";else if(i=="metric")u<1e-6?(f="nm",a*=1e9):u<.001?(f="m",a*=1e6):u<1?(f="mm",a*=1e3):u<1e3?f="m":(f="km",a/=1e3);else if(i=="us")u<.9144?(f="in",a*=39.37):u<1609.344?(f="ft",a/=.30480061):(f="mi",a/=1609.3472);else throw new Error("Invalid units");let d=3*Math.floor(Math.log(o*a)/Math.log(10)),g,p,E,v=0,w,T;for(;;){E=Math.floor(d/3);const k=Math.pow(10,E);if(g=ZW[(d%3+3)%3]*k,p=Math.round(g/a),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){g=v,p=w,E=T;break}else if(p>=o)break;v=g,w=p,T=E,++d}const R=this.scaleBar_?this.createScaleBar(p,g,f):g.toFixed(E<0?-E:0)+" "+f;this.renderedHTML_!=R&&(this.innerElement_.innerHTML=R,this.renderedHTML_=R),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),a=this.scaleBarSteps_,o=e/a,l=[this.createMarker("absolute")];for(let f=0;f<a;++f){const d=f%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${d}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(f%2===0||a===2?this.createStepText(f,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(a,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,s){const o=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=Zy(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Mg,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const JW={},Ek=n=>{let e;const t=new Set,r=(f,d)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const p=e;e=d??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(E=>E(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(t.add(f),()=>t.delete(f)),destroy:()=>{(JW?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(r,i,l);return l},eH=n=>n?Ek(n):Ek;var j2={exports:{}},V2={},G2={exports:{}},B2={};var wk;function tH(){if(wk)return B2;wk=1;var n=Pp();function e(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(d,g){var p=g(),E=r({inst:{value:p,getSnapshot:g}}),v=E[0].inst,w=E[1];return s(function(){v.value=p,v.getSnapshot=g,l(v)&&w({inst:v})},[d,p,g]),i(function(){return l(v)&&w({inst:v}),d(function(){l(v)&&w({inst:v})})},[d]),a(p),p}function l(d){var g=d.getSnapshot;d=d.value;try{var p=g();return!t(d,p)}catch{return!0}}function u(d,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return B2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,B2}var Sk;function nH(){return Sk||(Sk=1,G2.exports=tH()),G2.exports}var Tk;function rH(){if(Tk)return V2;Tk=1;var n=Pp(),e=nH();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,l=n.useDebugValue;return V2.useSyncExternalStoreWithSelector=function(u,f,d,g,p){var E=s(null);if(E.current===null){var v={hasValue:!1,value:null};E.current=v}else v=E.current;E=o(function(){function T(B){if(!R){if(R=!0,k=B,B=g(B),p!==void 0&&v.hasValue){var P=v.value;if(p(P,B))return N=P}return N=B}if(P=N,r(k,B))return P;var b=g(B);return p!==void 0&&p(P,b)?(k=B,P):(k=B,N=b)}var R=!1,k,N,O=d===void 0?null:d;return[function(){return T(f())},O===null?void 0:function(){return T(O())}]},[f,d,g,p]);var w=i(u,E[0],E[1]);return a(function(){v.hasValue=!0,v.value=w},[w]),l(w),w},V2}var Ik;function iH(){return Ik||(Ik=1,j2.exports=rH()),j2.exports}var sH=iH();const aH=MI(sH),e5={},{useDebugValue:oH}=tB,{useSyncExternalStoreWithSelector:lH}=aH;let Ak=!1;const cH=n=>n;function uH(n,e=cH,t){(e5?"production":void 0)!=="production"&&t&&!Ak&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ak=!0);const r=lH(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return oH(r),r}const hH=n=>{(e5?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?eH(n):n,t=(r,i)=>uH(e,r,i);return Object.assign(t,e),t},va=n=>hH;var t5=Symbol.for("immer-nothing"),Rk=Symbol.for("immer-draftable"),Ws=Symbol.for("immer-state");function Ga(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Ym=Object.getPrototypeOf;function n0(n){return!!n&&!!n[Ws]}function kh(n){return n?n5(n)||Array.isArray(n)||!!n[Rk]||!!n.constructor?.[Rk]||Yp(n)||Gx(n):!1}var fH=Object.prototype.constructor.toString(),Ck=new WeakMap;function n5(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=Ck.get(t);return r===void 0&&(r=Function.toString.call(t),Ck.set(t,r)),r===fH}function cv(n,e,t=!0){Vx(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function Vx(n){const e=n[Ws];return e?e.type_:Array.isArray(n)?1:Yp(n)?2:Gx(n)?3:0}function oT(n,e){return Vx(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function r5(n,e,t){const r=Vx(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function dH(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Yp(n){return n instanceof Map}function Gx(n){return n instanceof Set}function qu(n){return n.copy_||n.base_}function lT(n,e){if(Yp(n))return new Map(n);if(Gx(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=n5(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Ws];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create(Ym(n),r)}else{const r=Ym(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function yA(n,e=!1){return Bx(n)||n0(n)||!kh(n)||(Vx(n)>1&&Object.defineProperties(n,{set:G_,add:G_,clear:G_,delete:G_}),Object.freeze(n),e&&Object.values(n).forEach(t=>yA(t,!0))),n}function gH(){Ga(2)}var G_={value:gH};function Bx(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var mH={};function Mh(n){const e=mH[n];return e||Ga(0,n),e}var Xm;function i5(){return Xm}function pH(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function bk(n,e){e&&(Mh("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function cT(n){uT(n),n.drafts_.forEach(_H),n.drafts_=null}function uT(n){n===Xm&&(Xm=n.parent_)}function Pk(n){return Xm=pH(Xm,n)}function _H(n){const e=n[Ws];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function kk(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Ws].modified_&&(cT(e),Ga(4)),kh(n)&&(n=uv(e,n),e.parent_||hv(e,n)),e.patches_&&Mh("Patches").generateReplacementPatches_(t[Ws].base_,n,e.patches_,e.inversePatches_)):n=uv(e,t,[]),cT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==t5?n:void 0}function uv(n,e,t){if(Bx(e))return e;const r=n.immer_.shouldUseStrictIteration(),i=e[Ws];if(!i)return cv(e,(s,a)=>Mk(n,i,e,s,a,t),r),e;if(i.scope_!==n)return e;if(!i.modified_)return hv(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),cv(a,(l,u)=>Mk(n,i,s,l,u,t,o),r),hv(n,s,!1),t&&n.patches_&&Mh("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function Mk(n,e,t,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=Bx(i);if(!(o&&!a)){if(n0(i)){const l=s&&e&&e.type_!==3&&!oT(e.assigned_,r)?s.concat(r):void 0,u=uv(n,i,l);if(r5(t,r,u),n0(u))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(kh(i)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;uv(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Yp(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&hv(n,i)}}}function hv(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&yA(e,t)}function yH(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:i5(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=vA;t&&(i=[r],s=qm);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var vA={get(n,e){if(e===Ws)return n;const t=qu(n);if(!oT(t,e))return vH(n,t,e);const r=t[e];return n.finalized_||!kh(r)?r:r===U2(n.base_,e)?(z2(n),n.copy_[e]=fT(r,n)):r},has(n,e){return e in qu(n)},ownKeys(n){return Reflect.ownKeys(qu(n))},set(n,e,t){const r=s5(qu(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=U2(qu(n),e),s=i?.[Ws];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(dH(t,i)&&(t!==void 0||oT(n.base_,e)))return!0;z2(n),hT(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return U2(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,z2(n),hT(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=qu(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){Ga(11)},getPrototypeOf(n){return Ym(n.base_)},setPrototypeOf(){Ga(12)}},qm={};cv(vA,(n,e)=>{qm[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});qm.deleteProperty=function(n,e){return qm.set.call(this,n,e,void 0)};qm.set=function(n,e,t){return vA.set.call(this,n[0],e,t,n[0])};function U2(n,e){const t=n[Ws];return(t?qu(t):n)[e]}function vH(n,e,t){const r=s5(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function s5(n,e){if(!(e in n))return;let t=Ym(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Ym(t)}}function hT(n){n.modified_||(n.modified_=!0,n.parent_&&hT(n.parent_))}function z2(n){n.copy_||(n.copy_=lT(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var xH=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...u){return a.produce(l,f=>t.call(this,f,...u))}}typeof t!="function"&&Ga(6),r!==void 0&&typeof r!="function"&&Ga(7);let i;if(kh(e)){const s=Pk(this),a=fT(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?cT(s):uT(s)}return bk(s,r),kk(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===t5&&(i=void 0),this.autoFreeze_&&yA(i,!0),r){const s=[],a=[];Mh("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else Ga(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,t,(a,o)=>{r=a,i=o}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){kh(n)||Ga(8),n0(n)&&(n=EH(n));const e=Pk(this),t=fT(n,void 0);return t[Ws].isManual_=!0,uT(e),t}finishDraft(n,e){const t=n&&n[Ws];(!t||!t.isManual_)&&Ga(9);const{scope_:r}=t;return bk(r,e),kk(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Mh("Patches").applyPatches_;return n0(n)?r(n,e):this.produce(n,i=>r(i,e))}};function fT(n,e){const t=Yp(n)?Mh("MapSet").proxyMap_(n,e):Gx(n)?Mh("MapSet").proxySet_(n,e):yH(n,e);return(e?e.scope_:i5()).drafts_.push(t),t}function EH(n){return n0(n)||Ga(10,n),a5(n)}function a5(n){if(!kh(n)||Bx(n))return n;const e=n[Ws];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=lT(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=lT(n,!0);return cv(t,(i,s)=>{r5(t,i,a5(s))},r),e&&(e.finalized_=!1),t}var wH=new xH,SH=wH.produce;const TH=n=>(e,t,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?SH(i):i;return e(o,s,...a)},n(r.setState,t,r)),I0=TH,Bi=va()(I0((n,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,config:{smoothingFactor:.2,minRotationSpeed:8,centerOnUser:!0,animationDuration:100},startTracking:()=>{n(t=>{t.tracking=!0})},stopTracking:()=>{n(t=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),t.tracking=!1,t.speed=null,t.headingSource=null,t.watchId=null})},updatePosition:t=>{n(r=>{r.position={lat:t.coords.latitude,lng:t.coords.longitude},r.accuracy=t.coords.accuracy,r.speed=t.coords.speed;const i=15,s=.5;if(!(t.coords.accuracy!==null&&t.coords.accuracy<i)){r.headingSource=null;return}if(t.coords.heading!==null&&t.coords.speed!==null&&t.coords.speed>s){r.headingSource="gps";const o=t.coords.heading;e().updateHeading(o,"gps")}else r.headingSource="compass"})},updateHeading:(t,r="compass")=>{n(i=>{const{smoothHeading:s,config:a}=e();if(s===null){i.smoothHeading=t,i.heading=t;return}let o=t-s;o>180&&(o-=360),o<-180&&(o+=360);const l=r==="compass"?5:3;if(Math.abs(o)<l)return;const f=s+o*(r==="gps"?.5:.35);i.smoothHeading=(f+360)%360,i.heading=t})},setSmoothedHeading:t=>{n(r=>{r.smoothHeading=t,r.heading=t})},setWatchId:t=>{n(r=>{r.watchId=t})},resetFirstFix:()=>{n(t=>{t.firstFix=!1})}}))),xA={"TMK 1850":{name:"TMK 1850",factory:async()=>null,immediateLoad:!0,tier:"premium"},"Bonnebladen 1900":{name:"Bonnebladen 1900",factory:async()=>null,immediateLoad:!0,tier:"premium"},"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:n}=await dt(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createAHNLayerOL:e}},[]);return n()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:n}=await dt(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createGeomorfologieLayerOL:e}},[]);return n()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:n}=await dt(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createBodemkaartLayerOL:e}},[]);return n()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:n}=await dt(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createIKAWLayerOL:e}},[]);return n()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:n}=await dt(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createFAMKESteentijdLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Landschappen":{name:"Archeo Landschappen",factory:async()=>{const{createArcheoLandschappenLayerOL:n}=await dt(async()=>{const{createArcheoLandschappenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createArcheoLandschappenLayerOL:e}},[]);return n()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:n}=await dt(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createEssenLayerOL:e}},[]);return n()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:n}=await dt(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createRijksmonumentenLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:n}=await dt(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return n()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:n}=await dt(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createWerelderfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:n}=await dt(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-CLABHgnG.js");return{createTerpenLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:n}=await dt(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-QYvpUMYv.js");return{createLiniesLayerOL:e}},[]);return n()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:n}=await dt(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-QYvpUMYv.js");return{createInundatiesLayerOL:e}},[]);return n()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:n}=await dt(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-QYvpUMYv.js");return{createMilitaireObjectenLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:n}=await dt(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-DbDLUUJw.js");return{createPaleo800ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:n}=await dt(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-DbDLUUJw.js");return{createPaleo100ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:n}=await dt(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-DbDLUUJw.js");return{createPaleo500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:n}=await dt(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-DbDLUUJw.js");return{createPaleo1500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:n}=await dt(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-DbDLUUJw.js");return{createPaleo2750vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:n}=await dt(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-DbDLUUJw.js");return{createPaleo5500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:n}=await dt(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-DbDLUUJw.js");return{createPaleo9000vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:n}=await dt(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-Cj_BKmpM.js");return{createReligieusErfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:n}=await dt(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-BnsFUGpQ.js");return{createAHN4ColorElevationLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:n}=await dt(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-BnsFUGpQ.js");return{createAHN4HillshadeLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:n}=await dt(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-BnsFUGpQ.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:n}=await dt(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createGewaspercelenLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:n}=await dt(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createKadastraleKaartLayerOL:e}},[]);return n()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:n}=await dt(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createScheepswrakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:n}=await dt(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createWoonheuvelsLayerOL:e}},[]);return n()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:n}=await dt(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createRomeinseFortenLayerOL:e}},[]);return n()},immediateLoad:!0},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:n}=await dt(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createWindmolensLayerOL:e}},[]);return n()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:n}=await dt(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createErfgoedlijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:n}=await dt(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createOudeKernenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenkaartPuntenLayerOL:n}=await dt(async()=>{const{createRelictenkaartPuntenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createRelictenkaartPuntenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:n}=await dt(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:n}=await dt(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:n}=await dt(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-DxK8fnbS.js");return{createVerdronkenDorpenLayerOL:e}},[]);return n()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:n}=await dt(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-jC-pxhFc.js");return{createAMKLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:n}=await dt(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-jC-pxhFc.js");return{createAMKRomeinsLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:n}=await dt(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-jC-pxhFc.js");return{createAMKSteentijdLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:n}=await dt(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-jC-pxhFc.js");return{createAMKVroegeMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:n}=await dt(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-jC-pxhFc.js");return{createAMKLateMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:n}=await dt(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-jC-pxhFc.js");return{createAMKOverigLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"Romeinse wegen (regio)":{name:"Romeinse wegen (regio)",factory:async()=>{const{createRomeinseWegenLayerOL:n}=await dt(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-CbTh6IfK.js");return{createRomeinseWegenLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:n}=await dt(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-CbTh6IfK.js");return{createRomeinseWegenWereldLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:n}=await dt(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-BOCgC3Eq.js");return{createKastelenLayerOL:e}},__vite__mapDeps([3,4]));return n()},immediateLoad:!1},Runes:{name:"Runes",factory:async()=>{const{createRuinesLayerOL:n}=await dt(async()=>{const{createRuinesLayerOL:e}=await import("./ruinesOL-3qBmDZth.js");return{createRuinesLayerOL:e}},__vite__mapDeps([5,4]));return n()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:n}=await dt(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-eRcRxBYS.js");return{createVeengebiedenLayerOL:e}},[]);return n()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:n}=await dt(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-DYjK9iCw.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([6,4]));return n()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:n}=await dt(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-C2-Cbl0L.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([7,1,4]));return n()},immediateLoad:!1,tier:"premium"},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:n}=await dt(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-DCNqdlK0.js");return{createUIKAVVlakkenLayerOL:e}},__vite__mapDeps([8,1]));return n()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:n}=await dt(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-A9_b9OUS.js");return{createUIKAVBufferlaagLayerOL:e}},__vite__mapDeps([9,1]));return n()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:n}=await dt(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-Czg2Nqy7.js");return{createUIKAVExpertLayerOL:e}},__vite__mapDeps([10,1]));return n()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:n}=await dt(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-De8xm-6F.js");return{createUIKAVUiterwaardenLayerOL:e}},__vite__mapDeps([11,1]));return n()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:n}=await dt(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-BYW1yqFt.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([12,1,4]));return n()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:n}=await dt(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-D_gxZinZ.js");return{createMuseaLayerOL:e}},__vite__mapDeps([13,1,4]));return n()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:n}=await dt(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-CiJXPrPQ.js");return{createStrandjesLayerOL:e}},__vite__mapDeps([14,1]));return n()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:n}=await dt(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-CevbJ8Eg.js");return{createParkenLayerOL:e}},__vite__mapDeps([15,1]));return n()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:n}=await dt(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-CX84HEOi.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([16,4]));return n()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:n}=await dt(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-CInv1aWM.js");return{createFossielenLayerOL:e}},__vite__mapDeps([17,18,4]));return n()},immediateLoad:!1,tier:"premium"},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:n}=await dt(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-DguL5J4p.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([19,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["be"]},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:n}=await dt(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-Bb3v3xdx.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([20,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["de"]},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:n}=await dt(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-BP3mjHDj.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([21,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["fr"]},"Fossiel Hotspots":{name:"Fossiel Hotspots",factory:async()=>{const{createFossielHotspotsLayerOL:n}=await dt(async()=>{const{createFossielHotspotsLayerOL:e}=await import("./fossielHotspotsOL-Dg7xSmS7.js");return{createFossielHotspotsLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"Mineralen Hotspots":{name:"Mineralen Hotspots",factory:async()=>{const{createMineralenHotspotsLayerOL:n}=await dt(async()=>{const{createMineralenHotspotsLayerOL:e}=await import("./mineralenHotspotsOL-CR5oauFL.js");return{createMineralenHotspotsLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Goudrivieren:{name:"Goudrivieren",factory:async()=>{const{createGoudrivierenLayerOL:n}=await dt(async()=>{const{createGoudrivierenLayerOL:e}=await import("./goudrivierenOL-B-6KEtEx.js");return{createGoudrivierenLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Wandelroutes:{name:"Wandelroutes",factory:async()=>{const{createWandelroutesLayer:n}=await dt(async()=>{const{createWandelroutesLayer:e}=await import("./wandelroutesOL-dW1_Eisl.js");return{createWandelroutesLayer:e}},[]);return n()},immediateLoad:!1,tier:"free",regions:["nl","be"]},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:n}=await dt(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-B5Xn4HTg.js");return{createBunkersLayerOL:e}},__vite__mapDeps([22,4]));return n()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:n}=await dt(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-BQyrJc6n.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([23,4]));return n()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:n}=await dt(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-CC-s0yEF.js");return{createSlagveldenLayerOL:e}},__vite__mapDeps([24,4]));return n()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:n}=await dt(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-CZ_Ia4-x.js");return{createVliegveldenLayerOL:e}},[]);return n()},immediateLoad:!1}};function IH(){return Object.values(xA).filter(n=>n.immediateLoad)}const vs=va()(I0((n,e)=>({map:null,rotation:0,rotationEnabled:!0,setMap:t=>{n(r=>{r.map=t})},setRotation:t=>{n(r=>{if(r.rotation=t,r.map&&r.rotationEnabled){const i=t*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{n(t=>{t.rotationEnabled=!0})},disableRotation:()=>{n(t=>{t.rotationEnabled=!1,t.rotation=0,t.map&&t.map.getView().animate({rotation:0,duration:500})})}}))),Xr=va()(I0((n,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Romeinse wegen (regio)":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,"Archeo Landschappen":!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN 0.5m":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN 0.5m":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"Archeo Landschappen":.5,Essen:.6,Terpen:.7,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},toggleLayer:t=>{const r=e(),i=!r.visible[t];n(s=>{s.visible[t]=i}),i&&!r.layers[t]?e().loadLayer(t):r.layers[t]&&r.layers[t].setVisible(i)},setLayerVisibility:(t,r)=>{const i=e();n(s=>{s.visible[t]=r;const a=s.layers[t];a&&a.setVisible(r)}),r&&!i.layers[t]&&e().loadLayer(t)},setLayerOpacity:(t,r)=>{n(i=>{i.opacity[t]=r;const s=i.layers[t];s&&s.setOpacity(r)})},registerLayer:(t,r)=>{n(i=>{i.layers[t]=r,i.loadingState[t]="loaded",i.visible[t]!==void 0&&r.setVisible(i.visible[t]),i.opacity[t]!==void 0&&r.setOpacity(i.opacity[t])})},unregisterLayer:t=>{n(r=>{delete r.layers[t],delete r.loadingState[t]})},loadLayer:async t=>{const r=e();if(r.loadingState[t]==="loading"||r.layers[t])return;const i=xA[t];if(!i){console.warn(` Layer "${t}" not found in registry`);return}const s=vs.getState().map;if(!s){console.warn(` Cannot load layer "${t}": map not initialized`);return}n(a=>{a.loadingState[t]="loading"}),console.log(` Loading layer: ${t}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const o=e();a.setVisible(o.visible[t]??!1),o.opacity[t]!==void 0&&a.setOpacity(o.opacity[t]),s.addLayer(a),n(l=>{l.layers[t]=a,l.loadingState[t]="loaded"}),console.log(` Layer loaded: ${t}`)}catch(a){console.error(` Failed to load layer "${t}":`,a),n(o=>{o.loadingState[t]="error"})}}}))),Wi=va()(I0((n,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstDashboardOpen:!1,createLayerModalOpen:!1,addPointModalOpen:!1,addPointModalLayerId:null,addPointModalLocation:null,layerManagerModalOpen:!1,collapsedCategories:new Set,closeAllPanels:()=>{n(t=>{t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1})},toggleLayerControl:()=>{n(t=>{t.layerControlOpen=!t.layerControlOpen})},toggleLegend:()=>{n(t=>{t.legendOpen=!t.legendOpen})},toggleBackgroundsPanel:()=>{n(t=>{const r=t.backgroundsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{n(t=>{const r=t.themesPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{n(t=>{const r=t.settingsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{n(t=>{const r=t.infoPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.infoPanelOpen=!0)})},togglePresetsPanel:()=>{n(t=>{const r=t.presetsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.presetsPanelOpen=!0)})},toggleCategory:t=>{n(r=>{r.collapsedCategories.has(t)?r.collapsedCategories.delete(t):r.collapsedCategories.add(t)})},setLayerControlOpen:t=>{n(r=>{r.layerControlOpen=t})},setLegendOpen:t=>{n(r=>{r.legendOpen=t})},openVondstForm:t=>{n(r=>{r.backgroundsPanelOpen=!1,r.themesPanelOpen=!1,r.settingsPanelOpen=!1,r.infoPanelOpen=!1,r.presetsPanelOpen=!1,r.vondstFormOpen=!0,r.vondstFormLocation=t||null})},closeVondstForm:()=>{n(t=>{t.vondstFormOpen=!1,t.vondstFormLocation=null})},toggleVondstDashboard:()=>{n(t=>{const r=t.vondstDashboardOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,t.vondstDashboardOpen=!r})},openCreateLayerModal:()=>{n(t=>{t.createLayerModalOpen=!0})},closeCreateLayerModal:()=>{n(t=>{t.createLayerModalOpen=!1})},openAddPointModal:(t,r)=>{n(i=>{i.addPointModalOpen=!0,i.addPointModalLayerId=t,i.addPointModalLocation=r})},closeAddPointModal:()=>{n(t=>{t.addPointModalOpen=!1,t.addPointModalLayerId=null,t.addPointModalLocation=null})},openLayerManagerModal:()=>{n(t=>{t.layerManagerModalOpen=!0})},closeLayerManagerModal:()=>{n(t=>{t.layerManagerModalOpen=!1})}}))),o5=va()(I0(n=>({user:null,loading:!0,error:null,setUser:e=>{n(t=>{t.user=e,t.loading=!1})},setLoading:e=>{n(t=>{t.loading=e})},setError:e=>{n(t=>{t.error=e})}}))),AH=()=>{};var Nk={};const l5=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},RH=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},c5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=s>>2,d=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;l||(p=64,a||(g=64)),r.push(t[f],t[d],t[g],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(l5(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new CH;const g=s<<2|o>>4;if(r.push(g),u!==64){const p=o<<4&240|u>>2;if(r.push(p),d!==64){const E=u<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class CH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bH=function(n){const e=l5(n);return c5.encodeByteArray(e,!0)},fv=function(n){return bH(n).replace(/\./g,"")},u5=function(n){try{return c5.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const PH=()=>h5().__FIREBASE_DEFAULTS__,kH=()=>{if(typeof process>"u"||typeof Nk>"u")return;const n=Nk.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},MH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&u5(n[1]);return e&&JSON.parse(e)},Ux=()=>{try{return AH()||PH()||kH()||MH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},f5=n=>Ux()?.emulatorHosts?.[n],d5=n=>{const e=f5(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},g5=()=>Ux()?.config,m5=n=>Ux()?.[`_${n}`];class NH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function tf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function EA(n){return(await fetch(n,{credentials:"include"})).ok}function p5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[fv(JSON.stringify(t)),fv(JSON.stringify(a)),""].join(".")}const om={};function LH(){const n={prod:[],emulator:[]};for(const e of Object.keys(om))om[e]?n.emulator.push(e):n.prod.push(e);return n}function OH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Lk=!1;function wA(n,e){if(typeof window>"u"||typeof document>"u"||!tf(window.location.host)||om[n]===e||om[n]||Lk)return;om[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=LH().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Lk=!0,a()},g}function f(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function d(){const g=OH(r),p=t("text"),E=document.getElementById(p)||document.createElement("span"),v=t("learnmore"),w=document.getElementById(v)||document.createElement("a"),T=t("preprendIcon"),R=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const k=g.element;o(k),f(w,v);const N=u();l(R,T),k.append(R,E,w,N),document.body.appendChild(k)}s?(E.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function jr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jr())}function _5(){const n=Ux()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jH(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GH(){const n=jr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function y5(){return!_5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v5(){return!_5()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function x5(){try{return typeof indexedDB=="object"}catch{return!1}}function BH(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const UH="FirebaseError";class Ho extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=UH,Object.setPrototypeOf(this,Ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xp.prototype.create)}}class Xp{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?zH(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Ho(i,o,r)}}function zH(n,e){return n.replace($H,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $H=/\{\$([^}]+)}/g;function WH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Nh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Ok(s)&&Ok(a)){if(!Nh(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Ok(n){return n!==null&&typeof n=="object"}function qp(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HH(n,e){const t=new KH(n,e);return t.subscribe.bind(t)}class KH{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");YH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=$2),i.error===void 0&&(i.error=$2),i.complete===void 0&&(i.complete=$2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YH(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $2(){}function Jr(n){return n&&n._delegate?n._delegate:n}class eu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zu="[DEFAULT]";class XH{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new NH;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZH(e))try{this.getOrInitializeService({instanceIdentifier:Zu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zu){return this.instances.has(e)}getOptions(e=Zu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zu){return this.component?this.component.multipleInstances?e:Zu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qH(n){return n===Zu?void 0:n}function ZH(n){return n.instantiationMode==="EAGER"}class QH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xt||(Xt={}));const JH={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},eK=Xt.INFO,tK={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},nK=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=tK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class SA{constructor(e){this.name=e,this._logLevel=eK,this._logHandler=nK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const rK=(n,e)=>e.some(t=>n instanceof t);let Dk,Fk;function iK(){return Dk||(Dk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sK(){return Fk||(Fk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E5=new WeakMap,dT=new WeakMap,w5=new WeakMap,W2=new WeakMap,TA=new WeakMap;function aK(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Wc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&E5.set(t,n)}).catch(()=>{}),TA.set(e,n),e}function oK(n){if(dT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});dT.set(n,e)}let gT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||w5.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function lK(n){gT=n(gT)}function cK(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(H2(this),e,...t);return w5.set(r,e.sort?e.sort():[e]),Wc(r)}:sK().includes(n)?function(...e){return n.apply(H2(this),e),Wc(E5.get(this))}:function(...e){return Wc(n.apply(H2(this),e))}}function uK(n){return typeof n=="function"?cK(n):(n instanceof IDBTransaction&&oK(n),rK(n,iK())?new Proxy(n,gT):n)}function Wc(n){if(n instanceof IDBRequest)return aK(n);if(W2.has(n))return W2.get(n);const e=uK(n);return e!==n&&(W2.set(n,e),TA.set(e,n)),e}const H2=n=>TA.get(n);function hK(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Wc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Wc(a.result),l.oldVersion,l.newVersion,Wc(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const fK=["get","getKey","getAll","getAllKeys","count"],dK=["put","add","delete","clear"],K2=new Map;function jk(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(K2.get(e))return K2.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=dK.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fK.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return K2.set(e,s),s}lK(n=>({...n,get:(e,t,r)=>jk(e,t)||n.get(e,t,r),has:(e,t)=>!!jk(e,t)||n.has(e,t)}));class gK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mK(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function mK(n){return n.getComponent()?.type==="VERSION"}const mT="@firebase/app",Vk="0.14.6";const Pl=new SA("@firebase/app"),pK="@firebase/app-compat",_K="@firebase/analytics-compat",yK="@firebase/analytics",vK="@firebase/app-check-compat",xK="@firebase/app-check",EK="@firebase/auth",wK="@firebase/auth-compat",SK="@firebase/database",TK="@firebase/data-connect",IK="@firebase/database-compat",AK="@firebase/functions",RK="@firebase/functions-compat",CK="@firebase/installations",bK="@firebase/installations-compat",PK="@firebase/messaging",kK="@firebase/messaging-compat",MK="@firebase/performance",NK="@firebase/performance-compat",LK="@firebase/remote-config",OK="@firebase/remote-config-compat",DK="@firebase/storage",FK="@firebase/storage-compat",jK="@firebase/firestore",VK="@firebase/ai",GK="@firebase/firestore-compat",BK="firebase",UK="12.6.0";const pT="[DEFAULT]",zK={[mT]:"fire-core",[pK]:"fire-core-compat",[yK]:"fire-analytics",[_K]:"fire-analytics-compat",[xK]:"fire-app-check",[vK]:"fire-app-check-compat",[EK]:"fire-auth",[wK]:"fire-auth-compat",[SK]:"fire-rtdb",[TK]:"fire-data-connect",[IK]:"fire-rtdb-compat",[AK]:"fire-fn",[RK]:"fire-fn-compat",[CK]:"fire-iid",[bK]:"fire-iid-compat",[PK]:"fire-fcm",[kK]:"fire-fcm-compat",[MK]:"fire-perf",[NK]:"fire-perf-compat",[LK]:"fire-rc",[OK]:"fire-rc-compat",[DK]:"fire-gcs",[FK]:"fire-gcs-compat",[jK]:"fire-fst",[GK]:"fire-fst-compat",[VK]:"fire-vertex","fire-js":"fire-js",[BK]:"fire-js-all"};const dv=new Map,$K=new Map,_T=new Map;function Gk(n,e){try{n.container.addComponent(e)}catch(t){Pl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lh(n){const e=n.name;if(_T.has(e))return Pl.debug(`There were multiple attempts to register component ${e}.`),!1;_T.set(e,n);for(const t of dv.values())Gk(t,n);for(const t of $K.values())Gk(t,n);return!0}function zx(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ua(n){return n==null?!1:n.settings!==void 0}const WK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hc=new Xp("app","Firebase",WK);class HK{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hc.create("app-deleted",{appName:this._name})}}const nf=UK;function S5(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:pT,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Hc.create("bad-app-name",{appName:String(i)});if(t||(t=g5()),!t)throw Hc.create("no-options");const s=dv.get(i);if(s){if(Nh(t,s.options)&&Nh(r,s.config))return s;throw Hc.create("duplicate-app",{appName:i})}const a=new QH(i);for(const l of _T.values())a.addComponent(l);const o=new HK(t,r,a);return dv.set(i,o),o}function IA(n=pT){const e=dv.get(n);if(!e&&n===pT&&g5())return S5();if(!e)throw Hc.create("no-app",{appName:n});return e}function Po(n,e,t){let r=zK[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pl.warn(a.join(" "));return}Lh(new eu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const KK="firebase-heartbeat-database",YK=1,Zm="firebase-heartbeat-store";let Y2=null;function T5(){return Y2||(Y2=hK(KK,YK,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zm)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hc.create("idb-open",{originalErrorMessage:n.message})})),Y2}async function XK(n){try{const t=(await T5()).transaction(Zm),r=await t.objectStore(Zm).get(I5(n));return await t.done,r}catch(e){if(e instanceof Ho)Pl.warn(e.message);else{const t=Hc.create("idb-get",{originalErrorMessage:e?.message});Pl.warn(t.message)}}}async function Bk(n,e){try{const r=(await T5()).transaction(Zm,"readwrite");await r.objectStore(Zm).put(e,I5(n)),await r.done}catch(t){if(t instanceof Ho)Pl.warn(t.message);else{const r=Hc.create("idb-set",{originalErrorMessage:t?.message});Pl.warn(r.message)}}}function I5(n){return`${n.name}!${n.options.appId}`}const qK=1024,ZK=30;class QK{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eY(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Uk();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>ZK){const i=tY(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Uk(),{heartbeatsToSend:t,unsentEntries:r}=JK(this._heartbeatsCache.heartbeats),i=fv(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Pl.warn(e),""}}}function Uk(){return new Date().toISOString().substring(0,10)}function JK(n,e=qK){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),zk(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),zk(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class eY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x5()?BH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await XK(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Bk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Bk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zk(n){return fv(JSON.stringify({version:2,heartbeats:n})).length}function tY(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function nY(n){Lh(new eu("platform-logger",e=>new gK(e),"PRIVATE")),Lh(new eu("heartbeat",e=>new QK(e),"PRIVATE")),Po(mT,Vk,n),Po(mT,Vk,"esm2020"),Po("fire-js","")}nY("");var $k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Kc,A5;(function(){var n;function e(P,b){function M(){}M.prototype=b.prototype,P.F=b.prototype,P.prototype=new M,P.prototype.constructor=P,P.D=function(F,V,W){for(var D=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)D[Ie-2]=arguments[Ie];return b.prototype[V].apply(F,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,b,M){M||(M=0);const F=Array(16);if(typeof b=="string")for(var V=0;V<16;++V)F[V]=b.charCodeAt(M++)|b.charCodeAt(M++)<<8|b.charCodeAt(M++)<<16|b.charCodeAt(M++)<<24;else for(V=0;V<16;++V)F[V]=b[M++]|b[M++]<<8|b[M++]<<16|b[M++]<<24;b=P.g[0],M=P.g[1],V=P.g[2];let W=P.g[3],D;D=b+(W^M&(V^W))+F[0]+3614090360&4294967295,b=M+(D<<7&4294967295|D>>>25),D=W+(V^b&(M^V))+F[1]+3905402710&4294967295,W=b+(D<<12&4294967295|D>>>20),D=V+(M^W&(b^M))+F[2]+606105819&4294967295,V=W+(D<<17&4294967295|D>>>15),D=M+(b^V&(W^b))+F[3]+3250441966&4294967295,M=V+(D<<22&4294967295|D>>>10),D=b+(W^M&(V^W))+F[4]+4118548399&4294967295,b=M+(D<<7&4294967295|D>>>25),D=W+(V^b&(M^V))+F[5]+1200080426&4294967295,W=b+(D<<12&4294967295|D>>>20),D=V+(M^W&(b^M))+F[6]+2821735955&4294967295,V=W+(D<<17&4294967295|D>>>15),D=M+(b^V&(W^b))+F[7]+4249261313&4294967295,M=V+(D<<22&4294967295|D>>>10),D=b+(W^M&(V^W))+F[8]+1770035416&4294967295,b=M+(D<<7&4294967295|D>>>25),D=W+(V^b&(M^V))+F[9]+2336552879&4294967295,W=b+(D<<12&4294967295|D>>>20),D=V+(M^W&(b^M))+F[10]+4294925233&4294967295,V=W+(D<<17&4294967295|D>>>15),D=M+(b^V&(W^b))+F[11]+2304563134&4294967295,M=V+(D<<22&4294967295|D>>>10),D=b+(W^M&(V^W))+F[12]+1804603682&4294967295,b=M+(D<<7&4294967295|D>>>25),D=W+(V^b&(M^V))+F[13]+4254626195&4294967295,W=b+(D<<12&4294967295|D>>>20),D=V+(M^W&(b^M))+F[14]+2792965006&4294967295,V=W+(D<<17&4294967295|D>>>15),D=M+(b^V&(W^b))+F[15]+1236535329&4294967295,M=V+(D<<22&4294967295|D>>>10),D=b+(V^W&(M^V))+F[1]+4129170786&4294967295,b=M+(D<<5&4294967295|D>>>27),D=W+(M^V&(b^M))+F[6]+3225465664&4294967295,W=b+(D<<9&4294967295|D>>>23),D=V+(b^M&(W^b))+F[11]+643717713&4294967295,V=W+(D<<14&4294967295|D>>>18),D=M+(W^b&(V^W))+F[0]+3921069994&4294967295,M=V+(D<<20&4294967295|D>>>12),D=b+(V^W&(M^V))+F[5]+3593408605&4294967295,b=M+(D<<5&4294967295|D>>>27),D=W+(M^V&(b^M))+F[10]+38016083&4294967295,W=b+(D<<9&4294967295|D>>>23),D=V+(b^M&(W^b))+F[15]+3634488961&4294967295,V=W+(D<<14&4294967295|D>>>18),D=M+(W^b&(V^W))+F[4]+3889429448&4294967295,M=V+(D<<20&4294967295|D>>>12),D=b+(V^W&(M^V))+F[9]+568446438&4294967295,b=M+(D<<5&4294967295|D>>>27),D=W+(M^V&(b^M))+F[14]+3275163606&4294967295,W=b+(D<<9&4294967295|D>>>23),D=V+(b^M&(W^b))+F[3]+4107603335&4294967295,V=W+(D<<14&4294967295|D>>>18),D=M+(W^b&(V^W))+F[8]+1163531501&4294967295,M=V+(D<<20&4294967295|D>>>12),D=b+(V^W&(M^V))+F[13]+2850285829&4294967295,b=M+(D<<5&4294967295|D>>>27),D=W+(M^V&(b^M))+F[2]+4243563512&4294967295,W=b+(D<<9&4294967295|D>>>23),D=V+(b^M&(W^b))+F[7]+1735328473&4294967295,V=W+(D<<14&4294967295|D>>>18),D=M+(W^b&(V^W))+F[12]+2368359562&4294967295,M=V+(D<<20&4294967295|D>>>12),D=b+(M^V^W)+F[5]+4294588738&4294967295,b=M+(D<<4&4294967295|D>>>28),D=W+(b^M^V)+F[8]+2272392833&4294967295,W=b+(D<<11&4294967295|D>>>21),D=V+(W^b^M)+F[11]+1839030562&4294967295,V=W+(D<<16&4294967295|D>>>16),D=M+(V^W^b)+F[14]+4259657740&4294967295,M=V+(D<<23&4294967295|D>>>9),D=b+(M^V^W)+F[1]+2763975236&4294967295,b=M+(D<<4&4294967295|D>>>28),D=W+(b^M^V)+F[4]+1272893353&4294967295,W=b+(D<<11&4294967295|D>>>21),D=V+(W^b^M)+F[7]+4139469664&4294967295,V=W+(D<<16&4294967295|D>>>16),D=M+(V^W^b)+F[10]+3200236656&4294967295,M=V+(D<<23&4294967295|D>>>9),D=b+(M^V^W)+F[13]+681279174&4294967295,b=M+(D<<4&4294967295|D>>>28),D=W+(b^M^V)+F[0]+3936430074&4294967295,W=b+(D<<11&4294967295|D>>>21),D=V+(W^b^M)+F[3]+3572445317&4294967295,V=W+(D<<16&4294967295|D>>>16),D=M+(V^W^b)+F[6]+76029189&4294967295,M=V+(D<<23&4294967295|D>>>9),D=b+(M^V^W)+F[9]+3654602809&4294967295,b=M+(D<<4&4294967295|D>>>28),D=W+(b^M^V)+F[12]+3873151461&4294967295,W=b+(D<<11&4294967295|D>>>21),D=V+(W^b^M)+F[15]+530742520&4294967295,V=W+(D<<16&4294967295|D>>>16),D=M+(V^W^b)+F[2]+3299628645&4294967295,M=V+(D<<23&4294967295|D>>>9),D=b+(V^(M|~W))+F[0]+4096336452&4294967295,b=M+(D<<6&4294967295|D>>>26),D=W+(M^(b|~V))+F[7]+1126891415&4294967295,W=b+(D<<10&4294967295|D>>>22),D=V+(b^(W|~M))+F[14]+2878612391&4294967295,V=W+(D<<15&4294967295|D>>>17),D=M+(W^(V|~b))+F[5]+4237533241&4294967295,M=V+(D<<21&4294967295|D>>>11),D=b+(V^(M|~W))+F[12]+1700485571&4294967295,b=M+(D<<6&4294967295|D>>>26),D=W+(M^(b|~V))+F[3]+2399980690&4294967295,W=b+(D<<10&4294967295|D>>>22),D=V+(b^(W|~M))+F[10]+4293915773&4294967295,V=W+(D<<15&4294967295|D>>>17),D=M+(W^(V|~b))+F[1]+2240044497&4294967295,M=V+(D<<21&4294967295|D>>>11),D=b+(V^(M|~W))+F[8]+1873313359&4294967295,b=M+(D<<6&4294967295|D>>>26),D=W+(M^(b|~V))+F[15]+4264355552&4294967295,W=b+(D<<10&4294967295|D>>>22),D=V+(b^(W|~M))+F[6]+2734768916&4294967295,V=W+(D<<15&4294967295|D>>>17),D=M+(W^(V|~b))+F[13]+1309151649&4294967295,M=V+(D<<21&4294967295|D>>>11),D=b+(V^(M|~W))+F[4]+4149444226&4294967295,b=M+(D<<6&4294967295|D>>>26),D=W+(M^(b|~V))+F[11]+3174756917&4294967295,W=b+(D<<10&4294967295|D>>>22),D=V+(b^(W|~M))+F[2]+718787259&4294967295,V=W+(D<<15&4294967295|D>>>17),D=M+(W^(V|~b))+F[9]+3951481745&4294967295,P.g[0]=P.g[0]+b&4294967295,P.g[1]=P.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+W&4294967295}r.prototype.v=function(P,b){b===void 0&&(b=P.length);const M=b-this.blockSize,F=this.C;let V=this.h,W=0;for(;W<b;){if(V==0)for(;W<=M;)i(this,P,W),W+=this.blockSize;if(typeof P=="string"){for(;W<b;)if(F[V++]=P.charCodeAt(W++),V==this.blockSize){i(this,F),V=0;break}}else for(;W<b;)if(F[V++]=P[W++],V==this.blockSize){i(this,F),V=0;break}}this.h=V,this.o+=b},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var b=1;b<P.length-8;++b)P[b]=0;b=this.o*8;for(var M=P.length-8;M<P.length;++M)P[M]=b&255,b/=256;for(this.v(P),P=Array(16),b=0,M=0;M<4;++M)for(let F=0;F<32;F+=8)P[b++]=this.g[M]>>>F&255;return P};function s(P,b){var M=o;return Object.prototype.hasOwnProperty.call(M,P)?M[P]:M[P]=b(P)}function a(P,b){this.h=b;const M=[];let F=!0;for(let V=P.length-1;V>=0;V--){const W=P[V]|0;F&&W==b||(M[V]=W,F=!1)}this.g=M}var o={};function l(P){return-128<=P&&P<128?s(P,function(b){return new a([b|0],b<0?-1:0)}):new a([P|0],P<0?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return d;if(P<0)return w(u(-P));const b=[];let M=1;for(let F=0;P>=M;F++)b[F]=P/M|0,M*=4294967296;return new a(b,0)}function f(P,b){if(P.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(P.charAt(0)=="-")return w(f(P.substring(1),b));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=u(Math.pow(b,8));let F=d;for(let W=0;W<P.length;W+=8){var V=Math.min(8,P.length-W);const D=parseInt(P.substring(W,W+V),b);V<8?(V=u(Math.pow(b,V)),F=F.j(V).add(u(D))):(F=F.j(M),F=F.add(u(D)))}return F}var d=l(0),g=l(1),p=l(16777216);n=a.prototype,n.m=function(){if(v(this))return-w(this).m();let P=0,b=1;for(let M=0;M<this.g.length;M++){const F=this.i(M);P+=(F>=0?F:4294967296+F)*b,b*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(E(this))return"0";if(v(this))return"-"+w(this).toString(P);const b=u(Math.pow(P,6));var M=this;let F="";for(;;){const V=N(M,b).g;M=T(M,V.j(b));let W=((M.g.length>0?M.g[0]:M.h)>>>0).toString(P);if(M=V,E(M))return W+F;for(;W.length<6;)W="0"+W;F=W+F}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function E(P){if(P.h!=0)return!1;for(let b=0;b<P.g.length;b++)if(P.g[b]!=0)return!1;return!0}function v(P){return P.h==-1}n.l=function(P){return P=T(this,P),v(P)?-1:E(P)?0:1};function w(P){const b=P.g.length,M=[];for(let F=0;F<b;F++)M[F]=~P.g[F];return new a(M,~P.h).add(g)}n.abs=function(){return v(this)?w(this):this},n.add=function(P){const b=Math.max(this.g.length,P.g.length),M=[];let F=0;for(let V=0;V<=b;V++){let W=F+(this.i(V)&65535)+(P.i(V)&65535),D=(W>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);F=D>>>16,W&=65535,D&=65535,M[V]=D<<16|W}return new a(M,M[M.length-1]&-2147483648?-1:0)};function T(P,b){return P.add(w(b))}n.j=function(P){if(E(this)||E(P))return d;if(v(this))return v(P)?w(this).j(w(P)):w(w(this).j(P));if(v(P))return w(this.j(w(P)));if(this.l(p)<0&&P.l(p)<0)return u(this.m()*P.m());const b=this.g.length+P.g.length,M=[];for(var F=0;F<2*b;F++)M[F]=0;for(F=0;F<this.g.length;F++)for(let V=0;V<P.g.length;V++){const W=this.i(F)>>>16,D=this.i(F)&65535,Ie=P.i(V)>>>16,Le=P.i(V)&65535;M[2*F+2*V]+=D*Le,R(M,2*F+2*V),M[2*F+2*V+1]+=W*Le,R(M,2*F+2*V+1),M[2*F+2*V+1]+=D*Ie,R(M,2*F+2*V+1),M[2*F+2*V+2]+=W*Ie,R(M,2*F+2*V+2)}for(P=0;P<b;P++)M[P]=M[2*P+1]<<16|M[2*P];for(P=b;P<2*b;P++)M[P]=0;return new a(M,0)};function R(P,b){for(;(P[b]&65535)!=P[b];)P[b+1]+=P[b]>>>16,P[b]&=65535,b++}function k(P,b){this.g=P,this.h=b}function N(P,b){if(E(b))throw Error("division by zero");if(E(P))return new k(d,d);if(v(P))return b=N(w(P),b),new k(w(b.g),w(b.h));if(v(b))return b=N(P,w(b)),new k(w(b.g),b.h);if(P.g.length>30){if(v(P)||v(b))throw Error("slowDivide_ only works with positive integers.");for(var M=g,F=b;F.l(P)<=0;)M=O(M),F=O(F);var V=B(M,1),W=B(F,1);for(F=B(F,2),M=B(M,2);!E(F);){var D=W.add(F);D.l(P)<=0&&(V=V.add(M),W=D),F=B(F,1),M=B(M,1)}return b=T(P,V.j(b)),new k(V,b)}for(V=d;P.l(b)>=0;){for(M=Math.max(1,Math.floor(P.m()/b.m())),F=Math.ceil(Math.log(M)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),W=u(M),D=W.j(b);v(D)||D.l(P)>0;)M-=F,W=u(M),D=W.j(b);E(W)&&(W=g),V=V.add(W),P=T(P,D)}return new k(V,P)}n.B=function(P){return N(this,P).h},n.and=function(P){const b=Math.max(this.g.length,P.g.length),M=[];for(let F=0;F<b;F++)M[F]=this.i(F)&P.i(F);return new a(M,this.h&P.h)},n.or=function(P){const b=Math.max(this.g.length,P.g.length),M=[];for(let F=0;F<b;F++)M[F]=this.i(F)|P.i(F);return new a(M,this.h|P.h)},n.xor=function(P){const b=Math.max(this.g.length,P.g.length),M=[];for(let F=0;F<b;F++)M[F]=this.i(F)^P.i(F);return new a(M,this.h^P.h)};function O(P){const b=P.g.length+1,M=[];for(let F=0;F<b;F++)M[F]=P.i(F)<<1|P.i(F-1)>>>31;return new a(M,P.h)}function B(P,b){const M=b>>5;b%=32;const F=P.g.length-M,V=[];for(let W=0;W<F;W++)V[W]=b>0?P.i(W+M)>>>b|P.i(W+M+1)<<32-b:P.i(W+M);return new a(V,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,A5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=f,Kc=a}).apply(typeof $k<"u"?$k:typeof self<"u"?self:typeof window<"u"?window:{});var B_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var R5,Kg,C5,vy,yT,b5,P5,k5;(function(){var n,e=Object.defineProperty;function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof B_=="object"&&B_];for(var A=0;A<_.length;++A){var L=_[A];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=t(this);function i(_,A){if(A)e:{var L=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var de=_[H];if(!(de in L))break e;L=L[de]}_=_[_.length-1],H=L[_],A=A(H),A!=H&&A!=null&&e(L,_,{configurable:!0,writable:!0,value:A})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(A){var L=[],H;for(H in A)Object.prototype.hasOwnProperty.call(A,H)&&L.push([H,A[H]]);return L}});var s=s||{},a=this||self;function o(_){var A=typeof _;return A=="object"&&_!=null||A=="function"}function l(_,A,L){return _.call.apply(_.bind,arguments)}function u(_,A,L){return u=l,u.apply(null,arguments)}function f(_,A){var L=Array.prototype.slice.call(arguments,1);return function(){var H=L.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function d(_,A){function L(){}L.prototype=A.prototype,_.Z=A.prototype,_.prototype=new L,_.prototype.constructor=_,_.Ob=function(H,de,Se){for(var rt=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)rt[Gt-2]=arguments[Gt];return A.prototype[de].apply(H,rt)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function p(_){const A=_.length;if(A>0){const L=Array(A);for(let H=0;H<A;H++)L[H]=_[H];return L}return[]}function E(_,A){for(let H=1;H<arguments.length;H++){const de=arguments[H];var L=typeof de;if(L=L!="object"?L:de?Array.isArray(de)?"array":L:"null",L=="array"||L=="object"&&typeof de.length=="number"){L=_.length||0;const Se=de.length||0;_.length=L+Se;for(let rt=0;rt<Se;rt++)_[L+rt]=de[rt]}else _.push(de)}}class v{constructor(A,L){this.i=A,this.j=L,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function w(_){a.setTimeout(()=>{throw _},0)}function T(){var _=P;let A=null;return _.g&&(A=_.g,_.g=_.g.next,_.g||(_.h=null),A.next=null),A}class R{constructor(){this.h=this.g=null}add(A,L){const H=k.get();H.set(A,L),this.h?this.h.next=H:this.g=H,this.h=H}}var k=new v(()=>new N,_=>_.reset());class N{constructor(){this.next=this.g=this.h=null}set(A,L){this.h=A,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let O,B=!1,P=new R,b=()=>{const _=Promise.resolve(void 0);O=()=>{_.then(M)}};function M(){for(var _;_=T();){try{_.h.call(_.g)}catch(L){w(L)}var A=k;A.j(_),A.h<100&&(A.h++,_.next=A.g,A.g=_)}B=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(_,A){this.type=_,this.g=this.target=A,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var _=!1,A=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const L=()=>{};a.addEventListener("test",L,A),a.removeEventListener("test",L,A)}catch{}return _})();function D(_){return/^[\s\xa0]*$/.test(_)}function Ie(_,A){V.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,A)}d(Ie,V),Ie.prototype.init=function(_,A){const L=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=A,A=_.relatedTarget,A||(L=="mouseover"?A=_.fromElement:L=="mouseout"&&(A=_.toElement)),this.relatedTarget=A,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),Fe=0;function Ce(_,A,L,H,de){this.listener=_,this.proxy=null,this.src=A,this.type=L,this.capture=!!H,this.ha=de,this.key=++Fe,this.da=this.fa=!1}function ce(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Re(_,A,L){for(const H in _)A.call(L,_[H],H,_)}function me(_,A){for(const L in _)A.call(void 0,_[L],L,_)}function ee(_){const A={};for(const L in _)A[L]=_[L];return A}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(_,A){let L,H;for(let de=1;de<arguments.length;de++){H=arguments[de];for(L in H)_[L]=H[L];for(let Se=0;Se<j.length;Se++)L=j[Se],Object.prototype.hasOwnProperty.call(H,L)&&(_[L]=H[L])}}function re(_){this.src=_,this.g={},this.h=0}re.prototype.add=function(_,A,L,H,de){const Se=_.toString();_=this.g[Se],_||(_=this.g[Se]=[],this.h++);const rt=ge(_,A,H,de);return rt>-1?(A=_[rt],L||(A.fa=!1)):(A=new Ce(A,this.src,Se,!!H,de),A.fa=L,_.push(A)),A};function Q(_,A){const L=A.type;if(L in _.g){var H=_.g[L],de=Array.prototype.indexOf.call(H,A,void 0),Se;(Se=de>=0)&&Array.prototype.splice.call(H,de,1),Se&&(ce(A),_.g[L].length==0&&(delete _.g[L],_.h--))}}function ge(_,A,L,H){for(let de=0;de<_.length;++de){const Se=_[de];if(!Se.da&&Se.listener==A&&Se.capture==!!L&&Se.ha==H)return de}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Ve={};function Ae(_,A,L,H,de){if(Array.isArray(A)){for(let Se=0;Se<A.length;Se++)Ae(_,A[Se],L,H,de);return null}return L=z(L),_&&_[Le]?_.J(A,L,o(H)?!!H.capture:!1,de):Oe(_,A,L,!1,H,de)}function Oe(_,A,L,H,de,Se){if(!A)throw Error("Invalid event type");const rt=o(de)?!!de.capture:!!de;let Gt=ft(_);if(Gt||(_[De]=Gt=new re(_)),L=Gt.add(A,L,H,rt,Se),L.proxy)return L;if(H=Te(),L.proxy=H,H.src=_,H.listener=L,_.addEventListener)W||(de=rt),de===void 0&&(de=!1),_.addEventListener(A.toString(),H,de);else if(_.attachEvent)_.attachEvent(qe(A.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Te(){function _(L){return A.call(_.src,_.listener,L)}const A=q;return _}function ue(_,A,L,H,de){if(Array.isArray(A))for(var Se=0;Se<A.length;Se++)ue(_,A[Se],L,H,de);else H=o(H)?!!H.capture:!!H,L=z(L),_&&_[Le]?(_=_.i,Se=String(A).toString(),Se in _.g&&(A=_.g[Se],L=ge(A,L,H,de),L>-1&&(ce(A[L]),Array.prototype.splice.call(A,L,1),A.length==0&&(delete _.g[Se],_.h--)))):_&&(_=ft(_))&&(A=_.g[A.toString()],_=-1,A&&(_=ge(A,L,H,de)),(L=_>-1?A[_]:null)&&C(L))}function C(_){if(typeof _!="number"&&_&&!_.da){var A=_.src;if(A&&A[Le])Q(A.i,_);else{var L=_.type,H=_.proxy;A.removeEventListener?A.removeEventListener(L,H,_.capture):A.detachEvent?A.detachEvent(qe(L),H):A.addListener&&A.removeListener&&A.removeListener(H),(L=ft(A))?(Q(L,_),L.h==0&&(L.src=null,A[De]=null)):ce(_)}}}function qe(_){return _ in Ve?Ve[_]:Ve[_]="on"+_}function q(_,A){if(_.da)_=!0;else{A=new Ie(A,this);const L=_.listener,H=_.ha||_.src;_.fa&&C(_),_=L.call(H,A)}return _}function ft(_){return _=_[De],_ instanceof re?_:null}var Y="__closure_events_fn_"+(Math.random()*1e9>>>0);function z(_){return typeof _=="function"?_:(_[Y]||(_[Y]=function(A){return _.handleEvent(A)}),_[Y])}function se(){F.call(this),this.i=new re(this),this.M=this,this.G=null}d(se,F),se.prototype[Le]=!0,se.prototype.removeEventListener=function(_,A,L,H){ue(this,_,A,L,H)};function Ne(_,A){var L,H=_.G;if(H)for(L=[];H;H=H.G)L.push(H);if(_=_.M,H=A.type||A,typeof A=="string")A=new V(A,_);else if(A instanceof V)A.target=A.target||_;else{var de=A;A=new V(H,_),ne(A,de)}de=!0;let Se,rt;if(L)for(rt=L.length-1;rt>=0;rt--)Se=A.g=L[rt],de=xe(Se,H,!0,A)&&de;if(Se=A.g=_,de=xe(Se,H,!0,A)&&de,de=xe(Se,H,!1,A)&&de,L)for(rt=0;rt<L.length;rt++)Se=A.g=L[rt],de=xe(Se,H,!1,A)&&de}se.prototype.N=function(){if(se.Z.N.call(this),this.i){var _=this.i;for(const A in _.g){const L=_.g[A];for(let H=0;H<L.length;H++)ce(L[H]);delete _.g[A],_.h--}}this.G=null},se.prototype.J=function(_,A,L,H){return this.i.add(String(_),A,!1,L,H)},se.prototype.K=function(_,A,L,H){return this.i.add(String(_),A,!0,L,H)};function xe(_,A,L,H){if(A=_.i.g[String(A)],!A)return!0;A=A.concat();let de=!0;for(let Se=0;Se<A.length;++Se){const rt=A[Se];if(rt&&!rt.da&&rt.capture==L){const Gt=rt.listener,dr=rt.ha||rt.src;rt.fa&&Q(_.i,rt),de=Gt.call(dr,H)!==!1&&de}}return de&&!H.defaultPrevented}function Xe(_,A){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:a.setTimeout(_,A||0)}function Je(_){_.g=Xe(()=>{_.g=null,_.i&&(_.i=!1,Je(_))},_.l);const A=_.h;_.h=null,_.m.apply(null,A)}class ht extends F{constructor(A,L){super(),this.m=A,this.l=L,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Je(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(_){F.call(this),this.h=_,this.g={}}d(mt,F);var St=[];function Bt(_){Re(_.g,function(A,L){this.g.hasOwnProperty(L)&&C(A)},_),_.g={}}mt.prototype.N=function(){mt.Z.N.call(this),Bt(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=a.JSON.stringify,Ea=a.JSON.parse,Di=class{stringify(_){return a.JSON.stringify(_,void 0)}parse(_){return a.JSON.parse(_,void 0)}};function ei(){}function wa(){}var Es={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xs(){V.call(this,"d")}d(Xs,V);function Sa(){V.call(this,"c")}d(Sa,V);var ti={},Ta=null;function ws(){return Ta=Ta||new se}ti.Ia="serverreachability";function Ss(_){V.call(this,ti.Ia,_)}d(Ss,V);function Gr(_){const A=ws();Ne(A,new Ss(A))}ti.STAT_EVENT="statevent";function ni(_,A){V.call(this,ti.STAT_EVENT,_),this.stat=A}d(ni,V);function pn(_){const A=ws();Ne(A,new ni(A,_))}ti.Ja="timingevent";function Ts(_,A){V.call(this,ti.Ja,_),this.size=A}d(Ts,V);function Is(_,A){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){_()},A)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function qi(_,A,L,H,de,Se){_.info(function(){if(_.g)if(Se){var rt="",Gt=Se.split("&");for(let Sn=0;Sn<Gt.length;Sn++){var dr=Gt[Sn].split("=");if(dr.length>1){const vr=dr[0];dr=dr[1];const Ps=vr.split("_");rt=Ps.length>=2&&Ps[1]=="type"?rt+(vr+"="+dr+"&"):rt+(vr+"=redacted&")}}}else rt=null;else rt=Se;return"XMLHTTP REQ ("+H+") [attempt "+de+"]: "+A+`
`+L+`
`+rt})}function Cr(_,A,L,H,de,Se,rt){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+de+"]: "+A+`
`+L+`
`+Se+" "+rt})}function Xn(_,A,L,H){_.info(function(){return"XMLHTTP TEXT ("+A+"): "+Pr(_,L)+(H?" "+H:"")})}function br(_,A){_.info(function(){return"TIMEOUT: "+A})}Yn.prototype.info=function(){};function Pr(_,A){if(!_.g)return A;if(!A)return null;try{const Se=JSON.parse(A);if(Se){for(_=0;_<Se.length;_++)if(Array.isArray(Se[_])){var L=Se[_];if(!(L.length<2)){var H=L[1];if(Array.isArray(H)&&!(H.length<1)){var de=H[0];if(de!="noop"&&de!="stop"&&de!="close")for(let rt=1;rt<H.length;rt++)H[rt]=""}}}}return _r(Se)}catch{return A}}var yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rr;function hr(){}d(hr,ei),hr.prototype.g=function(){return new XMLHttpRequest},rr=new hr;function Zi(_){return encodeURIComponent(String(_))}function U(_){var A=1;_=_.split(":");const L=[];for(;A>0&&_.length;)L.push(_.shift()),A--;return _.length&&L.push(_.join(":")),L}function Z(_,A,L,H){this.j=_,this.i=A,this.l=L,this.S=H||1,this.V=new mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new K}function K(){this.i=null,this.g="",this.h=!1}var X={},J={};function te(_,A,L){_.M=1,_.A=Yo(Zs(A)),_.u=L,_.R=!0,_e(_,null)}function _e(_,A){_.F=Date.now(),Ee(_),_.B=Zs(_.A);var L=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),X0(L.i,"t",H),_.C=0,L=_.j.L,_.h=new K,_.g=M1(_.j,L?A:null,!_.u),_.P>0&&(_.O=new ht(u(_.Y,_,_.g),_.P)),A=_.V,L=_.g,H=_.ba;var de="readystatechange";Array.isArray(de)||(de&&(St[0]=de.toString()),de=St);for(let Se=0;Se<de.length;Se++){const rt=Ae(L,de[Se],H||A.handleEvent,!1,A.h||A);if(!rt)break;A.g[rt.key]=rt}A=_.J?ee(_.J):{},_.u?(_.v||(_.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,A)):(_.v="GET",_.g.ea(_.B,_.v,null,A)),Gr(),qi(_.i,_.v,_.B,_.l,_.S,_.u)}Z.prototype.ba=function(_){_=_.target;const A=this.O;A&&uo(_)==3?A.j():this.Y(_)},Z.prototype.Y=function(_){try{if(_==this.g)e:{const Gt=uo(this.g),dr=this.g.ya(),Sn=this.g.ca();if(!(Gt<3)&&(Gt!=3||this.g&&(this.h.h||this.g.la()||P1(this.g)))){this.K||Gt!=4||dr==7||(dr==8||Sn<=0?Gr(3):Gr(2)),et(this);var A=this.g.ca();this.X=A;var L=Pe(this);if(this.o=A==200,Cr(this.i,this.v,this.B,this.l,this.S,Gt,A),this.o){if(this.U&&!this.L){t:{if(this.g){var H,de=this.g;if((H=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(H)){var Se=H;break t}}Se=null}if(_=Se)Xn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,_);else{this.o=!1,this.m=3,pn(12),We(this),ut(this);break e}}if(this.R){_=!0;let vr;for(;!this.K&&this.C<L.length;)if(vr=ve(this,L),vr==J){Gt==4&&(this.m=4,pn(14),_=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==X){this.m=4,pn(15),Xn(this.i,this.l,L,"[Invalid Chunk]"),_=!1;break}else Xn(this.i,this.l,vr,null),He(this,vr);if(pe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||L.length!=0||this.h.h||(this.m=1,pn(16),_=!1),this.o=this.o&&_,!_)Xn(this.i,this.l,L,"[Invalid Chunked Response]"),We(this),ut(this);else if(L.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),bu(rt),rt.P=!0,pn(11))}}else Xn(this.i,this.l,L,null),He(this,L);Gt==4&&We(this),this.o&&!this.K&&(Gt==4?xf(this.j,this):(this.o=!1,Ee(this)))}else Z0(this.g),A==400&&L.indexOf("Unknown SID")>0?(this.m=3,pn(12)):(this.m=0,pn(13)),We(this),ut(this)}}}catch{}};function Pe(_){if(!pe(_))return _.g.la();const A=P1(_.g);if(A==="")return"";let L="";const H=A.length,de=uo(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return We(_),ut(_),"";_.h.i=new a.TextDecoder}for(let Se=0;Se<H;Se++)_.h.h=!0,L+=_.h.i.decode(A[Se],{stream:!(de&&Se==H-1)});return A.length=0,_.h.g+=L,_.C=0,_.h.g}function pe(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function ve(_,A){var L=_.C,H=A.indexOf(`
`,L);return H==-1?J:(L=Number(A.substring(L,H)),isNaN(L)?X:(H+=1,H+L>A.length?J:(A=A.slice(H,H+L),_.C=H+L,A)))}Z.prototype.cancel=function(){this.K=!0,We(this)};function Ee(_){_.T=Date.now()+_.H,$e(_,_.H)}function $e(_,A){if(_.D!=null)throw Error("WatchDog timer not null");_.D=Is(u(_.aa,_),A)}function et(_){_.D&&(a.clearTimeout(_.D),_.D=null)}Z.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(br(this.i,this.B),this.M!=2&&(Gr(),pn(17)),We(this),this.m=2,ut(this)):$e(this,this.T-_)};function ut(_){_.j.I==0||_.K||xf(_.j,_)}function We(_){et(_);var A=_.O;A&&typeof A.dispose=="function"&&A.dispose(),_.O=null,Bt(_.V),_.g&&(A=_.g,_.g=null,A.abort(),A.dispose())}function He(_,A){try{var L=_.j;if(L.I!=0&&(L.g==_||Ia(L.h,_))){if(!_.L&&Ia(L.h,_)&&L.I==3){try{var H=L.Ba.g.parse(A)}catch{H=null}if(Array.isArray(H)&&H.length==3){var de=H;if(de[0]==0){e:if(!L.v){if(L.g)if(L.g.F+3e3<_.F)vf(L),Cs(L);else break e;go(L),pn(18)}}else L.xa=de[1],0<L.xa-L.K&&de[2]<37500&&L.F&&L.A==0&&!L.C&&(L.C=Is(u(L.Va,L),6e3));$n(L.h)<=1&&L.ta&&(L.ta=void 0)}else bs(L,11)}else if((_.L||L.g==_)&&vf(L),!D(A))for(de=L.Ba.g.parse(A),A=0;A<de.length;A++){let Sn=de[A];const vr=Sn[0];if(!(vr<=L.K))if(L.K=vr,Sn=Sn[1],L.I==2)if(Sn[0]=="c"){L.M=Sn[1],L.ba=Sn[2];const Ps=Sn[3];Ps!=null&&(L.ka=Ps,L.j.info("VER="+L.ka));const Jo=Sn[4];Jo!=null&&(L.za=Jo,L.j.info("SVER="+L.za));const mo=Sn[5];mo!=null&&typeof mo=="number"&&mo>0&&(H=1.5*mo,L.O=H,L.j.info("backChannelRequestTimeoutMs_="+H)),H=L;const po=_.g;if(po){const Sf=po.g?po.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sf){var Se=H.h;Se.g||Sf.indexOf("spdy")==-1&&Sf.indexOf("quic")==-1&&Sf.indexOf("h2")==-1||(Se.j=Se.l,Se.g=new Set,Se.h&&(qs(Se,Se.h),Se.h=null))}if(H.G){const eg=po.g?po.g.getResponseHeader("X-HTTP-Session-Id"):null;eg&&(H.wa=eg,hn(H.J,H.G,eg))}}L.I=3,L.l&&L.l.ra(),L.aa&&(L.T=Date.now()-_.F,L.j.info("Handshake RTT: "+L.T+"ms")),H=L;var rt=_;if(H.na=J0(H,H.L?H.ba:null,H.W),rt.L){As(H.h,rt);var Gt=rt,dr=H.O;dr&&(Gt.H=dr),Gt.D&&(et(Gt),Ee(Gt)),H.g=rt}else vi(H);L.i.length>0&&Qo(L)}else Sn[0]!="stop"&&Sn[0]!="close"||bs(L,7);else L.I==3&&(Sn[0]=="stop"||Sn[0]=="close"?Sn[0]=="stop"?bs(L,7):_f(L):Sn[0]!="noop"&&L.l&&L.l.qa(Sn),L.A=0)}}Gr(4)}catch{}}var Nt=class{constructor(_,A){this.g=_,this.map=A}};function _n(_){this.l=_||10,a.PerformanceNavigationTiming?(_=a.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wn(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function $n(_){return _.h?1:_.g?_.g.size:0}function Ia(_,A){return _.h?_.h==A:_.g?_.g.has(A):!1}function qs(_,A){_.g?_.g.add(A):_.h=A}function As(_,A){_.h&&_.h==A?_.h=null:_.g&&_.g.has(A)&&_.g.delete(A)}_n.prototype.cancel=function(){if(this.i=fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function fr(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let A=_.i;for(const L of _.g.values())A=A.concat(L.G);return A}return p(_.i)}var Wl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qn(_,A){if(_){_=_.split("&");for(let L=0;L<_.length;L++){const H=_[L].indexOf("=");let de,Se=null;H>=0?(de=_[L].substring(0,H),Se=_[L].substring(H+1)):de=_[L],A(de,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function io(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;_ instanceof io?(this.l=_.l,Su(this,_.j),this.o=_.o,this.g=_.g,so(this,_.u),this.h=_.h,Hl(this,q0(_.i)),this.m=_.m):_&&(A=String(_).match(Wl))?(this.l=!1,Su(this,A[1]||"",!0),this.o=Tu(A[2]||""),this.g=Tu(A[3]||"",!0),so(this,A[4]),this.h=Tu(A[5]||"",!0),Hl(this,A[6]||"",!0),this.m=Tu(A[7]||"")):(this.l=!1,this.i=new Jt(null,this.l))}io.prototype.toString=function(){const _=[];var A=this.j;A&&_.push(Iu(A,$0,!0),":");var L=this.g;return(L||A=="file")&&(_.push("//"),(A=this.o)&&_.push(Iu(A,$0,!0),"@"),_.push(Zi(L).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.u,L!=null&&_.push(":",String(L))),(L=this.h)&&(this.g&&L.charAt(0)!="/"&&_.push("/"),_.push(Iu(L,L.charAt(0)=="/"?Au:W0,!0))),(L=this.i.toString())&&_.push("?",L),(L=this.m)&&_.push("#",Iu(L,H0)),_.join("")},io.prototype.resolve=function(_){const A=Zs(this);let L=!!_.j;L?Su(A,_.j):L=!!_.o,L?A.o=_.o:L=!!_.g,L?A.g=_.g:L=_.u!=null;var H=_.h;if(L)so(A,_.u);else if(L=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var de=A.h.lastIndexOf("/");de!=-1&&(H=A.h.slice(0,de+1)+H)}if(de=H,de==".."||de==".")H="";else if(de.indexOf("./")!=-1||de.indexOf("/.")!=-1){H=de.lastIndexOf("/",0)==0,de=de.split("/");const Se=[];for(let rt=0;rt<de.length;){const Gt=de[rt++];Gt=="."?H&&rt==de.length&&Se.push(""):Gt==".."?((Se.length>1||Se.length==1&&Se[0]!="")&&Se.pop(),H&&rt==de.length&&Se.push("")):(Se.push(Gt),H=!0)}H=Se.join("/")}else H=de}return L?A.h=H:L=_.i.toString()!=="",L?Hl(A,q0(_.i)):L=!!_.m,L&&(A.m=_.m),A};function Zs(_){return new io(_)}function Su(_,A,L){_.j=L?Tu(A,!0):A,_.j&&(_.j=_.j.replace(/:$/,""))}function so(_,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);_.u=A}else _.u=null}function Hl(_,A,L){A instanceof Jt?(_.i=A,gf(_.i,_.l)):(L||(A=Iu(A,VE)),_.i=new Jt(A,_.l))}function hn(_,A,L){_.i.set(A,L)}function Yo(_){return hn(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Tu(_,A){return _?A?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Iu(_,A,L){return typeof _=="string"?(_=encodeURI(_).replace(A,z0),L&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function z0(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var $0=/[#\/\?@]/g,W0=/[#\?:]/g,Au=/[#\?]/g,VE=/[#\?@]/g,H0=/#/g;function Jt(_,A){this.h=this.g=null,this.i=_||null,this.j=!!A}function ao(_){_.g||(_.g=new Map,_.h=0,_.i&&qn(_.i,function(A,L){_.add(decodeURIComponent(A.replace(/\+/g," ")),L)}))}n=Jt.prototype,n.add=function(_,A){ao(this),this.i=null,_=oo(this,_);let L=this.g.get(_);return L||this.g.set(_,L=[]),L.push(A),this.h+=1,this};function K0(_,A){ao(_),A=oo(_,A),_.g.has(A)&&(_.i=null,_.h-=_.g.get(A).length,_.g.delete(A))}function df(_,A){return ao(_),A=oo(_,A),_.g.has(A)}n.forEach=function(_,A){ao(this),this.g.forEach(function(L,H){L.forEach(function(de){_.call(A,de,H,this)},this)},this)};function Y0(_,A){ao(_);let L=[];if(typeof A=="string")df(_,A)&&(L=L.concat(_.g.get(oo(_,A))));else for(_=Array.from(_.g.values()),A=0;A<_.length;A++)L=L.concat(_[A]);return L}n.set=function(_,A){return ao(this),this.i=null,_=oo(this,_),df(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[A]),this.h+=1,this},n.get=function(_,A){return _?(_=Y0(this,_),_.length>0?String(_[0]):A):A};function X0(_,A,L){K0(_,A),L.length>0&&(_.i=null,_.g.set(oo(_,A),p(L)),_.h+=L.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],A=Array.from(this.g.keys());for(let H=0;H<A.length;H++){var L=A[H];const de=Zi(L);L=Y0(this,L);for(let Se=0;Se<L.length;Se++){let rt=de;L[Se]!==""&&(rt+="="+Zi(L[Se])),_.push(rt)}}return this.i=_.join("&")};function q0(_){const A=new Jt;return A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),A}function oo(_,A){return A=String(A),_.j&&(A=A.toLowerCase()),A}function gf(_,A){A&&!_.j&&(ao(_),_.i=null,_.g.forEach(function(L,H){const de=H.toLowerCase();H!=de&&(K0(this,H),X0(this,de,L))},_)),_.j=A}function lo(_,A){const L=new Yn;if(a.Image){const H=new Image;H.onload=f(ri,L,"TestLoadImage: loaded",!0,A,H),H.onerror=f(ri,L,"TestLoadImage: error",!1,A,H),H.onabort=f(ri,L,"TestLoadImage: abort",!1,A,H),H.ontimeout=f(ri,L,"TestLoadImage: timeout",!1,A,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else A(!1)}function co(_,A){const L=new Yn,H=new AbortController,de=setTimeout(()=>{H.abort(),ri(L,"TestPingServer: timeout",!1,A)},1e4);fetch(_,{signal:H.signal}).then(Se=>{clearTimeout(de),Se.ok?ri(L,"TestPingServer: ok",!0,A):ri(L,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(de),ri(L,"TestPingServer: error",!1,A)})}function ri(_,A,L,H,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),H(L)}catch{}}function Ru(){this.g=new Di}function Xo(_){this.i=_.Sb||null,this.h=_.ab||!1}d(Xo,ei),Xo.prototype.g=function(){return new Rs(this.i,this.h)};function Rs(_,A){se.call(this),this.H=_,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Rs,se),n=Rs.prototype,n.open=function(_,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=A,this.readyState=1,Aa(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(A.body=_),(this.H||a).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kl(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;R1(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function R1(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var A=_.value?_.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!_.done}))&&(this.response=this.responseText+=A)}_.done?Kl(this):Aa(this),this.readyState==3&&R1(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,Kl(this))},n.Na=function(_){this.g&&(this.response=_,Kl(this))},n.ga=function(){this.g&&Kl(this)};function Kl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Aa(_)}n.setRequestHeader=function(_,A){this.A.append(_,A)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],A=this.h.entries();for(var L=A.next();!L.done;)L=L.value,_.push(L[0]+": "+L[1]),L=A.next();return _.join(`\r
`)};function Aa(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function C1(_){let A="";return Re(_,function(L,H){A+=H,A+=":",A+=L,A+=`\r
`}),A}function mf(_,A,L){e:{for(H in L){var H=!1;break e}H=!0}H||(L=C1(L),typeof _=="string"?L!=null&&Zi(L):hn(_,A,L))}function Ln(_){se.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Ln,se);var b1=/^https?$/i,GE=["POST","PUT"];n=Ln.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,A,L,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);A=A?A.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rr.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(A,String(_),!0),this.B=!1}catch(Se){Yl(this,Se);return}if(_=L||"",L=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var de in H)L.set(de,H[de]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const Se of H.keys())L.set(Se,H.get(Se));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(L.keys()).find(Se=>Se.toLowerCase()=="content-type"),de=a.FormData&&_ instanceof a.FormData,!(Array.prototype.indexOf.call(GE,A,void 0)>=0)||H||de||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Se,rt]of L)this.g.setRequestHeader(Se,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(Se){Yl(this,Se)}};function Yl(_,A){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=A,_.o=5,Xl(_),Zo(_)}function Xl(_){_.A||(_.A=!0,Ne(_,"complete"),Ne(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,Ne(this,"complete"),Ne(this,"abort"),Zo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zo(this,!0)),Ln.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qo(this):this.Xa())},n.Xa=function(){qo(this)};function qo(_){if(_.h&&typeof s<"u"){if(_.v&&uo(_)==4)setTimeout(_.Ca.bind(_),0);else if(Ne(_,"readystatechange"),uo(_)==4){_.h=!1;try{const Se=_.ca();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var L;if(!(L=A)){var H;if(H=Se===0){let rt=String(_.D).match(Wl)[1]||null;!rt&&a.self&&a.self.location&&(rt=a.self.location.protocol.slice(0,-1)),H=!b1.test(rt?rt.toLowerCase():"")}L=H}if(L)Ne(_,"complete"),Ne(_,"success");else{_.o=6;try{var de=uo(_)>2?_.g.statusText:""}catch{de=""}_.l=de+" ["+_.ca()+"]",Xl(_)}}finally{Zo(_)}}}}function Zo(_,A){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const L=_.g;_.g=null,A||Ne(_,"ready");try{L.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function uo(_){return _.g?_.g.readyState:0}n.ca=function(){try{return uo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var A=this.g.responseText;return _&&A.indexOf(_)==0&&(A=A.substring(_.length)),Ea(A)}};function P1(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Z0(_){const A={};_=(_.g&&uo(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(D(_[H]))continue;var L=U(_[H]);const de=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const Se=A[de]||[];A[de]=Se,Se.push(L)}me(A,function(H){return H.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(_,A,L){return L&&L.internalChannelParams&&L.internalChannelParams[_]||A}function pf(_){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ho("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ho("baseRetryDelayMs",5e3,_),this.Za=ho("retryDelaySeedMs",1e4,_),this.Ta=ho("forwardChannelMaxRetries",2,_),this.va=ho("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new _n(_&&_.concurrentRequestLimit),this.Ba=new Ru,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=pf.prototype,n.ka=8,n.I=1,n.connect=function(_,A,L,H){pn(0),this.W=_,this.H=A||{},L&&H!==void 0&&(this.H.OSID=L,this.H.OAID=H),this.F=this.X,this.J=J0(this,null,this.W),Qo(this)};function _f(_){if(yf(_),_.I==3){var A=_.V++,L=Zs(_.J);if(hn(L,"SID",_.M),hn(L,"RID",A),hn(L,"TYPE","terminate"),fo(_,L),A=new Z(_,_.j,A),A.M=2,A.A=Yo(Zs(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(A.A.toString(),"")}catch{}!L&&a.Image&&(new Image().src=A.A,L=!0),L||(A.g=M1(A.j,null),A.g.ea(A.A)),A.F=Date.now(),Ee(A)}Pu(_)}function Cs(_){_.g&&(bu(_),_.g.cancel(),_.g=null)}function yf(_){Cs(_),_.v&&(a.clearTimeout(_.v),_.v=null),vf(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&a.clearTimeout(_.m),_.m=null)}function Qo(_){if(!wn(_.h)&&!_.m){_.m=!0;var A=_.Ea;O||b(),B||(O(),B=!0),P.add(A,_),_.D=0}}function k1(_,A){return $n(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=A.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=Is(u(_.Ea,_,A),Ef(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const de=new Z(this,this.j,_);let Se=this.o;if(this.U&&(Se?(Se=ee(Se),ne(Se,this.U)):Se=this.U),this.u!==null||this.R||(de.J=Se,Se=null),this.S)e:{for(var A=0,L=0;L<this.i.length;L++){t:{var H=this.i[L];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(A+=H,A>4096){A=L;break e}if(A===4096||L===this.i.length-1){A=L+1;break e}}A=1e3}else A=1e3;A=Q0(this,de,A),L=Zs(this.J),hn(L,"RID",_),hn(L,"CVER",22),this.G&&hn(L,"X-HTTP-Session-Id",this.G),fo(this,L),Se&&(this.R?A="headers="+Zi(C1(Se))+"&"+A:this.u&&mf(L,this.u,Se)),qs(this.h,de),this.Ra&&hn(L,"TYPE","init"),this.S?(hn(L,"$req",A),hn(L,"SID","null"),de.U=!0,te(de,L,null)):te(de,L,A),this.I=2}}else this.I==3&&(_?Cu(this,_):this.i.length==0||wn(this.h)||Cu(this))};function Cu(_,A){var L;A?L=A.l:L=_.V++;const H=Zs(_.J);hn(H,"SID",_.M),hn(H,"RID",L),hn(H,"AID",_.K),fo(_,H),_.u&&_.o&&mf(H,_.u,_.o),L=new Z(_,_.j,L,_.D+1),_.u===null&&(L.J=_.o),A&&(_.i=A.G.concat(_.i)),A=Q0(_,L,1e3),L.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),qs(_.h,L),te(L,H,A)}function fo(_,A){_.H&&Re(_.H,function(L,H){hn(A,H,L)}),_.l&&Re({},function(L,H){hn(A,H,L)})}function Q0(_,A,L){L=Math.min(_.i.length,L);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var de=_.i;let Gt=-1;for(;;){const dr=["count="+L];Gt==-1?L>0?(Gt=de[0].g,dr.push("ofs="+Gt)):Gt=0:dr.push("ofs="+Gt);let Sn=!0;for(let vr=0;vr<L;vr++){var Se=de[vr].g;const Ps=de[vr].map;if(Se-=Gt,Se<0)Gt=Math.max(0,de[vr].g-100),Sn=!1;else try{Se="req"+Se+"_"||"";try{var rt=Ps instanceof Map?Ps:Object.entries(Ps);for(const[Jo,mo]of rt){let po=mo;o(mo)&&(po=_r(mo)),dr.push(Se+Jo+"="+encodeURIComponent(po))}}catch(Jo){throw dr.push(Se+"type="+encodeURIComponent("_badmap")),Jo}}catch{H&&H(Ps)}}if(Sn){rt=dr.join("&");break e}}rt=void 0}return _=_.i.splice(0,L),A.G=_,rt}function vi(_){if(!_.g&&!_.v){_.Y=1;var A=_.Da;O||b(),B||(O(),B=!0),P.add(A,_),_.A=0}}function go(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=Is(u(_.Da,_),Ef(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,ql(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=Is(u(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pn(10),Cs(this),ql(this))};function bu(_){_.B!=null&&(a.clearTimeout(_.B),_.B=null)}function ql(_){_.g=new Z(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var A=Zs(_.na);hn(A,"RID","rpc"),hn(A,"SID",_.M),hn(A,"AID",_.K),hn(A,"CI",_.F?"0":"1"),!_.F&&_.ia&&hn(A,"TO",_.ia),hn(A,"TYPE","xmlhttp"),fo(_,A),_.u&&_.o&&mf(A,_.u,_.o),_.O&&(_.g.H=_.O);var L=_.g;_=_.ba,L.M=1,L.A=Yo(Zs(A)),L.u=null,L.R=!0,_e(L,_)}n.Va=function(){this.C!=null&&(this.C=null,Cs(this),go(this),pn(19))};function vf(_){_.C!=null&&(a.clearTimeout(_.C),_.C=null)}function xf(_,A){var L=null;if(_.g==A){vf(_),bu(_),_.g=null;var H=2}else if(Ia(_.h,A))L=A.G,As(_.h,A),H=1;else return;if(_.I!=0){if(A.o)if(H==1){L=A.u?A.u.length:0,A=Date.now()-A.F;var de=_.D;H=ws(),Ne(H,new Ts(H,L)),Qo(_)}else vi(_);else if(de=A.m,de==3||de==0&&A.X>0||!(H==1&&k1(_,A)||H==2&&go(_)))switch(L&&L.length>0&&(A=_.h,A.i=A.i.concat(L)),de){case 1:bs(_,5);break;case 4:bs(_,10);break;case 3:bs(_,6);break;default:bs(_,2)}}}function Ef(_,A){let L=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(L*=2),L*A}function bs(_,A){if(_.j.info("Error code "+A),A==2){var L=u(_.bb,_),H=_.Ua;const de=!H;H=new io(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Su(H,"https"),Yo(H),de?lo(H.toString(),L):co(H.toString(),L)}else pn(2);_.I=0,_.l&&_.l.pa(A),Pu(_),yf(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function Pu(_){if(_.I=0,_.ja=[],_.l){const A=fr(_.h);(A.length!=0||_.i.length!=0)&&(E(_.ja,A),E(_.ja,_.i),_.h.i.length=0,p(_.i),_.i.length=0),_.l.oa()}}function J0(_,A,L){var H=L instanceof io?Zs(L):new io(L);if(H.g!="")A&&(H.g=A+"."+H.g),so(H,H.u);else{var de=a.location;H=de.protocol,A=A?A+"."+de.hostname:de.hostname,de=+de.port;const Se=new io(null);H&&Su(Se,H),A&&(Se.g=A),de&&so(Se,de),L&&(Se.h=L),H=Se}return L=_.G,A=_.wa,L&&A&&hn(H,L,A),hn(H,"VER",_.ka),fo(_,H),H}function M1(_,A,L){if(A&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=_.Aa&&!_.ma?new Ln(new Xo({ab:L})):new Ln(_.ma),A.Fa(_.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function N1(){}n=N1.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function wf(){}wf.prototype.g=function(_,A){return new ii(_,A)};function ii(_,A){se.call(this),this.g=new pf(A),this.l=_,this.h=A&&A.messageUrlParams||null,_=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(_?_["X-WebChannel-Content-Type"]=A.messageContentType:_={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(_?_["X-WebChannel-Client-Profile"]=A.sa:_={"X-WebChannel-Client-Profile":A.sa}),this.g.U=_,(_=A&&A.Qb)&&!D(_)&&(this.g.u=_),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!D(A)&&(this.g.G=A,_=this.h,_!==null&&A in _&&(_=this.h,A in _&&delete _[A])),this.j=new Zl(this)}d(ii,se),ii.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ii.prototype.close=function(){_f(this.g)},ii.prototype.o=function(_){var A=this.g;if(typeof _=="string"){var L={};L.__data__=_,_=L}else this.v&&(L={},L.__data__=_r(_),_=L);A.i.push(new Nt(A.Ya++,_)),A.I==3&&Qo(A)},ii.prototype.N=function(){this.g.l=null,delete this.j,_f(this.g),delete this.g,ii.Z.N.call(this)};function L1(_){Xs.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var A=_.__sm__;if(A){e:{for(const L in A){_=L;break e}_=void 0}(this.i=_)&&(_=this.i,A=A!==null&&_ in A?A[_]:void 0),this.data=A}else this.data=_}d(L1,Xs);function O1(){Sa.call(this),this.status=1}d(O1,Sa);function Zl(_){this.g=_}d(Zl,N1),Zl.prototype.ra=function(){Ne(this.g,"a")},Zl.prototype.qa=function(_){Ne(this.g,new L1(_))},Zl.prototype.pa=function(_){Ne(this.g,new O1)},Zl.prototype.oa=function(){Ne(this.g,"b")},wf.prototype.createWebChannel=wf.prototype.g,ii.prototype.send=ii.prototype.o,ii.prototype.open=ii.prototype.m,ii.prototype.close=ii.prototype.close,k5=function(){return new wf},P5=function(){return ws()},b5=ti,yT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,vy=yr,Qt.COMPLETE="complete",C5=Qt,wa.EventType=Es,Es.OPEN="a",Es.CLOSE="b",Es.ERROR="c",Es.MESSAGE="d",se.prototype.listen=se.prototype.J,Kg=wa,Ln.prototype.listenOnce=Ln.prototype.K,Ln.prototype.getLastError=Ln.prototype.Ha,Ln.prototype.getLastErrorCode=Ln.prototype.ya,Ln.prototype.getStatus=Ln.prototype.ca,Ln.prototype.getResponseJson=Ln.prototype.La,Ln.prototype.getResponseText=Ln.prototype.la,Ln.prototype.send=Ln.prototype.ea,Ln.prototype.setWithCredentials=Ln.prototype.Fa,R5=Ln}).apply(typeof B_<"u"?B_:typeof self<"u"?self:typeof window<"u"?window:{});const Wk="@firebase/firestore",Hk="4.9.3";class hi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let A0="12.7.0";const Oh=new SA("@firebase/firestore");function fd(){return Oh.logLevel}function Ye(n,...e){if(Oh.logLevel<=Xt.DEBUG){const t=e.map(AA);Oh.debug(`Firestore (${A0}): ${n}`,...t)}}function $i(n,...e){if(Oh.logLevel<=Xt.ERROR){const t=e.map(AA);Oh.error(`Firestore (${A0}): ${n}`,...t)}}function Dh(n,...e){if(Oh.logLevel<=Xt.WARN){const t=e.map(AA);Oh.warn(`Firestore (${A0}): ${n}`,...t)}}function AA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function vt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,M5(n,r,t)}function M5(n,e,t){let r=`FIRESTORE (${A0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $i(r),new Error(r)}function Tt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||M5(e,i,r)}function Vt(n,e){return n}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends Ho{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class N5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hi.UNAUTHENTICATED)))}shutdown(){}}class iY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sY{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new wl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wl,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wl)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new N5(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new hi(e)}}class aY{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oY{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new aY(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Kk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lY{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ua(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const r=s=>{s.error!=null&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ye("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Kk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Kk(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function cY(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class RA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=cY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function vT(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return X2(i)===X2(s)?jt(i,s):X2(i)?1:-1}return jt(n.length,e.length)}const uY=55296,hY=57343;function X2(n){const e=n.charCodeAt(0);return e>=uY&&e<=hY}function r0(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function L5(n){return n+"\0"}const Yk="__name__";class So{constructor(e,t,r){t===void 0?t=0:t>e.length&&vt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&vt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return So.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof So?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=So.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return jt(e.length,t.length)}static compareSegments(e,t){const r=So.isNumericId(e),i=So.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?So.extractNumericId(e).compare(So.extractNumericId(t)):vT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kc.fromString(e.substring(4,e.length-2))}}class mn extends So{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new st(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new mn(t)}static emptyPath(){return new mn([])}}const fY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends So{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return fY.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yk}static keyField(){return new er([Yk])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new st(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new st(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new st(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new st(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(mn.fromString(e))}static fromName(e){return new ot(mn.fromString(e).popFirst(5))}static empty(){return new ot(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new mn(e.slice()))}}function O5(n,e,t){if(!t)throw new st(ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dY(n,e,t,r){if(e===!0&&r===!0)throw new st(ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Xk(n){if(!ot.isDocumentKey(n))throw new st(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qk(n){if(ot.isDocumentKey(n))throw new st(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function D5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $x(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":vt(12329,{type:typeof n})}function tu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new st(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$x(n);throw new st(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Tr(n,e){const t={typeString:n};return e&&(t.value=e),t}function Zp(n,e){if(!D5(n))throw new st(ke.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new st(ke.INVALID_ARGUMENT,t);return!0}const Zk=-62135596800,Qk=1e6;class Rn{static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Qk);return new Rn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new st(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new st(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Zk)throw new st(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qk}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zp(e,Rn._jsonSchema))return new Rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rn._jsonSchemaVersion="firestore/timestamp/1.0",Rn._jsonSchema={type:Tr("string",Rn._jsonSchemaVersion),seconds:Tr("number"),nanoseconds:Tr("number")};class It{static fromTimestamp(e){return new It(e)}static min(){return new It(new Rn(0,0))}static max(){return new It(new Rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qm=-1;class gv{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function xT(n){return n.fields.find((e=>e.kind===2))}function Qu(n){return n.fields.filter((e=>e.kind!==2))}gv.UNKNOWN_ID=-1;class xy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jm(0,Hs.min())}}function gY(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(r===1e9?new Rn(t+1,0):new Rn(t,r));return new Hs(i,ot.empty(),e)}function F5(n){return new Hs(n.readTime,n.key,Qm)}class Hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hs(It.min(),ot.empty(),Qm)}static max(){return new Hs(It.max(),ot.empty(),Qm)}}function CA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(n.documentKey,e.documentKey),t!==0?t:jt(n.largestBatchId,e.largestBatchId))}const j5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function rf(n){if(n.code!==ke.FAILED_PRECONDITION||n.message!==j5)throw n;Ye("LocalStore","Unexpectedly lost primary lease")}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):he.reject(t)}static resolve(e){return new he(((t,r)=>{t(e)}))}static reject(e){return new he(((t,r)=>{r(e)}))}static waitFor(e){return new he(((t,r)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(l=>r(l)))})),a=!0,s===i&&t()}))}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next((i=>i?he.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new he(((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((f=>{a[u]=f,++o,o===s&&r(a)}),(f=>i(f)))}}))}static doWhile(e,t){return new he(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const Os="SimpleDb";class Wx{static open(e,t,r,i){try{return new Wx(t,e.transaction(i,r))}catch(s){throw new lm(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new wl,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new lm(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=bA(r.target.error);this.S.reject(new lm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ye(Os,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pY(t)}}class Yc{static delete(e){return Ye(Os,"Removing database:",e),ih(h5().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!x5())return!1;if(Yc.F())return!0;const e=jr(),t=Yc.M(e),r=0<t&&t<10,i=G5(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Yc.M(jr())===12.2&&$i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ye(Os,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new lm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new st(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new st(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new lm(e,a))},i.onupgradeneeded=s=>{Ye(Os,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{Ye(Os,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Wx.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),he.reject(u)))).toPromise();return l.catch((()=>{})),await o.D,l}catch(o){const l=o,u=l.name!=="FirebaseError"&&a<3;if(Ye(Os,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function G5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class mY{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ih(this.U.delete())}}class lm extends st{constructor(e,t){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _u(n){return n.name==="IndexedDbTransactionError"}class pY{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ye(Os,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ye(Os,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ih(r)}add(e){return Ye(Os,"ADD",this.store.name,e,e),ih(this.store.add(e))}get(e){return ih(this.store.get(e)).next((t=>(t===void 0&&(t=null),Ye(Os,"GET",this.store.name,e,t),t)))}delete(e){return Ye(Os,"DELETE",this.store.name,e),ih(this.store.delete(e))}count(){return Ye(Os,"COUNT",this.store.name),ih(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new he(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((o,l)=>{a.push(l)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new he(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){Ye(Os,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new he(((r,i)=>{t.onerror=s=>{const a=bA(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,t){const r=[];return new he(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new mY(o),u=t(o.primaryKey,o.value,l);if(u instanceof he){const f=u.catch((d=>(l.done(),he.reject(d))));r.push(f)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}})).next((()=>he.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ih(n){return new he(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=bA(r.target.error);t(i)}}))}let Jk=!1;function bA(n){const e=Yc.M(jr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jk||(Jk=!0,setTimeout((()=>{throw r}),0)),r}}return n}const cm="IndexBackfiller";class _Y{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ye(cm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Ye(cm,`Documents written: ${t}`)}catch(t){_u(t)?Ye(cm,"Ignoring IndexedDB error during index backfill: ",t):await rf(t)}await this.re(6e4)}))}}class yY{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return he.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return Ye(cm,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>(Ye(cm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=F5(s);CA(a,r)>0&&(r=a)})),new Hs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ma{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ma.ce=-1;const vh=-1;function Hx(n){return n==null}function ep(n){return n===0&&1/n==-1/0}function vY(n){return typeof n=="number"&&Number.isInteger(n)&&!ep(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const mv="";function ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eM(e)),e=xY(n.get(t),e);return eM(e)}function xY(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case mv:t+="";break;default:t+=s}}return t}function eM(n){return n+mv+""}function Co(n){const e=n.length;if(Tt(e>=2,64408,{path:n}),e===2)return Tt(n.charAt(0)===mv&&n.charAt(1)==="",56145,{path:n}),mn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(mv,s);switch((a<0||a>t)&&vt(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:vt(61167,{path:n})}s=a+2}return new mn(r)}const Ju="remoteDocuments",Qp="owner",Zf="owner",tp="mutationQueues",EY="userId",ja="mutations",tM="batchId",dh="userMutationsIndex",nM=["userId","batchId"];function Ey(n,e){return[n,ki(e)]}function B5(n,e,t){return[n,ki(e),t]}const wY={},i0="documentMutations",pv="remoteDocumentsV14",SY=["prefixPath","collectionGroup","readTime","documentId"],wy="documentKeyIndex",TY=["prefixPath","collectionGroup","documentId"],U5="collectionGroupIndex",IY=["collectionGroup","readTime","prefixPath","documentId"],np="remoteDocumentGlobal",ET="remoteDocumentGlobalKey",s0="targets",z5="queryTargetsIndex",AY=["canonicalId","targetId"],a0="targetDocuments",RY=["targetId","path"],PA="documentTargetsIndex",CY=["path","targetId"],_v="targetGlobalKey",xh="targetGlobal",rp="collectionParents",bY=["collectionId","parent"],o0="clientMetadata",PY="clientId",Kx="bundles",kY="bundleId",Yx="namedQueries",MY="name",kA="indexConfiguration",NY="indexId",wT="collectionGroupIndex",LY="collectionGroup",um="indexState",OY=["indexId","uid"],$5="sequenceNumberIndex",DY=["uid","sequenceNumber"],hm="indexEntries",FY=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W5="documentKeyIndex",jY=["indexId","uid","orderedDocumentKey"],Xx="documentOverlays",VY=["userId","collectionPath","documentId"],ST="collectionPathOverlayIndex",GY=["userId","collectionPath","largestBatchId"],H5="collectionGroupOverlayIndex",BY=["userId","collectionGroup","largestBatchId"],MA="globals",UY="name",K5=[tp,ja,i0,Ju,s0,Qp,xh,a0,o0,np,rp,Kx,Yx],zY=[...K5,Xx],Y5=[tp,ja,i0,pv,s0,Qp,xh,a0,o0,np,rp,Kx,Yx,Xx],X5=Y5,NA=[...X5,kA,um,hm],$Y=NA,q5=[...NA,MA],WY=q5;class TT extends V5{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Vr(n,e){const t=Vt(n);return Yc.O(t.le,e)}function rM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Z5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Kn{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new U_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new U_(this.root,e,this.comparator,!1)}getReverseIterator(){return new U_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new U_(this.root,e,this.comparator,!0)}}class U_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??fi.RED,this.left=i??fi.EMPTY,this.right=s??fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new fi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return fi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw vt(27949);return e+(this.isRed()?0:1)}}fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1;fi.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iM(this.data.getIterator())}getIteratorFrom(e){return new iM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class iM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qf(n){return n.hasNext()?n.getNext():void 0}class ds{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new ds([])}unionWith(e){let t=new Pn(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return r0(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Q5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Q5("Invalid base64 string: "+s):s}})(e);return new Ar(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const HY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kl(n){if(Tt(!!n,39018),typeof n=="string"){let e=0;const t=HY.exec(n);if(Tt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ml(n){return typeof n=="string"?Ar.fromBase64String(n):Ar.fromUint8Array(n)}const J5="server_timestamp",eF="__type__",tF="__previous_value__",nF="__local_write_time__";function LA(n){return(n?.mapValue?.fields||{})[eF]?.stringValue===J5}function qx(n){const e=n.mapValue.fields[tF];return LA(e)?qx(e):e}function ip(n){const e=kl(n.mapValue.fields[nF].timestampValue);return new Rn(e.seconds,e.nanos)}class KY{constructor(e,t,r,i,s,a,o,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const yv="(default)";class Fh{constructor(e,t){this.projectId=e,this.database=t||yv}static empty(){return new Fh("","")}get isDefaultDatabase(){return this.database===yv}isEqual(e){return e instanceof Fh&&e.projectId===this.projectId&&e.database===this.database}}const OA="__type__",rF="__max__",Vc={mapValue:{fields:{__type__:{stringValue:rF}}}},DA="__vector__",l0="value",Sy={nullValue:"NULL_VALUE"};function nu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LA(n)?4:iF(n)?9007199254740991:Zx(n)?10:11:vt(28295,{value:n})}function Go(n,e){if(n===e)return!0;const t=nu(n);if(t!==nu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ip(n).isEqual(ip(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=kl(i.timestampValue),o=kl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Ml(i.bytesValue).isEqual(Ml(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Hn(i.geoPointValue.latitude)===Hn(s.geoPointValue.latitude)&&Hn(i.geoPointValue.longitude)===Hn(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Hn(i.integerValue)===Hn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Hn(i.doubleValue),o=Hn(s.doubleValue);return a===o?ep(a)===ep(o):isNaN(a)&&isNaN(o)}return!1})(n,e);case 9:return r0(n.arrayValue.values||[],e.arrayValue.values||[],Go);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(rM(a)!==rM(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Go(a[l],o[l])))return!1;return!0})(n,e);default:return vt(52216,{left:n})}}function sp(n,e){return(n.values||[]).find((t=>Go(t,e)))!==void 0}function ru(n,e){if(n===e)return 0;const t=nu(n),r=nu(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=Hn(s.integerValue||s.doubleValue),l=Hn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(n,e);case 3:return sM(n.timestampValue,e.timestampValue);case 4:return sM(ip(n),ip(e));case 5:return vT(n.stringValue,e.stringValue);case 6:return(function(s,a){const o=Ml(s),l=Ml(a);return o.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const f=jt(o[u],l[u]);if(f!==0)return f}return jt(o.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=jt(Hn(s.latitude),Hn(a.latitude));return o!==0?o:jt(Hn(s.longitude),Hn(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return aM(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const o=s.fields||{},l=a.fields||{},u=o[l0]?.arrayValue,f=l[l0]?.arrayValue,d=jt(u?.values?.length||0,f?.values?.length||0);return d!==0?d:aM(u,f)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Vc.mapValue&&a===Vc.mapValue)return 0;if(s===Vc.mapValue)return 1;if(a===Vc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const g=vT(l[d],f[d]);if(g!==0)return g;const p=ru(o[l[d]],u[f[d]]);if(p!==0)return p}return jt(l.length,f.length)})(n.mapValue,e.mapValue);default:throw vt(23264,{he:t})}}function sM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return jt(n,e);const t=kl(n),r=kl(e),i=jt(t.seconds,r.seconds);return i!==0?i:jt(t.nanos,r.nanos)}function aM(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ru(t[i],r[i]);if(s)return s}return jt(t.length,r.length)}function c0(n){return IT(n)}function IT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=kl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ml(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ot.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=IT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${IT(t.fields[a])}`;return i+"}"})(n.mapValue):vt(61005,{value:n})}function Ty(n){switch(nu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qx(n);return e?16+Ty(e):16;case 5:return 2*n.stringValue.length;case 6:return Ml(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Ty(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return yu(r.fields,((s,a)=>{i+=s.length+Ty(a)})),i})(n.mapValue);default:throw vt(13486,{value:n})}}function ap(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AT(n){return!!n&&"integerValue"in n}function op(n){return!!n&&"arrayValue"in n}function oM(n){return!!n&&"nullValue"in n}function lM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Iy(n){return!!n&&"mapValue"in n}function Zx(n){return(n?.mapValue?.fields||{})[OA]?.stringValue===DA}function fm(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return yu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=fm(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fm(n.arrayValue.values[t]);return e}return{...n}}function iF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rF}const sF={mapValue:{fields:{[OA]:{stringValue:DA},[l0]:{arrayValue:{}}}}};function YY(n){return"nullValue"in n?Sy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ap(Fh.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Zx(n)?sF:{mapValue:{}}:vt(35942,{value:n})}function XY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ap(Fh.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?sF:"mapValue"in n?Zx(n)?{mapValue:{}}:Vc:vt(61959,{value:n})}function cM(n,e){const t=ru(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function uM(n,e){const t=ru(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Iy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fm(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=fm(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Iy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Go(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Iy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yu(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new bi(fm(this.value))}}function aF(n){const e=[];return yu(n.fields,((t,r)=>{const i=new er([t]);if(Iy(r)){const s=aF(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new ds(e)}class cr{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new cr(e,0,It.min(),It.min(),It.min(),bi.empty(),0)}static newFoundDocument(e,t,r,i){return new cr(e,1,t,It.min(),r,i,0)}static newNoDocument(e,t){return new cr(e,2,t,It.min(),It.min(),bi.empty(),0)}static newUnknownDocument(e,t){return new cr(e,3,t,It.min(),It.min(),bi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class u0{constructor(e,t){this.position=e,this.inclusive=t}}function hM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ot.comparator(ot.fromName(a.referenceValue),t.key):r=ru(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Go(n.position[t],e.position[t]))return!1;return!0}class vv{constructor(e,t="asc"){this.field=e,this.dir=t}}function qY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class oF{}class qt extends oF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ZY(e,t,r):t==="array-contains"?new eX(e,r):t==="in"?new dF(e,r):t==="not-in"?new tX(e,r):t==="array-contains-any"?new nX(e,r):new qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new QY(e,r):new JY(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ru(t,this.value)):t!==null&&nu(this.value)===nu(t)&&this.matchesComparison(ru(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends oF{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Cn(e,t)}matches(e){return h0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function h0(n){return n.op==="and"}function RT(n){return n.op==="or"}function FA(n){return lF(n)&&h0(n)}function lF(n){for(const e of n.filters)if(e instanceof Cn)return!1;return!0}function CT(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+c0(n.value);if(FA(n))return n.filters.map((e=>CT(e))).join(",");{const e=n.filters.map((t=>CT(t))).join(",");return`${n.op}(${e})`}}function cF(n,e){return n instanceof qt?(function(r,i){return i instanceof qt&&r.op===i.op&&r.field.isEqual(i.field)&&Go(r.value,i.value)})(n,e):n instanceof Cn?(function(r,i){return i instanceof Cn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,o)=>s&&cF(a,i.filters[o])),!0):!1})(n,e):void vt(19439)}function uF(n,e){const t=n.filters.concat(e);return Cn.create(t,n.op)}function hF(n){return n instanceof qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${c0(t.value)}`})(n):n instanceof Cn?(function(t){return t.op.toString()+" {"+t.getFilters().map(hF).join(" ,")+"}"})(n):"Filter"}class ZY extends qt{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class QY extends qt{constructor(e,t){super(e,"in",t),this.keys=fF("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class JY extends qt{constructor(e,t){super(e,"not-in",t),this.keys=fF("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fF(n,e){return(e.arrayValue?.values||[]).map((t=>ot.fromName(t.referenceValue)))}class eX extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return op(t)&&sp(t.arrayValue,this.value)}}class dF extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sp(this.value.arrayValue,t)}}class tX extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!sp(this.value.arrayValue,t)}}class nX extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>sp(this.value.arrayValue,r)))}}class rX{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function bT(n,e=null,t=[],r=[],i=null,s=null,a=null){return new rX(n,e,t,r,i,s,a)}function jh(n){const e=Vt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>CT(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Hx(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>c0(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>c0(r))).join(",")),e.Te=t}return e.Te}function Jp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fM(n.startAt,e.startAt)&&fM(n.endAt,e.endAt)}function xv(n){return ot.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ev(n,e){return n.filters.filter((t=>t instanceof qt&&t.field.isEqual(e)))}function dM(n,e,t){let r=Sy,i=!0;for(const s of Ev(n,e)){let a=Sy,o=!0;switch(s.op){case"<":case"<=":a=YY(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Sy}cM({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];cM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function gM(n,e,t){let r=Vc,i=!0;for(const s of Ev(n,e)){let a=Vc,o=!0;switch(s.op){case">=":case">":a=XY(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Vc}uM({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];uM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class e1{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iX(n,e,t,r,i,s,a,o){return new e1(n,e,t,r,i,s,a,o)}function jA(n){return new e1(n)}function mM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gF(n){return n.collectionGroup!==null}function dm(n){const e=Vt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Pn(er.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new vv(s,r))})),t.has(er.keyField().canonicalString())||e.Ie.push(new vv(er.keyField(),r))}return e.Ie}function _a(n){const e=Vt(n);return e.Ee||(e.Ee=sX(e,dm(n))),e.Ee}function sX(n,e){if(n.limitType==="F")return bT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new vv(i.field,s)}));const t=n.endAt?new u0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new u0(n.startAt.position,n.startAt.inclusive):null;return bT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function PT(n,e){const t=n.filters.concat([e]);return new e1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kT(n,e,t){return new e1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qx(n,e){return Jp(_a(n),_a(e))&&n.limitType===e.limitType}function mF(n){return`${jh(_a(n))}|lt:${n.limitType}`}function dd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>hF(i))).join(", ")}]`),Hx(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>c0(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>c0(i))).join(",")),`Target(${r})`})(_a(n))}; limitType=${n.limitType})`}function t1(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ot.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of dm(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,o,l){const u=hM(a,o,l);return a.inclusive?u<=0:u<0})(r.startAt,dm(r),i)||r.endAt&&!(function(a,o,l){const u=hM(a,o,l);return a.inclusive?u>=0:u>0})(r.endAt,dm(r),i))})(n,e)}function aX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pF(n){return(e,t)=>{let r=!1;for(const i of dm(n)){const s=oX(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oX(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):(function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?ru(l,u):vt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt(19790,{direction:n.dir})}}class Gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yu(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return Z5(this.inner)}size(){return this.innerSize}}const lX=new Kn(ot.comparator);function Us(){return lX}const _F=new Kn(ot.comparator);function Yg(...n){let e=_F;for(const t of n)e=e.insert(t.key,t);return e}function yF(n){let e=_F;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function bo(){return gm()}function vF(){return gm()}function gm(){return new Gl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const cX=new Kn(ot.comparator),uX=new Pn(ot.comparator);function Ht(...n){let e=uX;for(const t of n)e=e.add(t);return e}const hX=new Pn(jt);function fX(){return hX}function VA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ep(e)?"-0":e}}function xF(n){return{integerValue:""+n}}function dX(n,e){return vY(e)?xF(e):VA(n,e)}class Jx{constructor(){this._=void 0}}function gX(n,e,t){return n instanceof lp?(function(i,s){const a={fields:{[eF]:{stringValue:J5},[nF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&LA(s)&&(s=qx(s)),s&&(a.fields[tF]=s),{mapValue:a}})(t,e):n instanceof f0?wF(n,e):n instanceof d0?SF(n,e):(function(i,s){const a=EF(i,s),o=pM(a)+pM(i.Ae);return AT(a)&&AT(i.Ae)?xF(o):VA(i.serializer,o)})(n,e)}function mX(n,e,t){return n instanceof f0?wF(n,e):n instanceof d0?SF(n,e):t}function EF(n,e){return n instanceof cp?(function(r){return AT(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class lp extends Jx{}class f0 extends Jx{constructor(e){super(),this.elements=e}}function wF(n,e){const t=TF(e);for(const r of n.elements)t.some((i=>Go(i,r)))||t.push(r);return{arrayValue:{values:t}}}class d0 extends Jx{constructor(e){super(),this.elements=e}}function SF(n,e){let t=TF(e);for(const r of n.elements)t=t.filter((i=>!Go(i,r)));return{arrayValue:{values:t}}}class cp extends Jx{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function pM(n){return Hn(n.integerValue||n.doubleValue)}function TF(n){return op(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class pX{constructor(e,t){this.field=e,this.transform=t}}function _X(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof f0&&i instanceof f0||r instanceof d0&&i instanceof d0?r0(r.elements,i.elements,Go):r instanceof cp&&i instanceof cp?Go(r.Ae,i.Ae):r instanceof lp&&i instanceof lp})(n.transform,e.transform)}class yX{constructor(e,t){this.version=e,this.transformResults=t}}class Hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hi}static exists(e){return new Hi(void 0,e)}static updateTime(e){return new Hi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ay(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class eE{}function IF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tE(n.key,Hi.none()):new R0(n.key,n.data,Hi.none());{const t=n.data,r=bi.empty();let i=new Pn(er.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Bl(n.key,r,new ds(i.toArray()),Hi.none())}}function vX(n,e,t){n instanceof R0?(function(i,s,a){const o=i.value.clone(),l=yM(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Bl?(function(i,s,a){if(!Ay(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=yM(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(AF(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function mm(n,e,t,r){return n instanceof R0?(function(s,a,o,l){if(!Ay(s.precondition,a))return o;const u=s.value.clone(),f=vM(s.fieldTransforms,l,a);return u.setAll(f),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Bl?(function(s,a,o,l){if(!Ay(s.precondition,a))return o;const u=vM(s.fieldTransforms,l,a),f=a.data;return f.setAll(AF(s)),f.setAll(u),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(n,e,t,r):(function(s,a,o){return Ay(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(n,e,t)}function xX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=EF(r.transform,i||null);s!=null&&(t===null&&(t=bi.empty()),t.set(r.field,s))}return t||null}function _M(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&r0(r,i,((s,a)=>_X(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class R0 extends eE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bl extends eE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function AF(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function yM(n,e,t){const r=new Map;Tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,mX(a,o,t[i]))}return r}function vM(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,gX(s,a,e))}return r}class tE extends eE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RF extends eE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&vX(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=mm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=mm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vF();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=IF(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(It.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ht())}isEqual(e){return this.batchId===e.batchId&&r0(this.mutations,e.mutations,((t,r)=>_M(t,r)))&&r0(this.baseMutations,e.baseMutations,((t,r)=>_M(t,r)))}}class BA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return cX})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new BA(e,t,r,i)}}class UA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class EX{constructor(e,t){this.count=e,this.unchangedNames=t}}var wr,tn;function wX(n){switch(n){case ke.OK:return vt(64938);case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0;default:return vt(15467,{code:n})}}function CF(n){if(n===void 0)return $i("GRPC error has no .code"),ke.UNKNOWN;switch(n){case wr.OK:return ke.OK;case wr.CANCELLED:return ke.CANCELLED;case wr.UNKNOWN:return ke.UNKNOWN;case wr.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case wr.INTERNAL:return ke.INTERNAL;case wr.UNAVAILABLE:return ke.UNAVAILABLE;case wr.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case wr.NOT_FOUND:return ke.NOT_FOUND;case wr.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case wr.ABORTED:return ke.ABORTED;case wr.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case wr.DATA_LOSS:return ke.DATA_LOSS;default:return vt(39323,{code:n})}}(tn=wr||(wr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";function SX(){return new TextEncoder}const TX=new Kc([4294967295,4294967295],0);function xM(n){const e=SX().encode(n),t=new A5;return t.update(e),new Uint8Array(t.digest())}function EM(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Kc([t,r],0),new Kc([i,s],0)]}class zA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xg(`Invalid padding: ${t}`);if(r<0)throw new Xg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Kc.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Kc.fromNumber(r)));return i.compare(TX)===1&&(i=new Kc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=xM(e),[r,i]=EM(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new zA(s,i,t);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=xM(e),[r,i]=EM(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Xg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,n1.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nE(It.min(),i,new Kn(jt),Us(),Ht())}}class n1{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n1(r,t,Ht(),Ht(),Ht())}}class Ry{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class bF{constructor(e,t){this.targetId=e,this.Ce=t}}class PF{constructor(e,t,r=Ar.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class wM{constructor(){this.ve=0,this.Fe=SM(),this.Me=Ar.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ht(),t=Ht(),r=Ht();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:vt(38017,{changeType:s})}})),new n1(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=SM()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IX{constructor(e){this.Ge=e,this.ze=new Map,this.je=Us(),this.Je=z_(),this.He=z_(),this.Ye=new Kn(jt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:vt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(xv(s))if(r===0){const a=new ot(s.path);this.et(t,a,cr.newNoDocument(a,It.min()))}else Tt(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=Ml(r).toUint8Array()}catch(l){if(l instanceof Q5)return Dh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new zA(a,i,s)}catch(l){return Dh(l instanceof Xg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&xv(o.target)){const l=new ot(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,cr.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=Ht();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new nE(e,t,this.Ye,this.je,r);return this.je=Us(),this.Je=z_(),this.He=z_(),this.Ye=new Kn(jt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new wM,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pn(jt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pn(jt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wM),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function z_(){return new Kn(ot.comparator)}function SM(){return new Kn(ot.comparator)}const AX={asc:"ASCENDING",desc:"DESCENDING"},RX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CX={and:"AND",or:"OR"};class bX{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function MT(n,e){return n.useProto3Json||Hx(e)?e:{value:e}}function g0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PX(n,e){return g0(n,e.toTimestamp())}function Yi(n){return Tt(!!n,49232),It.fromTimestamp((function(t){const r=kl(t);return new Rn(r.seconds,r.nanos)})(n))}function $A(n,e){return NT(n,e).canonicalString()}function NT(n,e){const t=(function(i){return new mn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function MF(n){const e=mn.fromString(n);return Tt(BF(e),10190,{key:e.toString()}),e}function wv(n,e){return $A(n.databaseId,e.path)}function Eh(n,e){const t=MF(e);if(t.get(1)!==n.databaseId.projectId)throw new st(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new st(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(OF(t))}function NF(n,e){return $A(n.databaseId,e)}function LF(n){const e=MF(n);return e.length===4?mn.emptyPath():OF(e)}function LT(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OF(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function TM(n,e,t){return{name:wv(n,e),fields:t.value.mapValue.fields}}function kX(n,e,t){const r=Eh(n,e.name),i=Yi(e.updateTime),s=e.createTime?Yi(e.createTime):It.min(),a=new bi({mapValue:{fields:e.fields}}),o=cr.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function MX(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:vt(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,f){return u.useProto3Json?(Tt(f===void 0||typeof f=="string",58123),Ar.fromBase64String(f||"")):(Tt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ar.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(u){const f=u.code===void 0?ke.UNKNOWN:CF(u.code);return new st(f,u.message||"")})(a);t=new PF(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Eh(n,r.document.name),s=Yi(r.document.updateTime),a=r.document.createTime?Yi(r.document.createTime):It.min(),o=new bi({mapValue:{fields:r.document.fields}}),l=cr.newFoundDocument(i,s,a,o),u=r.targetIds||[],f=r.removedTargetIds||[];t=new Ry(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Eh(n,r.document),s=r.readTime?Yi(r.readTime):It.min(),a=cr.newNoDocument(i,s),o=r.removedTargetIds||[];t=new Ry([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Eh(n,r.document),s=r.removedTargetIds||[];t=new Ry([],s,i,null)}else{if(!("filter"in e))return vt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new EX(i,s),o=r.targetId;t=new bF(o,a)}}return t}function Sv(n,e){let t;if(e instanceof R0)t={update:TM(n,e.key,e.value)};else if(e instanceof tE)t={delete:wv(n,e.key)};else if(e instanceof Bl)t={update:TM(n,e.key,e.data),updateMask:jX(e.fieldMask)};else{if(!(e instanceof RF))return vt(16599,{Vt:e.type});t={verify:wv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const o=a.transform;if(o instanceof lp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof f0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof d0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof cp)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw vt(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:PX(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:vt(27497)})(n,e.precondition)),t}function OT(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Hi.updateTime(Yi(s.updateTime)):s.exists!==void 0?Hi.exists(s.exists):Hi.none()})(e.currentDocument):Hi.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)Tt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new lp;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];l=new f0(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];l=new d0(f)}else"increment"in o?l=new cp(a,o.increment):vt(16584,{proto:o});const u=er.fromServerFormat(o.fieldPath);return new pX(u,l)})(n,i))):[];if(e.update){e.update.name;const i=Eh(n,e.update.name),s=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const u=l.fieldPaths||[];return new ds(u.map((f=>er.fromServerFormat(f))))})(e.updateMask);return new Bl(i,s,a,t,r)}return new R0(i,s,t,r)}if(e.delete){const i=Eh(n,e.delete);return new tE(i,t)}if(e.verify){const i=Eh(n,e.verify);return new RF(i,t)}return vt(1463,{proto:e})}function NX(n,e){return n&&n.length>0?(Tt(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Yi(i.updateTime):Yi(s);return a.isEqual(It.min())&&(a=Yi(s)),new yX(a,i.transformResults||[])})(t,e)))):[]}function DF(n,e){return{documents:[NF(n,e.path)]}}function FF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NF(n,i);const s=(function(u){if(u.length!==0)return GF(Cn.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:gd(g.field),direction:OX(g.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=MT(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function jF(n){let e=LF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(r===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=(function(d){const g=VF(d);return g instanceof Cn&&FA(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(d){return d.map((g=>(function(E){return new vv(md(E.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(g)))})(t.orderBy));let o=null;t.limit&&(o=(function(d){let g;return g=typeof d=="object"?d.value:d,Hx(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(d){const g=!!d.before,p=d.values||[];return new u0(p,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(d){const g=!d.before,p=d.values||[];return new u0(p,g)})(t.endAt)),iX(e,i,a,s,o,"F",l,u)}function LX(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=md(t.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=md(t.unaryFilter.field);return qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=md(t.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=md(t.unaryFilter.field);return qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return qt.create(md(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Cn.create(t.compositeFilter.filters.map((r=>VF(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt(1026)}})(t.compositeFilter.op))})(n):vt(30097,{filter:n})}function OX(n){return AX[n]}function DX(n){return RX[n]}function FX(n){return CX[n]}function gd(n){return{fieldPath:n.canonicalString()}}function md(n){return er.fromServerFormat(n.fieldPath)}function GF(n){return n instanceof qt?(function(t){if(t.op==="=="){if(lM(t.value))return{unaryFilter:{field:gd(t.field),op:"IS_NAN"}};if(oM(t.value))return{unaryFilter:{field:gd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lM(t.value))return{unaryFilter:{field:gd(t.field),op:"IS_NOT_NAN"}};if(oM(t.value))return{unaryFilter:{field:gd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gd(t.field),op:DX(t.op),value:t.value}}})(n):n instanceof Cn?(function(t){const r=t.getFilters().map((i=>GF(i)));return r.length===1?r[0]:{compositeFilter:{op:FX(t.op),filters:r}}})(n):vt(54877,{filter:n})}function jX(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class fl{constructor(e,t,r,i,s=It.min(),a=It.min(),o=Ar.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class UF{constructor(e){this.yt=e}}function VX(n,e){let t;if(e.document)t=kX(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ot.fromSegments(e.noDocument.path),i=Gh(e.noDocument.readTime);t=cr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return vt(56709);{const r=ot.fromSegments(e.unknownDocument.path),i=Gh(e.unknownDocument.version);t=cr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new Rn(i[0],i[1]);return It.fromTimestamp(s)})(e.readTime)),t}function IM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Tv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:wv(s,a.key),fields:a.data.value.mapValue.fields,updateTime:g0(s,a.version.toTimestamp()),createTime:g0(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vh(e.version)};else{if(!e.isUnknownDocument())return vt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Vh(e.version)}}return r}function Tv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gh(n){const e=new Rn(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function sh(n,e){const t=(e.baseMutations||[]).map((s=>OT(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>OT(n.yt,s))),i=Rn.fromMillis(e.localWriteTimeMs);return new GA(e.batchId,i,t,r)}function qg(n){const e=Gh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Gh(n.lastLimboFreeSnapshotVersion):It.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return Tt(a===1,1966,{count:a}),_a(jA(LF(s.documents[0])))})(n.query):(function(s){return _a(jF(s))})(n.query),new fl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ar.fromBase64String(n.resumeToken))}function zF(n,e){const t=Vh(e.snapshotVersion),r=Vh(e.lastLimboFreeSnapshotVersion);let i;i=xv(e.target)?DF(n.yt,e.target):FF(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jh(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $F(n){const e=jF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kT(e,e.limit,"L"):e}function q2(n,e){return new UA(e.largestBatchId,OT(n.yt,e.overlayMutation))}function AM(n,e){const t=e.path.lastSegment();return[n,ki(e.path.popLast()),t]}function RM(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Vh(r.readTime),documentKey:ki(r.documentKey.path),largestBatchId:r.largestBatchId}}class GX{getBundleMetadata(e,t){return CM(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Gh(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return CM(e).put((function(i){return{bundleId:i.id,createTime:Vh(Yi(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return bM(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:$F(s.bundledQuery),readTime:Gh(s.readTime)}})(r)}))}saveNamedQuery(e,t){return bM(e).put((function(i){return{name:i.name,readTime:Vh(Yi(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function CM(n){return Vr(n,Kx)}function bM(n){return Vr(n,Yx)}class rE{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new rE(e,r)}getOverlay(e,t){return Ng(e).get(AM(this.userId,t)).next((r=>r?q2(this.serializer,r):null))}getOverlays(e,t){const r=bo();return he.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const o=new UA(t,a);i.push(this.St(e,o))})),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(ki(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Ng(e).Z(ST,o))})),he.waitFor(s)}getOverlaysForCollection(e,t,r){const i=bo(),s=ki(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ng(e).J(ST,a).next((o=>{for(const l of o){const u=q2(this.serializer,l);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=bo();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ng(e).ee({index:H5,range:o},((l,u,f)=>{const d=q2(this.serializer,u);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):f.done()})).next((()=>s))}St(e,t){return Ng(e).put((function(i,s,a){const[o,l,u]=AM(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Sv(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Ng(n){return Vr(n,Xx)}class BX{bt(e){return Vr(e,MA)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Ar.fromUint8Array(r):Ar.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ah{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ep(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=kl(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ml(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?iF(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Zx(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):vt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=l0,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Hn(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ot.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ah.Kt=new ah;const Jf=255;function UX(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function PM(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=UX(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class zX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=PM(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=PM(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Jf),this.sn(255)}_n(){this.an(Jf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Jf?(this.sn(Jf),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Jf?(this.an(Jf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $X{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class WX{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Lg{constructor(){this.cn=new zX,this.ln=new $X(this.cn),this.hn=new WX(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class oh{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new oh(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Cy(this.En),directionalValue:Cy(this.dn),orderedDocumentKey:Cy(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function yc(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=kM(n.En,e.En),t!==0?t:(t=kM(n.dn,e.dn),t!==0?t:ot.comparator(n.In,e.In)))}function kM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Cy(n){return v5()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function MM(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class NM{constructor(e){this.mn=new Pn(((t,r)=>er.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Tt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=xT(e);if(t!==void 0&&!this.wn(t))return!1;const r=Qu(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Pn(er.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new xy(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new xy(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new xy(r.field,r.dir==="asc"?0:1)));return new gv(gv.UNKNOWN_ID,this.collectionId,t,Jm.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function WF(n){if(Tt(n instanceof qt||n instanceof Cn,20012),n instanceof qt){if(n instanceof dF){const t=n.value.arrayValue?.values?.map((r=>qt.create(n.field,"==",r)))||[];return Cn.create(t,"or")}return n}const e=n.filters.map((t=>WF(t)));return Cn.create(e,n.op)}function HX(n){if(n.getFilters().length===0)return[];const e=jT(WF(n));return Tt(HF(e),7391),DT(e)||FT(e)?[e]:e.getFilters()}function DT(n){return n instanceof qt}function FT(n){return n instanceof Cn&&FA(n)}function HF(n){return DT(n)||FT(n)||(function(t){if(t instanceof Cn&&RT(t)){for(const r of t.getFilters())if(!DT(r)&&!FT(r))return!1;return!0}return!1})(n)}function jT(n){if(Tt(n instanceof qt||n instanceof Cn,34018),n instanceof qt)return n;if(n.filters.length===1)return jT(n.filters[0]);const e=n.filters.map((r=>jT(r)));let t=Cn.create(e,n.op);return t=Iv(t),HF(t)?t:(Tt(t instanceof Cn,64498),Tt(h0(t),40251),Tt(t.filters.length>1,57927),t.filters.reduce(((r,i)=>WA(r,i))))}function WA(n,e){let t;return Tt(n instanceof qt||n instanceof Cn,38388),Tt(e instanceof qt||e instanceof Cn,25473),t=n instanceof qt?e instanceof qt?(function(i,s){return Cn.create([i,s],"and")})(n,e):LM(n,e):e instanceof qt?LM(e,n):(function(i,s){if(Tt(i.filters.length>0&&s.filters.length>0,48005),h0(i)&&h0(s))return uF(i,s.getFilters());const a=RT(i)?i:s,o=RT(i)?s:i,l=a.filters.map((u=>WA(u,o)));return Cn.create(l,"or")})(n,e),Iv(t)}function LM(n,e){if(h0(e))return uF(e,n.getFilters());{const t=e.filters.map((r=>WA(n,r)));return Cn.create(t,"or")}}function Iv(n){if(Tt(n instanceof qt||n instanceof Cn,11850),n instanceof qt)return n;const e=n.getFilters();if(e.length===1)return Iv(e[0]);if(lF(n))return n;const t=e.map((i=>Iv(i))),r=[];return t.forEach((i=>{i instanceof qt?r.push(i):i instanceof Cn&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Cn.create(r,n.op)}class KX{constructor(){this.Cn=new HA}addToCollectionParentIndex(e,t){return this.Cn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Hs.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class HA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(mn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(mn.comparator)).toArray()}}const OM="IndexedDbIndexManager",$_=new Uint8Array(0);class YX{constructor(e,t){this.databaseId=t,this.vn=new HA,this.Fn=new Gl((r=>jh(r)),((r,i)=>Jp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:ki(i)};return DM(e).put(s)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[L5(t),""],!1,!0);return DM(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Co(a.parent))}return r}))}addFieldIndex(e,t){const r=Og(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=td(e);return s.next((o=>{a.put(RM(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Og(e),i=td(e),s=ed(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Og(e),r=ed(e),i=td(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return he.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new NM(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=ed(e);let i=!0;const s=new Map;return he.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=Ht();const o=[];return he.forEach(s,((l,u)=>{Ye(OM,`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(l)} to execute ${jh(t)}`);const f=(function(k,N){const O=xT(N);if(O===void 0)return null;for(const B of Ev(k,O.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null})(u,l),d=(function(k,N){const O=new Map;for(const B of Qu(N))for(const P of Ev(k,B.fieldPath))switch(P.op){case"==":case"in":O.set(B.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return O.set(B.fieldPath.canonicalString(),P.value),Array.from(O.values())}return null})(u,l),g=(function(k,N){const O=[];let B=!0;for(const P of Qu(N)){const b=P.kind===0?dM(k,P.fieldPath,k.startAt):gM(k,P.fieldPath,k.startAt);O.push(b.value),B&&(B=b.inclusive)}return new u0(O,B)})(u,l),p=(function(k,N){const O=[];let B=!0;for(const P of Qu(N)){const b=P.kind===0?gM(k,P.fieldPath,k.endAt):dM(k,P.fieldPath,k.endAt);O.push(b.value),B&&(B=b.inclusive)}return new u0(O,B)})(u,l),E=this.On(l,u,g),v=this.On(l,u,p),w=this.Nn(l,u,d),T=this.Bn(l.indexId,f,E,g.inclusive,v,p.inclusive,w);return he.forEach(T,(R=>r.Y(R,t.limit).next((k=>{k.forEach((N=>{const O=ot.fromSegments(N.documentKey);a.has(O)||(a=a.add(O),o.push(O))}))}))))})).next((()=>o))}return he.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=HX(Cn.create(e.filters,"and")).map((r=>bT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),f=[];for(let d=0;d<l;++d){const g=t?this.Ln(t[d/u]):$_,p=this.kn(e,g,r[d%u],i),E=this.qn(e,g,s[d%u],a),v=o.map((w=>this.kn(e,g,w,!0)));f.push(...this.createRange(p,E,v))}return f}kn(e,t,r,i){const s=new oh(e,ot.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new oh(e,ot.empty(),t,r);return i?s.An():s}xn(e,t){const r=new NM(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return he.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(l){let u=new Pn(er.comparator),f=!1;for(const d of l.filters)for(const g of d.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(f?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Lg;for(const i of Qu(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);ah.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Lg;return ah.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Lg;return ah.Kt.Dt(ap(this.databaseId,t),r.Pn((function(s){const a=Qu(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Lg);let s=0;for(const a of Qu(e)){const o=r[s++];for(const l of i)if(this.Un(t,a.fieldPath)&&op(o))i=this.Kn(i,a,o);else{const u=l.Pn(a.kind);ah.Kt.Dt(o,u)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Lg;l.seed(o.un()),ah.Kt.Dt(a,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof qt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Og(e),i=td(e);return(t?r.J(wT,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return he.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(f,d){const g=d?new Jm(d.sequenceNumber,new Hs(Gh(d.readTime),new ot(Co(d.documentKey)),d.largestBatchId)):Jm.empty(),p=f.fields.map((([E,v])=>new xy(er.fromServerFormat(E),v)));return new gv(f.indexId,f.collectionGroup,p,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:jt(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Og(e),s=td(e);return this.Gn(e).next((a=>i.J(wT,IDBKeyRange.bound(t,t)).next((o=>he.forEach(o,(l=>s.put(RM(l.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?he.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),he.forEach(o,(l=>this.zn(e,i,l).next((u=>{const f=this.jn(s,l);return u.isEqual(f)?he.resolve():this.Jn(e,s,l,u,f)})))))))}))}Hn(e,t,r,i){return ed(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return ed(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=ed(e);let s=new Pn(yc);return i.ee({index:W5,range:IDBKeyRange.only([r.indexId,this.uid,Cy(this.$n(r,t))])},((a,o)=>{s=s.add(new oh(r.indexId,t,MM(o.arrayValue),MM(o.directionalValue)))})).next((()=>s))}jn(e,t){let r=new Pn(yc);const i=this.Qn(t,e);if(i==null)return r;const s=xT(t);if(s!=null){const a=e.data.field(s.fieldPath);if(op(a))for(const o of a.arrayValue.values||[])r=r.add(new oh(t.indexId,e.key,this.Ln(o),i))}else r=r.add(new oh(t.indexId,e.key,$_,i));return r}Jn(e,t,r,i,s){Ye(OM,"Updating index entries for document '%s'",t.key);const a=[];return(function(l,u,f,d,g){const p=l.getIterator(),E=u.getIterator();let v=Qf(p),w=Qf(E);for(;v||w;){let T=!1,R=!1;if(v&&w){const k=f(v,w);k<0?R=!0:k>0&&(T=!0)}else v!=null?R=!0:T=!0;T?(d(w),w=Qf(E)):R?(g(v),v=Qf(p)):(v=Qf(p),w=Qf(E))}})(i,s,yc,(o=>{a.push(this.Hn(e,t,r,o))}),(o=>{a.push(this.Yn(e,t,r,o))})),he.waitFor(a)}Gn(e){let t=1;return td(e).ee({index:$5,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,o)=>yc(a,o))).filter(((a,o,l)=>!o||yc(a,l[o-1])!==0));const i=[];i.push(e);for(const a of r){const o=yc(a,e),l=yc(a,t);if(o===0)i[0]=e.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,$_,ot.empty()),l=i[a+1].Vn(this.uid,$_,ot.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,t){return yc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(FM)}getMinOffset(e,t){return he.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||vt(44426))))).next(FM)}}function DM(n){return Vr(n,rp)}function ed(n){return Vr(n,hm)}function Og(n){return Vr(n,kA)}function td(n){return Vr(n,um)}function FM(n){Tt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;CA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Hs(e.readTime,e.documentKey,t)}const jM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KF=41943040;class Ri{static withCacheSize(e){return new Ri(e,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function YF(n,e,t){const r=n.store(ja),i=n.store(i0),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.ee({range:a},((f,d,g)=>(o++,g.delete())));s.push(l.next((()=>{Tt(o===1,47070,{batchId:t.batchId})})));const u=[];for(const f of t.mutations){const d=B5(e,f.key.path,t.batchId);s.push(i.delete(d)),u.push(f.key)}return he.waitFor(s).next((()=>u))}function Av(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw vt(14731);e=n.noDocument}return JSON.stringify(e).length}Ri.DEFAULT_COLLECTION_PERCENTILE=10,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ri.DEFAULT=new Ri(KF,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ri.DISABLED=new Ri(-1,0,0);class iE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Tt(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new iE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vc(e).ee({index:dh,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=pd(e),a=vc(e);return a.add({}).next((o=>{Tt(typeof o=="number",49019);const l=new GA(o,t,r,i),u=(function(p,E,v){const w=v.baseMutations.map((R=>Sv(p.yt,R))),T=v.mutations.map((R=>Sv(p.yt,R)));return{userId:E,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:w,mutations:T}})(this.serializer,this.userId,l),f=[];let d=new Pn(((g,p)=>jt(g.canonicalString(),p.canonicalString())));for(const g of i){const p=B5(this.userId,g.key.path,o);d=d.add(g.key.path.popLast()),f.push(a.put(u)),f.push(s.put(p,wY))}return d.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=l.keys()})),he.waitFor(f).next((()=>l))}))}lookupMutationBatch(e,t){return vc(e).get(t).next((r=>r?(Tt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),sh(this.serializer,r)):null))}er(e,t){return this.Xn[t]?he.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return vc(e).ee({index:dh,range:i},((a,o,l)=>{o.userId===this.userId&&(Tt(o.batchId>=r,47524,{tr:r}),s=sh(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=vh;return vc(e).ee({index:dh,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vh],[this.userId,Number.POSITIVE_INFINITY]);return vc(e).J(dh,t).next((r=>r.map((i=>sh(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ey(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return pd(e).ee({range:i},((a,o,l)=>{const[u,f,d]=a,g=Co(f);if(u===this.userId&&t.path.isEqual(g))return vc(e).get(d).next((p=>{if(!p)throw vt(61480,{nr:a,batchId:d});Tt(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(sh(this.serializer,p))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(jt);const i=[];return t.forEach((s=>{const a=Ey(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=pd(e).ee({range:o},((u,f,d)=>{const[g,p,E]=u,v=Co(p);g===this.userId&&s.path.isEqual(v)?r=r.add(E):d.done()}));i.push(l)})),he.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Ey(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Pn(jt);return pd(e).ee({range:a},((l,u,f)=>{const[d,g,p]=l,E=Co(g);d===this.userId&&r.isPrefixOf(E)?E.length===i&&(o=o.add(p)):f.done()})).next((()=>this.rr(e,o)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(vc(e).get(s).next((a=>{if(a===null)throw vt(35274,{batchId:s});Tt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(sh(this.serializer,a))})))})),he.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return YF(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),he.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return pd(e).ee({range:r},((s,a,o)=>{if(s[0]===this.userId){const l=Co(s[1]);i.push(l)}else o.done()})).next((()=>{Tt(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return XF(e,this.userId,t)}_r(e){return qF(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:vh,lastStreamToken:""}))}}function XF(n,e,t){const r=Ey(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return pd(n).ee({range:s,X:!0},((o,l,u)=>{const[f,d,g]=o;f===e&&d===i&&(a=!0),u.done()})).next((()=>a))}function vc(n){return Vr(n,ja)}function pd(n){return Vr(n,i0)}function qF(n){return Vr(n,tp)}class Bh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bh(0)}static cr(){return new Bh(-1)}}class XX{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Bh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>It.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>nd(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Tt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return nd(e).ee(((a,o)=>{const l=qg(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>he.waitFor(s))).next((()=>i))}forEachTarget(e,t){return nd(e).ee(((r,i)=>{const s=qg(i);t(s)}))}lr(e){return VM(e).get(_v).next((t=>(Tt(t!==null,2888),t)))}hr(e,t){return VM(e).put(_v,t)}Pr(e,t){return nd(e).put(zF(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=jh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return nd(e).ee({range:i,index:z5},((a,o,l)=>{const u=qg(o);Jp(t,u.target)&&(s=u,l.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Cc(e);return t.forEach((a=>{const o=ki(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))})),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=Cc(e);return he.forEach(t,(s=>{const a=ki(s.path);return he.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Cc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Cc(e);let s=Ht();return i.ee({range:r,X:!0},((a,o,l)=>{const u=Co(a[1]),f=new ot(u);s=s.add(f)})).next((()=>s))}containsKey(e,t){const r=ki(t.path),i=IDBKeyRange.bound([r],[L5(r)],!1,!0);let s=0;return Cc(e).ee({index:PA,X:!0,range:i},(([a,o],l,u)=>{a!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return nd(e).get(t).next((r=>r?qg(r):null))}}function nd(n){return Vr(n,s0)}function VM(n){return Vr(n,xh)}function Cc(n){return Vr(n,a0)}const GM="LruGarbageCollector",qX=1048576;function BM([n,e],[t,r]){const i=jt(n,t);return i===0?jt(e,r):i}class ZX{constructor(e){this.Ir=e,this.buffer=new Pn(BM),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();BM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ye(GM,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_u(t)?Ye(GM,"Ignoring IndexedDB error during garbage collection: ",t):await rf(t)}await this.Vr(3e5)}))}}class QX{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return he.resolve(ma.ce);const r=new ZX(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ye("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(jM)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jM):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,o,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(Ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i)))).next((d=>(r=d,o=Date.now(),this.removeTargets(e,r,t)))).next((d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),fd()<=Xt.DEBUG&&Ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function QF(n,e){return new QX(n,e)}class JX{constructor(e,t){this.db=e,this.garbageCollector=QF(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return W_(e,r)}removeReference(e,t,r){return W_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return W_(e,t)}br(e,t){return(function(i,s){let a=!1;return qF(i).te((o=>XF(i,o,s).next((l=>(l&&(a=!0),he.resolve(!l)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const l=this.br(e,a).next((u=>{if(!u)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,It.min()),Cc(e).delete((function(d){return[0,ki(d.path)]})(a)))))}));i.push(l)}})).next((()=>he.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return W_(e,t)}Sr(e,t){const r=Cc(e);let i,s=ma.ce;return r.ee({index:PA},(([a,o],{path:l,sequenceNumber:u})=>{a===0?(s!==ma.ce&&t(new ot(Co(i)),s),s=u,i=l):s=ma.ce})).next((()=>{s!==ma.ce&&t(new ot(Co(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function W_(n,e){return Cc(n).put((function(r,i){return{targetId:0,path:ki(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class JF{constructor(){this.changes=new Gl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wu(e).put(r)}removeEntry(e,t,r){return Wu(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Tv(a),o[o.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=cr.newInvalidDocument(t);return Wu(e).ee({index:wy,range:IDBKeyRange.only(Dg(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:cr.newInvalidDocument(t)};return Wu(e).ee({index:wy,range:IDBKeyRange.only(Dg(t))},((i,s)=>{r={document:this.Cr(t,s),size:Av(s)}})).next((()=>r))}getEntries(e,t){let r=Us();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=Us(),i=new Kn(ot.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,Av(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return he.resolve();let i=new Pn($M);t.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(Dg(i.first()),Dg(i.last())),a=i.getIterator();let o=a.getNext();return Wu(e).ee({index:wy,range:s},((l,u,f)=>{const d=ot.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&$M(o,d)<0;)r(o,null),o=a.getNext();o&&o.isEqual(d)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?f.j(Dg(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Tv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wu(e).J(IDBKeyRange.bound(o,l,!0)).next((u=>{s?.incrementDocumentReadCount(u.length);let f=Us();for(const d of u){const g=this.Cr(ot.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);g.isFoundDocument()&&(t1(t,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,t,r,i){let s=Us();const a=zM(t,r),o=zM(t,Hs.max());return Wu(e).ee({index:U5,range:IDBKeyRange.bound(a,o,!0)},((l,u,f)=>{const d=this.Cr(ot.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&f.done()})).next((()=>s))}newChangeBuffer(e){return new tq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return UM(e).get(ET).next((t=>(Tt(!!t,20021),t)))}Dr(e,t){return UM(e).put(ET,t)}Cr(e,t){if(t){const r=VX(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(It.min())))return r}return cr.newInvalidDocument(e)}}function e6(n){return new eq(n)}class tq extends JF{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Gl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new Pn(((s,a)=>jt(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=IM(this.Nr.serializer,a);i=i.add(s.path.popLast());const u=Av(l);r+=u-o.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=IM(this.Nr.serializer,a.convertToNoDocument(It.min()));t.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function UM(n){return Vr(n,np)}function Wu(n){return Vr(n,pv)}function Dg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zM(n,e){const t=e.documentKey.path.toArray();return[n,Tv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $M(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=jt(t[s],r[s]),i)return i;return i=jt(t.length,r.length),i||(i=jt(t[t.length-2],r[r.length-2]),i||jt(t[t.length-1],r[r.length-1]))}class nq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class t6{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&mm(r.mutation,i,ds.empty(),Rn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ht()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ht()){const i=bo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Yg();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=bo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ht())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,r,i){let s=Us();const a=gm(),o=(function(){return gm()})();return t.forEach(((l,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Bl)?s=s.insert(u.key,u):f!==void 0?(a.set(u.key,f.mutation.getFieldMask()),mm(f.mutation,u,f.mutation.getFieldMask(),Rn.now())):a.set(u.key,ds.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,f)=>a.set(u,f))),t.forEach(((u,f)=>o.set(u,new nq(f,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=gm();let i=new Kn(((a,o)=>a-o)),s=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let f=r.get(l)||ds.empty();f=o.applyToLocalView(u,f),r.set(l,f);const d=(i.get(o.batchId)||Ht()).add(l);i=i.insert(o.batchId,d)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,f=l.value,d=vF();f.forEach((g=>{if(!s.has(g)){const p=IF(t.get(g),r.get(g));p!==null&&d.set(g,p),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return he.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ot.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):he.resolve(bo());let o=Qm,l=s;return a.next((u=>he.forEach(u,((f,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(f)?he.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,Ht()))).next((f=>({batchId:o,changes:yF(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next((r=>{let i=Yg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Yg();return this.indexManager.getCollectionParents(e,s).next((o=>he.forEach(o,(l=>{const u=(function(d,g){return new e1(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((d,g)=>{a=a.insert(d,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((l,u)=>{const f=u.getKey();a.get(f)===null&&(a=a.insert(f,cr.newInvalidDocument(f)))}));let o=Yg();return a.forEach(((l,u)=>{const f=s.get(l);f!==void 0&&mm(f.mutation,u,ds.empty(),Rn.now()),t1(t,u)&&(o=o.insert(l,u))})),o}))}}class rq{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return he.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Yi(i.createTime)}})(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:$F(i.bundledQuery),readTime:Yi(i.readTime)}})(t)),he.resolve()}}class iq{constructor(){this.overlays=new Kn(ot.comparator),this.qr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bo();return he.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=bo(),s=t.length+1,a=new ot(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Kn(((u,f)=>u-f));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);f===null&&(f=bo(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=bo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return he.resolve(o)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new UA(t,r));let s=this.qr.get(t);s===void 0&&(s=Ht(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class sq{constructor(){this.sessionToken=Ar.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}class KA{constructor(){this.Qr=new Pn(Hr.$r),this.Ur=new Pn(Hr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Hr(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Hr(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ot(new mn([])),r=new Hr(t,e),i=new Hr(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ot(new mn([])),r=new Hr(t,e),i=new Hr(t,e+1);let s=Ht();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new Hr(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Hr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ot.comparator(e.key,t.key)||jt(e.Yr,t.Yr)}static Kr(e,t){return jt(e.Yr,t.Yr)||ot.comparator(e.key,t.key)}}class aq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pn(Hr.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new GA(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Hr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return he.resolve(a)}lookupMutationBatch(e,t){return he.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?vh:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Hr(t,0),i=new Hr(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(jt);return t.forEach((i=>{const s=new Hr(i,0),a=new Hr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{r=r.add(o.Yr)}))})),he.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ot.isDocumentKey(s)||(s=s.child(""));const a=new Hr(new ot(s),0);let o=new Pn(jt);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)}),a),he.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return he.forEach(t.mutations,(i=>{const s=new Hr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Hr(t,0),i=this.Zr.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oq{constructor(e){this.ri=e,this.docs=(function(){return new Kn(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():cr.newInvalidDocument(t))}getEntries(e,t){let r=Us();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():cr.newInvalidDocument(i))})),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Us();const a=t.path,o=new ot(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||CA(F5(f),r)<=0||(i.has(f.key)||t1(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(e,t,r,i){vt(9500)}ii(e,t){return he.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new lq(this)}getSize(e){return he.resolve(this.size)}}class lq extends JF{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),he.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class cq{constructor(e){this.persistence=e,this.si=new Gl((t=>jh(t)),Jp),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.oi=0,this._i=new KA,this.targetCount=0,this.ai=Bh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),he.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Pr(t),he.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),he.waitFor(s).next((()=>i))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),he.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this._i.containsKey(t))}}class YA{constructor(e,t){this.ui={},this.overlays={},this.ci=new ma(0),this.li=!1,this.li=!0,this.hi=new sq,this.referenceDelegate=e(this),this.Pi=new cq(this),this.indexManager=new KX,this.remoteDocumentCache=(function(i){return new oq(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new UF(t),this.Ii=new rq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new aq(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ye("MemoryPersistence","Starting transaction:",e);const i=new uq(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return he.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class uq extends V5{constructor(e){super(),this.currentSequenceNumber=e}}class sE{constructor(e){this.persistence=e,this.Ri=new KA,this.Vi=null}static mi(e){return new sE(e)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(r=>{const i=ot.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,It.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return he.or([()=>he.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Rv{constructor(e,t){this.persistence=e,this.pi=new Gl((r=>ki(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=QF(this,t)}static mi(e,t){return new Rv(e,t)}Ei(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return he.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?he.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(r++,s.removeEntry(a,It.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ty(e.data.value)),t}br(e,t,r){return he.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return he.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hq{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Wx("createOrUpgrade",t);r<1&&i>=1&&((function(l){l.createObjectStore(Qp)})(e),(function(l){l.createObjectStore(tp,{keyPath:EY}),l.createObjectStore(ja,{keyPath:tM,autoIncrement:!0}).createIndex(dh,nM,{unique:!0}),l.createObjectStore(i0)})(e),WM(e),(function(l){l.createObjectStore(Ju)})(e));let a=he.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(a0),l.deleteObjectStore(s0),l.deleteObjectStore(xh)})(e),WM(e)),a=a.next((()=>(function(l){const u=l.store(xh),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return u.put(_v,f)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(l,u){return u.store(ja).J().next((d=>{l.deleteObjectStore(ja),l.createObjectStore(ja,{keyPath:tM,autoIncrement:!0}).createIndex(dh,nM,{unique:!0});const g=u.store(ja),p=d.map((E=>g.put(E)));return he.waitFor(p)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore(o0,{keyPath:PY})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore(np)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore(Kx,{keyPath:kY})})(e),(function(l){l.createObjectStore(Yx,{keyPath:MY})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(l){const u=l.createObjectStore(Xx,{keyPath:VY});u.createIndex(ST,GY,{unique:!1}),u.createIndex(H5,BY,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(l){const u=l.createObjectStore(pv,{keyPath:SY});u.createIndex(wy,TY),u.createIndex(U5,IY)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Ju)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore(kA,{keyPath:NY,autoIncrement:!0}).createIndex(wT,LY,{unique:!1}),l.createObjectStore(um,{keyPath:OY}).createIndex($5,DY,{unique:!1}),l.createObjectStore(hm,{keyPath:FY}).createIndex(W5,jY,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(um).clear()})).next((()=>{t.objectStore(hm).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore(MA,{keyPath:UY})})(e)}))),r<18&&i>=18&&v5()&&(a=a.next((()=>{t.objectStore(um).clear()})).next((()=>{t.objectStore(hm).clear()}))),a}wi(e){let t=0;return e.store(Ju).ee(((r,i)=>{t+=Av(i)})).next((()=>{const r={byteSize:t};return e.store(np).put(ET,r)}))}yi(e){const t=e.store(tp),r=e.store(ja);return t.J().next((i=>he.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,vh],[s.userId,s.lastAcknowledgedBatchId]);return r.J(dh,a).next((o=>he.forEach(o,(l=>{Tt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=sh(this.serializer,l);return YF(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(a0),r=e.store(Ju);return e.store(xh).get(_v).next((i=>{const s=[];return r.ee(((a,o)=>{const l=new mn(a),u=(function(d){return[0,ki(d)]})(l);s.push(t.get(u).next((f=>f?he.resolve():(d=>t.put({targetId:0,path:ki(d),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>he.waitFor(s)))}))}bi(e,t){e.createObjectStore(rp,{keyPath:bY});const r=t.store(rp),i=new HA,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:ki(l)})}};return t.store(Ju).ee({X:!0},((a,o)=>{const l=new mn(a);return s(l.popLast())})).next((()=>t.store(i0).ee({X:!0},(([a,o,l],u)=>{const f=Co(o);return s(f.popLast())}))))}Di(e){const t=e.store(s0);return t.ee(((r,i)=>{const s=qg(i),a=zF(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(Ju),i=[];return r.ee(((s,a)=>{const o=t.store(pv),l=(function(d){return d.document?new ot(mn.fromString(d.document.name).popFirst(5)):d.noDocument?ot.fromSegments(d.noDocument.path):d.unknownDocument?ot.fromSegments(d.unknownDocument.path):vt(36783)})(a).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))})).next((()=>he.waitFor(i)))}Fi(e,t){const r=t.store(ja),i=e6(this.serializer),s=new YA(sE.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((l=>{let u=o.get(l.userId)??Ht();sh(this.serializer,l).keys().forEach((f=>u=u.add(f))),o.set(l.userId,u)})),he.forEach(o,((l,u)=>{const f=new hi(u),d=rE.wt(this.serializer,f),g=s.getIndexManager(f),p=iE.wt(f,this.serializer,g,s.referenceDelegate);return new t6(i,p,d,g).recalculateAndSaveOverlaysForDocumentKeys(new TT(t,ma.ce),l).next()}))}))}}function WM(n){n.createObjectStore(a0,{keyPath:RY}).createIndex(PA,CY,{unique:!0}),n.createObjectStore(s0,{keyPath:"targetId"}).createIndex(z5,AY,{unique:!0}),n.createObjectStore(xh)}const xc="IndexedDbPersistence",Z2=18e5,Q2=5e3,J2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fq="main";class XA{constructor(e,t,r,i,s,a,o,l,u,f,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=u,this.Oi=f,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!XA.v())throw new st(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JX(this,i),this.$i=t+fq,this.serializer=new UF(l),this.Ui=new Yc(this.$i,this.Ni,new hq(this.serializer)),this.hi=new BX,this.Pi=new XX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=e6(this.serializer),this.Ii=new GX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&$i(xc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(ke.FAILED_PRECONDITION,J2);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ma(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>H_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(_u(e))return Ye(xc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ye(xc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Fg(e).get(Zf).next((t=>he.resolve(this.es(t))))}ts(e){return H_(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Z2)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Vr(t,o0);return r.J().next((i=>{const s=this.ss(i,Z2),a=i.filter((o=>s.indexOf(o)===-1));return he.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?he.resolve(!0):Fg(e).get(Zf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Q2)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new st(ke.FAILED_PRECONDITION,J2);return!1}}return!(!this.networkEnabled||!this.inForeground)||H_(e).J().next((r=>this.ss(r,Q2).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Ye(xc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Qp,o0],(e=>{const t=new TT(e,ma.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>H_(e).J().next((t=>this.ss(t,Z2).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return iE.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YX(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return rE.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ye(xc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?WY:l===17?q5:l===16?$Y:l===15?NA:l===14?X5:l===13?Y5:l===12?zY:l===11?K5:void vt(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new TT(o,this.ci?this.ci.next():ma.ce),t==="readwrite-primary"?this.Hi(a).next((l=>!!l||this.Yi(a))).next((l=>{if(!l)throw $i(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new st(ke.FAILED_PRECONDITION,j5);return r(a)})).next((l=>this.Xi(a).next((()=>l)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return Fg(e).get(Zf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Q2)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new st(ke.FAILED_PRECONDITION,J2)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fg(e).put(Zf,t)}static v(){return Yc.v()}Zi(e){const t=Fg(e);return t.get(Zf).next((r=>this.es(r)?(Ye(xc,"Releasing primary lease."),t.delete(Zf)):he.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||($i(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;y5()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Ye(xc,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return $i(xc,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){$i("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fg(n){return Vr(n,Qp)}function H_(n){return Vr(n,o0)}function dq(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class qA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ht(),i=Ht();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qA(e,t.fromCache,r,i)}}class gq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class n6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return y5()?8:G5(jr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new gq;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(fd()<=Xt.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",dd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(fd()<=Xt.DEBUG&&Ye("QueryEngine","Query:",dd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(fd()<=Xt.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",dd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_a(t))):he.resolve())}ys(e,t){if(mM(t))return he.resolve(null);let r=_a(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=kT(t,null,"F"),r=_a(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=Ht(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,kT(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,i){return mM(t)||i.isEqual(It.min())?he.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?he.resolve(null):(fd()<=Xt.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dd(t)),this.vs(e,a,t,gY(i,Qm)).next((o=>o)))}))}Ds(e,t){let r=new Pn(pF(e));return t.forEach(((i,s)=>{t1(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return fd()<=Xt.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",dd(t)),this.ps.getDocumentsMatchingQuery(e,t,Hs.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const ZA="LocalStore",mq=3e8;class pq{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Kn(jt),this.xs=new Gl((s=>jh(s)),Jp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function r6(n,e,t,r){return new pq(n,e,t,r)}async function i6(n,e){const t=Vt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],o=[];let l=Ht();for(const u of i){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function _q(n,e){const t=Vt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,l,u,f){const d=u.batch,g=d.keys();let p=he.resolve();return g.forEach((E=>{p=p.next((()=>f.getEntry(l,E))).next((v=>{const w=u.docVersions.get(E);Tt(w!==null,48541),v.version.compareTo(w)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),f.addEntry(v)))}))})),p.next((()=>o.mutationQueue.removeMutationBatch(l,d)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let l=Ht();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function s6(n){const e=Vt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function yq(n,e){const t=Vt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((f,d)=>{const g=i.get(d);if(!g)return;o.push(t.Pi.removeMatchingKeys(s,f.removedDocuments,d).next((()=>t.Pi.addMatchingKeys(s,f.addedDocuments,d))));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Ar.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),i=i.insert(d,p),(function(v,w,T){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=mq?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(g,p,f)&&o.push(t.Pi.updateTargetData(s,p))}));let l=Us(),u=Ht();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))})),o.push(vq(s,a,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(It.min())){const f=t.Pi.getLastRemoteSnapshotVersion(s).next((d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));o.push(f)}return he.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Ms=i,s)))}function vq(n,e,t){let r=Ht(),i=Ht();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Us();return t.forEach(((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(It.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Ye(ZA,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)})),{ks:a,qs:i}}))}function xq(n,e){const t=Vt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=vh),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Eq(n,e){const t=Vt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,he.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new fl(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function VT(n,e,t){const r=Vt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!_u(a))throw a;Ye(ZA,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function HM(n,e,t){const r=Vt(n);let i=It.min(),s=Ht();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,u,f){const d=Vt(l),g=d.xs.get(f);return g!==void 0?he.resolve(d.Ms.get(g)):d.Pi.getTargetData(u,f)})(r,a,_a(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:It.min(),t?s:Ht()))).next((o=>(wq(r,aX(e),o),{documents:o,Qs:s})))))}function wq(n,e,t){let r=n.Os.get(e)||It.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class KM{constructor(){this.activeTargetIds=fX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a6{constructor(){this.Mo=new KM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new KM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Sq{Oo(e){}shutdown(){}}const YM="ConnectivityMonitor";class XM{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ye(YM,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ye(YM,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let K_=null;function GT(){return K_===null?K_=(function(){return 268435456+Math.round(2147483648*Math.random())})():K_++,"0x"+K_.toString(16)}const eS="RestConnection",Tq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Iq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===yv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=GT(),o=this.zo(e,t.toUriEncodedString());Ye(eS,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),f=tf(u);return this.Jo(e,o,l,r,f).then((d=>(Ye(eS,`Received RPC '${e}' ${a}: `,d),d)),(d=>{throw Dh(eS,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",r),d}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+A0})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=Tq[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class Aq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ti="WebChannelConnection";class Rq extends Iq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=GT();return new Promise(((o,l)=>{const u=new R5;u.setWithCredentials(!0),u.listenOnce(C5.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case vy.NO_ERROR:const d=u.getResponseJson();Ye(Ti,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case vy.TIMEOUT:Ye(Ti,`RPC '${e}' ${a} timed out`),l(new st(ke.DEADLINE_EXCEEDED,"Request time out"));break;case vy.HTTP_ERROR:const g=u.getStatus();if(Ye(Ti,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const E=p?.error;if(E&&E.status&&E.message){const v=(function(T){const R=T.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(R)>=0?R:ke.UNKNOWN})(E.status);l(new st(v,E.message))}else l(new st(ke.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new st(ke.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ye(Ti,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(i);Ye(Ti,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",f,r,15)}))}T_(e,t,r){const i=GT(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=k5(),o=P5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const f=s.join("");Ye(Ti,`Creating RPC '${e}' stream ${i}: ${f}`,l);const d=a.createWebChannel(f,l);this.I_(d);let g=!1,p=!1;const E=new Aq({Yo:w=>{p?Ye(Ti,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(Ye(Ti,`Opening RPC '${e}' stream ${i} transport.`),d.open(),g=!0),Ye(Ti,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},Zo:()=>d.close()}),v=(w,T,R)=>{w.listen(T,(k=>{try{R(k)}catch(N){setTimeout((()=>{throw N}),0)}}))};return v(d,Kg.EventType.OPEN,(()=>{p||(Ye(Ti,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),v(d,Kg.EventType.CLOSE,(()=>{p||(p=!0,Ye(Ti,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(d))})),v(d,Kg.EventType.ERROR,(w=>{p||(p=!0,Dh(Ti,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),E.a_(new st(ke.UNAVAILABLE,"The operation could not be completed")))})),v(d,Kg.EventType.MESSAGE,(w=>{if(!p){const T=w.data[0];Tt(!!T,16349);const R=T,k=R?.error||R[0]?.error;if(k){Ye(Ti,`RPC '${e}' stream ${i} received error:`,k);const N=k.status;let O=(function(b){const M=wr[b];if(M!==void 0)return CF(M)})(N),B=k.message;O===void 0&&(O=ke.INTERNAL,B="Unknown error status: "+N+" with message "+k.message),p=!0,E.a_(new st(O,B)),d.close()}else Ye(Ti,`RPC '${e}' stream ${i} received:`,T),E.u_(T)}})),v(o,b5.STAT_EVENT,(w=>{w.stat===yT.PROXY?Ye(Ti,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===yT.NOPROXY&&Ye(Ti,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Cq(){return typeof window<"u"?window:null}function by(){return typeof document<"u"?document:null}function aE(n){return new bX(n,!0)}class o6{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const qM="PersistentStream";class l6{constructor(e,t,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o6(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ke.RESOURCE_EXHAUSTED?($i(t.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new st(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ye(qM,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ye(qM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bq extends l6{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=MX(this.serializer,e),r=(function(s){if(!("targetChange"in s))return It.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?It.min():a.readTime?Yi(a.readTime):It.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=LT(this.serializer),t.addTarget=(function(s,a){let o;const l=a.target;if(o=xv(l)?{documents:DF(s,l)}:{query:FF(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=kF(s,a.resumeToken);const u=MT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(It.min())>0){o.readTime=g0(s,a.snapshotVersion.toTimestamp());const u=MT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=LX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=LT(this.serializer),t.removeTarget=e,this.q_(t)}}class Pq extends l6{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=NX(e.writeResults,e.commitTime),r=Yi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=LT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Sv(this.serializer,r)))};this.q_(t)}}class kq{}class Mq extends kq{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new st(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,NT(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new st(ke.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,NT(t,r),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(ke.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Nq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($i(t),this.aa=!1):Ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Uh="RemoteStore";class Lq{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{sf(this)&&(Ye(Uh,"Restarting streams for network reachability change."),await(async function(l){const u=Vt(l);u.Ea.add(4),await r1(u),u.Ra.set("Unknown"),u.Ea.delete(4),await oE(u)})(this))}))})),this.Ra=new Nq(r,i)}}async function oE(n){if(sf(n))for(const e of n.da)await e(!0)}async function r1(n){for(const e of n.da)await e(!1)}function c6(n,e){const t=Vt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),tR(t)?eR(t):C0(t).O_()&&JA(t,e))}function QA(n,e){const t=Vt(n),r=C0(t);t.Ia.delete(e),r.O_()&&u6(t,e),t.Ia.size===0&&(r.O_()?r.L_():sf(t)&&t.Ra.set("Unknown"))}function JA(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}C0(n).Y_(e)}function u6(n,e){n.Va.Ue(e),C0(n).Z_(e)}function eR(n){n.Va=new IX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),C0(n).start(),n.Ra.ua()}function tR(n){return sf(n)&&!C0(n).x_()&&n.Ia.size>0}function sf(n){return Vt(n).Ea.size===0}function h6(n){n.Va=void 0}async function Oq(n){n.Ra.set("Online")}async function Dq(n){n.Ia.forEach(((e,t)=>{JA(n,e)}))}async function Fq(n,e){h6(n),tR(n)?(n.Ra.ha(e),eR(n)):n.Ra.set("Unknown")}async function jq(n,e,t){if(n.Ra.set("Online"),e instanceof PF&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(n,e)}catch(r){Ye(Uh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cv(n,r)}else if(e instanceof Ry?n.Va.Ze(e):e instanceof bF?n.Va.st(e):n.Va.tt(e),!t.isEqual(It.min()))try{const r=await s6(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.Ia.get(u);f&&s.Ia.set(u,f.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,u)=>{const f=s.Ia.get(l);if(!f)return;s.Ia.set(l,f.withResumeToken(Ar.EMPTY_BYTE_STRING,f.snapshotVersion)),u6(s,l);const d=new fl(f.target,l,u,f.sequenceNumber);JA(s,d)})),s.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){Ye(Uh,"Failed to raise snapshot:",r),await Cv(n,r)}}async function Cv(n,e,t){if(!_u(e))throw e;n.Ea.add(1),await r1(n),n.Ra.set("Offline"),t||(t=()=>s6(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ye(Uh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await oE(n)}))}function f6(n,e){return e().catch((t=>Cv(n,t,e)))}async function i1(n){const e=Vt(n),t=iu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vh;for(;Vq(e);)try{const i=await xq(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Gq(e,i)}catch(i){await Cv(e,i)}d6(e)&&g6(e)}function Vq(n){return sf(n)&&n.Ta.length<10}function Gq(n,e){n.Ta.push(e);const t=iu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function d6(n){return sf(n)&&!iu(n).x_()&&n.Ta.length>0}function g6(n){iu(n).start()}async function Bq(n){iu(n).ra()}async function Uq(n){const e=iu(n);for(const t of n.Ta)e.ea(t.mutations)}async function zq(n,e,t){const r=n.Ta.shift(),i=BA.from(r,e,t);await f6(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await i1(n)}async function $q(n,e){e&&iu(n).X_&&await(async function(r,i){if((function(a){return wX(a)&&a!==ke.ABORTED})(i.code)){const s=r.Ta.shift();iu(r).B_(),await f6(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await i1(r)}})(n,e),d6(n)&&g6(n)}async function ZM(n,e){const t=Vt(n);t.asyncQueue.verifyOperationInProgress(),Ye(Uh,"RemoteStore received new credentials");const r=sf(t);t.Ea.add(3),await r1(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await oE(t)}async function Wq(n,e){const t=Vt(n);e?(t.Ea.delete(2),await oE(t)):e||(t.Ea.add(2),await r1(t),t.Ra.set("Unknown"))}function C0(n){return n.ma||(n.ma=(function(t,r,i){const s=Vt(t);return s.sa(),new bq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Oq.bind(null,n),t_:Dq.bind(null,n),r_:Fq.bind(null,n),H_:jq.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),tR(n)?eR(n):n.Ra.set("Unknown")):(await n.ma.stop(),h6(n))}))),n.ma}function iu(n){return n.fa||(n.fa=(function(t,r,i){const s=Vt(t);return s.sa(),new Pq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Bq.bind(null,n),r_:$q.bind(null,n),ta:Uq.bind(null,n),na:zq.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await i1(n)):(await n.fa.stop(),n.Ta.length>0&&(Ye(Uh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class nR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new nR(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rR(n,e){if($i("AsyncQueue",`${e}: ${n}`),_u(n))return new st(ke.UNAVAILABLE,`${e}: ${n}`);throw n}class Od{static emptySet(e){return new Od(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=Yg(),this.sortedSet=new Kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Od)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Od;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QM{constructor(){this.ga=new Kn(ot.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):vt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class m0{constructor(e,t,r,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new m0(e,t,Od.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Hq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Kq{constructor(){this.queries=JM(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Vt(t),s=i.queries;i.queries=JM(),s.forEach(((a,o)=>{for(const l of o.Sa)l.onError(r)}))})(this,new st(ke.ABORTED,"Firestore shutting down"))}}function JM(){return new Gl((n=>mF(n)),Qx)}async function Yq(n,e){const t=Vt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Hq,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=rR(a,`Initialization of query '${dd(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&iR(t)}async function Xq(n,e){const t=Vt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function qq(n,e){const t=Vt(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&iR(t)}function Zq(n,e,t){const r=Vt(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function iR(n){n.Ca.forEach((e=>{e.next()}))}var BT,e3;(e3=BT||(BT={})).Ma="default",e3.Cache="cache";class Qq{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new m0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=m0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==BT.Cache}}class m6{constructor(e){this.key=e}}class p6{constructor(e){this.key=e}}class Jq{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ht(),this.mutatedKeys=Ht(),this.eu=pF(e),this.tu=new Od(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new QM,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,d)=>{const g=i.get(f),p=t1(this.query,d)?d:null,E=!!g&&this.mutatedKeys.has(g.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;g&&p?g.data.isEqual(p.data)?E!==v&&(r.track({type:3,doc:p}),w=!0):this.su(g,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!g&&p?(r.track({type:0,doc:p}),w=!0):g&&!p&&(r.track({type:1,doc:g}),w=!0,(l||u)&&(o=!0)),w&&(p?(a=a.add(p),s=v?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,d)=>(function(p,E){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:w})}};return v(p)-v(E)})(f.type,d.type)||this.eu(f.doc,d.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new m0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new QM,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ht(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new p6(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new m6(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ht();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return m0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sR="SyncEngine";class eZ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tZ{constructor(e){this.key=e,this.hu=!1}}class nZ{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Gl((o=>mF(o)),Qx),this.Iu=new Map,this.Eu=new Set,this.du=new Kn(ot.comparator),this.Au=new Map,this.Ru=new KA,this.Vu={},this.mu=new Map,this.fu=Bh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rZ(n,e,t=!0){const r=w6(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await _6(r,e,t,!0),i}async function iZ(n,e){const t=w6(n);await _6(t,e,!0,!1)}async function _6(n,e,t,r){const i=await Eq(n.localStore,_a(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await sZ(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&c6(n.remoteStore,i),o}async function sZ(n,e,t,r,i){n.pu=(d,g,p)=>(async function(v,w,T,R){let k=w.view.ru(T);k.Cs&&(k=await HM(v.localStore,w.query,!1).then((({documents:P})=>w.view.ru(P,k))));const N=R&&R.targetChanges.get(w.targetId),O=R&&R.targetMismatches.get(w.targetId)!=null,B=w.view.applyChanges(k,v.isPrimaryClient,N,O);return n3(v,w.targetId,B.au),B.snapshot})(n,d,g,p);const s=await HM(n.localStore,e,!0),a=new Jq(e,s.Qs),o=a.ru(s.documents),l=n1.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,l);n3(n,t,u.au);const f=new eZ(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function aZ(n,e,t){const r=Vt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Qx(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await VT(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&QA(r.remoteStore,i.targetId),UT(r,i.targetId)})).catch(rf)):(UT(r,i.targetId),await VT(r.localStore,i.targetId,!0))}async function oZ(n,e){const t=Vt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),QA(t.remoteStore,r.targetId))}async function lZ(n,e,t){const r=S6(n);try{const i=await(function(a,o){const l=Vt(a),u=Rn.now(),f=o.reduce(((p,E)=>p.add(E.key)),Ht());let d,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let E=Us(),v=Ht();return l.Ns.getEntries(p,f).next((w=>{E=w,E.forEach(((T,R)=>{R.isValidDocument()||(v=v.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,E))).next((w=>{d=w;const T=[];for(const R of o){const k=xX(R,d.get(R.key).overlayedDocument);k!=null&&T.push(new Bl(R.key,k,aF(k.value.mapValue),Hi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,T,o)})).next((w=>{g=w;const T=w.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,w.batchId,T)}))})).then((()=>({batchId:g.batchId,changes:yF(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new Kn(jt)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u})(r,i.batchId,t),await s1(r,i.changes),await i1(r.remoteStore)}catch(i){const s=rR(i,"Failed to persist write");t.reject(s)}}async function y6(n,e){const t=Vt(n);try{const r=await yq(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Tt(a.hu,14607):i.removedDocuments.size>0&&(Tt(a.hu,42227),a.hu=!1))})),await s1(t,r,e)}catch(r){await rf(r)}}function t3(n,e,t){const r=Vt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=Vt(a);l.onlineState=o;let u=!1;l.queries.forEach(((f,d)=>{for(const g of d.Sa)g.va(o)&&(u=!0)})),u&&iR(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cZ(n,e,t){const r=Vt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Kn(ot.comparator);a=a.insert(s,cr.newNoDocument(s,It.min()));const o=Ht().add(s),l=new nE(It.min(),new Map,new Kn(jt),a,o);await y6(r,l),r.du=r.du.remove(s),r.Au.delete(e),aR(r)}else await VT(r.localStore,e,!1).then((()=>UT(r,e,t))).catch(rf)}async function uZ(n,e){const t=Vt(n),r=e.batch.batchId;try{const i=await _q(t.localStore,e);x6(t,r,null),v6(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await s1(t,i)}catch(i){await rf(i)}}async function hZ(n,e,t){const r=Vt(n);try{const i=await(function(a,o){const l=Vt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,o).next((d=>(Tt(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);x6(r,e,t),v6(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await s1(r,i)}catch(i){await rf(i)}}function v6(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function x6(n,e,t){const r=Vt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function UT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||E6(n,r)}))}function E6(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(QA(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),aR(n))}function n3(n,e,t){for(const r of t)r instanceof m6?(n.Ru.addReference(r.key,e),fZ(n,r)):r instanceof p6?(Ye(sR,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||E6(n,r.key)):vt(19791,{wu:r})}function fZ(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Ye(sR,"New document in limbo: "+t),n.Eu.add(r),aR(n))}function aR(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ot(mn.fromString(e)),r=n.fu.next();n.Au.set(r,new tZ(t)),n.du=n.du.insert(t,r),c6(n.remoteStore,new fl(_a(jA(t.path)),r,"TargetPurposeLimboResolution",ma.ce))}}async function s1(n,e,t){const r=Vt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,l)=>{a.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=qA.As(l.targetId,u);s.push(f)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(l,u){const f=Vt(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>he.forEach(u,(g=>he.forEach(g.Es,(p=>f.persistence.referenceDelegate.addReference(d,g.targetId,p))).next((()=>he.forEach(g.ds,(p=>f.persistence.referenceDelegate.removeReference(d,g.targetId,p)))))))))}catch(d){if(!_u(d))throw d;Ye(ZA,"Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const p=f.Ms.get(g),E=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(E);f.Ms=f.Ms.insert(g,v)}}})(r.localStore,s))}async function dZ(n,e){const t=Vt(n);if(!t.currentUser.isEqual(e)){Ye(sR,"User change. New user:",e.toKey());const r=await i6(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((l=>{l.reject(new st(ke.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await s1(t,r.Ls)}}function gZ(n,e){const t=Vt(n),r=t.Au.get(e);if(r&&r.hu)return Ht().add(r.key);{let i=Ht();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function w6(n){const e=Vt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=y6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cZ.bind(null,e),e.Pu.H_=qq.bind(null,e.eventManager),e.Pu.yu=Zq.bind(null,e.eventManager),e}function S6(n){const e=Vt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hZ.bind(null,e),e}class up{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=aE(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return r6(this.persistence,new n6,e.initialUser,this.serializer)}Cu(e){return new YA(sE.mi,this.serializer)}Du(e){return new a6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}up.provider={build:()=>new up};class mZ extends up{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Tt(this.persistence.referenceDelegate instanceof Rv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZF(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new YA((r=>Rv.mi(r,t)),this.serializer)}}class pZ extends up{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await S6(this.xu.syncEngine),await i1(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return r6(this.persistence,new n6,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new ZF(r,e.asyncQueue,t)}Mu(e,t){const r=new yY(t,this.persistence);return new _Y(e.asyncQueue,r)}Cu(e){const t=dq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new XA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Cq(),by(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new a6}}class bv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>t3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dZ.bind(null,this.syncEngine),await Wq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kq})()}createDatastore(e){const t=aE(e.databaseInfo.databaseId),r=(function(s){return new Rq(s)})(e.databaseInfo);return(function(s,a,o,l){return new Mq(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,o){return new Lq(r,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>t3(this.syncEngine,t,0)),(function(){return XM.v()?new XM:new Sq})())}createSyncEngine(e,t){return(function(i,s,a,o,l,u,f){const d=new nZ(i,s,a,o,l,u);return f&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Vt(t);Ye(Uh,"RemoteStore shutting down."),r.Ea.add(5),await r1(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bv.provider={build:()=>new bv};class _Z{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$i("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const su="FirestoreClient";class yZ{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=RA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{Ye(su,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(Ye(su,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=rR(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function tS(n,e){n.asyncQueue.verifyOperationInProgress(),Ye(su,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await i6(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function r3(n,e){n.asyncQueue.verifyOperationInProgress();const t=await vZ(n);Ye(su,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>ZM(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>ZM(e.remoteStore,i))),n._onlineComponents=e}async function vZ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ye(su,"Using user provided OfflineComponentProvider");try{await tS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Dh("Error using user provided cache. Falling back to memory cache: "+t),await tS(n,new up)}}else Ye(su,"Using default OfflineComponentProvider"),await tS(n,new mZ(void 0));return n._offlineComponents}async function T6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ye(su,"Using user provided OnlineComponentProvider"),await r3(n,n._uninitializedComponentsProvider._online)):(Ye(su,"Using default OnlineComponentProvider"),await r3(n,new bv))),n._onlineComponents}function xZ(n){return T6(n).then((e=>e.syncEngine))}async function EZ(n){const e=await T6(n),t=e.eventManager;return t.onListen=rZ.bind(null,e.syncEngine),t.onUnlisten=aZ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iZ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oZ.bind(null,e.syncEngine),t}function wZ(n,e,t={}){const r=new wl;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const f=new _Z({next:g=>{f.Nu(),a.enqueueAndForget((()=>Xq(s,d))),g.fromCache&&l.source==="server"?u.reject(new st(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new Qq(o,f,{includeMetadataChanges:!0,qa:!0});return Yq(s,d)})(await EZ(n),n.asyncQueue,e,t,r))),r.promise}function I6(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const i3=new Map;const A6="firestore.googleapis.com",s3=!0;class a3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new st(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=A6,this.ssl=s3}else this.host=e.host,this.ssl=e.ssl??s3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qX)throw new st(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I6(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new rY;switch(r.type){case"firstParty":return new oY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=i3.get(t);r&&(Ye("ComponentProvider","Removing Datastore"),i3.delete(t),r.terminate())})(this),Promise.resolve()}}function SZ(n,e,t,r={}){n=tu(n,lE);const i=tf(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;i&&(EA(`https://${o}`),wA("Firestore",!0)),s.host!==A6&&s.host!==o&&Dh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!Nh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=hi.MOCK_USER;else{u=p5(r.mockUserToken,n._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new st(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new hi(d)}n._authCredentials=new iY(new N5(u,f))}}class b0{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new b0(this.firestore,e,this._query)}}class Dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dr(this.firestore,e,this._key)}toJSON(){return{type:Dr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Zp(t,Dr._jsonSchema))return new Dr(e,r||null,new ot(mn.fromString(t.referencePath)))}}Dr._jsonSchemaVersion="firestore/documentReference/1.0",Dr._jsonSchema={type:Tr("string",Dr._jsonSchemaVersion),referencePath:Tr("string")};class Xc extends b0{constructor(e,t,r){super(e,t,jA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dr(this.firestore,null,new ot(e))}withConverter(e){return new Xc(this.firestore,e,this._path)}}function o3(n,e,...t){if(n=Jr(n),O5("collection","path",e),n instanceof lE){const r=mn.fromString(e,...t);return qk(r),new Xc(n,null,r)}{if(!(n instanceof Dr||n instanceof Xc))throw new st(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return qk(r),new Xc(n.firestore,null,r)}}function zT(n,e,...t){if(n=Jr(n),arguments.length===1&&(e=RA.newId()),O5("doc","path",e),n instanceof lE){const r=mn.fromString(e,...t);return Xk(r),new Dr(n,null,new ot(r))}{if(!(n instanceof Dr||n instanceof Xc))throw new st(ke.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return Xk(r),new Dr(n.firestore,n instanceof Xc?n.converter:null,new ot(r))}}const l3="AsyncQueue";class c3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o6(this,"async_queue_retry"),this._c=()=>{const r=by();r&&Ye(l3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=by();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=by();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new wl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_u(e))throw e;Ye(l3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,$i("INTERNAL UNHANDLED ERROR: ",u3(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=nR.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&vt(47125,{Pc:u3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class P0 extends lE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new c3,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c3(e),this._firestoreClient=void 0,await e}}}function TZ(n,e){const t=typeof n=="object"?n:IA(),r=typeof n=="string"?n:yv,i=zx(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=d5("firestore");s&&SZ(i,...s)}return i}function R6(n){if(n._terminated)throw new st(ke.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||C6(n),n._firestoreClient}function C6(n){const e=n._freezeSettings(),t=(function(i,s,a,o){return new KY(i,s,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,I6(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new yZ(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function IZ(n,e){Dh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return AZ(n,bv.provider,{build:r=>new pZ(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function AZ(n,e,t){if((n=tu(n,P0))._firestoreClient||n._terminated)throw new st(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new st(ke.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},C6(n)}class ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ha(Ar.fromBase64String(e))}catch(t){throw new st(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ha(Ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ha._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zp(e,ha._jsonSchema))return ha.fromBase64String(e.bytes)}}ha._jsonSchemaVersion="firestore/bytes/1.0",ha._jsonSchema={type:Tr("string",ha._jsonSchemaVersion),bytes:Tr("string")};class cE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new st(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class oR{constructor(e){this._methodName=e}}class ko{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new st(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new st(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ko._jsonSchemaVersion}}static fromJSON(e){if(Zp(e,ko._jsonSchema))return new ko(e.latitude,e.longitude)}}ko._jsonSchemaVersion="firestore/geoPoint/1.0",ko._jsonSchema={type:Tr("string",ko._jsonSchemaVersion),latitude:Tr("number"),longitude:Tr("number")};class Mo{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zp(e,Mo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mo(e.vectorValues);throw new st(ke.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mo._jsonSchemaVersion="firestore/vectorValue/1.0",Mo._jsonSchema={type:Tr("string",Mo._jsonSchemaVersion),vectorValues:Tr("object")};const RZ=/^__.*__$/;class CZ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bl(e,this.data,this.fieldMask,t,this.fieldTransforms):new R0(e,this.data,t,this.fieldTransforms)}}class b6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function P6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:n})}}class lR{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lR({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(P6(this.Ac)&&RZ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bZ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||aE(e)}Cc(e,t,r,i=!1){return new lR({Ac:e,methodName:t,Dc:r,path:er.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cR(n){const e=n._freezeSettings(),t=aE(n._databaseId);return new bZ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PZ(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);uR("Data must be an object, but it was:",a,r);const o=k6(r,a);let l,u;if(s.merge)l=new ds(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const d of s.mergeFields){const g=$T(e,d,t);if(!a.contains(g))throw new st(ke.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);N6(f,g)||f.push(g)}l=new ds(f),u=a.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=a.fieldTransforms;return new CZ(new bi(o),l,u)}class uE extends oR{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uE}}function kZ(n,e,t,r){const i=n.Cc(1,e,t);uR("Data must be an object, but it was:",i,r);const s=[],a=bi.empty();yu(r,((l,u)=>{const f=hR(e,l,t);u=Jr(u);const d=i.yc(f);if(u instanceof uE)s.push(f);else{const g=a1(u,d);g!=null&&(s.push(f),a.set(f,g))}}));const o=new ds(s);return new b6(a,o,i.fieldTransforms)}function MZ(n,e,t,r,i,s){const a=n.Cc(1,e,t),o=[$T(e,r,t)],l=[i];if(s.length%2!=0)throw new st(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push($T(e,s[g])),l.push(s[g+1]);const u=[],f=bi.empty();for(let g=o.length-1;g>=0;--g)if(!N6(u,o[g])){const p=o[g];let E=l[g];E=Jr(E);const v=a.yc(p);if(E instanceof uE)u.push(p);else{const w=a1(E,v);w!=null&&(u.push(p),f.set(p,w))}}const d=new ds(u);return new b6(f,d,a.fieldTransforms)}function NZ(n,e,t,r=!1){return a1(t,n.Cc(r?4:3,e))}function a1(n,e){if(M6(n=Jr(n)))return uR("Unsupported field value:",e,n),k6(n,e);if(n instanceof oR)return(function(r,i){if(!P6(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const o of r){let l=a1(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Jr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Rn.fromDate(r);return{timestampValue:g0(i.serializer,s)}}if(r instanceof Rn){const s=new Rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:g0(i.serializer,s)}}if(r instanceof ko)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ha)return{bytesValue:kF(i.serializer,r._byteString)};if(r instanceof Dr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$A(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mo)return(function(a,o){return{mapValue:{fields:{[OA]:{stringValue:DA},[l0]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return VA(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${$x(r)}`)})(n,e)}function k6(n,e){const t={};return Z5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yu(n,((r,i)=>{const s=a1(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function M6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof ko||n instanceof ha||n instanceof Dr||n instanceof oR||n instanceof Mo)}function uR(n,e,t){if(!M6(t)||!D5(t)){const r=$x(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function $T(n,e,t){if((e=Jr(e))instanceof cE)return e._internalPath;if(typeof e=="string")return hR(n,e);throw Pv("Field path arguments must be of type string or ",n,!1,void 0,t)}const LZ=new RegExp("[~\\*/\\[\\]]");function hR(n,e,t){if(e.search(LZ)>=0)throw Pv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cE(...e.split("."))._internalPath}catch{throw Pv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pv(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new st(ke.INVALID_ARGUMENT,o+n+l)}function N6(n,e){return n.some((t=>t.isEqual(e)))}class L6{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OZ extends L6{data(){return super.data()}}function fR(n,e){return typeof e=="string"?hR(n,e):e instanceof cE?e._internalPath:e._delegate._internalPath}function DZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new st(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dR{}class FZ extends dR{}function jZ(n,e,...t){let r=[];e instanceof dR&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((l=>l instanceof gR)).length,o=s.filter((l=>l instanceof hE)).length;if(a>1||a>0&&o>0)throw new st(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class hE extends FZ{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hE(e,t,r)}_apply(e){const t=this._parse(e);return O6(e._query,t),new b0(e.firestore,e.converter,PT(e._query,t))}_parse(e){const t=cR(e.firestore);return(function(s,a,o,l,u,f,d){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new st(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){f3(d,f);const E=[];for(const v of d)E.push(h3(l,s,v));g={arrayValue:{values:E}}}else g=h3(l,s,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||f3(d,f),g=NZ(o,a,d,f==="in"||f==="not-in");return qt.create(u,f,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function VZ(n,e,t){const r=e,i=fR("where",n);return hE._create(i,r,t)}class gR extends dR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gR(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)O6(a,l),a=PT(a,l)})(e._query,t),new b0(e.firestore,e.converter,PT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function h3(n,e,t){if(typeof(t=Jr(t))=="string"){if(t==="")throw new st(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gF(e)&&t.indexOf("/")!==-1)throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!ot.isDocumentKey(r))throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ap(n,new ot(r))}if(t instanceof Dr)return ap(n,t._key);throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$x(t)}.`)}function f3(n,e){if(!Array.isArray(n)||n.length===0)throw new st(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O6(n,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new st(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class GZ{convertValue(e,t="none"){switch(nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return yu(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[l0].arrayValue?.values?.map((r=>Hn(r.doubleValue)));return new Mo(t)}convertGeoPoint(e){return new ko(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qx(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){const t=kl(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);Tt(BF(r),9688,{name:e});const i=new Fh(r.get(1),r.get(3)),s=new ot(r.popFirst(5));return i.isEqual(t)||$i(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function BZ(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Y_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dd extends L6{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Py(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(ke.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Dd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Dd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dd._jsonSchema={type:Tr("string",Dd._jsonSchemaVersion),bundleSource:Tr("string","DocumentSnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class Py extends Dd{data(e={}){return super.data(e)}}class Fd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Y_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Py(this._firestore,this._userDataWriter,r.key,r,new Y_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new st(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new Py(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Y_(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new Py(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Y_(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:UZ(o.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(ke.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=RA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:n})}}Fd._jsonSchemaVersion="firestore/querySnapshot/1.0",Fd._jsonSchema={type:Tr("string",Fd._jsonSchemaVersion),bundleSource:Tr("string","QuerySnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class zZ extends GZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dr(this.firestore,null,t)}}function $Z(n){n=tu(n,b0);const e=tu(n.firestore,P0),t=R6(e),r=new zZ(e);return DZ(n._query),wZ(t,n._query).then((i=>new Fd(e,r,n,i)))}function WZ(n,e,t,...r){n=tu(n,Dr);const i=tu(n.firestore,P0),s=cR(i);let a;return a=typeof(e=Jr(e))=="string"||e instanceof cE?MZ(s,"updateDoc",n._key,e,t,r):kZ(s,"updateDoc",n._key,e),mR(i,[a.toMutation(n._key,Hi.exists(!0))])}function HZ(n){return mR(tu(n.firestore,P0),[new tE(n._key,Hi.none())])}function KZ(n,e){const t=tu(n.firestore,P0),r=zT(n),i=BZ(n.converter,e);return mR(t,[PZ(cR(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Hi.exists(!1))]).then((()=>r))}function mR(n,e){return(function(r,i){const s=new wl;return r.asyncQueue.enqueueAndForget((async()=>lZ(await xZ(r),i,s))),s.promise})(R6(n),e)}(function(e,t=!0){(function(i){A0=i})(nf),Lh(new eu("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new P0(new sY(r.getProvider("auth-internal")),new lY(a,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new st(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fh(u.options.projectId,f)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),Po(Wk,Hk,e),Po(Wk,Hk,"esm2020")})();var YZ="firebase",XZ="12.7.0";Po(YZ,XZ,"app");function D6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qZ=D6,F6=new Xp("auth","Firebase",D6());const kv=new SA("@firebase/auth");function ZZ(n,...e){kv.logLevel<=Xt.WARN&&kv.warn(`Auth (${nf}): ${n}`,...e)}function ky(n,...e){kv.logLevel<=Xt.ERROR&&kv.error(`Auth (${nf}): ${n}`,...e)}function Nl(n,...e){throw pR(n,...e)}function No(n,...e){return pR(n,...e)}function j6(n,e,t){const r={...qZ(),[e]:t};return new Xp("auth","Firebase",r).create(e,{appName:n.name})}function qc(n){return j6(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pR(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return F6.create(n,...e)}function Dt(n,e,...t){if(!n)throw pR(e,...t)}function dl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ky(e),new Error(e)}function Ll(n,e){n||dl(e)}function WT(){return typeof self<"u"&&self.location?.href||""}function QZ(){return d3()==="http:"||d3()==="https:"}function d3(){return typeof self<"u"&&self.location?.protocol||null}function JZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QZ()||jH()||"connection"in navigator)?navigator.onLine:!0}function eQ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class o1{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ll(t>e,"Short delay should be less than long delay!"),this.isMobile=DH()||VH()}get(){return JZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _R(n,e){Ll(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class V6{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const nQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rQ=new o1(3e4,6e4);function fE(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function k0(n,e,t,r,i={}){return G6(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=qp({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...s};return FH()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&tf(n.emulatorConfig.host)&&(u.credentials="include"),V6.fetch()(await U6(n,n.config.apiHost,t,o),u)})}async function G6(n,e,t){n._canInitEmulator=!1;const r={...tQ,...e};try{const i=new iQ(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw X_(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw X_(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw X_(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw X_(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw j6(n,f,u);Nl(n,f)}}catch(i){if(i instanceof Ho)throw i;Nl(n,"network-request-failed",{message:String(i)})}}async function B6(n,e,t,r,i={}){const s=await k0(n,e,t,r,i);return"mfaPendingCredential"in s&&Nl(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function U6(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?_R(n.config,i):`${n.config.apiScheme}://${i}`;return nQ.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class iQ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(No(this.auth,"network-request-failed")),rQ.get())})}}function X_(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=No(n,e,r);return i.customData._tokenResponse=t,i}async function sQ(n,e){return k0(n,"POST","/v1/accounts:delete",e)}async function Mv(n,e){return k0(n,"POST","/v1/accounts:lookup",e)}function pm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aQ(n,e=!1){const t=Jr(n),r=await t.getIdToken(e),i=yR(r);Dt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:pm(nS(i.auth_time)),issuedAtTime:pm(nS(i.iat)),expirationTime:pm(nS(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function nS(n){return Number(n)*1e3}function yR(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ky("JWT malformed, contained fewer than 3 sections"),null;try{const i=u5(t);return i?JSON.parse(i):(ky("Failed to decode base64 JWT payload"),null)}catch(i){return ky("Caught error parsing JWT payload as JSON",i?.toString()),null}}function g3(n){const e=yR(n);return Dt(e,"internal-error"),Dt(typeof e.exp<"u","internal-error"),Dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ho&&oQ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function oQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class lQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class HT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pm(this.lastLoginAt),this.creationTime=pm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nv(n){const e=n.auth,t=await n.getIdToken(),r=await hp(n,Mv(e,{idToken:t}));Dt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?z6(i.providerUserInfo):[],a=uQ(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!a?.length,u=o?l:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new HT(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,f)}async function cQ(n){const e=Jr(n);await Nv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function z6(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function hQ(n,e){const t=await G6(n,{},async()=>{const r=qp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await U6(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&tf(n.emulatorConfig.host)&&(l.credentials="include"),V6.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fQ(n,e){return k0(n,"POST","/v2/accounts:revokeToken",fE(n,e))}class jd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt(typeof e.idToken<"u","internal-error"),Dt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Dt(e.length!==0,"internal-error");const t=g3(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await hQ(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new jd;return r&&(Dt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Dt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Dt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jd,this.toJSON())}_performRefresh(){return dl("not implemented")}}function Ec(n,e){Dt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class za{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new lQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new HT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await hp(this,this.stsTokenManager.getToken(this.auth,e));return Dt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aQ(this,e)}reload(){return cQ(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new za({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Nv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ua(this.auth.app))return Promise.reject(qc(this.auth));const e=await this.getIdToken();return await hp(this,sQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:d,emailVerified:g,isAnonymous:p,providerData:E,stsTokenManager:v}=t;Dt(d&&v,e,"internal-error");const w=jd.fromJSON(this.name,v);Dt(typeof d=="string",e,"internal-error"),Ec(r,e.name),Ec(i,e.name),Dt(typeof g=="boolean",e,"internal-error"),Dt(typeof p=="boolean",e,"internal-error"),Ec(s,e.name),Ec(a,e.name),Ec(o,e.name),Ec(l,e.name),Ec(u,e.name),Ec(f,e.name);const T=new za({uid:d,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return E&&Array.isArray(E)&&(T.providerData=E.map(R=>({...R}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new jd;i.updateFromServerResponse(t);const s=new za({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nv(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Dt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?z6(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new jd;o.updateFromIdToken(r);const l=new za({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new HT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const m3=new Map;function gl(n){Ll(n instanceof Function,"Expected a class definition");let e=m3.get(n);return e?(Ll(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,m3.set(n,e),e)}class $6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$6.type="NONE";const p3=$6;function My(n,e,t){return`firebase:${n}:${e}:${t}`}class Vd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=My(this.userKey,i.apiKey,s),this.fullPersistenceKey=My("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Mv(this.auth,{idToken:e}).catch(()=>{});return t?za._fromGetAccountInfoResponse(this.auth,t,e):null}return za._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Vd(gl(p3),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||gl(p3);const a=My(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const f=await u._get(a);if(f){let d;if(typeof f=="string"){const g=await Mv(e,{idToken:f}).catch(()=>{});if(!g)break;d=await za._fromGetAccountInfoResponse(e,g,f)}else d=za._fromJSON(e,f);u!==s&&(o=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Vd(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Vd(s,e,r))}}function _3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q6(e))return"Blackberry";if(Z6(e))return"Webos";if(H6(e))return"Safari";if((e.includes("chrome/")||K6(e))&&!e.includes("edge/"))return"Chrome";if(X6(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function W6(n=jr()){return/firefox\//i.test(n)}function H6(n=jr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K6(n=jr()){return/crios\//i.test(n)}function Y6(n=jr()){return/iemobile/i.test(n)}function X6(n=jr()){return/android/i.test(n)}function q6(n=jr()){return/blackberry/i.test(n)}function Z6(n=jr()){return/webos/i.test(n)}function vR(n=jr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dQ(n=jr()){return vR(n)&&!!window.navigator?.standalone}function gQ(){return GH()&&document.documentMode===10}function Q6(n=jr()){return vR(n)||X6(n)||Z6(n)||q6(n)||/windows phone/i.test(n)||Y6(n)}function J6(n,e=[]){let t;switch(n){case"Browser":t=_3(jr());break;case"Worker":t=`${_3(jr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nf}/${r}`}class mQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function pQ(n,e={}){return k0(n,"GET","/v2/passwordPolicy",fE(n,e))}const _Q=6;class yQ{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_Q,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class vQ{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y3(this),this.idTokenSubscription=new y3(this),this.beforeStateQueue=new mQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gl(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mv(this,{idToken:e}),r=await za._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ua(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!s||s===a)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eQ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ua(this.app))return Promise.reject(qc(this));const t=e?Jr(e):null;return t&&Dt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ua(this.app)?Promise.reject(qc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ua(this.app)?Promise.reject(qc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pQ(this),t=new yQ(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xp("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await fQ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gl(e)||this._popupRedirectResolver;Dt(t,this,"argument-error"),this.redirectPersistenceManager=await Vd.create(this,[gl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ua(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZZ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function dE(n){return Jr(n)}class y3{constructor(e){this.auth=e,this.observer=null,this.addObserver=HH(t=>this.observer=t)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xR={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xQ(n){xR=n}function EQ(n){return xR.loadJS(n)}function wQ(){return xR.gapiScript}function SQ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function TQ(n,e){const t=zx(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Nh(s,e??{}))return i;Nl(i,"already-initialized")}return t.initialize({options:e})}function IQ(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function AQ(n,e,t){const r=dE(n);Dt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=e8(e),{host:a,port:o}=RQ(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},f=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Dt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Dt(Nh(u,r.config.emulator)&&Nh(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,tf(a)?(EA(`${s}//${a}${l}`),wA("Auth",!0)):CQ()}function e8(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function RQ(n){const e=e8(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:v3(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:v3(a)}}}function v3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function CQ(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class t8{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dl("not implemented")}_getIdTokenResponse(e){return dl("not implemented")}_linkToIdToken(e,t){return dl("not implemented")}_getReauthenticationResolver(e){return dl("not implemented")}}async function Gd(n,e){return B6(n,"POST","/v1/accounts:signInWithIdp",fE(n,e))}const bQ="http://localhost";class zh extends t8{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new zh(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Gd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Gd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gd(e,t)}buildRequest(){const e={requestUri:bQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qp(t)}return e}}class n8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class l1 extends n8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bc extends l1{constructor(){super("facebook.com")}static credential(e){return zh._fromParams({providerId:bc.PROVIDER_ID,signInMethod:bc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bc.credentialFromTaggedObject(e)}static credentialFromError(e){return bc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bc.credential(e.oauthAccessToken)}catch{return null}}}bc.FACEBOOK_SIGN_IN_METHOD="facebook.com";bc.PROVIDER_ID="facebook.com";class Pc extends l1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zh._fromParams({providerId:Pc.PROVIDER_ID,signInMethod:Pc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pc.credentialFromTaggedObject(e)}static credentialFromError(e){return Pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Pc.credential(t,r)}catch{return null}}}Pc.GOOGLE_SIGN_IN_METHOD="google.com";Pc.PROVIDER_ID="google.com";class kc extends l1{constructor(){super("github.com")}static credential(e){return zh._fromParams({providerId:kc.PROVIDER_ID,signInMethod:kc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kc.credentialFromTaggedObject(e)}static credentialFromError(e){return kc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kc.credential(e.oauthAccessToken)}catch{return null}}}kc.GITHUB_SIGN_IN_METHOD="github.com";kc.PROVIDER_ID="github.com";class Mc extends l1{constructor(){super("twitter.com")}static credential(e,t){return zh._fromParams({providerId:Mc.PROVIDER_ID,signInMethod:Mc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mc.credentialFromTaggedObject(e)}static credentialFromError(e){return Mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Mc.credential(t,r)}catch{return null}}}Mc.TWITTER_SIGN_IN_METHOD="twitter.com";Mc.PROVIDER_ID="twitter.com";async function PQ(n,e){return B6(n,"POST","/v1/accounts:signUp",fE(n,e))}class au{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await za._fromIdTokenResponse(e,r,i),a=x3(r);return new au({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=x3(r);return new au({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function x3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function kQ(n){if(ua(n.app))return Promise.reject(qc(n));const e=dE(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new au({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await PQ(e,{returnSecureToken:!0}),r=await au._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Lv extends Ho{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Lv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Lv(e,t,r,i)}}function r8(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Lv._fromErrorAndOperation(n,s,e,r):s})}async function MQ(n,e,t=!1){const r=await hp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return au._forOperation(n,"link",r)}async function NQ(n,e,t=!1){const{auth:r}=n;if(ua(r.app))return Promise.reject(qc(r));const i="reauthenticate";try{const s=await hp(n,r8(r,i,e,n),t);Dt(s.idToken,r,"internal-error");const a=yR(s.idToken);Dt(a,r,"internal-error");const{sub:o}=a;return Dt(n.uid===o,r,"user-mismatch"),au._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Nl(r,"user-mismatch"),s}}async function LQ(n,e,t=!1){if(ua(n.app))return Promise.reject(qc(n));const r="signIn",i=await r8(n,r,e),s=await au._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function OQ(n,e,t,r){return Jr(n).onIdTokenChanged(e,t,r)}function DQ(n,e,t){return Jr(n).beforeAuthStateChanged(e,t)}function FQ(n,e,t,r){return Jr(n).onAuthStateChanged(e,t,r)}function jQ(n){return Jr(n).signOut()}const Ov="__sak";class i8{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ov,"1"),this.storage.removeItem(Ov),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const VQ=1e3,GQ=10;class s8 extends i8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);gQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,GQ):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},VQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}s8.type="LOCAL";const BQ=s8;class a8 extends i8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}a8.type="SESSION";const o8=a8;function UQ(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class gE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new gE(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await UQ(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gE.receivers=[];function ER(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class zQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=ER("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Lo(){return window}function $Q(n){Lo().location.href=n}function l8(){return typeof Lo().WorkerGlobalScope<"u"&&typeof Lo().importScripts=="function"}async function WQ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HQ(){return navigator?.serviceWorker?.controller||null}function KQ(){return l8()?self:null}const c8="firebaseLocalStorageDb",YQ=1,Dv="firebaseLocalStorage",u8="fbase_key";class c1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mE(n,e){return n.transaction([Dv],e?"readwrite":"readonly").objectStore(Dv)}function XQ(){const n=indexedDB.deleteDatabase(c8);return new c1(n).toPromise()}function KT(){const n=indexedDB.open(c8,YQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Dv,{keyPath:u8})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Dv)?e(r):(r.close(),await XQ(),e(await KT()))})})}async function E3(n,e,t){const r=mE(n,!0).put({[u8]:e,value:t});return new c1(r).toPromise()}async function qQ(n,e){const t=mE(n,!1).get(e),r=await new c1(t).toPromise();return r===void 0?null:r.value}function w3(n,e){const t=mE(n,!0).delete(e);return new c1(t).toPromise()}const ZQ=800,QQ=3;class h8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await KT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>QQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gE._getInstance(KQ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WQ(),!this.activeServiceWorker)return;this.sender=new zQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await KT();return await E3(e,Ov,"1"),await w3(e,Ov),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>E3(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>qQ(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>w3(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mE(i,!1).getAll();return new c1(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}h8.type="LOCAL";const JQ=h8;new o1(3e4,6e4);function eJ(n,e){return e?gl(e):(Dt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class wR extends t8{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tJ(n){return LQ(n.auth,new wR(n),n.bypassAuthState)}function nJ(n){const{auth:e,user:t}=n;return Dt(t,e,"internal-error"),NQ(t,new wR(n),n.bypassAuthState)}async function rJ(n){const{auth:e,user:t}=n;return Dt(t,e,"internal-error"),MQ(t,new wR(n),n.bypassAuthState)}class f8{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tJ;case"linkViaPopup":case"linkViaRedirect":return rJ;case"reauthViaPopup":case"reauthViaRedirect":return nJ;default:Nl(this.auth,"internal-error")}}resolve(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iJ=new o1(2e3,1e4);class Ed extends f8{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ed.currentPopupAction&&Ed.currentPopupAction.cancel(),Ed.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){Ll(this.filter.length===1,"Popup operations only handle one event");const e=ER();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(No(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(No(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ed.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(No(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iJ.get())};e()}}Ed.currentPopupAction=null;const sJ="pendingRedirect",Ny=new Map;class aJ extends f8{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ny.get(this.auth._key());if(!e){try{const r=await oJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ny.set(this.auth._key(),e)}return this.bypassAuthState||Ny.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oJ(n,e){const t=uJ(e),r=cJ(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function lJ(n,e){Ny.set(n._key(),e)}function cJ(n){return gl(n._redirectPersistence)}function uJ(n){return My(sJ,n.config.apiKey,n.name)}async function hJ(n,e,t=!1){if(ua(n.app))return Promise.reject(qc(n));const r=dE(n),i=eJ(r,e),a=await new aJ(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const fJ=600*1e3;class dJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!d8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(No(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(S3(e))}saveEventToCache(e){this.cachedEventUids.add(S3(e)),this.lastProcessedEventTime=Date.now()}}function S3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function d8({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function gJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d8(n);default:return!1}}async function mJ(n,e={}){return k0(n,"GET","/v1/projects",e)}const pJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_J=/^https?/;async function yJ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mJ(n);for(const t of e)try{if(vJ(t))return}catch{}Nl(n,"unauthorized-domain")}function vJ(n){const e=WT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!_J.test(t))return!1;if(pJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const xJ=new o1(3e4,6e4);function T3(){const n=Lo().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function EJ(n){return new Promise((e,t)=>{function r(){T3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T3(),t(No(n,"network-request-failed"))},timeout:xJ.get()})}if(Lo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Lo().gapi?.load)r();else{const i=SQ("iframefcb");return Lo()[i]=()=>{gapi.load?r():t(No(n,"network-request-failed"))},EQ(`${wQ()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Ly=null,e})}let Ly=null;function wJ(n){return Ly=Ly||EJ(n),Ly}const SJ=new o1(5e3,15e3),TJ="__/auth/iframe",IJ="emulator/auth/iframe",AJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CJ(n){const e=n.config;Dt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?_R(e,IJ):`https://${n.config.authDomain}/${TJ}`,r={apiKey:e.apiKey,appName:n.name,v:nf},i=RJ.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${qp(r).slice(1)}`}async function bJ(n){const e=await wJ(n),t=Lo().gapi;return Dt(t,n,"internal-error"),e.open({where:document.body,url:CJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AJ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=No(n,"network-request-failed"),o=Lo().setTimeout(()=>{s(a)},SJ.get());function l(){Lo().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}const PJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kJ=500,MJ=600,NJ="_blank",LJ="http://localhost";class I3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OJ(n,e,t,r=kJ,i=MJ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...PJ,width:r.toString(),height:i.toString(),top:s,left:a},u=jr().toLowerCase();t&&(o=K6(u)?NJ:t),W6(u)&&(e=e||LJ,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[p,E])=>`${g}${p}=${E},`,"");if(dQ(u)&&o!=="_self")return DJ(e||"",o),new I3(null);const d=window.open(e||"",o,f);Dt(d,n,"popup-blocked");try{d.focus()}catch{}return new I3(d)}function DJ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const FJ="__/auth/handler",jJ="emulator/auth/handler",VJ=encodeURIComponent("fac");async function A3(n,e,t,r,i,s){Dt(n.config.authDomain,n,"auth-domain-config-required"),Dt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:nf,eventId:i};if(e instanceof n8){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",WH(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))a[f]=d}if(e instanceof l1){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await n._getAppCheckToken(),u=l?`#${VJ}=${encodeURIComponent(l)}`:"";return`${GJ(n)}?${qp(o).slice(1)}${u}`}function GJ({config:n}){return n.emulator?_R(n,jJ):`https://${n.authDomain}/${FJ}`}const rS="webStorageSupport";class BJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o8,this._completeRedirectFn=hJ,this._overrideRedirectResult=lJ}async _openPopup(e,t,r,i){Ll(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await A3(e,t,r,WT(),i);return OJ(e,s,ER())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await A3(e,t,r,WT(),i);return $Q(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ll(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await bJ(e),r=new dJ(e);return t.register("authEvent",i=>(Dt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rS,{type:rS},i=>{const s=i?.[0]?.[rS];s!==void 0&&t(!!s),Nl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Q6()||H6()||vR()}}const UJ=BJ;var R3="@firebase/auth",C3="1.12.0";class zJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $J(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WJ(n){Lh(new eu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Dt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J6(n)},u=new vQ(r,i,s,l);return IQ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lh(new eu("auth-internal",e=>{const t=dE(e.getProvider("auth").getImmediate());return(r=>new zJ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Po(R3,C3,$J(n)),Po(R3,C3,"esm2020")}const HJ=300,KJ=m5("authIdTokenMaxAge")||HJ;let b3=null;const YJ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>KJ)return;const i=t?.token;b3!==i&&(b3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function XJ(n=IA()){const e=zx(n,"auth");if(e.isInitialized())return e.getImmediate();const t=TQ(n,{popupRedirectResolver:UJ,persistence:[JQ,BQ,o8]}),r=m5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=YJ(s.toString());DQ(t,a,()=>a(t.currentUser)),OQ(t,o=>a(o))}}const i=f5("auth");return i&&AQ(t,`http://${i}`),t}function qJ(){return document.getElementsByTagName("head")?.[0]??document}xQ({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=No("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",qJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WJ("Browser");const g8="firebasestorage.googleapis.com",ZJ="storageBucket",QJ=120*1e3,JJ=600*1e3;class Ko extends Ho{constructor(e,t,r=0){super(iS(e),`Firebase Storage: ${t} (${iS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ko.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bo;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bo||(Bo={}));function iS(n){return"storage/"+n}function eee(){const n="An unknown error occurred, please check the error payload for server response.";return new Ko(Bo.UNKNOWN,n)}function tee(){return new Ko(Bo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nee(){return new Ko(Bo.CANCELED,"User canceled the upload/download.")}function ree(n){return new Ko(Bo.INVALID_URL,"Invalid URL '"+n+"'.")}function iee(n){return new Ko(Bo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function P3(n){return new Ko(Bo.INVALID_ARGUMENT,n)}function m8(){return new Ko(Bo.APP_DELETED,"The Firebase app was deleted.")}function see(n){return new Ko(Bo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class $a{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$a.makeFromUrl(e,t)}catch{return new $a(e,"")}if(r.path==="")return r;throw iee(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const f="v[A-Za-z0-9_]+",d=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${f}/b/${i}/o${g}`,"i"),E={bucket:1,path:3},v=t===g8?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",T=new RegExp(`^https?://${v}/${i}/${w}`,"i"),k=[{regex:o,indices:l,postModify:s},{regex:p,indices:E,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<k.length;N++){const O=k[N],B=O.regex.exec(e);if(B){const P=B[O.indices.bucket];let b=B[O.indices.path];b||(b=""),r=new $a(P,b),O.postModify(r);break}}if(r==null)throw ree(e);return r}}class aee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function oee(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function f(...w){u||(u=!0,e.apply(null,w))}function d(w){i=setTimeout(()=>{i=null,n(p,l())},w)}function g(){s&&clearTimeout(s)}function p(w,...T){if(u){g();return}if(w){g(),f.call(null,w,...T);return}if(l()||a){g(),f.call(null,w,...T);return}r<64&&(r*=2);let k;o===1?(o=2,k=0):k=(r+Math.random())*1e3,d(k)}let E=!1;function v(w){E||(E=!0,g(),!u&&(i!==null?(w||(o=2),clearTimeout(i),d(0)):w||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,v(!0)},t),v}function lee(n){n(!1)}function cee(n){return n!==void 0}function k3(n,e,t,r){if(r<e)throw P3(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw P3(`Invalid value for '${n}'. Expected ${t} or less.`)}function uee(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Fv;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Fv||(Fv={}));function hee(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class fee{constructor(e,t,r,i,s,a,o,l,u,f,d,g=!0,p=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=d,this.retry=g,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,v)=>{this.resolve_=E,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new q_(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Fv.NO_ERROR,l=s.getStatus();if(!o||hee(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Fv.ABORT;r(!1,new q_(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new q_(u,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());cee(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=eee();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?m8():nee();a(l)}else{const l=tee();a(l)}};this.canceled_?t(!1,new q_(!1,null,!0)):this.backoffId_=oee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class q_{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function gee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function pee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function _ee(n,e,t,r,i,s,a=!0,o=!1){const l=uee(n.urlParams),u=n.url+l,f=Object.assign({},n.headers);return mee(f,e),dee(f,t),gee(f,s),pee(f,r),new fee(u,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,o)}function yee(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function vee(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class jv{constructor(e,t){this._service=e,t instanceof $a?this._location=t:this._location=$a.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new jv(e,t)}get root(){const e=new $a(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vee(this._location.path)}get storage(){return this._service}get parent(){const e=yee(this._location.path);if(e===null)return null;const t=new $a(this._location.bucket,e);return new jv(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw see(e)}}function M3(n,e){const t=e?.[ZJ];return t==null?null:$a.makeFromBucketSpec(t,n)}function xee(n,e,t,r={}){n.host=`${e}:${t}`;const i=tf(e);i&&(EA(`https://${n.host}/b`),wA("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:p5(s,n.app.options.projectId))}class Eee{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=g8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QJ,this._maxUploadRetryTime=JJ,this._requests=new Set,i!=null?this._bucket=$a.makeFromBucketSpec(i,this._host):this._bucket=M3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$a.makeFromBucketSpec(this._url,e):this._bucket=M3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ua(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jv(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new aee(m8());{const a=_ee(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const N3="@firebase/storage",L3="0.14.0";const p8="storage";function wee(n=IA(),e){n=Jr(n);const r=zx(n,p8).getImmediate({identifier:e}),i=d5("storage");return i&&See(r,...i),r}function See(n,e,t,r={}){xee(n,e,t,r)}function Tee(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Eee(t,r,i,e,nf)}function Iee(){Lh(new eu(p8,Tee,"PUBLIC").setMultipleInstances(!0)),Po(N3,L3,""),Po(N3,L3,"esm2020")}Iee();const Aee={apiKey:"REPLACE_WITH_YOUR_API_KEY",authDomain:"your-project.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"},SR=S5(Aee),sS=XJ(SR),Zg=TZ(SR);wee(SR);IZ(Zg).catch(n=>{n.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const Ree=va()(I0((n,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async t=>{n(r=>{r.loading=!0});try{const r=jZ(o3(Zg,"vondsten"),VZ("userId","==",t)),s=(await $Z(r)).docs.map(a=>({id:a.id,...a.data()}));n(a=>{a.vondsten=s,a.loading=!1})}catch(r){n(i=>{i.error=r.message,i.loading=!1})}},addVondst:async t=>{const r=new Date().toISOString(),i={...t,createdAt:r,updatedAt:r},s=await KZ(o3(Zg,"vondsten"),i);return n(a=>{a.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(t,r)=>{const i=zT(Zg,"vondsten",t);await WZ(i,{...r,updatedAt:new Date().toISOString()}),n(s=>{const a=s.vondsten.findIndex(o=>o.id===t);a!==-1&&(s.vondsten[a]={...s.vondsten[a],...r})})},deleteVondst:async t=>{await HZ(zT(Zg,"vondsten",t)),n(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==t)})}}))),Cee={};function bee(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=t.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const fp=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return fp(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return fp(r)(t)}}}},Pee=(n,e)=>(t,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,T)=>({...T,...w}),...e},a=!1;const o=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return n((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...w)},r,i);const f=fp(s.serialize),d=()=>{const w=s.partialize({...r()});let T;const R=f({state:w,version:s.version}).then(k=>u.setItem(s.name,k)).catch(k=>{T=k});if(T)throw T;return R},g=i.setState;i.setState=(w,T)=>{g(w,T),d()};const p=n((...w)=>{t(...w),d()},r,i);let E;const v=()=>{var w;if(!u)return;a=!1,o.forEach(R=>R(r()));const T=((w=s.onRehydrateStorage)==null?void 0:w.call(s,r()))||void 0;return fp(u.getItem.bind(u))(s.name).then(R=>{if(R)return s.deserialize(R)}).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==s.version){if(s.migrate)return s.migrate(R.state,R.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return R.state}).then(R=>{var k;return E=s.merge(R,(k=r())!=null?k:p),t(E,!0),d()}).then(()=>{T?.(E,void 0),a=!0,l.forEach(R=>R(E))}).catch(R=>{T?.(void 0,R)})};return i.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(u=w.getStorage())},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:w=>(o.add(w),()=>{o.delete(w)}),onFinishHydration:w=>(l.add(w),()=>{l.delete(w)})},v(),E||p},kee=(n,e)=>(t,r,i)=>{let s={storage:bee(()=>localStorage),partialize:v=>v,version:0,merge:(v,w)=>({...w,...v}),...e},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...v)},r,i);const f=()=>{const v=s.partialize({...r()});return u.setItem(s.name,{state:v,version:s.version})},d=i.setState;i.setState=(v,w)=>{d(v,w),f()};const g=n((...v)=>{t(...v),f()},r,i);i.getInitialState=()=>g;let p;const E=()=>{var v,w;if(!u)return;a=!1,o.forEach(R=>{var k;return R((k=r())!=null?k:g)});const T=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(v=r())!=null?v:g))||void 0;return fp(u.getItem.bind(u))(s.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==s.version){if(s.migrate)return[!0,s.migrate(R.state,R.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var k;const[N,O]=R;if(p=s.merge(O,(k=r())!=null?k:g),t(p,!0),N)return f()}).then(()=>{T?.(p,void 0),p=r(),a=!0,l.forEach(R=>R(p))}).catch(R=>{T?.(void 0,R)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>E(),hasHydrated:()=>a,onHydrate:v=>(o.add(v),()=>{o.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},s.skipHydration||E(),p||g},Mee=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Cee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Pee(n,e)):kee(n,e),M0=Mee,Oi=va()(M0(n=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,setDefaultBackground:e=>n({defaultBackground:e}),setShowScaleBar:e=>n({showScaleBar:e}),setGpsAutoStart:e=>n({gpsAutoStart:e}),setShowAccuracyCircle:e=>n({showAccuracyCircle:e}),setHapticFeedback:e=>n({hapticFeedback:e}),setVondstenLocalOnly:e=>n({vondstenLocalOnly:e}),setShowVondstButton:e=>n({showVondstButton:e}),setFontScale:e=>n({fontScale:e}),setLayerPanelFontScale:e=>n({layerPanelFontScale:e}),setPresetPanelFontScale:e=>n({presetPanelFontScale:e})}),{name:"detectorapp-settings",version:2,migrate:(n,e)=>e<2?{...n,showScaleBar:!0}:n})),aS=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen","IKAW"],baseLayer:"CartoDB (licht)",isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Vroege ME",icon:"Layers",layers:["Romeinse wegen (regio)","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Late ME - Nieuw",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","Archeo Landschappen","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],O3=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],_8=va()(M0((n,e)=>({presets:[...aS],applyPreset:t=>{const r=e().presets.find(s=>s.id===t);if(!r)return;const i=Xr.getState();O3.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(a=>{i.setLayerVisibility(a,a===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(t,r)=>{const i=Xr.getState(),s=Object.entries(i.visible).filter(([o,l])=>l&&O3.includes(o)).map(([o])=>o),a={id:`custom-${Date.now()}`,name:t,icon:r,layers:s,isBuiltIn:!1};n(o=>({presets:[...o.presets,a]})),console.log(` Preset aangemaakt: ${t} met ${s.length} lagen`)},updatePreset:(t,r)=>{n(i=>({presets:i.presets.map(s=>s.id===t?{...s,...r}:s)}))},deletePreset:t=>{n(r=>({presets:r.presets.filter(i=>i.id!==t||i.isBuiltIn)}))},resetToDefaults:()=>{n({presets:[...aS]})}}),{name:"detectorapp-presets",version:7,migrate:(n,e)=>e<7?{presets:[...aS]}:n})),D3=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],pE=va()(M0((n,e)=>({layers:[],addLayer:t=>{const r=crypto.randomUUID(),i=e().layers.length,s=D3[i%D3.length];return n(a=>({layers:[...a.layers,{...t,id:r,createdAt:new Date().toISOString(),color:t.color||s,visible:t.visible??!0,opacity:t.opacity??1}]})),r},removeLayer:t=>n(r=>({layers:r.layers.filter(i=>i.id!==t)})),updateLayer:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)})),toggleVisibility:t=>n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)})),setOpacity:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,opacity:r}:s)})),setColor:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,color:r}:s)})),clearAll:()=>n({layers:[]})}),{name:"detectorapp-custom-layers",version:1})),Nee=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Labels Overlay","Mijn Vondsten"],y8=va()(M0((n,e)=>({tier:"free",unlockedRegions:["nl"],devMode:!0,setTier:t=>n({tier:t}),unlockRegion:t=>n(r=>({unlockedRegions:r.unlockedRegions.includes(t)?r.unlockedRegions:[...r.unlockedRegions,t]})),lockRegion:t=>n(r=>({unlockedRegions:r.unlockedRegions.filter(i=>i!==t)})),setDevMode:t=>n({devMode:t}),isRegionUnlocked:t=>{const r=e();return r.devMode||r.tier==="pro"?!0:r.unlockedRegions.includes(t)},isLayerUnlocked:(t,r="free",i=["nl"])=>{const s=e();return s.devMode||Nee.includes(t)||r==="free"||s.tier==="pro"?!0:s.tier==="premium"?i.some(a=>s.unlockedRegions.includes(a)):!1},canAccessPremiumFeatures:()=>{const t=e();return t.devMode||t.tier!=="free"}}),{name:"detectorapp-subscription",version:1}));function Lee({target:n,viewOptions:e}){const t=oe.useRef(null),r=oe.useRef(null),i=vs(a=>a.setMap),s=Oi(a=>a.showScaleBar);return oe.useEffect(()=>{if(!t.current){const a={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},o=new XW({target:n,controls:[],view:new Io({center:Rh(a.center),zoom:a.zoom,rotation:a.rotation,minZoom:a.minZoom,maxZoom:a.maxZoom})});t.current=o,i(o),window.__olMap=o}return()=>{t.current&&(t.current.setTarget(void 0),i(null),window.__olMap=null)}},[n,e,i]),oe.useEffect(()=>{const a=t.current;a&&(s?r.current||(r.current=new QW({units:"metric",bar:!1,text:!0,minWidth:80}),a.addControl(r.current)):r.current&&(a.removeControl(r.current),r.current=null))},[s]),t.current}const F3=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function Oee(){const n=oe.useRef(null),e=oe.useRef(!1);Lee({target:"map"});const t=vs(d=>d.map),r=Xr(d=>d.registerLayer),i=Xr(d=>d.setLayerVisibility),s=Oi(d=>d.defaultBackground);oe.useEffect(()=>{if(!t){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const d=new Xu({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new gW}),g=new Xu({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new ud({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),p=new Xu({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new ud({url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_orthoHR/EPSG:3857/{z}/{x}/{y}.jpeg",attributions:" Kadaster / PDOK Luchtfoto",maxZoom:19})}),E=new Xu({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new ud({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),v=new Xu({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new ud({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),w=new Xu({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new ud({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});t.addLayer(d),t.addLayer(g),t.addLayer(p),t.addLayer(E),t.addLayer(v),t.addLayer(w),console.log(" Base layers added:",{osm:d.getVisible(),cartodb:g.getVisible(),satellite:p.getVisible()}),r("OpenStreetMap",d),r("CartoDB (licht)",g),r("Luchtfoto",p),r("Labels Overlay",E),r("TMK 1850",v),r("Bonnebladen 1900",w),t.updateSize(),console.log(" Map size:",t.getSize()),console.log(" Map center:",t.getView().getCenter()),console.log(" Map zoom:",t.getView().getZoom()),a()},[t,r]);async function a(){if(!t){console.error(" Cannot load layers: map is null");return}const d=IH();console.log(` Loading ${d.length} immediate-load layers (WMS/Tile)...`);const g=await Promise.allSettled(d.map(async E=>{try{const v=await E.factory();return v?{name:E.name,layer:v}:null}catch(v){return console.warn(` Failed to create ${E.name}:`,v),null}}));let p=0;g.forEach(E=>{if(E.status==="fulfilled"&&E.value){const{name:v,layer:w}=E.value;t.addLayer(w),r(v,w),p++,console.log(`   ${v}`)}}),console.log(` Immediate layers loaded: ${p}/${d.length}`),console.log(` Total layers on map: ${t.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}oe.useEffect(()=>{if(!t||e.current)return;const d=setTimeout(()=>{const g=s||"CartoDB (licht)";F3.forEach(p=>{i(p,!1)}),F3.includes(g)?i(g,!0):i("CartoDB (licht)",!0),e.current=!0,console.log(` Default background: ${g}`)},100);return()=>clearTimeout(d)},[t,s,i]);const o=Oi(d=>d.gpsAutoStart),l=Bi(d=>d.startTracking),u=oe.useRef(!1);oe.useEffect(()=>{if(!(!t||u.current)&&o){const d=setTimeout(()=>{l(),u.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(d)}},[t,o,l]);const f={width:"100%",height:"100vh"};return y.jsx("div",{id:"map",ref:n,style:f})}const TR=oe.createContext({});function IR(n){const e=oe.useRef(null);return e.current===null&&(e.current=n()),e.current}const _E=oe.createContext(null),AR=oe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class Dee extends oe.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Fee({children:n,isPresent:e}){const t=oe.useId(),r=oe.useRef(null),i=oe.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=oe.useContext(AR);return oe.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=t;const f=document.createElement("style");return s&&(f.nonce=s),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),y.jsx(Dee,{isPresent:e,childRef:r,sizeRef:i,children:oe.cloneElement(n,{ref:r})})}const jee=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=IR(Vee),l=oe.useId(),u=oe.useCallback(d=>{o.set(d,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),f=oe.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),u]:[t,u]);return oe.useMemo(()=>{o.forEach((d,g)=>o.set(g,!1))},[t]),oe.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),a==="popLayout"&&(n=y.jsx(Fee,{isPresent:t,children:n})),y.jsx(_E.Provider,{value:f,children:n})};function Vee(){return new Map}function v8(n=!0){const e=oe.useContext(_E);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=oe.useId();oe.useEffect(()=>{n&&i(s)},[n]);const a=oe.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const Z_=n=>n.key||"";function j3(n){const e=[];return oe.Children.forEach(n,t=>{oe.isValidElement(t)&&e.push(t)}),e}const RR=typeof window<"u",x8=RR?oe.useLayoutEffect:oe.useEffect,_i=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=v8(a),u=oe.useMemo(()=>j3(n),[n]),f=a&&!o?[]:u.map(Z_),d=oe.useRef(!0),g=oe.useRef(u),p=IR(()=>new Map),[E,v]=oe.useState(u),[w,T]=oe.useState(u);x8(()=>{d.current=!1,g.current=u;for(let N=0;N<w.length;N++){const O=Z_(w[N]);f.includes(O)?p.delete(O):p.get(O)!==!0&&p.set(O,!1)}},[w,f.length,f.join("-")]);const R=[];if(u!==E){let N=[...u];for(let O=0;O<w.length;O++){const B=w[O],P=Z_(B);f.includes(P)||(N.splice(O,0,B),R.push(B))}s==="wait"&&R.length&&(N=R),T(j3(N)),v(u);return}const{forceRender:k}=oe.useContext(TR);return y.jsx(y.Fragment,{children:w.map(N=>{const O=Z_(N),B=a&&!o?!1:u===w||f.includes(O),P=()=>{if(p.has(O))p.set(O,!0);else return;let b=!0;p.forEach(M=>{M||(b=!1)}),b&&(k?.(),T(g.current),a&&l?.(),r&&r())};return y.jsx(jee,{isPresent:B,initial:!d.current||t?void 0:!1,custom:B?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:B?void 0:P,children:N},O)})})},zs=n=>n;let E8=zs;function CR(n){let e;return()=>(e===void 0&&(e=n()),e)}const p0=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Sl=n=>n*1e3,Tl=n=>n/1e3,Gee={useManualTiming:!1};function Bee(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),n()),u(a)}const l={schedule:(u,f=!1,d=!1)=>{const p=d&&r?e:t;return f&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{t.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const Q_=["read","resolveKeyframes","update","preRender","render","postRender"],Uee=40;function w8(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=Q_.reduce((T,R)=>(T[R]=Bee(s),T),{}),{read:o,resolveKeyframes:l,update:u,preRender:f,render:d,postRender:g}=a,p=()=>{const T=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,Uee),1),i.timestamp=T,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),f.process(i),d.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(p))},E=()=>{t=!0,r=!0,i.isProcessing||n(p)};return{schedule:Q_.reduce((T,R)=>{const k=a[R];return T[R]=(N,O=!1,B=!1)=>(t||E(),k.schedule(N,O,B)),T},{}),cancel:T=>{for(let R=0;R<Q_.length;R++)a[Q_[R]].cancel(T)},state:i,steps:a}}const{schedule:Un,cancel:ou,state:ci,steps:oS}=w8(typeof requestAnimationFrame<"u"?requestAnimationFrame:zs,!0),S8=oe.createContext({strict:!1}),V3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_0={};for(const n in V3)_0[n]={isEnabled:e=>V3[n].some(t=>!!e[t])};function zee(n){for(const e in n)_0[e]={..._0[e],...n[e]}}const $ee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||$ee.has(n)}let T8=n=>!Vv(n);function Wee(n){n&&(T8=e=>e.startsWith("on")?!Vv(e):n(e))}try{Wee(require("@emotion/is-prop-valid").default)}catch{}function Hee(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(T8(i)||t===!0&&Vv(i)||!e&&!Vv(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function Kee(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const yE=oe.createContext({});function dp(n){return typeof n=="string"||Array.isArray(n)}function vE(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const bR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],PR=["initial",...bR];function xE(n){return vE(n.animate)||PR.some(e=>dp(n[e]))}function I8(n){return!!(xE(n)||n.variants)}function Yee(n,e){if(xE(n)){const{initial:t,animate:r}=n;return{initial:t===!1||dp(t)?t:void 0,animate:dp(r)?r:void 0}}return n.inherit!==!1?e:{}}function Xee(n){const{initial:e,animate:t}=Yee(n,oe.useContext(yE));return oe.useMemo(()=>({initial:e,animate:t}),[G3(e),G3(t)])}function G3(n){return Array.isArray(n)?n.join(" "):n}const qee=Symbol.for("motionComponentSymbol");function wd(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Zee(n,e,t){return oe.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):wd(t)&&(t.current=r))},[e])}const kR=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Qee="framerAppearId",A8="data-"+kR(Qee),{schedule:MR}=w8(queueMicrotask,!1),R8=oe.createContext({});function Jee(n,e,t,r,i){var s,a;const{visualElement:o}=oe.useContext(yE),l=oe.useContext(S8),u=oe.useContext(_E),f=oe.useContext(AR).reducedMotion,d=oe.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,p=oe.useContext(R8);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&ete(d.current,t,i,p);const E=oe.useRef(!1);oe.useInsertionEffect(()=>{g&&E.current&&g.update(t,u)});const v=t[A8],w=oe.useRef(!!v&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,v))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,v)));return x8(()=>{g&&(E.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),MR.render(g.render),w.current&&g.animationState&&g.animationState.animateChanges())}),oe.useEffect(()=>{g&&(!w.current&&g.animationState&&g.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,v)}),w.current=!1))}),g}function ete(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:C8(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&wd(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function C8(n){if(n)return n.options.allowProjection!==!1?n.projection:C8(n.parent)}function tte({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,a;n&&zee(n);function o(u,f){let d;const g={...oe.useContext(AR),...u,layoutId:nte(u)},{isStatic:p}=g,E=Xee(u),v=r(u,p);if(!p&&RR){rte();const w=ite(g);d=w.MeasureLayout,E.visualElement=Jee(i,v,g,e,w.ProjectionNode)}return y.jsxs(yE.Provider,{value:E,children:[d&&E.visualElement?y.jsx(d,{visualElement:E.visualElement,...g}):null,t(i,u,Zee(v,E.visualElement,f),v,p,E.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=oe.forwardRef(o);return l[qee]=i,l}function nte({layoutId:n}){const e=oe.useContext(TR).id;return e&&n!==void 0?e+"-"+n:n}function rte(n,e){oe.useContext(S8).strict}function ite(n){const{drag:e,layout:t}=_0;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ste=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function NR(n){return typeof n!="string"||n.includes("-")?!1:!!(ste.indexOf(n)>-1||/[A-Z]/u.test(n))}function B3(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function LR(n,e,t,r){if(typeof e=="function"){const[i,s]=B3(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=B3(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const YT=n=>Array.isArray(n),ate=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),ote=n=>YT(n)?n[n.length-1]||0:n,Pi=n=>!!(n&&n.getVelocity);function Oy(n){const e=Pi(n)?n.get():n;return ate(e)?e.toValue():e}function lte({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const a={latestValues:cte(r,i,s,n),renderState:e()};return t&&(a.onMount=o=>t({props:r,current:o,...a}),a.onUpdate=o=>t(o)),a}const b8=n=>(e,t)=>{const r=oe.useContext(yE),i=oe.useContext(_E),s=()=>lte(n,e,r,i);return t?s():IR(s)};function cte(n,e,t,r){const i={},s=r(n,{});for(const g in s)i[g]=Oy(s[g]);let{initial:a,animate:o}=n;const l=xE(n),u=I8(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const d=f?o:a;if(d&&typeof d!="boolean"&&!vE(d)){const g=Array.isArray(d)?d:[d];for(let p=0;p<g.length;p++){const E=LR(n,g[p]);if(E){const{transitionEnd:v,transition:w,...T}=E;for(const R in T){let k=T[R];if(Array.isArray(k)){const N=f?k.length-1:0;k=k[N]}k!==null&&(i[R]=k)}for(const R in v)i[R]=v[R]}}}return i}const N0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],af=new Set(N0),P8=n=>e=>typeof e=="string"&&e.startsWith(n),k8=P8("--"),ute=P8("var(--"),OR=n=>ute(n)?hte.test(n.split("/*")[0].trim()):!1,hte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,M8=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ol=(n,e,t)=>t>e?e:t<n?n:t,L0={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},gp={...L0,transform:n=>Ol(0,1,n)},J_={...L0,default:1},u1=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ic=u1("deg"),Oo=u1("%"),kt=u1("px"),fte=u1("vh"),dte=u1("vw"),U3={...Oo,parse:n=>Oo.parse(n)/100,transform:n=>Oo.transform(n*100)},gte={borderWidth:kt,borderTopWidth:kt,borderRightWidth:kt,borderBottomWidth:kt,borderLeftWidth:kt,borderRadius:kt,radius:kt,borderTopLeftRadius:kt,borderTopRightRadius:kt,borderBottomRightRadius:kt,borderBottomLeftRadius:kt,width:kt,maxWidth:kt,height:kt,maxHeight:kt,top:kt,right:kt,bottom:kt,left:kt,padding:kt,paddingTop:kt,paddingRight:kt,paddingBottom:kt,paddingLeft:kt,margin:kt,marginTop:kt,marginRight:kt,marginBottom:kt,marginLeft:kt,backgroundPositionX:kt,backgroundPositionY:kt},mte={rotate:Ic,rotateX:Ic,rotateY:Ic,rotateZ:Ic,scale:J_,scaleX:J_,scaleY:J_,scaleZ:J_,skew:Ic,skewX:Ic,skewY:Ic,distance:kt,translateX:kt,translateY:kt,translateZ:kt,x:kt,y:kt,z:kt,perspective:kt,transformPerspective:kt,opacity:gp,originX:U3,originY:U3,originZ:kt},z3={...L0,transform:Math.round},DR={...gte,...mte,zIndex:z3,size:kt,fillOpacity:gp,strokeOpacity:gp,numOctaves:z3},pte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_te=N0.length;function yte(n,e,t){let r="",i=!0;for(let s=0;s<_te;s++){const a=N0[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=M8(o,DR[a]);if(!l){i=!1;const f=pte[a]||a;r+=`${f}(${u}) `}t&&(e[a]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function FR(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(af.has(l)){a=!0;continue}else if(k8(l)){i[l]=u;continue}else{const f=M8(u,DR[l]);l.startsWith("origin")?(o=!0,s[l]=f):r[l]=f}}if(e.transform||(a||t?r.transform=yte(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:f=0}=s;r.transformOrigin=`${l} ${u} ${f}`}}const vte={offset:"stroke-dashoffset",array:"stroke-dasharray"},xte={offset:"strokeDashoffset",array:"strokeDasharray"};function Ete(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?vte:xte;n[s.offset]=kt.transform(-r);const a=kt.transform(e),o=kt.transform(t);n[s.array]=`${a} ${o}`}function $3(n,e,t){return typeof n=="string"?n:kt.transform(e+t*n)}function wte(n,e,t){const r=$3(e,n.x,n.width),i=$3(t,n.y,n.height);return`${r} ${i}`}function jR(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},f,d){if(FR(n,u,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:p,dimensions:E}=n;g.transform&&(E&&(p.transform=g.transform),delete g.transform),E&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=wte(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),a!==void 0&&Ete(g,a,o,l,!1)}const VR=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),N8=()=>({...VR(),attrs:{}}),GR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function L8(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const O8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function D8(n,e,t,r){L8(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(O8.has(i)?i:kR(i),e.attrs[i])}const Gv={};function Ste(n){Object.assign(Gv,n)}function F8(n,{layout:e,layoutId:t}){return af.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Gv[n]||n==="opacity")}function BR(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(Pi(i[a])||e.style&&Pi(e.style[a])||F8(a,n)||((r=t?.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function j8(n,e,t){const r=BR(n,e,t);for(const i in n)if(Pi(n[i])||Pi(e[i])){const s=N0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function Tte(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const W3=["x","y","width","height","cx","cy","r"],Ite={useVisualState:b8({scrapeMotionValuesFromProps:j8,createRenderState:N8,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const o in i)if(af.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<W3.length;o++){const l=W3[o];n[l]!==e[l]&&(a=!0)}a&&Un.read(()=>{Tte(t,r),Un.render(()=>{jR(r,i,GR(t.tagName),n.transformTemplate),D8(t,r)})})}})},Ate={useVisualState:b8({scrapeMotionValuesFromProps:BR,createRenderState:VR})};function V8(n,e,t){for(const r in e)!Pi(e[r])&&!F8(r,t)&&(n[r]=e[r])}function Rte({transformTemplate:n},e){return oe.useMemo(()=>{const t=VR();return FR(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Cte(n,e){const t=n.style||{},r={};return V8(r,t,n),Object.assign(r,Rte(n,e)),r}function bte(n,e){const t={},r=Cte(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function Pte(n,e,t,r){const i=oe.useMemo(()=>{const s=N8();return jR(s,e,GR(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};V8(s,n.style,n),i.style={...s,...i.style}}return i}function kte(n=!1){return(t,r,i,{latestValues:s},a)=>{const l=(NR(t)?Pte:bte)(r,s,a,t),u=Hee(r,typeof t=="string",n),f=t!==oe.Fragment?{...u,...l,ref:i}:{},{children:d}=r,g=oe.useMemo(()=>Pi(d)?d.get():d,[d]);return oe.createElement(t,{...f,children:g})}}function Mte(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...NR(r)?Ite:Ate,preloadedFeatures:n,useRender:kte(i),createVisualElement:e,Component:r};return tte(a)}}function G8(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function EE(n,e,t){const r=n.getProps();return LR(r,e,t!==void 0?t:r.custom,n)}const Nte=CR(()=>window.ScrollTimeline!==void 0);class Lte{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(Nte()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Ote extends Lte{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function UR(n,e){return n?n[e]||n.default||n:void 0}const XT=2e4;function B8(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<XT;)e+=t,r=n.next(e);return e>=XT?1/0:e}function zR(n){return typeof n=="function"}function H3(n,e){n.timeline=e,n.onfinish=null}const $R=n=>Array.isArray(n)&&typeof n[0]=="number",Dte={linearEasing:void 0};function Fte(n,e){const t=CR(n);return()=>{var r;return(r=Dte[e])!==null&&r!==void 0?r:t()}}const Bv=Fte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),U8=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(p0(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function z8(n){return!!(typeof n=="function"&&Bv()||!n||typeof n=="string"&&(n in qT||Bv())||$R(n)||Array.isArray(n)&&n.every(z8))}const Qg=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,qT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qg([0,.65,.55,1]),circOut:Qg([.55,0,1,.45]),backIn:Qg([.31,.01,.66,-.59]),backOut:Qg([.33,1.53,.69,.99])};function $8(n,e){if(n)return typeof n=="function"&&Bv()?U8(n,e):$R(n)?Qg(n):Array.isArray(n)?n.map(t=>$8(t,e)||qT.easeOut):qT[n]}const Da={x:!1,y:!1};function W8(){return Da.x||Da.y}function jte(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function H8(n,e){const t=jte(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function K3(n){return e=>{e.pointerType==="touch"||W8()||n(e)}}function Vte(n,e,t={}){const[r,i,s]=H8(n,t),a=K3(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const f=K3(d=>{u(d),l.removeEventListener("pointerleave",f)});l.addEventListener("pointerleave",f,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const K8=(n,e)=>e?n===e?!0:K8(n,e.parentElement):!1,WR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Gte=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Bte(n){return Gte.has(n.tagName)||n.tabIndex!==-1}const Jg=new WeakSet;function Y3(n){return e=>{e.key==="Enter"&&n(e)}}function lS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ute=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=Y3(()=>{if(Jg.has(t))return;lS(t,"down");const i=Y3(()=>{lS(t,"up")}),s=()=>lS(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function X3(n){return WR(n)&&!W8()}function zte(n,e,t={}){const[r,i,s]=H8(n,t),a=o=>{const l=o.currentTarget;if(!X3(o)||Jg.has(l))return;Jg.add(l);const u=e(o),f=(p,E)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",g),!(!X3(p)||!Jg.has(l))&&(Jg.delete(l),typeof u=="function"&&u(p,{success:E}))},d=p=>{f(p,t.useGlobalTarget||K8(l,p.target))},g=p=>{f(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!Bte(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>Ute(u,i),i)}),s}function $te(n){return n==="x"||n==="y"?Da[n]?null:(Da[n]=!0,()=>{Da[n]=!1}):Da.x||Da.y?null:(Da.x=Da.y=!0,()=>{Da.x=Da.y=!1})}const Y8=new Set(["width","height","top","left","right","bottom",...N0]);let Dy;function Wte(){Dy=void 0}const Do={now:()=>(Dy===void 0&&Do.set(ci.isProcessing||Gee.useManualTiming?ci.timestamp:performance.now()),Dy),set:n=>{Dy=n,queueMicrotask(Wte)}};function HR(n,e){n.indexOf(e)===-1&&n.push(e)}function KR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class YR{constructor(){this.subscriptions=[]}add(e){return HR(this.subscriptions,e),()=>KR(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function X8(n,e){return e?n*(1e3/e):0}const q3=30,Hte=n=>!isNaN(parseFloat(n));class Kte{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Do.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Do.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Hte(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new YR);const r=this.events[e].add(t);return e==="change"?()=>{r(),Un.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Do.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>q3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,q3);return X8(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mp(n,e){return new Kte(n,e)}function Yte(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,mp(t))}function Xte(n,e){const t=EE(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const o=ote(s[a]);Yte(n,a,o)}}function qte(n){return!!(Pi(n)&&n.add)}function ZT(n,e){const t=n.getValue("willChange");if(qte(t))return t.add(e)}function q8(n){return n.props[A8]}const Z8=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Zte=1e-7,Qte=12;function Jte(n,e,t,r,i){let s,a,o=0;do a=e+(t-e)/2,s=Z8(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>Zte&&++o<Qte);return a}function h1(n,e,t,r){if(n===e&&t===r)return zs;const i=s=>Jte(s,0,1,n,t);return s=>s===0||s===1?s:Z8(i(s),e,r)}const Q8=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,J8=n=>e=>1-n(1-e),e9=h1(.33,1.53,.69,.99),XR=J8(e9),t9=Q8(XR),n9=n=>(n*=2)<1?.5*XR(n):.5*(2-Math.pow(2,-10*(n-1))),qR=n=>1-Math.sin(Math.acos(n)),r9=J8(qR),i9=Q8(qR),s9=n=>/^0[^.\s]+$/u.test(n);function ene(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||s9(n):!0}const _m=n=>Math.round(n*1e5)/1e5,ZR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tne(n){return n==null}const nne=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,QR=(n,e)=>t=>!!(typeof t=="string"&&nne.test(t)&&t.startsWith(n)||e&&!tne(t)&&Object.prototype.hasOwnProperty.call(t,e)),a9=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(ZR);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},rne=n=>Ol(0,255,n),cS={...L0,transform:n=>Math.round(rne(n))},gh={test:QR("rgb","red"),parse:a9("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+cS.transform(n)+", "+cS.transform(e)+", "+cS.transform(t)+", "+_m(gp.transform(r))+")"};function ine(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const QT={test:QR("#"),parse:ine,transform:gh.transform},Sd={test:QR("hsl","hue"),parse:a9("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Oo.transform(_m(e))+", "+Oo.transform(_m(t))+", "+_m(gp.transform(r))+")"},Ai={test:n=>gh.test(n)||QT.test(n)||Sd.test(n),parse:n=>gh.test(n)?gh.parse(n):Sd.test(n)?Sd.parse(n):QT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?gh.transform(n):Sd.transform(n)},sne=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ane(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(ZR))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(sne))===null||t===void 0?void 0:t.length)||0)>0}const o9="number",l9="color",one="var",lne="var(",Z3="${}",cne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pp(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(cne,l=>(Ai.test(l)?(r.color.push(s),i.push(l9),t.push(Ai.parse(l))):l.startsWith(lne)?(r.var.push(s),i.push(one),t.push(l)):(r.number.push(s),i.push(o9),t.push(parseFloat(l))),++s,Z3)).split(Z3);return{values:t,split:o,indexes:r,types:i}}function c9(n){return pp(n).values}function u9(n){const{split:e,types:t}=pp(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===o9?s+=_m(i[a]):o===l9?s+=Ai.transform(i[a]):s+=i[a]}return s}}const une=n=>typeof n=="number"?0:n;function hne(n){const e=c9(n);return u9(n)(e.map(une))}const lu={test:ane,parse:c9,createTransformer:u9,getAnimatableNone:hne},fne=new Set(["brightness","contrast","saturate","opacity"]);function dne(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(ZR)||[];if(!r)return n;const i=t.replace(r,"");let s=fne.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const gne=/\b([a-z-]*)\(.*?\)/gu,JT={...lu,getAnimatableNone:n=>{const e=n.match(gne);return e?e.map(dne).join(" "):n}},mne={...DR,color:Ai,backgroundColor:Ai,outlineColor:Ai,fill:Ai,stroke:Ai,borderColor:Ai,borderTopColor:Ai,borderRightColor:Ai,borderBottomColor:Ai,borderLeftColor:Ai,filter:JT,WebkitFilter:JT},JR=n=>mne[n];function h9(n,e){let t=JR(n);return t!==JT&&(t=lu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const pne=new Set(["auto","none","0"]);function _ne(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!pne.has(s)&&pp(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=h9(t,i)}const Q3=n=>n===L0||n===kt,J3=(n,e)=>parseFloat(n.split(", ")[e]),eN=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return J3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?J3(s[1],n):0}},yne=new Set(["x","y","z"]),vne=N0.filter(n=>!yne.has(n));function xne(n){const e=[];return vne.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const y0={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:eN(4,13),y:eN(5,14)};y0.translateX=y0.x;y0.translateY=y0.y;const wh=new Set;let eI=!1,tI=!1;function f9(){if(tI){const n=Array.from(wh).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=xne(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}tI=!1,eI=!1,wh.forEach(n=>n.complete()),wh.clear()}function d9(){wh.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(tI=!0)})}function Ene(){d9(),f9()}class eC{constructor(e,t,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(wh.add(this),eI||(eI=!0,Un.read(d9),Un.resolveKeyframes(f9))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const l=r.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),wh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,wh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const g9=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),wne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Sne(n){const e=wne.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function m9(n,e,t=1){const[r,i]=Sne(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return g9(a)?parseFloat(a):a}return OR(i)?m9(i,e,t+1):i}const p9=n=>e=>e.test(n),Tne={test:n=>n==="auto",parse:n=>n},_9=[L0,kt,Oo,Ic,dte,fte,Tne],tN=n=>_9.find(p9(n));class y9 extends eC{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),OR(u))){const f=m9(u,t.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Y8.has(r)||e.length!==2)return;const[i,s]=e,a=tN(i),o=tN(s);if(a!==o)if(Q3(a)&&Q3(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)ene(e[i])&&r.push(i);r.length&&_ne(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=y0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=y0[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const nN=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(lu.test(n)||n==="0")&&!n.startsWith("url("));function Ine(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Ane(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=nN(i,e),o=nN(s,e);return!a||!o?!1:Ine(n)||(t==="spring"||zR(t))&&r}const Rne=n=>n!==null;function wE(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(Rne),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Cne=40;class v9{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Do.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Cne?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ene(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Do.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!Ane(e,r,i,s))if(a)this.options.duration=0;else{l&&l(wE(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,t);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...f},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const tr=(n,e,t)=>n+(e-n)*t;function uS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function bne({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=uS(l,o,n+1/3),s=uS(l,o,n),a=uS(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Uv(n,e){return t=>t>0?e:n}const hS=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Pne=[QT,gh,Sd],kne=n=>Pne.find(e=>e.test(n));function rN(n){const e=kne(n);if(!e)return!1;let t=e.parse(n);return e===Sd&&(t=bne(t)),t}const iN=(n,e)=>{const t=rN(n),r=rN(e);if(!t||!r)return Uv(n,e);const i={...t};return s=>(i.red=hS(t.red,r.red,s),i.green=hS(t.green,r.green,s),i.blue=hS(t.blue,r.blue,s),i.alpha=tr(t.alpha,r.alpha,s),gh.transform(i))},Mne=(n,e)=>t=>e(n(t)),f1=(...n)=>n.reduce(Mne),nI=new Set(["none","hidden"]);function Nne(n,e){return nI.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Lne(n,e){return t=>tr(n,e,t)}function tC(n){return typeof n=="number"?Lne:typeof n=="string"?OR(n)?Uv:Ai.test(n)?iN:Fne:Array.isArray(n)?x9:typeof n=="object"?Ai.test(n)?iN:One:Uv}function x9(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>tC(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function One(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=tC(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Dne(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=n.indexes[a][i[a]],l=(t=n.values[o])!==null&&t!==void 0?t:0;r[s]=l,i[a]++}return r}const Fne=(n,e)=>{const t=lu.createTransformer(e),r=pp(n),i=pp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?nI.has(n)&&!i.values.length||nI.has(e)&&!r.values.length?Nne(n,e):f1(x9(Dne(r,i),i.values),t):Uv(n,e)};function E9(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?tr(n,e,t):tC(n)(n,e)}const jne=5;function w9(n,e,t){const r=Math.max(e-jne,0);return X8(t-n(r),e-r)}const or={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fS=.001;function Vne({duration:n=or.duration,bounce:e=or.bounce,velocity:t=or.velocity,mass:r=or.mass}){let i,s,a=1-e;a=Ol(or.minDamping,or.maxDamping,a),n=Ol(or.minDuration,or.maxDuration,Tl(n)),a<1?(i=u=>{const f=u*a,d=f*n,g=f-t,p=rI(u,a),E=Math.exp(-d);return fS-g/p*E},s=u=>{const d=u*a*n,g=d*t+t,p=Math.pow(a,2)*Math.pow(u,2)*n,E=Math.exp(-d),v=rI(Math.pow(u,2),a);return(-i(u)+fS>0?-1:1)*((g-p)*E)/v}):(i=u=>{const f=Math.exp(-u*n),d=(u-t)*n+1;return-fS+f*d},s=u=>{const f=Math.exp(-u*n),d=(t-u)*(n*n);return f*d});const o=5/n,l=Bne(i,s,o);if(n=Sl(n),isNaN(l))return{stiffness:or.stiffness,damping:or.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:n}}}const Gne=12;function Bne(n,e,t){let r=t;for(let i=1;i<Gne;i++)r=r-n(r)/e(r);return r}function rI(n,e){return n*Math.sqrt(1-e*e)}const Une=["duration","bounce"],zne=["stiffness","damping","mass"];function sN(n,e){return e.some(t=>n[t]!==void 0)}function $ne(n){let e={velocity:or.velocity,stiffness:or.stiffness,damping:or.damping,mass:or.mass,isResolvedFromDuration:!1,...n};if(!sN(n,zne)&&sN(n,Une))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Ol(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:or.mass,stiffness:i,damping:s}}else{const t=Vne(n);e={...e,...t,mass:or.mass},e.isResolvedFromDuration=!0}return e}function S9(n=or.visualDuration,e=or.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:f,duration:d,velocity:g,isResolvedFromDuration:p}=$ne({...t,velocity:-Tl(t.velocity||0)}),E=g||0,v=u/(2*Math.sqrt(l*f)),w=a-s,T=Tl(Math.sqrt(l/f)),R=Math.abs(w)<5;r||(r=R?or.restSpeed.granular:or.restSpeed.default),i||(i=R?or.restDelta.granular:or.restDelta.default);let k;if(v<1){const O=rI(T,v);k=B=>{const P=Math.exp(-v*T*B);return a-P*((E+v*T*w)/O*Math.sin(O*B)+w*Math.cos(O*B))}}else if(v===1)k=O=>a-Math.exp(-T*O)*(w+(E+T*w)*O);else{const O=T*Math.sqrt(v*v-1);k=B=>{const P=Math.exp(-v*T*B),b=Math.min(O*B,300);return a-P*((E+v*T*w)*Math.sinh(b)+O*w*Math.cosh(b))/O}}const N={calculatedDuration:p&&d||null,next:O=>{const B=k(O);if(p)o.done=O>=d;else{let P=0;v<1&&(P=O===0?Sl(E):w9(k,O,B));const b=Math.abs(P)<=r,M=Math.abs(a-B)<=i;o.done=b&&M}return o.value=o.done?a:B,o},toString:()=>{const O=Math.min(B8(N),XT),B=U8(P=>N.next(O*P).value,O,30);return O+"ms "+B}};return N}function aN({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:f}){const d=n[0],g={done:!1,value:d},p=b=>o!==void 0&&b<o||l!==void 0&&b>l,E=b=>o===void 0?l:l===void 0||Math.abs(o-b)<Math.abs(l-b)?o:l;let v=t*e;const w=d+v,T=a===void 0?w:a(w);T!==w&&(v=T-d);const R=b=>-v*Math.exp(-b/r),k=b=>T+R(b),N=b=>{const M=R(b),F=k(b);g.done=Math.abs(M)<=u,g.value=g.done?T:F};let O,B;const P=b=>{p(g.value)&&(O=b,B=S9({keyframes:[g.value,E(g.value)],velocity:w9(k,b,g.value),damping:i,stiffness:s,restDelta:u,restSpeed:f}))};return P(0),{calculatedDuration:null,next:b=>{let M=!1;return!B&&O===void 0&&(M=!0,N(b),P(b)),O!==void 0&&b>=O?B.next(b-O):(!M&&N(b),g)}}}const Wne=h1(.42,0,1,1),Hne=h1(0,0,.58,1),T9=h1(.42,0,.58,1),Kne=n=>Array.isArray(n)&&typeof n[0]!="number",Yne={linear:zs,easeIn:Wne,easeInOut:T9,easeOut:Hne,circIn:qR,circInOut:i9,circOut:r9,backIn:XR,backInOut:t9,backOut:e9,anticipate:n9},oN=n=>{if($R(n)){E8(n.length===4);const[e,t,r,i]=n;return h1(e,t,r,i)}else if(typeof n=="string")return Yne[n];return n};function Xne(n,e,t){const r=[],i=t||E9,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||zs:e;o=f1(l,o)}r.push(o)}return r}function qne(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(E8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Xne(e,r,i),l=o.length,u=f=>{if(a&&f<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(f<n[d+1]);d++);const g=p0(n[d],n[d+1],f);return o[d](g)};return t?f=>u(Ol(n[0],n[s-1],f)):u}function Zne(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=p0(0,e,r);n.push(tr(t,1,i))}}function Qne(n){const e=[0];return Zne(e,n.length-1),e}function Jne(n,e){return n.map(t=>t*e)}function ere(n,e){return n.map(()=>e||T9).splice(0,n.length-1)}function zv({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=Kne(r)?r.map(oN):oN(r),s={done:!1,value:e[0]},a=Jne(t&&t.length===e.length?t:Qne(e),n),o=qne(a,e,{ease:Array.isArray(i)?i:ere(e,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const tre=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Un.update(e,!0),stop:()=>ou(e),now:()=>ci.isProcessing?ci.timestamp:Do.now()}},nre={decay:aN,inertia:aN,tween:zv,keyframes:zv,spring:S9},rre=n=>n/100;class nC extends v9{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,a=i?.KeyframeResolver||eC,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=zR(t)?t:nre[t]||zv;let l,u;o!==zv&&typeof e[0]!="number"&&(l=f1(rre,E9(e[0],e[1])),e=[0,100]);const f=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=B8(f));const{calculatedDuration:d}=f,g=d+i,p=g*(r+1)-i;return{generator:f,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:g,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:f,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:p,repeatType:E,repeatDelay:v,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-g*(this.speed>=0?1:-1),R=this.speed>=0?T<0:T>f;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let k=this.currentTime,N=s;if(p){const b=Math.min(this.currentTime,f)/d;let M=Math.floor(b),F=b%1;!F&&b>=1&&(F=1),F===1&&M--,M=Math.min(M,p+1),M%2&&(E==="reverse"?(F=1-F,v&&(F-=v/d)):E==="mirror"&&(N=a)),k=Ol(0,1,F)*d}const O=R?{done:!1,value:l[0]}:N.next(k);o&&(O.value=o(O.value));let{done:B}=O;!R&&u!==null&&(B=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return P&&i!==void 0&&(O.value=wE(l,this.options,i)),w&&w(O.value),P&&this.finish(),O}get duration(){const{resolved:e}=this;return e?Tl(e.calculatedDuration):0}get time(){return Tl(this.currentTime)}set time(e){e=Sl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Tl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=tre,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const ire=new Set(["opacity","clipPath","filter","transform"]);function sre(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const f=$8(o,i);return Array.isArray(f)&&(u.easing=f),n.animate(u,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const are=CR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$v=10,ore=2e4;function lre(n){return zR(n.type)||n.type==="spring"||!z8(n.ease)}function cre(n,e){const t=new nC({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<ore;)r=t.sample(s),i.push(r.value),s+=$v;return{times:void 0,keyframes:i,duration:s-$v,ease:"linear"}}const I9={anticipate:n9,backInOut:t9,circInOut:i9};function ure(n){return n in I9}class lN extends v9{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new y9(s,(a,o)=>this.onKeyframesResolved(a,o),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Bv()&&ure(s)&&(s=I9[s]),lre(this.options)){const{onComplete:d,onUpdate:g,motionValue:p,element:E,...v}=this.options,w=cre(e,v);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,i=w.times,s=w.ease,a="keyframes"}const f=sre(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(H3(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:d}=this.options;o.set(wE(e,this.options,t)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Tl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Tl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Sl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return zs;const{animation:r}=t;H3(r,e)}return zs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:f,onComplete:d,element:g,...p}=this.options,E=new nC({...p,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),v=Sl(this.time);u.setWithVelocity(E.sample(v-$v).value,E.sample(v).value,$v)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return are()&&r&&ire.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const hre={type:"spring",stiffness:500,damping:25,restSpeed:10},fre=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),dre={type:"keyframes",duration:.8},gre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mre=(n,{keyframes:e})=>e.length>2?dre:af.has(n)?n.startsWith("scale")?fre(e[1]):hre:gre;function pre({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...f}){return!!Object.keys(f).length}const rC=(n,e,t,r={},i,s)=>a=>{const o=UR(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Sl(l);let f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:i};pre(o)||(f={...f,...mre(n,f)}),f.duration&&(f.duration=Sl(f.duration)),f.repeatDelay&&(f.repeatDelay=Sl(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const g=wE(f.keyframes,o);if(g!==void 0)return Un.update(()=>{f.onUpdate(g),f.onComplete()}),new Ote([])}return!s&&lN.supports(f)?new lN(f):new nC(f)};function _re({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function A9(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:a=n.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const u=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const d in l){const g=n.getValue(d,(s=n.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||f&&_re(f,d))continue;const E={delay:t,...UR(a||{},d)};let v=!1;if(window.MotionHandoffAnimation){const T=q8(n);if(T){const R=window.MotionHandoffAnimation(T,d,Un);R!==null&&(E.startTime=R,v=!0)}}ZT(n,d),g.start(rC(d,g,p,n.shouldReduceMotion&&Y8.has(d)?{type:!1}:E,n,v));const w=g.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{Un.update(()=>{o&&Xte(n,o)})}),u}function iI(n,e,t={}){var r;const i=EE(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(A9(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:g}=s;return yre(n,e,f+u,d,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,f]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>f())}else return Promise.all([a(),o(t.delay)])}function yre(n,e,t=0,r=0,i=1,s){const a=[],o=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(n.variantChildren).sort(vre).forEach((u,f)=>{u.notify("AnimationStart",e),a.push(iI(u,e,{...s,delay:t+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function vre(n,e){return n.sortNodePosition(e)}function xre(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>iI(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=iI(n,e,t);else{const i=typeof e=="function"?EE(n,e,t.custom):e;r=Promise.all(A9(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const Ere=PR.length;function R9(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?R9(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Ere;t++){const r=PR[t],i=n.props[r];(dp(i)||i===!1)&&(e[r]=i)}return e}const wre=[...bR].reverse(),Sre=bR.length;function Tre(n){return e=>Promise.all(e.map(({animation:t,options:r})=>xre(n,t,r)))}function Ire(n){let e=Tre(n),t=cN(),r=!0;const i=l=>(u,f)=>{var d;const g=EE(n,f,l==="exit"?(d=n.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(g){const{transition:p,transitionEnd:E,...v}=g;u={...u,...v,...E}}return u};function s(l){e=l(n)}function a(l){const{props:u}=n,f=R9(n.parent)||{},d=[],g=new Set;let p={},E=1/0;for(let w=0;w<Sre;w++){const T=wre[w],R=t[T],k=u[T]!==void 0?u[T]:f[T],N=dp(k),O=T===l?R.isActive:null;O===!1&&(E=w);let B=k===f[T]&&k!==u[T]&&N;if(B&&r&&n.manuallyAnimateOnMount&&(B=!1),R.protectedKeys={...p},!R.isActive&&O===null||!k&&!R.prevProp||vE(k)||typeof k=="boolean")continue;const P=Are(R.prevProp,k);let b=P||T===l&&R.isActive&&!B&&N||w>E&&N,M=!1;const F=Array.isArray(k)?k:[k];let V=F.reduce(i(T),{});O===!1&&(V={});const{prevResolvedValues:W={}}=R,D={...W,...V},Ie=Ce=>{b=!0,g.has(Ce)&&(M=!0,g.delete(Ce)),R.needsAnimating[Ce]=!0;const ce=n.getValue(Ce);ce&&(ce.liveStyle=!1)};for(const Ce in D){const ce=V[Ce],Re=W[Ce];if(p.hasOwnProperty(Ce))continue;let me=!1;YT(ce)&&YT(Re)?me=!G8(ce,Re):me=ce!==Re,me?ce!=null?Ie(Ce):g.add(Ce):ce!==void 0&&g.has(Ce)?Ie(Ce):R.protectedKeys[Ce]=!0}R.prevProp=k,R.prevResolvedValues=V,R.isActive&&(p={...p,...V}),r&&n.blockInitialAnimation&&(b=!1),b&&(!(B&&P)||M)&&d.push(...F.map(Ce=>({animation:Ce,options:{type:T}})))}if(g.size){const w={};g.forEach(T=>{const R=n.getBaseTarget(T),k=n.getValue(T);k&&(k.liveStyle=!0),w[T]=R??null}),d.push({animation:w})}let v=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(d):Promise.resolve()}function o(l,u){var f;if(t[l].isActive===u)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(g=>{var p;return(p=g.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),t[l].isActive=u;const d=a(l);for(const g in t)t[g].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=cN(),r=!0}}}function Are(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!G8(e,n):!1}function Hu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cN(){return{animate:Hu(!0),whileInView:Hu(),whileHover:Hu(),whileTap:Hu(),whileDrag:Hu(),whileFocus:Hu(),exit:Hu()}}class vu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Rre extends vu{constructor(e){super(e),e.animationState||(e.animationState=Ire(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();vE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Cre=0;class bre extends vu{constructor(){super(...arguments),this.id=Cre++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Pre={animation:{Feature:Rre},exit:{Feature:bre}};function _p(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function d1(n){return{point:{x:n.pageX,y:n.pageY}}}const kre=n=>e=>WR(e)&&n(e,d1(e));function ym(n,e,t,r){return _p(n,e,kre(t),r)}const uN=(n,e)=>Math.abs(n-e);function Mre(n,e){const t=uN(n.x,e.x),r=uN(n.y,e.y);return Math.sqrt(t**2+r**2)}class C9{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=gS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=Mre(d.offset,{x:0,y:0})>=3;if(!g&&!p)return;const{point:E}=d,{timestamp:v}=ci;this.history.push({...E,timestamp:v});const{onStart:w,onMove:T}=this.handlers;g||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,d)},this.handlePointerMove=(d,g)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=dS(g,this.transformPagePoint),Un.update(this.updatePoint,!0)},this.handlePointerUp=(d,g)=>{this.end();const{onEnd:p,onSessionEnd:E,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=gS(d.type==="pointercancel"?this.lastMoveEventInfo:dS(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,w),E&&E(d,w)},!WR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=d1(e),o=dS(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=ci;this.history=[{...l,timestamp:u}];const{onSessionStart:f}=t;f&&f(e,gS(o,this.history)),this.removeListeners=f1(ym(this.contextWindow,"pointermove",this.handlePointerMove),ym(this.contextWindow,"pointerup",this.handlePointerUp),ym(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ou(this.updatePoint)}}function dS(n,e){return e?{point:e(n.point)}:n}function hN(n,e){return{x:n.x-e.x,y:n.y-e.y}}function gS({point:n},e){return{point:n,delta:hN(n,b9(e)),offset:hN(n,Nre(e)),velocity:Lre(e,.1)}}function Nre(n){return n[0]}function b9(n){return n[n.length-1]}function Lre(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=b9(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Sl(e)));)t--;if(!r)return{x:0,y:0};const s=Tl(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const P9=1e-4,Ore=1-P9,Dre=1+P9,k9=.01,Fre=0-k9,jre=0+k9;function Ks(n){return n.max-n.min}function Vre(n,e,t){return Math.abs(n-e)<=t}function fN(n,e,t,r=.5){n.origin=r,n.originPoint=tr(e.min,e.max,n.origin),n.scale=Ks(t)/Ks(e),n.translate=tr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Ore&&n.scale<=Dre||isNaN(n.scale))&&(n.scale=1),(n.translate>=Fre&&n.translate<=jre||isNaN(n.translate))&&(n.translate=0)}function vm(n,e,t,r){fN(n.x,e.x,t.x,r?r.originX:void 0),fN(n.y,e.y,t.y,r?r.originY:void 0)}function dN(n,e,t){n.min=t.min+e.min,n.max=n.min+Ks(e)}function Gre(n,e,t){dN(n.x,e.x,t.x),dN(n.y,e.y,t.y)}function gN(n,e,t){n.min=e.min-t.min,n.max=n.min+Ks(e)}function xm(n,e,t){gN(n.x,e.x,t.x),gN(n.y,e.y,t.y)}function Bre(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?tr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?tr(t,n,r.max):Math.min(n,t)),n}function mN(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Ure(n,{top:e,left:t,bottom:r,right:i}){return{x:mN(n.x,t,i),y:mN(n.y,e,r)}}function pN(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function zre(n,e){return{x:pN(n.x,e.x),y:pN(n.y,e.y)}}function $re(n,e){let t=.5;const r=Ks(n),i=Ks(e);return i>r?t=p0(e.min,e.max-r,n.min):r>i&&(t=p0(n.min,n.max-i,e.min)),Ol(0,1,t)}function Wre(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const sI=.35;function Hre(n=sI){return n===!1?n=0:n===!0&&(n=sI),{x:_N(n,"left","right"),y:_N(n,"top","bottom")}}function _N(n,e,t){return{min:yN(n,e),max:yN(n,t)}}function yN(n,e){return typeof n=="number"?n:n[e]||0}const vN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Td=()=>({x:vN(),y:vN()}),xN=()=>({min:0,max:0}),mr=()=>({x:xN(),y:xN()});function oa(n){return[n("x"),n("y")]}function M9({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Kre({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Yre(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function mS(n){return n===void 0||n===1}function aI({scale:n,scaleX:e,scaleY:t}){return!mS(n)||!mS(e)||!mS(t)}function eh(n){return aI(n)||N9(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function N9(n){return EN(n.x)||EN(n.y)}function EN(n){return n&&n!=="0%"}function Wv(n,e,t){const r=n-t,i=e*r;return t+i}function wN(n,e,t,r,i){return i!==void 0&&(n=Wv(n,i,r)),Wv(n,t,r)+e}function oI(n,e=0,t=1,r,i){n.min=wN(n.min,e,t,r,i),n.max=wN(n.max,e,t,r,i)}function L9(n,{x:e,y:t}){oI(n.x,e.translate,e.scale,e.originPoint),oI(n.y,t.translate,t.scale,t.originPoint)}const SN=.999999999999,TN=1.0000000000001;function Xre(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ad(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,L9(n,a)),r&&eh(s.latestValues)&&Ad(n,s.latestValues))}e.x<TN&&e.x>SN&&(e.x=1),e.y<TN&&e.y>SN&&(e.y=1)}function Id(n,e){n.min=n.min+e,n.max=n.max+e}function IN(n,e,t,r,i=.5){const s=tr(n.min,n.max,i);oI(n,e,t,s,r)}function Ad(n,e){IN(n.x,e.x,e.scaleX,e.scale,e.originX),IN(n.y,e.y,e.scaleY,e.scale,e.originY)}function O9(n,e){return M9(Yre(n.getBoundingClientRect(),e))}function qre(n,e,t){const r=O9(n,t),{scroll:i}=e;return i&&(Id(r.x,i.offset.x),Id(r.y,i.offset.y)),r}const D9=({current:n})=>n?n.ownerDocument.defaultView:null,Zre=new WeakMap;class Qre{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(d1(f).point)},s=(f,d)=>{const{drag:g,dragPropagation:p,onDragStart:E}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$te(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oa(w=>{let T=this.getAxisMotionValue(w).get()||0;if(Oo.test(T)){const{projection:R}=this.visualElement;if(R&&R.layout){const k=R.layout.layoutBox[w];k&&(T=Ks(k)*(parseFloat(T)/100))}}this.originPoint[w]=T}),E&&Un.postRender(()=>E(f,d)),ZT(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:E,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=d;if(p&&this.currentDirection===null){this.currentDirection=Jre(w),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),v&&v(f,d)},o=(f,d)=>this.stop(f,d),l=()=>oa(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new C9(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:D9(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Un.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!ey(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Bre(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&wd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Ure(i.layoutBox,t):this.constraints=!1,this.elastic=Hre(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&oa(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Wre(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!wd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=qre(r,i.root,this.visualElement.getTransformPagePoint());let a=zre(i.layout.layoutBox,s);if(t){const o=t(Kre(a));this.hasMutatedConstraints=!!o,o&&(a=M9(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=oa(f=>{if(!ey(f,t,this.currentDirection))return;let d=l&&l[f]||{};a&&(d={min:0,max:0});const g=i?200:1e6,p=i?40:1e7,E={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,E)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return ZT(this.visualElement,e),r.start(rC(e,r,0,t,this.visualElement,!1))}stopAnimation(){oa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){oa(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){oa(t=>{const{drag:r}=this.getProps();if(!ey(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-tr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!wd(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};oa(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=$re({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),oa(a=>{if(!ey(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(tr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;Zre.set(this.visualElement,this);const e=this.visualElement.current,t=ym(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();wd(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Un.read(r);const a=_p(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(oa(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=sI,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function ey(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Jre(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class eie extends vu{constructor(e){super(e),this.removeGroupControls=zs,this.removeListeners=zs,this.controls=new Qre(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zs}unmount(){this.removeGroupControls(),this.removeListeners()}}const AN=n=>(e,t)=>{n&&Un.postRender(()=>n(e,t))};class tie extends vu{constructor(){super(...arguments),this.removePointerDownListener=zs}onPointerDown(e){this.session=new C9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:D9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:AN(e),onStart:AN(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Un.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=ym(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Fy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RN(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const jg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(kt.test(n))n=parseFloat(n);else return n;const t=RN(n,e.target.x),r=RN(n,e.target.y);return`${t}% ${r}%`}},nie={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=lu.parse(n);if(i.length>5)return r;const s=lu.createTransformer(n),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=tr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class rie extends oe.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Ste(iie),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Fy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Un.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),MR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function F9(n){const[e,t]=v8(),r=oe.useContext(TR);return y.jsx(rie,{...n,layoutGroup:r,switchLayoutGroup:oe.useContext(R8),isPresent:e,safeToRemove:t})}const iie={borderRadius:{...jg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jg,borderTopRightRadius:jg,borderBottomLeftRadius:jg,borderBottomRightRadius:jg,boxShadow:nie};function sie(n,e,t){const r=Pi(n)?n:mp(n);return r.start(rC("",r,e,t)),r.animation}function aie(n){return n instanceof SVGElement&&n.tagName!=="svg"}const oie=(n,e)=>n.depth-e.depth;class lie{constructor(){this.children=[],this.isDirty=!1}add(e){HR(this.children,e),this.isDirty=!0}remove(e){KR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oie),this.isDirty=!1,this.children.forEach(e)}}function cie(n,e){const t=Do.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(ou(r),n(s-e))};return Un.read(r,!0),()=>ou(r)}const j9=["TopLeft","TopRight","BottomLeft","BottomRight"],uie=j9.length,CN=n=>typeof n=="string"?parseFloat(n):n,bN=n=>typeof n=="number"||kt.test(n);function hie(n,e,t,r,i,s){i?(n.opacity=tr(0,t.opacity!==void 0?t.opacity:1,fie(r)),n.opacityExit=tr(e.opacity!==void 0?e.opacity:1,0,die(r))):s&&(n.opacity=tr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<uie;a++){const o=`border${j9[a]}Radius`;let l=PN(e,o),u=PN(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||bN(l)===bN(u)?(n[o]=Math.max(tr(CN(l),CN(u),r),0),(Oo.test(u)||Oo.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=tr(e.rotate||0,t.rotate||0,r))}function PN(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const fie=V9(0,.5,r9),die=V9(.5,.95,zs);function V9(n,e,t){return r=>r<n?0:r>e?1:t(p0(n,e,r))}function kN(n,e){n.min=e.min,n.max=e.max}function sa(n,e){kN(n.x,e.x),kN(n.y,e.y)}function MN(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function NN(n,e,t,r,i){return n-=e,n=Wv(n,1/t,r),i!==void 0&&(n=Wv(n,1/i,r)),n}function gie(n,e=0,t=1,r=.5,i,s=n,a=n){if(Oo.test(e)&&(e=parseFloat(e),e=tr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=tr(s.min,s.max,r);n===s&&(o-=e),n.min=NN(n.min,e,t,o,i),n.max=NN(n.max,e,t,o,i)}function LN(n,e,[t,r,i],s,a){gie(n,e[t],e[r],e[i],e.scale,s,a)}const mie=["x","scaleX","originX"],pie=["y","scaleY","originY"];function ON(n,e,t,r){LN(n.x,e,mie,t?t.x:void 0,r?r.x:void 0),LN(n.y,e,pie,t?t.y:void 0,r?r.y:void 0)}function DN(n){return n.translate===0&&n.scale===1}function G9(n){return DN(n.x)&&DN(n.y)}function FN(n,e){return n.min===e.min&&n.max===e.max}function _ie(n,e){return FN(n.x,e.x)&&FN(n.y,e.y)}function jN(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function B9(n,e){return jN(n.x,e.x)&&jN(n.y,e.y)}function VN(n){return Ks(n.x)/Ks(n.y)}function GN(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class yie{constructor(){this.members=[]}add(e){HR(this.members,e),e.scheduleRender()}remove(e){if(KR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vie(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:f,rotateX:d,rotateY:g,skewX:p,skewY:E}=t;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),g&&(r+=`rotateY(${g}deg) `),p&&(r+=`skewX(${p}deg) `),E&&(r+=`skewY(${E}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const th={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},em=typeof window<"u"&&window.MotionDebug!==void 0,pS=["","X","Y","Z"],xie={visibility:"hidden"},BN=1e3;let Eie=0;function _S(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function U9(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=q8(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Un,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&U9(r)}function z9({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=Eie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,em&&(th.totalNodes=th.resolvedTargetDeltas=th.recalculatedProjection=0),this.nodes.forEach(Tie),this.nodes.forEach(bie),this.nodes.forEach(Pie),this.nodes.forEach(Iie),em&&window.MotionDebug.record(th)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new lie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new YR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=aie(a),this.instance=a;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=cie(g,250),Fy.hasAnimatedSinceResize&&(Fy.hasAnimatedSinceResize=!1,this.nodes.forEach(zN))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeTargetChanged:p,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||f.getDefaultTransition()||Oie,{onLayoutAnimationStart:w,onLayoutAnimationComplete:T}=f.getProps(),R=!this.targetLayout||!B9(this.targetLayout,E)||p,k=!g&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||g&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,k);const N={...UR(v,"layout"),onPlay:w,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else g||zN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ou(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kie),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&U9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UN);return}this.isUpdating||this.nodes.forEach(Rie),this.isUpdating=!1,this.nodes.forEach(Cie),this.nodes.forEach(wie),this.nodes.forEach(Sie),this.clearAllSnapshots();const o=Do.now();ci.delta=Ol(0,1e3/60,o-ci.timestamp),ci.timestamp=o,ci.isProcessing=!0,oS.update.process(ci),oS.preRender.process(ci),oS.render.process(ci),ci.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,MR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Aie),this.sharedNodes.forEach(Mie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Un.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!G9(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;a&&(o||eh(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Die(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return mr();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Fie))){const{scroll:f}=this.root;f&&(Id(l.x,f.offset.x),Id(l.y,f.offset.y))}return l}removeElementScroll(a){var o;const l=mr();if(sa(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:d,options:g}=f;f!==this.root&&d&&g.layoutScroll&&(d.wasRoot&&sa(l,a),Id(l.x,d.offset.x),Id(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=mr();sa(l,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ad(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),eh(f.latestValues)&&Ad(l,f.latestValues)}return eh(this.latestValues)&&Ad(l,this.latestValues),l}removeTransform(a){const o=mr();sa(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!eh(u.latestValues))continue;aI(u.latestValues)&&u.updateSnapshot();const f=mr(),d=u.measurePageBox();sa(f,d),ON(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return eh(this.latestValues)&&ON(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ci.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=ci.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mr(),this.relativeTargetOrigin=mr(),xm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),sa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=mr(),this.targetWithTransforms=mr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sa(this.target,this.layout.layoutBox),L9(this.target,this.targetDelta)):sa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mr(),this.relativeTargetOrigin=mr(),xm(this.relativeTargetOrigin,this.target,p.target),sa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}em&&th.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||aI(this.parent.latestValues)||N9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ci.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;sa(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,p=this.treeScale.y;Xre(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=mr());const{target:E}=o;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MN(this.prevProjectionDelta.x,this.projectionDelta.x),MN(this.prevProjectionDelta.y,this.projectionDelta.y)),vm(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==p||!GN(this.projectionDelta.x,this.prevProjectionDelta.x)||!GN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),em&&th.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Td(),this.projectionDelta=Td(),this.projectionDeltaWithTransform=Td()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},d=Td();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=mr(),p=l?l.source:void 0,E=this.layout?this.layout.source:void 0,v=p!==E,w=this.getStack(),T=!w||w.members.length<=1,R=!!(v&&!T&&this.options.crossfade===!0&&!this.path.some(Lie));this.animationProgress=0;let k;this.mixTargetDelta=N=>{const O=N/1e3;$N(d.x,a.x,O),$N(d.y,a.y,O),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Nie(this.relativeTarget,this.relativeTargetOrigin,g,O),k&&_ie(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=mr()),sa(k,this.relativeTarget)),v&&(this.animationValues=f,hie(f,u,this.latestValues,O,R,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ou(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Un.update(()=>{Fy.hasAnimatedSinceResize=!0,this.currentAnimation=sie(0,BN,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:f}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&$9(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||mr();const d=Ks(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const g=Ks(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}sa(o,l),Ad(o,f),vm(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new yie),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&_S("z",a,u,this.animationValues);for(let f=0;f<pS.length;f++)_S(`rotate${pS[f]}`,a,u,this.animationValues),_S(`skew${pS[f]}`,a,u,this.animationValues);a.render();for(const f in u)a.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xie;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Oy(a?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Oy(a?.pointerEvents)||""),this.hasProjected&&!eh(this.latestValues)&&(v.transform=f?f({},""):"none",this.hasProjected=!1),v}const g=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=vie(this.projectionDeltaWithTransform,this.treeScale,g),f&&(u.transform=f(g,u.transform));const{x:p,y:E}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${E.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const v in Gv){if(g[v]===void 0)continue;const{correct:w,applyTo:T}=Gv[v],R=u.transform==="none"?g[v]:w(g[v],d);if(T){const k=T.length;for(let N=0;N<k;N++)u[T[N]]=R}else u[v]=R}return this.options.layoutId&&(u.pointerEvents=d===this?Oy(a?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(UN),this.root.sharedNodes.clear()}}}function wie(n){n.updateLayout()}function Sie(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?oa(d=>{const g=a?t.measuredBox[d]:t.layoutBox[d],p=Ks(g);g.min=r[d].min,g.max=g.min+p}):$9(s,t.layoutBox,r)&&oa(d=>{const g=a?t.measuredBox[d]:t.layoutBox[d],p=Ks(r[d]);g.max=g.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const o=Td();vm(o,r,t.layoutBox);const l=Td();a?vm(l,n.applyTransform(i,!0),t.measuredBox):vm(l,r,t.layoutBox);const u=!G9(o);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:g,layout:p}=d;if(g&&p){const E=mr();xm(E,t.layoutBox,g.layoutBox);const v=mr();xm(v,r,p.layoutBox),B9(E,v)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=E,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Tie(n){em&&th.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Iie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Aie(n){n.clearSnapshot()}function UN(n){n.clearMeasurements()}function Rie(n){n.isLayoutDirty=!1}function Cie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function zN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function bie(n){n.resolveTargetDelta()}function Pie(n){n.calcProjection()}function kie(n){n.resetSkewAndRotation()}function Mie(n){n.removeLeadSnapshot()}function $N(n,e,t){n.translate=tr(e.translate,0,t),n.scale=tr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function WN(n,e,t,r){n.min=tr(e.min,t.min,r),n.max=tr(e.max,t.max,r)}function Nie(n,e,t,r){WN(n.x,e.x,t.x,r),WN(n.y,e.y,t.y,r)}function Lie(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Oie={duration:.45,ease:[.4,0,.1,1]},HN=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),KN=HN("applewebkit/")&&!HN("chrome/")?Math.round:zs;function YN(n){n.min=KN(n.min),n.max=KN(n.max)}function Die(n){YN(n.x),YN(n.y)}function $9(n,e,t){return n==="position"||n==="preserve-aspect"&&!Vre(VN(e),VN(t),.2)}function Fie(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const jie=z9({attachResizeListener:(n,e)=>_p(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yS={current:void 0},W9=z9({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!yS.current){const n=new jie({});n.mount(window),n.setOptions({layoutScroll:!0}),yS.current=n}return yS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Vie={pan:{Feature:tie},drag:{Feature:eie,ProjectionNode:W9,MeasureLayout:F9}};function XN(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&Un.postRender(()=>s(e,d1(e)))}class Gie extends vu{mount(){const{current:e}=this.node;e&&(this.unmount=Vte(e,t=>(XN(this.node,t,"Start"),r=>XN(this.node,r,"End"))))}unmount(){}}class Bie extends vu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=f1(_p(this.node.current,"focus",()=>this.onFocus()),_p(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qN(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&Un.postRender(()=>s(e,d1(e)))}class Uie extends vu{mount(){const{current:e}=this.node;e&&(this.unmount=zte(e,t=>(qN(this.node,t,"Start"),(r,{success:i})=>qN(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const lI=new WeakMap,vS=new WeakMap,zie=n=>{const e=lI.get(n.target);e&&e(n)},$ie=n=>{n.forEach(zie)};function Wie({root:n,...e}){const t=n||document;vS.has(t)||vS.set(t,{});const r=vS.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver($ie,{root:n,...e})),r[i]}function Hie(n,e,t){const r=Wie(e);return lI.set(n,t),r.observe(n),()=>{lI.delete(n),r.unobserve(n)}}const Kie={some:0,all:1};class Yie extends vu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Kie[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),g=u?f:d;g&&g(l)};return Hie(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Xie(e,t))&&this.startObserver()}unmount(){}}function Xie({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const qie={inView:{Feature:Yie},tap:{Feature:Uie},focus:{Feature:Bie},hover:{Feature:Gie}},Zie={layout:{ProjectionNode:W9,MeasureLayout:F9}},cI={current:null},H9={current:!1};function Qie(){if(H9.current=!0,!!RR)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>cI.current=n.matches;n.addListener(e),e()}else cI.current=!1}const Jie=[..._9,Ai,lu],ese=n=>Jie.find(p9(n)),ZN=new WeakMap;function tse(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Pi(i))n.addValue(r,i);else if(Pi(s))n.addValue(r,mp(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,mp(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const QN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nse{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Do.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Un.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:f}=a;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=xE(t),this.isVariantNode=I8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in g){const E=g[p];l[p]!==void 0&&Pi(E)&&E.set(l[p],!1)}}mount(e){this.current=e,ZN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),H9.current||Qie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:cI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ZN.delete(this.current),this.projection&&this.projection.unmount(),ou(this.notifyUpdate),ou(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=af.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Un.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _0){const t=_0[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<QN.length;r++){const i=QN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=tse(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=mp(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(g9(i)||s9(i))?i=parseFloat(i):!ese(i)&&lu.test(t)&&(i=h9(e,t)),this.setBaseTarget(e,Pi(i)?i.get():i)),Pi(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=LR(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Pi(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new YR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class K9 extends nse{constructor(){super(...arguments),this.KeyframeResolver=y9}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function rse(n){return window.getComputedStyle(n)}class ise extends K9{constructor(){super(...arguments),this.type="html",this.renderInstance=L8}readValueFromInstance(e,t){if(af.has(t)){const r=JR(t);return r&&r.default||0}else{const r=rse(e),i=(k8(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return O9(e,t)}build(e,t,r){FR(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return BR(e,t,r)}}class sse extends K9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(af.has(t)){const r=JR(t);return r&&r.default||0}return t=O8.has(t)?t:kR(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return j8(e,t,r)}build(e,t,r){jR(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){D8(e,t,r,i)}mount(e){this.isSVGTag=GR(e.tagName),super.mount(e)}}const ase=(n,e)=>NR(n)?new sse(e):new ise(e,{allowProjection:n!==oe.Fragment}),ose=Mte({...Pre,...qie,...Vie,...Zie},ase),Wt=Kee(ose);const lse=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cse=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),JN=n=>{const e=cse(n);return e.charAt(0).toUpperCase()+e.slice(1)},Y9=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),use=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var hse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fse=oe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>oe.createElement("svg",{ref:l,...hse,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Y9("lucide",i),...!s&&!use(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,f])=>oe.createElement(u,f)),...Array.isArray(s)?s:[s]]));const Pt=(n,e)=>{const t=oe.forwardRef(({className:r,...i},s)=>oe.createElement(fse,{ref:s,iconNode:e,className:Y9(`lucide-${lse(JN(n))}`,`lucide-${n}`,r),...i}));return t.displayName=JN(n),t};const dse=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],gse=Pt("book-open",dse);const mse=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],X9=Pt("bug",mse);const pse=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_se=Pt("calendar",pse);const yse=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],q9=Pt("chart-column",yse);const vse=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Z9=Pt("check",vse);const xse=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],iC=Pt("chevron-down",xse);const Ese=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],wse=Pt("chevron-left",Ese);const Sse=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],SE=Pt("chevron-right",Sse);const Tse=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Q9=Pt("chevron-up",Tse);const Ise=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],J9=Pt("circle-alert",Ise);const Ase=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rse=Pt("circle-check-big",Ase);const Cse=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],bse=Pt("code",Cse);const Pse=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kse=Pt("compass",Pse);const Mse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],eL=Pt("crosshair",Mse);const Nse=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],uI=Pt("download",Nse);const Lse=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],TE=Pt("external-link",Lse);const Ose=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],sC=Pt("eye-off",Ose);const Dse=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aC=Pt("eye",Dse);const Fse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],oC=Pt("file-text",Fse);const jse=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Vse=Pt("folder-open",jse);const Gse=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Bse=Pt("folder",Gse);const Use=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],zse=Pt("grid-3x3",Use);const $se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],tL=Pt("info",$se);const Wse=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Dl=Pt("layers",Wse);const Hse=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Kse=Pt("link",Hse);const Yse=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lC=Pt("loader-circle",Yse);const Xse=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qse=Pt("locate-fixed",Xse);const Zse=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hI=Pt("lock",Zse);const Qse=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Jse=Pt("log-out",Qse);const eae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],cu=Pt("map-pin",eae);const tae=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],cC=Pt("map",tae);const nae=[["path",{d:"M5 12h14",key:"1ays0h"}]],rae=Pt("minus",nae);const iae=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],fI=Pt("mountain",iae);const sae=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],aae=Pt("mouse-pointer",sae);const oae=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Hv=Pt("navigation",oae);const lae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],cae=Pt("pencil",lae);const uae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Il=Pt("plus",uae);const hae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fae=Pt("rotate-ccw",hae);const dae=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],gae=Pt("ruler",dae);const mae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pae=Pt("save",mae);const _ae=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],yae=Pt("scale",_ae);const vae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ej=Pt("search",vae);const xae=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tj=Pt("settings",xae);const Eae=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],wae=Pt("sliders-horizontal",Eae);const Sae=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Tae=Pt("smartphone",Sae);const Iae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Aae=Pt("target",Iae);const Rae=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],g1=Pt("trash-2",Rae);const Cae=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],bae=Pt("tree-palm",Cae);const Pae=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],kae=Pt("type",Pae);const Mae=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],uC=Pt("upload",Mae);const Nae=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Lae=Pt("waves",Nae);const Oae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],eo=Pt("x",Oae);function Dae(){const{tracking:n,startTracking:e,stopTracking:t,updatePosition:r,setWatchId:i,resetFirstFix:s}=Bi(),a=oe.useCallback(l=>{r(l)},[r]),o=oe.useCallback(l=>{console.error("GPS error:",l),alert(`GPS fout: ${l.message}`),t()},[t]);return oe.useEffect(()=>{if(!n)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),t();return}const l=navigator.geolocation.watchPosition(a,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(l),()=>{navigator.geolocation.clearWatch(l)}},[n,a,o,i,t]),{tracking:n,start:e,stop:t,toggle:()=>n?t():e()}}function Fae(){const{tracking:n,toggle:e}=Dae();return y.jsx(Wt.button,{className:`
        fixed bottom-2 right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},animate:n?{scale:[1,1.02,1]}:{},transition:n?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":n?"GPS tracking actief":"GPS tracking starten",title:n?"GPS tracking actief":"GPS tracking starten",children:y.jsx(qse,{size:22,strokeWidth:2})})}const jae="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`);function Vae(){const n=vs(p=>p.map),e=Bi(p=>p.position),t=Bi(p=>p.accuracy),r=Bi(p=>p.tracking),i=Bi(p=>p.smoothHeading),s=Oi(p=>p.showAccuracyCircle),a=Bi(p=>p.firstFix),o=Bi(p=>p.resetFirstFix),l=Bi(p=>p.config.centerOnUser),u=oe.useRef(null),f=oe.useRef(null),d=oe.useRef(null),g=oe.useMemo(()=>p=>new nr({image:new Up({src:jae,scale:.9,rotation:p,rotateWithView:!1,anchor:[.5,.5]})}),[]);return oe.useEffect(()=>{if(!n||!r&&!e)return;const p=Rh([5.1214,52.0907]);return u.current=new qa({geometry:new Za(p)}),u.current.setStyle(g(0)),f.current=new qa({geometry:new Za(p)}),d.current=new Wp({source:new Gp({features:[f.current,u.current]}),zIndex:1e3}),n.addLayer(d.current),()=>{d.current&&n&&n.removeLayer(d.current)}},[n,r,e,g]),oe.useEffect(()=>{if(!n||!e||!u.current||!f.current)return;const p=Rh([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(p),f.current.getGeometry()?.setCoordinates(p),s&&t){const E=n.getView().getResolution()||1,v=Math.min(t/E,80);f.current.setStyle(new nr({image:new bl({radius:v,fill:new Qr({color:"rgba(66, 133, 244, 0.12)"})})}))}else f.current.setStyle(new nr({}));if(a&&r){n.getView().setCenter(p),n.getView().setZoom(17),o();return}r&&l&&!a&&n.getView().animate({center:p,duration:150})},[n,r,e,t,a,o,l,s]),oe.useEffect(()=>{if(!u.current)return;const p=i!==null?i*Math.PI/180:0;u.current.setStyle(g(p))},[i,g]),null}function Gae(){const n=Wi(t=>t.themesPanelOpen),e=Wi(t=>t.toggleThemesPanel);return y.jsx(Wt.button,{className:`
        fixed bottom-[60px] right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":n?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:y.jsx(cC,{size:22,strokeWidth:2})})}function Bae(){return y.jsx(Gae,{})}const ty=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],Rc=["Mineraal","Fossiel","Erfgoed","Monument","Overig"],O0=va()(M0((n,e)=>({layers:[],colorIndex:0,addLayer:(t,r=Rc)=>{const i=crypto.randomUUID(),s=ty[e().colorIndex%ty.length];return n(a=>({layers:[...a.layers,{id:i,name:t,color:s,categories:[...r],points:[],visible:!0,createdAt:new Date().toISOString()}],colorIndex:a.colorIndex+1})),i},removeLayer:t=>{n(r=>({layers:r.layers.filter(i=>i.id!==t)}))},updateLayer:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)}))},toggleVisibility:t=>{n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)}))},addPoint:(t,r)=>{const i={...r,id:crypto.randomUUID(),createdAt:new Date().toISOString()};n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:[...a.points,i]}:a)}))},removePoint:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,points:s.points.filter(a=>a.id!==r)}:s)}))},updatePoint:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,...i}:o)}:a)}))},addCategory:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t&&!s.categories.includes(r)?{...s,categories:[...s.categories,r]}:s)}))},removeCategory:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,categories:s.categories.filter(a=>a!==r)}:s)}))},exportLayerAsGeoJSON:t=>{const r=e().layers.find(l=>l.id===t);if(!r)return;const i={type:"FeatureCollection",properties:{name:r.name,color:r.color,categories:r.categories,createdAt:r.createdAt,exportedAt:new Date().toISOString()},features:r.points.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:{id:l.id,name:l.name,category:l.category,notes:l.notes,url:l.url,createdAt:l.createdAt}}))},s=new Blob([JSON.stringify(i,null,2)],{type:"application/geo+json"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`${r.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},importLayerFromGeoJSON:t=>{try{const r=JSON.parse(t);if(r.type!=="FeatureCollection")return{success:!1,error:"Ongeldig GeoJSON formaat"};const i=r.properties||{},s=i.name||`Gemporteerd ${new Date().toLocaleDateString("nl-NL")}`,a=i.categories||Rc,o=i.color||ty[e().colorIndex%ty.length],l=(r.features||[]).filter(f=>f.geometry?.type==="Point").map(f=>({id:f.properties?.id||crypto.randomUUID(),name:f.properties?.name||"Naamloos",category:f.properties?.category||"Overig",notes:f.properties?.notes||"",url:f.properties?.url,coordinates:f.geometry.coordinates,createdAt:f.properties?.createdAt||new Date().toISOString()})),u=crypto.randomUUID();return n(f=>({layers:[...f.layers,{id:u,name:s,color:o,categories:a,points:l,visible:!0,createdAt:new Date().toISOString()}],colorIndex:f.colorIndex+1})),{success:!0,layerId:u}}catch{return{success:!1,error:"Fout bij parsen van GeoJSON"}}},getLayer:t=>e().layers.find(r=>r.id===t),clearAll:()=>{n({layers:[],colorIndex:0})}}),{name:"detectorapp-custom-point-layers"}));function $r({title:n,children:e,defaultExpanded:t=!0,layerNames:r}){const[i,s]=oe.useState(t),a=Xr(p=>p.visible),o=Xr(p=>p.setLayerVisibility),l=r?.filter(p=>a[p]).length||0,u=r?.length||0,f=u>0&&l===u,d=l>0&&l<u,g=p=>{if(p.stopPropagation(),!r)return;const E=!f;r.forEach(v=>{o(v,E)})};return y.jsxs("div",{className:"mb-0.5",children:[y.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[y.jsxs("button",{onClick:p=>{p.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[y.jsx(Wt.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:y.jsx(SE,{size:14})}),i?y.jsx(Vse,{size:16,className:"text-blue-500"}):y.jsx(Bse,{size:16,className:"text-blue-500"}),y.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:n}),l>0&&y.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:l})]}),r&&r.length>0&&y.jsx("button",{onClick:g,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:f?"#3b82f6":d?"#93c5fd":"white",border:f?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(f||d)&&y.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:y.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),y.jsx(_i,{initial:!1,children:i&&y.jsx(Wt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function at({name:n,type:e}){const t=Xr(w=>w.visible[n]),r=Xr(w=>w.loadingState[n]),i=Xr(w=>w.toggleLayer),s=Xr(w=>w.setLayerVisibility),a=y8(w=>w.isLayerUnlocked),o=r==="loading",l=r==="error",u=xA[n],f=u?.tier??"free",d=u?.regions??["nl"],p=!a(n,f,d),E=w=>{w.stopPropagation(),!(o||p)&&(e==="overlay"?i(n):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(R=>{s(R,R===n)}))},v=t??!1;return y.jsxs("button",{onClick:E,disabled:o||p,className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${p?"opacity-50 cursor-not-allowed bg-gray-50":o?"opacity-70 cursor-wait bg-transparent":v?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},title:p?"Premium laag - upgrade om te ontgrendelen":void 0,children:[y.jsxs("span",{className:`flex items-center gap-1 ${l?"text-red-500":p?"text-gray-400":"text-gray-600"}`,children:[n,l&&y.jsx(J9,{size:12,className:"text-red-500"}),p&&y.jsx(hI,{size:12,className:"text-amber-500"})]}),y.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:p?"#e5e7eb":o?"#93c5fd":v?"#3b82f6":"white",border:p?"2px solid #d1d5db":o?"2px solid #93c5fd":v?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:p?y.jsx(hI,{size:10,strokeWidth:3,className:"text-gray-400"}):o?y.jsx(lC,{size:10,strokeWidth:3,className:"animate-spin"}):v?y.jsx(Z9,{size:12,strokeWidth:3}):null})]})}function Uae(){const{themesPanelOpen:n,toggleThemesPanel:e}=Wi(),{layers:t,toggleVisibility:r}=O0(),i=oe.useRef(null),s=Oi(l=>l.layerPanelFontScale),a=Oi(l=>l.setLayerPanelFontScale),o=13*s/100;return oe.useEffect(()=>{if(!n)return;const l=f=>{i.current&&!i.current.contains(f.target)&&e()},u=setTimeout(()=>{document.addEventListener("click",l)},100);return()=>{clearTimeout(u),document.removeEventListener("click",l)}},[n,e]),y.jsx(_i,{children:n&&y.jsxs(Wt.div,{ref:i,className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[y.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Dl,{size:14}),y.jsx("span",{className:"font-medium text-sm",children:"Kaartlagen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:s,onInput:l=>{a(parseInt(l.target.value))},onChange:l=>a(parseInt(l.target.value)),className:"header-slider w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none hover:bg-white/20 transition-colors ml-1",children:y.jsx(eo,{size:16})})]})]}),y.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${o}px`},children:[y.jsx("div",{className:"mb-2 pb-1 border-b border-gray-100",children:y.jsx(at,{name:"Mijn Vondsten",type:"overlay"})}),t.length>0&&y.jsx("div",{className:"mb-2 pb-1 border-b border-gray-100",children:t.map(l=>y.jsxs("button",{onClick:()=>r(l.id),className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${l.visible?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},children:[y.jsxs("span",{className:"flex items-center gap-2 text-gray-600",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:l.color}}),l.name,y.jsxs("span",{className:"text-xs text-gray-400",children:["(",l.points.length,")"]})]}),y.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:l.visible?"#3b82f6":"white",border:l.visible?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:l.visible&&y.jsx(Z9,{size:12,strokeWidth:3})})]},l.id))}),y.jsxs($r,{title:"Achtergronden",defaultExpanded:!0,children:[y.jsx(at,{name:"CartoDB (licht)",type:"base"}),y.jsx(at,{name:"OpenStreetMap",type:"base"}),y.jsx(at,{name:"Luchtfoto",type:"base"}),y.jsx(at,{name:"Labels Overlay",type:"overlay"}),y.jsx(at,{name:"TMK 1850",type:"base"}),y.jsx(at,{name:"Bonnebladen 1900",type:"base"})]}),y.jsxs($r,{title:"Thema's",defaultExpanded:!0,children:[y.jsxs($r,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[y.jsx(at,{name:"Hunebedden",type:"overlay"}),y.jsx(at,{name:"FAMKE Steentijd",type:"overlay"}),y.jsx(at,{name:"Grafheuvels",type:"overlay"}),y.jsx(at,{name:"Terpen",type:"overlay"}),y.jsxs($r,{title:"Paleokaarten (tijdreizen)",defaultExpanded:!1,layerNames:["Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[y.jsx(at,{name:"Paleokaart 9000 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 800 n.Chr.",type:"overlay"})]})]}),y.jsxs($r,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","IKAW","Archeo Landschappen","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[y.jsx(at,{name:"AMK Monumenten",type:"overlay"}),y.jsxs($r,{title:"AMK per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[y.jsx(at,{name:"AMK Romeins",type:"overlay"}),y.jsx(at,{name:"AMK Steentijd",type:"overlay"}),y.jsx(at,{name:"AMK Vroege ME",type:"overlay"}),y.jsx(at,{name:"AMK Late ME",type:"overlay"}),y.jsx(at,{name:"AMK Overig",type:"overlay"})]}),y.jsx(at,{name:"Romeinse wegen (regio)",type:"overlay"}),y.jsx(at,{name:"Romeinse wegen (Wereld)",type:"overlay"}),y.jsx(at,{name:"IKAW",type:"overlay"}),y.jsx(at,{name:"Archeo Landschappen",type:"overlay"}),y.jsxs($r,{title:"Verwachtingen uiterwaarden",defaultExpanded:!1,layerNames:["UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[y.jsx(at,{name:"UIKAV Punten",type:"overlay"}),y.jsx(at,{name:"UIKAV Vlakken",type:"overlay"}),y.jsx(at,{name:"UIKAV Expert",type:"overlay"}),y.jsx(at,{name:"UIKAV Buffer",type:"overlay"}),y.jsx(at,{name:"UIKAV Indeling",type:"overlay"})]})]}),y.jsxs($r,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Runes"],children:[y.jsx(at,{name:"Rijksmonumenten",type:"overlay"}),y.jsx(at,{name:"Werelderfgoed",type:"overlay"}),y.jsx(at,{name:"Religieus Erfgoed",type:"overlay"}),y.jsx(at,{name:"Kastelen",type:"overlay"}),y.jsx(at,{name:"Runes",type:"overlay"})]}),y.jsxs($r,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[y.jsx(at,{name:"WWII Bunkers",type:"overlay"}),y.jsx(at,{name:"Slagvelden",type:"overlay"}),y.jsx(at,{name:"Militaire Vliegvelden",type:"overlay"}),y.jsx(at,{name:"Verdedigingslinies",type:"overlay"}),y.jsx(at,{name:"Militaire Objecten",type:"overlay"}),y.jsx(at,{name:"Inundatiegebieden",type:"overlay"})]}),y.jsxs($r,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m"],children:[y.jsx(at,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),y.jsx(at,{name:"AHN4 Hillshade NL",type:"overlay"}),y.jsx(at,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),y.jsx(at,{name:"AHN 0.5m",type:"overlay"})]}),y.jsxs($r,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Veengebieden","Geomorfologie","Bodemkaart","Essen"],children:[y.jsx(at,{name:"Veengebieden",type:"overlay"}),y.jsx(at,{name:"Geomorfologie",type:"overlay"}),y.jsx(at,{name:"Bodemkaart",type:"overlay"}),y.jsx(at,{name:"Essen",type:"overlay"})]}),y.jsxs($r,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[y.jsx(at,{name:"Gewaspercelen",type:"overlay"}),y.jsx(at,{name:"Kadastrale Grenzen",type:"overlay"})]}),y.jsxs($r,{title:"Provinciale Thema's",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[y.jsxs($r,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[y.jsx(at,{name:"Scheepswrakken",type:"overlay"}),y.jsx(at,{name:"Woonheuvels ZH",type:"overlay"}),y.jsx(at,{name:"Romeinse Forten",type:"overlay"}),y.jsx(at,{name:"Windmolens",type:"overlay"}),y.jsx(at,{name:"Erfgoedlijnen",type:"overlay"}),y.jsx(at,{name:"Oude Kernen",type:"overlay"})]}),y.jsxs($r,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[y.jsx(at,{name:"Relictenkaart Punten",type:"overlay"}),y.jsx(at,{name:"Relictenkaart Lijnen",type:"overlay"}),y.jsx(at,{name:"Relictenkaart Vlakken",type:"overlay"})]}),y.jsx($r,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:y.jsx(at,{name:"Verdronken Dorpen",type:"overlay"})})]}),y.jsxs($r,{title:"Fossielen, Mineralen & Goud",defaultExpanded:!1,layerNames:["Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[y.jsx(at,{name:"Fossiel Hotspots",type:"overlay"}),y.jsx(at,{name:"Mineralen Hotspots",type:"overlay"}),y.jsx(at,{name:"Goudrivieren",type:"overlay"}),y.jsx(at,{name:"Fossielen Nederland",type:"overlay"}),y.jsx(at,{name:"Fossielen Belgi",type:"overlay"}),y.jsx(at,{name:"Fossielen Duitsland",type:"overlay"}),y.jsx(at,{name:"Fossielen Frankrijk",type:"overlay"})]}),y.jsxs($r,{title:"Recreatie",defaultExpanded:!1,layerNames:["Wandelroutes","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[y.jsx(at,{name:"Wandelroutes",type:"overlay"}),y.jsx(at,{name:"Parken",type:"overlay"}),y.jsx(at,{name:"Speeltuinen",type:"overlay"}),y.jsx(at,{name:"Musea",type:"overlay"}),y.jsx(at,{name:"Strandjes",type:"overlay"}),y.jsx(at,{name:"Kringloopwinkels",type:"overlay"})]})]})]})]})})}function zae(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var $h=1,Wh=2,Bd=3,$ae=4,dI=5,nL=6378137,Wae=6356752314e-3,rL=.0066943799901413165,Em=484813681109536e-20,Ue=Math.PI/2,Hae=.16666666666666666,Kae=.04722222222222222,Yae=.022156084656084655,it=1e-10,ar=.017453292519943295,gs=57.29577951308232,vn=Math.PI/4,yp=Math.PI*2,pr=3.14159265359,xs={};xs.greenwich=0;xs.lisbon=-9.131906111111;xs.paris=2.337229166667;xs.bogota=-74.080916666667;xs.madrid=-3.687938888889;xs.rome=12.452333333333;xs.bern=7.439583333333;xs.jakarta=106.807719444444;xs.ferro=-17.666666666667;xs.brussels=4.367975;xs.stockholm=18.058277777778;xs.athens=23.7163375;xs.oslo=10.722916666667;const Xae={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var iL=/[\s_\-\/\(\)]/g;function uu(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(iL,""),i=-1,s,a;++i<t.length;)if(s=t[i],a=s.toLowerCase().replace(iL,""),a===r)return n[s]}function gI(n){var e={},t=n.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var u=l.split("=");return u.push(!0),o[u[0].toLowerCase()]=u[1],o},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*ar},lat_1:function(o){e.lat1=o*ar},lat_2:function(o){e.lat2=o*ar},lat_ts:function(o){e.lat_ts=o*ar},lon_0:function(o){e.long0=o*ar},lon_1:function(o){e.long1=o*ar},lon_2:function(o){e.long2=o*ar},alpha:function(o){e.alpha=parseFloat(o)*ar},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*ar},lonc:function(o){e.longc=o*ar},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=uu(Xae,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*ar},pm:function(o){var l=uu(xs,o);e.from_greenwich=(l||parseFloat(o))*ar},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}class nj{static getId(e){const t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:a}}static convertAxis(e){const t=e[1]||"Unknown";let r;const i=t.match(/^\((.)\)$/);if(i){const u=i[1].toUpperCase();if(u==="E")r="east";else if(u==="N")r="north";else if(u==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${u}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(u=>Array.isArray(u)&&u[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=e.find(u=>Array.isArray(u)&&(u[0]==="LENGTHUNIT"||u[0]==="ANGLEUNIT"||u[0]==="SCALEUNIT")),l=this.convertUnit(o);return{name:t,direction:r,unit:l,order:a}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,t.conversion=e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const r=e.find(g=>Array.isArray(g)&&g[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(i){const g=this.convertUnit(i);t.coordinate_system.unit=g}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const s=e.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(s){const g=this.convert(s);s[0]==="ENSEMBLE"?t.datum_ensemble=g:t.datum=g;const p=e.find(E=>Array.isArray(E)&&E[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(g.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const a=e.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");a&&(t.accuracy=parseFloat(a[1]));const o=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");o&&(t.ellipsoid=this.convert(o)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const l=e.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(l){const g=l.find(p=>Array.isArray(p));t.source_crs=g?this.convert(g):null}const u=e.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(u){const g=u.find(p=>Array.isArray(p));t.target_crs=g?this.convert(g):null}const f=e.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");f?t.transformation=this.convert(f):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const g=t.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const d=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=d)}),d.conversion_factor&&d.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:d});break;default:t.keyword=e[0];break}return t}}class qae extends nj{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class Zae extends nj{static convert(e,t={}){super.convert(e,t);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),a=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),o=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},s&&(t.usage.scope=s[1]),a&&(t.usage.area=a[1]),o&&(t.usage.bbox=o.slice(1))}return t}}function Qae(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function Jae(n){return(Qae(n)==="2019"?Zae:qae).convert(n)}function eoe(n){const e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var vp=1,rj=2,ij=3,Kv=4,sj=5,hC=-1,toe=/\s/,noe=/[A-Za-z]/,roe=/[A-Za-z84_]/,IE=/[,\]]/,aj=/[\d\.E\-\+]/;function Ul(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=vp}Ul.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Kv)for(;toe.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case vp:return this.neutral(n);case rj:return this.keyword(n);case Kv:return this.quoted(n);case sj:return this.afterquote(n);case ij:return this.number(n);case hC:return}};Ul.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Kv;return}if(IE.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Ul.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=vp;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=vp,this.currentObject=this.stack.pop(),this.currentObject||(this.state=hC);return}};Ul.prototype.number=function(n){if(aj.test(n)){this.word+=n;return}if(IE.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Ul.prototype.quoted=function(n){if(n==='"'){this.state=sj;return}this.word+=n};Ul.prototype.keyword=function(n){if(roe.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=vp;return}if(IE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Ul.prototype.neutral=function(n){if(noe.test(n)){this.word=n,this.state=rj;return}if(n==='"'){this.word="",this.state=Kv;return}if(aj.test(n)){this.word=n,this.state=ij;return}if(IE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Ul.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===hC)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function ioe(n){var e=new Ul(n);return e.output()}function xS(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(s,a){return Rd(a,s),s},r);e&&(n[e]=i)}function Rd(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},Rd(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&Rd(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&Rd(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],xS(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],xS(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return Rd(n,e[t]);return xS(e,t,n)}}var soe=.017453292519943295;function Fa(n){return n*soe}function oj(n){const e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=Fa(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=Fa(n.lat0>0?90:-90),delete n.lat1)}function sL(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function aL(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function oL(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=aL(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-aL(n.ellipsoid.semi_minor_axis))))}function Yv(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?(Yv(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{const r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,oL(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,oL(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=sL(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=sL(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),a=i.value;i.unit&&i.unit.conversion_factor?e[s]=a*i.unit.conversion_factor:i.unit==="degree"?e[s]=a*Math.PI/180:e[s]=a});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":Yv(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),oj(e),e)}var aoe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function ooe(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function lj(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];aoe.indexOf(i)!==-1&&loe(n[i]),typeof n[i]=="object"&&lj(n[i])}}function loe(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var s=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=Fa(n.rectified_grid_angle));function o(f){var d=n.to_meter||1;return f*d}var l=function(f){return ooe(n,f)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Fa],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Fa],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Fa],["lat0","latitude_of_origin",Fa],["lat0","standard_parallel_1",Fa],["lat1","standard_parallel_1",Fa],["lat2","standard_parallel_2",Fa],["azimuth","Azimuth"],["alpha","azimuth",Fa],["srsCode","name"]];u.forEach(l),oj(n)}function Xv(n){if(typeof n=="object")return Yv(n);const e=eoe(n);var t=ioe(n);if(e==="WKT2"){const s=Jae(t);return Yv(s)}var r=t[0],i={};return Rd(t,i),lj(i),i[r]}function li(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?li[n]=gI(arguments[1]):li[n]=Xv(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?li[n]=Xv(arguments[1]):(li[n]=t,t||delete li[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?li.apply(e,r):li(r)});if(typeof n=="string"){if(n in li)return li[n]}else"EPSG"in n?li["EPSG:"+n.EPSG]=n:"ESRI"in n?li["ESRI:"+n.ESRI]=n:"IAU2000"in n?li["IAU2000:"+n.IAU2000]=n:console.log(n);return}}zae(li);function coe(n){return typeof n=="string"}function uoe(n){return n in li}function hoe(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var foe=["3857","900913","3785","102113"];function doe(n){var e=uu(n,"authority");if(e){var t=uu(e,"epsg");return t&&foe.indexOf(t)>-1}}function goe(n){var e=uu(n,"extension");if(e)return uu(e,"proj4")}function moe(n){return n[0]==="+"}function poe(n){if(coe(n)){if(uoe(n))return li[n];if(hoe(n)){var e=Xv(n);if(doe(e))return li["EPSG:3857"];var t=goe(e);return t?gI(t):e}if(moe(n))return gI(n)}else return"projName"in n?n:Xv(n)}function lL(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function Uo(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function m1(n){return n<0?-1:1}function ct(n,e){return e||Math.abs(n)<=pr?n:n-m1(n)*yp}function Ya(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Ue-e))/r}function xp(n,e){for(var t=.5*n,r,i,s=Ue-2*Math.atan(e),a=0;a<=15;a++)if(r=n*Math.sin(s),i=Ue-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function _oe(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Uo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function yoe(n){var e=n.x,t=n.y;if(t*gs>90&&t*gs<-90&&e*gs>180&&e*gs<-180)return null;var r,i;if(Math.abs(Math.abs(t)-Ue)<=it)return null;if(this.sphere)r=this.x0+this.a*this.k0*ct(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(vn+.5*t));else{var s=Math.sin(t),a=Ya(this.e,t,s);r=this.x0+this.a*this.k0*ct(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(a)}return n.x=r,n.y=i,n}function voe(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=Ue-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(i=xp(this.e,s),i===-9999)return null}return r=ct(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var xoe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Eoe={init:_oe,forward:yoe,inverse:voe,names:xoe};function woe(){}function cL(n){return n}var cj=["longlat","identity"];const Soe={init:woe,forward:cL,inverse:cL,names:cj};var Toe=[Eoe,Soe],nh={},Cd=[];function uj(n,e){var t=Cd.length;return n.names?(Cd[t]=n,n.names.forEach(function(r){nh[r.toLowerCase()]=t}),this):(console.log(e),!0)}function hj(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function Ioe(n){if(!n)return!1;var e=n.toLowerCase();if(typeof nh[e]<"u"&&Cd[nh[e]]||(e=hj(e),e in nh&&Cd[nh[e]]))return Cd[nh[e]]}function Aoe(){Toe.forEach(uj)}const Roe={start:Aoe,add:uj,get:Ioe};var fj={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Coe=fj.WGS84;function boe(n,e,t,r){var i=n*n,s=e*e,a=(i-s)/i,o=0;r?(n*=1-a*(Hae+a*(Kae+a*Yae)),i=n*n,a=0):o=Math.sqrt(a);var l=(i-s)/s;return{es:a,e:o,ep2:l}}function Poe(n,e,t,r,i){if(!n){var s=uu(fj,r);s||(s=Coe),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<it)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var jy={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var koe in jy){var ES=jy[koe];ES.datumName&&(jy[ES.datumName]=ES)}function Moe(n,e,t,r,i,s,a){var o={};return n===void 0||n==="none"?o.datum_type=dI:o.datum_type=$ae,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=$h),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Wh,o.datum_params[3]*=Em,o.datum_params[4]*=Em,o.datum_params[5]*=Em,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=Bd,o.grids=a),o.a=t,o.b=r,o.es=i,o.ep2=s,o}var fC={};function Noe(n,e,t){return e instanceof ArrayBuffer?Loe(n,e,t):{ready:Ooe(n,e)}}function Loe(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=joe(i),a=Voe(i,s),o=Goe(i,a,s,r),l={header:a,subgrids:o};return fC[n]=l,l}async function Ooe(n,e){for(var t=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),a=await s.readRasters(),o=a,l=[s.getWidth(),s.getHeight()],u=s.getBoundingBox().map(uL),f=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(uL),d=u[0]+(l[0]-1)*f[0],g=u[3]-(l[1]-1)*f[1],p=o[0],E=o[1],v=[];for(let R=l[1]-1;R>=0;R--)for(let k=l[0]-1;k>=0;k--){var w=R*l[0]+k;v.push([-Gc(E[w]),Gc(p[w])])}t.push({del:f,lim:l,ll:[-d,g],cvs:v})}var T={header:{nSubgrids:r},subgrids:t};return fC[n]=T,T}function Doe(n){if(n===void 0)return null;var e=n.split(",");return e.map(Foe)}function Foe(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:fC[n]||null,isNull:!1}}function uL(n){return n*Math.PI/180}function Gc(n){return n/3600*Math.PI/180}function joe(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Voe(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:mI(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function mI(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Goe(n,e,t,r){for(var i=176,s=[],a=0;a<e.nSubgrids;a++){var o=Uoe(n,i,t),l=zoe(n,i,o,t,r),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),f=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[Gc(o.lowerLongitude),Gc(o.lowerLatitude)],del:[Gc(o.longitudeInterval),Gc(o.latitudeInterval)],lim:[u,f],count:o.gridNodeCount,cvs:Boe(l)});var d=16;r===!1&&(d=8),i+=176+o.gridNodeCount*d}return s}function Boe(n){return n.map(function(e){return[Gc(e.longitudeShift),Gc(e.latitudeShift)]})}function Uoe(n,e,t){return{name:mI(n,e+8,e+16).trim(),parent:mI(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function zoe(n,e,t,r,i){var s=e+176,a=16;i===!1&&(a=8);for(var o=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:n.getFloat32(s+l*a,r),longitudeShift:n.getFloat32(s+l*a+4,r)};i!==!1&&(u.latitudeAccuracy=n.getFloat32(s+l*a+8,r),u.longitudeAccuracy=n.getFloat32(s+l*a+12,r)),o.push(u)}return o}function ya(n,e){if(!(this instanceof ya))return new ya(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(u){if(u)throw u};var t=poe(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=ya.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=uu(jy,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=Poe(t.a,t.b,t.rf,t.ellps,t.sphere),a=boe(s.a,s.b,s.rf,t.R_A),o=Doe(t.nadgrids),l=t.datum||Moe(t.datumCode,t.datum_params,s.a,s.b,a.es,a.ep2,o);lL(this,t),lL(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}ya.projections=Roe;ya.projections.start();function $oe(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===$h?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===Wh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function dj(n,e,t){var r=n.x,i=n.y,s=n.z?n.z:0,a,o,l,u;if(i<-Ue&&i>-1.001*Ue)i=-Ue;else if(i>Ue&&i<1.001*Ue)i=Ue;else{if(i<-Ue)return{x:-1/0,y:-1/0,z:n.z};if(i>Ue)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),o=Math.sin(i),u=Math.cos(i),l=o*o,a=t/Math.sqrt(1-e*l),{x:(a+s)*u*Math.cos(r),y:(a+s)*u*Math.sin(r),z:(a*(1-e)+s)*o}}function gj(n,e,t,r){var i=1e-12,s=i*i,a=30,o,l,u,f,d,g,p,E,v,w,T,R,k,N=n.x,O=n.y,B=n.z?n.z:0,P,b,M;if(o=Math.sqrt(N*N+O*O),l=Math.sqrt(N*N+O*O+B*B),o/t<i){if(P=0,l/t<i)return b=Ue,M=-r,{x:n.x,y:n.y,z:n.z}}else P=Math.atan2(O,N);u=B/l,f=o/l,d=1/Math.sqrt(1-e*(2-e)*f*f),E=f*(1-e)*d,v=u*d,k=0;do k++,p=t/Math.sqrt(1-e*v*v),M=o*E+B*v-p*(1-e*v*v),g=e*p/(p+M),d=1/Math.sqrt(1-g*(2-g)*f*f),w=f*(1-g)*d,T=u*d,R=T*E-w*v,E=w,v=T;while(R*R>s&&k<a);return b=Math.atan(T/Math.abs(w)),{x:P,y:b,z:M}}function Woe(n,e,t){if(e===$h)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===Wh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6];return{x:u*(n.x-l*n.y+o*n.z)+r,y:u*(l*n.x+n.y-a*n.z)+i,z:u*(-o*n.x+a*n.y+n.z)+s}}}function Hoe(n,e,t){if(e===$h)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===Wh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=(n.x-r)/u,d=(n.y-i)/u,g=(n.z-s)/u;return{x:f+l*d-o*g,y:-l*f+d+a*g,z:o*f-a*d+g}}}function ny(n){return n===$h||n===Wh}function Koe(n,e,t){if($oe(n,e)||n.datum_type===dI||e.datum_type===dI)return t;var r=n.a,i=n.es;if(n.datum_type===Bd){var s=hL(n,!1,t);if(s!==0)return;r=nL,i=rL}var a=e.a,o=e.b,l=e.es;if(e.datum_type===Bd&&(a=nL,o=Wae,l=rL),i===l&&r===a&&!ny(n.datum_type)&&!ny(e.datum_type))return t;if(t=dj(t,i,r),ny(n.datum_type)&&(t=Woe(t,n.datum_type,n.datum_params)),ny(e.datum_type)&&(t=Hoe(t,e.datum_type,e.datum_params)),t=gj(t,l,a,o),e.datum_type===Bd){var u=hL(e,!0,t);if(u!==0)return}return t}function hL(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<n.grids.length;a++){var o=n.grids[a];if(s.push(o.name),o.isNull){i=r;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,u=0,f=l.length;u<f;u++){var d=l[u],g=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-g,E=d.ll[1]-g,v=d.ll[0]+(d.lim[0]-1)*d.del[0]+g,w=d.ll[1]+(d.lim[1]-1)*d.del[1]+g;if(!(E>r.y||p>r.x||w<r.y||v<r.x)&&(i=Yoe(r,e,d),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*gs+" "+r.y*gs+" tried: '"+s+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function Yoe(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=ct(i.x-Math.PI)+Math.PI;var s=fL(i,t);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,o=1e-12,l,u;do{if(u=fL(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+s.x),y:i.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=ct(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=n.x+s.x,r.y=n.y+s.y);return r}function fL(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var u={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var f={x:e.cvs[a][0],y:e.cvs[a][1]},d=i.x*i.y,g=i.x*(1-i.y),p=(1-i.x)*(1-i.y),E=(1-i.x)*i.y;return s.x=p*o.x+g*l.x+E*f.x+d*u.x,s.y=p*o.y+g*l.y+E*f.y+d*u.y,s}function dL(n,e,t){var r=t.x,i=t.y,s=t.z||0,a,o,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(a=r,"ew".indexOf(n.axis[l])!==-1?o="x":o="y"):l===1?(a=i,"ns".indexOf(n.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),n.axis[l]){case"e":u[o]=a;break;case"w":u[o]=-a;break;case"n":u[o]=a;break;case"s":u[o]=-a;break;case"u":t[o]!==void 0&&(u.z=a);break;case"d":t[o]!==void 0&&(u.z=-a);break;default:return null}return u}function mj(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function Xoe(n){gL(n.x),gL(n.y)}function gL(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function qoe(n,e){return(n.datum.datum_type===$h||n.datum.datum_type===Wh||n.datum.datum_type===Bd)&&e.datumCode!=="WGS84"||(e.datum.datum_type===$h||e.datum.datum_type===Wh||e.datum.datum_type===Bd)&&n.datumCode!=="WGS84"}function qv(n,e,t,r){var i;Array.isArray(t)?t=mj(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(Xoe(t),n.datum&&e.datum&&qoe(n,e)&&(i=new ya("WGS84"),t=qv(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=dL(n,!1,t)),n.projName==="longlat")t={x:t.x*ar,y:t.y*ar,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=Koe(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*gs,y:t.y*gs,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?dL(e,!0,t):(t&&!s&&delete t.z,t)}var mL=ya("WGS84");function wS(n,e,t,r){var i,s,a;return Array.isArray(t)?(i=qv(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(s=qv(n,e,t,r),a=Object.keys(t),a.length===2||a.forEach(function(o){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=t[o]}),s)}function ry(n){return n instanceof ya?n:typeof n=="object"&&"oProj"in n?n.oProj:ya(n)}function Zoe(n,e,t){var r,i,s=!1,a;return typeof e>"u"?(i=ry(n),r=mL,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=ry(n),r=mL,s=!0),r||(r=ry(n)),i||(i=ry(e)),t?wS(r,i,t):(a={forward:function(o,l){return wS(r,i,o,l)},inverse:function(o,l){return wS(i,r,o,l)}},s&&(a.oProj=i),a)}var pL=6,pj="AJSAJS",_j="AFAFAF",bd=65,is=73,la=79,tm=86,nm=90;const Qoe={forward:yj,inverse:Joe,toPoint:vj};function yj(n,e){return e=e||5,nle(ele({lat:n[1],lon:n[0]}),e)}function Joe(n){var e=dC(Ej(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function vj(n){var e=dC(Ej(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function SS(n){return n*(Math.PI/180)}function _L(n){return 180*(n/Math.PI)}function ele(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,s=.9996,a,o,l,u,f,d,g,p=SS(e),E=SS(t),v,w;w=Math.floor((t+180)/6)+1,t===180&&(w=60),e>=56&&e<64&&t>=3&&t<12&&(w=32),e>=72&&e<84&&(t>=0&&t<9?w=31:t>=9&&t<21?w=33:t>=21&&t<33?w=35:t>=33&&t<42&&(w=37)),a=(w-1)*6-180+3,v=SS(a),o=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),f=o*Math.cos(p)*Math.cos(p),d=Math.cos(p)*(E-v),g=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var T=s*l*(d+(1-u+f)*d*d*d/6+(5-18*u+u*u+72*f-58*o)*d*d*d*d*d/120)+5e5,R=s*(g+l*Math.tan(p)*(d*d/2+(5-u+9*f+4*f*f)*d*d*d*d/24+(61-58*u+u*u+600*f-330*o)*d*d*d*d*d*d/720));return e<0&&(R+=1e7),{northing:Math.round(R),easting:Math.round(T),zoneNumber:w,zoneLetter:tle(e)}}function dC(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,o=.00669438,l,u=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),f,d,g,p,E,v,w,T,R,k=t-5e5,N=e;r<"N"&&(N-=1e7),w=(i-1)*6-180+3,l=o/(1-o),v=N/s,T=v/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),R=T+(3*u/2-27*u*u*u/32)*Math.sin(2*T)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*T)+151*u*u*u/96*Math.sin(6*T),f=a/Math.sqrt(1-o*Math.sin(R)*Math.sin(R)),d=Math.tan(R)*Math.tan(R),g=l*Math.cos(R)*Math.cos(R),p=a*(1-o)/Math.pow(1-o*Math.sin(R)*Math.sin(R),1.5),E=k/(f*s);var O=R-f*Math.tan(R)/p*(E*E/2-(5+3*d+10*g-4*g*g-9*l)*E*E*E*E/24+(61+90*d+298*g+45*d*d-252*l-3*g*g)*E*E*E*E*E*E/720);O=_L(O);var B=(E-(1+2*d+g)*E*E*E/6+(5-2*g+28*d-3*g*g+8*l+24*d*d)*E*E*E*E*E/120)/Math.cos(R);B=w+_L(B);var P;if(n.accuracy){var b=dC({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});P={top:b.lat,right:b.lon,bottom:O,left:B}}else P={lat:O,lon:B};return P}function tle(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function nle(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+rle(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function rle(n,e,t){var r=xj(t),i=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return ile(i,s,r)}function xj(n){var e=n%pL;return e===0&&(e=pL),e}function ile(n,e,t){var r=t-1,i=pj.charCodeAt(r),s=_j.charCodeAt(r),a=i+n-1,o=s+e,l=!1;a>nm&&(a=a-nm+bd-1,l=!0),(a===is||i<is&&a>is||(a>is||i<is)&&l)&&a++,(a===la||i<la&&a>la||(a>la||i<la)&&l)&&(a++,a===is&&a++),a>nm&&(a=a-nm+bd-1),o>tm?(o=o-tm+bd-1,l=!0):l=!1,(o===is||s<is&&o>is||(o>is||s<is)&&l)&&o++,(o===la||s<la&&o>la||(o>la||s<la)&&l)&&(o++,o===is&&o++),o>tm&&(o=o-tm+bd-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function Ej(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var o=n.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+n;t=n.substring(s,s+=2);for(var l=xj(a),u=sle(t.charAt(0),l),f=ale(t.charAt(1),l);f<ole(o);)f+=2e6;var d=e-s;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var g=d/2,p=0,E=0,v,w,T,R,k;return g>0&&(v=1e5/Math.pow(10,g),w=n.substring(s,s+g),p=parseFloat(w)*v,T=n.substring(s+g),E=parseFloat(T)*v),R=p+u,k=E+f,{easting:R,northing:k,zoneLetter:o,zoneNumber:a,accuracy:v}}function sle(n,e){for(var t=pj.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===is&&t++,t===la&&t++,t>nm){if(i)throw"Bad character: "+n;t=bd,i=!0}r+=1e5}return r}function ale(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=_j.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===is&&t++,t===la&&t++,t>tm){if(i)throw"Bad character: "+n;t=bd,i=!0}r+=1e5}return r}function ole(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function v0(n,e,t){if(!(this instanceof v0))return new v0(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}v0.fromMGRS=function(n){return new v0(vj(n))};v0.prototype.toMGRS=function(n){return yj([this.x,this.y],n)};var lle=1,cle=.25,yL=.046875,vL=.01953125,xL=.01068115234375,ule=.75,hle=.46875,fle=.013020833333333334,dle=.007120768229166667,gle=.3645833333333333,mle=.005696614583333333,ple=.3076171875;function gC(n){var e=[];e[0]=lle-n*(cle+n*(yL+n*(vL+n*xL))),e[1]=n*(ule-n*(yL+n*(vL+n*xL)));var t=n*n;return e[2]=t*(hle-n*(fle+n*dle)),t*=n,e[3]=t*(gle-n*mle),e[4]=t*n*ple,e}function D0(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var _le=20;function mC(n,e,t){for(var r=1/(1-e),i=n,s=_le;s;--s){var a=Math.sin(i),o=1-e*a*a;if(o=(D0(i,a,Math.cos(i),t)-n)*(o*Math.sqrt(o))*r,i-=o,Math.abs(o)<it)return i}return i}function yle(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=gC(this.es),this.ml0=D0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function vle(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i,s,a,o=Math.sin(t),l=Math.cos(t);if(this.es){var f=l*r,d=Math.pow(f,2),g=this.ep2*Math.pow(l,2),p=Math.pow(g,2),E=Math.abs(l)>it?Math.tan(t):0,v=Math.pow(E,2),w=Math.pow(v,2);i=1-this.es*Math.pow(o,2),f=f/Math.sqrt(i);var T=D0(t,o,l,this.en);s=this.a*(this.k0*f*(1+d/6*(1-v+g+d/20*(5-18*v+w+14*g-58*v*g+d/42*(61+179*w-w*v-479*v)))))+this.x0,a=this.a*(this.k0*(T-this.ml0+o*r*f/2*(1+d/12*(5-v+9*g+4*p+d/30*(61+w-58*v+270*g-330*v*g+d/56*(1385+543*w-w*v-3111*v))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<it)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,a=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(a),u>=1){if(u-1>it)return 93;a=0}else a=Math.acos(a);t<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return n.x=s,n.y=a,n}function xle(n){var e,t,r,i,s=(n.x-this.x0)*(1/this.a),a=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,t=mC(e,this.es,this.en),Math.abs(t)<Ue){var d=Math.sin(t),g=Math.cos(t),p=Math.abs(g)>it?Math.tan(t):0,E=this.ep2*Math.pow(g,2),v=Math.pow(E,2),w=Math.pow(p,2),T=Math.pow(w,2);e=1-this.es*Math.pow(d,2);var R=s*Math.sqrt(e)/this.k0,k=Math.pow(R,2);e=e*p,r=t-e*k/(1-this.es)*.5*(1-k/12*(5+3*w-9*E*w+E-4*v-k/30*(61+90*w-252*E*w+45*T+46*E-k/56*(1385+3633*w+4095*T+1574*T*w)))),i=ct(this.long0+R*(1-k/6*(1+2*w+E-k/20*(5+28*w+24*T+8*E*w+6*E-k/42*(61+662*w+1320*T+720*T*w))))/g,this.over)}else r=Ue*m1(a),i=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),u=this.lat0+a/this.k0,f=Math.cos(u);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2))),r=Math.asin(e),a<0&&(r=-r),l===0&&f===0?i=0:i=ct(Math.atan2(l,f)+this.long0,this.over)}return n.x=i,n.y=r,n}var Ele=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Vy={init:yle,forward:vle,inverse:xle,names:Ele};function wj(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function us(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function wle(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function Sle(n){var e=Math.abs(n);return e=wle(e*(1+e/(us(1,e)+1))),n<0?-e:e}function pC(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return e+a*Math.sin(2*e)}function Tle(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return Math.sin(e)*a}function Ile(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function Sj(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),s=wj(t),a=Ile(t),o=2*i*a,l=-2*r*s,u=n.length-1,f=n[u],d=0,g=0,p=0,E,v;--u>=0;)E=g,v=d,g=f,d=p,f=-E+o*g-l*d+n[u],p=-v+l*g+o*d;return o=r*a,l=i*s,[o*f-l*p,o*p+l*f]}function Ale(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Vy.init.apply(this),this.forward=Vy.forward,this.inverse=Vy.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=pC(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Tle(this.gtu,2*r))}function Rle(n){var e=ct(n.x-this.long0,this.over),t=n.y;t=pC(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),s=Math.sin(e),a=Math.cos(e);t=Math.atan2(r,a*i),e=Math.atan2(s*i,us(r,i*a)),e=Sle(Math.tan(e));var o=Sj(this.gtu,2*t,2*e);t=t+o[0],e=e+o[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),n.x=l,n.y=u,n}function Cle(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=Sj(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(wj(e));var a=Math.sin(t),o=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(a*u,us(l,u*o)),e=Math.atan2(l,u*o),r=ct(e+this.long0,this.over),i=pC(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var ble=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Gy={init:Ale,forward:Rle,inverse:Cle,names:ble};function Ple(n,e){if(n===void 0){if(n=Math.floor((ct(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var kle="etmerc";function Mle(){var n=Ple(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*ar,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Gy.init.apply(this),this.forward=Gy.forward,this.inverse=Gy.inverse}var Nle=["Universal Transverse Mercator System","utm"];const Lle={init:Mle,names:Nle,dependsOn:kle};function _C(n,e){return Math.pow((1-n)/(1+n),e)}var Ole=20;function Dle(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+vn)/(Math.pow(Math.tan(.5*this.lat0+vn),this.C)*_C(this.e*n,this.ratexp))}function Fle(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+vn),this.C)*_C(this.e*Math.sin(t),this.ratexp))-Ue,n.x=this.C*e,n}function jle(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+vn)/this.K,1/this.C),s=Ole;s>0&&(r=2*Math.atan(i*_C(this.e*Math.sin(n.y),-.5*this.e))-Ue,!(Math.abs(r-n.y)<e));--s)n.y=r;return s?(n.x=t,n.y=r,n):null}const yC={init:Dle,forward:Fle,inverse:jle};function Vle(){yC.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Gle(n){var e,t,r,i;return n.x=ct(n.x-this.long0,this.over),yC.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Ble(n){var e,t,r,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=us(n.x,n.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),t=Math.cos(a),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),r=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,yC.inverse.apply(this,[n]),n.x=ct(n.x+this.long0,this.over),n}var Ule=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const zle={init:Vle,forward:Gle,inverse:Ble,names:Ule};function vC(n,e,t){return e*=t,Math.tan(.5*(Ue+n))*Math.pow((1-e)/(1+e),.5*t)}function $le(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&(this.k0=.5*(1+m1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=it&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&Math.abs(Math.cos(this.lat_ts))>it&&(this.k0=.5*this.cons*Uo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ya(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Uo(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(vC(this.lat0,this.sinlat0,this.e))-Ue,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Wle(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),s,a,o,l,u,f,d=ct(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=it&&Math.abs(t+this.lat0)<=it?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(d)),n.x=this.a*s*i*Math.sin(d)+this.x0,n.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(d))+this.y0,n):(a=2*Math.atan(vC(t,r,this.e))-Ue,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=it?(u=Ya(this.e,t*this.con,this.con*r),f=2*this.a*this.k0*u/this.cons,n.x=this.x0+f*Math.sin(e-this.long0),n.y=this.y0-this.con*f*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<it?(s=2*this.a*this.k0/(1+l*Math.cos(d)),n.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(d))),n.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(d))+this.y0),n.x=s*l*Math.sin(d)+this.x0,n))}function Hle(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,t=this.lat0,a<=it?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(o)*this.sinlat0+n.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<it?this.lat0>0?e=ct(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=ct(this.long0+Math.atan2(n.x,n.y),this.over):e=ct(this.long0+Math.atan2(n.x*Math.sin(o),a*this.coslat0*Math.cos(o)-n.y*this.sinlat0*Math.sin(o)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=it){if(a<=it)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=a*this.cons/(2*this.a*this.k0),t=this.con*xp(this.e,r),e=this.con*ct(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=it?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/a),e=ct(this.long0+Math.atan2(n.x*Math.sin(i),a*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*xp(this.e,Math.tan(.5*(Ue+s)));return n.x=e,n.y=t,n}var Kle=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Yle={init:$le,forward:Wle,inverse:Hle,names:Kle,ssfn_:vC};function Xle(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*u}function qle(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,n.x=this.R*a+this.x0,n}function Zle(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+a/this.alpha,l=0,u=s,f=-1e3,d=0;Math.abs(u-f)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),f=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=o,n.y=u,n}var Qle=["somerc"];const Jle={init:Xle,forward:qle,inverse:Zle,names:Qle};var _d=1e-7;function ece(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(hj(t))!==-1}function tce(){var n,e,t,r,i,s,a,o,l,u,f=0,d,g=0,p=0,E=0,v=0,w=0,T=0;this.no_off=ece(this),this.no_rot="no_rot"in this;var R=!1;"alpha"in this&&(R=!0);var k=!1;if("rectified_grid_angle"in this&&(k=!0),R&&(T=this.alpha),k&&(f=this.rectified_grid_angle),R||k)g=this.longc;else if(p=this.long1,v=this.lat1,E=this.long2,w=this.lat2,Math.abs(v-w)<=_d||(n=Math.abs(v))<=_d||Math.abs(n-Ue)<=_d||Math.abs(Math.abs(this.lat0)-Ue)<=_d||Math.abs(Math.abs(w)-Ue)<=_d)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>it?(o=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*o*o,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Ya(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),R||k?(R?(d=Math.asin(Math.sin(T)/r),k||(f=T)):(d=f,T=Math.asin(r*Math.sin(d))),this.lam0=g-Math.asin(.5*(i-1/i)*Math.tan(d))/this.B):(s=Math.pow(Ya(this.e,v,Math.sin(v)),this.B),a=Math.pow(Ya(this.e,w,Math.sin(w)),this.B),i=this.E/s,l=(a-s)/(a+s),u=this.E*this.E,u=(u-a*s)/(u+a*s),n=p-E,n<-Math.PI?E-=yp:n>Math.PI&&(E+=yp),this.lam0=ct(.5*(p+E)-Math.atan(u*Math.tan(.5*this.B*(p-E))/l)/this.B,this.over),d=Math.atan(2*Math.sin(this.B*ct(p-this.lam0,this.over))/(i-1/i)),f=T=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(vn-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(vn+i))}function nce(n){var e={},t,r,i,s,a,o,l,u;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-Ue)>it){if(a=this.E/Math.pow(Ya(this.e,n.y,Math.sin(n.y)),this.B),o=1/a,t=.5*(a-o),r=.5*(a+o),s=Math.sin(this.B*n.x),i=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<it)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*n.x),Math.abs(o)<_d?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,o)}else u=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function rce(n){var e,t,r,i,s,a,o,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),o=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<it)l.x=0,l.y=o<0?-Ue:Ue;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=xp(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var ice=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const sce={init:tce,forward:nce,inverse:rce,names:ice};function ace(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<it)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=Uo(this.e,e,t),i=Ya(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=Uo(this.e,s,a),l=Ya(this.e,this.lat2,s),u=Math.abs(Math.abs(this.lat0)-Ue)<it?0:Ya(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>it?this.ns=Math.log(r/o)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function oce(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=it&&(t=m1(t)*(Ue-2*it));var r=Math.abs(Math.abs(t)-Ue),i,s;if(r>it)i=Ya(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var a=this.ns*ct(e-this.long0,this.over);return n.x=this.k0*(s*Math.sin(a))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,n}function lce(n){var e,t,r,i,s,a=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),t=1):(e=-Math.sqrt(a*a+o*o),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*a,t*o)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=xp(this.e,r),i===-9999)return null}else i=-Ue;return s=ct(l/this.ns+this.long0,this.over),n.x=s,n.y=i,n}var cce=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const uce={init:ace,forward:oce,inverse:lce,names:cce};function hce(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function fce(n){var e,t,r,i,s,a,o,l=n.x,u=n.y,f=ct(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=o*Math.cos(a)/1,n.x=o*Math.sin(a)/1,this.czech||(n.y*=-1,n.x*=-1),n}function dce(n){var e,t,r,i,s,a,o,l,u=n.x;n.x=n.y,n.y=u,this.czech||(n.y*=-1,n.x*=-1),a=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,o=e,l=0;var f=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-n.y)<1e-10&&(l=1),o=n.y,f+=1;while(l===0&&f<15);return f>=15?null:n}var gce=["Krovak","krovak"];const mce={init:hce,forward:fce,inverse:dce,names:gce};function Ki(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function p1(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function _1(n){return .375*n*(1+.25*n*(1+.46875*n))}function y1(n){return .05859375*n*n*(1+.75*n)}function v1(n){return n*n*n*(35/3072)}function xC(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function xu(n){return Math.abs(n)<Ue?n:n-m1(n)*Math.PI}function Zv(n,e,t,r,i){var s,a;s=n/e;for(var o=0;o<15;o++)if(a=(n-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function pce(){this.sphere||(this.e0=p1(this.es),this.e1=_1(this.es),this.e2=y1(this.es),this.e3=v1(this.es),this.ml0=this.a*Ki(this.e0,this.e1,this.e2,this.e3,this.lat0))}function _ce(n){var e,t,r=n.x,i=n.y;if(r=ct(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),o=xC(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),f=u*u,d=this.es*a*a/(1-this.es),g=this.a*Ki(this.e0,this.e1,this.e2,this.e3,i);e=o*u*(1-f*l*(1/6-(8-l+8*d)*f/120)),t=g-this.ml0+o*s/a*f*(.5+(5-l+6*d)*f/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function yce(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+t,o=Zv(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Ue)<=it)return n.x=this.long0,n.y=Ue,t<0&&(n.y*=-1),n;var l=xC(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(o),2),d=e*this.a/l,g=d*d;r=o-l*Math.tan(o)/u*d*d*(.5-(1+3*f)*d*d/24),i=d*(1-g*(f/3+(1+3*f)*f*g/15))/Math.cos(o)}return n.x=ct(i+this.long0,this.over),n.y=xu(r),n}var vce=["Cassini","Cassini_Soldner","cass"];const xce={init:pce,forward:_ce,inverse:yce,names:vce};function Zc(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var pI=1,_I=2,yI=3,By=4;function Ece(){var n=Math.abs(this.lat0);if(Math.abs(n-Ue)<it?this.mode=this.lat0<0?pI:_I:Math.abs(n)<it?this.mode=yI:this.mode=By,this.es>0){var e;switch(this.qp=Zc(this.e,1),this.mmf=.5/(1-this.es),this.apa=Pce(this.es),this.mode){case _I:this.dd=1;break;case pI:this.dd=1;break;case yI:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case By:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Zc(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===By&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function wce(n){var e,t,r,i,s,a,o,l,u,f,d=n.x,g=n.y;if(d=ct(d-this.long0,this.over),this.sphere){if(s=Math.sin(g),f=Math.cos(g),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+f*r:1+this.sinph0*s+this.cosph0*f*r,t<=it)return null;t=Math.sqrt(2/t),e=t*f*Math.sin(d),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(g+this.lat0)<it)return null;t=vn-g*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(d),t*=r}}else{switch(o=0,l=0,u=0,r=Math.cos(d),i=Math.sin(d),s=Math.sin(g),a=Zc(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=Ue+g,a=this.qp-a;break;case this.S_POLE:u=g-Ue,a=this.qp+a;break}if(Math.abs(u)<it)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*o-this.sinb1*l*r):t=(u=Math.sqrt(2/(1+l*r)))*o*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,t=r*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function Sce(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,s,a,o,l,u;if(this.sphere){var f=0,d,g=0;if(d=Math.sqrt(e*e+t*t),i=d*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=it?0:Math.asin(t*g/d),e*=g,t=f*d;break;case this.OBLIQ:i=Math.abs(d)<=it?this.lat0:Math.asin(f*this.sinph0+t*g*this.cosph0/d),e*=g*this.cosph0,t=(f-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:t=-t,i=Ue-i;break;case this.S_POLE:i-=Ue;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<it)return n.x=this.long0,n.y=this.lat0,n;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(u=s*this.sinb1+t*a*this.cosb1/l,o=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*a):(u=t*a/l,o=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=e*e+t*t,!o)return n.x=this.long0,n.y=this.lat0,n;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,t),i=kce(Math.asin(u),this.apa)}return n.x=ct(this.long0+r,this.over),n.y=i,n}var Tce=.3333333333333333,Ice=.17222222222222222,Ace=.10257936507936508,Rce=.06388888888888888,Cce=.0664021164021164,bce=.016415012942191543;function Pce(n){var e,t=[];return t[0]=n*Tce,e=n*n,t[0]+=e*Ice,t[1]=e*Rce,e*=n,t[0]+=e*Ace,t[1]+=e*Cce,t[2]=e*bce,t}function kce(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var Mce=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Nce={init:Ece,forward:wce,inverse:Sce,names:Mce,S_POLE:pI,N_POLE:_I,EQUIT:yI,OBLIQ:By};function hu(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function Lce(){Math.abs(this.lat1+this.lat2)<it||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Uo(this.e3,this.sin_po,this.cos_po),this.qs1=Zc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Uo(this.e3,this.sin_po,this.cos_po),this.qs2=Zc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Zc(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>it?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Oce(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=Zc(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*ct(e-this.long0,this.over),a=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return n.x=a,n.y=o,n}function Dce(n){var e,t,r,i,s,a;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,t)),s=ct(i/this.ns0+this.long0,this.over),n.x=s,n.y=a,n}function Fce(n,e){var t,r,i,s,a,o=hu(.5*e);if(n<it)return o;for(var l=n*n,u=1;u<=25;u++)if(t=Math.sin(o),r=Math.cos(o),i=n*t,s=1-i*i,a=.5*s*s/r*(e/(1-l)-t/s+.5/n*Math.log((1-i)/(1+i))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var jce=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Vce={init:Lce,forward:Oce,inverse:Dce,names:jce,phi1z:Fce};function Gce(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Bce(n){var e,t,r,i,s,a,o,l,u=n.x,f=n.y;return r=ct(u-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,a>0||Math.abs(a)<=it?(o=this.x0+this.a*s*t*Math.sin(r)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)/a):(o=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function Uce(n){var e,t,r,i,s,a;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),a=hu(r*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),s=ct(this.long0+s,this.over)):(a=this.phic0,s=0),n.x=s,n.y=a,n}var zce=["gnom"];const $ce={init:Gce,forward:Bce,inverse:Uce,names:zce};function Wce(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Ue:Ue;for(var r=Math.asin(.5*e),i,s,a,o,l=0;l<30;l++)if(s=Math.sin(r),a=Math.cos(r),o=n*s,i=Math.pow(1-o*o,2)/(2*a)*(e/(1-n*n)-s/(1-o*o)+.5/n*Math.log((1-o)/(1+o))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function Hce(){this.sphere||(this.k0=Uo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Kce(n){var e=n.x,t=n.y,r,i,s=ct(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var a=Zc(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return n.x=r,n.y=i,n}function Yce(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=ct(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=Wce(this.e,2*n.y*this.k0/this.a),e=ct(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var Xce=["cea"];const qce={init:Hce,forward:Kce,inverse:Yce,names:Xce};function Zce(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Qce(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=xu(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function Jce(n){var e=n.x,t=n.y;return n.x=ct(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=xu(this.lat0+(t-this.y0)/this.a),n}var eue=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const tue={init:Zce,forward:Qce,inverse:Jce,names:eue};var EL=20;function nue(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=p1(this.es),this.e1=_1(this.es),this.e2=y1(this.es),this.e3=v1(this.es),this.ml0=this.a*Ki(this.e0,this.e1,this.e2,this.e3,this.lat0)}function rue(n){var e=n.x,t=n.y,r,i,s,a=ct(e-this.long0,this.over);if(s=a*Math.sin(t),this.sphere)Math.abs(t)<=it?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),i=this.a*(xu(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=it)r=this.a*a,i=-1*this.ml0;else{var o=xC(this.a,this.e,Math.sin(t))/Math.tan(t);r=o*Math.sin(s),i=this.a*Ki(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(s))}return n.x=r+this.x0,n.y=i+this.y0,n}function iue(n){var e,t,r,i,s,a,o,l,u;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=it)e=ct(r/this.a+this.long0,this.over),t=0;else{a=this.lat0+i/this.a,o=r*r/this.a/this.a+a*a,l=a;var f;for(s=EL;s;--s)if(f=Math.tan(l),u=-1*(a*(l*f+1)-l-.5*(l*l+o)*f)/((l-a)/f-1),l+=u,Math.abs(u)<=it){t=l;break}e=ct(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=it)t=0,e=ct(this.long0+r/this.a,this.over);else{a=(this.ml0+i)/this.a,o=r*r/this.a/this.a+a*a,l=a;var d,g,p,E,v;for(s=EL;s;--s)if(v=this.e*Math.sin(l),d=Math.sqrt(1-v*v)*Math.tan(l),g=this.a*Ki(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),E=g/this.a,u=(a*(d*E+1)-E-.5*d*(E*E+o))/(this.es*Math.sin(2*l)*(E*E+o-2*a*E)/(4*d)+(a-E)*(d*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=it){t=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=ct(this.long0+Math.asin(r*d/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var sue=["Polyconic","American_Polyconic","poly"];const aue={init:nue,forward:rue,inverse:iue,names:sue};function oue(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function lue(n){var e,t=n.x,r=n.y,i=r-this.lat0,s=t-this.long0,a=i/Em*1e-5,o=s,l=1,u=0;for(e=1;e<=10;e++)l=l*a,u=u+this.A[e]*l;var f=u,d=o,g=1,p=0,E,v,w=0,T=0;for(e=1;e<=6;e++)E=g*f-p*d,v=p*f+g*d,g=E,p=v,w=w+this.B_re[e]*g-this.B_im[e]*p,T=T+this.B_im[e]*g+this.B_re[e]*p;return n.x=T*this.a+this.x0,n.y=w*this.a+this.y0,n}function cue(n){var e,t=n.x,r=n.y,i=t-this.x0,s=r-this.y0,a=s/this.a,o=i/this.a,l=1,u=0,f,d,g=0,p=0;for(e=1;e<=6;e++)f=l*a-u*o,d=u*a+l*o,l=f,u=d,g=g+this.C_re[e]*l-this.C_im[e]*u,p=p+this.C_im[e]*l+this.C_re[e]*u;for(var E=0;E<this.iterations;E++){var v=g,w=p,T,R,k=a,N=o;for(e=2;e<=6;e++)T=v*g-w*p,R=w*g+v*p,v=T,w=R,k=k+(e-1)*(this.B_re[e]*v-this.B_im[e]*w),N=N+(e-1)*(this.B_im[e]*v+this.B_re[e]*w);v=1,w=0;var O=this.B_re[1],B=this.B_im[1];for(e=2;e<=6;e++)T=v*g-w*p,R=w*g+v*p,v=T,w=R,O=O+e*(this.B_re[e]*v-this.B_im[e]*w),B=B+e*(this.B_im[e]*v+this.B_re[e]*w);var P=O*O+B*B;g=(k*O+N*B)/P,p=(N*O-k*B)/P}var b=g,M=p,F=1,V=0;for(e=1;e<=9;e++)F=F*b,V=V+this.D[e]*F;var W=this.lat0+V*Em*1e5,D=this.long0+M;return n.x=D,n.y=W,n}var uue=["New_Zealand_Map_Grid","nzmg"];const hue={init:oue,forward:lue,inverse:cue,names:uue};function fue(){}function due(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=s,n}function gue(n){n.x-=this.x0,n.y-=this.y0;var e=ct(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var mue=["Miller_Cylindrical","mill"];const pue={init:fue,forward:due,inverse:gue,names:mue};var _ue=20;function yue(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=gC(this.es)}function vue(n){var e,t,r=n.x,i=n.y;if(r=ct(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=_ue;a;--a){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<it)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);t=this.a*D0(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function xue(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=hu((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=hu(Math.sin(e)/this.n)),r=ct(r+this.long0,this.over),e=xu(e)):(e=mC(n.y/this.a,this.es,this.en),i=Math.abs(e),i<Ue?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=ct(t,this.over)):i-it<Ue&&(r=this.long0)),n.x=r,n.y=e,n}var Eue=["Sinusoidal","sinu"];const wue={init:yue,forward:vue,inverse:xue,names:Eue};function Sue(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function Tue(n){for(var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=t,s=Math.PI*Math.sin(t);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<it)break}i/=2,Math.PI/2-Math.abs(t)<it&&(r=0);var o=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=o,n.y=l,n}function Iue(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=ct(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var Aue=["Mollweide","moll"];const Rue={init:Sue,forward:Tue,inverse:Iue,names:Aue};function Cue(){Math.abs(this.lat1+this.lat2)<it||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=p1(this.es),this.e1=_1(this.es),this.e2=y1(this.es),this.e3=v1(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Uo(this.e,this.sin_phi,this.cos_phi),this.ml1=Ki(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<it?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Uo(this.e,this.sin_phi,this.cos_phi),this.ml2=Ki(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ki(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function bue(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=Ki(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var s=this.ns*ct(e-this.long0,this.over),a=this.x0+r*Math.sin(s),o=this.y0+this.rh-r*Math.cos(s);return n.x=a,n.y=o,n}function Pue(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=ct(this.long0+s/this.ns,this.over),r=xu(this.g-t/this.a),n.x=i,n.y=r,n;var a=this.g-t/this.a;return r=Zv(a,this.e0,this.e1,this.e2,this.e3),i=ct(this.long0+s/this.ns,this.over),n.x=i,n.y=r,n}var kue=["Equidistant_Conic","eqdc"];const Mue={init:Cue,forward:bue,inverse:Pue,names:kue};function Nue(){this.R=this.a}function Lue(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i,s;Math.abs(t)<=it&&(i=this.x0+this.R*r,s=this.y0);var a=hu(2*Math.abs(t/Math.PI));(Math.abs(r)<=it||Math.abs(Math.abs(t)-Ue)<=it)&&(i=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/r-r/Math.PI),l=o*o,u=Math.sin(a),f=Math.cos(a),d=f/(u+f-1),g=d*d,p=d*(2/u-1),E=p*p,v=Math.PI*this.R*(o*(d-E)+Math.sqrt(l*(d-E)*(d-E)-(E+l)*(g-E)))/(E+l);r<0&&(v=-v),i=this.x0+v;var w=l+d;return v=Math.PI*this.R*(p*w-o*Math.sqrt((E+l)*(l+1)-w*w))/(E+l),t>=0?s=this.y0+v:s=this.y0-v,n.x=i,n.y=s,n}function Oue(n){var e,t,r,i,s,a,o,l,u,f,d,g,p;return n.x-=this.x0,n.y-=this.y0,d=Math.PI*this.R,r=n.x/d,i=n.y/d,s=r*r+i*i,a=-Math.abs(i)*(1+s),o=a-2*i*i+r*r,l=-2*a+1+2*i*i+s*s,p=i*i/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,u=(a-o*o/3/l)/l,f=2*Math.sqrt(-u/3),d=3*p/u/f,Math.abs(d)>1&&(d>=0?d=1:d=-1),g=Math.acos(d)/3,n.y>=0?t=(-f*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI:t=-(-f*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI,Math.abs(r)<it?e=this.long0:e=ct(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),n.x=e,n.y=t,n}var Due=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const Fue={init:Nue,forward:Lue,inverse:Oue,names:Due};function jue(n,e,t,r,i,s){const a=r-e,o=Math.atan((1-s)*Math.tan(n)),l=Math.atan((1-s)*Math.tan(t)),u=Math.sin(o),f=Math.cos(o),d=Math.sin(l),g=Math.cos(l);let p=a,E,v=100,w,T,R,k,N,O,B,P,b,M,F,V,W,D;do{if(w=Math.sin(p),T=Math.cos(p),R=Math.sqrt(g*w*(g*w)+(f*d-u*g*T)*(f*d-u*g*T)),R===0)return{azi1:0,s12:0};k=u*d+f*g*T,N=Math.atan2(R,k),O=f*g*w/R,B=1-O*O,P=B!==0?k-2*u*d/B:0,b=s/16*B*(4+s*(4-3*B)),E=p,p=a+(1-b)*s*O*(N+b*R*(P+b*k*(-1+2*P*P)))}while(Math.abs(p-E)>1e-12&&--v>0);return v===0?{azi1:NaN,s12:NaN}:(M=B*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),F=1+M/16384*(4096+M*(-768+M*(320-175*M))),V=M/1024*(256+M*(-128+M*(74-47*M))),W=V*R*(P+V/4*(k*(-1+2*P*P)-V/6*P*(-3+4*R*R)*(-3+4*P*P))),D=i*(1-s)*F*(N-W),{azi1:Math.atan2(g*w,f*d-u*g*T),s12:D})}function Vue(n,e,t,r,i,s){const a=Math.atan((1-s)*Math.tan(n)),o=Math.sin(a),l=Math.cos(a),u=Math.sin(t),f=Math.cos(t),d=Math.atan2(o,l*f),g=l*u,p=1-g*g,E=p*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),v=1+E/16384*(4096+E*(-768+E*(320-175*E))),w=E/1024*(256+E*(-128+E*(74-47*E)));let T=r/(i*(1-s)*v),R,k=100,N,O,B,P;do N=Math.cos(2*d+T),O=Math.sin(T),B=Math.cos(T),P=w*O*(N+w/4*(B*(-1+2*N*N)-w/6*N*(-3+4*O*O)*(-3+4*N*N))),R=T,T=r/(i*(1-s)*v)+P;while(Math.abs(T-R)>1e-12&&--k>0);if(k===0)return{lat2:NaN,lon2:NaN};const b=o*O-l*B*f,M=Math.atan2(o*B+l*O*f,(1-s)*Math.sqrt(g*g+b*b)),F=Math.atan2(O*u,l*B-o*O*f),V=s/16*p*(4+s*(4-3*p)),W=F-(1-V)*s*g*(T+V*O*(N+V*B*(-1+2*N*N))),D=e+W;return{lat2:M,lon2:D}}function Gue(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Bue(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),s=ct(e-this.long0,this.over),a,o,l,u,f,d,g,p,E,v,w;return this.sphere?Math.abs(this.sin_p12-1)<=it?(n.x=this.x0+this.a*(Ue-t)*Math.sin(s),n.y=this.y0-this.a*(Ue-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=it?(n.x=this.x0+this.a*(Ue+t)*Math.sin(s),n.y=this.y0+this.a*(Ue+t)*Math.cos(s),n):(E=this.sin_p12*r+this.cos_p12*i*Math.cos(s),g=Math.acos(E),p=g?g/Math.sin(g):1,n.x=this.x0+this.a*p*i*Math.sin(s),n.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),n):(a=p1(this.es),o=_1(this.es),l=y1(this.es),u=v1(this.es),Math.abs(this.sin_p12-1)<=it?(f=this.a*Ki(a,o,l,u,Ue),d=this.a*Ki(a,o,l,u,t),n.x=this.x0+(f-d)*Math.sin(s),n.y=this.y0-(f-d)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=it?(f=this.a*Ki(a,o,l,u,Ue),d=this.a*Ki(a,o,l,u,t),n.x=this.x0+(f+d)*Math.sin(s),n.y=this.y0+(f+d)*Math.cos(s),n):Math.abs(e)<it&&Math.abs(t-this.lat0)<it?(n.x=n.y=0,n):(v=jue(this.lat0,this.long0,t,e,this.a,this.f),w=v.azi1,n.x=v.s12*Math.sin(w),n.y=v.s12*Math.cos(w),n))}function Uue(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a,o,l,u,f,d,g,p,E,v,w;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*Ue*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=it?a=this.lat0:(a=hu(i*this.sin_p12+n.y*r*this.cos_p12/e),o=Math.abs(this.lat0)-Ue,Math.abs(o)<=it?this.lat0>=0?s=ct(this.long0+Math.atan2(n.x,-n.y),this.over):s=ct(this.long0-Math.atan2(-n.x,n.y),this.over):s=ct(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=s,n.y=a,n)):(l=p1(this.es),u=_1(this.es),f=y1(this.es),d=v1(this.es),Math.abs(this.sin_p12-1)<=it?(g=this.a*Ki(l,u,f,d,Ue),e=Math.sqrt(n.x*n.x+n.y*n.y),p=g-e,a=Zv(p/this.a,l,u,f,d),s=ct(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=s,n.y=a,n):Math.abs(this.sin_p12+1)<=it?(g=this.a*Ki(l,u,f,d,Ue),e=Math.sqrt(n.x*n.x+n.y*n.y),p=e-g,a=Zv(p/this.a,l,u,f,d),s=ct(this.long0+Math.atan2(n.x,n.y),this.over),n.x=s,n.y=a,n):(E=Math.atan2(n.x,n.y),v=Math.sqrt(n.x*n.x+n.y*n.y),w=Vue(this.lat0,this.long0,E,v,this.a,this.f),n.x=w.lon2,n.y=w.lat2,n))}var zue=["Azimuthal_Equidistant","aeqd"];const $ue={init:Gue,forward:Bue,inverse:Uue,names:zue};function Wue(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Hue(n){var e,t,r,i,s,a,o,l,u=n.x,f=n.y;return r=ct(u-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,(a>0||Math.abs(a)<=it)&&(o=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function Kue(n){var e,t,r,i,s,a,o;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=hu(e/this.a),r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=it?(o=this.lat0,n.x=a,n.y=o,n):(o=hu(i*this.sin_p14+n.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-Ue,Math.abs(s)<=it?(this.lat0>=0?a=ct(this.long0+Math.atan2(n.x,-n.y),this.over):a=ct(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=a,n.y=o,n):(a=ct(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=a,n.y=o,n))}var Yue=["ortho"];const Xue={init:Wue,forward:Hue,inverse:Kue,names:Yue};var Jn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},xn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function que(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ue-vn/2?this.face=Jn.TOP:this.lat0<=-(Ue-vn/2)?this.face=Jn.BOTTOM:Math.abs(this.long0)<=vn?this.face=Jn.FRONT:Math.abs(this.long0)<=Ue+vn?this.face=this.long0>0?Jn.RIGHT:Jn.LEFT:this.face=Jn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Zue(n){var e={x:0,y:0},t,r,i,s,a,o,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===Jn.TOP)s=Ue-t,r>=vn&&r<=Ue+vn?(l.value=xn.AREA_0,i=r-Ue):r>Ue+vn||r<=-(Ue+vn)?(l.value=xn.AREA_1,i=r>0?r-pr:r+pr):r>-(Ue+vn)&&r<=-vn?(l.value=xn.AREA_2,i=r+Ue):(l.value=xn.AREA_3,i=r);else if(this.face===Jn.BOTTOM)s=Ue+t,r>=vn&&r<=Ue+vn?(l.value=xn.AREA_0,i=-r+Ue):r<vn&&r>=-vn?(l.value=xn.AREA_1,i=-r):r<-vn&&r>=-(Ue+vn)?(l.value=xn.AREA_2,i=-r-Ue):(l.value=xn.AREA_3,i=r>0?-r+pr:-r-pr);else{var u,f,d,g,p,E,v;this.face===Jn.RIGHT?r=Ud(r,+Ue):this.face===Jn.BACK?r=Ud(r,+pr):this.face===Jn.LEFT&&(r=Ud(r,-Ue)),g=Math.sin(t),p=Math.cos(t),E=Math.sin(r),v=Math.cos(r),u=p*v,f=p*E,d=g,this.face===Jn.FRONT?(s=Math.acos(u),i=iy(s,d,f,l)):this.face===Jn.RIGHT?(s=Math.acos(f),i=iy(s,d,-u,l)):this.face===Jn.BACK?(s=Math.acos(-u),i=iy(s,d,-f,l)):this.face===Jn.LEFT?(s=Math.acos(-f),i=iy(s,d,u,l)):(s=i=0,l.value=xn.AREA_0)}return o=Math.atan(12/pr*(i+Math.acos(Math.sin(i)*Math.cos(vn))-Ue)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===xn.AREA_1?o+=Ue:l.value===xn.AREA_2?o+=pr:l.value===xn.AREA_3&&(o+=1.5*pr),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function Que(n){var e={lam:0,phi:0},t,r,i,s,a,o,l,u,f,d={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?d.value=xn.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(d.value=xn.AREA_1,t-=Ue):n.x<0&&-n.x>=Math.abs(n.y)?(d.value=xn.AREA_2,t=t<0?t+pr:t-pr):(d.value=xn.AREA_3,t+=Ue),f=pr/12*Math.tan(t),a=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),o=Math.atan(a),i=Math.cos(t),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===Jn.TOP)u=Math.acos(l),e.phi=Ue-u,d.value===xn.AREA_0?e.lam=o+Ue:d.value===xn.AREA_1?e.lam=o<0?o+pr:o-pr:d.value===xn.AREA_2?e.lam=o-Ue:e.lam=o;else if(this.face===Jn.BOTTOM)u=Math.acos(l),e.phi=u-Ue,d.value===xn.AREA_0?e.lam=-o+Ue:d.value===xn.AREA_1?e.lam=-o:d.value===xn.AREA_2?e.lam=-o-Ue:e.lam=o<0?-o-pr:-o+pr;else{var g,p,E;g=l,f=g*g,f>=1?E=0:E=Math.sqrt(1-f)*Math.sin(o),f+=E*E,f>=1?p=0:p=Math.sqrt(1-f),d.value===xn.AREA_1?(f=p,p=-E,E=f):d.value===xn.AREA_2?(p=-p,E=-E):d.value===xn.AREA_3&&(f=p,p=E,E=-f),this.face===Jn.RIGHT?(f=g,g=-p,p=f):this.face===Jn.BACK?(g=-g,p=-p):this.face===Jn.LEFT&&(f=g,g=p,p=-f),e.phi=Math.acos(-E)-Ue,e.lam=Math.atan2(p,g),this.face===Jn.RIGHT?e.lam=Ud(e.lam,-Ue):this.face===Jn.BACK?e.lam=Ud(e.lam,-pr):this.face===Jn.LEFT&&(e.lam=Ud(e.lam,+Ue))}if(this.es!==0){var v,w,T;v=e.phi<0?1:0,w=Math.tan(e.phi),T=this.b/Math.sqrt(w*w+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),v&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function iy(n,e,t,r){var i;return n<it?(r.value=xn.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=vn?r.value=xn.AREA_0:i>vn&&i<=Ue+vn?(r.value=xn.AREA_1,i-=Ue):i>Ue+vn||i<=-(Ue+vn)?(r.value=xn.AREA_2,i=i>=0?i-pr:i+pr):(r.value=xn.AREA_3,i+=Ue)),i}function Ud(n,e){var t=n+e;return t<-pr?t+=yp:t>+pr&&(t-=yp),t}var Jue=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const ehe={init:que,forward:Zue,inverse:Que,names:Jue};var vI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],rm=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Tj=.8487,Ij=1.3523,Aj=gs/5,the=1/Aj,Pd=18,Qv=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},nhe=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function rhe(n,e,t,r){for(var i=e;r;--r){var s=n(i);if(i-=s,Math.abs(s)<t)break}return i}function ihe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function she(n){var e=ct(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*Aj);r<0?r=0:r>=Pd&&(r=Pd-1),t=gs*(t-the*r);var i={x:Qv(vI[r],t)*e,y:Qv(rm[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*Tj+this.x0,i.y=i.y*this.a*Ij+this.y0,i}function ahe(n){var e={x:(n.x-this.x0)/(this.a*Tj),y:Math.abs(n.y-this.y0)/(this.a*Ij)};if(e.y>=1)e.x/=vI[Pd][0],e.y=n.y<0?-Ue:Ue;else{var t=Math.floor(e.y*Pd);for(t<0?t=0:t>=Pd&&(t=Pd-1);;)if(rm[t][0]>e.y)--t;else if(rm[t+1][0]<=e.y)++t;else break;var r=rm[t],i=5*(e.y-r[0])/(rm[t+1][0]-r[0]);i=rhe(function(s){return(Qv(r,s)-e.y)/nhe(r,s)},i,it,100),e.x/=Qv(vI[t],i),e.y=(5*t+i)*ar,n.y<0&&(e.y=-e.y)}return e.x=ct(e.x+this.long0,this.over),e}var ohe=["Robinson","robin"];const lhe={init:ihe,forward:she,inverse:ahe,names:ohe};function che(){this.name="geocent"}function uhe(n){var e=dj(n,this.es,this.a);return e}function hhe(n){var e=gj(n,this.es,this.a,this.b);return e}var fhe=["Geocentric","geocentric","geocent","Geocent"];const dhe={init:che,forward:uhe,inverse:hhe,names:fhe};var Ci={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Vg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function ghe(){if(Object.keys(Vg).forEach((function(t){if(typeof this[t]>"u")this[t]=Vg[t].def;else{if(Vg[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Vg[t].num&&(this[t]=parseFloat(this[t]))}Vg[t].degrees&&(this[t]=this[t]*ar)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ue)<it?this.mode=this.lat0<0?Ci.S_POLE:Ci.N_POLE:Math.abs(this.lat0)<it?this.mode=Ci.EQUIT:(this.mode=Ci.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function mhe(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,s;switch(this.mode){case Ci.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case Ci.EQUIT:s=t*r;break;case Ci.S_POLE:s=-e;break;case Ci.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*t*Math.sin(n.x),this.mode){case Ci.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case Ci.EQUIT:s*=e;break;case Ci.N_POLE:s*=-(t*r);break;case Ci.S_POLE:s*=t*r;break}var a,o;return a=s*this.cg+i*this.sg,o=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=a*o,n.x=i*this.a,n.y=s*this.a,n}function phe(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var s=us(n.x,n.y);if(Math.abs(s)<it)e.x=0,e.y=n.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Ci.OBLIQ:e.y=Math.asin(a*this.sinph0+n.y*o*this.cosph0/s),n.y=(a-this.sinph0*Math.sin(e.y))*s,n.x*=o*this.cosph0;break;case Ci.EQUIT:e.y=Math.asin(n.y*o/s),n.y=a*s,n.x*=o;break;case Ci.N_POLE:e.y=Math.asin(a),n.y=-n.y;break;case Ci.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var _he=["Tilted_Perspective","tpers"];const yhe={init:ghe,forward:mhe,inverse:phe,names:_he};function vhe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function xhe(n){var e=n.x,t=n.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var o=this.radius_p/us(this.radius_p*Math.cos(t),Math.sin(t));if(i=o*Math.cos(e)*Math.cos(t),s=o*Math.sin(e)*Math.cos(t),a=o*Math.sin(t),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/us(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/us(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/us(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/us(s,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function Ehe(n){var e=-1,t=0,r=0,i,s,a,o;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*us(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*us(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var whe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const She={init:vhe,forward:xhe,inverse:Ehe,names:whe};var wm=1.340264,Sm=-.081106,Tm=893e-6,Im=.003796,Jv=Math.sqrt(3)/2;function The(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function Ihe(n){var e=ct(n.x-this.long0,this.over),t=n.y,r=Math.asin(Jv*Math.sin(t)),i=r*r,s=i*i*i;return n.x=e*Math.cos(r)/(Jv*(wm+3*Sm*i+s*(7*Tm+9*Im*i))),n.y=r*(wm+Sm*i+s*(Tm+Im*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Ahe(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,s,a,o,l,u;for(u=0;u<t&&(i=r*r,s=i*i*i,a=r*(wm+Sm*i+s*(Tm+Im*i))-n.y,o=wm+3*Sm*i+s*(7*Tm+9*Im*i),r-=l=a/o,!(Math.abs(l)<e));++u);return i=r*r,s=i*i*i,n.x=Jv*n.x*(wm+3*Sm*i+s*(7*Tm+9*Im*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/Jv),n.x=ct(n.x+this.long0,this.over),n}var Rhe=["eqearth","Equal Earth","Equal_Earth"];const Che={init:The,forward:Ihe,inverse:Ahe,names:Rhe};var Ep=1e-10;function bhe(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<Ep)throw new Error;this.es?(this.en=gC(this.es),this.m1=D0(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=khe,this.forward=Phe):(Math.abs(this.phi1)+Ep>=Ue?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Nhe,this.forward=Mhe)}function Phe(n){var e=ct(n.x-(this.long0||0),this.over),t=n.y,r,i,s;return r=this.am1+this.m1-D0(t,i=Math.sin(t),s=Math.cos(t),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function khe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=us(n.x,n.y=this.am1-n.y),i=mC(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<Ue)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-Ue)<=Ep)r=0;else throw new Error;return n.x=ct(r+(this.long0||0),this.over),n.y=xu(i),n}function Mhe(n){var e=ct(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>Ep?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Nhe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=us(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Ue)throw new Error;return Math.abs(Math.abs(t)-Ue)<=Ep?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=ct(e+(this.long0||0),this.over),n.y=xu(t),n}var Lhe=["bonne","Bonne (Werner lat_1=90)"];const Ohe={init:bhe,names:Lhe},wL={OBLIQUE:{forward:Ghe,inverse:Uhe},TRANSVERSE:{forward:Bhe,inverse:zhe}},ex={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Dhe(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=cj.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=ya(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const r=Object.keys(ex),i=o=>{if(typeof this[o]>"u")return;const l=parseFloat(this[o])*ar;if(isNaN(l))throw new Error("Invalid value for "+o+": "+this[o]);return l};for(let o=0;o<r.length;o++){const l=r[o],u=ex[l],f=Object.entries(u);if(f.some(([g])=>typeof this[g]<"u")){t=u;for(let g=0;g<f.length;g++){const[p,E]=f[g],v=i(p);if(typeof v>"u")throw new Error("Missing parameter: "+p+".");this[E]=v}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:a}=Vhe(this,t);this.lamp=s,Math.abs(a)>it?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=wL.OBLIQUE):this.projectionType=wL.TRANSVERSE}function Fhe(n){return this.projectionType.forward(this,n)}function jhe(n){return this.projectionType.inverse(this,n)}function Vhe(n,e){let t,r;if(e===ex.ROTATE){let i=n.oLongC,s=n.oLatC,a=n.oAlpha;if(Math.abs(Math.abs(s)-Ue)<=it)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(s)),t=Math.asin(Math.cos(s)*Math.sin(a))}else if(e===ex.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,s=n.oLat1,a=n.oLong2,o=n.oLat2,l=Math.abs(s);if(Math.abs(s)>Ue-it)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90");if(Math.abs(o)>Ue-it)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90");if(Math.abs(s-o)<it)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<it)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(o)*Math.cos(i)-Math.sin(s)*Math.cos(o)*Math.cos(a),Math.sin(s)*Math.cos(o)*Math.sin(a)-Math.cos(s)*Math.sin(o)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:t}}function Ghe(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(t),s=Math.sin(r),a=Math.cos(r);e.x=ct(Math.atan2(a*Math.sin(t),n.sphip*a*i+n.cphip*s)+n.lamp),e.y=Math.asin(n.sphip*s-n.cphip*a*i);const o=n.obliqueProjection.forward(e);return n.isIdentity&&(o.x*=gs,o.y*=gs),o}function Bhe(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(r),s=Math.cos(t);e.x=ct(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*s);const a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=gs,a.y*=gs),a}function Uhe(n,e){n.isIdentity&&(e.x*=ar,e.y*=ar);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(r),n.sphip*o*s-n.cphip*a),e.y=Math.asin(n.sphip*a+n.cphip*o*s)}return e.x=ct(e.x+n.long0),e}function zhe(n,e){n.isIdentity&&(e.x*=ar,e.y*=ar);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=n.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=ct(e.x+n.long0),e}var $he=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Whe={init:Dhe,forward:Fhe,inverse:jhe,names:$he};function Hhe(n){n.Proj.projections.add(Vy),n.Proj.projections.add(Gy),n.Proj.projections.add(Lle),n.Proj.projections.add(zle),n.Proj.projections.add(Yle),n.Proj.projections.add(Jle),n.Proj.projections.add(sce),n.Proj.projections.add(uce),n.Proj.projections.add(mce),n.Proj.projections.add(xce),n.Proj.projections.add(Nce),n.Proj.projections.add(Vce),n.Proj.projections.add($ce),n.Proj.projections.add(qce),n.Proj.projections.add(tue),n.Proj.projections.add(aue),n.Proj.projections.add(hue),n.Proj.projections.add(pue),n.Proj.projections.add(wue),n.Proj.projections.add(Rue),n.Proj.projections.add(Mue),n.Proj.projections.add(Fue),n.Proj.projections.add($ue),n.Proj.projections.add(Xue),n.Proj.projections.add(ehe),n.Proj.projections.add(lhe),n.Proj.projections.add(dhe),n.Proj.projections.add(yhe),n.Proj.projections.add(She),n.Proj.projections.add(Che),n.Proj.projections.add(Ohe),n.Proj.projections.add(Whe)}const an=Object.assign(Zoe,{defaultDatum:"WGS84",Proj:ya,WGS84:new ya("WGS84"),Point:v0,toPoint:mj,defs:li,nadgrid:Noe,transform:qv,mgrs:Qoe,version:"__VERSION__"});Hhe(an);class Rj{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=qa,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Nn(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Nn(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Mt()}readFeature(e,t){return Mt()}readFeatures(e,t){return Mt()}readGeometry(e,t){return Mt()}readProjection(e){return Mt()}writeFeature(e,t){return Mt()}writeFeatures(e,t){return Mt()}writeGeometry(e,t){return Mt()}}function to(n,e,t){const r=t?Nn(t.featureProjection):null,i=t?Nn(t.dataProjection):null;let s=n;if(r&&i&&!yh(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(Vm(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(l){for(let u=0,f=l.length;u<f;++u)l[u]=Math.round(l[u]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Khe={Point:Za,LineString:Vo,Polygon:Qa,MultiPoint:S0,MultiLineString:Jc,MultiPolygon:t0};function Yhe(n,e,t){return Array.isArray(e[0])?(mD(n,0,e,t)||(n=n.slice(),JS(n,0,e,t)),n):(tA(n,0,e,t)||(n=n.slice(),nv(n,0,e,t)),n)}function Cj(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>Cj({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return to(new js(r,r==="Polygon"?Yhe(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function EC(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>EC(i,e));return new Ka(r)}const t=Khe[n.type];return to(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Xhe extends Rj{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(sy(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(sy(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Mt()}readFeaturesFromObject(e,t){return Mt()}readGeometry(e,t){return this.readGeometryFromObject(sy(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Mt()}readProjection(e){return this.readProjectionFromObject(sy(e))}readProjectionFromObject(e){return Mt()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Mt()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Mt()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Mt()}}function sy(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class wC extends Xhe{constructor(e){e=e||{},super(),this.dataProjection=Nn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Nn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=SC(r.geometry);if(this.featureClass===js)return Cj({geometry:i,id:r.id,properties:r.properties},t);const s=new qa;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(EC(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,l=a.length;o<l;++o){const u=this.readFeatureFromObject(a[o],t);u&&i.push(u)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return qhe(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Nn(t.properties.name);else if(t.type==="EPSG")r=Nn("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=xI(a,t),delete s[e.getGeometryName()]),Th(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return xI(e,this.adaptOptions(t))}}function SC(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Qhe(n);break}case"LineString":{t=Jhe(n);break}case"Polygon":{t=rfe(n);break}case"MultiPoint":{t=tfe(n);break}case"MultiLineString":{t=efe(n);break}case"MultiPolygon":{t=nfe(n);break}case"GeometryCollection":{t=Zhe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function qhe(n,e){const t=SC(n);return EC(t,e)}function Zhe(n,e){return n.geometries.map(function(r){return SC(r)})}function Qhe(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Qh(e.length)}}function Jhe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Qh(e[0]?.length||2)}}function efe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=jp(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Qh(t)}}function tfe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Qh(e[0]?.length||2)}}function nfe(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=WO(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Qh(r)}}function rfe(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=jp(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Qh(r)}}function xI(n,e){n=to(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=cfe(n);break}case"LineString":{r=sfe(n);break}case"Polygon":{r=ufe(n,e);break}case"MultiPoint":{r=ofe(n);break}case"MultiLineString":{r=afe(n);break}case"MultiPolygon":{r=lfe(n,e);break}case"GeometryCollection":{r=ife(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function ife(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return xI(r,e)})}}function sfe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function afe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function ofe(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function lfe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function cfe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function ufe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const tx="http://www.w3.org/2001/XMLSchema-instance";function of(n,e){return F0().createElementNS(n,e)}function no(n,e){return bj(n,e,[]).join("")}function bj(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)bj(r,e,t)}return t}function ml(n){return"documentElement"in n}function pl(n){return new DOMParser().parseFromString(n,"application/xml")}function SL(n,e){return(function(t,r){const i=n.call(e??this,t,r);if(i!==void 0){const s=r[r.length-1];yn(s,i)}})}function Ba(n,e){return(function(t,r){const i=n.call(e??this,t,r);i!==void 0&&r[r.length-1].push(i)})}function TC(n,e){return(function(t,r){const i=n.call(this,t,r);i!==void 0&&(r[r.length-1]=i)})}function je(n,e,t){return(function(r,i){const s=n.call(this,r,i);if(s!==void 0){const a=i[i.length-1],o=e!==void 0?e:r.localName;a[o]=s}})}function Ze(n,e){return(function(t,r,i){n.call(this,t,r,i),i[i.length-1].node.appendChild(t)})}function Pj(n,e){let t,r;return function(i,s,a){if(t===void 0){t={};const o={};o[i.localName]=n,t[i.namespaceURI]=o,r=ro(i.localName)}kj(t,r,s,a)}}function ro(n,e){return(function(t,r,i){const a=r[r.length-1].node;let o=n;o===void 0&&(o=i);const l=a.namespaceURI;return of(l,o)})}const Mi=ro();function ps(n,e){const t=e.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=n[e[i]];return r}function lt(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function Eu(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=n[i.namespaceURI];if(s!==void 0){const a=s[i.localName];a!==void 0&&a.call(r,i,t)}}}function Zt(n,e,t,r,i){return r.push(n),Eu(e,t,r,i),r.pop()}function kj(n,e,t,r,i,s){const a=(i!==void 0?i:t).length;let o,l;for(let u=0;u<a;++u)o=t[u],o!==void 0&&(l=e.call(s,o,r,i!==void 0?i[u]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(s,l,o,r))}function On(n,e,t,r,i,s,a){return i.push(n),kj(e,t,r,i,s,a),i.pop()}let TS;function hfe(){return TS===void 0&&typeof XMLSerializer<"u"&&(TS=new XMLSerializer),TS}let IS;function F0(){return IS===void 0&&typeof document<"u"&&(IS=document.implementation.createDocument("","",null)),IS}class Mj extends Rj{constructor(){super(),this.xmlSerializer_=hfe()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const r=pl(e);return this.readFeatureFromDocument(r,t)}return ml(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const r=pl(e);return this.readFeaturesFromDocument(r,t)}return ml(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&yn(r,this.readFeaturesFromNode(i,t));return r}readFeaturesFromNode(e,t){return Mt()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const r=pl(e);return this.readGeometryFromDocument(r,t)}return ml(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=pl(e);return this.readProjectionFromDocument(t)}return ml(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}function fu(n){const e=no(n,!1);return ffe(e)}function ffe(n){const e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function AE(n){const e=no(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function cn(n){const e=no(n,!1);return dfe(e)}function dfe(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function wp(n){const e=no(n,!1);return gfe(e)}function gfe(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function $t(n){return no(n,!1).trim()}function x0(n,e){gn(n,e?"1":"0")}function mfe(n,e){n.appendChild(F0().createCDATASection(e))}function pfe(n,e){const t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+Ag(t.getUTCMonth()+1,2)+"-"+Ag(t.getUTCDate(),2)+"T"+Ag(t.getUTCHours(),2)+":"+Ag(t.getUTCMinutes(),2)+":"+Ag(t.getUTCSeconds(),2)+"Z";n.appendChild(F0().createTextNode(r))}function ss(n,e){const t=e.toPrecision();n.appendChild(F0().createTextNode(t))}function nx(n,e){const t=e.toString();n.appendChild(F0().createTextNode(t))}const _fe=/^\s/,yfe=/\s$/,vfe=/(\n|\t|\r|<|&| {2})/;function gn(n,e){typeof e=="string"&&(_fe.test(e)||yfe.test(e)||vfe.test(e))?e.split("]]>").forEach((t,r,i)=>{r<i.length-1&&(t+="]]"),r>0&&(t=">"+t),mfe(n,t)}):n.appendChild(F0().createTextNode(e))}const Bn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],xfe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",Efe={rte:Nj,trk:Lj,wpt:Oj},wfe=lt(Bn,{rte:Ba(Nj),trk:Ba(Lj),wpt:Ba(Oj)}),Sfe=lt(Bn,{text:je($t,"linkText"),type:je($t,"linkType")}),Tfe=lt(Bn,{name:je($t),email:Zfe,link:x1}),Ife=lt(Bn,{name:je($t),desc:je($t),author:je(Yfe),copyright:je(Xfe),link:x1,time:je(AE),keywords:je($t),bounds:qfe,extensions:RE}),Afe=lt(Bn,{year:je(wp),license:je($t)}),Rfe=lt(Bn,{rte:Ze(tde),trk:Ze(nde),wpt:Ze(ide)});class Cfe extends Mj{constructor(e){super(),e=e||{},this.dataProjection=Nn("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const i=e[t];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(pl(e)):ml(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!Bn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Bn.includes(t.namespaceURI)&&t.localName==="metadata")return Zt({},Ife,t,[]);return null}readFeatureFromNode(e,t){if(!Bn.includes(e.namespaceURI))return null;const r=Efe[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!Bn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=Zt([],wfe,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=of("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",tx),r.setAttributeNS(tx,"xsi:schemaLocation",xfe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),On({node:r},Rfe,Kfe,e,[t]),r}}const bfe=lt(Bn,{name:je($t),cmt:je($t),desc:je($t),src:je($t),link:x1,number:je(wp),extensions:RE,type:je($t),rtept:Qfe}),Pfe=lt(Bn,{ele:je(cn),time:je(AE)}),kfe=lt(Bn,{name:je($t),cmt:je($t),desc:je($t),src:je($t),link:x1,number:je(wp),type:je($t),extensions:RE,trkseg:ede}),Mfe=lt(Bn,{trkpt:Jfe}),Nfe=lt(Bn,{ele:je(cn),time:je(AE)}),Lfe=lt(Bn,{ele:je(cn),time:je(AE),magvar:je(cn),geoidheight:je(cn),name:je($t),cmt:je($t),desc:je($t),src:je($t),link:x1,sym:je($t),type:je($t),fix:je($t),sat:je(wp),hdop:je(cn),vdop:je(cn),pdop:je(cn),ageofdgpsdata:je(cn),dgpsid:je(wp),extensions:RE}),Ofe=["text","type"],Dfe=lt(Bn,{text:Ze(gn),type:Ze(gn)}),Ffe=lt(Bn,["name","cmt","desc","src","link","number","type","rtept"]),jfe=lt(Bn,{name:Ze(gn),cmt:Ze(gn),desc:Ze(gn),src:Ze(gn),link:Ze(RC),number:Ze(nx),type:Ze(gn),rtept:Pj(Ze(CC))}),Vfe=lt(Bn,["ele","time"]),Gfe=lt(Bn,["name","cmt","desc","src","link","number","type","trkseg"]),Bfe=lt(Bn,{name:Ze(gn),cmt:Ze(gn),desc:Ze(gn),src:Ze(gn),link:Ze(RC),number:Ze(nx),type:Ze(gn),trkseg:Pj(Ze(rde))}),Ufe=ro("trkpt"),zfe=lt(Bn,{trkpt:Ze(CC)}),$fe=lt(Bn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Wfe=lt(Bn,{ele:Ze(ss),time:Ze(pfe),magvar:Ze(ss),geoidheight:Ze(ss),name:Ze(gn),cmt:Ze(gn),desc:Ze(gn),src:Ze(gn),link:Ze(RC),sym:Ze(gn),type:Ze(gn),fix:Ze(gn),sat:Ze(nx),hdop:Ze(ss),vdop:Ze(ss),pdop:Ze(ss),ageofdgpsdata:Ze(ss),dgpsid:Ze(nx)}),Hfe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Kfe(n,e,t){const r=n.getGeometry();if(r){const i=Hfe[r.getType()];if(i){const s=e[e.length-1].node;return of(s.namespaceURI,i)}}}function IC(n,e,t,r){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,e.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,e.hasM=!0):n.push(0),n}function AC(n,e,t){let r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),i!==4){for(let s=0,a=e.length/4;s<a;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],n.hasZ&&(e[s*i+2]=e[s*4+2]),n.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,t)for(let s=0,a=t.length;s<a;s++)t[s]=t[s]/4*i}return r}function Yfe(n,e){const t=Zt({},Tfe,n,e);if(t)return t}function Xfe(n,e){const t=Zt({},Afe,n,e);if(t){const r=n.getAttribute("author");return r!==null&&(t.author=r),t}}function qfe(n,e){const t=e[e.length-1],r=n.getAttribute("minlat"),i=n.getAttribute("minlon"),s=n.getAttribute("maxlat"),a=n.getAttribute("maxlon");i!==null&&r!==null&&a!==null&&s!==null&&(t.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(a),parseFloat(s)]])}function Zfe(n,e){const t=e[e.length-1],r=n.getAttribute("id"),i=n.getAttribute("domain");r!==null&&i!==null&&(t.email=`${r}@${i}`)}function x1(n,e){const t=e[e.length-1],r=n.getAttribute("href");r!==null&&(t.link=r),Eu(Sfe,n,e)}function RE(n,e){const t=e[e.length-1];t.extensionsNode_=n}function Qfe(n,e){const t=Zt({},Pfe,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;IC(i,s,n,t)}}function Jfe(n,e){const t=Zt({},Nfe,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;IC(i,s,n,t)}}function ede(n,e){const t=e[e.length-1];Eu(Mfe,n,e);const r=t.flatCoordinates;t.ends.push(r.length)}function Nj(n,e){const t=e[0],r=Zt({flatCoordinates:[],layoutOptions:{}},bfe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const a=AC(s,i),o=new Vo(i,a);to(o,!1,t);const l=new qa(o);return l.setProperties(r,!0),l}function Lj(n,e){const t=e[0],r=Zt({flatCoordinates:[],ends:[],layoutOptions:{}},kfe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const a=r.layoutOptions;delete r.layoutOptions;const o=AC(a,i,s),l=new Jc(i,o,s);to(l,!1,t);const u=new qa(l);return u.setProperties(r,!0),u}function Oj(n,e){const t=e[0],r=Zt({},Lfe,n,e);if(!r)return;const i={},s=IC([],i,n,r),a=AC(i,s),o=new Za(s,a);to(o,!1,t);const l=new qa(o);return l.setProperties(r,!0),l}function RC(n,e,t){n.setAttribute("href",e);const i=t[t.length-1].properties,s=[i.linkText,i.linkType];On({node:n},Dfe,Mi,s,t,Ofe)}function CC(n,e,t){const r=t[t.length-1],s=r.node.namespaceURI,a=r.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(a.time=e[3]);case"XYZ":e[2]!==0&&(a.ele=e[2]);break;case"XYM":e[2]!==0&&(a.time=e[2]);break}const l=n.nodeName=="rtept"?Vfe[s]:$fe[s],u=ps(a,l);On({node:n,properties:a},Wfe,Mi,u,t,l)}function tde(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="LineString"){const f=to(a,!0,r);s.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}const o=t[t.length-1].node,l=Ffe[o.namespaceURI],u=ps(i,l);On(s,jfe,Mi,u,t,l)}function nde(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="MultiLineString"){const f=to(a,!0,r);i.trkseg=f.getLineStrings()}const o=t[t.length-1].node,l=Gfe[o.namespaceURI],u=ps(i,l);On(s,Bfe,Mi,u,t,l)}function rde(n,e,t){const r={node:n};r.geometryLayout=e.getLayout(),r.properties={},On(r,zfe,Ufe,e.getCoordinates(),t)}function ide(n,e,t){const r=t[0],i=t[t.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const a=to(s,!0,r);i.geometryLayout=a.getLayout(),CC(n,a.getCoordinates(),t)}}const zl=["http://www.google.com/kml/ext/2.2"],Et=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],sde="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",TL={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},ade=lt(Et,{ExtendedData:qj,Region:Zj,MultiGeometry:je(Kj,"geometry"),LineString:je(Wj,"geometry"),LinearRing:je(Hj,"geometry"),Point:je(Yj,"geometry"),Polygon:je(Xj,"geometry"),Style:je(kC),StyleMap:zde,address:je($t),description:je($t),name:je($t),open:je(fu),phoneNumber:je($t),styleUrl:je(Gj),visibility:je(fu)},lt(zl,{MultiTrack:je(Pde,"geometry"),Track:je($j,"geometry")})),ode=lt(Et,{ExtendedData:qj,Region:Zj,Link:t0e,address:je($t),description:je($t),name:je($t),open:je(fu),phoneNumber:je($t),visibility:je(fu)}),lde=lt(Et,{href:je(Vj)}),cde=lt(Et,{Altitude:je(cn),Longitude:je(cn),Latitude:je(cn),Tilt:je(cn),AltitudeMode:je($t),Heading:je(cn),Roll:je(cn)}),Dj=lt(Et,{LatLonAltBox:Yde,Lod:qde}),ude=lt(Et,["Document","Placemark"]),hde=lt(Et,{Document:Ze(c0e),Placemark:Ze(e7)});let zd,Uy=null,EI,Am,Rm,Cm,rx,wI=null,bC,SI=null,TI,mh=null,IL=null,II=null;function ix(n){return 32/Math.min(n[0],n[1])}function fde(){zd=[255,255,255,1],Uy=new Qr({color:zd}),EI=[20,2],Am="pixels",Rm="pixels",Cm=[64,64],rx="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",wI=new Up({anchor:EI,anchorOrigin:"bottom-left",anchorXUnits:Am,anchorYUnits:Rm,crossOrigin:"anonymous",rotation:0,scale:ix(Cm),size:Cm,src:rx}),bC="NO_IMAGE",SI=new hs({color:zd,width:1}),TI=new hs({color:[51,51,51,1],width:2}),mh=new Jh({font:"bold 16px Helvetica",fill:Uy,stroke:TI,scale:.8}),IL=new nr({fill:Uy,image:wI,text:mh,stroke:SI,zIndex:0}),II=[IL]}let ay;function dde(n){return n}class gde extends Mj{constructor(e){super(),e=e||{},II||fde(),this.dataProjection=Nn("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:II,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:dde,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const r=lt(Et,{Document:SL(this.readDocumentOrFolder_,this),Folder:SL(this.readDocumentOrFolder_,this),Placemark:Ba(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=Zt([],r,e,t,this);if(i)return i}readPlacemark_(e,t){const r=Zt({geometry:null},ade,e,t,this);if(!r)return;const i=new qa,s=e.getAttribute("id");s!==null&&i.setId(s);const a=t[0],o=r.geometry;if(o&&to(o,!1,a),i.setGeometry(o),delete r.geometry,this.extractStyles_){const l=r.Style,u=r.styleUrl,f=pde(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(f)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,t){const r=e.getAttribute("id");if(r!==null){const i=kC.call(this,e,t);if(i){let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,t){const r=e.getAttribute("id");if(r===null)return;const i=Uj.call(this,e,t);if(!i)return;let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,t){if(!Et.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!Et.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const a=this.readFeaturesFromNode(s,t);a&&yn(r,a)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const t=pl(e);return this.readNameFromDocument(t)}return ml(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Et.includes(t.namespaceURI)&&t.localName=="name")return $t(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const r=t.localName;if(Et.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const r=pl(e);yn(t,this.readNetworkLinksFromDocument(r))}else ml(e)?yn(t,this.readNetworkLinksFromDocument(e)):yn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&yn(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Et.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=Zt({},ode,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Et.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&yn(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){const t=[];if(typeof e=="string"){const r=pl(e);yn(t,this.readRegionFromDocument(r))}else ml(e)?yn(t,this.readRegionFromDocument(e)):yn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&yn(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Et.includes(r.namespaceURI)&&r.localName=="Region"){const i=Zt({},Dj,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Et.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&yn(t,this.readRegionFromNode(r))}return t}readCamera(e){const t=[];if(typeof e=="string"){const r=pl(e);yn(t,this.readCameraFromDocument(r))}else ml(e)?yn(t,this.readCameraFromDocument(e)):yn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&yn(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Et.includes(r.namespaceURI)&&r.localName==="Camera"){const i=Zt({},cde,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Et.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&yn(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=of(Et[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",zl[0]),r.setAttributeNS(i,"xmlns:xsi",tx),r.setAttributeNS(tx,"xsi:schemaLocation",sde);const s={node:r},a={};e.length>1?a.Document=e:e.length==1&&(a.Placemark=e[0]);const o=ude[r.namespaceURI],l=ps(a,o);return On(s,hde,Mi,l,[t],o,this),r}}function mde(n,e){const t=[0,0];let r="start";const i=n.getImage();if(i){const o=i.getSize();if(o&&o.length==2){const l=i.getScaleArray(),u=i.getAnchor();t[0]=l[0]*(o[0]-u[0]),t[1]=l[1]*(o[1]/2-u[1]),r="left"}}let s=n.getText();return s?(s=s.clone(),s.setFont(s.getFont()||mh.getFont()),s.setScale(s.getScale()||mh.getScale()),s.setFill(s.getFill()||mh.getFill()),s.setStroke(s.getStroke()||TI)):s=mh.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(r),new nr({image:i,text:s})}function pde(n,e,t,r,i){return(function(s,a){let o=i,l="",u=[];if(o){const d=s.getGeometry();if(d)if(d instanceof Ka)u=d.getGeometriesArrayRecursive().filter(function(g){const p=g.getType();return p==="Point"||p==="MultiPoint"}),o=u.length>0;else{const g=d.getType();o=g==="Point"||g==="MultiPoint"}}o&&(l=s.get("name"),o=o&&!!l,o&&/&[^&]+;/.test(l)&&(ay||(ay=document.createElement("textarea")),ay.innerHTML=l,l=ay.value));let f=t;if(n?f=n:e&&(f=Fj(e,t,r)),o){const d=mde(f[0],l);if(u.length>0){d.setGeometry(new Ka(u));const g=new nr({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null});return[d,g].concat(f.slice(1))}return d}return f})}function Fj(n,e,t){return Array.isArray(n)?n:typeof n=="string"?Fj(t[n],e,t):e}function CE(n){const e=no(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function jj(n){let e=no(n,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),a=parseFloat(i[2]),o=i[3]?parseFloat(i[3]):0;t.push(s,a,o),e=e.substr(i[0].length)}if(e==="")return t}function Vj(n){const e=no(n,!1).trim();let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Gj(n){const e=no(n,!1).trim().replace(/^(?!.*#)/,"#");let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function _de(n){const e=n.getAttribute("xunits"),t=n.getAttribute("yunits");let r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(n.getAttribute("x")),xunits:TL[e],y:parseFloat(n.getAttribute("y")),yunits:TL[t],origin:r}}function Bj(n){return cn(n)}const yde=lt(Et,{Pair:Ude});function Uj(n,e){return Zt(void 0,yde,n,e,this)}const vde=lt(Et,{Icon:je(Nde),color:je(CE),heading:je(cn),hotSpot:je(_de),scale:je(Bj)});function xde(n,e){const t=Zt({},vde,n,e);if(!t)return;const r=e[e.length-1],i="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(i).length>0;let a;const o=i.href;o?a=o:s&&(a=rx);let l,u,f,d="bottom-left";const g=t.hotSpot;g?(l=[g.x,g.y],u=g.xunits,f=g.yunits,d=g.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(a.includes("pushpin")?(l=EI,u=Am,f=Rm):a.includes("arrow-reverse")?(l=[54,42],u=Am,f=Rm):a.includes("paddle")&&(l=[32,1],u=Am,f=Rm));let p;const E=i.x,v=i.y;E!==void 0&&v!==void 0&&(p=[E,v]);let w;const T=i.w,R=i.h;T!==void 0&&R!==void 0&&(w=[T,R]);let k;const N=t.heading;N!==void 0&&(k=vl(N));const O=t.scale,B=t.color;if(s){a==rx&&(w=Cm);const P=new Up({anchor:l,anchorOrigin:d,anchorXUnits:u,anchorYUnits:f,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:k,scale:O,size:w,src:this.iconUrlFunction_(a),color:B}),b=P.getScaleArray()[0],M=P.getSize();if(M===null){const F=P.getImageState();if(F===_t.IDLE||F===_t.LOADING){const V=function(){const W=P.getImageState();if(!(W===_t.IDLE||W===_t.LOADING)){const D=P.getSize();if(D&&D.length==2){const Ie=ix(D);P.setScale(b*Ie)}P.unlistenImageChange(V)}};P.listenImageChange(V),F===_t.IDLE&&P.load()}}else if(M.length==2){const F=ix(M);P.setScale(b*F)}r.imageStyle=P}else r.imageStyle=bC}const Ede=lt(Et,{color:je(CE),scale:je(Bj)});function wde(n,e){const t=Zt({},Ede,n,e);if(!t)return;const r=e[e.length-1],i=new Jh({fill:new Qr({color:"color"in t?t.color:zd}),scale:t.scale});r.textStyle=i}const Sde=lt(Et,{color:je(CE),width:je(cn)});function Tde(n,e){const t=Zt({},Sde,n,e);if(!t)return;const r=e[e.length-1],i=new hs({color:"color"in t?t.color:zd,width:"width"in t?t.width:1});r.strokeStyle=i}const Ide=lt(Et,{color:je(CE),fill:je(fu),outline:je(fu)});function Ade(n,e){const t=Zt({},Ide,n,e);if(!t)return;const r=e[e.length-1],i=new Qr({color:"color"in t?t.color:zd});r.fillStyle=i;const s=t.fill;s!==void 0&&(r.fill=s);const a=t.outline;a!==void 0&&(r.outline=a)}const Rde=lt(Et,{coordinates:TC(jj)});function zj(n,e){return Zt(null,Rde,n,e)}function Cde(n,e){const r=e[e.length-1].coordinates,i=no(n,!1),a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(a){const o=parseFloat(a[1]),l=parseFloat(a[2]),u=parseFloat(a[3]);r.push([o,l,u])}else r.push([])}const bde=lt(zl,{Track:Ba($j)});function Pde(n,e){const t=Zt([],bde,n,e);if(t)return new Jc(t)}const kde=lt(Et,{when:n0e},lt(zl,{coord:Cde}));function $j(n,e){const t=Zt({coordinates:[],whens:[]},kde,n,e);if(!t)return;const r=[],i=t.coordinates,s=t.whens;for(let a=0,o=Math.min(i.length,s.length);a<o;++a)i[a].length==3&&r.push(i[a][0],i[a][1],i[a][2],s[a]);return new Vo(r,"XYZM")}const Mde=lt(Et,{href:je(Vj)},lt(zl,{x:je(cn),y:je(cn),w:je(cn),h:je(cn)}));function Nde(n,e){const t=Zt({},Mde,n,e);return t||null}const Lde=lt(Et,{coordinates:TC(jj)});function PC(n,e){return Zt(null,Lde,n,e)}const bE=lt(Et,{extrude:je(fu),tessellate:je(fu),altitudeMode:je($t)});function Wj(n,e){const t=Zt({},bE,n,e),r=PC(n,e);if(r){const i=new Vo(r,"XYZ");return i.setProperties(t,!0),i}}function Hj(n,e){const t=Zt({},bE,n,e),r=PC(n,e);if(r){const i=new Qa(r,"XYZ",[r.length]);return i.setProperties(t,!0),i}}const Ode=lt(Et,{LineString:Ba(Wj),LinearRing:Ba(Hj),MultiGeometry:Ba(Kj),Point:Ba(Yj),Polygon:Ba(Xj)});function Kj(n,e){const t=Zt([],Ode,n,e);if(!t)return null;if(t.length===0)return new Ka(t);let r,i=!0;const s=t[0].getType();let a;for(let o=1,l=t.length;o<l;++o)if(a=t[o],a.getType()!=s){i=!1;break}if(i){let o,l;if(s=="Point"){const u=t[0];o=u.getLayout(),l=u.getFlatCoordinates();for(let f=1,d=t.length;f<d;++f)a=t[f],yn(l,a.getFlatCoordinates());r=new S0(l,o),AS(r,t)}else if(s=="LineString")r=new Jc(t),AS(r,t);else if(s=="Polygon")r=new t0(t),AS(r,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new Ka(t);else throw new Error("Unknown geometry type found")}else r=new Ka(t);return r}function Yj(n,e){const t=Zt({},bE,n,e),r=PC(n,e);if(r){const i=new Za(r,"XYZ");return i.setProperties(t,!0),i}}const Dde=lt(Et,{innerBoundaryIs:Qde,outerBoundaryIs:e0e});function Xj(n,e){const t=Zt({},bE,n,e),r=Zt([null],Dde,n,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let o=1,l=r.length;o<l;++o)yn(i,r[o]),s.push(i.length);const a=new Qa(i,"XYZ",s);return a.setProperties(t,!0),a}}const Fde=lt(Et,{IconStyle:xde,LabelStyle:wde,LineStyle:Tde,PolyStyle:Ade});function kC(n,e){const t=Zt({},Fde,n,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:Uy;const i=t.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in t?t.imageStyle!=bC&&(s=t.imageStyle):s=wI;const a="textStyle"in t?t.textStyle:mh,o="strokeStyle"in t?t.strokeStyle:SI,l=t.outline;return l!==void 0&&!l?[new nr({geometry:function(u){const f=u.getGeometry(),d=f.getType();if(d==="GeometryCollection"){const g=f;return new Ka(g.getGeometriesArrayRecursive().filter(function(p){const E=p.getType();return E!=="Polygon"&&E!=="MultiPolygon"}))}if(d!=="Polygon"&&d!=="MultiPolygon")return f},fill:r,image:s,stroke:o,text:a,zIndex:void 0}),new nr({geometry:function(u){const f=u.getGeometry(),d=f.getType();if(d==="GeometryCollection"){const g=f;return new Ka(g.getGeometriesArrayRecursive().filter(function(p){const E=p.getType();return E==="Polygon"||E==="MultiPolygon"}))}if(d==="Polygon"||d==="MultiPolygon")return f},fill:r,stroke:null,zIndex:void 0})]:[new nr({fill:r,image:s,stroke:o,text:a,zIndex:void 0})]}function AS(n,e){const t=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let a,o,l;a=!1,o=!1,l=!1;for(let u=0;u<t;++u){const f=e[u];r[u]=f.get("extrude"),i[u]=f.get("tessellate"),s[u]=f.get("altitudeMode"),a=a||r[u]!==void 0,o=o||i[u]!==void 0,l=l||s[u]}a&&n.set("extrude",r),o&&n.set("tessellate",i),l&&n.set("altitudeMode",s)}const jde=lt(Et,{displayName:je($t),value:je($t)});function Vde(n,e){const t=n.getAttribute("name");Eu(jde,n,e);const r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const Gde=lt(Et,{Data:Vde,SchemaData:Wde});function qj(n,e){Eu(Gde,n,e)}function Zj(n,e){Eu(Dj,n,e)}const Bde=lt(Et,{Style:je(kC),key:je($t),styleUrl:je(Gj)});function Ude(n,e){const t=Zt({},Bde,n,e,this);if(!t)return;const r=t.key;if(r&&r=="normal"){const i=t.styleUrl;i&&(e[e.length-1]=i);const s=t.Style;s&&(e[e.length-1]=s)}}function zde(n,e){const t=Uj.call(this,n,e);if(!t)return;const r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const $de=lt(Et,{SimpleData:Hde});function Wde(n,e){Eu($de,n,e)}function Hde(n,e){const t=n.getAttribute("name");if(t!==null){const r=$t(n),i=e[e.length-1];i[t]=r}}const Kde=lt(Et,{altitudeMode:je($t),minAltitude:je(cn),maxAltitude:je(cn),north:je(cn),south:je(cn),east:je(cn),west:je(cn)});function Yde(n,e){const t=Zt({},Kde,n,e);if(!t)return;const r=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=i,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}const Xde=lt(Et,{minLodPixels:je(cn),maxLodPixels:je(cn),minFadeExtent:je(cn),maxFadeExtent:je(cn)});function qde(n,e){const t=Zt({},Xde,n,e);if(!t)return;const r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}const Zde=lt(Et,{LinearRing:Ba(zj)});function Qde(n,e){const t=Zt([],Zde,n,e);t.length>0&&e[e.length-1].push(...t)}const Jde=lt(Et,{LinearRing:TC(zj)});function e0e(n,e){const t=Zt(void 0,Jde,n,e);if(t){const r=e[e.length-1];r[0]=t}}function t0e(n,e){Eu(lde,n,e)}function n0e(n,e){const r=e[e.length-1].whens,i=no(n,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function PE(n,e){const t=bh(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const a=Math.floor(i[s]).toString(16);i[s]=a.length==1?"0"+a:a}gn(n,i.join(""))}function r0e(n,e,t){const r=t[t.length-1],i=r.layout,s=r.stride;let a;if(i=="XY"||i=="XYM")a=2;else if(i=="XYZ"||i=="XYZM")a=3;else throw new Error("Invalid geometry layout");const o=e.length;let l="";if(o>0){l+=e[0];for(let u=1;u<a;++u)l+=","+e[u];for(let u=s;u<o;u+=s){l+=" "+e[u];for(let f=1;f<a;++f)l+=","+e[u+f]}}gn(n,l)}const zy=lt(Et,{Data:Ze(i0e),value:Ze(a0e),displayName:Ze(s0e)});function i0e(n,e,t){n.setAttribute("name",e.name);const r={node:n},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&On(r,zy,Mi,[i.displayName],t,["displayName"]),i!==null&&i.value&&On(r,zy,Mi,[i.value],t,["value"])):On(r,zy,Mi,[i],t,["value"])}function s0e(n,e){gn(n,e)}function a0e(n,e){gn(n,e)}const o0e=lt(Et,{Placemark:Ze(e7)}),l0e=function(n,e,t){const r=e[e.length-1].node;return of(r.namespaceURI,"Placemark")};function c0e(n,e,t){On({node:n},o0e,l0e,e,t,void 0,this)}const u0e=ro("Data");function h0e(n,e,t){const r={node:n},i=e.names,s=e.values,a=i.length;for(let o=0;o<a;o++)On(r,zy,u0e,[{name:i[o],value:s[o]}],t)}const AL=lt(Et,["href"],lt(zl,["x","y","w","h"])),RL=lt(Et,{href:Ze(gn)},lt(zl,{x:Ze(ss),y:Ze(ss),w:Ze(ss),h:Ze(ss)})),f0e=function(n,e,t){return of(zl[0],"gx:"+t)};function d0e(n,e,t){const r={node:n},i=t[t.length-1].node;let s=AL[i.namespaceURI],a=ps(e,s);On(r,RL,Mi,a,t,s),s=AL[zl[0]],a=ps(e,s),On(r,RL,f0e,a,t,s)}const g0e=lt(Et,["scale","heading","Icon","color","hotSpot"]),m0e=lt(Et,{Icon:Ze(d0e),color:Ze(PE),heading:Ze(ss),hotSpot:Ze(U0e),scale:Ze(n7)});function p0e(n,e,t){const r={node:n},i={},s=e.getSrc(),a=e.getSize(),o=e.getImageSize(),l={href:s};if(a){l.w=a[0],l.h=a[1];const w=e.getAnchor(),T=e.getOrigin();if(T&&o&&T[0]!==0&&T[1]!==a[1]&&(l.x=T[0],l.y=o[1]-(T[1]+a[1])),w&&(w[0]!==a[0]/2||w[1]!==a[1]/2)){const R={x:w[0],xunits:"pixels",y:a[1]-w[1],yunits:"pixels"};i.hotSpot=R}}i.Icon=l;let u=e.getScaleArray()[0],f=a;if(f===null&&(f=Cm),f.length==2){const w=ix(f);u=u/w}u!==1&&(i.scale=u);const d=e.getRotation();d!==0&&(i.heading=d);const g=e.getColor();g&&(i.color=g);const p=t[t.length-1].node,E=g0e[p.namespaceURI],v=ps(i,E);On(r,m0e,Mi,v,t,E)}const _0e=lt(Et,["color","scale"]),y0e=lt(Et,{color:Ze(PE),scale:Ze(n7)});function v0e(n,e,t){const r={node:n},i={},s=e.getFill();s&&(i.color=s.getColor());const a=e.getScale();a&&a!==1&&(i.scale=a);const o=t[t.length-1].node,l=_0e[o.namespaceURI],u=ps(i,l);On(r,y0e,Mi,u,t,l)}const x0e=lt(Et,["color","width"]),E0e=lt(Et,{color:Ze(PE),width:Ze(ss)});function w0e(n,e,t){const r={node:n},i={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,a=x0e[s.namespaceURI],o=ps(i,a);On(r,E0e,Mi,o,t,a)}const S0e={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Qj=function(n,e,t){if(n){const r=e[e.length-1].node;return of(r.namespaceURI,S0e[n.getType()])}},T0e=ro("Point"),I0e=ro("LineString"),A0e=ro("LinearRing"),R0e=ro("Polygon"),C0e=lt(Et,{LineString:Ze($d),Point:Ze($d),Polygon:Ze(t7),GeometryCollection:Ze(Jj)});function Jj(n,e,t){const r={node:n},i=e.getType();let s=[],a;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(o){const l=o.getType();if(l==="MultiPoint")s=s.concat(o.getPoints());else if(l==="MultiLineString")s=s.concat(o.getLineStrings());else if(l==="MultiPolygon")s=s.concat(o.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(o);else throw new Error("Unknown geometry type")}),a=Qj;else if(i==="MultiPoint")s=e.getPoints(),a=T0e;else if(i==="MultiLineString")s=e.getLineStrings(),a=I0e;else if(i==="MultiPolygon")s=e.getPolygons(),a=R0e;else throw new Error("Unknown geometry type");On(r,C0e,a,s,t)}const b0e=lt(Et,{LinearRing:Ze($d)});function CL(n,e,t){On({node:n},b0e,A0e,[e],t)}const RS=lt(Et,{ExtendedData:Ze(h0e),MultiGeometry:Ze(Jj),LineString:Ze($d),LinearRing:Ze($d),Point:Ze($d),Polygon:Ze(t7),Style:Ze(B0e),address:Ze(gn),description:Ze(gn),name:Ze(gn),open:Ze(x0),phoneNumber:Ze(gn),styleUrl:Ze(gn),visibility:Ze(x0)}),P0e=lt(Et,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),k0e=ro("ExtendedData");function e7(n,e,t){const r={node:n};e.getId()&&n.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const a=Object.keys(i||{}).sort().filter(function(p){return!s[p]}),o=e.getStyleFunction();if(o){const p=o(e,0);if(p){const E=Array.isArray(p)?p:[p];let v=E;if(e.getGeometry()&&(v=E.filter(function(w){const T=w.getGeometryFunction()(e);if(T){const R=T.getType();return R==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(k){const N=k.getType();return N==="Point"||N==="MultiPoint"}).length:R==="Point"||R==="MultiPoint"}})),this.writeStyles_){let w=E,T=E;e.getGeometry()&&(w=E.filter(function(R){const k=R.getGeometryFunction()(e);if(k){const N=k.getType();return N==="GeometryCollection"?k.getGeometriesArrayRecursive().filter(function(O){const B=O.getType();return B==="LineString"||B==="MultiLineString"}).length:N==="LineString"||N==="MultiLineString"}}),T=E.filter(function(R){const k=R.getGeometryFunction()(e);if(k){const N=k.getType();return N==="GeometryCollection"?k.getGeometriesArrayRecursive().filter(function(O){const B=O.getType();return B==="Polygon"||B==="MultiPolygon"}).length:N==="Polygon"||N==="MultiPolygon"}})),i.Style={pointStyles:v,lineStyles:w,polyStyles:T}}if(v.length&&i.name===void 0){const w=v[0].getText();w&&(i.name=w.getText())}}}const l=t[t.length-1].node,u=P0e[l.namespaceURI],f=ps(i,u);if(On(r,RS,Mi,f,t,u),a.length>0){const p=ps(i,a);On(r,RS,k0e,[{names:a,values:p}],t)}const d=t[0];let g=e.getGeometry();g&&(g=to(g,!0,d)),On(r,RS,Qj,[g],t)}const M0e=lt(Et,["extrude","tessellate","altitudeMode","coordinates"]),N0e=lt(Et,{extrude:Ze(x0),tessellate:Ze(x0),altitudeMode:Ze(gn),coordinates:Ze(r0e)});function $d(n,e,t){const r=e.getFlatCoordinates(),i={node:n};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const a=t[t.length-1].node,o=M0e[a.namespaceURI],l=ps(s,o);On(i,N0e,Mi,l,t,o)}const L0e=lt(Et,["color","fill","outline"]),bL=lt(Et,{outerBoundaryIs:Ze(CL),innerBoundaryIs:Ze(CL)}),O0e=ro("innerBoundaryIs"),D0e=ro("outerBoundaryIs");function t7(n,e,t){const r=e.getLinearRings(),i=r.shift(),s={node:n};On(s,bL,O0e,r,t),On(s,bL,D0e,[i],t)}const F0e=lt(Et,{color:Ze(PE),fill:Ze(x0),outline:Ze(x0)});function j0e(n,e,t){const r={node:n},i=e.getFill(),s=e.getStroke(),a={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},o=t[t.length-1].node,l=L0e[o.namespaceURI],u=ps(a,l);On(r,F0e,Mi,u,t,l)}function n7(n,e){ss(n,Math.round(e*1e6)/1e6)}const V0e=lt(Et,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),G0e=lt(Et,{IconStyle:Ze(p0e),LabelStyle:Ze(v0e),LineStyle:Ze(w0e),PolyStyle:Ze(j0e)});function B0e(n,e,t){const r={node:n},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(i.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,a=V0e[s.namespaceURI],o=ps(i,a);On(r,G0e,Mi,o,t,a)}function U0e(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}function r7(n){const e=Object.keys(n.defs),t=e.length;let r,i;for(r=0;r<t;++r){const s=e[r];if(!py(s)){const a=n.defs(s);let o=a.units;!o&&a.projName==="longlat"&&(o="degrees"),qy(new Ax({code:s,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:o}))}}for(r=0;r<t;++r){const s=e[r],a=py(s);for(i=0;i<t;++i){const o=e[i],l=py(o);if(!_y(s,o))if(n.defs[s]===n.defs[o])$S([a,l]);else{const u=n(s,o);zB(a,l,P4(a,l,u.forward),P4(l,a,u.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");an.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");r7(an);let ph=null,bm=null,yd=null;function AI(n){ph&&(n.removeLayer(ph),ph=null),bm&&(n.removeLayer(bm),bm=null),yd=null}async function z0e(n,e){try{const t=sn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${t[0].toFixed(5)}, ${t[1].toFixed(5)}`);const r=an("EPSG:4326","EPSG:28992",t);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;AI(n);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,a=Date.now(),o=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${a}`;console.log(" WFS URL:",o);const l=new AbortController,u=setTimeout(()=>l.abort(),1e4),f=await fetch(o,{signal:l.signal});if(clearTimeout(u),!f.ok)return console.error("WFS request failed:",f.status),!1;const d=await f.json();if(console.log(" WFS RESPONSE:",JSON.stringify(d).substring(0,500)),!d.features||d.features.length===0)return console.log("No parcel found at location"),!1;const g=d.features[0];console.log(" PARCEL ID:",g.id||g.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(g.bbox||"geen bbox"));const E=new wC().readFeature(g,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),v=E.getGeometry();if(!v)return console.log("No geometry in parcel feature"),!1;const w=g.properties||{};console.log(` Parcel: ${w.category||"unknown"} - ${w.gewasnaam||w.gewas||"geen gewas"}`),console.log(` Geometry type: ${v.getType()}, extent: ${v.getExtent().map(M=>M.toFixed(0)).join(", ")}`);const T=v.getExtent(),R=T[2]-T[0],k=T[3]-T[1],N=Math.max(R,k)*.05,O=[T[0]-N,T[1]-N,T[2]+N,T[3]+N],B=Math.max(R,k)*.3,P=[T[0]-B,T[1]-B,T[2]+B,T[3]+B];yd=v,ph=new F$({source:new uW({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:O,zIndex:998}),ph.on("prerender",M=>{if(!yd)return;const F=M.context;if(!F)return;const V=M.frameState;if(!V)return;F.save(),F.beginPath(),(yd.getType()==="Polygon"?yd.getCoordinates()[0]:yd.getCoordinates()[0][0]).forEach((D,Ie)=>{const Le=n.getPixelFromCoordinate(D);if(!Le)return;const Fe=V.pixelRatio,Ce=Le[0]*Fe,ce=Le[1]*Fe;Ie===0?F.moveTo(Ce,ce):F.lineTo(Ce,ce)}),F.closePath(),F.clip()}),ph.on("postrender",M=>{const F=M.context;F&&F.restore()}),n.addLayer(ph);const b=new Gp({features:[E]});return bm=new Wp({source:b,style:new nr({fill:new Qr({color:"rgba(0, 0, 0, 0)"}),stroke:new hs({color:"#dc2626",width:3})}),zIndex:999}),n.addLayer(bm),console.log(" Parcel height map displayed"),!0}catch(t){return console.error("Failed to show parcel height map:",t),!1}}var sx={};sx.version="0.18.5";var i7=1252,$0e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],s7=function(n){$0e.indexOf(n)!=-1&&(i7=n)};function W0e(){s7(1252)}var Sp=function(n){s7(n)};function H0e(){Sp(1200),W0e()}var oy=function(e){return String.fromCharCode(e)},PL=function(e){return String.fromCharCode(e)},ax,Bc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Tp(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),e+=Bc.charAt(s)+Bc.charAt(a)+Bc.charAt(o)+Bc.charAt(l);return e}function Fl(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Bc.indexOf(n.charAt(u++)),a=Bc.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Bc.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Bc.indexOf(n.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var dn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),$l=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Hh(n){return dn?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function kL(n){return dn?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Ua=function(e){return dn?$l(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function kE(n){if(typeof ArrayBuffer>"u")return Ua(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function E1(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function K0e(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var di=dn?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:$l(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Y0e(n){for(var e=[],t=0,r=n.length+250,i=Hh(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Hh(65535),r=65530)}return e.push(i.slice(0,t)),di(e)}var Pm=/\u0000/g,ly=/[\u0001-\u0006]/g;function Wd(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Wa(n,e){var t=""+n;return t.length>=e?t:lr("0",e-t.length)+t}function MC(n,e){var t=""+n;return t.length>=e?t:lr(" ",e-t.length)+t}function ox(n,e){var t=""+n;return t.length>=e?t:t+lr(" ",e-t.length)}function X0e(n,e){var t=""+Math.round(n);return t.length>=e?t:lr("0",e-t.length)+t}function q0e(n,e){var t=""+n;return t.length>=e?t:lr("0",e-t.length)+t}var ML=Math.pow(2,32);function rd(n,e){if(n>ML||n<-ML)return X0e(n,e);var t=Math.round(n);return q0e(t,e)}function lx(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var NL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],CS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Z0e(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var ur={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},LL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Q0e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function cx(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,l=1,u=0,f=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,f=d*u+l,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,l=u,u=f;if(f>e&&(u>e?(f=l,o=s):(f=u,o=a)),!t)return[0,r*o,f];var g=Math.floor(r*o/f);return[g,r*o-g*f,f]}function cy(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),t&&(s=sge(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var a7=new Date(1899,11,31,0,0,0),J0e=a7.getTime(),ege=new Date(1900,2,1,0,0,0);function o7(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=ege&&(t+=1440*60*1e3),(t-(J0e+(n.getTimezoneOffset()-a7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function NC(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function tge(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function nge(n){var e=n<0?12:11,t=NC(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function rge(n){var e=NC(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function ige(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=nge(n):e===10?t=n.toFixed(10).substr(0,12):t=rge(n),NC(tge(t.toUpperCase()))}function RI(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):ige(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return du(14,o7(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function sge(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function age(n,e,t,r){var i="",s=0,a=0,o=t.y,l,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,u=e.length;break;case 3:return CS[t.m-1][1];case 5:return CS[t.m-1][0];default:return CS[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,u=e.length;break;case 3:return NL[t.q][0];default:return NL[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Wa(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Wa(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var f=u>0?Wa(l,u):"";return f}function Uc(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var l7=/%/g;function oge(n,e,t){var r=e.replace(l7,""),i=e.length-r.length;return Al(n,r,t*Math.pow(10,2*i))+lr("%",i)}function lge(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Al(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function c7(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+c7(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,f){return l+u+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var u7=/# (\?+)( ?)\/( ?)(\d+)/;function cge(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?lr(" ",n[1].length+1+n[4].length):MC(a,n[1].length)+n[2]+"/"+n[3]+Wa(o,n[4].length))}function uge(n,e,t){return t+(e===0?"":""+e)+lr(" ",n[1].length+2+n[4].length)}var h7=/^#*0*\.([0#]+)/,f7=/\).*[0#]/,d7=/\(###\) ###\\?-####/;function Vi(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function OL(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function DL(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function hge(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function fge(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function aa(n,e,t){if(n.charCodeAt(0)===40&&!e.match(f7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?aa("n",r,t):"("+aa("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return lge(n,e,t);if(e.indexOf("%")!==-1)return oge(n,e,t);if(e.indexOf("E")!==-1)return c7(e,t);if(e.charCodeAt(0)===36)return"$"+aa(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+rd(l,e.length);if(e.match(/^[#?]+$/))return i=rd(t,0),i==="0"&&(i=""),i.length>e.length?i:Vi(e.substr(0,e.length-i.length))+i;if(s=e.match(u7))return cge(s,l,u);if(e.match(/^#+0+$/))return u+rd(l,e.length-e.indexOf("0"));if(s=e.match(h7))return i=OL(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Vi(s[1])).replace(/\.$/,"."+Vi(s[1])).replace(/\.(\d*)$/,function(E,v){return"."+v+lr("0",Vi(s[1]).length-v.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+OL(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Uc(rd(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+aa(n,e,-t):Uc(""+(Math.floor(t)+hge(t,s[1].length)))+"."+Wa(DL(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return aa(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Wd(aa(n,e.replace(/[\\-]/g,""),t)),a=0,Wd(Wd(e.replace(/\\/g,"")).replace(/[0#]/g,function(E){return a<i.length?i.charAt(a++):E==="0"?"0":""}));if(e.match(d7))return i=aa(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=cx(l,Math.pow(10,a)-1,!1),i=""+u,f=Al("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=ox(o[2],a),f.length<s[4].length&&(f=Vi(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=cx(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?MC(o[1],a)+s[2]+"/"+s[3]+ox(o[2],a):lr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=rd(t,0),e.length<=i.length?i:Vi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Vi(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=DL(t,s[1].length),t<0?"-"+aa(n,e,-t):Uc(fge(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(E){return"00,"+(E.length<3?Wa(0,3-E.length):"")+E})+"."+Wa(a,s[1].length);switch(e){case"###,##0.00":return aa(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=Uc(rd(l,0));return p!=="0"?u+p:"";case"###,###.00":return aa(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return aa(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function dge(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Al(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function gge(n,e,t){var r=e.replace(l7,""),i=e.length-r.length;return Al(n,r,t*Math.pow(10,2*i))+lr("%",i)}function g7(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+g7(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,f){return l+u+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Eo(n,e,t){if(n.charCodeAt(0)===40&&!e.match(f7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Eo("n",r,t):"("+Eo("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return dge(n,e,t);if(e.indexOf("%")!==-1)return gge(n,e,t);if(e.indexOf("E")!==-1)return g7(e,t);if(e.charCodeAt(0)===36)return"$"+Eo(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Wa(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Vi(e.substr(0,e.length-i.length))+i;if(s=e.match(u7))return uge(s,l,u);if(e.match(/^#+0+$/))return u+Wa(l,e.length-e.indexOf("0"));if(s=e.match(h7))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Vi(s[1])).replace(/\.$/,"."+Vi(s[1])),i=i.replace(/\.(\d*)$/,function(E,v){return"."+v+lr("0",Vi(s[1]).length-v.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Uc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Eo(n,e,-t):Uc(""+t)+"."+lr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Eo(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Wd(Eo(n,e.replace(/[\\-]/g,""),t)),a=0,Wd(Wd(e.replace(/\\/g,"")).replace(/[0#]/g,function(E){return a<i.length?i.charAt(a++):E==="0"?"0":""}));if(e.match(d7))return i=Eo(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=cx(l,Math.pow(10,a)-1,!1),i=""+u,f=Al("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=ox(o[2],a),f.length<s[4].length&&(f=Vi(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=cx(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?MC(o[1],a)+s[2]+"/"+s[3]+ox(o[2],a):lr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Vi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Vi(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Eo(n,e,-t):Uc(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(E){return"00,"+(E.length<3?Wa(0,3-E.length):"")+E})+"."+Wa(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Uc(""+l);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return Eo(n,e.slice(0,e.lastIndexOf(".")),t)+Vi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Al(n,e,t){return(t|0)===t?Eo(n,e,t):aa(n,e,t)}function mge(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var m7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function p7(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":lx(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(m7))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function pge(n,e,t,r){for(var i=[],s="",a=0,o="",l="t",u,f,d,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!lx(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=n.charAt(++a),E=p==="("||p===")"?p:"t";i[i.length]={t:E,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=cy(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=cy(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(u==null&&(u=cy(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(v.v=u.H>=12?"":""),v.t="T",a+=5,g="h"):(v.t="t",++a),u==null&&v.t==="T")return"";i[i.length]=v,l=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(m7)){if(u==null&&(u=cy(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",p7(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var w=0,T=0,R;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",w<1&&(w=1);break;case"s":(R=i[a].v.match(/\.0+$/))&&(T=Math.max(T,R[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&i[a].v.match(/[Hh]/)&&(w=1),w<2&&i[a].v.match(/[Mm]/)&&(w=2),w<3&&i[a].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var k="",N;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=age(i[a].t.charCodeAt(0),i[a].v,u,T),i[a].t="t";break;case"n":case"?":for(N=a+1;i[N]!=null&&((o=i[N].t)==="?"||o==="D"||(o===" "||o==="t")&&i[N+1]!=null&&(i[N+1].t==="?"||i[N+1].t==="t"&&i[N+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[N].v==="/"||i[N].v===" "&&i[N+1]!=null&&i[N+1].t=="?"));)i[a].v+=i[N].v,i[N]={v:"",t:";"},++N;k+=i[a].v,a=N-1;break;case"G":i[a].t="t",i[a].v=RI(e,t);break}var O="",B,P;if(k.length>0){k.charCodeAt(0)==40?(B=e<0&&k.charCodeAt(0)===45?-e:e,P=Al("n",k,B)):(B=e<0&&r>1?-e:e,P=Al("n",k,B),B<0&&i[0]&&i[0].t=="t"&&(P=P.substr(1),i[0].v="-"+i[0].v)),N=P.length-1;var b=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){b=a;break}var M=i.length;if(b===i.length&&P.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(N>=i[a].v.length-1?(N-=i[a].v.length,i[a].v=P.substr(N+1,i[a].v.length)):N<0?i[a].v="":(i[a].v=P.substr(0,N+1),N=-1),i[a].t="t",M=a);N>=0&&M<i.length&&(i[M].v=P.substr(0,N+1)+i[M].v)}else if(b!==i.length&&P.indexOf("E")===-1){for(N=P.indexOf(".")-1,a=b;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(f=i[a].v.indexOf(".")>-1&&a===b?i[a].v.indexOf(".")-1:i[a].v.length-1,O=i[a].v.substr(f+1);f>=0;--f)N>=0&&(i[a].v.charAt(f)==="0"||i[a].v.charAt(f)==="#")&&(O=P.charAt(N--)+O);i[a].v=O,i[a].t="t",M=a}for(N>=0&&M<i.length&&(i[M].v=P.substr(0,N+1)+i[M].v),N=P.indexOf(".")+1,a=b;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==b)){for(f=i[a].v.indexOf(".")>-1&&a===b?i[a].v.indexOf(".")+1:0,O=i[a].v.substr(0,f);f<i[a].v.length;++f)N<P.length&&(O+=P.charAt(N++));i[a].v=O,i[a].t="t",M=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(B=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Al(i[a].t,i[a].v,B),i[a].t="t");var F="";for(a=0;a!==i.length;++a)i[a]!=null&&(F+=i[a].v);return F}var FL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function jL(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function _ge(n,e){var t=mge(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(FL),o=t[1].match(FL);return jL(e,a)?[r,t[0]]:jL(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function du(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:ur)[n],r==null&&(r=t.table&&t.table[LL[n]]||ur[LL[n]]),r==null&&(r=Q0e[n]||"General");break}if(lx(r,0))return RI(e,t);e instanceof Date&&(e=o7(e,t.date1904));var i=_ge(r,e);if(lx(i[1]))return RI(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return pge(i[1],e,t,i[0])}function _7(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(ur[t]==null){e<0&&(e=t);continue}if(ur[t]==n){e=t;break}}e<0&&(e=391)}return ur[e]=n,e}function ME(n){for(var e=0;e!=392;++e)n[e]!==void 0&&_7(n[e],e)}function NE(){ur=Z0e()}var y7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function yge(n){var e=typeof n=="number"?ur[n]:n;return e=e.replace(y7,"(\\d+)"),new RegExp("^"+e+"$")}function vge(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(y7)||[]).forEach(function(d,g){var p=parseInt(t[g+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:i=p;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:r==-1&&i==-1&&s==-1?f:u+"T"+f}var xge=(function(){var n={};n.version="1.2.0";function e(){for(var P=0,b=new Array(256),M=0;M!=256;++M)P=M,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,b[M]=P;return typeof Int32Array<"u"?new Int32Array(b):b}var t=e();function r(P){var b=0,M=0,F=0,V=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)V[F]=P[F];for(F=0;F!=256;++F)for(M=P[F],b=256+F;b<4096;b+=256)M=V[b]=M>>>8^P[M&255];var W=[];for(F=1;F!=16;++F)W[F-1]=typeof Int32Array<"u"?V.subarray(F*256,F*256+256):V.slice(F*256,F*256+256);return W}var i=r(t),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],f=i[5],d=i[6],g=i[7],p=i[8],E=i[9],v=i[10],w=i[11],T=i[12],R=i[13],k=i[14];function N(P,b){for(var M=b^-1,F=0,V=P.length;F<V;)M=M>>>8^t[(M^P.charCodeAt(F++))&255];return~M}function O(P,b){for(var M=b^-1,F=P.length-15,V=0;V<F;)M=k[P[V++]^M&255]^R[P[V++]^M>>8&255]^T[P[V++]^M>>16&255]^w[P[V++]^M>>>24]^v[P[V++]]^E[P[V++]]^p[P[V++]]^g[P[V++]]^d[P[V++]]^f[P[V++]]^u[P[V++]]^l[P[V++]]^o[P[V++]]^a[P[V++]]^s[P[V++]]^t[P[V++]];for(F+=15;V<F;)M=M>>>8^t[(M^P[V++])&255];return~M}function B(P,b){for(var M=b^-1,F=0,V=P.length,W=0,D=0;F<V;)W=P.charCodeAt(F++),W<128?M=M>>>8^t[(M^W)&255]:W<2048?(M=M>>>8^t[(M^(192|W>>6&31))&255],M=M>>>8^t[(M^(128|W&63))&255]):W>=55296&&W<57344?(W=(W&1023)+64,D=P.charCodeAt(F++)&1023,M=M>>>8^t[(M^(240|W>>8&7))&255],M=M>>>8^t[(M^(128|W>>2&63))&255],M=M>>>8^t[(M^(128|D>>6&15|(W&3)<<4))&255],M=M>>>8^t[(M^(128|D&63))&255]):(M=M>>>8^t[(M^(224|W>>12&15))&255],M=M>>>8^t[(M^(128|W>>6&63))&255],M=M>>>8^t[(M^(128|W&63))&255]);return~M}return n.table=t,n.bstr=N,n.buf=O,n.str=B,n})(),Mn=(function(){var e={};e.version="1.2.1";function t(U,Z){for(var K=U.split("/"),X=Z.split("/"),J=0,te=0,_e=Math.min(K.length,X.length);J<_e;++J){if(te=K[J].length-X[J].length)return te;if(K[J]!=X[J])return K[J]<X[J]?-1:1}return K.length-X.length}function r(U){if(U.charAt(U.length-1)=="/")return U.slice(0,-1).indexOf("/")===-1?U:r(U.slice(0,-1));var Z=U.lastIndexOf("/");return Z===-1?U:U.slice(0,Z+1)}function i(U){if(U.charAt(U.length-1)=="/")return i(U.slice(0,-1));var Z=U.lastIndexOf("/");return Z===-1?U:U.slice(Z+1)}function s(U,Z){typeof Z=="string"&&(Z=new Date(Z));var K=Z.getHours();K=K<<6|Z.getMinutes(),K=K<<5|Z.getSeconds()>>>1,U.write_shift(2,K);var X=Z.getFullYear()-1980;X=X<<4|Z.getMonth()+1,X=X<<5|Z.getDate(),U.write_shift(2,X)}function a(U){var Z=U.read_shift(2)&65535,K=U.read_shift(2)&65535,X=new Date,J=K&31;K>>>=5;var te=K&15;K>>>=4,X.setMilliseconds(0),X.setFullYear(K+1980),X.setMonth(te-1),X.setDate(J);var _e=Z&31;Z>>>=5;var Pe=Z&63;return Z>>>=6,X.setHours(Z),X.setMinutes(Pe),X.setSeconds(_e<<1),X}function o(U){Ds(U,0);for(var Z={},K=0;U.l<=U.length-4;){var X=U.read_shift(2),J=U.read_shift(2),te=U.l+J,_e={};switch(X){case 21589:K=U.read_shift(1),K&1&&(_e.mtime=U.read_shift(4)),J>5&&(K&2&&(_e.atime=U.read_shift(4)),K&4&&(_e.ctime=U.read_shift(4))),_e.mtime&&(_e.mt=new Date(_e.mtime*1e3));break}U.l=te,Z[X]=_e}return Z}var l;function u(){return l||(l={})}function f(U,Z){if(U[0]==80&&U[1]==75)return Gr(U,Z);if((U[0]|32)==109&&(U[1]|32)==105)return br(U,Z);if(U.length<512)throw new Error("CFB file size "+U.length+" < 512");var K=3,X=512,J=0,te=0,_e=0,Pe=0,pe=0,ve=[],Ee=U.slice(0,512);Ds(Ee,0);var $e=d(Ee);switch(K=$e[0],K){case 3:X=512;break;case 4:X=4096;break;case 0:if($e[1]==0)return Gr(U,Z);default:throw new Error("Major Version: Expected 3 or 4 saw "+K)}X!==512&&(Ee=U.slice(0,X),Ds(Ee,28));var et=U.slice(0,X);g(Ee,K);var ut=Ee.read_shift(4,"i");if(K===3&&ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ut);Ee.l+=4,_e=Ee.read_shift(4,"i"),Ee.l+=4,Ee.chk("00100000","Mini Stream Cutoff Size: "),Pe=Ee.read_shift(4,"i"),J=Ee.read_shift(4,"i"),pe=Ee.read_shift(4,"i"),te=Ee.read_shift(4,"i");for(var We=-1,He=0;He<109&&(We=Ee.read_shift(4,"i"),!(We<0));++He)ve[He]=We;var Nt=p(U,X);w(pe,te,Nt,X,ve);var _n=R(Nt,_e,ve,X);_n[_e].name="!Directory",J>0&&Pe!==D&&(_n[Pe].name="!MiniFAT"),_n[ve[0]].name="!FAT",_n.fat_addrs=ve,_n.ssz=X;var wn={},$n=[],Ia=[],qs=[];k(_e,_n,Nt,$n,J,wn,Ia,Pe),E(Ia,qs,$n),$n.shift();var As={FileIndex:Ia,FullPaths:qs};return Z&&Z.raw&&(As.raw={header:et,sectors:Nt}),As}function d(U){if(U[U.l]==80&&U[U.l+1]==75)return[0,0];U.chk(Ie,"Header Signature: "),U.l+=16;var Z=U.read_shift(2,"u");return[U.read_shift(2,"u"),Z]}function g(U,Z){var K=9;switch(U.l+=2,K=U.read_shift(2)){case 9:if(Z!=3)throw new Error("Sector Shift: Expected 9 saw "+K);break;case 12:if(Z!=4)throw new Error("Sector Shift: Expected 12 saw "+K);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+K)}U.chk("0600","Mini Sector Shift: "),U.chk("000000000000","Reserved: ")}function p(U,Z){for(var K=Math.ceil(U.length/Z)-1,X=[],J=1;J<K;++J)X[J-1]=U.slice(J*Z,(J+1)*Z);return X[K-1]=U.slice(K*Z),X}function E(U,Z,K){for(var X=0,J=0,te=0,_e=0,Pe=0,pe=K.length,ve=[],Ee=[];X<pe;++X)ve[X]=Ee[X]=X,Z[X]=K[X];for(;Pe<Ee.length;++Pe)X=Ee[Pe],J=U[X].L,te=U[X].R,_e=U[X].C,ve[X]===X&&(J!==-1&&ve[J]!==J&&(ve[X]=ve[J]),te!==-1&&ve[te]!==te&&(ve[X]=ve[te])),_e!==-1&&(ve[_e]=X),J!==-1&&X!=ve[X]&&(ve[J]=ve[X],Ee.lastIndexOf(J)<Pe&&Ee.push(J)),te!==-1&&X!=ve[X]&&(ve[te]=ve[X],Ee.lastIndexOf(te)<Pe&&Ee.push(te));for(X=1;X<pe;++X)ve[X]===X&&(te!==-1&&ve[te]!==te?ve[X]=ve[te]:J!==-1&&ve[J]!==J&&(ve[X]=ve[J]));for(X=1;X<pe;++X)if(U[X].type!==0){if(Pe=X,Pe!=ve[Pe])do Pe=ve[Pe],Z[X]=Z[Pe]+"/"+Z[X];while(Pe!==0&&ve[Pe]!==-1&&Pe!=ve[Pe]);ve[X]=-1}for(Z[0]+="/",X=1;X<pe;++X)U[X].type!==2&&(Z[X]+="/")}function v(U,Z,K){for(var X=U.start,J=U.size,te=[],_e=X;K&&J>0&&_e>=0;)te.push(Z.slice(_e*W,_e*W+W)),J-=W,_e=lh(K,_e*4);return te.length===0?be(0):di(te).slice(0,U.size)}function w(U,Z,K,X,J){var te=D;if(U===D){if(Z!==0)throw new Error("DIFAT chain shorter than expected")}else if(U!==-1){var _e=K[U],Pe=(X>>>2)-1;if(!_e)return;for(var pe=0;pe<Pe&&(te=lh(_e,pe*4))!==D;++pe)J.push(te);w(lh(_e,X-4),Z-1,K,X,J)}}function T(U,Z,K,X,J){var te=[],_e=[];J||(J=[]);var Pe=X-1,pe=0,ve=0;for(pe=Z;pe>=0;){J[pe]=!0,te[te.length]=pe,_e.push(U[pe]);var Ee=K[Math.floor(pe*4/X)];if(ve=pe*4&Pe,X<4+ve)throw new Error("FAT boundary crossed: "+pe+" 4 "+X);if(!U[Ee])break;pe=lh(U[Ee],ve)}return{nodes:te,data:HL([_e])}}function R(U,Z,K,X){var J=U.length,te=[],_e=[],Pe=[],pe=[],ve=X-1,Ee=0,$e=0,et=0,ut=0;for(Ee=0;Ee<J;++Ee)if(Pe=[],et=Ee+Z,et>=J&&(et-=J),!_e[et]){pe=[];var We=[];for($e=et;$e>=0;){We[$e]=!0,_e[$e]=!0,Pe[Pe.length]=$e,pe.push(U[$e]);var He=K[Math.floor($e*4/X)];if(ut=$e*4&ve,X<4+ut)throw new Error("FAT boundary crossed: "+$e+" 4 "+X);if(!U[He]||($e=lh(U[He],ut),We[$e]))break}te[et]={nodes:Pe,data:HL([pe])}}return te}function k(U,Z,K,X,J,te,_e,Pe){for(var pe=0,ve=X.length?2:0,Ee=Z[U].data,$e=0,et=0,ut;$e<Ee.length;$e+=128){var We=Ee.slice($e,$e+128);Ds(We,64),et=We.read_shift(2),ut=jC(We,0,et-ve),X.push(ut);var He={name:ut,type:We.read_shift(1),color:We.read_shift(1),L:We.read_shift(4,"i"),R:We.read_shift(4,"i"),C:We.read_shift(4,"i"),clsid:We.read_shift(16),state:We.read_shift(4,"i"),start:0,size:0},Nt=We.read_shift(2)+We.read_shift(2)+We.read_shift(2)+We.read_shift(2);Nt!==0&&(He.ct=N(We,We.l-8));var _n=We.read_shift(2)+We.read_shift(2)+We.read_shift(2)+We.read_shift(2);_n!==0&&(He.mt=N(We,We.l-8)),He.start=We.read_shift(4,"i"),He.size=We.read_shift(4,"i"),He.size<0&&He.start<0&&(He.size=He.type=0,He.start=D,He.name=""),He.type===5?(pe=He.start,J>0&&pe!==D&&(Z[pe].name="!StreamData")):He.size>=4096?(He.storage="fat",Z[He.start]===void 0&&(Z[He.start]=T(K,He.start,Z.fat_addrs,Z.ssz)),Z[He.start].name=He.name,He.content=Z[He.start].data.slice(0,He.size)):(He.storage="minifat",He.size<0?He.size=0:pe!==D&&He.start!==D&&Z[pe]&&(He.content=v(He,Z[pe].data,(Z[Pe]||{}).data))),He.content&&Ds(He.content,0),te[ut]=He,_e.push(He)}}function N(U,Z){return new Date((Gs(U,Z+4)/1e7*Math.pow(2,32)+Gs(U,Z)/1e7-11644473600)*1e3)}function O(U,Z){return u(),f(l.readFileSync(U),Z)}function B(U,Z){var K=Z&&Z.type;switch(K||dn&&Buffer.isBuffer(U)&&(K="buffer"),K||"base64"){case"file":return O(U,Z);case"base64":return f(Ua(Fl(U)),Z);case"binary":return f(Ua(U),Z)}return f(U,Z)}function P(U,Z){var K=Z||{},X=K.root||"Root Entry";if(U.FullPaths||(U.FullPaths=[]),U.FileIndex||(U.FileIndex=[]),U.FullPaths.length!==U.FileIndex.length)throw new Error("inconsistent CFB structure");U.FullPaths.length===0&&(U.FullPaths[0]=X+"/",U.FileIndex[0]={name:X,type:5}),K.CLSID&&(U.FileIndex[0].clsid=K.CLSID),b(U)}function b(U){var Z="Sh33tJ5";if(!Mn.find(U,"/"+Z)){var K=be(4);K[0]=55,K[1]=K[3]=50,K[2]=54,U.FileIndex.push({name:Z,type:2,content:K,size:4,L:69,R:69,C:69}),U.FullPaths.push(U.FullPaths[0]+Z),M(U)}}function M(U,Z){P(U);for(var K=!1,X=!1,J=U.FullPaths.length-1;J>=0;--J){var te=U.FileIndex[J];switch(te.type){case 0:X?K=!0:(U.FileIndex.pop(),U.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(te.R*te.L*te.C)&&(K=!0),te.R>-1&&te.L>-1&&te.R==te.L&&(K=!0);break;default:K=!0;break}}if(!(!K&&!Z)){var _e=new Date(1987,1,19),Pe=0,pe=Object.create?Object.create(null):{},ve=[];for(J=0;J<U.FullPaths.length;++J)pe[U.FullPaths[J]]=!0,U.FileIndex[J].type!==0&&ve.push([U.FullPaths[J],U.FileIndex[J]]);for(J=0;J<ve.length;++J){var Ee=r(ve[J][0]);X=pe[Ee],X||(ve.push([Ee,{name:i(Ee).replace("/",""),type:1,clsid:Fe,ct:_e,mt:_e,content:null}]),pe[Ee]=!0)}for(ve.sort(function(ut,We){return t(ut[0],We[0])}),U.FullPaths=[],U.FileIndex=[],J=0;J<ve.length;++J)U.FullPaths[J]=ve[J][0],U.FileIndex[J]=ve[J][1];for(J=0;J<ve.length;++J){var $e=U.FileIndex[J],et=U.FullPaths[J];if($e.name=i(et).replace("/",""),$e.L=$e.R=$e.C=-($e.color=1),$e.size=$e.content?$e.content.length:0,$e.start=0,$e.clsid=$e.clsid||Fe,J===0)$e.C=ve.length>1?1:-1,$e.size=0,$e.type=5;else if(et.slice(-1)=="/"){for(Pe=J+1;Pe<ve.length&&r(U.FullPaths[Pe])!=et;++Pe);for($e.C=Pe>=ve.length?-1:Pe,Pe=J+1;Pe<ve.length&&r(U.FullPaths[Pe])!=r(et);++Pe);$e.R=Pe>=ve.length?-1:Pe,$e.type=1}else r(U.FullPaths[J+1]||"")==r(et)&&($e.R=J+1),$e.type=2}}}function F(U,Z){var K=Z||{};if(K.fileType=="mad")return Pr(U,K);switch(M(U),K.fileType){case"zip":return pn(U,K)}var X=(function(ut){for(var We=0,He=0,Nt=0;Nt<ut.FileIndex.length;++Nt){var _n=ut.FileIndex[Nt];if(_n.content){var wn=_n.content.length;wn>0&&(wn<4096?We+=wn+63>>6:He+=wn+511>>9)}}for(var $n=ut.FullPaths.length+3>>2,Ia=We+7>>3,qs=We+127>>7,As=Ia+He+$n+qs,fr=As+127>>7,Wl=fr<=109?0:Math.ceil((fr-109)/127);As+fr+Wl+127>>7>fr;)Wl=++fr<=109?0:Math.ceil((fr-109)/127);var qn=[1,Wl,fr,qs,$n,He,We,0];return ut.FileIndex[0].size=We<<6,qn[7]=(ut.FileIndex[0].start=qn[0]+qn[1]+qn[2]+qn[3]+qn[4]+qn[5])+(qn[6]+7>>3),qn})(U),J=be(X[7]<<9),te=0,_e=0;{for(te=0;te<8;++te)J.write_shift(1,Le[te]);for(te=0;te<8;++te)J.write_shift(2,0);for(J.write_shift(2,62),J.write_shift(2,3),J.write_shift(2,65534),J.write_shift(2,9),J.write_shift(2,6),te=0;te<3;++te)J.write_shift(2,0);for(J.write_shift(4,0),J.write_shift(4,X[2]),J.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),J.write_shift(4,0),J.write_shift(4,4096),J.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:D),J.write_shift(4,X[3]),J.write_shift(-4,X[1]?X[0]-1:D),J.write_shift(4,X[1]),te=0;te<109;++te)J.write_shift(-4,te<X[2]?X[1]+te:-1)}if(X[1])for(_e=0;_e<X[1];++_e){for(;te<236+_e*127;++te)J.write_shift(-4,te<X[2]?X[1]+te:-1);J.write_shift(-4,_e===X[1]-1?D:_e+1)}var Pe=function(ut){for(_e+=ut;te<_e-1;++te)J.write_shift(-4,te+1);ut&&(++te,J.write_shift(-4,D))};for(_e=te=0,_e+=X[1];te<_e;++te)J.write_shift(-4,Ce.DIFSECT);for(_e+=X[2];te<_e;++te)J.write_shift(-4,Ce.FATSECT);Pe(X[3]),Pe(X[4]);for(var pe=0,ve=0,Ee=U.FileIndex[0];pe<U.FileIndex.length;++pe)Ee=U.FileIndex[pe],Ee.content&&(ve=Ee.content.length,!(ve<4096)&&(Ee.start=_e,Pe(ve+511>>9)));for(Pe(X[6]+7>>3);J.l&511;)J.write_shift(-4,Ce.ENDOFCHAIN);for(_e=te=0,pe=0;pe<U.FileIndex.length;++pe)Ee=U.FileIndex[pe],Ee.content&&(ve=Ee.content.length,!(!ve||ve>=4096)&&(Ee.start=_e,Pe(ve+63>>6)));for(;J.l&511;)J.write_shift(-4,Ce.ENDOFCHAIN);for(te=0;te<X[4]<<2;++te){var $e=U.FullPaths[te];if(!$e||$e.length===0){for(pe=0;pe<17;++pe)J.write_shift(4,0);for(pe=0;pe<3;++pe)J.write_shift(4,-1);for(pe=0;pe<12;++pe)J.write_shift(4,0);continue}Ee=U.FileIndex[te],te===0&&(Ee.start=Ee.size?Ee.start-1:D);var et=te===0&&K.root||Ee.name;if(ve=2*(et.length+1),J.write_shift(64,et,"utf16le"),J.write_shift(2,ve),J.write_shift(1,Ee.type),J.write_shift(1,Ee.color),J.write_shift(-4,Ee.L),J.write_shift(-4,Ee.R),J.write_shift(-4,Ee.C),Ee.clsid)J.write_shift(16,Ee.clsid,"hex");else for(pe=0;pe<4;++pe)J.write_shift(4,0);J.write_shift(4,Ee.state||0),J.write_shift(4,0),J.write_shift(4,0),J.write_shift(4,0),J.write_shift(4,0),J.write_shift(4,Ee.start),J.write_shift(4,Ee.size),J.write_shift(4,0)}for(te=1;te<U.FileIndex.length;++te)if(Ee=U.FileIndex[te],Ee.size>=4096)if(J.l=Ee.start+1<<9,dn&&Buffer.isBuffer(Ee.content))Ee.content.copy(J,J.l,0,Ee.size),J.l+=Ee.size+511&-512;else{for(pe=0;pe<Ee.size;++pe)J.write_shift(1,Ee.content[pe]);for(;pe&511;++pe)J.write_shift(1,0)}for(te=1;te<U.FileIndex.length;++te)if(Ee=U.FileIndex[te],Ee.size>0&&Ee.size<4096)if(dn&&Buffer.isBuffer(Ee.content))Ee.content.copy(J,J.l,0,Ee.size),J.l+=Ee.size+63&-64;else{for(pe=0;pe<Ee.size;++pe)J.write_shift(1,Ee.content[pe]);for(;pe&63;++pe)J.write_shift(1,0)}if(dn)J.l=J.length;else for(;J.l<J.length;)J.write_shift(1,0);return J}function V(U,Z){var K=U.FullPaths.map(function(pe){return pe.toUpperCase()}),X=K.map(function(pe){var ve=pe.split("/");return ve[ve.length-(pe.slice(-1)=="/"?2:1)]}),J=!1;Z.charCodeAt(0)===47?(J=!0,Z=K[0].slice(0,-1)+Z):J=Z.indexOf("/")!==-1;var te=Z.toUpperCase(),_e=J===!0?K.indexOf(te):X.indexOf(te);if(_e!==-1)return U.FileIndex[_e];var Pe=!te.match(ly);for(te=te.replace(Pm,""),Pe&&(te=te.replace(ly,"!")),_e=0;_e<K.length;++_e)if((Pe?K[_e].replace(ly,"!"):K[_e]).replace(Pm,"")==te||(Pe?X[_e].replace(ly,"!"):X[_e]).replace(Pm,"")==te)return U.FileIndex[_e];return null}var W=64,D=-2,Ie="d0cf11e0a1b11ae1",Le=[208,207,17,224,161,177,26,225],Fe="00000000000000000000000000000000",Ce={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:Ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Fe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(U,Z,K){u();var X=F(U,K);l.writeFileSync(Z,X)}function Re(U){for(var Z=new Array(U.length),K=0;K<U.length;++K)Z[K]=String.fromCharCode(U[K]);return Z.join("")}function me(U,Z){var K=F(U,Z);switch(Z&&Z.type||"buffer"){case"file":return u(),l.writeFileSync(Z.filename,K),K;case"binary":return typeof K=="string"?K:Re(K);case"base64":return Tp(typeof K=="string"?K:Re(K));case"buffer":if(dn)return Buffer.isBuffer(K)?K:$l(K);case"array":return typeof K=="string"?Ua(K):K}return K}var ee;function j(U){try{var Z=U.InflateRaw,K=new Z;if(K._processChunk(new Uint8Array([3,0]),K._finishFlushFlag),K.bytesRead)ee=U;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function ne(U,Z){if(!ee)return ws(U,Z);var K=ee.InflateRaw,X=new K,J=X._processChunk(U.slice(U.l),X._finishFlushFlag);return U.l+=X.bytesRead,J}function re(U){return ee?ee.deflateRawSync(U):Di(U)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],De=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ve(U){var Z=(U<<1|U<<11)&139536|(U<<5|U<<15)&558144;return(Z>>16|Z>>8|Z)&255}for(var Ae=typeof Uint8Array<"u",Oe=Ae?new Uint8Array(256):[],Te=0;Te<256;++Te)Oe[Te]=Ve(Te);function ue(U,Z){var K=Oe[U&255];return Z<=8?K>>>8-Z:(K=K<<8|Oe[U>>8&255],Z<=16?K>>>16-Z:(K=K<<8|Oe[U>>16&255],K>>>24-Z))}function C(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=6?0:U[X+1]<<8))>>>K&3}function qe(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=5?0:U[X+1]<<8))>>>K&7}function q(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=4?0:U[X+1]<<8))>>>K&15}function ft(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=3?0:U[X+1]<<8))>>>K&31}function Y(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=1?0:U[X+1]<<8))>>>K&127}function z(U,Z,K){var X=Z&7,J=Z>>>3,te=(1<<K)-1,_e=U[J]>>>X;return K<8-X||(_e|=U[J+1]<<8-X,K<16-X)||(_e|=U[J+2]<<16-X,K<24-X)||(_e|=U[J+3]<<24-X),_e&te}function se(U,Z,K){var X=Z&7,J=Z>>>3;return X<=5?U[J]|=(K&7)<<X:(U[J]|=K<<X&255,U[J+1]=(K&7)>>8-X),Z+3}function Ne(U,Z,K){var X=Z&7,J=Z>>>3;return K=(K&1)<<X,U[J]|=K,Z+1}function xe(U,Z,K){var X=Z&7,J=Z>>>3;return K<<=X,U[J]|=K&255,K>>>=8,U[J+1]=K,Z+8}function Xe(U,Z,K){var X=Z&7,J=Z>>>3;return K<<=X,U[J]|=K&255,K>>>=8,U[J+1]=K&255,U[J+2]=K>>>8,Z+16}function Je(U,Z){var K=U.length,X=2*K>Z?2*K:Z+5,J=0;if(K>=Z)return U;if(dn){var te=kL(X);if(U.copy)U.copy(te);else for(;J<U.length;++J)te[J]=U[J];return te}else if(Ae){var _e=new Uint8Array(X);if(_e.set)_e.set(U);else for(;J<K;++J)_e[J]=U[J];return _e}return U.length=X,U}function ht(U){for(var Z=new Array(U),K=0;K<U;++K)Z[K]=0;return Z}function mt(U,Z,K){var X=1,J=0,te=0,_e=0,Pe=0,pe=U.length,ve=Ae?new Uint16Array(32):ht(32);for(te=0;te<32;++te)ve[te]=0;for(te=pe;te<K;++te)U[te]=0;pe=U.length;var Ee=Ae?new Uint16Array(pe):ht(pe);for(te=0;te<pe;++te)ve[J=U[te]]++,X<J&&(X=J),Ee[te]=0;for(ve[0]=0,te=1;te<=X;++te)ve[te+16]=Pe=Pe+ve[te-1]<<1;for(te=0;te<pe;++te)Pe=U[te],Pe!=0&&(Ee[te]=ve[Pe+16]++);var $e=0;for(te=0;te<pe;++te)if($e=U[te],$e!=0)for(Pe=ue(Ee[te],X)>>X-$e,_e=(1<<X+4-$e)-1;_e>=0;--_e)Z[Pe|_e<<$e]=$e&15|te<<4;return X}var St=Ae?new Uint16Array(512):ht(512),Bt=Ae?new Uint16Array(32):ht(32);if(!Ae){for(var _r=0;_r<512;++_r)St[_r]=0;for(_r=0;_r<32;++_r)Bt[_r]=0}(function(){for(var U=[],Z=0;Z<32;Z++)U.push(5);mt(U,Bt,32);var K=[];for(Z=0;Z<=143;Z++)K.push(8);for(;Z<=255;Z++)K.push(9);for(;Z<=279;Z++)K.push(7);for(;Z<=287;Z++)K.push(8);mt(K,St,288)})();var Ea=(function(){for(var Z=Ae?new Uint8Array(32768):[],K=0,X=0;K<De.length-1;++K)for(;X<De[K+1];++X)Z[X]=K;for(;X<32768;++X)Z[X]=29;var J=Ae?new Uint8Array(259):[];for(K=0,X=0;K<ge.length-1;++K)for(;X<ge[K+1];++X)J[X]=K;function te(Pe,pe){for(var ve=0;ve<Pe.length;){var Ee=Math.min(65535,Pe.length-ve),$e=ve+Ee==Pe.length;for(pe.write_shift(1,+$e),pe.write_shift(2,Ee),pe.write_shift(2,~Ee&65535);Ee-- >0;)pe[pe.l++]=Pe[ve++]}return pe.l}function _e(Pe,pe){for(var ve=0,Ee=0,$e=Ae?new Uint16Array(32768):[];Ee<Pe.length;){var et=Math.min(65535,Pe.length-Ee);if(et<10){for(ve=se(pe,ve,+(Ee+et==Pe.length)),ve&7&&(ve+=8-(ve&7)),pe.l=ve/8|0,pe.write_shift(2,et),pe.write_shift(2,~et&65535);et-- >0;)pe[pe.l++]=Pe[Ee++];ve=pe.l*8;continue}ve=se(pe,ve,+(Ee+et==Pe.length)+2);for(var ut=0;et-- >0;){var We=Pe[Ee];ut=(ut<<5^We)&32767;var He=-1,Nt=0;if((He=$e[ut])&&(He|=Ee&-32768,He>Ee&&(He-=32768),He<Ee))for(;Pe[He+Nt]==Pe[Ee+Nt]&&Nt<250;)++Nt;if(Nt>2){We=J[Nt],We<=22?ve=xe(pe,ve,Oe[We+1]>>1)-1:(xe(pe,ve,3),ve+=5,xe(pe,ve,Oe[We-23]>>5),ve+=3);var _n=We<8?0:We-4>>2;_n>0&&(Xe(pe,ve,Nt-ge[We]),ve+=_n),We=Z[Ee-He],ve=xe(pe,ve,Oe[We]>>3),ve-=3;var wn=We<4?0:We-2>>1;wn>0&&(Xe(pe,ve,Ee-He-De[We]),ve+=wn);for(var $n=0;$n<Nt;++$n)$e[ut]=Ee&32767,ut=(ut<<5^Pe[Ee])&32767,++Ee;et-=Nt-1}else We<=143?We=We+48:ve=Ne(pe,ve,1),ve=xe(pe,ve,Oe[We]),$e[ut]=Ee&32767,++Ee}ve=xe(pe,ve,0)-1}return pe.l=(ve+7)/8|0,pe.l}return function(pe,ve){return pe.length<8?te(pe,ve):_e(pe,ve)}})();function Di(U){var Z=be(50+Math.floor(U.length*1.1)),K=Ea(U,Z);return Z.slice(0,K)}var ei=Ae?new Uint16Array(32768):ht(32768),wa=Ae?new Uint16Array(32768):ht(32768),Es=Ae?new Uint16Array(128):ht(128),Xs=1,Sa=1;function ti(U,Z){var K=ft(U,Z)+257;Z+=5;var X=ft(U,Z)+1;Z+=5;var J=q(U,Z)+4;Z+=4;for(var te=0,_e=Ae?new Uint8Array(19):ht(19),Pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pe=1,ve=Ae?new Uint8Array(8):ht(8),Ee=Ae?new Uint8Array(8):ht(8),$e=_e.length,et=0;et<J;++et)_e[Q[et]]=te=qe(U,Z),pe<te&&(pe=te),ve[te]++,Z+=3;var ut=0;for(ve[0]=0,et=1;et<=pe;++et)Ee[et]=ut=ut+ve[et-1]<<1;for(et=0;et<$e;++et)(ut=_e[et])!=0&&(Pe[et]=Ee[ut]++);var We=0;for(et=0;et<$e;++et)if(We=_e[et],We!=0){ut=Oe[Pe[et]]>>8-We;for(var He=(1<<7-We)-1;He>=0;--He)Es[ut|He<<We]=We&7|et<<3}var Nt=[];for(pe=1;Nt.length<K+X;)switch(ut=Es[Y(U,Z)],Z+=ut&7,ut>>>=3){case 16:for(te=3+C(U,Z),Z+=2,ut=Nt[Nt.length-1];te-- >0;)Nt.push(ut);break;case 17:for(te=3+qe(U,Z),Z+=3;te-- >0;)Nt.push(0);break;case 18:for(te=11+Y(U,Z),Z+=7;te-- >0;)Nt.push(0);break;default:Nt.push(ut),pe<ut&&(pe=ut);break}var _n=Nt.slice(0,K),wn=Nt.slice(K);for(et=K;et<286;++et)_n[et]=0;for(et=X;et<30;++et)wn[et]=0;return Xs=mt(_n,ei,286),Sa=mt(wn,wa,30),Z}function Ta(U,Z){if(U[0]==3&&!(U[1]&3))return[Hh(Z),2];for(var K=0,X=0,J=kL(Z||1<<18),te=0,_e=J.length>>>0,Pe=0,pe=0;(X&1)==0;){if(X=qe(U,K),K+=3,X>>>1)X>>1==1?(Pe=9,pe=5):(K=ti(U,K),Pe=Xs,pe=Sa);else{K&7&&(K+=8-(K&7));var ve=U[K>>>3]|U[(K>>>3)+1]<<8;if(K+=32,ve>0)for(!Z&&_e<te+ve&&(J=Je(J,te+ve),_e=J.length);ve-- >0;)J[te++]=U[K>>>3],K+=8;continue}for(;;){!Z&&_e<te+32767&&(J=Je(J,te+32767),_e=J.length);var Ee=z(U,K,Pe),$e=X>>>1==1?St[Ee]:ei[Ee];if(K+=$e&15,$e>>>=4,($e>>>8&255)===0)J[te++]=$e;else{if($e==256)break;$e-=257;var et=$e<8?0:$e-4>>2;et>5&&(et=0);var ut=te+ge[$e];et>0&&(ut+=z(U,K,et),K+=et),Ee=z(U,K,pe),$e=X>>>1==1?Bt[Ee]:wa[Ee],K+=$e&15,$e>>>=4;var We=$e<4?0:$e-2>>1,He=De[$e];for(We>0&&(He+=z(U,K,We),K+=We),!Z&&_e<ut&&(J=Je(J,ut+100),_e=J.length);te<ut;)J[te]=J[te-He],++te}}}return Z?[J,K+7>>>3]:[J.slice(0,te),K+7>>>3]}function ws(U,Z){var K=U.slice(U.l||0),X=Ta(K,Z);return U.l+=X[1],X[0]}function Ss(U,Z){if(U)typeof console<"u"&&console.error(Z);else throw new Error(Z)}function Gr(U,Z){var K=U;Ds(K,0);var X=[],J=[],te={FileIndex:X,FullPaths:J};P(te,{root:Z.root});for(var _e=K.length-4;(K[_e]!=80||K[_e+1]!=75||K[_e+2]!=5||K[_e+3]!=6)&&_e>=0;)--_e;K.l=_e+4,K.l+=4;var Pe=K.read_shift(2);K.l+=6;var pe=K.read_shift(4);for(K.l=pe,_e=0;_e<Pe;++_e){K.l+=20;var ve=K.read_shift(4),Ee=K.read_shift(4),$e=K.read_shift(2),et=K.read_shift(2),ut=K.read_shift(2);K.l+=8;var We=K.read_shift(4),He=o(K.slice(K.l+$e,K.l+$e+et));K.l+=$e+et+ut;var Nt=K.l;K.l=We+4,ni(K,ve,Ee,te,He),K.l=Nt}return te}function ni(U,Z,K,X,J){U.l+=2;var te=U.read_shift(2),_e=U.read_shift(2),Pe=a(U);if(te&8257)throw new Error("Unsupported ZIP encryption");for(var pe=U.read_shift(4),ve=U.read_shift(4),Ee=U.read_shift(4),$e=U.read_shift(2),et=U.read_shift(2),ut="",We=0;We<$e;++We)ut+=String.fromCharCode(U[U.l++]);if(et){var He=o(U.slice(U.l,U.l+et));(He[21589]||{}).mt&&(Pe=He[21589].mt),((J||{})[21589]||{}).mt&&(Pe=J[21589].mt)}U.l+=et;var Nt=U.slice(U.l,U.l+ve);switch(_e){case 8:Nt=ne(U,Ee);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+_e)}var _n=!1;te&8&&(pe=U.read_shift(4),pe==134695760&&(pe=U.read_shift(4),_n=!0),ve=U.read_shift(4),Ee=U.read_shift(4)),ve!=Z&&Ss(_n,"Bad compressed size: "+Z+" != "+ve),Ee!=K&&Ss(_n,"Bad uncompressed size: "+K+" != "+Ee),Qt(X,ut,Nt,{unsafe:!0,mt:Pe})}function pn(U,Z){var K=Z||{},X=[],J=[],te=be(1),_e=K.compression?8:0,Pe=0,pe=0,ve=0,Ee=0,$e=0,et=U.FullPaths[0],ut=et,We=U.FileIndex[0],He=[],Nt=0;for(pe=1;pe<U.FullPaths.length;++pe)if(ut=U.FullPaths[pe].slice(et.length),We=U.FileIndex[pe],!(!We.size||!We.content||ut=="Sh33tJ5")){var _n=Ee,wn=be(ut.length);for(ve=0;ve<ut.length;++ve)wn.write_shift(1,ut.charCodeAt(ve)&127);wn=wn.slice(0,wn.l),He[$e]=xge.buf(We.content,0);var $n=We.content;_e==8&&($n=re($n)),te=be(30),te.write_shift(4,67324752),te.write_shift(2,20),te.write_shift(2,Pe),te.write_shift(2,_e),We.mt?s(te,We.mt):te.write_shift(4,0),te.write_shift(-4,He[$e]),te.write_shift(4,$n.length),te.write_shift(4,We.content.length),te.write_shift(2,wn.length),te.write_shift(2,0),Ee+=te.length,X.push(te),Ee+=wn.length,X.push(wn),Ee+=$n.length,X.push($n),te=be(46),te.write_shift(4,33639248),te.write_shift(2,0),te.write_shift(2,20),te.write_shift(2,Pe),te.write_shift(2,_e),te.write_shift(4,0),te.write_shift(-4,He[$e]),te.write_shift(4,$n.length),te.write_shift(4,We.content.length),te.write_shift(2,wn.length),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(4,0),te.write_shift(4,_n),Nt+=te.l,J.push(te),Nt+=wn.length,J.push(wn),++$e}return te=be(22),te.write_shift(4,101010256),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,$e),te.write_shift(2,$e),te.write_shift(4,Nt),te.write_shift(4,Ee),te.write_shift(2,0),di([di(X),di(J),te])}var Ts={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Is(U,Z){if(U.ctype)return U.ctype;var K=U.name||"",X=K.match(/\.([^\.]+)$/);return X&&Ts[X[1]]||Z&&(X=(K=Z).match(/[\.\\]([^\.\\])+$/),X&&Ts[X[1]])?Ts[X[1]]:"application/octet-stream"}function Yn(U){for(var Z=Tp(U),K=[],X=0;X<Z.length;X+=76)K.push(Z.slice(X,X+76));return K.join(`\r
`)+`\r
`}function qi(U){var Z=U.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ve){var Ee=ve.charCodeAt(0).toString(16).toUpperCase();return"="+(Ee.length==1?"0"+Ee:Ee)});Z=Z.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Z.charAt(0)==`
`&&(Z="=0D"+Z.slice(1)),Z=Z.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var K=[],X=Z.split(`\r
`),J=0;J<X.length;++J){var te=X[J];if(te.length==0){K.push("");continue}for(var _e=0;_e<te.length;){var Pe=76,pe=te.slice(_e,_e+Pe);pe.charAt(Pe-1)=="="?Pe--:pe.charAt(Pe-2)=="="?Pe-=2:pe.charAt(Pe-3)=="="&&(Pe-=3),pe=te.slice(_e,_e+Pe),_e+=Pe,_e<te.length&&(pe+="="),K.push(pe)}}return K.join(`\r
`)}function Cr(U){for(var Z=[],K=0;K<U.length;++K){for(var X=U[K];K<=U.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+U[++K];Z.push(X)}for(var J=0;J<Z.length;++J)Z[J]=Z[J].replace(/[=][0-9A-Fa-f]{2}/g,function(te){return String.fromCharCode(parseInt(te.slice(1),16))});return Ua(Z.join(`\r
`))}function Xn(U,Z,K){for(var X="",J="",te="",_e,Pe=0;Pe<10;++Pe){var pe=Z[Pe];if(!pe||pe.match(/^\s*$/))break;var ve=pe.match(/^(.*?):\s*([^\s].*)$/);if(ve)switch(ve[1].toLowerCase()){case"content-location":X=ve[2].trim();break;case"content-type":te=ve[2].trim();break;case"content-transfer-encoding":J=ve[2].trim();break}}switch(++Pe,J.toLowerCase()){case"base64":_e=Ua(Fl(Z.slice(Pe).join("")));break;case"quoted-printable":_e=Cr(Z.slice(Pe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+J)}var Ee=Qt(U,X.slice(K.length),_e,{unsafe:!0});te&&(Ee.ctype=te)}function br(U,Z){if(Re(U.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var K=Z&&Z.root||"",X=(dn&&Buffer.isBuffer(U)?U.toString("binary"):Re(U)).split(`\r
`),J=0,te="";for(J=0;J<X.length;++J)if(te=X[J],!!/^Content-Location:/i.test(te)&&(te=te.slice(te.indexOf("file")),K||(K=te.slice(0,te.lastIndexOf("/")+1)),te.slice(0,K.length)!=K))for(;K.length>0&&(K=K.slice(0,K.length-1),K=K.slice(0,K.lastIndexOf("/")+1),te.slice(0,K.length)!=K););var _e=(X[1]||"").match(/boundary="(.*?)"/);if(!_e)throw new Error("MAD cannot find boundary");var Pe="--"+(_e[1]||""),pe=[],ve=[],Ee={FileIndex:pe,FullPaths:ve};P(Ee);var $e,et=0;for(J=0;J<X.length;++J){var ut=X[J];ut!==Pe&&ut!==Pe+"--"||(et++&&Xn(Ee,X.slice($e,J),K),$e=J)}return Ee}function Pr(U,Z){var K=Z||{},X=K.boundary||"SheetJS";X="------="+X;for(var J=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],te=U.FullPaths[0],_e=te,Pe=U.FileIndex[0],pe=1;pe<U.FullPaths.length;++pe)if(_e=U.FullPaths[pe].slice(te.length),Pe=U.FileIndex[pe],!(!Pe.size||!Pe.content||_e=="Sh33tJ5")){_e=_e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Nt){return"_x"+Nt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Nt){return"_u"+Nt.charCodeAt(0).toString(16)+"_"});for(var ve=Pe.content,Ee=dn&&Buffer.isBuffer(ve)?ve.toString("binary"):Re(ve),$e=0,et=Math.min(1024,Ee.length),ut=0,We=0;We<=et;++We)(ut=Ee.charCodeAt(We))>=32&&ut<128&&++$e;var He=$e>=et*4/5;J.push(X),J.push("Content-Location: "+(K.root||"file:///C:/SheetJS/")+_e),J.push("Content-Transfer-Encoding: "+(He?"quoted-printable":"base64")),J.push("Content-Type: "+Is(Pe,_e)),J.push(""),J.push(He?qi(Ee):Yn(Ee))}return J.push(X+`--\r
`),J.join(`\r
`)}function yr(U){var Z={};return P(Z,U),Z}function Qt(U,Z,K,X){var J=X&&X.unsafe;J||P(U);var te=!J&&Mn.find(U,Z);if(!te){var _e=U.FullPaths[0];Z.slice(0,_e.length)==_e?_e=Z:(_e.slice(-1)!="/"&&(_e+="/"),_e=(_e+Z).replace("//","/")),te={name:i(Z),type:2},U.FileIndex.push(te),U.FullPaths.push(_e),J||Mn.utils.cfb_gc(U)}return te.content=K,te.size=K?K.length:0,X&&(X.CLSID&&(te.clsid=X.CLSID),X.mt&&(te.mt=X.mt),X.ct&&(te.ct=X.ct)),te}function rr(U,Z){P(U);var K=Mn.find(U,Z);if(K){for(var X=0;X<U.FileIndex.length;++X)if(U.FileIndex[X]==K)return U.FileIndex.splice(X,1),U.FullPaths.splice(X,1),!0}return!1}function hr(U,Z,K){P(U);var X=Mn.find(U,Z);if(X){for(var J=0;J<U.FileIndex.length;++J)if(U.FileIndex[J]==X)return U.FileIndex[J].name=i(K),U.FullPaths[J]=K,!0}return!1}function Zi(U){M(U,!0)}return e.find=V,e.read=B,e.parse=f,e.write=me,e.writeFile=ce,e.utils={cfb_new:yr,cfb_add:Qt,cfb_del:rr,cfb_mov:hr,cfb_gc:Zi,ReadShift:Mm,CheckField:D7,prep_blob:Ds,bconcat:di,use_zlib:j,_deflateRaw:Di,_inflateRaw:ws,consts:Ce},e})();function Ege(n){return typeof n=="string"?kE(n):Array.isArray(n)?K0e(n):n}function w1(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=kE(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Ap(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([Ege(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=E1(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function yi(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function VL(n,e){for(var t=[],r=yi(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function LC(n){for(var e=[],t=yi(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function LE(n){for(var e=[],t=yi(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function wge(n){for(var e=[],t=yi(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var ux=new Date(1899,11,30,0,0,0);function _s(n,e){var t=n.getTime(),r=ux.getTime()+(n.getTimezoneOffset()-ux.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var v7=new Date,Sge=ux.getTime()+(v7.getTimezoneOffset()-ux.getTimezoneOffset())*6e4,GL=v7.getTimezoneOffset();function x7(n){var e=new Date;return e.setTime(n*24*60*60*1e3+Sge),e.getTimezoneOffset()!==GL&&e.setTime(e.getTime()+(e.getTimezoneOffset()-GL)*6e4),e}var BL=new Date("2017-02-19T19:06:09.000Z"),E7=isNaN(BL.getFullYear())?new Date("2/19/17"):BL,Tge=E7.getFullYear()==2017;function Xi(n,e){var t=new Date(n);if(Tge)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(E7.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function OE(n,e){if(dn&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function ys(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=ys(n[t]));return e}function lr(n,e){for(var t="";t.length<e;)t+=n;return t}function Rl(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var Ige=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ip(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&Ige.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function zt(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return dn?r=$l(t):r=Y0e(t),Mn.utils.cfb_add(n,e,r)}Mn.utils.cfb_add(n,e,t)}else n.file(e,t)}function OC(){return Mn.utils.cfb_new()}var Rr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Age={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},DC=LC(Age),FC=/[&<>'"]/g,Rge=/[\u0000-\u0008\u000b-\u001f]/g;function bn(n){var e=n+"";return e.replace(FC,function(t){return DC[t]}).replace(Rge,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function UL(n){return bn(n).replace(/ /g,"_x0020_")}var w7=/[\u0000-\u001f]/g;function Cge(n){var e=n+"";return e.replace(FC,function(t){return DC[t]}).replace(/\n/g,"<br/>").replace(w7,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function bge(n){var e=n+"";return e.replace(FC,function(t){return DC[t]}).replace(w7,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function Pge(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function kge(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function bS(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function zL(n){var e=Hh(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function $L(n){return $l(n,"binary").toString("utf8")}var uy="foo bar baz",km=dn&&($L(uy)==bS(uy)&&$L||zL(uy)==bS(uy)&&zL)||bS,Ap=dn?function(n){return $l(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Mge=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}})(),S7=/(^\s|\s$|\n)/;function gi(n,e){return"<"+n+(e.match(S7)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function Rp(n){return yi(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function tt(n,e,t){return"<"+n+(t!=null?Rp(t):"")+(e!=null?(e.match(S7)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function CI(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function Nge(n,e){switch(typeof n){case"string":var t=tt("vt:lpwstr",bn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return tt((n|0)==n?"vt:i4":"vt:r8",bn(String(n)));case"boolean":return tt("vt:bool",n?"true":"false")}if(n instanceof Date)return tt("vt:filetime",CI(n));throw new Error("Unable to serialize "+n)}var Yr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},j0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Vs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Lge(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function Oge(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var WL=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},HL=dn?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:$l(e)})):WL(n)}:WL,KL=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(im(n,i)));return r.join("").replace(Pm,"")},jC=dn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(Pm,""):KL(n,e,t)}:KL,YL=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},T7=dn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):YL(n,e,t)}:YL,XL=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(vd(n,i)));return r.join("")},S1=dn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):XL(e,t,r)}:XL,I7=function(n,e){var t=Gs(n,e);return t>0?S1(n,e+4,e+4+t-1):""},A7=I7,R7=function(n,e){var t=Gs(n,e);return t>0?S1(n,e+4,e+4+t-1):""},C7=R7,b7=function(n,e){var t=2*Gs(n,e);return t>0?S1(n,e+4,e+4+t-1):""},P7=b7,k7=function(e,t){var r=Gs(e,t);return r>0?jC(e,t+4,t+4+r):""},M7=k7,N7=function(n,e){var t=Gs(n,e);return t>0?S1(n,e+4,e+4+t):""},L7=N7,O7=function(n,e){return Lge(n,e)},hx=O7,VC=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};dn&&(A7=function(e,t){if(!Buffer.isBuffer(e))return I7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},C7=function(e,t){if(!Buffer.isBuffer(e))return R7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},P7=function(e,t){if(!Buffer.isBuffer(e))return b7(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},M7=function(e,t){if(!Buffer.isBuffer(e))return k7(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},L7=function(e,t){if(!Buffer.isBuffer(e))return N7(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},hx=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):O7(e,t)},VC=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var vd=function(n,e){return n[e]},im=function(n,e){return n[e+1]*256+n[e]},Dge=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},Gs=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},lh=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},Fge=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Mm(n,e){var t="",r,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,dn&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(im(this,u)),u+=2;n*=2;break;case"utf8":t=S1(this,this.l,this.l+n);break;case"utf16le":n*=2,t=jC(this,this.l,this.l+n);break;case"wstr":return Mm.call(this,n,"dbcs");case"lpstr-ansi":t=A7(this,this.l),n=4+Gs(this,this.l);break;case"lpstr-cp":t=C7(this,this.l),n=4+Gs(this,this.l);break;case"lpwstr":t=P7(this,this.l),n=4+2*Gs(this,this.l);break;case"lpp4":n=4+Gs(this,this.l),t=M7(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+Gs(this,this.l),t=L7(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=vd(this,this.l+n++))!==0;)s.push(oy(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=im(this,this.l+n))!==0;)s.push(oy(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=vd(this,u),this.l=u+1,o=Mm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(oy(im(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=vd(this,u),this.l=u+1,o=Mm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(oy(vd(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=vd(this,this.l),this.l++,r;case 2:return r=(e==="i"?Dge:im)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?lh:Fge)(this,this.l),this.l+=4,r):(i=Gs(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=hx(this,this.l):i=hx([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=T7(this,this.l,n);break}}return this.l+=n,t}var jge=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},Vge=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},Gge=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function Bge(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)Gge(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,jge(this,e,this.l);break;case 8:if(r=8,t==="f"){Oge(this,e,this.l);break}case 16:break;case-4:r=4,Vge(this,e,this.l);break}return this.l+=r,this}function D7(n,e){var t=T7(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Ds(n,e){n.l=e,n.read_shift=Mm,n.chk=D7,n.write_shift=Bge}function zo(n,e){n.l+=e}function be(n){var e=Hh(n);return Ds(e,0),e}function ms(){var n=[],e=dn?256:2048,t=function(u){var f=be(u);return Ds(f,0),f},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),di(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function Ge(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=Lve[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&VC(t)&&n.push(t)}}function Nm(n,e,t){var r=ys(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function qL(n,e,t){var r=ys(n);return r.s=Nm(r.s,e.s,t),r.e=Nm(r.e,e.s,t),r}function Lm(n,e){if(n.cRel&&n.c<0)for(n=ys(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=ys(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=kn(n);return!n.cRel&&n.cRel!=null&&(t=$ge(t)),!n.rRel&&n.rRel!=null&&(t=Uge(t)),t}function PS(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Ni(n.s.c)+":"+(n.e.cRel?"":"$")+Ni(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+pi(n.s.r)+":"+(n.e.rRel?"":"$")+pi(n.e.r):Lm(n.s,e.biff)+":"+Lm(n.e,e.biff)}function GC(n){return parseInt(zge(n),10)-1}function pi(n){return""+(n+1)}function Uge(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function zge(n){return n.replace(/\$(\d+)$/,"$1")}function BC(n){for(var e=Wge(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Ni(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function $ge(n){return n.replace(/^([A-Z])/,"$$$1")}function Wge(n){return n.replace(/^\$([A-Z])/,"$1")}function Hge(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function qr(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function kn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function Ys(n){var e=n.indexOf(":");return e==-1?{s:qr(n),e:qr(n)}:{s:qr(n.slice(0,e)),e:qr(n.slice(e+1))}}function Ir(n,e){return typeof e>"u"||typeof e=="number"?Ir(n.s,n.e):(typeof n!="string"&&(n=kn(n)),typeof e!="string"&&(e=kn(e)),n==e?n:n+":"+e)}function zn(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function ZL(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=du(n.z,t?_s(e):e)}catch{}try{return n.w=du((n.XF||{}).numFmtId||(t?14:0),t?_s(e):e)}catch{return""+e}}function jl(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?T1[n.v]||n.v:e==null?ZL(n,n.v):ZL(n,e))}function lf(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function F7(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?qr(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var f=zn(s["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(u.e.r=a=f.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[d].length;++g)if(!(typeof e[d][g]>"u")){var p={v:e[d][g]},E=a+d,v=o+g;if(u.s.r>E&&(u.s.r=E),u.s.c>v&&(u.s.c=v),u.e.r<E&&(u.e.r=E),u.e.c<v&&(u.e.c=v),e[d][g]&&typeof e[d][g]=="object"&&!Array.isArray(e[d][g])&&!(e[d][g]instanceof Date))p=e[d][g];else if(Array.isArray(p.v)&&(p.f=e[d][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||ur[14],r.cellDates?(p.t="d",p.w=du(p.z,_s(p.v))):(p.t="n",p.v=_s(p.v),p.w=du(p.z,p.v))):p.t="s";if(i)s[E]||(s[E]=[]),s[E][v]&&s[E][v].z&&(p.z=s[E][v].z),s[E][v]=p;else{var w=kn({c:v,r:E});s[w]&&s[w].z&&(p.z=s[w].z),s[w]=p}}}return u.s.c<1e7&&(s["!ref"]=Ir(u)),s}function V0(n,e){return F7(null,n,e)}function Kge(n){return n.read_shift(4,"i")}function Xa(n,e){return e||(e=be(4)),e.write_shift(4,n),e}function Li(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function Zr(n,e){var t=!1;return e==null&&(t=!0,e=be(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function Yge(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function Xge(n,e){return e||(e=be(4)),e.write_shift(2,0),e.write_shift(2,0),e}function UC(n,e){var t=n.l,r=n.read_shift(1),i=Li(n),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=n.read_shift(4),l=0;l!=o;++l)s.push(Yge(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function qge(n,e){var t=!1;return e==null&&(t=!0,e=be(15+4*n.t.length)),e.write_shift(1,0),Zr(n.t,e),t?e.slice(0,e.l):e}var Zge=UC;function Qge(n,e){var t=!1;return e==null&&(t=!0,e=be(23+4*n.t.length)),e.write_shift(1,1),Zr(n.t,e),e.write_shift(4,1),Xge({},e),t?e.slice(0,e.l):e}function xa(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function cf(n,e){return e==null&&(e=be(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function uf(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function hf(n,e){return e==null&&(e=be(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var Jge=Li,j7=Zr;function zC(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function fx(n,e){var t=!1;return e==null&&(t=!0,e=be(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var eme=Li,bI=zC,$C=fx;function V7(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?hx([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):lh(e,0)>>2;return t?i/100:i}function G7(n,e){e==null&&(e=be(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function B7(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function tme(n,e){return e||(e=be(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var ff=B7,G0=tme;function B0(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Kh(n,e){return(e||be(8)).write_shift(8,n,"f")}function nme(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=hme[i];u&&(e.rgb=lO(u));break;case 2:e.rgb=lO([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function dx(n,e){if(e||(e=be(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function rme(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function ime(n,e){e||(e=be(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var U7=2,Ls=3,hy=11,gx=19,fy=64,sme=65,ame=71,ome=4108,lme=4126,ui=80,QL={1:{n:"CodePage",t:U7},2:{n:"Category",t:ui},3:{n:"PresentationFormat",t:ui},4:{n:"ByteCount",t:Ls},5:{n:"LineCount",t:Ls},6:{n:"ParagraphCount",t:Ls},7:{n:"SlideCount",t:Ls},8:{n:"NoteCount",t:Ls},9:{n:"HiddenCount",t:Ls},10:{n:"MultimediaClipCount",t:Ls},11:{n:"ScaleCrop",t:hy},12:{n:"HeadingPairs",t:ome},13:{n:"TitlesOfParts",t:lme},14:{n:"Manager",t:ui},15:{n:"Company",t:ui},16:{n:"LinksUpToDate",t:hy},17:{n:"CharacterCount",t:Ls},19:{n:"SharedDoc",t:hy},22:{n:"HyperlinksChanged",t:hy},23:{n:"AppVersion",t:Ls,p:"version"},24:{n:"DigSig",t:sme},26:{n:"ContentType",t:ui},27:{n:"ContentStatus",t:ui},28:{n:"Language",t:ui},29:{n:"Version",t:ui},255:{},2147483648:{n:"Locale",t:gx},2147483651:{n:"Behavior",t:gx},1919054434:{}},JL={1:{n:"CodePage",t:U7},2:{n:"Title",t:ui},3:{n:"Subject",t:ui},4:{n:"Author",t:ui},5:{n:"Keywords",t:ui},6:{n:"Comments",t:ui},7:{n:"Template",t:ui},8:{n:"LastAuthor",t:ui},9:{n:"RevNumber",t:ui},10:{n:"EditTime",t:fy},11:{n:"LastPrinted",t:fy},12:{n:"CreatedDate",t:fy},13:{n:"ModifiedDate",t:fy},14:{n:"PageCount",t:Ls},15:{n:"WordCount",t:Ls},16:{n:"CharCount",t:Ls},17:{n:"Thumbnail",t:ame},18:{n:"Application",t:ui},19:{n:"DocSecurity",t:Ls},255:{},2147483648:{n:"Locale",t:gx},2147483651:{n:"Behavior",t:gx},1919054434:{}};function cme(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var ume=cme([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),hme=ys(ume),T1={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},fme={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},dy={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function z7(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function $7(n,e){var t=wge(fme),r=[],i;r[r.length]=Rr,r[r.length]=tt("Types",null,{xmlns:Yr.CT,"xmlns:xsd":Yr.xsd,"xmlns:xsi":Yr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return tt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){n[l]&&n[l].length>0&&(i=n[l][0],r[r.length]=tt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:dy[l][e.bookType]||dy[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=tt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:dy[l][e.bookType]||dy[l].xlsx})})},o=function(l){(n[l]||[]).forEach(function(u){r[r.length]=tt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var ln={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function W7(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function Hd(n){var e=[Rr,tt("Relationships",null,{xmlns:Yr.RELS})];return yi(n["!id"]).forEach(function(t){e[e.length]=tt("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function An(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[ln.HLINK,ln.XPATH,ln.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function dme(n){var e=[Rr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function eO(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function gme(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function mme(n){var e=[Rr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(eO(n[t][0],n[t][1])),e.push(gme("",n[t][0]));return e.push(eO("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function H7(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+sx.version+"</meta:generator></office:meta></office:document-meta>"}var Sh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function kS(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=bn(e),r[r.length]=t?tt(n,e,t):gi(n,e))}function K7(n,e){var t=e||{},r=[Rr,tt("cp:coreProperties",null,{"xmlns:cp":Yr.CORE_PROPS,"xmlns:dc":Yr.dc,"xmlns:dcterms":Yr.dcterms,"xmlns:dcmitype":Yr.dcmitype,"xmlns:xsi":Yr.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&kS("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:CI(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&kS("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:CI(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=Sh.length;++s){var a=Sh[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&kS(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Kd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Y7=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function X7(n){var e=[],t=tt;return n||(n={}),n.Application="SheetJS",e[e.length]=Rr,e[e.length]=tt("Properties",null,{xmlns:Yr.EXT_PROPS,"xmlns:vt":Yr.vt}),Kd.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=bn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+bn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function q7(n){var e=[Rr,tt("Properties",null,{xmlns:Yr.CUST_PROPS,"xmlns:vt":Yr.vt})];if(!n)return e.join("");var t=1;return yi(n).forEach(function(i){++t,e[e.length]=tt("property",Nge(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:bn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var tO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function pme(n,e){var t=[];return yi(tO).map(function(r){for(var i=0;i<Sh.length;++i)if(Sh[i][1]==r)return Sh[i];for(i=0;i<Kd.length;++i)if(Kd[i][1]==r)return Kd[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(gi(tO[r[1]]||r[1],i))}}),tt("DocumentProperties",t.join(""),{xmlns:Vs.o})}function _me(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&yi(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<Sh.length;++a)if(s==Sh[a][1])return;for(a=0;a<Kd.length;++a)if(s==Kd[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(tt(UL(s),o,{"dt:dt":l}))}}),e&&yi(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(tt(UL(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Vs.o+'">'+i.join("")+"</"+r+">"}function yme(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=be(8);return a.write_shift(4,r),a.write_shift(4,i),a}function nO(n,e){var t=be(4),r=be(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=be(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=yme(e);break;case 31:case 80:for(r=be(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return di([t,r])}var Z7=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function vme(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function rO(n,e,t){var r=be(8),i=[],s=[],a=8,o=0,l=be(8),u=be(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=be(8),u.write_shift(4,0),i.unshift(u);var f=[be(4)];for(f[0].write_shift(4,n.length),o=0;o<n.length;++o){var d=n[o][0];for(l=be(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);f.push(l)}l=di(f),s.unshift(l),a+=8+l.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(Z7.indexOf(n[o][0])>-1||Y7.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],p=0;if(e){p=+e[n[o][0]];var E=t[p];if(E.p=="version"&&typeof g=="string"){var v=g.split(".");g=(+v[0]<<16)+(+v[1]||0)}l=nO(E.t,g)}else{var w=vme(g);w==-1&&(w=31,g=String(g)),l=nO(w,g)}s.push(l),u=be(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+l.length}var T=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,T),T+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),di([r].concat(i).concat(s))}function iO(n,e,t,r,i,s){var a=be(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Mn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=rO(n,t,r);if(o.push(l),i){var u=rO(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return di(o)}function xme(n,e){e||(e=be(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function Eme(n,e){return n.read_shift(e)===1}function Gi(n,e){return e||(e=be(2)),e.write_shift(2,+!!n),e}function Q7(n){return n.read_shift(2,"u")}function ca(n,e){return e||(e=be(2)),e.write_shift(2,n),e}function J7(n,e,t){return t||(t=be(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function eV(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function wme(n){var e=n.t||"",t=be(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=be(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return di(i)}function Sme(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function Tme(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):Sme(n,r,t)}function Ime(n,e,t){if(t.biff>5)return Tme(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function tV(n,e,t){return t||(t=be(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function sO(n,e){e||(e=be(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function Ame(n){var e=be(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),sO(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&sO(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),t=0;t<r.length-3*l;++t)e.write_shift(1,r.charCodeAt(t+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Yh(n,e,t,r){return r||(r=be(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function Rme(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function Cme(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function nV(n,e){return e||(e=be(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function WC(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=be(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function bme(n,e){var t=!e||e.biff==8,r=be(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function Pme(n,e){var t=!e||e.biff>=8?2:1,r=be(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function kme(n,e){var t=be(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=wme(n[i]);var s=di([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function Mme(){var n=be(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function Nme(n){var e=be(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Lme(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=be(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function Ome(n,e,t,r){var i=be(10);return Yh(n,e,r,i),i.write_shift(4,t),i}function Dme(n,e,t,r,i){var s=!i||i.biff==8,a=be(8+ +s+(1+s)*t.length);return Yh(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function Fme(n,e,t,r){var i=t&&t.biff==5;r||(r=be(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function jme(n,e){var t=e.biff==8||!e.biff?4:2,r=be(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function aO(n,e,t,r){var i=t&&t.biff==5;r||(r=be(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Vme(n){var e=be(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Gme(n,e,t,r,i,s){var a=be(8);return Yh(n,e,r,a),J7(t,s,a),a}function Bme(n,e,t,r){var i=be(14);return Yh(n,e,r,i),Kh(t,i),i}function Ume(n,e,t){if(t.biff<8)return zme(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(Rme(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function zme(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=eV(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function $me(n){var e=be(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)nV(n[t],e);return e}function Wme(n){var e=be(24),t=qr(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return di([e,Ame(n[1])])}function Hme(n){var e=n[1].Tooltip,t=be(10+2*(e.length+1));t.write_shift(2,2048);var r=qr(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function Kme(n){return n||(n=be(4)),n.write_shift(2,1),n.write_shift(2,1),n}function Yme(n,e,t){if(!t.cellStyles)return zo(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(u.level=l>>8&7),u}function Xme(n,e){var t=be(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function qme(n){for(var e=be(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function Zme(n,e,t){var r=be(15);return A1(r,n,e),r.write_shift(8,t,"f"),r}function Qme(n,e,t){var r=be(9);return A1(r,n,e),r.write_shift(2,t),r}var Jme=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=LC({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var u=[],f=Hh(1);switch(l.type){case"base64":f=Ua(Fl(o));break;case"binary":f=Ua(o);break;case"buffer":case"array":f=o;break}Ds(f,0);var d=f.read_shift(1),g=!!(d&136),p=!1,E=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:E=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var v=0,w=521;d==2&&(v=f.read_shift(2)),f.l+=3,d!=2&&(v=f.read_shift(4)),v>1048576&&(v=1e6),d!=2&&(w=f.read_shift(2));var T=f.read_shift(2),R=l.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(R=n[f[f.l]]),f.l+=1,f.l+=2),E&&(f.l+=36);for(var k=[],N={},O=Math.min(f.length,d==2?521:w-10-(p?264:0)),B=E?32:11;f.l<O&&f[f.l]!=13;)switch(N={},N.name=ax.utils.decode(R,f.slice(f.l,f.l+B)).replace(/[\u0000\r\n].*$/g,""),f.l+=B,N.type=String.fromCharCode(f.read_shift(1)),d!=2&&!E&&(N.offset=f.read_shift(4)),N.len=f.read_shift(1),d==2&&(N.offset=f.read_shift(2)),N.dec=f.read_shift(1),N.name.length&&k.push(N),d!=2&&(f.l+=E?13:14),N.type){case"B":(!p||N.len!=8)&&l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(f[f.l]!==13&&(f.l=w-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=w;var P=0,b=0;for(u[0]=[],b=0;b!=k.length;++b)u[0][b]=k[b].name;for(;v-- >0;){if(f[f.l]===42){f.l+=T;continue}for(++f.l,u[++P]=[],b=0,b=0;b!=k.length;++b){var M=f.slice(f.l,f.l+k[b].len);f.l+=k[b].len,Ds(M,0);var F=ax.utils.decode(R,M);switch(k[b].type){case"C":F.trim().length&&(u[P][b]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[P][b]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[P][b]=F;break;case"F":u[P][b]=parseFloat(F.trim());break;case"+":case"I":u[P][b]=E?M.read_shift(-4,"i")^2147483648:M.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[P][b]=!0;break;case"N":case"F":u[P][b]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[P][b]="##MEMO##"+(E?parseInt(F.trim(),10):M.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[P][b]=+F||0);break;case"@":u[P][b]=new Date(M.read_shift(-8,"f")-621356832e5);break;case"T":u[P][b]=new Date((M.read_shift(4)-2440588)*864e5+M.read_shift(4));break;case"Y":u[P][b]=M.read_shift(4,"i")/1e4+M.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[P][b]=-M.read_shift(-8,"f");break;case"B":if(p&&k[b].len==8){u[P][b]=M.read_shift(8,"f");break}case"G":case"P":M.l+=k[b].len;break;case"0":if(k[b].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[b].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=k,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var f=V0(t(o,u),u);return f["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,f}function i(o,l){try{return lf(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&Sp(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=ms(),d=vx(o,{header:1,raw:!0,cellDates:!0}),g=d[0],p=d.slice(1),E=o["!cols"]||[],v=0,w=0,T=0,R=1;for(v=0;v<g.length;++v){if(((E[v]||{}).DBF||{}).name){g[v]=E[v].DBF.name,++T;continue}if(g[v]!=null){if(++T,typeof g[v]=="number"&&(g[v]=g[v].toString(10)),typeof g[v]!="string")throw new Error("DBF Invalid column name "+g[v]+" |"+typeof g[v]+"|");if(g.indexOf(g[v])!==v){for(w=0;w<1024;++w)if(g.indexOf(g[v]+"_"+w)==-1){g[v]+="_"+w;break}}}}var k=zn(o["!ref"]),N=[],O=[],B=[];for(v=0;v<=k.e.c-k.s.c;++v){var P="",b="",M=0,F=[];for(w=0;w<p.length;++w)p[w][v]!=null&&F.push(p[w][v]);if(F.length==0||g[v]==null){N[v]="?";continue}for(w=0;w<F.length;++w){switch(typeof F[w]){case"number":b="B";break;case"string":b="C";break;case"boolean":b="L";break;case"object":b=F[w]instanceof Date?"D":"C";break;default:b="C"}M=Math.max(M,String(F[w]).length),P=P&&P!=b?"C":b}M>250&&(M=250),b=((E[v]||{}).DBF||{}).type,b=="C"&&E[v].DBF.len>M&&(M=E[v].DBF.len),P=="B"&&b=="N"&&(P="N",B[v]=E[v].DBF.dec,M=E[v].DBF.len),O[v]=P=="C"||b=="N"?M:s[P]||0,R+=O[v],N[v]=P}var V=f.next(32);for(V.write_shift(4,318902576),V.write_shift(4,p.length),V.write_shift(2,296+32*T),V.write_shift(2,R),v=0;v<4;++v)V.write_shift(4,0);for(V.write_shift(4,0|(+e[i7]||3)<<8),v=0,w=0;v<g.length;++v)if(g[v]!=null){var W=f.next(32),D=(g[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);W.write_shift(1,D,"sbcs"),W.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),W.write_shift(4,w),W.write_shift(1,O[v]||s[N[v]]||0),W.write_shift(1,B[v]||0),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(1,0),W.write_shift(4,0),W.write_shift(4,0),w+=O[v]||s[N[v]]||0}var Ie=f.next(264);for(Ie.write_shift(4,13),v=0;v<65;++v)Ie.write_shift(4,0);for(v=0;v<p.length;++v){var Le=f.next(R);for(Le.write_shift(1,0),w=0;w<g.length;++w)if(g[w]!=null)switch(N[w]){case"L":Le.write_shift(1,p[v][w]==null?63:p[v][w]?84:70);break;case"B":Le.write_shift(8,p[v][w]||0,"f");break;case"N":var Fe="0";for(typeof p[v][w]=="number"&&(Fe=p[v][w].toFixed(B[w]||0)),T=0;T<O[w]-Fe.length;++T)Le.write_shift(1,32);Le.write_shift(1,Fe,"sbcs");break;case"D":p[v][w]?(Le.write_shift(4,("0000"+p[v][w].getFullYear()).slice(-4),"sbcs"),Le.write_shift(2,("00"+(p[v][w].getMonth()+1)).slice(-2),"sbcs"),Le.write_shift(2,("00"+p[v][w].getDate()).slice(-2),"sbcs")):Le.write_shift(8,"00000000","sbcs");break;case"C":var Ce=String(p[v][w]!=null?p[v][w]:"").slice(0,O[w]);for(Le.write_shift(1,Ce,"sbcs"),T=0;T<O[w]-Ce.length;++T)Le.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}})(),epe=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+yi(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var E=n[p];return typeof E=="number"?PL(E):E},r=function(g,p,E){var v=p.charCodeAt(0)-32<<4|E.charCodeAt(0)-48;return v==59?g:PL(v)};n["|"]=254;function i(g,p){switch(p.type){case"base64":return s(Fl(g),p);case"binary":return s(g,p);case"buffer":return s(dn&&Buffer.isBuffer(g)?g.toString("binary"):E1(g),p);case"array":return s(OE(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var E=g.split(/[\n\r]+/),v=-1,w=-1,T=0,R=0,k=[],N=[],O=null,B={},P=[],b=[],M=[],F=0,V;for(+p.codepage>=0&&Sp(+p.codepage);T!==E.length;++T){F=0;var W=E[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),D=W.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),Ie=D[0],Le;if(W.length>0)switch(Ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&N.push(W.slice(3).replace(/;;/g,";"));break;case"C":var Fe=!1,Ce=!1,ce=!1,Re=!1,me=-1,ee=-1;for(R=1;R<D.length;++R)switch(D[R].charAt(0)){case"A":break;case"X":w=parseInt(D[R].slice(1))-1,Ce=!0;break;case"Y":for(v=parseInt(D[R].slice(1))-1,Ce||(w=0),V=k.length;V<=v;++V)k[V]=[];break;case"K":Le=D[R].slice(1),Le.charAt(0)==='"'?Le=Le.slice(1,Le.length-1):Le==="TRUE"?Le=!0:Le==="FALSE"?Le=!1:isNaN(Rl(Le))?isNaN(Ip(Le).getDate())||(Le=Xi(Le)):(Le=Rl(Le),O!==null&&p7(O)&&(Le=x7(Le))),Fe=!0;break;case"E":Re=!0;var j=Qpe(D[R].slice(1),{r:v,c:w});k[v][w]=[k[v][w],j];break;case"S":ce=!0,k[v][w]=[k[v][w],"S5S"];break;case"G":break;case"R":me=parseInt(D[R].slice(1))-1;break;case"C":ee=parseInt(D[R].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}if(Fe&&(k[v][w]&&k[v][w].length==2?k[v][w][0]=Le:k[v][w]=Le,O=null),ce){if(Re)throw new Error("SYLK shared formula cannot have own formula");var ne=me>-1&&k[me][ee];if(!ne||!ne[1])throw new Error("SYLK shared formula cannot find base");k[v][w][1]=Jpe(ne[1],{r:v-me,c:w-ee})}break;case"F":var re=0;for(R=1;R<D.length;++R)switch(D[R].charAt(0)){case"X":w=parseInt(D[R].slice(1))-1,++re;break;case"Y":for(v=parseInt(D[R].slice(1))-1,V=k.length;V<=v;++V)k[V]=[];break;case"M":F=parseInt(D[R].slice(1))/20;break;case"F":break;case"G":break;case"P":O=N[parseInt(D[R].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(M=D[R].slice(1).split(" "),V=parseInt(M[0],10);V<=parseInt(M[1],10);++V)F=parseInt(M[2],10),b[V-1]=F===0?{hidden:!0}:{wch:F},HC(b[V-1]);break;case"C":w=parseInt(D[R].slice(1))-1,b[w]||(b[w]={});break;case"R":v=parseInt(D[R].slice(1))-1,P[v]||(P[v]={}),F>0?(P[v].hpt=F,P[v].hpx=oV(F)):F===0&&(P[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}re<1&&(O=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}}return P.length>0&&(B["!rows"]=P),b.length>0&&(B["!cols"]=b),p&&p.sheetRows&&(k=k.slice(0,p.sheetRows)),[k,B]}function a(g,p){var E=i(g,p),v=E[0],w=E[1],T=V0(v,p);return yi(w).forEach(function(R){T[R]=w[R]}),T}function o(g,p){return lf(a(g,p),p)}function l(g,p,E,v){var w="C;Y"+(E+1)+";X"+(v+1)+";K";switch(g.t){case"n":w+=g.v||0,g.f&&!g.F&&(w+=";E"+YC(g.f,{r:E,c:v}));break;case"b":w+=g.v?"TRUE":"FALSE";break;case"e":w+=g.w||g.v;break;case"d":w+='"'+(g.w||g.v)+'"';break;case"s":w+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function u(g,p){p.forEach(function(E,v){var w="F;W"+(v+1)+" "+(v+1)+" ";E.hidden?w+="0":(typeof E.width=="number"&&!E.wpx&&(E.wpx=mx(E.width)),typeof E.wpx=="number"&&!E.wch&&(E.wch=px(E.wpx)),typeof E.wch=="number"&&(w+=Math.round(E.wch))),w.charAt(w.length-1)!=" "&&g.push(w)})}function f(g,p){p.forEach(function(E,v){var w="F;";E.hidden?w+="M0;":E.hpt?w+="M"+20*E.hpt+";":E.hpx&&(w+="M"+20*_x(E.hpx)+";"),w.length>2&&g.push(w+"R"+(v+1))})}function d(g,p){var E=["ID;PWXL;N;E"],v=[],w=zn(g["!ref"]),T,R=Array.isArray(g),k=`\r
`;E.push("P;PGeneral"),E.push("F;P0;DG0G8;M255"),g["!cols"]&&u(E,g["!cols"]),g["!rows"]&&f(E,g["!rows"]),E.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var N=w.s.r;N<=w.e.r;++N)for(var O=w.s.c;O<=w.e.c;++O){var B=kn({r:N,c:O});T=R?(g[N]||[])[O]:g[B],!(!T||T.v==null&&(!T.f||T.F))&&v.push(l(T,g,N,O))}return E.join(k)+k+v.join(k)+k+"E"+k}return{to_workbook:o,to_sheet:a,from_sheet:d}})(),tpe=(function(){function n(s,a){switch(a.type){case"base64":return e(Fl(s),a);case"binary":return e(s,a);case"buffer":return e(dn&&Buffer.isBuffer(s)?s.toString("binary"):E1(s),a);case"array":return e(OE(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,f=0,d=[];f!==o.length;++f){if(o[f].trim()==="BOT"){d[++l]=[],u=0;continue}if(!(l<0)){var g=o[f].trim().split(","),p=g[0],E=g[1];++f;for(var v=o[f]||"";(v.match(/["]/g)||[]).length&1&&f<o.length-1;)v+=`
`+o[++f];switch(v=v.trim(),+p){case-1:if(v==="BOT"){d[++l]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?d[l][u]=!0:v==="FALSE"?d[l][u]=!1:isNaN(Rl(E))?isNaN(Ip(E).getDate())?d[l][u]=E:d[l][u]=Xi(E):d[l][u]=Rl(E),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),d[l][u++]=v!==""?v:null;break}if(v==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function t(s,a){return V0(n(s,a),a)}function r(s,a){return lf(t(s,a),a)}var i=(function(){var s=function(l,u,f,d,g){l.push(u),l.push(f+","+d),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,u,f,d){l.push(u+","+f),l.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var u=[],f=zn(l["!ref"]),d,g=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,f.e.r-f.s.r+1,""),s(u,"TUPLES",0,f.e.c-f.s.c+1,""),s(u,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){a(u,-1,0,"BOT");for(var E=f.s.c;E<=f.e.c;++E){var v=kn({r:p,c:E});if(d=g?(l[p]||[])[E]:l[v],!d){a(u,1,0,"");continue}switch(d.t){case"n":var w=d.w;!w&&d.v!=null&&(w=d.v),w==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,w,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=du(d.z||ur[14],_s(Xi(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var T=`\r
`,R=u.join(T);return R}})();return{to_workbook:r,to_sheet:t,from_sheet:i}})(),rV=(function(){function n(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,g){for(var p=d.split(`
`),E=-1,v=-1,w=0,T=[];w!==p.length;++w){var R=p[w].trim().split(":");if(R[0]==="cell"){var k=qr(R[1]);if(T.length<=k.r)for(E=T.length;E<=k.r;++E)T[E]||(T[E]=[]);switch(E=k.r,v=k.c,R[2]){case"t":T[E][v]=n(R[3]);break;case"v":T[E][v]=+R[3];break;case"vtf":var N=R[R.length-1];case"vtc":switch(R[3]){case"nl":T[E][v]=!!+R[4];break;default:T[E][v]=+R[4];break}R[2]=="vtf"&&(T[E][v]=[T[E][v],N])}}}return g&&g.sheetRows&&(T=T.slice(0,g.sheetRows)),T}function r(d,g){return V0(t(d,g),g)}function i(d,g){return lf(r(d,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var g=[],p=[],E,v="",w=Ys(d["!ref"]),T=Array.isArray(d),R=w.s.r;R<=w.e.r;++R)for(var k=w.s.c;k<=w.e.c;++k)if(v=kn({r:R,c:k}),E=T?(d[R]||[])[k]:d[v],!(!E||E.v==null||E.t==="z")){switch(p=["cell",v,"t"],E.t){case"s":case"str":p.push(e(E.v));break;case"n":E.f?(p[2]="vtf",p[3]="n",p[4]=E.v,p[5]=e(E.f)):(p[2]="v",p[3]=E.v);break;case"b":p[2]="vt"+(E.f?"f":"c"),p[3]="nl",p[4]=E.v?"1":"0",p[5]=e(E.f||(E.v?"TRUE":"FALSE"));break;case"d":var N=_s(Xi(E.v));p[2]="vtc",p[3]="nd",p[4]=""+N,p[5]=E.w||du(E.z||ur[14],N);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function f(d){return[s,a,o,a,u(d),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:f}})(),npe=(function(){function n(f,d,g,p,E){E.raw?d[g][p]=f:f===""||(f==="TRUE"?d[g][p]=!0:f==="FALSE"?d[g][p]=!1:isNaN(Rl(f))?isNaN(Ip(f).getDate())?d[g][p]=f:d[g][p]=Xi(f):d[g][p]=Rl(f))}function e(f,d){var g=d||{},p=[];if(!f||f.length===0)return p;for(var E=f.split(/[\r\n]/),v=E.length-1;v>=0&&E[v].length===0;)--v;for(var w=10,T=0,R=0;R<=v;++R)T=E[R].indexOf(" "),T==-1?T=E[R].length:T++,w=Math.max(w,T);for(R=0;R<=v;++R){p[R]=[];var k=0;for(n(E[R].slice(0,w).trim(),p,R,k,g),k=1;k<=(E[R].length-w)/10+1;++k)n(E[R].slice(w+(k-1)*10,w+k*10).trim(),p,R,k,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(f){for(var d={},g=!1,p=0,E=0;p<f.length;++p)(E=f.charCodeAt(p))==34?g=!g:!g&&E in t&&(d[E]=(d[E]||0)+1);E=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&E.push([d[p],p]);if(!E.length){d=r;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&E.push([d[p],p])}return E.sort(function(v,w){return v[0]-w[0]||r[v[1]]-r[w[1]]}),t[E.pop()[1]]||44}function s(f,d){var g=d||{},p="",E=g.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=i(f.slice(0,1024)):g&&g.FS?p=g.FS:p=i(f.slice(0,1024));var w=0,T=0,R=0,k=0,N=0,O=p.charCodeAt(0),B=!1,P=0,b=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var M=g.dateNF!=null?yge(g.dateNF):null;function F(){var V=f.slice(k,N),W={};if(V.charAt(0)=='"'&&V.charAt(V.length-1)=='"'&&(V=V.slice(1,-1).replace(/""/g,'"')),V.length===0)W.t="z";else if(g.raw)W.t="s",W.v=V;else if(V.trim().length===0)W.t="s",W.v=V;else if(V.charCodeAt(0)==61)V.charCodeAt(1)==34&&V.charCodeAt(V.length-1)==34?(W.t="s",W.v=V.slice(2,-1).replace(/""/g,'"')):e1e(V)?(W.t="n",W.f=V.slice(1)):(W.t="s",W.v=V);else if(V=="TRUE")W.t="b",W.v=!0;else if(V=="FALSE")W.t="b",W.v=!1;else if(!isNaN(R=Rl(V)))W.t="n",g.cellText!==!1&&(W.w=V),W.v=R;else if(!isNaN(Ip(V).getDate())||M&&V.match(M)){W.z=g.dateNF||ur[14];var D=0;M&&V.match(M)&&(V=vge(V,g.dateNF,V.match(M)||[]),D=1),g.cellDates?(W.t="d",W.v=Xi(V,D)):(W.t="n",W.v=_s(Xi(V,D))),g.cellText!==!1&&(W.w=du(W.z,W.v instanceof Date?_s(W.v):W.v)),g.cellNF||delete W.z}else W.t="s",W.v=V;if(W.t=="z"||(g.dense?(E[w]||(E[w]=[]),E[w][T]=W):E[kn({c:T,r:w})]=W),k=N+1,b=f.charCodeAt(k),v.e.c<T&&(v.e.c=T),v.e.r<w&&(v.e.r=w),P==O)++T;else if(T=0,++w,g.sheetRows&&g.sheetRows<=w)return!0}e:for(;N<f.length;++N)switch(P=f.charCodeAt(N)){case 34:b===34&&(B=!B);break;case O:case 10:case 13:if(!B&&F())break e;break}return N-k>0&&F(),E["!ref"]=Ir(v),E}function a(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?s(f,d):V0(e(f,d),d)}function o(f,d){var g="",p=d.type=="string"?[0,0,0,0]:gxe(f,d);switch(d.type){case"base64":g=Fl(f);break;case"binary":g=f;break;case"buffer":d.codepage==65001?g=f.toString("utf8"):d.codepage&&typeof ax<"u"||(g=dn&&Buffer.isBuffer(f)?f.toString("binary"):E1(f));break;case"array":g=OE(f);break;case"string":g=f;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=km(g.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?g=km(g):d.type=="binary"&&typeof ax<"u",g.slice(0,19)=="socialcalc:version:"?rV.to_sheet(d.type=="string"?g:km(g),d):a(g,d)}function l(f,d){return lf(o(f,d),d)}function u(f){for(var d=[],g=zn(f["!ref"]),p,E=Array.isArray(f),v=g.s.r;v<=g.e.r;++v){for(var w=[],T=g.s.c;T<=g.e.c;++T){var R=kn({r:v,c:T});if(p=E?(f[v]||[])[T]:f[R],!p||p.v==null){w.push("          ");continue}for(var k=(p.w||(jl(p),p.w)||"").slice(0,10);k.length<10;)k+=" ";w.push(k+(T===0?" ":""))}d.push(w.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})(),oO=(function(){function n(j,ne,re){if(j){Ds(j,j.l||0);for(var Q=re.Enum||me;j.l<j.length;){var ge=j.read_shift(2),De=Q[ge]||Q[65535],Ve=j.read_shift(2),Ae=j.l+Ve,Oe=De.f&&De.f(j,Ve,re);if(j.l=Ae,ne(Oe,De,ge))return}}}function e(j,ne){switch(ne.type){case"base64":return t(Ua(Fl(j)),ne);case"binary":return t(Ua(j),ne);case"buffer":case"array":return t(j,ne)}throw"Unsupported type "+ne.type}function t(j,ne){if(!j)return j;var re=ne||{},Q=re.dense?[]:{},ge="Sheet1",De="",Ve=0,Ae={},Oe=[],Te=[],ue={s:{r:0,c:0},e:{r:0,c:0}},C=re.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)re.Enum=me,n(j,function(Y,z,se){switch(se){case 0:re.vers=Y,Y>=4096&&(re.qpro=!0);break;case 6:ue=Y;break;case 204:Y&&(De=Y);break;case 222:De=Y;break;case 15:case 51:re.qpro||(Y[1].v=Y[1].v.slice(1));case 13:case 14:case 16:se==14&&(Y[2]&112)==112&&(Y[2]&15)>1&&(Y[2]&15)<15&&(Y[1].z=re.dateNF||ur[14],re.cellDates&&(Y[1].t="d",Y[1].v=x7(Y[1].v))),re.qpro&&Y[3]>Ve&&(Q["!ref"]=Ir(ue),Ae[ge]=Q,Oe.push(ge),Q=re.dense?[]:{},ue={s:{r:0,c:0},e:{r:0,c:0}},Ve=Y[3],ge=De||"Sheet"+(Ve+1),De="");var Ne=re.dense?(Q[Y[0].r]||[])[Y[0].c]:Q[kn(Y[0])];if(Ne){Ne.t=Y[1].t,Ne.v=Y[1].v,Y[1].z!=null&&(Ne.z=Y[1].z),Y[1].f!=null&&(Ne.f=Y[1].f);break}re.dense?(Q[Y[0].r]||(Q[Y[0].r]=[]),Q[Y[0].r][Y[0].c]=Y[1]):Q[kn(Y[0])]=Y[1];break}},re);else if(j[2]==26||j[2]==14)re.Enum=ee,j[2]==14&&(re.qpro=!0,j.l=0),n(j,function(Y,z,se){switch(se){case 204:ge=Y;break;case 22:Y[1].v=Y[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Y[3]>Ve&&(Q["!ref"]=Ir(ue),Ae[ge]=Q,Oe.push(ge),Q=re.dense?[]:{},ue={s:{r:0,c:0},e:{r:0,c:0}},Ve=Y[3],ge="Sheet"+(Ve+1)),C>0&&Y[0].r>=C)break;re.dense?(Q[Y[0].r]||(Q[Y[0].r]=[]),Q[Y[0].r][Y[0].c]=Y[1]):Q[kn(Y[0])]=Y[1],ue.e.c<Y[0].c&&(ue.e.c=Y[0].c),ue.e.r<Y[0].r&&(ue.e.r=Y[0].r);break;case 27:Y[14e3]&&(Te[Y[14e3][0]]=Y[14e3][1]);break;case 1537:Te[Y[0]]=Y[1],Y[0]==Ve&&(ge=Y[1]);break}},re);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(Q["!ref"]=Ir(ue),Ae[De||ge]=Q,Oe.push(De||ge),!Te.length)return{SheetNames:Oe,Sheets:Ae};for(var qe={},q=[],ft=0;ft<Te.length;++ft)Ae[Oe[ft]]?(q.push(Te[ft]||Oe[ft]),qe[Te[ft]]=Ae[Te[ft]]||Ae[Oe[ft]]):(q.push(Te[ft]),qe[Te[ft]]={"!ref":"A1"});return{SheetNames:q,Sheets:qe}}function r(j,ne){var re=ne||{};if(+re.codepage>=0&&Sp(+re.codepage),re.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=ms(),ge=zn(j["!ref"]),De=Array.isArray(j),Ve=[];nt(Q,0,s(1030)),nt(Q,6,l(ge));for(var Ae=Math.min(ge.e.r,8191),Oe=ge.s.r;Oe<=Ae;++Oe)for(var Te=pi(Oe),ue=ge.s.c;ue<=ge.e.c;++ue){Oe===ge.s.r&&(Ve[ue]=Ni(ue));var C=Ve[ue]+Te,qe=De?(j[Oe]||[])[ue]:j[C];if(!(!qe||qe.t=="z"))if(qe.t=="n")(qe.v|0)==qe.v&&qe.v>=-32768&&qe.v<=32767?nt(Q,13,p(Oe,ue,qe.v)):nt(Q,14,v(Oe,ue,qe.v));else{var q=jl(qe);nt(Q,15,d(Oe,ue,q.slice(0,239)))}}return nt(Q,1),Q.end()}function i(j,ne){var re=ne||{};if(+re.codepage>=0&&Sp(+re.codepage),re.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=ms();nt(Q,0,a(j));for(var ge=0,De=0;ge<j.SheetNames.length;++ge)(j.Sheets[j.SheetNames[ge]]||{})["!ref"]&&nt(Q,27,Re(j.SheetNames[ge],De++));var Ve=0;for(ge=0;ge<j.SheetNames.length;++ge){var Ae=j.Sheets[j.SheetNames[ge]];if(!(!Ae||!Ae["!ref"])){for(var Oe=zn(Ae["!ref"]),Te=Array.isArray(Ae),ue=[],C=Math.min(Oe.e.r,8191),qe=Oe.s.r;qe<=C;++qe)for(var q=pi(qe),ft=Oe.s.c;ft<=Oe.e.c;++ft){qe===Oe.s.r&&(ue[ft]=Ni(ft));var Y=ue[ft]+q,z=Te?(Ae[qe]||[])[ft]:Ae[Y];if(!(!z||z.t=="z"))if(z.t=="n")nt(Q,23,F(qe,ft,Ve,z.v));else{var se=jl(z);nt(Q,22,P(qe,ft,Ve,se.slice(0,239)))}}++Ve}}return nt(Q,1),Q.end()}function s(j){var ne=be(2);return ne.write_shift(2,j),ne}function a(j){var ne=be(26);ne.write_shift(2,4096),ne.write_shift(2,4),ne.write_shift(4,0);for(var re=0,Q=0,ge=0,De=0;De<j.SheetNames.length;++De){var Ve=j.SheetNames[De],Ae=j.Sheets[Ve];if(!(!Ae||!Ae["!ref"])){++ge;var Oe=Ys(Ae["!ref"]);re<Oe.e.r&&(re=Oe.e.r),Q<Oe.e.c&&(Q=Oe.e.c)}}return re>8191&&(re=8191),ne.write_shift(2,re),ne.write_shift(1,ge),ne.write_shift(1,Q),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(1,1),ne.write_shift(1,2),ne.write_shift(4,0),ne.write_shift(4,0),ne}function o(j,ne,re){var Q={s:{c:0,r:0},e:{c:0,r:0}};return ne==8&&re.qpro?(Q.s.c=j.read_shift(1),j.l++,Q.s.r=j.read_shift(2),Q.e.c=j.read_shift(1),j.l++,Q.e.r=j.read_shift(2),Q):(Q.s.c=j.read_shift(2),Q.s.r=j.read_shift(2),ne==12&&re.qpro&&(j.l+=2),Q.e.c=j.read_shift(2),Q.e.r=j.read_shift(2),ne==12&&re.qpro&&(j.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function l(j){var ne=be(8);return ne.write_shift(2,j.s.c),ne.write_shift(2,j.s.r),ne.write_shift(2,j.e.c),ne.write_shift(2,j.e.r),ne}function u(j,ne,re){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return re.qpro&&re.vers!=20768?(Q[0].c=j.read_shift(1),Q[3]=j.read_shift(1),Q[0].r=j.read_shift(2),j.l+=2):(Q[2]=j.read_shift(1),Q[0].c=j.read_shift(2),Q[0].r=j.read_shift(2)),Q}function f(j,ne,re){var Q=j.l+ne,ge=u(j,ne,re);if(ge[1].t="s",re.vers==20768){j.l++;var De=j.read_shift(1);return ge[1].v=j.read_shift(De,"utf8"),ge}return re.qpro&&j.l++,ge[1].v=j.read_shift(Q-j.l,"cstr"),ge}function d(j,ne,re){var Q=be(7+re.length);Q.write_shift(1,255),Q.write_shift(2,ne),Q.write_shift(2,j),Q.write_shift(1,39);for(var ge=0;ge<Q.length;++ge){var De=re.charCodeAt(ge);Q.write_shift(1,De>=128?95:De)}return Q.write_shift(1,0),Q}function g(j,ne,re){var Q=u(j,ne,re);return Q[1].v=j.read_shift(2,"i"),Q}function p(j,ne,re){var Q=be(7);return Q.write_shift(1,255),Q.write_shift(2,ne),Q.write_shift(2,j),Q.write_shift(2,re,"i"),Q}function E(j,ne,re){var Q=u(j,ne,re);return Q[1].v=j.read_shift(8,"f"),Q}function v(j,ne,re){var Q=be(13);return Q.write_shift(1,255),Q.write_shift(2,ne),Q.write_shift(2,j),Q.write_shift(8,re,"f"),Q}function w(j,ne,re){var Q=j.l+ne,ge=u(j,ne,re);if(ge[1].v=j.read_shift(8,"f"),re.qpro)j.l=Q;else{var De=j.read_shift(2);N(j.slice(j.l,j.l+De),ge),j.l+=De}return ge}function T(j,ne,re){var Q=ne&32768;return ne&=-32769,ne=(Q?j:0)+(ne>=8192?ne-16384:ne),(Q?"":"$")+(re?Ni(ne):pi(ne))}var R={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(j,ne){Ds(j,0);for(var re=[],Q=0,ge="",De="",Ve="",Ae="";j.l<j.length;){var Oe=j[j.l++];switch(Oe){case 0:re.push(j.read_shift(8,"f"));break;case 1:De=T(ne[0].c,j.read_shift(2),!0),ge=T(ne[0].r,j.read_shift(2),!1),re.push(De+ge);break;case 2:{var Te=T(ne[0].c,j.read_shift(2),!0),ue=T(ne[0].r,j.read_shift(2),!1);De=T(ne[0].c,j.read_shift(2),!0),ge=T(ne[0].r,j.read_shift(2),!1),re.push(Te+ue+":"+De+ge)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:re.push("("+re.pop()+")");break;case 5:re.push(j.read_shift(2));break;case 6:{for(var C="";Oe=j[j.l++];)C+=String.fromCharCode(Oe);re.push('"'+C.replace(/"/g,'""')+'"')}break;case 8:re.push("-"+re.pop());break;case 23:re.push("+"+re.pop());break;case 22:re.push("NOT("+re.pop()+")");break;case 20:case 21:Ae=re.pop(),Ve=re.pop(),re.push(["AND","OR"][Oe-20]+"("+Ve+","+Ae+")");break;default:if(Oe<32&&k[Oe])Ae=re.pop(),Ve=re.pop(),re.push(Ve+k[Oe]+Ae);else if(R[Oe]){if(Q=R[Oe][1],Q==69&&(Q=j[j.l++]),Q>re.length){console.error("WK1 bad formula parse 0x"+Oe.toString(16)+":|"+re.join("|")+"|");return}var qe=re.slice(-Q);re.length-=Q,re.push(R[Oe][0]+"("+qe.join(",")+")")}else return Oe<=7?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=24?console.error("WK1 unsupported op "+Oe.toString(16)):Oe<=30?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=115?console.error("WK1 unsupported function opcode "+Oe.toString(16)):console.error("WK1 unrecognized opcode "+Oe.toString(16))}}re.length==1?ne[1].f=""+re[0]:console.error("WK1 bad formula parse |"+re.join("|")+"|")}function O(j){var ne=[{c:0,r:0},{t:"n",v:0},0];return ne[0].r=j.read_shift(2),ne[3]=j[j.l++],ne[0].c=j[j.l++],ne}function B(j,ne){var re=O(j);return re[1].t="s",re[1].v=j.read_shift(ne-4,"cstr"),re}function P(j,ne,re,Q){var ge=be(6+Q.length);ge.write_shift(2,j),ge.write_shift(1,re),ge.write_shift(1,ne),ge.write_shift(1,39);for(var De=0;De<Q.length;++De){var Ve=Q.charCodeAt(De);ge.write_shift(1,Ve>=128?95:Ve)}return ge.write_shift(1,0),ge}function b(j,ne){var re=O(j);re[1].v=j.read_shift(2);var Q=re[1].v>>1;if(re[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return re[1].v=Q,re}function M(j,ne){var re=O(j),Q=j.read_shift(4),ge=j.read_shift(4),De=j.read_shift(2);if(De==65535)return Q===0&&ge===3221225472?(re[1].t="e",re[1].v=15):Q===0&&ge===3489660928?(re[1].t="e",re[1].v=42):re[1].v=0,re;var Ve=De&32768;return De=(De&32767)-16446,re[1].v=(1-Ve*2)*(ge*Math.pow(2,De+32)+Q*Math.pow(2,De)),re}function F(j,ne,re,Q){var ge=be(14);if(ge.write_shift(2,j),ge.write_shift(1,re),ge.write_shift(1,ne),Q==0)return ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(2,65535),ge;var De=0,Ve=0,Ae=0,Oe=0;return Q<0&&(De=1,Q=-Q),Ve=Math.log2(Q)|0,Q/=Math.pow(2,Ve-31),Oe=Q>>>0,(Oe&2147483648)==0&&(Q/=2,++Ve,Oe=Q>>>0),Q-=Oe,Oe|=2147483648,Oe>>>=0,Q*=Math.pow(2,32),Ae=Q>>>0,ge.write_shift(4,Ae),ge.write_shift(4,Oe),Ve+=16383+(De?32768:0),ge.write_shift(2,Ve),ge}function V(j,ne){var re=M(j);return j.l+=ne-14,re}function W(j,ne){var re=O(j),Q=j.read_shift(4);return re[1].v=Q>>6,re}function D(j,ne){var re=O(j),Q=j.read_shift(8,"f");return re[1].v=Q,re}function Ie(j,ne){var re=D(j);return j.l+=ne-10,re}function Le(j,ne){return j[j.l+ne-1]==0?j.read_shift(ne,"cstr"):""}function Fe(j,ne){var re=j[j.l++];re>ne-1&&(re=ne-1);for(var Q="";Q.length<re;)Q+=String.fromCharCode(j[j.l++]);return Q}function Ce(j,ne,re){if(!(!re.qpro||ne<21)){var Q=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var ge=j.read_shift(ne-21,"cstr");return[Q,ge]}}function ce(j,ne){for(var re={},Q=j.l+ne;j.l<Q;){var ge=j.read_shift(2);if(ge==14e3){for(re[ge]=[0,""],re[ge][0]=j.read_shift(2);j[j.l];)re[ge][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return re}function Re(j,ne){var re=be(5+j.length);re.write_shift(2,14e3),re.write_shift(2,ne);for(var Q=0;Q<j.length;++Q){var ge=j.charCodeAt(Q);re[re.l++]=ge>127?95:ge}return re[re.l++]=0,re}var me={0:{n:"BOF",f:Q7},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:E},15:{n:"LABEL",f},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Le},222:{n:"SHEETNAMELP",f:Fe},65535:{n:""}},ee={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:B},23:{n:"NUMBER17",f:M},24:{n:"NUMBER18",f:b},25:{n:"FORMULA19",f:V},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:W},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:Ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Le},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ce},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),rpe=/^\s|\s$|[\t\n\r]/;function iV(n,e){if(!e.bookSST)return"";var t=[Rr];t[t.length]=tt("sst",null,{xmlns:j0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(rpe)&&(s+=' xml:space="preserve"'),s+=">"+bn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function ipe(n){return[n.read_shift(4),n.read_shift(4)]}function spe(n,e){return e||(e=be(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var ape=qge;function ope(n){var e=ms();Ge(e,159,spe(n));for(var t=0;t<n.length;++t)Ge(e,19,ape(n[t]));return Ge(e,160),e.end()}function lpe(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function sV(n){var e=0,t,r=lpe(n),i=r.length+1,s,a,o,l,u;for(t=Hh(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var cpe=(function(){function n(i,s){switch(s.type){case"base64":return e(Fl(i),s);case"binary":return e(i,s);case"buffer":return e(dn&&Buffer.isBuffer(i)?i.toString("binary"):E1(i),s);case"array":return e(OE(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,d){Array.isArray(o)&&(o[d]=[]);for(var g=/\\\w+\b/g,p=0,E,v=-1;E=g.exec(f);){switch(E[0]){case"\\cell":var w=f.slice(p,g.lastIndex-E[0].length);if(w[0]==" "&&(w=w.slice(1)),++v,w.length){var T={v:w,t:"s"};Array.isArray(o)?o[d][v]=T:o[kn({r:d,c:v})]=T}break}p=g.lastIndex}v>u.e.c&&(u.e.c=v)}),o["!ref"]=Ir(u),o}function t(i,s){return lf(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=zn(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var f=a.s.c;f<=a.e.c;++f)s.push("\\cellx"+(f+1));for(s.push("\\pard\\intbl"),f=a.s.c;f<=a.e.c;++f){var d=kn({r:u,c:f});o=l?(i[u]||[])[f]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(jl(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function lO(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var upe=6,Cl=upe;function mx(n){return Math.floor((n+Math.round(128/Cl)/256)*Cl)}function px(n){return Math.floor((n-5)/Cl*100+.5)/100}function PI(n){return Math.round((n*Cl+5)/Cl*256)/256}function HC(n){n.width?(n.wpx=mx(n.width),n.wch=px(n.wpx),n.MDW=Cl):n.wpx?(n.wch=px(n.wpx),n.width=PI(n.wch),n.MDW=Cl):typeof n.wch=="number"&&(n.width=PI(n.wch),n.wpx=mx(n.width),n.MDW=Cl),n.customWidth&&delete n.customWidth}var hpe=96,aV=hpe;function _x(n){return n*96/aV}function oV(n){return n*aV/96}function fpe(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=tt("numFmt",null,{numFmtId:r,formatCode:bn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=tt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function dpe(n){var e=[];return e[e.length]=tt("cellXfs",null),n.forEach(function(t){e[e.length]=tt("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=tt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function lV(n,e){var t=[Rr,tt("styleSheet",null,{xmlns:j0[0],"xmlns:vt":Yr.vt})],r;return n.SSF&&(r=fpe(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=dpe(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function gpe(n,e){var t=n.read_shift(2),r=Li(n);return[t,r]}function mpe(n,e,t){t||(t=be(6+4*e.length)),t.write_shift(2,n),Zr(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function ppe(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=rme(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=nme(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Li(n),r}function _pe(n,e){e||(e=be(153)),e.write_shift(2,n.sz*20),ime(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),dx(n.color,e);var r=0;return r=2,e.write_shift(1,r),Zr(n.name,e),e.length>e.l?e.slice(0,e.l):e}var ype=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],MS,vpe=zo;function cO(n,e){e||(e=be(84)),MS||(MS=LC(ype));var t=MS[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(dx({auto:1},e),dx({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function xpe(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function cV(n,e,t){t||(t=be(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Gg(n,e){return e||(e=be(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Epe=zo;function wpe(n,e){return e||(e=be(51)),e.write_shift(1,0),Gg(null,e),Gg(null,e),Gg(null,e),Gg(null,e),Gg(null,e),e.length>e.l?e.slice(0,e.l):e}function Spe(n,e){return e||(e=be(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),fx(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Tpe(n,e,t){var r=be(2052);return r.write_shift(4,n),fx(e,r),fx(t,r),r.length>r.l?r.slice(0,r.l):r}function Ipe(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Ge(n,615,Xa(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Ge(n,44,mpe(i,e[i]))}),Ge(n,616))}}function Ape(n){var e=1;Ge(n,611,Xa(e)),Ge(n,43,_pe({sz:12,color:{theme:1},name:"Calibri",family:2})),Ge(n,612)}function Rpe(n){var e=2;Ge(n,603,Xa(e)),Ge(n,45,cO({patternType:"none"})),Ge(n,45,cO({patternType:"gray125"})),Ge(n,604)}function Cpe(n){var e=1;Ge(n,613,Xa(e)),Ge(n,46,wpe()),Ge(n,614)}function bpe(n){var e=1;Ge(n,626,Xa(e)),Ge(n,47,cV({numFmtId:0},65535)),Ge(n,627)}function Ppe(n,e){Ge(n,617,Xa(e.length)),e.forEach(function(t){Ge(n,47,cV(t,0))}),Ge(n,618)}function kpe(n){var e=1;Ge(n,619,Xa(e)),Ge(n,48,Spe({xfId:0,name:"Normal"})),Ge(n,620)}function Mpe(n){var e=0;Ge(n,505,Xa(e)),Ge(n,506)}function Npe(n){var e=0;Ge(n,508,Tpe(e,"TableStyleMedium9","PivotStyleMedium4")),Ge(n,509)}function Lpe(n,e){var t=ms();return Ge(t,278),Ipe(t,n.SSF),Ape(t),Rpe(t),Cpe(t),bpe(t),Ppe(t,e.cellXfs),kpe(t),Mpe(t),Npe(t),Ge(t,279),t.end()}function uV(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[Rr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function Ope(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:Li(n)}}function Dpe(n){var e=be(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),Zr(n.name,e),e.slice(0,e.l)}function Fpe(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function jpe(n){var e=be(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function Vpe(n,e){var t=be(8+2*e.length);return t.write_shift(4,n),Zr(e,t),t.slice(0,t.l)}function Gpe(n){return n.l+=4,n.read_shift(4)!=0}function Bpe(n,e){var t=be(8);return t.write_shift(4,n),t.write_shift(4,1),t}function Upe(){var n=ms();return Ge(n,332),Ge(n,334,Xa(1)),Ge(n,335,Dpe({name:"XLDAPR",version:12e4,flags:3496657072})),Ge(n,336),Ge(n,339,Vpe(1,"XLDAPR")),Ge(n,52),Ge(n,35,Xa(514)),Ge(n,4096,Xa(0)),Ge(n,4097,ca(1)),Ge(n,36),Ge(n,53),Ge(n,340),Ge(n,337,Bpe(1)),Ge(n,51,jpe([[1,0]])),Ge(n,338),Ge(n,333),n.end()}function hV(){var n=[Rr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function zpe(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=kn(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var kd=1024;function fV(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[tt("xml",null,{"xmlns:v":Vs.v,"xmlns:o":Vs.o,"xmlns:x":Vs.x,"xmlns:mv":Vs.mv}).replace(/\/>/,">"),tt("o:shapelayout",tt("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),tt("v:shapetype",[tt("v:stroke",null,{joinstyle:"miter"}),tt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];kd<n*1e3;)kd+=1e3;return e.forEach(function(s){var a=qr(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?tt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=tt("v:fill",l,o),f={on:"t",obscured:"t"};++kd,i=i.concat(["<v:shape"+Rp({id:"_x0000_s"+kd,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,tt("v:shadow",null,f),tt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",gi("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),gi("x:AutoFill","False"),gi("x:Row",String(a.r)),gi("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function dV(n){var e=[Rr,tt("comments",null,{xmlns:j0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=bn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=t.indexOf(bn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(gi("t",bn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(gi("t",bn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function $pe(n,e,t){var r=[Rr,tt("ThreadedComments",null,{xmlns:Yr.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(tt("threadedComment",gi("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Wpe(n){var e=[Rr,tt("personList",null,{xmlns:Yr.TCMNT,"xmlns:x":j0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(tt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Hpe(n){var e={};e.iauthor=n.read_shift(4);var t=ff(n);return e.rfx=t.s,e.ref=kn(t.s),n.l+=16,e}function Kpe(n,e){return e==null&&(e=be(36)),e.write_shift(4,n[1].iauthor),G0(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Ype=Li;function Xpe(n){return Zr(n.slice(0,54))}function qpe(n){var e=ms(),t=[];return Ge(e,628),Ge(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Ge(e,632,Xpe(i.a)))})}),Ge(e,631),Ge(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:qr(r[0]),e:qr(r[0])};Ge(e,635,Kpe([s,i])),i.t&&i.t.length>0&&Ge(e,637,Qge(i)),Ge(e,636),delete i.iauthor})}),Ge(e,634),Ge(e,629),e.end()}function Zpe(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Mn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var gV=["xlsb","xlsm","xlam","biff8","xla"],Qpe=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,f=a.length>0?parseInt(a,10)|0:0;return o?f+=e.c:--f,l?u+=e.r:--u,i+(o?"":"$")+Ni(f)+(l?"":"$")+pi(u)}return function(i,s){return e=s,i.replace(n,t)}})(),KC=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,YC=(function(){return function(e,t){return e.replace(KC,function(r,i,s,a,o,l){var u=BC(a)-(s?0:t.c),f=GC(l)-(o?0:t.r),d=f==0?"":o?f+1:"["+f+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+g})}})();function Jpe(n,e){return n.replace(KC,function(t,r,i,s,a,o){return r+(i=="$"?i+s:Ni(BC(s)+e.c))+(a=="$"?a+o:pi(GC(o)+e.r))})}function e1e(n){return n.length!=1}function Er(n){n.l+=1}function gu(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function mV(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return pV(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=gu(n),o=gu(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function pV(n){var e=gu(n),t=gu(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function t1e(n,e,t){if(t.biff<8)return pV(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=gu(n),a=gu(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function _V(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return n1e(n);var r=n.read_shift(t&&t.biff==12?4:2),i=gu(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function n1e(n){var e=gu(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function r1e(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function i1e(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return s1e(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function s1e(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function a1e(n,e,t){var r=(n[n.l++]&96)>>5,i=mV(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function o1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=mV(n,s,t);return[r,i,a]}function l1e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function c1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function u1e(n,e,t){var r=(n[n.l++]&96)>>5,i=t1e(n,e-1,t);return[r,i]}function h1e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function uO(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function f1e(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function d1e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function g1e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function m1e(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function p1e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function yV(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function _1e(n){return n.read_shift(2),yV(n)}function y1e(n){return n.read_shift(2),yV(n)}function v1e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=_V(n,0,t);return[r,i]}function x1e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=i1e(n,0,t);return[r,i]}function E1e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=_V(n,0,t);return[r,i,s]}function w1e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[w_e[i],EV[i],r]}function S1e(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:T1e(n);return[i,(s[0]===0?EV:E_e)[s[1]]]}function T1e(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function I1e(n,e,t){n.l+=t&&t.biff==2?3:4}function A1e(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function R1e(n){return n.l++,T1[n.read_shift(1)]}function C1e(n){return n.l++,n.read_shift(2)}function b1e(n){return n.l++,n.read_shift(1)!==0}function P1e(n){return n.l++,B0(n)}function k1e(n,e,t){return n.l++,eV(n,e-1,t)}function M1e(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=Eme(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=T1[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=B0(n);break;case 2:t[1]=Ime(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function N1e(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?ff:Cme)(n));return i}function L1e(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=M1e(n,t.biff);return a}function O1e(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function D1e(n,e,t){if(t.biff==5)return F1e(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function F1e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function j1e(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function V1e(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function G1e(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function B1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var U1e=zo,z1e=zo,$1e=zo;function I1(n,e,t){return n.l+=2,[r1e(n)]}function XC(n){return n.l+=6,[]}var W1e=I1,H1e=XC,K1e=XC,Y1e=I1;function vV(n){return n.l+=2,[Q7(n),n.read_shift(2)&1]}var X1e=I1,q1e=vV,Z1e=XC,Q1e=I1,J1e=I1,e_e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function t_e(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=e_e[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function n_e(n){return n.l+=2,[n.read_shift(4)]}function r_e(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function i_e(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function s_e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function a_e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function o_e(n){return n.l+=4,[0,0]}var hO={1:{n:"PtgExp",f:A1e},2:{n:"PtgTbl",f:$1e},3:{n:"PtgAdd",f:Er},4:{n:"PtgSub",f:Er},5:{n:"PtgMul",f:Er},6:{n:"PtgDiv",f:Er},7:{n:"PtgPower",f:Er},8:{n:"PtgConcat",f:Er},9:{n:"PtgLt",f:Er},10:{n:"PtgLe",f:Er},11:{n:"PtgEq",f:Er},12:{n:"PtgGe",f:Er},13:{n:"PtgGt",f:Er},14:{n:"PtgNe",f:Er},15:{n:"PtgIsect",f:Er},16:{n:"PtgUnion",f:Er},17:{n:"PtgRange",f:Er},18:{n:"PtgUplus",f:Er},19:{n:"PtgUminus",f:Er},20:{n:"PtgPercent",f:Er},21:{n:"PtgParen",f:Er},22:{n:"PtgMissArg",f:Er},23:{n:"PtgStr",f:k1e},26:{n:"PtgSheet",f:r_e},27:{n:"PtgEndSheet",f:i_e},28:{n:"PtgErr",f:R1e},29:{n:"PtgBool",f:b1e},30:{n:"PtgInt",f:C1e},31:{n:"PtgNum",f:P1e},32:{n:"PtgArray",f:h1e},33:{n:"PtgFunc",f:w1e},34:{n:"PtgFuncVar",f:S1e},35:{n:"PtgName",f:O1e},36:{n:"PtgRef",f:v1e},37:{n:"PtgArea",f:a1e},38:{n:"PtgMemArea",f:j1e},39:{n:"PtgMemErr",f:U1e},40:{n:"PtgMemNoMem",f:z1e},41:{n:"PtgMemFunc",f:V1e},42:{n:"PtgRefErr",f:G1e},43:{n:"PtgAreaErr",f:l1e},44:{n:"PtgRefN",f:x1e},45:{n:"PtgAreaN",f:u1e},46:{n:"PtgMemAreaN",f:s_e},47:{n:"PtgMemNoMemN",f:a_e},57:{n:"PtgNameX",f:D1e},58:{n:"PtgRef3d",f:E1e},59:{n:"PtgArea3d",f:o1e},60:{n:"PtgRefErr3d",f:B1e},61:{n:"PtgAreaErr3d",f:c1e},255:{}},l_e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},c_e={1:{n:"PtgElfLel",f:vV},2:{n:"PtgElfRw",f:Q1e},3:{n:"PtgElfCol",f:W1e},6:{n:"PtgElfRwV",f:J1e},7:{n:"PtgElfColV",f:Y1e},10:{n:"PtgElfRadical",f:X1e},11:{n:"PtgElfRadicalS",f:Z1e},13:{n:"PtgElfColS",f:H1e},15:{n:"PtgElfColSV",f:K1e},16:{n:"PtgElfRadicalLel",f:q1e},25:{n:"PtgList",f:t_e},29:{n:"PtgSxName",f:n_e},255:{}},u_e={0:{n:"PtgAttrNoop",f:o_e},1:{n:"PtgAttrSemi",f:p1e},2:{n:"PtgAttrIf",f:g1e},4:{n:"PtgAttrChoose",f:f1e},8:{n:"PtgAttrGoto",f:d1e},16:{n:"PtgAttrSum",f:I1e},32:{n:"PtgAttrBaxcel",f:uO},33:{n:"PtgAttrBaxcel",f:uO},64:{n:"PtgAttrSpace",f:_1e},65:{n:"PtgAttrSpaceSemi",f:y1e},128:{n:"PtgAttrIfError",f:m1e},255:{}};function h_e(n,e,t,r){if(r.biff<8)return zo(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=L1e(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=N1e(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(zo(n,e)),s}function f_e(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=hO[s]||hO[l_e[s]],(s===24||s===25)&&(i=(s===24?c_e:u_e)[n[n.l+1]]),!i||!i.f?zo(n,e):a.push([i.n,i.f(n,e,t)]);return a}function d_e(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var g_e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function m_e(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function xV(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function fO(n,e,t){var r=xV(n,e,t);return r=="#REF"?r:m_e(r,t)}function E0(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,f,d=0,g=0,p,E="";if(!n[0]||!n[0][0])return"";for(var v=-1,w="",T=0,R=n[0].length;T<R;++T){var k=n[0][T];switch(k[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),v>=0){switch(n[0][v][1][0]){case 0:w=lr(" ",n[0][v][1][1]);break;case 1:w=lr("\r",n[0][v][1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][v][1][0])}u=u+w,v=-1}o.push(u+g_e[k[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Nm(k[1][1],a,i),o.push(Lm(f,s));break;case"PtgRefN":f=t?Nm(k[1][1],t,i):k[1][1],o.push(Lm(f,s));break;case"PtgRef3d":d=k[1][1],f=Nm(k[1][2],a,i),E=fO(r,d,i),o.push(E+"!"+Lm(f,s));break;case"PtgFunc":case"PtgFuncVar":var N=k[1][0],O=k[1][1];N||(N=0),N&=127;var B=N==0?[]:o.slice(-N);o.length-=N,O==="User"&&(O=B.shift()),o.push(O+"("+B.join(",")+")");break;case"PtgBool":o.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(k[1]);break;case"PtgNum":o.push(String(k[1]));break;case"PtgStr":o.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(k[1]);break;case"PtgAreaN":p=qL(k[1][1],t?{s:t}:a,i),o.push(PS(p,i));break;case"PtgArea":p=qL(k[1][1],a,i),o.push(PS(p,i));break;case"PtgArea3d":d=k[1][1],p=k[1][2],E=fO(r,d,i),o.push(E+"!"+PS(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=k[1][2];var P=(r.names||[])[g-1]||(r[0]||[])[g],b=P?P.Name:"SH33TJSNAME"+String(g);b&&b.slice(0,6)=="_xlfn."&&!i.xlfn&&(b=b.slice(6)),o.push(b);break;case"PtgNameX":var M=k[1][1];g=k[1][2];var F;if(i.biff<=5)M<0&&(M=-M),r[M]&&(F=r[M][g]);else{var V="";if(((r[M]||[])[0]||[])[0]==14849||(((r[M]||[])[0]||[])[0]==1025?r[M][g]&&r[M][g].itab>0&&(V=r.SheetNames[r[M][g].itab-1]+"!"):V=r.SheetNames[g-1]+"!"),r[M]&&r[M][g])V+=r[M][g].Name;else if(r[0]&&r[0][g])V+=r[0][g].Name;else{var W=(xV(r,M,i)||"").split(";;");W[g-1]?V=W[g-1]:V+="SH33TJSERRX"}o.push(V);break}F||(F={Name:"SH33TJSERRY"}),o.push(F.Name);break;case"PtgParen":var D="(",Ie=")";if(v>=0){switch(w="",n[0][v][1][0]){case 2:D=lr(" ",n[0][v][1][1])+D;break;case 3:D=lr("\r",n[0][v][1][1])+D;break;case 4:Ie=lr(" ",n[0][v][1][1])+Ie;break;case 5:Ie=lr("\r",n[0][v][1][1])+Ie;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][v][1][0])}v=-1}o.push(D+o.pop()+Ie);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:k[1][1],r:k[1][0]};var Le={c:t.c,r:t.r};if(r.sharedf[kn(f)]){var Fe=r.sharedf[kn(f)];o.push(E0(Fe,a,Le,r,i))}else{var Ce=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){o.push(E0(u[1],a,Le,r,i)),Ce=!0;break}Ce||o.push(k[1])}break;case"PtgArray":o.push("{"+d_e(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&v>=0&&ce.indexOf(n[0][T][0])==-1){k=n[0][v];var Re=!0;switch(k[1][0]){case 4:Re=!1;case 0:w=lr(" ",k[1][1]);break;case 5:Re=!1;case 1:w=lr("\r",k[1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}o.push((Re?w:"")+o.pop()+(Re?"":w)),v=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function p_e(n){if(n==null){var e=be(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Kh(n);return Kh(0)}function __e(n,e,t,r,i){var s=Yh(e,t,i),a=p_e(n.v),o=be(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=be(n.bf.length),f=0;f<n.bf.length;++f)u[f]=n.bf[f];var d=di([s,a,o,u]);return d}function DE(n,e,t){var r=n.read_shift(4),i=f_e(n,r,t),s=n.read_shift(4),a=s>0?h_e(n,s,i,t):null;return[i,a]}var y_e=DE,FE=DE,v_e=DE,x_e=DE,E_e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},EV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},w_e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function S_e(n){var e="of:="+n.replace(KC,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function T_e(n){return n.replace(/\./,"!")}var Om=typeof Map<"u";function qC(n,e,t){var r=0,i=n.length;if(t){if(Om?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Om?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(Om?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function jE(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Cl=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=px(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=PI(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function wV(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function wu(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){_7(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function I_e(n,e,t){if(n&&n["!ref"]){var r=zn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function A_e(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+Ir(n[t])+'"/>';return e+"</mergeCells>"}function R_e(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}s=!0,a.codeName=Ap(bn(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+tt("outlinePr",null,u)}!s&&!o||(i[i.length]=tt("sheetPr",o,a))}var C_e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],b_e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function P_e(n){var e={sheet:1};return C_e.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),b_e.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=sV(n.password).toString(16).toUpperCase()),tt("sheetProtection",null,e)}function k_e(n){return wV(n),tt("pageMargins",null,n)}function M_e(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=tt("col",null,jE(i,r)));return t[t.length]="</cols>",t.join("")}function N_e(n,e,t,r){var i=typeof n.ref=="string"?n.ref:Ir(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=Ys(i);a.s.r==a.e.r&&(a.e.r=Ys(e["!ref"]).e.r,i=Ir(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),tt("autoFilter",null,{ref:i})}function L_e(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),tt("sheetViews",tt("sheetView",null,i),{})}function O_e(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=T1[n.v];break;case"d":r&&r.cellDates?i=Xi(n.v,-1).toISOString():(n=ys(n),n.t="n",i=""+(n.v=_s(Xi(n.v)))),typeof n.z>"u"&&(n.z=ur[14]);break;default:i=n.v;break}var o=gi("v",bn(i)),l={r:e},u=wu(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=gi("v",""+qC(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var f=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=tt("f",bn(n.f),f)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(l.cm=1),tt("c",o,l)}function D_e(n,e,t,r){var i=[],s=[],a=zn(n["!ref"]),o="",l,u="",f=[],d=0,g=0,p=n["!rows"],E=Array.isArray(n),v={r:u},w,T=-1;for(g=a.s.c;g<=a.e.c;++g)f[g]=Ni(g);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=pi(d),g=a.s.c;g<=a.e.c;++g){l=f[g]+u;var R=E?(n[d]||[])[g]:n[l];R!==void 0&&(o=O_e(R,l,n,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(v={r:u},p&&p[d]&&(w=p[d],w.hidden&&(v.hidden=1),T=-1,w.hpx?T=_x(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(v.ht=T,v.customHeight=1),w.level&&(v.outlineLevel=w.level)),i[i.length]=tt("row",s.join(""),v))}if(p)for(;d<p.length;++d)p&&p[d]&&(v={r:d+1},w=p[d],w.hidden&&(v.hidden=1),T=-1,w.hpx?T=_x(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(v.ht=T,v.customHeight=1),w.level&&(v.outlineLevel=w.level),i[i.length]=tt("row","",v));return i.join("")}function SV(n,e,t,r){var i=[Rr,tt("worksheet",null,{xmlns:j0[0],"xmlns:r":Yr.r})],s=t.SheetNames[n],a=0,o="",l=t.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",f=zn(u);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=Ir(f)}r||(r={}),l["!comments"]=[];var d=[];R_e(l,t,n,e,i),i[i.length]=tt("dimension",null,{ref:u}),i[i.length]=L_e(l,e,n,t),e.sheetFormat&&(i[i.length]=tt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=M_e(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=D_e(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=P_e(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=N_e(l["!autofilter"],l,t,n)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=A_e(l["!merges"]));var g=-1,p,E=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(E=An(r,-1,bn(v[1].Target).replace(/#.*$/,""),ln.HLINK),p["r:id"]="rId"+E),(g=v[1].Target.indexOf("#"))>-1&&(p.location=bn(v[1].Target.slice(g+1))),v[1].Tooltip&&(p.tooltip=bn(v[1].Tooltip)),i[i.length]=tt("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=k_e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=gi("ignoredErrors",tt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(E=An(r,-1,"../drawings/drawing"+(n+1)+".xml",ln.DRAW),i[i.length]=tt("drawing",null,{"r:id":"rId"+E}),l["!drawing"]=d),l["!comments"].length>0&&(E=An(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",ln.VML),i[i.length]=tt("legacyDrawing",null,{"r:id":"rId"+E}),l["!legacy"]=E),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function F_e(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function j_e(n,e,t){var r=be(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=_x(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:n,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var d=-1,g=-1,p=f<<10;p<f+1<<10;++p){u.c=p;var E=Array.isArray(t)?(t[u.r]||[])[u.c]:t[kn(u)];E&&(d<0&&(d=p),g=p)}d<0||(++o,r.write_shift(4,d),r.write_shift(4,g))}var v=r.l;return r.l=l,r.write_shift(4,o),r.l=v,r.length>r.l?r.slice(0,r.l):r}function V_e(n,e,t,r){var i=j_e(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Ge(n,0,i)}var G_e=ff,B_e=G0;function U_e(){}function z_e(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=Jge(n),t}function $_e(n,e,t){t==null&&(t=be(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return dx({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),j7(n,t),t.slice(0,t.l)}function W_e(n){var e=xa(n);return[e]}function H_e(n,e,t){return t==null&&(t=be(8)),cf(e,t)}function K_e(n){var e=uf(n);return[e]}function Y_e(n,e,t){return t==null&&(t=be(4)),hf(e,t)}function X_e(n){var e=xa(n),t=n.read_shift(1);return[e,t,"b"]}function q_e(n,e,t){return t==null&&(t=be(9)),cf(e,t),t.write_shift(1,n.v?1:0),t}function Z_e(n){var e=uf(n),t=n.read_shift(1);return[e,t,"b"]}function Q_e(n,e,t){return t==null&&(t=be(5)),hf(e,t),t.write_shift(1,n.v?1:0),t}function J_e(n){var e=xa(n),t=n.read_shift(1);return[e,t,"e"]}function eye(n,e,t){return t==null&&(t=be(9)),cf(e,t),t.write_shift(1,n.v),t}function tye(n){var e=uf(n),t=n.read_shift(1);return[e,t,"e"]}function nye(n,e,t){return t==null&&(t=be(8)),hf(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function rye(n){var e=xa(n),t=n.read_shift(4);return[e,t,"s"]}function iye(n,e,t){return t==null&&(t=be(12)),cf(e,t),t.write_shift(4,e.v),t}function sye(n){var e=uf(n),t=n.read_shift(4);return[e,t,"s"]}function aye(n,e,t){return t==null&&(t=be(8)),hf(e,t),t.write_shift(4,e.v),t}function oye(n){var e=xa(n),t=B0(n);return[e,t,"n"]}function lye(n,e,t){return t==null&&(t=be(16)),cf(e,t),Kh(n.v,t),t}function cye(n){var e=uf(n),t=B0(n);return[e,t,"n"]}function uye(n,e,t){return t==null&&(t=be(12)),hf(e,t),Kh(n.v,t),t}function hye(n){var e=xa(n),t=V7(n);return[e,t,"n"]}function fye(n,e,t){return t==null&&(t=be(12)),cf(e,t),G7(n.v,t),t}function dye(n){var e=uf(n),t=V7(n);return[e,t,"n"]}function gye(n,e,t){return t==null&&(t=be(8)),hf(e,t),G7(n.v,t),t}function mye(n){var e=xa(n),t=UC(n);return[e,t,"is"]}function pye(n){var e=xa(n),t=Li(n);return[e,t,"str"]}function _ye(n,e,t){return t==null&&(t=be(12+4*n.v.length)),cf(e,t),Zr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function yye(n){var e=uf(n),t=Li(n);return[e,t,"str"]}function vye(n,e,t){return t==null&&(t=be(8+4*n.v.length)),hf(e,t),Zr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function xye(n,e,t){var r=n.l+e,i=xa(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=FE(n,r-n.l,t);a[3]=E0(o,null,i,t.supbooks,t)}else n.l=r;return a}function Eye(n,e,t){var r=n.l+e,i=xa(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=FE(n,r-n.l,t);a[3]=E0(o,null,i,t.supbooks,t)}else n.l=r;return a}function wye(n,e,t){var r=n.l+e,i=xa(n);i.r=t["!row"];var s=B0(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=FE(n,r-n.l,t);a[3]=E0(o,null,i,t.supbooks,t)}else n.l=r;return a}function Sye(n,e,t){var r=n.l+e,i=xa(n);i.r=t["!row"];var s=Li(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=FE(n,r-n.l,t);a[3]=E0(o,null,i,t.supbooks,t)}else n.l=r;return a}var Tye=ff,Iye=G0;function Aye(n,e){return e==null&&(e=be(4)),e.write_shift(4,n),e}function Rye(n,e){var t=n.l+e,r=ff(n),i=zC(n),s=Li(n),a=Li(n),o=Li(n);n.l=t;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function Cye(n,e){var t=be(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));G0({s:qr(n[0]),e:qr(n[0])},t),$C("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return Zr(i||"",t),Zr(n[1].Tooltip||"",t),Zr("",t),t.slice(0,t.l)}function bye(){}function Pye(n,e,t){var r=n.l+e,i=B7(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=y_e(n,r-n.l,t);a[1]=o}else n.l=r;return a}function kye(n,e,t){var r=n.l+e,i=ff(n),s=[i];if(t.cellFormula){var a=x_e(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function Mye(n,e,t){t==null&&(t=be(18));var r=jE(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var TV=["left","right","top","bottom","header","footer"];function Nye(n){var e={};return TV.forEach(function(t){e[t]=B0(n)}),e}function Lye(n,e){return e==null&&(e=be(48)),wV(n),TV.forEach(function(t){Kh(n[t],e)}),e}function Oye(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function Dye(n,e,t){t==null&&(t=be(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function Fye(n){var e=be(24);return e.write_shift(4,4),e.write_shift(4,1),G0(n,e),e}function jye(n,e){return e==null&&(e=be(66)),e.write_shift(2,n.password?sV(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function Vye(){}function Gye(){}function Bye(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ys(e),e.z=e.z||ur[14],e.v=_s(Xi(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:t,c:r};switch(l.s=wu(i.cellXfs,e,i),e.l&&s["!links"].push([kn(l),e.l]),e.c&&s["!comments"].push([kn(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=qC(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?Ge(n,18,aye(e,l)):Ge(n,7,iye(e,l))):(l.t="str",a?Ge(n,17,vye(e,l)):Ge(n,6,_ye(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Ge(n,13,gye(e,l)):Ge(n,2,fye(e,l)):a?Ge(n,16,uye(e,l)):Ge(n,5,lye(e,l)),!0;case"b":return l.t="b",a?Ge(n,15,Q_e(e,l)):Ge(n,4,q_e(e,l)),!0;case"e":return l.t="e",a?Ge(n,14,nye(e,l)):Ge(n,3,eye(e,l)),!0}return a?Ge(n,12,Y_e(e,l)):Ge(n,1,H_e(e,l)),!0}function Uye(n,e,t,r){var i=zn(e["!ref"]||"A1"),s,a="",o=[];Ge(n,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var f=i.s.r;f<=u;++f){a=pi(f),V_e(n,e,i,f);var d=!1;if(f<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){f===i.s.r&&(o[g]=Ni(g)),s=o[g]+a;var p=l?(e[f]||[])[g]:e[s];if(!p){d=!1;continue}d=Bye(n,p,f,g,r,e,d)}}Ge(n,146)}function zye(n,e){!e||!e["!merges"]||(Ge(n,177,Aye(e["!merges"].length)),e["!merges"].forEach(function(t){Ge(n,176,Iye(t))}),Ge(n,178))}function $ye(n,e){!e||!e["!cols"]||(Ge(n,390),e["!cols"].forEach(function(t,r){t&&Ge(n,60,Mye(r,t))}),Ge(n,391))}function Wye(n,e){!e||!e["!ref"]||(Ge(n,648),Ge(n,649,Fye(zn(e["!ref"]))),Ge(n,650))}function Hye(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=An(t,-1,r[1].Target.replace(/#.*$/,""),ln.HLINK);Ge(n,494,Cye(r,i))}}),delete e["!links"]}function Kye(n,e,t,r){if(e["!comments"].length>0){var i=An(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",ln.VML);Ge(n,551,$C("rId"+i)),e["!legacy"]=i}}function Yye(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Ir(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=Ys(s);o.s.r==o.e.r&&(o.e.r=Ys(e["!ref"]).e.r,s=Ir(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Ge(n,161,G0(zn(s))),Ge(n,162)}}function Xye(n,e,t){Ge(n,133),Ge(n,137,Dye(e,t)),Ge(n,138),Ge(n,134)}function qye(n,e){e["!protect"]&&Ge(n,535,jye(e["!protect"]))}function Zye(n,e,t,r){var i=ms(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var l=zn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Ge(i,129),(t.vbaraw||a["!outline"])&&Ge(i,147,$_e(o,a["!outline"])),Ge(i,148,B_e(l)),Xye(i,a,t.Workbook),$ye(i,a),Uye(i,a,n,e),qye(i,a),Yye(i,a,t,n),zye(i,a),Hye(i,a,r),a["!margins"]&&Ge(i,476,Lye(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Wye(i,a),Kye(i,a,n,r),Ge(i,130),i.end()}function Qye(n,e){n.l+=10;var t=Li(n);return{name:t}}var Jye=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function eve(n){return!n.Workbook||!n.Workbook.WBProps?"false":kge(n.Workbook.WBProps.date1904)?"true":"false"}var tve="][*?/\\".split("");function IV(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return tve.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function nve(n,e,t){n.forEach(function(r,i){IV(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function rve(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];nve(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)I_e(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function AV(n){var e=[Rr];e[e.length]=tt("workbook",null,{xmlns:j0[0],"xmlns:r":Yr.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(Jye.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=tt("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:bn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=tt("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=tt("definedName",bn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function ive(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=bI(n),t.name=Li(n),t}function sve(n,e){return e||(e=be(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),$C(n.strRelID,e),Zr(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function ave(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?Li(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function ove(n,e){e||(e=be(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),j7(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function lve(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=eme(n),a=v_e(n,0,t),o=zC(n);n.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function cve(n,e){Ge(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Ge(n,156,sve(i))}Ge(n,144)}function uve(n,e){e||(e=be(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Zr("SheetJS",e),Zr(sx.version,e),Zr(sx.version,e),Zr("7262",e),e.length>e.l?e.slice(0,e.l):e}function hve(n,e){e||(e=be(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function fve(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Ge(n,135),Ge(n,158,hve(i)),Ge(n,136))}}function dve(n,e){var t=ms();return Ge(t,131),Ge(t,128,uve()),Ge(t,153,ove(n.Workbook&&n.Workbook.WBProps||null)),fve(t,n),cve(t,n),Ge(t,132),t.end()}function gve(n,e,t){return(e.slice(-4)===".bin"?dve:AV)(n)}function mve(n,e,t,r,i){return(e.slice(-4)===".bin"?Zye:SV)(n,t,r,i)}function pve(n,e,t){return(e.slice(-4)===".bin"?Lpe:lV)(n,t)}function _ve(n,e,t){return(e.slice(-4)===".bin"?ope:iV)(n,t)}function yve(n,e,t){return(e.slice(-4)===".bin"?qpe:dV)(n)}function vve(n){return(n.slice(-4)===".bin"?Upe:hV)()}function xve(n,e){var t=[];return n.Props&&t.push(pme(n.Props,e)),n.Custprops&&t.push(_me(n.Props,n.Custprops)),t.join("")}function Eve(){return""}function wve(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(tt("NumberFormat",null,{"ss:Format":bn(ur[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(tt("Style",s.join(""),a))}),tt("Styles",t.join(""))}function RV(n){return tt("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+YC(n.Ref,{r:0,c:0})})}function Sve(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(RV(i)))}return tt("Names",t.join(""))}function Tve(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(RV(o)))}return s.join("")}function Ive(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(tt("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(tt("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(tt("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(tt("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(gi("ProtectContents","True")),n["!protect"].objects&&i.push(gi("ProtectObjects","True")),n["!protect"].scenarios&&i.push(gi("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(gi("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(gi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":tt("WorksheetOptions",i.join(""),{xmlns:Vs.x})}function Ave(n){return n.map(function(e){var t=Pge(e.t||""),r=tt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return tt("Comment",r,{"ss:Author":e.a})}).join("")}function Rve(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+bn(YC(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var l=qr(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=bn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=bn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],f=0;f!=u.length;++f)u[f].s.c!=a.c||u[f].s.r!=a.r||(u[f].e.c>u[f].s.c&&(o["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(o["ss:MergeDown"]=u[f].e.r-u[f].s.r));var d="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",g=String(n.v);break;case"b":d="Boolean",g=n.v?"1":"0";break;case"e":d="Error",g=T1[n.v];break;case"d":d="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||ur[14]);break;case"s":d="String",g=bge(n.v||"");break}var p=wu(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var E=n.v!=null?g:"",v=n.t=="z"?"":'<Data ss:Type="'+d+'">'+E+"</Data>";return(n.c||[]).length>0&&(v+=Ave(n.c)),tt("Cell",v,o)}function Cve(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=oV(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function bve(n,e,t,r){if(!n["!ref"])return"";var i=zn(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(w,T){HC(w);var R=!!w.width,k=jE(T,w),N={"ss:Index":T+1};R&&(N["ss:Width"]=mx(k.width)),w.hidden&&(N["ss:Hidden"]="1"),o.push(tt("Column",null,N))});for(var l=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var f=[Cve(u,(n["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:d},E=kn(p),v=l?(n[u]||[])[d]:n[E];f.push(Rve(v,E,n,e,t,r,p))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function Pve(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?Tve(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?bve(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(Ive(s,e,n,t)),r.join("")}function kve(n,e){e||(e={}),n.SSF||(n.SSF=ys(ur)),n.SSF&&(NE(),ME(n.SSF),e.revssf=LE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],wu(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(xve(n,e)),t.push(Eve()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(tt("Worksheet",Pve(r,e,n),{"ss:Name":bn(n.SheetNames[r])}));return t[2]=wve(n,e),t[3]=Sve(n),Rr+tt("Workbook",t.join(""),{xmlns:Vs.ss,"xmlns:o":Vs.o,"xmlns:x":Vs.x,"xmlns:ss":Vs.ss,"xmlns:dt":Vs.dt,"xmlns:html":Vs.html})}var NS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Mve(n,e){var t=[],r=[],i=[],s=0,a,o=VL(QL,"n"),l=VL(JL,"n");if(n.Props)for(a=yi(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=yi(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)Z7.indexOf(i[s][0])>-1||Y7.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&Mn.utils.cfb_add(e,"/SummaryInformation",iO(r,NS.SI,l,JL)),(t.length||u.length)&&Mn.utils.cfb_add(e,"/DocumentSummaryInformation",iO(t,NS.DSI,o,QL,u.length?u:null,NS.UDI))}function Nve(n,e){var t=e||{},r=Mn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Mn.utils.cfb_add(r,i,CV(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Mve(n,r),t.biff==8&&n.vbaraw&&Zpe(r,Mn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Lve={0:{f:F_e},1:{f:W_e},2:{f:hye},3:{f:J_e},4:{f:X_e},5:{f:oye},6:{f:pye},7:{f:rye},8:{f:Sye},9:{f:wye},10:{f:xye},11:{f:Eye},12:{f:K_e},13:{f:dye},14:{f:tye},15:{f:Z_e},16:{f:cye},17:{f:yye},18:{f:sye},19:{f:UC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:lve},40:{},42:{},43:{f:ppe},44:{f:gpe},45:{f:vpe},46:{f:Epe},47:{f:xpe},48:{},49:{f:Kge},50:{},51:{f:Fpe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Yme},62:{f:mye},63:{f:zpe},64:{f:Vye},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:zo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Oye},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:z_e},148:{f:G_e,p:16},151:{f:bye},152:{},153:{f:ave},154:{},155:{},156:{f:ive},157:{},158:{},159:{T:1,f:ipe},160:{T:-1},161:{T:1,f:ff},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Tye},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Ope},336:{T:-1},337:{f:Gpe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:bI},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Ume},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Pye},427:{f:kye},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Nye},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:U_e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Rye},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:bI},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Ype},633:{T:1},634:{T:-1},635:{T:1,f:Hpe},636:{T:-1},637:{f:Zge},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Qye},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Gye},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function nt(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&VC(t)&&n.push(t)}}function Ove(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return nt(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var f=n.next(4);for(f.write_shift(2,s),f.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u;l<i;){for(f=n.next(4),f.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;f.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u}}}function A1(n,e,t){return n||(n=be(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function Dve(n,e,t,r){var i=be(9);return A1(i,n,e),J7(t,r||"b",i),i}function Fve(n,e,t){var r=be(8+2*t.length);return A1(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function jve(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?_s(Xi(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?nt(n,2,Qme(t,r,i)):nt(n,3,Zme(t,r,i));return;case"b":case"e":nt(n,5,Dve(t,r,e.v,e.t));return;case"s":case"str":nt(n,4,Fve(t,r,(e.v||"").slice(0,255)));return}nt(n,1,A1(null,t,r))}function Vve(n,e,t,r){var i=Array.isArray(e),s=zn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Ir(s)}for(var u=s.s.r;u<=s.e.r;++u){o=pi(u);for(var f=s.s.c;f<=s.e.c;++f){u===s.s.r&&(l[f]=Ni(f)),a=l[f]+o;var d=i?(e[u]||[])[f]:e[a];d&&jve(n,d,u,f)}}}function Gve(n,e){for(var t=e||{},r=ms(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return nt(r,t.biff==4?1033:t.biff==3?521:9,WC(n,16,t)),Vve(r,n.Sheets[n.SheetNames[i]],i,t),nt(r,10),r.end()}function Bve(n,e,t){nt(n,49,Lme({sz:12,name:"Arial"},t))}function Uve(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&nt(n,1054,Fme(i,e[i],t))})}function zve(n,e){var t=be(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),nt(n,2151,t),t=be(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),nV(zn(e["!ref"]||"A1"),t),t.write_shift(4,4),nt(n,2152,t)}function $ve(n,e){for(var t=0;t<16;++t)nt(n,224,aO({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){nt(n,224,aO(r,0,e))})}function Wve(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];nt(n,440,Wme(r)),r[1].Tooltip&&nt(n,2048,Hme(r))}delete e["!links"]}function Hve(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&nt(n,125,Xme(jE(i,r),i))})}}function Kve(n,e,t,r,i){var s=16+wu(i.cellXfs,e,i);if(e.v==null&&!e.bf){nt(n,513,Yh(t,r,s));return}if(e.bf)nt(n,6,__e(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?_s(Xi(e.v)):e.v;nt(n,515,Bme(t,r,a,s));break;case"b":case"e":nt(n,517,Gme(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=qC(i.Strings,e.v,i.revStrings);nt(n,253,Ome(t,r,o,s))}else nt(n,516,Dme(t,r,(e.v||"").slice(0,255),s,i));break;default:nt(n,513,Yh(t,r,s))}}function Yve(n,e,t){var r=ms(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},l=Array.isArray(s),u=e.biff==8,f,d="",g=[],p=zn(s["!ref"]||"A1"),E=u?65536:16384;if(p.e.c>255||p.e.r>=E){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,E-1)}nt(r,2057,WC(t,16,e)),nt(r,13,ca(1)),nt(r,12,ca(100)),nt(r,15,Gi(!0)),nt(r,17,Gi(!1)),nt(r,16,Kh(.001)),nt(r,95,Gi(!0)),nt(r,42,Gi(!1)),nt(r,43,Gi(!1)),nt(r,130,ca(1)),nt(r,128,Vme()),nt(r,131,Gi(!1)),nt(r,132,Gi(!1)),u&&Hve(r,s["!cols"]),nt(r,512,jme(p,e)),u&&(s["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){d=pi(v);for(var w=p.s.c;w<=p.e.c;++w){v===p.s.r&&(g[w]=Ni(w)),f=g[w]+d;var T=l?(s[v]||[])[w]:s[f];T&&(Kve(r,T,v,w,e),u&&T.l&&s["!links"].push([f,T.l]))}}var R=o.CodeName||o.name||i;return u&&nt(r,574,Nme((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&nt(r,229,$me(s["!merges"])),u&&Wve(r,s),nt(r,442,tV(R)),u&&zve(r,s),nt(r,10),r.end()}function Xve(n,e,t){var r=ms(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,l=t.biff==5;if(nt(r,2057,WC(n,5,t)),t.bookType=="xla"&&nt(r,135),nt(r,225,o?ca(1200):null),nt(r,193,xme(2)),l&&nt(r,191),l&&nt(r,192),nt(r,226),nt(r,92,bme("SheetJS",t)),nt(r,66,ca(o?1200:1252)),o&&nt(r,353,ca(0)),o&&nt(r,448),nt(r,317,qme(n.SheetNames.length)),o&&n.vbaraw&&nt(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";nt(r,442,tV(u))}nt(r,156,ca(17)),nt(r,25,Gi(!1)),nt(r,18,Gi(!1)),nt(r,19,ca(0)),o&&nt(r,431,Gi(!1)),o&&nt(r,444,ca(0)),nt(r,61,Mme()),nt(r,64,Gi(!1)),nt(r,141,ca(0)),nt(r,34,Gi(eve(n)=="true")),nt(r,14,Gi(!0)),o&&nt(r,439,Gi(!1)),nt(r,218,ca(0)),Bve(r,n,t),Uve(r,n.SSF,t),$ve(r,t),o&&nt(r,352,Gi(!1));var f=r.end(),d=ms();o&&nt(d,140,Kme()),o&&t.Strings&&Ove(d,252,kme(t.Strings)),nt(d,10);var g=d.end(),p=ms(),E=0,v=0;for(v=0;v<n.SheetNames.length;++v)E+=(o?12:11)+(o?2:1)*n.SheetNames[v].length;var w=f.length+E+g.length;for(v=0;v<n.SheetNames.length;++v){var T=s[v]||{};nt(p,133,Pme({pos:w,hs:T.Hidden||0,dt:0,name:n.SheetNames[v]},t)),w+=e[v].length}var R=p.end();if(E!=R.length)throw new Error("BS8 "+E+" != "+R.length);var k=[];return f.length&&k.push(f),R.length&&k.push(R),g.length&&k.push(g),di(k)}function qve(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=ys(ur)),n&&n.SSF&&(NE(),ME(n.SSF),t.revssf=LE(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ZC(t),t.cellXfs=[],wu(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=Yve(i,t,n);return r.unshift(Xve(n,r,t)),di(r)}function CV(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=Ys(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return qve(n,e);case 4:case 3:case 2:return Gve(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Zve(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var f=kn({r:t,c:a}),d=r.dense?(n[t]||[])[a]:n[f],g=d&&d.v!=null&&(d.h||Cge(d.w||(jl(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?g='<span contenteditable="true">'+g+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),p.id=(r.id||"sjs")+"-"+f,s.push(tt("td",g,p))}}var E="<tr>";return E+s.join("")+"</tr>"}var Qve='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Jve="</body></html>";function exe(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function bV(n,e){var t=e||{},r=t.header!=null?t.header:Qve,i=t.footer!=null?t.footer:Jve,s=[r],a=Ys(n["!ref"]);t.dense=Array.isArray(n),s.push(exe(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(Zve(n,a,o,t));return s.push("</table>"+i),s.join("")}function PV(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?qr(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var f=Ys(n["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),i==-1&&(u.e.r=i=f.e.r+1)}var d=[],g=0,p=n["!rows"]||(n["!rows"]=[]),E=0,v=0,w=0,T=0,R=0,k=0;for(n["!cols"]||(n["!cols"]=[]);E<o.length&&v<l;++E){var N=o[E];if(dO(N)){if(r.display)continue;p[v]={hidden:!0}}var O=N.children;for(w=T=0;w<O.length;++w){var B=O[w];if(!(r.display&&dO(B))){var P=B.hasAttribute("data-v")?B.getAttribute("data-v"):B.hasAttribute("v")?B.getAttribute("v"):Mge(B.innerHTML),b=B.getAttribute("data-z")||B.getAttribute("z");for(g=0;g<d.length;++g){var M=d[g];M.s.c==T+s&&M.s.r<v+i&&v+i<=M.e.r&&(T=M.e.c+1-s,g=-1)}k=+B.getAttribute("colspan")||1,((R=+B.getAttribute("rowspan")||1)>1||k>1)&&d.push({s:{r:v+i,c:T+s},e:{r:v+i+(R||1)-1,c:T+s+(k||1)-1}});var F={t:"s",v:P},V=B.getAttribute("data-t")||B.getAttribute("t")||"";P!=null&&(P.length==0?F.t=V||"z":r.raw||P.trim().length==0||V=="s"||(P==="TRUE"?F={t:"b",v:!0}:P==="FALSE"?F={t:"b",v:!1}:isNaN(Rl(P))?isNaN(Ip(P).getDate())||(F={t:"d",v:Xi(P)},r.cellDates||(F={t:"n",v:_s(F.v)}),F.z=r.dateNF||ur[14]):F={t:"n",v:Rl(P)})),F.z===void 0&&b!=null&&(F.z=b);var W="",D=B.getElementsByTagName("A");if(D&&D.length)for(var Ie=0;Ie<D.length&&!(D[Ie].hasAttribute("href")&&(W=D[Ie].getAttribute("href"),W.charAt(0)!="#"));++Ie);W&&W.charAt(0)!="#"&&(F.l={Target:W}),r.dense?(n[v+i]||(n[v+i]=[]),n[v+i][T+s]=F):n[kn({c:T+s,r:v+i})]=F,u.e.c<T+s&&(u.e.c=T+s),T+=k}}++v}return d.length&&(n["!merges"]=(n["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,v-1+i),n["!ref"]=Ir(u),v>=l&&(n["!fullref"]=Ir((u.e.r=o.length-E+v-1+i,u))),n}function kV(n,e){var t=e||{},r=t.dense?[]:{};return PV(r,n,e)}function txe(n,e){return lf(kV(n,e),e)}function dO(n){var e="",t=nxe(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function nxe(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var rxe=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Rp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Rr+e}})(),gO=(function(){var n=function(s){return bn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var l=[];l.push('      <table:table table:name="'+bn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,f=0,d=Ys(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,E=Array.isArray(s);if(s["!cols"])for(f=0;f<=d.e.c;++f)l.push("        <table:table-column"+(s["!cols"][f]?' table:style-name="co'+s["!cols"][f].ods+'"':"")+`></table:table-column>
`);var v="",w=s["!rows"]||[];for(u=0;u<d.s.r;++u)v=w[u]?' table:style-name="ro'+w[u].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=d.e.r;++u){for(v=w[u]?' table:style-name="ro'+w[u].ods+'"':"",l.push("        <table:table-row"+v+`>
`),f=0;f<d.s.c;++f)l.push(e);for(;f<=d.e.c;++f){var T=!1,R={},k="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>f)&&!(g[p].s.r>u)&&!(g[p].e.c<f)&&!(g[p].e.r<u)){(g[p].s.c!=f||g[p].s.r!=u)&&(T=!0),R["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,R["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(T){l.push(t);continue}var N=kn({r:u,c:f}),O=E?(s[u]||[])[f]:s[N];if(O&&O.f&&(R["table:formula"]=bn(S_e(O.f)),O.F&&O.F.slice(0,N.length)==N)){var B=Ys(O.F);R["table:number-matrix-columns-spanned"]=B.e.c-B.s.c+1,R["table:number-matrix-rows-spanned"]=B.e.r-B.s.r+1}if(!O){l.push(e);continue}switch(O.t){case"b":k=O.v?"TRUE":"FALSE",R["office:value-type"]="boolean",R["office:boolean-value"]=O.v?"true":"false";break;case"n":k=O.w||String(O.v||0),R["office:value-type"]="float",R["office:value"]=O.v||0;break;case"s":case"str":k=O.v==null?"":O.v,R["office:value-type"]="string";break;case"d":k=O.w||Xi(O.v).toISOString(),R["office:value-type"]="date",R["office:date-value"]=Xi(O.v).toISOString(),R["table:style-name"]="ce1";break;default:l.push(e);continue}var P=n(k);if(O.l&&O.l.Target){var b=O.l.Target;b=b.charAt(0)=="#"?"#"+T_e(b.slice(1)):b,b.charAt(0)!="#"&&!b.match(/^\w+:/)&&(b="../"+b),P=tt("text:a",P,{"xlink:href":b.replace(/&/g,"&amp;")})}l.push("          "+tt("table:table-cell",tt("text:p",P,{}),R)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var d=u["!cols"][f];if(d.width==null&&d.wpx==null&&d.wch==null)continue;HC(d),d.ods=o;var g=u["!cols"][f].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=l;var d=u["!rows"][f].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Rr],u=Rp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=Rp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+f+`>
`),l.push(H7().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(r(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function MV(n,e){if(e.bookType=="fods")return gO(n,e);var t=OC(),r="",i=[],s=[];return r="mimetype",zt(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",zt(t,r,gO(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",zt(t,r,rxe(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",zt(t,r,Rr+H7()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",zt(t,r,mme(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",zt(t,r,dme(i)),t}function yx(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ixe(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Ua(Ap(n))}function sxe(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function mu(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function axe(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Cp(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function In(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function Yd(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function Nr(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Cp(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Cp(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function oi(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(In(r*8+i.type)),i.type==2&&e.push(In(i.data.length)),e.push(i.data))})}),mu(e)}function La(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Cp(n,r),s=Nr(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:Yd(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Nr(o.data),u=Yd(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Yd(s[3][0].data)>>>0>0),t.push(a)}return t}function id(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:In(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:In(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:In(a.data.length)}],r[2].push({data:oi(a.meta),type:2})});var s=oi(r);e.push(In(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),mu(e)}function oxe(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Cp(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[mu(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var f=mu(i);if(f.length!=r)throw new Error("Unexpected length: ".concat(f.length," != ").concat(r));return f}function Oa(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(oxe(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return mu(e)}function sd(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=In(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return mu(e)}function LS(n,e){var t=new Uint8Array(32),r=yx(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,axe(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function OS(n,e){var t=new Uint8Array(32),r=yx(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function wc(n){var e=Nr(n);return Cp(e[1][0].data)}function lxe(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&Yd(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=yx(n[7][0].data),f=0,d=[],g=yx(n[4][0].data),p=0,E=[],v=0;v<e.length;++v){if(e[v]==null){u.setUint16(v*2,65535,!0),g.setUint16(v*2,65535);continue}u.setUint16(v*2,f,!0),g.setUint16(v*2,p,!0);var w,T;switch(typeof e[v]){case"string":w=LS({t:"s",v:e[v]},t),T=OS({t:"s",v:e[v]},t);break;case"number":w=LS({t:"n",v:e[v]},t),T=OS({t:"n",v:e[v]},t);break;case"boolean":w=LS({t:"b",v:e[v]},t),T=OS({t:"b",v:e[v]},t);break;default:throw new Error("Unsupported value "+e[v])}d.push(w),f+=w.length,E.push(T),p+=T.length,++l}for(n[2][0].data=In(l);v<n[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),g.setUint16(v*2,65535,!0);return n[6][0].data=mu(d),n[3][0].data=mu(E),l}function cxe(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Ys(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ir(r)));var s=vx(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(ne){return ne.forEach(function(re){typeof re=="string"&&a.push(re)})});var o={},l=[],u=Mn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(ne,re){return[ne,u.FullPaths[re]]}).forEach(function(ne){var re=ne[0],Q=ne[1];if(re.type==2&&re.name.match(/\.iwa/)){var ge=re.content,De=Oa(ge),Ve=La(De);Ve.forEach(function(Ae){l.push(Ae.id),o[Ae.id]={deps:[],location:Q,type:Yd(Ae.messages[0].meta[1][0].data)}})}}),l.sort(function(ne,re){return ne-re});var f=l.filter(function(ne){return ne>1}).map(function(ne){return[ne,In(ne)]});u.FileIndex.map(function(ne,re){return[ne,u.FullPaths[re]]}).forEach(function(ne){var re=ne[0];if(ne[1],!!re.name.match(/\.iwa/)){var Q=La(Oa(re.content));Q.forEach(function(ge){ge.messages.forEach(function(De){f.forEach(function(Ve){ge.messages.some(function(Ae){return Yd(Ae.meta[1][0].data)!=11006&&sxe(Ae.data,Ve[1])})&&o[Ve[0]].deps.push(ge.id)})})})}});for(var d=Mn.find(u,o[1].location),g=La(Oa(d.content)),p,E=0;E<g.length;++E){var v=g[E];v.id==1&&(p=v)}var w=wc(Nr(p.messages[0].data)[1][0].data);for(d=Mn.find(u,o[w].location),g=La(Oa(d.content)),E=0;E<g.length;++E)v=g[E],v.id==w&&(p=v);for(w=wc(Nr(p.messages[0].data)[2][0].data),d=Mn.find(u,o[w].location),g=La(Oa(d.content)),E=0;E<g.length;++E)v=g[E],v.id==w&&(p=v);for(w=wc(Nr(p.messages[0].data)[2][0].data),d=Mn.find(u,o[w].location),g=La(Oa(d.content)),E=0;E<g.length;++E)v=g[E],v.id==w&&(p=v);var T=Nr(p.messages[0].data);{T[6][0].data=In(r.e.r+1),T[7][0].data=In(r.e.c+1);var R=wc(T[46][0].data),k=Mn.find(u,o[R].location),N=La(Oa(k.content));{for(var O=0;O<N.length&&N[O].id!=R;++O);if(N[O].id!=R)throw"Bad ColumnRowUIDMapArchive";var B=Nr(N[O].messages[0].data);B[1]=[],B[2]=[],B[3]=[];for(var P=0;P<=r.e.c;++P){var b=[];b[1]=b[2]=[{type:0,data:In(P+420690)}],B[1].push({type:2,data:oi(b)}),B[2].push({type:0,data:In(P)}),B[3].push({type:0,data:In(P)})}B[4]=[],B[5]=[],B[6]=[];for(var M=0;M<=r.e.r;++M)b=[],b[1]=b[2]=[{type:0,data:In(M+726270)}],B[4].push({type:2,data:oi(b)}),B[5].push({type:0,data:In(M)}),B[6].push({type:0,data:In(M)});N[O].messages[0].data=oi(B)}k.content=sd(id(N)),k.size=k.content.length,delete T[46];var F=Nr(T[4][0].data);{F[7][0].data=In(r.e.r+1);var V=Nr(F[1][0].data),W=wc(V[2][0].data);k=Mn.find(u,o[W].location),N=La(Oa(k.content));{if(N[0].id!=W)throw"Bad HeaderStorageBucket";var D=Nr(N[0].messages[0].data);for(M=0;M<s.length;++M){var Ie=Nr(D[2][0].data);Ie[1][0].data=In(M),Ie[4][0].data=In(s[M].length),D[2][M]={type:D[2][0].type,data:oi(Ie)}}N[0].messages[0].data=oi(D)}k.content=sd(id(N)),k.size=k.content.length;var Le=wc(F[2][0].data);k=Mn.find(u,o[Le].location),N=La(Oa(k.content));{if(N[0].id!=Le)throw"Bad HeaderStorageBucket";for(D=Nr(N[0].messages[0].data),P=0;P<=r.e.c;++P)Ie=Nr(D[2][0].data),Ie[1][0].data=In(P),Ie[4][0].data=In(r.e.r+1),D[2][P]={type:D[2][0].type,data:oi(Ie)};N[0].messages[0].data=oi(D)}k.content=sd(id(N)),k.size=k.content.length;var Fe=wc(F[4][0].data);(function(){for(var ne=Mn.find(u,o[Fe].location),re=La(Oa(ne.content)),Q,ge=0;ge<re.length;++ge){var De=re[ge];De.id==Fe&&(Q=De)}var Ve=Nr(Q.messages[0].data);{Ve[3]=[];var Ae=[];a.forEach(function(ue,C){Ae[1]=[{type:0,data:In(C)}],Ae[2]=[{type:0,data:In(1)}],Ae[3]=[{type:2,data:ixe(ue)}],Ve[3].push({type:2,data:oi(Ae)})})}Q.messages[0].data=oi(Ve);var Oe=id(re),Te=sd(Oe);ne.content=Te,ne.size=ne.content.length})();var Ce=Nr(F[3][0].data);{var ce=Ce[1][0];delete Ce[2];var Re=Nr(ce.data);{var me=wc(Re[2][0].data);(function(){for(var ne=Mn.find(u,o[me].location),re=La(Oa(ne.content)),Q,ge=0;ge<re.length;++ge){var De=re[ge];De.id==me&&(Q=De)}var Ve=Nr(Q.messages[0].data);{delete Ve[6],delete Ce[7];var Ae=new Uint8Array(Ve[5][0].data);Ve[5]=[];for(var Oe=0,Te=0;Te<=r.e.r;++Te){var ue=Nr(Ae);Oe+=lxe(ue,s[Te],a),ue[1][0].data=In(Te),Ve[5].push({data:oi(ue),type:2})}Ve[1]=[{type:0,data:In(r.e.c+1)}],Ve[2]=[{type:0,data:In(r.e.r+1)}],Ve[3]=[{type:0,data:In(Oe)}],Ve[4]=[{type:0,data:In(r.e.r+1)}]}Q.messages[0].data=oi(Ve);var C=id(re),qe=sd(C);ne.content=qe,ne.size=ne.content.length})()}ce.data=oi(Re)}F[3][0].data=oi(Ce)}T[4][0].data=oi(F)}p.messages[0].data=oi(T);var ee=id(g),j=sd(ee);return d.content=j,d.size=d.content.length,u}function uxe(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function ZC(n){uxe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function hxe(n,e){return e.bookType=="ods"?MV(n,e):e.bookType=="numbers"?cxe(n,e):e.bookType=="xlsb"?fxe(n,e):dxe(n,e)}function fxe(n,e){kd=1024,n&&!n.SSF&&(n.SSF=ys(ur)),n&&n.SSF&&(NE(),ME(n.SSF),e.revssf=LE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Om?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=gV.indexOf(e.bookType)>-1,i=z7();ZC(e=e||{});var s=OC(),a="",o=0;if(e.cellXfs=[],wu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",zt(s,a,K7(n.Props,e)),i.coreprops.push(a),An(e.rels,2,a,ln.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,zt(s,a,X7(n.Props)),i.extprops.push(a),An(e.rels,3,a,ln.EXT_PROPS),n.Custprops!==n.Props&&yi(n.Custprops||{}).length>0&&(a="docProps/custom.xml",zt(s,a,q7(n.Custprops)),i.custprops.push(a),An(e.rels,4,a,ln.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var f={"!id":{}},d=n.Sheets[n.SheetNames[o-1]],g=(d||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,zt(s,a,mve(o-1,a,e,n,f)),i.sheets.push(a),An(e.wbrels,-1,"worksheets/sheet"+o+"."+t,ln.WS[0])}if(d){var p=d["!comments"],E=!1,v="";p&&p.length>0&&(v="xl/comments"+o+"."+t,zt(s,v,yve(p,v)),i.comments.push(v),An(f,-1,"../comments"+o+"."+t,ln.CMNT),E=!0),d["!legacy"]&&E&&zt(s,"xl/drawings/vmlDrawing"+o+".vml",fV(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&zt(s,W7(a),Hd(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,zt(s,a,_ve(e.Strings,a,e)),i.strs.push(a),An(e.wbrels,-1,"sharedStrings."+t,ln.SST)),a="xl/workbook."+t,zt(s,a,gve(n,a)),i.workbooks.push(a),An(e.rels,1,a,ln.WB),a="xl/theme/theme1.xml",zt(s,a,uV(n.Themes,e)),i.themes.push(a),An(e.wbrels,-1,"theme/theme1.xml",ln.THEME),a="xl/styles."+t,zt(s,a,pve(n,a,e)),i.styles.push(a),An(e.wbrels,-1,"styles."+t,ln.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",zt(s,a,n.vbaraw),i.vba.push(a),An(e.wbrels,-1,"vbaProject.bin",ln.VBA)),a="xl/metadata."+t,zt(s,a,vve(a)),i.metadata.push(a),An(e.wbrels,-1,"metadata."+t,ln.XLMETA),zt(s,"[Content_Types].xml",$7(i,e)),zt(s,"_rels/.rels",Hd(e.rels)),zt(s,"xl/_rels/workbook."+t+".rels",Hd(e.wbrels)),delete e.revssf,delete e.ssf,s}function dxe(n,e){kd=1024,n&&!n.SSF&&(n.SSF=ys(ur)),n&&n.SSF&&(NE(),ME(n.SSF),e.revssf=LE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Om?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=gV.indexOf(e.bookType)>-1,i=z7();ZC(e=e||{});var s=OC(),a="",o=0;if(e.cellXfs=[],wu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",zt(s,a,K7(n.Props,e)),i.coreprops.push(a),An(e.rels,2,a,ln.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,zt(s,a,X7(n.Props)),i.extprops.push(a),An(e.rels,3,a,ln.EXT_PROPS),n.Custprops!==n.Props&&yi(n.Custprops||{}).length>0&&(a="docProps/custom.xml",zt(s,a,q7(n.Custprops)),i.custprops.push(a),An(e.rels,4,a,ln.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var d={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,zt(s,a,SV(o-1,e,n,d)),i.sheets.push(a),An(e.wbrels,-1,"worksheets/sheet"+o+"."+t,ln.WS[0])}if(g){var E=g["!comments"],v=!1,w="";if(E&&E.length>0){var T=!1;E.forEach(function(R){R[1].forEach(function(k){k.T==!0&&(T=!0)})}),T&&(w="xl/threadedComments/threadedComment"+o+"."+t,zt(s,w,$pe(E,f,e)),i.threadedcomments.push(w),An(d,-1,"../threadedComments/threadedComment"+o+"."+t,ln.TCMNT)),w="xl/comments"+o+"."+t,zt(s,w,dV(E)),i.comments.push(w),An(d,-1,"../comments"+o+"."+t,ln.CMNT),v=!0}g["!legacy"]&&v&&zt(s,"xl/drawings/vmlDrawing"+o+".vml",fV(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}d["!id"].rId1&&zt(s,W7(a),Hd(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,zt(s,a,iV(e.Strings,e)),i.strs.push(a),An(e.wbrels,-1,"sharedStrings."+t,ln.SST)),a="xl/workbook."+t,zt(s,a,AV(n)),i.workbooks.push(a),An(e.rels,1,a,ln.WB),a="xl/theme/theme1.xml",zt(s,a,uV(n.Themes,e)),i.themes.push(a),An(e.wbrels,-1,"theme/theme1.xml",ln.THEME),a="xl/styles."+t,zt(s,a,lV(n,e)),i.styles.push(a),An(e.wbrels,-1,"styles."+t,ln.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",zt(s,a,n.vbaraw),i.vba.push(a),An(e.wbrels,-1,"vbaProject.bin",ln.VBA)),a="xl/metadata."+t,zt(s,a,hV()),i.metadata.push(a),An(e.wbrels,-1,"metadata."+t,ln.XLMETA),f.length>1&&(a="xl/persons/person.xml",zt(s,a,Wpe(f)),i.people.push(a),An(e.wbrels,-1,"persons/person.xml",ln.PEOPLE)),zt(s,"[Content_Types].xml",$7(i,e)),zt(s,"_rels/.rels",Hd(e.rels)),zt(s,"xl/_rels/workbook."+t+".rels",Hd(e.wbrels)),delete e.revssf,delete e.ssf,s}function gxe(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=Fl(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function NV(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return w1(e.file,Mn.write(n,{type:dn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Mn.write(n,e)}function mxe(n,e){var t=ys(e||{}),r=hxe(n,t);return pxe(r,t)}function pxe(n,e){var t={},r=dn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?Mn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(kE(i))}return e.password&&typeof encrypt_agile<"u"?NV(encrypt_agile(i,e.password),e):e.type==="file"?w1(e.file,i):e.type=="string"?km(i):i}function _xe(n,e){var t=e||{},r=Nve(n,t);return NV(r,t)}function wo(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Tp(Ap(r));case"binary":return Ap(r);case"string":return n;case"file":return w1(e.file,r,"utf8");case"buffer":return dn?$l(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):wo(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function yxe(n,e){switch(e.type){case"base64":return Tp(n);case"binary":return n;case"string":return n;case"file":return w1(e.file,n,"binary");case"buffer":return dn?$l(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function gy(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Tp(t):e.type=="string"?km(t):t;case"file":return w1(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function LV(n,e){H0e(),rve(n);var t=ys(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=LV(n,t);return t.type="array",kE(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return wo(kve(n,t),t);case"slk":case"sylk":return wo(epe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return wo(bV(n.Sheets[n.SheetNames[i]],t),t);case"txt":return yxe(OV(n.Sheets[n.SheetNames[i]],t),t);case"csv":return wo(QC(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return wo(tpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return gy(Jme.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return wo(npe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return wo(cpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return wo(rV.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return wo(MV(n,t),t);case"wk1":return gy(oO.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return gy(oO.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),gy(CV(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),_xe(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return mxe(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function vxe(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function xxe(n,e,t){var r={};return r.type="file",r.file=e,vxe(r),LV(n,r)}function Exe(n,e,t,r,i,s,a,o){var l=pi(t),u=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var p=e.s.c;p<=e.e.c;++p){var E=a?n[t][p]:n[r[p]+l];if(E===void 0||E.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var v=E.v;switch(E.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+E.t)}if(s[p]!=null){if(v==null)if(E.t=="e"&&v===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(f&&v===null)g[s[p]]=null;else continue;else g[s[p]]=f&&(E.t!=="n"||E.t==="n"&&o.rawNumbers!==!1)?v:jl(E,v,o);v!=null&&(d=!1)}}return{row:g,isempty:d}}function vx(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},f=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof f){case"string":l=zn(f);break;case"number":l=zn(n["!ref"]),l.s.r=f;break;default:l=f}r>0&&(i=0);var d=pi(l.s.r),g=[],p=[],E=0,v=0,w=Array.isArray(n),T=l.s.r,R=0,k={};w&&!n[T]&&(n[T]=[]);var N=u.skipHidden&&n["!cols"]||[],O=u.skipHidden&&n["!rows"]||[];for(R=l.s.c;R<=l.e.c;++R)if(!(N[R]||{}).hidden)switch(g[R]=Ni(R),t=w?n[T][R]:n[g[R]+d],r){case 1:s[R]=R-l.s.c;break;case 2:s[R]=g[R];break;case 3:s[R]=u.header[R-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=jl(t,null,u),v=k[a]||0,!v)k[a]=1;else{do o=a+"_"+v++;while(k[o]);k[a]=v,k[o]=1}s[R]=o}for(T=l.s.r+i;T<=l.e.r;++T)if(!(O[T]||{}).hidden){var B=Exe(n,l,T,g,r,s,w,u);(B.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[E++]=B.row)}return p.length=E,p}var mO=/"/g;function wxe(n,e,t,r,i,s,a,o){for(var l=!0,u=[],f="",d=pi(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var p=o.dense?(n[t]||[])[g]:n[r[g]+d];if(p==null)f="";else if(p.v!=null){l=!1,f=""+(o.rawNumbers&&p.t=="n"?p.v:jl(p,null,o));for(var E=0,v=0;E!==f.length;++E)if((v=f.charCodeAt(E))===i||v===s||v===34||o.forceQuotes){f='"'+f.replace(mO,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(l=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(mO,'""')+'"')):f="";u.push(f)}return o.blankrows===!1&&l?null:u.join(a)}function QC(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=zn(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),f="",d=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],E=i.s.c;E<=i.e.c;++E)(g[E]||{}).hidden||(d[E]=Ni(E));for(var v=0,w=i.s.r;w<=i.e.r;++w)(p[w]||{}).hidden||(f=wxe(n,i,w,d,a,l,s,r),f!=null&&(r.strip&&(f=f.replace(u,"")),(f||r.blankrows!==!1)&&t.push((v++?o:"")+f)));return delete r.dense,t.join("")}function OV(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=QC(n,e);return t}function Sxe(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=zn(n["!ref"]),s="",a=[],o,l=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=Ni(o);for(var f=i.s.r;f<=i.e.r;++f)for(s=pi(f),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[f]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function DV(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?qr(r.origin):r.origin;a=l.r,o=l.c}var u,f={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=zn(s["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),a==-1&&(a=d.e.r+1,f.e.r=a+e.length-1+i)}else a==-1&&(a=0,f.e.r=e.length-1+i);var g=r.header||[],p=0;e.forEach(function(v,w){yi(v).forEach(function(T){(p=g.indexOf(T))==-1&&(g[p=g.length]=T);var R=v[T],k="z",N="",O=kn({c:o+p,r:a+w+i});u=bp(s,O),R&&typeof R=="object"&&!(R instanceof Date)?s[O]=R:(typeof R=="number"?k="n":typeof R=="boolean"?k="b":typeof R=="string"?k="s":R instanceof Date?(k="d",r.cellDates||(k="n",R=_s(R)),N=r.dateNF||ur[14]):R===null&&r.nullError&&(k="e",R=0),u?(u.t=k,u.v=R,delete u.w,delete u.R,N&&(u.z=N)):s[O]=u={t:k,v:R},N&&(u.z=N))})}),f.e.c=Math.max(f.e.c,o+g.length-1);var E=pi(a);if(i)for(p=0;p<g.length;++p)s[Ni(p+o)+E]={t:"s",v:g[p]};return s["!ref"]=Ir(f),s}function Txe(n,e){return DV(null,n,e)}function bp(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=qr(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?bp(n,kn(e)):bp(n,kn({r:e,c:t||0}))}function Ixe(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Axe(){return{SheetNames:[],Sheets:{}}}function Rxe(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(IV(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function Cxe(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=Ixe(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function bxe(n,e){return n.z=e,n}function FV(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function Pxe(n,e,t){return FV(n,"#"+e,t)}function kxe(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function Mxe(n,e,t,r){for(var i=typeof e!="string"?e:zn(e),s=typeof e=="string"?e:Ir(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=bp(n,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=t,r&&(l.D=!0))}return n}var DS={encode_col:Ni,encode_row:pi,encode_cell:kn,encode_range:Ir,decode_col:BC,decode_row:GC,split_cell:Hge,decode_cell:qr,decode_range:Ys,format_cell:jl,sheet_add_aoa:F7,sheet_add_json:DV,sheet_add_dom:PV,aoa_to_sheet:V0,json_to_sheet:Txe,table_to_sheet:kV,table_to_book:txe,sheet_to_csv:QC,sheet_to_txt:OV,sheet_to_json:vx,sheet_to_html:bV,sheet_to_formulae:Sxe,sheet_to_row_object_array:vx,sheet_get_cell:bp,book_new:Axe,book_append_sheet:Rxe,book_set_sheet_visibility:Cxe,cell_set_number_format:bxe,cell_set_hyperlink:FV,cell_set_internal_link:Pxe,cell_add_comment:kxe,sheet_set_array_formula:Mxe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const U0=va()(M0((n,e)=>({vondsten:[],addVondst:t=>n(r=>({vondsten:[...r.vondsten,{...t,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:t=>n(r=>({vondsten:r.vondsten.filter(i=>i.id!==t)})),updateVondst:(t,r)=>n(i=>({vondsten:i.vondsten.map(s=>s.id===t?{...s,...r}:s)})),clearAll:()=>n({vondsten:[]}),exportAsGeoJSON:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:t.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:[o.location.lng,o.location.lat]},properties:{id:o.id,objectType:o.objectType,material:o.material,period:o.period,depth:o.depth,notes:o.notes,timestamp:o.timestamp,photoUrl:o.photoUrl,condition:o.condition,weight:o.weight,length:o.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},exportAsCSV:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=t.map(u=>{const f=new Date(u.timestamp).toLocaleDateString("nl-NL"),d=u.notes?`"${u.notes.replace(/"/g,'""')}"`:"";return`${u.id},${u.location.lat},${u.location.lng},${f},${u.objectType},${u.material},${u.period},${u.depth||""},${u.condition||""},${u.weight||""},${u.length||""},${d},${u.photoUrl||""}`}).join(`
`),s=r+i,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},exportAsExcel:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(o=>({ID:o.id,Latitude:o.location.lat,Longitude:o.location.lng,Datum:new Date(o.timestamp).toLocaleDateString("nl-NL"),Type:o.objectType,Materiaal:o.material,Periode:o.period,"Diepte (cm)":o.depth||"",Conditie:o.condition||"","Gewicht (g)":o.weight||"","Lengte (mm)":o.length||"",Notities:o.notes||"","Foto URL":o.photoUrl||""})),i=DS.json_to_sheet(r),s=DS.book_new();DS.book_append_sheet(s,i,"Vondsten");const a=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=a,xxe(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(l=>{const u=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${u}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},exportAsKML:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${t.map(l=>{const u=new Date(l.timestamp).toLocaleDateString("nl-NL"),f=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${u}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${f}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}}),{name:"detectorapp-local-vondsten"}));an.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function Nxe(n){if(!n)return n;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let t=n;return Object.entries(e).forEach(([r,i])=>{t=t.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),t=t.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),t}async function Lxe(n){try{const e=sn(n),t=an("EPSG:4326","EPSG:28992",e);if(t[0]<7e3||t[0]>3e5||t[1]<289e3||t[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${t[0]-r},${t[1]-r},${t[0]+r},${t[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,o=await(await fetch(s)).json();if(o.features&&o.features.length>0){const l=o.features[0].properties,u=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(u!=null){const f=typeof u=="number"?u:parseFloat(u);if(!isNaN(f))return f}}}catch(e){console.warn("AHN height query failed:",e)}return null}const Oxe={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},Dxe={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function pO(n,e){const t=[],r=n.toLowerCase(),i=(e||"").toLowerCase();return r.includes("kalkhoudend")||i.endsWith("a")?t.push("Kalkhoudend = goede metaalconservering"):(r.includes("kalkarm")||r.includes("kalkloos"))&&t.push("Kalkarm = meer corrosie op metalen"),r.includes("poldervaag")?t.push("Poldervaaggrond = jonge rivierklei, ingepolderd gebied"):r.includes("enkeerdgrond")||r.includes("enk")?t.push("Enkeerdgrond = oude akkers met plaggenbemesting - archeologisch interessant!"):r.includes("podzol")?t.push("Podzolgrond = uitgeloogde zandgrond, vaak zuur"):(r.includes("veengrond")||r.includes("veen"))&&t.push("Veengrond = zuur, slechte metaalconservering (tenzij waterverzadigd)"),r.includes("zware klei")?t.push("Zware klei = moeilijk graven, goede conservering"):r.includes("lichte klei")||r.includes("zavel")?t.push("Zavel/lichte klei = redelijk te graven"):r.includes("zand")&&!r.includes("zavel")&&t.push("Zandgrond = makkelijk graven"),r.includes("rivierklei")||i.startsWith("r")?t.push("Rivierafzetting"):(r.includes("zeeklei")||i.startsWith("m"))&&t.push("Zeekleiafzetting"),t}function Fxe(){const n=vs(me=>me.map),e=U0(me=>me.removeVondst),[t,r]=oe.useState([]),[i,s]=oe.useState(0),[a,o]=oe.useState(!1),[l,u]=oe.useState(null),[f,d]=oe.useState(!1),[g,p]=oe.useState(!1),[E,v]=oe.useState(null),[w,T]=oe.useState(null),[R,k]=oe.useState(()=>{const me=localStorage.getItem("popupTextScale");return me?parseInt(me):100}),N=me=>{k(me),localStorage.setItem("popupTextScale",me.toString())},O=t[i]||"",B=t.length>1,P=me=>{const ee=me.match(/<strong[^>]*>(.*?)<\/strong>/);if(ee){const j=ee[1].replace(/<[^>]+>/g,""),ne=me.replace(ee[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:j,contentWithoutTitle:ne}}return{title:"",contentWithoutTitle:me}},b=me=>me.replace(/class="([^"]*)"/g,(j,ne)=>{if(ne.includes("text-xs")){const re=ne.replace(/\btext-xs\b/g,"").trim();return re?`style="font-size:0.857em" class="${re}"`:'style="font-size:0.857em"'}if(ne.includes("text-sm")){const re=ne.replace(/\btext-sm\b/g,"").trim();return re?`class="${re}"`:""}return j}).replace(/class=""/g,""),{title:M,contentWithoutTitle:F}=P(O),V=b(F),W=O.includes("Landbouwperceel"),D=O.includes("data-vondst-id="),Ie=()=>{s(me=>(me-1+t.length)%t.length)},Le=()=>{s(me=>(me+1)%t.length)},Fe=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",l),!n||!l||g){console.log(" STOP - map:",!!n,"coord:",l,"loading:",g);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${l[0]}, ${l[1]}]`),p(!0);try{await z0e(n,l)&&d(!0)}catch(me){console.error("Failed to load height map:",me)}finally{p(!1)}},Ce=()=>{n&&(AI(n),d(!1))};oe.useEffect(()=>{if(!n)return;const me=ne=>{let re='<strong class="text-purple-800">AMK Monument</strong>';if(ne.toponiem&&(re+=`<br/><span class="text-sm font-semibold">${ne.toponiem}</span>`),ne.kwaliteitswaarde&&(re+=`<br/><span class="text-sm text-purple-700">${ne.kwaliteitswaarde}</span>`),ne.omschrijving&&(re+=`<br/><span class="text-xs text-gray-600 mt-1 block">${ne.omschrijving}</span>`),ne.txt_label){const Q=ne.txt_label.split(", ").slice(0,3).join(", ");re+=`<br/><span class="text-xs text-gray-500 italic">${Q}${ne.txt_label.split(", ").length>3?"...":""}</span>`}return re},ee=async(ne,re)=>{const Q=[],ge=n.getLayers().getArray().filter(De=>De instanceof Xu&&De.getVisible()?De.getSource()instanceof yW:!1);for(const De of ge){const Ve=De.getSource();if(!Ve)continue;const Ae=De.get("title")||"";if(Ae==="Archeo Landschappen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,se=z.landschapsnaam||z.naam||"Archeologisch Landschap",Ne=z.omschrijving||"";let xe=`<strong class="text-green-800">${se}</strong>`;Ne&&(xe+=`<br/><span class="text-sm text-gray-600">${Ne}</span>`),xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',xe+='<div class="text-sm text-gray-700 mt-1">Een archeologisch landschap is een gebied waar het landschap nog sporen draagt van menselijke activiteit uit het verleden. Denk aan oude akkers, nederzettingen of verdedigingswerken.</div>',xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',xe+='<div class="text-sm text-gray-700 mt-1">Aardewerk, munten, gereedschap en andere voorwerpen van vroegere bewoners. De kans op vondsten hangt af van het type landschap.</div>',xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten</span></div>',xe+='<div class="text-sm text-gray-700 mt-1">Bekijk de Rijksdienst voor het Cultureel Erfgoed (RCE) voor meer informatie over archeologische landschappen.</div>',Q.push(xe)}}catch(Te){console.warn("Archeo Landschappen WMS query failed:",Te)}continue}if(Ae==="Essen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(z.naam||z.Naam||z.NAME)&&(se+=`<br/><span class="text-sm font-semibold text-amber-700">${z.naam||z.Naam||z.NAME}</span>`),(z.type||z.Type||z.TYPE)&&(se+=`<br/><span class="text-xs text-gray-600">${z.type||z.Type||z.TYPE}</span>`),(z.omschrijving||z.Omschrijving)&&(se+=`<br/><span class="text-xs text-gray-500">${z.omschrijving||z.Omschrijving}</span>`),Q.push(se)}}catch(Te){console.warn("Essen WMS query failed:",Te)}continue}if(Ae==="FAMKE Steentijd"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=FAMKE_Advies_steentijd-bronstijd3339&QUERY_LAYERS=FAMKE_Advies_steentijd-bronstijd3339&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';se+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart voor oude vondsten</span>';const Ne=z.advies||z.Advies||"";if(Ne){se+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',se+=`<div class="text-sm text-amber-700 mt-1">${Ne}</div>`;const xe=Ne.toLowerCase();let Xe="",Je="text-gray-600",ht="";xe.includes("karterend")?(Xe="Op deze plek verwachten archeologen vondsten uit de steentijd of bronstijd. Bij graafwerk moet er eerst onderzoek komen.",ht="Goede kans op oude vondsten (vuursteen, bijlen, aardewerk)",Je="text-amber-600"):xe.includes("waarderend")?(Xe="Hier zijn mogelijk belangrijke vindplaatsen. Proefsleuven zijn nodig om te kijken wat er precies zit.",ht="Mogelijk interessante vondsten uit de prehistorie",Je="text-orange-600"):xe.includes("geen")?(Xe="De kans op prehistorische vondsten is hier klein. De grond is waarschijnlijk te jong of te veel verstoord.",ht="Weinig kans op steentijd-vondsten",Je="text-green-600"):xe.includes("quickscan")&&(Xe="Hier is eerst bureau-onderzoek nodig. Er kunnen vondsten zitten, maar dat is nog niet zeker.",ht="Onbekend, nader onderzoek nodig",Je="text-blue-600"),Xe&&(se+=`<div class="text-sm ${Je} mt-1">${Xe}</div>`),ht&&(se+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',se+=`<div class="text-sm text-gray-700 mt-1">${ht}</div>`),se+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',se+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de steentijd en bronstijd te verwachten zijn.</div>'}Q.push(se)}}catch(Te){console.warn("FAMKE WMS query failed:",Te)}continue}if(Ae==="Archeo Onderzoeken"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-blue-800">Archeologisch Onderzoek</strong>';if(z.type_onderzoek&&(se+=`<br/><span class="text-sm font-semibold">${z.type_onderzoek}</span>`),z.onderzoeksmeldingnummer&&(se+=`<br/><span class="text-xs text-gray-500">Melding: ${z.onderzoeksmeldingnummer}</span>`),z.uitvoerder&&(se+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${z.uitvoerder}</span>`),z.startdatum||z.einddatum){const Ne=[z.startdatum,z.einddatum].filter(Boolean).join(" - ");se+=`<br/><span class="text-xs text-gray-600">Periode: ${Ne}</span>`}if(z.gemeente&&(se+=`<br/><span class="text-xs text-gray-500">${z.gemeente}</span>`),z.type_uri){const Ne=z.type_uri.replace("type_uri:","").trim();Ne.startsWith("http")&&(se+=`<br/><a href="${Ne}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">Meer informatie</a>`)}for(const[Ne,xe]of Object.entries(z))if(Ne.toLowerCase().includes("uri")&&typeof xe=="string"&&Ne!=="type_uri"){const Xe=xe.replace(/^[a-z_]+:/i,"").trim();Xe.startsWith("http")&&(se+=`<br/><a href="${Xe}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">${Ne.replace("_uri","")}</a>`)}Q.push(se)}}catch(Te){console.warn("Archeo Onderzoeken WMS query failed:",Te)}continue}if(Ae==="IKAW"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=500,q=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,se=Math.round(z.PALETTE_INDEX||z.palette_index||0),Ne=Dxe[se]||`Trefkans onbekend (${se})`;let xe='<strong class="text-orange-800">IKAW Verwachtingskaart</strong>';xe+='<br/><span class="text-sm text-gray-500">Kaart met kansen op archeologische vondsten</span>',xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',xe+=`<div class="text-sm text-orange-700 mt-1">${Ne}</div>`;const Je={1:{tekst:"De kans op archeologische vondsten is hier zeer klein. De grond is waarschijnlijk verstoord of te jong.",vondsten:"Niet veel te verwachten, maar verrassingen zijn altijd mogelijk.",kleur:"text-gray-600"},2:{tekst:"De kans op vondsten is laag, maar niet uitgesloten. Soms worden hier toch interessante objecten gevonden.",vondsten:"Af en toe losse vondsten uit verschillende periodes.",kleur:"text-yellow-600"},3:{tekst:"Dit is een interessant gebied met een redelijke kans op vondsten. Hier woonden of werkten mensen in het verleden.",vondsten:"Aardewerk, munten, metalen voorwerpen uit verschillende tijdperken.",kleur:"text-amber-600"},4:{tekst:"Dit is een zeer kansrijk gebied! Hier zijn waarschijnlijk resten van oude bewoning of activiteit. Let op: bij graafwerk kan een vergunning nodig zijn.",vondsten:"Grote kans op interessante vondsten: aardewerk, munten, sieraden, gereedschap.",kleur:"text-orange-600"},5:{tekst:"Dit is een waterbodem. Vondsten zijn hier moeilijker te bereiken maar kunnen goed bewaard zijn gebleven.",vondsten:"Scheepswrakken, verloren lading, gedumpte voorwerpen.",kleur:"text-blue-600"},6:{tekst:"Waterbodem met archeologische potentie. Hier kunnen interessante vondsten liggen die door het water goed bewaard zijn.",vondsten:"Scheepsresten, ankers, aardewerk, metalen voorwerpen.",kleur:"text-blue-600"},7:{tekst:"Waterbodem met hoge archeologische waarde. Hier zijn bekende vindplaatsen of scheepswrakken.",vondsten:"Belangrijke maritieme vondsten, beschermd gebied.",kleur:"text-blue-700"}}[se];Je&&(xe+=`<div class="text-sm ${Je.kleur} mt-1">${Je.tekst}</div>`,xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',xe+=`<div class="text-sm text-gray-700 mt-1">${Je.vondsten}</div>`),xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de IKAW?</span></div>',xe+='<div class="text-sm text-gray-700 mt-1">De IKAW (Indicatieve Kaart Archeologische Waarden) toont de kans op archeologische vondsten in heel Nederland. De kaart is gemaakt door de Rijksdienst voor het Cultureel Erfgoed.</div>',Q.push(xe)}}catch(Te){console.warn("IKAW WMS query failed:",Te)}continue}if(Ae==="Inundatiegebieden"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-blue-800">Inundatiegebied</strong>';(z["linie-naam"]||z.linie_naam)&&(se+=`<br/><span class="text-sm font-semibold text-blue-700">${z["linie-naam"]||z.linie_naam}</span>`),z.naam&&(se+=`<br/><span class="text-sm text-gray-700">${z.naam}</span>`),z.periode&&(se+=`<br/><span class="text-xs text-gray-500">${z.periode}</span>`),z.lin_period&&(se+=`<br/><span class="text-xs text-gray-400">${z.lin_period}</span>`),Q.push(se)}}catch(Te){console.warn("Inundatiegebieden WMS query failed:",Te)}continue}if(Ae==="Militaire Objecten"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=50,q=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,se=z.obj_soort||"",Ne=z.obj_naam||"",xe=z.lin_period||"",Xe=z["linie-naam"]||z.linie_naam||"";let Je=se||"Militair Object",ht="Dit is een historisch militair object uit de Nederlandse verdedigingsgeschiedenis.",mt="";const St=se.toLowerCase();St.includes("fort")?(ht="Een fort is een versterkte verdedigingspost, vaak met dikke muren en geschutsopstellingen. Forten maakten deel uit van grotere verdedigingslinies.",mt="Rond forten worden soms kogels, knopen van uniformen, muntjes of andere militaire voorwerpen gevonden."):St.includes("schans")?(ht="Een schans is een kleinere versterking, vaak gemaakt van aarde en palissaden. Schansen werden gebruikt om strategische punten te verdedigen.",mt="Bij schansen kun je musketkogels, knopen en soms munten uit de 17e-18e eeuw tegenkomen."):St.includes("batterij")||St.includes("battery")?(ht="Een batterij is een geschutsopstelling, vaak op een strategische plek om vijanden onder vuur te nemen.",mt="Bij batterijen worden soms kanonkogels of onderdelen van geschut gevonden."):St.includes("bunker")||St.includes("kazemat")?(ht="Een bunker of kazemat is een versterkte betonnen schuilplaats. Veel werden gebouwd rond 1940 als onderdeel van verdedigingslinies.",mt="Bij bunkers worden soms militaire voorwerpen uit WOII gevonden, zoals knopen, gespen of munitieresten."):St.includes("sluis")||St.includes("inlaatwerk")?(ht="Militaire sluizen en inlaatwerken werden gebruikt om land onder water te zetten (inunderen). Dit was een belangrijke verdedigingstactiek.",mt="Bij historische sluizen worden soms voorwerpen gevonden van soldaten die deze bewaakten."):St.includes("toren")||St.includes("wachttoren")?(ht="Wachttorens werden gebruikt om de omgeving in de gaten te houden en vijandelijke bewegingen te signaleren.",mt="Bij torens worden soms persoonlijke voorwerpen van soldaten gevonden."):St.includes("kazerne")&&(ht="Een kazerne is een gebouw waar soldaten gelegerd waren. Hier woonden, aten en oefenden de troepen.",mt="Rond kazernes worden regelmatig knopen, gespen en andere persoonlijke voorwerpen gevonden.");let Bt=`<strong class="text-stone-800">${Je}</strong>`;Ne&&(Bt+=`<br/><span class="text-sm font-semibold text-stone-700">${Ne}</span>`),Xe&&(Bt+=`<br/><span class="text-sm text-blue-600">${Xe}</span>`),xe&&(Bt+=`<br/><span class="text-xs text-gray-500">${xe}</span>`),Bt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Bt+=`<div class="text-sm text-gray-700 mt-1">${ht}</div>`,mt&&(Bt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Bt+=`<div class="text-sm text-gray-700 mt-1">${mt}</div>`),Bt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Bt+='<div class="text-sm text-gray-700 mt-1">',Bt+='<a href="https://erfgoedenlocatie.nl/linies-en-stellingen" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Linies en Stellingen</a>',Bt+="</div>",Q.push(Bt)}}catch(Te){console.warn("Militaire Objecten WMS query failed:",Te)}continue}if(Ae==="Verdedigingslinies"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-amber-800">Verdedigingslinie</strong>';const Ne={"Hollandse Waterlinie":"Verdedigingsstelsel (1815-1940) dat gebruik maakte van inundaties om Holland te beschermen. UNESCO Werelderfgoed.","Nieuwe Hollandse Waterlinie":"Uitgebreide versie (1815-1940) met forten en inundatiegebieden van Muiden tot Gorinchem.","Stelling van Amsterdam":"Ringverdediging rond Amsterdam (1880-1920) met 42 forten. UNESCO Werelderfgoed.",Grebbelinie:"Verdedigingslinie langs de Grebbe (17e-20e eeuw). Zware gevechten in mei 1940.",IJssellinie:"Koude Oorlog verdediging (1950-1968) langs de IJssel tegen Sovjet-invasie.",Atlantikwall:"Duitse kustverdediging WOII (1942-1945) van Noorwegen tot Spanje.","Peel-Raamstelling":"Verdedigingslinie in Brabant/Limburg. Gevechten mei 1940.","Maas-Waalstelling":"Linie tussen Maas en Waal, onderdeel landsverdediging.",Zuiderwaterlinie:"Waterlinie in West-Brabant en Zeeland (17e-19e eeuw).","Staats-Spaanse Linies":"Vestingwerken uit de 80-jarige oorlog (1568-1648)."},xe=z.naam||z.lin_naam||"";if(xe){se+=`<br/><span class="text-sm font-semibold text-amber-700">${xe}</span>`;const Xe=Object.entries(Ne).find(([Je])=>xe.toLowerCase().includes(Je.toLowerCase())||Je.toLowerCase().includes(xe.toLowerCase()));Xe&&(se+=`<br/><span class="text-sm text-gray-700">${Xe[1]}</span>`)}z.lin_period&&(se+=`<br/><span class="text-xs text-purple-600">${z.lin_period}</span>`),z.status&&(se+=`<br/><span class="text-xs text-gray-400">${z.status}</span>`),Q.push(se)}}catch(Te){console.warn("Verdedigingslinies WMS query failed:",Te)}continue}if(Ae==="Rijksmonumenten"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=50,q=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-red-800">Rijksmonument</strong>';(z.cbsNaam||z.cbs_naam)&&(se+=`<br/><span class="text-sm font-semibold">${z.cbsNaam||z.cbs_naam}</span>`),z.hoofdcategorie&&(se+=`<br/><span class="text-sm text-red-700">${z.hoofdcategorie}</span>`),z.subcategorie&&(se+=`<br/><span class="text-xs text-gray-600">${z.subcategorie}</span>`),z.rijksmonumentnummer&&(se+=`<br/><span class="text-xs text-gray-500">Nr: ${z.rijksmonumentnummer}</span>`),(z.bouwjaar||z.oorspronkelijkebouwjaar)&&(se+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.bouwjaar||z.oorspronkelijkebouwjaar}</span>`),Q.push(se)}}catch(Te){console.warn("Rijksmonumenten WMS query failed:",Te)}continue}if(Ae==="Werelderfgoed"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=500,q=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(z.siteName||z.naam)&&(se+=`<br/><span class="text-sm font-semibold text-cyan-700">${z.siteName||z.naam}</span>`),z.siteDesignation&&(se+=`<br/><span class="text-xs text-gray-600">${z.siteDesignation}</span>`),Q.push(se)}}catch(Te){console.warn("Werelderfgoed WMS query failed:",Te)}continue}if(Ae==="Terpen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=terpen3335&QUERY_LAYERS=terpen3335&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,se=z.naam||z.NAAM||z.Naam||"Terp",Ne=z.plaats||z.PLAATS||z.Plaats||"";let xe=`<strong class="text-orange-800">${se}</strong>`;Ne&&(xe+=`<br/><span class="text-sm text-gray-500">${Ne}</span>`),xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',xe+='<div class="text-sm text-gray-700 mt-1">Een terp is een kunstmatige heuvel. Mensen bouwden deze heuvels om droog te wonen in het vlakke, natte land. Terpen zijn vaak meer dan 2000 jaar oud.</div>',xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',xe+='<div class="text-sm text-gray-700 mt-1">Op en rond terpen worden vaak vondsten gedaan:</div>',xe+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',xe+="<li>Middeleeuws aardewerk en botten</li>",xe+="<li>Munten uit verschillende periodes</li>",xe+="<li>Metalen voorwerpen (gespen, fibulae, sieraden)</li>",xe+="<li>Soms Romeinse of zelfs prehistorische vondsten</li>",xe+="</ul>",xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waarom zijn terpen interessant?</span></div>',xe+='<div class="text-sm text-gray-700 mt-1">Terpen waren vaak dorpskernen waar mensen eeuwenlang woonden. Door de ophoging bleven veel voorwerpen goed bewaard. Let op: sommige terpen zijn beschermd monument!</div>',xe+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',xe+='<div class="text-sm text-gray-700 mt-1">Veel terpen zijn nog zichtbaar in het landschap. Vraag altijd toestemming aan de grondeigenaar voordat je gaat detecteren.</div>',Q.push(xe)}}catch(Te){console.warn("Terpen WMS query failed:",Te)}continue}if(Ae==="Religieus Erfgoed"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=50,q=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,se=z.naam||z.NAAM||z.name||z.NAME||"Onbekend",Ne=z.denominatie||z.DENOMINATIE||z.religie||"",xe=z.type||z.TYPE||z.functie||"",Xe=z.bouwjaar||z.BOUWJAAR||z.jaar||"",Je=z.gemeente||z.GEMEENTE||z.plaats||"";let ht=`<strong class="text-purple-800">${se}</strong>`;const mt=xe.toLowerCase();let St="Een religieus gebouw of heilige plek.",Bt="Munten van kerkgangers, knopen, gespen, religieuze voorwerpen";mt.includes("kerk")||mt.includes("church")?(St="Een kerk was het hart van de gemeenschap. Hier kwamen mensen samen voor diensten, maar ook voor belangrijke gebeurtenissen.",Bt="Munten uit de collecte, knopen, gespen, pelgrimsinsignes, loden zegels"):mt.includes("kapel")||mt.includes("chapel")?(St="Een kapel is een klein gebedshuis, vaak bij een landgoed, langs een weg, of op een bijzondere plek.",Bt="Devotionalia, munten, kruisjes, rozenkransen"):mt.includes("synagoge")?(St="Een synagoge is een Joods gebedshuis. Veel synagogen in Nederland zijn verwoest of herbestemd na de Tweede Wereldoorlog.",Bt="Munten, knopen, kleine religieuze voorwerpen"):mt.includes("klooster")||mt.includes("monastery")?(St="Een klooster was een woon- en werkplek voor monniken of nonnen. Veel kloosters hadden eigen werkplaatsen en landerijen.",Bt="Religieuze voorwerpen, zegels, gereedschap, aardewerk, middeleeuwse munten"):mt.includes("toren")||mt.includes("tower")?(St="Een kerktoren of klokkentoren. Soms is alleen de toren nog over van een verdwenen kerk.",Bt="Munten, knopen, bouwmateriaal"):(mt.includes("begraafplaats")||mt.includes("cemetery"))&&(St="Een historische begraafplaats. Detecteren op begraafplaatsen is niet toegestaan zonder toestemming.",Bt="Detecteren hier niet toegestaan"),Ne&&(ht+=`<br/><span class="text-sm text-purple-600">${Ne}</span>`),xe&&(ht+=`<br/><span class="text-sm text-gray-600">${xe}</span>`),Xe&&(ht+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${Xe}</span>`),Je&&(ht+=`<br/><span class="text-xs text-gray-400">${Je}</span>`),ht+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ht+=`<div class="text-sm text-gray-700 mt-1">${St}</div>`,ht+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ht+=`<div class="text-sm text-gray-700 mt-1">${Bt}</div>`,ht+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',mt.includes("begraafplaats")?ht+='<div class="text-sm text-red-600 mt-1">Detecteren op begraafplaatsen is niet toegestaan. Respecteer de rust van de overledenen.</div>':ht+='<div class="text-sm text-gray-700 mt-1">Veel kerken en religieuze gebouwen zijn beschermd monument. Vraag altijd toestemming voordat je gaat detecteren op het terrein.</div>',Q.push(ht)}}catch(Te){console.warn("Religieus Erfgoed WMS query failed:",Te)}continue}if(Ae==="Gewaspercelen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=50,qe=`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`,q=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${qe}`,ft=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${qe}`,[Y,z]=await Promise.all([fetch(q),fetch(ft).catch(()=>null)]),se=await Y.json();if(se.features&&se.features.length>0){const Ne=se.features[0].properties;let xe='<strong class="text-green-800">Landbouwperceel</strong>';if((Ne.gewas||Ne.gewasnaam)&&(xe+=`<br/><span class="text-sm font-semibold text-green-700">${Ne.gewas||Ne.gewasnaam}</span>`),(Ne.categorie||Ne.category)&&(xe+=`<br/><span class="text-xs text-gray-600">${Ne.categorie||Ne.category}</span>`),Ne.oppervlakte&&(xe+=`<br/><span class="text-xs text-gray-500">${Ne.oppervlakte} ha</span>`),z)try{const Xe=await z.json();if(Xe.features&&Xe.features.length>0){const Je=Xe.features[0].properties,ht=Je.first_soilname||Je.soilname||Je.bodemtype,mt=Je.first_soilcode||Je.soilcode||Je.maparea_soilcode;if(ht){xe+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${ht}</span>`;const St=pO(ht,mt);St.length>0&&(xe+=`<br/><span class="text-xs text-gray-500 italic">${St.join("  ")}</span>`)}}}catch{}Q.push(xe)}}catch(Te){console.warn("BRP Gewaspercelen WMS query failed:",Te)}continue}if(Ae==="Kadastrale Grenzen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=20,q=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,se=z.kadastraleGemeenteWaarde||z.kadastrale_gemeente_waarde||z.kadastraleGemeente||Oxe[String(z.kadastraleGemeenteCode)]||z.kadastraleGemeenteCode,Ne=z.sectie||z.Sectie||"",xe=z.perceelnummer||z.perceelNummer||z.Perceelnummer||"",Xe=z.kadastraleGrootteWaarde||z.kadastrale_grootte_waarde||z.kadastraleGrootte||z.oppervlakte,Je=z.AKRKadastraleGemeenteCodeWaarde||z.akrKadastraleGemeenteCodeWaarde||"",ht=[se,Ne,xe].filter(Boolean).join(" "),mt=Je&&Ne&&xe?`${Je}-${Ne}-${xe}`:"";let St='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(ht&&(St+=`<br/><span class="text-sm text-indigo-700">${ht}</span>`),mt&&(St+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${mt}</span>`),Xe){const Bt=typeof Xe=="number"?Xe:parseFloat(Xe);isNaN(Bt)||(St+=`<br/><span class="text-xs text-gray-600">${Bt.toLocaleString("nl-NL")} m</span>`)}St+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code, ga naar </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-600"> en klik "Zoek op aanduiding"</span><span class="text-xs text-gray-400"> (betaalde dienst)</span>',Q.push(St)}}catch(Te){console.warn("Kadastrale Grenzen WMS query failed:",Te)}continue}if(Ae==="Scheepswrakken"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-cyan-800">Scheepswrak</strong>';(z.naam||z.NAAM)&&(se+=`<br/><span class="text-sm font-semibold text-cyan-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(se+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.datering||z.DATERING)&&(se+=`<br/><span class="text-xs text-gray-500">Datering: ${z.datering||z.DATERING}</span>`),(z.bron||z.BRON)&&(se+=`<br/><span class="text-xs text-gray-400">${z.bron||z.BRON}</span>`),Q.push(se)}}catch(Te){console.warn("Scheepswrakken WMS query failed:",Te)}continue}if(Ae==="Woonheuvels ZH"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-orange-800">Woonheuvel</strong>';(z.naam||z.NAAM)&&(se+=`<br/><span class="text-sm font-semibold text-orange-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(se+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),Q.push(se)}}catch(Te){console.warn("Woonheuvels WMS query failed:",Te)}continue}if(Ae==="Romeinse Forten"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=200,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-red-800">Romeins Fort</strong>';(z.naam||z.NAAM)&&(se+=`<br/><span class="text-sm font-semibold text-red-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(se+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.periode||z.PERIODE)&&(se+=`<br/><span class="text-xs text-gray-500">${z.periode||z.PERIODE}</span>`),Q.push(se)}}catch(Te){console.warn("Romeinse Forten WMS query failed:",Te)}continue}if(Ae==="Windmolens"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=50,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-amber-800">Windmolen</strong>';(z.naam||z.NAAM)&&(se+=`<br/><span class="text-sm font-semibold text-amber-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE||z.functie||z.FUNCTIE)&&(se+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE||z.functie||z.FUNCTIE}</span>`),(z.bouwjaar||z.BOUWJAAR)&&(se+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.bouwjaar||z.BOUWJAAR}</span>`),Q.push(se)}}catch(Te){console.warn("Windmolens WMS query failed:",Te)}continue}if(Ae==="Erfgoedlijnen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=200,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-purple-800">Erfgoedlijn</strong>';(z.naam||z.NAAM||z.erfgoedlijn)&&(se+=`<br/><span class="text-sm font-semibold text-purple-700">${z.naam||z.NAAM||z.erfgoedlijn}</span>`),(z.type||z.TYPE)&&(se+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.omschrijving||z.OMSCHRIJVING)&&(se+=`<br/><span class="text-xs text-gray-500">${z.omschrijving||z.OMSCHRIJVING}</span>`),Q.push(se)}}catch(Te){console.warn("Erfgoedlijnen WMS query failed:",Te)}continue}if(Ae==="Oude Kernen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=200,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-stone-800">Historische Kern</strong>';(z.naam||z.NAAM)&&(se+=`<br/><span class="text-sm font-semibold text-stone-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(se+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.periode||z.PERIODE)&&(se+=`<br/><span class="text-xs text-gray-500">${z.periode||z.PERIODE}</span>`),Q.push(se)}}catch(Te){console.warn("Oude Kernen WMS query failed:",Te)}continue}if(Ae==="Relictenkaart Punten"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=50,q=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,se={KV:"Kasteel/Vesting",K:"Kapel",KE:"Kerkhof",B:"Buitenhuis",OB:"Oud Bebouwingsrelict",OV:"Oude Verkaveling",NR:"Nijverheidsrelict",GH:"Grafheuvel",BP:"Begraafplaats",HH:"Havezate",RM:"Rosmolen",WM:"Windmolen",PM:"Poldermolen",EK:"Eendenkooi",SH:"Scholtenhoeve"},Ne=z.type?.replace(/[0-9]/g,"")||"",xe=se[Ne]||z.type||"Cultuurhistorisch object";let Xe='<strong class="text-emerald-800">Relict</strong>';Xe+=`<br/><span class="text-sm font-semibold text-emerald-700">${xe}</span>`,z.type&&Ne!==z.type&&(Xe+=`<br/><span class="text-xs text-gray-500">Code: ${z.type}</span>`),z.streek&&(Xe+=`<br/><span class="text-xs text-gray-400">Streek: ${z.streek}</span>`),Q.push(Xe)}}catch(Te){console.warn("Relictenkaart Punten WMS query failed:",Te)}continue}if(Ae==="Relictenkaart Lijnen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=50,q=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,Ne={1:"Sprengenbeek",2:"Oude waterloop",3:"Doorgaande weg",4:"Hessenweg",5:"Oude weg",6:"Historische grens",7:"Trekpad",8:"Jaagpad"}[z.klasse]||`Historisch lijnrelict (${z.klasse})`;let xe='<strong class="text-teal-800">Lijnrelict</strong>';xe+=`<br/><span class="text-sm font-semibold text-teal-700">${Ne}</span>`,Q.push(xe)}}catch(Te){console.warn("Relictenkaart Lijnen WMS query failed:",Te)}continue}if(Ae==="Relictenkaart Vlakken"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=100,q=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties,Ne={1:"Onveranderd agrarisch (voor 1850)",2:"Jonge heideontginning (1850-1950)",3:"Open essencomplex",4:"Kampenlandschap",5:"Heiderelict (1850)",6:"Bosrelict (1850)",7:"Stuifzandrelict",8:"Oud bouwland",9:"Historisch grasland",10:"Beekdal"}[z.klasse]||`Historisch landschap (${z.klasse})`;let xe='<strong class="text-lime-800">Landschapsrelict</strong>';if(xe+=`<br/><span class="text-sm font-semibold text-lime-700">${Ne}</span>`,z.st_area_shape_){const Xe=(z.st_area_shape_/1e4).toFixed(1);xe+=`<br/><span class="text-xs text-gray-500">${Xe} ha</span>`}Q.push(xe)}}catch(Te){console.warn("Relictenkaart Vlakken WMS query failed:",Te)}continue}if(Ae==="Verdronken Dorpen"){try{const Te=sn(ne),ue=an("EPSG:4326","EPSG:28992",Te),C=200,q=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ue[0]-C},${ue[1]-C},${ue[0]+C},${ue[1]+C}`}`,Y=await(await fetch(q)).json();if(Y.features&&Y.features.length>0){const z=Y.features[0].properties;let se='<strong class="text-blue-800">Verdronken Dorp</strong>';(z.naam||z.NAAM)&&(se+=`<br/><span class="text-sm font-semibold text-blue-700">${z.naam||z.NAAM}</span>`),(z.verdronken||z.VERDRONKEN||z.jaar||z.JAAR)&&(se+=`<br/><span class="text-xs text-gray-600">Verdronken: ${z.verdronken||z.VERDRONKEN||z.jaar||z.JAAR}</span>`),(z.gemeente||z.GEMEENTE)&&(se+=`<br/><span class="text-xs text-gray-500">${z.gemeente||z.GEMEENTE}</span>`),(z.bron||z.BRON)&&(se+=`<br/><span class="text-xs text-gray-400">${z.bron||z.BRON}</span>`),Q.push(se)}}catch(Te){console.warn("Verdronken Dorpen WMS query failed:",Te)}continue}const Oe=Ve.getFeatureInfoUrl(ne,re,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Oe)try{const ue=await(await fetch(Oe)).json();if(ue.features&&ue.features.length>0){const C=ue.features[0].properties;if(Ae==="AHN 0.5m"){let Y='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const z=C.value_list??C.GRAY_INDEX??C.value??C.gray_index??C.dtm_05m??C.DTM_05M??C.hoogte??C.HOOGTE??C.elevation??C.ELEVATION;if(z!=null&&!isNaN(Number(z))){const se=typeof z=="number"?z.toFixed(2):Number(z).toFixed(2);Y+=`<br/><span class="text-sm text-blue-700">Hoogte: ${se} m NAP</span>`,Q.push(Y)}else{let se=!1;const Ne=["geometry","id","fid","gml_id","bbox"];for(const[xe,Xe]of Object.entries(C))!Ne.includes(xe.toLowerCase())&&Xe!==null&&Xe!==""&&(Y+=`<br/><span class="text-xs text-gray-600">${xe}: ${Xe}</span>`,se=!0);se&&Q.push(Y)}continue}if(Ae==="Geomorfologie"){let Y='<strong class="text-green-800">Geomorfologie</strong>',z=!1;const se=C.landform_subgroup_description,Ne=C.relief_klasse,xe=C.relief_subklasse,Xe=C.genese_description,Je=C.active_process;if(se&&(Y+=`<br/><span class="text-sm text-green-700">${se}</span>`,z=!0),Ne){const ht=xe&&xe!==Ne?`${Ne} (${xe})`:Ne;Y+=`<br/><span class="text-xs text-gray-600">Relief: ${ht}</span>`,z=!0}if(Xe&&(Y+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${Xe}</span>`,z=!0),Je&&Je!=="onbekend"&&(Y+=`<br/><span class="text-xs text-gray-500">Actief proces: ${Je}</span>`,z=!0),!z){const ht=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[mt,St]of Object.entries(C))!ht.includes(mt.toLowerCase())&&St!==null&&St!==""&&!mt.includes("validfrom")&&!mt.includes("validto")&&(Y+=`<br/><span class="text-xs text-gray-600">${mt}: ${St}</span>`)}Y+='<br/><a href="https://legendageomorfologie.wur.nl/" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">Meer over geomorfologie</a>',Q.push(Y);continue}let qe=`<strong>${Ae}</strong>`;const q=C.first_soilname||C.soilname,ft=C.soilcode||C.first_soilcode;if(q&&(qe+=`<br/><span class="text-sm text-amber-700">${q}</span>`,Ae==="Bodemkaart")){const Y=pO(q,ft);Y.length>0&&(qe+=`<br/><span class="text-xs text-gray-500 italic">${Y.join("  ")}</span>`)}if(C.soilslope&&C.soilslope!=="Niet opgenomen"&&(qe+=`<br/><span class="text-xs text-gray-500">Helling: ${C.soilslope}</span>`),!q){const Y=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[z,se]of Object.entries(C))!Y.includes(z)&&se&&se!=="Niet opgenomen"&&(qe+=`<br/><span class="text-xs text-gray-600">${z}: ${se}</span>`)}Q.push(qe)}}catch(Te){console.warn("WMS GetFeatureInfo failed:",Te)}}return Q},j=async ne=>{const re=[],Q=Lxe(ne.coordinate),ge=[];n.forEachFeatureAtPixel(ne.pixel,Oe=>{ge.push(Oe)});for(const Oe of ge){const Te=Oe.getProperties(),{geometry:ue,...C}=Te;if(C.vondst){const Y=C.vondst,z=`<strong>${Y.objectType}</strong>
            <div data-vondst-id="${Y.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${Y.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${Y.period}</span>
            ${Y.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${Y.depth} cm</span>`:""}
            ${Y.condition&&Y.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${Y.condition}</span>`:""}
            ${Y.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${Y.weight} gram</span>`:""}
            ${Y.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${Y.notes}</span>`:""}
            ${Y.photoUrl?`<br/><a href="${Y.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(Y.timestamp).toLocaleDateString("nl-NL")}</span>`;re.push(z),v(Y.id);continue}if(C.layerType==="customPoint"&&C.customPoint){const Y=C.customPoint,z=C.customLayerName||"Mijn Laag";let se=`<strong>${Y.name}</strong>`;se+=`<br/><span class="text-xs text-gray-500">${z}</span>`,Y.category&&(se+=`<br/><span class="text-sm text-gray-600"><strong>Categorie:</strong> ${Y.category}</span>`),Y.notes&&(se+=`<br/><span class="text-sm text-gray-600 mt-1">${Y.notes}</span>`),Y.url&&(se+=`<br/><a href="${Y.url}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Meer info</a>`),se+=`<br/><span class="text-xs text-gray-400">${new Date(Y.createdAt).toLocaleDateString("nl-NL")}</span>`,re.push(se);continue}if(C.kwaliteitswaarde&&C.kwaliteitswaarde.includes("archeologische waarde")){const Y=me(C);re.push(Y);continue}let qe=C.name||C.naam||C.title||C.NAAM||C.NAME||C.label||C.route_name||C.road_name;qe||(C.leisure==="playground"?qe="Speeltuin":C.leisure==="park"?qe="Park":C.leisure==="swimming_area"||C.sport==="swimming"?qe="Zwemplek":C.tourism==="museum"?qe="Museum":C.amenity==="cafe"||C.amenity==="restaurant"?qe=C.amenity==="cafe"?"Caf":"Restaurant":C.historic==="castle"?qe="Kasteel":qe="Info"),(C.bunker_type||C.name&&(C.name.toLowerCase().includes("bunker")||C.name.toLowerCase().includes("kazemat")||C.name.toLowerCase().includes("schuilplaats")))&&(qe="Bunker"),C.historic==="battlefield"&&(qe="Historisch slagveld");let q=`<strong>${qe}</strong>`;if(C.category&&(q+=`<br/><span class="text-sm text-gray-600">Categorie: ${C.category}</span>`),C.from_to&&C.from_to!==qe&&(q+=`<br/><span class="text-sm text-gray-600">${C.from_to}</span>`),C.route&&C.route!==qe&&(q+=`<br/><span class="text-sm text-gray-600">${C.route}</span>`),C.TOPONIEM&&(q+=`<br/><span class="text-sm font-semibold text-gray-800">${C.TOPONIEM}</span>`,C.PLAATS&&(q+=`<br/><span class="text-xs text-gray-500">${C.PLAATS}</span>`)),(C.AARD_VINDP||C.Aard_vindp)&&(q+=`<br/><span class="text-sm text-gray-700">Aard: ${C.AARD_VINDP||C.Aard_vindp}</span>`),C.BEGIN_PER&&C.EIND_PER&&(q+=`<br/><span class="text-sm text-purple-700">Periode: ${C.BEGIN_PER} - ${C.EIND_PER}</span>`),(C.AARD_OPM||C.Aard_opmer)&&(q+=`<br/><span class="text-xs text-gray-600 italic">${C.AARD_OPM||C.Aard_opmer}</span>`),C.Gemeente&&(q+=`<br/><span class="text-sm text-gray-600">Gemeente: ${C.Gemeente}</span>`),C.Bron&&(q+=`<br/><span class="text-xs text-gray-500">Bron: ${C.Bron}</span>`),C.Bron_besch&&(q+=`<br/><span class="text-xs text-gray-500">${C.Bron_besch}</span>`),C.Dat_st_z&&C.Dat_ei_z&&(q+=`<br/><span class="text-sm text-purple-700">Datering: ${C.Dat_st_z} - ${C.Dat_ei_z}</span>`),C.Begin&&C.Einde&&(q+=`<br/><span class="text-sm text-purple-700">Periode: ${C.Begin} - ${C.Einde}</span>`),C.Uiterwaard&&(q+=`<br/><span class="text-sm font-semibold">${C.Uiterwaard}</span>`),C.rivier&&(q+=`<br/><span class="text-sm text-blue-600">Rivier: ${C.rivier}</span>`),C.Beschrijvi&&(q+=`<br/><span class="text-sm text-gray-700">${C.Beschrijvi}</span>`),C.leisure&&C.name){const Y=C.leisure==="playground"?"Speeltuin":C.leisure==="park"?"Park":C.leisure==="swimming_area"?"Zwemplek":null;Y&&(q+=`<br/><span class="text-xs text-green-600">${Y}</span>`)}if((C.tourism==="museum"||C.museum)&&C.name&&(q+='<br/><span class="text-xs text-purple-600">Museum</span>'),(C.leisure==="swimming_area"||C.sport==="swimming")&&C.name&&(q+='<br/><span class="text-xs text-cyan-600">Zwemplek</span>'),C.osm_id&&C.address!==void 0&&(q+='<br/><span class="text-xs text-lime-600">Kringloopwinkel</span>',C.address&&(q+=`<br/><span class="text-xs text-gray-500">${C.address}</span>`),C.phone&&(q+=`<br/><span class="text-xs text-gray-600">${C.phone}</span>`)),C.site_type==="tumulus"){const Y=Oe.getGeometry()?.getCoordinates();let z="",se="";if(Y){const Ne=sn(Y),xe=Ne[0],Xe=Ne[1];xe>5.5&&xe<6.3&&Xe>52&&Xe<52.5?(z="Veluwe",se="De Veluwe heeft de grootste concentratie grafheuvels van Nederland. Veel heuvels liggen in grafvelden met tientallen heuvels bij elkaar."):xe>6.2&&xe<7.1&&Xe>52.6&&Xe<53.3?(z="Drenthe",se="Drenthe is beroemd om zijn prehistorische monumenten. Naast hunebedden liggen hier honderden grafheuvels uit de Bronstijd."):xe>4.5&&xe<6&&Xe>51.3&&Xe<51.9?(z="Noord-Brabant",se="Op de Brabantse zandgronden liggen veel grafheuvels, vaak in kleine groepjes op hogere gronden."):xe>5.5&&xe<6.3&&Xe>50.7&&Xe<51.6?(z="Limburg",se="De Limburgse heuvels en plateaus herbergen grafheuvels uit verschillende periodes, van Bronstijd tot Romeinse tijd."):xe>5&&xe<5.6&&Xe>52&&Xe<52.4&&(z="Utrechtse Heuvelrug",se="De stuwwallen van de Utrechtse Heuvelrug en het Gooi waren al in de prehistorie bewoond. Grafheuvels markeren de laatste rustplaats van de vroege bewoners.")}q+='<br/><span class="text-sm text-amber-700">Grafheuvel uit de Bronstijd of IJzertijd</span>',z&&(q+=`<br/><span class="text-sm text-gray-500">${z}</span>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">Een grafheuvel is een kunstmatige heuvel over een of meerdere graven. De meeste Nederlandse grafheuvels zijn 3000 tot 4000 jaar oud, uit de Bronstijd (2000-800 v.Chr.) of vroege IJzertijd.</div>',se&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Over deze regio</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${se}</div>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe herken je een grafheuvel?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">Grafheuvels zijn vaak ronde, lage heuvels van 10-30 meter doorsnee en 1-3 meter hoog. Ze liggen meestal op zandgronden, vaak in groepjes (grafvelden). Let op de kenmerkende ronde vorm in het landschap.</div>',C.wikidata?(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',q+=`<div class="text-sm text-gray-700 mt-1"><a href="https://www.wikidata.org/wiki/${C.wikidata}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk op Wikidata</a></div>`):(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',q+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Grafheuvel" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Lees meer over grafheuvels op Wikipedia</a></div>')}if(C.historic==="castle"||C.castle_type){const Y={manor:{label:"Landhuis",uitleg:"Een landhuis of havezate was het woonhuis van een adellijke familie. Vaak met een landgoed eromheen.",vondsten:"Sieraden, gespen, munten, aardewerk van rijke bewoners"},stately:{label:"Statig huis",uitleg:"Een groot en deftig woonhuis, vaak van welgestelde families. Soms met kasteelachtige kenmerken.",vondsten:"Huishoudelijke voorwerpen, munten, knopen, aardewerk"},fortress:{label:"Fort/Vesting",uitleg:"Een versterkte militaire bouwwerk, gebouwd om een gebied te verdedigen.",vondsten:"Militaire voorwerpen, kogels, gespen, uniformonderdelen"},defensive:{label:"Verdedigingskasteel",uitleg:"Een kasteel gebouwd voor verdediging, met dikke muren, een gracht en torens.",vondsten:"Wapens, harnasonderdelen, pijlpunten, middeleeuwse munten"},palace:{label:"Paleis",uitleg:"Een groot en luxueus gebouw voor koningen, prinsen of zeer rijke families.",vondsten:"Luxe voorwerpen, sieraden, zegels, zeldzame munten"},castrum:{label:"Romeins fort",uitleg:"Een Romeins legerkamp of fort. Deze zijn bijna 2000 jaar oud!",vondsten:"Romeinse munten, fibulae, militaria, aardewerk"},citadel:{label:"Citadel",uitleg:"Een sterk versterkte kern binnen een stad, als laatste verdedigingslinie.",vondsten:"Militaire voorwerpen uit verschillende periodes"}},z=C.castle_type?Y[C.castle_type]:null,se=z?.label||"Kasteel";if(q+=`<br/><span class="text-sm text-purple-600">${se}</span>`,C.start_date&&(q+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${C.start_date}</span>`),C.heritage&&(q+='<br/><span class="text-sm text-amber-600">Rijksmonument</span>'),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',z?q+=`<div class="text-sm text-gray-700 mt-1">${z.uitleg}</div>`:q+='<div class="text-sm text-gray-700 mt-1">Een historisch kasteel of adellijk huis. Kastelen waren vaak het middelpunt van macht en rijkdom in een gebied.</div>',q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',z?q+=`<div class="text-sm text-gray-700 mt-1">${z.vondsten}</div>`:q+='<div class="text-sm text-gray-700 mt-1">Munten, sieraden, gespen, aardewerk en andere voorwerpen van de vroegere bewoners.</div>',C.wikipedia||C.website){if(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',C.wikipedia){const Ne=C.wikipedia.startsWith("http")?C.wikipedia:`https://nl.wikipedia.org/wiki/${C.wikipedia.replace(/^nl:/,"")}`;q+=`<div class="text-sm text-gray-700 mt-1"><a href="${Ne}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}C.website&&(q+=`<div class="text-sm text-gray-700 mt-1"><a href="${C.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Website bezoeken</a></div>`)}}if(C.historic==="ruins"){const Y=C.ruins_type||"";let z="Rune",se="Een rune is wat overblijft van een oud gebouw. Het kan een kerk, kasteel, molen of ander bouwwerk zijn geweest.",Ne="Baksteenfragmenten, aardewerk, metalen voorwerpen van vroegere bewoners of gebruikers";if(Y.toLowerCase().includes("church")||Y.toLowerCase().includes("kerk")?(z="Kerkrune",se="De overblijfselen van een oude kerk. Vaak nog te herkennen aan de fundering of een paar muren.",Ne="Religieuze voorwerpen, munten van kerkgangers, knopen, gespen"):Y.toLowerCase().includes("castle")||Y.toLowerCase().includes("kasteel")?(z="Kasteelrune",se="De resten van een middeleeuws kasteel. Soms is alleen de gracht of fundering nog zichtbaar.",Ne="Middeleeuwse munten, sieraden, harnasonderdelen, pijlpunten"):Y.toLowerCase().includes("mill")||Y.toLowerCase().includes("molen")?(z="Molenrune",se="Wat rest van een oude molen. Vaak nog te zien aan de stenen fundering of de molenberg.",Ne="Gereedschap, munten, huishoudelijke voorwerpen"):Y.toLowerCase().includes("fort")&&(z="Fortrune",se="De overblijfselen van een militair fort of verdedigingswerk.",Ne="Militaire voorwerpen, kogels, gespen, uniformonderdelen"),q+=`<br/><span class="text-sm text-gray-600">${z}</span>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${se}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${Ne}</div>`,C.description&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Beschrijving</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.description}</div>`),C.wikipedia){const xe=C.wikipedia.startsWith("http")?C.wikipedia:`https://${C.wikipedia.split(":")[0]||"nl"}.wikipedia.org/wiki/${C.wikipedia.replace(/^[a-z]{2}:/,"")}`;q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${xe}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(C.bunker_type||C.name&&(C.name.toLowerCase().includes("bunker")||C.name.toLowerCase().includes("kazemat")||C.name.toLowerCase().includes("schuilplaats"))){const Y={munitions:"Munitiebunker",personnel_shelter:"Personeelsschuilplaats",personell_shelter:"Personeelsschuilplaats",command:"Commandobunker",gun_emplacement:"Geschutsbunker",mg_nest:"Mitrailleursnest",technical:"Technische bunker",storage:"Opslagbunker",tobruk:"Tobruk",kazemat:"Kazemat",Flak:"Luchtafweerstelling",hardened_aircraft_shelter:"Vliegtuigshelter",shelter:"Schuilkelder",observation:"Observatiebunker",anti_aircraft:"Luchtafweerstelling"},z=C.name||"",se=C.bunker_type?Y[C.bunker_type]||C.bunker_type:"";z&&z!=="Bunker"&&(q+=`<br/><span class="text-sm font-semibold text-gray-700">${z}</span>`),se&&se!==z&&(q+=`<br/><span class="text-xs text-gray-500">${se}</span>`);const Ne=Oe.getGeometry()?.getCoordinates();let xe="",Xe="",Je="";if(Ne){const ht=sn(Ne),mt=ht[0],St=ht[1],Bt=mt<4.8||mt<5.2&&St>51.8&&St<53.5,_r=mt>4.2&&mt<4.4&&St>52&&St<52.15,Ea=mt>4.5&&mt<4.7&&St>52.4&&St<52.5,Di=mt>4&&mt<4.2&&St>51.95&&St<52.05,ei=mt<4.2&&St<51.6,wa=mt>5.2&&mt<5.8&&St>51.9&&St<52.3;_r?(xe="Deze bunker maakt deel uit van de Atlantikwall bij Scheveningen. De Duitsers bouwden hier tijdens WOII zo'n 80 bunkers in de duinen. De muren zijn soms 3 meter dik beton. Voor deze bunkers moesten 138.000 mensen uit Den Haag en Scheveningen hun huis verlaten.",Xe="https://nl.wikipedia.org/wiki/Atlantikwall_Museum_Scheveningen",Je="Atlantikwall Museum Scheveningen"):Ea?(xe="Deze bunker hoort bij Festung IJmuiden, een van de zwaarst verdedigde punten van de Atlantikwall. De Duitsers bouwden hier bunkers om de haventoegang te beschermen. Er zijn nu rondleidingen door het Bunkermuseum.",Xe="https://www.bunkermuseum.nl/",Je="Bunkermuseum IJmuiden"):Di?(xe="Deze bunker maakt deel uit van de Atlantikwall bij Hoek van Holland. Dit was een strategisch punt voor de Duitsers vanwege de Nieuwe Waterweg. Veel bunkers zijn nog te bezoeken.",Xe="https://www.atlantikwallhoekvanholland.nl/",Je="Atlantikwall Hoek van Holland"):ei?(xe="Deze bunker hoort bij de Atlantikwall in Zeeland. De Duitsers verdedigden hier de Westerschelde en de kust. Bij Zoutelande en Westkapelle zijn veel bunkers bewaard gebleven.",Xe="https://www.bunkermuseumzoutelande.nl/",Je="Bunkermuseum Zoutelande"):Bt?(xe="Deze bunker maakt deel uit van de Atlantikwall: de Duitse verdedigingslinie langs de hele kust van Europa. In Nederland bouwden de Duitsers duizenden bunkers tussen 1942 en 1944.",Xe="https://nl.wikipedia.org/wiki/Atlantikwall",Je="Atlantikwall (Wikipedia)"):wa?(xe="Deze bunker hoort mogelijk bij de Grebbelinie of de Nieuwe Hollandse Waterlinie. Dit waren Nederlandse verdedigingslinies die de Duitsers na 1940 versterkten met bunkers.",Xe="https://nl.wikipedia.org/wiki/Grebbelinie",Je="Grebbelinie (Wikipedia)"):(xe="Een bunker uit de Tweede Wereldoorlog. De meeste bunkers in Nederland zijn gebouwd tussen 1940 en 1944, als onderdeel van de Duitse verdediging of langs bestaande Nederlandse linies.",Xe="https://nl.wikipedia.org/wiki/Atlantikwall",Je="WOII bunkers (Wikipedia)")}else xe="Een bunker uit de Tweede Wereldoorlog.",Xe="https://nl.wikipedia.org/wiki/Atlantikwall",Je="WOII bunkers (Wikipedia)";q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${xe}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je vinden?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">Bij bunkers worden soms voorwerpen gevonden zoals patronen, uniformknopen, gespen en persoonlijke spullen van soldaten.</div>',q+='<div class="mt-2 text-xs text-gray-500 italic">Let op: betreed nooit een bunker zonder toestemming. Raak munitieresten niet aan.</div>',q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',q+='<div class="text-sm text-gray-700 mt-1">',q+=`<a href="${Xe}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${Je}</a>`,C.website?q+=`<br/><a href="${C.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>`:q+='<br/><a href="https://www.tracesofwar.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>',q+="</div>"}if(C.historic==="battlefield"){const Y=C.name||"Onbekend slagveld",se={"Slag om Arnhem":{periode:"September 1944",samenvatting:"De Slag om Arnhem was onderdeel van Operatie Market Garden. Geallieerde parachutisten probeerden de brug over de Rijn te veroveren. Na negen dagen hevige gevechten moesten ze zich terugtrekken. Van de 10.000 Britse soldaten werden er 1.500 gedood en 6.500 krijgsgevangen gemaakt.",watZieJe:"Er zijn veel monumenten en infoborden. Het Airborne Museum in Oosterbeek vertelt het hele verhaal. Elk jaar in september is er een herdenking.",uitkomst:"De geallieerden verloren de slag. Nederland bleef nog tot mei 1945 bezet.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Arnhem"},"Slag om de Sloedam":{periode:"1-2 november 1944",samenvatting:"Canadese soldaten vielen de Sloedam aan om Walcheren te bevrijden. De dam was smal en de Duitsers verdedigden fel. Veel soldaten sneuvelden bij deze bloedige aanval.",watZieJe:"Bij de dam staat een monument voor de gevallen Canadezen. Er zijn infoborden die de slag uitleggen.",uitkomst:"De Canadezen wonnen na zware verliezen. Dit opende de weg naar de bevrijding van Walcheren.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_de_Sloedam"},"Slag bij Heiligerlee (1568)":{periode:"23 mei 1568",samenvatting:"De eerste veldslag van de Tachtigjarige Oorlog. Lodewijk van Nassau versloeg het Spaanse leger. Zijn broer Adolf sneuvelde tijdens de strijd.",watZieJe:"In Heiligerlee staat het Slag bij Heiligerlee monument. Het klooster waar Adolf van Nassau begraven ligt is nog te bezoeken.",uitkomst:"De opstandelingen wonnen, maar dit was pas het begin van 80 jaar oorlog.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_bij_Heiligerlee_(1568)"},Overloon:{periode:"Oktober 1944",samenvatting:"Bij Overloon vochten Britten en Amerikanen tegen de Duitsers. Het was een van de zwaarste tankgevechten op Nederlandse bodem. Het dorp werd volledig verwoest.",watZieJe:"Het Oorlogsmuseum Overloon staat op het voormalige slagveld. Je kunt tanks, vliegtuigen en andere voertuigen zien.",uitkomst:"De geallieerden wonnen na wekenlange gevechten.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Overloon"},"Slagveld Lanakerveld":{periode:"1568",samenvatting:"Onderdeel van de Nederlandse opstand tegen Spanje. Hier vonden gevechten plaats tijdens de beginjaren van de Tachtigjarige Oorlog.",watZieJe:"Het gebied is nu grotendeels landbouwgrond. Lokaal zijn er soms infoborden.",uitkomst:"Onderdeel van de lange strijd tegen de Spaanse overheersing.",wikiUrl:"https://nl.wikipedia.org/wiki/Tachtigjarige_Oorlog"},Blessebrugschans:{periode:"Diverse periodes",samenvatting:"Een historische schans die meerdere keren werd gebruikt in militaire conflicten.",watZieJe:"De resten van de schans zijn nog zichtbaar in het landschap.",uitkomst:"De schans speelde een rol in verschillende conflicten.",wikiUrl:"https://nl.wikipedia.org/wiki/Schans_(vestingwerk)"}}[Y];if(Y!=="Onbekend slagveld"&&Y!=="Historisch slagveld"&&(q+=`<br/><span class="text-sm font-semibold text-red-700">${Y}</span>`),se)q+=`<br/><span class="text-xs text-gray-500">${se.periode}</span>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${se.samenvatting}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe liep het af?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${se.uitkomst}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je zien?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${se.watZieJe}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',q+='<div class="text-sm text-gray-700 mt-1">',q+=`<a href="${se.wikiUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a>`,Y.includes("Arnhem")&&(q+='<br/><a href="https://www.airbornemuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Airborne Museum Oosterbeek</a>'),Y.includes("Overloon")&&(q+='<br/><a href="https://www.oorlogsmuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Oorlogsmuseum Overloon</a>'),q+="</div>";else if(C.date&&(q+=`<br/><span class="text-xs text-gray-500">${C.date}</span>`),C.description?(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.description}</div>`):(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">Op deze plek vonden historische gevechten plaats. Zoek lokaal naar infoborden of monumenten.</div>'),C.wikipedia){const Ne=C.wikipedia.startsWith("http")?C.wikipedia:`https://nl.wikipedia.org/wiki/${C.wikipedia.replace("nl:","")}`;q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',q+=`<div class="text-sm text-gray-700 mt-1"><a href="${Ne}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(C.bron==="Paleobiology Database"){const Y=xe=>{const Xe={Mollusca:"weekdieren zoals schelpen en slakken",Brachiopoda:"armpotigen, schelp-achtige dieren",Echinodermata:"stekelhuidigen zoals zee-egels en zeesterren",Chordata:"gewervelde dieren",Arthropoda:"geleedpotigen zoals kreeften en trilobieten",Cnidaria:"neteldieren zoals koralen en kwallen",Bryozoa:"mosdiertjes",Foraminifera:"eencellige schelpdieren",Plantae:"planten",Crinoidea:"zeelelies",Gastropoda:"slakken",Bivalvia:"tweekleppigen zoals mossels en oesters",Cephalopoda:"koppotigen zoals inktvissen en ammonieten",Trilobita:"trilobieten, uitgestorven kreeftachtigen",Mammalia:"zoogdieren",Reptilia:"reptielen",Pisces:"vissen",Amphibia:"amfibien"};for(const[Je,ht]of Object.entries(Xe))if(xe.toLowerCase().includes(Je.toLowerCase()))return ht;return""},z=xe=>{const Xe={Cambrium:"541-485 miljoen jaar geleden",Ordovicium:"485-444 miljoen jaar geleden",Siluur:"444-419 miljoen jaar geleden",Devoon:"419-359 miljoen jaar geleden",Carboon:"359-299 miljoen jaar geleden",Perm:"299-252 miljoen jaar geleden",Trias:"252-201 miljoen jaar geleden",Jura:"201-145 miljoen jaar geleden",Krijt:"145-66 miljoen jaar geleden",Paleogeen:"66-23 miljoen jaar geleden",Neogeen:"23-2,6 miljoen jaar geleden",Kwartair:"2,6 miljoen jaar - nu",Pleistoceen:"2,6 miljoen - 11.700 jaar geleden",Holoceen:"11.700 jaar geleden - nu"};for(const[Je,ht]of Object.entries(Xe))if(xe.toLowerCase().includes(Je.toLowerCase()))return ht;return""},se=xe=>{const Xe={limestone:"kalksteen",sandstone:"zandsteen",shale:"schalie",clay:"klei",sand:"zand",gravel:"grind",marl:"mergel",chalk:"krijt",mudstone:"moddersteen",siltstone:"siltsteen"};let Je=xe;for(const[ht,mt]of Object.entries(Xe))Je=Je.replace(new RegExp(ht,"gi"),mt);return Je},Ne=xe=>{const Xe={marine:"zee",coastal:"kust",terrestrial:"land",fluvial:"rivier",lacustrine:"meer",reef:"rif",deltaic:"delta",shallow:"ondiep water",deep:"diep water"};let Je=xe;for(const[ht,mt]of Object.entries(Xe))Je=Je.replace(new RegExp(ht,"gi"),mt);return Je};if(C.vindplaats&&(q+=`<br/><span class="text-xs text-gray-600">${C.vindplaats}</span>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',C.taxonomie&&C.taxonomie!=="Onbekend"){const xe=Y(C.taxonomie);xe?(q+=`<div class="text-sm text-gray-700 mt-1">${xe}</div>`,q+=`<div class="text-xs text-gray-500 italic">(${C.taxonomie})</div>`):q+=`<div class="text-sm text-gray-700 mt-1">${C.taxonomie}</div>`}if(C.aantal_fossielen){const xe=parseInt(C.aantal_fossielen),Xe=xe>100?"Veel fossielen gevonden op deze locatie.":xe>10?"Meerdere fossielen gevonden op deze locatie.":`${C.aantal_fossielen} fossiel${xe>1?"en":""} gevonden op deze locatie.`;q+=`<div class="text-sm text-gray-600 mt-1">${Xe}</div>`}if(C.periode&&C.periode!=="Onbekend"){q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wanneer leefden deze dieren?</span></div>';const xe=z(C.periode);q+=`<div class="text-sm text-gray-700 mt-1">${C.periode}</div>`,xe&&(q+=`<div class="text-sm text-gray-600">${xe}</div>`),C.ouderdom&&C.ouderdom!=="Onbekend"&&(q+=`<div class="text-sm text-gray-600">Ouderdom: ${C.ouderdom}</div>`)}(C.gesteente||C.formatie||C.milieu)&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">In wat voor gesteente?</span></div>',C.gesteente&&(q+=`<div class="text-sm text-gray-700 mt-1">${se(C.gesteente)}</div>`),C.formatie&&(q+=`<div class="text-sm text-gray-600">Formatie: ${C.formatie}</div>`,C.lid&&(q+=`<div class="text-sm text-gray-600 ml-3">Lid: ${C.lid}</div>`)),C.milieu&&(q+=`<div class="text-sm text-gray-600">Leefomgeving: ${Ne(C.milieu)}</div>`))}if(C.layerType==="fossielHotspot"){const Y=[];if(C.type&&Y.push(C.type),C.region&&Y.push(C.region),C.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};Y.push(z[C.country]||C.country)}if(Y.length>0&&(q+=`<br/><span class="text-xs text-gray-600">${Y.join("  ")}</span>`),(C.finds||C.period)&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',C.finds&&(q+=`<div class="text-sm text-gray-700 mt-1">${C.finds}</div>`),C.period&&(q+=`<div class="text-sm text-gray-600 mt-1">Periode: ${C.period}</div>`),C.geology&&(q+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${C.geology}</div>`)),C.access||C.tips){if(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',C.access){const se=C.access.toLowerCase().includes("verboden")||C.access.toLowerCase().includes("niet toegankelijk")?"text-red-600":"text-gray-700";q+=`<div class="text-sm ${se} mt-1">${C.access}</div>`}C.tips&&(q+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${C.tips}</div>`)}}if(C.layerType==="mineralenHotspot"){const Y=[];if(C.region&&Y.push(C.region),C.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};Y.push(z[C.country]||C.country)}if(Y.length>0&&(q+=`<br/><span class="text-xs text-gray-600">${Y.join("  ")}</span>`),C.minerals&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.minerals}</div>`,C.geology&&(q+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${C.geology}</div>`)),C.access||C.tips){if(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',C.access){const se=C.access.toLowerCase().includes("verboden")||C.access.toLowerCase().includes("niet toegankelijk")||C.access.toLowerCase().includes("gesloten")?"text-red-600":"text-gray-700";q+=`<div class="text-sm ${se} mt-1">${C.access}</div>`}C.tips&&(q+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${C.tips}</div>`)}}if(C.layerType==="goudrivier"){const Y=[];if(C.river&&Y.push(C.river),C.region&&Y.push(C.region),C.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};Y.push(z[C.country]||C.country)}if(Y.length>0&&(q+=`<br/><span class="text-xs text-gray-600">${Y.join("  ")}</span>`),(C.goldType||C.origin)&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',C.goldType&&(q+=`<div class="text-sm text-gray-700 mt-1">${C.goldType}</div>`),C.origin&&(q+=`<div class="text-sm text-gray-600 mt-1">Herkomst: ${C.origin}</div>`)),C.legal||C.tips){if(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Mag ik hier zoeken?</span></div>',C.legal){const se=C.legal.includes("VERBODEN")?"text-red-600 font-semibold":"text-gray-700";q+=`<div class="text-sm ${se} mt-1">${C.legal}</div>`}C.tips&&(q+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${C.tips}</div>`)}}if(C.layerType==="wandelroute"){const Y=[];if(C.region&&Y.push(C.region),C.country){const z={NL:"Nederland",BE:"Belgi"};Y.push(z[C.country]||C.country)}if(Y.length>0&&(q+=`<br/><span class="text-xs text-gray-600">${Y.join("  ")}</span>`),C.distance||C.duration){const z=C.distance?`${C.distance} km`:"",se=C.duration?`${C.duration}`:"",Ne=[z,se].filter(Boolean).join("  ");Ne&&(q+=`<br/><span class="text-sm text-green-700 font-medium">${Ne}</span>`)}(C.description||C.highlights)&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat ga je zien?</span></div>',C.description&&(q+=`<div class="text-sm text-gray-700 mt-1">${C.description}</div>`),C.highlights&&(q+=`<div class="text-sm text-gray-600 mt-1">Hoogtepunten: ${C.highlights}</div>`)),C.startAddress&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waar begin ik?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.startAddress}</div>`),C.url&&(q+=`<div class="mt-3"><a href="${C.url}" target="_blank" class="text-sm text-blue-600 hover:underline">Bekijk route en download GPX</a></div>`)}if(C.layerType==="hunebed"){C.period&&(q+=`<br/><span class="text-sm text-purple-700">Periode: ${C.period}</span>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',C.description&&(q+=`<div class="text-sm text-gray-700 mt-1">${C.description}</div>`);const Y=[];if(C.stones){const z=C.stones.toLowerCase(),se=z.match(/(\d+)\s*dekst[^\s,]*/i),Ne=z.match(/(\d+)\s*draagst[^\s,]*/i),xe=z.match(/(\d+)\s*sluitst[^\s,]*/i),Xe=z.match(/(\d+)\s*poortst[^\s,]*/i),Je=z.match(/(\d+)\s*gangdekst[^\s,]*/i),ht=z.match(/(\d+)\s*gangzijst[^\s,]*/i);se&&Y.push(`${se[1]} deksteen${parseInt(se[1])>1?"en":""} (de grote steen${parseInt(se[1])>1?"en":""} bovenop)`),Ne&&Y.push(`${Ne[1]} draagstenen (de stenen die de dekstenen dragen)`),xe&&Y.push(`${xe[1]} sluitsteen${parseInt(xe[1])>1?"en":""} (afsluiting aan de korte zijden)`),Xe&&Y.push(`${Xe[1]} poortsteen${parseInt(Xe[1])>1?"en":""} (bij de ingang)`),Je&&Y.push(`${Je[1]} gangdeksteen${parseInt(Je[1])>1?"en":""} (boven de toegangsgang)`),ht&&Y.push(`${ht[1]} gangzijstenen (langs de toegangsgang)`)}if(C.length&&Y.push(`Een grafkamer van ${C.length} lang`),C.width&&Y.push(`${C.width}`),Y.length>0&&(q+='<div class="text-sm text-gray-700 mt-1">Het hunebed heeft:</div>',q+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',Y.forEach(z=>{q+=`<li>${z}</li>`}),q+="</ul>"),C.notable){const z=C.notable.toLowerCase();let se="Wat is hier bijzonder?";z.includes("grootste")?se="Waarom is dit het grootste hunebed?":z.includes("klein")||z.includes("kindhunebed")?se="Waarom is dit hunebed zo klein?":z.includes("cluster")||z.includes("naast elkaar")?se="Waarom liggen hier meerdere hunebedden?":(z.includes("enige")||z.includes("westelijk")||z.includes("noordelijk"))&&(se="Wat maakt deze locatie bijzonder?"),q+=`<div class="mt-3"><span class="text-sm font-semibold text-gray-800">${se}</span></div>`,q+=`<div class="text-sm text-gray-700 mt-1">${C.notable}</div>`}q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de Trechterbeker cultuur?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">De Trechterbeker cultuur is de naam voor de mensen die 5.000 jaar geleden in Nederland woonden. Ze maakten potten met een trechter-vorm. Daarom heten ze zo. Deze mensen bouwden de hunebedden als graven voor hun doden.</div>',C.finds&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.finds}</div>`),C.museum&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Museum in de buurt</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.museum}</div>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',C.access?q+=`<div class="text-sm text-gray-700 mt-1">${C.access}</div>`:q+='<div class="text-sm text-gray-700 mt-1">Je kunt dit hunebed gratis bezoeken.</div>',C.wikipedia&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${C.wikipedia}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`)}if((C.inventarisnummer||C.locatie_naam)&&(C.locatie_naam&&(q+=`<br/><span class="text-sm font-semibold">${C.locatie_naam}</span>`),C.inventarisnummer&&(q+=`<br/><span class="text-xs text-gray-500">CAI: ${C.inventarisnummer}</span>`),C.datering_tekst&&(q+=`<br/><span class="text-sm text-purple-700">${C.datering_tekst}</span>`)),(C.veensoort||C.dikte)&&(C.veensoort&&(q+=`<br/><span class="text-sm text-amber-700">${C.veensoort}</span>`),C.dikte&&(q+=`<br/><span class="text-xs text-gray-600">Dikte: ${C.dikte}</span>`)),C.nature&&C.debut){q+=`<br/><span class="text-sm text-purple-700">${C.nature}</span>`;const Y=C.debut===C.fin?C.debut:`${C.debut} - ${C.fin}`;Y&&(q+=`<br/><span class="text-sm text-gray-700">Periode: ${Y}</span>`),C.structure&&(q+=`<br/><span class="text-xs text-gray-600">${C.structure}</span>`),C.commune&&(q+=`<br/><span class="text-xs text-gray-500">${C.commune}</span>`),C.decouvert&&(q+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${C.decouvert}</span>`),C.numero&&(q+=`<br/><span class="text-xs text-gray-400">${C.numero}</span>`)}if((C.NATURE_OPE||C.CODE_OPERA)&&(C.TITRE&&(q+=`<br/><span class="text-sm font-semibold">${C.TITRE}</span>`),C.NATURE_OPE&&(q+=`<br/><span class="text-sm text-amber-700">${C.NATURE_OPE}</span>`),C.AUTEUR&&(q+=`<br/><span class="text-xs text-gray-600">Auteur: ${C.AUTEUR}</span>`),C.DATE&&(q+=`<br/><span class="text-xs text-gray-500">Datum: ${C.DATE}</span>`),C.COMMUNE&&(q+=`<br/><span class="text-xs text-gray-500">${C.COMMUNE}</span>`)),C.type_protection&&(C.n_site||C.t_site)){const Y=C.type_protection==="Classe"?"text-red-700":"text-amber-700";q+=`<br/><span class="text-sm ${Y}">${C.type_protection}</span>`,C.n_site&&(q+=`<br/><span class="text-sm font-semibold">${C.n_site}</span>`),C.t_site&&(q+=`<br/><span class="text-xs text-gray-600">${C.t_site}</span>`),C.c_site&&(q+=`<br/><span class="text-xs text-gray-500">Code: ${C.c_site}</span>`),C.d_creation&&(q+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${C.d_creation}</span>`)}if(C.type_protection&&C.cod_diren){const Y=C.type_protection==="Classe"?"text-red-700":"text-amber-700";if(q+=`<br/><span class="text-sm ${Y}">${C.type_protection}</span>`,C.proced&&(q+=`<br/><span class="text-xs text-gray-600">${C.proced}</span>`),C.d_proced&&(q+=`<br/><span class="text-xs text-gray-500">Date: ${C.d_proced}</span>`),C.comment){const z=String(C.comment).slice(0,150);q+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(C.comment).length>150?"...":""}</span>`}}if(C.type_protection&&C.nomsite){const Y=C.type_protection==="Classe"?"text-red-700":"text-amber-700";if(q+=`<br/><span class="text-sm ${Y}">${C.type_protection}</span>`,C.caractere&&(q+=`<br/><span class="text-xs text-gray-600">${C.caractere}</span>`),C.datedecis&&(q+=`<br/><span class="text-xs text-gray-500">Date: ${C.datedecis}</span>`),C.descriptio){const z=String(C.descriptio).slice(0,150);q+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(C.descriptio).length>150?"...":""}</span>`}}if(C.secteur&&C.style){if(q+=`<br/><span class="text-sm text-gray-700">${C.secteur}</span>`,C["sous-secteur"]&&(q+=`<br/><span class="text-xs text-gray-600">${C["sous-secteur"]}</span>`),C.description){const Y=String(C.description).slice(0,150);q+=`<br/><span class="text-xs text-gray-600 italic">${Y}${String(C.description).length>150?"...":""}</span>`}C.url&&(q+=`<br/><a href="${C.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(C.nature_operation||C.synthese){C.nature_operation&&(q+=`<br/><span class="text-sm text-red-700">${C.nature_operation}</span>`),C.responsable_operation&&(q+=`<br/><span class="text-xs text-gray-600">Responsable: ${C.responsable_operation}</span>`),C.date_operation&&(q+=`<br/><span class="text-xs text-gray-500">Datum: ${C.date_operation}</span>`);const Y=[];if(C.prehistoire==="Oui"&&Y.push("Prehistorie"),C.protohistoire==="Oui"&&Y.push("Protohistorie"),C.antiquite==="Oui"&&Y.push("Romeins"),C.moyen_age==="Oui"&&Y.push("Middeleeuwen"),C.temps_modernes==="Oui"&&Y.push("Moderne tijd"),Y.length>0&&(q+=`<br/><span class="text-sm text-purple-700">${Y.join(", ")}</span>`),C.adresse&&(q+=`<br/><span class="text-xs text-gray-500">${C.adresse}</span>`),C.synthese){const z=String(C.synthese).slice(0,200);q+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(C.synthese).length>200?"...":""}</span>`}}if(C.operator&&(q+=`<br/><span class="text-sm text-gray-600">${C.operator}</span>`),C.opening_hours){const Y=Nxe(String(C.opening_hours));q+=`<br/><span class="text-xs text-green-600">Open: ${Y}</span>`}if(C.website&&(q+=`<br/><a href="${C.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`),C.addr_street){const Y=[C.addr_street,C.addr_housenumber,C.addr_postcode].filter(Boolean).join(" ");q+=`<br/><span class="text-xs text-gray-500">${Y}</span>`}const ft=C.description||C.omschrijving||C.descr||C.info;ft&&ft!==qe&&(q+=`<br/><span class="text-sm text-gray-600">${ft}</span>`),re.push(q)}const De=n.getView().getResolution()||1,Ve=await ee(ne.coordinate,De);re.push(...Ve);const Ae=await Q;if(re.length===0&&Ae!==null){const Oe=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${Ae.toFixed(2)} m NAP</span>
          </div>`;re.push(Oe)}if(re.length>0&&Ae!==null&&(re[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${Ae.toFixed(2)} m NAP</span>
        </div>`),re.length>0){r(re),s(0),console.log(` KLIK OPGESLAGEN: [${ne.coordinate[0].toFixed(0)}, ${ne.coordinate[1].toFixed(0)}]`),u(ne.coordinate),d(!1);const Oe=sn(ne.coordinate);T(`https://www.google.com/maps/dir/?api=1&destination=${Oe[1]},${Oe[0]}`),o(!0)}};return n.on("click",j),()=>{n.un("click",j)}},[n]);const ce=()=>{o(!1),n&&f&&(AI(n),d(!1))},Re=(me,ee)=>{ee.offset.y>100&&ce()};return y.jsx(_i,{children:a&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:ce}),y.jsxs(Wt.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl",style:{fontSize:`${14*R/100}px`},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:Re,children:[y.jsx("div",{className:"flex justify-center pt-2 pb-1",children:y.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),y.jsxs("div",{className:"flex items-center gap-2 px-3 pb-2 border-b border-gray-100",children:[B&&y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx("button",{onClick:Ie,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Vorige laag",children:y.jsx(wse,{size:18})}),y.jsxs("span",{className:"text-gray-500 font-medium min-w-[32px] text-center",style:{fontSize:"0.857em"},children:[i+1,"/",t.length]}),y.jsx("button",{onClick:Le,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Volgende laag",children:y.jsx(SE,{size:18})})]}),y.jsx("span",{className:"flex-1 font-semibold text-gray-800 truncate",style:{fontSize:"1em"},children:M||"Info"}),w&&y.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 flex items-center justify-center text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors flex-shrink-0",title:"Open in Google Maps","aria-label":"Open in Google Maps",children:y.jsx(TE,{size:16})}),y.jsx("button",{onClick:ce,className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0","aria-label":"Sluiten",children:y.jsx(eo,{size:18})})]}),y.jsx("div",{className:"px-4 py-3 max-h-[45vh] overflow-y-auto select-text",style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:V}}),y.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2",children:[y.jsx(kae,{size:14,className:"text-gray-400 flex-shrink-0"}),y.jsx("input",{type:"range",min:"80",max:"150",value:R,onChange:me=>N(parseInt(me.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),y.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[R,"%"]})]}),D&&E&&y.jsx("div",{className:"px-4 pb-4",children:y.jsxs("button",{onClick:()=>{e(E),o(!1),v(null)},className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[y.jsx(g1,{size:16}),y.jsx("span",{children:"Vondst verwijderen"})]})}),W&&l&&y.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:f?y.jsxs("button",{onClick:Ce,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[y.jsx(fI,{size:16}),y.jsx("span",{children:"Hoogtekaart verbergen"})]}):y.jsx("button",{onClick:Fe,disabled:g,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${g?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:g?y.jsxs(y.Fragment,{children:[y.jsx(lC,{size:16,className:"animate-spin"}),y.jsx("span",{children:"Laden..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(fI,{size:16}),y.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}function jxe(){const n=vs(B=>B.map),e=Wi(B=>B.openVondstForm),{openAddPointModal:t,openCreateLayerModal:r}=Wi(),i=O0(B=>B.layers),[s,a]=oe.useState(null),[o,l]=oe.useState(!1),[u,f]=oe.useState(!1),[d,g]=oe.useState(!1),p=oe.useRef(null),E=oe.useRef(null);oe.useEffect(()=>{if(!n){console.log(" LongPressMenu: map not ready");return}const B=n.getViewport();if(!B){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",B);const P=600,b=15,M=Fe=>{if(console.log(" Touch start, touches:",Fe.touches.length),Fe.touches.length!==1)return;const Ce=Fe.touches[0];E.current={x:Ce.clientX,y:Ce.clientY},console.log(" Starting long press timer at:",E.current),p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",E.current),!E.current)return;const ce=window.__olMap;if(!ce){console.log(" Map not available (global)");return}const Re=B.getBoundingClientRect(),me=[E.current.x-Re.left,E.current.y-Re.top],ee=ce.getCoordinateFromPixel(me);if(ee){const j=sn(ee);Fe.preventDefault(),a({pixel:[E.current.x,E.current.y],coordinate:j}),l(!0),f(!1),setTimeout(()=>f(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",j)}},P)},F=Fe=>{if(!p.current||!E.current)return;const Ce=Fe.touches[0],ce=Ce.clientX-E.current.x,Re=Ce.clientY-E.current.y,me=Math.sqrt(ce*ce+Re*Re);me>b&&(console.log(" Touch moved too much, cancelling. Distance:",me),clearTimeout(p.current),p.current=null)},V=()=>{console.log(" Touch end, timer active:",!!p.current),p.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(p.current),p.current=null),E.current=null},W=Fe=>{o&&Fe.preventDefault()},D=Fe=>{Fe.button===0&&(console.log(" Mouse down"),E.current={x:Fe.clientX,y:Fe.clientY},p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!E.current)return;const Ce=window.__olMap;if(console.log(" __olMap:",Ce),console.log(" __olMap constructor:",Ce?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof Ce?.getCoordinateAtPixel),!Ce){console.log(" Map not available (global)");return}const ce=B.getBoundingClientRect(),Re=[E.current.x-ce.left,E.current.y-ce.top];console.log(" Pixel:",Re);const me=Ce.getCoordinateFromPixel(Re);if(console.log(" Coordinate:",me),me){const ee=sn(me);a({pixel:[E.current.x,E.current.y],coordinate:ee}),l(!0),f(!1),setTimeout(()=>f(!0),300),console.log(" Long press (mouse) detected at:",ee)}},P))},Ie=Fe=>{if(!p.current||!E.current)return;const Ce=Fe.clientX-E.current.x,ce=Fe.clientY-E.current.y;Math.sqrt(Ce*Ce+ce*ce)>b&&(console.log(" Mouse moved, cancelling"),clearTimeout(p.current),p.current=null)},Le=()=>{console.log(" Mouse up"),p.current&&(clearTimeout(p.current),p.current=null),E.current=null};return B.addEventListener("touchstart",M,{passive:!1}),B.addEventListener("touchmove",F,{passive:!0}),B.addEventListener("touchend",V),B.addEventListener("touchcancel",V),B.addEventListener("contextmenu",W),B.addEventListener("mousedown",D),B.addEventListener("mousemove",Ie),B.addEventListener("mouseup",Le),B.addEventListener("mouseleave",Le),()=>{B.removeEventListener("touchstart",M),B.removeEventListener("touchmove",F),B.removeEventListener("touchend",V),B.removeEventListener("touchcancel",V),B.removeEventListener("contextmenu",W),B.removeEventListener("mousedown",D),B.removeEventListener("mousemove",Ie),B.removeEventListener("mouseup",Le),B.removeEventListener("mouseleave",Le),p.current&&clearTimeout(p.current)}},[n,o]);const v=()=>{u&&(l(!1),a(null),f(!1),g(!1))},w=()=>{l(!1),a(null),f(!1),g(!1)},T=B=>{if(!s)return;const[P,b]=s.coordinate;t(B,{lat:b,lng:P}),w()},R=()=>{r(),w()},k=()=>{if(!s)return;const[B,P]=s.coordinate;e({lat:P,lng:B}),l(!1),a(null),f(!1)},N=()=>{if(!s)return;const[B,P]=s.coordinate,b=`https://www.google.com/maps?q=${P},${B}`;window.open(b,"_blank"),l(!1),a(null),f(!1)},O=B=>{const[P,b]=B;return`${b.toFixed(5)}N, ${P.toFixed(5)}E`};return y.jsx(_i,{children:o&&s&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:v}),y.jsxs(Wt.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(s.pixel[0],window.innerWidth-220),top:Math.min(s.pixel[1],window.innerHeight-240)},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[y.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600",children:y.jsxs("div",{className:"flex items-center gap-2 text-white",children:[y.jsx(cu,{size:16}),y.jsx("span",{className:"text-xs font-mono",children:O(s.coordinate)})]})}),y.jsxs("div",{className:"bg-white",children:[y.jsxs("button",{onClick:k,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(Il,{size:20,className:"text-blue-500"}),y.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),y.jsxs("div",{className:"relative",children:[y.jsxs("button",{onClick:()=>g(!d),className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(Dl,{size:20,className:"text-purple-500"}),y.jsx("span",{className:"font-medium flex-1 text-left",children:"Voeg toe aan laag..."}),y.jsx(SE,{size:16,className:`text-gray-400 transition-transform ${d?"rotate-90":""}`})]}),y.jsx(_i,{children:d&&y.jsx(Wt.div,{className:"bg-gray-50 border-t border-gray-100",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:i.length===0?y.jsxs("button",{onClick:R,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none",children:[y.jsx(Il,{size:14}),y.jsx("span",{children:"Maak eerst een laag aan"})]}):y.jsxs(y.Fragment,{children:[i.map(B=>y.jsxs("button",{onClick:()=>T(B.id),className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-gray-700 hover:bg-gray-100 bg-transparent border-0 outline-none",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:B.color}}),y.jsx("span",{className:"truncate",children:B.name}),y.jsxs("span",{className:"text-xs text-gray-400 ml-auto",children:["(",B.points.length,")"]})]},B.id)),y.jsxs("button",{onClick:R,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none border-t border-gray-200",children:[y.jsx(Il,{size:14}),y.jsx("span",{children:"Nieuwe laag..."})]})]})})})]}),y.jsxs("button",{onClick:N,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(TE,{size:20,className:"text-blue-600"}),y.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]})]}),y.jsx("div",{className:"bg-white",children:y.jsxs("button",{onClick:w,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[y.jsx(eo,{size:18}),y.jsx("span",{children:"Annuleren"})]})})]})]})})}function Vxe(){return y.jsx("div",{className:"fixed bottom-2 left-[60px] z-[800] h-6 flex items-center px-1.5 bg-white/70 backdrop-blur-sm rounded shadow-sm text-[10px] font-mono text-gray-500",children:"v2.20.2"})}const Gxe={Compass:kse,TreePalm:bae,Mountain:fI,Waves:Lae,Search:ej,Target:Aae,Layers:Dl,Grid:zse},Bxe={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},Uxe={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},_O=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],zxe=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function $xe(){const n=Xr(w=>w.setLayerVisibility),e=Bi(w=>w.stopTracking),{presetsPanelOpen:t,togglePresetsPanel:r,toggleSettingsPanel:i,closeAllPanels:s}=Wi(),{presets:a,applyPreset:o,updatePreset:l}=_8(),u=Xr(w=>w.visible),f=Oi(w=>w.presetPanelFontScale),d=Oi(w=>w.setPresetPanelFontScale),g=12*f/100,p=()=>{s(),_O.forEach(w=>n(w,!1)),zxe.forEach(w=>{n(w,w==="CartoDB (licht)")}),e(),console.log(" Reset: CartoDB (licht), alle lagen uit, GPS uit")},E=w=>{o(w),s()},v=(w,T)=>{w.stopPropagation();const R=Object.entries(u).filter(([k,N])=>N&&_O.includes(k)).map(([k])=>k);l(T,{layers:R}),console.log(" Lagen opgeslagen naar preset")};return y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:i,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Instellingen",children:y.jsx(tj,{size:22,className:"text-gray-600"})}),y.jsx("button",{onClick:p,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Reset - CartoDB, alle lagen uit, GPS uit",children:y.jsx(fae,{size:22,className:"text-gray-600"})}),y.jsx("button",{onClick:r,className:"fixed bottom-[112px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Presets",children:t?y.jsx(Q9,{size:22,className:"text-blue-600"}):y.jsx(Dl,{size:22,className:"text-blue-600"})}),y.jsx(_i,{children:t&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r}),y.jsxs(Wt.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:"fixed bottom-[112px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[220px] backdrop-blur-sm z-[801]",children:[y.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsx("span",{className:"text-xs font-medium",children:"Presets"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"text-[9px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:f,onInput:w=>{d(parseInt(w.target.value))},onChange:w=>d(parseInt(w.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${f}%`}),y.jsx("span",{className:"text-[11px] opacity-70",children:"T"})]})]}),y.jsx("div",{className:"p-2",children:a.map(w=>{const T=Gxe[w.icon]||Dl,R=Bxe[w.icon]||"text-blue-600",k=Uxe[w.icon]||"hover:bg-blue-50";return y.jsxs("button",{onClick:()=>E(w.id),className:`w-full h-8 flex items-center gap-2 px-2 ${k} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden`,style:{fontSize:`${g}px`},children:[y.jsx(T,{size:14,className:`${R} flex-shrink-0`}),y.jsx("span",{className:"text-gray-700 truncate",children:w.name}),y.jsx("span",{onClick:N=>v(N,w.id),className:"ml-auto p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:y.jsx(pae,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},w.id)})})]})]})})]})}const Wxe="https://forms.gle/R5LCk11Bzu5XrkBj8";function Hxe(){const{infoPanelOpen:n,toggleInfoPanel:e}=Wi(),[t,r]=oe.useState("info"),i=[{id:"info",label:"Info",icon:y.jsx(tL,{size:14})},{id:"functies",label:"Functies",icon:y.jsx(oC,{size:14})},{id:"handleiding",label:"Handleiding",icon:y.jsx(gse,{size:14})}];return y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:e,className:"fixed top-2 right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Info & Help",children:y.jsx(tL,{size:22,className:"text-gray-600"})}),y.jsx(_i,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Wt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsx("span",{className:"font-medium",children:"DetectorApp NL"}),y.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:y.jsx(eo,{size:18})})]}),y.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>y.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${t===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[t==="info"&&y.jsx(Kxe,{}),t==="functies"&&y.jsx(Yxe,{}),t==="handleiding"&&y.jsx(Xxe,{}),y.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[y.jsxs("a",{href:Wxe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[y.jsx(X9,{size:14}),y.jsx("span",{className:"text-sm",children:"Meld een bug"})]}),y.jsx("p",{className:"text-xs text-gray-400 text-center",children:"DetectorApp NL v2.20.2"})]})]})]})]})})]})}function Kxe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),y.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d kaartapplicatie voor metaaldetectie en archeologische verkenning in Nederland. Met 60+ kaartlagen, GPS tracking met richtingspijl en vondstenbeheer."})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),y.jsxs("ul",{className:"space-y-2 text-gray-600",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"AMK, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Parken, Kringloopwinkels, Musea"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Itiner-E"})," (CC BY 4.0)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"CARTO"})," (CC BY 3.0)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"CartoDB basiskaart"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Map5.nl / Kadaster"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Provinciale data"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data"})]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy"}),y.jsxs("div",{className:"text-gray-600 space-y-2",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Locatiegegevens:"})," Alleen voor navigatie, niet opgeslagen of gedeeld."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Geen tracking:"})," Geen analytics of gebruiksstatistieken."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Lokale opslag:"})," Alle data blijft op je apparaat."]})]})]})]})}function Yxe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(cC,{size:16,className:"text-blue-600"}),"Kaartlagen (60+)"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Romeinse wegen, Kastelen, IKAW"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Percelen:"})," Gewaspercelen, Kadastrale Grenzen"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(Hv,{size:16,className:"text-green-600"}),"GPS Tracking"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),y.jsx("li",{children:"Richtingspijl draait mee met je telefoon (zoals Google Maps)"}),y.jsx("li",{children:"Kaart handmatig draaien + kompasknop om terug te draaien naar noorden"}),y.jsx("li",{children:"Schaalbalk onderaan (instelbaar in Instellingen)"}),y.jsx("li",{children:'Open locatie in Google Maps (long-press  "Open in Google Maps")'})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(cu,{size:16,className:"text-orange-600"}),"Vondsten"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Toevoegen via GPS, long-press of handmatig"}),y.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht, foto-link"}),y.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),y.jsx("li",{children:"Dashboard met statistieken"}),y.jsx("li",{children:"Lokale opslag (geen account nodig)"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(Dl,{size:16,className:"text-purple-600"}),"Presets"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen"}),y.jsx("li",{children:"Alle presets zijn aanpasbaar - klik op het diskette-icoon om huidige lagen op te slaan"}),y.jsx("li",{children:"Eigen presets aanmaken via Instellingen"}),y.jsx("li",{children:"Tekstgrootte per panel instelbaar via slider in header"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(aae,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:'Zet "Kadastrale Grenzen" aan en tik op een perceel'}),y.jsx("li",{children:"Toont: kadastrale aanduiding (gemeente, sectie, nummer) + oppervlakte"}),y.jsx("li",{children:"Link naar eigenaar opzoeken (betaalde dienst)"}),y.jsx("li",{children:"Hoogtekaart per perceel (AHN4)"})]})]})]})}function Xxe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),y.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[y.jsxs("li",{children:["Tik op de ",y.jsx("strong",{children:"GPS knop"})," (rechtsonder) om je locatie te zien"]}),y.jsxs("li",{children:["Kies een ",y.jsx("strong",{children:"preset"})," (links, laagjes-icoon) of selecteer kaartlagen handmatig"]}),y.jsxs("li",{children:["Tik op de ",y.jsx("strong",{children:"Kaartlagen knop"})," voor alle beschikbare lagen"]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS knop"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Uit (grijs icoon):"})," GPS tracking uit, geen locatie zichtbaar."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Aan (blauw icoon):"})," GPS tracking aan, je locatie en richting worden getoond."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Richtingspijl:"})," De blauwe pijl draait vloeiend mee met de richting van je telefoon."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als de kaart gedraaid is. Tik om terug naar noorden te draaien."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst toevoegen"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 1 - GPS:"})," Tik op de oranje + knop rechtsonder. Je huidige locatie wordt automatisch ingevuld."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 2 - Long-press:"}),' Houd je vinger lang op de kaart. Kies "Vondst toevoegen" in het menu.']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 3 - Handmatig:"}),' In het vondstenformulier, tik "Kies op kaart" en selecteer de exacte locatie.']})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Toepassen:"})," Tik op het laagjes-icoon links en kies een preset."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Snel opslaan:"})," Zet de gewenste lagen aan en tik op het diskette-icoon naast een preset om die te overschrijven."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Nieuw aanmaken:"}),' Ga naar Instellingen  Presets  "Huidige lagen als preset opslaan".']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Tekstgrootte:"})," Gebruik de slider in de header van het Presets/Kaartlagen panel."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zoeken & Navigatie"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Zoeken:"})," Gebruik de zoekbalk bovenaan om een adres te vinden."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Google Maps:"}),' Long-press op een locatie en kies "Open in Google Maps" om te navigeren.']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Schaalbalk:"})," Onderaan de kaart - aan/uit in Instellingen."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor in het veld"}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[y.jsxs("li",{children:["Gebruik ",y.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),y.jsxs("li",{children:["Combineer ",y.jsx("strong",{children:"AMK"})," met ",y.jsx("strong",{children:"Gewaspercelen"})," voor detectie"]}),y.jsxs("li",{children:["Check de ",y.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),y.jsxs("li",{children:["Gebruik ",y.jsx("strong",{children:"historische kaarten"})," om oude structuren te vinden"]}),y.jsxs("li",{children:["Zet ",y.jsx("strong",{children:"GPS tracking"})," aan om je route te volgen"]}),y.jsx("li",{children:"Tik op objecten (bunkers, musea, etc.) voor openingstijden en info"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(TE,{size:16,className:"text-blue-600"}),"Meer informatie"]}),y.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Uitleg over grondsoorten wordt direct in de popup getoond bij Bodemkaart en Gewaspercelen."}),y.jsxs("ul",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("li",{children:[y.jsx("a",{href:"https://legendageomorfologie.wur.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Geomorfologie legenda (WUR)"}),y.jsx("br",{}),y.jsx("span",{className:"text-gray-500",children:"Uitgebreide uitleg over landvormen"})]}),y.jsxs("li",{children:[y.jsx("a",{href:"https://legenda-bodemkaart.bodemdata.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Bodemkaart legenda (BRO)"}),y.jsx("br",{}),y.jsx("span",{className:"text-gray-500",children:"Volledige bodemclassificatie"})]})]})]})]})}function qxe(){const n=vs(a=>a.map),[e,t]=oe.useState(0),[r,i]=oe.useState(!1);oe.useEffect(()=>{if(!n)return;const a=n.getView(),o=()=>{const l=a.getRotation(),u=l*180/Math.PI;t(u),i(Math.abs(l)>.087)};return o(),a.on("change:rotation",o),()=>{a.un("change:rotation",o)}},[n]);const s=()=>{n&&n.getView().animate({rotation:0,duration:300})};return y.jsx(_i,{children:r&&y.jsx(Wt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:y.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[y.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),y.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),y.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const Zxe=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Kadastrale Grenzen",color:"purple",default:.7},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],Qxe={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function Jxe(){const[n,e]=oe.useState(!1),[t,r]=oe.useState(!1),i=Xr(f=>f.visible),s=Xr(f=>f.opacity),a=Xr(f=>f.setLayerOpacity),o=Zxe.filter(f=>i[f.name]);if(o.length===0)return null;const l=t?o:o.slice(0,3),u=o.length>3;return y.jsxs("div",{className:"fixed bottom-[112px] right-2 z-[900]",children:[y.jsxs(Wt.button,{onClick:()=>e(!n),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:n?"Sluit opacity sliders":"Open opacity sliders",children:[y.jsx(wae,{size:22,strokeWidth:2,className:"text-gray-500"}),o.length>0&&y.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:o.length})]}),y.jsx(_i,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),y.jsxs(Wt.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-lg shadow-lg p-3 min-w-[220px] max-h-[60vh] overflow-y-auto",children:[y.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide",children:"Transparantie"}),y.jsx("div",{className:"space-y-3",children:l.map(f=>{const d=s[f.name]??f.default;return y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:f.name,children:f.name}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:d*100,onChange:g=>a(f.name,parseInt(g.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${Qxe[f.color]}`}),y.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(d*100),"%"]})]})]},f.name)})}),u&&y.jsx("button",{onClick:()=>r(!t),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:t?y.jsxs(y.Fragment,{children:[y.jsx(Q9,{size:14}),"Minder tonen"]}):y.jsxs(y.Fragment,{children:[y.jsx(iC,{size:14}),o.length-3," meer..."]})})]})]})})]})}function eEe(){const n=vs(v=>v.map),[e,t]=oe.useState(""),[r,i]=oe.useState([]),[s,a]=oe.useState(!1),[o,l]=oe.useState(!1),u=oe.useRef(null),f=oe.useRef();oe.useEffect(()=>{if(f.current&&clearTimeout(f.current),e.length<2){i([]);return}return f.current=window.setTimeout(async()=>{l(!0);try{const w=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(e)}&rows=7`)).json();w.response?.docs&&i(w.response.docs)}catch(v){console.error("Search error:",v),i([])}finally{l(!1)}},300),()=>{f.current&&clearTimeout(f.current)}},[e]);const d=async v=>{try{const T=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(v)}`)).json();if(T.response?.docs?.[0]?.centroide_ll){const k=T.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(k)return{lng:parseFloat(k[1]),lat:parseFloat(k[2])}}}catch(w){console.error("Lookup error:",w)}return null},g=async v=>{if(!n)return;const w=await d(v.id);w&&n.getView().animate({center:Rh([w.lng,w.lat]),zoom:16,duration:1e3}),t(""),i([]),a(!1)},p=async(v,w)=>{w.stopPropagation();const T=await d(v.id);if(T){const R=`https://www.google.com/maps?q=${T.lat},${T.lng}`;window.open(R,"_blank")}t(""),i([]),a(!1)},E=()=>{t(""),i([]),u.current?.focus()};return y.jsxs("div",{className:"search-box",children:[y.jsxs("div",{className:"search-input-wrapper",children:[y.jsx(ej,{size:18,className:"search-icon"}),y.jsx("input",{ref:u,type:"text",value:e,onChange:v=>{t(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),e&&y.jsx("button",{onClick:E,className:"search-clear",children:y.jsx(eo,{size:16})})]}),s&&r.length>0&&y.jsx("ul",{className:"search-results",children:r.map(v=>y.jsxs("li",{className:"search-result-item",children:[y.jsx("div",{className:"search-result-content",onClick:()=>g(v),children:y.jsx("span",{className:"search-result-text",children:v.weergavenaam})}),y.jsx("button",{className:"search-navigate-btn",onClick:w=>p(v,w),title:"Open in Google Maps",children:y.jsx(TE,{size:20})})]},v.id))}),s&&o&&y.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function tEe(){const n=vs(r=>r.map),e=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},t=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return y.jsxs("div",{className:"fixed top-2 left-2 z-[800] flex flex-col gap-1",children:[y.jsx(Wt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:y.jsx(Il,{size:22,className:"text-gray-600"})}),y.jsx(Wt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:y.jsx(rae,{size:22,className:"text-gray-600"})})]})}const nEe="detector2024",kI="detectorapp-auth";function rEe({children:n}){const[e,t]=oe.useState(!1),[r,i]=oe.useState(""),[s,a]=oe.useState(!1),[o,l]=oe.useState(""),[u,f]=oe.useState(!0);oe.useEffect(()=>{localStorage.getItem(kI)==="authenticated"&&t(!0),f(!1)},[]);const d=g=>{g.preventDefault(),l(""),r===nEe?(localStorage.setItem(kI,"authenticated"),t(!0)):(l("Onjuist wachtwoord"),i(""))};return u?y.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:y.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?y.jsx(y.Fragment,{children:n}):y.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:y.jsxs(Wt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(hI,{size:32,className:"text-blue-600"})}),y.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),y.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),y.jsxs("form",{onSubmit:d,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:s?"text":"password",value:r,onChange:g=>i(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),y.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?y.jsx(sC,{size:20}):y.jsx(aC,{size:20})})]})]}),o&&y.jsx(Wt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:o}),y.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),y.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function iEe(){localStorage.removeItem(kI),window.location.reload()}function sEe({isOpen:n,onClose:e}){const t=U0(l=>l.vondsten),r={total:t.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:t.slice(-5).reverse()};let i=0,s=0;t.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const a=l=>Object.entries(l).sort((u,f)=>f[1]-u[1]),o=l=>Math.max(...Object.values(l),1);return y.jsx(_i,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Wt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(q9,{size:18}),y.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),y.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:y.jsx(eo,{size:18})})]}),y.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:t.length===0?y.jsxs("div",{className:"text-center py-8 text-gray-500",children:[y.jsx(cu,{size:48,className:"mx-auto mb-3 opacity-30"}),y.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),y.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[y.jsx(FS,{icon:y.jsx(cu,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),y.jsx(FS,{icon:y.jsx(gae,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),y.jsx(FS,{icon:y.jsx(yae,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),y.jsx(my,{title:"Per Type",data:a(r.byType),max:o(r.byType),color:"bg-orange-500"}),y.jsx(my,{title:"Per Periode",data:a(r.byPeriod),max:o(r.byPeriod),color:"bg-amber-500"}),y.jsx(my,{title:"Per Materiaal",data:a(r.byMaterial),max:o(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&y.jsx(my,{title:"Per Conditie",data:a(r.byCondition),max:o(r.byCondition),color:"bg-green-500"}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[y.jsx(_se,{size:14}),"Recente Vondsten"]}),y.jsx("div",{className:"space-y-2",children:r.recent.map(l=>y.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),y.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),y.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),y.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function FS({icon:n,value:e,label:t,color:r}){return y.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[y.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:n}),y.jsx("div",{className:"text-xl font-bold",children:e}),y.jsx("div",{className:"text-xs opacity-70",children:t})]})}function my({title:n,data:e,max:t,color:r}){return e.length===0?null:y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:n}),y.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),y.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:y.jsx(Wt.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/t*100}%`},transition:{duration:.5,ease:"easeOut"}})}),y.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function aEe(n){const{type:e,coordinates:t}=n,r=o=>Rh(o),i=o=>o.map(r),s=o=>o.map(i),a=o=>o.map(s);switch(e){case"Point":return new Za(r(t));case"LineString":return new Vo(i(t));case"Polygon":return new Qa(s(t));case"MultiPoint":return new S0(i(t));case"MultiLineString":return new Jc(s(t));case"MultiPolygon":return new t0(a(t));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function oEe(n,e,t){const r=n.color,i=10,s=5,a=14;let o=i;if(t>50?o=s:t>10?o=Math.max(s,i-(t-10)/10):t<2&&(o=a),e==="Point"||e==="MultiPoint")return new nr({image:new bl({radius:o,fill:new Qr({color:r}),stroke:new hs({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new nr({stroke:new hs({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=lEe(r,.3);return new nr({fill:new Qr({color:l}),stroke:new hs({color:r,width:2})})}return new nr({image:new bl({radius:o,fill:new Qr({color:r}),stroke:new hs({color:"#ffffff",width:2})})})}function lEe(n,e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(t){const r=parseInt(t[1],16),i=parseInt(t[2],16),s=parseInt(t[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return n}function cEe(){const n=vs(r=>r.map),e=pE(r=>r.layers),t=oe.useRef(new Map);return oe.useEffect(()=>{if(!n)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new Gp;i.features.features.forEach((o,l)=>{if(!o.geometry)return;const u=aEe(o.geometry);if(!u)return;const f=new qa({geometry:u,properties:o.properties,layerId:i.id,featureIndex:l});f.setStyle((d,g)=>oEe(i,o.geometry.type,g)),s.addFeature(f)});const a=t.current.get(i.id);if(a)a.setSource(s),a.setVisible(i.visible),a.setOpacity(i.opacity);else{const o=new Wp({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});n.addLayer(o),t.current.set(i.id,o)}}),t.current.forEach((i,s)=>{r.has(s)||(n.removeLayer(i),t.current.delete(s))})},[n,e]),oe.useEffect(()=>()=>{n&&(t.current.forEach(r=>{n.removeLayer(r)}),t.current.clear())},[n]),null}an.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");r7(an);function uEe(n){if(!n||n.length<2)return"unknown";const[e,t]=n;return e>=7e3&&e<=3e5&&t>=289e3&&t<=629e3?"RD":Math.abs(e)<=180&&Math.abs(t)<=90?"WGS84":"unknown"}function hEe(n){const[e,t]=n;return an("EPSG:28992","EPSG:4326",[e,t])}function jV(n,e){return typeof n[0]=="number"?e(n):n.map(t=>jV(t,e))}function fEe(n){const e=n.coordinates;return!e||Array.isArray(e)&&e.length===0?null:n.type==="Point"?e:n.type==="LineString"||n.type==="MultiPoint"?e[0]:n.type==="Polygon"||n.type==="MultiLineString"?e[0]?.[0]:n.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function dEe(n){const e=[],t=[];try{const r=await n.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((u,f)=>({type:"Feature",geometry:u,properties:{id:f}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&t.push("Geen features gevonden in bestand");let a="unknown",o=!1;if(s.length>0&&s[0].geometry){const u=fEe(s[0].geometry);u&&(a=uEe(u))}a==="RD"&&(t.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),o=!0,s=s.map(u=>{if(!u.geometry)return u;const f=jV(u.geometry.coordinates,hEe);return{...u,geometry:{...u.geometry,coordinates:f}}}),a="WGS84");const l=[...new Set(s.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:t,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:a,transformed:o}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function gEe(n){const e=[],t=[];try{const r=await n.text(),s=new gde({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in KML bestand");const l=new wC().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((f,d)=>{const g={...f.properties},p=g.name||g.Name||`Feature ${d+1}`,E=g.description||g.Description||"";return{type:"Feature",geometry:f.geometry,properties:{...g,name:p,description:E}}}),u=[...new Set(l.filter(f=>f.geometry).map(f=>f.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function mEe(n){const e=[],t=[];try{const r=await n.text(),s=new Cfe().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in GPX bestand");const l=new wC().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((f,d)=>{const g={...f.properties},p=g.name||g.Name||`Waypoint ${d+1}`,E=g.desc||g.description||"",v=g.time||null,w=g.ele||null;return{type:"Feature",geometry:f.geometry,properties:{...g,name:p,description:E,time:v,elevation:w}}}),u=[...new Set(l.filter(f=>f.geometry).map(f=>f.geometry.type))];return u.includes("LineString")&&t.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function JC(n){switch(n.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function pEe(){return".geojson,.json,.kml,.gpx"}function eb(){return"GeoJSON, KML (Google My Maps), GPX"}async function _Ee(n){switch(JC(n.name)){case"geojson":return dEe(n);case"kml":return gEe(n);case"gpx":return mEe(n);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${n.name}. Ondersteunde formaten: ${eb()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function yEe(n){return n.size>10485760?{valid:!1,error:`Bestand te groot (${(n.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:JC(n.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${eb()}`}:n.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function vEe({isOpen:n,onClose:e}){const t=pE(b=>b.addLayer),r=oe.useRef(null),[i,s]=oe.useState("idle"),[a,o]=oe.useState(null),[l,u]=oe.useState(null),[f,d]=oe.useState(""),[g,p]=oe.useState(null),[E,v]=oe.useState(!1),w=oe.useCallback(()=>{s("idle"),o(null),u(null),d(""),p(null),r.current&&(r.current.value="")},[]),T=oe.useCallback(()=>{w(),e()},[w,e]),R=oe.useCallback(async b=>{const M=yEe(b);if(!M.valid){p(M.error||"Ongeldig bestand"),s("error");return}o(b),s("parsing"),p(null);const F=b.name.replace(/\.[^/.]+$/,"");d(F);try{const V=await _Ee(b);if(!V.success){p(V.errors.join(`
`)),s("error");return}if(V.features.features.length===0){p("Geen features gevonden in het bestand"),s("error");return}u(V),s("preview")}catch(V){p(V instanceof Error?V.message:"Onbekende fout bij parsen"),s("error")}},[]),k=oe.useCallback(b=>{const M=b.target.files?.[0];M&&R(M)},[R]),N=oe.useCallback(b=>{b.preventDefault(),v(!0)},[]),O=oe.useCallback(b=>{b.preventDefault(),v(!1)},[]),B=oe.useCallback(b=>{b.preventDefault(),v(!1);const M=b.dataTransfer.files?.[0];M&&R(M)},[R]),P=oe.useCallback(()=>{if(!l||!f.trim())return;const b=a?JC(a.name):"geojson";t({name:f.trim(),type:b==="unsupported"?"geojson":b,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:a?.name||"unknown"}),T()},[l,f,a,t,T]);return y.jsx(_i,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),y.jsxs(Wt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(uC,{size:18}),y.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),y.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:y.jsx(eo,{size:18})})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${E?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:N,onDragLeave:O,onDrop:B,children:[y.jsx(oC,{size:40,className:"mx-auto text-gray-400 mb-3"}),y.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),y.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),y.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),y.jsx("input",{ref:r,type:"file",accept:pEe(),onChange:k,className:"hidden"})]}),y.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[y.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),y.jsx("p",{children:eb()})]})]}),i==="parsing"&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[y.jsx(lC,{size:40,className:"text-purple-500 animate-spin mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),y.jsx("p",{className:"text-gray-400 text-sm",children:a?.name})]}),i==="error"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[y.jsx(J9,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),y.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:g})]})]}),y.jsx("button",{onClick:w,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[y.jsx(Rse,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),y.jsx("p",{className:"text-sm text-green-600",children:a?.name})]})]}),l.warnings.length>0&&y.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[y.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),y.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((b,M)=>y.jsx("li",{children:b},M))})]}),y.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-gray-500",children:"Features:"}),y.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-gray-500",children:"Types:"}),y.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),y.jsx("input",{type:"text",value:f,onChange:b=>d(b.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&y.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[y.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),y.jsx("button",{onClick:P,disabled:!f.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function xEe({layer:n}){const{toggleVisibility:e,removeLayer:t}=pE(),[r,i]=oe.useState(!1),s=n.features.features.length,a=[...new Set(n.features.features.map(l=>l.geometry?.type).filter(Boolean))],o=()=>{r?t(n.id):(i(!0),setTimeout(()=>i(!1),3e3))};return y.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[y.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"flex items-center gap-1",children:y.jsx("span",{className:"text-sm text-gray-700 truncate",children:n.name})}),y.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[y.jsx(oC,{size:10}),y.jsxs("span",{children:[s," ",s===1?"feature":"features"]}),a.length>0&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"mx-0.5",children:""}),y.jsx("span",{children:a.join(", ")})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>e(n.id),className:`p-1 rounded transition-colors border-0 outline-none ${n.visible?"text-purple-500 hover:bg-purple-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?y.jsx(aC,{size:14}):y.jsx(sC,{size:14})}),y.jsx("button",{onClick:o,className:`p-1 rounded transition-colors border-0 outline-none ${r?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:r?"Klik nogmaals om te verwijderen":"Verwijderen",children:y.jsx(g1,{size:14})})]})]})}const EEe="https://forms.gle/R5LCk11Bzu5XrkBj8";function wEe(){const{settingsPanelOpen:n,toggleSettingsPanel:e,vondstDashboardOpen:t,toggleVondstDashboard:r}=Wi(),i=Oi(),{presets:s,createPreset:a,deletePreset:o,updatePreset:l}=_8(),u=U0(D=>D.vondsten),f=pE(D=>D.layers),{devMode:d,setDevMode:g,tier:p}=y8(),[E,v]=oe.useState(""),[w,T]=oe.useState(!1),[R,k]=oe.useState(!1),[N,O]=oe.useState(null),[B,P]=oe.useState(""),b=14*i.fontScale/100,M=()=>{E.trim()&&(a(E.trim(),"Layers"),v(""),T(!1))},F=(D,Ie)=>{O(D),P(Ie)},V=D=>{B.trim()&&(l(D,{name:B.trim()}),console.log(` Preset hernoemd naar "${B.trim()}"`)),O(null),P("")},W=()=>{O(null),P("")};return y.jsxs(y.Fragment,{children:[y.jsx(_i,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Wt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(tj,{size:18}),y.jsx("span",{className:"font-medium",children:"Instellingen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:i.fontScale,onInput:D=>{i.setFontScale(parseInt(D.target.value))},onChange:D=>i.setFontScale(parseInt(D.target.value)),className:"header-slider w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${i.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(eo,{size:18})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${b}px`},children:[y.jsxs(Ku,{title:"Kaart",icon:y.jsx(cC,{size:16}),children:[y.jsx(SEe,{label:"Standaard achtergrond",children:y.jsxs("select",{value:i.defaultBackground,onChange:D=>i.setDefaultBackground(D.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),y.jsx("option",{value:"OpenStreetMap",children:"OSM"}),y.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),y.jsx(ad,{label:"Schaalbalk tonen",checked:i.showScaleBar,onChange:i.setShowScaleBar})]}),y.jsxs(Ku,{title:"GPS",icon:y.jsx(Hv,{size:16}),children:[y.jsx(ad,{label:"GPS aan bij start",checked:i.gpsAutoStart,onChange:i.setGpsAutoStart}),y.jsx(ad,{label:"Nauwkeurigheidscirkel",checked:i.showAccuracyCircle,onChange:i.setShowAccuracyCircle})]}),y.jsx(Ku,{title:"Feedback",icon:y.jsx(Tae,{size:16}),children:y.jsx(ad,{label:"Trillen bij acties",checked:i.hapticFeedback,onChange:i.setHapticFeedback})}),y.jsxs(Ku,{title:"Vondsten",icon:y.jsx(cu,{size:16}),children:[y.jsx(ad,{label:"Vondsten knop tonen",checked:i.showVondstButton,onChange:i.setShowVondstButton}),y.jsx("p",{className:"text-gray-500 mt-1 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),y.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(q9,{size:14}),y.jsxs("span",{children:["Dashboard (",u.length," vondsten)"]})]}),y.jsx(TEe,{})]}),y.jsx(Ku,{title:"Eigen Lagen",icon:y.jsx(uC,{size:16}),children:y.jsxs("div",{className:"space-y-1",children:[f.length===0?y.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen gemporteerd."}):f.map(D=>y.jsx(xEe,{layer:D},D.id)),y.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-purple-600 hover:bg-purple-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(Il,{size:14}),y.jsx("span",{children:"Laag importeren"})]}),y.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),y.jsx(Ku,{title:"Presets",icon:y.jsx(Dl,{size:16}),children:y.jsxs("div",{className:"space-y-2",children:[s.map(D=>y.jsx("div",{className:"flex items-center justify-between py-1",children:N===D.id?y.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[y.jsx("input",{type:"text",value:B,onChange:Ie=>P(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"&&V(D.id),Ie.key==="Escape"&&W()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),y.jsx("button",{onClick:()=>V(D.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),y.jsx("button",{onClick:W,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[D.name,D.isBuiltIn&&y.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),y.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",D.layers.length," lagen)"]})]}),!D.isBuiltIn&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>F(D.id,D.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:y.jsx(cae,{size:14})}),y.jsx("button",{onClick:()=>o(D.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:y.jsx(g1,{size:14})})]})]})},D.id)),w?y.jsxs("div",{className:"flex gap-2 mt-2",children:[y.jsx("input",{type:"text",value:E,onChange:D=>v(D.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:D=>D.key==="Enter"&&M(),autoFocus:!0}),y.jsx("button",{onClick:M,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),y.jsx("button",{onClick:()=>T(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):y.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(Il,{size:14}),y.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})}),y.jsxs(Ku,{title:"Development",icon:y.jsx(bse,{size:16}),children:[y.jsx(ad,{label:"Dev Mode (alles ontgrendeld)",checked:d,onChange:g}),y.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:["Huidige tier: ",y.jsx("span",{className:"font-medium text-blue-600",children:p}),d&&y.jsx("span",{className:"text-green-600",children:" (alle lagen ontgrendeld)"})]})]})]}),y.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${b}px`},children:[y.jsxs("a",{href:EEe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx(X9,{size:16}),y.jsx("span",{children:"Meld een bug"})]}),y.jsxs("button",{onClick:iEe,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx(Jse,{size:16}),y.jsx("span",{children:"Uitloggen"})]}),y.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),y.jsx(sEe,{isOpen:t,onClose:r}),y.jsx(vEe,{isOpen:R,onClose:()=>k(!1)})]})}function Ku({title:n,icon:e,children:t}){return y.jsxs("section",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[y.jsx("span",{className:"text-blue-600",children:e}),y.jsx("span",{className:"font-medium text-gray-800",style:{fontSize:"1em"},children:n})]}),y.jsx("div",{className:"space-y-2",children:t})]})}function SEe({label:n,children:e}){return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),e]})}function ad({label:n,checked:e,onChange:t}){return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),y.jsx("button",{onClick:()=>t(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:y.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function TEe(){const[n,e]=oe.useState(!1),{vondsten:t,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:a,exportAsKML:o}=U0(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:a,desc:"GPS apparaten"},{label:"KML",action:o,desc:"Google Earth"}],u=f=>{f(),e(!1)};return t.length===0?y.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[y.jsx(uI,{size:14}),y.jsx("span",{children:"Geen vondsten om te exporteren"})]}):y.jsxs("div",{className:"relative mt-2",children:[y.jsxs("button",{onClick:()=>e(!n),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(uI,{size:14}),y.jsxs("span",{children:["Exporteer vondsten (",t.length,")"]})]}),y.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),n&&y.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((f,d)=>y.jsxs("button",{onClick:()=>u(f.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[y.jsx("span",{className:"text-gray-700",children:f.label}),y.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:f.desc})]},d))})]})}function jS({value:n,onChange:e,options:t,label:r}){const[i,s]=oe.useState(!1),a=oe.useRef(null);return oe.useEffect(()=>{if(!i)return;const o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[i]),y.jsxs("div",{ref:a,className:"relative",children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:r}),y.jsxs("button",{type:"button",onClick:()=>s(!i),className:"w-full flex items-center justify-between px-3 py-1.5 bg-gray-50 rounded text-sm text-gray-600 hover:bg-blue-50 transition-colors text-left",style:{border:"none",outline:"none"},children:[y.jsx("span",{children:n}),y.jsx(iC,{size:14,className:`text-gray-400 transition-transform ${i?"rotate-180":""}`})]}),i&&y.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white rounded shadow-lg max-h-48 overflow-y-auto",children:t.map(o=>y.jsx("button",{type:"button",onClick:()=>{e(o),s(!1)},className:`w-full px-3 py-1.5 text-left text-sm transition-colors ${o===n?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-blue-50"}`,style:{border:"none",outline:"none"},children:o},o))})]})}function IEe({onClose:n,initialLocation:e}){const t=o5(ee=>ee.user),r=Bi(ee=>ee.position),i=vs(ee=>ee.map),s=Ree(ee=>ee.addVondst),a=U0(ee=>ee.addVondst),o=Oi(ee=>ee.vondstenLocalOnly),[l,u]=oe.useState(""),[f,d]=oe.useState("Munt"),[g,p]=oe.useState("Brons"),[E,v]=oe.useState("Romeins (12 v.Chr.-450 n.Chr.)"),[w,T]=oe.useState(!0),[R,k]=oe.useState(!1),[N,O]=oe.useState(""),[B,P]=oe.useState(void 0),[b,M]=oe.useState(void 0),[F,V]=oe.useState(e?"map-pick":r?"gps":"map-center"),[W,D]=oe.useState(e||null),[Ie,Le]=oe.useState(!1),Fe=()=>{if(F==="gps"&&r)return{lat:r.lat,lng:r.lng};if(F==="map-pick"&&W)return W;if(i){const ee=i.getView().getCenter();if(ee){const[j,ne]=sn(ee);return{lat:ne,lng:j}}}return null},Ce=Fe();oe.useEffect(()=>{if(!Ie||!i)return;const ee=j=>{const[ne,re]=sn(j.coordinate);D({lat:re,lng:ne}),V("map-pick"),Le(!1)};return i.on("click",ee),()=>i.un("click",ee)},[Ie,i]);const ce=()=>{Le(!0)},Re=()=>{r&&(V("gps"),D(null))},me=async ee=>{ee.preventDefault();const j=Fe();if(!j){alert("Geen locatie beschikbaar");return}if(!o&&!t){alert("Log in om vondsten in de cloud op te slaan");return}k(!0);try{o?(a({location:{lat:j.lat,lng:j.lng},notes:l,objectType:f,material:g,period:E,photoUrl:N||void 0,weight:B,length:b}),alert("Vondst lokaal opgeslagen! ")):(await s({userId:t.uid,location:{lat:j.lat,lng:j.lng,accuracy:F==="gps"?5:50},timestamp:new Date().toISOString(),photos:[],notes:l,objectType:f,material:g,period:E,tags:[E.toLowerCase(),f.toLowerCase()],private:w}),alert("Vondst opgeslagen in cloud! ")),n()}catch(ne){alert("Fout bij opslaan: "+ne.message)}finally{k(!1)}};return Ie?y.jsx(Wt.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:y.jsxs("div",{className:"bg-orange-500 text-white rounded-lg shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(eL,{size:24,className:"animate-pulse"}),y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),y.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),y.jsx("button",{onClick:()=>Le(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"Annuleren"})]})}):y.jsx(Wt.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y.jsxs(Wt.div,{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[y.jsxs("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 flex justify-between items-center",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),y.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:""})]}),y.jsxs("form",{onSubmit:me,className:"p-4 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Locatie"}),Ce&&y.jsxs("div",{className:`p-2 rounded text-sm flex items-center gap-2 ${F==="gps"?"bg-green-50 text-green-800":"bg-orange-50 text-orange-800"}`,children:[F==="gps"?y.jsx(Hv,{size:16,className:"text-green-600"}):y.jsx(cu,{size:16,className:"text-orange-600"}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"font-medium",children:[F==="gps"&&"GPS locatie",F==="map-center"&&"Kaart centrum",F==="map-pick"&&"Gekozen locatie"]}),y.jsxs("div",{className:"text-xs opacity-75",children:[Ce.lat.toFixed(6),", ",Ce.lng.toFixed(6)]})]})]}),y.jsxs("div",{className:"flex gap-2 mt-2",children:[r&&F!=="gps"&&y.jsxs("button",{type:"button",onClick:Re,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors border-0 outline-none",children:[y.jsx(Hv,{size:14}),y.jsx("span",{children:"GPS gebruiken"})]}),y.jsxs("button",{type:"button",onClick:ce,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs text-blue-700 rounded hover:bg-blue-100 transition-colors bg-blue-50 outline-none border-0",children:[y.jsx(eL,{size:14}),y.jsx("span",{children:"Kies op kaart"})]})]})]}),y.jsx(jS,{label:"Object type",value:f,onChange:ee=>d(ee),options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"]}),y.jsx(jS,{label:"Materiaal",value:g,onChange:ee=>p(ee),options:["Brons","IJzer","Zilver","Goud","Keramiek","Steen","Glas","Onbekend"]}),y.jsx(jS,{label:"Periode",value:E,onChange:ee=>v(ee),options:["Romeins (12 v.Chr.-450 n.Chr.)","IJzertijd","Middeleeuws (450-1500)","Nieuwetijd (1500-1800)","Modern (1800+)","Onbekend"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Gewicht (g)"}),y.jsx("input",{type:"number",value:B??"",onChange:ee=>P(ee.target.value?parseFloat(ee.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1",placeholder:"12.5"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Lengte (mm)"}),y.jsx("input",{type:"number",value:b??"",onChange:ee=>M(ee.target.value?parseFloat(ee.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1",placeholder:"25"})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm text-gray-600 mb-1 flex items-center gap-1",children:[y.jsx(Kse,{size:12,className:"text-blue-500"}),"Foto link"]}),y.jsx("input",{type:"url",value:N,onChange:ee=>O(ee.target.value),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},placeholder:"https://photos.google.com/..."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Notities"}),y.jsx("textarea",{value:l,onChange:ee=>u(ee.target.value),className:"w-full rounded px-3 py-1.5 h-16 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors resize-none",style:{border:"none"},placeholder:"Beschrijving..."})]}),y.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 rounded px-3 py-2",children:"Vondsten worden lokaal opgeslagen op dit apparaat."}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-1.5 rounded hover:bg-blue-50 transition-colors bg-gray-100 outline-none text-sm text-gray-600",style:{border:"none"},children:"Annuleren"}),y.jsx("button",{type:"submit",disabled:R||!Ce||Ie,className:"flex-1 px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 outline-none text-sm",style:{border:"none"},children:R?"Opslaan...":"Opslaan"})]})]})]})})}function AEe(){const{user:n,setUser:e,setLoading:t}=o5();return oe.useEffect(()=>{const s=FQ(sS,a=>{e(a),t(!1)});return()=>s()},[e,t]),{user:n,loginAnonymous:async()=>{try{await kQ(sS)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await jQ(sS)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!n}}function REe(){const{isAuthenticated:n,loginAnonymous:e}=AEe(),t=Oi(u=>u.vondstenLocalOnly),r=Oi(u=>u.showVondstButton),i=Wi(u=>u.vondstFormOpen),s=Wi(u=>u.vondstFormLocation),a=Wi(u=>u.openVondstForm),o=Wi(u=>u.closeVondstForm);if(!r)return null;const l=()=>{if(t){a();return}if(!n){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}a()};return y.jsxs(y.Fragment,{children:[y.jsx(Wt.button,{className:"fixed bottom-2 right-[60px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:y.jsx(cu,{size:22,strokeWidth:2})}),y.jsx(_i,{children:i&&y.jsx(IEe,{onClose:o,initialLocation:s||void 0})})]})}const yO={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},CEe={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function bEe(){const n=vs(i=>i.map),e=U0(i=>i.vondsten),t=Xr(i=>i.visible["Mijn Vondsten"]),r=oe.useRef(null);return oe.useEffect(()=>{if(!n)return;const i=new Gp;return e.forEach(s=>{const a=new qa({geometry:new Za(Rh([s.location.lng,s.location.lat])),vondst:s}),o=yO[s.objectType]||yO.Anders,l=CEe[s.objectType]||"?";a.setStyle((u,f)=>{let E=12;f>50?E=6:f>10?E=Math.max(6,12-(f-10)/10):f<2&&(E=14);const v=Math.max(8,Math.min(12,E-2));return new nr({image:new bl({radius:E,fill:new Qr({color:o}),stroke:new hs({color:"#ffffff",width:E>8?2:1})}),text:E>=8?new Jh({text:l,font:`bold ${v}px sans-serif`,fill:new Qr({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(a)}),r.current?r.current.setSource(i):(r.current=new Wp({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(t),n.addLayer(r.current)),()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null)}},[n,e]),oe.useEffect(()=>{r.current&&r.current.setVisible(t)},[t]),null}const PEe={Mineraal:"M",Fossiel:"F",Erfgoed:"E",Monument:"Mo",Overig:""};function kEe(){const n=vs(r=>r.map),e=O0(r=>r.layers),t=oe.useRef(new Map);return oe.useEffect(()=>{if(!n)return;const r=new Set(e.map(i=>i.id));return t.current.forEach((i,s)=>{r.has(s)||(n.removeLayer(i),t.current.delete(s))}),e.forEach(i=>{const s=new Gp;i.points.forEach(o=>{const l=new qa({geometry:new Za(Rh(o.coordinates)),layerType:"customPoint",customPoint:o,customLayerId:i.id,customLayerName:i.name,customLayerColor:i.color}),u=PEe[o.category]||o.category.charAt(0).toUpperCase();l.setStyle((f,d)=>{let v=12;d>50?v=6:d>10?v=Math.max(6,12-(d-10)/10):d<2&&(v=14);const w=Math.max(8,Math.min(12,v-2));return new nr({image:new bl({radius:v,fill:new Qr({color:i.color}),stroke:new hs({color:"#ffffff",width:v>8?2:1})}),text:v>=8?new Jh({text:u,font:`bold ${w}px sans-serif`,fill:new Qr({color:"#ffffff"}),offsetY:1}):void 0})}),s.addFeature(l)});const a=t.current.get(i.id);if(a)a.setSource(s),a.setVisible(i.visible);else{const o=new Wp({source:s,zIndex:950,properties:{title:i.name,customPointLayerId:i.id},visible:i.visible});n.addLayer(o),t.current.set(i.id,o)}}),()=>{t.current.forEach(i=>{n&&n.removeLayer(i)}),t.current.clear()}},[n,e]),null}function MEe(){const{createLayerModalOpen:n,closeCreateLayerModal:e}=Wi(),{addLayer:t}=O0(),r=Oi(),[i,s]=oe.useState(""),[a,o]=oe.useState([...Rc]),[l,u]=oe.useState(""),f=14*r.fontScale/100,d=()=>{const w=l.trim();w&&!a.includes(w)&&(o([...a,w]),u(""))},g=w=>{o(a.filter(T=>T!==w))},p=w=>{a.includes(w)?o(a.filter(T=>T!==w)):o([...a,w])},E=()=>{i.trim()&&(t(i.trim(),a),s(""),o([...Rc]),u(""),e())},v=()=>{s(""),o([...Rc]),u(""),e()};return y.jsx(_i,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:v}),y.jsxs(Wt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Dl,{size:18}),y.jsx("span",{className:"font-medium",children:"Nieuwe laag"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:r.fontScale,onChange:w=>r.setFontScale(parseInt(w.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:v,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(eo,{size:18})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${f}px`},children:[y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam van de laag"}),y.jsx("input",{type:"text",value:i,onChange:w=>s(w.target.value),placeholder:"bijv. Vakantie Frankrijk 2026",className:"w-full px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"1em"},autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Categorien"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:Rc.map(w=>y.jsx("button",{onClick:()=>p(w),className:`px-3 py-1 rounded-full transition-colors border-0 outline-none ${a.includes(w)?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:{fontSize:"0.9em"},children:w},w))})]}),a.filter(w=>!Rc.includes(w)).length>0&&y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Eigen categorien"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:a.filter(w=>!Rc.includes(w)).map(w=>y.jsxs("button",{onClick:()=>g(w),className:"flex items-center gap-1 px-3 py-1 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[w,y.jsx(g1,{size:12})]},w))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Eigen categorie toevoegen"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",value:l,onChange:w=>u(w.target.value),placeholder:"bijv. Grot, Bron, ...",className:"flex-1 px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"1em"},onKeyDown:w=>w.key==="Enter"&&d()}),y.jsx("button",{onClick:d,disabled:!l.trim(),className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors border-0 outline-none",children:y.jsx(Il,{size:20})})]})]})]}),y.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${f}px`},children:[y.jsx("button",{onClick:v,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Annuleren"}),y.jsx("button",{onClick:E,disabled:!i.trim(),className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Aanmaken"})]})]})]})})}function NEe(){const{addPointModalOpen:n,addPointModalLayerId:e,addPointModalLocation:t,closeAddPointModal:r}=Wi(),{layers:i,addPoint:s,getLayer:a}=O0(),o=Oi(),[l,u]=oe.useState(""),[f,d]=oe.useState(""),[g,p]=oe.useState(""),[E,v]=oe.useState(""),w=e?a(e):null,T=14*o.fontScale/100;oe.useEffect(()=>{w&&w.categories.length>0&&!f&&d(w.categories[0])},[w]);const R=()=>{!l.trim()||!e||!t||(s(e,{name:l.trim(),category:f||"Overig",notes:g.trim(),url:E.trim()||void 0,coordinates:[t.lng,t.lat]}),u(""),d(""),p(""),v(""),r())},k=()=>{u(""),d(""),p(""),v(""),r()};return w?y.jsx(_i,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:k}),y.jsxs(Wt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(cu,{size:18}),y.jsx("span",{className:"font-medium",children:"Punt toevoegen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:o.fontScale,onChange:N=>o.setFontScale(parseInt(N.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${o.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:k,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(eo,{size:18})})]})]}),y.jsx("div",{className:"px-4 py-2 bg-gray-50",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:w.color}}),y.jsx("span",{className:"text-sm text-gray-600",children:w.name})]})}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${T}px`},children:[y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam *"}),y.jsx("input",{type:"text",value:l,onChange:N=>u(N.target.value),placeholder:"bijv. Grube Clara",className:"w-full px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"1em"},autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Categorie"}),y.jsx("select",{value:f,onChange:N=>d(N.target.value),className:"w-full px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"1em"},children:w.categories.map(N=>y.jsx("option",{value:N,children:N},N))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Notities"}),y.jsx("textarea",{value:g,onChange:N=>p(N.target.value),placeholder:"Beschrijving, tips, opmerkingen...",rows:3,className:"w-full px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-blue-500 resize-none",style:{fontSize:"1em"}})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Link (optioneel)"}),y.jsx("input",{type:"url",value:E,onChange:N=>v(N.target.value),placeholder:"https://...",className:"w-full px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"1em"}})]}),t&&y.jsxs("div",{className:"text-gray-400",style:{fontSize:"0.75em"},children:["Locatie: ",t.lat.toFixed(5),", ",t.lng.toFixed(5)]})]}),y.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${T}px`},children:[y.jsx("button",{onClick:k,className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Annuleren"}),y.jsx("button",{onClick:R,disabled:!l.trim(),className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Toevoegen"})]})]})]})}):null}function LEe(){const{layerManagerModalOpen:n,closeLayerManagerModal:e,openCreateLayerModal:t}=Wi(),{layers:r,removeLayer:i,toggleVisibility:s,exportLayerAsGeoJSON:a,importLayerFromGeoJSON:o}=O0(),l=Oi(),u=14*l.fontScale/100,[f,d]=oe.useState(null),[g,p]=oe.useState(null),[E,v]=oe.useState(null),w=O=>{g===O?(i(O),p(null)):(p(O),setTimeout(()=>p(null),3e3))},T=O=>{a(O)},R=async O=>{const B=O.target.files?.[0];if(B){try{const P=await B.text(),b=o(P);b.success||(v(b.error||"Import mislukt"),setTimeout(()=>v(null),3e3))}catch{v("Kon bestand niet lezen"),setTimeout(()=>v(null),3e3)}O.target.value=""}},k=()=>{d(null),p(null),v(null),e()},N=()=>{k(),t()};return y.jsx(_i,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Wt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:k}),y.jsxs(Wt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Dl,{size:18}),y.jsx("span",{className:"font-medium",children:"Mijn Lagen beheren"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:l.fontScale,onChange:O=>l.setFontScale(parseInt(O.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${l.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:k,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(eo,{size:18})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${u}px`},children:[r.length===0?y.jsxs("div",{className:"p-8 text-center text-gray-500",children:[y.jsx("p",{className:"mb-4",style:{fontSize:"1em"},children:"Je hebt nog geen eigen lagen."}),y.jsxs("button",{onClick:N,className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:[y.jsx(Il,{size:16,className:"inline mr-2"}),"Nieuwe laag aanmaken"]})]}):y.jsx("div",{className:"divide-y divide-gray-100",children:r.map(O=>y.jsx(OEe,{layer:O,isExpanded:f===O.id,onToggleExpand:()=>d(f===O.id?null:O.id),onToggleVisibility:()=>s(O.id),onExport:()=>T(O.id),onDelete:()=>w(O.id),confirmDelete:g===O.id},O.id))}),E&&y.jsx("div",{className:"mx-4 my-2 p-3 bg-red-50 text-red-700 text-sm rounded-lg",children:E})]}),y.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${u}px`},children:[y.jsxs("label",{className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-2 border-0 outline-none",children:[y.jsx(uC,{size:16}),y.jsx("span",{style:{fontSize:"1em"},children:"Importeren"}),y.jsx("input",{type:"file",accept:".geojson,.json",onChange:R,className:"hidden"})]}),y.jsxs("button",{onClick:N,className:"flex-1 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",style:{fontSize:"1em"},children:[y.jsx(Il,{size:16}),y.jsx("span",{children:"Nieuwe laag"})]})]})]})]})})}function OEe({layer:n,isExpanded:e,onToggleExpand:t,onToggleVisibility:r,onExport:i,onDelete:s,confirmDelete:a}){return y.jsxs("div",{className:"bg-white",children:[y.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[y.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors border-0 outline-none bg-transparent",children:e?y.jsx(iC,{size:16}):y.jsx(SE,{size:16})}),y.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"font-medium text-gray-800 truncate",children:n.name}),y.jsxs("div",{className:"text-xs text-gray-500",children:[n.points.length," punten"]})]}),y.jsx("button",{onClick:r,className:`p-2 rounded transition-colors border-0 outline-none ${n.visible?"text-blue-500 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?y.jsx(aC,{size:18}):y.jsx(sC,{size:18})}),y.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteren als GeoJSON",children:y.jsx(uI,{size:18})}),y.jsx("button",{onClick:s,className:`p-2 rounded transition-colors border-0 outline-none ${a?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:a?"Klik nogmaals om te verwijderen":"Verwijderen",children:y.jsx(g1,{size:18})})]}),y.jsx(_i,{children:e&&y.jsx(Wt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:y.jsxs("div",{className:"px-4 pb-3 pl-12 space-y-2",children:[y.jsx("div",{className:"flex flex-wrap gap-1",children:n.categories.map(o=>y.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:o},o))}),n.points.length>0&&y.jsxs("div",{className:"text-xs text-gray-500 space-y-1 max-h-32 overflow-y-auto",children:[n.points.slice(0,5).map(o=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-medium",children:o.name}),y.jsxs("span",{className:"text-gray-400",children:["(",o.category,")"]})]},o.id)),n.points.length>5&&y.jsxs("div",{className:"text-gray-400",children:["...en ",n.points.length-5," meer"]})]}),y.jsxs("div",{className:"text-xs text-gray-400",children:["Aangemaakt: ",new Date(n.createdAt).toLocaleDateString("nl-NL")]})]})})})]})}class vO{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const t=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/t)}add(e){if(this.buffer.length>0){const t=this.buffer[this.buffer.length-1];let r=e-t;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalizeHeading(this.buffer[0]);let e=0,t=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,t+=s}return this.normalizeHeading(e/t)}normalizeHeading(e){return(e%360+360)%360}clear(){this.buffer=[]}}function DEe(){const n=Bi(u=>u.tracking),e=Bi(u=>u.headingSource);Bi(u=>u.speed);const t=Bi(u=>u.setSmoothedHeading),r=oe.useRef(new vO(6)),i=oe.useRef(new vO(10)),s=oe.useRef(0),a=oe.useRef(null),o=33,l=oe.useCallback((u,f)=>{const d=performance.now();if(d-s.current<o)return;const g=f==="gps"?r.current:i.current;g.add(u);const p=g.getSmoothed();p!==null&&(s.current=d,t(p))},[t]);oe.useEffect(()=>{if(!n)return;const u=d=>{d.coords.heading!==null&&d.coords.speed!==null&&d.coords.speed>.8&&d.coords.accuracy<20&&l(d.coords.heading,"gps")},f=navigator.geolocation.watchPosition(u,()=>{},{enableHighAccuracy:!0,maximumAge:500,timeout:1e4});return()=>navigator.geolocation.clearWatch(f)},[n,l]),oe.useEffect(()=>{if(!n||e!=="compass")return;let u=0;const f=50,d=p=>{const E=performance.now();if(!(E-u<f)&&(u=E,p.alpha!==null)){const v=(360-p.alpha)%360;l(v,"compass")}},g=p=>{const E=performance.now();E-u<f||(u=E,p.webkitCompassHeading!==void 0&&l(p.webkitCompassHeading,"compass"))};return window.addEventListener("deviceorientationabsolute",d),window.addEventListener("deviceorientation",g),()=>{window.removeEventListener("deviceorientationabsolute",d),window.removeEventListener("deviceorientation",g)}},[n,e,l]),oe.useEffect(()=>{n||(r.current.clear(),i.current.clear())},[n]),oe.useEffect(()=>()=>{a.current&&cancelAnimationFrame(a.current)},[])}function FEe(){const n=vs(i=>i.map),e=Xr(i=>i.setLayerOpacity),t=Xr(i=>i.visible),r=oe.useRef(null);oe.useEffect(()=>{if(!n)return;const i=()=>{const s=n.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const a=t["AHN 0.5m"],o=t["AHN4 Multi-Hillshade NL"];!a&&!o||(a&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),o&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return n.on("moveend",i),i(),()=>{n.un("moveend",i)}},[n,t,e])}function jEe(){DEe(),FEe();const e=14*Oi(t=>t.fontScale)/100;return y.jsx(rEe,{children:y.jsxs("div",{style:{fontSize:`${e}px`},children:[y.jsx(Oee,{}),y.jsx(Vae,{}),y.jsx(bEe,{}),y.jsx(cEe,{}),y.jsx(kEe,{}),y.jsx(Fxe,{}),y.jsx(jxe,{}),y.jsx(eEe,{}),y.jsx(Fae,{}),y.jsx(tEe,{}),y.jsx(Bae,{}),y.jsx(Uae,{}),y.jsx(Jxe,{}),y.jsx(Vxe,{}),y.jsx($xe,{}),y.jsx(REe,{}),y.jsx(Hxe,{}),y.jsx(qxe,{}),y.jsx(wEe,{}),y.jsx(MEe,{}),y.jsx(NEe,{}),y.jsx(LEe,{})]})})}const VEe="2.20.2";console.log(`%c DetectorApp v${VEe}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");eB.createRoot(document.getElementById("root")).render(y.jsx(jEe,{}));export{bl as C,Qr as F,wC as G,F$ as I,Vo as L,Za as P,nr as S,Xu as T,Wp as V,yW as a,uW as b,hs as c,Gp as d,Jh as e,qa as f,Rh as g,Up as h,an as p,r7 as r};
//# sourceMappingURL=index-DzKGgEax.js.map
