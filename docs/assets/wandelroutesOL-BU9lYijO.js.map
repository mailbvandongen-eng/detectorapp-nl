{"version":3,"file":"wandelroutesOL-BU9lYijO.js","sources":["../../src/layers/wandelroutesOL.ts"],"sourcesContent":["import { Vector as VectorLayer } from 'ol/layer'\r\nimport { Vector as VectorSource } from 'ol/source'\r\nimport Feature from 'ol/Feature'\r\nimport LineString from 'ol/geom/LineString'\r\nimport Point from 'ol/geom/Point'\r\nimport { fromLonLat } from 'ol/proj'\r\nimport { Style, Stroke, Circle, Fill, Text } from 'ol/style'\r\n\r\n// Route metadata - matched to GPX filenames\r\ninterface RouteInfo {\r\n  file: string           // GPX filename (without .gpx)\r\n  name: string           // Display name\r\n  country: 'NL' | 'BE'\r\n  region: string\r\n  distance: number       // km\r\n  duration: string\r\n  startAddress: string\r\n  description: string\r\n  url: string\r\n}\r\n\r\nconst ROUTES: RouteInfo[] = [\r\n  // Nederland\r\n  {\r\n    file: 'sint-pietersberg',\r\n    name: 'Sint-Pietersberg',\r\n    country: 'NL',\r\n    region: 'Limburg',\r\n    distance: 10.8,\r\n    duration: '2 uur',\r\n    startAddress: 'Luikerweg 71, Maastricht',\r\n    description: 'Grensoverschrijdend natuurgebied met Fort Sint-Pieter, Duivelsgrot en uitkijkpunt de Ster.',\r\n    url: 'https://www.routezoeker.com/wandelroutes/wandelroute-sint-pietersberg-lang'\r\n  },\r\n  {\r\n    file: 'utrechtse-heuvelrug',\r\n    name: 'Utrechtse Heuvelrug',\r\n    country: 'NL',\r\n    region: 'Utrecht',\r\n    distance: 15,\r\n    duration: '3 uur',\r\n    startAddress: 'Station Driebergen-Zeist',\r\n    description: 'Door afwisselende natuurgebieden: bossen, heide en het dorpje Austerlitz met de bekende piramide.',\r\n    url: 'https://www.routezoeker.com/wandelroutes/ns-utrechtse-heuvelrug'\r\n  },\r\n  {\r\n    file: 'duinreservaat',\r\n    name: 'Noord-Hollands Duinreservaat',\r\n    country: 'NL',\r\n    region: 'Noord-Holland',\r\n    distance: 15,\r\n    duration: '3 uur',\r\n    startAddress: 'Station Castricum',\r\n    description: 'Door bossen, open velden en duinen naar het strand van Egmond aan Zee.',\r\n    url: 'https://www.routezoeker.com/wandelroutes/ns-duinreservaat-noord-holland'\r\n  },\r\n  {\r\n    file: 'kennemerduinen',\r\n    name: 'Kennemerduinen',\r\n    country: 'NL',\r\n    region: 'Noord-Holland',\r\n    distance: 16,\r\n    duration: '3,5 uur',\r\n    startAddress: 'Station Santpoort-Noord',\r\n    description: 'Door landgoederen Duin- en Kruidberg naar de kust. Keuze tussen strand of duinen.',\r\n    url: 'https://www.routezoeker.com/wandelroutes/ns-kennemerduinen'\r\n  },\r\n  {\r\n    file: 'zoutelande',\r\n    name: 'Duinwandeling Zoutelande',\r\n    country: 'NL',\r\n    region: 'Zeeland',\r\n    distance: 5.8,\r\n    duration: '1,5 uur',\r\n    startAddress: 'Molemweg, Zoutelande',\r\n    description: 'Door de hoogste duinen van Nederland met WOII-bunkers in het bos.',\r\n    url: 'https://www.routezoeker.com/wandelroutes/duinwandeling-zoutelande'\r\n  },\r\n  {\r\n    file: 'renesse',\r\n    name: 'Duinen van Renesse',\r\n    country: 'NL',\r\n    region: 'Zeeland',\r\n    distance: 12.2,\r\n    duration: '3 uur',\r\n    startAddress: 'Roelandsweg 11, Renesse',\r\n    description: 'Gevarieerd duinlandschap met oude en jonge duinen, natte valleien en historische akkertjes.',\r\n    url: 'https://www.routezoeker.com/wandelroutes/door-de-duinen-van-renesse'\r\n  },\r\n  {\r\n    file: 'schiedam',\r\n    name: 'Schiedam Jeneverstad',\r\n    country: 'NL',\r\n    region: 'Zuid-Holland',\r\n    distance: 19,\r\n    duration: '4 uur',\r\n    startAddress: 'Station Delft Campus',\r\n    description: 'Van Delft naar Rotterdam langs de Schie, door parken en weiden naar de historische molens van Schiedam.',\r\n    url: 'https://www.routezoeker.com/wandelroutes/schiedam-jeneverstad'\r\n  },\r\n  // Belgie\r\n  {\r\n    file: 'vloethemveld',\r\n    name: 'Vloethemveld',\r\n    country: 'BE',\r\n    region: 'West-Vlaanderen',\r\n    distance: 8.7,\r\n    duration: '2 uur',\r\n    startAddress: 'Knooppunt 25, Diksmuidse Heirweg, Zedelgem',\r\n    description: 'Voormalig militair domein, nu natuurgebied met heide en bos.',\r\n    url: 'https://www.routezoeker.com/wandelroutes/t-beste-van-vloethemveld'\r\n  }\r\n]\r\n\r\n// Kleuren per land\r\nconst ROUTE_COLORS: Record<string, string> = {\r\n  NL: '#22c55e',  // Groen\r\n  BE: '#f97316'   // Oranje\r\n}\r\n\r\n// Parse GPX XML and extract track coordinates\r\nfunction parseGPX(gpxText: string): [number, number][] {\r\n  const coords: [number, number][] = []\r\n  const parser = new DOMParser()\r\n  const doc = parser.parseFromString(gpxText, 'text/xml')\r\n\r\n  // Get all trackpoints\r\n  const trkpts = doc.querySelectorAll('trkpt')\r\n  trkpts.forEach(trkpt => {\r\n    const lat = parseFloat(trkpt.getAttribute('lat') || '0')\r\n    const lon = parseFloat(trkpt.getAttribute('lon') || '0')\r\n    if (lat && lon) {\r\n      coords.push([lon, lat])\r\n    }\r\n  })\r\n\r\n  return coords\r\n}\r\n\r\n// Create style for route line\r\nfunction createRouteStyle(feature: Feature, isHighlight = false): Style[] {\r\n  const country = feature.get('country') || 'NL'\r\n  const color = ROUTE_COLORS[country] || ROUTE_COLORS.NL\r\n  const name = feature.get('name') || ''\r\n\r\n  const styles: Style[] = []\r\n\r\n  // Route line - thicker when highlighted\r\n  styles.push(new Style({\r\n    stroke: new Stroke({\r\n      color: isHighlight ? color : color,\r\n      width: isHighlight ? 5 : 3,\r\n      lineCap: 'round',\r\n      lineJoin: 'round'\r\n    })\r\n  }))\r\n\r\n  // White outline for contrast\r\n  styles.unshift(new Style({\r\n    stroke: new Stroke({\r\n      color: 'rgba(255, 255, 255, 0.8)',\r\n      width: isHighlight ? 8 : 5,\r\n      lineCap: 'round',\r\n      lineJoin: 'round'\r\n    })\r\n  }))\r\n\r\n  return styles\r\n}\r\n\r\n// Create style for start point marker\r\nfunction createStartPointStyle(feature: Feature): Style {\r\n  const country = feature.get('country') || 'NL'\r\n  const color = ROUTE_COLORS[country] || ROUTE_COLORS.NL\r\n  const name = feature.get('name') || ''\r\n\r\n  return new Style({\r\n    image: new Circle({\r\n      radius: 8,\r\n      fill: new Fill({ color: color }),\r\n      stroke: new Stroke({ color: '#ffffff', width: 2 })\r\n    }),\r\n    text: new Text({\r\n      text: name,\r\n      offsetY: -16,\r\n      font: 'bold 11px sans-serif',\r\n      fill: new Fill({ color: '#1a1a1a' }),\r\n      stroke: new Stroke({ color: '#ffffff', width: 3 }),\r\n      textAlign: 'center'\r\n    })\r\n  })\r\n}\r\n\r\nexport async function createWandelroutesLayer(): Promise<VectorLayer<VectorSource>> {\r\n  const features: Feature[] = []\r\n\r\n  // Load all GPX files\r\n  for (const route of ROUTES) {\r\n    try {\r\n      const response = await fetch(`/detectorapp-nl/data/wandelroutes/${route.file}.gpx`)\r\n      if (!response.ok) continue\r\n\r\n      const gpxText = await response.text()\r\n      const coords = parseGPX(gpxText)\r\n\r\n      if (coords.length < 2) continue\r\n\r\n      // Create line feature for the route\r\n      const lineCoords = coords.map(c => fromLonLat(c))\r\n      const lineFeature = new Feature({\r\n        geometry: new LineString(lineCoords),\r\n        name: route.name,\r\n        country: route.country,\r\n        region: route.region,\r\n        distance: route.distance,\r\n        duration: route.duration,\r\n        startAddress: route.startAddress,\r\n        description: route.description,\r\n        url: route.url,\r\n        layerType: 'wandelroute',\r\n        featureType: 'route'\r\n      })\r\n      features.push(lineFeature)\r\n\r\n      // Create start point marker\r\n      const startPoint = new Feature({\r\n        geometry: new Point(fromLonLat(coords[0])),\r\n        name: route.name,\r\n        country: route.country,\r\n        region: route.region,\r\n        distance: route.distance,\r\n        duration: route.duration,\r\n        startAddress: route.startAddress,\r\n        description: route.description,\r\n        url: route.url,\r\n        layerType: 'wandelroute',\r\n        featureType: 'startpoint'\r\n      })\r\n      features.push(startPoint)\r\n\r\n    } catch (err) {\r\n      console.warn(`Failed to load GPX: ${route.file}`, err)\r\n    }\r\n  }\r\n\r\n  const source = new VectorSource({ features })\r\n\r\n  return new VectorLayer({\r\n    source,\r\n    style: (feature) => {\r\n      const featureType = feature.get('featureType')\r\n      if (featureType === 'startpoint') {\r\n        return createStartPointStyle(feature as Feature)\r\n      }\r\n      return createRouteStyle(feature as Feature)\r\n    },\r\n    zIndex: 850,\r\n    properties: {\r\n      name: 'Wandelroutes',\r\n      layerType: 'wandelroute'\r\n    }\r\n  })\r\n}\r\n"],"names":["ROUTES","ROUTE_COLORS","parseGPX","gpxText","coords","trkpt","lat","lon","createRouteStyle","feature","isHighlight","country","color","styles","Style","Stroke","createStartPointStyle","name","Circle","Fill","Text","createWandelroutesLayer","features","route","response","lineCoords","c","fromLonLat","lineFeature","Feature","LineString","startPoint","Point","err","source","VectorSource","VectorLayer"],"mappings":"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"}