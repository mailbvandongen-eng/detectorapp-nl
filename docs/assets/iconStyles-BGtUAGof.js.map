{"version":3,"file":"iconStyles-BGtUAGof.js","sources":["../../src/layers/iconStyles.ts"],"sourcesContent":["import { Style, Icon } from 'ol/style'\nimport type { FeatureLike } from 'ol/Feature'\n\n// Lucide icon SVG paths (24x24 viewBox)\nexport const LUCIDE_ICONS = {\n  // Archaeological / Historical\n  landmark: 'M3 22h18M6 18v4M10 18v4M14 18v4M18 18v4M12 2l10 8H2l10-8z',\n  pickaxe: 'M14.531 12.469 6.619 20.38a1 1 0 1 1-1.414-1.414l7.911-7.912M15.686 4.314A2 2 0 0 0 14.272 3h-.529a2 2 0 0 1-1.414-.586l-.828-.828a2 2 0 0 0-2.828 0l-.828.828a2 2 0 0 1-1.414.586H5.9a2 2 0 0 0-1.414.586L2.172 5.9a2 2 0 0 0 0 2.828l.828.828A2 2 0 0 1 3.586 11v.529a2 2 0 0 0 .586 1.414l2.828 2.828a2 2 0 0 0 2.828 0l7.172-7.172a2 2 0 0 0 0-2.828l-1.314-1.457z',\n  castle: 'M22 20v-9H2v9M2 14h20M12 11V2M10 2h4M6 11V5M4 5h4M18 11V5M16 5h4M7 14v6M12 14v6M17 14v6',\n  mapPin: 'M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0ZM12 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4z',\n\n  // Approval / Permission\n  thumbsUp: 'M7 10v12M15 5.88L14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z',\n  checkCircle: 'M22 11.08V12a10 10 0 1 1-5.93-9.14M22 4L12 14.01l-3-3',\n  shovel: 'M2 22l6-6M9 8l4-4c1-1 3-1 4 0l3 3c1 1 1 3 0 4l-4 4M9.5 8.5L15.5 14.5',\n\n  // Recreation\n  baby: 'M9 12h.01M15 12h.01M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5M12 2a8 8 0 0 0-8 8v12h16V10a8 8 0 0 0-8-8z',\n  trees: 'M10 10v.01M14 6v.01M13 13.01V13M18 8.01V8M6 12.01V12M21 15l-3.5-7L14 15M14 15l-2.5-5L9 15M9 15l-3.5-7L2 15M2 22h20',\n  recycle: 'M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5M11.5 3h1l4.243 7.346M16 12l3.185 5.5a1.786 1.786 0 0 1-.004 1.784 1.83 1.83 0 0 1-1.57.881H12.5M7.5 12l4.243-7.346M9.371 21h5.258M12 21v-5.5M7.5 12H3M16 12h5M7.5 12l2.5 4.5M16 12l-2.5 4.5',\n  star: 'M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z',\n\n  // Culture\n  museum: 'M3 22h18M4 22V8l8-5 8 5v14M10 22v-4a2 2 0 0 1 4 0v4M8 11h.01M16 11h.01',\n\n  // Nature / Science\n  bone: 'M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z',\n\n  // Military\n  bunker: 'M3 21h18M5 21V7l7-4 7 4v14M9 21V11h6v10M9 11h6M5 7h14',\n\n  // Burial / Mounds\n  tumulus: 'M2 20h20M4 20c0-6 3.5-12 8-12s8 6 8 12',  // Simple burial mound shape\n  terp: 'M2 20h20M4 20c0-5 3-10 8-10s8 5 8 10M10 10v-3h4v3',  // Mound with house\n\n  // Default\n  circle: 'M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z',\n  dot: 'M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0-6 0',\n}\n\n// Create SVG string with color and size\nfunction createSvgIcon(path: string, color: string, size: number, strokeWidth: number = 2): string {\n  const svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size}\" height=\"${size}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"${color}\" stroke-width=\"${strokeWidth}\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"${path}\"/></svg>`\n  return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg)\n}\n\n// Create filled circle with icon overlay\nfunction createFilledIconSvg(iconPath: string, bgColor: string, iconColor: string, size: number): string {\n  const svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size}\" height=\"${size}\" viewBox=\"0 0 32 32\">\n    <circle cx=\"16\" cy=\"16\" r=\"14\" fill=\"${bgColor}\" stroke=\"white\" stroke-width=\"2\"/>\n    <g transform=\"translate(4, 4) scale(1)\">\n      <path d=\"${iconPath}\" fill=\"none\" stroke=\"${iconColor}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </g>\n  </svg>`\n  return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg)\n}\n\n// Get zoom-responsive scale factor\nfunction getScaleForResolution(resolution: number): number {\n  // Resolution roughly corresponds to meters per pixel\n  // At zoom 8: resolution ~600, at zoom 14: resolution ~10, at zoom 18: resolution ~0.6\n  if (resolution > 300) return 0.4      // Very zoomed out\n  if (resolution > 150) return 0.5      // Zoomed out\n  if (resolution > 75) return 0.6       // Medium-far\n  if (resolution > 40) return 0.7       // Medium\n  if (resolution > 20) return 0.85      // Medium-close\n  if (resolution > 10) return 1.0       // Close\n  return 1.2                            // Very close\n}\n\n// Style cache to avoid recreating styles\nconst styleCache = new Map<string, Style>()\n\nexport interface IconStyleOptions {\n  icon: keyof typeof LUCIDE_ICONS\n  color: string\n  bgColor?: string        // If set, creates filled circle with icon\n  baseSize?: number       // Base size in pixels (default 24)\n  minScale?: number       // Minimum scale factor (default 0.4)\n  maxScale?: number       // Maximum scale factor (default 1.2)\n}\n\n// Create a zoom-responsive icon style function\nexport function createIconStyle(options: IconStyleOptions) {\n  const {\n    icon,\n    color,\n    bgColor,\n    baseSize = 24,\n    minScale = 0.4,\n    maxScale = 1.2\n  } = options\n\n  const iconPath = LUCIDE_ICONS[icon] || LUCIDE_ICONS.circle\n\n  return function(feature: FeatureLike, resolution: number): Style {\n    const scale = Math.max(minScale, Math.min(maxScale, getScaleForResolution(resolution)))\n    const cacheKey = `${icon}-${color}-${bgColor || 'none'}-${scale.toFixed(2)}`\n\n    let style = styleCache.get(cacheKey)\n    if (!style) {\n      const svgSrc = bgColor\n        ? createFilledIconSvg(iconPath, bgColor, color, baseSize)\n        : createSvgIcon(iconPath, color, baseSize)\n\n      style = new Style({\n        image: new Icon({\n          src: svgSrc,\n          scale: scale,\n          anchor: [0.5, 0.5],\n        })\n      })\n      styleCache.set(cacheKey, style)\n    }\n\n    return style\n  }\n}\n\n// Create a dynamic color style function (for layers with category-based colors)\nexport function createDynamicIconStyle(\n  icon: keyof typeof LUCIDE_ICONS,\n  getColor: (feature: FeatureLike) => string,\n  baseSize: number = 26\n) {\n  const iconPath = LUCIDE_ICONS[icon] || LUCIDE_ICONS.circle\n\n  return function(feature: FeatureLike, resolution: number): Style {\n    const bgColor = getColor(feature)\n    const scale = Math.max(0.4, Math.min(1.2, getScaleForResolution(resolution)))\n    const cacheKey = `${icon}-${bgColor}-${scale.toFixed(2)}`\n\n    let style = styleCache.get(cacheKey)\n    if (!style) {\n      const svgSrc = createFilledIconSvg(iconPath, bgColor, 'white', baseSize)\n\n      style = new Style({\n        image: new Icon({\n          src: svgSrc,\n          scale: scale,\n          anchor: [0.5, 0.5],\n        })\n      })\n      styleCache.set(cacheKey, style)\n    }\n\n    return style\n  }\n}\n\n// Predefined styles for common layer types\nexport const LAYER_STYLES = {\n  archaeology: (color: string = '#7c3aed') => createIconStyle({\n    icon: 'pickaxe',\n    color: 'white',\n    bgColor: color,\n    baseSize: 28\n  }),\n\n  castle: () => createIconStyle({\n    icon: 'castle',\n    color: 'white',\n    bgColor: '#7c3aed',\n    baseSize: 28\n  }),\n\n  museum: () => createIconStyle({\n    icon: 'museum',\n    color: 'white',\n    bgColor: '#8b5cf6',\n    baseSize: 26\n  }),\n\n  playground: () => createIconStyle({\n    icon: 'baby',\n    color: 'white',\n    bgColor: '#f97316',\n    baseSize: 24\n  }),\n\n  recycle: () => createIconStyle({\n    icon: 'recycle',\n    color: 'white',\n    bgColor: '#84cc16',\n    baseSize: 26\n  }),\n\n  permission: () => createIconStyle({\n    icon: 'thumbsUp',\n    color: 'white',\n    bgColor: '#22c55e',\n    baseSize: 28\n  }),\n\n  landmark: (color: string = '#2b6cb0') => createIconStyle({\n    icon: 'landmark',\n    color: 'white',\n    bgColor: color,\n    baseSize: 28\n  }),\n\n  mapPin: (color: string = '#dc2626') => createIconStyle({\n    icon: 'mapPin',\n    color: 'white',\n    bgColor: color,\n    baseSize: 26\n  }),\n\n  fossil: () => createIconStyle({\n    icon: 'bone',\n    color: 'white',\n    bgColor: '#a16207',  // amber-700\n    baseSize: 26\n  }),\n\n  hunebed: () => createIconStyle({\n    icon: 'landmark',\n    color: 'white',\n    bgColor: '#78716c',  // stone-500 (greyish-brown for megalithic)\n    baseSize: 28\n  }),\n\n  neolithic: () => createIconStyle({\n    icon: 'mapPin',\n    color: 'white',\n    bgColor: '#92400e',  // amber-800 (earthy brown for neolithic)\n    baseSize: 24\n  }),\n\n  bunker: () => createIconStyle({\n    icon: 'bunker',\n    color: 'white',\n    bgColor: '#57534e',  // stone-600 (concrete grey for WWII bunkers)\n    baseSize: 26\n  }),\n\n  grafheuvel: () => createIconStyle({\n    icon: 'tumulus',\n    color: 'white',\n    bgColor: '#854d0e',  // yellow-800 (bronze age brown)\n    baseSize: 26\n  }),\n\n  terp: () => createIconStyle({\n    icon: 'terp',\n    color: 'white',\n    bgColor: '#0d9488',  // teal-600 (Frisian green-blue)\n    baseSize: 26\n  }),\n}\n"],"names":["LUCIDE_ICONS","createSvgIcon","path","color","size","strokeWidth","svg","createFilledIconSvg","iconPath","bgColor","iconColor","getScaleForResolution","resolution","styleCache","createIconStyle","options","icon","baseSize","minScale","maxScale","feature","scale","cacheKey","style","svgSrc","Style","Icon","createDynamicIconStyle","getColor","LAYER_STYLES"],"mappings":"+CAIO,MAAMA,EAAe,CAE1B,SAAU,4DACV,QAAS,yWACT,OAAQ,0FACR,OAAQ,oFAGR,SAAU,mKACV,YAAa,wDACb,OAAQ,uEAGR,KAAM,mGACN,MAAO,qHACP,QAAS,2QACT,KAAM,+FAGN,OAAQ,yEAGR,KAAM,mMAGN,OAAQ,wDAGR,QAAS,yCACT,KAAM,oDAGN,OAAQ,2EACR,IAAK,yCACP,EAGA,SAASC,EAAcC,EAAcC,EAAeC,EAAcC,EAAsB,EAAW,CACjG,MAAMC,EAAM,kDAAkDF,CAAI,aAAaA,CAAI,6CAA6CD,CAAK,mBAAmBE,CAAW,6DAA6DH,CAAI,YACpO,MAAO,oCAAsC,mBAAmBI,CAAG,CACrE,CAGA,SAASC,EAAoBC,EAAkBC,EAAiBC,EAAmBN,EAAsB,CACvG,MAAME,EAAM,kDAAkDF,CAAI,aAAaA,CAAI;AAAA,2CAC1CK,CAAO;AAAA;AAAA,iBAEjCD,CAAQ,yBAAyBE,CAAS;AAAA;AAAA,UAGzD,MAAO,oCAAsC,mBAAmBJ,CAAG,CACrE,CAGA,SAASK,EAAsBC,EAA4B,CAGzD,OAAIA,EAAa,IAAY,GACzBA,EAAa,IAAY,GACzBA,EAAa,GAAW,GACxBA,EAAa,GAAW,GACxBA,EAAa,GAAW,IACxBA,EAAa,GAAW,EACrB,GACT,CAGA,MAAMC,MAAiB,IAYhB,SAASC,EAAgBC,EAA2B,CACzD,KAAM,CACJ,KAAAC,EACA,MAAAb,EACA,QAAAM,EACA,SAAAQ,EAAW,GACX,SAAAC,EAAW,GACX,SAAAC,EAAW,GAAA,EACTJ,EAEEP,EAAWR,EAAagB,CAAI,GAAKhB,EAAa,OAEpD,OAAO,SAASoB,EAAsBR,EAA2B,CAC/D,MAAMS,EAAQ,KAAK,IAAIH,EAAU,KAAK,IAAIC,EAAUR,EAAsBC,CAAU,CAAC,CAAC,EAChFU,EAAW,GAAGN,CAAI,IAAIb,CAAK,IAAIM,GAAW,MAAM,IAAIY,EAAM,QAAQ,CAAC,CAAC,GAE1E,IAAIE,EAAQV,EAAW,IAAIS,CAAQ,EACnC,GAAI,CAACC,EAAO,CACV,MAAMC,EAASf,EACXF,EAAoBC,EAAUC,EAASN,EAAOc,CAAQ,EACtDhB,EAAcO,EAAUL,EAAOc,CAAQ,EAE3CM,EAAQ,IAAIE,EAAM,CAChB,MAAO,IAAIC,EAAK,CACd,IAAKF,EACL,MAAAH,EACA,OAAQ,CAAC,GAAK,EAAG,CAAA,CAClB,CAAA,CACF,EACDR,EAAW,IAAIS,EAAUC,CAAK,CAChC,CAEA,OAAOA,CACT,CACF,CAGO,SAASI,EACdX,EACAY,EACAX,EAAmB,GACnB,CACA,MAAMT,EAAWR,EAAagB,CAAI,GAAKhB,EAAa,OAEpD,OAAO,SAASoB,EAAsBR,EAA2B,CAC/D,MAAMH,EAAUmB,EAASR,CAAO,EAC1BC,EAAQ,KAAK,IAAI,GAAK,KAAK,IAAI,IAAKV,EAAsBC,CAAU,CAAC,CAAC,EACtEU,EAAW,GAAGN,CAAI,IAAIP,CAAO,IAAIY,EAAM,QAAQ,CAAC,CAAC,GAEvD,IAAIE,EAAQV,EAAW,IAAIS,CAAQ,EACnC,GAAI,CAACC,EAAO,CACV,MAAMC,EAASjB,EAAoBC,EAAUC,EAAS,QAASQ,CAAQ,EAEvEM,EAAQ,IAAIE,EAAM,CAChB,MAAO,IAAIC,EAAK,CACd,IAAKF,EACL,MAAAH,EACA,OAAQ,CAAC,GAAK,EAAG,CAAA,CAClB,CAAA,CACF,EACDR,EAAW,IAAIS,EAAUC,CAAK,CAChC,CAEA,OAAOA,CACT,CACF,CAGO,MAAMM,EAAe,CAC1B,YAAa,CAAC1B,EAAgB,YAAcW,EAAgB,CAC1D,KAAM,UACN,MAAO,QACP,QAASX,EACT,SAAU,EAAA,CACX,EAED,OAAQ,IAAMW,EAAgB,CAC5B,KAAM,SACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,OAAQ,IAAMA,EAAgB,CAC5B,KAAM,SACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,WAAY,IAAMA,EAAgB,CAChC,KAAM,OACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,QAAS,IAAMA,EAAgB,CAC7B,KAAM,UACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,WAAY,IAAMA,EAAgB,CAChC,KAAM,WACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,SAAU,CAACX,EAAgB,YAAcW,EAAgB,CACvD,KAAM,WACN,MAAO,QACP,QAASX,EACT,SAAU,EAAA,CACX,EAED,OAAQ,CAACA,EAAgB,YAAcW,EAAgB,CACrD,KAAM,SACN,MAAO,QACP,QAASX,EACT,SAAU,EAAA,CACX,EAED,OAAQ,IAAMW,EAAgB,CAC5B,KAAM,OACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,QAAS,IAAMA,EAAgB,CAC7B,KAAM,WACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,UAAW,IAAMA,EAAgB,CAC/B,KAAM,SACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,OAAQ,IAAMA,EAAgB,CAC5B,KAAM,SACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,WAAY,IAAMA,EAAgB,CAChC,KAAM,UACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,EAED,KAAM,IAAMA,EAAgB,CAC1B,KAAM,OACN,MAAO,QACP,QAAS,UACT,SAAU,EAAA,CACX,CACH"}