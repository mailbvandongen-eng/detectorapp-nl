{"version":3,"file":"castellaLijnenOL-O2KJLe96.js","sources":["../../src/layers/castellaLijnenOL.ts"],"sourcesContent":["/**\n * Castella lijnen Layer for OpenLayers\n * Roman defensive lines - Zoom-responsive width\n */\n\nimport { Vector as VectorLayer } from 'ol/layer'\nimport { Vector as VectorSource } from 'ol/source'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Stroke } from 'ol/style'\n\n// Cache styles per resolution\nconst styleCache = new Map<string, Style>()\n\nfunction getLineWidth(resolution: number): number {\n  if (resolution > 300) return 0.5\n  if (resolution > 150) return 0.75\n  if (resolution > 75) return 1\n  if (resolution > 40) return 1.5\n  if (resolution > 20) return 2\n  if (resolution > 10) return 2.5\n  return 3\n}\n\nexport async function createCastellaLijnenLayerOL() {\n  const response = await fetch('/detectorapp-nl/data/rom_def_lines.geojson')\n  const geojson = await response.json()\n\n  const source = new VectorSource({\n    features: new GeoJSON().readFeatures(geojson, {\n      featureProjection: 'EPSG:3857'\n    })\n  })\n\n  const layer = new VectorLayer({\n    source: source,\n    properties: { title: 'Castella (lijnen)' },\n    visible: false,\n    style: (feature, resolution) => {\n      const width = getLineWidth(resolution)\n      const cacheKey = `castella-${width}`\n\n      let style = styleCache.get(cacheKey)\n      if (!style) {\n        style = new Style({\n          stroke: new Stroke({\n            color: '#2b6cb0',\n            width: width,\n            lineDash: [8, 4]\n          })\n        })\n        styleCache.set(cacheKey, style)\n      }\n      return style\n    }\n  })\n\n  return layer\n}\n"],"names":["styleCache","getLineWidth","resolution","createCastellaLijnenLayerOL","geojson","source","VectorSource","GeoJSON","VectorLayer","feature","width","cacheKey","style","Style","Stroke"],"mappings":"uGAWA,MAAMA,MAAiB,IAEvB,SAASC,EAAaC,EAA4B,CAChD,OAAIA,EAAa,IAAY,GACzBA,EAAa,IAAY,IACzBA,EAAa,GAAW,EACxBA,EAAa,GAAW,IACxBA,EAAa,GAAW,EACxBA,EAAa,GAAW,IACrB,CACT,CAEA,eAAsBC,GAA8B,CAElD,MAAMC,EAAU,MADC,MAAM,MAAM,4CAA4C,GAC1C,KAAA,EAEzBC,EAAS,IAAIC,EAAa,CAC9B,SAAU,IAAIC,IAAU,aAAaH,EAAS,CAC5C,kBAAmB,WAAA,CACpB,CAAA,CACF,EAyBD,OAvBc,IAAII,EAAY,CAC5B,OAAAH,EACA,WAAY,CAAE,MAAO,mBAAA,EACrB,QAAS,GACT,MAAO,CAACI,EAASP,IAAe,CAC9B,MAAMQ,EAAQT,EAAaC,CAAU,EAC/BS,EAAW,YAAYD,CAAK,GAElC,IAAIE,EAAQZ,EAAW,IAAIW,CAAQ,EACnC,OAAKC,IACHA,EAAQ,IAAIC,EAAM,CAChB,OAAQ,IAAIC,EAAO,CACjB,MAAO,UACP,MAAAJ,EACA,SAAU,CAAC,EAAG,CAAC,CAAA,CAChB,CAAA,CACF,EACDV,EAAW,IAAIW,EAAUC,CAAK,GAEzBA,CACT,CAAA,CACD,CAGH"}