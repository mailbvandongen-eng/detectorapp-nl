const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/amkOL-BJP9EOWr.js","assets/layerLoaderOL-DNhKIQYG.js","assets/romeinsOL-BF4Nw0Kp.js","assets/kastelenOL-CpmedLdd.js","assets/iconStyles-P7A5wgDp.js","assets/hunebeddenOL-BUwQFO6a.js","assets/uikavArcheoPuntenOL-CAHYxhYr.js","assets/uikavVlakkenOL-Cw9Thesp.js","assets/uikavBufferlaagOL-CP3bFsIr.js","assets/uikavExpertOL-CG8sMl3C.js","assets/uikavUiterwaardenOL-CRqXL-2y.js","assets/speeltuinenOL-Cljj-Ea3.js","assets/museaOL-B2R4lvOZ.js","assets/strandjesOL-Do2MQPir.js","assets/parkenOL-BnoRnskF.js","assets/fossielenOL-TWIKueDx.js","assets/fossielUtils-7mURJrNi.js","assets/fossielenBelgieOL-CT0rjZN2.js","assets/fossielenDuitslandOL-tJZEIcq2.js","assets/fossielenFrankrijkOL-2VWzBKZB.js","assets/bunkersOL-Cw10HEON.js","assets/grafheuvelsOL-CxTxLJ4S.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function ES(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ow={exports:{}},U0={},lw={exports:{}},Lt={};var DP;function NV(){if(DP)return Lt;DP=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function g(J){return J===null||typeof J!="object"?null:(J=d&&J[d]||J["@@iterator"],typeof J=="function"?J:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,v={};function E(J,F,re){this.props=J,this.context=F,this.refs=v,this.updater=re||p}E.prototype.isReactComponent={},E.prototype.setState=function(J,F){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,F,"setState")},E.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function R(){}R.prototype=E.prototype;function S(J,F,re){this.props=J,this.context=F,this.refs=v,this.updater=re||p}var C=S.prototype=new R;C.constructor=S,x(C,E.prototype),C.isPureReactComponent=!0;var O=Array.isArray,N=Object.prototype.hasOwnProperty,z={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function P(J,F,re){var te,Y={},fe=null,se=null;if(F!=null)for(te in F.ref!==void 0&&(se=F.ref),F.key!==void 0&&(fe=""+F.key),F)N.call(F,te)&&!M.hasOwnProperty(te)&&(Y[te]=F[te]);var ne=arguments.length-2;if(ne===1)Y.children=re;else if(1<ne){for(var k=Array(ne),Te=0;Te<ne;Te++)k[Te]=arguments[Te+2];Y.children=k}if(J&&J.defaultProps)for(te in ne=J.defaultProps,ne)Y[te]===void 0&&(Y[te]=ne[te]);return{$$typeof:n,type:J,key:fe,ref:se,props:Y,_owner:z.current}}function b(J,F){return{$$typeof:n,type:J.type,key:F,ref:J.ref,props:J.props,_owner:J._owner}}function D(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function B(J){var F={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(re){return F[re]})}var U=/\/+/g;function V(J,F){return typeof J=="object"&&J!==null&&J.key!=null?B(""+J.key):F.toString(36)}function Ae(J,F,re,te,Y){var fe=typeof J;(fe==="undefined"||fe==="boolean")&&(J=null);var se=!1;if(J===null)se=!0;else switch(fe){case"string":case"number":se=!0;break;case"object":switch(J.$$typeof){case n:case e:se=!0}}if(se)return se=J,Y=Y(se),J=te===""?"."+V(se,0):te,O(Y)?(re="",J!=null&&(re=J.replace(U,"$&/")+"/"),Ae(Y,F,re,"",function(Te){return Te})):Y!=null&&(D(Y)&&(Y=b(Y,re+(!Y.key||se&&se.key===Y.key?"":(""+Y.key).replace(U,"$&/")+"/")+J)),F.push(Y)),1;if(se=0,te=te===""?".":te+":",O(J))for(var ne=0;ne<J.length;ne++){fe=J[ne];var k=te+V(fe,ne);se+=Ae(fe,F,re,k,Y)}else if(k=g(J),typeof k=="function")for(J=k.call(J),ne=0;!(fe=J.next()).done;)fe=fe.value,k=te+V(fe,ne++),se+=Ae(fe,F,re,k,Y);else if(fe==="object")throw F=String(J),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return se}function be(J,F,re){if(J==null)return J;var te=[],Y=0;return Ae(J,te,"","",function(fe){return F.call(re,fe,Y++)}),te}function Pe(J){if(J._status===-1){var F=J._result;F=F(),F.then(function(re){(J._status===0||J._status===-1)&&(J._status=1,J._result=re)},function(re){(J._status===0||J._status===-1)&&(J._status=2,J._result=re)}),J._status===-1&&(J._status=0,J._result=F)}if(J._status===1)return J._result.default;throw J._result}var Me={current:null},he={transition:null},ae={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:he,ReactCurrentOwner:z};function Ee(){throw Error("act(...) is not supported in production builds of React.")}return Lt.Children={map:be,forEach:function(J,F,re){be(J,function(){F.apply(this,arguments)},re)},count:function(J){var F=0;return be(J,function(){F++}),F},toArray:function(J){return be(J,function(F){return F})||[]},only:function(J){if(!D(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Lt.Component=E,Lt.Fragment=t,Lt.Profiler=i,Lt.PureComponent=S,Lt.StrictMode=r,Lt.Suspense=l,Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Lt.act=Ee,Lt.cloneElement=function(J,F,re){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var te=x({},J.props),Y=J.key,fe=J.ref,se=J._owner;if(F!=null){if(F.ref!==void 0&&(fe=F.ref,se=z.current),F.key!==void 0&&(Y=""+F.key),J.type&&J.type.defaultProps)var ne=J.type.defaultProps;for(k in F)N.call(F,k)&&!M.hasOwnProperty(k)&&(te[k]=F[k]===void 0&&ne!==void 0?ne[k]:F[k])}var k=arguments.length-2;if(k===1)te.children=re;else if(1<k){ne=Array(k);for(var Te=0;Te<k;Te++)ne[Te]=arguments[Te+2];te.children=ne}return{$$typeof:n,type:J.type,key:Y,ref:fe,props:te,_owner:se}},Lt.createContext=function(J){return J={$$typeof:a,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:s,_context:J},J.Consumer=J},Lt.createElement=P,Lt.createFactory=function(J){var F=P.bind(null,J);return F.type=J,F},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(J){return{$$typeof:o,render:J}},Lt.isValidElement=D,Lt.lazy=function(J){return{$$typeof:f,_payload:{_status:-1,_result:J},_init:Pe}},Lt.memo=function(J,F){return{$$typeof:u,type:J,compare:F===void 0?null:F}},Lt.startTransition=function(J){var F=he.transition;he.transition={};try{J()}finally{he.transition=F}},Lt.unstable_act=Ee,Lt.useCallback=function(J,F){return Me.current.useCallback(J,F)},Lt.useContext=function(J){return Me.current.useContext(J)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(J){return Me.current.useDeferredValue(J)},Lt.useEffect=function(J,F){return Me.current.useEffect(J,F)},Lt.useId=function(){return Me.current.useId()},Lt.useImperativeHandle=function(J,F,re){return Me.current.useImperativeHandle(J,F,re)},Lt.useInsertionEffect=function(J,F){return Me.current.useInsertionEffect(J,F)},Lt.useLayoutEffect=function(J,F){return Me.current.useLayoutEffect(J,F)},Lt.useMemo=function(J,F){return Me.current.useMemo(J,F)},Lt.useReducer=function(J,F,re){return Me.current.useReducer(J,F,re)},Lt.useRef=function(J){return Me.current.useRef(J)},Lt.useState=function(J){return Me.current.useState(J)},Lt.useSyncExternalStore=function(J,F,re){return Me.current.useSyncExternalStore(J,F,re)},Lt.useTransition=function(){return Me.current.useTransition()},Lt.version="18.3.1",Lt}var FP;function $m(){return FP||(FP=1,lw.exports=NV()),lw.exports}var VP;function DV(){if(VP)return U0;VP=1;var n=$m(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var f,d={},g=null,p=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(p=l.ref);for(f in l)r.call(l,f)&&!s.hasOwnProperty(f)&&(d[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)d[f]===void 0&&(d[f]=l[f]);return{$$typeof:e,type:o,key:g,ref:p,props:d,_owner:i.current}}return U0.Fragment=t,U0.jsx=a,U0.jsxs=a,U0}var jP;function FV(){return jP||(jP=1,ow.exports=DV()),ow.exports}var T=FV(),F_={},cw={exports:{}},Ui={},uw={exports:{}},hw={};var BP;function VV(){return BP||(BP=1,(function(n){function e(he,ae){var Ee=he.length;he.push(ae);e:for(;0<Ee;){var J=Ee-1>>>1,F=he[J];if(0<i(F,ae))he[J]=ae,he[Ee]=F,Ee=J;else break e}}function t(he){return he.length===0?null:he[0]}function r(he){if(he.length===0)return null;var ae=he[0],Ee=he.pop();if(Ee!==ae){he[0]=Ee;e:for(var J=0,F=he.length,re=F>>>1;J<re;){var te=2*(J+1)-1,Y=he[te],fe=te+1,se=he[fe];if(0>i(Y,Ee))fe<F&&0>i(se,Y)?(he[J]=se,he[fe]=Ee,J=fe):(he[J]=Y,he[te]=Ee,J=te);else if(fe<F&&0>i(se,Ee))he[J]=se,he[fe]=Ee,J=fe;else break e}}return ae}function i(he,ae){var Ee=he.sortIndex-ae.sortIndex;return Ee!==0?Ee:he.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],f=1,d=null,g=3,p=!1,x=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(he){for(var ae=t(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=he)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=t(u)}}function O(he){if(v=!1,C(he),!x)if(t(l)!==null)x=!0,Pe(N);else{var ae=t(u);ae!==null&&Me(O,ae.startTime-he)}}function N(he,ae){x=!1,v&&(v=!1,R(P),P=-1),p=!0;var Ee=g;try{for(C(ae),d=t(l);d!==null&&(!(d.expirationTime>ae)||he&&!B());){var J=d.callback;if(typeof J=="function"){d.callback=null,g=d.priorityLevel;var F=J(d.expirationTime<=ae);ae=n.unstable_now(),typeof F=="function"?d.callback=F:d===t(l)&&r(l),C(ae)}else r(l);d=t(l)}if(d!==null)var re=!0;else{var te=t(u);te!==null&&Me(O,te.startTime-ae),re=!1}return re}finally{d=null,g=Ee,p=!1}}var z=!1,M=null,P=-1,b=5,D=-1;function B(){return!(n.unstable_now()-D<b)}function U(){if(M!==null){var he=n.unstable_now();D=he;var ae=!0;try{ae=M(!0,he)}finally{ae?V():(z=!1,M=null)}}else z=!1}var V;if(typeof S=="function")V=function(){S(U)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,be=Ae.port2;Ae.port1.onmessage=U,V=function(){be.postMessage(null)}}else V=function(){E(U,0)};function Pe(he){M=he,z||(z=!0,V())}function Me(he,ae){P=E(function(){he(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(he){he.callback=null},n.unstable_continueExecution=function(){x||p||(x=!0,Pe(N))},n.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<he?Math.floor(1e3/he):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(he){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var Ee=g;g=ae;try{return he()}finally{g=Ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(he,ae){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var Ee=g;g=he;try{return ae()}finally{g=Ee}},n.unstable_scheduleCallback=function(he,ae,Ee){var J=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?J+Ee:J):Ee=J,he){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Ee+F,he={id:f++,callback:ae,priorityLevel:he,startTime:Ee,expirationTime:F,sortIndex:-1},Ee>J?(he.sortIndex=Ee,e(u,he),t(l)===null&&he===t(u)&&(v?(R(P),P=-1):v=!0,Me(O,Ee-J))):(he.sortIndex=F,e(l,he),x||p||(x=!0,Pe(N))),he},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(he){var ae=g;return function(){var Ee=g;g=ae;try{return he.apply(this,arguments)}finally{g=Ee}}}})(hw)),hw}var GP;function jV(){return GP||(GP=1,uw.exports=VV()),uw.exports}var UP;function BV(){if(UP)return Ui;UP=1;var n=$m(),e=jV();function t(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(c,h){a(c,h),a(c+"Capture",h)}function a(c,h){for(i[c]=h,c=0;c<h.length;c++)r.add(h[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function g(c){return l.call(d,c)?!0:l.call(f,c)?!1:u.test(c)?d[c]=!0:(f[c]=!0,!1)}function p(c,h,m,y){if(m!==null&&m.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return y?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function x(c,h,m,y){if(h===null||typeof h>"u"||p(c,h,m,y))return!0;if(y)return!1;if(m!==null)switch(m.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function v(c,h,m,y,w,I,j){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=y,this.attributeNamespace=w,this.mustUseProperty=m,this.propertyName=c,this.type=h,this.sanitizeURL=I,this.removeEmptyString=j}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){E[c]=new v(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];E[h]=new v(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){E[c]=new v(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){E[c]=new v(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){E[c]=new v(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){E[c]=new v(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){E[c]=new v(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){E[c]=new v(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){E[c]=new v(c,5,!1,c.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function S(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(R,S);E[h]=new v(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(R,S);E[h]=new v(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(R,S);E[h]=new v(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){E[c]=new v(c,1,!1,c.toLowerCase(),null,!1,!1)}),E.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){E[c]=new v(c,1,!1,c.toLowerCase(),null,!0,!0)});function C(c,h,m,y){var w=E.hasOwnProperty(h)?E[h]:null;(w!==null?w.type!==0:y||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(x(h,m,w,y)&&(m=null),y||w===null?g(h)&&(m===null?c.removeAttribute(h):c.setAttribute(h,""+m)):w.mustUseProperty?c[w.propertyName]=m===null?w.type===3?!1:"":m:(h=w.attributeName,y=w.attributeNamespace,m===null?c.removeAttribute(h):(w=w.type,m=w===3||w===4&&m===!0?"":""+m,y?c.setAttributeNS(y,h,m):c.setAttribute(h,m))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),z=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),he=Symbol.iterator;function ae(c){return c===null||typeof c!="object"?null:(c=he&&c[he]||c["@@iterator"],typeof c=="function"?c:null)}var Ee=Object.assign,J;function F(c){if(J===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);J=h&&h[1]||""}return`
`+J+c}var re=!1;function te(c,h){if(!c||re)return"";re=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(we){var y=we}Reflect.construct(c,[],h)}else{try{h.call()}catch(we){y=we}c.call(h.prototype)}else{try{throw Error()}catch(we){y=we}c()}}catch(we){if(we&&y&&typeof we.stack=="string"){for(var w=we.stack.split(`
`),I=y.stack.split(`
`),j=w.length-1,ee=I.length-1;1<=j&&0<=ee&&w[j]!==I[ee];)ee--;for(;1<=j&&0<=ee;j--,ee--)if(w[j]!==I[ee]){if(j!==1||ee!==1)do if(j--,ee--,0>ee||w[j]!==I[ee]){var ie=`
`+w[j].replace(" at new "," at ");return c.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",c.displayName)),ie}while(1<=j&&0<=ee);break}}}finally{re=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?F(c):""}function Y(c){switch(c.tag){case 5:return F(c.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return c=te(c.type,!1),c;case 11:return c=te(c.type.render,!1),c;case 1:return c=te(c.type,!0),c;default:return""}}function fe(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case M:return"Fragment";case z:return"Portal";case b:return"Profiler";case P:return"StrictMode";case V:return"Suspense";case Ae:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case B:return(c.displayName||"Context")+".Consumer";case D:return(c._context.displayName||"Context")+".Provider";case U:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case be:return h=c.displayName||null,h!==null?h:fe(c.type)||"Memo";case Pe:h=c._payload,c=c._init;try{return fe(c(h))}catch{}}return null}function se(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(h);case 8:return h===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function ne(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function k(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Te(c){var h=k(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),y=""+c[h];if(!c.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var w=m.get,I=m.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return w.call(this)},set:function(j){y=""+j,I.call(this,j)}}),Object.defineProperty(c,h,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(j){y=""+j},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function le(c){c._valueTracker||(c._valueTracker=Te(c))}function We(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var m=h.getValue(),y="";return c&&(y=k(c)?c.checked?"true":"false":c.value),c=y,c!==m?(h.setValue(c),!0):!1}function ce(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function W(c,h){var m=h.checked;return Ee({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function Ie(c,h){var m=h.defaultValue==null?"":h.defaultValue,y=h.checked!=null?h.checked:h.defaultChecked;m=ne(h.value!=null?h.value:m),c._wrapperState={initialChecked:y,initialValue:m,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function tt(c,h){h=h.checked,h!=null&&C(c,"checked",h,!1)}function De(c,h){tt(c,h);var m=ne(h.value),y=h.type;if(m!=null)y==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(y==="submit"||y==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?Rt(c,h.type,m):h.hasOwnProperty("defaultValue")&&Rt(c,h.type,ne(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function Mt(c,h,m){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var y=h.type;if(!(y!=="submit"&&y!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,m||h===c.value||(c.value=h),c.defaultValue=h}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function Rt(c,h,m){(h!=="number"||ce(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var Ct=Array.isArray;function wn(c,h,m,y){if(c=c.options,h){h={};for(var w=0;w<m.length;w++)h["$"+m[w]]=!0;for(m=0;m<c.length;m++)w=h.hasOwnProperty("$"+c[m].value),c[m].selected!==w&&(c[m].selected=w),w&&y&&(c[m].defaultSelected=!0)}else{for(m=""+ne(m),h=null,w=0;w<c.length;w++){if(c[w].value===m){c[w].selected=!0,y&&(c[w].defaultSelected=!0);return}h!==null||c[w].disabled||(h=c[w])}h!==null&&(h.selected=!0)}}function vi(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ee({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function pn(c,h){var m=h.value;if(m==null){if(m=h.children,h=h.defaultValue,m!=null){if(h!=null)throw Error(t(92));if(Ct(m)){if(1<m.length)throw Error(t(93));m=m[0]}h=m}h==null&&(h=""),m=h}c._wrapperState={initialValue:ne(m)}}function fr(c,h){var m=ne(h.value),y=ne(h.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),h.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),y!=null&&(c.defaultValue=""+y)}function Vr(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function Li(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xi(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?Li(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Ir,To=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,m,y,w){MSApp.execUnsafeLocalFunction(function(){return c(h,m,y,w)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Ir.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function ns(c,h){if(h){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=h;return}}c.textContent=h}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},So=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(c){So.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),Ei[h]=Ei[c]})});function rs(c,h,m){return h==null||typeof h=="boolean"||h===""?"":m||typeof h!="number"||h===0||Ei.hasOwnProperty(c)&&Ei[c]?(""+h).trim():h+"px"}function bs(c,h){c=c.style;for(var m in h)if(h.hasOwnProperty(m)){var y=m.indexOf("--")===0,w=rs(m,h[m],y);m==="float"&&(m="cssFloat"),y?c.setProperty(m,w):c[m]=w}}var na=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jr(c,h){if(h){if(na[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function ra(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var is=null;function ss(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ar=null,Br=null,Zt=null;function as(c){if(c=R0(c)){if(typeof Ar!="function")throw Error(t(280));var h=c.stateNode;h&&(h=Qp(h),Ar(c.stateNode,c.type,h))}}function os(c){Br?Zt?Zt.push(c):Zt=[c]:Br=c}function On(){if(Br){var c=Br,h=Zt;if(Zt=Br=null,as(c),h)for(c=0;c<h.length;c++)as(h[c])}}function Ni(c,h){return c(h)}function dr(){}var Ln=!1;function gr(c,h,m){if(Ln)return c(h,m);Ln=!0;try{return Ni(c,h,m)}finally{Ln=!1,(Br!==null||Zt!==null)&&(dr(),On())}}function mr(c,h){var m=c.stateNode;if(m===null)return null;var y=Qp(m);if(y===null)return null;m=y[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(c=c.type,y=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!y;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(t(231,h,typeof m));return m}var tr=!1;if(o)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){tr=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{tr=!1}function Gn(c,h,m,y,w,I,j,ee,ie){var we=Array.prototype.slice.call(arguments,3);try{h.apply(m,we)}catch(Ve){this.onError(Ve)}}var Xn=!1,Di=null,G=!1,X=null,K={onError:function(c){Xn=!0,Di=c}};function q(c,h,m,y,w,I,j,ee,ie){Xn=!1,Di=null,Gn.apply(K,arguments)}function Z(c,h,m,y,w,I,j,ee,ie){if(q.apply(this,arguments),Xn){if(Xn){var we=Di;Xn=!1,Di=null}else throw Error(t(198));G||(G=!0,X=we)}}function Q(c){var h=c,m=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(m=h.return),c=h.return;while(c)}return h.tag===3?m:null}function pe(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Ce(c){if(Q(c)!==c)throw Error(t(188))}function me(c){var h=c.alternate;if(!h){if(h=Q(c),h===null)throw Error(t(188));return h!==c?null:c}for(var m=c,y=h;;){var w=m.return;if(w===null)break;var I=w.alternate;if(I===null){if(y=w.return,y!==null){m=y;continue}break}if(w.child===I.child){for(I=w.child;I;){if(I===m)return Ce(w),c;if(I===y)return Ce(w),h;I=I.sibling}throw Error(t(188))}if(m.return!==y.return)m=w,y=I;else{for(var j=!1,ee=w.child;ee;){if(ee===m){j=!0,m=w,y=I;break}if(ee===y){j=!0,y=w,m=I;break}ee=ee.sibling}if(!j){for(ee=I.child;ee;){if(ee===m){j=!0,m=I,y=w;break}if(ee===y){j=!0,y=I,m=w;break}ee=ee.sibling}if(!j)throw Error(t(189))}}if(m.alternate!==y)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?c:h}function ye(c){return c=me(c),c!==null?xe(c):null}function xe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=xe(c);if(h!==null)return h;c=c.sibling}return null}var je=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,et=e.unstable_shouldYield,Be=e.unstable_requestPaint,Ge=e.unstable_now,vt=e.unstable_getCurrentPriorityLevel,Qt=e.unstable_ImmediatePriority,rn=e.unstable_UserBlockingPriority,Cn=e.unstable_NormalPriority,ia=e.unstable_LowPriority,ks=e.unstable_IdlePriority,ls=null,Yn=null;function pl(c){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(ls,c,void 0,(c.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:qc,ba=Math.log,Os=Math.LN2;function qc(c){return c>>>=0,c===0?32:31-(ba(c)/Os|0)|0}var ka=64,_l=4194304;function Kt(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Io(c,h){var m=c.pendingLanes;if(m===0)return 0;var y=0,w=c.suspendedLanes,I=c.pingedLanes,j=m&268435455;if(j!==0){var ee=j&~w;ee!==0?y=Kt(ee):(I&=j,I!==0&&(y=Kt(I)))}else j=m&~w,j!==0?y=Kt(j):I!==0&&(y=Kt(I));if(y===0)return 0;if(h!==0&&h!==y&&(h&w)===0&&(w=y&-y,I=h&-h,w>=I||w===16&&(I&4194240)!==0))return h;if((y&4)!==0&&(y|=m&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=y;0<h;)m=31-Nn(h),w=1<<m,y|=c[m],h&=~w;return y}function Xc(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yc(c,h){for(var m=c.suspendedLanes,y=c.pingedLanes,w=c.expirationTimes,I=c.pendingLanes;0<I;){var j=31-Nn(I),ee=1<<j,ie=w[j];ie===-1?((ee&m)===0||(ee&y)!==0)&&(w[j]=Xc(ee,h)):ie<=h&&(c.expiredLanes|=ee),I&=~ee}}function a0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function o0(){var c=ka;return ka<<=1,(ka&4194240)===0&&(ka=64),c}function l0(c){for(var h=[],m=0;31>m;m++)h.push(c);return h}function Zc(c,h,m){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Nn(h),c[h]=m}function jx(c,h){var m=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var y=c.eventTimes;for(c=c.expirationTimes;0<m;){var w=31-Nn(m),I=1<<w;h[w]=0,y[w]=-1,c[w]=-1,m&=~I}}function c0(c,h){var m=c.entangledLanes|=h;for(c=c.entanglements;m;){var y=31-Nn(m),w=1<<y;w&h|c[y]&h&&(c[y]|=h),m&=~w}}var jt=0;function Oa(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var u0,Dh,h0,f0,d0,La=!1,Fh=[],Na=null,Da=null,Gr=null,Qc=new Map,Ao=new Map,cs=[],Dp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yl(c,h){switch(c){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Qc.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(h.pointerId)}}function sa(c,h,m,y,w,I){return c===null||c.nativeEvent!==I?(c={blockedOn:h,domEventName:m,eventSystemFlags:y,nativeEvent:I,targetContainers:[w]},h!==null&&(h=R0(h),h!==null&&Dh(h)),c):(c.eventSystemFlags|=y,h=c.targetContainers,w!==null&&h.indexOf(w)===-1&&h.push(w),c)}function Fp(c,h,m,y,w){switch(h){case"focusin":return Na=sa(Na,c,h,m,y,w),!0;case"dragenter":return Da=sa(Da,c,h,m,y,w),!0;case"mouseover":return Gr=sa(Gr,c,h,m,y,w),!0;case"pointerover":var I=w.pointerId;return Qc.set(I,sa(Qc.get(I)||null,c,h,m,y,w)),!0;case"gotpointercapture":return I=w.pointerId,Ao.set(I,sa(Ao.get(I)||null,c,h,m,y,w)),!0}return!1}function Vh(c){var h=nu(c.target);if(h!==null){var m=Q(h);if(m!==null){if(h=m.tag,h===13){if(h=pe(m),h!==null){c.blockedOn=h,d0(c.priority,function(){h0(m)});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function yn(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var m=jh(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var y=new m.constructor(m.type,m);is=y,m.target.dispatchEvent(y),is=null}else return h=R0(m),h!==null&&Dh(h),c.blockedOn=m,!1;h.shift()}return!0}function Vp(c,h,m){yn(c)&&m.delete(h)}function Bx(){La=!1,Na!==null&&yn(Na)&&(Na=null),Da!==null&&yn(Da)&&(Da=null),Gr!==null&&yn(Gr)&&(Gr=null),Qc.forEach(Vp),Ao.forEach(Vp)}function vl(c,h){c.blockedOn===h&&(c.blockedOn=null,La||(La=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bx)))}function xl(c){function h(w){return vl(w,c)}if(0<Fh.length){vl(Fh[0],c);for(var m=1;m<Fh.length;m++){var y=Fh[m];y.blockedOn===c&&(y.blockedOn=null)}}for(Na!==null&&vl(Na,c),Da!==null&&vl(Da,c),Gr!==null&&vl(Gr,c),Qc.forEach(h),Ao.forEach(h),m=0;m<cs.length;m++)y=cs[m],y.blockedOn===c&&(y.blockedOn=null);for(;0<cs.length&&(m=cs[0],m.blockedOn===null);)Vh(m),m.blockedOn===null&&cs.shift()}var Ro=O.ReactCurrentBatchConfig,Co=!0;function Fa(c,h,m,y){var w=jt,I=Ro.transition;Ro.transition=null;try{jt=1,g0(c,h,m,y)}finally{jt=w,Ro.transition=I}}function jp(c,h,m,y){var w=jt,I=Ro.transition;Ro.transition=null;try{jt=4,g0(c,h,m,y)}finally{jt=w,Ro.transition=I}}function g0(c,h,m,y){if(Co){var w=jh(c,h,m,y);if(w===null)Zx(c,h,y,Va,m),yl(c,y);else if(Fp(w,c,h,m,y))y.stopPropagation();else if(yl(c,y),h&4&&-1<Dp.indexOf(c)){for(;w!==null;){var I=R0(w);if(I!==null&&u0(I),I=jh(c,h,m,y),I===null&&Zx(c,h,y,Va,m),I===w)break;w=I}w!==null&&y.stopPropagation()}else Zx(c,h,y,null,m)}}var Va=null;function jh(c,h,m,y){if(Va=null,c=ss(y),c=nu(c),c!==null)if(h=Q(c),h===null)c=null;else if(m=h.tag,m===13){if(c=pe(h),c!==null)return c;c=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return Va=c,null}function Bh(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vt()){case Qt:return 1;case rn:return 4;case Cn:case ia:return 16;case ks:return 536870912;default:return 16}default:return 16}}var us=null,Gh=null,Po=null;function Bp(){if(Po)return Po;var c,h=Gh,m=h.length,y,w="value"in us?us.value:us.textContent,I=w.length;for(c=0;c<m&&h[c]===w[c];c++);var j=m-c;for(y=1;y<=j&&h[m-y]===w[I-y];y++);return Po=w.slice(c,1<y?1-y:void 0)}function Jc(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function ja(){return!0}function m0(){return!1}function ii(c){function h(m,y,w,I,j){this._reactName=m,this._targetInst=w,this.type=y,this.nativeEvent=I,this.target=j,this.currentTarget=null;for(var ee in c)c.hasOwnProperty(ee)&&(m=c[ee],this[ee]=m?m(I):I[ee]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?ja:m0,this.isPropagationStopped=m0,this}return Ee(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),h}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eu=ii(Ba),El=Ee({},Ba,{view:0,detail:0}),Uh=ii(El),zh,$h,hs,tu=Ee({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pt,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==hs&&(hs&&c.type==="mousemove"?(zh=c.screenX-hs.screenX,$h=c.screenY-hs.screenY):$h=zh=0,hs=c),zh)},movementY:function(c){return"movementY"in c?c.movementY:$h}}),p0=ii(tu),Gp=Ee({},tu,{dataTransfer:0}),Up=ii(Gp),Wh=Ee({},El,{relatedTarget:0}),Ur=ii(Wh),zp=Ee({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),$p=ii(zp),wl=Ee({},Ba,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_=ii(wl),A=Ee({},Ba,{data:0}),L=ii(A),H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Se={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xe(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=Se[c])?!!h[c]:!1}function Pt(){return Xe}var Zn=Ee({},El,{key:function(c){if(c.key){var h=H[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Jc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ge[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pt,charCode:function(c){return c.type==="keypress"?Jc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Jc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),sn=ii(Zn),nr=Ee({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fs=ii(nr),Mo=Ee({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pt}),Ga=ii(Mo),Ua=Ee({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hh=ii(Ua),_0=Ee({},tu,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),P7=ii(_0),M7=[9,13,27,32],Gx=o&&"CompositionEvent"in window,y0=null;o&&"documentMode"in document&&(y0=document.documentMode);var b7=o&&"TextEvent"in window&&!y0,CR=o&&(!Gx||y0&&8<y0&&11>=y0),PR=" ",MR=!1;function bR(c,h){switch(c){case"keyup":return M7.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kR(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Kh=!1;function k7(c,h){switch(c){case"compositionend":return kR(h);case"keypress":return h.which!==32?null:(MR=!0,PR);case"textInput":return c=h.data,c===PR&&MR?null:c;default:return null}}function O7(c,h){if(Kh)return c==="compositionend"||!Gx&&bR(c,h)?(c=Bp(),Po=Gh=us=null,Kh=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return CR&&h.locale!=="ko"?null:h.data;default:return null}}var L7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OR(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!L7[c.type]:h==="textarea"}function LR(c,h,m,y){os(y),h=Xp(h,"onChange"),0<h.length&&(m=new eu("onChange","change",null,m,y),c.push({event:m,listeners:h}))}var v0=null,x0=null;function N7(c){QR(c,0)}function Wp(c){var h=Qh(c);if(We(h))return c}function D7(c,h){if(c==="change")return h}var NR=!1;if(o){var Ux;if(o){var zx="oninput"in document;if(!zx){var DR=document.createElement("div");DR.setAttribute("oninput","return;"),zx=typeof DR.oninput=="function"}Ux=zx}else Ux=!1;NR=Ux&&(!document.documentMode||9<document.documentMode)}function FR(){v0&&(v0.detachEvent("onpropertychange",VR),x0=v0=null)}function VR(c){if(c.propertyName==="value"&&Wp(x0)){var h=[];LR(h,x0,c,ss(c)),gr(N7,h)}}function F7(c,h,m){c==="focusin"?(FR(),v0=h,x0=m,v0.attachEvent("onpropertychange",VR)):c==="focusout"&&FR()}function V7(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Wp(x0)}function j7(c,h){if(c==="click")return Wp(h)}function B7(c,h){if(c==="input"||c==="change")return Wp(h)}function G7(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var aa=typeof Object.is=="function"?Object.is:G7;function E0(c,h){if(aa(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var m=Object.keys(c),y=Object.keys(h);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var w=m[y];if(!l.call(h,w)||!aa(c[w],h[w]))return!1}return!0}function jR(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function BR(c,h){var m=jR(c);c=0;for(var y;m;){if(m.nodeType===3){if(y=c+m.textContent.length,c<=h&&y>=h)return{node:m,offset:h-c};c=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=jR(m)}}function GR(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?GR(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function UR(){for(var c=window,h=ce();h instanceof c.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)c=h.contentWindow;else break;h=ce(c.document)}return h}function $x(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function U7(c){var h=UR(),m=c.focusedElem,y=c.selectionRange;if(h!==m&&m&&m.ownerDocument&&GR(m.ownerDocument.documentElement,m)){if(y!==null&&$x(m)){if(h=y.start,c=y.end,c===void 0&&(c=h),"selectionStart"in m)m.selectionStart=h,m.selectionEnd=Math.min(c,m.value.length);else if(c=(h=m.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var w=m.textContent.length,I=Math.min(y.start,w);y=y.end===void 0?I:Math.min(y.end,w),!c.extend&&I>y&&(w=y,y=I,I=w),w=BR(m,I);var j=BR(m,y);w&&j&&(c.rangeCount!==1||c.anchorNode!==w.node||c.anchorOffset!==w.offset||c.focusNode!==j.node||c.focusOffset!==j.offset)&&(h=h.createRange(),h.setStart(w.node,w.offset),c.removeAllRanges(),I>y?(c.addRange(h),c.extend(j.node,j.offset)):(h.setEnd(j.node,j.offset),c.addRange(h)))}}for(h=[],c=m;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<h.length;m++)c=h[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var z7=o&&"documentMode"in document&&11>=document.documentMode,qh=null,Wx=null,w0=null,Hx=!1;function zR(c,h,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Hx||qh==null||qh!==ce(y)||(y=qh,"selectionStart"in y&&$x(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),w0&&E0(w0,y)||(w0=y,y=Xp(Wx,"onSelect"),0<y.length&&(h=new eu("onSelect","select",null,h,m),c.push({event:h,listeners:y}),h.target=qh)))}function Hp(c,h){var m={};return m[c.toLowerCase()]=h.toLowerCase(),m["Webkit"+c]="webkit"+h,m["Moz"+c]="moz"+h,m}var Xh={animationend:Hp("Animation","AnimationEnd"),animationiteration:Hp("Animation","AnimationIteration"),animationstart:Hp("Animation","AnimationStart"),transitionend:Hp("Transition","TransitionEnd")},Kx={},$R={};o&&($R=document.createElement("div").style,"AnimationEvent"in window||(delete Xh.animationend.animation,delete Xh.animationiteration.animation,delete Xh.animationstart.animation),"TransitionEvent"in window||delete Xh.transitionend.transition);function Kp(c){if(Kx[c])return Kx[c];if(!Xh[c])return c;var h=Xh[c],m;for(m in h)if(h.hasOwnProperty(m)&&m in $R)return Kx[c]=h[m];return c}var WR=Kp("animationend"),HR=Kp("animationiteration"),KR=Kp("animationstart"),qR=Kp("transitionend"),XR=new Map,YR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tl(c,h){XR.set(c,h),s(h,[c])}for(var qx=0;qx<YR.length;qx++){var Xx=YR[qx],$7=Xx.toLowerCase(),W7=Xx[0].toUpperCase()+Xx.slice(1);Tl($7,"on"+W7)}Tl(WR,"onAnimationEnd"),Tl(HR,"onAnimationIteration"),Tl(KR,"onAnimationStart"),Tl("dblclick","onDoubleClick"),Tl("focusin","onFocus"),Tl("focusout","onBlur"),Tl(qR,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var T0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H7=new Set("cancel close invalid load scroll toggle".split(" ").concat(T0));function ZR(c,h,m){var y=c.type||"unknown-event";c.currentTarget=m,Z(y,h,void 0,c),c.currentTarget=null}function QR(c,h){h=(h&4)!==0;for(var m=0;m<c.length;m++){var y=c[m],w=y.event;y=y.listeners;e:{var I=void 0;if(h)for(var j=y.length-1;0<=j;j--){var ee=y[j],ie=ee.instance,we=ee.currentTarget;if(ee=ee.listener,ie!==I&&w.isPropagationStopped())break e;ZR(w,ee,we),I=ie}else for(j=0;j<y.length;j++){if(ee=y[j],ie=ee.instance,we=ee.currentTarget,ee=ee.listener,ie!==I&&w.isPropagationStopped())break e;ZR(w,ee,we),I=ie}}}if(G)throw c=X,G=!1,X=null,c}function Tn(c,h){var m=h[rE];m===void 0&&(m=h[rE]=new Set);var y=c+"__bubble";m.has(y)||(JR(h,c,2,!1),m.add(y))}function Yx(c,h,m){var y=0;h&&(y|=4),JR(m,c,y,h)}var qp="_reactListening"+Math.random().toString(36).slice(2);function S0(c){if(!c[qp]){c[qp]=!0,r.forEach(function(m){m!=="selectionchange"&&(H7.has(m)||Yx(m,!1,c),Yx(m,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[qp]||(h[qp]=!0,Yx("selectionchange",!1,h))}}function JR(c,h,m,y){switch(Bh(h)){case 1:var w=Fa;break;case 4:w=jp;break;default:w=g0}m=w.bind(null,h,m,c),w=void 0,!tr||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(w=!0),y?w!==void 0?c.addEventListener(h,m,{capture:!0,passive:w}):c.addEventListener(h,m,!0):w!==void 0?c.addEventListener(h,m,{passive:w}):c.addEventListener(h,m,!1)}function Zx(c,h,m,y,w){var I=y;if((h&1)===0&&(h&2)===0&&y!==null)e:for(;;){if(y===null)return;var j=y.tag;if(j===3||j===4){var ee=y.stateNode.containerInfo;if(ee===w||ee.nodeType===8&&ee.parentNode===w)break;if(j===4)for(j=y.return;j!==null;){var ie=j.tag;if((ie===3||ie===4)&&(ie=j.stateNode.containerInfo,ie===w||ie.nodeType===8&&ie.parentNode===w))return;j=j.return}for(;ee!==null;){if(j=nu(ee),j===null)return;if(ie=j.tag,ie===5||ie===6){y=I=j;continue e}ee=ee.parentNode}}y=y.return}gr(function(){var we=I,Ve=ss(m),Ue=[];e:{var Ne=XR.get(c);if(Ne!==void 0){var nt=eu,st=c;switch(c){case"keypress":if(Jc(m)===0)break e;case"keydown":case"keyup":nt=sn;break;case"focusin":st="focus",nt=Ur;break;case"focusout":st="blur",nt=Ur;break;case"beforeblur":case"afterblur":nt=Ur;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=p0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Ga;break;case WR:case HR:case KR:nt=$p;break;case qR:nt=Hh;break;case"scroll":nt=Uh;break;case"wheel":nt=P7;break;case"copy":case"cut":case"paste":nt=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=fs}var lt=(h&4)!==0,Qn=!lt&&c==="scroll",de=lt?Ne!==null?Ne+"Capture":null:Ne;lt=[];for(var oe=we,_e;oe!==null;){_e=oe;var $e=_e.stateNode;if(_e.tag===5&&$e!==null&&(_e=$e,de!==null&&($e=mr(oe,de),$e!=null&&lt.push(I0(oe,$e,_e)))),Qn)break;oe=oe.return}0<lt.length&&(Ne=new nt(Ne,st,null,m,Ve),Ue.push({event:Ne,listeners:lt}))}}if((h&7)===0){e:{if(Ne=c==="mouseover"||c==="pointerover",nt=c==="mouseout"||c==="pointerout",Ne&&m!==is&&(st=m.relatedTarget||m.fromElement)&&(nu(st)||st[bo]))break e;if((nt||Ne)&&(Ne=Ve.window===Ve?Ve:(Ne=Ve.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,nt?(st=m.relatedTarget||m.toElement,nt=we,st=st?nu(st):null,st!==null&&(Qn=Q(st),st!==Qn||st.tag!==5&&st.tag!==6)&&(st=null)):(nt=null,st=we),nt!==st)){if(lt=p0,$e="onMouseLeave",de="onMouseEnter",oe="mouse",(c==="pointerout"||c==="pointerover")&&(lt=fs,$e="onPointerLeave",de="onPointerEnter",oe="pointer"),Qn=nt==null?Ne:Qh(nt),_e=st==null?Ne:Qh(st),Ne=new lt($e,oe+"leave",nt,m,Ve),Ne.target=Qn,Ne.relatedTarget=_e,$e=null,nu(Ve)===we&&(lt=new lt(de,oe+"enter",st,m,Ve),lt.target=_e,lt.relatedTarget=Qn,$e=lt),Qn=$e,nt&&st)t:{for(lt=nt,de=st,oe=0,_e=lt;_e;_e=Yh(_e))oe++;for(_e=0,$e=de;$e;$e=Yh($e))_e++;for(;0<oe-_e;)lt=Yh(lt),oe--;for(;0<_e-oe;)de=Yh(de),_e--;for(;oe--;){if(lt===de||de!==null&&lt===de.alternate)break t;lt=Yh(lt),de=Yh(de)}lt=null}else lt=null;nt!==null&&eC(Ue,Ne,nt,lt,!1),st!==null&&Qn!==null&&eC(Ue,Qn,st,lt,!0)}}e:{if(Ne=we?Qh(we):window,nt=Ne.nodeName&&Ne.nodeName.toLowerCase(),nt==="select"||nt==="input"&&Ne.type==="file")var ct=D7;else if(OR(Ne))if(NR)ct=B7;else{ct=V7;var mt=F7}else(nt=Ne.nodeName)&&nt.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(ct=j7);if(ct&&(ct=ct(c,we))){LR(Ue,ct,m,Ve);break e}mt&&mt(c,Ne,we),c==="focusout"&&(mt=Ne._wrapperState)&&mt.controlled&&Ne.type==="number"&&Rt(Ne,"number",Ne.value)}switch(mt=we?Qh(we):window,c){case"focusin":(OR(mt)||mt.contentEditable==="true")&&(qh=mt,Wx=we,w0=null);break;case"focusout":w0=Wx=qh=null;break;case"mousedown":Hx=!0;break;case"contextmenu":case"mouseup":case"dragend":Hx=!1,zR(Ue,m,Ve);break;case"selectionchange":if(z7)break;case"keydown":case"keyup":zR(Ue,m,Ve)}var pt;if(Gx)e:{switch(c){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Kh?bR(c,m)&&(xt="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(xt="onCompositionStart");xt&&(CR&&m.locale!=="ko"&&(Kh||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Kh&&(pt=Bp()):(us=Ve,Gh="value"in us?us.value:us.textContent,Kh=!0)),mt=Xp(we,xt),0<mt.length&&(xt=new L(xt,c,null,m,Ve),Ue.push({event:xt,listeners:mt}),pt?xt.data=pt:(pt=kR(m),pt!==null&&(xt.data=pt)))),(pt=b7?k7(c,m):O7(c,m))&&(we=Xp(we,"onBeforeInput"),0<we.length&&(Ve=new L("onBeforeInput","beforeinput",null,m,Ve),Ue.push({event:Ve,listeners:we}),Ve.data=pt))}QR(Ue,h)})}function I0(c,h,m){return{instance:c,listener:h,currentTarget:m}}function Xp(c,h){for(var m=h+"Capture",y=[];c!==null;){var w=c,I=w.stateNode;w.tag===5&&I!==null&&(w=I,I=mr(c,m),I!=null&&y.unshift(I0(c,I,w)),I=mr(c,h),I!=null&&y.push(I0(c,I,w))),c=c.return}return y}function Yh(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function eC(c,h,m,y,w){for(var I=h._reactName,j=[];m!==null&&m!==y;){var ee=m,ie=ee.alternate,we=ee.stateNode;if(ie!==null&&ie===y)break;ee.tag===5&&we!==null&&(ee=we,w?(ie=mr(m,I),ie!=null&&j.unshift(I0(m,ie,ee))):w||(ie=mr(m,I),ie!=null&&j.push(I0(m,ie,ee)))),m=m.return}j.length!==0&&c.push({event:h,listeners:j})}var K7=/\r\n?/g,q7=/\u0000|\uFFFD/g;function tC(c){return(typeof c=="string"?c:""+c).replace(K7,`
`).replace(q7,"")}function Yp(c,h,m){if(h=tC(h),tC(c)!==h&&m)throw Error(t(425))}function Zp(){}var Qx=null,Jx=null;function eE(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var tE=typeof setTimeout=="function"?setTimeout:void 0,X7=typeof clearTimeout=="function"?clearTimeout:void 0,nC=typeof Promise=="function"?Promise:void 0,Y7=typeof queueMicrotask=="function"?queueMicrotask:typeof nC<"u"?function(c){return nC.resolve(null).then(c).catch(Z7)}:tE;function Z7(c){setTimeout(function(){throw c})}function nE(c,h){var m=h,y=0;do{var w=m.nextSibling;if(c.removeChild(m),w&&w.nodeType===8)if(m=w.data,m==="/$"){if(y===0){c.removeChild(w),xl(h);return}y--}else m!=="$"&&m!=="$?"&&m!=="$!"||y++;m=w}while(m);xl(h)}function Sl(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function rC(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return c;h--}else m==="/$"&&h++}c=c.previousSibling}return null}var Zh=Math.random().toString(36).slice(2),za="__reactFiber$"+Zh,A0="__reactProps$"+Zh,bo="__reactContainer$"+Zh,rE="__reactEvents$"+Zh,Q7="__reactListeners$"+Zh,J7="__reactHandles$"+Zh;function nu(c){var h=c[za];if(h)return h;for(var m=c.parentNode;m;){if(h=m[bo]||m[za]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(c=rC(c);c!==null;){if(m=c[za])return m;c=rC(c)}return h}c=m,m=c.parentNode}return null}function R0(c){return c=c[za]||c[bo],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Qh(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function Qp(c){return c[A0]||null}var iE=[],Jh=-1;function Il(c){return{current:c}}function Sn(c){0>Jh||(c.current=iE[Jh],iE[Jh]=null,Jh--)}function vn(c,h){Jh++,iE[Jh]=c.current,c.current=h}var Al={},si=Il(Al),Fi=Il(!1),ru=Al;function ef(c,h){var m=c.type.contextTypes;if(!m)return Al;var y=c.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===h)return y.__reactInternalMemoizedMaskedChildContext;var w={},I;for(I in m)w[I]=h[I];return y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=w),w}function Vi(c){return c=c.childContextTypes,c!=null}function Jp(){Sn(Fi),Sn(si)}function iC(c,h,m){if(si.current!==Al)throw Error(t(168));vn(si,h),vn(Fi,m)}function sC(c,h,m){var y=c.stateNode;if(h=h.childContextTypes,typeof y.getChildContext!="function")return m;y=y.getChildContext();for(var w in y)if(!(w in h))throw Error(t(108,se(c)||"Unknown",w));return Ee({},m,y)}function e_(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Al,ru=si.current,vn(si,c),vn(Fi,Fi.current),!0}function aC(c,h,m){var y=c.stateNode;if(!y)throw Error(t(169));m?(c=sC(c,h,ru),y.__reactInternalMemoizedMergedChildContext=c,Sn(Fi),Sn(si),vn(si,c)):Sn(Fi),vn(Fi,m)}var ko=null,t_=!1,sE=!1;function oC(c){ko===null?ko=[c]:ko.push(c)}function eV(c){t_=!0,oC(c)}function Rl(){if(!sE&&ko!==null){sE=!0;var c=0,h=jt;try{var m=ko;for(jt=1;c<m.length;c++){var y=m[c];do y=y(!0);while(y!==null)}ko=null,t_=!1}catch(w){throw ko!==null&&(ko=ko.slice(c+1)),je(Qt,Rl),w}finally{jt=h,sE=!1}}return null}var tf=[],nf=0,n_=null,r_=0,Ls=[],Ns=0,iu=null,Oo=1,Lo="";function su(c,h){tf[nf++]=r_,tf[nf++]=n_,n_=c,r_=h}function lC(c,h,m){Ls[Ns++]=Oo,Ls[Ns++]=Lo,Ls[Ns++]=iu,iu=c;var y=Oo;c=Lo;var w=32-Nn(y)-1;y&=~(1<<w),m+=1;var I=32-Nn(h)+w;if(30<I){var j=w-w%5;I=(y&(1<<j)-1).toString(32),y>>=j,w-=j,Oo=1<<32-Nn(h)+w|m<<w|y,Lo=I+c}else Oo=1<<I|m<<w|y,Lo=c}function aE(c){c.return!==null&&(su(c,1),lC(c,1,0))}function oE(c){for(;c===n_;)n_=tf[--nf],tf[nf]=null,r_=tf[--nf],tf[nf]=null;for(;c===iu;)iu=Ls[--Ns],Ls[Ns]=null,Lo=Ls[--Ns],Ls[Ns]=null,Oo=Ls[--Ns],Ls[Ns]=null}var ds=null,gs=null,Pn=!1,oa=null;function cC(c,h){var m=js(5,null,null,0);m.elementType="DELETED",m.stateNode=h,m.return=c,h=c.deletions,h===null?(c.deletions=[m],c.flags|=16):h.push(m)}function uC(c,h){switch(c.tag){case 5:var m=c.type;return h=h.nodeType!==1||m.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,ds=c,gs=Sl(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,ds=c,gs=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(m=iu!==null?{id:Oo,overflow:Lo}:null,c.memoizedState={dehydrated:h,treeContext:m,retryLane:1073741824},m=js(18,null,null,0),m.stateNode=h,m.return=c,c.child=m,ds=c,gs=null,!0):!1;default:return!1}}function lE(c){return(c.mode&1)!==0&&(c.flags&128)===0}function cE(c){if(Pn){var h=gs;if(h){var m=h;if(!uC(c,h)){if(lE(c))throw Error(t(418));h=Sl(m.nextSibling);var y=ds;h&&uC(c,h)?cC(y,m):(c.flags=c.flags&-4097|2,Pn=!1,ds=c)}}else{if(lE(c))throw Error(t(418));c.flags=c.flags&-4097|2,Pn=!1,ds=c}}}function hC(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ds=c}function i_(c){if(c!==ds)return!1;if(!Pn)return hC(c),Pn=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!eE(c.type,c.memoizedProps)),h&&(h=gs)){if(lE(c))throw fC(),Error(t(418));for(;h;)cC(c,h),h=Sl(h.nextSibling)}if(hC(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(h===0){gs=Sl(c.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++}c=c.nextSibling}gs=null}}else gs=ds?Sl(c.stateNode.nextSibling):null;return!0}function fC(){for(var c=gs;c;)c=Sl(c.nextSibling)}function rf(){gs=ds=null,Pn=!1}function uE(c){oa===null?oa=[c]:oa.push(c)}var tV=O.ReactCurrentBatchConfig;function C0(c,h,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var y=m.stateNode}if(!y)throw Error(t(147,c));var w=y,I=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(j){var ee=w.refs;j===null?delete ee[I]:ee[I]=j},h._stringRef=I,h)}if(typeof c!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,c))}return c}function s_(c,h){throw c=Object.prototype.toString.call(h),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function dC(c){var h=c._init;return h(c._payload)}function gC(c){function h(de,oe){if(c){var _e=de.deletions;_e===null?(de.deletions=[oe],de.flags|=16):_e.push(oe)}}function m(de,oe){if(!c)return null;for(;oe!==null;)h(de,oe),oe=oe.sibling;return null}function y(de,oe){for(de=new Map;oe!==null;)oe.key!==null?de.set(oe.key,oe):de.set(oe.index,oe),oe=oe.sibling;return de}function w(de,oe){return de=Nl(de,oe),de.index=0,de.sibling=null,de}function I(de,oe,_e){return de.index=_e,c?(_e=de.alternate,_e!==null?(_e=_e.index,_e<oe?(de.flags|=2,oe):_e):(de.flags|=2,oe)):(de.flags|=1048576,oe)}function j(de){return c&&de.alternate===null&&(de.flags|=2),de}function ee(de,oe,_e,$e){return oe===null||oe.tag!==6?(oe=tw(_e,de.mode,$e),oe.return=de,oe):(oe=w(oe,_e),oe.return=de,oe)}function ie(de,oe,_e,$e){var ct=_e.type;return ct===M?Ve(de,oe,_e.props.children,$e,_e.key):oe!==null&&(oe.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Pe&&dC(ct)===oe.type)?($e=w(oe,_e.props),$e.ref=C0(de,oe,_e),$e.return=de,$e):($e=P_(_e.type,_e.key,_e.props,null,de.mode,$e),$e.ref=C0(de,oe,_e),$e.return=de,$e)}function we(de,oe,_e,$e){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==_e.containerInfo||oe.stateNode.implementation!==_e.implementation?(oe=nw(_e,de.mode,$e),oe.return=de,oe):(oe=w(oe,_e.children||[]),oe.return=de,oe)}function Ve(de,oe,_e,$e,ct){return oe===null||oe.tag!==7?(oe=du(_e,de.mode,$e,ct),oe.return=de,oe):(oe=w(oe,_e),oe.return=de,oe)}function Ue(de,oe,_e){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=tw(""+oe,de.mode,_e),oe.return=de,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:return _e=P_(oe.type,oe.key,oe.props,null,de.mode,_e),_e.ref=C0(de,null,oe),_e.return=de,_e;case z:return oe=nw(oe,de.mode,_e),oe.return=de,oe;case Pe:var $e=oe._init;return Ue(de,$e(oe._payload),_e)}if(Ct(oe)||ae(oe))return oe=du(oe,de.mode,_e,null),oe.return=de,oe;s_(de,oe)}return null}function Ne(de,oe,_e,$e){var ct=oe!==null?oe.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return ct!==null?null:ee(de,oe,""+_e,$e);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case N:return _e.key===ct?ie(de,oe,_e,$e):null;case z:return _e.key===ct?we(de,oe,_e,$e):null;case Pe:return ct=_e._init,Ne(de,oe,ct(_e._payload),$e)}if(Ct(_e)||ae(_e))return ct!==null?null:Ve(de,oe,_e,$e,null);s_(de,_e)}return null}function nt(de,oe,_e,$e,ct){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return de=de.get(_e)||null,ee(oe,de,""+$e,ct);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case N:return de=de.get($e.key===null?_e:$e.key)||null,ie(oe,de,$e,ct);case z:return de=de.get($e.key===null?_e:$e.key)||null,we(oe,de,$e,ct);case Pe:var mt=$e._init;return nt(de,oe,_e,mt($e._payload),ct)}if(Ct($e)||ae($e))return de=de.get(_e)||null,Ve(oe,de,$e,ct,null);s_(oe,$e)}return null}function st(de,oe,_e,$e){for(var ct=null,mt=null,pt=oe,xt=oe=0,Pr=null;pt!==null&&xt<_e.length;xt++){pt.index>xt?(Pr=pt,pt=null):Pr=pt.sibling;var $t=Ne(de,pt,_e[xt],$e);if($t===null){pt===null&&(pt=Pr);break}c&&pt&&$t.alternate===null&&h(de,pt),oe=I($t,oe,xt),mt===null?ct=$t:mt.sibling=$t,mt=$t,pt=Pr}if(xt===_e.length)return m(de,pt),Pn&&su(de,xt),ct;if(pt===null){for(;xt<_e.length;xt++)pt=Ue(de,_e[xt],$e),pt!==null&&(oe=I(pt,oe,xt),mt===null?ct=pt:mt.sibling=pt,mt=pt);return Pn&&su(de,xt),ct}for(pt=y(de,pt);xt<_e.length;xt++)Pr=nt(pt,de,xt,_e[xt],$e),Pr!==null&&(c&&Pr.alternate!==null&&pt.delete(Pr.key===null?xt:Pr.key),oe=I(Pr,oe,xt),mt===null?ct=Pr:mt.sibling=Pr,mt=Pr);return c&&pt.forEach(function(Dl){return h(de,Dl)}),Pn&&su(de,xt),ct}function lt(de,oe,_e,$e){var ct=ae(_e);if(typeof ct!="function")throw Error(t(150));if(_e=ct.call(_e),_e==null)throw Error(t(151));for(var mt=ct=null,pt=oe,xt=oe=0,Pr=null,$t=_e.next();pt!==null&&!$t.done;xt++,$t=_e.next()){pt.index>xt?(Pr=pt,pt=null):Pr=pt.sibling;var Dl=Ne(de,pt,$t.value,$e);if(Dl===null){pt===null&&(pt=Pr);break}c&&pt&&Dl.alternate===null&&h(de,pt),oe=I(Dl,oe,xt),mt===null?ct=Dl:mt.sibling=Dl,mt=Dl,pt=Pr}if($t.done)return m(de,pt),Pn&&su(de,xt),ct;if(pt===null){for(;!$t.done;xt++,$t=_e.next())$t=Ue(de,$t.value,$e),$t!==null&&(oe=I($t,oe,xt),mt===null?ct=$t:mt.sibling=$t,mt=$t);return Pn&&su(de,xt),ct}for(pt=y(de,pt);!$t.done;xt++,$t=_e.next())$t=nt(pt,de,xt,$t.value,$e),$t!==null&&(c&&$t.alternate!==null&&pt.delete($t.key===null?xt:$t.key),oe=I($t,oe,xt),mt===null?ct=$t:mt.sibling=$t,mt=$t);return c&&pt.forEach(function(LV){return h(de,LV)}),Pn&&su(de,xt),ct}function Qn(de,oe,_e,$e){if(typeof _e=="object"&&_e!==null&&_e.type===M&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case N:e:{for(var ct=_e.key,mt=oe;mt!==null;){if(mt.key===ct){if(ct=_e.type,ct===M){if(mt.tag===7){m(de,mt.sibling),oe=w(mt,_e.props.children),oe.return=de,de=oe;break e}}else if(mt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Pe&&dC(ct)===mt.type){m(de,mt.sibling),oe=w(mt,_e.props),oe.ref=C0(de,mt,_e),oe.return=de,de=oe;break e}m(de,mt);break}else h(de,mt);mt=mt.sibling}_e.type===M?(oe=du(_e.props.children,de.mode,$e,_e.key),oe.return=de,de=oe):($e=P_(_e.type,_e.key,_e.props,null,de.mode,$e),$e.ref=C0(de,oe,_e),$e.return=de,de=$e)}return j(de);case z:e:{for(mt=_e.key;oe!==null;){if(oe.key===mt)if(oe.tag===4&&oe.stateNode.containerInfo===_e.containerInfo&&oe.stateNode.implementation===_e.implementation){m(de,oe.sibling),oe=w(oe,_e.children||[]),oe.return=de,de=oe;break e}else{m(de,oe);break}else h(de,oe);oe=oe.sibling}oe=nw(_e,de.mode,$e),oe.return=de,de=oe}return j(de);case Pe:return mt=_e._init,Qn(de,oe,mt(_e._payload),$e)}if(Ct(_e))return st(de,oe,_e,$e);if(ae(_e))return lt(de,oe,_e,$e);s_(de,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?(_e=""+_e,oe!==null&&oe.tag===6?(m(de,oe.sibling),oe=w(oe,_e),oe.return=de,de=oe):(m(de,oe),oe=tw(_e,de.mode,$e),oe.return=de,de=oe),j(de)):m(de,oe)}return Qn}var sf=gC(!0),mC=gC(!1),a_=Il(null),o_=null,af=null,hE=null;function fE(){hE=af=o_=null}function dE(c){var h=a_.current;Sn(a_),c._currentValue=h}function gE(c,h,m){for(;c!==null;){var y=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,y!==null&&(y.childLanes|=h)):y!==null&&(y.childLanes&h)!==h&&(y.childLanes|=h),c===m)break;c=c.return}}function of(c,h){o_=c,hE=af=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(ji=!0),c.firstContext=null)}function Ds(c){var h=c._currentValue;if(hE!==c)if(c={context:c,memoizedValue:h,next:null},af===null){if(o_===null)throw Error(t(308));af=c,o_.dependencies={lanes:0,firstContext:c}}else af=af.next=c;return h}var au=null;function mE(c){au===null?au=[c]:au.push(c)}function pC(c,h,m,y){var w=h.interleaved;return w===null?(m.next=m,mE(h)):(m.next=w.next,w.next=m),h.interleaved=m,No(c,y)}function No(c,h){c.lanes|=h;var m=c.alternate;for(m!==null&&(m.lanes|=h),m=c,c=c.return;c!==null;)c.childLanes|=h,m=c.alternate,m!==null&&(m.childLanes|=h),m=c,c=c.return;return m.tag===3?m.stateNode:null}var Cl=!1;function pE(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _C(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Do(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Pl(c,h,m){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,(zt&2)!==0){var w=y.pending;return w===null?h.next=h:(h.next=w.next,w.next=h),y.pending=h,No(c,m)}return w=y.interleaved,w===null?(h.next=h,mE(y)):(h.next=w.next,w.next=h),y.interleaved=h,No(c,m)}function l_(c,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194240)!==0)){var y=h.lanes;y&=c.pendingLanes,m|=y,h.lanes=m,c0(c,m)}}function yC(c,h){var m=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var w=null,I=null;if(m=m.firstBaseUpdate,m!==null){do{var j={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};I===null?w=I=j:I=I.next=j,m=m.next}while(m!==null);I===null?w=I=h:I=I.next=h}else w=I=h;m={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:I,shared:y.shared,effects:y.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=h}function c_(c,h,m,y){var w=c.updateQueue;Cl=!1;var I=w.firstBaseUpdate,j=w.lastBaseUpdate,ee=w.shared.pending;if(ee!==null){w.shared.pending=null;var ie=ee,we=ie.next;ie.next=null,j===null?I=we:j.next=we,j=ie;var Ve=c.alternate;Ve!==null&&(Ve=Ve.updateQueue,ee=Ve.lastBaseUpdate,ee!==j&&(ee===null?Ve.firstBaseUpdate=we:ee.next=we,Ve.lastBaseUpdate=ie))}if(I!==null){var Ue=w.baseState;j=0,Ve=we=ie=null,ee=I;do{var Ne=ee.lane,nt=ee.eventTime;if((y&Ne)===Ne){Ve!==null&&(Ve=Ve.next={eventTime:nt,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var st=c,lt=ee;switch(Ne=h,nt=m,lt.tag){case 1:if(st=lt.payload,typeof st=="function"){Ue=st.call(nt,Ue,Ne);break e}Ue=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=lt.payload,Ne=typeof st=="function"?st.call(nt,Ue,Ne):st,Ne==null)break e;Ue=Ee({},Ue,Ne);break e;case 2:Cl=!0}}ee.callback!==null&&ee.lane!==0&&(c.flags|=64,Ne=w.effects,Ne===null?w.effects=[ee]:Ne.push(ee))}else nt={eventTime:nt,lane:Ne,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Ve===null?(we=Ve=nt,ie=Ue):Ve=Ve.next=nt,j|=Ne;if(ee=ee.next,ee===null){if(ee=w.shared.pending,ee===null)break;Ne=ee,ee=Ne.next,Ne.next=null,w.lastBaseUpdate=Ne,w.shared.pending=null}}while(!0);if(Ve===null&&(ie=Ue),w.baseState=ie,w.firstBaseUpdate=we,w.lastBaseUpdate=Ve,h=w.shared.interleaved,h!==null){w=h;do j|=w.lane,w=w.next;while(w!==h)}else I===null&&(w.shared.lanes=0);cu|=j,c.lanes=j,c.memoizedState=Ue}}function vC(c,h,m){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var y=c[h],w=y.callback;if(w!==null){if(y.callback=null,y=m,typeof w!="function")throw Error(t(191,w));w.call(y)}}}var P0={},$a=Il(P0),M0=Il(P0),b0=Il(P0);function ou(c){if(c===P0)throw Error(t(174));return c}function _E(c,h){switch(vn(b0,h),vn(M0,c),vn($a,P0),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:xi(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=xi(h,c)}Sn($a),vn($a,h)}function lf(){Sn($a),Sn(M0),Sn(b0)}function xC(c){ou(b0.current);var h=ou($a.current),m=xi(h,c.type);h!==m&&(vn(M0,c),vn($a,m))}function yE(c){M0.current===c&&(Sn($a),Sn(M0))}var Dn=Il(0);function u_(c){for(var h=c;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var vE=[];function xE(){for(var c=0;c<vE.length;c++)vE[c]._workInProgressVersionPrimary=null;vE.length=0}var h_=O.ReactCurrentDispatcher,EE=O.ReactCurrentBatchConfig,lu=0,Fn=null,pr=null,Rr=null,f_=!1,k0=!1,O0=0,nV=0;function ai(){throw Error(t(321))}function wE(c,h){if(h===null)return!1;for(var m=0;m<h.length&&m<c.length;m++)if(!aa(c[m],h[m]))return!1;return!0}function TE(c,h,m,y,w,I){if(lu=I,Fn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,h_.current=c===null||c.memoizedState===null?aV:oV,c=m(y,w),k0){I=0;do{if(k0=!1,O0=0,25<=I)throw Error(t(301));I+=1,Rr=pr=null,h.updateQueue=null,h_.current=lV,c=m(y,w)}while(k0)}if(h_.current=m_,h=pr!==null&&pr.next!==null,lu=0,Rr=pr=Fn=null,f_=!1,h)throw Error(t(300));return c}function SE(){var c=O0!==0;return O0=0,c}function Wa(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?Fn.memoizedState=Rr=c:Rr=Rr.next=c,Rr}function Fs(){if(pr===null){var c=Fn.alternate;c=c!==null?c.memoizedState:null}else c=pr.next;var h=Rr===null?Fn.memoizedState:Rr.next;if(h!==null)Rr=h,pr=c;else{if(c===null)throw Error(t(310));pr=c,c={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Rr===null?Fn.memoizedState=Rr=c:Rr=Rr.next=c}return Rr}function L0(c,h){return typeof h=="function"?h(c):h}function IE(c){var h=Fs(),m=h.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var y=pr,w=y.baseQueue,I=m.pending;if(I!==null){if(w!==null){var j=w.next;w.next=I.next,I.next=j}y.baseQueue=w=I,m.pending=null}if(w!==null){I=w.next,y=y.baseState;var ee=j=null,ie=null,we=I;do{var Ve=we.lane;if((lu&Ve)===Ve)ie!==null&&(ie=ie.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),y=we.hasEagerState?we.eagerState:c(y,we.action);else{var Ue={lane:Ve,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};ie===null?(ee=ie=Ue,j=y):ie=ie.next=Ue,Fn.lanes|=Ve,cu|=Ve}we=we.next}while(we!==null&&we!==I);ie===null?j=y:ie.next=ee,aa(y,h.memoizedState)||(ji=!0),h.memoizedState=y,h.baseState=j,h.baseQueue=ie,m.lastRenderedState=y}if(c=m.interleaved,c!==null){w=c;do I=w.lane,Fn.lanes|=I,cu|=I,w=w.next;while(w!==c)}else w===null&&(m.lanes=0);return[h.memoizedState,m.dispatch]}function AE(c){var h=Fs(),m=h.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var y=m.dispatch,w=m.pending,I=h.memoizedState;if(w!==null){m.pending=null;var j=w=w.next;do I=c(I,j.action),j=j.next;while(j!==w);aa(I,h.memoizedState)||(ji=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),m.lastRenderedState=I}return[I,y]}function EC(){}function wC(c,h){var m=Fn,y=Fs(),w=h(),I=!aa(y.memoizedState,w);if(I&&(y.memoizedState=w,ji=!0),y=y.queue,RE(IC.bind(null,m,y,c),[c]),y.getSnapshot!==h||I||Rr!==null&&Rr.memoizedState.tag&1){if(m.flags|=2048,N0(9,SC.bind(null,m,y,w,h),void 0,null),Cr===null)throw Error(t(349));(lu&30)!==0||TC(m,h,w)}return w}function TC(c,h,m){c.flags|=16384,c={getSnapshot:h,value:m},h=Fn.updateQueue,h===null?(h={lastEffect:null,stores:null},Fn.updateQueue=h,h.stores=[c]):(m=h.stores,m===null?h.stores=[c]:m.push(c))}function SC(c,h,m,y){h.value=m,h.getSnapshot=y,AC(h)&&RC(c)}function IC(c,h,m){return m(function(){AC(h)&&RC(c)})}function AC(c){var h=c.getSnapshot;c=c.value;try{var m=h();return!aa(c,m)}catch{return!0}}function RC(c){var h=No(c,1);h!==null&&ha(h,c,1,-1)}function CC(c){var h=Wa();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:L0,lastRenderedState:c},h.queue=c,c=c.dispatch=sV.bind(null,Fn,c),[h.memoizedState,c]}function N0(c,h,m,y){return c={tag:c,create:h,destroy:m,deps:y,next:null},h=Fn.updateQueue,h===null?(h={lastEffect:null,stores:null},Fn.updateQueue=h,h.lastEffect=c.next=c):(m=h.lastEffect,m===null?h.lastEffect=c.next=c:(y=m.next,m.next=c,c.next=y,h.lastEffect=c)),c}function PC(){return Fs().memoizedState}function d_(c,h,m,y){var w=Wa();Fn.flags|=c,w.memoizedState=N0(1|h,m,void 0,y===void 0?null:y)}function g_(c,h,m,y){var w=Fs();y=y===void 0?null:y;var I=void 0;if(pr!==null){var j=pr.memoizedState;if(I=j.destroy,y!==null&&wE(y,j.deps)){w.memoizedState=N0(h,m,I,y);return}}Fn.flags|=c,w.memoizedState=N0(1|h,m,I,y)}function MC(c,h){return d_(8390656,8,c,h)}function RE(c,h){return g_(2048,8,c,h)}function bC(c,h){return g_(4,2,c,h)}function kC(c,h){return g_(4,4,c,h)}function OC(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function LC(c,h,m){return m=m!=null?m.concat([c]):null,g_(4,4,OC.bind(null,h,c),m)}function CE(){}function NC(c,h){var m=Fs();h=h===void 0?null:h;var y=m.memoizedState;return y!==null&&h!==null&&wE(h,y[1])?y[0]:(m.memoizedState=[c,h],c)}function DC(c,h){var m=Fs();h=h===void 0?null:h;var y=m.memoizedState;return y!==null&&h!==null&&wE(h,y[1])?y[0]:(c=c(),m.memoizedState=[c,h],c)}function FC(c,h,m){return(lu&21)===0?(c.baseState&&(c.baseState=!1,ji=!0),c.memoizedState=m):(aa(m,h)||(m=o0(),Fn.lanes|=m,cu|=m,c.baseState=!0),h)}function rV(c,h){var m=jt;jt=m!==0&&4>m?m:4,c(!0);var y=EE.transition;EE.transition={};try{c(!1),h()}finally{jt=m,EE.transition=y}}function VC(){return Fs().memoizedState}function iV(c,h,m){var y=Ol(c);if(m={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null},jC(c))BC(h,m);else if(m=pC(c,h,m,y),m!==null){var w=Ti();ha(m,c,y,w),GC(m,h,y)}}function sV(c,h,m){var y=Ol(c),w={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null};if(jC(c))BC(h,w);else{var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var j=h.lastRenderedState,ee=I(j,m);if(w.hasEagerState=!0,w.eagerState=ee,aa(ee,j)){var ie=h.interleaved;ie===null?(w.next=w,mE(h)):(w.next=ie.next,ie.next=w),h.interleaved=w;return}}catch{}m=pC(c,h,w,y),m!==null&&(w=Ti(),ha(m,c,y,w),GC(m,h,y))}}function jC(c){var h=c.alternate;return c===Fn||h!==null&&h===Fn}function BC(c,h){k0=f_=!0;var m=c.pending;m===null?h.next=h:(h.next=m.next,m.next=h),c.pending=h}function GC(c,h,m){if((m&4194240)!==0){var y=h.lanes;y&=c.pendingLanes,m|=y,h.lanes=m,c0(c,m)}}var m_={readContext:Ds,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},aV={readContext:Ds,useCallback:function(c,h){return Wa().memoizedState=[c,h===void 0?null:h],c},useContext:Ds,useEffect:MC,useImperativeHandle:function(c,h,m){return m=m!=null?m.concat([c]):null,d_(4194308,4,OC.bind(null,h,c),m)},useLayoutEffect:function(c,h){return d_(4194308,4,c,h)},useInsertionEffect:function(c,h){return d_(4,2,c,h)},useMemo:function(c,h){var m=Wa();return h=h===void 0?null:h,c=c(),m.memoizedState=[c,h],c},useReducer:function(c,h,m){var y=Wa();return h=m!==void 0?m(h):h,y.memoizedState=y.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},y.queue=c,c=c.dispatch=iV.bind(null,Fn,c),[y.memoizedState,c]},useRef:function(c){var h=Wa();return c={current:c},h.memoizedState=c},useState:CC,useDebugValue:CE,useDeferredValue:function(c){return Wa().memoizedState=c},useTransition:function(){var c=CC(!1),h=c[0];return c=rV.bind(null,c[1]),Wa().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,m){var y=Fn,w=Wa();if(Pn){if(m===void 0)throw Error(t(407));m=m()}else{if(m=h(),Cr===null)throw Error(t(349));(lu&30)!==0||TC(y,h,m)}w.memoizedState=m;var I={value:m,getSnapshot:h};return w.queue=I,MC(IC.bind(null,y,I,c),[c]),y.flags|=2048,N0(9,SC.bind(null,y,I,m,h),void 0,null),m},useId:function(){var c=Wa(),h=Cr.identifierPrefix;if(Pn){var m=Lo,y=Oo;m=(y&~(1<<32-Nn(y)-1)).toString(32)+m,h=":"+h+"R"+m,m=O0++,0<m&&(h+="H"+m.toString(32)),h+=":"}else m=nV++,h=":"+h+"r"+m.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},oV={readContext:Ds,useCallback:NC,useContext:Ds,useEffect:RE,useImperativeHandle:LC,useInsertionEffect:bC,useLayoutEffect:kC,useMemo:DC,useReducer:IE,useRef:PC,useState:function(){return IE(L0)},useDebugValue:CE,useDeferredValue:function(c){var h=Fs();return FC(h,pr.memoizedState,c)},useTransition:function(){var c=IE(L0)[0],h=Fs().memoizedState;return[c,h]},useMutableSource:EC,useSyncExternalStore:wC,useId:VC,unstable_isNewReconciler:!1},lV={readContext:Ds,useCallback:NC,useContext:Ds,useEffect:RE,useImperativeHandle:LC,useInsertionEffect:bC,useLayoutEffect:kC,useMemo:DC,useReducer:AE,useRef:PC,useState:function(){return AE(L0)},useDebugValue:CE,useDeferredValue:function(c){var h=Fs();return pr===null?h.memoizedState=c:FC(h,pr.memoizedState,c)},useTransition:function(){var c=AE(L0)[0],h=Fs().memoizedState;return[c,h]},useMutableSource:EC,useSyncExternalStore:wC,useId:VC,unstable_isNewReconciler:!1};function la(c,h){if(c&&c.defaultProps){h=Ee({},h),c=c.defaultProps;for(var m in c)h[m]===void 0&&(h[m]=c[m]);return h}return h}function PE(c,h,m,y){h=c.memoizedState,m=m(y,h),m=m==null?h:Ee({},h,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var p_={isMounted:function(c){return(c=c._reactInternals)?Q(c)===c:!1},enqueueSetState:function(c,h,m){c=c._reactInternals;var y=Ti(),w=Ol(c),I=Do(y,w);I.payload=h,m!=null&&(I.callback=m),h=Pl(c,I,w),h!==null&&(ha(h,c,w,y),l_(h,c,w))},enqueueReplaceState:function(c,h,m){c=c._reactInternals;var y=Ti(),w=Ol(c),I=Do(y,w);I.tag=1,I.payload=h,m!=null&&(I.callback=m),h=Pl(c,I,w),h!==null&&(ha(h,c,w,y),l_(h,c,w))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var m=Ti(),y=Ol(c),w=Do(m,y);w.tag=2,h!=null&&(w.callback=h),h=Pl(c,w,y),h!==null&&(ha(h,c,y,m),l_(h,c,y))}};function UC(c,h,m,y,w,I,j){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,I,j):h.prototype&&h.prototype.isPureReactComponent?!E0(m,y)||!E0(w,I):!0}function zC(c,h,m){var y=!1,w=Al,I=h.contextType;return typeof I=="object"&&I!==null?I=Ds(I):(w=Vi(h)?ru:si.current,y=h.contextTypes,I=(y=y!=null)?ef(c,w):Al),h=new h(m,I),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=p_,c.stateNode=h,h._reactInternals=c,y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=w,c.__reactInternalMemoizedMaskedChildContext=I),h}function $C(c,h,m,y){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,y),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,y),h.state!==c&&p_.enqueueReplaceState(h,h.state,null)}function ME(c,h,m,y){var w=c.stateNode;w.props=m,w.state=c.memoizedState,w.refs={},pE(c);var I=h.contextType;typeof I=="object"&&I!==null?w.context=Ds(I):(I=Vi(h)?ru:si.current,w.context=ef(c,I)),w.state=c.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(PE(c,h,I,m),w.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(h=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),h!==w.state&&p_.enqueueReplaceState(w,w.state,null),c_(c,m,w,y),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308)}function cf(c,h){try{var m="",y=h;do m+=Y(y),y=y.return;while(y);var w=m}catch(I){w=`
Error generating stack: `+I.message+`
`+I.stack}return{value:c,source:h,stack:w,digest:null}}function bE(c,h,m){return{value:c,source:null,stack:m??null,digest:h??null}}function kE(c,h){try{console.error(h.value)}catch(m){setTimeout(function(){throw m})}}var cV=typeof WeakMap=="function"?WeakMap:Map;function WC(c,h,m){m=Do(-1,m),m.tag=3,m.payload={element:null};var y=h.value;return m.callback=function(){T_||(T_=!0,KE=y),kE(c,h)},m}function HC(c,h,m){m=Do(-1,m),m.tag=3;var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var w=h.value;m.payload=function(){return y(w)},m.callback=function(){kE(c,h)}}var I=c.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(m.callback=function(){kE(c,h),typeof y!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var j=h.stack;this.componentDidCatch(h.value,{componentStack:j!==null?j:""})}),m}function KC(c,h,m){var y=c.pingCache;if(y===null){y=c.pingCache=new cV;var w=new Set;y.set(h,w)}else w=y.get(h),w===void 0&&(w=new Set,y.set(h,w));w.has(m)||(w.add(m),c=TV.bind(null,c,h,m),h.then(c,c))}function qC(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function XC(c,h,m,y,w){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(h=Do(-1,1),h.tag=2,Pl(m,h,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=w,c)}var uV=O.ReactCurrentOwner,ji=!1;function wi(c,h,m,y){h.child=c===null?mC(h,null,m,y):sf(h,c.child,m,y)}function YC(c,h,m,y,w){m=m.render;var I=h.ref;return of(h,w),y=TE(c,h,m,y,I,w),m=SE(),c!==null&&!ji?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~w,Fo(c,h,w)):(Pn&&m&&aE(h),h.flags|=1,wi(c,h,y,w),h.child)}function ZC(c,h,m,y,w){if(c===null){var I=m.type;return typeof I=="function"&&!ew(I)&&I.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(h.tag=15,h.type=I,QC(c,h,I,y,w)):(c=P_(m.type,null,y,h,h.mode,w),c.ref=h.ref,c.return=h,h.child=c)}if(I=c.child,(c.lanes&w)===0){var j=I.memoizedProps;if(m=m.compare,m=m!==null?m:E0,m(j,y)&&c.ref===h.ref)return Fo(c,h,w)}return h.flags|=1,c=Nl(I,y),c.ref=h.ref,c.return=h,h.child=c}function QC(c,h,m,y,w){if(c!==null){var I=c.memoizedProps;if(E0(I,y)&&c.ref===h.ref)if(ji=!1,h.pendingProps=y=I,(c.lanes&w)!==0)(c.flags&131072)!==0&&(ji=!0);else return h.lanes=c.lanes,Fo(c,h,w)}return OE(c,h,m,y,w)}function JC(c,h,m){var y=h.pendingProps,w=y.children,I=c!==null?c.memoizedState:null;if(y.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(hf,ms),ms|=m;else{if((m&1073741824)===0)return c=I!==null?I.baseLanes|m:m,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,vn(hf,ms),ms|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=I!==null?I.baseLanes:m,vn(hf,ms),ms|=y}else I!==null?(y=I.baseLanes|m,h.memoizedState=null):y=m,vn(hf,ms),ms|=y;return wi(c,h,w,m),h.child}function eP(c,h){var m=h.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(h.flags|=512,h.flags|=2097152)}function OE(c,h,m,y,w){var I=Vi(m)?ru:si.current;return I=ef(h,I),of(h,w),m=TE(c,h,m,y,I,w),y=SE(),c!==null&&!ji?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~w,Fo(c,h,w)):(Pn&&y&&aE(h),h.flags|=1,wi(c,h,m,w),h.child)}function tP(c,h,m,y,w){if(Vi(m)){var I=!0;e_(h)}else I=!1;if(of(h,w),h.stateNode===null)y_(c,h),zC(h,m,y),ME(h,m,y,w),y=!0;else if(c===null){var j=h.stateNode,ee=h.memoizedProps;j.props=ee;var ie=j.context,we=m.contextType;typeof we=="object"&&we!==null?we=Ds(we):(we=Vi(m)?ru:si.current,we=ef(h,we));var Ve=m.getDerivedStateFromProps,Ue=typeof Ve=="function"||typeof j.getSnapshotBeforeUpdate=="function";Ue||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ee!==y||ie!==we)&&$C(h,j,y,we),Cl=!1;var Ne=h.memoizedState;j.state=Ne,c_(h,y,j,w),ie=h.memoizedState,ee!==y||Ne!==ie||Fi.current||Cl?(typeof Ve=="function"&&(PE(h,m,Ve,y),ie=h.memoizedState),(ee=Cl||UC(h,m,ee,y,Ne,ie,we))?(Ue||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=y,h.memoizedState=ie),j.props=y,j.state=ie,j.context=we,y=ee):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),y=!1)}else{j=h.stateNode,_C(c,h),ee=h.memoizedProps,we=h.type===h.elementType?ee:la(h.type,ee),j.props=we,Ue=h.pendingProps,Ne=j.context,ie=m.contextType,typeof ie=="object"&&ie!==null?ie=Ds(ie):(ie=Vi(m)?ru:si.current,ie=ef(h,ie));var nt=m.getDerivedStateFromProps;(Ve=typeof nt=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ee!==Ue||Ne!==ie)&&$C(h,j,y,ie),Cl=!1,Ne=h.memoizedState,j.state=Ne,c_(h,y,j,w);var st=h.memoizedState;ee!==Ue||Ne!==st||Fi.current||Cl?(typeof nt=="function"&&(PE(h,m,nt,y),st=h.memoizedState),(we=Cl||UC(h,m,we,y,Ne,st,ie)||!1)?(Ve||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(y,st,ie),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(y,st,ie)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||ee===c.memoizedProps&&Ne===c.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ee===c.memoizedProps&&Ne===c.memoizedState||(h.flags|=1024),h.memoizedProps=y,h.memoizedState=st),j.props=y,j.state=st,j.context=ie,y=we):(typeof j.componentDidUpdate!="function"||ee===c.memoizedProps&&Ne===c.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ee===c.memoizedProps&&Ne===c.memoizedState||(h.flags|=1024),y=!1)}return LE(c,h,m,y,I,w)}function LE(c,h,m,y,w,I){eP(c,h);var j=(h.flags&128)!==0;if(!y&&!j)return w&&aC(h,m,!1),Fo(c,h,I);y=h.stateNode,uV.current=h;var ee=j&&typeof m.getDerivedStateFromError!="function"?null:y.render();return h.flags|=1,c!==null&&j?(h.child=sf(h,c.child,null,I),h.child=sf(h,null,ee,I)):wi(c,h,ee,I),h.memoizedState=y.state,w&&aC(h,m,!0),h.child}function nP(c){var h=c.stateNode;h.pendingContext?iC(c,h.pendingContext,h.pendingContext!==h.context):h.context&&iC(c,h.context,!1),_E(c,h.containerInfo)}function rP(c,h,m,y,w){return rf(),uE(w),h.flags|=256,wi(c,h,m,y),h.child}var NE={dehydrated:null,treeContext:null,retryLane:0};function DE(c){return{baseLanes:c,cachePool:null,transitions:null}}function iP(c,h,m){var y=h.pendingProps,w=Dn.current,I=!1,j=(h.flags&128)!==0,ee;if((ee=j)||(ee=c!==null&&c.memoizedState===null?!1:(w&2)!==0),ee?(I=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(w|=1),vn(Dn,w&1),c===null)return cE(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(j=y.children,c=y.fallback,I?(y=h.mode,I=h.child,j={mode:"hidden",children:j},(y&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=j):I=M_(j,y,0,null),c=du(c,y,m,null),I.return=h,c.return=h,I.sibling=c,h.child=I,h.child.memoizedState=DE(m),h.memoizedState=NE,c):FE(h,j));if(w=c.memoizedState,w!==null&&(ee=w.dehydrated,ee!==null))return hV(c,h,j,y,ee,w,m);if(I){I=y.fallback,j=h.mode,w=c.child,ee=w.sibling;var ie={mode:"hidden",children:y.children};return(j&1)===0&&h.child!==w?(y=h.child,y.childLanes=0,y.pendingProps=ie,h.deletions=null):(y=Nl(w,ie),y.subtreeFlags=w.subtreeFlags&14680064),ee!==null?I=Nl(ee,I):(I=du(I,j,m,null),I.flags|=2),I.return=h,y.return=h,y.sibling=I,h.child=y,y=I,I=h.child,j=c.child.memoizedState,j=j===null?DE(m):{baseLanes:j.baseLanes|m,cachePool:null,transitions:j.transitions},I.memoizedState=j,I.childLanes=c.childLanes&~m,h.memoizedState=NE,y}return I=c.child,c=I.sibling,y=Nl(I,{mode:"visible",children:y.children}),(h.mode&1)===0&&(y.lanes=m),y.return=h,y.sibling=null,c!==null&&(m=h.deletions,m===null?(h.deletions=[c],h.flags|=16):m.push(c)),h.child=y,h.memoizedState=null,y}function FE(c,h){return h=M_({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function __(c,h,m,y){return y!==null&&uE(y),sf(h,c.child,null,m),c=FE(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function hV(c,h,m,y,w,I,j){if(m)return h.flags&256?(h.flags&=-257,y=bE(Error(t(422))),__(c,h,j,y)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(I=y.fallback,w=h.mode,y=M_({mode:"visible",children:y.children},w,0,null),I=du(I,w,j,null),I.flags|=2,y.return=h,I.return=h,y.sibling=I,h.child=y,(h.mode&1)!==0&&sf(h,c.child,null,j),h.child.memoizedState=DE(j),h.memoizedState=NE,I);if((h.mode&1)===0)return __(c,h,j,null);if(w.data==="$!"){if(y=w.nextSibling&&w.nextSibling.dataset,y)var ee=y.dgst;return y=ee,I=Error(t(419)),y=bE(I,y,void 0),__(c,h,j,y)}if(ee=(j&c.childLanes)!==0,ji||ee){if(y=Cr,y!==null){switch(j&-j){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(y.suspendedLanes|j))!==0?0:w,w!==0&&w!==I.retryLane&&(I.retryLane=w,No(c,w),ha(y,c,w,-1))}return JE(),y=bE(Error(t(421))),__(c,h,j,y)}return w.data==="$?"?(h.flags|=128,h.child=c.child,h=SV.bind(null,c),w._reactRetry=h,null):(c=I.treeContext,gs=Sl(w.nextSibling),ds=h,Pn=!0,oa=null,c!==null&&(Ls[Ns++]=Oo,Ls[Ns++]=Lo,Ls[Ns++]=iu,Oo=c.id,Lo=c.overflow,iu=h),h=FE(h,y.children),h.flags|=4096,h)}function sP(c,h,m){c.lanes|=h;var y=c.alternate;y!==null&&(y.lanes|=h),gE(c.return,h,m)}function VE(c,h,m,y,w){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:w}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=y,I.tail=m,I.tailMode=w)}function aP(c,h,m){var y=h.pendingProps,w=y.revealOrder,I=y.tail;if(wi(c,h,y.children,m),y=Dn.current,(y&2)!==0)y=y&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&sP(c,m,h);else if(c.tag===19)sP(c,m,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}if(vn(Dn,y),(h.mode&1)===0)h.memoizedState=null;else switch(w){case"forwards":for(m=h.child,w=null;m!==null;)c=m.alternate,c!==null&&u_(c)===null&&(w=m),m=m.sibling;m=w,m===null?(w=h.child,h.child=null):(w=m.sibling,m.sibling=null),VE(h,!1,w,m,I);break;case"backwards":for(m=null,w=h.child,h.child=null;w!==null;){if(c=w.alternate,c!==null&&u_(c)===null){h.child=w;break}c=w.sibling,w.sibling=m,m=w,w=c}VE(h,!0,m,null,I);break;case"together":VE(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function y_(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function Fo(c,h,m){if(c!==null&&(h.dependencies=c.dependencies),cu|=h.lanes,(m&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(t(153));if(h.child!==null){for(c=h.child,m=Nl(c,c.pendingProps),h.child=m,m.return=h;c.sibling!==null;)c=c.sibling,m=m.sibling=Nl(c,c.pendingProps),m.return=h;m.sibling=null}return h.child}function fV(c,h,m){switch(h.tag){case 3:nP(h),rf();break;case 5:xC(h);break;case 1:Vi(h.type)&&e_(h);break;case 4:_E(h,h.stateNode.containerInfo);break;case 10:var y=h.type._context,w=h.memoizedProps.value;vn(a_,y._currentValue),y._currentValue=w;break;case 13:if(y=h.memoizedState,y!==null)return y.dehydrated!==null?(vn(Dn,Dn.current&1),h.flags|=128,null):(m&h.child.childLanes)!==0?iP(c,h,m):(vn(Dn,Dn.current&1),c=Fo(c,h,m),c!==null?c.sibling:null);vn(Dn,Dn.current&1);break;case 19:if(y=(m&h.childLanes)!==0,(c.flags&128)!==0){if(y)return aP(c,h,m);h.flags|=128}if(w=h.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),vn(Dn,Dn.current),y)break;return null;case 22:case 23:return h.lanes=0,JC(c,h,m)}return Fo(c,h,m)}var oP,jE,lP,cP;oP=function(c,h){for(var m=h.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},jE=function(){},lP=function(c,h,m,y){var w=c.memoizedProps;if(w!==y){c=h.stateNode,ou($a.current);var I=null;switch(m){case"input":w=W(c,w),y=W(c,y),I=[];break;case"select":w=Ee({},w,{value:void 0}),y=Ee({},y,{value:void 0}),I=[];break;case"textarea":w=vi(c,w),y=vi(c,y),I=[];break;default:typeof w.onClick!="function"&&typeof y.onClick=="function"&&(c.onclick=Zp)}jr(m,y);var j;m=null;for(we in w)if(!y.hasOwnProperty(we)&&w.hasOwnProperty(we)&&w[we]!=null)if(we==="style"){var ee=w[we];for(j in ee)ee.hasOwnProperty(j)&&(m||(m={}),m[j]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(i.hasOwnProperty(we)?I||(I=[]):(I=I||[]).push(we,null));for(we in y){var ie=y[we];if(ee=w?.[we],y.hasOwnProperty(we)&&ie!==ee&&(ie!=null||ee!=null))if(we==="style")if(ee){for(j in ee)!ee.hasOwnProperty(j)||ie&&ie.hasOwnProperty(j)||(m||(m={}),m[j]="");for(j in ie)ie.hasOwnProperty(j)&&ee[j]!==ie[j]&&(m||(m={}),m[j]=ie[j])}else m||(I||(I=[]),I.push(we,m)),m=ie;else we==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ee=ee?ee.__html:void 0,ie!=null&&ee!==ie&&(I=I||[]).push(we,ie)):we==="children"?typeof ie!="string"&&typeof ie!="number"||(I=I||[]).push(we,""+ie):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(i.hasOwnProperty(we)?(ie!=null&&we==="onScroll"&&Tn("scroll",c),I||ee===ie||(I=[])):(I=I||[]).push(we,ie))}m&&(I=I||[]).push("style",m);var we=I;(h.updateQueue=we)&&(h.flags|=4)}},cP=function(c,h,m,y){m!==y&&(h.flags|=4)};function D0(c,h){if(!Pn)switch(c.tailMode){case"hidden":h=c.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function oi(c){var h=c.alternate!==null&&c.alternate.child===c.child,m=0,y=0;if(h)for(var w=c.child;w!==null;)m|=w.lanes|w.childLanes,y|=w.subtreeFlags&14680064,y|=w.flags&14680064,w.return=c,w=w.sibling;else for(w=c.child;w!==null;)m|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=c,w=w.sibling;return c.subtreeFlags|=y,c.childLanes=m,h}function dV(c,h,m){var y=h.pendingProps;switch(oE(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(h),null;case 1:return Vi(h.type)&&Jp(),oi(h),null;case 3:return y=h.stateNode,lf(),Sn(Fi),Sn(si),xE(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(i_(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,oa!==null&&(YE(oa),oa=null))),jE(c,h),oi(h),null;case 5:yE(h);var w=ou(b0.current);if(m=h.type,c!==null&&h.stateNode!=null)lP(c,h,m,y,w),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!y){if(h.stateNode===null)throw Error(t(166));return oi(h),null}if(c=ou($a.current),i_(h)){y=h.stateNode,m=h.type;var I=h.memoizedProps;switch(y[za]=h,y[A0]=I,c=(h.mode&1)!==0,m){case"dialog":Tn("cancel",y),Tn("close",y);break;case"iframe":case"object":case"embed":Tn("load",y);break;case"video":case"audio":for(w=0;w<T0.length;w++)Tn(T0[w],y);break;case"source":Tn("error",y);break;case"img":case"image":case"link":Tn("error",y),Tn("load",y);break;case"details":Tn("toggle",y);break;case"input":Ie(y,I),Tn("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!I.multiple},Tn("invalid",y);break;case"textarea":pn(y,I),Tn("invalid",y)}jr(m,I),w=null;for(var j in I)if(I.hasOwnProperty(j)){var ee=I[j];j==="children"?typeof ee=="string"?y.textContent!==ee&&(I.suppressHydrationWarning!==!0&&Yp(y.textContent,ee,c),w=["children",ee]):typeof ee=="number"&&y.textContent!==""+ee&&(I.suppressHydrationWarning!==!0&&Yp(y.textContent,ee,c),w=["children",""+ee]):i.hasOwnProperty(j)&&ee!=null&&j==="onScroll"&&Tn("scroll",y)}switch(m){case"input":le(y),Mt(y,I,!0);break;case"textarea":le(y),Vr(y);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(y.onclick=Zp)}y=w,h.updateQueue=y,y!==null&&(h.flags|=4)}else{j=w.nodeType===9?w:w.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Li(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=j.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof y.is=="string"?c=j.createElement(m,{is:y.is}):(c=j.createElement(m),m==="select"&&(j=c,y.multiple?j.multiple=!0:y.size&&(j.size=y.size))):c=j.createElementNS(c,m),c[za]=h,c[A0]=y,oP(c,h,!1,!1),h.stateNode=c;e:{switch(j=ra(m,y),m){case"dialog":Tn("cancel",c),Tn("close",c),w=y;break;case"iframe":case"object":case"embed":Tn("load",c),w=y;break;case"video":case"audio":for(w=0;w<T0.length;w++)Tn(T0[w],c);w=y;break;case"source":Tn("error",c),w=y;break;case"img":case"image":case"link":Tn("error",c),Tn("load",c),w=y;break;case"details":Tn("toggle",c),w=y;break;case"input":Ie(c,y),w=W(c,y),Tn("invalid",c);break;case"option":w=y;break;case"select":c._wrapperState={wasMultiple:!!y.multiple},w=Ee({},y,{value:void 0}),Tn("invalid",c);break;case"textarea":pn(c,y),w=vi(c,y),Tn("invalid",c);break;default:w=y}jr(m,w),ee=w;for(I in ee)if(ee.hasOwnProperty(I)){var ie=ee[I];I==="style"?bs(c,ie):I==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&To(c,ie)):I==="children"?typeof ie=="string"?(m!=="textarea"||ie!=="")&&ns(c,ie):typeof ie=="number"&&ns(c,""+ie):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(i.hasOwnProperty(I)?ie!=null&&I==="onScroll"&&Tn("scroll",c):ie!=null&&C(c,I,ie,j))}switch(m){case"input":le(c),Mt(c,y,!1);break;case"textarea":le(c),Vr(c);break;case"option":y.value!=null&&c.setAttribute("value",""+ne(y.value));break;case"select":c.multiple=!!y.multiple,I=y.value,I!=null?wn(c,!!y.multiple,I,!1):y.defaultValue!=null&&wn(c,!!y.multiple,y.defaultValue,!0);break;default:typeof w.onClick=="function"&&(c.onclick=Zp)}switch(m){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return oi(h),null;case 6:if(c&&h.stateNode!=null)cP(c,h,c.memoizedProps,y);else{if(typeof y!="string"&&h.stateNode===null)throw Error(t(166));if(m=ou(b0.current),ou($a.current),i_(h)){if(y=h.stateNode,m=h.memoizedProps,y[za]=h,(I=y.nodeValue!==m)&&(c=ds,c!==null))switch(c.tag){case 3:Yp(y.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Yp(y.nodeValue,m,(c.mode&1)!==0)}I&&(h.flags|=4)}else y=(m.nodeType===9?m:m.ownerDocument).createTextNode(y),y[za]=h,h.stateNode=y}return oi(h),null;case 13:if(Sn(Dn),y=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Pn&&gs!==null&&(h.mode&1)!==0&&(h.flags&128)===0)fC(),rf(),h.flags|=98560,I=!1;else if(I=i_(h),y!==null&&y.dehydrated!==null){if(c===null){if(!I)throw Error(t(318));if(I=h.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[za]=h}else rf(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;oi(h),I=!1}else oa!==null&&(YE(oa),oa=null),I=!0;if(!I)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=m,h):(y=y!==null,y!==(c!==null&&c.memoizedState!==null)&&y&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(Dn.current&1)!==0?_r===0&&(_r=3):JE())),h.updateQueue!==null&&(h.flags|=4),oi(h),null);case 4:return lf(),jE(c,h),c===null&&S0(h.stateNode.containerInfo),oi(h),null;case 10:return dE(h.type._context),oi(h),null;case 17:return Vi(h.type)&&Jp(),oi(h),null;case 19:if(Sn(Dn),I=h.memoizedState,I===null)return oi(h),null;if(y=(h.flags&128)!==0,j=I.rendering,j===null)if(y)D0(I,!1);else{if(_r!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(j=u_(c),j!==null){for(h.flags|=128,D0(I,!1),y=j.updateQueue,y!==null&&(h.updateQueue=y,h.flags|=4),h.subtreeFlags=0,y=m,m=h.child;m!==null;)I=m,c=y,I.flags&=14680066,j=I.alternate,j===null?(I.childLanes=0,I.lanes=c,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=j.childLanes,I.lanes=j.lanes,I.child=j.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=j.memoizedProps,I.memoizedState=j.memoizedState,I.updateQueue=j.updateQueue,I.type=j.type,c=j.dependencies,I.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return vn(Dn,Dn.current&1|2),h.child}c=c.sibling}I.tail!==null&&Ge()>ff&&(h.flags|=128,y=!0,D0(I,!1),h.lanes=4194304)}else{if(!y)if(c=u_(j),c!==null){if(h.flags|=128,y=!0,m=c.updateQueue,m!==null&&(h.updateQueue=m,h.flags|=4),D0(I,!0),I.tail===null&&I.tailMode==="hidden"&&!j.alternate&&!Pn)return oi(h),null}else 2*Ge()-I.renderingStartTime>ff&&m!==1073741824&&(h.flags|=128,y=!0,D0(I,!1),h.lanes=4194304);I.isBackwards?(j.sibling=h.child,h.child=j):(m=I.last,m!==null?m.sibling=j:h.child=j,I.last=j)}return I.tail!==null?(h=I.tail,I.rendering=h,I.tail=h.sibling,I.renderingStartTime=Ge(),h.sibling=null,m=Dn.current,vn(Dn,y?m&1|2:m&1),h):(oi(h),null);case 22:case 23:return QE(),y=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==y&&(h.flags|=8192),y&&(h.mode&1)!==0?(ms&1073741824)!==0&&(oi(h),h.subtreeFlags&6&&(h.flags|=8192)):oi(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function gV(c,h){switch(oE(h),h.tag){case 1:return Vi(h.type)&&Jp(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return lf(),Sn(Fi),Sn(si),xE(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return yE(h),null;case 13:if(Sn(Dn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(t(340));rf()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Sn(Dn),null;case 4:return lf(),null;case 10:return dE(h.type._context),null;case 22:case 23:return QE(),null;case 24:return null;default:return null}}var v_=!1,li=!1,mV=typeof WeakSet=="function"?WeakSet:Set,it=null;function uf(c,h){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(y){Un(c,h,y)}else m.current=null}function BE(c,h,m){try{m()}catch(y){Un(c,h,y)}}var uP=!1;function pV(c,h){if(Qx=Co,c=UR(),$x(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var w=y.anchorOffset,I=y.focusNode;y=y.focusOffset;try{m.nodeType,I.nodeType}catch{m=null;break e}var j=0,ee=-1,ie=-1,we=0,Ve=0,Ue=c,Ne=null;t:for(;;){for(var nt;Ue!==m||w!==0&&Ue.nodeType!==3||(ee=j+w),Ue!==I||y!==0&&Ue.nodeType!==3||(ie=j+y),Ue.nodeType===3&&(j+=Ue.nodeValue.length),(nt=Ue.firstChild)!==null;)Ne=Ue,Ue=nt;for(;;){if(Ue===c)break t;if(Ne===m&&++we===w&&(ee=j),Ne===I&&++Ve===y&&(ie=j),(nt=Ue.nextSibling)!==null)break;Ue=Ne,Ne=Ue.parentNode}Ue=nt}m=ee===-1||ie===-1?null:{start:ee,end:ie}}else m=null}m=m||{start:0,end:0}}else m=null;for(Jx={focusedElem:c,selectionRange:m},Co=!1,it=h;it!==null;)if(h=it,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,it=c;else for(;it!==null;){h=it;try{var st=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(st!==null){var lt=st.memoizedProps,Qn=st.memoizedState,de=h.stateNode,oe=de.getSnapshotBeforeUpdate(h.elementType===h.type?lt:la(h.type,lt),Qn);de.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var _e=h.stateNode.containerInfo;_e.nodeType===1?_e.textContent="":_e.nodeType===9&&_e.documentElement&&_e.removeChild(_e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch($e){Un(h,h.return,$e)}if(c=h.sibling,c!==null){c.return=h.return,it=c;break}it=h.return}return st=uP,uP=!1,st}function F0(c,h,m){var y=h.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var w=y=y.next;do{if((w.tag&c)===c){var I=w.destroy;w.destroy=void 0,I!==void 0&&BE(h,m,I)}w=w.next}while(w!==y)}}function x_(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&c)===c){var y=m.create;m.destroy=y()}m=m.next}while(m!==h)}}function GE(c){var h=c.ref;if(h!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof h=="function"?h(c):h.current=c}}function hP(c){var h=c.alternate;h!==null&&(c.alternate=null,hP(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[za],delete h[A0],delete h[rE],delete h[Q7],delete h[J7])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function fP(c){return c.tag===5||c.tag===3||c.tag===4}function dP(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||fP(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function UE(c,h,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,h?m.nodeType===8?m.parentNode.insertBefore(c,h):m.insertBefore(c,h):(m.nodeType===8?(h=m.parentNode,h.insertBefore(c,m)):(h=m,h.appendChild(c)),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Zp));else if(y!==4&&(c=c.child,c!==null))for(UE(c,h,m),c=c.sibling;c!==null;)UE(c,h,m),c=c.sibling}function zE(c,h,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,h?m.insertBefore(c,h):m.appendChild(c);else if(y!==4&&(c=c.child,c!==null))for(zE(c,h,m),c=c.sibling;c!==null;)zE(c,h,m),c=c.sibling}var zr=null,ca=!1;function Ml(c,h,m){for(m=m.child;m!==null;)gP(c,h,m),m=m.sibling}function gP(c,h,m){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(ls,m)}catch{}switch(m.tag){case 5:li||uf(m,h);case 6:var y=zr,w=ca;zr=null,Ml(c,h,m),zr=y,ca=w,zr!==null&&(ca?(c=zr,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):zr.removeChild(m.stateNode));break;case 18:zr!==null&&(ca?(c=zr,m=m.stateNode,c.nodeType===8?nE(c.parentNode,m):c.nodeType===1&&nE(c,m),xl(c)):nE(zr,m.stateNode));break;case 4:y=zr,w=ca,zr=m.stateNode.containerInfo,ca=!0,Ml(c,h,m),zr=y,ca=w;break;case 0:case 11:case 14:case 15:if(!li&&(y=m.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){w=y=y.next;do{var I=w,j=I.destroy;I=I.tag,j!==void 0&&((I&2)!==0||(I&4)!==0)&&BE(m,h,j),w=w.next}while(w!==y)}Ml(c,h,m);break;case 1:if(!li&&(uf(m,h),y=m.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=m.memoizedProps,y.state=m.memoizedState,y.componentWillUnmount()}catch(ee){Un(m,h,ee)}Ml(c,h,m);break;case 21:Ml(c,h,m);break;case 22:m.mode&1?(li=(y=li)||m.memoizedState!==null,Ml(c,h,m),li=y):Ml(c,h,m);break;default:Ml(c,h,m)}}function mP(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new mV),h.forEach(function(y){var w=IV.bind(null,c,y);m.has(y)||(m.add(y),y.then(w,w))})}}function ua(c,h){var m=h.deletions;if(m!==null)for(var y=0;y<m.length;y++){var w=m[y];try{var I=c,j=h,ee=j;e:for(;ee!==null;){switch(ee.tag){case 5:zr=ee.stateNode,ca=!1;break e;case 3:zr=ee.stateNode.containerInfo,ca=!0;break e;case 4:zr=ee.stateNode.containerInfo,ca=!0;break e}ee=ee.return}if(zr===null)throw Error(t(160));gP(I,j,w),zr=null,ca=!1;var ie=w.alternate;ie!==null&&(ie.return=null),w.return=null}catch(we){Un(w,h,we)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)pP(h,c),h=h.sibling}function pP(c,h){var m=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(ua(h,c),Ha(c),y&4){try{F0(3,c,c.return),x_(3,c)}catch(lt){Un(c,c.return,lt)}try{F0(5,c,c.return)}catch(lt){Un(c,c.return,lt)}}break;case 1:ua(h,c),Ha(c),y&512&&m!==null&&uf(m,m.return);break;case 5:if(ua(h,c),Ha(c),y&512&&m!==null&&uf(m,m.return),c.flags&32){var w=c.stateNode;try{ns(w,"")}catch(lt){Un(c,c.return,lt)}}if(y&4&&(w=c.stateNode,w!=null)){var I=c.memoizedProps,j=m!==null?m.memoizedProps:I,ee=c.type,ie=c.updateQueue;if(c.updateQueue=null,ie!==null)try{ee==="input"&&I.type==="radio"&&I.name!=null&&tt(w,I),ra(ee,j);var we=ra(ee,I);for(j=0;j<ie.length;j+=2){var Ve=ie[j],Ue=ie[j+1];Ve==="style"?bs(w,Ue):Ve==="dangerouslySetInnerHTML"?To(w,Ue):Ve==="children"?ns(w,Ue):C(w,Ve,Ue,we)}switch(ee){case"input":De(w,I);break;case"textarea":fr(w,I);break;case"select":var Ne=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!I.multiple;var nt=I.value;nt!=null?wn(w,!!I.multiple,nt,!1):Ne!==!!I.multiple&&(I.defaultValue!=null?wn(w,!!I.multiple,I.defaultValue,!0):wn(w,!!I.multiple,I.multiple?[]:"",!1))}w[A0]=I}catch(lt){Un(c,c.return,lt)}}break;case 6:if(ua(h,c),Ha(c),y&4){if(c.stateNode===null)throw Error(t(162));w=c.stateNode,I=c.memoizedProps;try{w.nodeValue=I}catch(lt){Un(c,c.return,lt)}}break;case 3:if(ua(h,c),Ha(c),y&4&&m!==null&&m.memoizedState.isDehydrated)try{xl(h.containerInfo)}catch(lt){Un(c,c.return,lt)}break;case 4:ua(h,c),Ha(c);break;case 13:ua(h,c),Ha(c),w=c.child,w.flags&8192&&(I=w.memoizedState!==null,w.stateNode.isHidden=I,!I||w.alternate!==null&&w.alternate.memoizedState!==null||(HE=Ge())),y&4&&mP(c);break;case 22:if(Ve=m!==null&&m.memoizedState!==null,c.mode&1?(li=(we=li)||Ve,ua(h,c),li=we):ua(h,c),Ha(c),y&8192){if(we=c.memoizedState!==null,(c.stateNode.isHidden=we)&&!Ve&&(c.mode&1)!==0)for(it=c,Ve=c.child;Ve!==null;){for(Ue=it=Ve;it!==null;){switch(Ne=it,nt=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:F0(4,Ne,Ne.return);break;case 1:uf(Ne,Ne.return);var st=Ne.stateNode;if(typeof st.componentWillUnmount=="function"){y=Ne,m=Ne.return;try{h=y,st.props=h.memoizedProps,st.state=h.memoizedState,st.componentWillUnmount()}catch(lt){Un(y,m,lt)}}break;case 5:uf(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){vP(Ue);continue}}nt!==null?(nt.return=Ne,it=nt):vP(Ue)}Ve=Ve.sibling}e:for(Ve=null,Ue=c;;){if(Ue.tag===5){if(Ve===null){Ve=Ue;try{w=Ue.stateNode,we?(I=w.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(ee=Ue.stateNode,ie=Ue.memoizedProps.style,j=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,ee.style.display=rs("display",j))}catch(lt){Un(c,c.return,lt)}}}else if(Ue.tag===6){if(Ve===null)try{Ue.stateNode.nodeValue=we?"":Ue.memoizedProps}catch(lt){Un(c,c.return,lt)}}else if((Ue.tag!==22&&Ue.tag!==23||Ue.memoizedState===null||Ue===c)&&Ue.child!==null){Ue.child.return=Ue,Ue=Ue.child;continue}if(Ue===c)break e;for(;Ue.sibling===null;){if(Ue.return===null||Ue.return===c)break e;Ve===Ue&&(Ve=null),Ue=Ue.return}Ve===Ue&&(Ve=null),Ue.sibling.return=Ue.return,Ue=Ue.sibling}}break;case 19:ua(h,c),Ha(c),y&4&&mP(c);break;case 21:break;default:ua(h,c),Ha(c)}}function Ha(c){var h=c.flags;if(h&2){try{e:{for(var m=c.return;m!==null;){if(fP(m)){var y=m;break e}m=m.return}throw Error(t(160))}switch(y.tag){case 5:var w=y.stateNode;y.flags&32&&(ns(w,""),y.flags&=-33);var I=dP(c);zE(c,I,w);break;case 3:case 4:var j=y.stateNode.containerInfo,ee=dP(c);UE(c,ee,j);break;default:throw Error(t(161))}}catch(ie){Un(c,c.return,ie)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function _V(c,h,m){it=c,_P(c)}function _P(c,h,m){for(var y=(c.mode&1)!==0;it!==null;){var w=it,I=w.child;if(w.tag===22&&y){var j=w.memoizedState!==null||v_;if(!j){var ee=w.alternate,ie=ee!==null&&ee.memoizedState!==null||li;ee=v_;var we=li;if(v_=j,(li=ie)&&!we)for(it=w;it!==null;)j=it,ie=j.child,j.tag===22&&j.memoizedState!==null?xP(w):ie!==null?(ie.return=j,it=ie):xP(w);for(;I!==null;)it=I,_P(I),I=I.sibling;it=w,v_=ee,li=we}yP(c)}else(w.subtreeFlags&8772)!==0&&I!==null?(I.return=w,it=I):yP(c)}}function yP(c){for(;it!==null;){var h=it;if((h.flags&8772)!==0){var m=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:li||x_(5,h);break;case 1:var y=h.stateNode;if(h.flags&4&&!li)if(m===null)y.componentDidMount();else{var w=h.elementType===h.type?m.memoizedProps:la(h.type,m.memoizedProps);y.componentDidUpdate(w,m.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&vC(h,I,y);break;case 3:var j=h.updateQueue;if(j!==null){if(m=null,h.child!==null)switch(h.child.tag){case 5:m=h.child.stateNode;break;case 1:m=h.child.stateNode}vC(h,j,m)}break;case 5:var ee=h.stateNode;if(m===null&&h.flags&4){m=ee;var ie=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&m.focus();break;case"img":ie.src&&(m.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var we=h.alternate;if(we!==null){var Ve=we.memoizedState;if(Ve!==null){var Ue=Ve.dehydrated;Ue!==null&&xl(Ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}li||h.flags&512&&GE(h)}catch(Ne){Un(h,h.return,Ne)}}if(h===c){it=null;break}if(m=h.sibling,m!==null){m.return=h.return,it=m;break}it=h.return}}function vP(c){for(;it!==null;){var h=it;if(h===c){it=null;break}var m=h.sibling;if(m!==null){m.return=h.return,it=m;break}it=h.return}}function xP(c){for(;it!==null;){var h=it;try{switch(h.tag){case 0:case 11:case 15:var m=h.return;try{x_(4,h)}catch(ie){Un(h,m,ie)}break;case 1:var y=h.stateNode;if(typeof y.componentDidMount=="function"){var w=h.return;try{y.componentDidMount()}catch(ie){Un(h,w,ie)}}var I=h.return;try{GE(h)}catch(ie){Un(h,I,ie)}break;case 5:var j=h.return;try{GE(h)}catch(ie){Un(h,j,ie)}}}catch(ie){Un(h,h.return,ie)}if(h===c){it=null;break}var ee=h.sibling;if(ee!==null){ee.return=h.return,it=ee;break}it=h.return}}var yV=Math.ceil,E_=O.ReactCurrentDispatcher,$E=O.ReactCurrentOwner,Vs=O.ReactCurrentBatchConfig,zt=0,Cr=null,rr=null,$r=0,ms=0,hf=Il(0),_r=0,V0=null,cu=0,w_=0,WE=0,j0=null,Bi=null,HE=0,ff=1/0,Vo=null,T_=!1,KE=null,bl=null,S_=!1,kl=null,I_=0,B0=0,qE=null,A_=-1,R_=0;function Ti(){return(zt&6)!==0?Ge():A_!==-1?A_:A_=Ge()}function Ol(c){return(c.mode&1)===0?1:(zt&2)!==0&&$r!==0?$r&-$r:tV.transition!==null?(R_===0&&(R_=o0()),R_):(c=jt,c!==0||(c=window.event,c=c===void 0?16:Bh(c.type)),c)}function ha(c,h,m,y){if(50<B0)throw B0=0,qE=null,Error(t(185));Zc(c,m,y),((zt&2)===0||c!==Cr)&&(c===Cr&&((zt&2)===0&&(w_|=m),_r===4&&Ll(c,$r)),Gi(c,y),m===1&&zt===0&&(h.mode&1)===0&&(ff=Ge()+500,t_&&Rl()))}function Gi(c,h){var m=c.callbackNode;Yc(c,h);var y=Io(c,c===Cr?$r:0);if(y===0)m!==null&&He(m),c.callbackNode=null,c.callbackPriority=0;else if(h=y&-y,c.callbackPriority!==h){if(m!=null&&He(m),h===1)c.tag===0?eV(wP.bind(null,c)):oC(wP.bind(null,c)),Y7(function(){(zt&6)===0&&Rl()}),m=null;else{switch(Oa(y)){case 1:m=Qt;break;case 4:m=rn;break;case 16:m=Cn;break;case 536870912:m=ks;break;default:m=Cn}m=MP(m,EP.bind(null,c))}c.callbackPriority=h,c.callbackNode=m}}function EP(c,h){if(A_=-1,R_=0,(zt&6)!==0)throw Error(t(327));var m=c.callbackNode;if(df()&&c.callbackNode!==m)return null;var y=Io(c,c===Cr?$r:0);if(y===0)return null;if((y&30)!==0||(y&c.expiredLanes)!==0||h)h=C_(c,y);else{h=y;var w=zt;zt|=2;var I=SP();(Cr!==c||$r!==h)&&(Vo=null,ff=Ge()+500,hu(c,h));do try{EV();break}catch(ee){TP(c,ee)}while(!0);fE(),E_.current=I,zt=w,rr!==null?h=0:(Cr=null,$r=0,h=_r)}if(h!==0){if(h===2&&(w=a0(c),w!==0&&(y=w,h=XE(c,w))),h===1)throw m=V0,hu(c,0),Ll(c,y),Gi(c,Ge()),m;if(h===6)Ll(c,y);else{if(w=c.current.alternate,(y&30)===0&&!vV(w)&&(h=C_(c,y),h===2&&(I=a0(c),I!==0&&(y=I,h=XE(c,I))),h===1))throw m=V0,hu(c,0),Ll(c,y),Gi(c,Ge()),m;switch(c.finishedWork=w,c.finishedLanes=y,h){case 0:case 1:throw Error(t(345));case 2:fu(c,Bi,Vo);break;case 3:if(Ll(c,y),(y&130023424)===y&&(h=HE+500-Ge(),10<h)){if(Io(c,0)!==0)break;if(w=c.suspendedLanes,(w&y)!==y){Ti(),c.pingedLanes|=c.suspendedLanes&w;break}c.timeoutHandle=tE(fu.bind(null,c,Bi,Vo),h);break}fu(c,Bi,Vo);break;case 4:if(Ll(c,y),(y&4194240)===y)break;for(h=c.eventTimes,w=-1;0<y;){var j=31-Nn(y);I=1<<j,j=h[j],j>w&&(w=j),y&=~I}if(y=w,y=Ge()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*yV(y/1960))-y,10<y){c.timeoutHandle=tE(fu.bind(null,c,Bi,Vo),y);break}fu(c,Bi,Vo);break;case 5:fu(c,Bi,Vo);break;default:throw Error(t(329))}}}return Gi(c,Ge()),c.callbackNode===m?EP.bind(null,c):null}function XE(c,h){var m=j0;return c.current.memoizedState.isDehydrated&&(hu(c,h).flags|=256),c=C_(c,h),c!==2&&(h=Bi,Bi=m,h!==null&&YE(h)),c}function YE(c){Bi===null?Bi=c:Bi.push.apply(Bi,c)}function vV(c){for(var h=c;;){if(h.flags&16384){var m=h.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var y=0;y<m.length;y++){var w=m[y],I=w.getSnapshot;w=w.value;try{if(!aa(I(),w))return!1}catch{return!1}}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ll(c,h){for(h&=~WE,h&=~w_,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var m=31-Nn(h),y=1<<m;c[m]=-1,h&=~y}}function wP(c){if((zt&6)!==0)throw Error(t(327));df();var h=Io(c,0);if((h&1)===0)return Gi(c,Ge()),null;var m=C_(c,h);if(c.tag!==0&&m===2){var y=a0(c);y!==0&&(h=y,m=XE(c,y))}if(m===1)throw m=V0,hu(c,0),Ll(c,h),Gi(c,Ge()),m;if(m===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,fu(c,Bi,Vo),Gi(c,Ge()),null}function ZE(c,h){var m=zt;zt|=1;try{return c(h)}finally{zt=m,zt===0&&(ff=Ge()+500,t_&&Rl())}}function uu(c){kl!==null&&kl.tag===0&&(zt&6)===0&&df();var h=zt;zt|=1;var m=Vs.transition,y=jt;try{if(Vs.transition=null,jt=1,c)return c()}finally{jt=y,Vs.transition=m,zt=h,(zt&6)===0&&Rl()}}function QE(){ms=hf.current,Sn(hf)}function hu(c,h){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,X7(m)),rr!==null)for(m=rr.return;m!==null;){var y=m;switch(oE(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Jp();break;case 3:lf(),Sn(Fi),Sn(si),xE();break;case 5:yE(y);break;case 4:lf();break;case 13:Sn(Dn);break;case 19:Sn(Dn);break;case 10:dE(y.type._context);break;case 22:case 23:QE()}m=m.return}if(Cr=c,rr=c=Nl(c.current,null),$r=ms=h,_r=0,V0=null,WE=w_=cu=0,Bi=j0=null,au!==null){for(h=0;h<au.length;h++)if(m=au[h],y=m.interleaved,y!==null){m.interleaved=null;var w=y.next,I=m.pending;if(I!==null){var j=I.next;I.next=w,y.next=j}m.pending=y}au=null}return c}function TP(c,h){do{var m=rr;try{if(fE(),h_.current=m_,f_){for(var y=Fn.memoizedState;y!==null;){var w=y.queue;w!==null&&(w.pending=null),y=y.next}f_=!1}if(lu=0,Rr=pr=Fn=null,k0=!1,O0=0,$E.current=null,m===null||m.return===null){_r=1,V0=h,rr=null;break}e:{var I=c,j=m.return,ee=m,ie=h;if(h=$r,ee.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var we=ie,Ve=ee,Ue=Ve.tag;if((Ve.mode&1)===0&&(Ue===0||Ue===11||Ue===15)){var Ne=Ve.alternate;Ne?(Ve.updateQueue=Ne.updateQueue,Ve.memoizedState=Ne.memoizedState,Ve.lanes=Ne.lanes):(Ve.updateQueue=null,Ve.memoizedState=null)}var nt=qC(j);if(nt!==null){nt.flags&=-257,XC(nt,j,ee,I,h),nt.mode&1&&KC(I,we,h),h=nt,ie=we;var st=h.updateQueue;if(st===null){var lt=new Set;lt.add(ie),h.updateQueue=lt}else st.add(ie);break e}else{if((h&1)===0){KC(I,we,h),JE();break e}ie=Error(t(426))}}else if(Pn&&ee.mode&1){var Qn=qC(j);if(Qn!==null){(Qn.flags&65536)===0&&(Qn.flags|=256),XC(Qn,j,ee,I,h),uE(cf(ie,ee));break e}}I=ie=cf(ie,ee),_r!==4&&(_r=2),j0===null?j0=[I]:j0.push(I),I=j;do{switch(I.tag){case 3:I.flags|=65536,h&=-h,I.lanes|=h;var de=WC(I,ie,h);yC(I,de);break e;case 1:ee=ie;var oe=I.type,_e=I.stateNode;if((I.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||_e!==null&&typeof _e.componentDidCatch=="function"&&(bl===null||!bl.has(_e)))){I.flags|=65536,h&=-h,I.lanes|=h;var $e=HC(I,ee,h);yC(I,$e);break e}}I=I.return}while(I!==null)}AP(m)}catch(ct){h=ct,rr===m&&m!==null&&(rr=m=m.return);continue}break}while(!0)}function SP(){var c=E_.current;return E_.current=m_,c===null?m_:c}function JE(){(_r===0||_r===3||_r===2)&&(_r=4),Cr===null||(cu&268435455)===0&&(w_&268435455)===0||Ll(Cr,$r)}function C_(c,h){var m=zt;zt|=2;var y=SP();(Cr!==c||$r!==h)&&(Vo=null,hu(c,h));do try{xV();break}catch(w){TP(c,w)}while(!0);if(fE(),zt=m,E_.current=y,rr!==null)throw Error(t(261));return Cr=null,$r=0,_r}function xV(){for(;rr!==null;)IP(rr)}function EV(){for(;rr!==null&&!et();)IP(rr)}function IP(c){var h=PP(c.alternate,c,ms);c.memoizedProps=c.pendingProps,h===null?AP(c):rr=h,$E.current=null}function AP(c){var h=c;do{var m=h.alternate;if(c=h.return,(h.flags&32768)===0){if(m=dV(m,h,ms),m!==null){rr=m;return}}else{if(m=gV(m,h),m!==null){m.flags&=32767,rr=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{_r=6,rr=null;return}}if(h=h.sibling,h!==null){rr=h;return}rr=h=c}while(h!==null);_r===0&&(_r=5)}function fu(c,h,m){var y=jt,w=Vs.transition;try{Vs.transition=null,jt=1,wV(c,h,m,y)}finally{Vs.transition=w,jt=y}return null}function wV(c,h,m,y){do df();while(kl!==null);if((zt&6)!==0)throw Error(t(327));m=c.finishedWork;var w=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var I=m.lanes|m.childLanes;if(jx(c,I),c===Cr&&(rr=Cr=null,$r=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||S_||(S_=!0,MP(Cn,function(){return df(),null})),I=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||I){I=Vs.transition,Vs.transition=null;var j=jt;jt=1;var ee=zt;zt|=4,$E.current=null,pV(c,m),pP(m,c),U7(Jx),Co=!!Qx,Jx=Qx=null,c.current=m,_V(m),Be(),zt=ee,jt=j,Vs.transition=I}else c.current=m;if(S_&&(S_=!1,kl=c,I_=w),I=c.pendingLanes,I===0&&(bl=null),pl(m.stateNode),Gi(c,Ge()),h!==null)for(y=c.onRecoverableError,m=0;m<h.length;m++)w=h[m],y(w.value,{componentStack:w.stack,digest:w.digest});if(T_)throw T_=!1,c=KE,KE=null,c;return(I_&1)!==0&&c.tag!==0&&df(),I=c.pendingLanes,(I&1)!==0?c===qE?B0++:(B0=0,qE=c):B0=0,Rl(),null}function df(){if(kl!==null){var c=Oa(I_),h=Vs.transition,m=jt;try{if(Vs.transition=null,jt=16>c?16:c,kl===null)var y=!1;else{if(c=kl,kl=null,I_=0,(zt&6)!==0)throw Error(t(331));var w=zt;for(zt|=4,it=c.current;it!==null;){var I=it,j=I.child;if((it.flags&16)!==0){var ee=I.deletions;if(ee!==null){for(var ie=0;ie<ee.length;ie++){var we=ee[ie];for(it=we;it!==null;){var Ve=it;switch(Ve.tag){case 0:case 11:case 15:F0(8,Ve,I)}var Ue=Ve.child;if(Ue!==null)Ue.return=Ve,it=Ue;else for(;it!==null;){Ve=it;var Ne=Ve.sibling,nt=Ve.return;if(hP(Ve),Ve===we){it=null;break}if(Ne!==null){Ne.return=nt,it=Ne;break}it=nt}}}var st=I.alternate;if(st!==null){var lt=st.child;if(lt!==null){st.child=null;do{var Qn=lt.sibling;lt.sibling=null,lt=Qn}while(lt!==null)}}it=I}}if((I.subtreeFlags&2064)!==0&&j!==null)j.return=I,it=j;else e:for(;it!==null;){if(I=it,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:F0(9,I,I.return)}var de=I.sibling;if(de!==null){de.return=I.return,it=de;break e}it=I.return}}var oe=c.current;for(it=oe;it!==null;){j=it;var _e=j.child;if((j.subtreeFlags&2064)!==0&&_e!==null)_e.return=j,it=_e;else e:for(j=oe;it!==null;){if(ee=it,(ee.flags&2048)!==0)try{switch(ee.tag){case 0:case 11:case 15:x_(9,ee)}}catch(ct){Un(ee,ee.return,ct)}if(ee===j){it=null;break e}var $e=ee.sibling;if($e!==null){$e.return=ee.return,it=$e;break e}it=ee.return}}if(zt=w,Rl(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(ls,c)}catch{}y=!0}return y}finally{jt=m,Vs.transition=h}}return!1}function RP(c,h,m){h=cf(m,h),h=WC(c,h,1),c=Pl(c,h,1),h=Ti(),c!==null&&(Zc(c,1,h),Gi(c,h))}function Un(c,h,m){if(c.tag===3)RP(c,c,m);else for(;h!==null;){if(h.tag===3){RP(h,c,m);break}else if(h.tag===1){var y=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(bl===null||!bl.has(y))){c=cf(m,c),c=HC(h,c,1),h=Pl(h,c,1),c=Ti(),h!==null&&(Zc(h,1,c),Gi(h,c));break}}h=h.return}}function TV(c,h,m){var y=c.pingCache;y!==null&&y.delete(h),h=Ti(),c.pingedLanes|=c.suspendedLanes&m,Cr===c&&($r&m)===m&&(_r===4||_r===3&&($r&130023424)===$r&&500>Ge()-HE?hu(c,0):WE|=m),Gi(c,h)}function CP(c,h){h===0&&((c.mode&1)===0?h=1:(h=_l,_l<<=1,(_l&130023424)===0&&(_l=4194304)));var m=Ti();c=No(c,h),c!==null&&(Zc(c,h,m),Gi(c,m))}function SV(c){var h=c.memoizedState,m=0;h!==null&&(m=h.retryLane),CP(c,m)}function IV(c,h){var m=0;switch(c.tag){case 13:var y=c.stateNode,w=c.memoizedState;w!==null&&(m=w.retryLane);break;case 19:y=c.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(h),CP(c,m)}var PP;PP=function(c,h,m){if(c!==null)if(c.memoizedProps!==h.pendingProps||Fi.current)ji=!0;else{if((c.lanes&m)===0&&(h.flags&128)===0)return ji=!1,fV(c,h,m);ji=(c.flags&131072)!==0}else ji=!1,Pn&&(h.flags&1048576)!==0&&lC(h,r_,h.index);switch(h.lanes=0,h.tag){case 2:var y=h.type;y_(c,h),c=h.pendingProps;var w=ef(h,si.current);of(h,m),w=TE(null,h,y,c,w,m);var I=SE();return h.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Vi(y)?(I=!0,e_(h)):I=!1,h.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,pE(h),w.updater=p_,h.stateNode=w,w._reactInternals=h,ME(h,y,c,m),h=LE(null,h,y,!0,I,m)):(h.tag=0,Pn&&I&&aE(h),wi(null,h,w,m),h=h.child),h;case 16:y=h.elementType;e:{switch(y_(c,h),c=h.pendingProps,w=y._init,y=w(y._payload),h.type=y,w=h.tag=RV(y),c=la(y,c),w){case 0:h=OE(null,h,y,c,m);break e;case 1:h=tP(null,h,y,c,m);break e;case 11:h=YC(null,h,y,c,m);break e;case 14:h=ZC(null,h,y,la(y.type,c),m);break e}throw Error(t(306,y,""))}return h;case 0:return y=h.type,w=h.pendingProps,w=h.elementType===y?w:la(y,w),OE(c,h,y,w,m);case 1:return y=h.type,w=h.pendingProps,w=h.elementType===y?w:la(y,w),tP(c,h,y,w,m);case 3:e:{if(nP(h),c===null)throw Error(t(387));y=h.pendingProps,I=h.memoizedState,w=I.element,_C(c,h),c_(h,y,null,m);var j=h.memoizedState;if(y=j.element,I.isDehydrated)if(I={element:y,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){w=cf(Error(t(423)),h),h=rP(c,h,y,m,w);break e}else if(y!==w){w=cf(Error(t(424)),h),h=rP(c,h,y,m,w);break e}else for(gs=Sl(h.stateNode.containerInfo.firstChild),ds=h,Pn=!0,oa=null,m=mC(h,null,y,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(rf(),y===w){h=Fo(c,h,m);break e}wi(c,h,y,m)}h=h.child}return h;case 5:return xC(h),c===null&&cE(h),y=h.type,w=h.pendingProps,I=c!==null?c.memoizedProps:null,j=w.children,eE(y,w)?j=null:I!==null&&eE(y,I)&&(h.flags|=32),eP(c,h),wi(c,h,j,m),h.child;case 6:return c===null&&cE(h),null;case 13:return iP(c,h,m);case 4:return _E(h,h.stateNode.containerInfo),y=h.pendingProps,c===null?h.child=sf(h,null,y,m):wi(c,h,y,m),h.child;case 11:return y=h.type,w=h.pendingProps,w=h.elementType===y?w:la(y,w),YC(c,h,y,w,m);case 7:return wi(c,h,h.pendingProps,m),h.child;case 8:return wi(c,h,h.pendingProps.children,m),h.child;case 12:return wi(c,h,h.pendingProps.children,m),h.child;case 10:e:{if(y=h.type._context,w=h.pendingProps,I=h.memoizedProps,j=w.value,vn(a_,y._currentValue),y._currentValue=j,I!==null)if(aa(I.value,j)){if(I.children===w.children&&!Fi.current){h=Fo(c,h,m);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var ee=I.dependencies;if(ee!==null){j=I.child;for(var ie=ee.firstContext;ie!==null;){if(ie.context===y){if(I.tag===1){ie=Do(-1,m&-m),ie.tag=2;var we=I.updateQueue;if(we!==null){we=we.shared;var Ve=we.pending;Ve===null?ie.next=ie:(ie.next=Ve.next,Ve.next=ie),we.pending=ie}}I.lanes|=m,ie=I.alternate,ie!==null&&(ie.lanes|=m),gE(I.return,m,h),ee.lanes|=m;break}ie=ie.next}}else if(I.tag===10)j=I.type===h.type?null:I.child;else if(I.tag===18){if(j=I.return,j===null)throw Error(t(341));j.lanes|=m,ee=j.alternate,ee!==null&&(ee.lanes|=m),gE(j,m,h),j=I.sibling}else j=I.child;if(j!==null)j.return=I;else for(j=I;j!==null;){if(j===h){j=null;break}if(I=j.sibling,I!==null){I.return=j.return,j=I;break}j=j.return}I=j}wi(c,h,w.children,m),h=h.child}return h;case 9:return w=h.type,y=h.pendingProps.children,of(h,m),w=Ds(w),y=y(w),h.flags|=1,wi(c,h,y,m),h.child;case 14:return y=h.type,w=la(y,h.pendingProps),w=la(y.type,w),ZC(c,h,y,w,m);case 15:return QC(c,h,h.type,h.pendingProps,m);case 17:return y=h.type,w=h.pendingProps,w=h.elementType===y?w:la(y,w),y_(c,h),h.tag=1,Vi(y)?(c=!0,e_(h)):c=!1,of(h,m),zC(h,y,w),ME(h,y,w,m),LE(null,h,y,!0,c,m);case 19:return aP(c,h,m);case 22:return JC(c,h,m)}throw Error(t(156,h.tag))};function MP(c,h){return je(c,h)}function AV(c,h,m,y){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(c,h,m,y){return new AV(c,h,m,y)}function ew(c){return c=c.prototype,!(!c||!c.isReactComponent)}function RV(c){if(typeof c=="function")return ew(c)?1:0;if(c!=null){if(c=c.$$typeof,c===U)return 11;if(c===be)return 14}return 2}function Nl(c,h){var m=c.alternate;return m===null?(m=js(c.tag,h,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=h,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,h=c.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function P_(c,h,m,y,w,I){var j=2;if(y=c,typeof c=="function")ew(c)&&(j=1);else if(typeof c=="string")j=5;else e:switch(c){case M:return du(m.children,w,I,h);case P:j=8,w|=8;break;case b:return c=js(12,m,h,w|2),c.elementType=b,c.lanes=I,c;case V:return c=js(13,m,h,w),c.elementType=V,c.lanes=I,c;case Ae:return c=js(19,m,h,w),c.elementType=Ae,c.lanes=I,c;case Me:return M_(m,w,I,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case D:j=10;break e;case B:j=9;break e;case U:j=11;break e;case be:j=14;break e;case Pe:j=16,y=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return h=js(j,m,h,w),h.elementType=c,h.type=y,h.lanes=I,h}function du(c,h,m,y){return c=js(7,c,y,h),c.lanes=m,c}function M_(c,h,m,y){return c=js(22,c,y,h),c.elementType=Me,c.lanes=m,c.stateNode={isHidden:!1},c}function tw(c,h,m){return c=js(6,c,null,h),c.lanes=m,c}function nw(c,h,m){return h=js(4,c.children!==null?c.children:[],c.key,h),h.lanes=m,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function CV(c,h,m,y,w){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=l0(0),this.expirationTimes=l0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=l0(0),this.identifierPrefix=y,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function rw(c,h,m,y,w,I,j,ee,ie){return c=new CV(c,h,m,ee,ie),h===1?(h=1,I===!0&&(h|=8)):h=0,I=js(3,null,null,h),c.current=I,I.stateNode=c,I.memoizedState={element:y,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},pE(I),c}function PV(c,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:y==null?null:""+y,children:c,containerInfo:h,implementation:m}}function bP(c){if(!c)return Al;c=c._reactInternals;e:{if(Q(c)!==c||c.tag!==1)throw Error(t(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Vi(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(c.tag===1){var m=c.type;if(Vi(m))return sC(c,m,h)}return h}function kP(c,h,m,y,w,I,j,ee,ie){return c=rw(m,y,!0,c,w,I,j,ee,ie),c.context=bP(null),m=c.current,y=Ti(),w=Ol(m),I=Do(y,w),I.callback=h??null,Pl(m,I,w),c.current.lanes=w,Zc(c,w,y),Gi(c,y),c}function b_(c,h,m,y){var w=h.current,I=Ti(),j=Ol(w);return m=bP(m),h.context===null?h.context=m:h.pendingContext=m,h=Do(I,j),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=Pl(w,h,j),c!==null&&(ha(c,w,j,I),l_(c,w,j)),j}function k_(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function OP(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<h?m:h}}function iw(c,h){OP(c,h),(c=c.alternate)&&OP(c,h)}function MV(){return null}var LP=typeof reportError=="function"?reportError:function(c){console.error(c)};function sw(c){this._internalRoot=c}O_.prototype.render=sw.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(t(409));b_(c,h,null,null)},O_.prototype.unmount=sw.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;uu(function(){b_(null,c,null,null)}),h[bo]=null}};function O_(c){this._internalRoot=c}O_.prototype.unstable_scheduleHydration=function(c){if(c){var h=f0();c={blockedOn:null,target:c,priority:h};for(var m=0;m<cs.length&&h!==0&&h<cs[m].priority;m++);cs.splice(m,0,c),m===0&&Vh(c)}};function aw(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function L_(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function NP(){}function bV(c,h,m,y,w){if(w){if(typeof y=="function"){var I=y;y=function(){var we=k_(j);I.call(we)}}var j=kP(h,y,c,0,null,!1,!1,"",NP);return c._reactRootContainer=j,c[bo]=j.current,S0(c.nodeType===8?c.parentNode:c),uu(),j}for(;w=c.lastChild;)c.removeChild(w);if(typeof y=="function"){var ee=y;y=function(){var we=k_(ie);ee.call(we)}}var ie=rw(c,0,!1,null,null,!1,!1,"",NP);return c._reactRootContainer=ie,c[bo]=ie.current,S0(c.nodeType===8?c.parentNode:c),uu(function(){b_(h,ie,m,y)}),ie}function N_(c,h,m,y,w){var I=m._reactRootContainer;if(I){var j=I;if(typeof w=="function"){var ee=w;w=function(){var ie=k_(j);ee.call(ie)}}b_(h,j,c,w)}else j=bV(m,h,c,w,y);return k_(j)}u0=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var m=Kt(h.pendingLanes);m!==0&&(c0(h,m|1),Gi(h,Ge()),(zt&6)===0&&(ff=Ge()+500,Rl()))}break;case 13:uu(function(){var y=No(c,1);if(y!==null){var w=Ti();ha(y,c,1,w)}}),iw(c,1)}},Dh=function(c){if(c.tag===13){var h=No(c,134217728);if(h!==null){var m=Ti();ha(h,c,134217728,m)}iw(c,134217728)}},h0=function(c){if(c.tag===13){var h=Ol(c),m=No(c,h);if(m!==null){var y=Ti();ha(m,c,h,y)}iw(c,h)}},f0=function(){return jt},d0=function(c,h){var m=jt;try{return jt=c,h()}finally{jt=m}},Ar=function(c,h,m){switch(h){case"input":if(De(c,m),h=m.name,m.type==="radio"&&h!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<m.length;h++){var y=m[h];if(y!==c&&y.form===c.form){var w=Qp(y);if(!w)throw Error(t(90));We(y),De(y,w)}}}break;case"textarea":fr(c,m);break;case"select":h=m.value,h!=null&&wn(c,!!m.multiple,h,!1)}},Ni=ZE,dr=uu;var kV={usingClientEntryPoint:!1,Events:[R0,Qh,Qp,os,On,ZE]},G0={findFiberByHostInstance:nu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OV={bundleType:G0.bundleType,version:G0.version,rendererPackageName:G0.rendererPackageName,rendererConfig:G0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ye(c),c===null?null:c.stateNode},findFiberByHostInstance:G0.findFiberByHostInstance||MV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var D_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!D_.isDisabled&&D_.supportsFiber)try{ls=D_.inject(OV),Yn=D_}catch{}}return Ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kV,Ui.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aw(h))throw Error(t(200));return PV(c,h,null,m)},Ui.createRoot=function(c,h){if(!aw(c))throw Error(t(299));var m=!1,y="",w=LP;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(y=h.identifierPrefix),h.onRecoverableError!==void 0&&(w=h.onRecoverableError)),h=rw(c,1,!1,null,null,m,!1,y,w),c[bo]=h.current,S0(c.nodeType===8?c.parentNode:c),new sw(h)},Ui.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=ye(h),c=c===null?null:c.stateNode,c},Ui.flushSync=function(c){return uu(c)},Ui.hydrate=function(c,h,m){if(!L_(h))throw Error(t(200));return N_(null,c,h,!0,m)},Ui.hydrateRoot=function(c,h,m){if(!aw(c))throw Error(t(405));var y=m!=null&&m.hydratedSources||null,w=!1,I="",j=LP;if(m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onRecoverableError!==void 0&&(j=m.onRecoverableError)),h=kP(h,null,c,1,m??null,w,!1,I,j),c[bo]=h.current,S0(c),y)for(c=0;c<y.length;c++)m=y[c],w=m._getVersion,w=w(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,w]:h.mutableSourceEagerHydrationData.push(m,w);return new O_(h)},Ui.render=function(c,h,m){if(!L_(h))throw Error(t(200));return N_(null,c,h,!1,m)},Ui.unmountComponentAtNode=function(c){if(!L_(c))throw Error(t(40));return c._reactRootContainer?(uu(function(){N_(null,null,c,!1,function(){c._reactRootContainer=null,c[bo]=null})}),!0):!1},Ui.unstable_batchedUpdates=ZE,Ui.unstable_renderSubtreeIntoContainer=function(c,h,m,y){if(!L_(m))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return N_(c,h,m,!1,y)},Ui.version="18.3.1-next-f1338f8080-20240426",Ui}var zP;function GV(){if(zP)return cw.exports;zP=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cw.exports=BV(),cw.exports}var $P;function UV(){if($P)return F_;$P=1;var n=GV();return F_.createRoot=n.createRoot,F_.hydrateRoot=n.hydrateRoot,F_}var zV=UV();const $V=ES(zV);var ve=$m();const WV=ES(ve),$i={ADD:"add",REMOVE:"remove"},_d={PROPERTYCHANGE:"propertychange"},St={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Sv{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function HV(n,e,t){let r,i;t=t||Ho;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function Ho(n,e){return n>e?1:n<e?-1:0}function KV(n,e){return n<e?1:n>e?-1:0}function Iv(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function qV(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function no(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function Gc(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function XV(n,e,t){const r=e||Ho;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function Yg(){return!0}function Av(){return!1}function Zg(){}function jO(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!Gc(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function BO(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Wm(n){for(const e in n)delete n[e]}function Ku(n){let e;for(e in n)return!1;return!e}class yo{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let Hm=class extends Sv{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new yo(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let l;for(let u=0,f=i.length;u<f;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(s):l=i[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[r]===0){let u=o[r];for(delete o[r];u--;)this.removeEventListener(r,Zg);delete a[r]}return l}disposeInternal(){this.listeners_&&Wm(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Zg,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function Ut(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function X1(n,e,t,r){return Ut(n,e,t,r,!0)}function xn(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Wm(n))}class Km extends Hm{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(St.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ut(this,e[s],t);return i}return Ut(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=X1(this,e[s],t)}else r=X1(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)YV(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Km.prototype.on;Km.prototype.once;Km.prototype.un;function YV(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)xn(n[e]);else xn(n)}function wt(){throw new Error("Unimplemented abstract method.")}let ZV=0;function Ht(n){return n.ol_uid||(n.ol_uid=String(++ZV))}class WP extends yo{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class vo extends Km{constructor(e){super(),this.on,this.once,this.un,Ht(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new WP(r,e,t)),r=_d.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new WP(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Ku(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const HP={LENGTH:"length"};class V_ extends yo{constructor(e,t,r){super(e),this.element=t,this.index=r}}class qs extends vo{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(HP.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new V_($i.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new V_($i.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new V_($i.REMOVE,i,e)),this.dispatchEvent(new V_($i.ADD,t,e))}updateLength_(){this.set(HP.LENGTH,this.array_.length)}assertUnique_(e,t){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function tn(n,e){if(!n)throw new Error(e)}let qu=class GO extends vo{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new GO(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(xn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ut(e,St.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?QV(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function QV(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(tn(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const br={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function KP(n){const e=As();for(let t=0,r=n.length;t<r;++t)wg(e,n[t]);return e}function Qg(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function UO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function vh(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Xu(n,e){return wS(n,e[0],e[1])}function rc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function wS(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function L2(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let l=br.UNKNOWN;return a<t?l=l|br.LEFT:a>i&&(l=l|br.RIGHT),o<r?l=l|br.BELOW:o>s&&(l=l|br.ABOVE),l===br.UNKNOWN&&(l=br.INTERSECTING),l}function As(){return[1/0,1/0,-1/0,-1/0]}function Tc(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function qm(n){return Tc(1/0,1/0,-1/0,-1/0,n)}function zO(n,e){const t=n[0],r=n[1];return Tc(t,r,t,r,e)}function TS(n,e,t,r,i){const s=qm(i);return WO(s,n,e,t,r)}function yd(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function $O(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function wg(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function WO(n,e,t,r,i){for(;t<r;t+=i)JV(n,e[t],e[t+1]);return n}function JV(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function HO(n,e){let t;return t=e(Rv(n)),t||(t=e(Cv(n)),t)||(t=e(Pv(n)),t)||(t=e(xh(n)),t)?t:!1}function N2(n){let e=0;return $d(n)||(e=Nt(n)*or(n)),e}function Rv(n){return[n[0],n[1]]}function Cv(n){return[n[2],n[1]]}function uo(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function ej(n,e){let t;if(e==="bottom-left")t=Rv(n);else if(e==="bottom-right")t=Cv(n);else if(e==="top-left")t=xh(n);else if(e==="top-right")t=Pv(n);else throw new Error("Invalid corner");return t}function Y1(n,e,t,r,i){const[s,a,o,l,u,f,d,g]=KO(n,e,t,r);return Tc(Math.min(s,o,u,d),Math.min(a,l,f,g),Math.max(s,o,u,d),Math.max(a,l,f,g),i)}function KO(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),l=i*a,u=i*o,f=s*a,d=s*o,g=n[0],p=n[1];return[g-l+d,p-u-f,g-l-d,p-u+f,g+l-d,p+u+f,g+l+d,p+u-f,g-l+d,p-u-f]}function or(n){return n[3]-n[1]}function Ko(n,e,t){const r=t||As();return Ri(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):qm(r),r}function xh(n){return[n[0],n[3]]}function Pv(n){return[n[2],n[3]]}function Nt(n){return n[2]-n[0]}function Ri(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function $d(n){return n[2]<n[0]||n[3]<n[1]}function tj(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function nj(n,e,t){let r=!1;const i=L2(n,e),s=L2(n,t);if(i===br.INTERSECTING||s===br.INTERSECTING)r=!0;else{const a=n[0],o=n[1],l=n[2],u=n[3],f=e[0],d=e[1],g=t[0],p=t[1],x=(p-d)/(g-f);let v,E;s&br.ABOVE&&!(i&br.ABOVE)&&(v=g-(p-u)/x,r=v>=a&&v<=l),!r&&s&br.RIGHT&&!(i&br.RIGHT)&&(E=p-(g-l)*x,r=E>=o&&E<=u),!r&&s&br.BELOW&&!(i&br.BELOW)&&(v=g-(p-o)/x,r=v>=a&&v<=l),!r&&s&br.LEFT&&!(i&br.LEFT)&&(E=p-(g-a)*x,r=E>=o&&E<=u)}return r}function qO(n,e){const t=e.getExtent(),r=uo(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Nt(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function XO(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];qO(n,e);const i=Nt(r);if(Nt(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function In(n,e,t){return Math.min(Math.max(n,e),t)}function rj(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const l=((n-t)*a+(e-r)*o)/(a*a+o*o);l>1?(t=i,r=s):l>0&&(t+=a*l,r+=o*l)}return Bu(n,e,t,r)}function Bu(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function ij(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const l=Math.abs(n[o][r]);l>s&&(s=l,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const l=-n[o][r]/n[r][r];for(let u=r;u<e+1;u++)r==u?n[o][u]=0:n[o][u]+=l*n[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function qP(n){return n*180/Math.PI}function dc(n){return n*Math.PI/180}function gc(n,e){const t=n%e;return t*e<0?t+e:t}function vs(n,e,t){return n+t*(e-n)}function Xm(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Z1(n,e){return Math.round(Xm(n,e))}function j_(n,e){return Math.floor(Xm(n,e))}function ic(n,e){return Math.ceil(Xm(n,e))}function D2(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function YO(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const s=parseInt(t[i]||"0",10),a=parseInt(r[i]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function sj(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Q1(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function SS(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function aj(n,e){return n[0]*=e,n[1]*=e,n}function ZO(n,e){if(e.canWrapX()){const t=Nt(e.getExtent()),r=QO(n,e,t);r&&(n[0]-=r*t)}return n}function QO(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Nt(r),i=Math.floor((n[0]-r[0])/t)),i}function JO(...n){console.warn(...n)}const vd={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Mv=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||vd[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Ym=6378137,$f=Math.PI*Ym,oj=[-$f,-$f,$f,$f],lj=[-180,-85,180,85],B_=Ym*Math.log(Math.tan(Math.PI/2));class gf extends Mv{constructor(e){super({code:e,units:"m",extent:oj,global:!0,worldExtent:lj,getPointResolution:function(t,r){return t/Math.cosh(r[1]/Ym)}})}}const XP=[new gf("EPSG:3857"),new gf("EPSG:102100"),new gf("EPSG:102113"),new gf("EPSG:900913"),new gf("http://www.opengis.net/def/crs/EPSG/0/3857"),new gf("http://www.opengis.net/gml/srs/epsg.xml#3857")];function cj(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=$f*n[s]/180;let a=Ym*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>B_?a=B_:a<-B_&&(a=-B_),e[s+1]=a}return e}function uj(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/$f,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Ym))/Math.PI-90;return e}const hj=6378137,YP=[-180,-90,180,90],fj=Math.PI*hj/180;class gu extends Mv{constructor(e,t){super({code:e,units:"degrees",extent:YP,axisOrientation:t,global:!0,metersPerUnit:fj,worldExtent:YP})}}const ZP=[new gu("CRS:84"),new gu("EPSG:4326","neu"),new gu("urn:ogc:def:crs:OGC:1.3:CRS84"),new gu("urn:ogc:def:crs:OGC:2:84"),new gu("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new gu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new gu("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let F2={};function T1(n){return F2[n]||F2[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function dj(n,e){F2[n]=e}let nd={};function Yu(n,e,t){const r=n.getCode(),i=e.getCode();r in nd||(nd[r]={}),nd[r][i]=t}function S1(n,e){return n in nd&&e in nd[n]?nd[n][e]:null}const J1=.9996,Qs=.00669438,bv=Qs*Qs,kv=bv*Qs,Ou=Qs/(1-Qs),QP=Math.sqrt(1-Qs),xd=(1-QP)/(1+QP),eL=xd*xd,IS=eL*xd,AS=IS*xd,tL=AS*xd,nL=1-Qs/4-3*bv/64-5*kv/256,gj=3*Qs/8+3*bv/32+45*kv/1024,mj=15*bv/256+45*kv/1024,pj=35*kv/3072,_j=3/2*xd-27/32*IS+269/512*tL,yj=21/16*eL-55/32*AS,vj=151/96*IS-417/128*tL,xj=1097/512*AS,ey=6378137;function Ej(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/J1/(ey*nL),o=a+_j*Math.sin(2*a)+yj*Math.sin(4*a)+vj*Math.sin(6*a)+xj*Math.sin(8*a),l=Math.sin(o),u=l*l,f=Math.cos(o),d=l/f,g=d*d,p=g*g,x=1-Qs*u,v=Math.sqrt(1-Qs*u),E=ey/v,R=(1-Qs)/x,S=Ou*f**2,C=S*S,O=r/(E*J1),N=O*O,z=N*O,M=z*O,P=M*O,b=P*O,D=o-d/R*(N/2-M/24*(5+3*g+10*S-4*C-9*Ou))+b/720*(61+90*g+298*S+45*p-252*Ou-3*C);let B=(O-z/6*(1+2*g+S)+P/120*(5-2*S+28*g-3*C+8*Ou+24*p))/f;return B=D2(B+dc(rL(t.number)),-Math.PI,Math.PI),[qP(B),qP(D)]}const JP=-80,e4=84,wj=-180,Tj=180;function Sj(n,e,t){n=D2(n,wj,Tj),e<JP?e=JP:e>e4&&(e=e4);const r=dc(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,l=o*o,u=dc(n),f=rL(t.number),d=dc(f),g=ey/Math.sqrt(1-Qs*i**2),p=Ou*s**2,x=s*D2(u-d,-Math.PI,Math.PI),v=x*x,E=v*x,R=E*x,S=R*x,C=S*x,O=ey*(nL*r-gj*Math.sin(2*r)+mj*Math.sin(4*r)-pj*Math.sin(6*r)),N=J1*g*(x+E/6*(1-o+p)+S/120*(5-18*o+l+72*p-58*Ou))+5e5;let z=J1*(O+g*a*(v/2+R/24*(5-o+9*p+4*p**2)+C/720*(61-58*o+l+600*p-330*Ou)));return t.north||(z+=1e7),[N,z]}function rL(n){return(n-1)*6-180+3}const Ij=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function iL(n){let e=0;for(const i of Ij){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function t4(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],u=t[o+1],f=n(l,u,e);r[o]=f[0],r[o+1]=f[1]}return r}}function Aj(n){return iL(n)?new Mv({code:n,units:"m"}):null}function Rj(n){const e=iL(n.getCode());return e?{forward:t4(Sj,e),inverse:t4(Ej,e)}:null}const Cj=63710088e-1;function n4(n,e,t){t=t||Cj;const r=dc(n[1]),i=dc(e[1]),s=(i-r)/2,a=dc(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const Pj=[Rj],Mj=[Aj];let V2=!0;function sL(n){V2=!1}function RS(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function ty(n){dj(n.getCode(),n),Yu(n,n,RS)}function bj(n){n.forEach(ty)}function En(n){if(typeof n!="string")return n;const e=T1(n);if(e)return e;for(const t of Mj){const r=t(n);if(r)return r}return null}function ny(n,e,t,r){n=En(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/vd[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=PS(n,En("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=o(u,u,2);const f=n4(u.slice(0,2),u.slice(2,4)),d=n4(u.slice(4,6),u.slice(6,8));i=(f+d)/2}const l=r?vd[r]:n.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function j2(n){bj(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Yu(e,t,RS)})})}function kj(n,e,t,r){n.forEach(function(i){e.forEach(function(s){Yu(i,s,t),Yu(s,i,r)})})}function CS(n,e){return n?typeof n=="string"?En(n):n:En(e)}function B2(n){return(function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),l=o.length;for(let u=0,f=i;u<f;++u)t[a+u]=u>=l?e[a+u]:o[u]}return t})}function Oj(n,e,t,r){const i=En(n),s=En(e);Yu(i,s,B2(t)),Yu(s,i,B2(r))}function Sc(n,e){return sL(),Zm(n,"EPSG:4326","EPSG:3857")}function on(n,e){const t=Zm(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=gc(r+180,360)-180),t}function Gu(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||PS(n,e)===RS)&&t}function PS(n,e){const t=n.getCode(),r=e.getCode();let i=S1(t,r);if(i)return i;let s=null,a=null;for(const l of Pj)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=fw(s.inverse,a.forward);else{const l=S1(t,o);l&&(i=fw(l,a.forward))}else{const l=S1(o,r);l&&(i=fw(s.inverse,l))}return i&&(ty(n),ty(e),Yu(n,e,i)),i}function fw(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function Jg(n,e){const t=En(n),r=En(e);return PS(t,r)}function Zm(n,e,t){const r=Jg(e,t);if(!r){const i=En(e).getCode(),s=En(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}function G2(n,e){return n}function Go(n,e){return V2&&!Q1(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(V2=!1,JO("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function aL(n,e){return n}function Qa(n,e){return n}function r4(n,e,t){return function(r){let i,s;if(n.canWrapX()){const a=n.getExtent(),o=Nt(a);r=r.slice(0),s=QO(r,n,o),s&&(r[0]=r[0]-s*o),r[0]=In(r[0],a[0],a[2]),r[1]=In(r[1],a[1],a[3]),i=t(r)}else i=t(r);return s&&e.canWrapX()&&(i[0]+=s*Nt(e.getExtent())),i}}function Lj(){j2(XP),j2(ZP),kj(ZP,XP,cj,uj)}Lj();new Array(6);function Ia(){return[1,0,0,1,0,0]}function Nj(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function xr(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function ho(n,e,t,r,i,s,a,o){const l=Math.sin(s),u=Math.cos(s);return n[0]=r*u,n[1]=i*l,n[2]=-r*l,n[3]=i*u,n[4]=a*r*u-o*r*l+e,n[5]=a*i*l+o*i*u+t,n}function oL(n,e){const t=Dj(e);tn(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*l-a*o)/t,n[5]=-(r*l-i*o)/t,n}function Dj(n){return n[0]*n[3]-n[1]*n[2]}const Fj=[1e5,1e5,1e5,1e5,2,2];function Vj(n){return"matrix("+n.join(", ")+")"}function U2(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function jj(n,e){const t=U2(n),r=U2(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*Fj[i])!==0)return!1;return!0}function mc(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=r){const u=n[l],f=n[l+1];s[o++]=i[0]*u+i[2]*f+i[4],s[o++]=i[1]*u+i[3]*f+i[5];for(let d=2;d<a;d++)s[o++]=n[l+d]}return s&&s.length!=o&&(s.length=o),s}function lL(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),l=Math.sin(i),u=s[0],f=s[1];let d=0;for(let g=e;g<t;g+=r){const p=n[g]-u,x=n[g+1]-f;a[d++]=u+p*o-x*l,a[d++]=f+p*l+x*o;for(let v=g+2;v<g+r;++v)a[d++]=n[v]}return a&&a.length!=d&&(a.length=d),a}function Bj(n,e,t,r,i,s,a,o){o=o||[];const l=a[0],u=a[1];let f=0;for(let d=e;d<t;d+=r){const g=n[d]-l,p=n[d+1]-u;o[f++]=l+i*g,o[f++]=u+s*p;for(let x=d+2;x<d+r;++x)o[f++]=n[x]}return o&&o.length!=f&&(o.length=f),o}function Gj(n,e,t,r,i,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=r){a[o++]=n[l]+i,a[o++]=n[l+1]+s;for(let u=l+2;u<l+r;++u)a[o++]=n[u]}return a&&a.length!=o&&(a.length=o),a}const i4=Ia(),Uj=[NaN,NaN];class cL extends vo{constructor(){super(),this.extent_=As(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=jO((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return wt()}closestPointXY(e,t,r,i){return wt()}containsXY(e,t){return this.closestPointXY(e,t,Uj,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return wt()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&qm(t),this.extentRevision_=this.getRevision()}return tj(this.extent_,e)}rotate(e,t){wt()}scale(e,t,r){wt()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return wt()}getType(){return wt()}applyTransform(e){wt()}intersectsExtent(e){return wt()}translate(e,t){wt()}transform(e,t){const r=En(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const l=r.getExtent(),u=r.getWorldExtent(),f=or(u)/or(l);ho(i4,u[0],u[3],f,-f,0,0,0);const d=mc(s,0,s.length,o,i4,a),g=Jg(r,t);return g?g(d,d,o):d}:Jg(r,t);return this.applyTransform(i),this}}class Eh extends cL{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return TS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return wt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=s4(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){wt()}setLayout(e,t,r){let i;if(e)i=s4(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=wh(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();lL(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=uo(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();Bj(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();Gj(r,0,r.length,i,e,t,r),this.changed()}}}function wh(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function s4(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function zj(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return mc(r,0,r.length,i,e,t)}function a4(n,e,t,r,i,s,a){const o=n[e],l=n[e+1],u=n[t]-o,f=n[t+1]-l;let d;if(u===0&&f===0)d=e;else{const g=((i-o)*u+(s-l)*f)/(u*u+f*f);if(g>1)d=t;else if(g>0){for(let p=0;p<r;++p)a[p]=vs(n[e+p],n[t+p],g);a.length=r;return}else d=e}for(let g=0;g<r;++g)a[g]=n[d+g];a.length=r}function MS(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],l=n[e+1],u=Bu(s,a,o,l);u>i&&(i=u),s=o,a=l}return i}function bS(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=MS(n,e,o,r,i),e=o}return i}function $j(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=bS(n,e,o,r,i),e=o[o.length-1]}return i}function kS(n,e,t,r,i,s,a,o,l,u,f){if(e==t)return u;let d,g;if(i===0){if(g=Bu(a,o,n[e],n[e+1]),g<u){for(d=0;d<r;++d)l[d]=n[e+d];return l.length=r,g}return u}f=f||[NaN,NaN];let p=e+r;for(;p<t;)if(a4(n,p-r,p,r,a,o,f),g=Bu(a,o,f[0],f[1]),g<u){for(u=g,d=0;d<r;++d)l[d]=f[d];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(g)-Math.sqrt(u))/i|0,1);if(s&&(a4(n,t-r,e,r,a,o,f),g=Bu(a,o,f[0],f[1]),g<u)){for(u=g,d=0;d<r;++d)l[d]=f[d];l.length=r}return u}function OS(n,e,t,r,i,s,a,o,l,u,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const p=t[d];u=kS(n,e,p,r,i,s,a,o,l,u,f),e=p}return u}function Wj(n,e,t,r,i,s,a,o,l,u,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const p=t[d];u=OS(n,e,p,r,i,s,a,o,l,u,f),e=p[p.length-1]}return u}function Hj(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Ov(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function Qm(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Ov(n,e,t[a],r);i[s++]=l,e=l}return i.length=s,i}function uL(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Qm(n,e,t[a],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function sc(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function em(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=sc(n,e,l,r,i[s]),e=l}return i.length=s,i}function z2(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=l.length===1&&l[0]===e?[]:em(n,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function ry(n,e,t,r,i,s,a){let o,l;const u=(t-e)/r;if(u===1)o=e;else if(u===2)o=e,l=i;else if(u!==0){let f=n[e],d=n[e+1],g=0;const p=[0];for(let E=e+r;E<t;E+=r){const R=n[E],S=n[E+1];g+=Math.sqrt((R-f)*(R-f)+(S-d)*(S-d)),p.push(g),f=R,d=S}const x=i*g,v=HV(p,x);v<0?(l=(x-p[-v-2])/(p[-v-1]-p[-v-2]),o=e+(-v-2)*r):o=e+v*r}a=a>1?a:2,s=s||new Array(a);for(let f=0;f<a;++f)s[f]=o===void 0?NaN:l===void 0?n[o+f]:vs(n[o+f],n[o+r+f],l);return s}function $2(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,l=t/r;for(;o<l;){const g=o+l>>1;i<n[(g+1)*r-1]?l=g:o=g+1}const u=n[o*r-1];if(i==u)return n.slice((o-1)*r,(o-1)*r+r);const f=n[(o+1)*r-1],d=(i-u)/(f-u);a=[];for(let g=0;g<r-1;++g)a.push(vs(n[(o-1)*r+g],n[o*r+g],d));return a.push(i),a}function Kj(n,e,t,r,i,s,a){if(a)return $2(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let l=0,u=t.length;l<u;++l){const f=t[l];if(e!=f){if(i<n[e+r-1])return null;if(i<=n[f-1])return $2(n,e,f,r,i,!1);e=f}}return null}function qj(n,e,t,r,i){return!HO(i,function(a){return!Lu(n,e,t,r,a[0],a[1])})}function Lu(n,e,t,r,i,s){let a=0,o=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const u=n[e],f=n[e+1];l<=s?f>s&&(u-o)*(s-l)-(i-o)*(f-l)>0&&a++:f<=s&&(u-o)*(s-l)-(i-o)*(f-l)<0&&a--,o=u,l=f}return a!==0}function LS(n,e,t,r,i,s){if(t.length===0||!Lu(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(Lu(n,t[a-1],t[a],r,i,s))return!1;return!0}function Xj(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const l=t[a];if(LS(n,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function hL(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Lv(n,e,t,r,i,s){return s=s??WO(As(),n,e,t,r),Ri(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:hL(n,e,t,r,function(a,o){return nj(i,a,o)}):!1}function Yj(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(Lv(n,e,t[s],r,i))return!0;e=t[s]}return!1}function fL(n,e,t,r,i){return!!(Lv(n,e,t,r,i)||Lu(n,e,t,r,i[0],i[1])||Lu(n,e,t,r,i[0],i[3])||Lu(n,e,t,r,i[2],i[1])||Lu(n,e,t,r,i[2],i[3]))}function dL(n,e,t,r,i){if(!fL(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(qj(n,t[s-1],t[s],r,i)&&!Lv(n,t[s-1],t[s],r,i))return!1;return!0}function Zj(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(dL(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function NS(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const l=n[o],u=n[o+1];a+=Math.sqrt((l-i)*(l-i)+(u-s)*(u-s)),i=l,s=u}return a}function Nv(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[e,t-r];let f=0;for(;u.length>0;){const d=u.pop(),g=u.pop();let p=0;const x=n[g],v=n[g+1],E=n[d],R=n[d+1];for(let S=g+r;S<d;S+=r){const C=n[S],O=n[S+1],N=rj(C,O,x,v,E,R);N>p&&(f=S,p=N)}p>i&&(l[(f-e)/r]=1,g+r<f&&u.push(g,f),f+r<d&&u.push(f,d))}for(let d=0;d<o;++d)l[d]&&(s[a++]=n[e+d*r],s[a++]=n[e+d*r+1]);return a}function gL(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l];a=Nv(n,e,f,r,i,s,a),o.push(a),e=f}return a}function yu(n,e){return e*Math.round(n/e)}function Qj(n,e,t,r,i,s,a){if(e==t)return a;let o=yu(n[e],i),l=yu(n[e+1],i);e+=r,s[a++]=o,s[a++]=l;let u,f;do if(u=yu(n[e],i),f=yu(n[e+1],i),e+=r,e==t)return s[a++]=u,s[a++]=f,a;while(u==o&&f==l);for(;e<t;){const d=yu(n[e],i),g=yu(n[e+1],i);if(e+=r,d==u&&g==f)continue;const p=u-o,x=f-l,v=d-o,E=g-l;if(p*E==x*v&&(p<0&&v<p||p==v||p>0&&v>p)&&(x<0&&E<x||x==E||x>0&&E>x)){u=d,f=g;continue}s[a++]=u,s[a++]=f,o=u,l=f,u=d,f=g}return s[a++]=u,s[a++]=f,a}function DS(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l];a=Qj(n,e,f,r,i,s,a),o.push(a),e=f}return a}function Jj(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l],d=[];a=DS(n,e,f,r,i,s,a,d),o.push(d),e=f[f.length-1]}return a}class Zu extends Eh{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){no(this.flatCoordinates,e),this.changed()}clone(){const e=new Zu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<vh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(MS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return hL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,$2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return sc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return ry(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return NS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Nv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Zu(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Lv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ov(this.flatCoordinates,0,e,this.stride),this.changed()}}let Ic=class mL extends Eh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new mL(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=Bu(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let l=0;l<o;++l)r[l]=s[l];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return zO(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return wS(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Hj(this.flatCoordinates,0,e,this.stride),this.changed()}};const Xs={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Qu=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",eB=Qu.includes("safari")&&!Qu.includes("chrom");eB&&(Qu.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Qu));const tB=Qu.includes("webkit")&&!Qu.includes("edge"),pL=Qu.includes("macintosh"),nB=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ts=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,FS=typeof Image<"u"&&Image.prototype.decode,_L=typeof createImageBitmap=="function",yL=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),ut={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function wr(n,e,t,r){let i;return t&&t.length?i=t.shift():Ts?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let dw;function iy(){return dw||(dw=wr(1,1)),dw}function Dv(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function o4(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function rB(n){for(;n.lastChild;)n.lastChild.remove()}function iB(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function vL(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function ac(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}const VS=[NaN,NaN,NaN,0];let gw;function sB(){return gw||(gw=wr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),gw}const aB=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,oB=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,lB=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,cB=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function G_(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function Tg(n){throw new Error('failed to parse "'+n+'" as color')}function xL(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(oB)||n.match(aB)||n.match(lB);if(s){const a=s[4],o=100/255;return[In(G_(s[1],o)+.5|0,0,255),In(G_(s[2],o)+.5|0,0,255),In(G_(s[3],o)+.5|0,0,255),a!==void 0?In(G_(a,100),0,1):1]}Tg(n)}if(n.startsWith("#")){if(cB.test(n)){const s=n.substring(1),a=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,u=s.length;l<u;l+=a){let f=parseInt(s.substring(l,l+a),16);a===1&&(f+=f<<4),o[l/a]=f}return o[3]=o[3]/255,o}Tg(n)}const e=sB();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&Tg(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return xL(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Xm(i[3]/255,3),i}function uB(n){return typeof n=="string"?n:BS(n)}const hB=1024,z0={};let mw=0;function fB(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function pw(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function _w(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function yw(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function vw(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function l4(n){const e=yw(n[0]),t=yw(n[1]),r=yw(n[2]),i=vw(e*.222488403+t*.716873169+r*.06060791),s=500*(vw(e*.452247074+t*.399439023+r*.148375274)-i),a=200*(i-vw(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(a,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+a*a),o<0?o+360:o,n[3]]}function dB(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=_w(e),s=_w(e+t/500*Math.cos(r)),a=_w(e-t/200*Math.sin(r)),o=pw(s*3.021973625-i*1.617392459-a*.404875592),l=pw(s*-.943766287+i*1.916279586+a*.027607165),u=pw(s*.069407491-i*.22898585+a*1.159737864);return[In(o+.5|0,0,255),In(l+.5|0,0,255),In(u+.5|0,0,255),n[3]]}function jS(n){if(n==="none")return VS;if(z0.hasOwnProperty(n))return z0[n];if(mw>=hB){let t=0;for(const r in z0)(t++&3)===0&&(delete z0[r],--mw)}const e=xL(n);e.length!==4&&Tg(n);for(const t of e)isNaN(t)&&Tg(n);return z0[n]=e,++mw,e}function Ed(n){return Array.isArray(n)?n:jS(n)}function BS(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class EL extends Hm{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?ut.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(St.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ut.IDLE&&this.loader){this.state=ut.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;BO(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||_L&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=ut.LOADED}).catch(r=>{this.state=ut.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function gB(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[X1(r,St.LOAD,function(){a=!0,s||e()})];return r.src&&FS?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(a?e():t())})):o.push(X1(r,St.ERROR,t)),function(){i=!1,o.forEach(xn)}}function mB(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function wL(n,e){return e&&(n.src=e),n.src&&FS?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):mB(n)}function TL(n,e){return e&&(n.src=e),n.src&&FS&&_L?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):wL(n)}class pB{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=xw(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=xw(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=xw(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===ut.IDLE&&i.load(),i.getImageState()===ut.LOADING?i.ready().then(()=>{this.patternCache_[a]=iy().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=iy().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function xw(n,e,t){const r=t?Ed(t):"null";return e+":"+n+":"+r}const Ys=new pB;let $0=null;class SL extends Hm{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?ut.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ut.LOADED){$0||($0=wr(1,1,void 0,{willReadFrequently:!0})),$0.drawImage(this.image_,0,0);try{$0.getImageData(0,0,1,1),this.tainted_=!1}catch{$0=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(St.CHANGE)}handleImageError_(){this.imageState_=ut.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ut.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=wr(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ut.IDLE){this.image_||this.initializeImage_(),this.imageState_=ut.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&wL(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ut.LOADED)return;const t=this.image_,r=wr(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=uB(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ut.LOADED||this.imageState_===ut.ERROR)e();else{const t=()=>{(this.imageState_===ut.LOADED||this.imageState_===ut.ERROR)&&(this.removeEventListener(St.CHANGE,t),e())};this.addEventListener(St.CHANGE,t)}})),this.ready_}}function sy(n,e,t,r,i,s){let a=e===void 0?void 0:Ys.get(e,t,i);return a||(a=new SL(n,n&&"src"in n?n.src||void 0:e,t,r,i),Ys.set(e,t,i,a,s)),s&&a&&!Ys.getPattern(e,t,i)&&Ys.set(e,t,i,a,s),a}function Ja(n){return n?Array.isArray(n)?BS(n):typeof n=="object"&&"src"in n?_B(n):n:null}function _B(n){if(!n.offset||!n.size)return Ys.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Ys.getPattern(e,void 0,n.color);if(t)return t;const r=Ys.get(n.src,"anonymous",null);if(r.getImageState()!==ut.LOADED)return null;const i=wr(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),sy(i.canvas,e,void 0,ut.LOADED,n.color,!0),Ys.getPattern(e,void 0,n.color)}class IL{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const U_="ol-hidden",Jm="ol-unselectable",GS="ol-control",c4="ol-collapsed",yB=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),u4=["style","variant","weight","size","lineHeight","family"],W2={normal:400,bold:700},H2=function(n){const e=n.match(yB);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=u4.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[u4[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in W2&&(t.weight=W2[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t},AL="10px sans-serif",Wi="#000",wd="round",qo=[],Xo=0,Td="round",tm=10,nm="#000",rm="center",ay="middle",Nu=[0,0,0,0],im=1,bf=new vo;let W0=null,h4;const K2={},vB=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function xB(n,e,t){return`${n} ${e} 16px "${t}"`}const EB=(function(){let e,t;async function r(s){await t.ready;const a=await t.load(s);if(a.length===0)return!1;const o=H2(s),l=o.families[0].toLowerCase(),u=o.weight;return a.some(f=>{const d=f.family.replace(/^['"]|['"]$/g,"").toLowerCase(),g=W2[f.weight]||f.weight;return d===l&&f.style===o.style&&g==u})}async function i(){await t.ready;let s=!0;const a=bf.getProperties(),o=Object.keys(a).filter(l=>a[l]<100);for(let l=o.length-1;l>=0;--l){const u=o[l];let f=a[u];f<100&&(await r(u)?(Wm(K2),bf.set(u,100)):(f+=10,bf.set(u,f,!0),f<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=Ts?self.fonts:document.fonts);const a=H2(s);if(!a)return;const o=a.families;let l=!1;for(const u of o){if(vB.has(u))continue;const f=xB(a.style,a.weight,u);bf.get(f)===void 0&&(bf.set(f,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),wB=(function(){let n;return function(e){let t=K2[e];if(t==null){if(Ts){const r=H2(e),i=RL(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);K2[e]=t}return t}})();function RL(n,e){return W0||(W0=wr(1,1)),n!=h4&&(W0.font=n,h4=W0.font),W0.measureText(e)}function CL(n,e){return RL(n,e).width}function f4(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,CL(n,s)),0);return t[e]=r,r}function TB(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,l=0;for(let u=0,f=e.length;u<=f;u+=2){const d=e[u];if(d===`
`||u===f){s=Math.max(s,a),i.push(a),a=0,o+=l,l=0;continue}const g=e[u+1]||n.font,p=CL(g,d);t.push(p),a+=p;const x=wB(g);r.push(x),l=Math.max(l,x)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function SB(n,e,t,r,i,s,a,o,l,u,f){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=d=>d.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,u),n.scale(f[0],f[1]),IB(r,n)):f[0]<0||f[1]<0?(n.translate(l,u),n.scale(f[0],f[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,l,u,a*f[0],o*f[1]),n.restore()}function IB(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class AB extends IL{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Xm(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ia()}drawImages_(e,t,r,i){if(!this.image_)return;const s=mc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let f=0,d=s.length;f<d;f+=2){const g=s[f]-this.imageAnchorX_,p=s[f+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const x=g+this.imageAnchorX_,v=p+this.imageAnchorY_;ho(o,x,v,1,1,u,-x,-v),a.save(),a.transform.apply(a,o),a.translate(x,v),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=mc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=mc(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ri(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=zj(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ri(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Ri(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(i,s,a[l],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ri(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ri(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];i=this.drawRings_(r,i,u,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),Gc(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:rm;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Ja(r||Wi)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),f=s||qo;this.strokeState_={lineCap:i!==void 0?i:wd,lineDash:this.pixelRatio_===1?f:f.map(d=>d*this.pixelRatio_),lineDashOffset:(a||Xo)*this.pixelRatio_,lineJoin:o!==void 0?o:Td,lineWidth:(l!==void 0?l:im)*this.pixelRatio_,miterLimit:u!==void 0?u:tm,strokeStyle:Ja(r||nm)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const p=t.getColor();this.textFillState_={fillStyle:Ja(p||Wi)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),x=r.getLineCap(),v=r.getLineDash(),E=r.getLineDashOffset(),R=r.getLineJoin(),S=r.getWidth(),C=r.getMiterLimit();this.textStrokeState_={lineCap:x!==void 0?x:wd,lineDash:v||qo,lineDashOffset:E||Xo,lineJoin:R!==void 0?R:Td,lineWidth:S!==void 0?S:im,miterLimit:C!==void 0?C:tm,strokeStyle:Ja(p||nm)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),f=e.getText(),d=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:AL,textAlign:d!==void 0?d:rm,textBaseline:g!==void 0?g:ay},this.text_=f!==void 0?Array.isArray(f)?f.reduce((p,x,v)=>p+=v%2?" ":x,""):f:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const RB=.5,PL={Point:NB,LineString:kB,Polygon:FB,MultiPoint:DB,MultiLineString:OB,MultiPolygon:LB,GeometryCollection:bB,Circle:PB};function CB(n,e){return parseInt(Ht(n),10)-parseInt(Ht(e),10)}function d4(n,e){const t=ML(n,e);return t*t}function ML(n,e){return RB*n/e}function PB(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r)}}function g4(n,e,t,r,i,s,a,o){const l=[],u=t.getImage();if(u){let g=!0;const p=u.getImageState();p==ut.LOADED||p==ut.ERROR?g=!1:p==ut.IDLE&&u.load(),g&&l.push(u.ready())}const f=t.getFill();f&&f.loading()&&l.push(f.ready());const d=l.length>0;return d&&Promise.all(l).then(()=>i(null)),MB(n,e,t,r,s,a,o),d}function MB(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(r,i);if(t.getRenderer())bL(n,l,t,e,a);else{const f=PL[l.getType()];f(n,l,t,e,a,s)}}function bL(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,l=a.length;o<l;++o)bL(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function bB(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const u=PL[a[o].getType()];u(n,a[o],t,r,i,s)}}function kB(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function OB(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function LB(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function NB(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),l=o&&o.getText(),u=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=ut.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(a,u),f.drawPoint(e,r,i)}if(l){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o,u),f.drawText(e,r,i)}}function DB(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),f=s&&o&&u?{}:void 0;if(o){if(a.getImageState()!=ut.LOADED)return;const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(a,f),d.drawMultiPoint(e,r,i)}if(u){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(l,f),d.drawText(e,r,i)}}function FB(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}let VB=!1;function jB(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=VB,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=e.getType();try{let f;u=="text"||u=="json"?f=o.responseText:u=="xml"?f=o.responseXML||o.responseText:u=="arraybuffer"&&(f=o.response),f?s(e.readFeatures(f,{extent:t,featureProjection:i}),e.readProjection(f)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function m4(n,e){return function(t,r,i,s,a){jB(n,e,t,r,i,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),a!==void 0&&a()})}}function BB(n,e){return[[-1/0,-1/0,1/0,1/0]]}function kL(n,e,t,r){const i=[];let s=As();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=TS(n,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function US(n,e,t,r,i,s,a){let o,l,u,f,d,g,p;const x=i[s+1],v=[];for(let S=0,C=t.length;S<C;++S){const O=t[S];for(f=n[O-r],g=n[O-r+1],o=e;o<O;o+=r)d=n[o],p=n[o+1],(x<=g&&p<=x||g<=x&&x<=p)&&(u=(x-g)/(p-g)*(d-f)+f,v.push(u)),f=d,g=p}let E=NaN,R=-1/0;for(v.sort(Ho),f=v[0],o=1,l=v.length;o<l;++o){d=v[o];const S=Math.abs(d-f);S>R&&(u=(f+d)/2,LS(n,e,t,r,u,x)&&(E=u,R=S)),f=d}return isNaN(E)&&(E=i[s]),a?(a.push(E,x,R),a):[E,x,R]}function OL(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=US(n,e,l,r,i,2*a,s),e=l[l.length-1]}return s}function GB(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function zS(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],l=n[e+1];i+=(o-s)*(l+a),s=o,a=l}return i===0?void 0:i>0}function $S(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=zS(n,e,o,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=o}return!0}function LL(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!$S(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function oy(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=zS(n,e,o,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&GB(n,e,o,r),e=o}return e}function q2(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=oy(n,e,t[s],r,i);return e}function UB(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=zS(n,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=l}return t}class ly extends cL{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(xn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Ut(e[t],St.CHANGE,this.changed,this))}clone(){const e=new ly(Ew(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<vh(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){qm(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)$O(e,t[r].getExtent());return e}getGeometries(){return Ew(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(i=!0)}return i?new ly(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=uo(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(Ew(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ew(n){return n.map(e=>e.clone())}function NL(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,l=0;for(;e<t;e+=r){const u=n[e]-s,f=n[e+1]-a;i+=l*u-o*f,o=u,l=f}return i/2}function DL(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=NL(n,e,o,r),e=o}return i}function zB(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=DL(n,e,o,r),e=o[o.length-1]}return i}class sm extends Eh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new sm(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<vh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(MS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return NL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return sc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Nv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new sm(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ov(this.flatCoordinates,0,e,this.stride),this.changed()}}class cy extends Eh{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let l=0,u=i.length;l<u;++l){const f=i[l];no(s,f.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){no(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new cy(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<vh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bS(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),OS(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,Kj(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return em(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Zu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a],u=new Zu(e.slice(s,l),r);i.push(u),s=l}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=NS(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const l=i[a],u=ry(t,r,l,s,.5);no(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=gL(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new cy(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return Yj(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Qm(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Fv extends Eh{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){no(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Fv(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<vh(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=Bu(e,t,s[o],s[o+1]);if(u<i){i=u;for(let f=0;f<a;++f)r[f]=s[o+f];r.length=a}}return i}getCoordinates(){return sc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ic(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new Ic(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(wS(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ov(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ac extends Eh{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?no(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ac(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<vh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bS(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),OS(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return LS(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return DL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),oy(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,em(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=uo(this.getExtent());this.flatInteriorPoint_=US(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ic(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new sm(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=new sm(t.slice(s,l),e);i.push(u),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;$S(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=oy(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=DS(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Ac(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return dL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Qm(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function p4(n){if($d(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Ac(s,"XY",[s.length])}class uy extends Eh{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,l=i.length;o<l;++o){const u=i[o],f=s.length,d=u.getEnds();for(let g=0,p=d.length;g<p;++g)d[g]+=f;no(s,u.getFlatCoordinates()),a.push(d)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;no(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new uy(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<vh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($j(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wj(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return Xj(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return zB(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),q2(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,z2(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=kL(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=OL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Fv(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;LL(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=q2(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=Jj(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new uy(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Ac(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a].slice(),u=l[l.length-1];if(s!==0)for(let d=0,g=l.length;d<g;++d)l[d]-=s;const f=new Ac(t.slice(s,u),e,l);i.push(f),s=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return Zj(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=uL(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const _4=Ia();class xs{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?zO(this.flatCoordinates_):TS(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=uo(this.getExtent());this.flatInteriorPoints_=US(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=UB(this.flatCoordinates_,this.ends_),t=kL(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=OL(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=ry(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=ry(e,t,a,2,.5);no(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=En(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=or(r)/or(t);ho(_4,r[0],r[3],i,-i,0,0,0),mc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,_4,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new xs(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=jO((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Nv(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=gL(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=DS(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new xs(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}xs.prototype.getFlatCoordinates=xs.prototype.getOrientedFlatCoordinates;function FL(n,e,t=0,r=n.length-1,i=$B){for(;r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,f=Math.log(l),d=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(t,Math.floor(e-u*d/l+g)),x=Math.min(r,Math.floor(e+(l-u)*d/l+g));FL(n,e,p,x,i)}const s=n[e];let a=t,o=r;for(H0(n,t,e),i(n[r],s)>0&&H0(n,t,r);a<o;){for(H0(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?H0(n,t,o):(o++,H0(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function H0(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function $B(n,e){return n<e?-1:n>e?1:0}let VL=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!$_(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?i(o):o;$_(e,l)&&(t.leaf?r.push(o):Tw(e,l)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!$_(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if($_(e,a)){if(t.leaf||Tw(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=kf([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),r.leaf){const f=WB(e,r.children,t);if(f!==-1)return r.children.splice(f,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&Tw(r,i)?(s.push(r),a.push(o),o=0,l=r,r=r.children[0]):l?(o++,r=l.children[o],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=kf(e.slice(t,r+1)),mf(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=kf([]),o.leaf=!1,o.height=i;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));y4(e,t,r,u,this.compareMinX);for(let f=t;f<=r;f+=u){const d=Math.min(f+u-1,r);y4(e,f,d,l,this.compareMinY);for(let g=f;g<=d;g+=l){const p=Math.min(g+l-1,d);o.children.push(this._build(e,g,p,i-1))}}return mf(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const u=t.children[l],f=ww(u),d=qB(e,u)-f;d<a?(a=d,s=f<s?f:s,o=u):d===a&&f<s&&(s=f,o=u)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),sg(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=kf(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,mf(r,this.toBBox),mf(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=kf([e,t]),this.data.height=e.height+1,this.data.leaf=!1,mf(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const l=ig(e,0,o,this.toBBox),u=ig(e,o,r,this.toBBox),f=XB(l,u),d=ww(l)+ww(u);f<s?(s=f,i=o,a=d<a?d:a):f===s&&d<a&&(a=d,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:HB,s=e.leaf?this.compareMinY:KB,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=ig(e,0,t,s),o=ig(e,r-t,r,s);let l=z_(a)+z_(o);for(let u=t;u<r-t;u++){const f=e.children[u];sg(a,e.leaf?s(f):f),l+=z_(a)}for(let u=r-t-1;u>=t;u--){const f=e.children[u];sg(o,e.leaf?s(f):f),l+=z_(o)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)sg(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():mf(e[t],this.toBBox)}};function WB(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function mf(n,e){ig(n,0,n.children.length,e,n)}function ig(n,e,t,r,i){i||(i=kf(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];sg(i,n.leaf?r(a):a)}return i}function sg(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function HB(n,e){return n.minX-e.minX}function KB(n,e){return n.minY-e.minY}function ww(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function z_(n){return n.maxX-n.minX+(n.maxY-n.minY)}function qB(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function XB(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function Tw(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function $_(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function kf(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y4(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;FL(n,a,e,t,i),s.push(e,a,a,t)}}class v4{constructor(e){this.rbush_=new VL(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Ht(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=l,this.items_[Ht(o)]=l}this.rbush_.load(r)}remove(e){const t=Ht(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Ht(t)],i=[r.minX,r.minY,r.maxX,r.maxY];yd(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return Ku(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Tc(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class WS extends vo{constructor(e){super(),this.projection=En(e.projection),this.attributions_=x4(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=x4(e),this.changed()}setState(e){this.state_=e,this.changed()}}function x4(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Bs={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Fl extends yo{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Vv extends WS{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Zg,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(tn(this.format_,"`format` must be set when `url` is set"),this.loader_=m4(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:BB;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new v4:null,this.loadedExtentsRtree_=new v4,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new qs(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ht(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Fl(Bs.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof xs||(this.featureChangeKeys_[e]=[Ut(t,St.CHANGE,this.handleFeatureChange_,this),Ut(t,_d.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof xs){const s=this.idIndex_[i];s instanceof xs?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(tn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=Ht(o);this.addToIndex_(l,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],l=Ht(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const f=u.getExtent();t.push(f),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(Bs.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new Fl(Bs.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Bs.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Bs.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener($i.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener($i.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(xn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Fl(Bs.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof xs||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof xs||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ku(this.nullGeometryFeatures_)||no(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=XO(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Yg,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const f=u.getGeometry(),d=o;if(o=f instanceof xs?0:f.closestPointXY(r,i,a,o),o<d){s=u;const g=Math.sqrt(o);l[0]=r-g,l[1]=i-g,l[2]=r+g,l[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Ht(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new Fl(Bs.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ht(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ku(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const l=s[a];i.forEachInExtent(l,function(f){return rc(f.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Fl(Bs.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new Fl(Bs.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Fl(Bs.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(yd(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ht(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(xn),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(Bs.REMOVEFEATURE)&&this.dispatchEvent(new Fl(Bs.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){tn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(m4(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Ca{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Ca({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=sy(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ut.IDLE&&t.load(),t.getImageState()===ut.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Ht(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ed(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Yo{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Yo({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function E4(n){return n[0]>0&&n[1]>0}function YB(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Xi(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class jv{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Xi(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new jv({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return wt()}getImage(e){return wt()}getHitDetectionImage(){return wt()}getPixelRatio(e){return 1}getImageState(){return wt()}getImageSize(){return wt()}getOrigin(){return wt()}getSize(){return wt()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Xi(e)}listenImageChange(e){wt()}load(){wt()}unlistenImageChange(e){wt()}ready(){return Promise.resolve()}}class Bv extends jv{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ut.LOADING:ut.LOADED,this.imageState_===ut.LOADING&&this.ready().then(()=>this.imageState_=ut.LOADED),this.render()}clone(){const e=this.getScale(),t=new Bv({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=Ys.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,a=Math.ceil(s.size*e),o=wr(a,a);this.draw_(s,o,e),i=o.canvas,Ys.set(r,null,null,new SL(i,void 0,null,ut.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const z=i;i=s,s=z}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),f=i-u,d=Math.sqrt(l*l+f*f),g=d/l;if(e==="miter"&&g<=r)return g*t;const p=t/2/g,x=t/2*(f/d),E=Math.sqrt((i+p)*(i+p)+x*x)-i;if(this.radius2_===void 0||e==="bevel")return E*2;const R=i*Math.sin(o),S=Math.sqrt(i*i-R*R),C=s-S,N=Math.sqrt(R*R+C*C)/R;if(N<=r){const z=N*t/2-s-i;return 2*Math.max(E,z)}return E*2}createRenderOptions(){let e=wd,t=Td,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=Ja(this.stroke_.getColor()??nm),o=this.stroke_.getWidth()??im,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Td,e=this.stroke_.getLineCap()??wd,r=this.stroke_.getMiterLimit()??tm);const l=this.calculateLineJoinSize_(t,o,r),u=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:o,size:f,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=Wi),t.fillStyle=Ja(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Ed(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=wr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,u=o%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Wi,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Th extends Bv{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Th({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class bi{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=w4,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new bi({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=w4,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function ZB(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(tn(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let Sw=null;function jL(n,e){if(!Sw){const t=new Ca({color:"rgba(255,255,255,0.4)"}),r=new Yo({color:"#3399CC",width:1.25});Sw=[new bi({image:new Th({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return Sw}function w4(n){return n.getGeometry()}const QB="#333";class Gv{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Xi(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Ca({color:QB}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Gv({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Ca?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Xi(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Or={ANIMATING:0,INTERACTING:1},dt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},W_=[dt.FILL],oc=[dt.STROKE],Du=[dt.BEGIN_PATH],T4=[dt.CLOSE_PATH];class ep extends IL{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)i[0]=e[o],i[1]=e[o+1],Xu(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(t+=i);let f=e[t],d=e[t+1];const g=this.tmpCoordinate_;let p=!0,x,v,E;for(x=t+i;x<r;x+=i)g[0]=e[x],g[1]=e[x+1],E=L2(u,g),E!==v?(p&&(o[l++]=f,o[l++]=d,p=!1),o[l++]=g[0],o[l++]=g[1]):E===br.INTERSECTING?(o[l++]=g[0],o[l++]=g[1],p=!1):p=!0,f=g[0],d=g[1],v=E;return(s&&p||x===t+i)&&(o[l++]=f,o[l++]=d),l}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const l=r[a],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,f,d,g,p;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),g=[];const x=e.getEndss();p=0;for(let v=0,E=x.length;v<E;++v){const R=[];p=this.drawCustomCoordinates_(u,p,x[v],o,R),g.push(R)}this.instructions.push([dt.CUSTOM,l,g,e,r,z2,s]),this.hitDetectionInstructions.push([dt.CUSTOM,l,g,e,i||r,z2,s]);break;case"Polygon":case"MultiLineString":d=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),o,d),this.instructions.push([dt.CUSTOM,l,d,e,r,em,s]),this.hitDetectionInstructions.push([dt.CUSTOM,l,d,e,i||r,em,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([dt.CUSTOM,l,f,e,r,sc,s]),this.hitDetectionInstructions.push([dt.CUSTOM,l,f,e,i||r,sc,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(u,o),f>l&&(this.instructions.push([dt.CUSTOM,l,f,e,r,sc,s]),this.hitDetectionInstructions.push([dt.CUSTOM,l,f,e,i||r,sc,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),f=this.coordinates.length,this.instructions.push([dt.CUSTOM,l,f,e,r,void 0,s]),this.hitDetectionInstructions.push([dt.CUSTOM,l,f,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[dt.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[dt.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==dt.END_GEOMETRY?a=t:s==dt.BEGIN_GEOMETRY&&(i[2]=t,qV(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Ja(r||Wi)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Ja(r||nm);const i=e.getLineCap();t.lineCap=i!==void 0?i:wd;const s=e.getLineDash();t.lineDash=s?s.slice():qo;const a=e.getLineDashOffset();t.lineDashOffset=a||Xo;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Td;const l=e.getWidth();t.lineWidth=l!==void 0?l:im;const u=e.getMiterLimit();t.miterLimit=u!==void 0?u:tm,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[dt.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[dt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Gc(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[dt.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=UO(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Qg(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class JB extends ep{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Xu(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([dt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([dt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||Xu(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([dt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([dt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class eG extends ep{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[dt.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,qo,Xo],Du);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(oc),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,qo,Xo],Du);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let f=0;for(let d=0,g=o.length;d<g;++d)f=this.drawFlatCoordinates_(l,f,o[d],u);this.hitDetectionInstructions.push(oc),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(oc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(oc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Du)}}class S4 extends ep{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=r.length;this.instructions.push(Du),this.hitDetectionInstructions.push(Du);for(let u=0;u<l;++u){const f=r[u],d=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,f,i,!0,!o),p=[dt.MOVE_TO_LINE_TO,d,g];this.instructions.push(p),this.hitDetectionInstructions.push(p),o&&(this.instructions.push(T4),this.hitDetectionInstructions.push(T4)),t=f}return a&&(this.instructions.push(W_),this.hitDetectionInstructions.push(W_)),o&&(this.instructions.push(oc),this.hitDetectionInstructions.push(oc)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_FILL_STYLE,Wi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,qo,Xo]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const f=[dt.CIRCLE,u];this.instructions.push(Du,f),this.hitDetectionInstructions.push(Du,f),i.fillStyle!==void 0&&(this.instructions.push(W_),this.hitDetectionInstructions.push(W_)),i.strokeStyle!==void 0&&(this.instructions.push(oc),this.hitDetectionInstructions.push(oc)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_FILL_STYLE,Wi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,qo,Xo]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_FILL_STYLE,Wi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,qo,Xo]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let f=0;for(let d=0,g=o.length;d<g;++d)f=this.drawFlatCoordinatess_(l,f,o[d],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=yu(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function tG(n,e,t,r,i){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+i<r;){const[u,f]=l.slice(-2),d=e[a+i],g=e[a+i+1],p=Math.sqrt((d-u)*(d-u)+(g-f)*(g-f));if(o+=p,o>=n){const x=(n-o+p)/p,v=vs(u,d,x),E=vs(f,g,x);l.push(v,E),s.push(l),l=[v,E],o==n&&(a+=i),o=0}else if(o<n)l.push(e[a+i],e[a+i+1]),a+=i;else{const x=p-o,v=vs(u,d,x/p),E=vs(f,g,x/p);l.push(v,E),s.push(l),l=[v,E],o=0,a+=i}}return o>0&&s.push(l),s}function nG(n,e,t,r,i){let s=t,a=t,o=0,l=0,u=t,f,d,g,p,x,v,E,R,S,C;for(d=t;d<r;d+=i){const O=e[d],N=e[d+1];x!==void 0&&(S=O-x,C=N-v,p=Math.sqrt(S*S+C*C),E!==void 0&&(l+=g,f=Math.acos((E*S+R*C)/(g*p)),f>n&&(l>o&&(o=l,s=u,a=d),l=0,u=d-i)),g=p,E=S,R=C),x=O,v=N}return l+=p,l>o?[u,d]:[s,a]}const hy={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class rG extends ep{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Wi]={fillStyle:Wi},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let l=o.length;const u=e.getType();let f=null,d=e.getStride();if(a.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Ri(this.maxExtent,e.getExtent()))return;let g;if(f=e.getFlatCoordinates(),u=="LineString")g=[f.length];else if(u=="MultiLineString")g=e.getEnds();else if(u=="Polygon")g=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const E=e.getEndss();g=[];for(let R=0,S=E.length;R<S;++R)g.push(E[R][0])}this.beginGeometry(e,t,r);const p=a.repeat,x=p?void 0:a.textAlign;let v=0;for(let E=0,R=g.length;E<R;++E){let S;p?S=tG(p*this.resolution,f,v,g[E],d):S=[f.slice(v,g[E])];for(let C=0,O=S.length;C<O;++C){const N=S[C];let z=0,M=N.length;if(x==null){const b=nG(a.maxAngle,N,0,N.length,2);z=b[0],M=b[1]}for(let b=z;b<M;b+=d)o.push(N[b],N[b+1]);const P=o.length;v=g[E],this.drawChars_(l,P),l=P}}this.endGeometry(t)}else{let g=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),d=2;break;case"Polygon":f=e.getFlatInteriorPoint(),a.overflow||g.push(f[2]/this.resolution),d=3;break;case"MultiPolygon":const O=e.getFlatInteriorPoints();f=[];for(let N=0,z=O.length;N<z;N+=3)a.overflow||g.push(O[N+2]/this.resolution),f.push(O[N],O[N+1]);if(f.length===0)return;d=2;break}const p=this.appendFlatPointCoordinates(f,d);if(p===l)return;if(g&&(p-l)/2!==f.length/d){let O=l/2;g=g.filter((N,z)=>{const M=o[(O+z)*2]===f[z*d]&&o[(O+z)*2+1]===f[z*d+1];return M||--O,M})}this.saveTextStates_();const x=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,v=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let E=a.padding;if(E!=Nu&&(a.scale[0]<0||a.scale[1]<0)){let O=a.padding[0],N=a.padding[1],z=a.padding[2],M=a.padding[3];a.scale[0]<0&&(N=-N,M=-M),a.scale[1]<0&&(O=-O,z=-z),E=[O,N,z,M]}const R=this.pixelRatio;this.instructions.push([dt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,E==Nu?Nu:E.map(function(O){return O*R}),x,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const S=1/R,C=x?x.slice(0):null;C&&(C[1]=Wi),this.hitDetectionInstructions.push([dt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[S,S],NaN,this.declutterMode_,this.declutterImageWithText_,E,C,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Wi:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||rm,justify:t.justify,textBaseline:t.textBaseline||ay,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=hy[i.textBaseline],f=this.textOffsetY_*l,d=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([dt.DRAW_CHARS,e,t,u,i.overflow,o,i.maxAngle,l,f,s,g*l,d,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([dt.DRAW_CHARS,e,t,u,i.overflow,o&&Wi,i.maxAngle,l,f,s,g*l,d,a,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Ja(a.getColor()||Wi)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const v=o.getLineDash(),E=o.getLineDashOffset(),R=o.getWidth(),S=o.getMiterLimit();s.lineCap=o.getLineCap()||wd,s.lineDash=v?v.slice():qo,s.lineDashOffset=E===void 0?Xo:E,s.lineJoin=o.getLineJoin()||Td,s.lineWidth=R===void 0?im:R,s.miterLimit=S===void 0?tm:S,s.strokeStyle=Ja(o.getColor()||nm)}r=this.textState_;const l=e.getFont()||AL;EB(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||ay,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Nu,r.scale=u===void 0?[1,1]:u;const f=e.getOffsetX(),d=e.getOffsetY(),g=e.getRotateWithView(),p=e.getKeepUpright(),x=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=g===void 0?!1:g,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=x===void 0?0:x,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Ht(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Ht(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const iG={Circle:S4,Default:ep,Image:JB,LineString:eG,Polygon:S4,Text:rG};class sG{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=iG[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function aG(n,e,t,r,i,s,a,o,l,u,f,d,g=!0){let p=n[e],x=n[e+1],v=0,E=0,R=0,S=0;function C(){v=p,E=x,e+=r,p=n[e],x=n[e+1],S+=R,R=Math.sqrt((p-v)*(p-v)+(x-E)*(x-E))}do C();while(e<t-r&&S+R<s);let O=R===0?0:(s-S)/R;const N=vs(v,p,O),z=vs(E,x,O),M=e-r,P=S,b=s+o*l(u,i,f);for(;e<t-r&&S+R<b;)C();O=R===0?0:(b-S)/R;const D=vs(v,p,O),B=vs(E,x,O);let U=!1;if(g)if(d){const Me=[N,z,D,B];lL(Me,0,4,2,d,Me,Me),U=Me[0]>Me[2]}else U=N>D;const V=Math.PI,Ae=[],be=M+r===e;e=M,R=0,S=P,p=n[e],x=n[e+1];let Pe;if(be){C(),Pe=Math.atan2(x-E,p-v),U&&(Pe+=Pe>0?-V:V);const Me=(D+N)/2,he=(B+z)/2;return Ae[0]=[Me,he,(b-s)/2,Pe,i],Ae}i=i.replace(/\n/g," ");for(let Me=0,he=i.length;Me<he;){C();let ae=Math.atan2(x-E,p-v);if(U&&(ae+=ae>0?-V:V),Pe!==void 0){let Y=ae-Pe;if(Y+=Y>V?-2*V:Y<-V?2*V:0,Math.abs(Y)>a)return null}Pe=ae;const Ee=Me;let J=0;for(;Me<he;++Me){const Y=U?he-Me-1:Me,fe=o*l(u,i[Y],f);if(e+r<t&&S+R<s+J+fe/2)break;J+=fe}if(Me===Ee)continue;const F=U?i.substring(he-Ee,he-Me):i.substring(Ee,Me);O=R===0?0:(s+J/2-S)/R;const re=vs(v,p,O),te=vs(E,x,O);Ae.push([re,te,J/2,ae,F]),s+=J}return Ae}class BL{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(iy(),{get:(e,t)=>{if(typeof iy()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const pf=As(),Vl=[],jo=[],Bo=[],jl=[];function I4(n){return n[3].declutterBox}const A4=new RegExp("[-----]");function Iw(n,e){return e==="start"?e=A4.test(n)?"right":"left":e==="end"&&(e=A4.test(n)?"left":"right"),hy[e]}function oG(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function lG(n,e,t){return t%2===0&&(n+=e),n}class cG{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Ia(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new BL:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,f=[l.scale[0]*u,l.scale[1]*u],d=l.justify?hy[l.justify]:Iw(Array.isArray(e)?e[0]:e,l.textAlign||rm),g=i&&a.lineWidth?a.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(oG,[]),{width:x,height:v,widths:E,heights:R,lineWidths:S}=TB(l,p),C=x+g,O=[],N=(C+2)*f[0],z=(v+g)*f[1],M={width:N<0?Math.floor(N):Math.ceil(N),height:z<0?Math.floor(z):Math.ceil(z),contextInstructions:O};(f[0]!=1||f[1]!=1)&&O.push("scale",f),i&&(O.push("strokeStyle",a.strokeStyle),O.push("lineWidth",g),O.push("lineCap",a.lineCap),O.push("lineJoin",a.lineJoin),O.push("miterLimit",a.miterLimit),O.push("setLineDash",[a.lineDash]),O.push("lineDashOffset",a.lineDashOffset)),r&&O.push("fillStyle",o.fillStyle),O.push("textBaseline","middle"),O.push("textAlign","center");const P=.5-d;let b=d*C+P*g;const D=[],B=[];let U=0,V=0,Ae=0,be=0,Pe;for(let Me=0,he=p.length;Me<he;Me+=2){const ae=p[Me];if(ae===`
`){V+=U,U=0,b=d*C+P*g,++be;continue}const Ee=p[Me+1]||l.font;Ee!==Pe&&(i&&D.push("font",Ee),r&&B.push("font",Ee),Pe=Ee),U=Math.max(U,R[Ae]);const J=[ae,b+P*E[Ae]+d*(E[Ae]-S[be]),.5*(g+U)+V];b+=E[Ae],i&&D.push("strokeText",J),r&&B.push("fillText",J),++Ae}return Array.prototype.push.apply(O,D),Array.prototype.push.apply(O,B),this.labels_[s]=M,M}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,l,u,f,d,g,p,x,v,E){o*=g[0],l*=g[1];let R=r-o,S=i-l;const C=s+u>e?e-u:s,O=a+f>t?t-f:a,N=x[3]+C*g[0]+x[1],z=x[0]+O*g[1]+x[2],M=R-x[3],P=S-x[0];(v||d!==0)&&(Vl[0]=M,jl[0]=M,Vl[1]=P,jo[1]=P,jo[0]=M+N,Bo[0]=jo[0],Bo[1]=P+z,jl[1]=Bo[1]);let b;return d!==0?(b=ho(Ia(),r,i,1,1,d,-r,-i),xr(b,Vl),xr(b,jo),xr(b,Bo),xr(b,jl),Tc(Math.min(Vl[0],jo[0],Bo[0],jl[0]),Math.min(Vl[1],jo[1],Bo[1],jl[1]),Math.max(Vl[0],jo[0],Bo[0],jl[0]),Math.max(Vl[1],jo[1],Bo[1],jl[1]),pf)):Tc(Math.min(M,M+N),Math.min(P,P+z),Math.max(M,M+N),Math.max(P,P+z),pf),p&&(R=Math.round(R),S=Math.round(S)),{drawImageX:R,drawImageY:S,drawImageW:C,drawImageH:O,originX:u,originY:f,declutterBox:{minX:pf[0],minY:pf[1],maxX:pf[2],maxY:pf[3],value:E},canvasTransform:b,scale:g}}replayImageOrLabel_(e,t,r,i,s,a,o){const l=!!(a||o),u=i.declutterBox,f=o?o[2]*i.scale[0]/2:0;return u.minX-f<=t[0]&&u.maxX+f>=0&&u.minY-f<=t[1]&&u.maxY+f>=0&&(l&&this.replayTextBackground_(e,Vl,jo,Bo,jl,a,o),SB(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=xr(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],l=this.pixelRatio,u=Iw(Array.isArray(e)?e[0]:e,s.textAlign||rm),f=hy[s.textBaseline||ay],d=o&&o.lineWidth?o.lineWidth:0,g=a.width/l-2*s.scale[0],p=u*g+2*(.5-u)*d,x=f*a.height/l+2*(.5-f)*d;return{label:a,anchorX:p,anchorY:x}}execute_(e,t,r,i,s,a,o,l){const u=this.zIndexContext_;let f;this.pixelCoordinates_&&Gc(r,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=mc(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),Nj(this.renderedTransform_,r));let d=0;const g=i.length;let p=0,x,v,E,R,S,C,O,N,z,M,P,b,D,B=0,U=0;const V=this.coordinateCache_,Ae=this.viewRotation_,be=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Pe={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ae},Me=this.instructions!=i||this.overlaps?0:200;let he,ae,Ee,J;for(;d<g;){const F=i[d];switch(F[0]){case dt.BEGIN_GEOMETRY:he=F[1],J=F[3],he.getGeometry()?o!==void 0&&!Ri(o,J.getExtent())?d=F[2]+1:++d:d=F[2],u&&(u.zIndex=F[4]);break;case dt.BEGIN_PATH:B>Me&&(this.fill_(e),B=0),U>Me&&(e.stroke(),U=0),!B&&!U&&(e.beginPath(),S=NaN,C=NaN),++d;break;case dt.CIRCLE:p=F[1];const te=f[p],Y=f[p+1],fe=f[p+2],se=f[p+3],ne=fe-te,k=se-Y,Te=Math.sqrt(ne*ne+k*k);e.moveTo(te+Te,Y),e.arc(te,Y,Te,0,2*Math.PI,!0),++d;break;case dt.CLOSE_PATH:e.closePath(),++d;break;case dt.CUSTOM:p=F[1],x=F[2];const le=F[3],We=F[4],ce=F[5];Pe.geometry=le,Pe.feature=he,d in V||(V[d]=[]);const W=V[d];ce?ce(f,p,x,2,W):(W[0]=f[p],W[1]=f[p+1],W.length=2),u&&(u.zIndex=F[6]),We(W,Pe),++d;break;case dt.DRAW_IMAGE:p=F[1],x=F[2],z=F[3],v=F[4],E=F[5];let Ie=F[6];const tt=F[7],De=F[8],Mt=F[9],Rt=F[10];let Ct=F[11];const wn=F[12];let vi=F[13];R=F[14]||"declutter";const pn=F[15];if(!z&&F.length>=20){M=F[19],P=F[20],b=F[21],D=F[22];const On=this.drawLabelWithPointPlacement_(M,P,b,D);z=On.label,F[3]=z;const Ni=F[23];v=(On.anchorX-Ni)*this.pixelRatio,F[4]=v;const dr=F[24];E=(On.anchorY-dr)*this.pixelRatio,F[5]=E,Ie=z.height,F[6]=Ie,vi=z.width,F[13]=vi}let fr;F.length>25&&(fr=F[25]);let Vr,Li,xi;F.length>17?(Vr=F[16],Li=F[17],xi=F[18]):(Vr=Nu,Li=null,xi=null),Rt&&be?Ct+=Ae:!Rt&&!be&&(Ct-=Ae);let Ir=0;for(;p<x;p+=2){if(fr&&fr[Ir++]<vi/this.pixelRatio)continue;const On=this.calculateImageOrLabelDimensions_(z.width,z.height,f[p],f[p+1],vi,Ie,v,E,De,Mt,Ct,wn,s,Vr,!!Li||!!xi,he),Ni=[e,t,z,On,tt,Li,xi];if(l){let dr,Ln,gr;if(pn){const Vt=x-p;if(!pn[Vt]){pn[Vt]={args:Ni,declutterMode:R};continue}const Gn=pn[Vt];dr=Gn.args,Ln=Gn.declutterMode,delete pn[Vt],gr=I4(dr)}let mr,tr;if(dr&&(Ln!=="declutter"||!l.collides(gr))&&(mr=!0),(R!=="declutter"||!l.collides(On.declutterBox))&&(tr=!0),Ln==="declutter"&&R==="declutter"){const Vt=mr&&tr;mr=Vt,tr=Vt}mr&&(Ln!=="none"&&l.insert(gr),this.replayImageOrLabel_.apply(this,dr)),tr&&(R!=="none"&&l.insert(On.declutterBox),this.replayImageOrLabel_.apply(this,Ni))}else this.replayImageOrLabel_.apply(this,Ni)}++d;break;case dt.DRAW_CHARS:const To=F[1],ns=F[2],Ei=F[3],So=F[4];D=F[5];const rs=F[6],bs=F[7],na=F[8];b=F[9];const jr=F[10];M=F[11],Array.isArray(M)&&(M=M.reduce(lG,"")),P=F[12];const ra=[F[13],F[13]];R=F[14]||"declutter";const is=F[15],ss=this.textStates[P],Ar=ss.font,Br=[ss.scale[0]*bs,ss.scale[1]*bs];let Zt;Ar in this.widths_?Zt=this.widths_[Ar]:(Zt={},this.widths_[Ar]=Zt);const as=NS(f,To,ns,2),os=Math.abs(Br[0])*f4(Ar,M,Zt);if(So||os<=as){const On=this.textStates[P].textAlign,Ni=(as-os)*Iw(M,On),dr=aG(f,To,ns,2,M,Ni,rs,Math.abs(Br[0]),f4,Ar,Zt,be?0:this.viewRotation_,is);e:if(dr){const Ln=[];let gr,mr,tr,Vt,Gn;if(b)for(gr=0,mr=dr.length;gr<mr;++gr){Gn=dr[gr],tr=Gn[4],Vt=this.createLabel(tr,P,"",b),v=Gn[2]+(Br[0]<0?-jr:jr),E=Ei*Vt.height+(.5-Ei)*2*jr*Br[1]/Br[0]-na;const Xn=this.calculateImageOrLabelDimensions_(Vt.width,Vt.height,Gn[0],Gn[1],Vt.width,Vt.height,v,E,0,0,Gn[3],ra,!1,Nu,!1,he);if(l&&R==="declutter"&&l.collides(Xn.declutterBox))break e;Ln.push([e,t,Vt,Xn,1,null,null])}if(D)for(gr=0,mr=dr.length;gr<mr;++gr){Gn=dr[gr],tr=Gn[4],Vt=this.createLabel(tr,P,D,""),v=Gn[2],E=Ei*Vt.height-na;const Xn=this.calculateImageOrLabelDimensions_(Vt.width,Vt.height,Gn[0],Gn[1],Vt.width,Vt.height,v,E,0,0,Gn[3],ra,!1,Nu,!1,he);if(l&&R==="declutter"&&l.collides(Xn.declutterBox))break e;Ln.push([e,t,Vt,Xn,1,null,null])}l&&R!=="none"&&l.load(Ln.map(I4));for(let Xn=0,Di=Ln.length;Xn<Di;++Xn)this.replayImageOrLabel_.apply(this,Ln[Xn])}}++d;break;case dt.END_GEOMETRY:if(a!==void 0){he=F[1];const On=a(he,J,R);if(On)return On}++d;break;case dt.FILL:Me?B++:this.fill_(e),++d;break;case dt.MOVE_TO_LINE_TO:for(p=F[1],x=F[2],ae=f[p],Ee=f[p+1],e.moveTo(ae,Ee),S=ae+.5|0,C=Ee+.5|0,p+=2;p<x;p+=2)ae=f[p],Ee=f[p+1],O=ae+.5|0,N=Ee+.5|0,(p==x-2||O!==S||N!==C)&&(e.lineTo(ae,Ee),S=O,C=N);++d;break;case dt.SET_FILL_STYLE:this.alignAndScaleFill_=F[2],B&&(this.fill_(e),B=0,U&&(e.stroke(),U=0)),e.fillStyle=F[1],++d;break;case dt.SET_STROKE_STYLE:U&&(e.stroke(),U=0),this.setStrokeStyle_(e,F),++d;break;case dt.STROKE:Me?U++:e.stroke(),++d;break;default:++d;break}}B&&this.fill_(e),U&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const Ru=["Polygon","Circle","LineString","Image","Text","Default"],GL=["Image","Text"],uG=Ru.filter(n=>!GL.includes(n));class hG{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ia(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new cG(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,l=ho(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=wr(o,o));const f=this.hitDetectionContext_;f.canvas.width!==o||f.canvas.height!==o?(f.canvas.width=o,f.canvas.height=o):u||f.clearRect(0,0,o,o);let d;this.renderBuffer_!==void 0&&(d=As(),wg(d,e),Qg(d,t*(this.renderBuffer_+i),d));const g=fG(i);let p;function x(N,z,M){const P=f.getImageData(0,0,o,o).data;for(let b=0,D=g.length;b<D;b++)if(P[g[b]]>0){if(!a||M==="none"||p!=="Image"&&p!=="Text"||a.includes(N)){const B=(g[b]-3)/4,U=i-B%o,V=i-(B/o|0),Ae=s(N,z,U*U+V*V);if(Ae)return Ae}f.clearRect(0,0,o,o);break}}const v=Object.keys(this.executorsByZIndex_).map(Number);v.sort(Ho);let E,R,S,C,O;for(E=v.length-1;E>=0;--E){const N=v[E].toString();for(S=this.executorsByZIndex_[N],R=Ru.length-1;R>=0;--R)if(p=Ru[R],C=S[p],C!==void 0&&(O=C.executeHitDetection(f,l,r,x,d),O))return O}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return mc(o,0,8,2,e,o),o}isEmpty(){return Ku(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?KV:Ho),a=a||Ru;const u=Ru.length;for(let f=0,d=l.length;f<d;++f){const g=l[f].toString(),p=this.executorsByZIndex_[g];for(let x=0,v=a.length;x<v;++x){const E=a[x],R=p[E];if(R!==void 0){const S=o===null?void 0:R.getZIndexContext(),C=S?S.getContext():e,O=this.maxExtent_&&E!=="Image"&&E!=="Text";if(O&&(C.save(),this.clip(C,r)),!S||E==="Text"||E==="Image"?R.execute(C,t,r,i,s,o):S.pushFunction(N=>R.execute(N,t,r,i,s,o)),O&&C.restore(),S){S.offset();const N=l[f]*u+Ru.indexOf(E);this.deferredZIndexContexts_[N]||(this.deferredZIndexContexts_[N]=[]),this.deferredZIndexContexts_[N].push(S)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Ho);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const Aw={};function fG(n){if(Aw[n]!==void 0)return Aw[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=r[o];l||(l=[],r[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return Aw[n]=i,i}function R4(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let fy=class UL extends jv{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;tn(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||Ht(a)),tn(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),tn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=ut.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?ut.LOADED:ut.IDLE:l=ut.LOADING:l=ut.LOADED),this.color_=e.color!==void 0?Ed(e.color):null,this.iconImage_=sy(a,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,f;if(e.size)[u,f]=e.size;else{const d=this.getImage(1);if(d.width&&d.height)u=d.width,f=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(R4(p[0],p[1],e.width,e.height))};this.listenImageChange(g);return}}u!==void 0&&this.setScale(R4(u,f,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new UL({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=sy(null,e,this.crossOrigin_,ut.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ut.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ut.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(St.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(St.CHANGE,e)}ready(){return this.iconImage_.ready()}};const Ya=.5;function dG(n,e,t,r,i,s,a,o,l){const u=i,f=n[0]*Ya,d=n[1]*Ya,g=wr(f,d);g.imageSmoothingEnabled=!1;const p=g.canvas,x=new AB(g,Ya,i,null,a,o,null),v=t.length,E=Math.floor((256*256*256-1)/v),R={};for(let C=1;C<=v;++C){const O=t[C-1],N=O.getStyleFunction()||r;if(!N)continue;let z=N(O,s);if(!z)continue;Array.isArray(z)||(z=[z]);const P=(C*E).toString(16).padStart(7,"#00000");for(let b=0,D=z.length;b<D;++b){const B=z[b],U=B.getGeometryFunction()(O);if(!U||!Ri(u,U.getExtent()))continue;const V=B.clone(),Ae=V.getFill();Ae&&Ae.setColor(P);const be=V.getStroke();be&&(be.setColor(P),be.setLineDash(null)),V.setText(void 0);const Pe=B.getImage();if(Pe){const Ee=Pe.getImageSize();if(!Ee)continue;const J=wr(Ee[0],Ee[1],void 0,{alpha:!1}),F=J.canvas;J.fillStyle=P,J.fillRect(0,0,F.width,F.height),V.setImage(new fy({img:F,anchor:Pe.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Pe.getOrigin(),opacity:1,size:Pe.getSize(),scale:Pe.getScale(),rotation:Pe.getRotation(),rotateWithView:Pe.getRotateWithView()}))}const Me=V.getZIndex()||0;let he=R[Me];he||(he={},R[Me]=he,he.Polygon=[],he.Circle=[],he.LineString=[],he.Point=[]);const ae=U.getType();if(ae==="GeometryCollection"){const Ee=U.getGeometriesArrayRecursive();for(let J=0,F=Ee.length;J<F;++J){const re=Ee[J];he[re.getType().replace("Multi","")].push(re,V)}}else he[ae.replace("Multi","")].push(U,V)}}const S=Object.keys(R).map(Number).sort(Ho);for(let C=0,O=S.length;C<O;++C){const N=R[S[C]];for(const z in N){const M=N[z];for(let P=0,b=M.length;P<b;P+=2){x.setStyle(M[P+1]);for(let D=0,B=e.length;D<B;++D)x.setTransform(e[D]),x.drawGeometry(M[P])}}}return g.getImageData(0,0,p.width,p.height)}function gG(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*Ya),s=Math.floor(Math.round(n[1])*Ya),a=(In(i,0,t.width-1)+In(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],f=t.data[a+2]+256*(l+256*o),d=Math.floor((256*256*256-1)/e.length);f&&f%d===0&&r.push(e[f/d-1])}return r}class zL extends yo{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const mG=5;class pG extends Km{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=mG}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return wt()}getData(e){return null}prepareFrame(e){return wt()}renderFrame(e,t){return wt()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ut.LOADED||t.getState()===ut.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ut.LOADED&&t!=ut.ERROR&&e.addEventListener(St.CHANGE,this.boundHandleImageChange_),t==ut.IDLE&&(e.load(),t=e.getState()),t==ut.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const C4=[];let Of=null;function _G(){Of=wr(1,1,void 0,{willReadFrequently:!0})}class HS extends pG{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ia(),this.pixelTransform=Ia(),this.inversePixelTransform=Ia(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){Of||_G(),Of.clearRect(0,0,1,1);let i;try{Of.drawImage(e,t,r,1,1,0,0,1,1),i=Of.getImageData(0,0,1,1).data}catch{return Of=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Gc(Ed(e.style.backgroundColor),Ed(r)))){const o=e.firstElementChild;ac(o)&&(a=o.getContext("2d"))}if(a&&jj(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=Ts?vL():document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=wr();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=xh(r),s=Pv(r),a=Cv(r),o=Rv(r);xr(t.coordinateToPixelTransform,i),xr(t.coordinateToPixelTransform,s),xr(t.coordinateToPixelTransform,a),xr(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;xr(l,i),xr(l,s),xr(l,a),xr(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(Nt(r)/i*a),l=Math.round(or(r)/i*a);ho(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-l/2),oL(this.inversePixelTransform,this.pixelTransform);const u=Vj(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const f=this.context.canvas;f.width!=o||f.height!=l?(f.width=o,f.height=l):this.context.clearRect(0,0,o,l),u!==f.style.transform&&(f.style.transform=u)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new zL(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Xs.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Xs.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new BL),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Xs.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Xs.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const l=s/2,u=a/2,f=i/t,d=-f,g=-e[0]+o,p=-e[1];return ho(this.tempTransform,l,u,f,d,-r,g,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class yG extends HS{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=As(),this.wrappedRenderedExtent_=As(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,f=l.getExtent(),d=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),p=t.pixelRatio,x=t.viewHints,v=!(x[Or.ANIMATING]||x[Or.INTERACTING]),E=this.context,R=Math.round(Nt(i)/o*p),S=Math.round(or(i)/o*p),C=d.getWrapX()&&l.canWrapX(),O=C?Nt(f):null,N=C?Math.ceil((i[2]-f[2])/O)+1:1;let z=C?Math.floor((i[0]-f[0])/O):0;do{let M=this.getRenderTransform(a,o,0,p,R,S,z*O);t.declutter&&(M=M.slice(0)),e.execute(E,[E.canvas.width,E.canvas.height],M,u,v,r===void 0?Ru:r?GL:uG,r?g&&t.declutter[g]:void 0)}while(++z<N)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=wr(this.context.canvas.width,this.context.canvas.height,C4))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Dv(this.context),C4.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(Xs.PRERENDER)||this.getLayer().hasListener(Xs.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const l=Qa(r.extent);o=Ri(l,e.extent),this.clipped_=o&&!rc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),f=[],d=r[0]*Ya,g=r[1]*Ya;f.push(this.getRenderTransform(i,s,a,Ya,d,g,0).slice());const p=u.getSource(),x=o.getExtent();if(p.getWrapX()&&o.canWrapX()&&!rc(x,l)){let v=l[0];const E=Nt(x);let R=0,S;for(;v<x[0];)--R,S=E*R,f.push(this.getRenderTransform(i,s,a,Ya,d,g,S).slice()),v+=E;for(R=0,v=l[2];v>x[2];)++R,S=E*R,f.push(this.getRenderTransform(i,s,a,Ya,d,g,S).slice()),v-=E}this.hitDetectionImageData_=dG(r,f,this.renderedFeatures_,u.getStyleFunction(),l,s,a,d4(s,this.renderedPixelRatio_))}t(gG(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),u={},f=function(g,p,x){const v=Ht(g),E=u[v];if(E){if(E!==!0&&x<E.distanceSq){if(x===0)return u[v]=!0,s.splice(s.lastIndexOf(E),1),i(g,l,p);E.geometry=p,E.distanceSq=x}}else{if(x===0)return u[v]=!0,i(g,l,p);s.push(u[v]={feature:g,layer:l,geometry:p,distanceSq:x,callback:i})}},d=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,f,d?t.declutter?.[d]?.all().map(g=>g.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Or.ANIMATING],s=e.viewHints[Or.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,f=u.projection,d=u.resolution,g=e.pixelRatio,p=t.getRevision(),x=t.getRenderBuffer();let v=t.getRenderOrder();v===void 0&&(v=CB);const E=u.center.slice(),R=Qg(l,x*d),S=R.slice(),C=[R.slice()],O=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!rc(O,e.extent)){const Ae=Nt(O),be=Math.max(Nt(R)/2,Ae);R[0]=O[0]-be,R[2]=O[2]+be,ZO(E,f);const Pe=qO(C[0],f);Pe[0]<O[0]&&Pe[2]<O[2]?C.push([Pe[0]+Ae,Pe[1],Pe[2]+Ae,Pe[3]]):Pe[0]>O[0]&&Pe[2]>O[2]&&C.push([Pe[0]-Ae,Pe[1],Pe[2]-Ae,Pe[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==p&&this.renderedRenderOrder_==v&&this.renderedFrameDeclutter_===!!e.declutter&&rc(this.wrappedRenderedExtent_,R))return Gc(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=E,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const N=new sG(ML(d,g),R,d,g);let z;for(let Ae=0,be=C.length;Ae<be;++Ae)r.loadFeatures(C[Ae],d,f);const M=d4(d,g);let P=!0;const b=(Ae,be)=>{let Pe;const Me=Ae.getStyleFunction()||t.getStyleFunction();if(Me&&(Pe=Me(Ae,d)),Pe){const he=this.renderFeature(Ae,M,Pe,N,z,this.getLayer().getDeclutter(),be);P=P&&!he}},D=aL(R),B=r.getFeaturesInExtent(D);v&&B.sort(v);for(let Ae=0,be=B.length;Ae<be;++Ae)b(B[Ae],Ae);this.renderedFeatures_=B,this.ready=P;const U=N.finish(),V=new hG(R,d,g,r.getOverlaps(),U,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=p,this.renderedRenderOrder_=v,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=S,this.wrappedRenderedExtent_=R,this.renderedCenter_=E,this.renderedProjection_=f,this.renderedPixelRatio_=g,this.replayGroup_=V,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,f=r.length;u<f;++u)l=g4(i,e,r[u],t,this.boundHandleStyleImageChange_,s,a,o)||l;else l=g4(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return l}}let Sh=0;const Ai=1<<Sh++,Bt=1<<Sh++,Hi=1<<Sh++,ya=1<<Sh++,Ju=1<<Sh++,ag=1<<Sh++,H_=Math.pow(2,Sh)-1,KS={[Ai]:"boolean",[Bt]:"number",[Hi]:"string",[ya]:"color",[Ju]:"number[]",[ag]:"size"},vG=Object.keys(KS).map(Number).sort(Ho);function xG(n){return n in KS}function og(n){const e=[];for(const t of vG)lg(n,t)&&e.push(KS[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function lg(n,e){return(n&e)===e}function Bl(n,e){return n===e}class vr{constructor(e,t){if(!xG(e))throw new Error(`literal expressions must have a specific type, got ${og(e)}`);this.type=e,this.value=t}}class EG{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function $L(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Jr(n,e,t){switch(typeof n){case"boolean":{if(Bl(e,Hi))return new vr(Hi,n?"true":"false");if(!lg(e,Ai))throw new Error(`got a boolean, but expected ${og(e)}`);return new vr(Ai,n)}case"number":{if(Bl(e,ag))return new vr(ag,Xi(n));if(Bl(e,Ai))return new vr(Ai,!!n);if(Bl(e,Hi))return new vr(Hi,n.toString());if(!lg(e,Bt))throw new Error(`got a number, but expected ${og(e)}`);return new vr(Bt,n)}case"string":{if(Bl(e,ya))return new vr(ya,jS(n));if(Bl(e,Ai))return new vr(Ai,!!n);if(!lg(e,Hi))throw new Error(`got a string, but expected ${og(e)}`);return new vr(Hi,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return kG(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(Bl(e,ag)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new vr(ag,n)}if(Bl(e,ya)){if(n.length===3)return new vr(ya,[...n,1]);if(n.length===4)return new vr(ya,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!lg(e,Ju))throw new Error(`got an array of numbers, but expected ${og(e)}`);return new vr(Ju,n)}const Oe={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},wG={[Oe.Get]:Et(bt(1,1/0),P4),[Oe.Var]:Et(bt(1,1),TG),[Oe.Has]:Et(bt(1,1/0),P4),[Oe.Id]:Et(SG,_f),[Oe.Concat]:Et(bt(2,1/0),qt(Hi)),[Oe.GeometryType]:Et(IG,_f),[Oe.LineMetric]:Et(_f),[Oe.Resolution]:Et(Rw,_f),[Oe.Zoom]:Et(Rw,_f),[Oe.Time]:Et(Rw,_f),[Oe.Any]:Et(bt(2,1/0),qt(Ai)),[Oe.All]:Et(bt(2,1/0),qt(Ai)),[Oe.Not]:Et(bt(1,1),qt(Ai)),[Oe.Equal]:Et(bt(2,2),qt(H_)),[Oe.NotEqual]:Et(bt(2,2),qt(H_)),[Oe.GreaterThan]:Et(bt(2,2),qt(Bt)),[Oe.GreaterThanOrEqualTo]:Et(bt(2,2),qt(Bt)),[Oe.LessThan]:Et(bt(2,2),qt(Bt)),[Oe.LessThanOrEqualTo]:Et(bt(2,2),qt(Bt)),[Oe.Multiply]:Et(bt(2,1/0),M4),[Oe.Coalesce]:Et(bt(2,1/0),M4),[Oe.Divide]:Et(bt(2,2),qt(Bt)),[Oe.Add]:Et(bt(2,1/0),qt(Bt)),[Oe.Subtract]:Et(bt(2,2),qt(Bt)),[Oe.Clamp]:Et(bt(3,3),qt(Bt)),[Oe.Mod]:Et(bt(2,2),qt(Bt)),[Oe.Pow]:Et(bt(2,2),qt(Bt)),[Oe.Abs]:Et(bt(1,1),qt(Bt)),[Oe.Floor]:Et(bt(1,1),qt(Bt)),[Oe.Ceil]:Et(bt(1,1),qt(Bt)),[Oe.Round]:Et(bt(1,1),qt(Bt)),[Oe.Sin]:Et(bt(1,1),qt(Bt)),[Oe.Cos]:Et(bt(1,1),qt(Bt)),[Oe.Atan]:Et(bt(1,2),qt(Bt)),[Oe.Sqrt]:Et(bt(1,1),qt(Bt)),[Oe.Match]:Et(bt(4,1/0),b4,RG),[Oe.Between]:Et(bt(3,3),qt(Bt)),[Oe.Interpolate]:Et(bt(6,1/0),b4,CG),[Oe.Case]:Et(bt(3,1/0),AG,PG),[Oe.In]:Et(bt(2,2),MG),[Oe.Number]:Et(bt(1,1/0),qt(H_)),[Oe.String]:Et(bt(1,1/0),qt(H_)),[Oe.Array]:Et(bt(1,1/0),qt(Bt)),[Oe.Color]:Et(bt(1,4),qt(Bt)),[Oe.Band]:Et(bt(1,3),qt(Bt)),[Oe.Palette]:Et(bt(2,2),bG),[Oe.ToString]:Et(bt(1,1),qt(Ai|Bt|Hi|ya))};function P4(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new vr(Bt,a);break}case"string":{i[s]=new vr(Hi,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function TG(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new vr(Hi,r)]}function SG(n,e,t){t.featureId=!0}function IG(n,e,t){t.geometryType=!0}function Rw(n,e,t){t.mapState=!0}function _f(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function bt(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function M4(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=Jr(n[s+1],e,t);i[s]=a}return i}function qt(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=Jr(e[a+1],n,r);s[a]=o}return s}}function AG(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function b4(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function RG(n,e,t){const r=n.length-1,i=Hi|Bt|Ai,s=Jr(n[1],i,t),a=Jr(n[n.length-1],e,t),o=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const u=Jr(n[l+2],s.type,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=Jr(n[l+3],a.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...o,a]}function CG(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new vr(Bt,i);let a;try{a=Jr(n[2],Bt,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const u=Jr(n[l+3],Bt,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=Jr(n[l+4],e,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,a,...o]}function PG(n,e,t){const r=Jr(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=Jr(n[s+1],Ai,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=Jr(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function MG(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=Hi}else i=Bt;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const l=Jr(r[o],i,t);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[Jr(n[1],i,t),...s]}function bG(n,e,t){let r;try{r=Jr(n[1],Bt,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=Jr(i[a],ya,t)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof vr))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function Et(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new EG(t,i,...s)}}function kG(n,e,t){const r=n[0],i=wG[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function WL(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return WL(n.getGeometries()[0]);default:return""}}function HL(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function hl(n,e,t){const r=Jr(n,e,t);return Pa(r)}function Pa(n,e){if(n instanceof vr){if(n.type===ya&&typeof n.value=="string"){const r=jS(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Oe.Number:case Oe.String:case Oe.Coalesce:return OG(n);case Oe.Get:case Oe.Var:case Oe.Has:return LG(n);case Oe.Id:return r=>r.featureId;case Oe.GeometryType:return r=>r.geometryType;case Oe.Concat:{const r=n.args.map(i=>Pa(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Oe.Resolution:return r=>r.resolution;case Oe.Any:case Oe.All:case Oe.Between:case Oe.In:case Oe.Not:return DG(n);case Oe.Equal:case Oe.NotEqual:case Oe.LessThan:case Oe.LessThanOrEqualTo:case Oe.GreaterThan:case Oe.GreaterThanOrEqualTo:return NG(n);case Oe.Multiply:case Oe.Divide:case Oe.Add:case Oe.Subtract:case Oe.Clamp:case Oe.Mod:case Oe.Pow:case Oe.Abs:case Oe.Floor:case Oe.Ceil:case Oe.Round:case Oe.Sin:case Oe.Cos:case Oe.Atan:case Oe.Sqrt:return FG(n);case Oe.Case:return VG(n);case Oe.Match:return jG(n);case Oe.Interpolate:return BG(n);case Oe.ToString:return GG(n);default:throw new Error(`Unsupported operator ${t}`)}}function OG(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Pa(n.args[s]);switch(t){case Oe.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Oe.Number:case Oe.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function LG(n,e){const r=n.args[0].value;switch(n.operator){case Oe.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const f=s[o].value;a=a[f]}return a};case Oe.Var:return i=>i.variables[r];case Oe.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const f=s[o].value;if(!a||!Object.hasOwn(a,f))return!1;a=a[f]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function NG(n,e){const t=n.operator,r=Pa(n.args[0]),i=Pa(n.args[1]);switch(t){case Oe.Equal:return s=>r(s)===i(s);case Oe.NotEqual:return s=>r(s)!==i(s);case Oe.LessThan:return s=>r(s)<i(s);case Oe.LessThanOrEqualTo:return s=>r(s)<=i(s);case Oe.GreaterThan:return s=>r(s)>i(s);case Oe.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function DG(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Pa(n.args[s]);switch(t){case Oe.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Oe.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Oe.Between:return s=>{const a=i[0](s),o=i[1](s),l=i[2](s);return a>=o&&a<=l};case Oe.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case Oe.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function FG(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Pa(n.args[s]);switch(t){case Oe.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case Oe.Divide:return s=>i[0](s)/i[1](s);case Oe.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case Oe.Subtract:return s=>i[0](s)-i[1](s);case Oe.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const l=i[2](s);return a>l?l:a};case Oe.Mod:return s=>i[0](s)%i[1](s);case Oe.Pow:return s=>Math.pow(i[0](s),i[1](s));case Oe.Abs:return s=>Math.abs(i[0](s));case Oe.Floor:return s=>Math.floor(i[0](s));case Oe.Ceil:return s=>Math.ceil(i[0](s));case Oe.Round:return s=>Math.round(i[0](s));case Oe.Sin:return s=>Math.sin(i[0](s));case Oe.Cos:return s=>Math.cos(i[0](s));case Oe.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Oe.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function VG(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Pa(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function jG(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Pa(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t-1;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function BG(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Pa(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,l;for(let u=2;u<t;u+=2){const f=r[u](i);let d=r[u+1](i);const g=Array.isArray(d);if(g&&(d=fB(d)),f>=a)return u===2?d:g?UG(s,a,o,l,f,d):cg(s,a,o,l,f,d);o=f,l=d}return l}}function GG(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Pa(n.args[s]);switch(t){case Oe.ToString:return s=>{const a=i[0](s);return n.args[0].type===ya?BS(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function cg(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+l*(s-r)}function UG(n,e,t,r,i,s){if(i-t===0)return r;const o=l4(r),l=l4(s);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const f=[cg(n,e,t,o[0],i,l[0]),cg(n,e,t,o[1],i,l[1]),o[2]+cg(n,e,t,0,i,u),cg(n,e,t,r[3],i,s[3])];return dB(f)}function zG(n){return!0}function $G(n){const e=$L(),t=WG(n,e),r=HL();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=WL(i.getGeometry())),t(r)}}function k4(n){const e=$L(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=X2(n[a],e);const i=HL(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const u=a.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const f=r[u](i);f&&(s[l]=f,l+=1)}return s.length=l,s}}function WG(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?hl(s.filter,Ai,e):zG;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=X2(s.style[u],e)}else o=[X2(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const l=r[o].filter;if(l(i)&&!(n[o].else&&a)){a=!0;for(const u of r[o].styles){const f=u(i);f&&s.push(f)}}}return s}}function X2(n,e){const t=am(n,"",e),r=om(n,"",e),i=HG(n,e),s=KG(n,e),a=Ki(n,"z-index",e);if(!t&&!r&&!i&&!s&&!Ku(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new bi;return function(l){let u=!0;if(t){const f=t(l);f&&(u=!1),o.setFill(f)}if(r){const f=r(l);f&&(u=!1),o.setStroke(f)}if(i){const f=i(l);f&&(u=!1),o.setText(f)}if(s){const f=s(l);f&&(u=!1),o.setImage(f)}return a&&o.setZIndex(a(l)),u?null:o}}function am(n,e,t){let r;if(e+"fill-pattern-src"in n)r=ZG(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=qS(n,e+"fill-color",t)}if(!r)return null;const i=new Ca;return function(s){const a=r(s);return a===VS?null:(i.setColor(a),i)}}function om(n,e,t){const r=Ki(n,e+"stroke-width",t),i=qS(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Uo(n,e+"stroke-line-cap",t),a=Uo(n,e+"stroke-line-join",t),o=KL(n,e+"stroke-line-dash",t),l=Ki(n,e+"stroke-line-dash-offset",t),u=Ki(n,e+"stroke-miter-limit",t),f=new Yo;return function(d){if(i){const g=i(d);if(g===VS)return null;f.setColor(g)}if(r&&f.setWidth(r(d)),s){const g=s(d);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(g)}if(a){const g=a(d);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(g)}return o&&f.setLineDash(o(d)),l&&f.setLineDashOffset(l(d)),u&&f.setMiterLimit(u(d)),f}}function HG(n,e){const t="text-",r=Uo(n,t+"value",e);if(!r)return null;const i=am(n,t,e),s=am(n,t+"background-",e),a=om(n,t,e),o=om(n,t+"background-",e),l=Uo(n,t+"font",e),u=Ki(n,t+"max-angle",e),f=Ki(n,t+"offset-x",e),d=Ki(n,t+"offset-y",e),g=rd(n,t+"overflow",e),p=Uo(n,t+"placement",e),x=Ki(n,t+"repeat",e),v=Uv(n,t+"scale",e),E=rd(n,t+"rotate-with-view",e),R=Ki(n,t+"rotation",e),S=Uo(n,t+"align",e),C=Uo(n,t+"justify",e),O=Uo(n,t+"baseline",e),N=rd(n,t+"keep-upright",e),z=KL(n,t+"padding",e),M=zv(n,t+"declutter-mode"),P=new Gv({declutterMode:M});return function(b){if(P.setText(r(b)),i&&P.setFill(i(b)),s&&P.setBackgroundFill(s(b)),a&&P.setStroke(a(b)),o&&P.setBackgroundStroke(o(b)),l&&P.setFont(l(b)),u&&P.setMaxAngle(u(b)),f&&P.setOffsetX(f(b)),d&&P.setOffsetY(d(b)),g&&P.setOverflow(g(b)),p){const D=p(b);if(D!=="point"&&D!=="line")throw new Error("Expected point or line for text-placement");P.setPlacement(D)}if(x&&P.setRepeat(x(b)),v&&P.setScale(v(b)),E&&P.setRotateWithView(E(b)),R&&P.setRotation(R(b)),S){const D=S(b);if(D!=="left"&&D!=="center"&&D!=="right"&&D!=="end"&&D!=="start")throw new Error("Expected left, right, center, start, or end for text-align");P.setTextAlign(D)}if(C){const D=C(b);if(D!=="left"&&D!=="right"&&D!=="center")throw new Error("Expected left, right, or center for text-justify");P.setJustify(D)}if(O){const D=O(b);if(D!=="bottom"&&D!=="top"&&D!=="middle"&&D!=="alphabetic"&&D!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");P.setTextBaseline(D)}return z&&P.setPadding(z(b)),N&&P.setKeepUpright(N(b)),P}}function KG(n,e){return"icon-src"in n?qG(n,e):"shape-points"in n?XG(n,e):"circle-radius"in n?YG(n,e):null}function qG(n,e){const t="icon-",r=t+"src",i=qL(n[r],r),s=dy(n,t+"anchor",e),a=Uv(n,t+"scale",e),o=Ki(n,t+"opacity",e),l=dy(n,t+"displacement",e),u=Ki(n,t+"rotation",e),f=rd(n,t+"rotate-with-view",e),d=L4(n,t+"anchor-origin"),g=N4(n,t+"anchor-x-units"),p=N4(n,t+"anchor-y-units"),x=tU(n,t+"color"),v=JG(n,t+"cross-origin"),E=eU(n,t+"offset"),R=L4(n,t+"offset-origin"),S=gy(n,t+"width"),C=gy(n,t+"height"),O=QG(n,t+"size"),N=zv(n,t+"declutter-mode"),z=new fy({src:i,anchorOrigin:d,anchorXUnits:g,anchorYUnits:p,color:x,crossOrigin:v,offset:E,offsetOrigin:R,height:C,width:S,size:O,declutterMode:N});return function(M){return o&&z.setOpacity(o(M)),l&&z.setDisplacement(l(M)),u&&z.setRotation(u(M)),f&&z.setRotateWithView(f(M)),a&&z.setScale(a(M)),s&&z.setAnchor(s(M)),z}}function XG(n,e){const t="shape-",r=t+"points",i=t+"radius",s=Y2(n[r],r),a=Y2(n[i],i),o=am(n,t,e),l=om(n,t,e),u=Uv(n,t+"scale",e),f=dy(n,t+"displacement",e),d=Ki(n,t+"rotation",e),g=rd(n,t+"rotate-with-view",e),p=gy(n,t+"radius2"),x=gy(n,t+"angle"),v=zv(n,t+"declutter-mode"),E=new Bv({points:s,radius:a,radius2:p,angle:x,declutterMode:v});return function(R){return o&&E.setFill(o(R)),l&&E.setStroke(l(R)),f&&E.setDisplacement(f(R)),d&&E.setRotation(d(R)),g&&E.setRotateWithView(g(R)),u&&E.setScale(u(R)),E}}function YG(n,e){const t="circle-",r=am(n,t,e),i=om(n,t,e),s=Ki(n,t+"radius",e),a=Uv(n,t+"scale",e),o=dy(n,t+"displacement",e),l=Ki(n,t+"rotation",e),u=rd(n,t+"rotate-with-view",e),f=zv(n,t+"declutter-mode"),d=new Th({radius:5,declutterMode:f});return function(g){return s&&d.setRadius(s(g)),r&&d.setFill(r(g)),i&&d.setStroke(i(g)),o&&d.setDisplacement(o(g)),l&&d.setRotation(l(g)),u&&d.setRotateWithView(u(g)),a&&d.setScale(a(g)),d}}function Ki(n,e,t){if(!(e in n))return;const r=hl(n[e],Bt,t);return function(i){return Y2(r(i),e)}}function Uo(n,e,t){if(!(e in n))return null;const r=hl(n[e],Hi,t);return function(i){return qL(r(i),e)}}function ZG(n,e,t){const r=Uo(n,e+"pattern-src",t),i=O4(n,e+"pattern-offset",t),s=O4(n,e+"pattern-size",t),a=qS(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function rd(n,e,t){if(!(e in n))return null;const r=hl(n[e],Ai,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function qS(n,e,t){if(!(e in n))return null;const r=hl(n[e],ya,t);return function(i){return XL(r(i),e)}}function KL(n,e,t){if(!(e in n))return null;const r=hl(n[e],Ju,t);return function(i){return tp(r(i),e)}}function dy(n,e,t){if(!(e in n))return null;const r=hl(n[e],Ju,t);return function(i){const s=tp(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function O4(n,e,t){if(!(e in n))return null;const r=hl(n[e],Ju,t);return function(i){return YL(r(i),e)}}function Uv(n,e,t){if(!(e in n))return null;const r=hl(n[e],Ju|Bt,t);return function(i){return nU(r(i),e)}}function gy(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function QG(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return Xi(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function JG(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function L4(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function N4(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function eU(n,e){const t=n[e];if(t!==void 0)return tp(t,e)}function zv(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function tU(n,e){const t=n[e];if(t!==void 0)return XL(t,e)}function tp(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function qL(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function Y2(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function XL(n,e){if(typeof n=="string")return n;const t=tp(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function YL(n,e){const t=tp(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function nU(n,e){return typeof n=="number"?n:YL(n,e)}const fa={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function D4(n,e,t){return(function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,u=e?0:s[1]*i,f=o?o[0]:0,d=o?o[1]:0;let g=n[0]+l/2+f,p=n[2]-l/2+f,x=n[1]+u/2+d,v=n[3]-u/2+d;g>p&&(g=(p+g)/2,p=g),x>v&&(x=(v+x)/2,v=x);let E=In(r[0],g,p),R=In(r[1],x,v);if(a&&t&&i){const S=30*i;E+=-S*Math.log(1+Math.max(0,g-r[0])/S)+S*Math.log(1+Math.max(0,r[0]-p)/S),R+=-S*Math.log(1+Math.max(0,x-r[1])/S)+S*Math.log(1+Math.max(0,r[1]-v)/S)}return[E,R]})}function rU(n){return n}function ZL(n){return Math.pow(n,3)}function Wd(n){return 1-ZL(1-n)}function iU(n){return 3*n*n-2*n*n*n}function sU(n){return n}function XS(n,e,t,r){const i=Nt(e)/t[0],s=or(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function YS(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),In(r,t/2,e*2)}function aU(n,e,t,r){return e=e!==void 0?e:!0,(function(i,s,a,o){if(i!==void 0){const l=n[0],u=n[n.length-1],f=t?XS(l,t,a,r):l;if(o)return e?YS(i,f,u):In(i,u,f);const d=Math.min(f,i),g=Math.floor(Iv(n,d,s));return n[g]>f&&g<n.length-1?n[g+1]:n[g]}})}function oU(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(a,o,l,u){if(a!==void 0){const f=i?XS(e,i,l,s):e;if(u)return r?YS(a,f,t):In(a,t,f);const d=1e-9,g=Math.ceil(Math.log(e/f)/Math.log(n)-d),p=-o*(.5-d)+.5,x=Math.min(f,a),v=Math.floor(Math.log(e/x)/Math.log(n)+p),E=Math.max(g,v),R=e/Math.pow(n,E);return In(R,t,f)}})}function F4(n,e,t,r,i){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const u=r?XS(n,r,o,i):n;return!t||!l?In(s,e,u):YS(s,u,e)}})}function ZS(n){if(n!==void 0)return 0}function V4(n){if(n!==void 0)return n}function lU(n){const e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function cU(n){const e=dc(5);return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}const uU=42,QS=256,Cw=0;class Za extends vo{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=CS(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&sL(),e.center&&(e.center=Go(e.center,this.projection_)),e.extent&&(e.extent=Qa(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in fa)delete t[o];this.setProperties(t,!0);const r=fU(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=hU(e),s=r.constraint,a=dU(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Go(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Go(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===t){r&&K_(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const f=arguments[i],d={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||iU,callback:r};if(f.center&&(d.sourceCenter=a,d.targetCenter=f.center.slice(),a=d.targetCenter),f.zoom!==void 0?(d.sourceResolution=o,d.targetResolution=this.getResolutionForZoom(f.zoom),o=d.targetResolution):f.resolution&&(d.sourceResolution=o,d.targetResolution=f.resolution,o=d.targetResolution),f.rotation!==void 0){d.sourceRotation=l;const g=gc(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+g,l=d.targetRotation}gU(d)?d.complete=!0:s+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(Or.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Or.ANIMATING]>0}getInteracting(){return this.hints_[Or.INTERACTING]>0}cancelAnimations(){this.setHint(Or.ANIMATING,-this.hints_[Or.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&K_(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l.complete)continue;const u=e-l.start;let f=l.duration>0?u/l.duration:1;f>=1?(l.complete=!0,f=1):s=!1;const d=l.easing(f);if(l.sourceCenter){const g=l.sourceCenter[0],p=l.sourceCenter[1],x=l.targetCenter[0],v=l.targetCenter[1];this.nextCenter_=l.targetCenter;const E=g+d*(x-g),R=p+d*(v-p);this.targetCenter_=[E,R]}if(l.sourceResolution&&l.targetResolution){const g=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(g,0,p,!0);this.targetCenter_=this.calculateCenterZoom(x,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const g=d===1?gc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(Or.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&K_(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],SS(r,e-this.getRotation()),sj(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&G2(e,this.getProjection())}getCenterInternal(){return this.get(fa.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return aL(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();tn(t,"The view center is not defined");const r=this.getResolution();tn(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return tn(i!==void 0,"The view rotation is not defined"),Y1(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(fa.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Qa(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Nt(e)/t[0],i=or(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(s){return t/Math.pow(e,s*i)})}getRotation(){return this.get(fa.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return(function(a){return Math.log(r/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=Pw(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Iv(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=In(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,In(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(tn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){tn(!$d(e),"Cannot fit empty extent provided as `geometry`");const i=Qa(e,this.getProjection());r=p4(i)}else if(e.getType()==="Circle"){const i=Qa(e.getExtent(),this.getProjection());r=p4(i),r.rotate(this.getRotation(),uo(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,u=-1/0,f=-1/0;for(let d=0,g=s.length;d<g;d+=a){const p=s[d]*r-s[d+1]*i,x=s[d]*i+s[d+1]*r;o=Math.min(o,p),l=Math.min(l,x),u=Math.max(u,p),f=Math.max(f,x)}return[o,l,u,f]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),f=Math.sin(u),d=Math.cos(u),g=uo(o);g[0]+=(i[1]-i[3])/2*l,g[1]+=(i[0]-i[2])/2*l;const p=g[0]*d-g[1]*f,x=g[1]*d+g[0]*f,v=this.getConstrainedCenter([p,x],l),E=t.callback?t.callback:Zg;t.duration!==void 0?this.animateInternal({resolution:l,center:v,duration:t.duration,easing:t.easing},E):(this.targetResolution_=l,this.targetCenter_=v,this.applyTargetState_(!1,!0),K_(E,!0))}centerOn(e,t,r){this.centerOnInternal(Go(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(Pw(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),l=Pw(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=G2(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Go(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Go(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Go(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(fa.ROTATION)!==i&&this.set(fa.ROTATION,i),this.get(fa.RESOLUTION)!==a&&(this.set(fa.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(fa.CENTER)||!Q1(this.get(fa.CENTER),o))&&this.set(fa.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!Q1(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:Wd,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Or.INTERACTING,1)}endInteraction(e,t,r){r=r&&Go(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Or.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function K_(n,e){setTimeout(function(){n(e)},0)}function hU(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return D4(n.extent,n.constrainOnlyCenter,t)}const e=CS(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,D4(t,!1,!1)}return rU}function fU(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:Cw,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,g=CS(n.projection,"EPSG:3857"),p=g.getExtent();let x=n.constrainOnlyCenter,v=n.extent;if(!u&&!v&&g.isGlobal()&&(x=!1,v=p),n.resolutions!==void 0){const E=n.resolutions;t=E[a],r=E[o]!==void 0?E[o]:E[E.length-1],n.constrainResolution?e=aU(E,f,!x&&v,d):e=F4(t,r,f,!x&&v,d)}else{const R=(p?Math.max(Nt(p),or(p)):360*vd.degrees/g.getMetersPerUnit())/QS/Math.pow(2,Cw),S=R/Math.pow(2,28-Cw);t=n.maxResolution,t!==void 0?a=0:t=R/Math.pow(l,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,o):r=R/Math.pow(l,o):r=S),o=a+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,o-a),n.constrainResolution?e=oU(l,t,r,f,!x&&v,d):e=F4(t,r,f,!x&&v,d)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:l}}function dU(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?cU():t===!1?V4:typeof t=="number"?lU(t):V4}return ZS}function gU(n){return!(n.sourceCenter&&n.targetCenter&&!Q1(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Pw(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,a=-a;const u=o*s-l*a,f=l*s+o*a;return[u,f]}const an={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class QL extends vo{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[an.OPACITY]=e.opacity!==void 0?e.opacity:1,tn(typeof t[an.OPACITY]=="number","Layer opacity must be a number"),t[an.VISIBLE]=e.visible!==void 0?e.visible:!0,t[an.Z_INDEX]=e.zIndex,t[an.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[an.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[an.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[an.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=In(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return wt()}getLayerStatesArray(e){return wt()}getExtent(){return this.get(an.EXTENT)}getMaxResolution(){return this.get(an.MAX_RESOLUTION)}getMinResolution(){return this.get(an.MIN_RESOLUTION)}getMinZoom(){return this.get(an.MIN_ZOOM)}getMaxZoom(){return this.get(an.MAX_ZOOM)}getOpacity(){return this.get(an.OPACITY)}getSourceState(){return wt()}getVisible(){return this.get(an.VISIBLE)}getZIndex(){return this.get(an.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(an.EXTENT,e)}setMaxResolution(e){this.set(an.MAX_RESOLUTION,e)}setMinResolution(e){this.set(an.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(an.MAX_ZOOM,e)}setMinZoom(e){this.set(an.MIN_ZOOM,e)}setOpacity(e){tn(typeof e=="number","Layer opacity must be a number"),this.set(an.OPACITY,e)}setVisible(e){this.set(an.VISIBLE,e)}setZIndex(e){this.set(an.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class np extends QL{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(an.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(an.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(xn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ut(e,St.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Za?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return JS(i,t.viewState)&&(!s||Ri(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof Za?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(an.MAP,e)}getMapInternal(){return this.get(an.MAP)}setMap(e){this.mapPrecomposeKey_&&(xn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(xn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ut(e,Xs.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ut(this,St.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);tn(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(an.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function JS(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const j4={RENDER_ORDER:"renderOrder"};class JL extends np{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(j4.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new VL(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(j4.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?jL:e;const t=mU(e);this.styleFunction_=e===null?void 0:ZB(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function mU(n){if(n===void 0)return jL;if(!n)return null;if(typeof n=="function"||n instanceof bi)return n;if(!Array.isArray(n))return k4([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof bi){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof bi))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return $G(i)}return k4(n)}class $v extends JL{constructor(e){super(e)}createRenderer(){return new yG(this)}}const Gl={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Zl extends yo{constructor(e,t){super(e),this.layer=t}}const Mw={LAYERS:"layers"};let Wv=class eN extends QL{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Mw.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new qs(r.slice(),{unique:!0}):tn(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new qs(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(xn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ut(e,$i.ADD,this.handleLayersAdd_,this),Ut(e,$i.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(xn);Wm(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new Zl(Gl.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[Ut(e,_d.PROPERTYCHANGE,this.handleLayerChange_,this),Ut(e,St.CHANGE,this.handleLayerChange_,this)];e instanceof eN&&t.push(Ut(e,Gl.ADDLAYER,this.handleLayerGroupAdd_,this),Ut(e,Gl.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ht(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Zl(Gl.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Zl(Gl.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Zl(Gl.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Ht(t);this.listenerKeys_[r].forEach(xn),delete this.listenerKeys_[r],this.dispatchEvent(new Zl(Gl.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(Mw.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new Zl(Gl.REMOVELAYER,r[i]))}this.set(Mw.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const l=t[a];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=Ko(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}};const gt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class eI extends Hm{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(St.CHANGE)}release(){this.setState(gt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==gt.EMPTY){if(this.state!==gt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){wt()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:ZL(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Z2(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const pU=new Error("disposed"),_U=[256,256];class B4 extends eI{constructor(e){const t=gt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Z2(this.data_);return e?[e.width,e.height]:_U}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==gt.IDLE&&this.state!==gt.ERROR)return;this.state=gt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=gt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=gt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(pU),this.controller_=null),super.disposeInternal()}}class tN extends eI{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,Ts?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=gt.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=gt.ERROR,this.unlistenImage_(),this.image_=yU(),this.changed()}handleImageLoad_(){if(Ts)this.state=gt.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=gt.LOADED:this.state=gt.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==gt.ERROR&&(this.state=gt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==gt.IDLE&&(this.state=gt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=gB(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function yU(){const n=wr(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let bw;const id=[];function G4(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function kw(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function vU(){if(bw===void 0){const n=wr(6,6,id);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",G4(n,4,5,4,0),G4(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;bw=kw(e,0)||kw(e,4)||kw(e,8),Dv(n),id.push(n.canvas)}return bw}function my(n,e,t,r){const i=Zm(t,e,n);let s=ny(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||Xu(l,i)){const u=ny(n,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function xU(n,e,t,r){const i=uo(t);let s=my(n,e,i,r);return(!isFinite(s)||s<=0)&&HO(t,function(a){return s=my(n,e,a,r),isFinite(s)&&s>0}),s}function nN(n,e,t,r,i,s,a,o,l,u,f,d,g,p){const x=wr(Math.round(t*n),Math.round(t*e),id);if(d||(x.imageSmoothingEnabled=!1),l.length===0)return x.canvas;x.scale(t,t);function v(N){return Math.round(N*t)/t}x.globalCompositeOperation="lighter";const E=As();l.forEach(function(N,z,M){$O(E,N.extent)});let R;const S=t/r,C=(d?1:1+Math.pow(2,-24))/S;(!g||l.length!==1||u!==0)&&(R=wr(Math.round(Nt(E)*S),Math.round(or(E)*S),id),d||(R.imageSmoothingEnabled=!1),l.forEach(function(N,z,M){if(N.image.width>0&&N.image.height>0){if(N.clipExtent){R.save();const U=(N.clipExtent[0]-E[0])*S,V=-(N.clipExtent[3]-E[3])*S,Ae=Nt(N.clipExtent)*S,be=or(N.clipExtent)*S;R.rect(d?U:Math.round(U),d?V:Math.round(V),d?Ae:Math.round(U+Ae)-Math.round(U),d?be:Math.round(V+be)-Math.round(V)),R.clip()}const P=(N.extent[0]-E[0])*S,b=-(N.extent[3]-E[3])*S,D=Nt(N.extent)*S,B=or(N.extent)*S;R.drawImage(N.image,u,u,N.image.width-2*u,N.image.height-2*u,d?P:Math.round(P),d?b:Math.round(b),d?D:Math.round(P+D)-Math.round(P),d?B:Math.round(b+B)-Math.round(b)),N.clipExtent&&R.restore()}}));const O=xh(a);return o.getTriangles().forEach(function(N,z,M){const P=N.source,b=N.target;let D=P[0][0],B=P[0][1],U=P[1][0],V=P[1][1],Ae=P[2][0],be=P[2][1];const Pe=v((b[0][0]-O[0])/s),Me=v(-(b[0][1]-O[1])/s),he=v((b[1][0]-O[0])/s),ae=v(-(b[1][1]-O[1])/s),Ee=v((b[2][0]-O[0])/s),J=v(-(b[2][1]-O[1])/s),F=D,re=B;D=0,B=0,U-=F,V-=re,Ae-=F,be-=re;const te=[[U,V,0,0,he-Pe],[Ae,be,0,0,Ee-Pe],[0,0,U,V,ae-Me],[0,0,Ae,be,J-Me]],Y=ij(te);if(!Y)return;if(x.save(),x.beginPath(),vU()||!d){x.moveTo(he,ae);const se=4,ne=Pe-he,k=Me-ae;for(let Te=0;Te<se;Te++)x.lineTo(he+v((Te+1)*ne/se),ae+v(Te*k/(se-1))),Te!=se-1&&x.lineTo(he+v((Te+1)*ne/se),ae+v((Te+1)*k/(se-1)));x.lineTo(Ee,J)}else x.moveTo(he,ae),x.lineTo(Pe,Me),x.lineTo(Ee,J);x.clip(),x.transform(Y[0],Y[2],Y[1],Y[3],Pe,Me),x.translate(E[0]-F,E[3]-re);let fe;if(R)fe=R.canvas,x.scale(C,-C);else{const se=l[0],ne=se.extent;fe=se.image,x.scale(Nt(ne)/fe.width,-or(ne)/fe.height)}x.drawImage(fe,0,0),x.restore()}),R&&(Dv(R),id.push(R.canvas)),f&&(x.save(),x.globalCompositeOperation="source-over",x.strokeStyle="black",x.lineWidth=1,o.getTriangles().forEach(function(N,z,M){const P=N.target,b=(P[0][0]-O[0])/s,D=-(P[0][1]-O[1])/s,B=(P[1][0]-O[0])/s,U=-(P[1][1]-O[1])/s,V=(P[2][0]-O[0])/s,Ae=-(P[2][1]-O[1])/s;x.beginPath(),x.moveTo(B,U),x.lineTo(b,D),x.lineTo(V,Ae),x.closePath(),x.stroke()}),x.restore()),x.canvas}const EU=10,U4=.25;class rN{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let l={};const u=o?B2(C=>xr(o,Zm(C,this.targetProj_,this.sourceProj_))):Jg(this.targetProj_,this.sourceProj_);this.transformInv_=function(C){const O=C[0]+"/"+C[1];return l[O]||(l[O]=u(C)),l[O]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Nt(i)>=Nt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Nt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Nt(this.targetProj_.getExtent()):null;const f=xh(r),d=Pv(r),g=Cv(r),p=Rv(r),x=this.transformInv_(f),v=this.transformInv_(d),E=this.transformInv_(g),R=this.transformInv_(p),S=EU+(a?Math.max(0,Math.ceil(Math.log2(N2(r)/(a*a*256*256)))):0);if(this.addQuad_(f,d,g,p,x,v,E,R,S),this.wrapsXInSource_){let C=1/0;this.triangles_.forEach(function(O,N,z){C=Math.min(C,O.source[0][0],O.source[1][0],O.source[2][0])}),this.triangles_.forEach(O=>{if(Math.max(O.source[0][0],O.source[1][0],O.source[2][0])-C>this.sourceWorldWidth_/2){const N=[[O.source[0][0],O.source[0][1]],[O.source[1][0],O.source[1][1]],[O.source[2][0],O.source[2][1]]];N[0][0]-C>this.sourceWorldWidth_/2&&(N[0][0]-=this.sourceWorldWidth_),N[1][0]-C>this.sourceWorldWidth_/2&&(N[1][0]-=this.sourceWorldWidth_),N[2][0]-C>this.sourceWorldWidth_/2&&(N[2][0]-=this.sourceWorldWidth_);const z=Math.min(N[0][0],N[1][0],N[2][0]);Math.max(N[0][0],N[1][0],N[2][0])-z<this.sourceWorldWidth_/2&&(O.source=N)}})}l={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,l,u){const f=KP([s,a,o,l]),d=this.sourceWorldWidth_?Nt(f)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1;let x=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const E=KP([e,t,r,i]);x=Nt(E)/this.targetWorldWidth_>U4||x}!p&&this.sourceProj_.isGlobal()&&d&&(x=d>U4||x)}if(!x&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!Ri(f,this.maxSourceExtent_))return;let v=0;if(!x&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)x=!0;else if(v=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(u>0){if(!x){const E=[(e[0]+r[0])/2,(e[1]+r[1])/2],R=this.transformInv_(E);let S;p?S=(gc(s[0],g)+gc(o[0],g))/2-gc(R[0],g):S=(s[0]+o[0])/2-R[0];const C=(s[1]+o[1])/2-R[1];x=S*S+C*C>this.errorThresholdSquared_}if(x){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const E=[(t[0]+r[0])/2,(t[1]+r[1])/2],R=this.transformInv_(E),S=[(i[0]+e[0])/2,(i[1]+e[1])/2],C=this.transformInv_(S);this.addQuad_(e,t,E,S,s,a,R,C,u-1),this.addQuad_(S,E,r,i,C,R,o,l,u-1)}else{const E=[(e[0]+t[0])/2,(e[1]+t[1])/2],R=this.transformInv_(E),S=[(r[0]+i[0])/2,(r[1]+i[1])/2],C=this.transformInv_(S);this.addQuad_(e,E,S,i,s,R,C,l,u-1),this.addQuad_(E,t,r,S,R,a,o,C,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(v&11)==0&&this.addTriangle_(e,r,i,s,o,l),(v&14)==0&&this.addTriangle_(e,r,t,s,o,a),v&&((v&13)==0&&this.addTriangle_(t,i,e,a,l,s),(v&7)==0&&this.addTriangle_(t,i,r,a,l,o))}calculateSourceExtent(){const e=As();return this.triangles_.forEach(function(t,r,i){const s=t.source;wg(e,s[0]),wg(e,s[1]),wg(e,s[2])}),e}getTriangles(){return this.triangles_}}const iN=.5;class sN extends eI{constructor(e,t,r,i,s,a,o,l,u,f,d,g){super(s,gt.IDLE,g),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=i.getTileCoordExtent(this.wrappedTileCoord_),x=this.targetTileGrid_.getExtent();let v=this.sourceTileGrid_.getExtent();const E=x?Ko(p,x):p;if(N2(E)===0){this.state=gt.EMPTY;return}const R=e.getExtent();R&&(v?v=Ko(v,R):v=R);const S=i.getResolution(this.wrappedTileCoord_[0]),C=xU(e,r,E,S);if(!isFinite(C)||C<=0){this.state=gt.EMPTY;return}const O=f!==void 0?f:iN;if(this.triangulation_=new rN(e,r,E,v,C*O,S),this.triangulation_.getTriangles().length===0){this.state=gt.EMPTY;return}this.sourceZ_=t.getZForResolution(C);let N=this.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(N[1]=In(N[1],v[1],v[3]),N[3]=In(N[3],v[1],v[3])):N=Ko(N,v)),!N2(N))this.state=gt.EMPTY;else{let z=0,M=0;e.canWrapX()&&(z=Nt(R),M=Math.floor((N[0]-R[0])/z)),XO(N.slice(),e,!0).forEach(b=>{const D=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let B=D.minX;B<=D.maxX;B++)for(let U=D.minY;U<=D.maxY;U++){const V=u(this.sourceZ_,B,U,o);if(V){const Ae=M*z;this.sourceTiles_.push({tile:V,offset:Ae})}}++M}),this.sourceTiles_.length===0&&(this.state=gt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==gt.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=gt.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=nN(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=gt.LOADED}this.changed()}load(){if(this.state==gt.IDLE){this.state=gt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==gt.IDLE||r==gt.LOADING){e++;const i=Ut(t,St.CHANGE,s=>{const a=t.getState();(a==gt.LOADED||a==gt.ERROR||a==gt.EMPTY)&&(xn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==gt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(xn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Dv(this.canvas_.getContext("2d")),id.push(this.canvas_),this.canvas_=null),super.release()}}class tI{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function yf(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new tI(n,e,t,r)}class z4{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Sv&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return tn(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return tn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){tn(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function py(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function wU(n,e,t){return n+"/"+e+"/"+t}function I1(n,e,t,r,i){return`${Ht(n)},${e},${wU(t,r,i)}`}function aN(n){return TU(n[0],n[1],n[2])}function TU(n,e,t){return(e<<n)+t}function SU(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class IU extends HS{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=Ko(l,Qa(t.extent,i.projection))),!o[Or.ANIMATING]&&!o[Or.INTERACTING]&&!$d(l))if(a){const u=i.projection,f=a.getImage(l,s,r,u);f&&(this.loadImage(f)?this.image=f:f.getState()===ut.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=xr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Xu(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),l=Nt(a),u=Math.floor(o.width*((i[0]-a[0])/l));if(u<0||u>=o.width)return null;const f=or(a),d=Math.floor(o.height*((a[3]-i[1])/f));return d<0||d>=o.height?null:this.getImageData(o,u,d)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,d=e.viewState,g=d.center,p=d.resolution,x=f*a/(p*l),v=f*o/(p*l);this.prepareContainer(e,t);const E=this.context.canvas.width,R=this.context.canvas.height,S=this.getRenderContext(e);let C=!1,O=!0;if(u.extent){const b=Qa(u.extent,d.projection);O=Ri(b,e.extent),C=O&&!rc(b,e.extent),C&&this.clipUnrotated(S,e,b)}const N=r.getImage(),z=ho(this.tempTransform,E/2,R/2,x,v,0,l*(i[0]-g[0])/a,l*(g[1]-i[3])/o);this.renderedResolution=o*f/l;const M=N.width*z[0],P=N.height*z[3];if(this.getLayer().getSource().getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,e),O&&M>=.5&&P>=.5){const b=z[4],D=z[5],B=u.opacity;B!==1&&(S.save(),S.globalAlpha=B),S.drawImage(N,0,0,+N.width,+N.height,b,D,M,P),B!==1&&S.restore()}return this.postRender(this.context,e),C&&S.restore(),S.imageSmoothingEnabled=!0,this.container}}class AU extends np{constructor(e){e=e||{},super(e)}}class RU extends AU{constructor(e){super(e)}createRenderer(){return new IU(this)}getData(e){return super.getData(e)}}function Ow(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function CU(n,e,t){const r=n[t];return r?r.delete(e):!1}function $4(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Ko(e,Qa(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Ko(e,i))}return e}class PU extends HS{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=As(),this.tempTileRange_=new tI(0,0,0,0),this.tempTileCoord_=py(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new z4(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new z4(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),l=I1(o,o.getKey(),e,t,r);let u;if(s.containsKey(l))u=s.get(l);else{const f=i.viewState.projection,d=o.getProjection();if(u=o.getTile(e,t,r,i.pixelRatio,f,!d||Gu(d,f)?void 0:this.getSourceTileCache()),!u)return null;s.set(l,u)}return u}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=xr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Xu(s,i))return null;const a=t.viewState,o=r.getRenderSource(),l=o.getTileGridForProjection(a.projection),u=o.getTilePixelRatio(t.pixelRatio);for(let f=l.getZForResolution(a.resolution);f>=l.getMinZoom();--f){const d=l.getTileCoordForCoordAndZ(i,f),g=this.getTile(f,d[1],d[2],t);if(!g||g.getState()!==gt.LOADED)continue;const p=l.getOrigin(f),x=Xi(l.getTileSize(f)),v=l.getResolution(f);let E;if(g instanceof tN||g instanceof sN)E=g.getImage();else if(g instanceof B4){if(E=Z2(g.getData()),!E)continue}else continue;const R=Math.floor(u*((i[0]-p[0])/v-d[1]*x[0])),S=Math.floor(u*((p[1]-i[1])/v-d[2]*x[1])),C=Math.round(u*o.getGutterForProjection(a.projection));return this.getImageData(E,R+C,S+C)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),l=o.getRenderSource(),u=l.getTileGridForProjection(a.projection),f=Ht(l);f in e.wantedTiles||(e.wantedTiles[f]={});const d=e.wantedTiles[f],g=o.getMapInternal(),p=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(o.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):u.getResolution(0)),l.zDirection)),x=a.rotation,v=x?KO(a.center,a.resolution,x,e.size):void 0;for(let E=r;E>=p;--E){const R=u.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),S=u.getResolution(E);for(let C=R.minX;C<=R.maxX;++C)for(let O=R.minY;O<=R.maxY;++O){if(x&&!u.tileCoordIntersectsViewport([E,C,O],v))continue;const N=this.getTile(E,C,O,e);if(!N||!Ow(i,N,E))continue;const M=N.getKey();if(d[M]=!0,N.getState()===gt.IDLE&&!e.tileQueue.isKeyQueued(M)){const P=py(E,C,O,this.tempTileCoord_);e.tileQueue.enqueue([N,f,u.getTileCoordCenter(P),S])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const u=I1(this.getLayer().getSource(),o[l],i,s,a);if(r.containsKey(u)){const f=r.peek(u);if(f.getState()===gt.LOADED)return f.endTransition(Ht(this)),Ow(t,f,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,l=this.getLayer().getRenderSource(),u=l.getKey();for(let f=s.minX;f<=s.maxX;++f)for(let d=s.minY;d<=s.maxY;++d){const g=I1(l,u,r,f,d);let p=!1;if(o.containsKey(g)){const x=o.peek(g);x.getState()===gt.LOADED&&(Ow(i,x,r),p=!0)}p||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,a=i.resolution,o=i.center,l=e.pixelRatio,u=this.getLayer(),f=u.getSource(),d=f.getTileGridForProjection(s),g=d.getZForResolution(a,f.zDirection),p=d.getResolution(g),x=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==x&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=x):this.renderedSourceKey_=x;let v=e.extent;const E=f.getTilePixelRatio(l);this.prepareContainer(e,t);const R=this.context.canvas.width,S=this.context.canvas.height,C=r.extent&&Qa(r.extent);C&&(v=Ko(v,Qa(r.extent)));const O=p*R/2/E,N=p*S/2/E,z=[o[0]-O,o[1]-N,o[0]+O,o[1]+N],M={};this.renderedTiles.length=0;const P=u.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const he=d.getZForResolution(i.nextResolution,f.zDirection),ae=$4(e,e.nextExtent);this.enqueueTiles(e,ae,he,M,P)}const b=$4(e,v);if(this.enqueueTiles(e,b,g,M,0),P>0&&setTimeout(()=>{this.enqueueTiles(e,b,g-1,M,P-1)},0),!(g in M))return this.container;const D=Ht(this),B=e.time;for(const he of M[g]){const ae=he.getState();if(ae===gt.EMPTY)continue;const Ee=he.tileCoord;if(ae===gt.LOADED&&he.getAlpha(D,B)===1){he.endTransition(D);continue}if(ae!==gt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ee,M)){CU(M,he,g),e.animate=!0;continue}if(this.findAltTiles_(d,Ee,g+1,M))continue;const re=d.getMinZoom();for(let te=g-1;te>=re&&!this.findAltTiles_(d,Ee,te,M);--te);}const U=p/a*l/E,V=this.getRenderContext(e);ho(this.tempTransform,R/2,S/2,U,U,0,-R/2,-S/2),r.extent&&this.clipUnrotated(V,e,C),f.getInterpolate()||(V.imageSmoothingEnabled=!1),this.preRender(V,e);const Ae=Object.keys(M).map(Number);Ae.sort(Ho);let be;const Pe=[],Me=[];for(let he=Ae.length-1;he>=0;--he){const ae=Ae[he],Ee=f.getTilePixelSize(ae,l,s),F=d.getResolution(ae)/p,re=Ee[0]*F*U,te=Ee[1]*F*U,Y=d.getTileCoordForCoordAndZ(xh(z),ae),fe=d.getTileCoordExtent(Y),se=xr(this.tempTransform,[E*(fe[0]-z[0])/p,E*(z[3]-fe[3])/p]),ne=E*f.getGutterForProjection(s);for(const k of M[ae]){if(k.getState()!==gt.LOADED)continue;const Te=k.tileCoord,le=Y[1]-Te[1],We=Math.round(se[0]-(le-1)*re),ce=Y[2]-Te[2],W=Math.round(se[1]-(ce-1)*te),Ie=Math.round(se[0]-le*re),tt=Math.round(se[1]-ce*te),De=We-Ie,Mt=W-tt,Rt=Ae.length===1;let Ct=!1;be=[Ie,tt,Ie+De,tt,Ie+De,tt+Mt,Ie,tt+Mt];for(let wn=0,vi=Pe.length;wn<vi;++wn)if(!Rt&&ae<Me[wn]){const pn=Pe[wn];Ri([Ie,tt,Ie+De,tt+Mt],[pn[0],pn[3],pn[4],pn[7]])&&(Ct||(V.save(),Ct=!0),V.beginPath(),V.moveTo(be[0],be[1]),V.lineTo(be[2],be[3]),V.lineTo(be[4],be[5]),V.lineTo(be[6],be[7]),V.moveTo(pn[6],pn[7]),V.lineTo(pn[4],pn[5]),V.lineTo(pn[2],pn[3]),V.lineTo(pn[0],pn[1]),V.clip())}Pe.push(be),Me.push(ae),this.drawTile(k,e,Ie,tt,De,Mt,ne,Rt),Ct&&V.restore(),this.renderedTiles.unshift(k),this.updateUsedTiles(e.usedTiles,f,k)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!yd(this.renderedExtent_,z),this.renderedExtent_=z,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&V.restore(),V.imageSmoothingEnabled=!0,this.renderComplete){const he=(ae,Ee)=>{const J=Ht(f),F=Ee.wantedTiles[J],re=F?Object.keys(F).length:0;this.updateCacheSize(re),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(he)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,l){let u;if(e instanceof B4){if(u=Z2(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const f=this.getRenderContext(t),d=Ht(this),g=t.layerStatesArray[t.layerIndex],p=g.opacity*(l?e.getAlpha(d,t.time):1),x=p!==f.globalAlpha;x&&(f.save(),f.globalAlpha=p),f.drawImage(u,o,o,u.width-2*o,u.height-2*o,r,i,s,a),x&&f.restore(),p!==g.opacity?t.animate=!0:l&&e.endTransition(d)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Ht(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const q_={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class MU extends np{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(q_.PRELOAD)}setPreload(e){this.set(q_.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(q_.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(q_.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class vu extends MU{constructor(e){super(e)}createRenderer(){return new PU(this,{cacheSize:this.getCacheSize()})}}function Q2(n){return Array.isArray(n)?Math.min(...n):n}const vf=[0,0,0],Ul=5;class oN{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,tn(XV(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,tn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=xh(r)),tn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,tn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:QS,tn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new tI(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,l=i.maxY;o<=l;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=yf(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return yf(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return yf(s,a,s,a,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(s*l),f=Math.floor(a*l);if(t<i)return yf(u,u,f,f,r);const d=Math.floor(l*(s+1))-1,g=Math.floor(l*(a+1))-1;return yf(u,d,f,g,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,vf);const i=vf[1],s=vf[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,vf);const a=vf[1],o=vf[2];return yf(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=Xi(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Xi(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,l=a+s[0]*i,u=o+s[1]*i;return Tc(a,o,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),l=this.getOrigin(a),u=Xi(this.getTileSize(a),this.tmpSize_);let f=o*(e-l[0])/r/u[0],d=o*(l[1]-t)/r/u[1];return i?(f=ic(f,Ul)-1,d=ic(d,Ul)-1):(f=j_(f,Ul),d=j_(d,Ul)),py(a,f,d,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),l=Xi(this.getTileSize(r),this.tmpSize_);let u=(e-a[0])/o/l[0],f=(a[1]-t)/o/l[1];return i?(u=ic(u,Ul)-1,f=ic(f,Ul)-1):(u=j_(u,Ul),f=j_(f,Ul)),py(r,u,f,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Iv(this.resolutions_,e,t||0);return In(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return fL(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function lN(n){let e=n.getDefaultTileGrid();return e||(e=LU(n),n.setDefaultTileGrid(e)),e}function bU(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=nI(t);if(!Xu(s,i)){const a=Nt(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function kU(n,e,t,r){r=r!==void 0?r:"top-left";const i=cN(n,e,t);return new oN({extent:n,origin:ej(n,r),resolutions:i,tileSize:t})}function OU(n){const e=n||{},t=e.extent||En("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:cN(t,e.maxZoom,e.tileSize,e.maxResolution)};return new oN(r)}function cN(n,e,t,r){e=e!==void 0?e:uU,t=Xi(t!==void 0?t:QS);const i=or(n),s=Nt(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=r/Math.pow(2,l);return o}function LU(n,e,t,r){const i=nI(n);return kU(i,e,t,r)}function nI(n){n=En(n);let e=n.getExtent();if(!e){const t=180*vd.degrees/n.getMetersPerUnit();e=Tc(-t,-t,t,t)}return e}function rI(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const NU=/\{z\}/g,DU=/\{x\}/g,FU=/\{y\}/g,VU=/\{-y\}/g;function jU(n,e,t,r,i){return n.replace(NU,e.toString()).replace(DU,t.toString()).replace(FU,r.toString()).replace(VU,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function BU(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function GU(n,e){return(function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return jU(n,a,t[1],t[2],s)})}function UU(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=GU(n[i],e);return zU(r)}function zU(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;const i=aN(e),s=gc(i,n.length);return n[s](e,t,r)})}class $U extends WS{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Xi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Ht(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s,a){return wt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:lN(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=Xi(i.getTileSize(e),this.tmpSize);return s==1?a:YB(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=bU(i,e,r)),SU(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class WU extends yo{constructor(e,t){super(e),this.tile=t}}const Lw={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class iI extends $U{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===iI.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Ht(t),i=t.getState();let s;i==gt.LOADING?(this.tileLoadingKeys_[r]=!0,s=Lw.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==gt.ERROR?Lw.TILELOADERROR:i==gt.LOADED?Lw.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new WU(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=BU(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(UU(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class uN extends iI{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:hN,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:tN,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Gu(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Gu(t,e)))return this.tileGrid;const r=Ht(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=lN(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,i,s):void 0,f=new this.tileClass(o,u!==void 0?gt.IDLE:gt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,f.addEventListener(St.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,r,i,s,a){const o=this.getProjection();if(!o||!s||Gu(o,s))return this.getTileInternal(e,t,r,i,o||s);const l=[e,t,r],u=this.getKey(),f=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new sN(o,f,s,d,l,g,this.getTilePixelRatio(i),this.getGutter(),(x,v,E,R)=>this.getTileInternal(x,v,E,R,o,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=u,p}getTileInternal(e,t,r,i,s,a){const o=this.getKey(),l=I1(this,o,e,t,r);if(a&&a.containsKey(l))return a.get(l);const u=this.createTile_(e,t,r,i,s,o);return a?.set(l,u),u}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=En(e);if(r){const i=Ht(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function hN(n,e){if(Ts){const t=n.getCrossOrigin();let r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const a=n.getImage();a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),s.close?.(),a.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class Lf extends uN{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:OU({extent:nI(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const HU="modulepreload",KU=function(n){return"/detectorapp-nl/"+n},W4={},at=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(t.map(u=>{if(u=KU(u),u in W4)return;W4[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":HU,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((p,x)=>{g.addEventListener("load",p),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};class qU extends EL{constructor(e,t,r,i,s,a,o){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const f=u?Ko(r,u):r,d=uo(f),g=my(e,t,d,i),p=iN,x=new rN(e,t,f,l,g*p,i),v=x.calculateSourceExtent(),E=$d(v)?null:a(v,g,s),R=E?ut.IDLE:ut.EMPTY,S=E?E.getPixelRatio():1;super(r,i,S,R),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=x,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=E,this.sourcePixelRatio_=S,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ut.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ut.LOADED){const t=Nt(this.targetExtent_)/this.targetResolution_,r=or(this.targetExtent_)/this.targetResolution_;this.canvas_=nN(t,r,this.sourcePixelRatio_,Q2(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ut.IDLE){this.state=ut.LOADING,this.changed();const e=this.sourceImage_.getState();e==ut.LOADED||e==ut.ERROR?this.reproject_():(this.sourceListenerKey_=Ut(this.sourceImage_,St.CHANGE,t=>{const r=this.sourceImage_.getState();(r==ut.LOADED||r==ut.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){xn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const lc=4,Nw={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class XU extends yo{constructor(e,t){super(e),this.image=t}}class YU extends WS{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Iv(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Gu(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Gu(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&yd(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new qU(s,i,e,t,r,(a,o,l)=>this.getImageInternal(a,o,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=fN(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&rc(this.wantedExtent_,s)||rc(this.image.getExtent(),s))&&(this.wantedResolution_&&Q2(this.wantedResolution_)===a||Q2(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new EL(s,a,r,this.loader),this.image.addEventListener(St.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case ut.LOADING:this.loading=!0,r=Nw.IMAGELOADSTART;break;case ut.LOADED:this.loading=!1,r=Nw.IMAGELOADEND;break;case ut.ERROR:this.loading=!1,r=Nw.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new XU(r,t))}}function ZU(n,e){n.getImage().src=e}function fN(n,e,t,r){const i=e/t,s=uo(n),a=ic(Nt(n)/i,lc),o=ic(or(n)/i,lc),l=ic((r-1)*a/2,lc),u=a+2*l,f=ic((r-1)*o/2,lc),d=o+2*f;return Y1(s,i,0,[u,d])}function QU(n,e,t,r,i,s){const a=i.getCode().split(/:(?=\d+$)/).pop(),o=t/r,l=[Z1(Nt(e)/o,lc),Z1(or(e)/o,lc)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return rI(u,s)}function JU(n){const e=n.load?n.load:TL,t=En(n.projection||"EPSG:3857"),r=n.ratio??1.5,i=n.crossOrigin??null;return function(s,a,o){o=n.hidpi?o:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,n.params),s=fN(s,a,o,r);const u=QU(n.url,s,a,o,t,l),f=new Image;return f.crossOrigin=i,e(f,u).then(d=>{const g=Nt(s)/d.width*o;return{image:d,extent:s,resolution:g,pixelRatio:o}})}}class ez extends YU{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:ZU,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=JU({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),TL(s))})),super.getImageInternal(e,t,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const J2="1.3.0";function tz(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const s=r.getAxisOrientation(),a=YO(i.VERSION,"1.3")>=0;i[a?"CRS":"SRS"]=r.getCode();const o=a&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=o.join(","),rI(n,i)}function nz(n,e,t,r,i,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=e/t,l=[Z1(Nt(n)/o,lc),Z1(or(n)/o,lc)];if(t!=1)switch(a){case"geoserver":const f=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+f:s.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return tz(i,n,l,r,s)}function H4(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:J2,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}const rz='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class iz extends Lf{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[rz];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,a)=>{const o=s.getImage();!Ts&&o instanceof HTMLImageElement&&(o.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||hN)(s,a)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const _y=1/0;class sz{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Wm(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){tn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=_y?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),f=u<i&&r[u]<r[l]?u:l;t[e]=t[f],r[e]=r[f],e=f}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==_y?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=l,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class az extends sz{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(St.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===gt.LOADED||r===gt.ERROR||r===gt.EMPTY){r!==gt.ERROR&&t.removeEventListener(St.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===gt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function oz(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return _y;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class lz extends uN{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=As(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const s=En(r),a=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(a));const l=Zm(e,s,a),u=my(a,s,e,t),f=o.getZForResolution(u,this.zDirection),d=o.getResolution(f),g=o.getTileCoordForCoordAndZ(l,f);if(o.getResolutions().length<=g[0])return;let p=o.getTileCoordExtent(g,this.tmpExtent_);const x=this.gutter_;x!==0&&(p=Qg(p,d*x,p));const v={QUERY_LAYERS:this.params_.LAYERS};Object.assign(v,H4(this.params_,"GetFeatureInfo"),i);const E=Math.floor((l[0]-p[0])/d),R=Math.floor((p[3]-l[1])/d);return v[this.v13_?"I":"X"]=E,v[this.v13_?"J":"Y"]=R,this.getRequestUrl_(g,p,1,a||s,v)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:J2,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,t),rI(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,s){const a=this.urls;if(!a)return;let o;if(a.length==1)o=a[0];else{const l=gc(aN(e),a.length);o=a[l]}return nz(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,o,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||J2;this.v13_=YO(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=i.getResolution(e[0]);let a=i.getTileCoordExtent(e,this.tmpExtent_);const o=this.gutter_;o!==0&&(a=Qg(a,s*o,a));const l=Object.assign({},H4(this.params_,"GetMap"));return this.getRequestUrl_(e,a,t,r,l)}}class Nf extends yo{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class ql extends Nf{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const zn={SINGLECLICK:"singleclick",CLICK:St.CLICK,DBLCLICK:St.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},eT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class cz extends Hm{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ut(r,eT.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ut(r,eT.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(St.TOUCHMOVE,this.boundHandleTouchMove_,yL?{passive:!1}:!1)}emulateClick_(e){let t=new ql(zn.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new ql(zn.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new ql(zn.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==zn.POINTERUP||t.type==zn.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==zn.POINTERDOWN||t.type==zn.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new ql(zn.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(xn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new ql(zn.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ut(r,zn.POINTERMOVE,this.handlePointerMove_,this),Ut(r,zn.POINTERUP,this.handlePointerUp_,this),Ut(this.element_,zn.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ut(this.element_.getRootNode(),zn.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new ql(zn.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ql(zn.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(xn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(St.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(xn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(xn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Xl={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ui={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class Hv extends vo{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)xn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Zg&&this.listenerKeys.push(Ut(e,Xl.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class uz extends Hv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(St.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Jm+" "+GS+(this.collapsed_&&this.collapsible_?" "+c4:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=u,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>BO(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Gc(t,this.renderedAttributions_)){rB(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(c4),this.collapsed_?o4(this.collapseLabel_,this.label_):o4(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class hz extends Hv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(St.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Jm+" "+GS,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(U_)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Wd}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(U_);!s&&r===0?this.element.classList.add(U_):s&&r!==0&&this.element.classList.remove(U_)}this.label_.style.transform=i}this.rotation_=r}}class fz extends Hv{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=l,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(St.CLICK,this.handleClick_.bind(this,r),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=u,d.appendChild(typeof o=="string"?document.createTextNode(o):o),d.addEventListener(St.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+Jm+" "+GS,p=this.element;p.className=g,p.appendChild(f),p.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Wd})):r.setZoom(s)}}}function dz(n){n=n||{};const e=new qs;return(n.zoom===void 0||n.zoom)&&e.push(new fz(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new hz(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new uz(n.attributionOptions)),e}class gz{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const K4={ACTIVE:"active"};class rp extends vo{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(K4.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(K4.ACTIVE,e)}setMap(e){this.map_=e}}function mz(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:sU,center:n.getConstrainedCenter(i)})}}function sI(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:Wd})}class pz extends rp{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==zn.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();sI(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function tT(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const _z=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},yz=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},dN=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?yz(n):!0},vz=Yg,gN=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(tB&&pL&&e.ctrlKey)},mN=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},xz=function(n){const e=n.originalEvent;return pL?e.metaKey:e.ctrlKey},Ez=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},pN=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Dw=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},wz=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class ip extends rp{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==zn.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==zn.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==zn.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==zn.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function aI(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class Tz extends ip{constructor(e){super({stopDown:Av}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:tT(mN,wz);this.condition_=e.onFocusOnly?tT(dN,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(aI(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();aj(s,o.getResolution()),SS(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:Wd})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Sz extends ip{constructor(e){e=e||{},super({stopDown:Av}),this.condition_=e.condition?e.condition:_z,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Dw(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===ZS)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return Dw(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Dw(e)&&gN(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Iz extends Sv{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ac([i])}getGeometry(){return this.geometry_}}const xf={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class K0 extends yo{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class Az extends ip{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Iz(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??gN,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new K0(xf.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new K0(t?xf.BOXEND:xf.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new K0(xf.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new K0(xf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new K0(xf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Rz extends Az{constructor(e){e=e||{};const t=e.condition?e.condition:Ez;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:Wd})}}const mu={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Cz extends rp{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return mN(t)&&pN(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==St.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==mu.DOWN||i==mu.LEFT||i==mu.RIGHT||i==mu.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;i==mu.DOWN?u=-o:i==mu.LEFT?l=-o:i==mu.RIGHT?l=o:u=o;const f=[l,u];SS(f,a.getRotation()),mz(a,f,this.duration_),r.preventDefault(),t=!0}}return!t}}class Pz extends rp{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!xz(t)&&pN(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==St.KEYDOWN||e.type==St.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();sI(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const Mz=40,bz=300;class kz extends rp{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:vz;this.condition_=e.onFocusOnly?tT(dN,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==St.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=Mz;break;case WheelEvent.DOM_DELTA_PAGE:s*=bz;break}if(s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-In(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),sI(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Oz extends ip{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Av),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==ZS&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(aI(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class Lz extends ip{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Av),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(aI(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Nz(n){n=n||{};const e=new qs,t=new gz(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new Sz),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new pz({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new Tz({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new Oz),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new Lz({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new Cz),e.push(new Pz({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new kz({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new Rz({duration:n.zoomDuration})),e}class Dz extends Sv{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){wt()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;ho(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),oL(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,l){let u;const f=t.viewState;function d(O,N,z,M){return s.call(a,N,O?z:null,M)}const g=f.projection,p=ZO(e.slice(),g),x=[[0,0]];if(g.canWrapX()&&i){const O=g.getExtent(),N=Nt(O);x.push([-N,0],[N,0])}const v=t.layerStatesArray,E=v.length,R=[],S=[];for(let O=0;O<x.length;O++)for(let N=E-1;N>=0;--N){const z=v[N],M=z.layer;if(M.hasRenderer()&&JS(z,f)&&o.call(l,M)){const P=M.getRenderer(),b=M.getSource();if(P&&b){const D=b.getWrapX()?p:e,B=d.bind(null,z.managed);S[0]=D[0]+x[O][0],S[1]=D[1]+x[O][1],u=P.forEachFeatureAtCoordinate(S,t,r,B,R)}if(u)return u}}if(R.length===0)return;const C=1/R.length;return R.forEach((O,N)=>O.distanceSq+=N*C),R.sort((O,N)=>O.distanceSq-N.distanceSq),R.some(O=>u=O.callback(O.feature,O.layer,O.geometry)),u}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,Yg,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){wt()}scheduleExpireIconCache(e){Ys.canExpireCache()&&e.postRenderFunctions.push(Fz)}}function Fz(n,e){Ys.expire()}class Vz extends Dz{constructor(e){super(e),this.fontChangeListenerKey_=Ut(bf,_d.PROPERTYCHANGE,e.redrawText,e),this.element_=Ts?vL():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Jm+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new zL(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){xn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Xs.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,f)=>u.zIndex-f.zIndex);t.some(u=>u.layer instanceof JL&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let u=0,f=t.length;u<f;++u){const d=t[u];e.layerIndex=u;const g=d.layer,p=g.getSourceState();if(!JS(d,i)||p!="ready"&&p!="undefined"){g.unrender();continue}const x=g.render(e,a);x&&(x!==a&&(this.children_.push(x),a=x),s.push(d))}this.declutter(e,s),iB(this.element_,this.children_);const l=this.getMap().getTargetElement();if(ac(l)){const u=l.getContext("2d");for(const f of this.children_){const d=f.firstElementChild||f,g=f.style.backgroundColor;if(g&&(!ac(d)||d.width>0)&&(u.fillStyle=g,u.fillRect(0,0,l.width,l.height)),ac(d)&&d.width>0){const p=f.style.opacity||d.style.opacity;u.globalAlpha=p===""?1:Number(p);const x=d.style.transform;if(x)u.setTransform(...U2(x));else{const v=parseFloat(d.style.width)/d.width,E=parseFloat(d.style.height)/d.height;u.setTransform(v,0,0,E,0,0)}u.drawImage(d,0,0)}}u.globalAlpha=1,u.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(Xs.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function _N(n){if(n instanceof np){n.setMapInternal(null);return}n instanceof Wv&&n.getLayers().forEach(_N)}function yN(n,e){if(n instanceof np){n.setMapInternal(e);return}if(n instanceof Wv){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)yN(t[r],e)}}let jz=class extends vo{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Bz(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:nB,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ia(),this.pixelToCoordinateTransform_=Ia(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Ts||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Ts||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Ts?new qs:dz()),this.interactions=t.interactions||(Ts?new qs:Nz({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new az(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ui.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ui.VIEW,this.handleViewChanged_),this.addChangeListener(ui.SIZE,this.handleSizeChanged_),this.addChangeListener(ui.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof Za)&&e.view.then(function(i){r.setView(new Za(i))}),this.controls.addEventListener($i.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener($i.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener($i.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener($i.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener($i.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener($i.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){yN(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:Yg,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Wv?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:Yg,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(ui.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return G2(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?xr(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ui.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof qs){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Go(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?xr(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ui.SIZE)}getView(){return this.get(ui.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return oz(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new ql(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===eT.POINTERDOWN||r===St.WHEEL||r===St.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[Or.ANIMATING]||a[Or.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Xs.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Xs.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Nf(Xl.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Nf(Xl.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)xn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(St.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(St.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!ac(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(ac(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Vz(this)),!ac(t)){this.mapBrowserEventHandler_=new cz(this,this.moveTolerance_);for(const i in zn)this.mapBrowserEventHandler_.addEventListener(zn[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(St.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(St.WHEEL,this.boundHandleBrowserEvent_,yL?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[Ut(r,St.KEYDOWN,this.handleBrowserEvent,this),Ut(r,St.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(xn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(xn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ut(e,_d.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ut(e,St.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(xn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Zl("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ut(e,_d.PROPERTYCHANGE,this.render,this),Ut(e,St.CHANGE,this.render,this),Ut(e,"addlayer",this.handleLayerAdd_,this),Ut(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){_N(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&E4(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Y1(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:Ht(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=Y1(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!$d(this.previousExtent_)&&!yd(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Nf(Xl.MOVESTART,this,i)),this.previousExtent_=qm(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Or.ANIMATING]&&!s.viewHints[Or.INTERACTING]&&!yd(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Nf(Xl.MOVEEND,this,s)),UO(s.extent,this.previousExtent_))),this.dispatchEvent(new Nf(Xl.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Xl.LOADSTART)||this.hasListener(Xl.LOADEND)||this.hasListener(Xs.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Zl("removelayer",t)),this.set(ui.LAYERGROUP,e)}setSize(e){this.set(ui.SIZE,e)}setTarget(e){this.set(ui.TARGET,e)}setView(e){if(!e||e instanceof Za){this.set(ui.VIEW,e);return}this.set(ui.VIEW,new Za);const t=this;e.then(function(r){t.setView(new Za(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){let i,s;if(ac(e))i=e.width,s=e.height;else{const a=getComputedStyle(e);i=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),s=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(t=[Math.max(0,i),Math.max(0,s)],!E4(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&JO("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!Gc(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Bz(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Wv({layers:n.layers});t[ui.LAYERGROUP]=r,t[ui.TARGET]=n.target,t[ui.VIEW]=n.view instanceof Za?n.view:new Za;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new qs(n.controls.slice()):(tn(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new qs(n.interactions.slice()):(tn(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new qs(n.overlays.slice()):(tn(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new qs,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const Fw="units",Gz=[1,2,5],q0=25.4/.28;class Uz extends Hv{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Jm,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Fw,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(Fw)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(Fw,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let a=ny(r,e.resolution,t,s);const o=this.minWidth_*(this.dpi_||q0)/q0,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||q0)/q0:void 0;let u=o*a,f="";if(i=="degrees"){const C=vd.degrees;u*=C,u<C/60?(f="",a*=3600):u<C?(f="",a*=60):f=""}else if(i=="imperial")u<.9144?(f="in",a/=.0254):u<1609.344?(f="ft",a/=.3048):(f="mi",a/=1609.344);else if(i=="nautical")a/=1852,f="NM";else if(i=="metric")u<1e-6?(f="nm",a*=1e9):u<.001?(f="m",a*=1e6):u<1?(f="mm",a*=1e3):u<1e3?f="m":(f="km",a/=1e3);else if(i=="us")u<.9144?(f="in",a*=39.37):u<1609.344?(f="ft",a/=.30480061):(f="mi",a/=1609.3472);else throw new Error("Invalid units");let d=3*Math.floor(Math.log(o*a)/Math.log(10)),g,p,x,v=0,E,R;for(;;){x=Math.floor(d/3);const C=Math.pow(10,x);if(g=Gz[(d%3+3)%3]*C,p=Math.round(g/a),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){g=v,p=E,x=R;break}else if(p>=o)break;v=g,E=p,R=x,++d}const S=this.scaleBar_?this.createScaleBar(p,g,f):g.toFixed(x<0?-x:0)+" "+f;this.renderedHTML_!=S&&(this.innerElement_.innerHTML=S,this.renderedHTML_=S),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),a=this.scaleBarSteps_,o=e/a,l=[this.createMarker("absolute")];for(let f=0;f<a;++f){const d=f%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${d}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(f%2===0||a===2?this.createStepText(f,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(a,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,s){const o=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=ny(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||q0,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const zz={},q4=n=>{let e;const t=new Set,r=(f,d)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const p=e;e=d??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(x=>x(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(t.add(f),()=>t.delete(f)),destroy:()=>{(zz?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(r,i,l);return l},$z=n=>n?q4(n):q4;var Vw={exports:{}},jw={},Bw={exports:{}},Gw={};var X4;function Wz(){if(X4)return Gw;X4=1;var n=$m();function e(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(d,g){var p=g(),x=r({inst:{value:p,getSnapshot:g}}),v=x[0].inst,E=x[1];return s(function(){v.value=p,v.getSnapshot=g,l(v)&&E({inst:v})},[d,p,g]),i(function(){return l(v)&&E({inst:v}),d(function(){l(v)&&E({inst:v})})},[d]),a(p),p}function l(d){var g=d.getSnapshot;d=d.value;try{var p=g();return!t(d,p)}catch{return!0}}function u(d,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Gw.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Gw}var Y4;function Hz(){return Y4||(Y4=1,Bw.exports=Wz()),Bw.exports}var Z4;function Kz(){if(Z4)return jw;Z4=1;var n=$m(),e=Hz();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,l=n.useDebugValue;return jw.useSyncExternalStoreWithSelector=function(u,f,d,g,p){var x=s(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=o(function(){function R(z){if(!S){if(S=!0,C=z,z=g(z),p!==void 0&&v.hasValue){var M=v.value;if(p(M,z))return O=M}return O=z}if(M=O,r(C,z))return M;var P=g(z);return p!==void 0&&p(M,P)?(C=z,M):(C=z,O=P)}var S=!1,C,O,N=d===void 0?null:d;return[function(){return R(f())},N===null?void 0:function(){return R(N())}]},[f,d,g,p]);var E=i(u,x[0],x[1]);return a(function(){v.hasValue=!0,v.value=E},[E]),l(E),E},jw}var Q4;function qz(){return Q4||(Q4=1,Vw.exports=Kz()),Vw.exports}var Xz=qz();const Yz=ES(Xz),vN={},{useDebugValue:Zz}=WV,{useSyncExternalStoreWithSelector:Qz}=Yz;let J4=!1;const Jz=n=>n;function e$(n,e=Jz,t){(vN?"production":void 0)!=="production"&&t&&!J4&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),J4=!0);const r=Qz(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Zz(r),r}const t$=n=>{(vN?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?$z(n):n,t=(r,i)=>e$(e,r,i);return Object.assign(t,e),t},xo=n=>t$;var xN=Symbol.for("immer-nothing"),eM=Symbol.for("immer-draftable"),Rs=Symbol.for("immer-state");function va(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var lm=Object.getPrototypeOf;function Sd(n){return!!n&&!!n[Rs]}function eh(n){return n?EN(n)||Array.isArray(n)||!!n[eM]||!!n.constructor?.[eM]||sp(n)||qv(n):!1}var n$=Object.prototype.constructor.toString(),tM=new WeakMap;function EN(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=tM.get(t);return r===void 0&&(r=Function.toString.call(t),tM.set(t,r)),r===n$}function yy(n,e,t=!0){Kv(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function Kv(n){const e=n[Rs];return e?e.type_:Array.isArray(n)?1:sp(n)?2:qv(n)?3:0}function nT(n,e){return Kv(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function wN(n,e,t){const r=Kv(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function r$(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function sp(n){return n instanceof Map}function qv(n){return n instanceof Set}function xu(n){return n.copy_||n.base_}function rT(n,e){if(sp(n))return new Map(n);if(qv(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=EN(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Rs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create(lm(n),r)}else{const r=lm(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function oI(n,e=!1){return Xv(n)||Sd(n)||!eh(n)||(Kv(n)>1&&Object.defineProperties(n,{set:X_,add:X_,clear:X_,delete:X_}),Object.freeze(n),e&&Object.values(n).forEach(t=>oI(t,!0))),n}function i$(){va(2)}var X_={value:i$};function Xv(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var s$={};function th(n){const e=s$[n];return e||va(0,n),e}var cm;function TN(){return cm}function a$(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nM(n,e){e&&(th("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function iT(n){sT(n),n.drafts_.forEach(o$),n.drafts_=null}function sT(n){n===cm&&(cm=n.parent_)}function rM(n){return cm=a$(cm,n)}function o$(n){const e=n[Rs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function iM(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Rs].modified_&&(iT(e),va(4)),eh(n)&&(n=vy(e,n),e.parent_||xy(e,n)),e.patches_&&th("Patches").generateReplacementPatches_(t[Rs].base_,n,e.patches_,e.inversePatches_)):n=vy(e,t,[]),iT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==xN?n:void 0}function vy(n,e,t){if(Xv(e))return e;const r=n.immer_.shouldUseStrictIteration(),i=e[Rs];if(!i)return yy(e,(s,a)=>sM(n,i,e,s,a,t),r),e;if(i.scope_!==n)return e;if(!i.modified_)return xy(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),yy(a,(l,u)=>sM(n,i,s,l,u,t,o),r),xy(n,s,!1),t&&n.patches_&&th("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function sM(n,e,t,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=Xv(i);if(!(o&&!a)){if(Sd(i)){const l=s&&e&&e.type_!==3&&!nT(e.assigned_,r)?s.concat(r):void 0,u=vy(n,i,l);if(wN(t,r,u),Sd(u))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(eh(i)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;vy(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(sp(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&xy(n,i)}}}function xy(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&oI(e,t)}function l$(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:TN(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=lI;t&&(i=[r],s=um);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var lI={get(n,e){if(e===Rs)return n;const t=xu(n);if(!nT(t,e))return c$(n,t,e);const r=t[e];return n.finalized_||!eh(r)?r:r===Uw(n.base_,e)?(zw(n),n.copy_[e]=oT(r,n)):r},has(n,e){return e in xu(n)},ownKeys(n){return Reflect.ownKeys(xu(n))},set(n,e,t){const r=SN(xu(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=Uw(xu(n),e),s=i?.[Rs];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(r$(t,i)&&(t!==void 0||nT(n.base_,e)))return!0;zw(n),aT(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Uw(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,zw(n),aT(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=xu(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){va(11)},getPrototypeOf(n){return lm(n.base_)},setPrototypeOf(){va(12)}},um={};yy(lI,(n,e)=>{um[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});um.deleteProperty=function(n,e){return um.set.call(this,n,e,void 0)};um.set=function(n,e,t){return lI.set.call(this,n[0],e,t,n[0])};function Uw(n,e){const t=n[Rs];return(t?xu(t):n)[e]}function c$(n,e,t){const r=SN(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function SN(n,e){if(!(e in n))return;let t=lm(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=lm(t)}}function aT(n){n.modified_||(n.modified_=!0,n.parent_&&aT(n.parent_))}function zw(n){n.copy_||(n.copy_=rT(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var u$=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...u){return a.produce(l,f=>t.call(this,f,...u))}}typeof t!="function"&&va(6),r!==void 0&&typeof r!="function"&&va(7);let i;if(eh(e)){const s=rM(this),a=oT(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?iT(s):sT(s)}return nM(s,r),iM(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===xN&&(i=void 0),this.autoFreeze_&&oI(i,!0),r){const s=[],a=[];th("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else va(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,t,(a,o)=>{r=a,i=o}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){eh(n)||va(8),Sd(n)&&(n=h$(n));const e=rM(this),t=oT(n,void 0);return t[Rs].isManual_=!0,sT(e),t}finishDraft(n,e){const t=n&&n[Rs];(!t||!t.isManual_)&&va(9);const{scope_:r}=t;return nM(r,e),iM(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=th("Patches").applyPatches_;return Sd(n)?r(n,e):this.produce(n,i=>r(i,e))}};function oT(n,e){const t=sp(n)?th("MapSet").proxyMap_(n,e):qv(n)?th("MapSet").proxySet_(n,e):l$(n,e);return(e?e.scope_:TN()).drafts_.push(t),t}function h$(n){return Sd(n)||va(10,n),IN(n)}function IN(n){if(!eh(n)||Xv(n))return n;const e=n[Rs];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=rT(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=rT(n,!0);return yy(t,(i,s)=>{wN(t,i,IN(s))},r),e&&(e.finalized_=!1),t}var f$=new u$,d$=f$.produce;const g$=n=>(e,t,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?d$(i):i;return e(o,s,...a)},n(r.setState,t,r)),Ih=g$,Mn=xo()(Ih((n,e)=>({tracking:!1,navigationMode:"free",position:null,heading:null,smoothHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,config:{smoothingFactor:.2,minRotationSpeed:8,centerOnUser:!0,animationDuration:100},startTracking:()=>{n(t=>{t.tracking=!0})},stopTracking:()=>{n(t=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),t.tracking=!1,t.speed=null,t.headingSource=null,t.watchId=null})},toggleMode:()=>{n(t=>{t.navigationMode=t.navigationMode==="free"?"drive":"free",console.log(` Navigation mode: ${t.navigationMode}`)})},updatePosition:t=>{n(r=>{r.position={lat:t.coords.latitude,lng:t.coords.longitude},r.accuracy=t.coords.accuracy,r.speed=t.coords.speed;const i=15,s=.5;if(!(t.coords.accuracy!==null&&t.coords.accuracy<i)){r.headingSource=null;return}if(t.coords.heading!==null&&t.coords.speed!==null&&t.coords.speed>s){r.headingSource="gps";const o=t.coords.heading;e().updateHeading(o,"gps")}else r.headingSource="compass"})},updateHeading:(t,r="compass")=>{n(i=>{const{smoothHeading:s,config:a}=e();if(s===null){i.smoothHeading=t,i.heading=t;return}let o=t-s;o>180&&(o-=360),o<-180&&(o+=360);const l=r==="compass"?8:a.minRotationSpeed;if(Math.abs(o)<l)return;const u=s+o*a.smoothingFactor;i.smoothHeading=(u+360)%360,i.heading=t})},setWatchId:t=>{n(r=>{r.watchId=t})},resetFirstFix:()=>{n(t=>{t.firstFix=!1})}}))),AN={"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:n}=await at(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createAHNLayerOL:e}},[]);return n()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:n}=await at(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createGeomorfologieLayerOL:e}},[]);return n()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:n}=await at(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createBodemkaartLayerOL:e}},[]);return n()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:n}=await at(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createIKAWLayerOL:e}},[]);return n()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:n}=await at(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createFAMKESteentijdLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Landschappen":{name:"Archeo Landschappen",factory:async()=>{const{createArcheoLandschappenLayerOL:n}=await at(async()=>{const{createArcheoLandschappenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createArcheoLandschappenLayerOL:e}},[]);return n()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:n}=await at(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createRijksmonumentenLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:n}=await at(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return n()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:n}=await at(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createWerelderfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:n}=await at(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-elO5wX7n.js");return{createTerpenLayerOL:e}},[]);return n()},immediateLoad:!0},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:n}=await at(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-CwA0sUC5.js");return{createLiniesLayerOL:e}},[]);return n()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:n}=await at(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-CwA0sUC5.js");return{createInundatiesLayerOL:e}},[]);return n()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:n}=await at(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-CwA0sUC5.js");return{createMilitaireObjectenLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:n}=await at(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-xksKCgQR.js");return{createPaleo800ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:n}=await at(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-xksKCgQR.js");return{createPaleo100ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:n}=await at(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-xksKCgQR.js");return{createPaleo500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:n}=await at(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-xksKCgQR.js");return{createPaleo1500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:n}=await at(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-xksKCgQR.js");return{createPaleo2750vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:n}=await at(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-xksKCgQR.js");return{createPaleo5500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:n}=await at(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-xksKCgQR.js");return{createPaleo9000vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:n}=await at(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-D8vg2yUL.js");return{createReligieusErfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:n}=await at(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-vC4BtsKE.js");return{createAHN4ColorElevationLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:n}=await at(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-vC4BtsKE.js");return{createAHN4HillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:n}=await at(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-vC4BtsKE.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},"World Hillshade":{name:"World Hillshade",factory:async()=>{const{createWorldHillshadeLayerOL:n}=await at(async()=>{const{createWorldHillshadeLayerOL:e}=await import("./hillshadeLayers-vC4BtsKE.js");return{createWorldHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:n}=await at(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createGewaspercelenLayerOL:e}},[]);return n()},immediateLoad:!0},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:n}=await at(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createKadastraleKaartLayerOL:e}},[]);return n()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:n}=await at(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createScheepswrakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:n}=await at(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createWoonheuvelsLayerOL:e}},[]);return n()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:n}=await at(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createRomeinseFortenLayerOL:e}},[]);return n()},immediateLoad:!0},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:n}=await at(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createWindmolensLayerOL:e}},[]);return n()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:n}=await at(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createErfgoedlijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:n}=await at(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createOudeKernenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenkaartPuntenLayerOL:n}=await at(async()=>{const{createRelictenkaartPuntenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createRelictenkaartPuntenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:n}=await at(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:n}=await at(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:n}=await at(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-C-g2i1VS.js");return{createVerdronkenDorpenLayerOL:e}},[]);return n()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:n}=await at(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-BJP9EOWr.js");return{createAMKLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:n}=await at(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-BJP9EOWr.js");return{createAMKRomeinsLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:n}=await at(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-BJP9EOWr.js");return{createAMKSteentijdLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:n}=await at(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-BJP9EOWr.js");return{createAMKVroegeMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:n}=await at(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-BJP9EOWr.js");return{createAMKLateMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:n}=await at(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-BJP9EOWr.js");return{createAMKOverigLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"Romeinse wegen":{name:"Romeinse wegen",factory:async()=>{const{createRomeinseWegenLayerOL:n}=await at(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-BF4Nw0Kp.js");return{createRomeinseWegenLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:n}=await at(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-CpmedLdd.js");return{createKastelenLayerOL:e}},__vite__mapDeps([3,4]));return n()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:n}=await at(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-IpyxLM9d.js");return{createVeengebiedenLayerOL:e}},[]);return n()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:n}=await at(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-BUwQFO6a.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([5,4]));return n()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:n}=await at(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-CAHYxhYr.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([6,1,4]));return n()},immediateLoad:!1},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:n}=await at(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-Cw9Thesp.js");return{createUIKAVVlakkenLayerOL:e}},__vite__mapDeps([7,1]));return n()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:n}=await at(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-CP3bFsIr.js");return{createUIKAVBufferlaagLayerOL:e}},__vite__mapDeps([8,1]));return n()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:n}=await at(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-CG8sMl3C.js");return{createUIKAVExpertLayerOL:e}},__vite__mapDeps([9,1]));return n()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:n}=await at(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-CRqXL-2y.js");return{createUIKAVUiterwaardenLayerOL:e}},__vite__mapDeps([10,1]));return n()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:n}=await at(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-Cljj-Ea3.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([11,1,4]));return n()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:n}=await at(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-B2R4lvOZ.js");return{createMuseaLayerOL:e}},__vite__mapDeps([12,1,4]));return n()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:n}=await at(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-Do2MQPir.js");return{createStrandjesLayerOL:e}},__vite__mapDeps([13,1]));return n()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:n}=await at(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-BnoRnskF.js");return{createParkenLayerOL:e}},__vite__mapDeps([14,1]));return n()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:n}=await at(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-TWIKueDx.js");return{createFossielenLayerOL:e}},__vite__mapDeps([15,16,4]));return n()},immediateLoad:!1},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:n}=await at(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-CT0rjZN2.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([17,16,4]));return n()},immediateLoad:!1},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:n}=await at(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-tJZEIcq2.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([18,16,4]));return n()},immediateLoad:!1},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:n}=await at(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-2VWzBKZB.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([19,16,4]));return n()},immediateLoad:!1},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:n}=await at(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-Cw10HEON.js");return{createBunkersLayerOL:e}},__vite__mapDeps([20,4]));return n()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:n}=await at(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-CxTxLJ4S.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([21,4]));return n()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:n}=await at(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-B1Nfprq9.js");return{createSlagveldenLayerOL:e}},[]);return n()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:n}=await at(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-DYTvoRLD.js");return{createVliegveldenLayerOL:e}},[]);return n()},immediateLoad:!1}};function m$(){return Object.values(AN).filter(n=>n.immediateLoad)}const ti=xo()(Ih((n,e)=>({map:null,rotation:0,rotationEnabled:!0,setMap:t=>{n(r=>{r.map=t})},setRotation:t=>{n(r=>{if(r.rotation=t,r.map&&r.rotationEnabled){const i=t*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{n(t=>{t.rotationEnabled=!0})},disableRotation:()=>{n(t=>{t.rotationEnabled=!1,t.rotation=0,t.map&&t.map.getView().animate({rotation:0,duration:500})})}}))),ei=xo()(Ih((n,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Romeinse wegen":!1,Kastelen:!1,IKAW:!1,"Archeo Landschappen":!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN 0.5m":!1,"World Hillshade":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN 0.5m":.7,Geomorfologie:.5,Bodemkaart:.6,IKAW:.5,"Archeo Landschappen":.5,"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"World Hillshade":.7,Terpen:.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Paleokaart 800 n.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 9000 v.Chr.":.7,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},toggleLayer:t=>{const r=e(),i=!r.visible[t];n(s=>{s.visible[t]=i}),i&&!r.layers[t]?e().loadLayer(t):r.layers[t]&&r.layers[t].setVisible(i)},setLayerVisibility:(t,r)=>{const i=e();n(s=>{s.visible[t]=r;const a=s.layers[t];a&&a.setVisible(r)}),r&&!i.layers[t]&&e().loadLayer(t)},setLayerOpacity:(t,r)=>{n(i=>{i.opacity[t]=r;const s=i.layers[t];s&&s.setOpacity(r)})},registerLayer:(t,r)=>{n(i=>{i.layers[t]=r,i.loadingState[t]="loaded",i.visible[t]!==void 0&&r.setVisible(i.visible[t]),i.opacity[t]!==void 0&&r.setOpacity(i.opacity[t])})},unregisterLayer:t=>{n(r=>{delete r.layers[t],delete r.loadingState[t]})},loadLayer:async t=>{const r=e();if(r.loadingState[t]==="loading"||r.layers[t])return;const i=AN[t];if(!i){console.warn(` Layer "${t}" not found in registry`);return}const s=ti.getState().map;if(!s){console.warn(` Cannot load layer "${t}": map not initialized`);return}n(a=>{a.loadingState[t]="loading"}),console.log(` Loading layer: ${t}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const o=e();a.setVisible(o.visible[t]??!1),o.opacity[t]!==void 0&&a.setOpacity(o.opacity[t]),s.addLayer(a),n(l=>{l.layers[t]=a,l.loadingState[t]="loaded"}),console.log(` Layer loaded: ${t}`)}catch(a){console.error(` Failed to load layer "${t}":`,a),n(o=>{o.loadingState[t]="error"})}}}))),Ea=xo()(Ih((n,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstDashboardOpen:!1,collapsedCategories:new Set,closeAllPanels:()=>{n(t=>{t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1})},toggleLayerControl:()=>{n(t=>{t.layerControlOpen=!t.layerControlOpen})},toggleLegend:()=>{n(t=>{t.legendOpen=!t.legendOpen})},toggleBackgroundsPanel:()=>{n(t=>{const r=t.backgroundsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{n(t=>{const r=t.themesPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{n(t=>{const r=t.settingsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{n(t=>{const r=t.infoPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.infoPanelOpen=!0)})},togglePresetsPanel:()=>{n(t=>{const r=t.presetsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.presetsPanelOpen=!0)})},toggleCategory:t=>{n(r=>{r.collapsedCategories.has(t)?r.collapsedCategories.delete(t):r.collapsedCategories.add(t)})},setLayerControlOpen:t=>{n(r=>{r.layerControlOpen=t})},setLegendOpen:t=>{n(r=>{r.legendOpen=t})},openVondstForm:t=>{n(r=>{r.backgroundsPanelOpen=!1,r.themesPanelOpen=!1,r.settingsPanelOpen=!1,r.infoPanelOpen=!1,r.presetsPanelOpen=!1,r.vondstFormOpen=!0,r.vondstFormLocation=t||null})},closeVondstForm:()=>{n(t=>{t.vondstFormOpen=!1,t.vondstFormLocation=null})},toggleVondstDashboard:()=>{n(t=>{const r=t.vondstDashboardOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,t.vondstDashboardOpen=!r})}}))),RN=xo()(Ih(n=>({user:null,loading:!0,error:null,setUser:e=>{n(t=>{t.user=e,t.loading=!1})},setLoading:e=>{n(t=>{t.loading=e})},setError:e=>{n(t=>{t.error=e})}}))),p$=()=>{};var aM={};const CN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},_$=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},PN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=s>>2,d=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;l||(p=64,a||(g=64)),r.push(t[f],t[d],t[g],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(CN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new y$;const g=s<<2|o>>4;if(r.push(g),u!==64){const p=o<<4&240|u>>2;if(r.push(p),d!==64){const x=u<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class y$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v$=function(n){const e=CN(n);return PN.encodeByteArray(e,!0)},Ey=function(n){return v$(n).replace(/\./g,"")},MN=function(n){try{return PN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const x$=()=>bN().__FIREBASE_DEFAULTS__,E$=()=>{if(typeof process>"u"||typeof aM>"u")return;const n=aM.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},w$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&MN(n[1]);return e&&JSON.parse(e)},Yv=()=>{try{return p$()||x$()||E$()||w$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kN=n=>Yv()?.emulatorHosts?.[n],ON=n=>{const e=kN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},LN=()=>Yv()?.config,NN=n=>Yv()?.[`_${n}`];class T${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ah(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cI(n){return(await fetch(n,{credentials:"include"})).ok}function DN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ey(JSON.stringify(t)),Ey(JSON.stringify(a)),""].join(".")}const Sg={};function S$(){const n={prod:[],emulator:[]};for(const e of Object.keys(Sg))Sg[e]?n.emulator.push(e):n.prod.push(e);return n}function I$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let oM=!1;function uI(n,e){if(typeof window>"u"||typeof document>"u"||!Ah(window.location.host)||Sg[n]===e||Sg[n]||oM)return;Sg[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=S$().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{oM=!0,a()},g}function f(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function d(){const g=I$(r),p=t("text"),x=document.getElementById(p)||document.createElement("span"),v=t("learnmore"),E=document.getElementById(v)||document.createElement("a"),R=t("preprendIcon"),S=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;o(C),f(E,v);const O=u();l(S,R),C.append(S,x,E,O),document.body.appendChild(C)}s?(x.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tr())}function FN(){const n=Yv()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function R$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C$(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function P$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M$(){const n=Tr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VN(){return!FN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jN(){return!FN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function BN(){try{return typeof indexedDB=="object"}catch{return!1}}function b$(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const k$="FirebaseError";class Eo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=k$,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ap.prototype.create)}}class ap{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?O$(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Eo(i,o,r)}}function O$(n,e){return n.replace(L$,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const L$=/\{\$([^}]+)}/g;function N$(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function nh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(lM(s)&&lM(a)){if(!nh(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function lM(n){return n!==null&&typeof n=="object"}function op(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function D$(n,e){const t=new F$(n,e);return t.subscribe.bind(t)}class F${constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");V$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=$w),i.error===void 0&&(i.error=$w),i.complete===void 0&&(i.complete=$w);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V$(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $w(){}function Fr(n){return n&&n._delegate?n._delegate:n}class Rc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Eu="[DEFAULT]";class j${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new T$;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G$(e))try{this.getOrInitializeService({instanceIdentifier:Eu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Eu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eu){return this.instances.has(e)}getOptions(e=Eu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eu){return this.component?this.component.multipleInstances?e:Eu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B$(n){return n===Eu?void 0:n}function G$(n){return n.instantiationMode==="EAGER"}class U${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new j$(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Dt||(Dt={}));const z$={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},$$=Dt.INFO,W$={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},H$=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=W$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hI{constructor(e){this.name=e,this._logLevel=$$,this._logHandler=H$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...e),this._logHandler(this,Dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...e),this._logHandler(this,Dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...e),this._logHandler(this,Dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...e),this._logHandler(this,Dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...e),this._logHandler(this,Dt.ERROR,...e)}}const K$=(n,e)=>e.some(t=>n instanceof t);let cM,uM;function q$(){return cM||(cM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X$(){return uM||(uM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GN=new WeakMap,lT=new WeakMap,UN=new WeakMap,Ww=new WeakMap,fI=new WeakMap;function Y$(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(pc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&GN.set(t,n)}).catch(()=>{}),fI.set(e,n),e}function Z$(n){if(lT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});lT.set(n,e)}let cT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||UN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Q$(n){cT=n(cT)}function J$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Hw(this),e,...t);return UN.set(r,e.sort?e.sort():[e]),pc(r)}:X$().includes(n)?function(...e){return n.apply(Hw(this),e),pc(GN.get(this))}:function(...e){return pc(n.apply(Hw(this),e))}}function eW(n){return typeof n=="function"?J$(n):(n instanceof IDBTransaction&&Z$(n),K$(n,q$())?new Proxy(n,cT):n)}function pc(n){if(n instanceof IDBRequest)return Y$(n);if(Ww.has(n))return Ww.get(n);const e=eW(n);return e!==n&&(Ww.set(n,e),fI.set(e,n)),e}const Hw=n=>fI.get(n);function tW(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=pc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(pc(a.result),l.oldVersion,l.newVersion,pc(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const nW=["get","getKey","getAll","getAllKeys","count"],rW=["put","add","delete","clear"],Kw=new Map;function hM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Kw.get(e))return Kw.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=rW.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nW.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return Kw.set(e,s),s}Q$(n=>({...n,get:(e,t,r)=>hM(e,t)||n.get(e,t,r),has:(e,t)=>!!hM(e,t)||n.has(e,t)}));class iW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sW(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function sW(n){return n.getComponent()?.type==="VERSION"}const uT="@firebase/app",fM="0.14.6";const rl=new hI("@firebase/app"),aW="@firebase/app-compat",oW="@firebase/analytics-compat",lW="@firebase/analytics",cW="@firebase/app-check-compat",uW="@firebase/app-check",hW="@firebase/auth",fW="@firebase/auth-compat",dW="@firebase/database",gW="@firebase/data-connect",mW="@firebase/database-compat",pW="@firebase/functions",_W="@firebase/functions-compat",yW="@firebase/installations",vW="@firebase/installations-compat",xW="@firebase/messaging",EW="@firebase/messaging-compat",wW="@firebase/performance",TW="@firebase/performance-compat",SW="@firebase/remote-config",IW="@firebase/remote-config-compat",AW="@firebase/storage",RW="@firebase/storage-compat",CW="@firebase/firestore",PW="@firebase/ai",MW="@firebase/firestore-compat",bW="firebase",kW="12.6.0";const hT="[DEFAULT]",OW={[uT]:"fire-core",[aW]:"fire-core-compat",[lW]:"fire-analytics",[oW]:"fire-analytics-compat",[uW]:"fire-app-check",[cW]:"fire-app-check-compat",[hW]:"fire-auth",[fW]:"fire-auth-compat",[dW]:"fire-rtdb",[gW]:"fire-data-connect",[mW]:"fire-rtdb-compat",[pW]:"fire-fn",[_W]:"fire-fn-compat",[yW]:"fire-iid",[vW]:"fire-iid-compat",[xW]:"fire-fcm",[EW]:"fire-fcm-compat",[wW]:"fire-perf",[TW]:"fire-perf-compat",[SW]:"fire-rc",[IW]:"fire-rc-compat",[AW]:"fire-gcs",[RW]:"fire-gcs-compat",[CW]:"fire-fst",[MW]:"fire-fst-compat",[PW]:"fire-vertex","fire-js":"fire-js",[bW]:"fire-js-all"};const wy=new Map,LW=new Map,fT=new Map;function dM(n,e){try{n.container.addComponent(e)}catch(t){rl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function rh(n){const e=n.name;if(fT.has(e))return rl.debug(`There were multiple attempts to register component ${e}.`),!1;fT.set(e,n);for(const t of wy.values())dM(t,n);for(const t of LW.values())dM(t,n);return!0}function Zv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hs(n){return n==null?!1:n.settings!==void 0}const NW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_c=new ap("app","Firebase",NW);class DW{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _c.create("app-deleted",{appName:this._name})}}const Rh=kW;function zN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:hT,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw _c.create("bad-app-name",{appName:String(i)});if(t||(t=LN()),!t)throw _c.create("no-options");const s=wy.get(i);if(s){if(nh(t,s.options)&&nh(r,s.config))return s;throw _c.create("duplicate-app",{appName:i})}const a=new U$(i);for(const l of fT.values())a.addComponent(l);const o=new DW(t,r,a);return wy.set(i,o),o}function dI(n=hT){const e=wy.get(n);if(!e&&n===hT&&LN())return zN();if(!e)throw _c.create("no-app",{appName:n});return e}function ro(n,e,t){let r=OW[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rl.warn(a.join(" "));return}rh(new Rc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const FW="firebase-heartbeat-database",VW=1,hm="firebase-heartbeat-store";let qw=null;function $N(){return qw||(qw=tW(FW,VW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hm)}catch(t){console.warn(t)}}}}).catch(n=>{throw _c.create("idb-open",{originalErrorMessage:n.message})})),qw}async function jW(n){try{const t=(await $N()).transaction(hm),r=await t.objectStore(hm).get(WN(n));return await t.done,r}catch(e){if(e instanceof Eo)rl.warn(e.message);else{const t=_c.create("idb-get",{originalErrorMessage:e?.message});rl.warn(t.message)}}}async function gM(n,e){try{const r=(await $N()).transaction(hm,"readwrite");await r.objectStore(hm).put(e,WN(n)),await r.done}catch(t){if(t instanceof Eo)rl.warn(t.message);else{const r=_c.create("idb-set",{originalErrorMessage:t?.message});rl.warn(r.message)}}}function WN(n){return`${n.name}!${n.options.appId}`}const BW=1024,GW=30;class UW{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $W(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mM();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>GW){const i=WW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){rl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mM(),{heartbeatsToSend:t,unsentEntries:r}=zW(this._heartbeatsCache.heartbeats),i=Ey(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return rl.warn(e),""}}}function mM(){return new Date().toISOString().substring(0,10)}function zW(n,e=BW){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),pM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),pM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class $W{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BN()?b$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pM(n){return Ey(JSON.stringify({version:2,heartbeats:n})).length}function WW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function HW(n){rh(new Rc("platform-logger",e=>new iW(e),"PRIVATE")),rh(new Rc("heartbeat",e=>new UW(e),"PRIVATE")),ro(uT,fM,n),ro(uT,fM,"esm2020"),ro("fire-js","")}HW("");var _M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yc,HN;(function(){var n;function e(M,P){function b(){}b.prototype=P.prototype,M.F=P.prototype,M.prototype=new b,M.prototype.constructor=M,M.D=function(D,B,U){for(var V=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)V[Ae-2]=arguments[Ae];return P.prototype[B].apply(D,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,P,b){b||(b=0);const D=Array(16);if(typeof P=="string")for(var B=0;B<16;++B)D[B]=P.charCodeAt(b++)|P.charCodeAt(b++)<<8|P.charCodeAt(b++)<<16|P.charCodeAt(b++)<<24;else for(B=0;B<16;++B)D[B]=P[b++]|P[b++]<<8|P[b++]<<16|P[b++]<<24;P=M.g[0],b=M.g[1],B=M.g[2];let U=M.g[3],V;V=P+(U^b&(B^U))+D[0]+3614090360&4294967295,P=b+(V<<7&4294967295|V>>>25),V=U+(B^P&(b^B))+D[1]+3905402710&4294967295,U=P+(V<<12&4294967295|V>>>20),V=B+(b^U&(P^b))+D[2]+606105819&4294967295,B=U+(V<<17&4294967295|V>>>15),V=b+(P^B&(U^P))+D[3]+3250441966&4294967295,b=B+(V<<22&4294967295|V>>>10),V=P+(U^b&(B^U))+D[4]+4118548399&4294967295,P=b+(V<<7&4294967295|V>>>25),V=U+(B^P&(b^B))+D[5]+1200080426&4294967295,U=P+(V<<12&4294967295|V>>>20),V=B+(b^U&(P^b))+D[6]+2821735955&4294967295,B=U+(V<<17&4294967295|V>>>15),V=b+(P^B&(U^P))+D[7]+4249261313&4294967295,b=B+(V<<22&4294967295|V>>>10),V=P+(U^b&(B^U))+D[8]+1770035416&4294967295,P=b+(V<<7&4294967295|V>>>25),V=U+(B^P&(b^B))+D[9]+2336552879&4294967295,U=P+(V<<12&4294967295|V>>>20),V=B+(b^U&(P^b))+D[10]+4294925233&4294967295,B=U+(V<<17&4294967295|V>>>15),V=b+(P^B&(U^P))+D[11]+2304563134&4294967295,b=B+(V<<22&4294967295|V>>>10),V=P+(U^b&(B^U))+D[12]+1804603682&4294967295,P=b+(V<<7&4294967295|V>>>25),V=U+(B^P&(b^B))+D[13]+4254626195&4294967295,U=P+(V<<12&4294967295|V>>>20),V=B+(b^U&(P^b))+D[14]+2792965006&4294967295,B=U+(V<<17&4294967295|V>>>15),V=b+(P^B&(U^P))+D[15]+1236535329&4294967295,b=B+(V<<22&4294967295|V>>>10),V=P+(B^U&(b^B))+D[1]+4129170786&4294967295,P=b+(V<<5&4294967295|V>>>27),V=U+(b^B&(P^b))+D[6]+3225465664&4294967295,U=P+(V<<9&4294967295|V>>>23),V=B+(P^b&(U^P))+D[11]+643717713&4294967295,B=U+(V<<14&4294967295|V>>>18),V=b+(U^P&(B^U))+D[0]+3921069994&4294967295,b=B+(V<<20&4294967295|V>>>12),V=P+(B^U&(b^B))+D[5]+3593408605&4294967295,P=b+(V<<5&4294967295|V>>>27),V=U+(b^B&(P^b))+D[10]+38016083&4294967295,U=P+(V<<9&4294967295|V>>>23),V=B+(P^b&(U^P))+D[15]+3634488961&4294967295,B=U+(V<<14&4294967295|V>>>18),V=b+(U^P&(B^U))+D[4]+3889429448&4294967295,b=B+(V<<20&4294967295|V>>>12),V=P+(B^U&(b^B))+D[9]+568446438&4294967295,P=b+(V<<5&4294967295|V>>>27),V=U+(b^B&(P^b))+D[14]+3275163606&4294967295,U=P+(V<<9&4294967295|V>>>23),V=B+(P^b&(U^P))+D[3]+4107603335&4294967295,B=U+(V<<14&4294967295|V>>>18),V=b+(U^P&(B^U))+D[8]+1163531501&4294967295,b=B+(V<<20&4294967295|V>>>12),V=P+(B^U&(b^B))+D[13]+2850285829&4294967295,P=b+(V<<5&4294967295|V>>>27),V=U+(b^B&(P^b))+D[2]+4243563512&4294967295,U=P+(V<<9&4294967295|V>>>23),V=B+(P^b&(U^P))+D[7]+1735328473&4294967295,B=U+(V<<14&4294967295|V>>>18),V=b+(U^P&(B^U))+D[12]+2368359562&4294967295,b=B+(V<<20&4294967295|V>>>12),V=P+(b^B^U)+D[5]+4294588738&4294967295,P=b+(V<<4&4294967295|V>>>28),V=U+(P^b^B)+D[8]+2272392833&4294967295,U=P+(V<<11&4294967295|V>>>21),V=B+(U^P^b)+D[11]+1839030562&4294967295,B=U+(V<<16&4294967295|V>>>16),V=b+(B^U^P)+D[14]+4259657740&4294967295,b=B+(V<<23&4294967295|V>>>9),V=P+(b^B^U)+D[1]+2763975236&4294967295,P=b+(V<<4&4294967295|V>>>28),V=U+(P^b^B)+D[4]+1272893353&4294967295,U=P+(V<<11&4294967295|V>>>21),V=B+(U^P^b)+D[7]+4139469664&4294967295,B=U+(V<<16&4294967295|V>>>16),V=b+(B^U^P)+D[10]+3200236656&4294967295,b=B+(V<<23&4294967295|V>>>9),V=P+(b^B^U)+D[13]+681279174&4294967295,P=b+(V<<4&4294967295|V>>>28),V=U+(P^b^B)+D[0]+3936430074&4294967295,U=P+(V<<11&4294967295|V>>>21),V=B+(U^P^b)+D[3]+3572445317&4294967295,B=U+(V<<16&4294967295|V>>>16),V=b+(B^U^P)+D[6]+76029189&4294967295,b=B+(V<<23&4294967295|V>>>9),V=P+(b^B^U)+D[9]+3654602809&4294967295,P=b+(V<<4&4294967295|V>>>28),V=U+(P^b^B)+D[12]+3873151461&4294967295,U=P+(V<<11&4294967295|V>>>21),V=B+(U^P^b)+D[15]+530742520&4294967295,B=U+(V<<16&4294967295|V>>>16),V=b+(B^U^P)+D[2]+3299628645&4294967295,b=B+(V<<23&4294967295|V>>>9),V=P+(B^(b|~U))+D[0]+4096336452&4294967295,P=b+(V<<6&4294967295|V>>>26),V=U+(b^(P|~B))+D[7]+1126891415&4294967295,U=P+(V<<10&4294967295|V>>>22),V=B+(P^(U|~b))+D[14]+2878612391&4294967295,B=U+(V<<15&4294967295|V>>>17),V=b+(U^(B|~P))+D[5]+4237533241&4294967295,b=B+(V<<21&4294967295|V>>>11),V=P+(B^(b|~U))+D[12]+1700485571&4294967295,P=b+(V<<6&4294967295|V>>>26),V=U+(b^(P|~B))+D[3]+2399980690&4294967295,U=P+(V<<10&4294967295|V>>>22),V=B+(P^(U|~b))+D[10]+4293915773&4294967295,B=U+(V<<15&4294967295|V>>>17),V=b+(U^(B|~P))+D[1]+2240044497&4294967295,b=B+(V<<21&4294967295|V>>>11),V=P+(B^(b|~U))+D[8]+1873313359&4294967295,P=b+(V<<6&4294967295|V>>>26),V=U+(b^(P|~B))+D[15]+4264355552&4294967295,U=P+(V<<10&4294967295|V>>>22),V=B+(P^(U|~b))+D[6]+2734768916&4294967295,B=U+(V<<15&4294967295|V>>>17),V=b+(U^(B|~P))+D[13]+1309151649&4294967295,b=B+(V<<21&4294967295|V>>>11),V=P+(B^(b|~U))+D[4]+4149444226&4294967295,P=b+(V<<6&4294967295|V>>>26),V=U+(b^(P|~B))+D[11]+3174756917&4294967295,U=P+(V<<10&4294967295|V>>>22),V=B+(P^(U|~b))+D[2]+718787259&4294967295,B=U+(V<<15&4294967295|V>>>17),V=b+(U^(B|~P))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(B+(V<<21&4294967295|V>>>11))&4294967295,M.g[2]=M.g[2]+B&4294967295,M.g[3]=M.g[3]+U&4294967295}r.prototype.v=function(M,P){P===void 0&&(P=M.length);const b=P-this.blockSize,D=this.C;let B=this.h,U=0;for(;U<P;){if(B==0)for(;U<=b;)i(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<P;)if(D[B++]=M.charCodeAt(U++),B==this.blockSize){i(this,D),B=0;break}}else for(;U<P;)if(D[B++]=M[U++],B==this.blockSize){i(this,D),B=0;break}}this.h=B,this.o+=P},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;P=this.o*8;for(var b=M.length-8;b<M.length;++b)M[b]=P&255,P/=256;for(this.v(M),M=Array(16),P=0,b=0;b<4;++b)for(let D=0;D<32;D+=8)M[P++]=this.g[b]>>>D&255;return M};function s(M,P){var b=o;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=P(M)}function a(M,P){this.h=P;const b=[];let D=!0;for(let B=M.length-1;B>=0;B--){const U=M[B]|0;D&&U==P||(b[B]=U,D=!1)}this.g=b}var o={};function l(M){return-128<=M&&M<128?s(M,function(P){return new a([P|0],P<0?-1:0)}):new a([M|0],M<0?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return d;if(M<0)return E(u(-M));const P=[];let b=1;for(let D=0;M>=b;D++)P[D]=M/b|0,b*=4294967296;return new a(P,0)}function f(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return E(f(M.substring(1),P));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=u(Math.pow(P,8));let D=d;for(let U=0;U<M.length;U+=8){var B=Math.min(8,M.length-U);const V=parseInt(M.substring(U,U+B),P);B<8?(B=u(Math.pow(P,B)),D=D.j(B).add(u(V))):(D=D.j(b),D=D.add(u(V)))}return D}var d=l(0),g=l(1),p=l(16777216);n=a.prototype,n.m=function(){if(v(this))return-E(this).m();let M=0,P=1;for(let b=0;b<this.g.length;b++){const D=this.i(b);M+=(D>=0?D:4294967296+D)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(x(this))return"0";if(v(this))return"-"+E(this).toString(M);const P=u(Math.pow(M,6));var b=this;let D="";for(;;){const B=O(b,P).g;b=R(b,B.j(P));let U=((b.g.length>0?b.g[0]:b.h)>>>0).toString(M);if(b=B,x(b))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function x(M){if(M.h!=0)return!1;for(let P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function v(M){return M.h==-1}n.l=function(M){return M=R(this,M),v(M)?-1:x(M)?0:1};function E(M){const P=M.g.length,b=[];for(let D=0;D<P;D++)b[D]=~M.g[D];return new a(b,~M.h).add(g)}n.abs=function(){return v(this)?E(this):this},n.add=function(M){const P=Math.max(this.g.length,M.g.length),b=[];let D=0;for(let B=0;B<=P;B++){let U=D+(this.i(B)&65535)+(M.i(B)&65535),V=(U>>>16)+(this.i(B)>>>16)+(M.i(B)>>>16);D=V>>>16,U&=65535,V&=65535,b[B]=V<<16|U}return new a(b,b[b.length-1]&-2147483648?-1:0)};function R(M,P){return M.add(E(P))}n.j=function(M){if(x(this)||x(M))return d;if(v(this))return v(M)?E(this).j(E(M)):E(E(this).j(M));if(v(M))return E(this.j(E(M)));if(this.l(p)<0&&M.l(p)<0)return u(this.m()*M.m());const P=this.g.length+M.g.length,b=[];for(var D=0;D<2*P;D++)b[D]=0;for(D=0;D<this.g.length;D++)for(let B=0;B<M.g.length;B++){const U=this.i(D)>>>16,V=this.i(D)&65535,Ae=M.i(B)>>>16,be=M.i(B)&65535;b[2*D+2*B]+=V*be,S(b,2*D+2*B),b[2*D+2*B+1]+=U*be,S(b,2*D+2*B+1),b[2*D+2*B+1]+=V*Ae,S(b,2*D+2*B+1),b[2*D+2*B+2]+=U*Ae,S(b,2*D+2*B+2)}for(M=0;M<P;M++)b[M]=b[2*M+1]<<16|b[2*M];for(M=P;M<2*P;M++)b[M]=0;return new a(b,0)};function S(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function C(M,P){this.g=M,this.h=P}function O(M,P){if(x(P))throw Error("division by zero");if(x(M))return new C(d,d);if(v(M))return P=O(E(M),P),new C(E(P.g),E(P.h));if(v(P))return P=O(M,E(P)),new C(E(P.g),P.h);if(M.g.length>30){if(v(M)||v(P))throw Error("slowDivide_ only works with positive integers.");for(var b=g,D=P;D.l(M)<=0;)b=N(b),D=N(D);var B=z(b,1),U=z(D,1);for(D=z(D,2),b=z(b,2);!x(D);){var V=U.add(D);V.l(M)<=0&&(B=B.add(b),U=V),D=z(D,1),b=z(b,1)}return P=R(M,B.j(P)),new C(B,P)}for(B=d;M.l(P)>=0;){for(b=Math.max(1,Math.floor(M.m()/P.m())),D=Math.ceil(Math.log(b)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=u(b),V=U.j(P);v(V)||V.l(M)>0;)b-=D,U=u(b),V=U.j(P);x(U)&&(U=g),B=B.add(U),M=R(M,V)}return new C(B,M)}n.B=function(M){return O(this,M).h},n.and=function(M){const P=Math.max(this.g.length,M.g.length),b=[];for(let D=0;D<P;D++)b[D]=this.i(D)&M.i(D);return new a(b,this.h&M.h)},n.or=function(M){const P=Math.max(this.g.length,M.g.length),b=[];for(let D=0;D<P;D++)b[D]=this.i(D)|M.i(D);return new a(b,this.h|M.h)},n.xor=function(M){const P=Math.max(this.g.length,M.g.length),b=[];for(let D=0;D<P;D++)b[D]=this.i(D)^M.i(D);return new a(b,this.h^M.h)};function N(M){const P=M.g.length+1,b=[];for(let D=0;D<P;D++)b[D]=M.i(D)<<1|M.i(D-1)>>>31;return new a(b,M.h)}function z(M,P){const b=P>>5;P%=32;const D=M.g.length-b,B=[];for(let U=0;U<D;U++)B[U]=P>0?M.i(U+b)>>>P|M.i(U+b+1)<<32-P:M.i(U+b);return new a(B,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,HN=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=f,yc=a}).apply(typeof _M<"u"?_M:typeof self<"u"?self:typeof window<"u"?window:{});var Y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var KN,ug,qN,A1,dT,XN,YN,ZN;(function(){var n,e=Object.defineProperty;function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Y_=="object"&&Y_];for(var A=0;A<_.length;++A){var L=_[A];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=t(this);function i(_,A){if(A)e:{var L=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var ge=_[H];if(!(ge in L))break e;L=L[ge]}_=_[_.length-1],H=L[_],A=A(H),A!=H&&A!=null&&e(L,_,{configurable:!0,writable:!0,value:A})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(A){var L=[],H;for(H in A)Object.prototype.hasOwnProperty.call(A,H)&&L.push([H,A[H]]);return L}});var s=s||{},a=this||self;function o(_){var A=typeof _;return A=="object"&&_!=null||A=="function"}function l(_,A,L){return _.call.apply(_.bind,arguments)}function u(_,A,L){return u=l,u.apply(null,arguments)}function f(_,A){var L=Array.prototype.slice.call(arguments,1);return function(){var H=L.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function d(_,A){function L(){}L.prototype=A.prototype,_.Z=A.prototype,_.prototype=new L,_.prototype.constructor=_,_.Ob=function(H,ge,Se){for(var Xe=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)Xe[Pt-2]=arguments[Pt];return A.prototype[ge].apply(H,Xe)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function p(_){const A=_.length;if(A>0){const L=Array(A);for(let H=0;H<A;H++)L[H]=_[H];return L}return[]}function x(_,A){for(let H=1;H<arguments.length;H++){const ge=arguments[H];var L=typeof ge;if(L=L!="object"?L:ge?Array.isArray(ge)?"array":L:"null",L=="array"||L=="object"&&typeof ge.length=="number"){L=_.length||0;const Se=ge.length||0;_.length=L+Se;for(let Xe=0;Xe<Se;Xe++)_[L+Xe]=ge[Xe]}else _.push(ge)}}class v{constructor(A,L){this.i=A,this.j=L,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function E(_){a.setTimeout(()=>{throw _},0)}function R(){var _=M;let A=null;return _.g&&(A=_.g,_.g=_.g.next,_.g||(_.h=null),A.next=null),A}class S{constructor(){this.h=this.g=null}add(A,L){const H=C.get();H.set(A,L),this.h?this.h.next=H:this.g=H,this.h=H}}var C=new v(()=>new O,_=>_.reset());class O{constructor(){this.next=this.g=this.h=null}set(A,L){this.h=A,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let N,z=!1,M=new S,P=()=>{const _=Promise.resolve(void 0);N=()=>{_.then(b)}};function b(){for(var _;_=R();){try{_.h.call(_.g)}catch(L){E(L)}var A=C;A.j(_),A.h<100&&(A.h++,_.next=A.g,A.g=_)}z=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(_,A){this.type=_,this.g=this.target=A,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var _=!1,A=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const L=()=>{};a.addEventListener("test",L,A),a.removeEventListener("test",L,A)}catch{}return _})();function V(_){return/^[\s\xa0]*$/.test(_)}function Ae(_,A){B.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,A)}d(Ae,B),Ae.prototype.init=function(_,A){const L=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=A,A=_.relatedTarget,A||(L=="mouseover"?A=_.fromElement:L=="mouseout"&&(A=_.toElement)),this.relatedTarget=A,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),Pe=0;function Me(_,A,L,H,ge){this.listener=_,this.proxy=null,this.src=A,this.type=L,this.capture=!!H,this.ha=ge,this.key=++Pe,this.da=this.fa=!1}function he(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ae(_,A,L){for(const H in _)A.call(L,_[H],H,_)}function Ee(_,A){for(const L in _)A.call(void 0,_[L],L,_)}function J(_){const A={};for(const L in _)A[L]=_[L];return A}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(_,A){let L,H;for(let ge=1;ge<arguments.length;ge++){H=arguments[ge];for(L in H)_[L]=H[L];for(let Se=0;Se<F.length;Se++)L=F[Se],Object.prototype.hasOwnProperty.call(H,L)&&(_[L]=H[L])}}function te(_){this.src=_,this.g={},this.h=0}te.prototype.add=function(_,A,L,H,ge){const Se=_.toString();_=this.g[Se],_||(_=this.g[Se]=[],this.h++);const Xe=fe(_,A,H,ge);return Xe>-1?(A=_[Xe],L||(A.fa=!1)):(A=new Me(A,this.src,Se,!!H,ge),A.fa=L,_.push(A)),A};function Y(_,A){const L=A.type;if(L in _.g){var H=_.g[L],ge=Array.prototype.indexOf.call(H,A,void 0),Se;(Se=ge>=0)&&Array.prototype.splice.call(H,ge,1),Se&&(he(A),_.g[L].length==0&&(delete _.g[L],_.h--))}}function fe(_,A,L,H){for(let ge=0;ge<_.length;++ge){const Se=_[ge];if(!Se.da&&Se.listener==A&&Se.capture==!!L&&Se.ha==H)return ge}return-1}var se="closure_lm_"+(Math.random()*1e6|0),ne={};function k(_,A,L,H,ge){if(Array.isArray(A)){for(let Se=0;Se<A.length;Se++)k(_,A[Se],L,H,ge);return null}return L=Mt(L),_&&_[be]?_.J(A,L,o(H)?!!H.capture:!1,ge):Te(_,A,L,!1,H,ge)}function Te(_,A,L,H,ge,Se){if(!A)throw Error("Invalid event type");const Xe=o(ge)?!!ge.capture:!!ge;let Pt=tt(_);if(Pt||(_[se]=Pt=new te(_)),L=Pt.add(A,L,H,Xe,Se),L.proxy)return L;if(H=le(),L.proxy=H,H.src=_,H.listener=L,_.addEventListener)U||(ge=Xe),ge===void 0&&(ge=!1),_.addEventListener(A.toString(),H,ge);else if(_.attachEvent)_.attachEvent(W(A.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return L}function le(){function _(L){return A.call(_.src,_.listener,L)}const A=Ie;return _}function We(_,A,L,H,ge){if(Array.isArray(A))for(var Se=0;Se<A.length;Se++)We(_,A[Se],L,H,ge);else H=o(H)?!!H.capture:!!H,L=Mt(L),_&&_[be]?(_=_.i,Se=String(A).toString(),Se in _.g&&(A=_.g[Se],L=fe(A,L,H,ge),L>-1&&(he(A[L]),Array.prototype.splice.call(A,L,1),A.length==0&&(delete _.g[Se],_.h--)))):_&&(_=tt(_))&&(A=_.g[A.toString()],_=-1,A&&(_=fe(A,L,H,ge)),(L=_>-1?A[_]:null)&&ce(L))}function ce(_){if(typeof _!="number"&&_&&!_.da){var A=_.src;if(A&&A[be])Y(A.i,_);else{var L=_.type,H=_.proxy;A.removeEventListener?A.removeEventListener(L,H,_.capture):A.detachEvent?A.detachEvent(W(L),H):A.addListener&&A.removeListener&&A.removeListener(H),(L=tt(A))?(Y(L,_),L.h==0&&(L.src=null,A[se]=null)):he(_)}}}function W(_){return _ in ne?ne[_]:ne[_]="on"+_}function Ie(_,A){if(_.da)_=!0;else{A=new Ae(A,this);const L=_.listener,H=_.ha||_.src;_.fa&&ce(_),_=L.call(H,A)}return _}function tt(_){return _=_[se],_ instanceof te?_:null}var De="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mt(_){return typeof _=="function"?_:(_[De]||(_[De]=function(A){return _.handleEvent(A)}),_[De])}function Rt(){D.call(this),this.i=new te(this),this.M=this,this.G=null}d(Rt,D),Rt.prototype[be]=!0,Rt.prototype.removeEventListener=function(_,A,L,H){We(this,_,A,L,H)};function Ct(_,A){var L,H=_.G;if(H)for(L=[];H;H=H.G)L.push(H);if(_=_.M,H=A.type||A,typeof A=="string")A=new B(A,_);else if(A instanceof B)A.target=A.target||_;else{var ge=A;A=new B(H,_),re(A,ge)}ge=!0;let Se,Xe;if(L)for(Xe=L.length-1;Xe>=0;Xe--)Se=A.g=L[Xe],ge=wn(Se,H,!0,A)&&ge;if(Se=A.g=_,ge=wn(Se,H,!0,A)&&ge,ge=wn(Se,H,!1,A)&&ge,L)for(Xe=0;Xe<L.length;Xe++)Se=A.g=L[Xe],ge=wn(Se,H,!1,A)&&ge}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var _=this.i;for(const A in _.g){const L=_.g[A];for(let H=0;H<L.length;H++)he(L[H]);delete _.g[A],_.h--}}this.G=null},Rt.prototype.J=function(_,A,L,H){return this.i.add(String(_),A,!1,L,H)},Rt.prototype.K=function(_,A,L,H){return this.i.add(String(_),A,!0,L,H)};function wn(_,A,L,H){if(A=_.i.g[String(A)],!A)return!0;A=A.concat();let ge=!0;for(let Se=0;Se<A.length;++Se){const Xe=A[Se];if(Xe&&!Xe.da&&Xe.capture==L){const Pt=Xe.listener,Zn=Xe.ha||Xe.src;Xe.fa&&Y(_.i,Xe),ge=Pt.call(Zn,H)!==!1&&ge}}return ge&&!H.defaultPrevented}function vi(_,A){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:a.setTimeout(_,A||0)}function pn(_){_.g=vi(()=>{_.g=null,_.i&&(_.i=!1,pn(_))},_.l);const A=_.h;_.h=null,_.m.apply(null,A)}class fr extends D{constructor(A,L){super(),this.m=A,this.l=L,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:pn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(_){D.call(this),this.h=_,this.g={}}d(Vr,D);var Li=[];function xi(_){ae(_.g,function(A,L){this.g.hasOwnProperty(L)&&ce(A)},_),_.g={}}Vr.prototype.N=function(){Vr.Z.N.call(this),xi(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ir=a.JSON.stringify,To=a.JSON.parse,ns=class{stringify(_){return a.JSON.stringify(_,void 0)}parse(_){return a.JSON.parse(_,void 0)}};function Ei(){}function So(){}var rs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bs(){B.call(this,"d")}d(bs,B);function na(){B.call(this,"c")}d(na,B);var jr={},ra=null;function is(){return ra=ra||new Rt}jr.Ia="serverreachability";function ss(_){B.call(this,jr.Ia,_)}d(ss,B);function Ar(_){const A=is();Ct(A,new ss(A))}jr.STAT_EVENT="statevent";function Br(_,A){B.call(this,jr.STAT_EVENT,_),this.stat=A}d(Br,B);function Zt(_){const A=is();Ct(A,new Br(A,_))}jr.Ja="timingevent";function as(_,A){B.call(this,jr.Ja,_),this.size=A}d(as,B);function os(_,A){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){_()},A)}function On(){this.g=!0}On.prototype.ua=function(){this.g=!1};function Ni(_,A,L,H,ge,Se){_.info(function(){if(_.g)if(Se){var Xe="",Pt=Se.split("&");for(let sn=0;sn<Pt.length;sn++){var Zn=Pt[sn].split("=");if(Zn.length>1){const nr=Zn[0];Zn=Zn[1];const fs=nr.split("_");Xe=fs.length>=2&&fs[1]=="type"?Xe+(nr+"="+Zn+"&"):Xe+(nr+"=redacted&")}}}else Xe=null;else Xe=Se;return"XMLHTTP REQ ("+H+") [attempt "+ge+"]: "+A+`
`+L+`
`+Xe})}function dr(_,A,L,H,ge,Se,Xe){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ge+"]: "+A+`
`+L+`
`+Se+" "+Xe})}function Ln(_,A,L,H){_.info(function(){return"XMLHTTP TEXT ("+A+"): "+mr(_,L)+(H?" "+H:"")})}function gr(_,A){_.info(function(){return"TIMEOUT: "+A})}On.prototype.info=function(){};function mr(_,A){if(!_.g)return A;if(!A)return null;try{const Se=JSON.parse(A);if(Se){for(_=0;_<Se.length;_++)if(Array.isArray(Se[_])){var L=Se[_];if(!(L.length<2)){var H=L[1];if(Array.isArray(H)&&!(H.length<1)){var ge=H[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(let Xe=1;Xe<H.length;Xe++)H[Xe]=""}}}}return Ir(Se)}catch{return A}}var tr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gn;function Xn(){}d(Xn,Ei),Xn.prototype.g=function(){return new XMLHttpRequest},Gn=new Xn;function Di(_){return encodeURIComponent(String(_))}function G(_){var A=1;_=_.split(":");const L=[];for(;A>0&&_.length;)L.push(_.shift()),A--;return _.length&&L.push(_.join(":")),L}function X(_,A,L,H){this.j=_,this.i=A,this.l=L,this.S=H||1,this.V=new Vr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new K}function K(){this.i=null,this.g="",this.h=!1}var q={},Z={};function Q(_,A,L){_.M=1,_.A=Io(Os(A)),_.u=L,_.R=!0,pe(_,null)}function pe(_,A){_.F=Date.now(),xe(_),_.B=Os(_.A);var L=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),f0(L.i,"t",H),_.C=0,L=_.j.L,_.h=new K,_.g=Gp(_.j,L?A:null,!_.u),_.P>0&&(_.O=new fr(u(_.Y,_,_.g),_.P)),A=_.V,L=_.g,H=_.ba;var ge="readystatechange";Array.isArray(ge)||(ge&&(Li[0]=ge.toString()),ge=Li);for(let Se=0;Se<ge.length;Se++){const Xe=k(L,ge[Se],H||A.handleEvent,!1,A.h||A);if(!Xe)break;A.g[Xe.key]=Xe}A=_.J?J(_.J):{},_.u?(_.v||(_.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,A)):(_.v="GET",_.g.ea(_.B,_.v,null,A)),Ar(),Ni(_.i,_.v,_.B,_.l,_.S,_.u)}X.prototype.ba=function(_){_=_.target;const A=this.O;A&&Fa(_)==3?A.j():this.Y(_)},X.prototype.Y=function(_){try{if(_==this.g)e:{const Pt=Fa(this.g),Zn=this.g.ya(),sn=this.g.ca();if(!(Pt<3)&&(Pt!=3||this.g&&(this.h.h||this.g.la()||jp(this.g)))){this.K||Pt!=4||Zn==7||(Zn==8||sn<=0?Ar(3):Ar(2)),He(this);var A=this.g.ca();this.X=A;var L=Ce(this);if(this.o=A==200,dr(this.i,this.v,this.B,this.l,this.S,Pt,A),this.o){if(this.U&&!this.L){t:{if(this.g){var H,ge=this.g;if((H=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(H)){var Se=H;break t}}Se=null}if(_=Se)Ln(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ge(this,_);else{this.o=!1,this.m=3,Zt(12),Be(this),et(this);break e}}if(this.R){_=!0;let nr;for(;!this.K&&this.C<L.length;)if(nr=ye(this,L),nr==Z){Pt==4&&(this.m=4,Zt(14),_=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==q){this.m=4,Zt(15),Ln(this.i,this.l,L,"[Invalid Chunk]"),_=!1;break}else Ln(this.i,this.l,nr,null),Ge(this,nr);if(me(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||L.length!=0||this.h.h||(this.m=1,Zt(16),_=!1),this.o=this.o&&_,!_)Ln(this.i,this.l,L,"[Invalid Chunked Response]"),Be(this),et(this);else if(L.length>0&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.aa&&!Xe.P&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),eu(Xe),Xe.P=!0,Zt(11))}}else Ln(this.i,this.l,L,null),Ge(this,L);Pt==4&&Be(this),this.o&&!this.K&&(Pt==4?zh(this.j,this):(this.o=!1,xe(this)))}else g0(this.g),A==400&&L.indexOf("Unknown SID")>0?(this.m=3,Zt(12)):(this.m=0,Zt(13)),Be(this),et(this)}}}catch{}};function Ce(_){if(!me(_))return _.g.la();const A=jp(_.g);if(A==="")return"";let L="";const H=A.length,ge=Fa(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Be(_),et(_),"";_.h.i=new a.TextDecoder}for(let Se=0;Se<H;Se++)_.h.h=!0,L+=_.h.i.decode(A[Se],{stream:!(ge&&Se==H-1)});return A.length=0,_.h.g+=L,_.C=0,_.h.g}function me(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function ye(_,A){var L=_.C,H=A.indexOf(`
`,L);return H==-1?Z:(L=Number(A.substring(L,H)),isNaN(L)?q:(H+=1,H+L>A.length?Z:(A=A.slice(H,H+L),_.C=H+L,A)))}X.prototype.cancel=function(){this.K=!0,Be(this)};function xe(_){_.T=Date.now()+_.H,je(_,_.H)}function je(_,A){if(_.D!=null)throw Error("WatchDog timer not null");_.D=os(u(_.aa,_),A)}function He(_){_.D&&(a.clearTimeout(_.D),_.D=null)}X.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(gr(this.i,this.B),this.M!=2&&(Ar(),Zt(17)),Be(this),this.m=2,et(this)):je(this,this.T-_)};function et(_){_.j.I==0||_.K||zh(_.j,_)}function Be(_){He(_);var A=_.O;A&&typeof A.dispose=="function"&&A.dispose(),_.O=null,xi(_.V),_.g&&(A=_.g,_.g=null,A.abort(),A.dispose())}function Ge(_,A){try{var L=_.j;if(L.I!=0&&(L.g==_||ia(L.h,_))){if(!_.L&&ia(L.h,_)&&L.I==3){try{var H=L.Ba.g.parse(A)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ge=H;if(ge[0]==0){e:if(!L.v){if(L.g)if(L.g.F+3e3<_.F)Uh(L),us(L);else break e;Ba(L),Zt(18)}}else L.xa=ge[1],0<L.xa-L.K&&ge[2]<37500&&L.F&&L.A==0&&!L.C&&(L.C=os(u(L.Va,L),6e3));Cn(L.h)<=1&&L.ta&&(L.ta=void 0)}else hs(L,11)}else if((_.L||L.g==_)&&Uh(L),!V(A))for(ge=L.Ba.g.parse(A),A=0;A<ge.length;A++){let sn=ge[A];const nr=sn[0];if(!(nr<=L.K))if(L.K=nr,sn=sn[1],L.I==2)if(sn[0]=="c"){L.M=sn[1],L.ba=sn[2];const fs=sn[3];fs!=null&&(L.ka=fs,L.j.info("VER="+L.ka));const Mo=sn[4];Mo!=null&&(L.za=Mo,L.j.info("SVER="+L.za));const Ga=sn[5];Ga!=null&&typeof Ga=="number"&&Ga>0&&(H=1.5*Ga,L.O=H,L.j.info("backChannelRequestTimeoutMs_="+H)),H=L;const Ua=_.g;if(Ua){const Hh=Ua.g?Ua.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hh){var Se=H.h;Se.g||Hh.indexOf("spdy")==-1&&Hh.indexOf("quic")==-1&&Hh.indexOf("h2")==-1||(Se.j=Se.l,Se.g=new Set,Se.h&&(ks(Se,Se.h),Se.h=null))}if(H.G){const _0=Ua.g?Ua.g.getResponseHeader("X-HTTP-Session-Id"):null;_0&&(H.wa=_0,Kt(H.J,H.G,_0))}}L.I=3,L.l&&L.l.ra(),L.aa&&(L.T=Date.now()-_.F,L.j.info("Handshake RTT: "+L.T+"ms")),H=L;var Xe=_;if(H.na=p0(H,H.L?H.ba:null,H.W),Xe.L){ls(H.h,Xe);var Pt=Xe,Zn=H.O;Zn&&(Pt.H=Zn),Pt.D&&(He(Pt),xe(Pt)),H.g=Xe}else ii(H);L.i.length>0&&Po(L)}else sn[0]!="stop"&&sn[0]!="close"||hs(L,7);else L.I==3&&(sn[0]=="stop"||sn[0]=="close"?sn[0]=="stop"?hs(L,7):Bh(L):sn[0]!="noop"&&L.l&&L.l.qa(sn),L.A=0)}}Ar(4)}catch{}}var vt=class{constructor(_,A){this.g=_,this.map=A}};function Qt(_){this.l=_||10,a.PerformanceNavigationTiming?(_=a.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rn(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Cn(_){return _.h?1:_.g?_.g.size:0}function ia(_,A){return _.h?_.h==A:_.g?_.g.has(A):!1}function ks(_,A){_.g?_.g.add(A):_.h=A}function ls(_,A){_.h&&_.h==A?_.h=null:_.g&&_.g.has(A)&&_.g.delete(A)}Qt.prototype.cancel=function(){if(this.i=Yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Yn(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let A=_.i;for(const L of _.g.values())A=A.concat(L.G);return A}return p(_.i)}var pl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nn(_,A){if(_){_=_.split("&");for(let L=0;L<_.length;L++){const H=_[L].indexOf("=");let ge,Se=null;H>=0?(ge=_[L].substring(0,H),Se=_[L].substring(H+1)):ge=_[L],A(ge,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function ba(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;_ instanceof ba?(this.l=_.l,qc(this,_.j),this.o=_.o,this.g=_.g,ka(this,_.u),this.h=_.h,_l(this,d0(_.i)),this.m=_.m):_&&(A=String(_).match(pl))?(this.l=!1,qc(this,A[1]||"",!0),this.o=Xc(A[2]||""),this.g=Xc(A[3]||"",!0),ka(this,A[4]),this.h=Xc(A[5]||"",!0),_l(this,A[6]||"",!0),this.m=Xc(A[7]||"")):(this.l=!1,this.i=new jt(null,this.l))}ba.prototype.toString=function(){const _=[];var A=this.j;A&&_.push(Yc(A,o0,!0),":");var L=this.g;return(L||A=="file")&&(_.push("//"),(A=this.o)&&_.push(Yc(A,o0,!0),"@"),_.push(Di(L).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.u,L!=null&&_.push(":",String(L))),(L=this.h)&&(this.g&&L.charAt(0)!="/"&&_.push("/"),_.push(Yc(L,L.charAt(0)=="/"?Zc:l0,!0))),(L=this.i.toString())&&_.push("?",L),(L=this.m)&&_.push("#",Yc(L,c0)),_.join("")},ba.prototype.resolve=function(_){const A=Os(this);let L=!!_.j;L?qc(A,_.j):L=!!_.o,L?A.o=_.o:L=!!_.g,L?A.g=_.g:L=_.u!=null;var H=_.h;if(L)ka(A,_.u);else if(L=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var ge=A.h.lastIndexOf("/");ge!=-1&&(H=A.h.slice(0,ge+1)+H)}if(ge=H,ge==".."||ge==".")H="";else if(ge.indexOf("./")!=-1||ge.indexOf("/.")!=-1){H=ge.lastIndexOf("/",0)==0,ge=ge.split("/");const Se=[];for(let Xe=0;Xe<ge.length;){const Pt=ge[Xe++];Pt=="."?H&&Xe==ge.length&&Se.push(""):Pt==".."?((Se.length>1||Se.length==1&&Se[0]!="")&&Se.pop(),H&&Xe==ge.length&&Se.push("")):(Se.push(Pt),H=!0)}H=Se.join("/")}else H=ge}return L?A.h=H:L=_.i.toString()!=="",L?_l(A,d0(_.i)):L=!!_.m,L&&(A.m=_.m),A};function Os(_){return new ba(_)}function qc(_,A,L){_.j=L?Xc(A,!0):A,_.j&&(_.j=_.j.replace(/:$/,""))}function ka(_,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);_.u=A}else _.u=null}function _l(_,A,L){A instanceof jt?(_.i=A,Fh(_.i,_.l)):(L||(A=Yc(A,jx)),_.i=new jt(A,_.l))}function Kt(_,A,L){_.i.set(A,L)}function Io(_){return Kt(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Xc(_,A){return _?A?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Yc(_,A,L){return typeof _=="string"?(_=encodeURI(_).replace(A,a0),L&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function a0(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var o0=/[#\/\?@]/g,l0=/[#\?:]/g,Zc=/[#\?]/g,jx=/[#\?@]/g,c0=/#/g;function jt(_,A){this.h=this.g=null,this.i=_||null,this.j=!!A}function Oa(_){_.g||(_.g=new Map,_.h=0,_.i&&Nn(_.i,function(A,L){_.add(decodeURIComponent(A.replace(/\+/g," ")),L)}))}n=jt.prototype,n.add=function(_,A){Oa(this),this.i=null,_=La(this,_);let L=this.g.get(_);return L||this.g.set(_,L=[]),L.push(A),this.h+=1,this};function u0(_,A){Oa(_),A=La(_,A),_.g.has(A)&&(_.i=null,_.h-=_.g.get(A).length,_.g.delete(A))}function Dh(_,A){return Oa(_),A=La(_,A),_.g.has(A)}n.forEach=function(_,A){Oa(this),this.g.forEach(function(L,H){L.forEach(function(ge){_.call(A,ge,H,this)},this)},this)};function h0(_,A){Oa(_);let L=[];if(typeof A=="string")Dh(_,A)&&(L=L.concat(_.g.get(La(_,A))));else for(_=Array.from(_.g.values()),A=0;A<_.length;A++)L=L.concat(_[A]);return L}n.set=function(_,A){return Oa(this),this.i=null,_=La(this,_),Dh(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[A]),this.h+=1,this},n.get=function(_,A){return _?(_=h0(this,_),_.length>0?String(_[0]):A):A};function f0(_,A,L){u0(_,A),L.length>0&&(_.i=null,_.g.set(La(_,A),p(L)),_.h+=L.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],A=Array.from(this.g.keys());for(let H=0;H<A.length;H++){var L=A[H];const ge=Di(L);L=h0(this,L);for(let Se=0;Se<L.length;Se++){let Xe=ge;L[Se]!==""&&(Xe+="="+Di(L[Se])),_.push(Xe)}}return this.i=_.join("&")};function d0(_){const A=new jt;return A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),A}function La(_,A){return A=String(A),_.j&&(A=A.toLowerCase()),A}function Fh(_,A){A&&!_.j&&(Oa(_),_.i=null,_.g.forEach(function(L,H){const ge=H.toLowerCase();H!=ge&&(u0(this,H),f0(this,ge,L))},_)),_.j=A}function Na(_,A){const L=new On;if(a.Image){const H=new Image;H.onload=f(Gr,L,"TestLoadImage: loaded",!0,A,H),H.onerror=f(Gr,L,"TestLoadImage: error",!1,A,H),H.onabort=f(Gr,L,"TestLoadImage: abort",!1,A,H),H.ontimeout=f(Gr,L,"TestLoadImage: timeout",!1,A,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else A(!1)}function Da(_,A){const L=new On,H=new AbortController,ge=setTimeout(()=>{H.abort(),Gr(L,"TestPingServer: timeout",!1,A)},1e4);fetch(_,{signal:H.signal}).then(Se=>{clearTimeout(ge),Se.ok?Gr(L,"TestPingServer: ok",!0,A):Gr(L,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ge),Gr(L,"TestPingServer: error",!1,A)})}function Gr(_,A,L,H,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),H(L)}catch{}}function Qc(){this.g=new ns}function Ao(_){this.i=_.Sb||null,this.h=_.ab||!1}d(Ao,Ei),Ao.prototype.g=function(){return new cs(this.i,this.h)};function cs(_,A){Rt.call(this),this.H=_,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(cs,Rt),n=cs.prototype,n.open=function(_,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=A,this.readyState=1,sa(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(A.body=_),(this.H||a).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yl(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dp(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dp(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var A=_.value?_.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!_.done}))&&(this.response=this.responseText+=A)}_.done?yl(this):sa(this),this.readyState==3&&Dp(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,yl(this))},n.Na=function(_){this.g&&(this.response=_,yl(this))},n.ga=function(){this.g&&yl(this)};function yl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,sa(_)}n.setRequestHeader=function(_,A){this.A.append(_,A)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],A=this.h.entries();for(var L=A.next();!L.done;)L=L.value,_.push(L[0]+": "+L[1]),L=A.next();return _.join(`\r
`)};function sa(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Fp(_){let A="";return ae(_,function(L,H){A+=H,A+=":",A+=L,A+=`\r
`}),A}function Vh(_,A,L){e:{for(H in L){var H=!1;break e}H=!0}H||(L=Fp(L),typeof _=="string"?L!=null&&Di(L):Kt(_,A,L))}function yn(_){Rt.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(yn,Rt);var Vp=/^https?$/i,Bx=["POST","PUT"];n=yn.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,A,L,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);A=A?A.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gn.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(A,String(_),!0),this.B=!1}catch(Se){vl(this,Se);return}if(_=L||"",L=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ge in H)L.set(ge,H[ge]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const Se of H.keys())L.set(Se,H.get(Se));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(L.keys()).find(Se=>Se.toLowerCase()=="content-type"),ge=a.FormData&&_ instanceof a.FormData,!(Array.prototype.indexOf.call(Bx,A,void 0)>=0)||H||ge||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Se,Xe]of L)this.g.setRequestHeader(Se,Xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(Se){vl(this,Se)}};function vl(_,A){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=A,_.o=5,xl(_),Co(_)}function xl(_){_.A||(_.A=!0,Ct(_,"complete"),Ct(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,Ct(this,"complete"),Ct(this,"abort"),Co(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),yn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ro(this):this.Xa())},n.Xa=function(){Ro(this)};function Ro(_){if(_.h&&typeof s<"u"){if(_.v&&Fa(_)==4)setTimeout(_.Ca.bind(_),0);else if(Ct(_,"readystatechange"),Fa(_)==4){_.h=!1;try{const Se=_.ca();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var L;if(!(L=A)){var H;if(H=Se===0){let Xe=String(_.D).match(pl)[1]||null;!Xe&&a.self&&a.self.location&&(Xe=a.self.location.protocol.slice(0,-1)),H=!Vp.test(Xe?Xe.toLowerCase():"")}L=H}if(L)Ct(_,"complete"),Ct(_,"success");else{_.o=6;try{var ge=Fa(_)>2?_.g.statusText:""}catch{ge=""}_.l=ge+" ["+_.ca()+"]",xl(_)}}finally{Co(_)}}}}function Co(_,A){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const L=_.g;_.g=null,A||Ct(_,"ready");try{L.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Fa(_){return _.g?_.g.readyState:0}n.ca=function(){try{return Fa(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var A=this.g.responseText;return _&&A.indexOf(_)==0&&(A=A.substring(_.length)),To(A)}};function jp(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function g0(_){const A={};_=(_.g&&Fa(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(V(_[H]))continue;var L=G(_[H]);const ge=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const Se=A[ge]||[];A[ge]=Se,Se.push(L)}Ee(A,function(H){return H.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(_,A,L){return L&&L.internalChannelParams&&L.internalChannelParams[_]||A}function jh(_){this.za=0,this.i=[],this.j=new On,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Va("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Va("baseRetryDelayMs",5e3,_),this.Za=Va("retryDelaySeedMs",1e4,_),this.Ta=Va("forwardChannelMaxRetries",2,_),this.va=Va("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new Qt(_&&_.concurrentRequestLimit),this.Ba=new Qc,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=jh.prototype,n.ka=8,n.I=1,n.connect=function(_,A,L,H){Zt(0),this.W=_,this.H=A||{},L&&H!==void 0&&(this.H.OSID=L,this.H.OAID=H),this.F=this.X,this.J=p0(this,null,this.W),Po(this)};function Bh(_){if(Gh(_),_.I==3){var A=_.V++,L=Os(_.J);if(Kt(L,"SID",_.M),Kt(L,"RID",A),Kt(L,"TYPE","terminate"),ja(_,L),A=new X(_,_.j,A),A.M=2,A.A=Io(Os(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(A.A.toString(),"")}catch{}!L&&a.Image&&(new Image().src=A.A,L=!0),L||(A.g=Gp(A.j,null),A.g.ea(A.A)),A.F=Date.now(),xe(A)}tu(_)}function us(_){_.g&&(eu(_),_.g.cancel(),_.g=null)}function Gh(_){us(_),_.v&&(a.clearTimeout(_.v),_.v=null),Uh(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&a.clearTimeout(_.m),_.m=null)}function Po(_){if(!rn(_.h)&&!_.m){_.m=!0;var A=_.Ea;N||P(),z||(N(),z=!0),M.add(A,_),_.D=0}}function Bp(_,A){return Cn(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=A.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=os(u(_.Ea,_,A),$h(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const ge=new X(this,this.j,_);let Se=this.o;if(this.U&&(Se?(Se=J(Se),re(Se,this.U)):Se=this.U),this.u!==null||this.R||(ge.J=Se,Se=null),this.S)e:{for(var A=0,L=0;L<this.i.length;L++){t:{var H=this.i[L];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(A+=H,A>4096){A=L;break e}if(A===4096||L===this.i.length-1){A=L+1;break e}}A=1e3}else A=1e3;A=m0(this,ge,A),L=Os(this.J),Kt(L,"RID",_),Kt(L,"CVER",22),this.G&&Kt(L,"X-HTTP-Session-Id",this.G),ja(this,L),Se&&(this.R?A="headers="+Di(Fp(Se))+"&"+A:this.u&&Vh(L,this.u,Se)),ks(this.h,ge),this.Ra&&Kt(L,"TYPE","init"),this.S?(Kt(L,"$req",A),Kt(L,"SID","null"),ge.U=!0,Q(ge,L,null)):Q(ge,L,A),this.I=2}}else this.I==3&&(_?Jc(this,_):this.i.length==0||rn(this.h)||Jc(this))};function Jc(_,A){var L;A?L=A.l:L=_.V++;const H=Os(_.J);Kt(H,"SID",_.M),Kt(H,"RID",L),Kt(H,"AID",_.K),ja(_,H),_.u&&_.o&&Vh(H,_.u,_.o),L=new X(_,_.j,L,_.D+1),_.u===null&&(L.J=_.o),A&&(_.i=A.G.concat(_.i)),A=m0(_,L,1e3),L.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),ks(_.h,L),Q(L,H,A)}function ja(_,A){_.H&&ae(_.H,function(L,H){Kt(A,H,L)}),_.l&&ae({},function(L,H){Kt(A,H,L)})}function m0(_,A,L){L=Math.min(_.i.length,L);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var ge=_.i;let Pt=-1;for(;;){const Zn=["count="+L];Pt==-1?L>0?(Pt=ge[0].g,Zn.push("ofs="+Pt)):Pt=0:Zn.push("ofs="+Pt);let sn=!0;for(let nr=0;nr<L;nr++){var Se=ge[nr].g;const fs=ge[nr].map;if(Se-=Pt,Se<0)Pt=Math.max(0,ge[nr].g-100),sn=!1;else try{Se="req"+Se+"_"||"";try{var Xe=fs instanceof Map?fs:Object.entries(fs);for(const[Mo,Ga]of Xe){let Ua=Ga;o(Ga)&&(Ua=Ir(Ga)),Zn.push(Se+Mo+"="+encodeURIComponent(Ua))}}catch(Mo){throw Zn.push(Se+"type="+encodeURIComponent("_badmap")),Mo}}catch{H&&H(fs)}}if(sn){Xe=Zn.join("&");break e}}Xe=void 0}return _=_.i.splice(0,L),A.G=_,Xe}function ii(_){if(!_.g&&!_.v){_.Y=1;var A=_.Da;N||P(),z||(N(),z=!0),M.add(A,_),_.A=0}}function Ba(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=os(u(_.Da,_),$h(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,El(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=os(u(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Zt(10),us(this),El(this))};function eu(_){_.B!=null&&(a.clearTimeout(_.B),_.B=null)}function El(_){_.g=new X(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var A=Os(_.na);Kt(A,"RID","rpc"),Kt(A,"SID",_.M),Kt(A,"AID",_.K),Kt(A,"CI",_.F?"0":"1"),!_.F&&_.ia&&Kt(A,"TO",_.ia),Kt(A,"TYPE","xmlhttp"),ja(_,A),_.u&&_.o&&Vh(A,_.u,_.o),_.O&&(_.g.H=_.O);var L=_.g;_=_.ba,L.M=1,L.A=Io(Os(A)),L.u=null,L.R=!0,pe(L,_)}n.Va=function(){this.C!=null&&(this.C=null,us(this),Ba(this),Zt(19))};function Uh(_){_.C!=null&&(a.clearTimeout(_.C),_.C=null)}function zh(_,A){var L=null;if(_.g==A){Uh(_),eu(_),_.g=null;var H=2}else if(ia(_.h,A))L=A.G,ls(_.h,A),H=1;else return;if(_.I!=0){if(A.o)if(H==1){L=A.u?A.u.length:0,A=Date.now()-A.F;var ge=_.D;H=is(),Ct(H,new as(H,L)),Po(_)}else ii(_);else if(ge=A.m,ge==3||ge==0&&A.X>0||!(H==1&&Bp(_,A)||H==2&&Ba(_)))switch(L&&L.length>0&&(A=_.h,A.i=A.i.concat(L)),ge){case 1:hs(_,5);break;case 4:hs(_,10);break;case 3:hs(_,6);break;default:hs(_,2)}}}function $h(_,A){let L=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(L*=2),L*A}function hs(_,A){if(_.j.info("Error code "+A),A==2){var L=u(_.bb,_),H=_.Ua;const ge=!H;H=new ba(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||qc(H,"https"),Io(H),ge?Na(H.toString(),L):Da(H.toString(),L)}else Zt(2);_.I=0,_.l&&_.l.pa(A),tu(_),Gh(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function tu(_){if(_.I=0,_.ja=[],_.l){const A=Yn(_.h);(A.length!=0||_.i.length!=0)&&(x(_.ja,A),x(_.ja,_.i),_.h.i.length=0,p(_.i),_.i.length=0),_.l.oa()}}function p0(_,A,L){var H=L instanceof ba?Os(L):new ba(L);if(H.g!="")A&&(H.g=A+"."+H.g),ka(H,H.u);else{var ge=a.location;H=ge.protocol,A=A?A+"."+ge.hostname:ge.hostname,ge=+ge.port;const Se=new ba(null);H&&qc(Se,H),A&&(Se.g=A),ge&&ka(Se,ge),L&&(Se.h=L),H=Se}return L=_.G,A=_.wa,L&&A&&Kt(H,L,A),Kt(H,"VER",_.ka),ja(_,H),H}function Gp(_,A,L){if(A&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=_.Aa&&!_.ma?new yn(new Ao({ab:L})):new yn(_.ma),A.Fa(_.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Up(){}n=Up.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Wh(){}Wh.prototype.g=function(_,A){return new Ur(_,A)};function Ur(_,A){Rt.call(this),this.g=new jh(A),this.l=_,this.h=A&&A.messageUrlParams||null,_=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(_?_["X-WebChannel-Content-Type"]=A.messageContentType:_={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(_?_["X-WebChannel-Client-Profile"]=A.sa:_={"X-WebChannel-Client-Profile":A.sa}),this.g.U=_,(_=A&&A.Qb)&&!V(_)&&(this.g.u=_),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!V(A)&&(this.g.G=A,_=this.h,_!==null&&A in _&&(_=this.h,A in _&&delete _[A])),this.j=new wl(this)}d(Ur,Rt),Ur.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ur.prototype.close=function(){Bh(this.g)},Ur.prototype.o=function(_){var A=this.g;if(typeof _=="string"){var L={};L.__data__=_,_=L}else this.v&&(L={},L.__data__=Ir(_),_=L);A.i.push(new vt(A.Ya++,_)),A.I==3&&Po(A)},Ur.prototype.N=function(){this.g.l=null,delete this.j,Bh(this.g),delete this.g,Ur.Z.N.call(this)};function zp(_){bs.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var A=_.__sm__;if(A){e:{for(const L in A){_=L;break e}_=void 0}(this.i=_)&&(_=this.i,A=A!==null&&_ in A?A[_]:void 0),this.data=A}else this.data=_}d(zp,bs);function $p(){na.call(this),this.status=1}d($p,na);function wl(_){this.g=_}d(wl,Up),wl.prototype.ra=function(){Ct(this.g,"a")},wl.prototype.qa=function(_){Ct(this.g,new zp(_))},wl.prototype.pa=function(_){Ct(this.g,new $p)},wl.prototype.oa=function(){Ct(this.g,"b")},Wh.prototype.createWebChannel=Wh.prototype.g,Ur.prototype.send=Ur.prototype.o,Ur.prototype.open=Ur.prototype.m,Ur.prototype.close=Ur.prototype.close,ZN=function(){return new Wh},YN=function(){return is()},XN=jr,dT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,A1=tr,Vt.COMPLETE="complete",qN=Vt,So.EventType=rs,rs.OPEN="a",rs.CLOSE="b",rs.ERROR="c",rs.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,ug=So,yn.prototype.listenOnce=yn.prototype.K,yn.prototype.getLastError=yn.prototype.Ha,yn.prototype.getLastErrorCode=yn.prototype.ya,yn.prototype.getStatus=yn.prototype.ca,yn.prototype.getResponseJson=yn.prototype.La,yn.prototype.getResponseText=yn.prototype.la,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Fa,KN=yn}).apply(typeof Y_<"u"?Y_:typeof self<"u"?self:typeof window<"u"?window:{});const yM="@firebase/firestore",vM="4.9.3";class Xr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xr.UNAUTHENTICATED=new Xr(null),Xr.GOOGLE_CREDENTIALS=new Xr("google-credentials-uid"),Xr.FIRST_PARTY=new Xr("first-party-uid"),Xr.MOCK_USER=new Xr("mock-user");let Hd="12.7.0";const ih=new hI("@firebase/firestore");function Df(){return ih.logLevel}function ze(n,...e){if(ih.logLevel<=Dt.DEBUG){const t=e.map(gI);ih.debug(`Firestore (${Hd}): ${n}`,...t)}}function Ci(n,...e){if(ih.logLevel<=Dt.ERROR){const t=e.map(gI);ih.error(`Firestore (${Hd}): ${n}`,...t)}}function sh(n,...e){if(ih.logLevel<=Dt.WARN){const t=e.map(gI);ih.warn(`Firestore (${Hd}): ${n}`,...t)}}function gI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ot(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,QN(n,r,t)}function QN(n,e,t){let r=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ci(r),new Error(r)}function ht(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||QN(e,i,r)}function At(n,e){return n}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Eo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class JN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Xr.UNAUTHENTICATED)))}shutdown(){}}class qW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class XW{constructor(e){this.t=e,this.currentUser=Xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Zo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zo,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zo)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string",31837,{l:r}),new JN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Xr(e)}}class YW{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Xr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZW{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new YW(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Xr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QW{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);const r=s=>{s.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ze("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xM(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xM(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function JW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class mI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=JW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function It(n,e){return n<e?-1:n>e?1:0}function gT(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return Xw(i)===Xw(s)?It(i,s):Xw(i)?1:-1}return It(n.length,e.length)}const eH=55296,tH=57343;function Xw(n){const e=n.charCodeAt(0);return e>=eH&&e<=tH}function Id(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function eD(n){return n+"\0"}const EM="__name__";class Xa{constructor(e,t,r){t===void 0?t=0:t>e.length&&ot(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ot(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Xa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xa?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Xa.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return It(e.length,t.length)}static compareSegments(e,t){const r=Xa.isNumericId(e),i=Xa.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Xa.extractNumericId(e).compare(Xa.extractNumericId(t)):gT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yc.fromString(e.substring(4,e.length-2))}}class Yt extends Xa{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ze(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Yt(t)}static emptyPath(){return new Yt([])}}const nH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends Xa{construct(e,t,r){return new jn(e,t,r)}static isValidIdentifier(e){return nH.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EM}static keyField(){return new jn([EM])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ze(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ze(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ze(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Ze(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Yt.fromString(e))}static fromName(e){return new Qe(Yt.fromString(e).popFirst(5))}static empty(){return new Qe(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Yt(e.slice()))}}function tD(n,e,t){if(!t)throw new Ze(ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rH(n,e,t,r){if(e===!0&&r===!0)throw new Ze(ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wM(n){if(!Qe.isDocumentKey(n))throw new Ze(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TM(n){if(Qe.isDocumentKey(n))throw new Ze(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nD(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Qv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ot(12329,{type:typeof n})}function Cc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ze(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qv(n);throw new Ze(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lr(n,e){const t={typeString:n};return e&&(t.value=e),t}function lp(n,e){if(!nD(n))throw new Ze(ke.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Ze(ke.INVALID_ARGUMENT,t);return!0}const SM=-62135596800,IM=1e6;class hn{static now(){return hn.fromMillis(Date.now())}static fromDate(e){return hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*IM);return new hn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<SM)throw new Ze(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IM}_compareTo(e){return this.seconds===e.seconds?It(this.nanoseconds,e.nanoseconds):It(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:hn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lp(e,hn._jsonSchema))return new hn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-SM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}hn._jsonSchemaVersion="firestore/timestamp/1.0",hn._jsonSchema={type:lr("string",hn._jsonSchemaVersion),seconds:lr("number"),nanoseconds:lr("number")};class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new hn(0,0))}static max(){return new ft(new hn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const fm=-1;class Ty{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function mT(n){return n.fields.find((e=>e.kind===2))}function wu(n){return n.fields.filter((e=>e.kind!==2))}Ty.UNKNOWN_ID=-1;class R1{constructor(e,t){this.fieldPath=e,this.kind=t}}class dm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dm(0,Cs.min())}}function iH(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(r===1e9?new hn(t+1,0):new hn(t,r));return new Cs(i,Qe.empty(),e)}function rD(n){return new Cs(n.readTime,n.key,fm)}class Cs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cs(ft.min(),Qe.empty(),fm)}static max(){return new Cs(ft.max(),Qe.empty(),fm)}}function pI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Qe.comparator(n.documentKey,e.documentKey),t!==0?t:It(n.largestBatchId,e.largestBatchId))}const iD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ch(n){if(n.code!==ke.FAILED_PRECONDITION||n.message!==iD)throw n;ze("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,r)=>{t(e)}))}static reject(e){return new ue(((t,r)=>{r(e)}))}static waitFor(e){return new ue(((t,r)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(l=>r(l)))})),a=!0,s===i&&t()}))}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next((i=>i?ue.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new ue(((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((f=>{a[u]=f,++o,o===s&&r(a)}),(f=>i(f)))}}))}static doWhile(e,t){return new ue(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const _s="SimpleDb";class Jv{static open(e,t,r,i){try{return new Jv(t,e.transaction(i,r))}catch(s){throw new Ig(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Zo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ig(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=_I(r.target.error);this.S.reject(new Ig(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ze(_s,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aH(t)}}class vc{static delete(e){return ze(_s,"Removing database:",e),Cu(bN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!BN())return!1;if(vc.F())return!0;const e=Tr(),t=vc.M(e),r=0<t&&t<10,i=aD(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,vc.M(Tr())===12.2&&Ci("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ze(_s,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Ig(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new Ze(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new Ze(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Ig(e,a))},i.onupgradeneeded=s=>{ze(_s,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{ze(_s,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Jv.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),ue.reject(u)))).toPromise();return l.catch((()=>{})),await o.D,l}catch(o){const l=o,u=l.name!=="FirebaseError"&&a<3;if(ze(_s,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class sH{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Cu(this.U.delete())}}class Ig extends Ze{constructor(e,t){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uc(n){return n.name==="IndexedDbTransactionError"}class aH{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ze(_s,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze(_s,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cu(r)}add(e){return ze(_s,"ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next((t=>(t===void 0&&(t=null),ze(_s,"GET",this.store.name,e,t),t)))}delete(e){return ze(_s,"DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return ze(_s,"COUNT",this.store.name),Cu(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new ue(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((o,l)=>{a.push(l)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ue(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){ze(_s,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ue(((r,i)=>{t.onerror=s=>{const a=_I(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,t){const r=[];return new ue(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new sH(o),u=t(o.primaryKey,o.value,l);if(u instanceof ue){const f=u.catch((d=>(l.done(),ue.reject(d))));r.push(f)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}})).next((()=>ue.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cu(n){return new ue(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=_I(r.target.error);t(i)}}))}let AM=!1;function _I(n){const e=vc.M(Tr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AM||(AM=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Ag="IndexBackfiller";class oH{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ze(Ag,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ze(Ag,`Documents written: ${t}`)}catch(t){Uc(t)?ze(Ag,"Ignoring IndexedDB error during index backfill: ",t):await Ch(t)}await this.re(6e4)}))}}class lH{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return ue.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return ze(Ag,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>(ze(Ag,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=rD(s);pI(a,r)>0&&(r=a)})),new Cs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zs.ce=-1;const Uu=-1;function ex(n){return n==null}function gm(n){return n===0&&1/n==-1/0}function cH(n){return typeof n=="number"&&Number.isInteger(n)&&!gm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Sy="";function pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RM(e)),e=uH(n.get(t),e);return RM(e)}function uH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Sy:t+="";break;default:t+=s}}return t}function RM(n){return n+Sy+""}function eo(n){const e=n.length;if(ht(e>=2,64408,{path:n}),e===2)return ht(n.charAt(0)===Sy&&n.charAt(1)==="",56145,{path:n}),Yt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(Sy,s);switch((a<0||a>t)&&ot(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:ot(61167,{path:n})}s=a+2}return new Yt(r)}const Tu="remoteDocuments",cp="owner",Ef="owner",mm="mutationQueues",hH="userId",_a="mutations",CM="batchId",Fu="userMutationsIndex",PM=["userId","batchId"];function C1(n,e){return[n,pi(e)]}function oD(n,e,t){return[n,pi(e),t]}const fH={},Ad="documentMutations",Iy="remoteDocumentsV14",dH=["prefixPath","collectionGroup","readTime","documentId"],P1="documentKeyIndex",gH=["prefixPath","collectionGroup","documentId"],lD="collectionGroupIndex",mH=["collectionGroup","readTime","prefixPath","documentId"],pm="remoteDocumentGlobal",pT="remoteDocumentGlobalKey",Rd="targets",cD="queryTargetsIndex",pH=["canonicalId","targetId"],Cd="targetDocuments",_H=["targetId","path"],yI="documentTargetsIndex",yH=["path","targetId"],Ay="targetGlobalKey",zu="targetGlobal",_m="collectionParents",vH=["collectionId","parent"],Pd="clientMetadata",xH="clientId",tx="bundles",EH="bundleId",nx="namedQueries",wH="name",vI="indexConfiguration",TH="indexId",_T="collectionGroupIndex",SH="collectionGroup",Rg="indexState",IH=["indexId","uid"],uD="sequenceNumberIndex",AH=["uid","sequenceNumber"],Cg="indexEntries",RH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hD="documentKeyIndex",CH=["indexId","uid","orderedDocumentKey"],rx="documentOverlays",PH=["userId","collectionPath","documentId"],yT="collectionPathOverlayIndex",MH=["userId","collectionPath","largestBatchId"],fD="collectionGroupOverlayIndex",bH=["userId","collectionGroup","largestBatchId"],xI="globals",kH="name",dD=[mm,_a,Ad,Tu,Rd,cp,zu,Cd,Pd,pm,_m,tx,nx],OH=[...dD,rx],gD=[mm,_a,Ad,Iy,Rd,cp,zu,Cd,Pd,pm,_m,tx,nx,rx],mD=gD,EI=[...mD,vI,Rg,Cg],LH=EI,pD=[...EI,xI],NH=pD;class vT extends sD{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Sr(n,e){const t=At(n);return vc.O(t.le,e)}function MM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _D(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class kn{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Z_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Z_(this.root,e,this.comparator,!1)}getReverseIterator(){return new Z_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Z_(this.root,e,this.comparator,!0)}}class Z_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=s??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Yr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ot(27949);return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bM(this.data.getIterator())}getIteratorFrom(e){return new bM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class bM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wf(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new gn(jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Id(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class yD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yD("Invalid base64 string: "+s):s}})(e);return new ur(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return It(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const DH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function il(n){if(ht(!!n,39018),typeof n=="string"){let e=0;const t=DH.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bn(n.seconds),nanos:bn(n.nanos)}}function bn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function sl(n){return typeof n=="string"?ur.fromBase64String(n):ur.fromUint8Array(n)}const vD="server_timestamp",xD="__type__",ED="__previous_value__",wD="__local_write_time__";function wI(n){return(n?.mapValue?.fields||{})[xD]?.stringValue===vD}function ix(n){const e=n.mapValue.fields[ED];return wI(e)?ix(e):e}function ym(n){const e=il(n.mapValue.fields[wD].timestampValue);return new hn(e.seconds,e.nanos)}class FH{constructor(e,t,r,i,s,a,o,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const Ry="(default)";class ah{constructor(e,t){this.projectId=e,this.database=t||Ry}static empty(){return new ah("","")}get isDefaultDatabase(){return this.database===Ry}isEqual(e){return e instanceof ah&&e.projectId===this.projectId&&e.database===this.database}}const TI="__type__",TD="__max__",cc={mapValue:{fields:{__type__:{stringValue:TD}}}},SI="__vector__",Md="value",M1={nullValue:"NULL_VALUE"};function Pc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wI(n)?4:SD(n)?9007199254740991:sx(n)?10:11:ot(28295,{value:n})}function fo(n,e){if(n===e)return!0;const t=Pc(n);if(t!==Pc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ym(n).isEqual(ym(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=il(i.timestampValue),o=il(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return sl(i.bytesValue).isEqual(sl(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return bn(i.geoPointValue.latitude)===bn(s.geoPointValue.latitude)&&bn(i.geoPointValue.longitude)===bn(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return bn(i.integerValue)===bn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=bn(i.doubleValue),o=bn(s.doubleValue);return a===o?gm(a)===gm(o):isNaN(a)&&isNaN(o)}return!1})(n,e);case 9:return Id(n.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(MM(a)!==MM(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!fo(a[l],o[l])))return!1;return!0})(n,e);default:return ot(52216,{left:n})}}function vm(n,e){return(n.values||[]).find((t=>fo(t,e)))!==void 0}function Mc(n,e){if(n===e)return 0;const t=Pc(n),r=Pc(e);if(t!==r)return It(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return It(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=bn(s.integerValue||s.doubleValue),l=bn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(n,e);case 3:return kM(n.timestampValue,e.timestampValue);case 4:return kM(ym(n),ym(e));case 5:return gT(n.stringValue,e.stringValue);case 6:return(function(s,a){const o=sl(s),l=sl(a);return o.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const f=It(o[u],l[u]);if(f!==0)return f}return It(o.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=It(bn(s.latitude),bn(a.latitude));return o!==0?o:It(bn(s.longitude),bn(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return OM(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const o=s.fields||{},l=a.fields||{},u=o[Md]?.arrayValue,f=l[Md]?.arrayValue,d=It(u?.values?.length||0,f?.values?.length||0);return d!==0?d:OM(u,f)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===cc.mapValue&&a===cc.mapValue)return 0;if(s===cc.mapValue)return 1;if(a===cc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const g=gT(l[d],f[d]);if(g!==0)return g;const p=Mc(o[l[d]],u[f[d]]);if(p!==0)return p}return It(l.length,f.length)})(n.mapValue,e.mapValue);default:throw ot(23264,{he:t})}}function kM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return It(n,e);const t=il(n),r=il(e),i=It(t.seconds,r.seconds);return i!==0?i:It(t.nanos,r.nanos)}function OM(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Mc(t[i],r[i]);if(s)return s}return It(t.length,r.length)}function bd(n){return xT(n)}function xT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=il(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return sl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Qe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=xT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${xT(t.fields[a])}`;return i+"}"})(n.mapValue):ot(61005,{value:n})}function b1(n){switch(Pc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ix(n);return e?16+b1(e):16;case 5:return 2*n.stringValue.length;case 6:return sl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+b1(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return zc(r.fields,((s,a)=>{i+=s.length+b1(a)})),i})(n.mapValue);default:throw ot(13486,{value:n})}}function xm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ET(n){return!!n&&"integerValue"in n}function Em(n){return!!n&&"arrayValue"in n}function LM(n){return!!n&&"nullValue"in n}function NM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function k1(n){return!!n&&"mapValue"in n}function sx(n){return(n?.mapValue?.fields||{})[TI]?.stringValue===SI}function Pg(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zc(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Pg(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pg(n.arrayValue.values[t]);return e}return{...n}}function SD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TD}const ID={mapValue:{fields:{[TI]:{stringValue:SI},[Md]:{arrayValue:{}}}}};function VH(n){return"nullValue"in n?M1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xm(ah.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?sx(n)?ID:{mapValue:{}}:ot(35942,{value:n})}function jH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xm(ah.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?ID:"mapValue"in n?sx(n)?{mapValue:{}}:cc:ot(61959,{value:n})}function DM(n,e){const t=Mc(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function FM(n,e){const t=Mc(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!k1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pg(t)}setAll(e){let t=jn.emptyPath(),r={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=Pg(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());k1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];k1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zc(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new gi(Pg(this.value))}}function AD(n){const e=[];return zc(n.fields,((t,r)=>{const i=new jn([t]);if(k1(r)){const s=AD(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Yi(e)}class Kn{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Kn(e,0,ft.min(),ft.min(),ft.min(),gi.empty(),0)}static newFoundDocument(e,t,r,i){return new Kn(e,1,t,ft.min(),r,i,0)}static newNoDocument(e,t){return new Kn(e,2,t,ft.min(),ft.min(),gi.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,ft.min(),ft.min(),gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kd{constructor(e,t){this.position=e,this.inclusive=t}}function VM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=Qe.comparator(Qe.fromName(a.referenceValue),t.key):r=Mc(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fo(n.position[t],e.position[t]))return!1;return!0}class Cy{constructor(e,t="asc"){this.field=e,this.dir=t}}function BH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class RD{}class Ft extends RD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new GH(e,t,r):t==="array-contains"?new $H(e,r):t==="in"?new OD(e,r):t==="not-in"?new WH(e,r):t==="array-contains-any"?new HH(e,r):new Ft(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new UH(e,r):new zH(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mc(t,this.value)):t!==null&&Pc(this.value)===Pc(t)&&this.matchesComparison(Mc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends RD{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fn(e,t)}matches(e){return Od(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Od(n){return n.op==="and"}function wT(n){return n.op==="or"}function II(n){return CD(n)&&Od(n)}function CD(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function TT(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+bd(n.value);if(II(n))return n.filters.map((e=>TT(e))).join(",");{const e=n.filters.map((t=>TT(t))).join(",");return`${n.op}(${e})`}}function PD(n,e){return n instanceof Ft?(function(r,i){return i instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&fo(r.value,i.value)})(n,e):n instanceof fn?(function(r,i){return i instanceof fn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,o)=>s&&PD(a,i.filters[o])),!0):!1})(n,e):void ot(19439)}function MD(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function bD(n){return n instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${bd(t.value)}`})(n):n instanceof fn?(function(t){return t.op.toString()+" {"+t.getFilters().map(bD).join(" ,")+"}"})(n):"Filter"}class GH extends Ft{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class UH extends Ft{constructor(e,t){super(e,"in",t),this.keys=kD("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zH extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=kD("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kD(n,e){return(e.arrayValue?.values||[]).map((t=>Qe.fromName(t.referenceValue)))}class $H extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Em(t)&&vm(t.arrayValue,this.value)}}class OD extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vm(this.value.arrayValue,t)}}class WH extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(vm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vm(this.value.arrayValue,t)}}class HH extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Em(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>vm(this.value.arrayValue,r)))}}class KH{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function ST(n,e=null,t=[],r=[],i=null,s=null,a=null){return new KH(n,e,t,r,i,s,a)}function oh(n){const e=At(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>TT(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),ex(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>bd(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>bd(r))).join(",")),e.Te=t}return e.Te}function up(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jM(n.startAt,e.startAt)&&jM(n.endAt,e.endAt)}function Py(n){return Qe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function My(n,e){return n.filters.filter((t=>t instanceof Ft&&t.field.isEqual(e)))}function BM(n,e,t){let r=M1,i=!0;for(const s of My(n,e)){let a=M1,o=!0;switch(s.op){case"<":case"<=":a=VH(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=M1}DM({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];DM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function GM(n,e,t){let r=cc,i=!0;for(const s of My(n,e)){let a=cc,o=!0;switch(s.op){case">=":case">":a=jH(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=cc}FM({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];FM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class hp{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qH(n,e,t,r,i,s,a,o){return new hp(n,e,t,r,i,s,a,o)}function AI(n){return new hp(n)}function UM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function LD(n){return n.collectionGroup!==null}function Mg(n){const e=At(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new gn(jn.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Cy(s,r))})),t.has(jn.keyField().canonicalString())||e.Ie.push(new Cy(jn.keyField(),r))}return e.Ie}function Js(n){const e=At(n);return e.Ee||(e.Ee=XH(e,Mg(n))),e.Ee}function XH(n,e){if(n.limitType==="F")return ST(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Cy(i.field,s)}));const t=n.endAt?new kd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kd(n.startAt.position,n.startAt.inclusive):null;return ST(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function IT(n,e){const t=n.filters.concat([e]);return new hp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function AT(n,e,t){return new hp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ax(n,e){return up(Js(n),Js(e))&&n.limitType===e.limitType}function ND(n){return`${oh(Js(n))}|lt:${n.limitType}`}function Ff(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>bD(i))).join(", ")}]`),ex(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>bd(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>bd(i))).join(",")),`Target(${r})`})(Js(n))}; limitType=${n.limitType})`}function fp(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Qe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Mg(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,o,l){const u=VM(a,o,l);return a.inclusive?u<=0:u<0})(r.startAt,Mg(r),i)||r.endAt&&!(function(a,o,l){const u=VM(a,o,l);return a.inclusive?u>=0:u>0})(r.endAt,Mg(r),i))})(n,e)}function YH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DD(n){return(e,t)=>{let r=!1;for(const i of Mg(n)){const s=ZH(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZH(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):(function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?Mc(l,u):ot(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot(19790,{direction:n.dir})}}class fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zc(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return _D(this.inner)}size(){return this.innerSize}}const QH=new kn(Qe.comparator);function Ss(){return QH}const FD=new kn(Qe.comparator);function hg(...n){let e=FD;for(const t of n)e=e.insert(t.key,t);return e}function VD(n){let e=FD;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function to(){return bg()}function jD(){return bg()}function bg(){return new fl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const JH=new kn(Qe.comparator),eK=new gn(Qe.comparator);function Ot(...n){let e=eK;for(const t of n)e=e.add(t);return e}const tK=new gn(It);function nK(){return tK}function RI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gm(e)?"-0":e}}function BD(n){return{integerValue:""+n}}function rK(n,e){return cH(e)?BD(e):RI(n,e)}class ox{constructor(){this._=void 0}}function iK(n,e,t){return n instanceof wm?(function(i,s){const a={fields:{[xD]:{stringValue:vD},[wD]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wI(s)&&(s=ix(s)),s&&(a.fields[ED]=s),{mapValue:a}})(t,e):n instanceof Ld?UD(n,e):n instanceof Nd?zD(n,e):(function(i,s){const a=GD(i,s),o=zM(a)+zM(i.Ae);return ET(a)&&ET(i.Ae)?BD(o):RI(i.serializer,o)})(n,e)}function sK(n,e,t){return n instanceof Ld?UD(n,e):n instanceof Nd?zD(n,e):t}function GD(n,e){return n instanceof Tm?(function(r){return ET(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class wm extends ox{}class Ld extends ox{constructor(e){super(),this.elements=e}}function UD(n,e){const t=$D(e);for(const r of n.elements)t.some((i=>fo(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Nd extends ox{constructor(e){super(),this.elements=e}}function zD(n,e){let t=$D(e);for(const r of n.elements)t=t.filter((i=>!fo(i,r)));return{arrayValue:{values:t}}}class Tm extends ox{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zM(n){return bn(n.integerValue||n.doubleValue)}function $D(n){return Em(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class aK{constructor(e,t){this.field=e,this.transform=t}}function oK(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ld&&i instanceof Ld||r instanceof Nd&&i instanceof Nd?Id(r.elements,i.elements,fo):r instanceof Tm&&i instanceof Tm?fo(r.Ae,i.Ae):r instanceof wm&&i instanceof wm})(n.transform,e.transform)}class lK{constructor(e,t){this.version=e,this.transformResults=t}}class Pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function O1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lx{}function WD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cx(n.key,Pi.none()):new Kd(n.key,n.data,Pi.none());{const t=n.data,r=gi.empty();let i=new gn(jn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new dl(n.key,r,new Yi(i.toArray()),Pi.none())}}function cK(n,e,t){n instanceof Kd?(function(i,s,a){const o=i.value.clone(),l=WM(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(n,e,t):n instanceof dl?(function(i,s,a){if(!O1(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=WM(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(HD(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function kg(n,e,t,r){return n instanceof Kd?(function(s,a,o,l){if(!O1(s.precondition,a))return o;const u=s.value.clone(),f=HM(s.fieldTransforms,l,a);return u.setAll(f),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof dl?(function(s,a,o,l){if(!O1(s.precondition,a))return o;const u=HM(s.fieldTransforms,l,a),f=a.data;return f.setAll(HD(s)),f.setAll(u),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(n,e,t,r):(function(s,a,o){return O1(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(n,e,t)}function uK(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=GD(r.transform,i||null);s!=null&&(t===null&&(t=gi.empty()),t.set(r.field,s))}return t||null}function $M(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Id(r,i,((s,a)=>oK(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Kd extends lx{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dl extends lx{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HD(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function WM(n,e,t){const r=new Map;ht(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,sK(a,o,t[i]))}return r}function HM(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,iK(s,a,e))}return r}class cx extends lx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KD extends lx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CI{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cK(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=kg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=kg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jD();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=WD(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(ft.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ot())}isEqual(e){return this.batchId===e.batchId&&Id(this.mutations,e.mutations,((t,r)=>$M(t,r)))&&Id(this.baseMutations,e.baseMutations,((t,r)=>$M(t,r)))}}class PI{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return JH})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new PI(e,t,r,i)}}class MI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hK{constructor(e,t){this.count=e,this.unchangedNames=t}}var sr,Gt;function fK(n){switch(n){case ke.OK:return ot(64938);case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0;default:return ot(15467,{code:n})}}function qD(n){if(n===void 0)return Ci("GRPC error has no .code"),ke.UNKNOWN;switch(n){case sr.OK:return ke.OK;case sr.CANCELLED:return ke.CANCELLED;case sr.UNKNOWN:return ke.UNKNOWN;case sr.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case sr.INTERNAL:return ke.INTERNAL;case sr.UNAVAILABLE:return ke.UNAVAILABLE;case sr.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case sr.NOT_FOUND:return ke.NOT_FOUND;case sr.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case sr.ABORTED:return ke.ABORTED;case sr.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case sr.DATA_LOSS:return ke.DATA_LOSS;default:return ot(39323,{code:n})}}(Gt=sr||(sr={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";function dK(){return new TextEncoder}const gK=new yc([4294967295,4294967295],0);function KM(n){const e=dK().encode(n),t=new HN;return t.update(e),new Uint8Array(t.digest())}function qM(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yc([t,r],0),new yc([i,s],0)]}class bI{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fg(`Invalid padding: ${t}`);if(r<0)throw new fg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=yc.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(yc.fromNumber(r)));return i.compare(gK)===1&&(i=new yc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=KM(e),[r,i]=qM(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new bI(s,i,t);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=KM(e),[r,i]=qM(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ux{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,dp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ux(ft.min(),i,new kn(It),Ss(),Ot())}}class dp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dp(r,t,Ot(),Ot(),Ot())}}class L1{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class XD{constructor(e,t){this.targetId=e,this.Ce=t}}class YD{constructor(e,t,r=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class XM{constructor(){this.ve=0,this.Fe=YM(),this.Me=ur.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ot(),t=Ot(),r=Ot();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ot(38017,{changeType:s})}})),new dp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=YM()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mK{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ss(),this.Je=Q_(),this.He=Q_(),this.Ye=new kn(It)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ot(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Py(s))if(r===0){const a=new Qe(s.path);this.et(t,a,Kn.newNoDocument(a,ft.min()))}else ht(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=sl(r).toUint8Array()}catch(l){if(l instanceof yD)return sh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new bI(a,i,s)}catch(l){return sh(l instanceof fg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Py(o.target)){const l=new Qe(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Kn.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=Ot();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new ux(e,t,this.Ye,this.je,r);return this.je=Ss(),this.Je=Q_(),this.He=Q_(),this.Ye=new kn(It),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new XM,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gn(It),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gn(It),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ze("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XM),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Q_(){return new kn(Qe.comparator)}function YM(){return new kn(Qe.comparator)}const pK={asc:"ASCENDING",desc:"DESCENDING"},_K={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yK={and:"AND",or:"OR"};class vK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function RT(n,e){return n.useProto3Json||ex(e)?e:{value:e}}function Dd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xK(n,e){return Dd(n,e.toTimestamp())}function ki(n){return ht(!!n,49232),ft.fromTimestamp((function(t){const r=il(t);return new hn(r.seconds,r.nanos)})(n))}function kI(n,e){return CT(n,e).canonicalString()}function CT(n,e){const t=(function(i){return new Yt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function QD(n){const e=Yt.fromString(n);return ht(o5(e),10190,{key:e.toString()}),e}function by(n,e){return kI(n.databaseId,e.path)}function $u(n,e){const t=QD(e);if(t.get(1)!==n.databaseId.projectId)throw new Ze(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ze(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(t5(t))}function JD(n,e){return kI(n.databaseId,e)}function e5(n){const e=QD(n);return e.length===4?Yt.emptyPath():t5(e)}function PT(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function t5(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZM(n,e,t){return{name:by(n,e),fields:t.value.mapValue.fields}}function EK(n,e,t){const r=$u(n,e.name),i=ki(e.updateTime),s=e.createTime?ki(e.createTime):ft.min(),a=new gi({mapValue:{fields:e.fields}}),o=Kn.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function wK(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ot(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,f){return u.useProto3Json?(ht(f===void 0||typeof f=="string",58123),ur.fromBase64String(f||"")):(ht(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ur.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(u){const f=u.code===void 0?ke.UNKNOWN:qD(u.code);return new Ze(f,u.message||"")})(a);t=new YD(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$u(n,r.document.name),s=ki(r.document.updateTime),a=r.document.createTime?ki(r.document.createTime):ft.min(),o=new gi({mapValue:{fields:r.document.fields}}),l=Kn.newFoundDocument(i,s,a,o),u=r.targetIds||[],f=r.removedTargetIds||[];t=new L1(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$u(n,r.document),s=r.readTime?ki(r.readTime):ft.min(),a=Kn.newNoDocument(i,s),o=r.removedTargetIds||[];t=new L1([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$u(n,r.document),s=r.removedTargetIds||[];t=new L1([],s,i,null)}else{if(!("filter"in e))return ot(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new hK(i,s),o=r.targetId;t=new XD(o,a)}}return t}function ky(n,e){let t;if(e instanceof Kd)t={update:ZM(n,e.key,e.value)};else if(e instanceof cx)t={delete:by(n,e.key)};else if(e instanceof dl)t={update:ZM(n,e.key,e.data),updateMask:CK(e.fieldMask)};else{if(!(e instanceof KD))return ot(16599,{Vt:e.type});t={verify:by(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const o=a.transform;if(o instanceof wm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ld)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Nd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Tm)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw ot(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:xK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ot(27497)})(n,e.precondition)),t}function MT(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Pi.updateTime(ki(s.updateTime)):s.exists!==void 0?Pi.exists(s.exists):Pi.none()})(e.currentDocument):Pi.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)ht(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new wm;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];l=new Ld(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];l=new Nd(f)}else"increment"in o?l=new Tm(a,o.increment):ot(16584,{proto:o});const u=jn.fromServerFormat(o.fieldPath);return new aK(u,l)})(n,i))):[];if(e.update){e.update.name;const i=$u(n,e.update.name),s=new gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const u=l.fieldPaths||[];return new Yi(u.map((f=>jn.fromServerFormat(f))))})(e.updateMask);return new dl(i,s,a,t,r)}return new Kd(i,s,t,r)}if(e.delete){const i=$u(n,e.delete);return new cx(i,t)}if(e.verify){const i=$u(n,e.verify);return new KD(i,t)}return ot(1463,{proto:e})}function TK(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?ki(i.updateTime):ki(s);return a.isEqual(ft.min())&&(a=ki(s)),new lK(a,i.transformResults||[])})(t,e)))):[]}function n5(n,e){return{documents:[JD(n,e.path)]}}function r5(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=JD(n,i);const s=(function(u){if(u.length!==0)return a5(fn.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:Vf(g.field),direction:IK(g.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=RT(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function i5(n){let e=e5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ht(r===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=(function(d){const g=s5(d);return g instanceof fn&&II(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(d){return d.map((g=>(function(x){return new Cy(jf(x.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(g)))})(t.orderBy));let o=null;t.limit&&(o=(function(d){let g;return g=typeof d=="object"?d.value:d,ex(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(d){const g=!!d.before,p=d.values||[];return new kd(p,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(d){const g=!d.before,p=d.values||[];return new kd(p,g)})(t.endAt)),qH(e,i,a,s,o,"F",l,u)}function SK(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function s5(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jf(t.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jf(t.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jf(t.unaryFilter.field);return Ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=jf(t.unaryFilter.field);return Ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ft.create(jf(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fn.create(t.compositeFilter.filters.map((r=>s5(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ot(1026)}})(t.compositeFilter.op))})(n):ot(30097,{filter:n})}function IK(n){return pK[n]}function AK(n){return _K[n]}function RK(n){return yK[n]}function Vf(n){return{fieldPath:n.canonicalString()}}function jf(n){return jn.fromServerFormat(n.fieldPath)}function a5(n){return n instanceof Ft?(function(t){if(t.op==="=="){if(NM(t.value))return{unaryFilter:{field:Vf(t.field),op:"IS_NAN"}};if(LM(t.value))return{unaryFilter:{field:Vf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NM(t.value))return{unaryFilter:{field:Vf(t.field),op:"IS_NOT_NAN"}};if(LM(t.value))return{unaryFilter:{field:Vf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vf(t.field),op:AK(t.op),value:t.value}}})(n):n instanceof fn?(function(t){const r=t.getFilters().map((i=>a5(i)));return r.length===1?r[0]:{compositeFilter:{op:RK(t.op),filters:r}}})(n):ot(54877,{filter:n})}function CK(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function o5(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class zo{constructor(e,t,r,i,s=ft.min(),a=ft.min(),o=ur.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class l5{constructor(e){this.yt=e}}function PK(n,e){let t;if(e.document)t=EK(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=ch(e.noDocument.readTime);t=Kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot(56709);{const r=Qe.fromSegments(e.unknownDocument.path),i=ch(e.unknownDocument.version);t=Kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new hn(i[0],i[1]);return ft.fromTimestamp(s)})(e.readTime)),t}function QM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Oy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:by(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Dd(s,a.version.toTimestamp()),createTime:Dd(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lh(e.version)};else{if(!e.isUnknownDocument())return ot(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:lh(e.version)}}return r}function Oy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ch(n){const e=new hn(n.seconds,n.nanoseconds);return ft.fromTimestamp(e)}function Pu(n,e){const t=(e.baseMutations||[]).map((s=>MT(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>MT(n.yt,s))),i=hn.fromMillis(e.localWriteTimeMs);return new CI(e.batchId,i,t,r)}function dg(n){const e=ch(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ch(n.lastLimboFreeSnapshotVersion):ft.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return ht(a===1,1966,{count:a}),Js(AI(e5(s.documents[0])))})(n.query):(function(s){return Js(i5(s))})(n.query),new zo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ur.fromBase64String(n.resumeToken))}function c5(n,e){const t=lh(e.snapshotVersion),r=lh(e.lastLimboFreeSnapshotVersion);let i;i=Py(e.target)?n5(n.yt,e.target):r5(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oh(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function u5(n){const e=i5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?AT(e,e.limit,"L"):e}function Yw(n,e){return new MI(e.largestBatchId,MT(n.yt,e.overlayMutation))}function JM(n,e){const t=e.path.lastSegment();return[n,pi(e.path.popLast()),t]}function eb(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:lh(r.readTime),documentKey:pi(r.documentKey.path),largestBatchId:r.largestBatchId}}class MK{getBundleMetadata(e,t){return tb(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:ch(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return tb(e).put((function(i){return{bundleId:i.id,createTime:lh(ki(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return nb(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:u5(s.bundledQuery),readTime:ch(s.readTime)}})(r)}))}saveNamedQuery(e,t){return nb(e).put((function(i){return{name:i.name,readTime:lh(ki(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function tb(n){return Sr(n,tx)}function nb(n){return Sr(n,nx)}class hx{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new hx(e,r)}getOverlay(e,t){return X0(e).get(JM(this.userId,t)).next((r=>r?Yw(this.serializer,r):null))}getOverlays(e,t){const r=to();return ue.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const o=new MI(t,a);i.push(this.St(e,o))})),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(pi(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(X0(e).Z(yT,o))})),ue.waitFor(s)}getOverlaysForCollection(e,t,r){const i=to(),s=pi(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return X0(e).J(yT,a).next((o=>{for(const l of o){const u=Yw(this.serializer,l);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=to();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return X0(e).ee({index:fD,range:o},((l,u,f)=>{const d=Yw(this.serializer,u);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):f.done()})).next((()=>s))}St(e,t){return X0(e).put((function(i,s,a){const[o,l,u]=JM(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ky(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function X0(n){return Sr(n,rx)}class bK{bt(e){return Sr(e,xI)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?ur.fromUint8Array(r):ur.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Mu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bn(e.integerValue));else if("doubleValue"in e){const r=bn(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),gm(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=il(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(sl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?SD(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):sx(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ot(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=Md,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(bn(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Qe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Mu.Kt=new Mu;const Tf=255;function kK(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function rb(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=kK(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class OK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=rb(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=rb(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Tf),this.sn(255)}_n(){this.an(Tf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Tf?(this.sn(Tf),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Tf?(this.an(Tf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class LK{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class NK{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Y0{constructor(){this.cn=new OK,this.ln=new LK(this.cn),this.hn=new NK(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class bu{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new bu(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:N1(this.En),directionalValue:N1(this.dn),orderedDocumentKey:N1(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function zl(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=ib(n.En,e.En),t!==0?t:(t=ib(n.dn,e.dn),t!==0?t:Qe.comparator(n.In,e.In)))}function ib(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function N1(n){return jN()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function sb(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class ab{constructor(e){this.mn=new gn(((t,r)=>jn.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ht(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=mT(e);if(t!==void 0&&!this.wn(t))return!1;const r=wu(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new gn(jn.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new R1(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new R1(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new R1(r.field,r.dir==="asc"?0:1)));return new Ty(Ty.UNKNOWN_ID,this.collectionId,t,dm.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function h5(n){if(ht(n instanceof Ft||n instanceof fn,20012),n instanceof Ft){if(n instanceof OD){const t=n.value.arrayValue?.values?.map((r=>Ft.create(n.field,"==",r)))||[];return fn.create(t,"or")}return n}const e=n.filters.map((t=>h5(t)));return fn.create(e,n.op)}function DK(n){if(n.getFilters().length===0)return[];const e=OT(h5(n));return ht(f5(e),7391),bT(e)||kT(e)?[e]:e.getFilters()}function bT(n){return n instanceof Ft}function kT(n){return n instanceof fn&&II(n)}function f5(n){return bT(n)||kT(n)||(function(t){if(t instanceof fn&&wT(t)){for(const r of t.getFilters())if(!bT(r)&&!kT(r))return!1;return!0}return!1})(n)}function OT(n){if(ht(n instanceof Ft||n instanceof fn,34018),n instanceof Ft)return n;if(n.filters.length===1)return OT(n.filters[0]);const e=n.filters.map((r=>OT(r)));let t=fn.create(e,n.op);return t=Ly(t),f5(t)?t:(ht(t instanceof fn,64498),ht(Od(t),40251),ht(t.filters.length>1,57927),t.filters.reduce(((r,i)=>OI(r,i))))}function OI(n,e){let t;return ht(n instanceof Ft||n instanceof fn,38388),ht(e instanceof Ft||e instanceof fn,25473),t=n instanceof Ft?e instanceof Ft?(function(i,s){return fn.create([i,s],"and")})(n,e):ob(n,e):e instanceof Ft?ob(e,n):(function(i,s){if(ht(i.filters.length>0&&s.filters.length>0,48005),Od(i)&&Od(s))return MD(i,s.getFilters());const a=wT(i)?i:s,o=wT(i)?s:i,l=a.filters.map((u=>OI(u,o)));return fn.create(l,"or")})(n,e),Ly(t)}function ob(n,e){if(Od(e))return MD(e,n.getFilters());{const t=e.filters.map((r=>OI(n,r)));return fn.create(t,"or")}}function Ly(n){if(ht(n instanceof Ft||n instanceof fn,11850),n instanceof Ft)return n;const e=n.getFilters();if(e.length===1)return Ly(e[0]);if(CD(n))return n;const t=e.map((i=>Ly(i))),r=[];return t.forEach((i=>{i instanceof Ft?r.push(i):i instanceof fn&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:fn.create(r,n.op)}class FK{constructor(){this.Cn=new LI}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Cs.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class LI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new gn(Yt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gn(Yt.comparator)).toArray()}}const lb="IndexedDbIndexManager",J_=new Uint8Array(0);class VK{constructor(e,t){this.databaseId=t,this.vn=new LI,this.Fn=new fl((r=>oh(r)),((r,i)=>up(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:pi(i)};return cb(e).put(s)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[eD(t),""],!1,!0);return cb(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(eo(a.parent))}return r}))}addFieldIndex(e,t){const r=Z0(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=If(e);return s.next((o=>{a.put(eb(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Z0(e),i=If(e),s=Sf(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Z0(e),r=Sf(e),i=If(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return ue.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new ab(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Sf(e);let i=!0;const s=new Map;return ue.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=Ot();const o=[];return ue.forEach(s,((l,u)=>{ze(lb,`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map((O=>`${O.fieldPath}:${O.kind}`)).join(",")}`})(l)} to execute ${oh(t)}`);const f=(function(C,O){const N=mT(O);if(N===void 0)return null;for(const z of My(C,N.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(u,l),d=(function(C,O){const N=new Map;for(const z of wu(O))for(const M of My(C,z.fieldPath))switch(M.op){case"==":case"in":N.set(z.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return N.set(z.fieldPath.canonicalString(),M.value),Array.from(N.values())}return null})(u,l),g=(function(C,O){const N=[];let z=!0;for(const M of wu(O)){const P=M.kind===0?BM(C,M.fieldPath,C.startAt):GM(C,M.fieldPath,C.startAt);N.push(P.value),z&&(z=P.inclusive)}return new kd(N,z)})(u,l),p=(function(C,O){const N=[];let z=!0;for(const M of wu(O)){const P=M.kind===0?GM(C,M.fieldPath,C.endAt):BM(C,M.fieldPath,C.endAt);N.push(P.value),z&&(z=P.inclusive)}return new kd(N,z)})(u,l),x=this.On(l,u,g),v=this.On(l,u,p),E=this.Nn(l,u,d),R=this.Bn(l.indexId,f,x,g.inclusive,v,p.inclusive,E);return ue.forEach(R,(S=>r.Y(S,t.limit).next((C=>{C.forEach((O=>{const N=Qe.fromSegments(O.documentKey);a.has(N)||(a=a.add(N),o.push(N))}))}))))})).next((()=>o))}return ue.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=DK(fn.create(e.filters,"and")).map((r=>ST(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),f=[];for(let d=0;d<l;++d){const g=t?this.Ln(t[d/u]):J_,p=this.kn(e,g,r[d%u],i),x=this.qn(e,g,s[d%u],a),v=o.map((E=>this.kn(e,g,E,!0)));f.push(...this.createRange(p,x,v))}return f}kn(e,t,r,i){const s=new bu(e,Qe.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new bu(e,Qe.empty(),t,r);return i?s.An():s}xn(e,t){const r=new ab(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return ue.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(l){let u=new gn(jn.comparator),f=!1;for(const d of l.filters)for(const g of d.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(f?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Y0;for(const i of wu(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);Mu.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Y0;return Mu.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Y0;return Mu.Kt.Dt(xm(this.databaseId,t),r.Pn((function(s){const a=wu(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Y0);let s=0;for(const a of wu(e)){const o=r[s++];for(const l of i)if(this.Un(t,a.fieldPath)&&Em(o))i=this.Kn(i,a,o);else{const u=l.Pn(a.kind);Mu.Kt.Dt(o,u)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Y0;l.seed(o.un()),Mu.Kt.Dt(a,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof Ft&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Z0(e),i=If(e);return(t?r.J(_T,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return ue.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(f,d){const g=d?new dm(d.sequenceNumber,new Cs(ch(d.readTime),new Qe(eo(d.documentKey)),d.largestBatchId)):dm.empty(),p=f.fields.map((([x,v])=>new R1(jn.fromServerFormat(x),v)));return new Ty(f.indexId,f.collectionGroup,p,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:It(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Z0(e),s=If(e);return this.Gn(e).next((a=>i.J(_T,IDBKeyRange.bound(t,t)).next((o=>ue.forEach(o,(l=>s.put(eb(l.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?ue.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),ue.forEach(o,(l=>this.zn(e,i,l).next((u=>{const f=this.jn(s,l);return u.isEqual(f)?ue.resolve():this.Jn(e,s,l,u,f)})))))))}))}Hn(e,t,r,i){return Sf(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Sf(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Sf(e);let s=new gn(zl);return i.ee({index:hD,range:IDBKeyRange.only([r.indexId,this.uid,N1(this.$n(r,t))])},((a,o)=>{s=s.add(new bu(r.indexId,t,sb(o.arrayValue),sb(o.directionalValue)))})).next((()=>s))}jn(e,t){let r=new gn(zl);const i=this.Qn(t,e);if(i==null)return r;const s=mT(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Em(a))for(const o of a.arrayValue.values||[])r=r.add(new bu(t.indexId,e.key,this.Ln(o),i))}else r=r.add(new bu(t.indexId,e.key,J_,i));return r}Jn(e,t,r,i,s){ze(lb,"Updating index entries for document '%s'",t.key);const a=[];return(function(l,u,f,d,g){const p=l.getIterator(),x=u.getIterator();let v=wf(p),E=wf(x);for(;v||E;){let R=!1,S=!1;if(v&&E){const C=f(v,E);C<0?S=!0:C>0&&(R=!0)}else v!=null?S=!0:R=!0;R?(d(E),E=wf(x)):S?(g(v),v=wf(p)):(v=wf(p),E=wf(x))}})(i,s,zl,(o=>{a.push(this.Hn(e,t,r,o))}),(o=>{a.push(this.Yn(e,t,r,o))})),ue.waitFor(a)}Gn(e){let t=1;return If(e).ee({index:uD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,o)=>zl(a,o))).filter(((a,o,l)=>!o||zl(a,l[o-1])!==0));const i=[];i.push(e);for(const a of r){const o=zl(a,e),l=zl(a,t);if(o===0)i[0]=e.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,J_,Qe.empty()),l=i[a+1].Vn(this.uid,J_,Qe.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,t){return zl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ub)}getMinOffset(e,t){return ue.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||ot(44426))))).next(ub)}}function cb(n){return Sr(n,_m)}function Sf(n){return Sr(n,Cg)}function Z0(n){return Sr(n,vI)}function If(n){return Sr(n,Rg)}function ub(n){ht(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;pI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Cs(e.readTime,e.documentKey,t)}const hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},d5=41943040;class fi{static withCacheSize(e){return new fi(e,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function g5(n,e,t){const r=n.store(_a),i=n.store(Ad),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.ee({range:a},((f,d,g)=>(o++,g.delete())));s.push(l.next((()=>{ht(o===1,47070,{batchId:t.batchId})})));const u=[];for(const f of t.mutations){const d=oD(e,f.key.path,t.batchId);s.push(i.delete(d)),u.push(f.key)}return ue.waitFor(s).next((()=>u))}function Ny(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot(14731);e=n.noDocument}return JSON.stringify(e).length}fi.DEFAULT_COLLECTION_PERCENTILE=10,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fi.DEFAULT=new fi(d5,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fi.DISABLED=new fi(-1,0,0);class fx{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){ht(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new fx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).ee({index:Fu,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=Bf(e),a=$l(e);return a.add({}).next((o=>{ht(typeof o=="number",49019);const l=new CI(o,t,r,i),u=(function(p,x,v){const E=v.baseMutations.map((S=>ky(p.yt,S))),R=v.mutations.map((S=>ky(p.yt,S)));return{userId:x,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:E,mutations:R}})(this.serializer,this.userId,l),f=[];let d=new gn(((g,p)=>It(g.canonicalString(),p.canonicalString())));for(const g of i){const p=oD(this.userId,g.key.path,o);d=d.add(g.key.path.popLast()),f.push(a.put(u)),f.push(s.put(p,fH))}return d.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=l.keys()})),ue.waitFor(f).next((()=>l))}))}lookupMutationBatch(e,t){return $l(e).get(t).next((r=>r?(ht(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Pu(this.serializer,r)):null))}er(e,t){return this.Xn[t]?ue.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return $l(e).ee({index:Fu,range:i},((a,o,l)=>{o.userId===this.userId&&(ht(o.batchId>=r,47524,{tr:r}),s=Pu(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Uu;return $l(e).ee({index:Fu,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Uu],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).J(Fu,t).next((r=>r.map((i=>Pu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=C1(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Bf(e).ee({range:i},((a,o,l)=>{const[u,f,d]=a,g=eo(f);if(u===this.userId&&t.path.isEqual(g))return $l(e).get(d).next((p=>{if(!p)throw ot(61480,{nr:a,batchId:d});ht(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(Pu(this.serializer,p))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(It);const i=[];return t.forEach((s=>{const a=C1(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Bf(e).ee({range:o},((u,f,d)=>{const[g,p,x]=u,v=eo(p);g===this.userId&&s.path.isEqual(v)?r=r.add(x):d.done()}));i.push(l)})),ue.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=C1(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new gn(It);return Bf(e).ee({range:a},((l,u,f)=>{const[d,g,p]=l,x=eo(g);d===this.userId&&r.isPrefixOf(x)?x.length===i&&(o=o.add(p)):f.done()})).next((()=>this.rr(e,o)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push($l(e).get(s).next((a=>{if(a===null)throw ot(35274,{batchId:s});ht(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(Pu(this.serializer,a))})))})),ue.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return g5(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),ue.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return Bf(e).ee({range:r},((s,a,o)=>{if(s[0]===this.userId){const l=eo(s[1]);i.push(l)}else o.done()})).next((()=>{ht(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return m5(e,this.userId,t)}_r(e){return p5(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Uu,lastStreamToken:""}))}}function m5(n,e,t){const r=C1(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Bf(n).ee({range:s,X:!0},((o,l,u)=>{const[f,d,g]=o;f===e&&d===i&&(a=!0),u.done()})).next((()=>a))}function $l(n){return Sr(n,_a)}function Bf(n){return Sr(n,Ad)}function p5(n){return Sr(n,mm)}class uh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new uh(0)}static cr(){return new uh(-1)}}class jK{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new uh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ft.fromTimestamp(new hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Af(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ht(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Af(e).ee(((a,o)=>{const l=dg(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>ue.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Af(e).ee(((r,i)=>{const s=dg(i);t(s)}))}lr(e){return fb(e).get(Ay).next((t=>(ht(t!==null,2888),t)))}hr(e,t){return fb(e).put(Ay,t)}Pr(e,t){return Af(e).put(c5(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=oh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Af(e).ee({range:i,index:cD},((a,o,l)=>{const u=dg(o);up(t,u.target)&&(s=u,l.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Ql(e);return t.forEach((a=>{const o=pi(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))})),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ql(e);return ue.forEach(t,(s=>{const a=pi(s.path);return ue.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Ql(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ql(e);let s=Ot();return i.ee({range:r,X:!0},((a,o,l)=>{const u=eo(a[1]),f=new Qe(u);s=s.add(f)})).next((()=>s))}containsKey(e,t){const r=pi(t.path),i=IDBKeyRange.bound([r],[eD(r)],!1,!0);let s=0;return Ql(e).ee({index:yI,X:!0,range:i},(([a,o],l,u)=>{a!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return Af(e).get(t).next((r=>r?dg(r):null))}}function Af(n){return Sr(n,Rd)}function fb(n){return Sr(n,zu)}function Ql(n){return Sr(n,Cd)}const db="LruGarbageCollector",BK=1048576;function gb([n,e],[t,r]){const i=It(n,t);return i===0?It(e,r):i}class GK{constructor(e){this.Ir=e,this.buffer=new gn(gb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ze(db,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Uc(t)?ze(db,"Ignoring IndexedDB error during garbage collection: ",t):await Ch(t)}await this.Vr(3e5)}))}}class UK{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Zs.ce);const r=new GK(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(hb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,o,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i)))).next((d=>(r=d,o=Date.now(),this.removeTargets(e,r,t)))).next((d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),Df()<=Dt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function y5(n,e){return new UK(n,e)}class zK{constructor(e,t){this.db=e,this.garbageCollector=y5(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return e1(e,r)}removeReference(e,t,r){return e1(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return e1(e,t)}br(e,t){return(function(i,s){let a=!1;return p5(i).te((o=>m5(i,o,s).next((l=>(l&&(a=!0),ue.resolve(!l)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const l=this.br(e,a).next((u=>{if(!u)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,ft.min()),Ql(e).delete((function(d){return[0,pi(d.path)]})(a)))))}));i.push(l)}})).next((()=>ue.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return e1(e,t)}Sr(e,t){const r=Ql(e);let i,s=Zs.ce;return r.ee({index:yI},(([a,o],{path:l,sequenceNumber:u})=>{a===0?(s!==Zs.ce&&t(new Qe(eo(i)),s),s=u,i=l):s=Zs.ce})).next((()=>{s!==Zs.ce&&t(new Qe(eo(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function e1(n,e){return Ql(n).put((function(r,i){return{targetId:0,path:pi(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class v5{constructor(){this.changes=new fl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $K{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pu(e).put(r)}removeEntry(e,t,r){return pu(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Oy(a),o[o.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Kn.newInvalidDocument(t);return pu(e).ee({index:P1,range:IDBKeyRange.only(Q0(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Kn.newInvalidDocument(t)};return pu(e).ee({index:P1,range:IDBKeyRange.only(Q0(t))},((i,s)=>{r={document:this.Cr(t,s),size:Ny(s)}})).next((()=>r))}getEntries(e,t){let r=Ss();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=Ss(),i=new kn(Qe.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,Ny(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return ue.resolve();let i=new gn(_b);t.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(Q0(i.first()),Q0(i.last())),a=i.getIterator();let o=a.getNext();return pu(e).ee({index:P1,range:s},((l,u,f)=>{const d=Qe.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&_b(o,d)<0;)r(o,null),o=a.getNext();o&&o.isEqual(d)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?f.j(Q0(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Oy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pu(e).J(IDBKeyRange.bound(o,l,!0)).next((u=>{s?.incrementDocumentReadCount(u.length);let f=Ss();for(const d of u){const g=this.Cr(Qe.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);g.isFoundDocument()&&(fp(t,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,t,r,i){let s=Ss();const a=pb(t,r),o=pb(t,Cs.max());return pu(e).ee({index:lD,range:IDBKeyRange.bound(a,o,!0)},((l,u,f)=>{const d=this.Cr(Qe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&f.done()})).next((()=>s))}newChangeBuffer(e){return new WK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return mb(e).get(pT).next((t=>(ht(!!t,20021),t)))}Dr(e,t){return mb(e).put(pT,t)}Cr(e,t){if(t){const r=PK(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ft.min())))return r}return Kn.newInvalidDocument(e)}}function x5(n){return new $K(n)}class WK extends v5{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new fl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new gn(((s,a)=>It(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=QM(this.Nr.serializer,a);i=i.add(s.path.popLast());const u=Ny(l);r+=u-o.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=QM(this.Nr.serializer,a.convertToNoDocument(ft.min()));t.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function mb(n){return Sr(n,pm)}function pu(n){return Sr(n,Iy)}function Q0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pb(n,e){const t=e.documentKey.path.toArray();return[n,Oy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _b(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=It(t[s],r[s]),i)return i;return i=It(t.length,r.length),i||(i=It(t[t.length-2],r[r.length-2]),i||It(t[t.length-1],r[r.length-1]))}class HK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class E5{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&kg(r.mutation,i,Yi.empty(),hn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ot()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ot()){const i=to();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=hg();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=to();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ot())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,r,i){let s=Ss();const a=bg(),o=(function(){return bg()})();return t.forEach(((l,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof dl)?s=s.insert(u.key,u):f!==void 0?(a.set(u.key,f.mutation.getFieldMask()),kg(f.mutation,u,f.mutation.getFieldMask(),hn.now())):a.set(u.key,Yi.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,f)=>a.set(u,f))),t.forEach(((u,f)=>o.set(u,new HK(f,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=bg();let i=new kn(((a,o)=>a-o)),s=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let f=r.get(l)||Yi.empty();f=o.applyToLocalView(u,f),r.set(l,f);const d=(i.get(o.batchId)||Ot()).add(l);i=i.insert(o.batchId,d)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,f=l.value,d=jD();f.forEach((g=>{if(!s.has(g)){const p=WD(t.get(g),r.get(g));p!==null&&d.set(g,p),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ue.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return Qe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ue.resolve(to());let o=fm,l=s;return a.next((u=>ue.forEach(u,((f,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(f)?ue.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,Ot()))).next((f=>({batchId:o,changes:VD(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next((r=>{let i=hg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=hg();return this.indexManager.getCollectionParents(e,s).next((o=>ue.forEach(o,(l=>{const u=(function(d,g){return new hp(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((d,g)=>{a=a.insert(d,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((l,u)=>{const f=u.getKey();a.get(f)===null&&(a=a.insert(f,Kn.newInvalidDocument(f)))}));let o=hg();return a.forEach(((l,u)=>{const f=s.get(l);f!==void 0&&kg(f.mutation,u,Yi.empty(),hn.now()),fp(t,u)&&(o=o.insert(l,u))})),o}))}}class KK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ki(i.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:u5(i.bundledQuery),readTime:ki(i.readTime)}})(t)),ue.resolve()}}class qK{constructor(){this.overlays=new kn(Qe.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=to();return ue.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=to(),s=t.length+1,a=new Qe(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new kn(((u,f)=>u-f));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);f===null&&(f=to(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=to(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return ue.resolve(o)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new MI(t,r));let s=this.qr.get(t);s===void 0&&(s=Ot(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class XK{constructor(){this.sessionToken=ur.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}class NI{constructor(){this.Qr=new gn(kr.$r),this.Ur=new gn(kr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new kr(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new kr(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Qe(new Yt([])),r=new kr(t,e),i=new kr(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Qe(new Yt([])),r=new kr(t,e),i=new kr(t,e+1);let s=Ot();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new kr(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class kr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Qe.comparator(e.key,t.key)||It(e.Yr,t.Yr)}static Kr(e,t){return It(e.Yr,t.Yr)||Qe.comparator(e.key,t.key)}}class YK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gn(kr.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new CI(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new kr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ue.resolve(a)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Uu:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kr(t,0),i=new kr(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(It);return t.forEach((i=>{const s=new kr(i,0),a=new kr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{r=r.add(o.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Qe.isDocumentKey(s)||(s=s.child(""));const a=new kr(new Qe(s),0);let o=new gn(It);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)}),a),ue.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ht(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(t.mutations,(i=>{const s=new kr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new kr(t,0),i=this.Zr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZK{constructor(e){this.ri=e,this.docs=(function(){return new kn(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=Ss();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Kn.newInvalidDocument(i))})),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ss();const a=t.path,o=new Qe(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||pI(rD(f),r)<=0||(i.has(f.key)||fp(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return ue.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ot(9500)}ii(e,t){return ue.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new QK(this)}getSize(e){return ue.resolve(this.size)}}class QK extends v5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class JK{constructor(e){this.persistence=e,this.si=new fl((t=>oh(t)),up),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.oi=0,this._i=new NI,this.targetCount=0,this.ai=uh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new uh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),ue.waitFor(s).next((()=>i))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),ue.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}class DI{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zs(0),this.li=!1,this.li=!0,this.hi=new XK,this.referenceDelegate=e(this),this.Pi=new JK(this),this.indexManager=new FK,this.remoteDocumentCache=(function(i){return new ZK(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new l5(t),this.Ii=new KK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new YK(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new eq(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class eq extends sD{constructor(e){super(),this.currentSequenceNumber=e}}class dx{constructor(e){this.persistence=e,this.Ri=new NI,this.Vi=null}static mi(e){return new dx(e)}get fi(){if(this.Vi)return this.Vi;throw ot(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const i=Qe.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,ft.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dy{constructor(e,t){this.persistence=e,this.pi=new fl((r=>pi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=y5(this,t)}static mi(e,t){return new Dy(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?ue.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(r++,s.removeEntry(a,ft.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=b1(e.data.value)),t}br(e,t,r){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ue.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class tq{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Jv("createOrUpgrade",t);r<1&&i>=1&&((function(l){l.createObjectStore(cp)})(e),(function(l){l.createObjectStore(mm,{keyPath:hH}),l.createObjectStore(_a,{keyPath:CM,autoIncrement:!0}).createIndex(Fu,PM,{unique:!0}),l.createObjectStore(Ad)})(e),yb(e),(function(l){l.createObjectStore(Tu)})(e));let a=ue.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(Cd),l.deleteObjectStore(Rd),l.deleteObjectStore(zu)})(e),yb(e)),a=a.next((()=>(function(l){const u=l.store(zu),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return u.put(Ay,f)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(l,u){return u.store(_a).J().next((d=>{l.deleteObjectStore(_a),l.createObjectStore(_a,{keyPath:CM,autoIncrement:!0}).createIndex(Fu,PM,{unique:!0});const g=u.store(_a),p=d.map((x=>g.put(x)));return ue.waitFor(p)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore(Pd,{keyPath:xH})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore(pm)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore(tx,{keyPath:EH})})(e),(function(l){l.createObjectStore(nx,{keyPath:wH})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(l){const u=l.createObjectStore(rx,{keyPath:PH});u.createIndex(yT,MH,{unique:!1}),u.createIndex(fD,bH,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(l){const u=l.createObjectStore(Iy,{keyPath:dH});u.createIndex(P1,gH),u.createIndex(lD,mH)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Tu)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore(vI,{keyPath:TH,autoIncrement:!0}).createIndex(_T,SH,{unique:!1}),l.createObjectStore(Rg,{keyPath:IH}).createIndex(uD,AH,{unique:!1}),l.createObjectStore(Cg,{keyPath:RH}).createIndex(hD,CH,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(Rg).clear()})).next((()=>{t.objectStore(Cg).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore(xI,{keyPath:kH})})(e)}))),r<18&&i>=18&&jN()&&(a=a.next((()=>{t.objectStore(Rg).clear()})).next((()=>{t.objectStore(Cg).clear()}))),a}wi(e){let t=0;return e.store(Tu).ee(((r,i)=>{t+=Ny(i)})).next((()=>{const r={byteSize:t};return e.store(pm).put(pT,r)}))}yi(e){const t=e.store(mm),r=e.store(_a);return t.J().next((i=>ue.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,Uu],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Fu,a).next((o=>ue.forEach(o,(l=>{ht(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=Pu(this.serializer,l);return g5(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(Cd),r=e.store(Tu);return e.store(zu).get(Ay).next((i=>{const s=[];return r.ee(((a,o)=>{const l=new Yt(a),u=(function(d){return[0,pi(d)]})(l);s.push(t.get(u).next((f=>f?ue.resolve():(d=>t.put({targetId:0,path:pi(d),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>ue.waitFor(s)))}))}bi(e,t){e.createObjectStore(_m,{keyPath:vH});const r=t.store(_m),i=new LI,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:pi(l)})}};return t.store(Tu).ee({X:!0},((a,o)=>{const l=new Yt(a);return s(l.popLast())})).next((()=>t.store(Ad).ee({X:!0},(([a,o,l],u)=>{const f=eo(o);return s(f.popLast())}))))}Di(e){const t=e.store(Rd);return t.ee(((r,i)=>{const s=dg(i),a=c5(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(Tu),i=[];return r.ee(((s,a)=>{const o=t.store(Iy),l=(function(d){return d.document?new Qe(Yt.fromString(d.document.name).popFirst(5)):d.noDocument?Qe.fromSegments(d.noDocument.path):d.unknownDocument?Qe.fromSegments(d.unknownDocument.path):ot(36783)})(a).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))})).next((()=>ue.waitFor(i)))}Fi(e,t){const r=t.store(_a),i=x5(this.serializer),s=new DI(dx.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((l=>{let u=o.get(l.userId)??Ot();Pu(this.serializer,l).keys().forEach((f=>u=u.add(f))),o.set(l.userId,u)})),ue.forEach(o,((l,u)=>{const f=new Xr(u),d=hx.wt(this.serializer,f),g=s.getIndexManager(f),p=fx.wt(f,this.serializer,g,s.referenceDelegate);return new E5(i,p,d,g).recalculateAndSaveOverlaysForDocumentKeys(new vT(t,Zs.ce),l).next()}))}))}}function yb(n){n.createObjectStore(Cd,{keyPath:_H}).createIndex(yI,yH,{unique:!0}),n.createObjectStore(Rd,{keyPath:"targetId"}).createIndex(cD,pH,{unique:!0}),n.createObjectStore(zu)}const Wl="IndexedDbPersistence",Zw=18e5,Qw=5e3,Jw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nq="main";class FI{constructor(e,t,r,i,s,a,o,l,u,f,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=u,this.Oi=f,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!FI.v())throw new Ze(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zK(this,i),this.$i=t+nq,this.serializer=new l5(l),this.Ui=new vc(this.$i,this.Ni,new tq(this.serializer)),this.hi=new bK,this.Pi=new jK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=x5(this.serializer),this.Ii=new MK,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Ci(Wl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ze(ke.FAILED_PRECONDITION,Jw);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Zs(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>t1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Uc(e))return ze(Wl,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze(Wl,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return J0(e).get(Ef).next((t=>ue.resolve(this.es(t))))}ts(e){return t1(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Zw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Sr(t,Pd);return r.J().next((i=>{const s=this.ss(i,Zw),a=i.filter((o=>s.indexOf(o)===-1));return ue.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ue.resolve(!0):J0(e).get(Ef).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Qw)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Ze(ke.FAILED_PRECONDITION,Jw);return!1}}return!(!this.networkEnabled||!this.inForeground)||t1(e).J().next((r=>this.ss(r,Qw).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ze(Wl,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[cp,Pd],(e=>{const t=new vT(e,Zs.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>t1(e).J().next((t=>this.ss(t,Zw).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return fx.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new VK(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return hx.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ze(Wl,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?NH:l===17?pD:l===16?LH:l===15?EI:l===14?mD:l===13?gD:l===12?OH:l===11?dD:void ot(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new vT(o,this.ci?this.ci.next():Zs.ce),t==="readwrite-primary"?this.Hi(a).next((l=>!!l||this.Yi(a))).next((l=>{if(!l)throw Ci(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Ze(ke.FAILED_PRECONDITION,iD);return r(a)})).next((l=>this.Xi(a).next((()=>l)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return J0(e).get(Ef).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Qw)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ze(ke.FAILED_PRECONDITION,Jw)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return J0(e).put(Ef,t)}static v(){return vc.v()}Zi(e){const t=J0(e);return t.get(Ef).next((r=>this.es(r)?(ze(Wl,"Releasing primary lease."),t.delete(Ef)):ue.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ci(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;VN()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ze(Wl,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ci(Wl,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ci("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function J0(n){return Sr(n,cp)}function t1(n){return Sr(n,Pd)}function rq(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class VI{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ot(),i=Ot();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new VI(e,t.fromCache,r,i)}}class iq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class w5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VN()?8:aD(Tr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new iq;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Df()<=Dt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",Ff(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Df()<=Dt.DEBUG&&ze("QueryEngine","Query:",Ff(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Df()<=Dt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",Ff(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Js(t))):ue.resolve())}ys(e,t){if(UM(t))return ue.resolve(null);let r=Js(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=AT(t,null,"F"),r=Js(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=Ot(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,AT(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,i){return UM(t)||i.isEqual(ft.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?ue.resolve(null):(Df()<=Dt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ff(t)),this.vs(e,a,t,iH(i,fm)).next((o=>o)))}))}Ds(e,t){let r=new gn(DD(e));return t.forEach(((i,s)=>{fp(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Df()<=Dt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Ff(t)),this.ps.getDocumentsMatchingQuery(e,t,Cs.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const jI="LocalStore",sq=3e8;class aq{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new kn(It),this.xs=new fl((s=>oh(s)),up),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function T5(n,e,t,r){return new aq(n,e,t,r)}async function S5(n,e){const t=At(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],o=[];let l=Ot();for(const u of i){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function oq(n,e){const t=At(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,l,u,f){const d=u.batch,g=d.keys();let p=ue.resolve();return g.forEach((x=>{p=p.next((()=>f.getEntry(l,x))).next((v=>{const E=u.docVersions.get(x);ht(E!==null,48541),v.version.compareTo(E)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),f.addEntry(v)))}))})),p.next((()=>o.mutationQueue.removeMutationBatch(l,d)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let l=Ot();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function I5(n){const e=At(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function lq(n,e){const t=At(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((f,d)=>{const g=i.get(d);if(!g)return;o.push(t.Pi.removeMatchingKeys(s,f.removedDocuments,d).next((()=>t.Pi.addMatchingKeys(s,f.addedDocuments,d))));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(ur.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),i=i.insert(d,p),(function(v,E,R){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=sq?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(g,p,f)&&o.push(t.Pi.updateTargetData(s,p))}));let l=Ss(),u=Ot();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))})),o.push(cq(s,a,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(ft.min())){const f=t.Pi.getLastRemoteSnapshotVersion(s).next((d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));o.push(f)}return ue.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Ms=i,s)))}function cq(n,e,t){let r=Ot(),i=Ot();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Ss();return t.forEach(((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(ft.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ze(jI,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)})),{ks:a,qs:i}}))}function uq(n,e){const t=At(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Uu),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hq(n,e){const t=At(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,ue.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new zo(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function LT(n,e,t){const r=At(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Uc(a))throw a;ze(jI,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function vb(n,e,t){const r=At(n);let i=ft.min(),s=Ot();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,u,f){const d=At(l),g=d.xs.get(f);return g!==void 0?ue.resolve(d.Ms.get(g)):d.Pi.getTargetData(u,f)})(r,a,Js(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:ft.min(),t?s:Ot()))).next((o=>(fq(r,YH(e),o),{documents:o,Qs:s})))))}function fq(n,e,t){let r=n.Os.get(e)||ft.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class xb{constructor(){this.activeTargetIds=nK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A5{constructor(){this.Mo=new xb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dq{Oo(e){}shutdown(){}}const Eb="ConnectivityMonitor";class wb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ze(Eb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ze(Eb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let n1=null;function NT(){return n1===null?n1=(function(){return 268435456+Math.round(2147483648*Math.random())})():n1++,"0x"+n1.toString(16)}const e2="RestConnection",gq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ry?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=NT(),o=this.zo(e,t.toUriEncodedString());ze(e2,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),f=Ah(u);return this.Jo(e,o,l,r,f).then((d=>(ze(e2,`Received RPC '${e}' ${a}: `,d),d)),(d=>{throw sh(e2,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",r),d}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=gq[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class pq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ci="WebChannelConnection";class _q extends mq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=NT();return new Promise(((o,l)=>{const u=new KN;u.setWithCredentials(!0),u.listenOnce(qN.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case A1.NO_ERROR:const d=u.getResponseJson();ze(ci,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case A1.TIMEOUT:ze(ci,`RPC '${e}' ${a} timed out`),l(new Ze(ke.DEADLINE_EXCEEDED,"Request time out"));break;case A1.HTTP_ERROR:const g=u.getStatus();if(ze(ci,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const x=p?.error;if(x&&x.status&&x.message){const v=(function(R){const S=R.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(S)>=0?S:ke.UNKNOWN})(x.status);l(new Ze(v,x.message))}else l(new Ze(ke.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ze(ke.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ze(ci,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(i);ze(ci,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",f,r,15)}))}T_(e,t,r){const i=NT(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ZN(),o=YN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const f=s.join("");ze(ci,`Creating RPC '${e}' stream ${i}: ${f}`,l);const d=a.createWebChannel(f,l);this.I_(d);let g=!1,p=!1;const x=new pq({Yo:E=>{p?ze(ci,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(ze(ci,`Opening RPC '${e}' stream ${i} transport.`),d.open(),g=!0),ze(ci,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},Zo:()=>d.close()}),v=(E,R,S)=>{E.listen(R,(C=>{try{S(C)}catch(O){setTimeout((()=>{throw O}),0)}}))};return v(d,ug.EventType.OPEN,(()=>{p||(ze(ci,`RPC '${e}' stream ${i} transport opened.`),x.o_())})),v(d,ug.EventType.CLOSE,(()=>{p||(p=!0,ze(ci,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(d))})),v(d,ug.EventType.ERROR,(E=>{p||(p=!0,sh(ci,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),x.a_(new Ze(ke.UNAVAILABLE,"The operation could not be completed")))})),v(d,ug.EventType.MESSAGE,(E=>{if(!p){const R=E.data[0];ht(!!R,16349);const S=R,C=S?.error||S[0]?.error;if(C){ze(ci,`RPC '${e}' stream ${i} received error:`,C);const O=C.status;let N=(function(P){const b=sr[P];if(b!==void 0)return qD(b)})(O),z=C.message;N===void 0&&(N=ke.INTERNAL,z="Unknown error status: "+O+" with message "+C.message),p=!0,x.a_(new Ze(N,z)),d.close()}else ze(ci,`RPC '${e}' stream ${i} received:`,R),x.u_(R)}})),v(o,XN.STAT_EVENT,(E=>{E.stat===dT.PROXY?ze(ci,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===dT.NOPROXY&&ze(ci,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function yq(){return typeof window<"u"?window:null}function D1(){return typeof document<"u"?document:null}function gx(n){return new vK(n,!0)}class R5{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Tb="PersistentStream";class C5{constructor(e,t,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R5(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ke.RESOURCE_EXHAUSTED?(Ci(t.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ze(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ze(Tb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ze(Tb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vq extends C5{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=wK(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ft.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ft.min():a.readTime?ki(a.readTime):ft.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=PT(this.serializer),t.addTarget=(function(s,a){let o;const l=a.target;if(o=Py(l)?{documents:n5(s,l)}:{query:r5(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=ZD(s,a.resumeToken);const u=RT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(ft.min())>0){o.readTime=Dd(s,a.snapshotVersion.toTimestamp());const u=RT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=SK(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=PT(this.serializer),t.removeTarget=e,this.q_(t)}}class xq extends C5{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=TK(e.writeResults,e.commitTime),r=ki(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=PT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ky(this.serializer,r)))};this.q_(t)}}class Eq{}class wq extends Eq{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ze(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,CT(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ze(ke.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,CT(t,r),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(ke.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Tq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ci(t),this.aa=!1):ze("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const hh="RemoteStore";class Sq{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Ph(this)&&(ze(hh,"Restarting streams for network reachability change."),await(async function(l){const u=At(l);u.Ea.add(4),await gp(u),u.Ra.set("Unknown"),u.Ea.delete(4),await mx(u)})(this))}))})),this.Ra=new Tq(r,i)}}async function mx(n){if(Ph(n))for(const e of n.da)await e(!0)}async function gp(n){for(const e of n.da)await e(!1)}function P5(n,e){const t=At(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zI(t)?UI(t):qd(t).O_()&&GI(t,e))}function BI(n,e){const t=At(n),r=qd(t);t.Ia.delete(e),r.O_()&&M5(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ph(t)&&t.Ra.set("Unknown"))}function GI(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qd(n).Y_(e)}function M5(n,e){n.Va.Ue(e),qd(n).Z_(e)}function UI(n){n.Va=new mK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qd(n).start(),n.Ra.ua()}function zI(n){return Ph(n)&&!qd(n).x_()&&n.Ia.size>0}function Ph(n){return At(n).Ea.size===0}function b5(n){n.Va=void 0}async function Iq(n){n.Ra.set("Online")}async function Aq(n){n.Ia.forEach(((e,t)=>{GI(n,e)}))}async function Rq(n,e){b5(n),zI(n)?(n.Ra.ha(e),UI(n)):n.Ra.set("Unknown")}async function Cq(n,e,t){if(n.Ra.set("Online"),e instanceof YD&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(n,e)}catch(r){ze(hh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fy(n,r)}else if(e instanceof L1?n.Va.Ze(e):e instanceof XD?n.Va.st(e):n.Va.tt(e),!t.isEqual(ft.min()))try{const r=await I5(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.Ia.get(u);f&&s.Ia.set(u,f.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,u)=>{const f=s.Ia.get(l);if(!f)return;s.Ia.set(l,f.withResumeToken(ur.EMPTY_BYTE_STRING,f.snapshotVersion)),M5(s,l);const d=new zo(f.target,l,u,f.sequenceNumber);GI(s,d)})),s.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){ze(hh,"Failed to raise snapshot:",r),await Fy(n,r)}}async function Fy(n,e,t){if(!Uc(e))throw e;n.Ea.add(1),await gp(n),n.Ra.set("Offline"),t||(t=()=>I5(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ze(hh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await mx(n)}))}function k5(n,e){return e().catch((t=>Fy(n,t,e)))}async function mp(n){const e=At(n),t=bc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Uu;for(;Pq(e);)try{const i=await uq(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Mq(e,i)}catch(i){await Fy(e,i)}O5(e)&&L5(e)}function Pq(n){return Ph(n)&&n.Ta.length<10}function Mq(n,e){n.Ta.push(e);const t=bc(n);t.O_()&&t.X_&&t.ea(e.mutations)}function O5(n){return Ph(n)&&!bc(n).x_()&&n.Ta.length>0}function L5(n){bc(n).start()}async function bq(n){bc(n).ra()}async function kq(n){const e=bc(n);for(const t of n.Ta)e.ea(t.mutations)}async function Oq(n,e,t){const r=n.Ta.shift(),i=PI.from(r,e,t);await k5(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await mp(n)}async function Lq(n,e){e&&bc(n).X_&&await(async function(r,i){if((function(a){return fK(a)&&a!==ke.ABORTED})(i.code)){const s=r.Ta.shift();bc(r).B_(),await k5(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await mp(r)}})(n,e),O5(n)&&L5(n)}async function Sb(n,e){const t=At(n);t.asyncQueue.verifyOperationInProgress(),ze(hh,"RemoteStore received new credentials");const r=Ph(t);t.Ea.add(3),await gp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mx(t)}async function Nq(n,e){const t=At(n);e?(t.Ea.delete(2),await mx(t)):e||(t.Ea.add(2),await gp(t),t.Ra.set("Unknown"))}function qd(n){return n.ma||(n.ma=(function(t,r,i){const s=At(t);return s.sa(),new vq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Iq.bind(null,n),t_:Aq.bind(null,n),r_:Rq.bind(null,n),H_:Cq.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),zI(n)?UI(n):n.Ra.set("Unknown")):(await n.ma.stop(),b5(n))}))),n.ma}function bc(n){return n.fa||(n.fa=(function(t,r,i){const s=At(t);return s.sa(),new xq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:bq.bind(null,n),r_:Lq.bind(null,n),ta:kq.bind(null,n),na:Oq.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await mp(n)):(await n.fa.stop(),n.Ta.length>0&&(ze(hh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class $I{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new $I(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WI(n,e){if(Ci("AsyncQueue",`${e}: ${n}`),Uc(n))return new Ze(ke.UNAVAILABLE,`${e}: ${n}`);throw n}class sd{static emptySet(e){return new sd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=hg(),this.sortedSet=new kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new sd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ib{constructor(){this.ga=new kn(Qe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ot(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Fd{constructor(e,t,r,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new Fd(e,t,sd.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ax(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Dq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Fq{constructor(){this.queries=Ab(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=At(t),s=i.queries;i.queries=Ab(),s.forEach(((a,o)=>{for(const l of o.Sa)l.onError(r)}))})(this,new Ze(ke.ABORTED,"Firestore shutting down"))}}function Ab(){return new fl((n=>ND(n)),ax)}async function Vq(n,e){const t=At(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Dq,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=WI(a,`Initialization of query '${Ff(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&HI(t)}async function jq(n,e){const t=At(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Bq(n,e){const t=At(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&HI(t)}function Gq(n,e,t){const r=At(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function HI(n){n.Ca.forEach((e=>{e.next()}))}var DT,Rb;(Rb=DT||(DT={})).Ma="default",Rb.Cache="cache";class Uq{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Fd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==DT.Cache}}class N5{constructor(e){this.key=e}}class D5{constructor(e){this.key=e}}class zq{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ot(),this.mutatedKeys=Ot(),this.eu=DD(e),this.tu=new sd(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Ib,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,d)=>{const g=i.get(f),p=fp(this.query,d)?d:null,x=!!g&&this.mutatedKeys.has(g.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;g&&p?g.data.isEqual(p.data)?x!==v&&(r.track({type:3,doc:p}),E=!0):this.su(g,p)||(r.track({type:2,doc:p}),E=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!g&&p?(r.track({type:0,doc:p}),E=!0):g&&!p&&(r.track({type:1,doc:g}),E=!0,(l||u)&&(o=!0)),E&&(p?(a=a.add(p),s=v?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,d)=>(function(p,x){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Rt:E})}};return v(p)-v(x)})(f.type,d.type)||this.eu(f.doc,d.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new Fd(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ib,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ot(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new D5(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new N5(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const KI="SyncEngine";class $q{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Wq{constructor(e){this.key=e,this.hu=!1}}class Hq{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new fl((o=>ND(o)),ax),this.Iu=new Map,this.Eu=new Set,this.du=new kn(Qe.comparator),this.Au=new Map,this.Ru=new NI,this.Vu={},this.mu=new Map,this.fu=uh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Kq(n,e,t=!0){const r=U5(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await F5(r,e,t,!0),i}async function qq(n,e){const t=U5(n);await F5(t,e,!0,!1)}async function F5(n,e,t,r){const i=await hq(n.localStore,Js(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await Xq(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&P5(n.remoteStore,i),o}async function Xq(n,e,t,r,i){n.pu=(d,g,p)=>(async function(v,E,R,S){let C=E.view.ru(R);C.Cs&&(C=await vb(v.localStore,E.query,!1).then((({documents:M})=>E.view.ru(M,C))));const O=S&&S.targetChanges.get(E.targetId),N=S&&S.targetMismatches.get(E.targetId)!=null,z=E.view.applyChanges(C,v.isPrimaryClient,O,N);return Pb(v,E.targetId,z.au),z.snapshot})(n,d,g,p);const s=await vb(n.localStore,e,!0),a=new zq(e,s.Qs),o=a.ru(s.documents),l=dp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,l);Pb(n,t,u.au);const f=new $q(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function Yq(n,e,t){const r=At(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!ax(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await LT(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&BI(r.remoteStore,i.targetId),FT(r,i.targetId)})).catch(Ch)):(FT(r,i.targetId),await LT(r.localStore,i.targetId,!0))}async function Zq(n,e){const t=At(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),BI(t.remoteStore,r.targetId))}async function Qq(n,e,t){const r=z5(n);try{const i=await(function(a,o){const l=At(a),u=hn.now(),f=o.reduce(((p,x)=>p.add(x.key)),Ot());let d,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let x=Ss(),v=Ot();return l.Ns.getEntries(p,f).next((E=>{x=E,x.forEach(((R,S)=>{S.isValidDocument()||(v=v.add(R))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,x))).next((E=>{d=E;const R=[];for(const S of o){const C=uK(S,d.get(S.key).overlayedDocument);C!=null&&R.push(new dl(S.key,C,AD(C.value.mapValue),Pi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,R,o)})).next((E=>{g=E;const R=E.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,E.batchId,R)}))})).then((()=>({batchId:g.batchId,changes:VD(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new kn(It)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u})(r,i.batchId,t),await pp(r,i.changes),await mp(r.remoteStore)}catch(i){const s=WI(i,"Failed to persist write");t.reject(s)}}async function V5(n,e){const t=At(n);try{const r=await lq(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ht(a.hu,14607):i.removedDocuments.size>0&&(ht(a.hu,42227),a.hu=!1))})),await pp(t,r,e)}catch(r){await Ch(r)}}function Cb(n,e,t){const r=At(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=At(a);l.onlineState=o;let u=!1;l.queries.forEach(((f,d)=>{for(const g of d.Sa)g.va(o)&&(u=!0)})),u&&HI(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Jq(n,e,t){const r=At(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new kn(Qe.comparator);a=a.insert(s,Kn.newNoDocument(s,ft.min()));const o=Ot().add(s),l=new ux(ft.min(),new Map,new kn(It),a,o);await V5(r,l),r.du=r.du.remove(s),r.Au.delete(e),qI(r)}else await LT(r.localStore,e,!1).then((()=>FT(r,e,t))).catch(Ch)}async function eX(n,e){const t=At(n),r=e.batch.batchId;try{const i=await oq(t.localStore,e);B5(t,r,null),j5(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pp(t,i)}catch(i){await Ch(i)}}async function tX(n,e,t){const r=At(n);try{const i=await(function(a,o){const l=At(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,o).next((d=>(ht(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);B5(r,e,t),j5(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pp(r,i)}catch(i){await Ch(i)}}function j5(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function B5(n,e,t){const r=At(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function FT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||G5(n,r)}))}function G5(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(BI(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qI(n))}function Pb(n,e,t){for(const r of t)r instanceof N5?(n.Ru.addReference(r.key,e),nX(n,r)):r instanceof D5?(ze(KI,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||G5(n,r.key)):ot(19791,{wu:r})}function nX(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ze(KI,"New document in limbo: "+t),n.Eu.add(r),qI(n))}function qI(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Qe(Yt.fromString(e)),r=n.fu.next();n.Au.set(r,new Wq(t)),n.du=n.du.insert(t,r),P5(n.remoteStore,new zo(Js(AI(t.path)),r,"TargetPurposeLimboResolution",Zs.ce))}}async function pp(n,e,t){const r=At(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,l)=>{a.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=VI.As(l.targetId,u);s.push(f)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(l,u){const f=At(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>ue.forEach(u,(g=>ue.forEach(g.Es,(p=>f.persistence.referenceDelegate.addReference(d,g.targetId,p))).next((()=>ue.forEach(g.ds,(p=>f.persistence.referenceDelegate.removeReference(d,g.targetId,p)))))))))}catch(d){if(!Uc(d))throw d;ze(jI,"Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const p=f.Ms.get(g),x=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(x);f.Ms=f.Ms.insert(g,v)}}})(r.localStore,s))}async function rX(n,e){const t=At(n);if(!t.currentUser.isEqual(e)){ze(KI,"User change. New user:",e.toKey());const r=await S5(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((l=>{l.reject(new Ze(ke.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pp(t,r.Ls)}}function iX(n,e){const t=At(n),r=t.Au.get(e);if(r&&r.hu)return Ot().add(r.key);{let i=Ot();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function U5(n){const e=At(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=V5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jq.bind(null,e),e.Pu.H_=Bq.bind(null,e.eventManager),e.Pu.yu=Gq.bind(null,e.eventManager),e}function z5(n){const e=At(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tX.bind(null,e),e}class Sm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gx(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return T5(this.persistence,new w5,e.initialUser,this.serializer)}Cu(e){return new DI(dx.mi,this.serializer)}Du(e){return new A5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sm.provider={build:()=>new Sm};class sX extends Sm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof Dy,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?fi.withCacheSize(this.cacheSizeBytes):fi.DEFAULT;return new DI((r=>Dy.mi(r,t)),this.serializer)}}class aX extends Sm{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await z5(this.xu.syncEngine),await mp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return T5(this.persistence,new w5,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new _5(r,e.asyncQueue,t)}Mu(e,t){const r=new lH(t,this.persistence);return new oH(e.asyncQueue,r)}Cu(e){const t=rq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?fi.withCacheSize(this.cacheSizeBytes):fi.DEFAULT;return new FI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yq(),D1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new A5}}class Vy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rX.bind(null,this.syncEngine),await Nq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Fq})()}createDatastore(e){const t=gx(e.databaseInfo.databaseId),r=(function(s){return new _q(s)})(e.databaseInfo);return(function(s,a,o,l){return new wq(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,o){return new Sq(r,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cb(this.syncEngine,t,0)),(function(){return wb.v()?new wb:new dq})())}createSyncEngine(e,t){return(function(i,s,a,o,l,u,f){const d=new Hq(i,s,a,o,l,u);return f&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=At(t);ze(hh,"RemoteStore shutting down."),r.Ea.add(5),await gp(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vy.provider={build:()=>new Vy};class oX{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const kc="FirestoreClient";class lX{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xr.UNAUTHENTICATED,this.clientId=mI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{ze(kc,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ze(kc,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=WI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function t2(n,e){n.asyncQueue.verifyOperationInProgress(),ze(kc,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await S5(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Mb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await cX(n);ze(kc,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Sb(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Sb(e.remoteStore,i))),n._onlineComponents=e}async function cX(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze(kc,"Using user provided OfflineComponentProvider");try{await t2(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;sh("Error using user provided cache. Falling back to memory cache: "+t),await t2(n,new Sm)}}else ze(kc,"Using default OfflineComponentProvider"),await t2(n,new sX(void 0));return n._offlineComponents}async function $5(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze(kc,"Using user provided OnlineComponentProvider"),await Mb(n,n._uninitializedComponentsProvider._online)):(ze(kc,"Using default OnlineComponentProvider"),await Mb(n,new Vy))),n._onlineComponents}function uX(n){return $5(n).then((e=>e.syncEngine))}async function hX(n){const e=await $5(n),t=e.eventManager;return t.onListen=Kq.bind(null,e.syncEngine),t.onUnlisten=Yq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Zq.bind(null,e.syncEngine),t}function fX(n,e,t={}){const r=new Zo;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const f=new oX({next:g=>{f.Nu(),a.enqueueAndForget((()=>jq(s,d))),g.fromCache&&l.source==="server"?u.reject(new Ze(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new Uq(o,f,{includeMetadataChanges:!0,qa:!0});return Vq(s,d)})(await hX(n),n.asyncQueue,e,t,r))),r.promise}function W5(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const bb=new Map;const H5="firestore.googleapis.com",kb=!0;class Ob{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=H5,this.ssl=kb}else this.host=e.host,this.ssl=e.ssl??kb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=d5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BK)throw new Ze(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W5(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ze(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ze(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ze(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class px{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ob({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ob(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new KW;switch(r.type){case"firstParty":return new ZW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ze(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=bb.get(t);r&&(ze("ComponentProvider","Removing Datastore"),bb.delete(t),r.terminate())})(this),Promise.resolve()}}function dX(n,e,t,r={}){n=Cc(n,px);const i=Ah(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;i&&(cI(`https://${o}`),uI("Firestore",!0)),s.host!==H5&&s.host!==o&&sh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!nh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=Xr.MOCK_USER;else{u=DN(r.mockUserToken,n._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Ze(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Xr(d)}n._authCredentials=new qW(new JN(u,f))}}class Xd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xd(this.firestore,e,this._query)}}class Er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Er(this.firestore,e,this._key)}toJSON(){return{type:Er._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(lp(t,Er._jsonSchema))return new Er(e,r||null,new Qe(Yt.fromString(t.referencePath)))}}Er._jsonSchemaVersion="firestore/documentReference/1.0",Er._jsonSchema={type:lr("string",Er._jsonSchemaVersion),referencePath:lr("string")};class xc extends Xd{constructor(e,t,r){super(e,t,AI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new Qe(e))}withConverter(e){return new xc(this.firestore,e,this._path)}}function Lb(n,e,...t){if(n=Fr(n),tD("collection","path",e),n instanceof px){const r=Yt.fromString(e,...t);return TM(r),new xc(n,null,r)}{if(!(n instanceof Er||n instanceof xc))throw new Ze(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return TM(r),new xc(n.firestore,null,r)}}function VT(n,e,...t){if(n=Fr(n),arguments.length===1&&(e=mI.newId()),tD("doc","path",e),n instanceof px){const r=Yt.fromString(e,...t);return wM(r),new Er(n,null,new Qe(r))}{if(!(n instanceof Er||n instanceof xc))throw new Ze(ke.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return wM(r),new Er(n.firestore,n instanceof xc?n.converter:null,new Qe(r))}}const Nb="AsyncQueue";class Db{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R5(this,"async_queue_retry"),this._c=()=>{const r=D1();r&&ze(Nb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=D1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=D1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Uc(e))throw e;ze(Nb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ci("INTERNAL UNHANDLED ERROR: ",Fb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=$I.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&ot(47125,{Pc:Fb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Fb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Yd extends px{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Db,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Db(e),this._firestoreClient=void 0,await e}}}function gX(n,e){const t=typeof n=="object"?n:dI(),r=typeof n=="string"?n:Ry,i=Zv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ON("firestore");s&&dX(i,...s)}return i}function K5(n){if(n._terminated)throw new Ze(ke.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||q5(n),n._firestoreClient}function q5(n){const e=n._freezeSettings(),t=(function(i,s,a,o){return new FH(i,s,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,W5(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new lX(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function mX(n,e){sh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return pX(n,Vy.provider,{build:r=>new aX(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function pX(n,e,t){if((n=Cc(n,Yd))._firestoreClient||n._terminated)throw new Ze(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ze(ke.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},q5(n)}class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(ur.fromBase64String(e))}catch(t){throw new Ze(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ks(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lp(e,Ks._jsonSchema))return Ks.fromBase64String(e.bytes)}}Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:lr("string",Ks._jsonSchemaVersion),bytes:lr("string")};class _x{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ze(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class XI{constructor(e){this._methodName=e}}class io{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return It(this._lat,e._lat)||It(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:io._jsonSchemaVersion}}static fromJSON(e){if(lp(e,io._jsonSchema))return new io(e.latitude,e.longitude)}}io._jsonSchemaVersion="firestore/geoPoint/1.0",io._jsonSchema={type:lr("string",io._jsonSchemaVersion),latitude:lr("number"),longitude:lr("number")};class so{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:so._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lp(e,so._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new so(e.vectorValues);throw new Ze(ke.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}so._jsonSchemaVersion="firestore/vectorValue/1.0",so._jsonSchema={type:lr("string",so._jsonSchemaVersion),vectorValues:lr("object")};const _X=/^__.*__$/;class yX{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new dl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kd(e,this.data,t,this.fieldTransforms)}}class X5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y5(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot(40011,{Ac:n})}}class YI{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new YI({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Y5(this.Ac)&&_X.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vX{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gx(e)}Cc(e,t,r,i=!1){return new YI({Ac:e,methodName:t,Dc:r,path:jn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZI(n){const e=n._freezeSettings(),t=gx(n._databaseId);return new vX(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xX(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);QI("Data must be an object, but it was:",a,r);const o=Z5(r,a);let l,u;if(s.merge)l=new Yi(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const d of s.mergeFields){const g=jT(e,d,t);if(!a.contains(g))throw new Ze(ke.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);J5(f,g)||f.push(g)}l=new Yi(f),u=a.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=a.fieldTransforms;return new yX(new gi(o),l,u)}class yx extends XI{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yx}}function EX(n,e,t,r){const i=n.Cc(1,e,t);QI("Data must be an object, but it was:",i,r);const s=[],a=gi.empty();zc(r,((l,u)=>{const f=JI(e,l,t);u=Fr(u);const d=i.yc(f);if(u instanceof yx)s.push(f);else{const g=_p(u,d);g!=null&&(s.push(f),a.set(f,g))}}));const o=new Yi(s);return new X5(a,o,i.fieldTransforms)}function wX(n,e,t,r,i,s){const a=n.Cc(1,e,t),o=[jT(e,r,t)],l=[i];if(s.length%2!=0)throw new Ze(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(jT(e,s[g])),l.push(s[g+1]);const u=[],f=gi.empty();for(let g=o.length-1;g>=0;--g)if(!J5(u,o[g])){const p=o[g];let x=l[g];x=Fr(x);const v=a.yc(p);if(x instanceof yx)u.push(p);else{const E=_p(x,v);E!=null&&(u.push(p),f.set(p,E))}}const d=new Yi(u);return new X5(f,d,a.fieldTransforms)}function TX(n,e,t,r=!1){return _p(t,n.Cc(r?4:3,e))}function _p(n,e){if(Q5(n=Fr(n)))return QI("Unsupported field value:",e,n),Z5(n,e);if(n instanceof XI)return(function(r,i){if(!Y5(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const o of r){let l=_p(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Fr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=hn.fromDate(r);return{timestampValue:Dd(i.serializer,s)}}if(r instanceof hn){const s=new hn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dd(i.serializer,s)}}if(r instanceof io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:ZD(i.serializer,r._byteString)};if(r instanceof Er){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof so)return(function(a,o){return{mapValue:{fields:{[TI]:{stringValue:SI},[Md]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return RI(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Qv(r)}`)})(n,e)}function Z5(n,e){const t={};return _D(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zc(n,((r,i)=>{const s=_p(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function Q5(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof hn||n instanceof io||n instanceof Ks||n instanceof Er||n instanceof XI||n instanceof so)}function QI(n,e,t){if(!Q5(t)||!nD(t)){const r=Qv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function jT(n,e,t){if((e=Fr(e))instanceof _x)return e._internalPath;if(typeof e=="string")return JI(n,e);throw jy("Field path arguments must be of type string or ",n,!1,void 0,t)}const SX=new RegExp("[~\\*/\\[\\]]");function JI(n,e,t){if(e.search(SX)>=0)throw jy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _x(...e.split("."))._internalPath}catch{throw jy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jy(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ze(ke.INVALID_ARGUMENT,o+n+l)}function J5(n,e){return n.some((t=>t.isEqual(e)))}class e6{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IX extends e6{data(){return super.data()}}function eA(n,e){return typeof e=="string"?JI(n,e):e instanceof _x?e._internalPath:e._delegate._internalPath}function AX(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ze(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tA{}class RX extends tA{}function CX(n,e,...t){let r=[];e instanceof tA&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((l=>l instanceof nA)).length,o=s.filter((l=>l instanceof vx)).length;if(a>1||a>0&&o>0)throw new Ze(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class vx extends RX{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new vx(e,t,r)}_apply(e){const t=this._parse(e);return t6(e._query,t),new Xd(e.firestore,e.converter,IT(e._query,t))}_parse(e){const t=ZI(e.firestore);return(function(s,a,o,l,u,f,d){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ze(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){jb(d,f);const x=[];for(const v of d)x.push(Vb(l,s,v));g={arrayValue:{values:x}}}else g=Vb(l,s,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||jb(d,f),g=TX(o,a,d,f==="in"||f==="not-in");return Ft.create(u,f,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function PX(n,e,t){const r=e,i=eA("where",n);return vx._create(i,r,t)}class nA extends tA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nA(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)t6(a,l),a=IT(a,l)})(e._query,t),new Xd(e.firestore,e.converter,IT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Vb(n,e,t){if(typeof(t=Fr(t))=="string"){if(t==="")throw new Ze(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LD(e)&&t.indexOf("/")!==-1)throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!Qe.isDocumentKey(r))throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xm(n,new Qe(r))}if(t instanceof Er)return xm(n,t._key);throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qv(t)}.`)}function jb(n,e){if(!Array.isArray(n)||n.length===0)throw new Ze(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t6(n,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ze(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class MX{convertValue(e,t="none"){switch(Pc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ot(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zc(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[Md].arrayValue?.values?.map((r=>bn(r.doubleValue)));return new so(t)}convertGeoPoint(e){return new io(bn(e.latitude),bn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ix(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ym(e));default:return null}}convertTimestamp(e){const t=il(e);return new hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);ht(o5(r),9688,{name:e});const i=new ah(r.get(1),r.get(3)),s=new Qe(r.popFirst(5));return i.isEqual(t)||Ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function bX(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class r1{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ad extends e6{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new F1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(ke.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ad._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ad._jsonSchemaVersion="firestore/documentSnapshot/1.0",ad._jsonSchema={type:lr("string",ad._jsonSchemaVersion),bundleSource:lr("string","DocumentSnapshot"),bundleName:lr("string"),bundle:lr("string")};class F1 extends ad{data(e={}){return super.data(e)}}class od{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new r1(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new F1(this._firestore,this._userDataWriter,r.key,r,new r1(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new F1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new r1(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new F1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new r1(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:kX(o.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(ke.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=od._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mI.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:n})}}od._jsonSchemaVersion="firestore/querySnapshot/1.0",od._jsonSchema={type:lr("string",od._jsonSchemaVersion),bundleSource:lr("string","QuerySnapshot"),bundleName:lr("string"),bundle:lr("string")};class OX extends MX{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}function LX(n){n=Cc(n,Xd);const e=Cc(n.firestore,Yd),t=K5(e),r=new OX(e);return AX(n._query),fX(t,n._query).then((i=>new od(e,r,n,i)))}function NX(n,e,t,...r){n=Cc(n,Er);const i=Cc(n.firestore,Yd),s=ZI(i);let a;return a=typeof(e=Fr(e))=="string"||e instanceof _x?wX(s,"updateDoc",n._key,e,t,r):EX(s,"updateDoc",n._key,e),rA(i,[a.toMutation(n._key,Pi.exists(!0))])}function DX(n){return rA(Cc(n.firestore,Yd),[new cx(n._key,Pi.none())])}function FX(n,e){const t=Cc(n.firestore,Yd),r=VT(n),i=bX(n.converter,e);return rA(t,[xX(ZI(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Pi.exists(!1))]).then((()=>r))}function rA(n,e){return(function(r,i){const s=new Zo;return r.asyncQueue.enqueueAndForget((async()=>Qq(await uX(r),i,s))),s.promise})(K5(n),e)}(function(e,t=!0){(function(i){Hd=i})(Rh),rh(new Rc("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Yd(new XW(r.getProvider("auth-internal")),new QW(a,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ze(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ah(u.options.projectId,f)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),ro(yM,vM,e),ro(yM,vM,"esm2020")})();var VX="firebase",jX="12.7.0";ro(VX,jX,"app");function n6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BX=n6,r6=new ap("auth","Firebase",n6());const By=new hI("@firebase/auth");function GX(n,...e){By.logLevel<=Dt.WARN&&By.warn(`Auth (${Rh}): ${n}`,...e)}function V1(n,...e){By.logLevel<=Dt.ERROR&&By.error(`Auth (${Rh}): ${n}`,...e)}function al(n,...e){throw iA(n,...e)}function ao(n,...e){return iA(n,...e)}function i6(n,e,t){const r={...BX(),[e]:t};return new ap("auth","Firebase",r).create(e,{appName:n.name})}function Ec(n){return i6(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iA(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return r6.create(n,...e)}function Tt(n,e,...t){if(!n)throw iA(e,...t)}function $o(n){const e="INTERNAL ASSERTION FAILED: "+n;throw V1(e),new Error(e)}function ol(n,e){n||$o(e)}function BT(){return typeof self<"u"&&self.location?.href||""}function UX(){return Bb()==="http:"||Bb()==="https:"}function Bb(){return typeof self<"u"&&self.location?.protocol||null}function zX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UX()||C$()||"connection"in navigator)?navigator.onLine:!0}function $X(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class yp{constructor(e,t){this.shortDelay=e,this.longDelay=t,ol(t>e,"Short delay should be less than long delay!"),this.isMobile=A$()||P$()}get(){return zX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sA(n,e){ol(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class s6{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const WX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const HX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KX=new yp(3e4,6e4);function xx(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Zd(n,e,t,r,i={}){return a6(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=op({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...s};return R$()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Ah(n.emulatorConfig.host)&&(u.credentials="include"),s6.fetch()(await l6(n,n.config.apiHost,t,o),u)})}async function a6(n,e,t){n._canInitEmulator=!1;const r={...WX,...e};try{const i=new qX(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw i1(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw i1(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw i1(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw i1(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw i6(n,f,u);al(n,f)}}catch(i){if(i instanceof Eo)throw i;al(n,"network-request-failed",{message:String(i)})}}async function o6(n,e,t,r,i={}){const s=await Zd(n,e,t,r,i);return"mfaPendingCredential"in s&&al(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function l6(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?sA(n.config,i):`${n.config.apiScheme}://${i}`;return HX.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class qX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ao(this.auth,"network-request-failed")),KX.get())})}}function i1(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ao(n,e,r);return i.customData._tokenResponse=t,i}async function XX(n,e){return Zd(n,"POST","/v1/accounts:delete",e)}async function Gy(n,e){return Zd(n,"POST","/v1/accounts:lookup",e)}function Og(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YX(n,e=!1){const t=Fr(n),r=await t.getIdToken(e),i=aA(r);Tt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Og(n2(i.auth_time)),issuedAtTime:Og(n2(i.iat)),expirationTime:Og(n2(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function n2(n){return Number(n)*1e3}function aA(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return V1("JWT malformed, contained fewer than 3 sections"),null;try{const i=MN(t);return i?JSON.parse(i):(V1("Failed to decode base64 JWT payload"),null)}catch(i){return V1("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Gb(n){const e=aA(n);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Im(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Eo&&ZX(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ZX({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class QX{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class GT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Og(this.lastLoginAt),this.creationTime=Og(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Uy(n){const e=n.auth,t=await n.getIdToken(),r=await Im(n,Gy(e,{idToken:t}));Tt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?c6(i.providerUserInfo):[],a=eY(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!a?.length,u=o?l:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new GT(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,f)}async function JX(n){const e=Fr(n);await Uy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function c6(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function tY(n,e){const t=await a6(n,{},async()=>{const r=op({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await l6(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&Ah(n.emulatorConfig.host)&&(l.credentials="include"),s6.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nY(n,e){return Zd(n,"POST","/v2/accounts:revokeToken",xx(n,e))}class ld{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const t=Gb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await tY(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new ld;return r&&(Tt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Tt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Tt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ld,this.toJSON())}_performRefresh(){return $o("not implemented")}}function Hl(n,e){Tt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class wa{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new QX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new GT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Im(this,this.stsTokenManager.getToken(this.auth,e));return Tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YX(this,e)}reload(){return JX(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Uy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hs(this.auth.app))return Promise.reject(Ec(this.auth));const e=await this.getIdToken();return await Im(this,XX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:d,emailVerified:g,isAnonymous:p,providerData:x,stsTokenManager:v}=t;Tt(d&&v,e,"internal-error");const E=ld.fromJSON(this.name,v);Tt(typeof d=="string",e,"internal-error"),Hl(r,e.name),Hl(i,e.name),Tt(typeof g=="boolean",e,"internal-error"),Tt(typeof p=="boolean",e,"internal-error"),Hl(s,e.name),Hl(a,e.name),Hl(o,e.name),Hl(l,e.name),Hl(u,e.name),Hl(f,e.name);const R=new wa({uid:d,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:u,lastLoginAt:f});return x&&Array.isArray(x)&&(R.providerData=x.map(S=>({...S}))),l&&(R._redirectEventId=l),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new ld;i.updateFromServerResponse(t);const s=new wa({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Uy(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Tt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?c6(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new ld;o.updateFromIdToken(r);const l=new wa({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new GT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const Ub=new Map;function Wo(n){ol(n instanceof Function,"Expected a class definition");let e=Ub.get(n);return e?(ol(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ub.set(n,e),e)}class u6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}u6.type="NONE";const zb=u6;function j1(n,e,t){return`firebase:${n}:${e}:${t}`}class cd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=j1(this.userKey,i.apiKey,s),this.fullPersistenceKey=j1("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gy(this.auth,{idToken:e}).catch(()=>{});return t?wa._fromGetAccountInfoResponse(this.auth,t,e):null}return wa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new cd(Wo(zb),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Wo(zb);const a=j1(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const f=await u._get(a);if(f){let d;if(typeof f=="string"){const g=await Gy(e,{idToken:f}).catch(()=>{});if(!g)break;d=await wa._fromGetAccountInfoResponse(e,g,f)}else d=wa._fromJSON(e,f);u!==s&&(o=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new cd(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new cd(s,e,r))}}function $b(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p6(e))return"Blackberry";if(_6(e))return"Webos";if(f6(e))return"Safari";if((e.includes("chrome/")||d6(e))&&!e.includes("edge/"))return"Chrome";if(m6(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function h6(n=Tr()){return/firefox\//i.test(n)}function f6(n=Tr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d6(n=Tr()){return/crios\//i.test(n)}function g6(n=Tr()){return/iemobile/i.test(n)}function m6(n=Tr()){return/android/i.test(n)}function p6(n=Tr()){return/blackberry/i.test(n)}function _6(n=Tr()){return/webos/i.test(n)}function oA(n=Tr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rY(n=Tr()){return oA(n)&&!!window.navigator?.standalone}function iY(){return M$()&&document.documentMode===10}function y6(n=Tr()){return oA(n)||m6(n)||_6(n)||p6(n)||/windows phone/i.test(n)||g6(n)}function v6(n,e=[]){let t;switch(n){case"Browser":t=$b(Tr());break;case"Worker":t=`${$b(Tr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Rh}/${r}`}class sY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function aY(n,e={}){return Zd(n,"GET","/v2/passwordPolicy",xx(n,e))}const oY=6;class lY{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oY,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class cY{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wb(this),this.idTokenSubscription=new Wb(this),this.beforeStateQueue=new sY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await cd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gy(this,{idToken:e}),r=await wa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Hs(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!s||s===a)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uy(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$X()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hs(this.app))return Promise.reject(Ec(this));const t=e?Fr(e):null;return t&&Tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hs(this.app)?Promise.reject(Ec(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hs(this.app)?Promise.reject(Ec(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aY(this),t=new lY(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ap("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await nY(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wo(e)||this._popupRedirectResolver;Tt(t,this,"argument-error"),this.redirectPersistenceManager=await cd.create(this,[Wo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Hs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&GX(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ex(n){return Fr(n)}class Wb{constructor(e){this.auth=e,this.observer=null,this.addObserver=D$(t=>this.observer=t)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let lA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uY(n){lA=n}function hY(n){return lA.loadJS(n)}function fY(){return lA.gapiScript}function dY(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function gY(n,e){const t=Zv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(nh(s,e??{}))return i;al(i,"already-initialized")}return t.initialize({options:e})}function mY(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Wo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function pY(n,e,t){const r=Ex(n);Tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=x6(e),{host:a,port:o}=_Y(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},f=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Tt(nh(u,r.config.emulator)&&nh(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Ah(a)?(cI(`${s}//${a}${l}`),uI("Auth",!0)):yY()}function x6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _Y(n){const e=x6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Hb(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Hb(a)}}}function Hb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function yY(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class E6{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $o("not implemented")}_getIdTokenResponse(e){return $o("not implemented")}_linkToIdToken(e,t){return $o("not implemented")}_getReauthenticationResolver(e){return $o("not implemented")}}async function ud(n,e){return o6(n,"POST","/v1/accounts:signInWithIdp",xx(n,e))}const vY="http://localhost";class fh extends E6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):al("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new fh(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return ud(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ud(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ud(e,t)}buildRequest(){const e={requestUri:vY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=op(t)}return e}}class w6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vp extends w6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Jl extends vp{constructor(){super("facebook.com")}static credential(e){return fh._fromParams({providerId:Jl.PROVIDER_ID,signInMethod:Jl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jl.credentialFromTaggedObject(e)}static credentialFromError(e){return Jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jl.credential(e.oauthAccessToken)}catch{return null}}}Jl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jl.PROVIDER_ID="facebook.com";class ec extends vp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fh._fromParams({providerId:ec.PROVIDER_ID,signInMethod:ec.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ec.credentialFromTaggedObject(e)}static credentialFromError(e){return ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ec.credential(t,r)}catch{return null}}}ec.GOOGLE_SIGN_IN_METHOD="google.com";ec.PROVIDER_ID="google.com";class tc extends vp{constructor(){super("github.com")}static credential(e){return fh._fromParams({providerId:tc.PROVIDER_ID,signInMethod:tc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tc.credentialFromTaggedObject(e)}static credentialFromError(e){return tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tc.credential(e.oauthAccessToken)}catch{return null}}}tc.GITHUB_SIGN_IN_METHOD="github.com";tc.PROVIDER_ID="github.com";class nc extends vp{constructor(){super("twitter.com")}static credential(e,t){return fh._fromParams({providerId:nc.PROVIDER_ID,signInMethod:nc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nc.credentialFromTaggedObject(e)}static credentialFromError(e){return nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return nc.credential(t,r)}catch{return null}}}nc.TWITTER_SIGN_IN_METHOD="twitter.com";nc.PROVIDER_ID="twitter.com";async function xY(n,e){return o6(n,"POST","/v1/accounts:signUp",xx(n,e))}class Oc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await wa._fromIdTokenResponse(e,r,i),a=Kb(r);return new Oc({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Kb(r);return new Oc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Kb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function EY(n){if(Hs(n.app))return Promise.reject(Ec(n));const e=Ex(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Oc({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await xY(e,{returnSecureToken:!0}),r=await Oc._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class zy extends Eo{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new zy(e,t,r,i)}}function T6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zy._fromErrorAndOperation(n,s,e,r):s})}async function wY(n,e,t=!1){const r=await Im(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Oc._forOperation(n,"link",r)}async function TY(n,e,t=!1){const{auth:r}=n;if(Hs(r.app))return Promise.reject(Ec(r));const i="reauthenticate";try{const s=await Im(n,T6(r,i,e,n),t);Tt(s.idToken,r,"internal-error");const a=aA(s.idToken);Tt(a,r,"internal-error");const{sub:o}=a;return Tt(n.uid===o,r,"user-mismatch"),Oc._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&al(r,"user-mismatch"),s}}async function SY(n,e,t=!1){if(Hs(n.app))return Promise.reject(Ec(n));const r="signIn",i=await T6(n,r,e),s=await Oc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function IY(n,e,t,r){return Fr(n).onIdTokenChanged(e,t,r)}function AY(n,e,t){return Fr(n).beforeAuthStateChanged(e,t)}function RY(n,e,t,r){return Fr(n).onAuthStateChanged(e,t,r)}function CY(n){return Fr(n).signOut()}const $y="__sak";class S6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($y,"1"),this.storage.removeItem($y),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const PY=1e3,MY=10;class I6 extends S6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);iY()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,MY):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},PY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}I6.type="LOCAL";const bY=I6;class A6 extends S6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}A6.type="SESSION";const R6=A6;function kY(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class wx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new wx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await kY(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wx.receivers=[];function cA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class OY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=cA("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function oo(){return window}function LY(n){oo().location.href=n}function C6(){return typeof oo().WorkerGlobalScope<"u"&&typeof oo().importScripts=="function"}async function NY(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DY(){return navigator?.serviceWorker?.controller||null}function FY(){return C6()?self:null}const P6="firebaseLocalStorageDb",VY=1,Wy="firebaseLocalStorage",M6="fbase_key";class xp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tx(n,e){return n.transaction([Wy],e?"readwrite":"readonly").objectStore(Wy)}function jY(){const n=indexedDB.deleteDatabase(P6);return new xp(n).toPromise()}function UT(){const n=indexedDB.open(P6,VY);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Wy,{keyPath:M6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Wy)?e(r):(r.close(),await jY(),e(await UT()))})})}async function qb(n,e,t){const r=Tx(n,!0).put({[M6]:e,value:t});return new xp(r).toPromise()}async function BY(n,e){const t=Tx(n,!1).get(e),r=await new xp(t).toPromise();return r===void 0?null:r.value}function Xb(n,e){const t=Tx(n,!0).delete(e);return new xp(t).toPromise()}const GY=800,UY=3;class b6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>UY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wx._getInstance(FY()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await NY(),!this.activeServiceWorker)return;this.sender=new OY(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await UT();return await qb(e,$y,"1"),await Xb(e,$y),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>BY(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Tx(i,!1).getAll();return new xp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b6.type="LOCAL";const zY=b6;new yp(3e4,6e4);function $Y(n,e){return e?Wo(e):(Tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class uA extends E6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ud(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ud(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ud(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WY(n){return SY(n.auth,new uA(n),n.bypassAuthState)}function HY(n){const{auth:e,user:t}=n;return Tt(t,e,"internal-error"),TY(t,new uA(n),n.bypassAuthState)}async function KY(n){const{auth:e,user:t}=n;return Tt(t,e,"internal-error"),wY(t,new uA(n),n.bypassAuthState)}class k6{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WY;case"linkViaPopup":case"linkViaRedirect":return KY;case"reauthViaPopup":case"reauthViaRedirect":return HY;default:al(this.auth,"internal-error")}}resolve(e){ol(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ol(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qY=new yp(2e3,1e4);class Wf extends k6{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wf.currentPopupAction&&Wf.currentPopupAction.cancel(),Wf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){ol(this.filter.length===1,"Popup operations only handle one event");const e=cA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ao(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ao(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wf.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ao(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qY.get())};e()}}Wf.currentPopupAction=null;const XY="pendingRedirect",B1=new Map;class YY extends k6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=B1.get(this.auth._key());if(!e){try{const r=await ZY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}B1.set(this.auth._key(),e)}return this.bypassAuthState||B1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZY(n,e){const t=eZ(e),r=JY(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function QY(n,e){B1.set(n._key(),e)}function JY(n){return Wo(n._redirectPersistence)}function eZ(n){return j1(XY,n.config.apiKey,n.name)}async function tZ(n,e,t=!1){if(Hs(n.app))return Promise.reject(Ec(n));const r=Ex(n),i=$Y(r,e),a=await new YY(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const nZ=600*1e3;class rZ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iZ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!O6(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ao(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nZ&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function O6({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function iZ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O6(n);default:return!1}}async function sZ(n,e={}){return Zd(n,"GET","/v1/projects",e)}const aZ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oZ=/^https?/;async function lZ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sZ(n);for(const t of e)try{if(cZ(t))return}catch{}al(n,"unauthorized-domain")}function cZ(n){const e=BT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!oZ.test(t))return!1;if(aZ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const uZ=new yp(3e4,6e4);function Zb(){const n=oo().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hZ(n){return new Promise((e,t)=>{function r(){Zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zb(),t(ao(n,"network-request-failed"))},timeout:uZ.get()})}if(oo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(oo().gapi?.load)r();else{const i=dY("iframefcb");return oo()[i]=()=>{gapi.load?r():t(ao(n,"network-request-failed"))},hY(`${fY()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw G1=null,e})}let G1=null;function fZ(n){return G1=G1||hZ(n),G1}const dZ=new yp(5e3,15e3),gZ="__/auth/iframe",mZ="emulator/auth/iframe",pZ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_Z=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yZ(n){const e=n.config;Tt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sA(e,mZ):`https://${n.config.authDomain}/${gZ}`,r={apiKey:e.apiKey,appName:n.name,v:Rh},i=_Z.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${op(r).slice(1)}`}async function vZ(n){const e=await fZ(n),t=oo().gapi;return Tt(t,n,"internal-error"),e.open({where:document.body,url:yZ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pZ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ao(n,"network-request-failed"),o=oo().setTimeout(()=>{s(a)},dZ.get());function l(){oo().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}const xZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EZ=500,wZ=600,TZ="_blank",SZ="http://localhost";class Qb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IZ(n,e,t,r=EZ,i=wZ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...xZ,width:r.toString(),height:i.toString(),top:s,left:a},u=Tr().toLowerCase();t&&(o=d6(u)?TZ:t),h6(u)&&(e=e||SZ,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[p,x])=>`${g}${p}=${x},`,"");if(rY(u)&&o!=="_self")return AZ(e||"",o),new Qb(null);const d=window.open(e||"",o,f);Tt(d,n,"popup-blocked");try{d.focus()}catch{}return new Qb(d)}function AZ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const RZ="__/auth/handler",CZ="emulator/auth/handler",PZ=encodeURIComponent("fac");async function Jb(n,e,t,r,i,s){Tt(n.config.authDomain,n,"auth-domain-config-required"),Tt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Rh,eventId:i};if(e instanceof w6){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",N$(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))a[f]=d}if(e instanceof vp){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await n._getAppCheckToken(),u=l?`#${PZ}=${encodeURIComponent(l)}`:"";return`${MZ(n)}?${op(o).slice(1)}${u}`}function MZ({config:n}){return n.emulator?sA(n,CZ):`https://${n.authDomain}/${RZ}`}const r2="webStorageSupport";class bZ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R6,this._completeRedirectFn=tZ,this._overrideRedirectResult=QY}async _openPopup(e,t,r,i){ol(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await Jb(e,t,r,BT(),i);return IZ(e,s,cA())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Jb(e,t,r,BT(),i);return LY(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ol(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vZ(e),r=new rZ(e);return t.register("authEvent",i=>(Tt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(r2,{type:r2},i=>{const s=i?.[0]?.[r2];s!==void 0&&t(!!s),al(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lZ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return y6()||f6()||oA()}}const kZ=bZ;var e3="@firebase/auth",t3="1.12.0";class OZ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function LZ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NZ(n){rh(new Rc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Tt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v6(n)},u=new cY(r,i,s,l);return mY(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),rh(new Rc("auth-internal",e=>{const t=Ex(e.getProvider("auth").getImmediate());return(r=>new OZ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ro(e3,t3,LZ(n)),ro(e3,t3,"esm2020")}const DZ=300,FZ=NN("authIdTokenMaxAge")||DZ;let n3=null;const VZ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>FZ)return;const i=t?.token;n3!==i&&(n3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jZ(n=dI()){const e=Zv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gY(n,{popupRedirectResolver:kZ,persistence:[zY,bY,R6]}),r=NN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=VZ(s.toString());AY(t,a,()=>a(t.currentUser)),IY(t,o=>a(o))}}const i=kN("auth");return i&&pY(t,`http://${i}`),t}function BZ(){return document.getElementsByTagName("head")?.[0]??document}uY({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ao("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",BZ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NZ("Browser");const L6="firebasestorage.googleapis.com",GZ="storageBucket",UZ=120*1e3,zZ=600*1e3;class wo extends Eo{constructor(e,t,r=0){super(i2(e),`Firebase Storage: ${t} (${i2(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wo.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return i2(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var go;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(go||(go={}));function i2(n){return"storage/"+n}function $Z(){const n="An unknown error occurred, please check the error payload for server response.";return new wo(go.UNKNOWN,n)}function WZ(){return new wo(go.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HZ(){return new wo(go.CANCELED,"User canceled the upload/download.")}function KZ(n){return new wo(go.INVALID_URL,"Invalid URL '"+n+"'.")}function qZ(n){return new wo(go.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function r3(n){return new wo(go.INVALID_ARGUMENT,n)}function N6(){return new wo(go.APP_DELETED,"The Firebase app was deleted.")}function XZ(n){return new wo(go.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ta{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ta.makeFromUrl(e,t)}catch{return new Ta(e,"")}if(r.path==="")return r;throw qZ(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const f="v[A-Za-z0-9_]+",d=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${f}/b/${i}/o${g}`,"i"),x={bucket:1,path:3},v=t===L6?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",R=new RegExp(`^https?://${v}/${i}/${E}`,"i"),C=[{regex:o,indices:l,postModify:s},{regex:p,indices:x,postModify:u},{regex:R,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<C.length;O++){const N=C[O],z=N.regex.exec(e);if(z){const M=z[N.indices.bucket];let P=z[N.indices.path];P||(P=""),r=new Ta(M,P),N.postModify(r);break}}if(r==null)throw KZ(e);return r}}class YZ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ZZ(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function f(...E){u||(u=!0,e.apply(null,E))}function d(E){i=setTimeout(()=>{i=null,n(p,l())},E)}function g(){s&&clearTimeout(s)}function p(E,...R){if(u){g();return}if(E){g(),f.call(null,E,...R);return}if(l()||a){g(),f.call(null,E,...R);return}r<64&&(r*=2);let C;o===1?(o=2,C=0):C=(r+Math.random())*1e3,d(C)}let x=!1;function v(E){x||(x=!0,g(),!u&&(i!==null?(E||(o=2),clearTimeout(i),d(0)):E||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,v(!0)},t),v}function QZ(n){n(!1)}function JZ(n){return n!==void 0}function i3(n,e,t,r){if(r<e)throw r3(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw r3(`Invalid value for '${n}'. Expected ${t} or less.`)}function eQ(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Hy;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Hy||(Hy={}));function tQ(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class nQ{constructor(e,t,r,i,s,a,o,l,u,f,d,g=!0,p=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=d,this.retry=g,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,v)=>{this.resolve_=x,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new s1(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Hy.NO_ERROR,l=s.getStatus();if(!o||tQ(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Hy.ABORT;r(!1,new s1(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new s1(u,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());JZ(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=$Z();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?N6():HZ();a(l)}else{const l=WZ();a(l)}};this.canceled_?t(!1,new s1(!1,null,!0)):this.backoffId_=ZZ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QZ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class s1{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function rQ(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function iQ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sQ(n,e){e&&(n["X-Firebase-GMPID"]=e)}function aQ(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function oQ(n,e,t,r,i,s,a=!0,o=!1){const l=eQ(n.urlParams),u=n.url+l,f=Object.assign({},n.headers);return sQ(f,e),rQ(f,t),iQ(f,s),aQ(f,r),new nQ(u,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,o)}function lQ(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function cQ(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class Ky{constructor(e,t){this._service=e,t instanceof Ta?this._location=t:this._location=Ta.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ky(e,t)}get root(){const e=new Ta(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cQ(this._location.path)}get storage(){return this._service}get parent(){const e=lQ(this._location.path);if(e===null)return null;const t=new Ta(this._location.bucket,e);return new Ky(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw XZ(e)}}function s3(n,e){const t=e?.[GZ];return t==null?null:Ta.makeFromBucketSpec(t,n)}function uQ(n,e,t,r={}){n.host=`${e}:${t}`;const i=Ah(e);i&&(cI(`https://${n.host}/b`),uI("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:DN(s,n.app.options.projectId))}class hQ{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=L6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UZ,this._maxUploadRetryTime=zZ,this._requests=new Set,i!=null?this._bucket=Ta.makeFromBucketSpec(i,this._host):this._bucket=s3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ta.makeFromBucketSpec(this._url,e):this._bucket=s3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Hs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ky(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new YZ(N6());{const a=oQ(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const a3="@firebase/storage",o3="0.14.0";const D6="storage";function fQ(n=dI(),e){n=Fr(n);const r=Zv(n,D6).getImmediate({identifier:e}),i=ON("storage");return i&&dQ(r,...i),r}function dQ(n,e,t,r={}){uQ(n,e,t,r)}function gQ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hQ(t,r,i,e,Rh)}function mQ(){rh(new Rc(D6,gQ,"PUBLIC").setMultipleInstances(!0)),ro(a3,o3,""),ro(a3,o3,"esm2020")}mQ();const pQ={apiKey:"REPLACE_WITH_YOUR_API_KEY",authDomain:"your-project.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"},hA=zN(pQ),s2=jZ(hA),gg=gX(hA);fQ(hA);mX(gg).catch(n=>{n.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const _Q=xo()(Ih((n,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async t=>{n(r=>{r.loading=!0});try{const r=CX(Lb(gg,"vondsten"),PX("userId","==",t)),s=(await LX(r)).docs.map(a=>({id:a.id,...a.data()}));n(a=>{a.vondsten=s,a.loading=!1})}catch(r){n(i=>{i.error=r.message,i.loading=!1})}},addVondst:async t=>{const r=new Date().toISOString(),i={...t,createdAt:r,updatedAt:r},s=await FX(Lb(gg,"vondsten"),i);return n(a=>{a.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(t,r)=>{const i=VT(gg,"vondsten",t);await NX(i,{...r,updatedAt:new Date().toISOString()}),n(s=>{const a=s.vondsten.findIndex(o=>o.id===t);a!==-1&&(s.vondsten[a]={...s.vondsten[a],...r})})},deleteVondst:async t=>{await DX(VT(gg,"vondsten",t)),n(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==t)})}}))),yQ={};function vQ(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=t.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const Am=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return Am(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return Am(r)(t)}}}},xQ=(n,e)=>(t,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,R)=>({...R,...E}),...e},a=!1;const o=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return n((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...E)},r,i);const f=Am(s.serialize),d=()=>{const E=s.partialize({...r()});let R;const S=f({state:E,version:s.version}).then(C=>u.setItem(s.name,C)).catch(C=>{R=C});if(R)throw R;return S},g=i.setState;i.setState=(E,R)=>{g(E,R),d()};const p=n((...E)=>{t(...E),d()},r,i);let x;const v=()=>{var E;if(!u)return;a=!1,o.forEach(S=>S(r()));const R=((E=s.onRehydrateStorage)==null?void 0:E.call(s,r()))||void 0;return Am(u.getItem.bind(u))(s.name).then(S=>{if(S)return s.deserialize(S)}).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==s.version){if(s.migrate)return s.migrate(S.state,S.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return S.state}).then(S=>{var C;return x=s.merge(S,(C=r())!=null?C:p),t(x,!0),d()}).then(()=>{R?.(x,void 0),a=!0,l.forEach(S=>S(x))}).catch(S=>{R?.(void 0,S)})};return i.persist={setOptions:E=>{s={...s,...E},E.getStorage&&(u=E.getStorage())},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:E=>(o.add(E),()=>{o.delete(E)}),onFinishHydration:E=>(l.add(E),()=>{l.delete(E)})},v(),x||p},EQ=(n,e)=>(t,r,i)=>{let s={storage:vQ(()=>localStorage),partialize:v=>v,version:0,merge:(v,E)=>({...E,...v}),...e},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...v)},r,i);const f=()=>{const v=s.partialize({...r()});return u.setItem(s.name,{state:v,version:s.version})},d=i.setState;i.setState=(v,E)=>{d(v,E),f()};const g=n((...v)=>{t(...v),f()},r,i);i.getInitialState=()=>g;let p;const x=()=>{var v,E;if(!u)return;a=!1,o.forEach(S=>{var C;return S((C=r())!=null?C:g)});const R=((E=s.onRehydrateStorage)==null?void 0:E.call(s,(v=r())!=null?v:g))||void 0;return Am(u.getItem.bind(u))(s.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==s.version){if(s.migrate)return[!0,s.migrate(S.state,S.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var C;const[O,N]=S;if(p=s.merge(N,(C=r())!=null?C:g),t(p,!0),O)return f()}).then(()=>{R?.(p,void 0),p=r(),a=!0,l.forEach(S=>S(p))}).catch(S=>{R?.(void 0,S)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>a,onHydrate:v=>(o.add(v),()=>{o.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},s.skipHydration||x(),p||g},wQ=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((yQ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),xQ(n,e)):EQ(n,e),fA=wQ,mo=xo()(fA(n=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,headingUpMode:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!0,fontSize:"xs",setDefaultBackground:e=>n({defaultBackground:e}),setShowScaleBar:e=>n({showScaleBar:e}),setGpsAutoStart:e=>n({gpsAutoStart:e}),setHeadingUpMode:e=>n({headingUpMode:e}),setShowAccuracyCircle:e=>n({showAccuracyCircle:e}),setHapticFeedback:e=>n({hapticFeedback:e}),setVondstenLocalOnly:e=>n({vondstenLocalOnly:e}),setShowVondstButton:e=>n({showVondstButton:e}),setFontSize:e=>n({fontSize:e})}),{name:"detectorapp-settings"})),a2=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen"],isBuiltIn:!0},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","AMK Steentijd"],isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Mid vroeg",icon:"Layers",layers:["Romeinse wegen","AMK Romeins","AMK Vroege ME"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Mid laat - Nieuwe tijd",icon:"Grid",layers:["Kadastrale Grenzen","AMK Late ME"],isBuiltIn:!1},{id:"woii-militair",name:"WOII en Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur","AMK Monumenten"],isBuiltIn:!1}],l3=["Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","Religieus Erfgoed","UIKAV Punten","UIKAV Vlakken","UIKAV Buffer","UIKAV Expert","UIKAV Indeling","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],F6=xo()(fA((n,e)=>({presets:[...a2].map(t=>({...t,isBuiltIn:t.id==="detectie"})),applyPreset:t=>{const r=e().presets.find(s=>s.id===t);if(!r)return;const i=ei.getState();l3.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),console.log(` Preset toegepast: ${r.name}`)},createPreset:(t,r)=>{const i=ei.getState(),s=Object.entries(i.visible).filter(([o,l])=>l&&l3.includes(o)).map(([o])=>o),a={id:`custom-${Date.now()}`,name:t,icon:r,layers:s,isBuiltIn:!1};n(o=>({presets:[...o.presets,a]})),console.log(` Preset aangemaakt: ${t} met ${s.length} lagen`)},updatePreset:(t,r)=>{n(i=>({presets:i.presets.map(s=>s.id===t&&!s.isBuiltIn?{...s,...r}:s)}))},deletePreset:t=>{n(r=>({presets:r.presets.filter(i=>i.id!==t||i.isBuiltIn)}))},resetToDefaults:()=>{n({presets:[...a2]})}}),{name:"detectorapp-presets",version:4,migrate:(n,e)=>e<4?{presets:[...a2]}:n}));function TQ({target:n,viewOptions:e}){const t=ve.useRef(null),r=ve.useRef(null),i=ti(a=>a.setMap),s=mo(a=>a.showScaleBar);return ve.useEffect(()=>{if(!t.current){const a={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},o=new jz({target:n,controls:[],view:new Za({center:Sc(a.center),zoom:a.zoom,rotation:a.rotation,minZoom:a.minZoom,maxZoom:a.maxZoom})});t.current=o,i(o),window.__olMap=o}return()=>{t.current&&(t.current.setTarget(void 0),i(null),window.__olMap=null)}},[n,e,i]),ve.useEffect(()=>{const a=t.current;a&&(s?r.current||(r.current=new Uz({units:"metric",bar:!1,text:!0,minWidth:80}),a.addControl(r.current)):r.current&&(a.removeControl(r.current),r.current=null))},[s]),t.current}const c3=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function SQ(){const n=ve.useRef(null),e=ve.useRef(!1);TQ({target:"map"});const t=ti(d=>d.map),r=ei(d=>d.registerLayer),i=ei(d=>d.setLayerVisibility),s=mo(d=>d.defaultBackground);ve.useEffect(()=>{if(!t){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const d=new vu({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new iz}),g=new vu({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new Lf({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),p=new vu({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new Lf({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:" Esri, Maxar, Earthstar Geographics",maxZoom:19})}),x=new vu({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new Lf({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),v=new vu({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new Lf({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),E=new vu({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new Lf({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});t.addLayer(d),t.addLayer(g),t.addLayer(p),t.addLayer(x),t.addLayer(v),t.addLayer(E),console.log(" Base layers added:",{osm:d.getVisible(),cartodb:g.getVisible(),satellite:p.getVisible()}),r("OpenStreetMap",d),r("CartoDB (licht)",g),r("Luchtfoto",p),r("Labels Overlay",x),r("TMK 1850",v),r("Bonnebladen 1900",E),t.updateSize(),console.log(" Map size:",t.getSize()),console.log(" Map center:",t.getView().getCenter()),console.log(" Map zoom:",t.getView().getZoom()),a()},[t,r]);async function a(){if(!t){console.error(" Cannot load layers: map is null");return}const d=m$();console.log(` Loading ${d.length} immediate-load layers (WMS/Tile)...`);const g=await Promise.allSettled(d.map(async x=>{try{const v=await x.factory();return v?{name:x.name,layer:v}:null}catch(v){return console.warn(` Failed to create ${x.name}:`,v),null}}));let p=0;g.forEach(x=>{if(x.status==="fulfilled"&&x.value){const{name:v,layer:E}=x.value;t.addLayer(E),r(v,E),p++,console.log(`   ${v}`)}}),console.log(` Immediate layers loaded: ${p}/${d.length}`),console.log(` Total layers on map: ${t.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}ve.useEffect(()=>{if(!t||e.current)return;const d=setTimeout(()=>{const g=s||"CartoDB (licht)";c3.forEach(p=>{i(p,!1)}),c3.includes(g)?i(g,!0):i("CartoDB (licht)",!0),e.current=!0,console.log(` Default background: ${g}`)},100);return()=>clearTimeout(d)},[t,s,i]);const o=mo(d=>d.gpsAutoStart),l=Mn(d=>d.startTracking),u=ve.useRef(!1);ve.useEffect(()=>{if(!(!t||u.current)&&o){const d=setTimeout(()=>{l(),u.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(d)}},[t,o,l]);const f={width:"100%",height:"100vh"};return T.jsx("div",{id:"map",ref:n,style:f})}const dA=ve.createContext({});function gA(n){const e=ve.useRef(null);return e.current===null&&(e.current=n()),e.current}const Sx=ve.createContext(null),mA=ve.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class IQ extends ve.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function AQ({children:n,isPresent:e}){const t=ve.useId(),r=ve.useRef(null),i=ve.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=ve.useContext(mA);return ve.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=t;const f=document.createElement("style");return s&&(f.nonce=s),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),T.jsx(IQ,{isPresent:e,childRef:r,sizeRef:i,children:ve.cloneElement(n,{ref:r})})}const RQ=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=gA(CQ),l=ve.useId(),u=ve.useCallback(d=>{o.set(d,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),f=ve.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),u]:[t,u]);return ve.useMemo(()=>{o.forEach((d,g)=>o.set(g,!1))},[t]),ve.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),a==="popLayout"&&(n=T.jsx(AQ,{isPresent:t,children:n})),T.jsx(Sx.Provider,{value:f,children:n})};function CQ(){return new Map}function V6(n=!0){const e=ve.useContext(Sx);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=ve.useId();ve.useEffect(()=>{n&&i(s)},[n]);const a=ve.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const a1=n=>n.key||"";function u3(n){const e=[];return ve.Children.forEach(n,t=>{ve.isValidElement(t)&&e.push(t)}),e}const pA=typeof window<"u",j6=pA?ve.useLayoutEffect:ve.useEffect,Ma=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=V6(a),u=ve.useMemo(()=>u3(n),[n]),f=a&&!o?[]:u.map(a1),d=ve.useRef(!0),g=ve.useRef(u),p=gA(()=>new Map),[x,v]=ve.useState(u),[E,R]=ve.useState(u);j6(()=>{d.current=!1,g.current=u;for(let O=0;O<E.length;O++){const N=a1(E[O]);f.includes(N)?p.delete(N):p.get(N)!==!0&&p.set(N,!1)}},[E,f.length,f.join("-")]);const S=[];if(u!==x){let O=[...u];for(let N=0;N<E.length;N++){const z=E[N],M=a1(z);f.includes(M)||(O.splice(N,0,z),S.push(z))}s==="wait"&&S.length&&(O=S),R(u3(O)),v(u);return}const{forceRender:C}=ve.useContext(dA);return T.jsx(T.Fragment,{children:E.map(O=>{const N=a1(O),z=a&&!o?!1:u===E||f.includes(N),M=()=>{if(p.has(N))p.set(N,!0);else return;let P=!0;p.forEach(b=>{b||(P=!1)}),P&&(C?.(),R(g.current),a&&l?.(),r&&r())};return T.jsx(RQ,{isPresent:z,initial:!d.current||t?void 0:!1,custom:z?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:z?void 0:M,children:O},N)})})},Is=n=>n;let B6=Is;function _A(n){let e;return()=>(e===void 0&&(e=n()),e)}const Vd=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Qo=n=>n*1e3,Jo=n=>n/1e3,PQ={useManualTiming:!1};function MQ(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),n()),u(a)}const l={schedule:(u,f=!1,d=!1)=>{const p=d&&r?e:t;return f&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{t.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const o1=["read","resolveKeyframes","update","preRender","render","postRender"],bQ=40;function G6(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=o1.reduce((R,S)=>(R[S]=MQ(s),R),{}),{read:o,resolveKeyframes:l,update:u,preRender:f,render:d,postRender:g}=a,p=()=>{const R=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,bQ),1),i.timestamp=R,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),f.process(i),d.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(p))},x=()=>{t=!0,r=!0,i.isProcessing||n(p)};return{schedule:o1.reduce((R,S)=>{const C=a[S];return R[S]=(O,N=!1,z=!1)=>(t||x(),C.schedule(O,N,z)),R},{}),cancel:R=>{for(let S=0;S<o1.length;S++)a[o1[S]].cancel(R)},state:i,steps:a}}const{schedule:An,cancel:Lc,state:Kr,steps:o2}=G6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Is,!0),U6=ve.createContext({strict:!1}),h3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jd={};for(const n in h3)jd[n]={isEnabled:e=>h3[n].some(t=>!!e[t])};function kQ(n){for(const e in n)jd[e]={...jd[e],...n[e]}}const OQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qy(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||OQ.has(n)}let z6=n=>!qy(n);function LQ(n){n&&(z6=e=>e.startsWith("on")?!qy(e):n(e))}try{LQ(require("@emotion/is-prop-valid").default)}catch{}function NQ(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(z6(i)||t===!0&&qy(i)||!e&&!qy(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function DQ(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const Ix=ve.createContext({});function Rm(n){return typeof n=="string"||Array.isArray(n)}function Ax(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const yA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vA=["initial",...yA];function Rx(n){return Ax(n.animate)||vA.some(e=>Rm(n[e]))}function $6(n){return!!(Rx(n)||n.variants)}function FQ(n,e){if(Rx(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Rm(t)?t:void 0,animate:Rm(r)?r:void 0}}return n.inherit!==!1?e:{}}function VQ(n){const{initial:e,animate:t}=FQ(n,ve.useContext(Ix));return ve.useMemo(()=>({initial:e,animate:t}),[f3(e),f3(t)])}function f3(n){return Array.isArray(n)?n.join(" "):n}const jQ=Symbol.for("motionComponentSymbol");function Hf(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function BQ(n,e,t){return ve.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Hf(t)&&(t.current=r))},[e])}const xA=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),GQ="framerAppearId",W6="data-"+xA(GQ),{schedule:EA}=G6(queueMicrotask,!1),H6=ve.createContext({});function UQ(n,e,t,r,i){var s,a;const{visualElement:o}=ve.useContext(Ix),l=ve.useContext(U6),u=ve.useContext(Sx),f=ve.useContext(mA).reducedMotion,d=ve.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,p=ve.useContext(H6);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&zQ(d.current,t,i,p);const x=ve.useRef(!1);ve.useInsertionEffect(()=>{g&&x.current&&g.update(t,u)});const v=t[W6],E=ve.useRef(!!v&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,v))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,v)));return j6(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),EA.render(g.render),E.current&&g.animationState&&g.animationState.animateChanges())}),ve.useEffect(()=>{g&&(!E.current&&g.animationState&&g.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)===null||R===void 0||R.call(window,v)}),E.current=!1))}),g}function zQ(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:K6(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Hf(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function K6(n){if(n)return n.options.allowProjection!==!1?n.projection:K6(n.parent)}function $Q({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,a;n&&kQ(n);function o(u,f){let d;const g={...ve.useContext(mA),...u,layoutId:WQ(u)},{isStatic:p}=g,x=VQ(u),v=r(u,p);if(!p&&pA){HQ();const E=KQ(g);d=E.MeasureLayout,x.visualElement=UQ(i,v,g,e,E.ProjectionNode)}return T.jsxs(Ix.Provider,{value:x,children:[d&&x.visualElement?T.jsx(d,{visualElement:x.visualElement,...g}):null,t(i,u,BQ(v,x.visualElement,f),v,p,x.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=ve.forwardRef(o);return l[jQ]=i,l}function WQ({layoutId:n}){const e=ve.useContext(dA).id;return e&&n!==void 0?e+"-"+n:n}function HQ(n,e){ve.useContext(U6).strict}function KQ(n){const{drag:e,layout:t}=jd;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const qQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wA(n){return typeof n!="string"||n.includes("-")?!1:!!(qQ.indexOf(n)>-1||/[A-Z]/u.test(n))}function d3(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function TA(n,e,t,r){if(typeof e=="function"){const[i,s]=d3(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=d3(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const zT=n=>Array.isArray(n),XQ=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),YQ=n=>zT(n)?n[n.length-1]||0:n,mi=n=>!!(n&&n.getVelocity);function U1(n){const e=mi(n)?n.get():n;return XQ(e)?e.toValue():e}function ZQ({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const a={latestValues:QQ(r,i,s,n),renderState:e()};return t&&(a.onMount=o=>t({props:r,current:o,...a}),a.onUpdate=o=>t(o)),a}const q6=n=>(e,t)=>{const r=ve.useContext(Ix),i=ve.useContext(Sx),s=()=>ZQ(n,e,r,i);return t?s():gA(s)};function QQ(n,e,t,r){const i={},s=r(n,{});for(const g in s)i[g]=U1(s[g]);let{initial:a,animate:o}=n;const l=Rx(n),u=$6(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const d=f?o:a;if(d&&typeof d!="boolean"&&!Ax(d)){const g=Array.isArray(d)?d:[d];for(let p=0;p<g.length;p++){const x=TA(n,g[p]);if(x){const{transitionEnd:v,transition:E,...R}=x;for(const S in R){let C=R[S];if(Array.isArray(C)){const O=f?C.length-1:0;C=C[O]}C!==null&&(i[S]=C)}for(const S in v)i[S]=v[S]}}}return i}const Qd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mh=new Set(Qd),X6=n=>e=>typeof e=="string"&&e.startsWith(n),Y6=X6("--"),JQ=X6("var(--"),SA=n=>JQ(n)?eJ.test(n.split("/*")[0].trim()):!1,eJ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Z6=(n,e)=>e&&typeof n=="number"?e.transform(n):n,ll=(n,e,t)=>t>e?e:t<n?n:t,Jd={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Cm={...Jd,transform:n=>ll(0,1,n)},l1={...Jd,default:1},Ep=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Yl=Ep("deg"),lo=Ep("%"),yt=Ep("px"),tJ=Ep("vh"),nJ=Ep("vw"),g3={...lo,parse:n=>lo.parse(n)/100,transform:n=>lo.transform(n*100)},rJ={borderWidth:yt,borderTopWidth:yt,borderRightWidth:yt,borderBottomWidth:yt,borderLeftWidth:yt,borderRadius:yt,radius:yt,borderTopLeftRadius:yt,borderTopRightRadius:yt,borderBottomRightRadius:yt,borderBottomLeftRadius:yt,width:yt,maxWidth:yt,height:yt,maxHeight:yt,top:yt,right:yt,bottom:yt,left:yt,padding:yt,paddingTop:yt,paddingRight:yt,paddingBottom:yt,paddingLeft:yt,margin:yt,marginTop:yt,marginRight:yt,marginBottom:yt,marginLeft:yt,backgroundPositionX:yt,backgroundPositionY:yt},iJ={rotate:Yl,rotateX:Yl,rotateY:Yl,rotateZ:Yl,scale:l1,scaleX:l1,scaleY:l1,scaleZ:l1,skew:Yl,skewX:Yl,skewY:Yl,distance:yt,translateX:yt,translateY:yt,translateZ:yt,x:yt,y:yt,z:yt,perspective:yt,transformPerspective:yt,opacity:Cm,originX:g3,originY:g3,originZ:yt},m3={...Jd,transform:Math.round},IA={...rJ,...iJ,zIndex:m3,size:yt,fillOpacity:Cm,strokeOpacity:Cm,numOctaves:m3},sJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aJ=Qd.length;function oJ(n,e,t){let r="",i=!0;for(let s=0;s<aJ;s++){const a=Qd[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=Z6(o,IA[a]);if(!l){i=!1;const f=sJ[a]||a;r+=`${f}(${u}) `}t&&(e[a]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function AA(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(Mh.has(l)){a=!0;continue}else if(Y6(l)){i[l]=u;continue}else{const f=Z6(u,IA[l]);l.startsWith("origin")?(o=!0,s[l]=f):r[l]=f}}if(e.transform||(a||t?r.transform=oJ(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:f=0}=s;r.transformOrigin=`${l} ${u} ${f}`}}const lJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},cJ={offset:"strokeDashoffset",array:"strokeDasharray"};function uJ(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?lJ:cJ;n[s.offset]=yt.transform(-r);const a=yt.transform(e),o=yt.transform(t);n[s.array]=`${a} ${o}`}function p3(n,e,t){return typeof n=="string"?n:yt.transform(e+t*n)}function hJ(n,e,t){const r=p3(e,n.x,n.width),i=p3(t,n.y,n.height);return`${r} ${i}`}function RA(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},f,d){if(AA(n,u,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:p,dimensions:x}=n;g.transform&&(x&&(p.transform=g.transform),delete g.transform),x&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=hJ(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),a!==void 0&&uJ(g,a,o,l,!1)}const CA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Q6=()=>({...CA(),attrs:{}}),PA=n=>typeof n=="string"&&n.toLowerCase()==="svg";function J6(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const e8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function t8(n,e,t,r){J6(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(e8.has(i)?i:xA(i),e.attrs[i])}const Xy={};function fJ(n){Object.assign(Xy,n)}function n8(n,{layout:e,layoutId:t}){return Mh.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Xy[n]||n==="opacity")}function MA(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(mi(i[a])||e.style&&mi(e.style[a])||n8(a,n)||((r=t?.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function r8(n,e,t){const r=MA(n,e,t);for(const i in n)if(mi(n[i])||mi(e[i])){const s=Qd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function dJ(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const _3=["x","y","width","height","cx","cy","r"],gJ={useVisualState:q6({scrapeMotionValuesFromProps:r8,createRenderState:Q6,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const o in i)if(Mh.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<_3.length;o++){const l=_3[o];n[l]!==e[l]&&(a=!0)}a&&An.read(()=>{dJ(t,r),An.render(()=>{RA(r,i,PA(t.tagName),n.transformTemplate),t8(t,r)})})}})},mJ={useVisualState:q6({scrapeMotionValuesFromProps:MA,createRenderState:CA})};function i8(n,e,t){for(const r in e)!mi(e[r])&&!n8(r,t)&&(n[r]=e[r])}function pJ({transformTemplate:n},e){return ve.useMemo(()=>{const t=CA();return AA(t,e,n),Object.assign({},t.vars,t.style)},[e])}function _J(n,e){const t=n.style||{},r={};return i8(r,t,n),Object.assign(r,pJ(n,e)),r}function yJ(n,e){const t={},r=_J(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function vJ(n,e,t,r){const i=ve.useMemo(()=>{const s=Q6();return RA(s,e,PA(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};i8(s,n.style,n),i.style={...s,...i.style}}return i}function xJ(n=!1){return(t,r,i,{latestValues:s},a)=>{const l=(wA(t)?vJ:yJ)(r,s,a,t),u=NQ(r,typeof t=="string",n),f=t!==ve.Fragment?{...u,...l,ref:i}:{},{children:d}=r,g=ve.useMemo(()=>mi(d)?d.get():d,[d]);return ve.createElement(t,{...f,children:g})}}function EJ(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...wA(r)?gJ:mJ,preloadedFeatures:n,useRender:xJ(i),createVisualElement:e,Component:r};return $Q(a)}}function s8(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function Cx(n,e,t){const r=n.getProps();return TA(r,e,t!==void 0?t:r.custom,n)}const wJ=_A(()=>window.ScrollTimeline!==void 0);class TJ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(wJ()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class SJ extends TJ{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function bA(n,e){return n?n[e]||n.default||n:void 0}const $T=2e4;function a8(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<$T;)e+=t,r=n.next(e);return e>=$T?1/0:e}function kA(n){return typeof n=="function"}function y3(n,e){n.timeline=e,n.onfinish=null}const OA=n=>Array.isArray(n)&&typeof n[0]=="number",IJ={linearEasing:void 0};function AJ(n,e){const t=_A(n);return()=>{var r;return(r=IJ[e])!==null&&r!==void 0?r:t()}}const Yy=AJ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),o8=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(Vd(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function l8(n){return!!(typeof n=="function"&&Yy()||!n||typeof n=="string"&&(n in WT||Yy())||OA(n)||Array.isArray(n)&&n.every(l8))}const mg=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,WT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mg([0,.65,.55,1]),circOut:mg([.55,0,1,.45]),backIn:mg([.31,.01,.66,-.59]),backOut:mg([.33,1.53,.69,.99])};function c8(n,e){if(n)return typeof n=="function"&&Yy()?o8(n,e):OA(n)?mg(n):Array.isArray(n)?n.map(t=>c8(t,e)||WT.easeOut):WT[n]}const ma={x:!1,y:!1};function u8(){return ma.x||ma.y}function RJ(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function h8(n,e){const t=RJ(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function v3(n){return e=>{e.pointerType==="touch"||u8()||n(e)}}function CJ(n,e,t={}){const[r,i,s]=h8(n,t),a=v3(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const f=v3(d=>{u(d),l.removeEventListener("pointerleave",f)});l.addEventListener("pointerleave",f,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const f8=(n,e)=>e?n===e?!0:f8(n,e.parentElement):!1,LA=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,PJ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function MJ(n){return PJ.has(n.tagName)||n.tabIndex!==-1}const pg=new WeakSet;function x3(n){return e=>{e.key==="Enter"&&n(e)}}function l2(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const bJ=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=x3(()=>{if(pg.has(t))return;l2(t,"down");const i=x3(()=>{l2(t,"up")}),s=()=>l2(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function E3(n){return LA(n)&&!u8()}function kJ(n,e,t={}){const[r,i,s]=h8(n,t),a=o=>{const l=o.currentTarget;if(!E3(o)||pg.has(l))return;pg.add(l);const u=e(o),f=(p,x)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",g),!(!E3(p)||!pg.has(l))&&(pg.delete(l),typeof u=="function"&&u(p,{success:x}))},d=p=>{f(p,t.useGlobalTarget||f8(l,p.target))},g=p=>{f(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!MJ(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>bJ(u,i),i)}),s}function OJ(n){return n==="x"||n==="y"?ma[n]?null:(ma[n]=!0,()=>{ma[n]=!1}):ma.x||ma.y?null:(ma.x=ma.y=!0,()=>{ma.x=ma.y=!1})}const d8=new Set(["width","height","top","left","right","bottom",...Qd]);let z1;function LJ(){z1=void 0}const co={now:()=>(z1===void 0&&co.set(Kr.isProcessing||PQ.useManualTiming?Kr.timestamp:performance.now()),z1),set:n=>{z1=n,queueMicrotask(LJ)}};function NA(n,e){n.indexOf(e)===-1&&n.push(e)}function DA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class FA{constructor(){this.subscriptions=[]}add(e){return NA(this.subscriptions,e),()=>DA(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function g8(n,e){return e?n*(1e3/e):0}const w3=30,NJ=n=>!isNaN(parseFloat(n));class DJ{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=co.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=co.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=NJ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new FA);const r=this.events[e].add(t);return e==="change"?()=>{r(),An.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=co.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>w3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,w3);return g8(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pm(n,e){return new DJ(n,e)}function FJ(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Pm(t))}function VJ(n,e){const t=Cx(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const o=YQ(s[a]);FJ(n,a,o)}}function jJ(n){return!!(mi(n)&&n.add)}function HT(n,e){const t=n.getValue("willChange");if(jJ(t))return t.add(e)}function m8(n){return n.props[W6]}const p8=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,BJ=1e-7,GJ=12;function UJ(n,e,t,r,i){let s,a,o=0;do a=e+(t-e)/2,s=p8(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>BJ&&++o<GJ);return a}function wp(n,e,t,r){if(n===e&&t===r)return Is;const i=s=>UJ(s,0,1,n,t);return s=>s===0||s===1?s:p8(i(s),e,r)}const _8=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,y8=n=>e=>1-n(1-e),v8=wp(.33,1.53,.69,.99),VA=y8(v8),x8=_8(VA),E8=n=>(n*=2)<1?.5*VA(n):.5*(2-Math.pow(2,-10*(n-1))),jA=n=>1-Math.sin(Math.acos(n)),w8=y8(jA),T8=_8(jA),S8=n=>/^0[^.\s]+$/u.test(n);function zJ(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||S8(n):!0}const Lg=n=>Math.round(n*1e5)/1e5,BA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $J(n){return n==null}const WJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,GA=(n,e)=>t=>!!(typeof t=="string"&&WJ.test(t)&&t.startsWith(n)||e&&!$J(t)&&Object.prototype.hasOwnProperty.call(t,e)),I8=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(BA);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},HJ=n=>ll(0,255,n),c2={...Jd,transform:n=>Math.round(HJ(n))},Vu={test:GA("rgb","red"),parse:I8("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+c2.transform(n)+", "+c2.transform(e)+", "+c2.transform(t)+", "+Lg(Cm.transform(r))+")"};function KJ(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const KT={test:GA("#"),parse:KJ,transform:Vu.transform},Kf={test:GA("hsl","hue"),parse:I8("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+lo.transform(Lg(e))+", "+lo.transform(Lg(t))+", "+Lg(Cm.transform(r))+")"},hi={test:n=>Vu.test(n)||KT.test(n)||Kf.test(n),parse:n=>Vu.test(n)?Vu.parse(n):Kf.test(n)?Kf.parse(n):KT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Vu.transform(n):Kf.transform(n)},qJ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function XJ(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(BA))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(qJ))===null||t===void 0?void 0:t.length)||0)>0}const A8="number",R8="color",YJ="var",ZJ="var(",T3="${}",QJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Mm(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(QJ,l=>(hi.test(l)?(r.color.push(s),i.push(R8),t.push(hi.parse(l))):l.startsWith(ZJ)?(r.var.push(s),i.push(YJ),t.push(l)):(r.number.push(s),i.push(A8),t.push(parseFloat(l))),++s,T3)).split(T3);return{values:t,split:o,indexes:r,types:i}}function C8(n){return Mm(n).values}function P8(n){const{split:e,types:t}=Mm(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===A8?s+=Lg(i[a]):o===R8?s+=hi.transform(i[a]):s+=i[a]}return s}}const JJ=n=>typeof n=="number"?0:n;function eee(n){const e=C8(n);return P8(n)(e.map(JJ))}const Nc={test:XJ,parse:C8,createTransformer:P8,getAnimatableNone:eee},tee=new Set(["brightness","contrast","saturate","opacity"]);function nee(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(BA)||[];if(!r)return n;const i=t.replace(r,"");let s=tee.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const ree=/\b([a-z-]*)\(.*?\)/gu,qT={...Nc,getAnimatableNone:n=>{const e=n.match(ree);return e?e.map(nee).join(" "):n}},iee={...IA,color:hi,backgroundColor:hi,outlineColor:hi,fill:hi,stroke:hi,borderColor:hi,borderTopColor:hi,borderRightColor:hi,borderBottomColor:hi,borderLeftColor:hi,filter:qT,WebkitFilter:qT},UA=n=>iee[n];function M8(n,e){let t=UA(n);return t!==qT&&(t=Nc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const see=new Set(["auto","none","0"]);function aee(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!see.has(s)&&Mm(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=M8(t,i)}const S3=n=>n===Jd||n===yt,I3=(n,e)=>parseFloat(n.split(", ")[e]),A3=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return I3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?I3(s[1],n):0}},oee=new Set(["x","y","z"]),lee=Qd.filter(n=>!oee.has(n));function cee(n){const e=[];return lee.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Bd={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:A3(4,13),y:A3(5,14)};Bd.translateX=Bd.x;Bd.translateY=Bd.y;const Wu=new Set;let XT=!1,YT=!1;function b8(){if(YT){const n=Array.from(Wu).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=cee(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}YT=!1,XT=!1,Wu.forEach(n=>n.complete()),Wu.clear()}function k8(){Wu.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(YT=!0)})}function uee(){k8(),b8()}class zA{constructor(e,t,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wu.add(this),XT||(XT=!0,An.read(k8),An.resolveKeyframes(b8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const l=r.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const O8=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),hee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fee(n){const e=hee.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function L8(n,e,t=1){const[r,i]=fee(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return O8(a)?parseFloat(a):a}return SA(i)?L8(i,e,t+1):i}const N8=n=>e=>e.test(n),dee={test:n=>n==="auto",parse:n=>n},D8=[Jd,yt,lo,Yl,nJ,tJ,dee],R3=n=>D8.find(N8(n));class F8 extends zA{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),SA(u))){const f=L8(u,t.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!d8.has(r)||e.length!==2)return;const[i,s]=e,a=R3(i),o=R3(s);if(a!==o)if(S3(a)&&S3(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)zJ(e[i])&&r.push(i);r.length&&aee(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=Bd[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const C3=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Nc.test(n)||n==="0")&&!n.startsWith("url("));function gee(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function mee(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=C3(i,e),o=C3(s,e);return!a||!o?!1:gee(n)||(t==="spring"||kA(t))&&r}const pee=n=>n!==null;function Px(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(pee),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const _ee=40;class V8{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=co.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>_ee?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&uee(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=co.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!mee(e,r,i,s))if(a)this.options.duration=0;else{l&&l(Px(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,t);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...f},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Bn=(n,e,t)=>n+(e-n)*t;function u2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function yee({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=u2(l,o,n+1/3),s=u2(l,o,n),a=u2(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Zy(n,e){return t=>t>0?e:n}const h2=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},vee=[KT,Vu,Kf],xee=n=>vee.find(e=>e.test(n));function P3(n){const e=xee(n);if(!e)return!1;let t=e.parse(n);return e===Kf&&(t=yee(t)),t}const M3=(n,e)=>{const t=P3(n),r=P3(e);if(!t||!r)return Zy(n,e);const i={...t};return s=>(i.red=h2(t.red,r.red,s),i.green=h2(t.green,r.green,s),i.blue=h2(t.blue,r.blue,s),i.alpha=Bn(t.alpha,r.alpha,s),Vu.transform(i))},Eee=(n,e)=>t=>e(n(t)),Tp=(...n)=>n.reduce(Eee),ZT=new Set(["none","hidden"]);function wee(n,e){return ZT.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Tee(n,e){return t=>Bn(n,e,t)}function $A(n){return typeof n=="number"?Tee:typeof n=="string"?SA(n)?Zy:hi.test(n)?M3:Aee:Array.isArray(n)?j8:typeof n=="object"?hi.test(n)?M3:See:Zy}function j8(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>$A(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function See(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=$A(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Iee(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=n.indexes[a][i[a]],l=(t=n.values[o])!==null&&t!==void 0?t:0;r[s]=l,i[a]++}return r}const Aee=(n,e)=>{const t=Nc.createTransformer(e),r=Mm(n),i=Mm(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ZT.has(n)&&!i.values.length||ZT.has(e)&&!r.values.length?wee(n,e):Tp(j8(Iee(r,i),i.values),t):Zy(n,e)};function B8(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Bn(n,e,t):$A(n)(n,e)}const Ree=5;function G8(n,e,t){const r=Math.max(e-Ree,0);return g8(t-n(r),e-r)}const Wn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},f2=.001;function Cee({duration:n=Wn.duration,bounce:e=Wn.bounce,velocity:t=Wn.velocity,mass:r=Wn.mass}){let i,s,a=1-e;a=ll(Wn.minDamping,Wn.maxDamping,a),n=ll(Wn.minDuration,Wn.maxDuration,Jo(n)),a<1?(i=u=>{const f=u*a,d=f*n,g=f-t,p=QT(u,a),x=Math.exp(-d);return f2-g/p*x},s=u=>{const d=u*a*n,g=d*t+t,p=Math.pow(a,2)*Math.pow(u,2)*n,x=Math.exp(-d),v=QT(Math.pow(u,2),a);return(-i(u)+f2>0?-1:1)*((g-p)*x)/v}):(i=u=>{const f=Math.exp(-u*n),d=(u-t)*n+1;return-f2+f*d},s=u=>{const f=Math.exp(-u*n),d=(t-u)*(n*n);return f*d});const o=5/n,l=Mee(i,s,o);if(n=Qo(n),isNaN(l))return{stiffness:Wn.stiffness,damping:Wn.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:n}}}const Pee=12;function Mee(n,e,t){let r=t;for(let i=1;i<Pee;i++)r=r-n(r)/e(r);return r}function QT(n,e){return n*Math.sqrt(1-e*e)}const bee=["duration","bounce"],kee=["stiffness","damping","mass"];function b3(n,e){return e.some(t=>n[t]!==void 0)}function Oee(n){let e={velocity:Wn.velocity,stiffness:Wn.stiffness,damping:Wn.damping,mass:Wn.mass,isResolvedFromDuration:!1,...n};if(!b3(n,kee)&&b3(n,bee))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*ll(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Wn.mass,stiffness:i,damping:s}}else{const t=Cee(n);e={...e,...t,mass:Wn.mass},e.isResolvedFromDuration=!0}return e}function U8(n=Wn.visualDuration,e=Wn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:f,duration:d,velocity:g,isResolvedFromDuration:p}=Oee({...t,velocity:-Jo(t.velocity||0)}),x=g||0,v=u/(2*Math.sqrt(l*f)),E=a-s,R=Jo(Math.sqrt(l/f)),S=Math.abs(E)<5;r||(r=S?Wn.restSpeed.granular:Wn.restSpeed.default),i||(i=S?Wn.restDelta.granular:Wn.restDelta.default);let C;if(v<1){const N=QT(R,v);C=z=>{const M=Math.exp(-v*R*z);return a-M*((x+v*R*E)/N*Math.sin(N*z)+E*Math.cos(N*z))}}else if(v===1)C=N=>a-Math.exp(-R*N)*(E+(x+R*E)*N);else{const N=R*Math.sqrt(v*v-1);C=z=>{const M=Math.exp(-v*R*z),P=Math.min(N*z,300);return a-M*((x+v*R*E)*Math.sinh(P)+N*E*Math.cosh(P))/N}}const O={calculatedDuration:p&&d||null,next:N=>{const z=C(N);if(p)o.done=N>=d;else{let M=0;v<1&&(M=N===0?Qo(x):G8(C,N,z));const P=Math.abs(M)<=r,b=Math.abs(a-z)<=i;o.done=P&&b}return o.value=o.done?a:z,o},toString:()=>{const N=Math.min(a8(O),$T),z=o8(M=>O.next(N*M).value,N,30);return N+"ms "+z}};return O}function k3({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:f}){const d=n[0],g={done:!1,value:d},p=P=>o!==void 0&&P<o||l!==void 0&&P>l,x=P=>o===void 0?l:l===void 0||Math.abs(o-P)<Math.abs(l-P)?o:l;let v=t*e;const E=d+v,R=a===void 0?E:a(E);R!==E&&(v=R-d);const S=P=>-v*Math.exp(-P/r),C=P=>R+S(P),O=P=>{const b=S(P),D=C(P);g.done=Math.abs(b)<=u,g.value=g.done?R:D};let N,z;const M=P=>{p(g.value)&&(N=P,z=U8({keyframes:[g.value,x(g.value)],velocity:G8(C,P,g.value),damping:i,stiffness:s,restDelta:u,restSpeed:f}))};return M(0),{calculatedDuration:null,next:P=>{let b=!1;return!z&&N===void 0&&(b=!0,O(P),M(P)),N!==void 0&&P>=N?z.next(P-N):(!b&&O(P),g)}}}const Lee=wp(.42,0,1,1),Nee=wp(0,0,.58,1),z8=wp(.42,0,.58,1),Dee=n=>Array.isArray(n)&&typeof n[0]!="number",Fee={linear:Is,easeIn:Lee,easeInOut:z8,easeOut:Nee,circIn:jA,circInOut:T8,circOut:w8,backIn:VA,backInOut:x8,backOut:v8,anticipate:E8},O3=n=>{if(OA(n)){B6(n.length===4);const[e,t,r,i]=n;return wp(e,t,r,i)}else if(typeof n=="string")return Fee[n];return n};function Vee(n,e,t){const r=[],i=t||B8,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||Is:e;o=Tp(l,o)}r.push(o)}return r}function jee(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(B6(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Vee(e,r,i),l=o.length,u=f=>{if(a&&f<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(f<n[d+1]);d++);const g=Vd(n[d],n[d+1],f);return o[d](g)};return t?f=>u(ll(n[0],n[s-1],f)):u}function Bee(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Vd(0,e,r);n.push(Bn(t,1,i))}}function Gee(n){const e=[0];return Bee(e,n.length-1),e}function Uee(n,e){return n.map(t=>t*e)}function zee(n,e){return n.map(()=>e||z8).splice(0,n.length-1)}function Qy({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=Dee(r)?r.map(O3):O3(r),s={done:!1,value:e[0]},a=Uee(t&&t.length===e.length?t:Gee(e),n),o=jee(a,e,{ease:Array.isArray(i)?i:zee(e,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const $ee=n=>{const e=({timestamp:t})=>n(t);return{start:()=>An.update(e,!0),stop:()=>Lc(e),now:()=>Kr.isProcessing?Kr.timestamp:co.now()}},Wee={decay:k3,inertia:k3,tween:Qy,keyframes:Qy,spring:U8},Hee=n=>n/100;class WA extends V8{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,a=i?.KeyframeResolver||zA,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=kA(t)?t:Wee[t]||Qy;let l,u;o!==Qy&&typeof e[0]!="number"&&(l=Tp(Hee,B8(e[0],e[1])),e=[0,100]);const f=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=a8(f));const{calculatedDuration:d}=f,g=d+i,p=g*(r+1)-i;return{generator:f,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:g,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:f,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:p,repeatType:x,repeatDelay:v,onUpdate:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const R=this.currentTime-g*(this.speed>=0?1:-1),S=this.speed>=0?R<0:R>f;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let C=this.currentTime,O=s;if(p){const P=Math.min(this.currentTime,f)/d;let b=Math.floor(P),D=P%1;!D&&P>=1&&(D=1),D===1&&b--,b=Math.min(b,p+1),b%2&&(x==="reverse"?(D=1-D,v&&(D-=v/d)):x==="mirror"&&(O=a)),C=ll(0,1,D)*d}const N=S?{done:!1,value:l[0]}:O.next(C);o&&(N.value=o(N.value));let{done:z}=N;!S&&u!==null&&(z=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return M&&i!==void 0&&(N.value=Px(l,this.options,i)),E&&E(N.value),M&&this.finish(),N}get duration(){const{resolved:e}=this;return e?Jo(e.calculatedDuration):0}get time(){return Jo(this.currentTime)}set time(e){e=Qo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Jo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=$ee,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Kee=new Set(["opacity","clipPath","filter","transform"]);function qee(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const f=c8(o,i);return Array.isArray(f)&&(u.easing=f),n.animate(u,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const Xee=_A(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Jy=10,Yee=2e4;function Zee(n){return kA(n.type)||n.type==="spring"||!l8(n.ease)}function Qee(n,e){const t=new WA({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<Yee;)r=t.sample(s),i.push(r.value),s+=Jy;return{times:void 0,keyframes:i,duration:s-Jy,ease:"linear"}}const $8={anticipate:E8,backInOut:x8,circInOut:T8};function Jee(n){return n in $8}class L3 extends V8{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new F8(s,(a,o)=>this.onKeyframesResolved(a,o),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Yy()&&Jee(s)&&(s=$8[s]),Zee(this.options)){const{onComplete:d,onUpdate:g,motionValue:p,element:x,...v}=this.options,E=Qee(e,v);e=E.keyframes,e.length===1&&(e[1]=e[0]),r=E.duration,i=E.times,s=E.ease,a="keyframes"}const f=qee(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(y3(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:d}=this.options;o.set(Px(e,this.options,t)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Jo(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Jo(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Qo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Is;const{animation:r}=t;y3(r,e)}return Is}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:f,onComplete:d,element:g,...p}=this.options,x=new WA({...p,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),v=Qo(this.time);u.setWithVelocity(x.sample(v-Jy).value,x.sample(v).value,Jy)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return Xee()&&r&&Kee.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const ete={type:"spring",stiffness:500,damping:25,restSpeed:10},tte=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),nte={type:"keyframes",duration:.8},rte={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ite=(n,{keyframes:e})=>e.length>2?nte:Mh.has(n)?n.startsWith("scale")?tte(e[1]):ete:rte;function ste({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...f}){return!!Object.keys(f).length}const HA=(n,e,t,r={},i,s)=>a=>{const o=bA(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Qo(l);let f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:i};ste(o)||(f={...f,...ite(n,f)}),f.duration&&(f.duration=Qo(f.duration)),f.repeatDelay&&(f.repeatDelay=Qo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const g=Px(f.keyframes,o);if(g!==void 0)return An.update(()=>{f.onUpdate(g),f.onComplete()}),new SJ([])}return!s&&L3.supports(f)?new L3(f):new WA(f)};function ate({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function W8(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:a=n.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const u=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const d in l){const g=n.getValue(d,(s=n.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||f&&ate(f,d))continue;const x={delay:t,...bA(a||{},d)};let v=!1;if(window.MotionHandoffAnimation){const R=m8(n);if(R){const S=window.MotionHandoffAnimation(R,d,An);S!==null&&(x.startTime=S,v=!0)}}HT(n,d),g.start(HA(d,g,p,n.shouldReduceMotion&&d8.has(d)?{type:!1}:x,n,v));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{An.update(()=>{o&&VJ(n,o)})}),u}function JT(n,e,t={}){var r;const i=Cx(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(W8(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:g}=s;return ote(n,e,f+u,d,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,f]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>f())}else return Promise.all([a(),o(t.delay)])}function ote(n,e,t=0,r=0,i=1,s){const a=[],o=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(n.variantChildren).sort(lte).forEach((u,f)=>{u.notify("AnimationStart",e),a.push(JT(u,e,{...s,delay:t+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function lte(n,e){return n.sortNodePosition(e)}function cte(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>JT(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=JT(n,e,t);else{const i=typeof e=="function"?Cx(n,e,t.custom):e;r=Promise.all(W8(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const ute=vA.length;function H8(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?H8(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<ute;t++){const r=vA[t],i=n.props[r];(Rm(i)||i===!1)&&(e[r]=i)}return e}const hte=[...yA].reverse(),fte=yA.length;function dte(n){return e=>Promise.all(e.map(({animation:t,options:r})=>cte(n,t,r)))}function gte(n){let e=dte(n),t=N3(),r=!0;const i=l=>(u,f)=>{var d;const g=Cx(n,f,l==="exit"?(d=n.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(g){const{transition:p,transitionEnd:x,...v}=g;u={...u,...v,...x}}return u};function s(l){e=l(n)}function a(l){const{props:u}=n,f=H8(n.parent)||{},d=[],g=new Set;let p={},x=1/0;for(let E=0;E<fte;E++){const R=hte[E],S=t[R],C=u[R]!==void 0?u[R]:f[R],O=Rm(C),N=R===l?S.isActive:null;N===!1&&(x=E);let z=C===f[R]&&C!==u[R]&&O;if(z&&r&&n.manuallyAnimateOnMount&&(z=!1),S.protectedKeys={...p},!S.isActive&&N===null||!C&&!S.prevProp||Ax(C)||typeof C=="boolean")continue;const M=mte(S.prevProp,C);let P=M||R===l&&S.isActive&&!z&&O||E>x&&O,b=!1;const D=Array.isArray(C)?C:[C];let B=D.reduce(i(R),{});N===!1&&(B={});const{prevResolvedValues:U={}}=S,V={...U,...B},Ae=Me=>{P=!0,g.has(Me)&&(b=!0,g.delete(Me)),S.needsAnimating[Me]=!0;const he=n.getValue(Me);he&&(he.liveStyle=!1)};for(const Me in V){const he=B[Me],ae=U[Me];if(p.hasOwnProperty(Me))continue;let Ee=!1;zT(he)&&zT(ae)?Ee=!s8(he,ae):Ee=he!==ae,Ee?he!=null?Ae(Me):g.add(Me):he!==void 0&&g.has(Me)?Ae(Me):S.protectedKeys[Me]=!0}S.prevProp=C,S.prevResolvedValues=B,S.isActive&&(p={...p,...B}),r&&n.blockInitialAnimation&&(P=!1),P&&(!(z&&M)||b)&&d.push(...D.map(Me=>({animation:Me,options:{type:R}})))}if(g.size){const E={};g.forEach(R=>{const S=n.getBaseTarget(R),C=n.getValue(R);C&&(C.liveStyle=!0),E[R]=S??null}),d.push({animation:E})}let v=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(d):Promise.resolve()}function o(l,u){var f;if(t[l].isActive===u)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(g=>{var p;return(p=g.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),t[l].isActive=u;const d=a(l);for(const g in t)t[g].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=N3(),r=!0}}}function mte(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!s8(e,n):!1}function _u(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function N3(){return{animate:_u(!0),whileInView:_u(),whileHover:_u(),whileTap:_u(),whileDrag:_u(),whileFocus:_u(),exit:_u()}}class $c{constructor(e){this.isMounted=!1,this.node=e}update(){}}class pte extends $c{constructor(e){super(e),e.animationState||(e.animationState=gte(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ax(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let _te=0;class yte extends $c{constructor(){super(...arguments),this.id=_te++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const vte={animation:{Feature:pte},exit:{Feature:yte}};function bm(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Sp(n){return{point:{x:n.pageX,y:n.pageY}}}const xte=n=>e=>LA(e)&&n(e,Sp(e));function Ng(n,e,t,r){return bm(n,e,xte(t),r)}const D3=(n,e)=>Math.abs(n-e);function Ete(n,e){const t=D3(n.x,e.x),r=D3(n.y,e.y);return Math.sqrt(t**2+r**2)}class K8{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=g2(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=Ete(d.offset,{x:0,y:0})>=3;if(!g&&!p)return;const{point:x}=d,{timestamp:v}=Kr;this.history.push({...x,timestamp:v});const{onStart:E,onMove:R}=this.handlers;g||(E&&E(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,d)},this.handlePointerMove=(d,g)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=d2(g,this.transformPagePoint),An.update(this.updatePoint,!0)},this.handlePointerUp=(d,g)=>{this.end();const{onEnd:p,onSessionEnd:x,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=g2(d.type==="pointercancel"?this.lastMoveEventInfo:d2(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,E),x&&x(d,E)},!LA(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=Sp(e),o=d2(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=Kr;this.history=[{...l,timestamp:u}];const{onSessionStart:f}=t;f&&f(e,g2(o,this.history)),this.removeListeners=Tp(Ng(this.contextWindow,"pointermove",this.handlePointerMove),Ng(this.contextWindow,"pointerup",this.handlePointerUp),Ng(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Lc(this.updatePoint)}}function d2(n,e){return e?{point:e(n.point)}:n}function F3(n,e){return{x:n.x-e.x,y:n.y-e.y}}function g2({point:n},e){return{point:n,delta:F3(n,q8(e)),offset:F3(n,wte(e)),velocity:Tte(e,.1)}}function wte(n){return n[0]}function q8(n){return n[n.length-1]}function Tte(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=q8(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Qo(e)));)t--;if(!r)return{x:0,y:0};const s=Jo(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const X8=1e-4,Ste=1-X8,Ite=1+X8,Y8=.01,Ate=0-Y8,Rte=0+Y8;function Ps(n){return n.max-n.min}function Cte(n,e,t){return Math.abs(n-e)<=t}function V3(n,e,t,r=.5){n.origin=r,n.originPoint=Bn(e.min,e.max,n.origin),n.scale=Ps(t)/Ps(e),n.translate=Bn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Ste&&n.scale<=Ite||isNaN(n.scale))&&(n.scale=1),(n.translate>=Ate&&n.translate<=Rte||isNaN(n.translate))&&(n.translate=0)}function Dg(n,e,t,r){V3(n.x,e.x,t.x,r?r.originX:void 0),V3(n.y,e.y,t.y,r?r.originY:void 0)}function j3(n,e,t){n.min=t.min+e.min,n.max=n.min+Ps(e)}function Pte(n,e,t){j3(n.x,e.x,t.x),j3(n.y,e.y,t.y)}function B3(n,e,t){n.min=e.min-t.min,n.max=n.min+Ps(e)}function Fg(n,e,t){B3(n.x,e.x,t.x),B3(n.y,e.y,t.y)}function Mte(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Bn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Bn(t,n,r.max):Math.min(n,t)),n}function G3(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function bte(n,{top:e,left:t,bottom:r,right:i}){return{x:G3(n.x,t,i),y:G3(n.y,e,r)}}function U3(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function kte(n,e){return{x:U3(n.x,e.x),y:U3(n.y,e.y)}}function Ote(n,e){let t=.5;const r=Ps(n),i=Ps(e);return i>r?t=Vd(e.min,e.max-r,n.min):r>i&&(t=Vd(n.min,n.max-i,e.min)),ll(0,1,t)}function Lte(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const eS=.35;function Nte(n=eS){return n===!1?n=0:n===!0&&(n=eS),{x:z3(n,"left","right"),y:z3(n,"top","bottom")}}function z3(n,e,t){return{min:$3(n,e),max:$3(n,t)}}function $3(n,e){return typeof n=="number"?n:n[e]||0}const W3=()=>({translate:0,scale:1,origin:0,originPoint:0}),qf=()=>({x:W3(),y:W3()}),H3=()=>({min:0,max:0}),Jn=()=>({x:H3(),y:H3()});function zs(n){return[n("x"),n("y")]}function Z8({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Dte({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Fte(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function m2(n){return n===void 0||n===1}function tS({scale:n,scaleX:e,scaleY:t}){return!m2(n)||!m2(e)||!m2(t)}function Su(n){return tS(n)||Q8(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Q8(n){return K3(n.x)||K3(n.y)}function K3(n){return n&&n!=="0%"}function ev(n,e,t){const r=n-t,i=e*r;return t+i}function q3(n,e,t,r,i){return i!==void 0&&(n=ev(n,i,r)),ev(n,t,r)+e}function nS(n,e=0,t=1,r,i){n.min=q3(n.min,e,t,r,i),n.max=q3(n.max,e,t,r,i)}function J8(n,{x:e,y:t}){nS(n.x,e.translate,e.scale,e.originPoint),nS(n.y,t.translate,t.scale,t.originPoint)}const X3=.999999999999,Y3=1.0000000000001;function Vte(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Yf(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,J8(n,a)),r&&Su(s.latestValues)&&Yf(n,s.latestValues))}e.x<Y3&&e.x>X3&&(e.x=1),e.y<Y3&&e.y>X3&&(e.y=1)}function Xf(n,e){n.min=n.min+e,n.max=n.max+e}function Z3(n,e,t,r,i=.5){const s=Bn(n.min,n.max,i);nS(n,e,t,s,r)}function Yf(n,e){Z3(n.x,e.x,e.scaleX,e.scale,e.originX),Z3(n.y,e.y,e.scaleY,e.scale,e.originY)}function eF(n,e){return Z8(Fte(n.getBoundingClientRect(),e))}function jte(n,e,t){const r=eF(n,t),{scroll:i}=e;return i&&(Xf(r.x,i.offset.x),Xf(r.y,i.offset.y)),r}const tF=({current:n})=>n?n.ownerDocument.defaultView:null,Bte=new WeakMap;class Gte{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Jn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Sp(f).point)},s=(f,d)=>{const{drag:g,dragPropagation:p,onDragStart:x}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=OJ(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zs(E=>{let R=this.getAxisMotionValue(E).get()||0;if(lo.test(R)){const{projection:S}=this.visualElement;if(S&&S.layout){const C=S.layout.layoutBox[E];C&&(R=Ps(C)*(parseFloat(R)/100))}}this.originPoint[E]=R}),x&&An.postRender(()=>x(f,d)),HT(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:x,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:E}=d;if(p&&this.currentDirection===null){this.currentDirection=Ute(E),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,E),this.updateAxis("y",d.point,E),this.visualElement.render(),v&&v(f,d)},o=(f,d)=>this.stop(f,d),l=()=>zs(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new K8(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:tF(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&An.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!c1(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Mte(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Hf(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=bte(i.layoutBox,t):this.constraints=!1,this.elastic=Nte(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&zs(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Lte(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Hf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=jte(r,i.root,this.visualElement.getTransformPagePoint());let a=kte(i.layout.layoutBox,s);if(t){const o=t(Dte(a));this.hasMutatedConstraints=!!o,o&&(a=Z8(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=zs(f=>{if(!c1(f,t,this.currentDirection))return;let d=l&&l[f]||{};a&&(d={min:0,max:0});const g=i?200:1e6,p=i?40:1e7,x={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,x)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return HT(this.visualElement,e),r.start(HA(e,r,0,t,this.visualElement,!1))}stopAnimation(){zs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zs(t=>{const{drag:r}=this.getProps();if(!c1(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-Bn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Hf(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zs(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Ote({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zs(a=>{if(!c1(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Bn(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;Bte.set(this.visualElement,this);const e=this.visualElement.current,t=Ng(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Hf(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),An.read(r);const a=bm(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(zs(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=eS,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function c1(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Ute(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class zte extends $c{constructor(e){super(e),this.removeGroupControls=Is,this.removeListeners=Is,this.controls=new Gte(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Is}unmount(){this.removeGroupControls(),this.removeListeners()}}const Q3=n=>(e,t)=>{n&&An.postRender(()=>n(e,t))};class $te extends $c{constructor(){super(...arguments),this.removePointerDownListener=Is}onPointerDown(e){this.session=new K8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Q3(e),onStart:Q3(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&An.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Ng(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function J3(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const eg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(yt.test(n))n=parseFloat(n);else return n;const t=J3(n,e.target.x),r=J3(n,e.target.y);return`${t}% ${r}%`}},Wte={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Nc.parse(n);if(i.length>5)return r;const s=Nc.createTransformer(n),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=Bn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class Hte extends ve.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;fJ(Kte),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),$1.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||An.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),EA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nF(n){const[e,t]=V6(),r=ve.useContext(dA);return T.jsx(Hte,{...n,layoutGroup:r,switchLayoutGroup:ve.useContext(H6),isPresent:e,safeToRemove:t})}const Kte={borderRadius:{...eg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:eg,borderTopRightRadius:eg,borderBottomLeftRadius:eg,borderBottomRightRadius:eg,boxShadow:Wte};function qte(n,e,t){const r=mi(n)?n:Pm(n);return r.start(HA("",r,e,t)),r.animation}function Xte(n){return n instanceof SVGElement&&n.tagName!=="svg"}const Yte=(n,e)=>n.depth-e.depth;class Zte{constructor(){this.children=[],this.isDirty=!1}add(e){NA(this.children,e),this.isDirty=!0}remove(e){DA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Yte),this.isDirty=!1,this.children.forEach(e)}}function Qte(n,e){const t=co.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Lc(r),n(s-e))};return An.read(r,!0),()=>Lc(r)}const rF=["TopLeft","TopRight","BottomLeft","BottomRight"],Jte=rF.length,ek=n=>typeof n=="string"?parseFloat(n):n,tk=n=>typeof n=="number"||yt.test(n);function ene(n,e,t,r,i,s){i?(n.opacity=Bn(0,t.opacity!==void 0?t.opacity:1,tne(r)),n.opacityExit=Bn(e.opacity!==void 0?e.opacity:1,0,nne(r))):s&&(n.opacity=Bn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<Jte;a++){const o=`border${rF[a]}Radius`;let l=nk(e,o),u=nk(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||tk(l)===tk(u)?(n[o]=Math.max(Bn(ek(l),ek(u),r),0),(lo.test(u)||lo.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=Bn(e.rotate||0,t.rotate||0,r))}function nk(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const tne=iF(0,.5,w8),nne=iF(.5,.95,Is);function iF(n,e,t){return r=>r<n?0:r>e?1:t(Vd(n,e,r))}function rk(n,e){n.min=e.min,n.max=e.max}function Gs(n,e){rk(n.x,e.x),rk(n.y,e.y)}function ik(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function sk(n,e,t,r,i){return n-=e,n=ev(n,1/t,r),i!==void 0&&(n=ev(n,1/i,r)),n}function rne(n,e=0,t=1,r=.5,i,s=n,a=n){if(lo.test(e)&&(e=parseFloat(e),e=Bn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Bn(s.min,s.max,r);n===s&&(o-=e),n.min=sk(n.min,e,t,o,i),n.max=sk(n.max,e,t,o,i)}function ak(n,e,[t,r,i],s,a){rne(n,e[t],e[r],e[i],e.scale,s,a)}const ine=["x","scaleX","originX"],sne=["y","scaleY","originY"];function ok(n,e,t,r){ak(n.x,e,ine,t?t.x:void 0,r?r.x:void 0),ak(n.y,e,sne,t?t.y:void 0,r?r.y:void 0)}function lk(n){return n.translate===0&&n.scale===1}function sF(n){return lk(n.x)&&lk(n.y)}function ck(n,e){return n.min===e.min&&n.max===e.max}function ane(n,e){return ck(n.x,e.x)&&ck(n.y,e.y)}function uk(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function aF(n,e){return uk(n.x,e.x)&&uk(n.y,e.y)}function hk(n){return Ps(n.x)/Ps(n.y)}function fk(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class one{constructor(){this.members=[]}add(e){NA(this.members,e),e.scheduleRender()}remove(e){if(DA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lne(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:f,rotateX:d,rotateY:g,skewX:p,skewY:x}=t;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),g&&(r+=`rotateY(${g}deg) `),p&&(r+=`skewX(${p}deg) `),x&&(r+=`skewY(${x}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Iu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},_g=typeof window<"u"&&window.MotionDebug!==void 0,p2=["","X","Y","Z"],cne={visibility:"hidden"},dk=1e3;let une=0;function _2(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function oF(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=m8(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",An,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&oF(r)}function lF({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=une++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_g&&(Iu.totalNodes=Iu.resolvedTargetDeltas=Iu.recalculatedProjection=0),this.nodes.forEach(dne),this.nodes.forEach(yne),this.nodes.forEach(vne),this.nodes.forEach(gne),_g&&window.MotionDebug.record(Iu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Zte)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new FA),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Xte(a),this.instance=a;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Qte(g,250),$1.hasAnimatedSinceResize&&($1.hasAnimatedSinceResize=!1,this.nodes.forEach(mk))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeTargetChanged:p,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||f.getDefaultTransition()||Sne,{onLayoutAnimationStart:E,onLayoutAnimationComplete:R}=f.getProps(),S=!this.targetLayout||!aF(this.targetLayout,x)||p,C=!g&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,C);const O={...bA(v,"layout"),onPlay:E,onComplete:R};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else g||mk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Lc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xne),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gk);return}this.isUpdating||this.nodes.forEach(pne),this.isUpdating=!1,this.nodes.forEach(_ne),this.nodes.forEach(hne),this.nodes.forEach(fne),this.clearAllSnapshots();const o=co.now();Kr.delta=ll(0,1e3/60,o-Kr.timestamp),Kr.timestamp=o,Kr.isProcessing=!0,o2.update.process(Kr),o2.preRender.process(Kr),o2.render.process(Kr),Kr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,EA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mne),this.sharedNodes.forEach(Ene)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,An.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){An.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Jn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!sF(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;a&&(o||Su(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Ine(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Jn();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Ane))){const{scroll:f}=this.root;f&&(Xf(l.x,f.offset.x),Xf(l.y,f.offset.y))}return l}removeElementScroll(a){var o;const l=Jn();if(Gs(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:d,options:g}=f;f!==this.root&&d&&g.layoutScroll&&(d.wasRoot&&Gs(l,a),Xf(l.x,d.offset.x),Xf(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=Jn();Gs(l,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Yf(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Su(f.latestValues)&&Yf(l,f.latestValues)}return Su(this.latestValues)&&Yf(l,this.latestValues),l}removeTransform(a){const o=Jn();Gs(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Su(u.latestValues))continue;tS(u.latestValues)&&u.updateSnapshot();const f=Jn(),d=u.measurePageBox();Gs(f,d),ok(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Su(this.latestValues)&&ok(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=Kr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jn(),this.relativeTargetOrigin=Jn(),Fg(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Gs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Jn(),this.targetWithTransforms=Jn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Pte(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gs(this.target,this.layout.layoutBox),J8(this.target,this.targetDelta)):Gs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jn(),this.relativeTargetOrigin=Jn(),Fg(this.relativeTargetOrigin,this.target,p.target),Gs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_g&&Iu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tS(this.parent.latestValues)||Q8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Kr.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Gs(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,p=this.treeScale.y;Vte(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Jn());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ik(this.prevProjectionDelta.x,this.projectionDelta.x),ik(this.prevProjectionDelta.y,this.projectionDelta.y)),Dg(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==p||!fk(this.projectionDelta.x,this.prevProjectionDelta.x)||!fk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),_g&&Iu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qf(),this.projectionDelta=qf(),this.projectionDeltaWithTransform=qf()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},d=qf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Jn(),p=l?l.source:void 0,x=this.layout?this.layout.source:void 0,v=p!==x,E=this.getStack(),R=!E||E.members.length<=1,S=!!(v&&!R&&this.options.crossfade===!0&&!this.path.some(Tne));this.animationProgress=0;let C;this.mixTargetDelta=O=>{const N=O/1e3;pk(d.x,a.x,N),pk(d.y,a.y,N),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fg(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wne(this.relativeTarget,this.relativeTargetOrigin,g,N),C&&ane(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Jn()),Gs(C,this.relativeTarget)),v&&(this.animationValues=f,ene(f,u,this.latestValues,N,S,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Lc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=An.update(()=>{$1.hasAnimatedSinceResize=!0,this.currentAnimation=qte(0,dk,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:f}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&cF(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Jn();const d=Ps(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const g=Ps(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}Gs(o,l),Yf(o,f),Dg(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new one),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&_2("z",a,u,this.animationValues);for(let f=0;f<p2.length;f++)_2(`rotate${p2[f]}`,a,u,this.animationValues),_2(`skew${p2[f]}`,a,u,this.animationValues);a.render();for(const f in u)a.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cne;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=U1(a?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=U1(a?.pointerEvents)||""),this.hasProjected&&!Su(this.latestValues)&&(v.transform=f?f({},""):"none",this.hasProjected=!1),v}const g=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=lne(this.projectionDeltaWithTransform,this.treeScale,g),f&&(u.transform=f(g,u.transform));const{x:p,y:x}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${x.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const v in Xy){if(g[v]===void 0)continue;const{correct:E,applyTo:R}=Xy[v],S=u.transform==="none"?g[v]:E(g[v],d);if(R){const C=R.length;for(let O=0;O<C;O++)u[R[O]]=S}else u[v]=S}return this.options.layoutId&&(u.pointerEvents=d===this?U1(a?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(gk),this.root.sharedNodes.clear()}}}function hne(n){n.updateLayout()}function fne(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?zs(d=>{const g=a?t.measuredBox[d]:t.layoutBox[d],p=Ps(g);g.min=r[d].min,g.max=g.min+p}):cF(s,t.layoutBox,r)&&zs(d=>{const g=a?t.measuredBox[d]:t.layoutBox[d],p=Ps(r[d]);g.max=g.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const o=qf();Dg(o,r,t.layoutBox);const l=qf();a?Dg(l,n.applyTransform(i,!0),t.measuredBox):Dg(l,r,t.layoutBox);const u=!sF(o);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:g,layout:p}=d;if(g&&p){const x=Jn();Fg(x,t.layoutBox,g.layoutBox);const v=Jn();Fg(v,r,p.layoutBox),aF(x,v)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=x,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function dne(n){_g&&Iu.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function gne(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function mne(n){n.clearSnapshot()}function gk(n){n.clearMeasurements()}function pne(n){n.isLayoutDirty=!1}function _ne(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function mk(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function yne(n){n.resolveTargetDelta()}function vne(n){n.calcProjection()}function xne(n){n.resetSkewAndRotation()}function Ene(n){n.removeLeadSnapshot()}function pk(n,e,t){n.translate=Bn(e.translate,0,t),n.scale=Bn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function _k(n,e,t,r){n.min=Bn(e.min,t.min,r),n.max=Bn(e.max,t.max,r)}function wne(n,e,t,r){_k(n.x,e.x,t.x,r),_k(n.y,e.y,t.y,r)}function Tne(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Sne={duration:.45,ease:[.4,0,.1,1]},yk=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),vk=yk("applewebkit/")&&!yk("chrome/")?Math.round:Is;function xk(n){n.min=vk(n.min),n.max=vk(n.max)}function Ine(n){xk(n.x),xk(n.y)}function cF(n,e,t){return n==="position"||n==="preserve-aspect"&&!Cte(hk(e),hk(t),.2)}function Ane(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const Rne=lF({attachResizeListener:(n,e)=>bm(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),y2={current:void 0},uF=lF({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!y2.current){const n=new Rne({});n.mount(window),n.setOptions({layoutScroll:!0}),y2.current=n}return y2.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Cne={pan:{Feature:$te},drag:{Feature:zte,ProjectionNode:uF,MeasureLayout:nF}};function Ek(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&An.postRender(()=>s(e,Sp(e)))}class Pne extends $c{mount(){const{current:e}=this.node;e&&(this.unmount=CJ(e,t=>(Ek(this.node,t,"Start"),r=>Ek(this.node,r,"End"))))}unmount(){}}class Mne extends $c{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tp(bm(this.node.current,"focus",()=>this.onFocus()),bm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wk(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&An.postRender(()=>s(e,Sp(e)))}class bne extends $c{mount(){const{current:e}=this.node;e&&(this.unmount=kJ(e,t=>(wk(this.node,t,"Start"),(r,{success:i})=>wk(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const rS=new WeakMap,v2=new WeakMap,kne=n=>{const e=rS.get(n.target);e&&e(n)},One=n=>{n.forEach(kne)};function Lne({root:n,...e}){const t=n||document;v2.has(t)||v2.set(t,{});const r=v2.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(One,{root:n,...e})),r[i]}function Nne(n,e,t){const r=Lne(e);return rS.set(n,t),r.observe(n),()=>{rS.delete(n),r.unobserve(n)}}const Dne={some:0,all:1};class Fne extends $c{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Dne[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),g=u?f:d;g&&g(l)};return Nne(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Vne(e,t))&&this.startObserver()}unmount(){}}function Vne({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const jne={inView:{Feature:Fne},tap:{Feature:bne},focus:{Feature:Mne},hover:{Feature:Pne}},Bne={layout:{ProjectionNode:uF,MeasureLayout:nF}},iS={current:null},hF={current:!1};function Gne(){if(hF.current=!0,!!pA)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>iS.current=n.matches;n.addListener(e),e()}else iS.current=!1}const Une=[...D8,hi,Nc],zne=n=>Une.find(N8(n)),Tk=new WeakMap;function $ne(n,e,t){for(const r in e){const i=e[r],s=t[r];if(mi(i))n.addValue(r,i);else if(mi(s))n.addValue(r,Pm(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,Pm(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Sk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Wne{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=co.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,An.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:f}=a;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Rx(t),this.isVariantNode=$6(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in g){const x=g[p];l[p]!==void 0&&mi(x)&&x.set(l[p],!1)}}mount(e){this.current=e,Tk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),hF.current||Gne(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:iS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Tk.delete(this.current),this.projection&&this.projection.unmount(),Lc(this.notifyUpdate),Lc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Mh.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&An.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jd){const t=jd[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Jn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Sk.length;r++){const i=Sk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=$ne(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Pm(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(O8(i)||S8(i))?i=parseFloat(i):!zne(i)&&Nc.test(t)&&(i=M8(e,t)),this.setBaseTarget(e,mi(i)?i.get():i)),mi(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=TA(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!mi(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new FA),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class fF extends Wne{constructor(){super(...arguments),this.KeyframeResolver=F8}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Hne(n){return window.getComputedStyle(n)}class Kne extends fF{constructor(){super(...arguments),this.type="html",this.renderInstance=J6}readValueFromInstance(e,t){if(Mh.has(t)){const r=UA(t);return r&&r.default||0}else{const r=Hne(e),i=(Y6(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return eF(e,t)}build(e,t,r){AA(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return MA(e,t,r)}}class qne extends fF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Jn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Mh.has(t)){const r=UA(t);return r&&r.default||0}return t=e8.has(t)?t:xA(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return r8(e,t,r)}build(e,t,r){RA(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){t8(e,t,r,i)}mount(e){this.isSVGTag=PA(e.tagName),super.mount(e)}}const Xne=(n,e)=>wA(n)?new qne(e):new Kne(e,{allowProjection:n!==ve.Fragment}),Yne=EJ({...vte,...jne,...Cne,...Bne},Xne),nn=DQ(Yne);const Zne=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qne=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Ik=n=>{const e=Qne(n);return e.charAt(0).toUpperCase()+e.slice(1)},dF=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Jne=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var ere={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const tre=ve.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>ve.createElement("svg",{ref:l,...ere,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:dF("lucide",i),...!s&&!Jne(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,f])=>ve.createElement(u,f)),...Array.isArray(s)?s:[s]]));const _t=(n,e)=>{const t=ve.forwardRef(({className:r,...i},s)=>ve.createElement(tre,{ref:s,iconNode:e,className:dF(`lucide-${Zne(Ik(n))}`,`lucide-${n}`,r),...i}));return t.displayName=Ik(n),t};const nre=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rre=_t("arrow-left",nre);const ire=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sre=_t("arrow-right",ire);const are=[["path",{d:"M7 17V7h10",key:"11bw93"}],["path",{d:"M17 17 7 7",key:"2786uv"}]],ore=_t("arrow-up-left",are);const lre=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],cre=_t("arrow-up-right",lre);const ure=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],hre=_t("arrow-up",ure);const fre=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],dre=_t("calendar",fre);const gre=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gF=_t("chart-column",gre);const mre=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pre=_t("check",mre);const _re=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yre=_t("chevron-down",_re);const vre=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xre=_t("chevron-left",vre);const Ere=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mF=_t("chevron-right",Ere);const wre=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],pF=_t("chevron-up",wre);const Tre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Sre=_t("circle-alert",Tre);const Ire=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Are=_t("circle",Ire);const Rre=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cre=_t("compass",Rre);const Pre=[["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}],["path",{d:"M9 14 4 9l5-5",key:"102s5s"}]],Mre=_t("corner-up-left",Pre);const bre=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M4 20v-7a4 4 0 0 1 4-4h12",key:"1lu4f8"}]],kre=_t("corner-up-right",bre);const Ore=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Ak=_t("crosshair",Ore);const Lre=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Rk=_t("download",Lre);const Nre=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Dre=_t("eye-off",Nre);const Fre=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vre=_t("eye",Fre);const jre=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Bre=_t("folder-open",jre);const Gre=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Ure=_t("folder",Gre);const zre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],$re=_t("grid-3x3",zre);const Wre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Hre=_t("info",Wre);const Kre=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],km=_t("layers",Kre);const qre=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Xre=_t("link",qre);const Yre=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_F=_t("loader-circle",Yre);const Zre=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qre=_t("locate-fixed",Zre);const Jre=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],eie=_t("lock",Jre);const tie=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nie=_t("log-out",tie);const rie=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],dh=_t("map-pin",rie);const iie=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],yF=_t("map",iie);const sie=[["path",{d:"M5 12h14",key:"1ays0h"}]],aie=_t("minus",sie);const oie=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],sS=_t("mountain",oie);const lie=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Gd=_t("navigation",lie);const cie=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],KA=_t("plus",cie);const uie=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],aS=_t("rotate-ccw",uie);const hie=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],fie=_t("ruler",hie);const die=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],vF=_t("scale",die);const gie=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xF=_t("search",gie);const mie=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],EF=_t("settings",mie);const pie=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],_ie=_t("sliders-horizontal",pie);const yie=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],vie=_t("smartphone",yie);const xie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Eie=_t("target",xie);const wie=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wF=_t("trash-2",wie);const Tie=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],Sie=_t("tree-palm",Tie);const Iie=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Aie=_t("type",Iie);const Rie=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Cie=_t("volume-2",Rie);const Pie=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Mie=_t("volume-x",Pie);const bie=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],kie=_t("waves",bie);const Oie=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Wc=_t("x",Oie);function Lie(){const{tracking:n,startTracking:e,stopTracking:t,updatePosition:r,setWatchId:i,resetFirstFix:s}=Mn(),a=ve.useCallback(l=>{r(l)},[r]),o=ve.useCallback(l=>{console.error("GPS error:",l),alert(`GPS fout: ${l.message}`),t()},[t]);return ve.useEffect(()=>{if(!n)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),t();return}const l=navigator.geolocation.watchPosition(a,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(l),()=>{navigator.geolocation.clearWatch(l)}},[n,a,o,i,t]),{tracking:n,start:e,stop:t,toggle:()=>n?t():e()}}function Nie(){const{tracking:n,toggle:e}=Lie();return T.jsx(nn.button,{className:`
        fixed bottom-2 right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},animate:n?{scale:[1,1.02,1]}:{},transition:n?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":n?"GPS tracking actief":"GPS tracking starten",title:n?"GPS tracking actief":"GPS tracking starten",children:T.jsx(Qre,{size:22,strokeWidth:2})})}const Ck="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">
    <polygon points="20,4 32,32 20,26 8,32" fill="#4285F4" stroke="white" stroke-width="2.5" stroke-linejoin="round"/>
  </svg>`);function Die(){const n=ti(E=>E.map),e=ti(E=>E.rotation),t=Mn(E=>E.position),r=Mn(E=>E.accuracy),i=Mn(E=>E.tracking),s=Mn(E=>E.smoothHeading),a=mo(E=>E.headingUpMode),o=Mn(E=>E.firstFix),l=Mn(E=>E.resetFirstFix),u=Mn(E=>E.config.centerOnUser),f=Mn(E=>E.config.animationDuration),d=ve.useRef(null),g=ve.useRef(null),p=ve.useRef(null),x=ve.useRef(0),v=ve.useMemo(()=>new bi({image:new fy({src:Ck,scale:1,rotation:0,rotateWithView:!1,anchor:[.5,.5]})}),[]);return ve.useEffect(()=>{if(!n||!i&&!t)return;const E=Sc([5.1214,52.0907]);return d.current=new qu({geometry:new Ic(E)}),d.current.setStyle(v),g.current=new qu({geometry:new Ic(E)}),p.current=new $v({source:new Vv({features:[g.current,d.current]}),zIndex:1e3}),n.addLayer(p.current),()=>{p.current&&n&&n.removeLayer(p.current)}},[n,i,t,v]),ve.useEffect(()=>{if(!n||!t||!d.current||!g.current)return;const E=Sc([t.lng,t.lat]);if(d.current.getGeometry()?.setCoordinates(E),g.current.getGeometry()?.setCoordinates(E),r){const R=n.getView().getResolution()||1,S=r/R;g.current.setStyle(new bi({image:new Th({radius:Math.min(S,100),fill:new Ca({color:"rgba(66, 133, 244, 0.1)"})})}))}o&&i&&(n.getView().setCenter(E),n.getView().setZoom(17),l(),console.log(" GPS locked - jumped to position + street level")),i&&u&&!o&&n.getView().animate({center:E,duration:f})},[n,i,t,r,o,l,u,f]),ve.useEffect(()=>{if(!n||!d.current)return;const R=n.getView().getRotation();let S;a?S=-R:S=s!==null?s*Math.PI/180:0;const C=5*Math.PI/180;let O=S-x.current;O>Math.PI&&(O-=2*Math.PI),O<-Math.PI&&(O+=2*Math.PI),!(Math.abs(O)<C)&&(x.current=S,d.current.setStyle(new bi({image:new fy({src:Ck,scale:1,rotation:S,rotateWithView:!1,anchor:[.5,.5]})})))},[n,a,s,e]),null}function Fie(){const n=Ea(t=>t.themesPanelOpen),e=Ea(t=>t.toggleThemesPanel);return T.jsx(nn.button,{className:`
        fixed bottom-[60px] right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":n?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:T.jsx(yF,{size:22,strokeWidth:2})})}function Vie(){return T.jsx(Fie,{})}function Mr({title:n,children:e,defaultExpanded:t=!0,layerNames:r}){const[i,s]=ve.useState(t),a=ei(p=>p.visible),o=ei(p=>p.setLayerVisibility),l=r?.filter(p=>a[p]).length||0,u=r?.length||0,f=u>0&&l===u,d=l>0&&l<u,g=p=>{if(p.stopPropagation(),!r)return;const x=!f;r.forEach(v=>{o(v,x)})};return T.jsxs("div",{className:"mb-0.5",children:[T.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[T.jsxs("button",{onClick:()=>s(!i),className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",children:[T.jsx(nn.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:T.jsx(mF,{size:14})}),i?T.jsx(Bre,{size:16,className:"text-blue-500"}):T.jsx(Ure,{size:16,className:"text-blue-500"}),T.jsx("span",{className:"text-sm text-gray-700 font-medium",children:n}),l>0&&T.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-[10px] font-medium bg-blue-100 text-blue-600 rounded-full",children:l})]}),r&&r.length>0&&T.jsx("button",{onClick:g,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:f?"#3b82f6":d?"#93c5fd":"white",border:f?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(f||d)&&T.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:T.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),T.jsx(Ma,{initial:!1,children:i&&T.jsx(nn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function rt({name:n,type:e}){const t=ei(f=>f.visible[n]),r=ei(f=>f.loadingState[n]),i=ei(f=>f.toggleLayer),s=ei(f=>f.setLayerVisibility),a=r==="loading",o=r==="error",l=()=>{a||(e==="overlay"?i(n):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(d=>{s(d,d===n)}))},u=t??!1;return T.jsxs("button",{onClick:l,disabled:a,className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${a?"opacity-70 cursor-wait bg-transparent":u?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,children:[T.jsxs("span",{className:`text-sm ${o?"text-red-500":"text-gray-600"}`,children:[n,o&&T.jsx(Sre,{size:12,className:"inline ml-1 text-red-500"})]}),T.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:a?"#93c5fd":u?"#3b82f6":"white",border:a?"2px solid #93c5fd":u?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:a?T.jsx(_F,{size:10,strokeWidth:3,className:"animate-spin"}):u?T.jsx(pre,{size:12,strokeWidth:3}):null})]})}function jie(){const{themesPanelOpen:n,toggleThemesPanel:e}=Ea();return T.jsx(Ma,{children:n&&T.jsxs(T.Fragment,{children:[T.jsx(nn.div,{className:"fixed inset-0 z-[1100]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),T.jsxs(nn.div,{className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[240px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[T.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(km,{size:14}),T.jsx("span",{className:"font-medium text-sm",children:"Kaartlagen"})]}),T.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none hover:bg-white/20 transition-colors",children:T.jsx(Wc,{size:16})})]}),T.jsxs("div",{className:"p-2 overflow-y-auto flex-1",children:[T.jsx("div",{className:"mb-2 pb-1 border-b border-gray-100",children:T.jsx(rt,{name:"Mijn Vondsten",type:"overlay"})}),T.jsxs(Mr,{title:"Achtergronden",defaultExpanded:!0,children:[T.jsx(rt,{name:"CartoDB (licht)",type:"base"}),T.jsx(rt,{name:"OpenStreetMap",type:"base"}),T.jsx(rt,{name:"Luchtfoto",type:"base"}),T.jsx(rt,{name:"Labels Overlay",type:"overlay"}),T.jsx(rt,{name:"TMK 1850",type:"base"}),T.jsx(rt,{name:"Bonnebladen 1900",type:"base"})]}),T.jsxs(Mr,{title:"Thema's",defaultExpanded:!1,children:[T.jsxs(Mr,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen"],children:[T.jsx(rt,{name:"Hunebedden",type:"overlay"}),T.jsx(rt,{name:"FAMKE Steentijd",type:"overlay"}),T.jsx(rt,{name:"Grafheuvels",type:"overlay"}),T.jsx(rt,{name:"Terpen",type:"overlay"})]}),T.jsxs(Mr,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","IKAW","Archeo Landschappen"],children:[T.jsx(rt,{name:"AMK Monumenten",type:"overlay"}),T.jsxs(Mr,{title:"AMK per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[T.jsx(rt,{name:"AMK Romeins",type:"overlay"}),T.jsx(rt,{name:"AMK Steentijd",type:"overlay"}),T.jsx(rt,{name:"AMK Vroege ME",type:"overlay"}),T.jsx(rt,{name:"AMK Late ME",type:"overlay"}),T.jsx(rt,{name:"AMK Overig",type:"overlay"})]}),T.jsx(rt,{name:"Romeinse wegen",type:"overlay"}),T.jsx(rt,{name:"IKAW",type:"overlay"}),T.jsx(rt,{name:"Archeo Landschappen",type:"overlay"})]}),T.jsxs(Mr,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen"],children:[T.jsx(rt,{name:"Rijksmonumenten",type:"overlay"}),T.jsx(rt,{name:"Werelderfgoed",type:"overlay"}),T.jsx(rt,{name:"Religieus Erfgoed",type:"overlay"}),T.jsx(rt,{name:"Kastelen",type:"overlay"})]}),T.jsxs(Mr,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[T.jsx(rt,{name:"WWII Bunkers",type:"overlay"}),T.jsx(rt,{name:"Slagvelden",type:"overlay"}),T.jsx(rt,{name:"Militaire Vliegvelden",type:"overlay"}),T.jsx(rt,{name:"Verdedigingslinies",type:"overlay"}),T.jsx(rt,{name:"Militaire Objecten",type:"overlay"}),T.jsx(rt,{name:"Inundatiegebieden",type:"overlay"})]}),T.jsxs(Mr,{title:"Paleokaarten (tijdreizen)",defaultExpanded:!1,layerNames:["Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr."],children:[T.jsx(rt,{name:"Paleokaart 800 n.Chr.",type:"overlay"}),T.jsx(rt,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),T.jsx(rt,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),T.jsx(rt,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),T.jsx(rt,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),T.jsx(rt,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),T.jsx(rt,{name:"Paleokaart 9000 v.Chr.",type:"overlay"})]}),T.jsxs(Mr,{title:"Uiterwaarden (UIKAV)",defaultExpanded:!1,layerNames:["UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[T.jsx(rt,{name:"UIKAV Punten",type:"overlay"}),T.jsx(rt,{name:"UIKAV Vlakken",type:"overlay"}),T.jsx(rt,{name:"UIKAV Expert",type:"overlay"}),T.jsx(rt,{name:"UIKAV Buffer",type:"overlay"}),T.jsx(rt,{name:"UIKAV Indeling",type:"overlay"})]}),T.jsxs(Mr,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade"],children:[T.jsx(rt,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),T.jsx(rt,{name:"AHN4 Hillshade NL",type:"overlay"}),T.jsx(rt,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),T.jsx(rt,{name:"AHN 0.5m",type:"overlay"}),T.jsx(rt,{name:"World Hillshade",type:"overlay"})]}),T.jsxs(Mr,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Veengebieden","Geomorfologie","Bodemkaart"],children:[T.jsx(rt,{name:"Veengebieden",type:"overlay"}),T.jsx(rt,{name:"Geomorfologie",type:"overlay"}),T.jsx(rt,{name:"Bodemkaart",type:"overlay"})]}),T.jsxs(Mr,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[T.jsx(rt,{name:"Gewaspercelen",type:"overlay"}),T.jsx(rt,{name:"Kadastrale Grenzen",type:"overlay"})]}),T.jsxs(Mr,{title:"Provinciale Kaarten",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[T.jsxs(Mr,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[T.jsx(rt,{name:"Scheepswrakken",type:"overlay"}),T.jsx(rt,{name:"Woonheuvels ZH",type:"overlay"}),T.jsx(rt,{name:"Romeinse Forten",type:"overlay"}),T.jsx(rt,{name:"Windmolens",type:"overlay"}),T.jsx(rt,{name:"Erfgoedlijnen",type:"overlay"}),T.jsx(rt,{name:"Oude Kernen",type:"overlay"})]}),T.jsxs(Mr,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[T.jsx(rt,{name:"Relictenkaart Punten",type:"overlay"}),T.jsx(rt,{name:"Relictenkaart Lijnen",type:"overlay"}),T.jsx(rt,{name:"Relictenkaart Vlakken",type:"overlay"})]}),T.jsx(Mr,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:T.jsx(rt,{name:"Verdronken Dorpen",type:"overlay"})})]}),T.jsxs(Mr,{title:"Fossielen (vondsten)",defaultExpanded:!1,layerNames:["Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[T.jsx(rt,{name:"Fossielen Nederland",type:"overlay"}),T.jsx(rt,{name:"Fossielen Belgi",type:"overlay"}),T.jsx(rt,{name:"Fossielen Duitsland",type:"overlay"}),T.jsx(rt,{name:"Fossielen Frankrijk",type:"overlay"})]}),T.jsxs(Mr,{title:"Recreatie",defaultExpanded:!1,layerNames:["Parken","Speeltuinen","Musea","Strandjes"],children:[T.jsx(rt,{name:"Parken",type:"overlay"}),T.jsx(rt,{name:"Speeltuinen",type:"overlay"}),T.jsx(rt,{name:"Musea",type:"overlay"}),T.jsx(rt,{name:"Strandjes",type:"overlay"})]})]})]})]})]})})}function Bie(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var gh=1,mh=2,hd=3,Gie=4,oS=5,Pk=6378137,Uie=6356752314e-3,Mk=.0066943799901413165,Vg=484813681109536e-20,Fe=Math.PI/2,zie=.16666666666666666,$ie=.04722222222222222,Wie=.022156084656084655,Ye=1e-10,$n=.017453292519943295,Zi=57.29577951308232,Jt=Math.PI/4,Om=Math.PI*2,er=3.14159265359,ts={};ts.greenwich=0;ts.lisbon=-9.131906111111;ts.paris=2.337229166667;ts.bogota=-74.080916666667;ts.madrid=-3.687938888889;ts.rome=12.452333333333;ts.bern=7.439583333333;ts.jakarta=106.807719444444;ts.ferro=-17.666666666667;ts.brussels=4.367975;ts.stockholm=18.058277777778;ts.athens=23.7163375;ts.oslo=10.722916666667;const Hie={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var bk=/[\s_\-\/\(\)]/g;function Dc(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(bk,""),i=-1,s,a;++i<t.length;)if(s=t[i],a=s.toLowerCase().replace(bk,""),a===r)return n[s]}function lS(n){var e={},t=n.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var u=l.split("=");return u.push(!0),o[u[0].toLowerCase()]=u[1],o},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*$n},lat_1:function(o){e.lat1=o*$n},lat_2:function(o){e.lat2=o*$n},lat_ts:function(o){e.lat_ts=o*$n},lon_0:function(o){e.long0=o*$n},lon_1:function(o){e.long1=o*$n},lon_2:function(o){e.long2=o*$n},alpha:function(o){e.alpha=parseFloat(o)*$n},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*$n},lonc:function(o){e.longc=o*$n},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=Dc(Hie,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*$n},pm:function(o){var l=Dc(ts,o);e.from_greenwich=(l||parseFloat(o))*$n},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}class TF{static getId(e){const t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:a}}static convertAxis(e){const t=e[1]||"Unknown";let r;const i=t.match(/^\((.)\)$/);if(i){const u=i[1].toUpperCase();if(u==="E")r="east";else if(u==="N")r="north";else if(u==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${u}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(u=>Array.isArray(u)&&u[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=e.find(u=>Array.isArray(u)&&(u[0]==="LENGTHUNIT"||u[0]==="ANGLEUNIT"||u[0]==="SCALEUNIT")),l=this.convertUnit(o);return{name:t,direction:r,unit:l,order:a}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,t.conversion=e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const r=e.find(g=>Array.isArray(g)&&g[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(i){const g=this.convertUnit(i);t.coordinate_system.unit=g}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const s=e.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(s){const g=this.convert(s);s[0]==="ENSEMBLE"?t.datum_ensemble=g:t.datum=g;const p=e.find(x=>Array.isArray(x)&&x[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(g.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const a=e.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");a&&(t.accuracy=parseFloat(a[1]));const o=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");o&&(t.ellipsoid=this.convert(o)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const l=e.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(l){const g=l.find(p=>Array.isArray(p));t.source_crs=g?this.convert(g):null}const u=e.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(u){const g=u.find(p=>Array.isArray(p));t.target_crs=g?this.convert(g):null}const f=e.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");f?t.transformation=this.convert(f):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const g=t.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const d=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=d)}),d.conversion_factor&&d.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:d});break;default:t.keyword=e[0];break}return t}}class Kie extends TF{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class qie extends TF{static convert(e,t={}){super.convert(e,t);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),a=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),o=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},s&&(t.usage.scope=s[1]),a&&(t.usage.area=a[1]),o&&(t.usage.bbox=o.slice(1))}return t}}function Xie(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function Yie(n){return(Xie(n)==="2019"?qie:Kie).convert(n)}function Zie(n){const e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var Lm=1,SF=2,IF=3,tv=4,AF=5,qA=-1,Qie=/\s/,Jie=/[A-Za-z]/,ese=/[A-Za-z84_]/,Mx=/[,\]]/,RF=/[\d\.E\-\+]/;function gl(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Lm}gl.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==tv)for(;Qie.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case Lm:return this.neutral(n);case SF:return this.keyword(n);case tv:return this.quoted(n);case AF:return this.afterquote(n);case IF:return this.number(n);case qA:return}};gl.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=tv;return}if(Mx.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};gl.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Lm;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Lm,this.currentObject=this.stack.pop(),this.currentObject||(this.state=qA);return}};gl.prototype.number=function(n){if(RF.test(n)){this.word+=n;return}if(Mx.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};gl.prototype.quoted=function(n){if(n==='"'){this.state=AF;return}this.word+=n};gl.prototype.keyword=function(n){if(ese.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Lm;return}if(Mx.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};gl.prototype.neutral=function(n){if(Jie.test(n)){this.word=n,this.state=SF;return}if(n==='"'){this.word="",this.state=tv;return}if(RF.test(n)){this.word=n,this.state=IF;return}if(Mx.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};gl.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===qA)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function tse(n){var e=new gl(n);return e.output()}function x2(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(s,a){return Zf(a,s),s},r);e&&(n[e]=i)}function Zf(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},Zf(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&Zf(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&Zf(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],x2(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],x2(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return Zf(n,e[t]);return x2(e,t,n)}}var nse=.017453292519943295;function pa(n){return n*nse}function CF(n){const e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=pa(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=pa(n.lat0>0?90:-90),delete n.lat1)}function kk(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function Ok(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function Lk(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=Ok(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-Ok(n.ellipsoid.semi_minor_axis))))}function nv(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?(nv(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{const r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,Lk(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,Lk(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=kk(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=kk(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),a=i.value;i.unit&&i.unit.conversion_factor?e[s]=a*i.unit.conversion_factor:i.unit==="degree"?e[s]=a*Math.PI/180:e[s]=a});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":nv(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),CF(e),e)}var rse=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function ise(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function PF(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];rse.indexOf(i)!==-1&&sse(n[i]),typeof n[i]=="object"&&PF(n[i])}}function sse(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var s=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=pa(n.rectified_grid_angle));function o(f){var d=n.to_meter||1;return f*d}var l=function(f){return ise(n,f)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",pa],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",pa],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",pa],["lat0","latitude_of_origin",pa],["lat0","standard_parallel_1",pa],["lat1","standard_parallel_1",pa],["lat2","standard_parallel_2",pa],["azimuth","Azimuth"],["alpha","azimuth",pa],["srsCode","name"]];u.forEach(l),CF(n)}function rv(n){if(typeof n=="object")return nv(n);const e=Zie(n);var t=tse(n);if(e==="WKT2"){const s=Yie(t);return nv(s)}var r=t[0],i={};return Zf(t,i),PF(i),i[r]}function Hr(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?Hr[n]=lS(arguments[1]):Hr[n]=rv(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?Hr[n]=rv(arguments[1]):(Hr[n]=t,t||delete Hr[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?Hr.apply(e,r):Hr(r)});if(typeof n=="string"){if(n in Hr)return Hr[n]}else"EPSG"in n?Hr["EPSG:"+n.EPSG]=n:"ESRI"in n?Hr["ESRI:"+n.ESRI]=n:"IAU2000"in n?Hr["IAU2000:"+n.IAU2000]=n:console.log(n);return}}Bie(Hr);function ase(n){return typeof n=="string"}function ose(n){return n in Hr}function lse(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var cse=["3857","900913","3785","102113"];function use(n){var e=Dc(n,"authority");if(e){var t=Dc(e,"epsg");return t&&cse.indexOf(t)>-1}}function hse(n){var e=Dc(n,"extension");if(e)return Dc(e,"proj4")}function fse(n){return n[0]==="+"}function dse(n){if(ase(n)){if(ose(n))return Hr[n];if(lse(n)){var e=rv(n);if(use(e))return Hr["EPSG:3857"];var t=hse(e);return t?lS(t):e}if(fse(n))return lS(n)}else return"projName"in n?n:rv(n)}function Nk(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function po(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function Ip(n){return n<0?-1:1}function Je(n,e){return e||Math.abs(n)<=er?n:n-Ip(n)*Om}function Aa(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Fe-e))/r}function Nm(n,e){for(var t=.5*n,r,i,s=Fe-2*Math.atan(e),a=0;a<=15;a++)if(r=n*Math.sin(s),i=Fe-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function gse(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=po(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function mse(n){var e=n.x,t=n.y;if(t*Zi>90&&t*Zi<-90&&e*Zi>180&&e*Zi<-180)return null;var r,i;if(Math.abs(Math.abs(t)-Fe)<=Ye)return null;if(this.sphere)r=this.x0+this.a*this.k0*Je(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(Jt+.5*t));else{var s=Math.sin(t),a=Aa(this.e,t,s);r=this.x0+this.a*this.k0*Je(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(a)}return n.x=r,n.y=i,n}function pse(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=Fe-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(i=Nm(this.e,s),i===-9999)return null}return r=Je(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var _se=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const yse={init:gse,forward:mse,inverse:pse,names:_se};function vse(){}function Dk(n){return n}var MF=["longlat","identity"];const xse={init:vse,forward:Dk,inverse:Dk,names:MF};var Ese=[yse,xse],Au={},Qf=[];function bF(n,e){var t=Qf.length;return n.names?(Qf[t]=n,n.names.forEach(function(r){Au[r.toLowerCase()]=t}),this):(console.log(e),!0)}function kF(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function wse(n){if(!n)return!1;var e=n.toLowerCase();if(typeof Au[e]<"u"&&Qf[Au[e]]||(e=kF(e),e in Au&&Qf[Au[e]]))return Qf[Au[e]]}function Tse(){Ese.forEach(bF)}const Sse={start:Tse,add:bF,get:wse};var OF={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Ise=OF.WGS84;function Ase(n,e,t,r){var i=n*n,s=e*e,a=(i-s)/i,o=0;r?(n*=1-a*(zie+a*($ie+a*Wie)),i=n*n,a=0):o=Math.sqrt(a);var l=(i-s)/s;return{es:a,e:o,ep2:l}}function Rse(n,e,t,r,i){if(!n){var s=Dc(OF,r);s||(s=Ise),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<Ye)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var W1={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Cse in W1){var E2=W1[Cse];E2.datumName&&(W1[E2.datumName]=E2)}function Pse(n,e,t,r,i,s,a){var o={};return n===void 0||n==="none"?o.datum_type=oS:o.datum_type=Gie,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=gh),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=mh,o.datum_params[3]*=Vg,o.datum_params[4]*=Vg,o.datum_params[5]*=Vg,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=hd,o.grids=a),o.a=t,o.b=r,o.es=i,o.ep2=s,o}var XA={};function Mse(n,e,t){return e instanceof ArrayBuffer?bse(n,e,t):{ready:kse(n,e)}}function bse(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=Nse(i),a=Dse(i,s),o=Fse(i,a,s,r),l={header:a,subgrids:o};return XA[n]=l,l}async function kse(n,e){for(var t=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),a=await s.readRasters(),o=a,l=[s.getWidth(),s.getHeight()],u=s.getBoundingBox().map(Fk),f=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(Fk),d=u[0]+(l[0]-1)*f[0],g=u[3]-(l[1]-1)*f[1],p=o[0],x=o[1],v=[];for(let S=l[1]-1;S>=0;S--)for(let C=l[0]-1;C>=0;C--){var E=S*l[0]+C;v.push([-uc(x[E]),uc(p[E])])}t.push({del:f,lim:l,ll:[-d,g],cvs:v})}var R={header:{nSubgrids:r},subgrids:t};return XA[n]=R,R}function Ose(n){if(n===void 0)return null;var e=n.split(",");return e.map(Lse)}function Lse(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:XA[n]||null,isNull:!1}}function Fk(n){return n*Math.PI/180}function uc(n){return n/3600*Math.PI/180}function Nse(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Dse(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:cS(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function cS(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Fse(n,e,t,r){for(var i=176,s=[],a=0;a<e.nSubgrids;a++){var o=jse(n,i,t),l=Bse(n,i,o,t,r),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),f=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[uc(o.lowerLongitude),uc(o.lowerLatitude)],del:[uc(o.longitudeInterval),uc(o.latitudeInterval)],lim:[u,f],count:o.gridNodeCount,cvs:Vse(l)});var d=16;r===!1&&(d=8),i+=176+o.gridNodeCount*d}return s}function Vse(n){return n.map(function(e){return[uc(e.longitudeShift),uc(e.latitudeShift)]})}function jse(n,e,t){return{name:cS(n,e+8,e+16).trim(),parent:cS(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function Bse(n,e,t,r,i){var s=e+176,a=16;i===!1&&(a=8);for(var o=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:n.getFloat32(s+l*a,r),longitudeShift:n.getFloat32(s+l*a+4,r)};i!==!1&&(u.latitudeAccuracy=n.getFloat32(s+l*a+8,r),u.longitudeAccuracy=n.getFloat32(s+l*a+12,r)),o.push(u)}return o}function ea(n,e){if(!(this instanceof ea))return new ea(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(u){if(u)throw u};var t=dse(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=ea.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=Dc(W1,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=Rse(t.a,t.b,t.rf,t.ellps,t.sphere),a=Ase(s.a,s.b,s.rf,t.R_A),o=Ose(t.nadgrids),l=t.datum||Pse(t.datumCode,t.datum_params,s.a,s.b,a.es,a.ep2,o);Nk(this,t),Nk(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}ea.projections=Sse;ea.projections.start();function Gse(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===gh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===mh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function LF(n,e,t){var r=n.x,i=n.y,s=n.z?n.z:0,a,o,l,u;if(i<-Fe&&i>-1.001*Fe)i=-Fe;else if(i>Fe&&i<1.001*Fe)i=Fe;else{if(i<-Fe)return{x:-1/0,y:-1/0,z:n.z};if(i>Fe)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),o=Math.sin(i),u=Math.cos(i),l=o*o,a=t/Math.sqrt(1-e*l),{x:(a+s)*u*Math.cos(r),y:(a+s)*u*Math.sin(r),z:(a*(1-e)+s)*o}}function NF(n,e,t,r){var i=1e-12,s=i*i,a=30,o,l,u,f,d,g,p,x,v,E,R,S,C,O=n.x,N=n.y,z=n.z?n.z:0,M,P,b;if(o=Math.sqrt(O*O+N*N),l=Math.sqrt(O*O+N*N+z*z),o/t<i){if(M=0,l/t<i)return P=Fe,b=-r,{x:n.x,y:n.y,z:n.z}}else M=Math.atan2(N,O);u=z/l,f=o/l,d=1/Math.sqrt(1-e*(2-e)*f*f),x=f*(1-e)*d,v=u*d,C=0;do C++,p=t/Math.sqrt(1-e*v*v),b=o*x+z*v-p*(1-e*v*v),g=e*p/(p+b),d=1/Math.sqrt(1-g*(2-g)*f*f),E=f*(1-g)*d,R=u*d,S=R*x-E*v,x=E,v=R;while(S*S>s&&C<a);return P=Math.atan(R/Math.abs(E)),{x:M,y:P,z:b}}function Use(n,e,t){if(e===gh)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===mh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6];return{x:u*(n.x-l*n.y+o*n.z)+r,y:u*(l*n.x+n.y-a*n.z)+i,z:u*(-o*n.x+a*n.y+n.z)+s}}}function zse(n,e,t){if(e===gh)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===mh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=(n.x-r)/u,d=(n.y-i)/u,g=(n.z-s)/u;return{x:f+l*d-o*g,y:-l*f+d+a*g,z:o*f-a*d+g}}}function u1(n){return n===gh||n===mh}function $se(n,e,t){if(Gse(n,e)||n.datum_type===oS||e.datum_type===oS)return t;var r=n.a,i=n.es;if(n.datum_type===hd){var s=Vk(n,!1,t);if(s!==0)return;r=Pk,i=Mk}var a=e.a,o=e.b,l=e.es;if(e.datum_type===hd&&(a=Pk,o=Uie,l=Mk),i===l&&r===a&&!u1(n.datum_type)&&!u1(e.datum_type))return t;if(t=LF(t,i,r),u1(n.datum_type)&&(t=Use(t,n.datum_type,n.datum_params)),u1(e.datum_type)&&(t=zse(t,e.datum_type,e.datum_params)),t=NF(t,l,a,o),e.datum_type===hd){var u=Vk(e,!0,t);if(u!==0)return}return t}function Vk(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<n.grids.length;a++){var o=n.grids[a];if(s.push(o.name),o.isNull){i=r;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,u=0,f=l.length;u<f;u++){var d=l[u],g=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-g,x=d.ll[1]-g,v=d.ll[0]+(d.lim[0]-1)*d.del[0]+g,E=d.ll[1]+(d.lim[1]-1)*d.del[1]+g;if(!(x>r.y||p>r.x||E<r.y||v<r.x)&&(i=Wse(r,e,d),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Zi+" "+r.y*Zi+" tried: '"+s+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function Wse(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=Je(i.x-Math.PI)+Math.PI;var s=jk(i,t);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,o=1e-12,l,u;do{if(u=jk(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+s.x),y:i.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Je(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=n.x+s.x,r.y=n.y+s.y);return r}function jk(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var u={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var f={x:e.cvs[a][0],y:e.cvs[a][1]},d=i.x*i.y,g=i.x*(1-i.y),p=(1-i.x)*(1-i.y),x=(1-i.x)*i.y;return s.x=p*o.x+g*l.x+x*f.x+d*u.x,s.y=p*o.y+g*l.y+x*f.y+d*u.y,s}function Bk(n,e,t){var r=t.x,i=t.y,s=t.z||0,a,o,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(a=r,"ew".indexOf(n.axis[l])!==-1?o="x":o="y"):l===1?(a=i,"ns".indexOf(n.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),n.axis[l]){case"e":u[o]=a;break;case"w":u[o]=-a;break;case"n":u[o]=a;break;case"s":u[o]=-a;break;case"u":t[o]!==void 0&&(u.z=a);break;case"d":t[o]!==void 0&&(u.z=-a);break;default:return null}return u}function DF(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function Hse(n){Gk(n.x),Gk(n.y)}function Gk(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function Kse(n,e){return(n.datum.datum_type===gh||n.datum.datum_type===mh||n.datum.datum_type===hd)&&e.datumCode!=="WGS84"||(e.datum.datum_type===gh||e.datum.datum_type===mh||e.datum.datum_type===hd)&&n.datumCode!=="WGS84"}function iv(n,e,t,r){var i;Array.isArray(t)?t=DF(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(Hse(t),n.datum&&e.datum&&Kse(n,e)&&(i=new ea("WGS84"),t=iv(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=Bk(n,!1,t)),n.projName==="longlat")t={x:t.x*$n,y:t.y*$n,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=$se(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Zi,y:t.y*Zi,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?Bk(e,!0,t):(t&&!s&&delete t.z,t)}var Uk=ea("WGS84");function w2(n,e,t,r){var i,s,a;return Array.isArray(t)?(i=iv(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(s=iv(n,e,t,r),a=Object.keys(t),a.length===2||a.forEach(function(o){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=t[o]}),s)}function h1(n){return n instanceof ea?n:typeof n=="object"&&"oProj"in n?n.oProj:ea(n)}function qse(n,e,t){var r,i,s=!1,a;return typeof e>"u"?(i=h1(n),r=Uk,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=h1(n),r=Uk,s=!0),r||(r=h1(n)),i||(i=h1(e)),t?w2(r,i,t):(a={forward:function(o,l){return w2(r,i,o,l)},inverse:function(o,l){return w2(i,r,o,l)}},s&&(a.oProj=i),a)}var zk=6,FF="AJSAJS",VF="AFAFAF",Jf=65,zi=73,$s=79,yg=86,vg=90;const Xse={forward:jF,inverse:Yse,toPoint:BF};function jF(n,e){return e=e||5,Jse(Zse({lat:n[1],lon:n[0]}),e)}function Yse(n){var e=YA(UF(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function BF(n){var e=YA(UF(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function T2(n){return n*(Math.PI/180)}function $k(n){return 180*(n/Math.PI)}function Zse(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,s=.9996,a,o,l,u,f,d,g,p=T2(e),x=T2(t),v,E;E=Math.floor((t+180)/6)+1,t===180&&(E=60),e>=56&&e<64&&t>=3&&t<12&&(E=32),e>=72&&e<84&&(t>=0&&t<9?E=31:t>=9&&t<21?E=33:t>=21&&t<33?E=35:t>=33&&t<42&&(E=37)),a=(E-1)*6-180+3,v=T2(a),o=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),f=o*Math.cos(p)*Math.cos(p),d=Math.cos(p)*(x-v),g=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var R=s*l*(d+(1-u+f)*d*d*d/6+(5-18*u+u*u+72*f-58*o)*d*d*d*d*d/120)+5e5,S=s*(g+l*Math.tan(p)*(d*d/2+(5-u+9*f+4*f*f)*d*d*d*d/24+(61-58*u+u*u+600*f-330*o)*d*d*d*d*d*d/720));return e<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(R),zoneNumber:E,zoneLetter:Qse(e)}}function YA(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,o=.00669438,l,u=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),f,d,g,p,x,v,E,R,S,C=t-5e5,O=e;r<"N"&&(O-=1e7),E=(i-1)*6-180+3,l=o/(1-o),v=O/s,R=v/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),S=R+(3*u/2-27*u*u*u/32)*Math.sin(2*R)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*R)+151*u*u*u/96*Math.sin(6*R),f=a/Math.sqrt(1-o*Math.sin(S)*Math.sin(S)),d=Math.tan(S)*Math.tan(S),g=l*Math.cos(S)*Math.cos(S),p=a*(1-o)/Math.pow(1-o*Math.sin(S)*Math.sin(S),1.5),x=C/(f*s);var N=S-f*Math.tan(S)/p*(x*x/2-(5+3*d+10*g-4*g*g-9*l)*x*x*x*x/24+(61+90*d+298*g+45*d*d-252*l-3*g*g)*x*x*x*x*x*x/720);N=$k(N);var z=(x-(1+2*d+g)*x*x*x/6+(5-2*g+28*d-3*g*g+8*l+24*d*d)*x*x*x*x*x/120)/Math.cos(S);z=E+$k(z);var M;if(n.accuracy){var P=YA({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});M={top:P.lat,right:P.lon,bottom:N,left:z}}else M={lat:N,lon:z};return M}function Qse(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function Jse(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+eae(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function eae(n,e,t){var r=GF(t),i=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return tae(i,s,r)}function GF(n){var e=n%zk;return e===0&&(e=zk),e}function tae(n,e,t){var r=t-1,i=FF.charCodeAt(r),s=VF.charCodeAt(r),a=i+n-1,o=s+e,l=!1;a>vg&&(a=a-vg+Jf-1,l=!0),(a===zi||i<zi&&a>zi||(a>zi||i<zi)&&l)&&a++,(a===$s||i<$s&&a>$s||(a>$s||i<$s)&&l)&&(a++,a===zi&&a++),a>vg&&(a=a-vg+Jf-1),o>yg?(o=o-yg+Jf-1,l=!0):l=!1,(o===zi||s<zi&&o>zi||(o>zi||s<zi)&&l)&&o++,(o===$s||s<$s&&o>$s||(o>$s||s<$s)&&l)&&(o++,o===zi&&o++),o>yg&&(o=o-yg+Jf-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function UF(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var o=n.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+n;t=n.substring(s,s+=2);for(var l=GF(a),u=nae(t.charAt(0),l),f=rae(t.charAt(1),l);f<iae(o);)f+=2e6;var d=e-s;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var g=d/2,p=0,x=0,v,E,R,S,C;return g>0&&(v=1e5/Math.pow(10,g),E=n.substring(s,s+g),p=parseFloat(E)*v,R=n.substring(s+g),x=parseFloat(R)*v),S=p+u,C=x+f,{easting:S,northing:C,zoneLetter:o,zoneNumber:a,accuracy:v}}function nae(n,e){for(var t=FF.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===zi&&t++,t===$s&&t++,t>vg){if(i)throw"Bad character: "+n;t=Jf,i=!0}r+=1e5}return r}function rae(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=VF.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===zi&&t++,t===$s&&t++,t>yg){if(i)throw"Bad character: "+n;t=Jf,i=!0}r+=1e5}return r}function iae(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function Ud(n,e,t){if(!(this instanceof Ud))return new Ud(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ud.fromMGRS=function(n){return new Ud(BF(n))};Ud.prototype.toMGRS=function(n){return jF([this.x,this.y],n)};var sae=1,aae=.25,Wk=.046875,Hk=.01953125,Kk=.01068115234375,oae=.75,lae=.46875,cae=.013020833333333334,uae=.007120768229166667,hae=.3645833333333333,fae=.005696614583333333,dae=.3076171875;function ZA(n){var e=[];e[0]=sae-n*(aae+n*(Wk+n*(Hk+n*Kk))),e[1]=n*(oae-n*(Wk+n*(Hk+n*Kk)));var t=n*n;return e[2]=t*(lae-n*(cae+n*uae)),t*=n,e[3]=t*(hae-n*fae),e[4]=t*n*dae,e}function e0(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var gae=20;function QA(n,e,t){for(var r=1/(1-e),i=n,s=gae;s;--s){var a=Math.sin(i),o=1-e*a*a;if(o=(e0(i,a,Math.cos(i),t)-n)*(o*Math.sqrt(o))*r,i-=o,Math.abs(o)<Ye)return i}return i}function mae(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=ZA(this.es),this.ml0=e0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function pae(n){var e=n.x,t=n.y,r=Je(e-this.long0,this.over),i,s,a,o=Math.sin(t),l=Math.cos(t);if(this.es){var f=l*r,d=Math.pow(f,2),g=this.ep2*Math.pow(l,2),p=Math.pow(g,2),x=Math.abs(l)>Ye?Math.tan(t):0,v=Math.pow(x,2),E=Math.pow(v,2);i=1-this.es*Math.pow(o,2),f=f/Math.sqrt(i);var R=e0(t,o,l,this.en);s=this.a*(this.k0*f*(1+d/6*(1-v+g+d/20*(5-18*v+E+14*g-58*v*g+d/42*(61+179*E-E*v-479*v)))))+this.x0,a=this.a*(this.k0*(R-this.ml0+o*r*f/2*(1+d/12*(5-v+9*g+4*p+d/30*(61+E-58*v+270*g-330*v*g+d/56*(1385+543*E-E*v-3111*v))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<Ye)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,a=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(a),u>=1){if(u-1>Ye)return 93;a=0}else a=Math.acos(a);t<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return n.x=s,n.y=a,n}function _ae(n){var e,t,r,i,s=(n.x-this.x0)*(1/this.a),a=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,t=QA(e,this.es,this.en),Math.abs(t)<Fe){var d=Math.sin(t),g=Math.cos(t),p=Math.abs(g)>Ye?Math.tan(t):0,x=this.ep2*Math.pow(g,2),v=Math.pow(x,2),E=Math.pow(p,2),R=Math.pow(E,2);e=1-this.es*Math.pow(d,2);var S=s*Math.sqrt(e)/this.k0,C=Math.pow(S,2);e=e*p,r=t-e*C/(1-this.es)*.5*(1-C/12*(5+3*E-9*x*E+x-4*v-C/30*(61+90*E-252*x*E+45*R+46*x-C/56*(1385+3633*E+4095*R+1574*R*E)))),i=Je(this.long0+S*(1-C/6*(1+2*E+x-C/20*(5+28*E+24*R+8*x*E+6*x-C/42*(61+662*E+1320*R+720*R*E))))/g,this.over)}else r=Fe*Ip(a),i=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),u=this.lat0+a/this.k0,f=Math.cos(u);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2))),r=Math.asin(e),a<0&&(r=-r),l===0&&f===0?i=0:i=Je(Math.atan2(l,f)+this.long0,this.over)}return n.x=i,n.y=r,n}var yae=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const H1={init:mae,forward:pae,inverse:_ae,names:yae};function zF(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function qi(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function vae(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function xae(n){var e=Math.abs(n);return e=vae(e*(1+e/(qi(1,e)+1))),n<0?-e:e}function JA(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return e+a*Math.sin(2*e)}function Eae(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return Math.sin(e)*a}function wae(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function $F(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),s=zF(t),a=wae(t),o=2*i*a,l=-2*r*s,u=n.length-1,f=n[u],d=0,g=0,p=0,x,v;--u>=0;)x=g,v=d,g=f,d=p,f=-x+o*g-l*d+n[u],p=-v+l*g+o*d;return o=r*a,l=i*s,[o*f-l*p,o*p+l*f]}function Tae(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(H1.init.apply(this),this.forward=H1.forward,this.inverse=H1.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=JA(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Eae(this.gtu,2*r))}function Sae(n){var e=Je(n.x-this.long0,this.over),t=n.y;t=JA(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),s=Math.sin(e),a=Math.cos(e);t=Math.atan2(r,a*i),e=Math.atan2(s*i,qi(r,i*a)),e=xae(Math.tan(e));var o=$F(this.gtu,2*t,2*e);t=t+o[0],e=e+o[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),n.x=l,n.y=u,n}function Iae(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=$F(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(zF(e));var a=Math.sin(t),o=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(a*u,qi(l,u*o)),e=Math.atan2(l,u*o),r=Je(e+this.long0,this.over),i=JA(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var Aae=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const K1={init:Tae,forward:Sae,inverse:Iae,names:Aae};function Rae(n,e){if(n===void 0){if(n=Math.floor((Je(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var Cae="etmerc";function Pae(){var n=Rae(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*$n,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,K1.init.apply(this),this.forward=K1.forward,this.inverse=K1.inverse}var Mae=["Universal Transverse Mercator System","utm"];const bae={init:Pae,names:Mae,dependsOn:Cae};function eR(n,e){return Math.pow((1-n)/(1+n),e)}var kae=20;function Oae(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Jt)/(Math.pow(Math.tan(.5*this.lat0+Jt),this.C)*eR(this.e*n,this.ratexp))}function Lae(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+Jt),this.C)*eR(this.e*Math.sin(t),this.ratexp))-Fe,n.x=this.C*e,n}function Nae(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+Jt)/this.K,1/this.C),s=kae;s>0&&(r=2*Math.atan(i*eR(this.e*Math.sin(n.y),-.5*this.e))-Fe,!(Math.abs(r-n.y)<e));--s)n.y=r;return s?(n.x=t,n.y=r,n):null}const tR={init:Oae,forward:Lae,inverse:Nae};function Dae(){tR.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Fae(n){var e,t,r,i;return n.x=Je(n.x-this.long0,this.over),tR.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Vae(n){var e,t,r,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=qi(n.x,n.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),t=Math.cos(a),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),r=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,tR.inverse.apply(this,[n]),n.x=Je(n.x+this.long0,this.over),n}var jae=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Bae={init:Dae,forward:Fae,inverse:Vae,names:jae};function nR(n,e,t){return e*=t,Math.tan(.5*(Fe+n))*Math.pow((1-e)/(1+e),.5*t)}function Gae(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ye&&(this.k0=.5*(1+Ip(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ye&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ye&&Math.abs(Math.cos(this.lat_ts))>Ye&&(this.k0=.5*this.cons*po(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Aa(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=po(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(nR(this.lat0,this.sinlat0,this.e))-Fe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Uae(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),s,a,o,l,u,f,d=Je(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Ye&&Math.abs(t+this.lat0)<=Ye?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(d)),n.x=this.a*s*i*Math.sin(d)+this.x0,n.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(d))+this.y0,n):(a=2*Math.atan(nR(t,r,this.e))-Fe,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=Ye?(u=Aa(this.e,t*this.con,this.con*r),f=2*this.a*this.k0*u/this.cons,n.x=this.x0+f*Math.sin(e-this.long0),n.y=this.y0-this.con*f*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<Ye?(s=2*this.a*this.k0/(1+l*Math.cos(d)),n.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(d))),n.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(d))+this.y0),n.x=s*l*Math.sin(d)+this.x0,n))}function zae(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,t=this.lat0,a<=Ye?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(o)*this.sinlat0+n.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<Ye?this.lat0>0?e=Je(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=Je(this.long0+Math.atan2(n.x,n.y),this.over):e=Je(this.long0+Math.atan2(n.x*Math.sin(o),a*this.coslat0*Math.cos(o)-n.y*this.sinlat0*Math.sin(o)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=Ye){if(a<=Ye)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=a*this.cons/(2*this.a*this.k0),t=this.con*Nm(this.e,r),e=this.con*Je(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Ye?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/a),e=Je(this.long0+Math.atan2(n.x*Math.sin(i),a*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*Nm(this.e,Math.tan(.5*(Fe+s)));return n.x=e,n.y=t,n}var $ae=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Wae={init:Gae,forward:Uae,inverse:zae,names:$ae,ssfn_:nR};function Hae(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*u}function Kae(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,n.x=this.R*a+this.x0,n}function qae(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+a/this.alpha,l=0,u=s,f=-1e3,d=0;Math.abs(u-f)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),f=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=o,n.y=u,n}var Xae=["somerc"];const Yae={init:Hae,forward:Kae,inverse:qae,names:Xae};var Gf=1e-7;function Zae(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(kF(t))!==-1}function Qae(){var n,e,t,r,i,s,a,o,l,u,f=0,d,g=0,p=0,x=0,v=0,E=0,R=0;this.no_off=Zae(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var C=!1;if("rectified_grid_angle"in this&&(C=!0),S&&(R=this.alpha),C&&(f=this.rectified_grid_angle),S||C)g=this.longc;else if(p=this.long1,v=this.lat1,x=this.long2,E=this.lat2,Math.abs(v-E)<=Gf||(n=Math.abs(v))<=Gf||Math.abs(n-Fe)<=Gf||Math.abs(Math.abs(this.lat0)-Fe)<=Gf||Math.abs(Math.abs(E)-Fe)<=Gf)throw new Error;var O=1-this.es;e=Math.sqrt(O),Math.abs(this.lat0)>Ye?(o=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*o*o,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Aa(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),S||C?(S?(d=Math.asin(Math.sin(R)/r),C||(f=R)):(d=f,R=Math.asin(r*Math.sin(d))),this.lam0=g-Math.asin(.5*(i-1/i)*Math.tan(d))/this.B):(s=Math.pow(Aa(this.e,v,Math.sin(v)),this.B),a=Math.pow(Aa(this.e,E,Math.sin(E)),this.B),i=this.E/s,l=(a-s)/(a+s),u=this.E*this.E,u=(u-a*s)/(u+a*s),n=p-x,n<-Math.PI?x-=Om:n>Math.PI&&(x+=Om),this.lam0=Je(.5*(p+x)-Math.atan(u*Math.tan(.5*this.B*(p-x))/l)/this.B,this.over),d=Math.atan(2*Math.sin(this.B*Je(p-this.lam0,this.over))/(i-1/i)),f=R=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(R))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(Jt-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Jt+i))}function Jae(n){var e={},t,r,i,s,a,o,l,u;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-Fe)>Ye){if(a=this.E/Math.pow(Aa(this.e,n.y,Math.sin(n.y)),this.B),o=1/a,t=.5*(a-o),r=.5*(a+o),s=Math.sin(this.B*n.x),i=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<Ye)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*n.x),Math.abs(o)<Gf?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,o)}else u=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function eoe(n){var e,t,r,i,s,a,o,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),o=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<Ye)l.x=0,l.y=o<0?-Fe:Fe;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=Nm(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var toe=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const noe={init:Qae,forward:Jae,inverse:eoe,names:toe};function roe(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ye)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=po(this.e,e,t),i=Aa(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=po(this.e,s,a),l=Aa(this.e,this.lat2,s),u=Math.abs(Math.abs(this.lat0)-Fe)<Ye?0:Aa(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ye?this.ns=Math.log(r/o)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function ioe(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=Ye&&(t=Ip(t)*(Fe-2*Ye));var r=Math.abs(Math.abs(t)-Fe),i,s;if(r>Ye)i=Aa(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var a=this.ns*Je(e-this.long0,this.over);return n.x=this.k0*(s*Math.sin(a))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,n}function soe(n){var e,t,r,i,s,a=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),t=1):(e=-Math.sqrt(a*a+o*o),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*a,t*o)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=Nm(this.e,r),i===-9999)return null}else i=-Fe;return s=Je(l/this.ns+this.long0,this.over),n.x=s,n.y=i,n}var aoe=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const ooe={init:roe,forward:ioe,inverse:soe,names:aoe};function loe(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function coe(n){var e,t,r,i,s,a,o,l=n.x,u=n.y,f=Je(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=o*Math.cos(a)/1,n.x=o*Math.sin(a)/1,this.czech||(n.y*=-1,n.x*=-1),n}function uoe(n){var e,t,r,i,s,a,o,l,u=n.x;n.x=n.y,n.y=u,this.czech||(n.y*=-1,n.x*=-1),a=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,o=e,l=0;var f=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-n.y)<1e-10&&(l=1),o=n.y,f+=1;while(l===0&&f<15);return f>=15?null:n}var hoe=["Krovak","krovak"];const foe={init:loe,forward:coe,inverse:uoe,names:hoe};function Mi(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function Ap(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function Rp(n){return .375*n*(1+.25*n*(1+.46875*n))}function Cp(n){return .05859375*n*n*(1+.75*n)}function Pp(n){return n*n*n*(35/3072)}function rR(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function Hc(n){return Math.abs(n)<Fe?n:n-Ip(n)*Math.PI}function sv(n,e,t,r,i){var s,a;s=n/e;for(var o=0;o<15;o++)if(a=(n-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function doe(){this.sphere||(this.e0=Ap(this.es),this.e1=Rp(this.es),this.e2=Cp(this.es),this.e3=Pp(this.es),this.ml0=this.a*Mi(this.e0,this.e1,this.e2,this.e3,this.lat0))}function goe(n){var e,t,r=n.x,i=n.y;if(r=Je(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),o=rR(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),f=u*u,d=this.es*a*a/(1-this.es),g=this.a*Mi(this.e0,this.e1,this.e2,this.e3,i);e=o*u*(1-f*l*(1/6-(8-l+8*d)*f/120)),t=g-this.ml0+o*s/a*f*(.5+(5-l+6*d)*f/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function moe(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+t,o=sv(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Fe)<=Ye)return n.x=this.long0,n.y=Fe,t<0&&(n.y*=-1),n;var l=rR(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(o),2),d=e*this.a/l,g=d*d;r=o-l*Math.tan(o)/u*d*d*(.5-(1+3*f)*d*d/24),i=d*(1-g*(f/3+(1+3*f)*f*g/15))/Math.cos(o)}return n.x=Je(i+this.long0,this.over),n.y=Hc(r),n}var poe=["Cassini","Cassini_Soldner","cass"];const _oe={init:doe,forward:goe,inverse:moe,names:poe};function wc(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var uS=1,hS=2,fS=3,q1=4;function yoe(){var n=Math.abs(this.lat0);if(Math.abs(n-Fe)<Ye?this.mode=this.lat0<0?uS:hS:Math.abs(n)<Ye?this.mode=fS:this.mode=q1,this.es>0){var e;switch(this.qp=wc(this.e,1),this.mmf=.5/(1-this.es),this.apa=Roe(this.es),this.mode){case hS:this.dd=1;break;case uS:this.dd=1;break;case fS:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case q1:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=wc(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===q1&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function voe(n){var e,t,r,i,s,a,o,l,u,f,d=n.x,g=n.y;if(d=Je(d-this.long0,this.over),this.sphere){if(s=Math.sin(g),f=Math.cos(g),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+f*r:1+this.sinph0*s+this.cosph0*f*r,t<=Ye)return null;t=Math.sqrt(2/t),e=t*f*Math.sin(d),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(g+this.lat0)<Ye)return null;t=Jt-g*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(d),t*=r}}else{switch(o=0,l=0,u=0,r=Math.cos(d),i=Math.sin(d),s=Math.sin(g),a=wc(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=Fe+g,a=this.qp-a;break;case this.S_POLE:u=g-Fe,a=this.qp+a;break}if(Math.abs(u)<Ye)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*o-this.sinb1*l*r):t=(u=Math.sqrt(2/(1+l*r)))*o*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,t=r*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function xoe(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,s,a,o,l,u;if(this.sphere){var f=0,d,g=0;if(d=Math.sqrt(e*e+t*t),i=d*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=Ye?0:Math.asin(t*g/d),e*=g,t=f*d;break;case this.OBLIQ:i=Math.abs(d)<=Ye?this.lat0:Math.asin(f*this.sinph0+t*g*this.cosph0/d),e*=g*this.cosph0,t=(f-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:t=-t,i=Fe-i;break;case this.S_POLE:i-=Fe;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<Ye)return n.x=this.long0,n.y=this.lat0,n;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(u=s*this.sinb1+t*a*this.cosb1/l,o=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*a):(u=t*a/l,o=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=e*e+t*t,!o)return n.x=this.long0,n.y=this.lat0,n;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,t),i=Coe(Math.asin(u),this.apa)}return n.x=Je(this.long0+r,this.over),n.y=i,n}var Eoe=.3333333333333333,woe=.17222222222222222,Toe=.10257936507936508,Soe=.06388888888888888,Ioe=.0664021164021164,Aoe=.016415012942191543;function Roe(n){var e,t=[];return t[0]=n*Eoe,e=n*n,t[0]+=e*woe,t[1]=e*Soe,e*=n,t[0]+=e*Toe,t[1]+=e*Ioe,t[2]=e*Aoe,t}function Coe(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var Poe=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Moe={init:yoe,forward:voe,inverse:xoe,names:Poe,S_POLE:uS,N_POLE:hS,EQUIT:fS,OBLIQ:q1};function Fc(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function boe(){Math.abs(this.lat1+this.lat2)<Ye||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=po(this.e3,this.sin_po,this.cos_po),this.qs1=wc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=po(this.e3,this.sin_po,this.cos_po),this.qs2=wc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=wc(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ye?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function koe(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=wc(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*Je(e-this.long0,this.over),a=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return n.x=a,n.y=o,n}function Ooe(n){var e,t,r,i,s,a;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,t)),s=Je(i/this.ns0+this.long0,this.over),n.x=s,n.y=a,n}function Loe(n,e){var t,r,i,s,a,o=Fc(.5*e);if(n<Ye)return o;for(var l=n*n,u=1;u<=25;u++)if(t=Math.sin(o),r=Math.cos(o),i=n*t,s=1-i*i,a=.5*s*s/r*(e/(1-l)-t/s+.5/n*Math.log((1-i)/(1+i))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var Noe=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Doe={init:boe,forward:koe,inverse:Ooe,names:Noe,phi1z:Loe};function Foe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Voe(n){var e,t,r,i,s,a,o,l,u=n.x,f=n.y;return r=Je(u-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,a>0||Math.abs(a)<=Ye?(o=this.x0+this.a*s*t*Math.sin(r)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)/a):(o=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function joe(n){var e,t,r,i,s,a;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),a=Fc(r*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),s=Je(this.long0+s,this.over)):(a=this.phic0,s=0),n.x=s,n.y=a,n}var Boe=["gnom"];const Goe={init:Foe,forward:Voe,inverse:joe,names:Boe};function Uoe(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Fe:Fe;for(var r=Math.asin(.5*e),i,s,a,o,l=0;l<30;l++)if(s=Math.sin(r),a=Math.cos(r),o=n*s,i=Math.pow(1-o*o,2)/(2*a)*(e/(1-n*n)-s/(1-o*o)+.5/n*Math.log((1-o)/(1+o))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function zoe(){this.sphere||(this.k0=po(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function $oe(n){var e=n.x,t=n.y,r,i,s=Je(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var a=wc(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return n.x=r,n.y=i,n}function Woe(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=Je(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=Uoe(this.e,2*n.y*this.k0/this.a),e=Je(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var Hoe=["cea"];const Koe={init:zoe,forward:$oe,inverse:Woe,names:Hoe};function qoe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Xoe(n){var e=n.x,t=n.y,r=Je(e-this.long0,this.over),i=Hc(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function Yoe(n){var e=n.x,t=n.y;return n.x=Je(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=Hc(this.lat0+(t-this.y0)/this.a),n}var Zoe=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Qoe={init:qoe,forward:Xoe,inverse:Yoe,names:Zoe};var qk=20;function Joe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ap(this.es),this.e1=Rp(this.es),this.e2=Cp(this.es),this.e3=Pp(this.es),this.ml0=this.a*Mi(this.e0,this.e1,this.e2,this.e3,this.lat0)}function ele(n){var e=n.x,t=n.y,r,i,s,a=Je(e-this.long0,this.over);if(s=a*Math.sin(t),this.sphere)Math.abs(t)<=Ye?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),i=this.a*(Hc(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=Ye)r=this.a*a,i=-1*this.ml0;else{var o=rR(this.a,this.e,Math.sin(t))/Math.tan(t);r=o*Math.sin(s),i=this.a*Mi(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(s))}return n.x=r+this.x0,n.y=i+this.y0,n}function tle(n){var e,t,r,i,s,a,o,l,u;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Ye)e=Je(r/this.a+this.long0,this.over),t=0;else{a=this.lat0+i/this.a,o=r*r/this.a/this.a+a*a,l=a;var f;for(s=qk;s;--s)if(f=Math.tan(l),u=-1*(a*(l*f+1)-l-.5*(l*l+o)*f)/((l-a)/f-1),l+=u,Math.abs(u)<=Ye){t=l;break}e=Je(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=Ye)t=0,e=Je(this.long0+r/this.a,this.over);else{a=(this.ml0+i)/this.a,o=r*r/this.a/this.a+a*a,l=a;var d,g,p,x,v;for(s=qk;s;--s)if(v=this.e*Math.sin(l),d=Math.sqrt(1-v*v)*Math.tan(l),g=this.a*Mi(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),x=g/this.a,u=(a*(d*x+1)-x-.5*d*(x*x+o))/(this.es*Math.sin(2*l)*(x*x+o-2*a*x)/(4*d)+(a-x)*(d*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=Ye){t=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=Je(this.long0+Math.asin(r*d/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var nle=["Polyconic","American_Polyconic","poly"];const rle={init:Joe,forward:ele,inverse:tle,names:nle};function ile(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function sle(n){var e,t=n.x,r=n.y,i=r-this.lat0,s=t-this.long0,a=i/Vg*1e-5,o=s,l=1,u=0;for(e=1;e<=10;e++)l=l*a,u=u+this.A[e]*l;var f=u,d=o,g=1,p=0,x,v,E=0,R=0;for(e=1;e<=6;e++)x=g*f-p*d,v=p*f+g*d,g=x,p=v,E=E+this.B_re[e]*g-this.B_im[e]*p,R=R+this.B_im[e]*g+this.B_re[e]*p;return n.x=R*this.a+this.x0,n.y=E*this.a+this.y0,n}function ale(n){var e,t=n.x,r=n.y,i=t-this.x0,s=r-this.y0,a=s/this.a,o=i/this.a,l=1,u=0,f,d,g=0,p=0;for(e=1;e<=6;e++)f=l*a-u*o,d=u*a+l*o,l=f,u=d,g=g+this.C_re[e]*l-this.C_im[e]*u,p=p+this.C_im[e]*l+this.C_re[e]*u;for(var x=0;x<this.iterations;x++){var v=g,E=p,R,S,C=a,O=o;for(e=2;e<=6;e++)R=v*g-E*p,S=E*g+v*p,v=R,E=S,C=C+(e-1)*(this.B_re[e]*v-this.B_im[e]*E),O=O+(e-1)*(this.B_im[e]*v+this.B_re[e]*E);v=1,E=0;var N=this.B_re[1],z=this.B_im[1];for(e=2;e<=6;e++)R=v*g-E*p,S=E*g+v*p,v=R,E=S,N=N+e*(this.B_re[e]*v-this.B_im[e]*E),z=z+e*(this.B_im[e]*v+this.B_re[e]*E);var M=N*N+z*z;g=(C*N+O*z)/M,p=(O*N-C*z)/M}var P=g,b=p,D=1,B=0;for(e=1;e<=9;e++)D=D*P,B=B+this.D[e]*D;var U=this.lat0+B*Vg*1e5,V=this.long0+b;return n.x=V,n.y=U,n}var ole=["New_Zealand_Map_Grid","nzmg"];const lle={init:ile,forward:sle,inverse:ale,names:ole};function cle(){}function ule(n){var e=n.x,t=n.y,r=Je(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=s,n}function hle(n){n.x-=this.x0,n.y-=this.y0;var e=Je(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var fle=["Miller_Cylindrical","mill"];const dle={init:cle,forward:ule,inverse:hle,names:fle};var gle=20;function mle(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ZA(this.es)}function ple(n){var e,t,r=n.x,i=n.y;if(r=Je(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=gle;a;--a){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<Ye)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);t=this.a*e0(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function _le(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=Fc((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Fc(Math.sin(e)/this.n)),r=Je(r+this.long0,this.over),e=Hc(e)):(e=QA(n.y/this.a,this.es,this.en),i=Math.abs(e),i<Fe?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=Je(t,this.over)):i-Ye<Fe&&(r=this.long0)),n.x=r,n.y=e,n}var yle=["Sinusoidal","sinu"];const vle={init:mle,forward:ple,inverse:_le,names:yle};function xle(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function Ele(n){for(var e=n.x,t=n.y,r=Je(e-this.long0,this.over),i=t,s=Math.PI*Math.sin(t);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Ye)break}i/=2,Math.PI/2-Math.abs(t)<Ye&&(r=0);var o=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=o,n.y=l,n}function wle(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=Je(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var Tle=["Mollweide","moll"];const Sle={init:xle,forward:Ele,inverse:wle,names:Tle};function Ile(){Math.abs(this.lat1+this.lat2)<Ye||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ap(this.es),this.e1=Rp(this.es),this.e2=Cp(this.es),this.e3=Pp(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=po(this.e,this.sin_phi,this.cos_phi),this.ml1=Mi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ye?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=po(this.e,this.sin_phi,this.cos_phi),this.ml2=Mi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Mi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Ale(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=Mi(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var s=this.ns*Je(e-this.long0,this.over),a=this.x0+r*Math.sin(s),o=this.y0+this.rh-r*Math.cos(s);return n.x=a,n.y=o,n}function Rle(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=Je(this.long0+s/this.ns,this.over),r=Hc(this.g-t/this.a),n.x=i,n.y=r,n;var a=this.g-t/this.a;return r=sv(a,this.e0,this.e1,this.e2,this.e3),i=Je(this.long0+s/this.ns,this.over),n.x=i,n.y=r,n}var Cle=["Equidistant_Conic","eqdc"];const Ple={init:Ile,forward:Ale,inverse:Rle,names:Cle};function Mle(){this.R=this.a}function ble(n){var e=n.x,t=n.y,r=Je(e-this.long0,this.over),i,s;Math.abs(t)<=Ye&&(i=this.x0+this.R*r,s=this.y0);var a=Fc(2*Math.abs(t/Math.PI));(Math.abs(r)<=Ye||Math.abs(Math.abs(t)-Fe)<=Ye)&&(i=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/r-r/Math.PI),l=o*o,u=Math.sin(a),f=Math.cos(a),d=f/(u+f-1),g=d*d,p=d*(2/u-1),x=p*p,v=Math.PI*this.R*(o*(d-x)+Math.sqrt(l*(d-x)*(d-x)-(x+l)*(g-x)))/(x+l);r<0&&(v=-v),i=this.x0+v;var E=l+d;return v=Math.PI*this.R*(p*E-o*Math.sqrt((x+l)*(l+1)-E*E))/(x+l),t>=0?s=this.y0+v:s=this.y0-v,n.x=i,n.y=s,n}function kle(n){var e,t,r,i,s,a,o,l,u,f,d,g,p;return n.x-=this.x0,n.y-=this.y0,d=Math.PI*this.R,r=n.x/d,i=n.y/d,s=r*r+i*i,a=-Math.abs(i)*(1+s),o=a-2*i*i+r*r,l=-2*a+1+2*i*i+s*s,p=i*i/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,u=(a-o*o/3/l)/l,f=2*Math.sqrt(-u/3),d=3*p/u/f,Math.abs(d)>1&&(d>=0?d=1:d=-1),g=Math.acos(d)/3,n.y>=0?t=(-f*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI:t=-(-f*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI,Math.abs(r)<Ye?e=this.long0:e=Je(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),n.x=e,n.y=t,n}var Ole=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const Lle={init:Mle,forward:ble,inverse:kle,names:Ole};function Nle(n,e,t,r,i,s){const a=r-e,o=Math.atan((1-s)*Math.tan(n)),l=Math.atan((1-s)*Math.tan(t)),u=Math.sin(o),f=Math.cos(o),d=Math.sin(l),g=Math.cos(l);let p=a,x,v=100,E,R,S,C,O,N,z,M,P,b,D,B,U,V;do{if(E=Math.sin(p),R=Math.cos(p),S=Math.sqrt(g*E*(g*E)+(f*d-u*g*R)*(f*d-u*g*R)),S===0)return{azi1:0,s12:0};C=u*d+f*g*R,O=Math.atan2(S,C),N=f*g*E/S,z=1-N*N,M=z!==0?C-2*u*d/z:0,P=s/16*z*(4+s*(4-3*z)),x=p,p=a+(1-P)*s*N*(O+P*S*(M+P*C*(-1+2*M*M)))}while(Math.abs(p-x)>1e-12&&--v>0);return v===0?{azi1:NaN,s12:NaN}:(b=z*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),D=1+b/16384*(4096+b*(-768+b*(320-175*b))),B=b/1024*(256+b*(-128+b*(74-47*b))),U=B*S*(M+B/4*(C*(-1+2*M*M)-B/6*M*(-3+4*S*S)*(-3+4*M*M))),V=i*(1-s)*D*(O-U),{azi1:Math.atan2(g*E,f*d-u*g*R),s12:V})}function Dle(n,e,t,r,i,s){const a=Math.atan((1-s)*Math.tan(n)),o=Math.sin(a),l=Math.cos(a),u=Math.sin(t),f=Math.cos(t),d=Math.atan2(o,l*f),g=l*u,p=1-g*g,x=p*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),v=1+x/16384*(4096+x*(-768+x*(320-175*x))),E=x/1024*(256+x*(-128+x*(74-47*x)));let R=r/(i*(1-s)*v),S,C=100,O,N,z,M;do O=Math.cos(2*d+R),N=Math.sin(R),z=Math.cos(R),M=E*N*(O+E/4*(z*(-1+2*O*O)-E/6*O*(-3+4*N*N)*(-3+4*O*O))),S=R,R=r/(i*(1-s)*v)+M;while(Math.abs(R-S)>1e-12&&--C>0);if(C===0)return{lat2:NaN,lon2:NaN};const P=o*N-l*z*f,b=Math.atan2(o*z+l*N*f,(1-s)*Math.sqrt(g*g+P*P)),D=Math.atan2(N*u,l*z-o*N*f),B=s/16*p*(4+s*(4-3*p)),U=D-(1-B)*s*g*(R+B*N*(O+B*z*(-1+2*O*O))),V=e+U;return{lat2:b,lon2:V}}function Fle(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Vle(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),s=Je(e-this.long0,this.over),a,o,l,u,f,d,g,p,x,v,E;return this.sphere?Math.abs(this.sin_p12-1)<=Ye?(n.x=this.x0+this.a*(Fe-t)*Math.sin(s),n.y=this.y0-this.a*(Fe-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=Ye?(n.x=this.x0+this.a*(Fe+t)*Math.sin(s),n.y=this.y0+this.a*(Fe+t)*Math.cos(s),n):(x=this.sin_p12*r+this.cos_p12*i*Math.cos(s),g=Math.acos(x),p=g?g/Math.sin(g):1,n.x=this.x0+this.a*p*i*Math.sin(s),n.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),n):(a=Ap(this.es),o=Rp(this.es),l=Cp(this.es),u=Pp(this.es),Math.abs(this.sin_p12-1)<=Ye?(f=this.a*Mi(a,o,l,u,Fe),d=this.a*Mi(a,o,l,u,t),n.x=this.x0+(f-d)*Math.sin(s),n.y=this.y0-(f-d)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=Ye?(f=this.a*Mi(a,o,l,u,Fe),d=this.a*Mi(a,o,l,u,t),n.x=this.x0+(f+d)*Math.sin(s),n.y=this.y0+(f+d)*Math.cos(s),n):Math.abs(e)<Ye&&Math.abs(t-this.lat0)<Ye?(n.x=n.y=0,n):(v=Nle(this.lat0,this.long0,t,e,this.a,this.f),E=v.azi1,n.x=v.s12*Math.sin(E),n.y=v.s12*Math.cos(E),n))}function jle(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a,o,l,u,f,d,g,p,x,v,E;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*Fe*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=Ye?a=this.lat0:(a=Fc(i*this.sin_p12+n.y*r*this.cos_p12/e),o=Math.abs(this.lat0)-Fe,Math.abs(o)<=Ye?this.lat0>=0?s=Je(this.long0+Math.atan2(n.x,-n.y),this.over):s=Je(this.long0-Math.atan2(-n.x,n.y),this.over):s=Je(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=s,n.y=a,n)):(l=Ap(this.es),u=Rp(this.es),f=Cp(this.es),d=Pp(this.es),Math.abs(this.sin_p12-1)<=Ye?(g=this.a*Mi(l,u,f,d,Fe),e=Math.sqrt(n.x*n.x+n.y*n.y),p=g-e,a=sv(p/this.a,l,u,f,d),s=Je(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=s,n.y=a,n):Math.abs(this.sin_p12+1)<=Ye?(g=this.a*Mi(l,u,f,d,Fe),e=Math.sqrt(n.x*n.x+n.y*n.y),p=e-g,a=sv(p/this.a,l,u,f,d),s=Je(this.long0+Math.atan2(n.x,n.y),this.over),n.x=s,n.y=a,n):(x=Math.atan2(n.x,n.y),v=Math.sqrt(n.x*n.x+n.y*n.y),E=Dle(this.lat0,this.long0,x,v,this.a,this.f),n.x=E.lon2,n.y=E.lat2,n))}var Ble=["Azimuthal_Equidistant","aeqd"];const Gle={init:Fle,forward:Vle,inverse:jle,names:Ble};function Ule(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function zle(n){var e,t,r,i,s,a,o,l,u=n.x,f=n.y;return r=Je(u-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,(a>0||Math.abs(a)<=Ye)&&(o=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function $le(n){var e,t,r,i,s,a,o;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=Fc(e/this.a),r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=Ye?(o=this.lat0,n.x=a,n.y=o,n):(o=Fc(i*this.sin_p14+n.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-Fe,Math.abs(s)<=Ye?(this.lat0>=0?a=Je(this.long0+Math.atan2(n.x,-n.y),this.over):a=Je(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=a,n.y=o,n):(a=Je(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=a,n.y=o,n))}var Wle=["ortho"];const Hle={init:Ule,forward:zle,inverse:$le,names:Wle};var Vn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},en={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Kle(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Fe-Jt/2?this.face=Vn.TOP:this.lat0<=-(Fe-Jt/2)?this.face=Vn.BOTTOM:Math.abs(this.long0)<=Jt?this.face=Vn.FRONT:Math.abs(this.long0)<=Fe+Jt?this.face=this.long0>0?Vn.RIGHT:Vn.LEFT:this.face=Vn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function qle(n){var e={x:0,y:0},t,r,i,s,a,o,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===Vn.TOP)s=Fe-t,r>=Jt&&r<=Fe+Jt?(l.value=en.AREA_0,i=r-Fe):r>Fe+Jt||r<=-(Fe+Jt)?(l.value=en.AREA_1,i=r>0?r-er:r+er):r>-(Fe+Jt)&&r<=-Jt?(l.value=en.AREA_2,i=r+Fe):(l.value=en.AREA_3,i=r);else if(this.face===Vn.BOTTOM)s=Fe+t,r>=Jt&&r<=Fe+Jt?(l.value=en.AREA_0,i=-r+Fe):r<Jt&&r>=-Jt?(l.value=en.AREA_1,i=-r):r<-Jt&&r>=-(Fe+Jt)?(l.value=en.AREA_2,i=-r-Fe):(l.value=en.AREA_3,i=r>0?-r+er:-r-er);else{var u,f,d,g,p,x,v;this.face===Vn.RIGHT?r=fd(r,+Fe):this.face===Vn.BACK?r=fd(r,+er):this.face===Vn.LEFT&&(r=fd(r,-Fe)),g=Math.sin(t),p=Math.cos(t),x=Math.sin(r),v=Math.cos(r),u=p*v,f=p*x,d=g,this.face===Vn.FRONT?(s=Math.acos(u),i=f1(s,d,f,l)):this.face===Vn.RIGHT?(s=Math.acos(f),i=f1(s,d,-u,l)):this.face===Vn.BACK?(s=Math.acos(-u),i=f1(s,d,-f,l)):this.face===Vn.LEFT?(s=Math.acos(-f),i=f1(s,d,u,l)):(s=i=0,l.value=en.AREA_0)}return o=Math.atan(12/er*(i+Math.acos(Math.sin(i)*Math.cos(Jt))-Fe)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===en.AREA_1?o+=Fe:l.value===en.AREA_2?o+=er:l.value===en.AREA_3&&(o+=1.5*er),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function Xle(n){var e={lam:0,phi:0},t,r,i,s,a,o,l,u,f,d={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?d.value=en.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(d.value=en.AREA_1,t-=Fe):n.x<0&&-n.x>=Math.abs(n.y)?(d.value=en.AREA_2,t=t<0?t+er:t-er):(d.value=en.AREA_3,t+=Fe),f=er/12*Math.tan(t),a=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),o=Math.atan(a),i=Math.cos(t),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===Vn.TOP)u=Math.acos(l),e.phi=Fe-u,d.value===en.AREA_0?e.lam=o+Fe:d.value===en.AREA_1?e.lam=o<0?o+er:o-er:d.value===en.AREA_2?e.lam=o-Fe:e.lam=o;else if(this.face===Vn.BOTTOM)u=Math.acos(l),e.phi=u-Fe,d.value===en.AREA_0?e.lam=-o+Fe:d.value===en.AREA_1?e.lam=-o:d.value===en.AREA_2?e.lam=-o-Fe:e.lam=o<0?-o-er:-o+er;else{var g,p,x;g=l,f=g*g,f>=1?x=0:x=Math.sqrt(1-f)*Math.sin(o),f+=x*x,f>=1?p=0:p=Math.sqrt(1-f),d.value===en.AREA_1?(f=p,p=-x,x=f):d.value===en.AREA_2?(p=-p,x=-x):d.value===en.AREA_3&&(f=p,p=x,x=-f),this.face===Vn.RIGHT?(f=g,g=-p,p=f):this.face===Vn.BACK?(g=-g,p=-p):this.face===Vn.LEFT&&(f=g,g=p,p=-f),e.phi=Math.acos(-x)-Fe,e.lam=Math.atan2(p,g),this.face===Vn.RIGHT?e.lam=fd(e.lam,-Fe):this.face===Vn.BACK?e.lam=fd(e.lam,-er):this.face===Vn.LEFT&&(e.lam=fd(e.lam,+Fe))}if(this.es!==0){var v,E,R;v=e.phi<0?1:0,E=Math.tan(e.phi),R=this.b/Math.sqrt(E*E+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-R*R)/(this.one_minus_f*R)),v&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function f1(n,e,t,r){var i;return n<Ye?(r.value=en.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=Jt?r.value=en.AREA_0:i>Jt&&i<=Fe+Jt?(r.value=en.AREA_1,i-=Fe):i>Fe+Jt||i<=-(Fe+Jt)?(r.value=en.AREA_2,i=i>=0?i-er:i+er):(r.value=en.AREA_3,i+=Fe)),i}function fd(n,e){var t=n+e;return t<-er?t+=Om:t>+er&&(t-=Om),t}var Yle=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Zle={init:Kle,forward:qle,inverse:Xle,names:Yle};var dS=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],xg=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],WF=.8487,HF=1.3523,KF=Zi/5,Qle=1/KF,ed=18,av=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},Jle=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function ece(n,e,t,r){for(var i=e;r;--r){var s=n(i);if(i-=s,Math.abs(s)<t)break}return i}function tce(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function nce(n){var e=Je(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*KF);r<0?r=0:r>=ed&&(r=ed-1),t=Zi*(t-Qle*r);var i={x:av(dS[r],t)*e,y:av(xg[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*WF+this.x0,i.y=i.y*this.a*HF+this.y0,i}function rce(n){var e={x:(n.x-this.x0)/(this.a*WF),y:Math.abs(n.y-this.y0)/(this.a*HF)};if(e.y>=1)e.x/=dS[ed][0],e.y=n.y<0?-Fe:Fe;else{var t=Math.floor(e.y*ed);for(t<0?t=0:t>=ed&&(t=ed-1);;)if(xg[t][0]>e.y)--t;else if(xg[t+1][0]<=e.y)++t;else break;var r=xg[t],i=5*(e.y-r[0])/(xg[t+1][0]-r[0]);i=ece(function(s){return(av(r,s)-e.y)/Jle(r,s)},i,Ye,100),e.x/=av(dS[t],i),e.y=(5*t+i)*$n,n.y<0&&(e.y=-e.y)}return e.x=Je(e.x+this.long0,this.over),e}var ice=["Robinson","robin"];const sce={init:tce,forward:nce,inverse:rce,names:ice};function ace(){this.name="geocent"}function oce(n){var e=LF(n,this.es,this.a);return e}function lce(n){var e=NF(n,this.es,this.a,this.b);return e}var cce=["Geocentric","geocentric","geocent","Geocent"];const uce={init:ace,forward:oce,inverse:lce,names:cce};var di={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},tg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function hce(){if(Object.keys(tg).forEach((function(t){if(typeof this[t]>"u")this[t]=tg[t].def;else{if(tg[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);tg[t].num&&(this[t]=parseFloat(this[t]))}tg[t].degrees&&(this[t]=this[t]*$n)}).bind(this)),Math.abs(Math.abs(this.lat0)-Fe)<Ye?this.mode=this.lat0<0?di.S_POLE:di.N_POLE:Math.abs(this.lat0)<Ye?this.mode=di.EQUIT:(this.mode=di.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function fce(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,s;switch(this.mode){case di.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case di.EQUIT:s=t*r;break;case di.S_POLE:s=-e;break;case di.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*t*Math.sin(n.x),this.mode){case di.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case di.EQUIT:s*=e;break;case di.N_POLE:s*=-(t*r);break;case di.S_POLE:s*=t*r;break}var a,o;return a=s*this.cg+i*this.sg,o=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=a*o,n.x=i*this.a,n.y=s*this.a,n}function dce(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var s=qi(n.x,n.y);if(Math.abs(s)<Ye)e.x=0,e.y=n.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case di.OBLIQ:e.y=Math.asin(a*this.sinph0+n.y*o*this.cosph0/s),n.y=(a-this.sinph0*Math.sin(e.y))*s,n.x*=o*this.cosph0;break;case di.EQUIT:e.y=Math.asin(n.y*o/s),n.y=a*s,n.x*=o;break;case di.N_POLE:e.y=Math.asin(a),n.y=-n.y;break;case di.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var gce=["Tilted_Perspective","tpers"];const mce={init:hce,forward:fce,inverse:dce,names:gce};function pce(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function _ce(n){var e=n.x,t=n.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var o=this.radius_p/qi(this.radius_p*Math.cos(t),Math.sin(t));if(i=o*Math.cos(e)*Math.cos(t),s=o*Math.sin(e)*Math.cos(t),a=o*Math.sin(t),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/qi(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/qi(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/qi(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/qi(s,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function yce(n){var e=-1,t=0,r=0,i,s,a,o;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*qi(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*qi(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var vce=["Geostationary Satellite View","Geostationary_Satellite","geos"];const xce={init:pce,forward:_ce,inverse:yce,names:vce};var jg=1.340264,Bg=-.081106,Gg=893e-6,Ug=.003796,ov=Math.sqrt(3)/2;function Ece(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function wce(n){var e=Je(n.x-this.long0,this.over),t=n.y,r=Math.asin(ov*Math.sin(t)),i=r*r,s=i*i*i;return n.x=e*Math.cos(r)/(ov*(jg+3*Bg*i+s*(7*Gg+9*Ug*i))),n.y=r*(jg+Bg*i+s*(Gg+Ug*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Tce(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,s,a,o,l,u;for(u=0;u<t&&(i=r*r,s=i*i*i,a=r*(jg+Bg*i+s*(Gg+Ug*i))-n.y,o=jg+3*Bg*i+s*(7*Gg+9*Ug*i),r-=l=a/o,!(Math.abs(l)<e));++u);return i=r*r,s=i*i*i,n.x=ov*n.x*(jg+3*Bg*i+s*(7*Gg+9*Ug*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/ov),n.x=Je(n.x+this.long0,this.over),n}var Sce=["eqearth","Equal Earth","Equal_Earth"];const Ice={init:Ece,forward:wce,inverse:Tce,names:Sce};var Dm=1e-10;function Ace(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<Dm)throw new Error;this.es?(this.en=ZA(this.es),this.m1=e0(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Cce,this.forward=Rce):(Math.abs(this.phi1)+Dm>=Fe?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Mce,this.forward=Pce)}function Rce(n){var e=Je(n.x-(this.long0||0),this.over),t=n.y,r,i,s;return r=this.am1+this.m1-e0(t,i=Math.sin(t),s=Math.cos(t),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Cce(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=qi(n.x,n.y=this.am1-n.y),i=QA(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<Fe)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-Fe)<=Dm)r=0;else throw new Error;return n.x=Je(r+(this.long0||0),this.over),n.y=Hc(i),n}function Pce(n){var e=Je(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>Dm?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Mce(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=qi(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Fe)throw new Error;return Math.abs(Math.abs(t)-Fe)<=Dm?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=Je(e+(this.long0||0),this.over),n.y=Hc(t),n}var bce=["bonne","Bonne (Werner lat_1=90)"];const kce={init:Ace,names:bce},Xk={OBLIQUE:{forward:Fce,inverse:jce},TRANSVERSE:{forward:Vce,inverse:Bce}},lv={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Oce(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=MF.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=ea(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const r=Object.keys(lv),i=o=>{if(typeof this[o]>"u")return;const l=parseFloat(this[o])*$n;if(isNaN(l))throw new Error("Invalid value for "+o+": "+this[o]);return l};for(let o=0;o<r.length;o++){const l=r[o],u=lv[l],f=Object.entries(u);if(f.some(([g])=>typeof this[g]<"u")){t=u;for(let g=0;g<f.length;g++){const[p,x]=f[g],v=i(p);if(typeof v>"u")throw new Error("Missing parameter: "+p+".");this[x]=v}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:a}=Dce(this,t);this.lamp=s,Math.abs(a)>Ye?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=Xk.OBLIQUE):this.projectionType=Xk.TRANSVERSE}function Lce(n){return this.projectionType.forward(this,n)}function Nce(n){return this.projectionType.inverse(this,n)}function Dce(n,e){let t,r;if(e===lv.ROTATE){let i=n.oLongC,s=n.oLatC,a=n.oAlpha;if(Math.abs(Math.abs(s)-Fe)<=Ye)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(s)),t=Math.asin(Math.cos(s)*Math.sin(a))}else if(e===lv.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,s=n.oLat1,a=n.oLong2,o=n.oLat2,l=Math.abs(s);if(Math.abs(s)>Fe-Ye)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90");if(Math.abs(o)>Fe-Ye)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90");if(Math.abs(s-o)<Ye)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<Ye)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(o)*Math.cos(i)-Math.sin(s)*Math.cos(o)*Math.cos(a),Math.sin(s)*Math.cos(o)*Math.sin(a)-Math.cos(s)*Math.sin(o)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:t}}function Fce(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(t),s=Math.sin(r),a=Math.cos(r);e.x=Je(Math.atan2(a*Math.sin(t),n.sphip*a*i+n.cphip*s)+n.lamp),e.y=Math.asin(n.sphip*s-n.cphip*a*i);const o=n.obliqueProjection.forward(e);return n.isIdentity&&(o.x*=Zi,o.y*=Zi),o}function Vce(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(r),s=Math.cos(t);e.x=Je(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*s);const a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=Zi,a.y*=Zi),a}function jce(n,e){n.isIdentity&&(e.x*=$n,e.y*=$n);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(r),n.sphip*o*s-n.cphip*a),e.y=Math.asin(n.sphip*a+n.cphip*o*s)}return e.x=Je(e.x+n.long0),e}function Bce(n,e){n.isIdentity&&(e.x*=$n,e.y*=$n);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=n.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=Je(e.x+n.long0),e}var Gce=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Uce={init:Oce,forward:Lce,inverse:Nce,names:Gce};function zce(n){n.Proj.projections.add(H1),n.Proj.projections.add(K1),n.Proj.projections.add(bae),n.Proj.projections.add(Bae),n.Proj.projections.add(Wae),n.Proj.projections.add(Yae),n.Proj.projections.add(noe),n.Proj.projections.add(ooe),n.Proj.projections.add(foe),n.Proj.projections.add(_oe),n.Proj.projections.add(Moe),n.Proj.projections.add(Doe),n.Proj.projections.add(Goe),n.Proj.projections.add(Koe),n.Proj.projections.add(Qoe),n.Proj.projections.add(rle),n.Proj.projections.add(lle),n.Proj.projections.add(dle),n.Proj.projections.add(vle),n.Proj.projections.add(Sle),n.Proj.projections.add(Ple),n.Proj.projections.add(Lle),n.Proj.projections.add(Gle),n.Proj.projections.add(Hle),n.Proj.projections.add(Zle),n.Proj.projections.add(sce),n.Proj.projections.add(uce),n.Proj.projections.add(mce),n.Proj.projections.add(xce),n.Proj.projections.add(Ice),n.Proj.projections.add(kce),n.Proj.projections.add(Uce)}const ln=Object.assign(qse,{defaultDatum:"WGS84",Proj:ea,WGS84:new ea("WGS84"),Point:Ud,toPoint:DF,defs:Hr,nadgrid:Mse,transform:iv,mgrs:Xse,version:"__VERSION__"});zce(ln);class $ce{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=qu,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?En(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=En(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return wt()}readFeature(e,t){return wt()}readFeatures(e,t){return wt()}readGeometry(e,t){return wt()}readProjection(e){return wt()}writeFeature(e,t){return wt()}writeFeatures(e,t){return wt()}writeGeometry(e,t){return wt()}}function iR(n,e,t){const r=t?En(t.featureProjection):null,i=t?En(t.dataProjection):null;let s=n;if(r&&i&&!Gu(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(Jg(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(l){for(let u=0,f=l.length;u<f;++u)l[u]=Math.round(l[u]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Wce={Point:Ic,LineString:Zu,Polygon:Ac,MultiPoint:Fv,MultiLineString:cy,MultiPolygon:uy};function Hce(n,e,t){return Array.isArray(e[0])?(LL(n,0,e,t)||(n=n.slice(),q2(n,0,e,t)),n):($S(n,0,e,t)||(n=n.slice(),oy(n,0,e,t)),n)}function qF(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>qF({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return iR(new xs(r,r==="Polygon"?Hce(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function sR(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>sR(i,e));return new ly(r)}const t=Wce[n.type];return iR(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Kce extends $ce{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(d1(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(d1(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return wt()}readFeaturesFromObject(e,t){return wt()}readGeometry(e,t){return this.readGeometryFromObject(d1(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return wt()}readProjection(e){return this.readProjectionFromObject(d1(e))}readProjectionFromObject(e){return wt()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return wt()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return wt()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return wt()}}function d1(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class qce extends Kce{constructor(e){e=e||{},super(),this.dataProjection=En(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=En(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=aR(r.geometry);if(this.featureClass===xs)return qF({geometry:i,id:r.id,properties:r.properties},t);const s=new qu;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(sR(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,l=a.length;o<l;++o){const u=this.readFeatureFromObject(a[o],t);u&&i.push(u)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Xce(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=En(t.properties.name);else if(t.type==="EPSG")r=En("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=gS(a,t),delete s[e.getGeometryName()]),Ku(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return gS(e,this.adaptOptions(t))}}function aR(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Zce(n);break}case"LineString":{t=Qce(n);break}case"Polygon":{t=nue(n);break}case"MultiPoint":{t=eue(n);break}case"MultiLineString":{t=Jce(n);break}case"MultiPolygon":{t=tue(n);break}case"GeometryCollection":{t=Yce(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Xce(n,e){const t=aR(n);return sR(t,e)}function Yce(n,e){return n.geometries.map(function(r){return aR(r)})}function Zce(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:wh(e.length)}}function Qce(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:wh(e[0]?.length||2)}}function Jce(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=Qm(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:wh(t)}}function eue(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:wh(e[0]?.length||2)}}function tue(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=uL(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:wh(r)}}function nue(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=Qm(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:wh(r)}}function gS(n,e){n=iR(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=lue(n);break}case"LineString":{r=iue(n);break}case"Polygon":{r=cue(n,e);break}case"MultiPoint":{r=aue(n);break}case"MultiLineString":{r=sue(n);break}case"MultiPolygon":{r=oue(n,e);break}case"GeometryCollection":{r=rue(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function rue(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return gS(r,e)})}}function iue(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function sue(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function aue(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function oue(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function lue(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function cue(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}function uue(n){const e=Object.keys(n.defs),t=e.length;let r,i;for(r=0;r<t;++r){const s=e[r];if(!T1(s)){const a=n.defs(s);let o=a.units;!o&&a.projName==="longlat"&&(o="degrees"),ty(new Mv({code:s,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:o}))}}for(r=0;r<t;++r){const s=e[r],a=T1(s);for(i=0;i<t;++i){const o=e[i],l=T1(o);if(!S1(s,o))if(n.defs[s]===n.defs[o])j2([a,l]);else{const u=n(s,o);Oj(a,l,r4(a,l,u.forward),r4(l,a,u.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");ln.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");uue(ln);let ju=null,zg=null,Uf=null;function mS(n){ju&&(n.removeLayer(ju),ju=null),zg&&(n.removeLayer(zg),zg=null),Uf=null}async function hue(n,e){try{const t=on(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${t[0].toFixed(5)}, ${t[1].toFixed(5)}`);const r=ln("EPSG:4326","EPSG:28992",t);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;mS(n);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,a=Date.now(),o=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${a}`;console.log(" WFS URL:",o);const l=new AbortController,u=setTimeout(()=>l.abort(),1e4),f=await fetch(o,{signal:l.signal});if(clearTimeout(u),!f.ok)return console.error("WFS request failed:",f.status),!1;const d=await f.json();if(console.log(" WFS RESPONSE:",JSON.stringify(d).substring(0,500)),!d.features||d.features.length===0)return console.log("No parcel found at location"),!1;const g=d.features[0];console.log(" PARCEL ID:",g.id||g.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(g.bbox||"geen bbox"));const x=new qce().readFeature(g,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),v=x.getGeometry();if(!v)return console.log("No geometry in parcel feature"),!1;const E=g.properties||{};console.log(` Parcel: ${E.category||"unknown"} - ${E.gewasnaam||E.gewas||"geen gewas"}`),console.log(` Geometry type: ${v.getType()}, extent: ${v.getExtent().map(b=>b.toFixed(0)).join(", ")}`);const R=v.getExtent(),S=R[2]-R[0],C=R[3]-R[1],O=Math.max(S,C)*.05,N=[R[0]-O,R[1]-O,R[2]+O,R[3]+O],z=Math.max(S,C)*.3,M=[R[0]-z,R[1]-z,R[2]+z,R[3]+z];Uf=v,ju=new RU({source:new ez({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:N,zIndex:998}),ju.on("prerender",b=>{if(!Uf)return;const D=b.context;if(!D)return;const B=b.frameState;if(!B)return;D.save(),D.beginPath(),(Uf.getType()==="Polygon"?Uf.getCoordinates()[0]:Uf.getCoordinates()[0][0]).forEach((V,Ae)=>{const be=n.getPixelFromCoordinate(V);if(!be)return;const Pe=B.pixelRatio,Me=be[0]*Pe,he=be[1]*Pe;Ae===0?D.moveTo(Me,he):D.lineTo(Me,he)}),D.closePath(),D.clip()}),ju.on("postrender",b=>{const D=b.context;D&&D.restore()}),n.addLayer(ju);const P=new Vv({features:[x]});return zg=new $v({source:P,style:new bi({fill:new Ca({color:"rgba(0, 0, 0, 0)"}),stroke:new Yo({color:"#dc2626",width:3})}),zIndex:999}),n.addLayer(zg),console.log(" Parcel height map displayed"),!0}catch(t){return console.error("Failed to show parcel height map:",t),!1}}var cv={};cv.version="0.18.5";var XF=1252,fue=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],YF=function(n){fue.indexOf(n)!=-1&&(XF=n)};function due(){YF(1252)}var Fm=function(n){YF(n)};function gue(){Fm(1200),due()}var g1=function(e){return String.fromCharCode(e)},Yk=function(e){return String.fromCharCode(e)},uv,hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Vm(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),e+=hc.charAt(s)+hc.charAt(a)+hc.charAt(o)+hc.charAt(l);return e}function cl(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=hc.indexOf(n.charAt(u++)),a=hc.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=hc.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=hc.indexOf(n.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Xt=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),ml=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function ph(n){return Xt?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function Zk(n){return Xt?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var xa=function(e){return Xt?ml(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function bx(n){if(typeof ArrayBuffer>"u")return xa(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function Mp(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function mue(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var Zr=Xt?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:ml(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function pue(n){for(var e=[],t=0,r=n.length+250,i=ph(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=ph(65535),r=65530)}return e.push(i.slice(0,t)),Zr(e)}var $g=/\u0000/g,m1=/[\u0001-\u0006]/g;function dd(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Sa(n,e){var t=""+n;return t.length>=e?t:Hn("0",e-t.length)+t}function oR(n,e){var t=""+n;return t.length>=e?t:Hn(" ",e-t.length)+t}function hv(n,e){var t=""+n;return t.length>=e?t:t+Hn(" ",e-t.length)}function _ue(n,e){var t=""+Math.round(n);return t.length>=e?t:Hn("0",e-t.length)+t}function yue(n,e){var t=""+n;return t.length>=e?t:Hn("0",e-t.length)+t}var Qk=Math.pow(2,32);function Rf(n,e){if(n>Qk||n<-Qk)return _ue(n,e);var t=Math.round(n);return yue(t,e)}function fv(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var Jk=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],S2=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function vue(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var qn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},eO={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},xue={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function dv(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,l=1,u=0,f=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,f=d*u+l,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,l=u,u=f;if(f>e&&(u>e?(f=l,o=s):(f=u,o=a)),!t)return[0,r*o,f];var g=Math.floor(r*o/f);return[g,r*o-g*f,f]}function p1(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),t&&(s=Rue(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var ZF=new Date(1899,11,31,0,0,0),Eue=ZF.getTime(),wue=new Date(1900,2,1,0,0,0);function QF(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=wue&&(t+=1440*60*1e3),(t-(Eue+(n.getTimezoneOffset()-ZF.getTimezoneOffset())*6e4))/(1440*60*1e3)}function lR(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Tue(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Sue(n){var e=n<0?12:11,t=lR(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function Iue(n){var e=lR(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function Aue(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=Sue(n):e===10?t=n.toFixed(10).substr(0,12):t=Iue(n),lR(Tue(t.toUpperCase()))}function pS(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):Aue(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return Vc(14,QF(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function Rue(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function Cue(n,e,t,r){var i="",s=0,a=0,o=t.y,l,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,u=e.length;break;case 3:return S2[t.m-1][1];case 5:return S2[t.m-1][0];default:return S2[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,u=e.length;break;case 3:return Jk[t.q][0];default:return Jk[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Sa(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Sa(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var f=u>0?Sa(l,u):"";return f}function fc(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var JF=/%/g;function Pue(n,e,t){var r=e.replace(JF,""),i=e.length-r.length;return el(n,r,t*Math.pow(10,2*i))+Hn("%",i)}function Mue(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return el(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function e9(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+e9(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,f){return l+u+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var t9=/# (\?+)( ?)\/( ?)(\d+)/;function bue(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?Hn(" ",n[1].length+1+n[4].length):oR(a,n[1].length)+n[2]+"/"+n[3]+Sa(o,n[4].length))}function kue(n,e,t){return t+(e===0?"":""+e)+Hn(" ",n[1].length+2+n[4].length)}var n9=/^#*0*\.([0#]+)/,r9=/\).*[0#]/,i9=/\(###\) ###\\?-####/;function Si(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function tO(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function nO(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function Oue(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function Lue(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function Us(n,e,t){if(n.charCodeAt(0)===40&&!e.match(r9)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Us("n",r,t):"("+Us("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return Mue(n,e,t);if(e.indexOf("%")!==-1)return Pue(n,e,t);if(e.indexOf("E")!==-1)return e9(e,t);if(e.charCodeAt(0)===36)return"$"+Us(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Rf(l,e.length);if(e.match(/^[#?]+$/))return i=Rf(t,0),i==="0"&&(i=""),i.length>e.length?i:Si(e.substr(0,e.length-i.length))+i;if(s=e.match(t9))return bue(s,l,u);if(e.match(/^#+0+$/))return u+Rf(l,e.length-e.indexOf("0"));if(s=e.match(n9))return i=tO(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Si(s[1])).replace(/\.$/,"."+Si(s[1])).replace(/\.(\d*)$/,function(x,v){return"."+v+Hn("0",Si(s[1]).length-v.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+tO(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+fc(Rf(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Us(n,e,-t):fc(""+(Math.floor(t)+Oue(t,s[1].length)))+"."+Sa(nO(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Us(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=dd(Us(n,e.replace(/[\\-]/g,""),t)),a=0,dd(dd(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(i9))return i=Us(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=dv(l,Math.pow(10,a)-1,!1),i=""+u,f=el("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=hv(o[2],a),f.length<s[4].length&&(f=Si(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=dv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?oR(o[1],a)+s[2]+"/"+s[3]+hv(o[2],a):Hn(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Rf(t,0),e.length<=i.length?i:Si(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Si(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=nO(t,s[1].length),t<0?"-"+Us(n,e,-t):fc(Lue(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Sa(0,3-x.length):"")+x})+"."+Sa(a,s[1].length);switch(e){case"###,##0.00":return Us(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=fc(Rf(l,0));return p!=="0"?u+p:"";case"###,###.00":return Us(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Us(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Nue(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return el(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function Due(n,e,t){var r=e.replace(JF,""),i=e.length-r.length;return el(n,r,t*Math.pow(10,2*i))+Hn("%",i)}function s9(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+s9(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,f){return l+u+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Ka(n,e,t){if(n.charCodeAt(0)===40&&!e.match(r9)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Ka("n",r,t):"("+Ka("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return Nue(n,e,t);if(e.indexOf("%")!==-1)return Due(n,e,t);if(e.indexOf("E")!==-1)return s9(e,t);if(e.charCodeAt(0)===36)return"$"+Ka(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Sa(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Si(e.substr(0,e.length-i.length))+i;if(s=e.match(t9))return kue(s,l,u);if(e.match(/^#+0+$/))return u+Sa(l,e.length-e.indexOf("0"));if(s=e.match(n9))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Si(s[1])).replace(/\.$/,"."+Si(s[1])),i=i.replace(/\.(\d*)$/,function(x,v){return"."+v+Hn("0",Si(s[1]).length-v.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+fc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Ka(n,e,-t):fc(""+t)+"."+Hn("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Ka(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=dd(Ka(n,e.replace(/[\\-]/g,""),t)),a=0,dd(dd(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(i9))return i=Ka(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=dv(l,Math.pow(10,a)-1,!1),i=""+u,f=el("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=hv(o[2],a),f.length<s[4].length&&(f=Si(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=dv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?oR(o[1],a)+s[2]+"/"+s[3]+hv(o[2],a):Hn(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Si(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Si(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Ka(n,e,-t):fc(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Sa(0,3-x.length):"")+x})+"."+Sa(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=fc(""+l);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return Ka(n,e.slice(0,e.lastIndexOf(".")),t)+Si(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function el(n,e,t){return(t|0)===t?Ka(n,e,t):Us(n,e,t)}function Fue(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var a9=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function o9(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":fv(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(a9))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Vue(n,e,t,r){for(var i=[],s="",a=0,o="",l="t",u,f,d,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!fv(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=n.charAt(++a),x=p==="("||p===")"?p:"t";i[i.length]={t:x,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=p1(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=p1(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(u==null&&(u=p1(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(v.v=u.H>=12?"":""),v.t="T",a+=5,g="h"):(v.t="t",++a),u==null&&v.t==="T")return"";i[i.length]=v,l=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(a9)){if(u==null&&(u=p1(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",o9(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var E=0,R=0,S;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",E<1&&(E=1);break;case"s":(S=i[a].v.match(/\.0+$/))&&(R=Math.max(R,S[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[a].v.match(/[Hh]/)&&(E=1),E<2&&i[a].v.match(/[Mm]/)&&(E=2),E<3&&i[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var C="",O;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=Cue(i[a].t.charCodeAt(0),i[a].v,u,R),i[a].t="t";break;case"n":case"?":for(O=a+1;i[O]!=null&&((o=i[O].t)==="?"||o==="D"||(o===" "||o==="t")&&i[O+1]!=null&&(i[O+1].t==="?"||i[O+1].t==="t"&&i[O+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[O].v==="/"||i[O].v===" "&&i[O+1]!=null&&i[O+1].t=="?"));)i[a].v+=i[O].v,i[O]={v:"",t:";"},++O;C+=i[a].v,a=O-1;break;case"G":i[a].t="t",i[a].v=pS(e,t);break}var N="",z,M;if(C.length>0){C.charCodeAt(0)==40?(z=e<0&&C.charCodeAt(0)===45?-e:e,M=el("n",C,z)):(z=e<0&&r>1?-e:e,M=el("n",C,z),z<0&&i[0]&&i[0].t=="t"&&(M=M.substr(1),i[0].v="-"+i[0].v)),O=M.length-1;var P=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){P=a;break}var b=i.length;if(P===i.length&&M.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(O>=i[a].v.length-1?(O-=i[a].v.length,i[a].v=M.substr(O+1,i[a].v.length)):O<0?i[a].v="":(i[a].v=M.substr(0,O+1),O=-1),i[a].t="t",b=a);O>=0&&b<i.length&&(i[b].v=M.substr(0,O+1)+i[b].v)}else if(P!==i.length&&M.indexOf("E")===-1){for(O=M.indexOf(".")-1,a=P;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(f=i[a].v.indexOf(".")>-1&&a===P?i[a].v.indexOf(".")-1:i[a].v.length-1,N=i[a].v.substr(f+1);f>=0;--f)O>=0&&(i[a].v.charAt(f)==="0"||i[a].v.charAt(f)==="#")&&(N=M.charAt(O--)+N);i[a].v=N,i[a].t="t",b=a}for(O>=0&&b<i.length&&(i[b].v=M.substr(0,O+1)+i[b].v),O=M.indexOf(".")+1,a=P;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==P)){for(f=i[a].v.indexOf(".")>-1&&a===P?i[a].v.indexOf(".")+1:0,N=i[a].v.substr(0,f);f<i[a].v.length;++f)O<M.length&&(N+=M.charAt(O++));i[a].v=N,i[a].t="t",b=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(z=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=el(i[a].t,i[a].v,z),i[a].t="t");var D="";for(a=0;a!==i.length;++a)i[a]!=null&&(D+=i[a].v);return D}var rO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function iO(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function jue(n,e){var t=Fue(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(rO),o=t[1].match(rO);return iO(e,a)?[r,t[0]]:iO(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function Vc(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:qn)[n],r==null&&(r=t.table&&t.table[eO[n]]||qn[eO[n]]),r==null&&(r=xue[n]||"General");break}if(fv(r,0))return pS(e,t);e instanceof Date&&(e=QF(e,t.date1904));var i=jue(r,e);if(fv(i[1]))return pS(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Vue(i[1],e,t,i[0])}function l9(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(qn[t]==null){e<0&&(e=t);continue}if(qn[t]==n){e=t;break}}e<0&&(e=391)}return qn[e]=n,e}function kx(n){for(var e=0;e!=392;++e)n[e]!==void 0&&l9(n[e],e)}function Ox(){qn=vue()}var c9=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Bue(n){var e=typeof n=="number"?qn[n]:n;return e=e.replace(c9,"(\\d+)"),new RegExp("^"+e+"$")}function Gue(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(c9)||[]).forEach(function(d,g){var p=parseInt(t[g+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:i=p;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:r==-1&&i==-1&&s==-1?f:u+"T"+f}var Uue=(function(){var n={};n.version="1.2.0";function e(){for(var M=0,P=new Array(256),b=0;b!=256;++b)M=b,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,P[b]=M;return typeof Int32Array<"u"?new Int32Array(P):P}var t=e();function r(M){var P=0,b=0,D=0,B=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)B[D]=M[D];for(D=0;D!=256;++D)for(b=M[D],P=256+D;P<4096;P+=256)b=B[P]=b>>>8^M[b&255];var U=[];for(D=1;D!=16;++D)U[D-1]=typeof Int32Array<"u"?B.subarray(D*256,D*256+256):B.slice(D*256,D*256+256);return U}var i=r(t),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],f=i[5],d=i[6],g=i[7],p=i[8],x=i[9],v=i[10],E=i[11],R=i[12],S=i[13],C=i[14];function O(M,P){for(var b=P^-1,D=0,B=M.length;D<B;)b=b>>>8^t[(b^M.charCodeAt(D++))&255];return~b}function N(M,P){for(var b=P^-1,D=M.length-15,B=0;B<D;)b=C[M[B++]^b&255]^S[M[B++]^b>>8&255]^R[M[B++]^b>>16&255]^E[M[B++]^b>>>24]^v[M[B++]]^x[M[B++]]^p[M[B++]]^g[M[B++]]^d[M[B++]]^f[M[B++]]^u[M[B++]]^l[M[B++]]^o[M[B++]]^a[M[B++]]^s[M[B++]]^t[M[B++]];for(D+=15;B<D;)b=b>>>8^t[(b^M[B++])&255];return~b}function z(M,P){for(var b=P^-1,D=0,B=M.length,U=0,V=0;D<B;)U=M.charCodeAt(D++),U<128?b=b>>>8^t[(b^U)&255]:U<2048?(b=b>>>8^t[(b^(192|U>>6&31))&255],b=b>>>8^t[(b^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,V=M.charCodeAt(D++)&1023,b=b>>>8^t[(b^(240|U>>8&7))&255],b=b>>>8^t[(b^(128|U>>2&63))&255],b=b>>>8^t[(b^(128|V>>6&15|(U&3)<<4))&255],b=b>>>8^t[(b^(128|V&63))&255]):(b=b>>>8^t[(b^(224|U>>12&15))&255],b=b>>>8^t[(b^(128|U>>6&63))&255],b=b>>>8^t[(b^(128|U&63))&255]);return~b}return n.table=t,n.bstr=O,n.buf=N,n.str=z,n})(),_n=(function(){var e={};e.version="1.2.1";function t(G,X){for(var K=G.split("/"),q=X.split("/"),Z=0,Q=0,pe=Math.min(K.length,q.length);Z<pe;++Z){if(Q=K[Z].length-q[Z].length)return Q;if(K[Z]!=q[Z])return K[Z]<q[Z]?-1:1}return K.length-q.length}function r(G){if(G.charAt(G.length-1)=="/")return G.slice(0,-1).indexOf("/")===-1?G:r(G.slice(0,-1));var X=G.lastIndexOf("/");return X===-1?G:G.slice(0,X+1)}function i(G){if(G.charAt(G.length-1)=="/")return i(G.slice(0,-1));var X=G.lastIndexOf("/");return X===-1?G:G.slice(X+1)}function s(G,X){typeof X=="string"&&(X=new Date(X));var K=X.getHours();K=K<<6|X.getMinutes(),K=K<<5|X.getSeconds()>>>1,G.write_shift(2,K);var q=X.getFullYear()-1980;q=q<<4|X.getMonth()+1,q=q<<5|X.getDate(),G.write_shift(2,q)}function a(G){var X=G.read_shift(2)&65535,K=G.read_shift(2)&65535,q=new Date,Z=K&31;K>>>=5;var Q=K&15;K>>>=4,q.setMilliseconds(0),q.setFullYear(K+1980),q.setMonth(Q-1),q.setDate(Z);var pe=X&31;X>>>=5;var Ce=X&63;return X>>>=6,q.setHours(X),q.setMinutes(Ce),q.setSeconds(pe<<1),q}function o(G){ys(G,0);for(var X={},K=0;G.l<=G.length-4;){var q=G.read_shift(2),Z=G.read_shift(2),Q=G.l+Z,pe={};switch(q){case 21589:K=G.read_shift(1),K&1&&(pe.mtime=G.read_shift(4)),Z>5&&(K&2&&(pe.atime=G.read_shift(4)),K&4&&(pe.ctime=G.read_shift(4))),pe.mtime&&(pe.mt=new Date(pe.mtime*1e3));break}G.l=Q,X[q]=pe}return X}var l;function u(){return l||(l={})}function f(G,X){if(G[0]==80&&G[1]==75)return Ar(G,X);if((G[0]|32)==109&&(G[1]|32)==105)return gr(G,X);if(G.length<512)throw new Error("CFB file size "+G.length+" < 512");var K=3,q=512,Z=0,Q=0,pe=0,Ce=0,me=0,ye=[],xe=G.slice(0,512);ys(xe,0);var je=d(xe);switch(K=je[0],K){case 3:q=512;break;case 4:q=4096;break;case 0:if(je[1]==0)return Ar(G,X);default:throw new Error("Major Version: Expected 3 or 4 saw "+K)}q!==512&&(xe=G.slice(0,q),ys(xe,28));var He=G.slice(0,q);g(xe,K);var et=xe.read_shift(4,"i");if(K===3&&et!==0)throw new Error("# Directory Sectors: Expected 0 saw "+et);xe.l+=4,pe=xe.read_shift(4,"i"),xe.l+=4,xe.chk("00100000","Mini Stream Cutoff Size: "),Ce=xe.read_shift(4,"i"),Z=xe.read_shift(4,"i"),me=xe.read_shift(4,"i"),Q=xe.read_shift(4,"i");for(var Be=-1,Ge=0;Ge<109&&(Be=xe.read_shift(4,"i"),!(Be<0));++Ge)ye[Ge]=Be;var vt=p(G,q);E(me,Q,vt,q,ye);var Qt=S(vt,pe,ye,q);Qt[pe].name="!Directory",Z>0&&Ce!==V&&(Qt[Ce].name="!MiniFAT"),Qt[ye[0]].name="!FAT",Qt.fat_addrs=ye,Qt.ssz=q;var rn={},Cn=[],ia=[],ks=[];C(pe,Qt,vt,Cn,Z,rn,ia,Ce),x(ia,ks,Cn),Cn.shift();var ls={FileIndex:ia,FullPaths:ks};return X&&X.raw&&(ls.raw={header:He,sectors:vt}),ls}function d(G){if(G[G.l]==80&&G[G.l+1]==75)return[0,0];G.chk(Ae,"Header Signature: "),G.l+=16;var X=G.read_shift(2,"u");return[G.read_shift(2,"u"),X]}function g(G,X){var K=9;switch(G.l+=2,K=G.read_shift(2)){case 9:if(X!=3)throw new Error("Sector Shift: Expected 9 saw "+K);break;case 12:if(X!=4)throw new Error("Sector Shift: Expected 12 saw "+K);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+K)}G.chk("0600","Mini Sector Shift: "),G.chk("000000000000","Reserved: ")}function p(G,X){for(var K=Math.ceil(G.length/X)-1,q=[],Z=1;Z<K;++Z)q[Z-1]=G.slice(Z*X,(Z+1)*X);return q[K-1]=G.slice(K*X),q}function x(G,X,K){for(var q=0,Z=0,Q=0,pe=0,Ce=0,me=K.length,ye=[],xe=[];q<me;++q)ye[q]=xe[q]=q,X[q]=K[q];for(;Ce<xe.length;++Ce)q=xe[Ce],Z=G[q].L,Q=G[q].R,pe=G[q].C,ye[q]===q&&(Z!==-1&&ye[Z]!==Z&&(ye[q]=ye[Z]),Q!==-1&&ye[Q]!==Q&&(ye[q]=ye[Q])),pe!==-1&&(ye[pe]=q),Z!==-1&&q!=ye[q]&&(ye[Z]=ye[q],xe.lastIndexOf(Z)<Ce&&xe.push(Z)),Q!==-1&&q!=ye[q]&&(ye[Q]=ye[q],xe.lastIndexOf(Q)<Ce&&xe.push(Q));for(q=1;q<me;++q)ye[q]===q&&(Q!==-1&&ye[Q]!==Q?ye[q]=ye[Q]:Z!==-1&&ye[Z]!==Z&&(ye[q]=ye[Z]));for(q=1;q<me;++q)if(G[q].type!==0){if(Ce=q,Ce!=ye[Ce])do Ce=ye[Ce],X[q]=X[Ce]+"/"+X[q];while(Ce!==0&&ye[Ce]!==-1&&Ce!=ye[Ce]);ye[q]=-1}for(X[0]+="/",q=1;q<me;++q)G[q].type!==2&&(X[q]+="/")}function v(G,X,K){for(var q=G.start,Z=G.size,Q=[],pe=q;K&&Z>0&&pe>=0;)Q.push(X.slice(pe*U,pe*U+U)),Z-=U,pe=ku(K,pe*4);return Q.length===0?Re(0):Zr(Q).slice(0,G.size)}function E(G,X,K,q,Z){var Q=V;if(G===V){if(X!==0)throw new Error("DIFAT chain shorter than expected")}else if(G!==-1){var pe=K[G],Ce=(q>>>2)-1;if(!pe)return;for(var me=0;me<Ce&&(Q=ku(pe,me*4))!==V;++me)Z.push(Q);E(ku(pe,q-4),X-1,K,q,Z)}}function R(G,X,K,q,Z){var Q=[],pe=[];Z||(Z=[]);var Ce=q-1,me=0,ye=0;for(me=X;me>=0;){Z[me]=!0,Q[Q.length]=me,pe.push(G[me]);var xe=K[Math.floor(me*4/q)];if(ye=me*4&Ce,q<4+ye)throw new Error("FAT boundary crossed: "+me+" 4 "+q);if(!G[xe])break;me=ku(G[xe],ye)}return{nodes:Q,data:fO([pe])}}function S(G,X,K,q){var Z=G.length,Q=[],pe=[],Ce=[],me=[],ye=q-1,xe=0,je=0,He=0,et=0;for(xe=0;xe<Z;++xe)if(Ce=[],He=xe+X,He>=Z&&(He-=Z),!pe[He]){me=[];var Be=[];for(je=He;je>=0;){Be[je]=!0,pe[je]=!0,Ce[Ce.length]=je,me.push(G[je]);var Ge=K[Math.floor(je*4/q)];if(et=je*4&ye,q<4+et)throw new Error("FAT boundary crossed: "+je+" 4 "+q);if(!G[Ge]||(je=ku(G[Ge],et),Be[je]))break}Q[He]={nodes:Ce,data:fO([me])}}return Q}function C(G,X,K,q,Z,Q,pe,Ce){for(var me=0,ye=q.length?2:0,xe=X[G].data,je=0,He=0,et;je<xe.length;je+=128){var Be=xe.slice(je,je+128);ys(Be,64),He=Be.read_shift(2),et=dR(Be,0,He-ye),q.push(et);var Ge={name:et,type:Be.read_shift(1),color:Be.read_shift(1),L:Be.read_shift(4,"i"),R:Be.read_shift(4,"i"),C:Be.read_shift(4,"i"),clsid:Be.read_shift(16),state:Be.read_shift(4,"i"),start:0,size:0},vt=Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2);vt!==0&&(Ge.ct=O(Be,Be.l-8));var Qt=Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2);Qt!==0&&(Ge.mt=O(Be,Be.l-8)),Ge.start=Be.read_shift(4,"i"),Ge.size=Be.read_shift(4,"i"),Ge.size<0&&Ge.start<0&&(Ge.size=Ge.type=0,Ge.start=V,Ge.name=""),Ge.type===5?(me=Ge.start,Z>0&&me!==V&&(X[me].name="!StreamData")):Ge.size>=4096?(Ge.storage="fat",X[Ge.start]===void 0&&(X[Ge.start]=R(K,Ge.start,X.fat_addrs,X.ssz)),X[Ge.start].name=Ge.name,Ge.content=X[Ge.start].data.slice(0,Ge.size)):(Ge.storage="minifat",Ge.size<0?Ge.size=0:me!==V&&Ge.start!==V&&X[me]&&(Ge.content=v(Ge,X[me].data,(X[Ce]||{}).data))),Ge.content&&ys(Ge.content,0),Q[et]=Ge,pe.push(Ge)}}function O(G,X){return new Date((ws(G,X+4)/1e7*Math.pow(2,32)+ws(G,X)/1e7-11644473600)*1e3)}function N(G,X){return u(),f(l.readFileSync(G),X)}function z(G,X){var K=X&&X.type;switch(K||Xt&&Buffer.isBuffer(G)&&(K="buffer"),K||"base64"){case"file":return N(G,X);case"base64":return f(xa(cl(G)),X);case"binary":return f(xa(G),X)}return f(G,X)}function M(G,X){var K=X||{},q=K.root||"Root Entry";if(G.FullPaths||(G.FullPaths=[]),G.FileIndex||(G.FileIndex=[]),G.FullPaths.length!==G.FileIndex.length)throw new Error("inconsistent CFB structure");G.FullPaths.length===0&&(G.FullPaths[0]=q+"/",G.FileIndex[0]={name:q,type:5}),K.CLSID&&(G.FileIndex[0].clsid=K.CLSID),P(G)}function P(G){var X="Sh33tJ5";if(!_n.find(G,"/"+X)){var K=Re(4);K[0]=55,K[1]=K[3]=50,K[2]=54,G.FileIndex.push({name:X,type:2,content:K,size:4,L:69,R:69,C:69}),G.FullPaths.push(G.FullPaths[0]+X),b(G)}}function b(G,X){M(G);for(var K=!1,q=!1,Z=G.FullPaths.length-1;Z>=0;--Z){var Q=G.FileIndex[Z];switch(Q.type){case 0:q?K=!0:(G.FileIndex.pop(),G.FullPaths.pop());break;case 1:case 2:case 5:q=!0,isNaN(Q.R*Q.L*Q.C)&&(K=!0),Q.R>-1&&Q.L>-1&&Q.R==Q.L&&(K=!0);break;default:K=!0;break}}if(!(!K&&!X)){var pe=new Date(1987,1,19),Ce=0,me=Object.create?Object.create(null):{},ye=[];for(Z=0;Z<G.FullPaths.length;++Z)me[G.FullPaths[Z]]=!0,G.FileIndex[Z].type!==0&&ye.push([G.FullPaths[Z],G.FileIndex[Z]]);for(Z=0;Z<ye.length;++Z){var xe=r(ye[Z][0]);q=me[xe],q||(ye.push([xe,{name:i(xe).replace("/",""),type:1,clsid:Pe,ct:pe,mt:pe,content:null}]),me[xe]=!0)}for(ye.sort(function(et,Be){return t(et[0],Be[0])}),G.FullPaths=[],G.FileIndex=[],Z=0;Z<ye.length;++Z)G.FullPaths[Z]=ye[Z][0],G.FileIndex[Z]=ye[Z][1];for(Z=0;Z<ye.length;++Z){var je=G.FileIndex[Z],He=G.FullPaths[Z];if(je.name=i(He).replace("/",""),je.L=je.R=je.C=-(je.color=1),je.size=je.content?je.content.length:0,je.start=0,je.clsid=je.clsid||Pe,Z===0)je.C=ye.length>1?1:-1,je.size=0,je.type=5;else if(He.slice(-1)=="/"){for(Ce=Z+1;Ce<ye.length&&r(G.FullPaths[Ce])!=He;++Ce);for(je.C=Ce>=ye.length?-1:Ce,Ce=Z+1;Ce<ye.length&&r(G.FullPaths[Ce])!=r(He);++Ce);je.R=Ce>=ye.length?-1:Ce,je.type=1}else r(G.FullPaths[Z+1]||"")==r(He)&&(je.R=Z+1),je.type=2}}}function D(G,X){var K=X||{};if(K.fileType=="mad")return mr(G,K);switch(b(G),K.fileType){case"zip":return Zt(G,K)}var q=(function(et){for(var Be=0,Ge=0,vt=0;vt<et.FileIndex.length;++vt){var Qt=et.FileIndex[vt];if(Qt.content){var rn=Qt.content.length;rn>0&&(rn<4096?Be+=rn+63>>6:Ge+=rn+511>>9)}}for(var Cn=et.FullPaths.length+3>>2,ia=Be+7>>3,ks=Be+127>>7,ls=ia+Ge+Cn+ks,Yn=ls+127>>7,pl=Yn<=109?0:Math.ceil((Yn-109)/127);ls+Yn+pl+127>>7>Yn;)pl=++Yn<=109?0:Math.ceil((Yn-109)/127);var Nn=[1,pl,Yn,ks,Cn,Ge,Be,0];return et.FileIndex[0].size=Be<<6,Nn[7]=(et.FileIndex[0].start=Nn[0]+Nn[1]+Nn[2]+Nn[3]+Nn[4]+Nn[5])+(Nn[6]+7>>3),Nn})(G),Z=Re(q[7]<<9),Q=0,pe=0;{for(Q=0;Q<8;++Q)Z.write_shift(1,be[Q]);for(Q=0;Q<8;++Q)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),Q=0;Q<3;++Q)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,q[2]),Z.write_shift(4,q[0]+q[1]+q[2]+q[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,q[3]?q[0]+q[1]+q[2]-1:V),Z.write_shift(4,q[3]),Z.write_shift(-4,q[1]?q[0]-1:V),Z.write_shift(4,q[1]),Q=0;Q<109;++Q)Z.write_shift(-4,Q<q[2]?q[1]+Q:-1)}if(q[1])for(pe=0;pe<q[1];++pe){for(;Q<236+pe*127;++Q)Z.write_shift(-4,Q<q[2]?q[1]+Q:-1);Z.write_shift(-4,pe===q[1]-1?V:pe+1)}var Ce=function(et){for(pe+=et;Q<pe-1;++Q)Z.write_shift(-4,Q+1);et&&(++Q,Z.write_shift(-4,V))};for(pe=Q=0,pe+=q[1];Q<pe;++Q)Z.write_shift(-4,Me.DIFSECT);for(pe+=q[2];Q<pe;++Q)Z.write_shift(-4,Me.FATSECT);Ce(q[3]),Ce(q[4]);for(var me=0,ye=0,xe=G.FileIndex[0];me<G.FileIndex.length;++me)xe=G.FileIndex[me],xe.content&&(ye=xe.content.length,!(ye<4096)&&(xe.start=pe,Ce(ye+511>>9)));for(Ce(q[6]+7>>3);Z.l&511;)Z.write_shift(-4,Me.ENDOFCHAIN);for(pe=Q=0,me=0;me<G.FileIndex.length;++me)xe=G.FileIndex[me],xe.content&&(ye=xe.content.length,!(!ye||ye>=4096)&&(xe.start=pe,Ce(ye+63>>6)));for(;Z.l&511;)Z.write_shift(-4,Me.ENDOFCHAIN);for(Q=0;Q<q[4]<<2;++Q){var je=G.FullPaths[Q];if(!je||je.length===0){for(me=0;me<17;++me)Z.write_shift(4,0);for(me=0;me<3;++me)Z.write_shift(4,-1);for(me=0;me<12;++me)Z.write_shift(4,0);continue}xe=G.FileIndex[Q],Q===0&&(xe.start=xe.size?xe.start-1:V);var He=Q===0&&K.root||xe.name;if(ye=2*(He.length+1),Z.write_shift(64,He,"utf16le"),Z.write_shift(2,ye),Z.write_shift(1,xe.type),Z.write_shift(1,xe.color),Z.write_shift(-4,xe.L),Z.write_shift(-4,xe.R),Z.write_shift(-4,xe.C),xe.clsid)Z.write_shift(16,xe.clsid,"hex");else for(me=0;me<4;++me)Z.write_shift(4,0);Z.write_shift(4,xe.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,xe.start),Z.write_shift(4,xe.size),Z.write_shift(4,0)}for(Q=1;Q<G.FileIndex.length;++Q)if(xe=G.FileIndex[Q],xe.size>=4096)if(Z.l=xe.start+1<<9,Xt&&Buffer.isBuffer(xe.content))xe.content.copy(Z,Z.l,0,xe.size),Z.l+=xe.size+511&-512;else{for(me=0;me<xe.size;++me)Z.write_shift(1,xe.content[me]);for(;me&511;++me)Z.write_shift(1,0)}for(Q=1;Q<G.FileIndex.length;++Q)if(xe=G.FileIndex[Q],xe.size>0&&xe.size<4096)if(Xt&&Buffer.isBuffer(xe.content))xe.content.copy(Z,Z.l,0,xe.size),Z.l+=xe.size+63&-64;else{for(me=0;me<xe.size;++me)Z.write_shift(1,xe.content[me]);for(;me&63;++me)Z.write_shift(1,0)}if(Xt)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function B(G,X){var K=G.FullPaths.map(function(me){return me.toUpperCase()}),q=K.map(function(me){var ye=me.split("/");return ye[ye.length-(me.slice(-1)=="/"?2:1)]}),Z=!1;X.charCodeAt(0)===47?(Z=!0,X=K[0].slice(0,-1)+X):Z=X.indexOf("/")!==-1;var Q=X.toUpperCase(),pe=Z===!0?K.indexOf(Q):q.indexOf(Q);if(pe!==-1)return G.FileIndex[pe];var Ce=!Q.match(m1);for(Q=Q.replace($g,""),Ce&&(Q=Q.replace(m1,"!")),pe=0;pe<K.length;++pe)if((Ce?K[pe].replace(m1,"!"):K[pe]).replace($g,"")==Q||(Ce?q[pe].replace(m1,"!"):q[pe]).replace($g,"")==Q)return G.FileIndex[pe];return null}var U=64,V=-2,Ae="d0cf11e0a1b11ae1",be=[208,207,17,224,161,177,26,225],Pe="00000000000000000000000000000000",Me={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:Ae,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Pe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function he(G,X,K){u();var q=D(G,K);l.writeFileSync(X,q)}function ae(G){for(var X=new Array(G.length),K=0;K<G.length;++K)X[K]=String.fromCharCode(G[K]);return X.join("")}function Ee(G,X){var K=D(G,X);switch(X&&X.type||"buffer"){case"file":return u(),l.writeFileSync(X.filename,K),K;case"binary":return typeof K=="string"?K:ae(K);case"base64":return Vm(typeof K=="string"?K:ae(K));case"buffer":if(Xt)return Buffer.isBuffer(K)?K:ml(K);case"array":return typeof K=="string"?xa(K):K}return K}var J;function F(G){try{var X=G.InflateRaw,K=new X;if(K._processChunk(new Uint8Array([3,0]),K._finishFlushFlag),K.bytesRead)J=G;else throw new Error("zlib does not expose bytesRead")}catch(q){console.error("cannot use native zlib: "+(q.message||q))}}function re(G,X){if(!J)return is(G,X);var K=J.InflateRaw,q=new K,Z=q._processChunk(G.slice(G.l),q._finishFlushFlag);return G.l+=q.bytesRead,Z}function te(G){return J?J.deflateRawSync(G):ns(G)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ne(G){var X=(G<<1|G<<11)&139536|(G<<5|G<<15)&558144;return(X>>16|X>>8|X)&255}for(var k=typeof Uint8Array<"u",Te=k?new Uint8Array(256):[],le=0;le<256;++le)Te[le]=ne(le);function We(G,X){var K=Te[G&255];return X<=8?K>>>8-X:(K=K<<8|Te[G>>8&255],X<=16?K>>>16-X:(K=K<<8|Te[G>>16&255],K>>>24-X))}function ce(G,X){var K=X&7,q=X>>>3;return(G[q]|(K<=6?0:G[q+1]<<8))>>>K&3}function W(G,X){var K=X&7,q=X>>>3;return(G[q]|(K<=5?0:G[q+1]<<8))>>>K&7}function Ie(G,X){var K=X&7,q=X>>>3;return(G[q]|(K<=4?0:G[q+1]<<8))>>>K&15}function tt(G,X){var K=X&7,q=X>>>3;return(G[q]|(K<=3?0:G[q+1]<<8))>>>K&31}function De(G,X){var K=X&7,q=X>>>3;return(G[q]|(K<=1?0:G[q+1]<<8))>>>K&127}function Mt(G,X,K){var q=X&7,Z=X>>>3,Q=(1<<K)-1,pe=G[Z]>>>q;return K<8-q||(pe|=G[Z+1]<<8-q,K<16-q)||(pe|=G[Z+2]<<16-q,K<24-q)||(pe|=G[Z+3]<<24-q),pe&Q}function Rt(G,X,K){var q=X&7,Z=X>>>3;return q<=5?G[Z]|=(K&7)<<q:(G[Z]|=K<<q&255,G[Z+1]=(K&7)>>8-q),X+3}function Ct(G,X,K){var q=X&7,Z=X>>>3;return K=(K&1)<<q,G[Z]|=K,X+1}function wn(G,X,K){var q=X&7,Z=X>>>3;return K<<=q,G[Z]|=K&255,K>>>=8,G[Z+1]=K,X+8}function vi(G,X,K){var q=X&7,Z=X>>>3;return K<<=q,G[Z]|=K&255,K>>>=8,G[Z+1]=K&255,G[Z+2]=K>>>8,X+16}function pn(G,X){var K=G.length,q=2*K>X?2*K:X+5,Z=0;if(K>=X)return G;if(Xt){var Q=Zk(q);if(G.copy)G.copy(Q);else for(;Z<G.length;++Z)Q[Z]=G[Z];return Q}else if(k){var pe=new Uint8Array(q);if(pe.set)pe.set(G);else for(;Z<K;++Z)pe[Z]=G[Z];return pe}return G.length=q,G}function fr(G){for(var X=new Array(G),K=0;K<G;++K)X[K]=0;return X}function Vr(G,X,K){var q=1,Z=0,Q=0,pe=0,Ce=0,me=G.length,ye=k?new Uint16Array(32):fr(32);for(Q=0;Q<32;++Q)ye[Q]=0;for(Q=me;Q<K;++Q)G[Q]=0;me=G.length;var xe=k?new Uint16Array(me):fr(me);for(Q=0;Q<me;++Q)ye[Z=G[Q]]++,q<Z&&(q=Z),xe[Q]=0;for(ye[0]=0,Q=1;Q<=q;++Q)ye[Q+16]=Ce=Ce+ye[Q-1]<<1;for(Q=0;Q<me;++Q)Ce=G[Q],Ce!=0&&(xe[Q]=ye[Ce+16]++);var je=0;for(Q=0;Q<me;++Q)if(je=G[Q],je!=0)for(Ce=We(xe[Q],q)>>q-je,pe=(1<<q+4-je)-1;pe>=0;--pe)X[Ce|pe<<je]=je&15|Q<<4;return q}var Li=k?new Uint16Array(512):fr(512),xi=k?new Uint16Array(32):fr(32);if(!k){for(var Ir=0;Ir<512;++Ir)Li[Ir]=0;for(Ir=0;Ir<32;++Ir)xi[Ir]=0}(function(){for(var G=[],X=0;X<32;X++)G.push(5);Vr(G,xi,32);var K=[];for(X=0;X<=143;X++)K.push(8);for(;X<=255;X++)K.push(9);for(;X<=279;X++)K.push(7);for(;X<=287;X++)K.push(8);Vr(K,Li,288)})();var To=(function(){for(var X=k?new Uint8Array(32768):[],K=0,q=0;K<se.length-1;++K)for(;q<se[K+1];++q)X[q]=K;for(;q<32768;++q)X[q]=29;var Z=k?new Uint8Array(259):[];for(K=0,q=0;K<fe.length-1;++K)for(;q<fe[K+1];++q)Z[q]=K;function Q(Ce,me){for(var ye=0;ye<Ce.length;){var xe=Math.min(65535,Ce.length-ye),je=ye+xe==Ce.length;for(me.write_shift(1,+je),me.write_shift(2,xe),me.write_shift(2,~xe&65535);xe-- >0;)me[me.l++]=Ce[ye++]}return me.l}function pe(Ce,me){for(var ye=0,xe=0,je=k?new Uint16Array(32768):[];xe<Ce.length;){var He=Math.min(65535,Ce.length-xe);if(He<10){for(ye=Rt(me,ye,+(xe+He==Ce.length)),ye&7&&(ye+=8-(ye&7)),me.l=ye/8|0,me.write_shift(2,He),me.write_shift(2,~He&65535);He-- >0;)me[me.l++]=Ce[xe++];ye=me.l*8;continue}ye=Rt(me,ye,+(xe+He==Ce.length)+2);for(var et=0;He-- >0;){var Be=Ce[xe];et=(et<<5^Be)&32767;var Ge=-1,vt=0;if((Ge=je[et])&&(Ge|=xe&-32768,Ge>xe&&(Ge-=32768),Ge<xe))for(;Ce[Ge+vt]==Ce[xe+vt]&&vt<250;)++vt;if(vt>2){Be=Z[vt],Be<=22?ye=wn(me,ye,Te[Be+1]>>1)-1:(wn(me,ye,3),ye+=5,wn(me,ye,Te[Be-23]>>5),ye+=3);var Qt=Be<8?0:Be-4>>2;Qt>0&&(vi(me,ye,vt-fe[Be]),ye+=Qt),Be=X[xe-Ge],ye=wn(me,ye,Te[Be]>>3),ye-=3;var rn=Be<4?0:Be-2>>1;rn>0&&(vi(me,ye,xe-Ge-se[Be]),ye+=rn);for(var Cn=0;Cn<vt;++Cn)je[et]=xe&32767,et=(et<<5^Ce[xe])&32767,++xe;He-=vt-1}else Be<=143?Be=Be+48:ye=Ct(me,ye,1),ye=wn(me,ye,Te[Be]),je[et]=xe&32767,++xe}ye=wn(me,ye,0)-1}return me.l=(ye+7)/8|0,me.l}return function(me,ye){return me.length<8?Q(me,ye):pe(me,ye)}})();function ns(G){var X=Re(50+Math.floor(G.length*1.1)),K=To(G,X);return X.slice(0,K)}var Ei=k?new Uint16Array(32768):fr(32768),So=k?new Uint16Array(32768):fr(32768),rs=k?new Uint16Array(128):fr(128),bs=1,na=1;function jr(G,X){var K=tt(G,X)+257;X+=5;var q=tt(G,X)+1;X+=5;var Z=Ie(G,X)+4;X+=4;for(var Q=0,pe=k?new Uint8Array(19):fr(19),Ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],me=1,ye=k?new Uint8Array(8):fr(8),xe=k?new Uint8Array(8):fr(8),je=pe.length,He=0;He<Z;++He)pe[Y[He]]=Q=W(G,X),me<Q&&(me=Q),ye[Q]++,X+=3;var et=0;for(ye[0]=0,He=1;He<=me;++He)xe[He]=et=et+ye[He-1]<<1;for(He=0;He<je;++He)(et=pe[He])!=0&&(Ce[He]=xe[et]++);var Be=0;for(He=0;He<je;++He)if(Be=pe[He],Be!=0){et=Te[Ce[He]]>>8-Be;for(var Ge=(1<<7-Be)-1;Ge>=0;--Ge)rs[et|Ge<<Be]=Be&7|He<<3}var vt=[];for(me=1;vt.length<K+q;)switch(et=rs[De(G,X)],X+=et&7,et>>>=3){case 16:for(Q=3+ce(G,X),X+=2,et=vt[vt.length-1];Q-- >0;)vt.push(et);break;case 17:for(Q=3+W(G,X),X+=3;Q-- >0;)vt.push(0);break;case 18:for(Q=11+De(G,X),X+=7;Q-- >0;)vt.push(0);break;default:vt.push(et),me<et&&(me=et);break}var Qt=vt.slice(0,K),rn=vt.slice(K);for(He=K;He<286;++He)Qt[He]=0;for(He=q;He<30;++He)rn[He]=0;return bs=Vr(Qt,Ei,286),na=Vr(rn,So,30),X}function ra(G,X){if(G[0]==3&&!(G[1]&3))return[ph(X),2];for(var K=0,q=0,Z=Zk(X||1<<18),Q=0,pe=Z.length>>>0,Ce=0,me=0;(q&1)==0;){if(q=W(G,K),K+=3,q>>>1)q>>1==1?(Ce=9,me=5):(K=jr(G,K),Ce=bs,me=na);else{K&7&&(K+=8-(K&7));var ye=G[K>>>3]|G[(K>>>3)+1]<<8;if(K+=32,ye>0)for(!X&&pe<Q+ye&&(Z=pn(Z,Q+ye),pe=Z.length);ye-- >0;)Z[Q++]=G[K>>>3],K+=8;continue}for(;;){!X&&pe<Q+32767&&(Z=pn(Z,Q+32767),pe=Z.length);var xe=Mt(G,K,Ce),je=q>>>1==1?Li[xe]:Ei[xe];if(K+=je&15,je>>>=4,(je>>>8&255)===0)Z[Q++]=je;else{if(je==256)break;je-=257;var He=je<8?0:je-4>>2;He>5&&(He=0);var et=Q+fe[je];He>0&&(et+=Mt(G,K,He),K+=He),xe=Mt(G,K,me),je=q>>>1==1?xi[xe]:So[xe],K+=je&15,je>>>=4;var Be=je<4?0:je-2>>1,Ge=se[je];for(Be>0&&(Ge+=Mt(G,K,Be),K+=Be),!X&&pe<et&&(Z=pn(Z,et+100),pe=Z.length);Q<et;)Z[Q]=Z[Q-Ge],++Q}}}return X?[Z,K+7>>>3]:[Z.slice(0,Q),K+7>>>3]}function is(G,X){var K=G.slice(G.l||0),q=ra(K,X);return G.l+=q[1],q[0]}function ss(G,X){if(G)typeof console<"u"&&console.error(X);else throw new Error(X)}function Ar(G,X){var K=G;ys(K,0);var q=[],Z=[],Q={FileIndex:q,FullPaths:Z};M(Q,{root:X.root});for(var pe=K.length-4;(K[pe]!=80||K[pe+1]!=75||K[pe+2]!=5||K[pe+3]!=6)&&pe>=0;)--pe;K.l=pe+4,K.l+=4;var Ce=K.read_shift(2);K.l+=6;var me=K.read_shift(4);for(K.l=me,pe=0;pe<Ce;++pe){K.l+=20;var ye=K.read_shift(4),xe=K.read_shift(4),je=K.read_shift(2),He=K.read_shift(2),et=K.read_shift(2);K.l+=8;var Be=K.read_shift(4),Ge=o(K.slice(K.l+je,K.l+je+He));K.l+=je+He+et;var vt=K.l;K.l=Be+4,Br(K,ye,xe,Q,Ge),K.l=vt}return Q}function Br(G,X,K,q,Z){G.l+=2;var Q=G.read_shift(2),pe=G.read_shift(2),Ce=a(G);if(Q&8257)throw new Error("Unsupported ZIP encryption");for(var me=G.read_shift(4),ye=G.read_shift(4),xe=G.read_shift(4),je=G.read_shift(2),He=G.read_shift(2),et="",Be=0;Be<je;++Be)et+=String.fromCharCode(G[G.l++]);if(He){var Ge=o(G.slice(G.l,G.l+He));(Ge[21589]||{}).mt&&(Ce=Ge[21589].mt),((Z||{})[21589]||{}).mt&&(Ce=Z[21589].mt)}G.l+=He;var vt=G.slice(G.l,G.l+ye);switch(pe){case 8:vt=re(G,xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+pe)}var Qt=!1;Q&8&&(me=G.read_shift(4),me==134695760&&(me=G.read_shift(4),Qt=!0),ye=G.read_shift(4),xe=G.read_shift(4)),ye!=X&&ss(Qt,"Bad compressed size: "+X+" != "+ye),xe!=K&&ss(Qt,"Bad uncompressed size: "+K+" != "+xe),Vt(q,et,vt,{unsafe:!0,mt:Ce})}function Zt(G,X){var K=X||{},q=[],Z=[],Q=Re(1),pe=K.compression?8:0,Ce=0,me=0,ye=0,xe=0,je=0,He=G.FullPaths[0],et=He,Be=G.FileIndex[0],Ge=[],vt=0;for(me=1;me<G.FullPaths.length;++me)if(et=G.FullPaths[me].slice(He.length),Be=G.FileIndex[me],!(!Be.size||!Be.content||et=="Sh33tJ5")){var Qt=xe,rn=Re(et.length);for(ye=0;ye<et.length;++ye)rn.write_shift(1,et.charCodeAt(ye)&127);rn=rn.slice(0,rn.l),Ge[je]=Uue.buf(Be.content,0);var Cn=Be.content;pe==8&&(Cn=te(Cn)),Q=Re(30),Q.write_shift(4,67324752),Q.write_shift(2,20),Q.write_shift(2,Ce),Q.write_shift(2,pe),Be.mt?s(Q,Be.mt):Q.write_shift(4,0),Q.write_shift(-4,Ge[je]),Q.write_shift(4,Cn.length),Q.write_shift(4,Be.content.length),Q.write_shift(2,rn.length),Q.write_shift(2,0),xe+=Q.length,q.push(Q),xe+=rn.length,q.push(rn),xe+=Cn.length,q.push(Cn),Q=Re(46),Q.write_shift(4,33639248),Q.write_shift(2,0),Q.write_shift(2,20),Q.write_shift(2,Ce),Q.write_shift(2,pe),Q.write_shift(4,0),Q.write_shift(-4,Ge[je]),Q.write_shift(4,Cn.length),Q.write_shift(4,Be.content.length),Q.write_shift(2,rn.length),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(4,0),Q.write_shift(4,Qt),vt+=Q.l,Z.push(Q),vt+=rn.length,Z.push(rn),++je}return Q=Re(22),Q.write_shift(4,101010256),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,je),Q.write_shift(2,je),Q.write_shift(4,vt),Q.write_shift(4,xe),Q.write_shift(2,0),Zr([Zr(q),Zr(Z),Q])}var as={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function os(G,X){if(G.ctype)return G.ctype;var K=G.name||"",q=K.match(/\.([^\.]+)$/);return q&&as[q[1]]||X&&(q=(K=X).match(/[\.\\]([^\.\\])+$/),q&&as[q[1]])?as[q[1]]:"application/octet-stream"}function On(G){for(var X=Vm(G),K=[],q=0;q<X.length;q+=76)K.push(X.slice(q,q+76));return K.join(`\r
`)+`\r
`}function Ni(G){var X=G.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ye){var xe=ye.charCodeAt(0).toString(16).toUpperCase();return"="+(xe.length==1?"0"+xe:xe)});X=X.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),X.charAt(0)==`
`&&(X="=0D"+X.slice(1)),X=X.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var K=[],q=X.split(`\r
`),Z=0;Z<q.length;++Z){var Q=q[Z];if(Q.length==0){K.push("");continue}for(var pe=0;pe<Q.length;){var Ce=76,me=Q.slice(pe,pe+Ce);me.charAt(Ce-1)=="="?Ce--:me.charAt(Ce-2)=="="?Ce-=2:me.charAt(Ce-3)=="="&&(Ce-=3),me=Q.slice(pe,pe+Ce),pe+=Ce,pe<Q.length&&(me+="="),K.push(me)}}return K.join(`\r
`)}function dr(G){for(var X=[],K=0;K<G.length;++K){for(var q=G[K];K<=G.length&&q.charAt(q.length-1)=="=";)q=q.slice(0,q.length-1)+G[++K];X.push(q)}for(var Z=0;Z<X.length;++Z)X[Z]=X[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(Q){return String.fromCharCode(parseInt(Q.slice(1),16))});return xa(X.join(`\r
`))}function Ln(G,X,K){for(var q="",Z="",Q="",pe,Ce=0;Ce<10;++Ce){var me=X[Ce];if(!me||me.match(/^\s*$/))break;var ye=me.match(/^(.*?):\s*([^\s].*)$/);if(ye)switch(ye[1].toLowerCase()){case"content-location":q=ye[2].trim();break;case"content-type":Q=ye[2].trim();break;case"content-transfer-encoding":Z=ye[2].trim();break}}switch(++Ce,Z.toLowerCase()){case"base64":pe=xa(cl(X.slice(Ce).join("")));break;case"quoted-printable":pe=dr(X.slice(Ce));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var xe=Vt(G,q.slice(K.length),pe,{unsafe:!0});Q&&(xe.ctype=Q)}function gr(G,X){if(ae(G.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var K=X&&X.root||"",q=(Xt&&Buffer.isBuffer(G)?G.toString("binary"):ae(G)).split(`\r
`),Z=0,Q="";for(Z=0;Z<q.length;++Z)if(Q=q[Z],!!/^Content-Location:/i.test(Q)&&(Q=Q.slice(Q.indexOf("file")),K||(K=Q.slice(0,Q.lastIndexOf("/")+1)),Q.slice(0,K.length)!=K))for(;K.length>0&&(K=K.slice(0,K.length-1),K=K.slice(0,K.lastIndexOf("/")+1),Q.slice(0,K.length)!=K););var pe=(q[1]||"").match(/boundary="(.*?)"/);if(!pe)throw new Error("MAD cannot find boundary");var Ce="--"+(pe[1]||""),me=[],ye=[],xe={FileIndex:me,FullPaths:ye};M(xe);var je,He=0;for(Z=0;Z<q.length;++Z){var et=q[Z];et!==Ce&&et!==Ce+"--"||(He++&&Ln(xe,q.slice(je,Z),K),je=Z)}return xe}function mr(G,X){var K=X||{},q=K.boundary||"SheetJS";q="------="+q;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+q.slice(2)+'"',"","",""],Q=G.FullPaths[0],pe=Q,Ce=G.FileIndex[0],me=1;me<G.FullPaths.length;++me)if(pe=G.FullPaths[me].slice(Q.length),Ce=G.FileIndex[me],!(!Ce.size||!Ce.content||pe=="Sh33tJ5")){pe=pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vt){return"_x"+vt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vt){return"_u"+vt.charCodeAt(0).toString(16)+"_"});for(var ye=Ce.content,xe=Xt&&Buffer.isBuffer(ye)?ye.toString("binary"):ae(ye),je=0,He=Math.min(1024,xe.length),et=0,Be=0;Be<=He;++Be)(et=xe.charCodeAt(Be))>=32&&et<128&&++je;var Ge=je>=He*4/5;Z.push(q),Z.push("Content-Location: "+(K.root||"file:///C:/SheetJS/")+pe),Z.push("Content-Transfer-Encoding: "+(Ge?"quoted-printable":"base64")),Z.push("Content-Type: "+os(Ce,pe)),Z.push(""),Z.push(Ge?Ni(xe):On(xe))}return Z.push(q+`--\r
`),Z.join(`\r
`)}function tr(G){var X={};return M(X,G),X}function Vt(G,X,K,q){var Z=q&&q.unsafe;Z||M(G);var Q=!Z&&_n.find(G,X);if(!Q){var pe=G.FullPaths[0];X.slice(0,pe.length)==pe?pe=X:(pe.slice(-1)!="/"&&(pe+="/"),pe=(pe+X).replace("//","/")),Q={name:i(X),type:2},G.FileIndex.push(Q),G.FullPaths.push(pe),Z||_n.utils.cfb_gc(G)}return Q.content=K,Q.size=K?K.length:0,q&&(q.CLSID&&(Q.clsid=q.CLSID),q.mt&&(Q.mt=q.mt),q.ct&&(Q.ct=q.ct)),Q}function Gn(G,X){M(G);var K=_n.find(G,X);if(K){for(var q=0;q<G.FileIndex.length;++q)if(G.FileIndex[q]==K)return G.FileIndex.splice(q,1),G.FullPaths.splice(q,1),!0}return!1}function Xn(G,X,K){M(G);var q=_n.find(G,X);if(q){for(var Z=0;Z<G.FileIndex.length;++Z)if(G.FileIndex[Z]==q)return G.FileIndex[Z].name=i(K),G.FullPaths[Z]=K,!0}return!1}function Di(G){b(G,!0)}return e.find=B,e.read=z,e.parse=f,e.write=Ee,e.writeFile=he,e.utils={cfb_new:tr,cfb_add:Vt,cfb_del:Gn,cfb_mov:Xn,cfb_gc:Di,ReadShift:Hg,CheckField:R9,prep_blob:ys,bconcat:Zr,use_zlib:F,_deflateRaw:ns,_inflateRaw:is,consts:Me},e})();function zue(n){return typeof n=="string"?bx(n):Array.isArray(n)?mue(n):n}function bp(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=bx(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Bm(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([zue(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Mp(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function ri(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function sO(n,e){for(var t=[],r=ri(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function cR(n){for(var e=[],t=ri(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function Lx(n){for(var e=[],t=ri(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function $ue(n){for(var e=[],t=ri(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var gv=new Date(1899,11,30,0,0,0);function Ji(n,e){var t=n.getTime(),r=gv.getTime()+(n.getTimezoneOffset()-gv.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var u9=new Date,Wue=gv.getTime()+(u9.getTimezoneOffset()-gv.getTimezoneOffset())*6e4,aO=u9.getTimezoneOffset();function h9(n){var e=new Date;return e.setTime(n*24*60*60*1e3+Wue),e.getTimezoneOffset()!==aO&&e.setTime(e.getTime()+(e.getTimezoneOffset()-aO)*6e4),e}var oO=new Date("2017-02-19T19:06:09.000Z"),f9=isNaN(oO.getFullYear())?new Date("2/19/17"):oO,Hue=f9.getFullYear()==2017;function Oi(n,e){var t=new Date(n);if(Hue)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(f9.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Nx(n,e){if(Xt&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function es(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=es(n[t]));return e}function Hn(n,e){for(var t="";t.length<e;)t+=n;return t}function tl(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var Kue=["january","february","march","april","may","june","july","august","september","october","november","december"];function jm(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&Kue.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function kt(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return Xt?r=ml(t):r=pue(t),_n.utils.cfb_add(n,e,r)}_n.utils.cfb_add(n,e,t)}else n.file(e,t)}function uR(){return _n.utils.cfb_new()}var hr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,que={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},hR=cR(que),fR=/[&<>'"]/g,Xue=/[\u0000-\u0008\u000b-\u001f]/g;function dn(n){var e=n+"";return e.replace(fR,function(t){return hR[t]}).replace(Xue,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function lO(n){return dn(n).replace(/ /g,"_x0020_")}var d9=/[\u0000-\u001f]/g;function Yue(n){var e=n+"";return e.replace(fR,function(t){return hR[t]}).replace(/\n/g,"<br/>").replace(d9,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function Zue(n){var e=n+"";return e.replace(fR,function(t){return hR[t]}).replace(d9,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function Que(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function Jue(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function I2(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function cO(n){var e=ph(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function uO(n){return ml(n,"binary").toString("utf8")}var _1="foo bar baz",Wg=Xt&&(uO(_1)==I2(_1)&&uO||cO(_1)==I2(_1)&&cO)||I2,Bm=Xt?function(n){return ml(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},ehe=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}})(),g9=/(^\s|\s$|\n)/;function Qr(n,e){return"<"+n+(e.match(g9)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function Gm(n){return ri(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function Ke(n,e,t){return"<"+n+(t!=null?Gm(t):"")+(e!=null?(e.match(g9)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function _S(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function the(n,e){switch(typeof n){case"string":var t=Ke("vt:lpwstr",dn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return Ke((n|0)==n?"vt:i4":"vt:r8",dn(String(n)));case"boolean":return Ke("vt:bool",n?"true":"false")}if(n instanceof Date)return Ke("vt:filetime",_S(n));throw new Error("Unable to serialize "+n)}var Lr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},t0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Es={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function nhe(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function rhe(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var hO=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},fO=Xt?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:ml(e)})):hO(n)}:hO,dO=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(Eg(n,i)));return r.join("").replace($g,"")},dR=Xt?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace($g,""):dO(n,e,t)}:dO,gO=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},m9=Xt?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):gO(n,e,t)}:gO,mO=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(zf(n,i)));return r.join("")},kp=Xt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):mO(e,t,r)}:mO,p9=function(n,e){var t=ws(n,e);return t>0?kp(n,e+4,e+4+t-1):""},_9=p9,y9=function(n,e){var t=ws(n,e);return t>0?kp(n,e+4,e+4+t-1):""},v9=y9,x9=function(n,e){var t=2*ws(n,e);return t>0?kp(n,e+4,e+4+t-1):""},E9=x9,w9=function(e,t){var r=ws(e,t);return r>0?dR(e,t+4,t+4+r):""},T9=w9,S9=function(n,e){var t=ws(n,e);return t>0?kp(n,e+4,e+4+t):""},I9=S9,A9=function(n,e){return nhe(n,e)},mv=A9,gR=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Xt&&(_9=function(e,t){if(!Buffer.isBuffer(e))return p9(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},v9=function(e,t){if(!Buffer.isBuffer(e))return y9(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},E9=function(e,t){if(!Buffer.isBuffer(e))return x9(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},T9=function(e,t){if(!Buffer.isBuffer(e))return w9(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},I9=function(e,t){if(!Buffer.isBuffer(e))return S9(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},mv=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):A9(e,t)},gR=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var zf=function(n,e){return n[e]},Eg=function(n,e){return n[e+1]*256+n[e]},ihe=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},ws=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},ku=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},she=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Hg(n,e){var t="",r,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,Xt&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(Eg(this,u)),u+=2;n*=2;break;case"utf8":t=kp(this,this.l,this.l+n);break;case"utf16le":n*=2,t=dR(this,this.l,this.l+n);break;case"wstr":return Hg.call(this,n,"dbcs");case"lpstr-ansi":t=_9(this,this.l),n=4+ws(this,this.l);break;case"lpstr-cp":t=v9(this,this.l),n=4+ws(this,this.l);break;case"lpwstr":t=E9(this,this.l),n=4+2*ws(this,this.l);break;case"lpp4":n=4+ws(this,this.l),t=T9(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+ws(this,this.l),t=I9(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=zf(this,this.l+n++))!==0;)s.push(g1(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=Eg(this,this.l+n))!==0;)s.push(g1(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=zf(this,u),this.l=u+1,o=Hg.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(g1(Eg(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=zf(this,u),this.l=u+1,o=Hg.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(g1(zf(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=zf(this,this.l),this.l++,r;case 2:return r=(e==="i"?ihe:Eg)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?ku:she)(this,this.l),this.l+=4,r):(i=ws(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=mv(this,this.l):i=mv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=m9(this,this.l,n);break}}return this.l+=n,t}var ahe=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},ohe=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},lhe=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function che(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)lhe(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,ahe(this,e,this.l);break;case 8:if(r=8,t==="f"){rhe(this,e,this.l);break}case 16:break;case-4:r=4,ohe(this,e,this.l);break}return this.l+=r,this}function R9(n,e){var t=m9(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function ys(n,e){n.l=e,n.read_shift=Hg,n.chk=R9,n.write_shift=che}function _o(n,e){n.l+=e}function Re(n){var e=ph(n);return ys(e,0),e}function Qi(){var n=[],e=Xt?256:2048,t=function(u){var f=Re(u);return ys(f,0),f},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),Zr(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function Le(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=npe[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&gR(t)&&n.push(t)}}function Kg(n,e,t){var r=es(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function pO(n,e,t){var r=es(n);return r.s=Kg(r.s,e.s,t),r.e=Kg(r.e,e.s,t),r}function qg(n,e){if(n.cRel&&n.c<0)for(n=es(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=es(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=mn(n);return!n.cRel&&n.cRel!=null&&(t=fhe(t)),!n.rRel&&n.rRel!=null&&(t=uhe(t)),t}function A2(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+_i(n.s.c)+":"+(n.e.cRel?"":"$")+_i(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+ni(n.s.r)+":"+(n.e.rRel?"":"$")+ni(n.e.r):qg(n.s,e.biff)+":"+qg(n.e,e.biff)}function mR(n){return parseInt(hhe(n),10)-1}function ni(n){return""+(n+1)}function uhe(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function hhe(n){return n.replace(/\$(\d+)$/,"$1")}function pR(n){for(var e=dhe(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function _i(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function fhe(n){return n.replace(/^([A-Z])/,"$$$1")}function dhe(n){return n.replace(/^\$([A-Z])/,"$1")}function ghe(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Nr(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function mn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function Ms(n){var e=n.indexOf(":");return e==-1?{s:Nr(n),e:Nr(n)}:{s:Nr(n.slice(0,e)),e:Nr(n.slice(e+1))}}function cr(n,e){return typeof e>"u"||typeof e=="number"?cr(n.s,n.e):(typeof n!="string"&&(n=mn(n)),typeof e!="string"&&(e=mn(e)),n==e?n:n+":"+e)}function Rn(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function _O(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=Vc(n.z,t?Ji(e):e)}catch{}try{return n.w=Vc((n.XF||{}).numFmtId||(t?14:0),t?Ji(e):e)}catch{return""+e}}function ul(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?Op[n.v]||n.v:e==null?_O(n,n.v):_O(n,e))}function bh(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function C9(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Nr(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var f=Rn(s["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(u.e.r=a=f.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[d].length;++g)if(!(typeof e[d][g]>"u")){var p={v:e[d][g]},x=a+d,v=o+g;if(u.s.r>x&&(u.s.r=x),u.s.c>v&&(u.s.c=v),u.e.r<x&&(u.e.r=x),u.e.c<v&&(u.e.c=v),e[d][g]&&typeof e[d][g]=="object"&&!Array.isArray(e[d][g])&&!(e[d][g]instanceof Date))p=e[d][g];else if(Array.isArray(p.v)&&(p.f=e[d][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||qn[14],r.cellDates?(p.t="d",p.w=Vc(p.z,Ji(p.v))):(p.t="n",p.v=Ji(p.v),p.w=Vc(p.z,p.v))):p.t="s";if(i)s[x]||(s[x]=[]),s[x][v]&&s[x][v].z&&(p.z=s[x][v].z),s[x][v]=p;else{var E=mn({c:v,r:x});s[E]&&s[E].z&&(p.z=s[E].z),s[E]=p}}}return u.s.c<1e7&&(s["!ref"]=cr(u)),s}function n0(n,e){return C9(null,n,e)}function mhe(n){return n.read_shift(4,"i")}function Ra(n,e){return e||(e=Re(4)),e.write_shift(4,n),e}function yi(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function Dr(n,e){var t=!1;return e==null&&(t=!0,e=Re(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function phe(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function _he(n,e){return e||(e=Re(4)),e.write_shift(2,0),e.write_shift(2,0),e}function _R(n,e){var t=n.l,r=n.read_shift(1),i=yi(n),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=n.read_shift(4),l=0;l!=o;++l)s.push(phe(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function yhe(n,e){var t=!1;return e==null&&(t=!0,e=Re(15+4*n.t.length)),e.write_shift(1,0),Dr(n.t,e),t?e.slice(0,e.l):e}var vhe=_R;function xhe(n,e){var t=!1;return e==null&&(t=!0,e=Re(23+4*n.t.length)),e.write_shift(1,1),Dr(n.t,e),e.write_shift(4,1),_he({},e),t?e.slice(0,e.l):e}function ta(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function kh(n,e){return e==null&&(e=Re(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function Oh(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function Lh(n,e){return e==null&&(e=Re(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var Ehe=yi,P9=Dr;function yR(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function pv(n,e){var t=!1;return e==null&&(t=!0,e=Re(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var whe=yi,yS=yR,vR=pv;function M9(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?mv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):ku(e,0)>>2;return t?i/100:i}function b9(n,e){e==null&&(e=Re(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function k9(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function The(n,e){return e||(e=Re(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var Nh=k9,r0=The;function i0(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function _h(n,e){return(e||Re(8)).write_shift(8,n,"f")}function She(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=Ohe[i];u&&(e.rgb=CO(u));break;case 2:e.rgb=CO([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function _v(n,e){if(e||(e=Re(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Ihe(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function Ahe(n,e){e||(e=Re(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var O9=2,ps=3,y1=11,yv=19,v1=64,Rhe=65,Che=71,Phe=4108,Mhe=4126,qr=80,yO={1:{n:"CodePage",t:O9},2:{n:"Category",t:qr},3:{n:"PresentationFormat",t:qr},4:{n:"ByteCount",t:ps},5:{n:"LineCount",t:ps},6:{n:"ParagraphCount",t:ps},7:{n:"SlideCount",t:ps},8:{n:"NoteCount",t:ps},9:{n:"HiddenCount",t:ps},10:{n:"MultimediaClipCount",t:ps},11:{n:"ScaleCrop",t:y1},12:{n:"HeadingPairs",t:Phe},13:{n:"TitlesOfParts",t:Mhe},14:{n:"Manager",t:qr},15:{n:"Company",t:qr},16:{n:"LinksUpToDate",t:y1},17:{n:"CharacterCount",t:ps},19:{n:"SharedDoc",t:y1},22:{n:"HyperlinksChanged",t:y1},23:{n:"AppVersion",t:ps,p:"version"},24:{n:"DigSig",t:Rhe},26:{n:"ContentType",t:qr},27:{n:"ContentStatus",t:qr},28:{n:"Language",t:qr},29:{n:"Version",t:qr},255:{},2147483648:{n:"Locale",t:yv},2147483651:{n:"Behavior",t:yv},1919054434:{}},vO={1:{n:"CodePage",t:O9},2:{n:"Title",t:qr},3:{n:"Subject",t:qr},4:{n:"Author",t:qr},5:{n:"Keywords",t:qr},6:{n:"Comments",t:qr},7:{n:"Template",t:qr},8:{n:"LastAuthor",t:qr},9:{n:"RevNumber",t:qr},10:{n:"EditTime",t:v1},11:{n:"LastPrinted",t:v1},12:{n:"CreatedDate",t:v1},13:{n:"ModifiedDate",t:v1},14:{n:"PageCount",t:ps},15:{n:"WordCount",t:ps},16:{n:"CharCount",t:ps},17:{n:"Thumbnail",t:Che},18:{n:"Application",t:qr},19:{n:"DocSecurity",t:ps},255:{},2147483648:{n:"Locale",t:yv},2147483651:{n:"Behavior",t:yv},1919054434:{}};function bhe(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var khe=bhe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ohe=es(khe),Op={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Lhe={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},x1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function L9(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function N9(n,e){var t=$ue(Lhe),r=[],i;r[r.length]=hr,r[r.length]=Ke("Types",null,{xmlns:Lr.CT,"xmlns:xsd":Lr.xsd,"xmlns:xsi":Lr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ke("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){n[l]&&n[l].length>0&&(i=n[l][0],r[r.length]=Ke("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:x1[l][e.bookType]||x1[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=Ke("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:x1[l][e.bookType]||x1[l].xlsx})})},o=function(l){(n[l]||[]).forEach(function(u){r[r.length]=Ke("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Wt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function D9(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function gd(n){var e=[hr,Ke("Relationships",null,{xmlns:Lr.RELS})];return ri(n["!id"]).forEach(function(t){e[e.length]=Ke("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function un(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[Wt.HLINK,Wt.XPATH,Wt.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function Nhe(n){var e=[hr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function xO(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Dhe(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Fhe(n){var e=[hr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(xO(n[t][0],n[t][1])),e.push(Dhe("",n[t][0]));return e.push(xO("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function F9(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+cv.version+"</meta:generator></office:meta></office:document-meta>"}var Hu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function R2(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=dn(e),r[r.length]=t?Ke(n,e,t):Qr(n,e))}function V9(n,e){var t=e||{},r=[hr,Ke("cp:coreProperties",null,{"xmlns:cp":Lr.CORE_PROPS,"xmlns:dc":Lr.dc,"xmlns:dcterms":Lr.dcterms,"xmlns:dcmitype":Lr.dcmitype,"xmlns:xsi":Lr.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&R2("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:_S(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&R2("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:_S(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=Hu.length;++s){var a=Hu[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&R2(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var md=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],j9=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function B9(n){var e=[],t=Ke;return n||(n={}),n.Application="SheetJS",e[e.length]=hr,e[e.length]=Ke("Properties",null,{xmlns:Lr.EXT_PROPS,"xmlns:vt":Lr.vt}),md.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=dn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+dn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function G9(n){var e=[hr,Ke("Properties",null,{xmlns:Lr.CUST_PROPS,"xmlns:vt":Lr.vt})];if(!n)return e.join("");var t=1;return ri(n).forEach(function(i){++t,e[e.length]=Ke("property",the(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:dn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var EO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Vhe(n,e){var t=[];return ri(EO).map(function(r){for(var i=0;i<Hu.length;++i)if(Hu[i][1]==r)return Hu[i];for(i=0;i<md.length;++i)if(md[i][1]==r)return md[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(Qr(EO[r[1]]||r[1],i))}}),Ke("DocumentProperties",t.join(""),{xmlns:Es.o})}function jhe(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&ri(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<Hu.length;++a)if(s==Hu[a][1])return;for(a=0;a<md.length;++a)if(s==md[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Ke(lO(s),o,{"dt:dt":l}))}}),e&&ri(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Ke(lO(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Es.o+'">'+i.join("")+"</"+r+">"}function Bhe(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=Re(8);return a.write_shift(4,r),a.write_shift(4,i),a}function wO(n,e){var t=Re(4),r=Re(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=Re(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Bhe(e);break;case 31:case 80:for(r=Re(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return Zr([t,r])}var U9=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Ghe(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function TO(n,e,t){var r=Re(8),i=[],s=[],a=8,o=0,l=Re(8),u=Re(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=Re(8),u.write_shift(4,0),i.unshift(u);var f=[Re(4)];for(f[0].write_shift(4,n.length),o=0;o<n.length;++o){var d=n[o][0];for(l=Re(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);f.push(l)}l=Zr(f),s.unshift(l),a+=8+l.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(U9.indexOf(n[o][0])>-1||j9.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],p=0;if(e){p=+e[n[o][0]];var x=t[p];if(x.p=="version"&&typeof g=="string"){var v=g.split(".");g=(+v[0]<<16)+(+v[1]||0)}l=wO(x.t,g)}else{var E=Ghe(g);E==-1&&(E=31,g=String(g)),l=wO(E,g)}s.push(l),u=Re(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+l.length}var R=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,R),R+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),Zr([r].concat(i).concat(s))}function SO(n,e,t,r,i,s){var a=Re(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,_n.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=TO(n,t,r);if(o.push(l),i){var u=TO(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return Zr(o)}function Uhe(n,e){e||(e=Re(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function zhe(n,e){return n.read_shift(e)===1}function Ii(n,e){return e||(e=Re(2)),e.write_shift(2,+!!n),e}function z9(n){return n.read_shift(2,"u")}function Ws(n,e){return e||(e=Re(2)),e.write_shift(2,n),e}function $9(n,e,t){return t||(t=Re(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function W9(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function $he(n){var e=n.t||"",t=Re(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=Re(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return Zr(i)}function Whe(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function Hhe(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):Whe(n,r,t)}function Khe(n,e,t){if(t.biff>5)return Hhe(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function H9(n,e,t){return t||(t=Re(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function IO(n,e){e||(e=Re(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function qhe(n){var e=Re(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),IO(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&IO(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),t=0;t<r.length-3*l;++t)e.write_shift(1,r.charCodeAt(t+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function yh(n,e,t,r){return r||(r=Re(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function Xhe(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function Yhe(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function K9(n,e){return e||(e=Re(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function xR(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Re(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Zhe(n,e){var t=!e||e.biff==8,r=Re(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function Qhe(n,e){var t=!e||e.biff>=8?2:1,r=Re(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Jhe(n,e){var t=Re(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=$he(n[i]);var s=Zr([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function efe(){var n=Re(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function tfe(n){var e=Re(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function nfe(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=Re(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function rfe(n,e,t,r){var i=Re(10);return yh(n,e,r,i),i.write_shift(4,t),i}function ife(n,e,t,r,i){var s=!i||i.biff==8,a=Re(8+ +s+(1+s)*t.length);return yh(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function sfe(n,e,t,r){var i=t&&t.biff==5;r||(r=Re(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function afe(n,e){var t=e.biff==8||!e.biff?4:2,r=Re(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function AO(n,e,t,r){var i=t&&t.biff==5;r||(r=Re(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function ofe(n){var e=Re(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function lfe(n,e,t,r,i,s){var a=Re(8);return yh(n,e,r,a),$9(t,s,a),a}function cfe(n,e,t,r){var i=Re(14);return yh(n,e,r,i),_h(t,i),i}function ufe(n,e,t){if(t.biff<8)return hfe(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(Xhe(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function hfe(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=W9(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function ffe(n){var e=Re(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)K9(n[t],e);return e}function dfe(n){var e=Re(24),t=Nr(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Zr([e,qhe(n[1])])}function gfe(n){var e=n[1].Tooltip,t=Re(10+2*(e.length+1));t.write_shift(2,2048);var r=Nr(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function mfe(n){return n||(n=Re(4)),n.write_shift(2,1),n.write_shift(2,1),n}function pfe(n,e,t){if(!t.cellStyles)return _o(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(u.level=l>>8&7),u}function _fe(n,e){var t=Re(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function yfe(n){for(var e=Re(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function vfe(n,e,t){var r=Re(15);return Np(r,n,e),r.write_shift(8,t,"f"),r}function xfe(n,e,t){var r=Re(9);return Np(r,n,e),r.write_shift(2,t),r}var Efe=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=cR({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var u=[],f=ph(1);switch(l.type){case"base64":f=xa(cl(o));break;case"binary":f=xa(o);break;case"buffer":case"array":f=o;break}ys(f,0);var d=f.read_shift(1),g=!!(d&136),p=!1,x=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var v=0,E=521;d==2&&(v=f.read_shift(2)),f.l+=3,d!=2&&(v=f.read_shift(4)),v>1048576&&(v=1e6),d!=2&&(E=f.read_shift(2));var R=f.read_shift(2),S=l.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(S=n[f[f.l]]),f.l+=1,f.l+=2),x&&(f.l+=36);for(var C=[],O={},N=Math.min(f.length,d==2?521:E-10-(p?264:0)),z=x?32:11;f.l<N&&f[f.l]!=13;)switch(O={},O.name=uv.utils.decode(S,f.slice(f.l,f.l+z)).replace(/[\u0000\r\n].*$/g,""),f.l+=z,O.type=String.fromCharCode(f.read_shift(1)),d!=2&&!x&&(O.offset=f.read_shift(4)),O.len=f.read_shift(1),d==2&&(O.offset=f.read_shift(2)),O.dec=f.read_shift(1),O.name.length&&C.push(O),d!=2&&(f.l+=x?13:14),O.type){case"B":(!p||O.len!=8)&&l.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+O.type)}if(f[f.l]!==13&&(f.l=E-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=E;var M=0,P=0;for(u[0]=[],P=0;P!=C.length;++P)u[0][P]=C[P].name;for(;v-- >0;){if(f[f.l]===42){f.l+=R;continue}for(++f.l,u[++M]=[],P=0,P=0;P!=C.length;++P){var b=f.slice(f.l,f.l+C[P].len);f.l+=C[P].len,ys(b,0);var D=uv.utils.decode(S,b);switch(C[P].type){case"C":D.trim().length&&(u[M][P]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[M][P]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[M][P]=D;break;case"F":u[M][P]=parseFloat(D.trim());break;case"+":case"I":u[M][P]=x?b.read_shift(-4,"i")^2147483648:b.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[M][P]=!0;break;case"N":case"F":u[M][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[M][P]="##MEMO##"+(x?parseInt(D.trim(),10):b.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[M][P]=+D||0);break;case"@":u[M][P]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":u[M][P]=new Date((b.read_shift(4)-2440588)*864e5+b.read_shift(4));break;case"Y":u[M][P]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[M][P]=-b.read_shift(-8,"f");break;case"B":if(p&&C[P].len==8){u[M][P]=b.read_shift(8,"f");break}case"G":case"P":b.l+=C[P].len;break;case"0":if(C[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[P].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=C,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var f=n0(t(o,u),u);return f["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,f}function i(o,l){try{return bh(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&Fm(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=Qi(),d=Tv(o,{header:1,raw:!0,cellDates:!0}),g=d[0],p=d.slice(1),x=o["!cols"]||[],v=0,E=0,R=0,S=1;for(v=0;v<g.length;++v){if(((x[v]||{}).DBF||{}).name){g[v]=x[v].DBF.name,++R;continue}if(g[v]!=null){if(++R,typeof g[v]=="number"&&(g[v]=g[v].toString(10)),typeof g[v]!="string")throw new Error("DBF Invalid column name "+g[v]+" |"+typeof g[v]+"|");if(g.indexOf(g[v])!==v){for(E=0;E<1024;++E)if(g.indexOf(g[v]+"_"+E)==-1){g[v]+="_"+E;break}}}}var C=Rn(o["!ref"]),O=[],N=[],z=[];for(v=0;v<=C.e.c-C.s.c;++v){var M="",P="",b=0,D=[];for(E=0;E<p.length;++E)p[E][v]!=null&&D.push(p[E][v]);if(D.length==0||g[v]==null){O[v]="?";continue}for(E=0;E<D.length;++E){switch(typeof D[E]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=D[E]instanceof Date?"D":"C";break;default:P="C"}b=Math.max(b,String(D[E]).length),M=M&&M!=P?"C":P}b>250&&(b=250),P=((x[v]||{}).DBF||{}).type,P=="C"&&x[v].DBF.len>b&&(b=x[v].DBF.len),M=="B"&&P=="N"&&(M="N",z[v]=x[v].DBF.dec,b=x[v].DBF.len),N[v]=M=="C"||P=="N"?b:s[M]||0,S+=N[v],O[v]=M}var B=f.next(32);for(B.write_shift(4,318902576),B.write_shift(4,p.length),B.write_shift(2,296+32*R),B.write_shift(2,S),v=0;v<4;++v)B.write_shift(4,0);for(B.write_shift(4,0|(+e[XF]||3)<<8),v=0,E=0;v<g.length;++v)if(g[v]!=null){var U=f.next(32),V=(g[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);U.write_shift(1,V,"sbcs"),U.write_shift(1,O[v]=="?"?"C":O[v],"sbcs"),U.write_shift(4,E),U.write_shift(1,N[v]||s[O[v]]||0),U.write_shift(1,z[v]||0),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(1,0),U.write_shift(4,0),U.write_shift(4,0),E+=N[v]||s[O[v]]||0}var Ae=f.next(264);for(Ae.write_shift(4,13),v=0;v<65;++v)Ae.write_shift(4,0);for(v=0;v<p.length;++v){var be=f.next(S);for(be.write_shift(1,0),E=0;E<g.length;++E)if(g[E]!=null)switch(O[E]){case"L":be.write_shift(1,p[v][E]==null?63:p[v][E]?84:70);break;case"B":be.write_shift(8,p[v][E]||0,"f");break;case"N":var Pe="0";for(typeof p[v][E]=="number"&&(Pe=p[v][E].toFixed(z[E]||0)),R=0;R<N[E]-Pe.length;++R)be.write_shift(1,32);be.write_shift(1,Pe,"sbcs");break;case"D":p[v][E]?(be.write_shift(4,("0000"+p[v][E].getFullYear()).slice(-4),"sbcs"),be.write_shift(2,("00"+(p[v][E].getMonth()+1)).slice(-2),"sbcs"),be.write_shift(2,("00"+p[v][E].getDate()).slice(-2),"sbcs")):be.write_shift(8,"00000000","sbcs");break;case"C":var Me=String(p[v][E]!=null?p[v][E]:"").slice(0,N[E]);for(be.write_shift(1,Me,"sbcs"),R=0;R<N[E]-Me.length;++R)be.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}})(),wfe=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ri(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var x=n[p];return typeof x=="number"?Yk(x):x},r=function(g,p,x){var v=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return v==59?g:Yk(v)};n["|"]=254;function i(g,p){switch(p.type){case"base64":return s(cl(g),p);case"binary":return s(g,p);case"buffer":return s(Xt&&Buffer.isBuffer(g)?g.toString("binary"):Mp(g),p);case"array":return s(Nx(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var x=g.split(/[\n\r]+/),v=-1,E=-1,R=0,S=0,C=[],O=[],N=null,z={},M=[],P=[],b=[],D=0,B;for(+p.codepage>=0&&Fm(+p.codepage);R!==x.length;++R){D=0;var U=x[R].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),V=U.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),Ae=V[0],be;if(U.length>0)switch(Ae){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&O.push(U.slice(3).replace(/;;/g,";"));break;case"C":var Pe=!1,Me=!1,he=!1,ae=!1,Ee=-1,J=-1;for(S=1;S<V.length;++S)switch(V[S].charAt(0)){case"A":break;case"X":E=parseInt(V[S].slice(1))-1,Me=!0;break;case"Y":for(v=parseInt(V[S].slice(1))-1,Me||(E=0),B=C.length;B<=v;++B)C[B]=[];break;case"K":be=V[S].slice(1),be.charAt(0)==='"'?be=be.slice(1,be.length-1):be==="TRUE"?be=!0:be==="FALSE"?be=!1:isNaN(tl(be))?isNaN(jm(be).getDate())||(be=Oi(be)):(be=tl(be),N!==null&&o9(N)&&(be=h9(be))),Pe=!0;break;case"E":ae=!0;var F=xde(V[S].slice(1),{r:v,c:E});C[v][E]=[C[v][E],F];break;case"S":he=!0,C[v][E]=[C[v][E],"S5S"];break;case"G":break;case"R":Ee=parseInt(V[S].slice(1))-1;break;case"C":J=parseInt(V[S].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}if(Pe&&(C[v][E]&&C[v][E].length==2?C[v][E][0]=be:C[v][E]=be,N=null),he){if(ae)throw new Error("SYLK shared formula cannot have own formula");var re=Ee>-1&&C[Ee][J];if(!re||!re[1])throw new Error("SYLK shared formula cannot find base");C[v][E][1]=Ede(re[1],{r:v-Ee,c:E-J})}break;case"F":var te=0;for(S=1;S<V.length;++S)switch(V[S].charAt(0)){case"X":E=parseInt(V[S].slice(1))-1,++te;break;case"Y":for(v=parseInt(V[S].slice(1))-1,B=C.length;B<=v;++B)C[B]=[];break;case"M":D=parseInt(V[S].slice(1))/20;break;case"F":break;case"G":break;case"P":N=O[parseInt(V[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(b=V[S].slice(1).split(" "),B=parseInt(b[0],10);B<=parseInt(b[1],10);++B)D=parseInt(b[2],10),P[B-1]=D===0?{hidden:!0}:{wch:D},ER(P[B-1]);break;case"C":E=parseInt(V[S].slice(1))-1,P[E]||(P[E]={});break;case"R":v=parseInt(V[S].slice(1))-1,M[v]||(M[v]={}),D>0?(M[v].hpt=D,M[v].hpx=Q9(D)):D===0&&(M[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}te<1&&(N=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}}return M.length>0&&(z["!rows"]=M),P.length>0&&(z["!cols"]=P),p&&p.sheetRows&&(C=C.slice(0,p.sheetRows)),[C,z]}function a(g,p){var x=i(g,p),v=x[0],E=x[1],R=n0(v,p);return ri(E).forEach(function(S){R[S]=E[S]}),R}function o(g,p){return bh(a(g,p),p)}function l(g,p,x,v){var E="C;Y"+(x+1)+";X"+(v+1)+";K";switch(g.t){case"n":E+=g.v||0,g.f&&!g.F&&(E+=";E"+TR(g.f,{r:x,c:v}));break;case"b":E+=g.v?"TRUE":"FALSE";break;case"e":E+=g.w||g.v;break;case"d":E+='"'+(g.w||g.v)+'"';break;case"s":E+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(g,p){p.forEach(function(x,v){var E="F;W"+(v+1)+" "+(v+1)+" ";x.hidden?E+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=vv(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=xv(x.wpx)),typeof x.wch=="number"&&(E+=Math.round(x.wch))),E.charAt(E.length-1)!=" "&&g.push(E)})}function f(g,p){p.forEach(function(x,v){var E="F;";x.hidden?E+="M0;":x.hpt?E+="M"+20*x.hpt+";":x.hpx&&(E+="M"+20*Ev(x.hpx)+";"),E.length>2&&g.push(E+"R"+(v+1))})}function d(g,p){var x=["ID;PWXL;N;E"],v=[],E=Rn(g["!ref"]),R,S=Array.isArray(g),C=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),g["!cols"]&&u(x,g["!cols"]),g["!rows"]&&f(x,g["!rows"]),x.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var O=E.s.r;O<=E.e.r;++O)for(var N=E.s.c;N<=E.e.c;++N){var z=mn({r:O,c:N});R=S?(g[O]||[])[N]:g[z],!(!R||R.v==null&&(!R.f||R.F))&&v.push(l(R,g,O,N))}return x.join(C)+C+v.join(C)+C+"E"+C}return{to_workbook:o,to_sheet:a,from_sheet:d}})(),Tfe=(function(){function n(s,a){switch(a.type){case"base64":return e(cl(s),a);case"binary":return e(s,a);case"buffer":return e(Xt&&Buffer.isBuffer(s)?s.toString("binary"):Mp(s),a);case"array":return e(Nx(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,f=0,d=[];f!==o.length;++f){if(o[f].trim()==="BOT"){d[++l]=[],u=0;continue}if(!(l<0)){var g=o[f].trim().split(","),p=g[0],x=g[1];++f;for(var v=o[f]||"";(v.match(/["]/g)||[]).length&1&&f<o.length-1;)v+=`
`+o[++f];switch(v=v.trim(),+p){case-1:if(v==="BOT"){d[++l]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?d[l][u]=!0:v==="FALSE"?d[l][u]=!1:isNaN(tl(x))?isNaN(jm(x).getDate())?d[l][u]=x:d[l][u]=Oi(x):d[l][u]=tl(x),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),d[l][u++]=v!==""?v:null;break}if(v==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function t(s,a){return n0(n(s,a),a)}function r(s,a){return bh(t(s,a),a)}var i=(function(){var s=function(l,u,f,d,g){l.push(u),l.push(f+","+d),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,u,f,d){l.push(u+","+f),l.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var u=[],f=Rn(l["!ref"]),d,g=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,f.e.r-f.s.r+1,""),s(u,"TUPLES",0,f.e.c-f.s.c+1,""),s(u,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){a(u,-1,0,"BOT");for(var x=f.s.c;x<=f.e.c;++x){var v=mn({r:p,c:x});if(d=g?(l[p]||[])[x]:l[v],!d){a(u,1,0,"");continue}switch(d.t){case"n":var E=d.w;!E&&d.v!=null&&(E=d.v),E==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,E,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Vc(d.z||qn[14],Ji(Oi(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var R=`\r
`,S=u.join(R);return S}})();return{to_workbook:r,to_sheet:t,from_sheet:i}})(),q9=(function(){function n(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,g){for(var p=d.split(`
`),x=-1,v=-1,E=0,R=[];E!==p.length;++E){var S=p[E].trim().split(":");if(S[0]==="cell"){var C=Nr(S[1]);if(R.length<=C.r)for(x=R.length;x<=C.r;++x)R[x]||(R[x]=[]);switch(x=C.r,v=C.c,S[2]){case"t":R[x][v]=n(S[3]);break;case"v":R[x][v]=+S[3];break;case"vtf":var O=S[S.length-1];case"vtc":switch(S[3]){case"nl":R[x][v]=!!+S[4];break;default:R[x][v]=+S[4];break}S[2]=="vtf"&&(R[x][v]=[R[x][v],O])}}}return g&&g.sheetRows&&(R=R.slice(0,g.sheetRows)),R}function r(d,g){return n0(t(d,g),g)}function i(d,g){return bh(r(d,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var g=[],p=[],x,v="",E=Ms(d["!ref"]),R=Array.isArray(d),S=E.s.r;S<=E.e.r;++S)for(var C=E.s.c;C<=E.e.c;++C)if(v=mn({r:S,c:C}),x=R?(d[S]||[])[C]:d[v],!(!x||x.v==null||x.t==="z")){switch(p=["cell",v,"t"],x.t){case"s":case"str":p.push(e(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=e(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var O=Ji(Oi(x.v));p[2]="vtc",p[3]="nd",p[4]=""+O,p[5]=x.w||Vc(x.z||qn[14],O);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function f(d){return[s,a,o,a,u(d),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:f}})(),Sfe=(function(){function n(f,d,g,p,x){x.raw?d[g][p]=f:f===""||(f==="TRUE"?d[g][p]=!0:f==="FALSE"?d[g][p]=!1:isNaN(tl(f))?isNaN(jm(f).getDate())?d[g][p]=f:d[g][p]=Oi(f):d[g][p]=tl(f))}function e(f,d){var g=d||{},p=[];if(!f||f.length===0)return p;for(var x=f.split(/[\r\n]/),v=x.length-1;v>=0&&x[v].length===0;)--v;for(var E=10,R=0,S=0;S<=v;++S)R=x[S].indexOf(" "),R==-1?R=x[S].length:R++,E=Math.max(E,R);for(S=0;S<=v;++S){p[S]=[];var C=0;for(n(x[S].slice(0,E).trim(),p,S,C,g),C=1;C<=(x[S].length-E)/10+1;++C)n(x[S].slice(E+(C-1)*10,E+C*10).trim(),p,S,C,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(f){for(var d={},g=!1,p=0,x=0;p<f.length;++p)(x=f.charCodeAt(p))==34?g=!g:!g&&x in t&&(d[x]=(d[x]||0)+1);x=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p]);if(!x.length){d=r;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p])}return x.sort(function(v,E){return v[0]-E[0]||r[v[1]]-r[E[1]]}),t[x.pop()[1]]||44}function s(f,d){var g=d||{},p="",x=g.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=i(f.slice(0,1024)):g&&g.FS?p=g.FS:p=i(f.slice(0,1024));var E=0,R=0,S=0,C=0,O=0,N=p.charCodeAt(0),z=!1,M=0,P=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var b=g.dateNF!=null?Bue(g.dateNF):null;function D(){var B=f.slice(C,O),U={};if(B.charAt(0)=='"'&&B.charAt(B.length-1)=='"'&&(B=B.slice(1,-1).replace(/""/g,'"')),B.length===0)U.t="z";else if(g.raw)U.t="s",U.v=B;else if(B.trim().length===0)U.t="s",U.v=B;else if(B.charCodeAt(0)==61)B.charCodeAt(1)==34&&B.charCodeAt(B.length-1)==34?(U.t="s",U.v=B.slice(2,-1).replace(/""/g,'"')):wde(B)?(U.t="n",U.f=B.slice(1)):(U.t="s",U.v=B);else if(B=="TRUE")U.t="b",U.v=!0;else if(B=="FALSE")U.t="b",U.v=!1;else if(!isNaN(S=tl(B)))U.t="n",g.cellText!==!1&&(U.w=B),U.v=S;else if(!isNaN(jm(B).getDate())||b&&B.match(b)){U.z=g.dateNF||qn[14];var V=0;b&&B.match(b)&&(B=Gue(B,g.dateNF,B.match(b)||[]),V=1),g.cellDates?(U.t="d",U.v=Oi(B,V)):(U.t="n",U.v=Ji(Oi(B,V))),g.cellText!==!1&&(U.w=Vc(U.z,U.v instanceof Date?Ji(U.v):U.v)),g.cellNF||delete U.z}else U.t="s",U.v=B;if(U.t=="z"||(g.dense?(x[E]||(x[E]=[]),x[E][R]=U):x[mn({c:R,r:E})]=U),C=O+1,P=f.charCodeAt(C),v.e.c<R&&(v.e.c=R),v.e.r<E&&(v.e.r=E),M==N)++R;else if(R=0,++E,g.sheetRows&&g.sheetRows<=E)return!0}e:for(;O<f.length;++O)switch(M=f.charCodeAt(O)){case 34:P===34&&(z=!z);break;case N:case 10:case 13:if(!z&&D())break e;break}return O-C>0&&D(),x["!ref"]=cr(v),x}function a(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?s(f,d):n0(e(f,d),d)}function o(f,d){var g="",p=d.type=="string"?[0,0,0,0]:Dpe(f,d);switch(d.type){case"base64":g=cl(f);break;case"binary":g=f;break;case"buffer":d.codepage==65001?g=f.toString("utf8"):d.codepage&&typeof uv<"u"||(g=Xt&&Buffer.isBuffer(f)?f.toString("binary"):Mp(f));break;case"array":g=Nx(f);break;case"string":g=f;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=Wg(g.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?g=Wg(g):d.type=="binary"&&typeof uv<"u",g.slice(0,19)=="socialcalc:version:"?q9.to_sheet(d.type=="string"?g:Wg(g),d):a(g,d)}function l(f,d){return bh(o(f,d),d)}function u(f){for(var d=[],g=Rn(f["!ref"]),p,x=Array.isArray(f),v=g.s.r;v<=g.e.r;++v){for(var E=[],R=g.s.c;R<=g.e.c;++R){var S=mn({r:v,c:R});if(p=x?(f[v]||[])[R]:f[S],!p||p.v==null){E.push("          ");continue}for(var C=(p.w||(ul(p),p.w)||"").slice(0,10);C.length<10;)C+=" ";E.push(C+(R===0?" ":""))}d.push(E.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})(),RO=(function(){function n(F,re,te){if(F){ys(F,F.l||0);for(var Y=te.Enum||Ee;F.l<F.length;){var fe=F.read_shift(2),se=Y[fe]||Y[65535],ne=F.read_shift(2),k=F.l+ne,Te=se.f&&se.f(F,ne,te);if(F.l=k,re(Te,se,fe))return}}}function e(F,re){switch(re.type){case"base64":return t(xa(cl(F)),re);case"binary":return t(xa(F),re);case"buffer":case"array":return t(F,re)}throw"Unsupported type "+re.type}function t(F,re){if(!F)return F;var te=re||{},Y=te.dense?[]:{},fe="Sheet1",se="",ne=0,k={},Te=[],le=[],We={s:{r:0,c:0},e:{r:0,c:0}},ce=te.sheetRows||0;if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)te.Enum=Ee,n(F,function(De,Mt,Rt){switch(Rt){case 0:te.vers=De,De>=4096&&(te.qpro=!0);break;case 6:We=De;break;case 204:De&&(se=De);break;case 222:se=De;break;case 15:case 51:te.qpro||(De[1].v=De[1].v.slice(1));case 13:case 14:case 16:Rt==14&&(De[2]&112)==112&&(De[2]&15)>1&&(De[2]&15)<15&&(De[1].z=te.dateNF||qn[14],te.cellDates&&(De[1].t="d",De[1].v=h9(De[1].v))),te.qpro&&De[3]>ne&&(Y["!ref"]=cr(We),k[fe]=Y,Te.push(fe),Y=te.dense?[]:{},We={s:{r:0,c:0},e:{r:0,c:0}},ne=De[3],fe=se||"Sheet"+(ne+1),se="");var Ct=te.dense?(Y[De[0].r]||[])[De[0].c]:Y[mn(De[0])];if(Ct){Ct.t=De[1].t,Ct.v=De[1].v,De[1].z!=null&&(Ct.z=De[1].z),De[1].f!=null&&(Ct.f=De[1].f);break}te.dense?(Y[De[0].r]||(Y[De[0].r]=[]),Y[De[0].r][De[0].c]=De[1]):Y[mn(De[0])]=De[1];break}},te);else if(F[2]==26||F[2]==14)te.Enum=J,F[2]==14&&(te.qpro=!0,F.l=0),n(F,function(De,Mt,Rt){switch(Rt){case 204:fe=De;break;case 22:De[1].v=De[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(De[3]>ne&&(Y["!ref"]=cr(We),k[fe]=Y,Te.push(fe),Y=te.dense?[]:{},We={s:{r:0,c:0},e:{r:0,c:0}},ne=De[3],fe="Sheet"+(ne+1)),ce>0&&De[0].r>=ce)break;te.dense?(Y[De[0].r]||(Y[De[0].r]=[]),Y[De[0].r][De[0].c]=De[1]):Y[mn(De[0])]=De[1],We.e.c<De[0].c&&(We.e.c=De[0].c),We.e.r<De[0].r&&(We.e.r=De[0].r);break;case 27:De[14e3]&&(le[De[14e3][0]]=De[14e3][1]);break;case 1537:le[De[0]]=De[1],De[0]==ne&&(fe=De[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(Y["!ref"]=cr(We),k[se||fe]=Y,Te.push(se||fe),!le.length)return{SheetNames:Te,Sheets:k};for(var W={},Ie=[],tt=0;tt<le.length;++tt)k[Te[tt]]?(Ie.push(le[tt]||Te[tt]),W[le[tt]]=k[le[tt]]||k[Te[tt]]):(Ie.push(le[tt]),W[le[tt]]={"!ref":"A1"});return{SheetNames:Ie,Sheets:W}}function r(F,re){var te=re||{};if(+te.codepage>=0&&Fm(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=Qi(),fe=Rn(F["!ref"]),se=Array.isArray(F),ne=[];qe(Y,0,s(1030)),qe(Y,6,l(fe));for(var k=Math.min(fe.e.r,8191),Te=fe.s.r;Te<=k;++Te)for(var le=ni(Te),We=fe.s.c;We<=fe.e.c;++We){Te===fe.s.r&&(ne[We]=_i(We));var ce=ne[We]+le,W=se?(F[Te]||[])[We]:F[ce];if(!(!W||W.t=="z"))if(W.t=="n")(W.v|0)==W.v&&W.v>=-32768&&W.v<=32767?qe(Y,13,p(Te,We,W.v)):qe(Y,14,v(Te,We,W.v));else{var Ie=ul(W);qe(Y,15,d(Te,We,Ie.slice(0,239)))}}return qe(Y,1),Y.end()}function i(F,re){var te=re||{};if(+te.codepage>=0&&Fm(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=Qi();qe(Y,0,a(F));for(var fe=0,se=0;fe<F.SheetNames.length;++fe)(F.Sheets[F.SheetNames[fe]]||{})["!ref"]&&qe(Y,27,ae(F.SheetNames[fe],se++));var ne=0;for(fe=0;fe<F.SheetNames.length;++fe){var k=F.Sheets[F.SheetNames[fe]];if(!(!k||!k["!ref"])){for(var Te=Rn(k["!ref"]),le=Array.isArray(k),We=[],ce=Math.min(Te.e.r,8191),W=Te.s.r;W<=ce;++W)for(var Ie=ni(W),tt=Te.s.c;tt<=Te.e.c;++tt){W===Te.s.r&&(We[tt]=_i(tt));var De=We[tt]+Ie,Mt=le?(k[W]||[])[tt]:k[De];if(!(!Mt||Mt.t=="z"))if(Mt.t=="n")qe(Y,23,D(W,tt,ne,Mt.v));else{var Rt=ul(Mt);qe(Y,22,M(W,tt,ne,Rt.slice(0,239)))}}++ne}}return qe(Y,1),Y.end()}function s(F){var re=Re(2);return re.write_shift(2,F),re}function a(F){var re=Re(26);re.write_shift(2,4096),re.write_shift(2,4),re.write_shift(4,0);for(var te=0,Y=0,fe=0,se=0;se<F.SheetNames.length;++se){var ne=F.SheetNames[se],k=F.Sheets[ne];if(!(!k||!k["!ref"])){++fe;var Te=Ms(k["!ref"]);te<Te.e.r&&(te=Te.e.r),Y<Te.e.c&&(Y=Te.e.c)}}return te>8191&&(te=8191),re.write_shift(2,te),re.write_shift(1,fe),re.write_shift(1,Y),re.write_shift(2,0),re.write_shift(2,0),re.write_shift(1,1),re.write_shift(1,2),re.write_shift(4,0),re.write_shift(4,0),re}function o(F,re,te){var Y={s:{c:0,r:0},e:{c:0,r:0}};return re==8&&te.qpro?(Y.s.c=F.read_shift(1),F.l++,Y.s.r=F.read_shift(2),Y.e.c=F.read_shift(1),F.l++,Y.e.r=F.read_shift(2),Y):(Y.s.c=F.read_shift(2),Y.s.r=F.read_shift(2),re==12&&te.qpro&&(F.l+=2),Y.e.c=F.read_shift(2),Y.e.r=F.read_shift(2),re==12&&te.qpro&&(F.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function l(F){var re=Re(8);return re.write_shift(2,F.s.c),re.write_shift(2,F.s.r),re.write_shift(2,F.e.c),re.write_shift(2,F.e.r),re}function u(F,re,te){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(Y[0].c=F.read_shift(1),Y[3]=F.read_shift(1),Y[0].r=F.read_shift(2),F.l+=2):(Y[2]=F.read_shift(1),Y[0].c=F.read_shift(2),Y[0].r=F.read_shift(2)),Y}function f(F,re,te){var Y=F.l+re,fe=u(F,re,te);if(fe[1].t="s",te.vers==20768){F.l++;var se=F.read_shift(1);return fe[1].v=F.read_shift(se,"utf8"),fe}return te.qpro&&F.l++,fe[1].v=F.read_shift(Y-F.l,"cstr"),fe}function d(F,re,te){var Y=Re(7+te.length);Y.write_shift(1,255),Y.write_shift(2,re),Y.write_shift(2,F),Y.write_shift(1,39);for(var fe=0;fe<Y.length;++fe){var se=te.charCodeAt(fe);Y.write_shift(1,se>=128?95:se)}return Y.write_shift(1,0),Y}function g(F,re,te){var Y=u(F,re,te);return Y[1].v=F.read_shift(2,"i"),Y}function p(F,re,te){var Y=Re(7);return Y.write_shift(1,255),Y.write_shift(2,re),Y.write_shift(2,F),Y.write_shift(2,te,"i"),Y}function x(F,re,te){var Y=u(F,re,te);return Y[1].v=F.read_shift(8,"f"),Y}function v(F,re,te){var Y=Re(13);return Y.write_shift(1,255),Y.write_shift(2,re),Y.write_shift(2,F),Y.write_shift(8,te,"f"),Y}function E(F,re,te){var Y=F.l+re,fe=u(F,re,te);if(fe[1].v=F.read_shift(8,"f"),te.qpro)F.l=Y;else{var se=F.read_shift(2);O(F.slice(F.l,F.l+se),fe),F.l+=se}return fe}function R(F,re,te){var Y=re&32768;return re&=-32769,re=(Y?F:0)+(re>=8192?re-16384:re),(Y?"":"$")+(te?_i(re):ni(re))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function O(F,re){ys(F,0);for(var te=[],Y=0,fe="",se="",ne="",k="";F.l<F.length;){var Te=F[F.l++];switch(Te){case 0:te.push(F.read_shift(8,"f"));break;case 1:se=R(re[0].c,F.read_shift(2),!0),fe=R(re[0].r,F.read_shift(2),!1),te.push(se+fe);break;case 2:{var le=R(re[0].c,F.read_shift(2),!0),We=R(re[0].r,F.read_shift(2),!1);se=R(re[0].c,F.read_shift(2),!0),fe=R(re[0].r,F.read_shift(2),!1),te.push(le+We+":"+se+fe)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(F.read_shift(2));break;case 6:{for(var ce="";Te=F[F.l++];)ce+=String.fromCharCode(Te);te.push('"'+ce.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:k=te.pop(),ne=te.pop(),te.push(["AND","OR"][Te-20]+"("+ne+","+k+")");break;default:if(Te<32&&C[Te])k=te.pop(),ne=te.pop(),te.push(ne+C[Te]+k);else if(S[Te]){if(Y=S[Te][1],Y==69&&(Y=F[F.l++]),Y>te.length){console.error("WK1 bad formula parse 0x"+Te.toString(16)+":|"+te.join("|")+"|");return}var W=te.slice(-Y);te.length-=Y,te.push(S[Te][0]+"("+W.join(",")+")")}else return Te<=7?console.error("WK1 invalid opcode "+Te.toString(16)):Te<=24?console.error("WK1 unsupported op "+Te.toString(16)):Te<=30?console.error("WK1 invalid opcode "+Te.toString(16)):Te<=115?console.error("WK1 unsupported function opcode "+Te.toString(16)):console.error("WK1 unrecognized opcode "+Te.toString(16))}}te.length==1?re[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function N(F){var re=[{c:0,r:0},{t:"n",v:0},0];return re[0].r=F.read_shift(2),re[3]=F[F.l++],re[0].c=F[F.l++],re}function z(F,re){var te=N(F);return te[1].t="s",te[1].v=F.read_shift(re-4,"cstr"),te}function M(F,re,te,Y){var fe=Re(6+Y.length);fe.write_shift(2,F),fe.write_shift(1,te),fe.write_shift(1,re),fe.write_shift(1,39);for(var se=0;se<Y.length;++se){var ne=Y.charCodeAt(se);fe.write_shift(1,ne>=128?95:ne)}return fe.write_shift(1,0),fe}function P(F,re){var te=N(F);te[1].v=F.read_shift(2);var Y=te[1].v>>1;if(te[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return te[1].v=Y,te}function b(F,re){var te=N(F),Y=F.read_shift(4),fe=F.read_shift(4),se=F.read_shift(2);if(se==65535)return Y===0&&fe===3221225472?(te[1].t="e",te[1].v=15):Y===0&&fe===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var ne=se&32768;return se=(se&32767)-16446,te[1].v=(1-ne*2)*(fe*Math.pow(2,se+32)+Y*Math.pow(2,se)),te}function D(F,re,te,Y){var fe=Re(14);if(fe.write_shift(2,F),fe.write_shift(1,te),fe.write_shift(1,re),Y==0)return fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(2,65535),fe;var se=0,ne=0,k=0,Te=0;return Y<0&&(se=1,Y=-Y),ne=Math.log2(Y)|0,Y/=Math.pow(2,ne-31),Te=Y>>>0,(Te&2147483648)==0&&(Y/=2,++ne,Te=Y>>>0),Y-=Te,Te|=2147483648,Te>>>=0,Y*=Math.pow(2,32),k=Y>>>0,fe.write_shift(4,k),fe.write_shift(4,Te),ne+=16383+(se?32768:0),fe.write_shift(2,ne),fe}function B(F,re){var te=b(F);return F.l+=re-14,te}function U(F,re){var te=N(F),Y=F.read_shift(4);return te[1].v=Y>>6,te}function V(F,re){var te=N(F),Y=F.read_shift(8,"f");return te[1].v=Y,te}function Ae(F,re){var te=V(F);return F.l+=re-10,te}function be(F,re){return F[F.l+re-1]==0?F.read_shift(re,"cstr"):""}function Pe(F,re){var te=F[F.l++];te>re-1&&(te=re-1);for(var Y="";Y.length<te;)Y+=String.fromCharCode(F[F.l++]);return Y}function Me(F,re,te){if(!(!te.qpro||re<21)){var Y=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var fe=F.read_shift(re-21,"cstr");return[Y,fe]}}function he(F,re){for(var te={},Y=F.l+re;F.l<Y;){var fe=F.read_shift(2);if(fe==14e3){for(te[fe]=[0,""],te[fe][0]=F.read_shift(2);F[F.l];)te[fe][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return te}function ae(F,re){var te=Re(5+F.length);te.write_shift(2,14e3),te.write_shift(2,re);for(var Y=0;Y<F.length;++Y){var fe=F.charCodeAt(Y);te[te.l++]=fe>127?95:fe}return te[te.l++]=0,te}var Ee={0:{n:"BOF",f:z9},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:be},222:{n:"SHEETNAMELP",f:Pe},65535:{n:""}},J={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:z},23:{n:"NUMBER17",f:b},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:B},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:he},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:U},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:Ae},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:be},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Me},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),Ife=/^\s|\s$|[\t\n\r]/;function X9(n,e){if(!e.bookSST)return"";var t=[hr];t[t.length]=Ke("sst",null,{xmlns:t0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Ife)&&(s+=' xml:space="preserve"'),s+=">"+dn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function Afe(n){return[n.read_shift(4),n.read_shift(4)]}function Rfe(n,e){return e||(e=Re(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var Cfe=yhe;function Pfe(n){var e=Qi();Le(e,159,Rfe(n));for(var t=0;t<n.length;++t)Le(e,19,Cfe(n[t]));return Le(e,160),e.end()}function Mfe(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function Y9(n){var e=0,t,r=Mfe(n),i=r.length+1,s,a,o,l,u;for(t=ph(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var bfe=(function(){function n(i,s){switch(s.type){case"base64":return e(cl(i),s);case"binary":return e(i,s);case"buffer":return e(Xt&&Buffer.isBuffer(i)?i.toString("binary"):Mp(i),s);case"array":return e(Nx(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,d){Array.isArray(o)&&(o[d]=[]);for(var g=/\\\w+\b/g,p=0,x,v=-1;x=g.exec(f);){switch(x[0]){case"\\cell":var E=f.slice(p,g.lastIndex-x[0].length);if(E[0]==" "&&(E=E.slice(1)),++v,E.length){var R={v:E,t:"s"};Array.isArray(o)?o[d][v]=R:o[mn({r:d,c:v})]=R}break}p=g.lastIndex}v>u.e.c&&(u.e.c=v)}),o["!ref"]=cr(u),o}function t(i,s){return bh(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=Rn(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var f=a.s.c;f<=a.e.c;++f)s.push("\\cellx"+(f+1));for(s.push("\\pard\\intbl"),f=a.s.c;f<=a.e.c;++f){var d=mn({r:u,c:f});o=l?(i[u]||[])[f]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(ul(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function CO(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var kfe=6,nl=kfe;function vv(n){return Math.floor((n+Math.round(128/nl)/256)*nl)}function xv(n){return Math.floor((n-5)/nl*100+.5)/100}function vS(n){return Math.round((n*nl+5)/nl*256)/256}function ER(n){n.width?(n.wpx=vv(n.width),n.wch=xv(n.wpx),n.MDW=nl):n.wpx?(n.wch=xv(n.wpx),n.width=vS(n.wch),n.MDW=nl):typeof n.wch=="number"&&(n.width=vS(n.wch),n.wpx=vv(n.width),n.MDW=nl),n.customWidth&&delete n.customWidth}var Ofe=96,Z9=Ofe;function Ev(n){return n*96/Z9}function Q9(n){return n*Z9/96}function Lfe(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=Ke("numFmt",null,{numFmtId:r,formatCode:dn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ke("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function Nfe(n){var e=[];return e[e.length]=Ke("cellXfs",null),n.forEach(function(t){e[e.length]=Ke("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ke("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function J9(n,e){var t=[hr,Ke("styleSheet",null,{xmlns:t0[0],"xmlns:vt":Lr.vt})],r;return n.SSF&&(r=Lfe(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Nfe(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function Dfe(n,e){var t=n.read_shift(2),r=yi(n);return[t,r]}function Ffe(n,e,t){t||(t=Re(6+4*e.length)),t.write_shift(2,n),Dr(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function Vfe(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=Ihe(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=She(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=yi(n),r}function jfe(n,e){e||(e=Re(153)),e.write_shift(2,n.sz*20),Ahe(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),_v(n.color,e);var r=0;return r=2,e.write_shift(1,r),Dr(n.name,e),e.length>e.l?e.slice(0,e.l):e}var Bfe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],C2,Gfe=_o;function PO(n,e){e||(e=Re(84)),C2||(C2=cR(Bfe));var t=C2[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(_v({auto:1},e),_v({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Ufe(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function e7(n,e,t){t||(t=Re(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function ng(n,e){return e||(e=Re(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var zfe=_o;function $fe(n,e){return e||(e=Re(51)),e.write_shift(1,0),ng(null,e),ng(null,e),ng(null,e),ng(null,e),ng(null,e),e.length>e.l?e.slice(0,e.l):e}function Wfe(n,e){return e||(e=Re(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),pv(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Hfe(n,e,t){var r=Re(2052);return r.write_shift(4,n),pv(e,r),pv(t,r),r.length>r.l?r.slice(0,r.l):r}function Kfe(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Le(n,615,Ra(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Le(n,44,Ffe(i,e[i]))}),Le(n,616))}}function qfe(n){var e=1;Le(n,611,Ra(e)),Le(n,43,jfe({sz:12,color:{theme:1},name:"Calibri",family:2})),Le(n,612)}function Xfe(n){var e=2;Le(n,603,Ra(e)),Le(n,45,PO({patternType:"none"})),Le(n,45,PO({patternType:"gray125"})),Le(n,604)}function Yfe(n){var e=1;Le(n,613,Ra(e)),Le(n,46,$fe()),Le(n,614)}function Zfe(n){var e=1;Le(n,626,Ra(e)),Le(n,47,e7({numFmtId:0},65535)),Le(n,627)}function Qfe(n,e){Le(n,617,Ra(e.length)),e.forEach(function(t){Le(n,47,e7(t,0))}),Le(n,618)}function Jfe(n){var e=1;Le(n,619,Ra(e)),Le(n,48,Wfe({xfId:0,name:"Normal"})),Le(n,620)}function ede(n){var e=0;Le(n,505,Ra(e)),Le(n,506)}function tde(n){var e=0;Le(n,508,Hfe(e,"TableStyleMedium9","PivotStyleMedium4")),Le(n,509)}function nde(n,e){var t=Qi();return Le(t,278),Kfe(t,n.SSF),qfe(t),Xfe(t),Yfe(t),Zfe(t),Qfe(t,e.cellXfs),Jfe(t),ede(t),tde(t),Le(t,279),t.end()}function t7(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[hr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function rde(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:yi(n)}}function ide(n){var e=Re(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),Dr(n.name,e),e.slice(0,e.l)}function sde(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function ade(n){var e=Re(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function ode(n,e){var t=Re(8+2*e.length);return t.write_shift(4,n),Dr(e,t),t.slice(0,t.l)}function lde(n){return n.l+=4,n.read_shift(4)!=0}function cde(n,e){var t=Re(8);return t.write_shift(4,n),t.write_shift(4,1),t}function ude(){var n=Qi();return Le(n,332),Le(n,334,Ra(1)),Le(n,335,ide({name:"XLDAPR",version:12e4,flags:3496657072})),Le(n,336),Le(n,339,ode(1,"XLDAPR")),Le(n,52),Le(n,35,Ra(514)),Le(n,4096,Ra(0)),Le(n,4097,Ws(1)),Le(n,36),Le(n,53),Le(n,340),Le(n,337,cde(1)),Le(n,51,ade([[1,0]])),Le(n,338),Le(n,333),n.end()}function n7(){var n=[hr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function hde(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=mn(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var td=1024;function r7(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[Ke("xml",null,{"xmlns:v":Es.v,"xmlns:o":Es.o,"xmlns:x":Es.x,"xmlns:mv":Es.mv}).replace(/\/>/,">"),Ke("o:shapelayout",Ke("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),Ke("v:shapetype",[Ke("v:stroke",null,{joinstyle:"miter"}),Ke("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];td<n*1e3;)td+=1e3;return e.forEach(function(s){var a=Nr(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ke("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Ke("v:fill",l,o),f={on:"t",obscured:"t"};++td,i=i.concat(["<v:shape"+Gm({id:"_x0000_s"+td,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Ke("v:shadow",null,f),Ke("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Qr("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Qr("x:AutoFill","False"),Qr("x:Row",String(a.r)),Qr("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function i7(n){var e=[hr,Ke("comments",null,{xmlns:t0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=dn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=t.indexOf(dn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Qr("t",dn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(Qr("t",dn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function fde(n,e,t){var r=[hr,Ke("ThreadedComments",null,{xmlns:Lr.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(Ke("threadedComment",Qr("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function dde(n){var e=[hr,Ke("personList",null,{xmlns:Lr.TCMNT,"xmlns:x":t0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(Ke("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function gde(n){var e={};e.iauthor=n.read_shift(4);var t=Nh(n);return e.rfx=t.s,e.ref=mn(t.s),n.l+=16,e}function mde(n,e){return e==null&&(e=Re(36)),e.write_shift(4,n[1].iauthor),r0(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var pde=yi;function _de(n){return Dr(n.slice(0,54))}function yde(n){var e=Qi(),t=[];return Le(e,628),Le(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Le(e,632,_de(i.a)))})}),Le(e,631),Le(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:Nr(r[0]),e:Nr(r[0])};Le(e,635,mde([s,i])),i.t&&i.t.length>0&&Le(e,637,xhe(i)),Le(e,636),delete i.iauthor})}),Le(e,634),Le(e,629),e.end()}function vde(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&_n.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var s7=["xlsb","xlsm","xlam","biff8","xla"],xde=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,f=a.length>0?parseInt(a,10)|0:0;return o?f+=e.c:--f,l?u+=e.r:--u,i+(o?"":"$")+_i(f)+(l?"":"$")+ni(u)}return function(i,s){return e=s,i.replace(n,t)}})(),wR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,TR=(function(){return function(e,t){return e.replace(wR,function(r,i,s,a,o,l){var u=pR(a)-(s?0:t.c),f=mR(l)-(o?0:t.r),d=f==0?"":o?f+1:"["+f+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+g})}})();function Ede(n,e){return n.replace(wR,function(t,r,i,s,a,o){return r+(i=="$"?i+s:_i(pR(s)+e.c))+(a=="$"?a+o:ni(mR(o)+e.r))})}function wde(n){return n.length!=1}function ir(n){n.l+=1}function jc(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function a7(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return o7(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=jc(n),o=jc(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function o7(n){var e=jc(n),t=jc(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function Tde(n,e,t){if(t.biff<8)return o7(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=jc(n),a=jc(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function l7(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return Sde(n);var r=n.read_shift(t&&t.biff==12?4:2),i=jc(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function Sde(n){var e=jc(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function Ide(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function Ade(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return Rde(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function Rde(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function Cde(n,e,t){var r=(n[n.l++]&96)>>5,i=a7(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function Pde(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=a7(n,s,t);return[r,i,a]}function Mde(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function bde(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function kde(n,e,t){var r=(n[n.l++]&96)>>5,i=Tde(n,e-1,t);return[r,i]}function Ode(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function MO(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function Lde(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function Nde(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function Dde(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function Fde(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function Vde(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function c7(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function jde(n){return n.read_shift(2),c7(n)}function Bde(n){return n.read_shift(2),c7(n)}function Gde(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=l7(n,0,t);return[r,i]}function Ude(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=Ade(n,0,t);return[r,i]}function zde(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=l7(n,0,t);return[r,i,s]}function $de(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[$0e[i],f7[i],r]}function Wde(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:Hde(n);return[i,(s[0]===0?f7:z0e)[s[1]]]}function Hde(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function Kde(n,e,t){n.l+=t&&t.biff==2?3:4}function qde(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Xde(n){return n.l++,Op[n.read_shift(1)]}function Yde(n){return n.l++,n.read_shift(2)}function Zde(n){return n.l++,n.read_shift(1)!==0}function Qde(n){return n.l++,i0(n)}function Jde(n,e,t){return n.l++,W9(n,e-1,t)}function e0e(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=zhe(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=Op[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=i0(n);break;case 2:t[1]=Khe(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function t0e(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?Nh:Yhe)(n));return i}function n0e(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=e0e(n,t.biff);return a}function r0e(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function i0e(n,e,t){if(t.biff==5)return s0e(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function s0e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function a0e(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function o0e(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function l0e(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function c0e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var u0e=_o,h0e=_o,f0e=_o;function Lp(n,e,t){return n.l+=2,[Ide(n)]}function SR(n){return n.l+=6,[]}var d0e=Lp,g0e=SR,m0e=SR,p0e=Lp;function u7(n){return n.l+=2,[z9(n),n.read_shift(2)&1]}var _0e=Lp,y0e=u7,v0e=SR,x0e=Lp,E0e=Lp,w0e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function T0e(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=w0e[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function S0e(n){return n.l+=2,[n.read_shift(4)]}function I0e(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function A0e(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function R0e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function C0e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function P0e(n){return n.l+=4,[0,0]}var bO={1:{n:"PtgExp",f:qde},2:{n:"PtgTbl",f:f0e},3:{n:"PtgAdd",f:ir},4:{n:"PtgSub",f:ir},5:{n:"PtgMul",f:ir},6:{n:"PtgDiv",f:ir},7:{n:"PtgPower",f:ir},8:{n:"PtgConcat",f:ir},9:{n:"PtgLt",f:ir},10:{n:"PtgLe",f:ir},11:{n:"PtgEq",f:ir},12:{n:"PtgGe",f:ir},13:{n:"PtgGt",f:ir},14:{n:"PtgNe",f:ir},15:{n:"PtgIsect",f:ir},16:{n:"PtgUnion",f:ir},17:{n:"PtgRange",f:ir},18:{n:"PtgUplus",f:ir},19:{n:"PtgUminus",f:ir},20:{n:"PtgPercent",f:ir},21:{n:"PtgParen",f:ir},22:{n:"PtgMissArg",f:ir},23:{n:"PtgStr",f:Jde},26:{n:"PtgSheet",f:I0e},27:{n:"PtgEndSheet",f:A0e},28:{n:"PtgErr",f:Xde},29:{n:"PtgBool",f:Zde},30:{n:"PtgInt",f:Yde},31:{n:"PtgNum",f:Qde},32:{n:"PtgArray",f:Ode},33:{n:"PtgFunc",f:$de},34:{n:"PtgFuncVar",f:Wde},35:{n:"PtgName",f:r0e},36:{n:"PtgRef",f:Gde},37:{n:"PtgArea",f:Cde},38:{n:"PtgMemArea",f:a0e},39:{n:"PtgMemErr",f:u0e},40:{n:"PtgMemNoMem",f:h0e},41:{n:"PtgMemFunc",f:o0e},42:{n:"PtgRefErr",f:l0e},43:{n:"PtgAreaErr",f:Mde},44:{n:"PtgRefN",f:Ude},45:{n:"PtgAreaN",f:kde},46:{n:"PtgMemAreaN",f:R0e},47:{n:"PtgMemNoMemN",f:C0e},57:{n:"PtgNameX",f:i0e},58:{n:"PtgRef3d",f:zde},59:{n:"PtgArea3d",f:Pde},60:{n:"PtgRefErr3d",f:c0e},61:{n:"PtgAreaErr3d",f:bde},255:{}},M0e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},b0e={1:{n:"PtgElfLel",f:u7},2:{n:"PtgElfRw",f:x0e},3:{n:"PtgElfCol",f:d0e},6:{n:"PtgElfRwV",f:E0e},7:{n:"PtgElfColV",f:p0e},10:{n:"PtgElfRadical",f:_0e},11:{n:"PtgElfRadicalS",f:v0e},13:{n:"PtgElfColS",f:g0e},15:{n:"PtgElfColSV",f:m0e},16:{n:"PtgElfRadicalLel",f:y0e},25:{n:"PtgList",f:T0e},29:{n:"PtgSxName",f:S0e},255:{}},k0e={0:{n:"PtgAttrNoop",f:P0e},1:{n:"PtgAttrSemi",f:Vde},2:{n:"PtgAttrIf",f:Dde},4:{n:"PtgAttrChoose",f:Lde},8:{n:"PtgAttrGoto",f:Nde},16:{n:"PtgAttrSum",f:Kde},32:{n:"PtgAttrBaxcel",f:MO},33:{n:"PtgAttrBaxcel",f:MO},64:{n:"PtgAttrSpace",f:jde},65:{n:"PtgAttrSpaceSemi",f:Bde},128:{n:"PtgAttrIfError",f:Fde},255:{}};function O0e(n,e,t,r){if(r.biff<8)return _o(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=n0e(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=t0e(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(_o(n,e)),s}function L0e(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=bO[s]||bO[M0e[s]],(s===24||s===25)&&(i=(s===24?b0e:k0e)[n[n.l+1]]),!i||!i.f?_o(n,e):a.push([i.n,i.f(n,e,t)]);return a}function N0e(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var D0e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function F0e(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function h7(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function kO(n,e,t){var r=h7(n,e,t);return r=="#REF"?r:F0e(r,t)}function zd(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,f,d=0,g=0,p,x="";if(!n[0]||!n[0][0])return"";for(var v=-1,E="",R=0,S=n[0].length;R<S;++R){var C=n[0][R];switch(C[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),v>=0){switch(n[0][v][1][0]){case 0:E=Hn(" ",n[0][v][1][1]);break;case 1:E=Hn("\r",n[0][v][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][v][1][0])}u=u+E,v=-1}o.push(u+D0e[C[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Kg(C[1][1],a,i),o.push(qg(f,s));break;case"PtgRefN":f=t?Kg(C[1][1],t,i):C[1][1],o.push(qg(f,s));break;case"PtgRef3d":d=C[1][1],f=Kg(C[1][2],a,i),x=kO(r,d,i),o.push(x+"!"+qg(f,s));break;case"PtgFunc":case"PtgFuncVar":var O=C[1][0],N=C[1][1];O||(O=0),O&=127;var z=O==0?[]:o.slice(-O);o.length-=O,N==="User"&&(N=z.shift()),o.push(N+"("+z.join(",")+")");break;case"PtgBool":o.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(C[1]);break;case"PtgNum":o.push(String(C[1]));break;case"PtgStr":o.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(C[1]);break;case"PtgAreaN":p=pO(C[1][1],t?{s:t}:a,i),o.push(A2(p,i));break;case"PtgArea":p=pO(C[1][1],a,i),o.push(A2(p,i));break;case"PtgArea3d":d=C[1][1],p=C[1][2],x=kO(r,d,i),o.push(x+"!"+A2(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=C[1][2];var M=(r.names||[])[g-1]||(r[0]||[])[g],P=M?M.Name:"SH33TJSNAME"+String(g);P&&P.slice(0,6)=="_xlfn."&&!i.xlfn&&(P=P.slice(6)),o.push(P);break;case"PtgNameX":var b=C[1][1];g=C[1][2];var D;if(i.biff<=5)b<0&&(b=-b),r[b]&&(D=r[b][g]);else{var B="";if(((r[b]||[])[0]||[])[0]==14849||(((r[b]||[])[0]||[])[0]==1025?r[b][g]&&r[b][g].itab>0&&(B=r.SheetNames[r[b][g].itab-1]+"!"):B=r.SheetNames[g-1]+"!"),r[b]&&r[b][g])B+=r[b][g].Name;else if(r[0]&&r[0][g])B+=r[0][g].Name;else{var U=(h7(r,b,i)||"").split(";;");U[g-1]?B=U[g-1]:B+="SH33TJSERRX"}o.push(B);break}D||(D={Name:"SH33TJSERRY"}),o.push(D.Name);break;case"PtgParen":var V="(",Ae=")";if(v>=0){switch(E="",n[0][v][1][0]){case 2:V=Hn(" ",n[0][v][1][1])+V;break;case 3:V=Hn("\r",n[0][v][1][1])+V;break;case 4:Ae=Hn(" ",n[0][v][1][1])+Ae;break;case 5:Ae=Hn("\r",n[0][v][1][1])+Ae;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][v][1][0])}v=-1}o.push(V+o.pop()+Ae);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:C[1][1],r:C[1][0]};var be={c:t.c,r:t.r};if(r.sharedf[mn(f)]){var Pe=r.sharedf[mn(f)];o.push(zd(Pe,a,be,r,i))}else{var Me=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){o.push(zd(u[1],a,be,r,i)),Me=!0;break}Me||o.push(C[1])}break;case"PtgArray":o.push("{"+N0e(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=R;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var he=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&v>=0&&he.indexOf(n[0][R][0])==-1){C=n[0][v];var ae=!0;switch(C[1][0]){case 4:ae=!1;case 0:E=Hn(" ",C[1][1]);break;case 5:ae=!1;case 1:E=Hn("\r",C[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}o.push((ae?E:"")+o.pop()+(ae?"":E)),v=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function V0e(n){if(n==null){var e=Re(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return _h(n);return _h(0)}function j0e(n,e,t,r,i){var s=yh(e,t,i),a=V0e(n.v),o=Re(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Re(n.bf.length),f=0;f<n.bf.length;++f)u[f]=n.bf[f];var d=Zr([s,a,o,u]);return d}function Dx(n,e,t){var r=n.read_shift(4),i=L0e(n,r,t),s=n.read_shift(4),a=s>0?O0e(n,s,i,t):null;return[i,a]}var B0e=Dx,Fx=Dx,G0e=Dx,U0e=Dx,z0e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},f7={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},$0e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function W0e(n){var e="of:="+n.replace(wR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function H0e(n){return n.replace(/\./,"!")}var Xg=typeof Map<"u";function IR(n,e,t){var r=0,i=n.length;if(t){if(Xg?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Xg?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(Xg?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function Vx(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(nl=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=xv(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=vS(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function d7(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function Kc(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){l9(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function K0e(n,e,t){if(n&&n["!ref"]){var r=Rn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function q0e(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+cr(n[t])+'"/>';return e+"</mergeCells>"}function X0e(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}s=!0,a.codeName=Bm(dn(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+Ke("outlinePr",null,u)}!s&&!o||(i[i.length]=Ke("sheetPr",o,a))}var Y0e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Z0e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Q0e(n){var e={sheet:1};return Y0e.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),Z0e.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=Y9(n.password).toString(16).toUpperCase()),Ke("sheetProtection",null,e)}function J0e(n){return d7(n),Ke("pageMargins",null,n)}function ege(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=Ke("col",null,Vx(i,r)));return t[t.length]="</cols>",t.join("")}function tge(n,e,t,r){var i=typeof n.ref=="string"?n.ref:cr(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=Ms(i);a.s.r==a.e.r&&(a.e.r=Ms(e["!ref"]).e.r,i=cr(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),Ke("autoFilter",null,{ref:i})}function nge(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Ke("sheetViews",Ke("sheetView",null,i),{})}function rge(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=Op[n.v];break;case"d":r&&r.cellDates?i=Oi(n.v,-1).toISOString():(n=es(n),n.t="n",i=""+(n.v=Ji(Oi(n.v)))),typeof n.z>"u"&&(n.z=qn[14]);break;default:i=n.v;break}var o=Qr("v",dn(i)),l={r:e},u=Kc(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Qr("v",""+IR(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var f=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=Ke("f",dn(n.f),f)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(l.cm=1),Ke("c",o,l)}function ige(n,e,t,r){var i=[],s=[],a=Rn(n["!ref"]),o="",l,u="",f=[],d=0,g=0,p=n["!rows"],x=Array.isArray(n),v={r:u},E,R=-1;for(g=a.s.c;g<=a.e.c;++g)f[g]=_i(g);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=ni(d),g=a.s.c;g<=a.e.c;++g){l=f[g]+u;var S=x?(n[d]||[])[g]:n[l];S!==void 0&&(o=rge(S,l,n,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(v={r:u},p&&p[d]&&(E=p[d],E.hidden&&(v.hidden=1),R=-1,E.hpx?R=Ev(E.hpx):E.hpt&&(R=E.hpt),R>-1&&(v.ht=R,v.customHeight=1),E.level&&(v.outlineLevel=E.level)),i[i.length]=Ke("row",s.join(""),v))}if(p)for(;d<p.length;++d)p&&p[d]&&(v={r:d+1},E=p[d],E.hidden&&(v.hidden=1),R=-1,E.hpx?R=Ev(E.hpx):E.hpt&&(R=E.hpt),R>-1&&(v.ht=R,v.customHeight=1),E.level&&(v.outlineLevel=E.level),i[i.length]=Ke("row","",v));return i.join("")}function g7(n,e,t,r){var i=[hr,Ke("worksheet",null,{xmlns:t0[0],"xmlns:r":Lr.r})],s=t.SheetNames[n],a=0,o="",l=t.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",f=Rn(u);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=cr(f)}r||(r={}),l["!comments"]=[];var d=[];X0e(l,t,n,e,i),i[i.length]=Ke("dimension",null,{ref:u}),i[i.length]=nge(l,e,n,t),e.sheetFormat&&(i[i.length]=Ke("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=ege(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=ige(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=Q0e(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=tge(l["!autofilter"],l,t,n)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=q0e(l["!merges"]));var g=-1,p,x=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(x=un(r,-1,dn(v[1].Target).replace(/#.*$/,""),Wt.HLINK),p["r:id"]="rId"+x),(g=v[1].Target.indexOf("#"))>-1&&(p.location=dn(v[1].Target.slice(g+1))),v[1].Tooltip&&(p.tooltip=dn(v[1].Tooltip)),i[i.length]=Ke("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=J0e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Qr("ignoredErrors",Ke("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(x=un(r,-1,"../drawings/drawing"+(n+1)+".xml",Wt.DRAW),i[i.length]=Ke("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=d),l["!comments"].length>0&&(x=un(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Wt.VML),i[i.length]=Ke("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function sge(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function age(n,e,t){var r=Re(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=Ev(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:n,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var d=-1,g=-1,p=f<<10;p<f+1<<10;++p){u.c=p;var x=Array.isArray(t)?(t[u.r]||[])[u.c]:t[mn(u)];x&&(d<0&&(d=p),g=p)}d<0||(++o,r.write_shift(4,d),r.write_shift(4,g))}var v=r.l;return r.l=l,r.write_shift(4,o),r.l=v,r.length>r.l?r.slice(0,r.l):r}function oge(n,e,t,r){var i=age(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Le(n,0,i)}var lge=Nh,cge=r0;function uge(){}function hge(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=Ehe(n),t}function fge(n,e,t){t==null&&(t=Re(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return _v({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),P9(n,t),t.slice(0,t.l)}function dge(n){var e=ta(n);return[e]}function gge(n,e,t){return t==null&&(t=Re(8)),kh(e,t)}function mge(n){var e=Oh(n);return[e]}function pge(n,e,t){return t==null&&(t=Re(4)),Lh(e,t)}function _ge(n){var e=ta(n),t=n.read_shift(1);return[e,t,"b"]}function yge(n,e,t){return t==null&&(t=Re(9)),kh(e,t),t.write_shift(1,n.v?1:0),t}function vge(n){var e=Oh(n),t=n.read_shift(1);return[e,t,"b"]}function xge(n,e,t){return t==null&&(t=Re(5)),Lh(e,t),t.write_shift(1,n.v?1:0),t}function Ege(n){var e=ta(n),t=n.read_shift(1);return[e,t,"e"]}function wge(n,e,t){return t==null&&(t=Re(9)),kh(e,t),t.write_shift(1,n.v),t}function Tge(n){var e=Oh(n),t=n.read_shift(1);return[e,t,"e"]}function Sge(n,e,t){return t==null&&(t=Re(8)),Lh(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function Ige(n){var e=ta(n),t=n.read_shift(4);return[e,t,"s"]}function Age(n,e,t){return t==null&&(t=Re(12)),kh(e,t),t.write_shift(4,e.v),t}function Rge(n){var e=Oh(n),t=n.read_shift(4);return[e,t,"s"]}function Cge(n,e,t){return t==null&&(t=Re(8)),Lh(e,t),t.write_shift(4,e.v),t}function Pge(n){var e=ta(n),t=i0(n);return[e,t,"n"]}function Mge(n,e,t){return t==null&&(t=Re(16)),kh(e,t),_h(n.v,t),t}function bge(n){var e=Oh(n),t=i0(n);return[e,t,"n"]}function kge(n,e,t){return t==null&&(t=Re(12)),Lh(e,t),_h(n.v,t),t}function Oge(n){var e=ta(n),t=M9(n);return[e,t,"n"]}function Lge(n,e,t){return t==null&&(t=Re(12)),kh(e,t),b9(n.v,t),t}function Nge(n){var e=Oh(n),t=M9(n);return[e,t,"n"]}function Dge(n,e,t){return t==null&&(t=Re(8)),Lh(e,t),b9(n.v,t),t}function Fge(n){var e=ta(n),t=_R(n);return[e,t,"is"]}function Vge(n){var e=ta(n),t=yi(n);return[e,t,"str"]}function jge(n,e,t){return t==null&&(t=Re(12+4*n.v.length)),kh(e,t),Dr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Bge(n){var e=Oh(n),t=yi(n);return[e,t,"str"]}function Gge(n,e,t){return t==null&&(t=Re(8+4*n.v.length)),Lh(e,t),Dr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Uge(n,e,t){var r=n.l+e,i=ta(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=Fx(n,r-n.l,t);a[3]=zd(o,null,i,t.supbooks,t)}else n.l=r;return a}function zge(n,e,t){var r=n.l+e,i=ta(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=Fx(n,r-n.l,t);a[3]=zd(o,null,i,t.supbooks,t)}else n.l=r;return a}function $ge(n,e,t){var r=n.l+e,i=ta(n);i.r=t["!row"];var s=i0(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=Fx(n,r-n.l,t);a[3]=zd(o,null,i,t.supbooks,t)}else n.l=r;return a}function Wge(n,e,t){var r=n.l+e,i=ta(n);i.r=t["!row"];var s=yi(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=Fx(n,r-n.l,t);a[3]=zd(o,null,i,t.supbooks,t)}else n.l=r;return a}var Hge=Nh,Kge=r0;function qge(n,e){return e==null&&(e=Re(4)),e.write_shift(4,n),e}function Xge(n,e){var t=n.l+e,r=Nh(n),i=yR(n),s=yi(n),a=yi(n),o=yi(n);n.l=t;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function Yge(n,e){var t=Re(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));r0({s:Nr(n[0]),e:Nr(n[0])},t),vR("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return Dr(i||"",t),Dr(n[1].Tooltip||"",t),Dr("",t),t.slice(0,t.l)}function Zge(){}function Qge(n,e,t){var r=n.l+e,i=k9(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=B0e(n,r-n.l,t);a[1]=o}else n.l=r;return a}function Jge(n,e,t){var r=n.l+e,i=Nh(n),s=[i];if(t.cellFormula){var a=U0e(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function eme(n,e,t){t==null&&(t=Re(18));var r=Vx(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var m7=["left","right","top","bottom","header","footer"];function tme(n){var e={};return m7.forEach(function(t){e[t]=i0(n)}),e}function nme(n,e){return e==null&&(e=Re(48)),d7(n),m7.forEach(function(t){_h(n[t],e)}),e}function rme(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function ime(n,e,t){t==null&&(t=Re(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function sme(n){var e=Re(24);return e.write_shift(4,4),e.write_shift(4,1),r0(n,e),e}function ame(n,e){return e==null&&(e=Re(66)),e.write_shift(2,n.password?Y9(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function ome(){}function lme(){}function cme(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=es(e),e.z=e.z||qn[14],e.v=Ji(Oi(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:t,c:r};switch(l.s=Kc(i.cellXfs,e,i),e.l&&s["!links"].push([mn(l),e.l]),e.c&&s["!comments"].push([mn(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=IR(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?Le(n,18,Cge(e,l)):Le(n,7,Age(e,l))):(l.t="str",a?Le(n,17,Gge(e,l)):Le(n,6,jge(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Le(n,13,Dge(e,l)):Le(n,2,Lge(e,l)):a?Le(n,16,kge(e,l)):Le(n,5,Mge(e,l)),!0;case"b":return l.t="b",a?Le(n,15,xge(e,l)):Le(n,4,yge(e,l)),!0;case"e":return l.t="e",a?Le(n,14,Sge(e,l)):Le(n,3,wge(e,l)),!0}return a?Le(n,12,pge(e,l)):Le(n,1,gge(e,l)),!0}function ume(n,e,t,r){var i=Rn(e["!ref"]||"A1"),s,a="",o=[];Le(n,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var f=i.s.r;f<=u;++f){a=ni(f),oge(n,e,i,f);var d=!1;if(f<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){f===i.s.r&&(o[g]=_i(g)),s=o[g]+a;var p=l?(e[f]||[])[g]:e[s];if(!p){d=!1;continue}d=cme(n,p,f,g,r,e,d)}}Le(n,146)}function hme(n,e){!e||!e["!merges"]||(Le(n,177,qge(e["!merges"].length)),e["!merges"].forEach(function(t){Le(n,176,Kge(t))}),Le(n,178))}function fme(n,e){!e||!e["!cols"]||(Le(n,390),e["!cols"].forEach(function(t,r){t&&Le(n,60,eme(r,t))}),Le(n,391))}function dme(n,e){!e||!e["!ref"]||(Le(n,648),Le(n,649,sme(Rn(e["!ref"]))),Le(n,650))}function gme(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=un(t,-1,r[1].Target.replace(/#.*$/,""),Wt.HLINK);Le(n,494,Yge(r,i))}}),delete e["!links"]}function mme(n,e,t,r){if(e["!comments"].length>0){var i=un(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Wt.VML);Le(n,551,vR("rId"+i)),e["!legacy"]=i}}function pme(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:cr(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=Ms(s);o.s.r==o.e.r&&(o.e.r=Ms(e["!ref"]).e.r,s=cr(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Le(n,161,r0(Rn(s))),Le(n,162)}}function _me(n,e,t){Le(n,133),Le(n,137,ime(e,t)),Le(n,138),Le(n,134)}function yme(n,e){e["!protect"]&&Le(n,535,ame(e["!protect"]))}function vme(n,e,t,r){var i=Qi(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var l=Rn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Le(i,129),(t.vbaraw||a["!outline"])&&Le(i,147,fge(o,a["!outline"])),Le(i,148,cge(l)),_me(i,a,t.Workbook),fme(i,a),ume(i,a,n,e),yme(i,a),pme(i,a,t,n),hme(i,a),gme(i,a,r),a["!margins"]&&Le(i,476,nme(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&dme(i,a),mme(i,a,n,r),Le(i,130),i.end()}function xme(n,e){n.l+=10;var t=yi(n);return{name:t}}var Eme=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function wme(n){return!n.Workbook||!n.Workbook.WBProps?"false":Jue(n.Workbook.WBProps.date1904)?"true":"false"}var Tme="][*?/\\".split("");function p7(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return Tme.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function Sme(n,e,t){n.forEach(function(r,i){p7(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Ime(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];Sme(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)K0e(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function _7(n){var e=[hr];e[e.length]=Ke("workbook",null,{xmlns:t0[0],"xmlns:r":Lr.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(Eme.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Ke("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:dn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Ke("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Ke("definedName",dn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Ame(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=yS(n),t.name=yi(n),t}function Rme(n,e){return e||(e=Re(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),vR(n.strRelID,e),Dr(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Cme(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?yi(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Pme(n,e){e||(e=Re(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),P9(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Mme(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=whe(n),a=G0e(n,0,t),o=yR(n);n.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function bme(n,e){Le(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Le(n,156,Rme(i))}Le(n,144)}function kme(n,e){e||(e=Re(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Dr("SheetJS",e),Dr(cv.version,e),Dr(cv.version,e),Dr("7262",e),e.length>e.l?e.slice(0,e.l):e}function Ome(n,e){e||(e=Re(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function Lme(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Le(n,135),Le(n,158,Ome(i)),Le(n,136))}}function Nme(n,e){var t=Qi();return Le(t,131),Le(t,128,kme()),Le(t,153,Pme(n.Workbook&&n.Workbook.WBProps||null)),Lme(t,n),bme(t,n),Le(t,132),t.end()}function Dme(n,e,t){return(e.slice(-4)===".bin"?Nme:_7)(n)}function Fme(n,e,t,r,i){return(e.slice(-4)===".bin"?vme:g7)(n,t,r,i)}function Vme(n,e,t){return(e.slice(-4)===".bin"?nde:J9)(n,t)}function jme(n,e,t){return(e.slice(-4)===".bin"?Pfe:X9)(n,t)}function Bme(n,e,t){return(e.slice(-4)===".bin"?yde:i7)(n)}function Gme(n){return(n.slice(-4)===".bin"?ude:n7)()}function Ume(n,e){var t=[];return n.Props&&t.push(Vhe(n.Props,e)),n.Custprops&&t.push(jhe(n.Props,n.Custprops)),t.join("")}function zme(){return""}function $me(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(Ke("NumberFormat",null,{"ss:Format":dn(qn[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(Ke("Style",s.join(""),a))}),Ke("Styles",t.join(""))}function y7(n){return Ke("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+TR(n.Ref,{r:0,c:0})})}function Wme(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(y7(i)))}return Ke("Names",t.join(""))}function Hme(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(y7(o)))}return s.join("")}function Kme(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(Ke("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(Ke("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(Ke("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(Ke("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(Qr("ProtectContents","True")),n["!protect"].objects&&i.push(Qr("ProtectObjects","True")),n["!protect"].scenarios&&i.push(Qr("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(Qr("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(Qr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Ke("WorksheetOptions",i.join(""),{xmlns:Es.x})}function qme(n){return n.map(function(e){var t=Que(e.t||""),r=Ke("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ke("Comment",r,{"ss:Author":e.a})}).join("")}function Xme(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+dn(TR(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var l=Nr(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=dn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=dn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],f=0;f!=u.length;++f)u[f].s.c!=a.c||u[f].s.r!=a.r||(u[f].e.c>u[f].s.c&&(o["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(o["ss:MergeDown"]=u[f].e.r-u[f].s.r));var d="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",g=String(n.v);break;case"b":d="Boolean",g=n.v?"1":"0";break;case"e":d="Error",g=Op[n.v];break;case"d":d="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||qn[14]);break;case"s":d="String",g=Zue(n.v||"");break}var p=Kc(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var x=n.v!=null?g:"",v=n.t=="z"?"":'<Data ss:Type="'+d+'">'+x+"</Data>";return(n.c||[]).length>0&&(v+=qme(n.c)),Ke("Cell",v,o)}function Yme(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Q9(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Zme(n,e,t,r){if(!n["!ref"])return"";var i=Rn(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(E,R){ER(E);var S=!!E.width,C=Vx(R,E),O={"ss:Index":R+1};S&&(O["ss:Width"]=vv(C.width)),E.hidden&&(O["ss:Hidden"]="1"),o.push(Ke("Column",null,O))});for(var l=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var f=[Yme(u,(n["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:d},x=mn(p),v=l?(n[u]||[])[d]:n[x];f.push(Xme(v,x,n,e,t,r,p))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function Qme(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?Hme(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?Zme(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(Kme(s,e,n,t)),r.join("")}function Jme(n,e){e||(e={}),n.SSF||(n.SSF=es(qn)),n.SSF&&(Ox(),kx(n.SSF),e.revssf=Lx(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Kc(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(Ume(n,e)),t.push(zme()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(Ke("Worksheet",Qme(r,e,n),{"ss:Name":dn(n.SheetNames[r])}));return t[2]=$me(n,e),t[3]=Wme(n),hr+Ke("Workbook",t.join(""),{xmlns:Es.ss,"xmlns:o":Es.o,"xmlns:x":Es.x,"xmlns:ss":Es.ss,"xmlns:dt":Es.dt,"xmlns:html":Es.html})}var P2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function epe(n,e){var t=[],r=[],i=[],s=0,a,o=sO(yO,"n"),l=sO(vO,"n");if(n.Props)for(a=ri(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=ri(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)U9.indexOf(i[s][0])>-1||j9.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&_n.utils.cfb_add(e,"/SummaryInformation",SO(r,P2.SI,l,vO)),(t.length||u.length)&&_n.utils.cfb_add(e,"/DocumentSummaryInformation",SO(t,P2.DSI,o,yO,u.length?u:null,P2.UDI))}function tpe(n,e){var t=e||{},r=_n.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return _n.utils.cfb_add(r,i,v7(n,t)),t.biff==8&&(n.Props||n.Custprops)&&epe(n,r),t.biff==8&&n.vbaraw&&vde(r,_n.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var npe={0:{f:sge},1:{f:dge},2:{f:Oge},3:{f:Ege},4:{f:_ge},5:{f:Pge},6:{f:Vge},7:{f:Ige},8:{f:Wge},9:{f:$ge},10:{f:Uge},11:{f:zge},12:{f:mge},13:{f:Nge},14:{f:Tge},15:{f:vge},16:{f:bge},17:{f:Bge},18:{f:Rge},19:{f:_R},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Mme},40:{},42:{},43:{f:Vfe},44:{f:Dfe},45:{f:Gfe},46:{f:zfe},47:{f:Ufe},48:{},49:{f:mhe},50:{},51:{f:sde},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:pfe},62:{f:Fge},63:{f:hde},64:{f:ome},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:_o,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:rme},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:hge},148:{f:lge,p:16},151:{f:Zge},152:{},153:{f:Cme},154:{},155:{},156:{f:Ame},157:{},158:{},159:{T:1,f:Afe},160:{T:-1},161:{T:1,f:Nh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Hge},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:rde},336:{T:-1},337:{f:lde,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:yS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:ufe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Qge},427:{f:Jge},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:tme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:uge},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Xge},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:yS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:pde},633:{T:1},634:{T:-1},635:{T:1,f:gde},636:{T:-1},637:{f:vhe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:xme},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:lme},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function qe(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&gR(t)&&n.push(t)}}function rpe(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return qe(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var f=n.next(4);for(f.write_shift(2,s),f.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u;l<i;){for(f=n.next(4),f.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;f.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u}}}function Np(n,e,t){return n||(n=Re(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function ipe(n,e,t,r){var i=Re(9);return Np(i,n,e),$9(t,r||"b",i),i}function spe(n,e,t){var r=Re(8+2*t.length);return Np(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function ape(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Ji(Oi(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?qe(n,2,xfe(t,r,i)):qe(n,3,vfe(t,r,i));return;case"b":case"e":qe(n,5,ipe(t,r,e.v,e.t));return;case"s":case"str":qe(n,4,spe(t,r,(e.v||"").slice(0,255)));return}qe(n,1,Np(null,t,r))}function ope(n,e,t,r){var i=Array.isArray(e),s=Rn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=cr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=ni(u);for(var f=s.s.c;f<=s.e.c;++f){u===s.s.r&&(l[f]=_i(f)),a=l[f]+o;var d=i?(e[u]||[])[f]:e[a];d&&ape(n,d,u,f)}}}function lpe(n,e){for(var t=e||{},r=Qi(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return qe(r,t.biff==4?1033:t.biff==3?521:9,xR(n,16,t)),ope(r,n.Sheets[n.SheetNames[i]],i,t),qe(r,10),r.end()}function cpe(n,e,t){qe(n,49,nfe({sz:12,name:"Arial"},t))}function upe(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&qe(n,1054,sfe(i,e[i],t))})}function hpe(n,e){var t=Re(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),qe(n,2151,t),t=Re(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),K9(Rn(e["!ref"]||"A1"),t),t.write_shift(4,4),qe(n,2152,t)}function fpe(n,e){for(var t=0;t<16;++t)qe(n,224,AO({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){qe(n,224,AO(r,0,e))})}function dpe(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];qe(n,440,dfe(r)),r[1].Tooltip&&qe(n,2048,gfe(r))}delete e["!links"]}function gpe(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&qe(n,125,_fe(Vx(i,r),i))})}}function mpe(n,e,t,r,i){var s=16+Kc(i.cellXfs,e,i);if(e.v==null&&!e.bf){qe(n,513,yh(t,r,s));return}if(e.bf)qe(n,6,j0e(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Ji(Oi(e.v)):e.v;qe(n,515,cfe(t,r,a,s));break;case"b":case"e":qe(n,517,lfe(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=IR(i.Strings,e.v,i.revStrings);qe(n,253,rfe(t,r,o,s))}else qe(n,516,ife(t,r,(e.v||"").slice(0,255),s,i));break;default:qe(n,513,yh(t,r,s))}}function ppe(n,e,t){var r=Qi(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},l=Array.isArray(s),u=e.biff==8,f,d="",g=[],p=Rn(s["!ref"]||"A1"),x=u?65536:16384;if(p.e.c>255||p.e.r>=x){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}qe(r,2057,xR(t,16,e)),qe(r,13,Ws(1)),qe(r,12,Ws(100)),qe(r,15,Ii(!0)),qe(r,17,Ii(!1)),qe(r,16,_h(.001)),qe(r,95,Ii(!0)),qe(r,42,Ii(!1)),qe(r,43,Ii(!1)),qe(r,130,Ws(1)),qe(r,128,ofe()),qe(r,131,Ii(!1)),qe(r,132,Ii(!1)),u&&gpe(r,s["!cols"]),qe(r,512,afe(p,e)),u&&(s["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){d=ni(v);for(var E=p.s.c;E<=p.e.c;++E){v===p.s.r&&(g[E]=_i(E)),f=g[E]+d;var R=l?(s[v]||[])[E]:s[f];R&&(mpe(r,R,v,E,e),u&&R.l&&s["!links"].push([f,R.l]))}}var S=o.CodeName||o.name||i;return u&&qe(r,574,tfe((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&qe(r,229,ffe(s["!merges"])),u&&dpe(r,s),qe(r,442,H9(S)),u&&hpe(r,s),qe(r,10),r.end()}function _pe(n,e,t){var r=Qi(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,l=t.biff==5;if(qe(r,2057,xR(n,5,t)),t.bookType=="xla"&&qe(r,135),qe(r,225,o?Ws(1200):null),qe(r,193,Uhe(2)),l&&qe(r,191),l&&qe(r,192),qe(r,226),qe(r,92,Zhe("SheetJS",t)),qe(r,66,Ws(o?1200:1252)),o&&qe(r,353,Ws(0)),o&&qe(r,448),qe(r,317,yfe(n.SheetNames.length)),o&&n.vbaraw&&qe(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";qe(r,442,H9(u))}qe(r,156,Ws(17)),qe(r,25,Ii(!1)),qe(r,18,Ii(!1)),qe(r,19,Ws(0)),o&&qe(r,431,Ii(!1)),o&&qe(r,444,Ws(0)),qe(r,61,efe()),qe(r,64,Ii(!1)),qe(r,141,Ws(0)),qe(r,34,Ii(wme(n)=="true")),qe(r,14,Ii(!0)),o&&qe(r,439,Ii(!1)),qe(r,218,Ws(0)),cpe(r,n,t),upe(r,n.SSF,t),fpe(r,t),o&&qe(r,352,Ii(!1));var f=r.end(),d=Qi();o&&qe(d,140,mfe()),o&&t.Strings&&rpe(d,252,Jhe(t.Strings)),qe(d,10);var g=d.end(),p=Qi(),x=0,v=0;for(v=0;v<n.SheetNames.length;++v)x+=(o?12:11)+(o?2:1)*n.SheetNames[v].length;var E=f.length+x+g.length;for(v=0;v<n.SheetNames.length;++v){var R=s[v]||{};qe(p,133,Qhe({pos:E,hs:R.Hidden||0,dt:0,name:n.SheetNames[v]},t)),E+=e[v].length}var S=p.end();if(x!=S.length)throw new Error("BS8 "+x+" != "+S.length);var C=[];return f.length&&C.push(f),S.length&&C.push(S),g.length&&C.push(g),Zr(C)}function ype(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=es(qn)),n&&n.SSF&&(Ox(),kx(n.SSF),t.revssf=Lx(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,AR(t),t.cellXfs=[],Kc(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=ppe(i,t,n);return r.unshift(_pe(n,r,t)),Zr(r)}function v7(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=Ms(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return ype(n,e);case 4:case 3:case 2:return lpe(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function vpe(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var f=mn({r:t,c:a}),d=r.dense?(n[t]||[])[a]:n[f],g=d&&d.v!=null&&(d.h||Yue(d.w||(ul(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?g='<span contenteditable="true">'+g+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),p.id=(r.id||"sjs")+"-"+f,s.push(Ke("td",g,p))}}var x="<tr>";return x+s.join("")+"</tr>"}var xpe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Epe="</body></html>";function wpe(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function x7(n,e){var t=e||{},r=t.header!=null?t.header:xpe,i=t.footer!=null?t.footer:Epe,s=[r],a=Ms(n["!ref"]);t.dense=Array.isArray(n),s.push(wpe(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(vpe(n,a,o,t));return s.push("</table>"+i),s.join("")}function E7(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?Nr(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var f=Ms(n["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),i==-1&&(u.e.r=i=f.e.r+1)}var d=[],g=0,p=n["!rows"]||(n["!rows"]=[]),x=0,v=0,E=0,R=0,S=0,C=0;for(n["!cols"]||(n["!cols"]=[]);x<o.length&&v<l;++x){var O=o[x];if(OO(O)){if(r.display)continue;p[v]={hidden:!0}}var N=O.children;for(E=R=0;E<N.length;++E){var z=N[E];if(!(r.display&&OO(z))){var M=z.hasAttribute("data-v")?z.getAttribute("data-v"):z.hasAttribute("v")?z.getAttribute("v"):ehe(z.innerHTML),P=z.getAttribute("data-z")||z.getAttribute("z");for(g=0;g<d.length;++g){var b=d[g];b.s.c==R+s&&b.s.r<v+i&&v+i<=b.e.r&&(R=b.e.c+1-s,g=-1)}C=+z.getAttribute("colspan")||1,((S=+z.getAttribute("rowspan")||1)>1||C>1)&&d.push({s:{r:v+i,c:R+s},e:{r:v+i+(S||1)-1,c:R+s+(C||1)-1}});var D={t:"s",v:M},B=z.getAttribute("data-t")||z.getAttribute("t")||"";M!=null&&(M.length==0?D.t=B||"z":r.raw||M.trim().length==0||B=="s"||(M==="TRUE"?D={t:"b",v:!0}:M==="FALSE"?D={t:"b",v:!1}:isNaN(tl(M))?isNaN(jm(M).getDate())||(D={t:"d",v:Oi(M)},r.cellDates||(D={t:"n",v:Ji(D.v)}),D.z=r.dateNF||qn[14]):D={t:"n",v:tl(M)})),D.z===void 0&&P!=null&&(D.z=P);var U="",V=z.getElementsByTagName("A");if(V&&V.length)for(var Ae=0;Ae<V.length&&!(V[Ae].hasAttribute("href")&&(U=V[Ae].getAttribute("href"),U.charAt(0)!="#"));++Ae);U&&U.charAt(0)!="#"&&(D.l={Target:U}),r.dense?(n[v+i]||(n[v+i]=[]),n[v+i][R+s]=D):n[mn({c:R+s,r:v+i})]=D,u.e.c<R+s&&(u.e.c=R+s),R+=C}}++v}return d.length&&(n["!merges"]=(n["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,v-1+i),n["!ref"]=cr(u),v>=l&&(n["!fullref"]=cr((u.e.r=o.length-x+v-1+i,u))),n}function w7(n,e){var t=e||{},r=t.dense?[]:{};return E7(r,n,e)}function Tpe(n,e){return bh(w7(n,e),e)}function OO(n){var e="",t=Spe(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function Spe(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Ipe=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Gm({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return hr+e}})(),LO=(function(){var n=function(s){return dn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var l=[];l.push('      <table:table table:name="'+dn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,f=0,d=Ms(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,x=Array.isArray(s);if(s["!cols"])for(f=0;f<=d.e.c;++f)l.push("        <table:table-column"+(s["!cols"][f]?' table:style-name="co'+s["!cols"][f].ods+'"':"")+`></table:table-column>
`);var v="",E=s["!rows"]||[];for(u=0;u<d.s.r;++u)v=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=d.e.r;++u){for(v=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+v+`>
`),f=0;f<d.s.c;++f)l.push(e);for(;f<=d.e.c;++f){var R=!1,S={},C="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>f)&&!(g[p].s.r>u)&&!(g[p].e.c<f)&&!(g[p].e.r<u)){(g[p].s.c!=f||g[p].s.r!=u)&&(R=!0),S["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,S["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(R){l.push(t);continue}var O=mn({r:u,c:f}),N=x?(s[u]||[])[f]:s[O];if(N&&N.f&&(S["table:formula"]=dn(W0e(N.f)),N.F&&N.F.slice(0,O.length)==O)){var z=Ms(N.F);S["table:number-matrix-columns-spanned"]=z.e.c-z.s.c+1,S["table:number-matrix-rows-spanned"]=z.e.r-z.s.r+1}if(!N){l.push(e);continue}switch(N.t){case"b":C=N.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=N.v?"true":"false";break;case"n":C=N.w||String(N.v||0),S["office:value-type"]="float",S["office:value"]=N.v||0;break;case"s":case"str":C=N.v==null?"":N.v,S["office:value-type"]="string";break;case"d":C=N.w||Oi(N.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=Oi(N.v).toISOString(),S["table:style-name"]="ce1";break;default:l.push(e);continue}var M=n(C);if(N.l&&N.l.Target){var P=N.l.Target;P=P.charAt(0)=="#"?"#"+H0e(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),M=Ke("text:a",M,{"xlink:href":P.replace(/&/g,"&amp;")})}l.push("          "+Ke("table:table-cell",Ke("text:p",M,{}),S)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var d=u["!cols"][f];if(d.width==null&&d.wpx==null&&d.wch==null)continue;ER(d),d.ods=o;var g=u["!cols"][f].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=l;var d=u["!rows"][f].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[hr],u=Gm({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=Gm({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+f+`>
`),l.push(F9().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(r(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function T7(n,e){if(e.bookType=="fods")return LO(n,e);var t=uR(),r="",i=[],s=[];return r="mimetype",kt(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",kt(t,r,LO(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",kt(t,r,Ipe(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",kt(t,r,hr+F9()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",kt(t,r,Fhe(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",kt(t,r,Nhe(i)),t}function wv(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Ape(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):xa(Bm(n))}function Rpe(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function Bc(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function Cpe(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Um(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function cn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function pd(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function yr(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Um(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Um(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function Wr(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(cn(r*8+i.type)),i.type==2&&e.push(cn(i.data.length)),e.push(i.data))})}),Bc(e)}function da(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Um(n,r),s=yr(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:pd(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=yr(o.data),u=pd(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=pd(s[3][0].data)>>>0>0),t.push(a)}return t}function Cf(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:cn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:cn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:cn(a.data.length)}],r[2].push({data:Wr(a.meta),type:2})});var s=Wr(r);e.push(cn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),Bc(e)}function Ppe(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Um(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[Bc(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var f=Bc(i);if(f.length!=r)throw new Error("Unexpected length: ".concat(f.length," != ").concat(r));return f}function ga(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(Ppe(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return Bc(e)}function Pf(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=cn(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return Bc(e)}function M2(n,e){var t=new Uint8Array(32),r=wv(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,Cpe(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function b2(n,e){var t=new Uint8Array(32),r=wv(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function Kl(n){var e=yr(n);return Um(e[1][0].data)}function Mpe(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&pd(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=wv(n[7][0].data),f=0,d=[],g=wv(n[4][0].data),p=0,x=[],v=0;v<e.length;++v){if(e[v]==null){u.setUint16(v*2,65535,!0),g.setUint16(v*2,65535);continue}u.setUint16(v*2,f,!0),g.setUint16(v*2,p,!0);var E,R;switch(typeof e[v]){case"string":E=M2({t:"s",v:e[v]},t),R=b2({t:"s",v:e[v]},t);break;case"number":E=M2({t:"n",v:e[v]},t),R=b2({t:"n",v:e[v]},t);break;case"boolean":E=M2({t:"b",v:e[v]},t),R=b2({t:"b",v:e[v]},t);break;default:throw new Error("Unsupported value "+e[v])}d.push(E),f+=E.length,x.push(R),p+=R.length,++l}for(n[2][0].data=cn(l);v<n[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),g.setUint16(v*2,65535,!0);return n[6][0].data=Bc(d),n[3][0].data=Bc(x),l}function bpe(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Ms(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(cr(r)));var s=Tv(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(re){return re.forEach(function(te){typeof te=="string"&&a.push(te)})});var o={},l=[],u=_n.read(e.numbers,{type:"base64"});u.FileIndex.map(function(re,te){return[re,u.FullPaths[te]]}).forEach(function(re){var te=re[0],Y=re[1];if(te.type==2&&te.name.match(/\.iwa/)){var fe=te.content,se=ga(fe),ne=da(se);ne.forEach(function(k){l.push(k.id),o[k.id]={deps:[],location:Y,type:pd(k.messages[0].meta[1][0].data)}})}}),l.sort(function(re,te){return re-te});var f=l.filter(function(re){return re>1}).map(function(re){return[re,cn(re)]});u.FileIndex.map(function(re,te){return[re,u.FullPaths[te]]}).forEach(function(re){var te=re[0];if(re[1],!!te.name.match(/\.iwa/)){var Y=da(ga(te.content));Y.forEach(function(fe){fe.messages.forEach(function(se){f.forEach(function(ne){fe.messages.some(function(k){return pd(k.meta[1][0].data)!=11006&&Rpe(k.data,ne[1])})&&o[ne[0]].deps.push(fe.id)})})})}});for(var d=_n.find(u,o[1].location),g=da(ga(d.content)),p,x=0;x<g.length;++x){var v=g[x];v.id==1&&(p=v)}var E=Kl(yr(p.messages[0].data)[1][0].data);for(d=_n.find(u,o[E].location),g=da(ga(d.content)),x=0;x<g.length;++x)v=g[x],v.id==E&&(p=v);for(E=Kl(yr(p.messages[0].data)[2][0].data),d=_n.find(u,o[E].location),g=da(ga(d.content)),x=0;x<g.length;++x)v=g[x],v.id==E&&(p=v);for(E=Kl(yr(p.messages[0].data)[2][0].data),d=_n.find(u,o[E].location),g=da(ga(d.content)),x=0;x<g.length;++x)v=g[x],v.id==E&&(p=v);var R=yr(p.messages[0].data);{R[6][0].data=cn(r.e.r+1),R[7][0].data=cn(r.e.c+1);var S=Kl(R[46][0].data),C=_n.find(u,o[S].location),O=da(ga(C.content));{for(var N=0;N<O.length&&O[N].id!=S;++N);if(O[N].id!=S)throw"Bad ColumnRowUIDMapArchive";var z=yr(O[N].messages[0].data);z[1]=[],z[2]=[],z[3]=[];for(var M=0;M<=r.e.c;++M){var P=[];P[1]=P[2]=[{type:0,data:cn(M+420690)}],z[1].push({type:2,data:Wr(P)}),z[2].push({type:0,data:cn(M)}),z[3].push({type:0,data:cn(M)})}z[4]=[],z[5]=[],z[6]=[];for(var b=0;b<=r.e.r;++b)P=[],P[1]=P[2]=[{type:0,data:cn(b+726270)}],z[4].push({type:2,data:Wr(P)}),z[5].push({type:0,data:cn(b)}),z[6].push({type:0,data:cn(b)});O[N].messages[0].data=Wr(z)}C.content=Pf(Cf(O)),C.size=C.content.length,delete R[46];var D=yr(R[4][0].data);{D[7][0].data=cn(r.e.r+1);var B=yr(D[1][0].data),U=Kl(B[2][0].data);C=_n.find(u,o[U].location),O=da(ga(C.content));{if(O[0].id!=U)throw"Bad HeaderStorageBucket";var V=yr(O[0].messages[0].data);for(b=0;b<s.length;++b){var Ae=yr(V[2][0].data);Ae[1][0].data=cn(b),Ae[4][0].data=cn(s[b].length),V[2][b]={type:V[2][0].type,data:Wr(Ae)}}O[0].messages[0].data=Wr(V)}C.content=Pf(Cf(O)),C.size=C.content.length;var be=Kl(D[2][0].data);C=_n.find(u,o[be].location),O=da(ga(C.content));{if(O[0].id!=be)throw"Bad HeaderStorageBucket";for(V=yr(O[0].messages[0].data),M=0;M<=r.e.c;++M)Ae=yr(V[2][0].data),Ae[1][0].data=cn(M),Ae[4][0].data=cn(r.e.r+1),V[2][M]={type:V[2][0].type,data:Wr(Ae)};O[0].messages[0].data=Wr(V)}C.content=Pf(Cf(O)),C.size=C.content.length;var Pe=Kl(D[4][0].data);(function(){for(var re=_n.find(u,o[Pe].location),te=da(ga(re.content)),Y,fe=0;fe<te.length;++fe){var se=te[fe];se.id==Pe&&(Y=se)}var ne=yr(Y.messages[0].data);{ne[3]=[];var k=[];a.forEach(function(We,ce){k[1]=[{type:0,data:cn(ce)}],k[2]=[{type:0,data:cn(1)}],k[3]=[{type:2,data:Ape(We)}],ne[3].push({type:2,data:Wr(k)})})}Y.messages[0].data=Wr(ne);var Te=Cf(te),le=Pf(Te);re.content=le,re.size=re.content.length})();var Me=yr(D[3][0].data);{var he=Me[1][0];delete Me[2];var ae=yr(he.data);{var Ee=Kl(ae[2][0].data);(function(){for(var re=_n.find(u,o[Ee].location),te=da(ga(re.content)),Y,fe=0;fe<te.length;++fe){var se=te[fe];se.id==Ee&&(Y=se)}var ne=yr(Y.messages[0].data);{delete ne[6],delete Me[7];var k=new Uint8Array(ne[5][0].data);ne[5]=[];for(var Te=0,le=0;le<=r.e.r;++le){var We=yr(k);Te+=Mpe(We,s[le],a),We[1][0].data=cn(le),ne[5].push({data:Wr(We),type:2})}ne[1]=[{type:0,data:cn(r.e.c+1)}],ne[2]=[{type:0,data:cn(r.e.r+1)}],ne[3]=[{type:0,data:cn(Te)}],ne[4]=[{type:0,data:cn(r.e.r+1)}]}Y.messages[0].data=Wr(ne);var ce=Cf(te),W=Pf(ce);re.content=W,re.size=re.content.length})()}he.data=Wr(ae)}D[3][0].data=Wr(Me)}R[4][0].data=Wr(D)}p.messages[0].data=Wr(R);var J=Cf(g),F=Pf(J);return d.content=F,d.size=d.content.length,u}function kpe(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function AR(n){kpe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function Ope(n,e){return e.bookType=="ods"?T7(n,e):e.bookType=="numbers"?bpe(n,e):e.bookType=="xlsb"?Lpe(n,e):Npe(n,e)}function Lpe(n,e){td=1024,n&&!n.SSF&&(n.SSF=es(qn)),n&&n.SSF&&(Ox(),kx(n.SSF),e.revssf=Lx(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Xg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=s7.indexOf(e.bookType)>-1,i=L9();AR(e=e||{});var s=uR(),a="",o=0;if(e.cellXfs=[],Kc(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",kt(s,a,V9(n.Props,e)),i.coreprops.push(a),un(e.rels,2,a,Wt.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,kt(s,a,B9(n.Props)),i.extprops.push(a),un(e.rels,3,a,Wt.EXT_PROPS),n.Custprops!==n.Props&&ri(n.Custprops||{}).length>0&&(a="docProps/custom.xml",kt(s,a,G9(n.Custprops)),i.custprops.push(a),un(e.rels,4,a,Wt.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var f={"!id":{}},d=n.Sheets[n.SheetNames[o-1]],g=(d||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,kt(s,a,Fme(o-1,a,e,n,f)),i.sheets.push(a),un(e.wbrels,-1,"worksheets/sheet"+o+"."+t,Wt.WS[0])}if(d){var p=d["!comments"],x=!1,v="";p&&p.length>0&&(v="xl/comments"+o+"."+t,kt(s,v,Bme(p,v)),i.comments.push(v),un(f,-1,"../comments"+o+"."+t,Wt.CMNT),x=!0),d["!legacy"]&&x&&kt(s,"xl/drawings/vmlDrawing"+o+".vml",r7(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&kt(s,D9(a),gd(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,kt(s,a,jme(e.Strings,a,e)),i.strs.push(a),un(e.wbrels,-1,"sharedStrings."+t,Wt.SST)),a="xl/workbook."+t,kt(s,a,Dme(n,a)),i.workbooks.push(a),un(e.rels,1,a,Wt.WB),a="xl/theme/theme1.xml",kt(s,a,t7(n.Themes,e)),i.themes.push(a),un(e.wbrels,-1,"theme/theme1.xml",Wt.THEME),a="xl/styles."+t,kt(s,a,Vme(n,a,e)),i.styles.push(a),un(e.wbrels,-1,"styles."+t,Wt.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",kt(s,a,n.vbaraw),i.vba.push(a),un(e.wbrels,-1,"vbaProject.bin",Wt.VBA)),a="xl/metadata."+t,kt(s,a,Gme(a)),i.metadata.push(a),un(e.wbrels,-1,"metadata."+t,Wt.XLMETA),kt(s,"[Content_Types].xml",N9(i,e)),kt(s,"_rels/.rels",gd(e.rels)),kt(s,"xl/_rels/workbook."+t+".rels",gd(e.wbrels)),delete e.revssf,delete e.ssf,s}function Npe(n,e){td=1024,n&&!n.SSF&&(n.SSF=es(qn)),n&&n.SSF&&(Ox(),kx(n.SSF),e.revssf=Lx(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Xg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=s7.indexOf(e.bookType)>-1,i=L9();AR(e=e||{});var s=uR(),a="",o=0;if(e.cellXfs=[],Kc(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",kt(s,a,V9(n.Props,e)),i.coreprops.push(a),un(e.rels,2,a,Wt.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,kt(s,a,B9(n.Props)),i.extprops.push(a),un(e.rels,3,a,Wt.EXT_PROPS),n.Custprops!==n.Props&&ri(n.Custprops||{}).length>0&&(a="docProps/custom.xml",kt(s,a,G9(n.Custprops)),i.custprops.push(a),un(e.rels,4,a,Wt.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var d={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,kt(s,a,g7(o-1,e,n,d)),i.sheets.push(a),un(e.wbrels,-1,"worksheets/sheet"+o+"."+t,Wt.WS[0])}if(g){var x=g["!comments"],v=!1,E="";if(x&&x.length>0){var R=!1;x.forEach(function(S){S[1].forEach(function(C){C.T==!0&&(R=!0)})}),R&&(E="xl/threadedComments/threadedComment"+o+"."+t,kt(s,E,fde(x,f,e)),i.threadedcomments.push(E),un(d,-1,"../threadedComments/threadedComment"+o+"."+t,Wt.TCMNT)),E="xl/comments"+o+"."+t,kt(s,E,i7(x)),i.comments.push(E),un(d,-1,"../comments"+o+"."+t,Wt.CMNT),v=!0}g["!legacy"]&&v&&kt(s,"xl/drawings/vmlDrawing"+o+".vml",r7(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}d["!id"].rId1&&kt(s,D9(a),gd(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,kt(s,a,X9(e.Strings,e)),i.strs.push(a),un(e.wbrels,-1,"sharedStrings."+t,Wt.SST)),a="xl/workbook."+t,kt(s,a,_7(n)),i.workbooks.push(a),un(e.rels,1,a,Wt.WB),a="xl/theme/theme1.xml",kt(s,a,t7(n.Themes,e)),i.themes.push(a),un(e.wbrels,-1,"theme/theme1.xml",Wt.THEME),a="xl/styles."+t,kt(s,a,J9(n,e)),i.styles.push(a),un(e.wbrels,-1,"styles."+t,Wt.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",kt(s,a,n.vbaraw),i.vba.push(a),un(e.wbrels,-1,"vbaProject.bin",Wt.VBA)),a="xl/metadata."+t,kt(s,a,n7()),i.metadata.push(a),un(e.wbrels,-1,"metadata."+t,Wt.XLMETA),f.length>1&&(a="xl/persons/person.xml",kt(s,a,dde(f)),i.people.push(a),un(e.wbrels,-1,"persons/person.xml",Wt.PEOPLE)),kt(s,"[Content_Types].xml",N9(i,e)),kt(s,"_rels/.rels",gd(e.rels)),kt(s,"xl/_rels/workbook."+t+".rels",gd(e.wbrels)),delete e.revssf,delete e.ssf,s}function Dpe(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=cl(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function S7(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return bp(e.file,_n.write(n,{type:Xt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return _n.write(n,e)}function Fpe(n,e){var t=es(e||{}),r=Ope(n,t);return Vpe(r,t)}function Vpe(n,e){var t={},r=Xt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?_n.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(bx(i))}return e.password&&typeof encrypt_agile<"u"?S7(encrypt_agile(i,e.password),e):e.type==="file"?bp(e.file,i):e.type=="string"?Wg(i):i}function jpe(n,e){var t=e||{},r=tpe(n,t);return S7(r,t)}function qa(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Vm(Bm(r));case"binary":return Bm(r);case"string":return n;case"file":return bp(e.file,r,"utf8");case"buffer":return Xt?ml(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):qa(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Bpe(n,e){switch(e.type){case"base64":return Vm(n);case"binary":return n;case"string":return n;case"file":return bp(e.file,n,"binary");case"buffer":return Xt?ml(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function E1(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Vm(t):e.type=="string"?Wg(t):t;case"file":return bp(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function I7(n,e){gue(),Ime(n);var t=es(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=I7(n,t);return t.type="array",bx(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return qa(Jme(n,t),t);case"slk":case"sylk":return qa(wfe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return qa(x7(n.Sheets[n.SheetNames[i]],t),t);case"txt":return Bpe(A7(n.Sheets[n.SheetNames[i]],t),t);case"csv":return qa(RR(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return qa(Tfe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return E1(Efe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return qa(Sfe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return qa(bfe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return qa(q9.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return qa(T7(n,t),t);case"wk1":return E1(RO.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return E1(RO.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),E1(v7(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),jpe(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Fpe(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function Gpe(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function Upe(n,e,t){var r={};return r.type="file",r.file=e,Gpe(r),I7(n,r)}function zpe(n,e,t,r,i,s,a,o){var l=ni(t),u=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var p=e.s.c;p<=e.e.c;++p){var x=a?n[t][p]:n[r[p]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var v=x.v;switch(x.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(s[p]!=null){if(v==null)if(x.t=="e"&&v===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(f&&v===null)g[s[p]]=null;else continue;else g[s[p]]=f&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?v:ul(x,v,o);v!=null&&(d=!1)}}return{row:g,isempty:d}}function Tv(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},f=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof f){case"string":l=Rn(f);break;case"number":l=Rn(n["!ref"]),l.s.r=f;break;default:l=f}r>0&&(i=0);var d=ni(l.s.r),g=[],p=[],x=0,v=0,E=Array.isArray(n),R=l.s.r,S=0,C={};E&&!n[R]&&(n[R]=[]);var O=u.skipHidden&&n["!cols"]||[],N=u.skipHidden&&n["!rows"]||[];for(S=l.s.c;S<=l.e.c;++S)if(!(O[S]||{}).hidden)switch(g[S]=_i(S),t=E?n[R][S]:n[g[S]+d],r){case 1:s[S]=S-l.s.c;break;case 2:s[S]=g[S];break;case 3:s[S]=u.header[S-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=ul(t,null,u),v=C[a]||0,!v)C[a]=1;else{do o=a+"_"+v++;while(C[o]);C[a]=v,C[o]=1}s[S]=o}for(R=l.s.r+i;R<=l.e.r;++R)if(!(N[R]||{}).hidden){var z=zpe(n,l,R,g,r,s,E,u);(z.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[x++]=z.row)}return p.length=x,p}var NO=/"/g;function $pe(n,e,t,r,i,s,a,o){for(var l=!0,u=[],f="",d=ni(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var p=o.dense?(n[t]||[])[g]:n[r[g]+d];if(p==null)f="";else if(p.v!=null){l=!1,f=""+(o.rawNumbers&&p.t=="n"?p.v:ul(p,null,o));for(var x=0,v=0;x!==f.length;++x)if((v=f.charCodeAt(x))===i||v===s||v===34||o.forceQuotes){f='"'+f.replace(NO,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(l=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(NO,'""')+'"')):f="";u.push(f)}return o.blankrows===!1&&l?null:u.join(a)}function RR(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=Rn(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),f="",d=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(g[x]||{}).hidden||(d[x]=_i(x));for(var v=0,E=i.s.r;E<=i.e.r;++E)(p[E]||{}).hidden||(f=$pe(n,i,E,d,a,l,s,r),f!=null&&(r.strip&&(f=f.replace(u,"")),(f||r.blankrows!==!1)&&t.push((v++?o:"")+f)));return delete r.dense,t.join("")}function A7(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=RR(n,e);return t}function Wpe(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=Rn(n["!ref"]),s="",a=[],o,l=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=_i(o);for(var f=i.s.r;f<=i.e.r;++f)for(s=ni(f),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[f]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function R7(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Nr(r.origin):r.origin;a=l.r,o=l.c}var u,f={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=Rn(s["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),a==-1&&(a=d.e.r+1,f.e.r=a+e.length-1+i)}else a==-1&&(a=0,f.e.r=e.length-1+i);var g=r.header||[],p=0;e.forEach(function(v,E){ri(v).forEach(function(R){(p=g.indexOf(R))==-1&&(g[p=g.length]=R);var S=v[R],C="z",O="",N=mn({c:o+p,r:a+E+i});u=zm(s,N),S&&typeof S=="object"&&!(S instanceof Date)?s[N]=S:(typeof S=="number"?C="n":typeof S=="boolean"?C="b":typeof S=="string"?C="s":S instanceof Date?(C="d",r.cellDates||(C="n",S=Ji(S)),O=r.dateNF||qn[14]):S===null&&r.nullError&&(C="e",S=0),u?(u.t=C,u.v=S,delete u.w,delete u.R,O&&(u.z=O)):s[N]=u={t:C,v:S},O&&(u.z=O))})}),f.e.c=Math.max(f.e.c,o+g.length-1);var x=ni(a);if(i)for(p=0;p<g.length;++p)s[_i(p+o)+x]={t:"s",v:g[p]};return s["!ref"]=cr(f),s}function Hpe(n,e){return R7(null,n,e)}function zm(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=Nr(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?zm(n,mn(e)):zm(n,mn({r:e,c:t||0}))}function Kpe(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function qpe(){return{SheetNames:[],Sheets:{}}}function Xpe(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(p7(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function Ype(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=Kpe(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function Zpe(n,e){return n.z=e,n}function C7(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function Qpe(n,e,t){return C7(n,"#"+e,t)}function Jpe(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function e_e(n,e,t,r){for(var i=typeof e!="string"?e:Rn(e),s=typeof e=="string"?e:cr(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=zm(n,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=t,r&&(l.D=!0))}return n}var k2={encode_col:_i,encode_row:ni,encode_cell:mn,encode_range:cr,decode_col:pR,decode_row:mR,split_cell:ghe,decode_cell:Nr,decode_range:Ms,format_cell:ul,sheet_add_aoa:C9,sheet_add_json:R7,sheet_add_dom:E7,aoa_to_sheet:n0,json_to_sheet:Hpe,table_to_sheet:w7,table_to_book:Tpe,sheet_to_csv:RR,sheet_to_txt:A7,sheet_to_json:Tv,sheet_to_html:x7,sheet_to_formulae:Wpe,sheet_to_row_object_array:Tv,sheet_get_cell:zm,book_new:qpe,book_append_sheet:Xpe,book_set_sheet_visibility:Ype,cell_set_number_format:Zpe,cell_set_hyperlink:C7,cell_set_internal_link:Qpe,cell_add_comment:Jpe,sheet_set_array_formula:e_e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const s0=xo()(fA((n,e)=>({vondsten:[],addVondst:t=>n(r=>({vondsten:[...r.vondsten,{...t,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:t=>n(r=>({vondsten:r.vondsten.filter(i=>i.id!==t)})),updateVondst:(t,r)=>n(i=>({vondsten:i.vondsten.map(s=>s.id===t?{...s,...r}:s)})),clearAll:()=>n({vondsten:[]}),exportAsGeoJSON:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:t.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:[o.location.lng,o.location.lat]},properties:{id:o.id,objectType:o.objectType,material:o.material,period:o.period,depth:o.depth,notes:o.notes,timestamp:o.timestamp,photoUrl:o.photoUrl,condition:o.condition,weight:o.weight}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},exportAsCSV:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Notities,Foto URL
`,i=t.map(u=>{const f=new Date(u.timestamp).toLocaleDateString("nl-NL"),d=u.notes?`"${u.notes.replace(/"/g,'""')}"`:"";return`${u.id},${u.location.lat},${u.location.lng},${f},${u.objectType},${u.material},${u.period},${u.depth||""},${u.condition||""},${u.weight||""},${d},${u.photoUrl||""}`}).join(`
`),s=r+i,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},exportAsExcel:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(o=>({ID:o.id,Latitude:o.location.lat,Longitude:o.location.lng,Datum:new Date(o.timestamp).toLocaleDateString("nl-NL"),Type:o.objectType,Materiaal:o.material,Periode:o.period,"Diepte (cm)":o.depth||"",Conditie:o.condition||"","Gewicht (g)":o.weight||"",Notities:o.notes||"","Foto URL":o.photoUrl||""})),i=k2.json_to_sheet(r),s=k2.book_new();k2.book_append_sheet(s,i,"Vondsten");const a=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=a,Upe(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(l=>{const u=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${u}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},exportAsKML:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${t.map(l=>{const u=new Date(l.timestamp).toLocaleDateString("nl-NL"),f=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            <b>Datum:</b> ${u}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${f}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}}),{name:"detectorapp-local-vondsten"}));ln.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");async function t_e(n){try{const e=on(n),t=ln("EPSG:4326","EPSG:28992",e);if(t[0]<7e3||t[0]>3e5||t[1]<289e3||t[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${t[0]-r},${t[1]-r},${t[0]+r},${t[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,o=await(await fetch(s)).json();if(o.features&&o.features.length>0){const l=o.features[0].properties,u=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(u!=null){const f=typeof u=="number"?u:parseFloat(u);if(!isNaN(f))return f}}}catch(e){console.warn("AHN height query failed:",e)}return null}const n_e={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},r_e={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function i_e(){const n=ti(Pe=>Pe.map),e=s0(Pe=>Pe.removeVondst),[t,r]=ve.useState([]),[i,s]=ve.useState(0),[a,o]=ve.useState(!1),[l,u]=ve.useState(null),[f,d]=ve.useState(!1),[g,p]=ve.useState(!1),[x,v]=ve.useState(null),[E,R]=ve.useState(()=>{const Pe=localStorage.getItem("popupTextScale");return Pe?parseInt(Pe):100}),S=Pe=>{R(Pe),localStorage.setItem("popupTextScale",Pe.toString())},C=t[i]||"",O=t.length>1,N=Pe=>{const Me=Pe.match(/<strong[^>]*>(.*?)<\/strong>/);if(Me){const he=Me[1].replace(/<[^>]+>/g,""),ae=Pe.replace(Me[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:he,contentWithoutTitle:ae}}return{title:"",contentWithoutTitle:Pe}},{title:z,contentWithoutTitle:M}=N(C),P=C.includes("Landbouwperceel"),b=C.includes("data-vondst-id="),D=()=>{s(Pe=>(Pe-1+t.length)%t.length)},B=()=>{s(Pe=>(Pe+1)%t.length)},U=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",l),!n||!l||g){console.log(" STOP - map:",!!n,"coord:",l,"loading:",g);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${l[0]}, ${l[1]}]`),p(!0);try{await hue(n,l)&&d(!0)}catch(Pe){console.error("Failed to load height map:",Pe)}finally{p(!1)}},V=()=>{n&&(mS(n),d(!1))};ve.useEffect(()=>{if(!n)return;const Pe=ae=>{let Ee='<strong class="text-purple-800">AMK Monument</strong>';if(ae.toponiem&&(Ee+=`<br/><span class="text-sm font-semibold">${ae.toponiem}</span>`),ae.kwaliteitswaarde&&(Ee+=`<br/><span class="text-sm text-purple-700">${ae.kwaliteitswaarde}</span>`),ae.omschrijving&&(Ee+=`<br/><span class="text-xs text-gray-600 mt-1 block">${ae.omschrijving}</span>`),ae.txt_label){const J=ae.txt_label.split(", ").slice(0,3).join(", ");Ee+=`<br/><span class="text-xs text-gray-500 italic">${J}${ae.txt_label.split(", ").length>3?"...":""}</span>`}return Ee},Me=async(ae,Ee)=>{const J=[],F=n.getLayers().getArray().filter(re=>re instanceof vu&&re.getVisible()?re.getSource()instanceof lz:!1);for(const re of F){const te=re.getSource();if(!te)continue;const Y=re.get("title")||"";if(Y==="Archeo Landschappen"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-green-800">Archeologisch Landschap</strong>';(W.landschapsnaam||W.naam)&&(Ie+=`<br/><span class="text-sm font-semibold">${W.landschapsnaam||W.naam}</span>`),W.omschrijving&&(Ie+=`<br/><span class="text-xs text-gray-600">${W.omschrijving}</span>`),J.push(Ie)}}catch(se){console.warn("Archeo Landschappen WMS query failed:",se)}continue}if(Y==="FAMKE Steentijd"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=FAMKE_Advies_steentijd-bronstijd3339&QUERY_LAYERS=FAMKE_Advies_steentijd-bronstijd3339&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';(W.advies||W.Advies)&&(Ie+=`<br/><span class="text-sm text-amber-700">${W.advies||W.Advies}</span>`),J.push(Ie)}}catch(se){console.warn("FAMKE WMS query failed:",se)}continue}if(Y==="Archeo Onderzoeken"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-blue-800">Archeologisch Onderzoek</strong>';if(W.type_onderzoek&&(Ie+=`<br/><span class="text-sm font-semibold">${W.type_onderzoek}</span>`),W.onderzoeksmeldingnummer&&(Ie+=`<br/><span class="text-xs text-gray-500">Melding: ${W.onderzoeksmeldingnummer}</span>`),W.uitvoerder&&(Ie+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${W.uitvoerder}</span>`),W.startdatum||W.einddatum){const tt=[W.startdatum,W.einddatum].filter(Boolean).join(" - ");Ie+=`<br/><span class="text-xs text-gray-600">Periode: ${tt}</span>`}if(W.gemeente&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.gemeente}</span>`),W.type_uri){const tt=W.type_uri.replace("type_uri:","").trim();tt.startsWith("http")&&(Ie+=`<br/><a href="${tt}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">Meer informatie </a>`)}for(const[tt,De]of Object.entries(W))if(tt.toLowerCase().includes("uri")&&typeof De=="string"&&tt!=="type_uri"){const Mt=De.replace(/^[a-z_]+:/i,"").trim();Mt.startsWith("http")&&(Ie+=`<br/><a href="${Mt}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">${tt.replace("_uri","")} </a>`)}J.push(Ie)}}catch(se){console.warn("Archeo Onderzoeken WMS query failed:",se)}continue}if(Y==="IKAW"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=500,le=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties,Ie=Math.round(W.PALETTE_INDEX||W.palette_index||0),tt=r_e[Ie]||`Trefkans onbekend (${Ie})`;let De='<strong class="text-orange-800">IKAW (2008)</strong>';De+=`<br/><span class="text-sm text-orange-700">${tt}</span>`,J.push(De)}}catch(se){console.warn("IKAW WMS query failed:",se)}continue}if(Y==="Inundatiegebieden"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-blue-800">Inundatiegebied</strong>';(W["linie-naam"]||W.linie_naam)&&(Ie+=`<br/><span class="text-sm font-semibold text-blue-700">${W["linie-naam"]||W.linie_naam}</span>`),W.naam&&(Ie+=`<br/><span class="text-sm text-gray-700">${W.naam}</span>`),W.periode&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.periode}</span>`),W.lin_period&&(Ie+=`<br/><span class="text-xs text-gray-400">${W.lin_period}</span>`),J.push(Ie)}}catch(se){console.warn("Inundatiegebieden WMS query failed:",se)}continue}if(Y==="Militaire Objecten"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=50,le=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-stone-800">Militair Object</strong>';W.obj_soort&&(Ie+=`<br/><span class="text-sm font-semibold text-stone-700">${W.obj_soort}</span>`),W.obj_naam&&(Ie+=`<br/><span class="text-sm text-gray-700">${W.obj_naam}</span>`),W.lin_period&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.lin_period}</span>`),J.push(Ie)}}catch(se){console.warn("Militaire Objecten WMS query failed:",se)}continue}if(Y==="Verdedigingslinies"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-amber-800">Verdedigingslinie</strong>';(W.naam||W.lin_naam)&&(Ie+=`<br/><span class="text-sm font-semibold text-amber-700">${W.naam||W.lin_naam}</span>`),W.lin_period&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.lin_period}</span>`),W.status&&(Ie+=`<br/><span class="text-xs text-gray-400">${W.status}</span>`),J.push(Ie)}}catch(se){console.warn("Verdedigingslinies WMS query failed:",se)}continue}if(Y==="Rijksmonumenten"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=50,le=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-red-800">Rijksmonument</strong>';(W.cbsNaam||W.cbs_naam)&&(Ie+=`<br/><span class="text-sm font-semibold">${W.cbsNaam||W.cbs_naam}</span>`),W.hoofdcategorie&&(Ie+=`<br/><span class="text-sm text-red-700">${W.hoofdcategorie}</span>`),W.subcategorie&&(Ie+=`<br/><span class="text-xs text-gray-600">${W.subcategorie}</span>`),W.rijksmonumentnummer&&(Ie+=`<br/><span class="text-xs text-gray-500">Nr: ${W.rijksmonumentnummer}</span>`),(W.bouwjaar||W.oorspronkelijkebouwjaar)&&(Ie+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${W.bouwjaar||W.oorspronkelijkebouwjaar}</span>`),J.push(Ie)}}catch(se){console.warn("Rijksmonumenten WMS query failed:",se)}continue}if(Y==="Werelderfgoed"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=500,le=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(W.siteName||W.naam)&&(Ie+=`<br/><span class="text-sm font-semibold text-cyan-700">${W.siteName||W.naam}</span>`),W.siteDesignation&&(Ie+=`<br/><span class="text-xs text-gray-600">${W.siteDesignation}</span>`),J.push(Ie)}}catch(se){console.warn("Werelderfgoed WMS query failed:",se)}continue}if(Y==="Terpen"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=terpen3335&QUERY_LAYERS=terpen3335&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-orange-800">Terp</strong>';(W.naam||W.NAAM)&&(Ie+=`<br/><span class="text-sm font-semibold text-orange-700">${W.naam||W.NAAM}</span>`),(W.plaats||W.PLAATS)&&(Ie+=`<br/><span class="text-xs text-gray-600">${W.plaats||W.PLAATS}</span>`),J.push(Ie)}}catch(se){console.warn("Terpen WMS query failed:",se)}continue}if(Y==="Religieus Erfgoed"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=50,le=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-purple-800">Religieus Erfgoed</strong>';const tt=W.naam||W.NAAM||W.name||W.NAME;tt&&(Ie+=`<br/><span class="text-sm font-semibold text-purple-700">${tt}</span>`);const De=W.denominatie||W.DENOMINATIE||W.religie;De&&(Ie+=`<br/><span class="text-sm text-gray-700">${De}</span>`);const Mt=W.type||W.TYPE||W.functie;Mt&&(Ie+=`<br/><span class="text-xs text-gray-600">${Mt}</span>`);const Rt=W.bouwjaar||W.BOUWJAAR||W.jaar;Rt&&(Ie+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${Rt}</span>`);const Ct=W.gemeente||W.GEMEENTE||W.plaats;Ct&&(Ie+=`<br/><span class="text-xs text-gray-400">${Ct}</span>`),J.push(Ie)}}catch(se){console.warn("Religieus Erfgoed WMS query failed:",se)}continue}if(Y==="Gewaspercelen"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=50,le=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-green-800">Landbouwperceel</strong>';(W.gewas||W.gewasnaam)&&(Ie+=`<br/><span class="text-sm font-semibold text-green-700">${W.gewas||W.gewasnaam}</span>`),(W.categorie||W.category)&&(Ie+=`<br/><span class="text-xs text-gray-600">${W.categorie||W.category}</span>`),W.oppervlakte&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.oppervlakte} ha</span>`),J.push(Ie)}}catch(se){console.warn("BRP Gewaspercelen WMS query failed:",se)}continue}if(Y==="Kadastrale Grenzen"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=20,le=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if((W.perceelNummer||W.perceelnummer)&&(Ie+=`<br/><span class="text-sm font-semibold text-indigo-700">${W.perceelNummer||W.perceelnummer}</span>`),W.kadastraleGemeenteCode||W.gemeentecode){const tt=String(W.kadastraleGemeenteCode||W.gemeentecode),De=n_e[tt]||tt;Ie+=`<br/><span class="text-xs text-gray-600">Gemeente: ${De}</span>`}W.sectie&&(Ie+=`<br/><span class="text-xs text-gray-500">Sectie: ${W.sectie}</span>`),W.oppervlakte&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.oppervlakte} m</span>`),J.push(Ie)}}catch(se){console.warn("Kadastrale Grenzen WMS query failed:",se)}continue}if(Y==="Scheepswrakken"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-cyan-800">Scheepswrak</strong>';(W.naam||W.NAAM)&&(Ie+=`<br/><span class="text-sm font-semibold text-cyan-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(Ie+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.datering||W.DATERING)&&(Ie+=`<br/><span class="text-xs text-gray-500">Datering: ${W.datering||W.DATERING}</span>`),(W.bron||W.BRON)&&(Ie+=`<br/><span class="text-xs text-gray-400">${W.bron||W.BRON}</span>`),J.push(Ie)}}catch(se){console.warn("Scheepswrakken WMS query failed:",se)}continue}if(Y==="Woonheuvels ZH"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-orange-800">Woonheuvel</strong>';(W.naam||W.NAAM)&&(Ie+=`<br/><span class="text-sm font-semibold text-orange-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(Ie+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),J.push(Ie)}}catch(se){console.warn("Woonheuvels WMS query failed:",se)}continue}if(Y==="Romeinse Forten"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=200,le=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-red-800">Romeins Fort</strong>';(W.naam||W.NAAM)&&(Ie+=`<br/><span class="text-sm font-semibold text-red-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(Ie+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.periode||W.PERIODE)&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.periode||W.PERIODE}</span>`),J.push(Ie)}}catch(se){console.warn("Romeinse Forten WMS query failed:",se)}continue}if(Y==="Windmolens"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=50,le=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-amber-800">Windmolen</strong>';(W.naam||W.NAAM)&&(Ie+=`<br/><span class="text-sm font-semibold text-amber-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE||W.functie||W.FUNCTIE)&&(Ie+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE||W.functie||W.FUNCTIE}</span>`),(W.bouwjaar||W.BOUWJAAR)&&(Ie+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${W.bouwjaar||W.BOUWJAAR}</span>`),J.push(Ie)}}catch(se){console.warn("Windmolens WMS query failed:",se)}continue}if(Y==="Erfgoedlijnen"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=200,le=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-purple-800">Erfgoedlijn</strong>';(W.naam||W.NAAM||W.erfgoedlijn)&&(Ie+=`<br/><span class="text-sm font-semibold text-purple-700">${W.naam||W.NAAM||W.erfgoedlijn}</span>`),(W.type||W.TYPE)&&(Ie+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.omschrijving||W.OMSCHRIJVING)&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.omschrijving||W.OMSCHRIJVING}</span>`),J.push(Ie)}}catch(se){console.warn("Erfgoedlijnen WMS query failed:",se)}continue}if(Y==="Oude Kernen"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=200,le=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-stone-800">Historische Kern</strong>';(W.naam||W.NAAM)&&(Ie+=`<br/><span class="text-sm font-semibold text-stone-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(Ie+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.periode||W.PERIODE)&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.periode||W.PERIODE}</span>`),J.push(Ie)}}catch(se){console.warn("Oude Kernen WMS query failed:",se)}continue}if(Y==="Relictenkaart Punten"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=50,le=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties,Ie={KV:"Kasteel/Vesting",K:"Kapel",KE:"Kerkhof",B:"Buitenhuis",OB:"Oud Bebouwingsrelict",OV:"Oude Verkaveling",NR:"Nijverheidsrelict",GH:"Grafheuvel",BP:"Begraafplaats",HH:"Havezate",RM:"Rosmolen",WM:"Windmolen",PM:"Poldermolen",EK:"Eendenkooi",SH:"Scholtenhoeve"},tt=W.type?.replace(/[0-9]/g,"")||"",De=Ie[tt]||W.type||"Cultuurhistorisch object";let Mt='<strong class="text-emerald-800">Relict</strong>';Mt+=`<br/><span class="text-sm font-semibold text-emerald-700">${De}</span>`,W.type&&tt!==W.type&&(Mt+=`<br/><span class="text-xs text-gray-500">Code: ${W.type}</span>`),W.streek&&(Mt+=`<br/><span class="text-xs text-gray-400">Streek: ${W.streek}</span>`),J.push(Mt)}}catch(se){console.warn("Relictenkaart Punten WMS query failed:",se)}continue}if(Y==="Relictenkaart Lijnen"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=50,le=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties,tt={1:"Sprengenbeek",2:"Oude waterloop",3:"Doorgaande weg",4:"Hessenweg",5:"Oude weg",6:"Historische grens",7:"Trekpad",8:"Jaagpad"}[W.klasse]||`Historisch lijnrelict (${W.klasse})`;let De='<strong class="text-teal-800">Lijnrelict</strong>';De+=`<br/><span class="text-sm font-semibold text-teal-700">${tt}</span>`,J.push(De)}}catch(se){console.warn("Relictenkaart Lijnen WMS query failed:",se)}continue}if(Y==="Relictenkaart Vlakken"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=100,le=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties,tt={1:"Onveranderd agrarisch (voor 1850)",2:"Jonge heideontginning (1850-1950)",3:"Open essencomplex",4:"Kampenlandschap",5:"Heiderelict (1850)",6:"Bosrelict (1850)",7:"Stuifzandrelict",8:"Oud bouwland",9:"Historisch grasland",10:"Beekdal"}[W.klasse]||`Historisch landschap (${W.klasse})`;let De='<strong class="text-lime-800">Landschapsrelict</strong>';if(De+=`<br/><span class="text-sm font-semibold text-lime-700">${tt}</span>`,W.st_area_shape_){const Mt=(W.st_area_shape_/1e4).toFixed(1);De+=`<br/><span class="text-xs text-gray-500">${Mt} ha</span>`}J.push(De)}}catch(se){console.warn("Relictenkaart Vlakken WMS query failed:",se)}continue}if(Y==="Verdronken Dorpen"){try{const se=on(ae),ne=ln("EPSG:4326","EPSG:28992",se),k=200,le=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ne[0]-k},${ne[1]-k},${ne[0]+k},${ne[1]+k}`}`,ce=await(await fetch(le)).json();if(ce.features&&ce.features.length>0){const W=ce.features[0].properties;let Ie='<strong class="text-blue-800">Verdronken Dorp</strong>';(W.naam||W.NAAM)&&(Ie+=`<br/><span class="text-sm font-semibold text-blue-700">${W.naam||W.NAAM}</span>`),(W.verdronken||W.VERDRONKEN||W.jaar||W.JAAR)&&(Ie+=`<br/><span class="text-xs text-gray-600">Verdronken: ${W.verdronken||W.VERDRONKEN||W.jaar||W.JAAR}</span>`),(W.gemeente||W.GEMEENTE)&&(Ie+=`<br/><span class="text-xs text-gray-500">${W.gemeente||W.GEMEENTE}</span>`),(W.bron||W.BRON)&&(Ie+=`<br/><span class="text-xs text-gray-400">${W.bron||W.BRON}</span>`),J.push(Ie)}}catch(se){console.warn("Verdronken Dorpen WMS query failed:",se)}continue}const fe=te.getFeatureInfoUrl(ae,Ee,"EPSG:3857",{INFO_FORMAT:"application/json"});if(fe)try{const ne=await(await fetch(fe)).json();if(ne.features&&ne.features.length>0){const k=ne.features[0].properties;if(Y==="AHN 0.5m"){let le='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const We=k.value_list??k.GRAY_INDEX??k.value??k.gray_index??k.dtm_05m??k.DTM_05M??k.hoogte??k.HOOGTE??k.elevation??k.ELEVATION;if(We!=null&&!isNaN(Number(We))){const ce=typeof We=="number"?We.toFixed(2):Number(We).toFixed(2);le+=`<br/><span class="text-sm text-blue-700">Hoogte: ${ce} m NAP</span>`,J.push(le)}else{let ce=!1;const W=["geometry","id","fid","gml_id","bbox"];for(const[Ie,tt]of Object.entries(k))!W.includes(Ie.toLowerCase())&&tt!==null&&tt!==""&&(le+=`<br/><span class="text-xs text-gray-600">${Ie}: ${tt}</span>`,ce=!0);ce&&J.push(le)}continue}if(Y==="Geomorfologie"){let le='<strong class="text-green-800">Geomorfologie</strong>',We=!1;const ce=k.landform_subgroup_description,W=k.relief_klasse,Ie=k.relief_subklasse,tt=k.genese_description,De=k.active_process;if(ce&&(le+=`<br/><span class="text-sm text-green-700">${ce}</span>`,We=!0),W){const Mt=Ie&&Ie!==W?`${W} (${Ie})`:W;le+=`<br/><span class="text-xs text-gray-600">Relief: ${Mt}</span>`,We=!0}if(tt&&(le+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${tt}</span>`,We=!0),De&&De!=="onbekend"&&(le+=`<br/><span class="text-xs text-gray-500">Actief proces: ${De}</span>`,We=!0),!We){const Mt=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[Rt,Ct]of Object.entries(k))!Mt.includes(Rt.toLowerCase())&&Ct!==null&&Ct!==""&&!Rt.includes("validfrom")&&!Rt.includes("validto")&&(le+=`<br/><span class="text-xs text-gray-600">${Rt}: ${Ct}</span>`)}J.push(le);continue}let Te=`<strong>${Y}</strong>`;if((k.first_soilname||k.soilname)&&(Te+=`<br/><span class="text-sm text-amber-700">${k.first_soilname||k.soilname}</span>`),(k.soilcode||k.first_soilcode)&&(Te+=`<br/><span class="text-xs text-gray-500">Code: ${k.soilcode||k.first_soilcode}</span>`),k.soilslope&&k.soilslope!=="Niet opgenomen"&&(Te+=`<br/><span class="text-xs text-gray-500">Helling: ${k.soilslope}</span>`),!k.first_soilname&&!k.soilname){const le=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[We,ce]of Object.entries(k))!le.includes(We)&&ce&&ce!=="Niet opgenomen"&&(Te+=`<br/><span class="text-xs text-gray-600">${We}: ${ce}</span>`)}J.push(Te)}}catch(se){console.warn("WMS GetFeatureInfo failed:",se)}}return J},he=async ae=>{const Ee=[],J=t_e(ae.coordinate),F=[];n.forEachFeatureAtPixel(ae.pixel,fe=>{F.push(fe)});for(const fe of F){const se=fe.getProperties(),{geometry:ne,...k}=se;if(k.vondst){const ce=k.vondst,W=`<strong>${ce.objectType}</strong>
            <div data-vondst-id="${ce.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${ce.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${ce.period}</span>
            ${ce.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${ce.depth} cm</span>`:""}
            ${ce.condition&&ce.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${ce.condition}</span>`:""}
            ${ce.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${ce.weight} gram</span>`:""}
            ${ce.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${ce.notes}</span>`:""}
            ${ce.photoUrl?`<br/><a href="${ce.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(ce.timestamp).toLocaleDateString("nl-NL")}</span>`;Ee.push(W),v(ce.id);continue}if(k.kwaliteitswaarde&&k.kwaliteitswaarde.includes("archeologische waarde")){const ce=Pe(k);Ee.push(ce);continue}let Te=k.name||k.naam||k.title||k.NAAM||k.NAME||k.label||k.route_name||k.road_name;Te||(k.leisure==="playground"?Te="Speeltuin":k.leisure==="park"?Te="Park":k.leisure==="swimming_area"||k.sport==="swimming"?Te="Zwemplek":k.tourism==="museum"?Te="Museum":k.amenity==="cafe"||k.amenity==="restaurant"?Te=k.amenity==="cafe"?"Caf":"Restaurant":k.historic==="castle"?Te="Kasteel":Te="Info");let le=`<strong>${Te}</strong>`;if(k.category&&(le+=`<br/><span class="text-sm text-gray-600">Categorie: ${k.category}</span>`),k.from_to&&k.from_to!==Te&&(le+=`<br/><span class="text-sm text-gray-600">${k.from_to}</span>`),k.route&&k.route!==Te&&(le+=`<br/><span class="text-sm text-gray-600">${k.route}</span>`),k.TOPONIEM&&(le+=`<br/><span class="text-sm font-semibold text-gray-800">${k.TOPONIEM}</span>`,k.PLAATS&&(le+=`<br/><span class="text-xs text-gray-500">${k.PLAATS}</span>`)),(k.AARD_VINDP||k.Aard_vindp)&&(le+=`<br/><span class="text-sm text-gray-700">Aard: ${k.AARD_VINDP||k.Aard_vindp}</span>`),k.BEGIN_PER&&k.EIND_PER&&(le+=`<br/><span class="text-sm text-purple-700">Periode: ${k.BEGIN_PER} - ${k.EIND_PER}</span>`),(k.AARD_OPM||k.Aard_opmer)&&(le+=`<br/><span class="text-xs text-gray-600 italic">${k.AARD_OPM||k.Aard_opmer}</span>`),k.Gemeente&&(le+=`<br/><span class="text-sm text-gray-600">Gemeente: ${k.Gemeente}</span>`),k.Bron&&(le+=`<br/><span class="text-xs text-gray-500">Bron: ${k.Bron}</span>`),k.Bron_besch&&(le+=`<br/><span class="text-xs text-gray-500">${k.Bron_besch}</span>`),k.Dat_st_z&&k.Dat_ei_z&&(le+=`<br/><span class="text-sm text-purple-700">Datering: ${k.Dat_st_z} - ${k.Dat_ei_z}</span>`),k.Begin&&k.Einde&&(le+=`<br/><span class="text-sm text-purple-700">Periode: ${k.Begin} - ${k.Einde}</span>`),k.Uiterwaard&&(le+=`<br/><span class="text-sm font-semibold">${k.Uiterwaard}</span>`),k.rivier&&(le+=`<br/><span class="text-sm text-blue-600">Rivier: ${k.rivier}</span>`),k.Beschrijvi&&(le+=`<br/><span class="text-sm text-gray-700">${k.Beschrijvi}</span>`),k.leisure&&k.name){const ce=k.leisure==="playground"?"Speeltuin":k.leisure==="park"?"Park":k.leisure==="swimming_area"?"Zwemplek":null;ce&&(le+=`<br/><span class="text-xs text-green-600">${ce}</span>`)}if((k.tourism==="museum"||k.museum)&&k.name&&(le+='<br/><span class="text-xs text-purple-600">Museum</span>'),(k.leisure==="swimming_area"||k.sport==="swimming")&&k.name&&(le+='<br/><span class="text-xs text-cyan-600">Zwemplek</span>'),k.osm_id&&k.address!==void 0&&(le+='<br/><span class="text-xs text-lime-600">Kringloopwinkel</span>',k.address&&(le+=`<br/><span class="text-xs text-gray-500">${k.address}</span>`),k.phone&&(le+=`<br/><span class="text-xs text-gray-600">${k.phone}</span>`)),(k.historic==="castle"||k.castle_type)&&(k.name&&(le+='<br/><span class="text-xs text-purple-600">Kasteel</span>'),k.castle_type&&(le+=`<br/><span class="text-xs text-gray-500">Type: ${k.castle_type}</span>`),k.start_date&&(le+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${k.start_date}</span>`),k.heritage&&(le+='<br/><span class="text-xs text-amber-600">Rijksmonument</span>')),k.bron==="Paleobiology Database"&&(k.taxonomie&&k.taxonomie!=="Onbekend"&&(le+=`<br/><span class="text-xs text-amber-700">${k.taxonomie}</span>`),k.periode&&k.periode!=="Onbekend"&&(le+=`<br/><span class="text-sm text-purple-700">${k.periode}</span>`),k.ouderdom&&k.ouderdom!=="Onbekend"&&(le+=`<br/><span class="text-xs text-gray-600">Ouderdom: ${k.ouderdom}</span>`),k.aantal_fossielen&&(le+=`<br/><span class="text-xs text-green-700">Aantal fossielen: ${k.aantal_fossielen}</span>`),k.formatie&&(le+=`<br/><span class="text-xs text-gray-500">Formatie: ${k.formatie}</span>`),k.lid&&(le+=`<br/><span class="text-xs text-gray-500">Lid: ${k.lid}</span>`),k.gesteente&&(le+=`<br/><span class="text-xs text-gray-500">Gesteente: ${k.gesteente}</span>`),k.milieu&&(le+=`<br/><span class="text-xs text-blue-600">Milieu: ${k.milieu}</span>`),k.vindplaats&&(le+=`<br/><span class="text-xs text-gray-500 italic">${k.vindplaats}</span>`)),(k.inventarisnummer||k.locatie_naam)&&(k.locatie_naam&&(le+=`<br/><span class="text-sm font-semibold">${k.locatie_naam}</span>`),k.inventarisnummer&&(le+=`<br/><span class="text-xs text-gray-500">CAI: ${k.inventarisnummer}</span>`),k.datering_tekst&&(le+=`<br/><span class="text-sm text-purple-700">${k.datering_tekst}</span>`)),(k.veensoort||k.dikte)&&(k.veensoort&&(le+=`<br/><span class="text-sm text-amber-700">${k.veensoort}</span>`),k.dikte&&(le+=`<br/><span class="text-xs text-gray-600">Dikte: ${k.dikte}</span>`)),k.nature&&k.debut){le+=`<br/><span class="text-sm text-purple-700">${k.nature}</span>`;const ce=k.debut===k.fin?k.debut:`${k.debut} - ${k.fin}`;ce&&(le+=`<br/><span class="text-sm text-gray-700">Periode: ${ce}</span>`),k.structure&&(le+=`<br/><span class="text-xs text-gray-600">${k.structure}</span>`),k.commune&&(le+=`<br/><span class="text-xs text-gray-500">${k.commune}</span>`),k.decouvert&&(le+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${k.decouvert}</span>`),k.numero&&(le+=`<br/><span class="text-xs text-gray-400">${k.numero}</span>`)}if((k.NATURE_OPE||k.CODE_OPERA)&&(k.TITRE&&(le+=`<br/><span class="text-sm font-semibold">${k.TITRE}</span>`),k.NATURE_OPE&&(le+=`<br/><span class="text-sm text-amber-700">${k.NATURE_OPE}</span>`),k.AUTEUR&&(le+=`<br/><span class="text-xs text-gray-600">Auteur: ${k.AUTEUR}</span>`),k.DATE&&(le+=`<br/><span class="text-xs text-gray-500">Datum: ${k.DATE}</span>`),k.COMMUNE&&(le+=`<br/><span class="text-xs text-gray-500">${k.COMMUNE}</span>`)),k.type_protection&&(k.n_site||k.t_site)){const ce=k.type_protection==="Classe"?"text-red-700":"text-amber-700";le+=`<br/><span class="text-sm ${ce}">${k.type_protection}</span>`,k.n_site&&(le+=`<br/><span class="text-sm font-semibold">${k.n_site}</span>`),k.t_site&&(le+=`<br/><span class="text-xs text-gray-600">${k.t_site}</span>`),k.c_site&&(le+=`<br/><span class="text-xs text-gray-500">Code: ${k.c_site}</span>`),k.d_creation&&(le+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${k.d_creation}</span>`)}if(k.type_protection&&k.cod_diren){const ce=k.type_protection==="Classe"?"text-red-700":"text-amber-700";if(le+=`<br/><span class="text-sm ${ce}">${k.type_protection}</span>`,k.proced&&(le+=`<br/><span class="text-xs text-gray-600">${k.proced}</span>`),k.d_proced&&(le+=`<br/><span class="text-xs text-gray-500">Date: ${k.d_proced}</span>`),k.comment){const W=String(k.comment).slice(0,150);le+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(k.comment).length>150?"...":""}</span>`}}if(k.type_protection&&k.nomsite){const ce=k.type_protection==="Classe"?"text-red-700":"text-amber-700";if(le+=`<br/><span class="text-sm ${ce}">${k.type_protection}</span>`,k.caractere&&(le+=`<br/><span class="text-xs text-gray-600">${k.caractere}</span>`),k.datedecis&&(le+=`<br/><span class="text-xs text-gray-500">Date: ${k.datedecis}</span>`),k.descriptio){const W=String(k.descriptio).slice(0,150);le+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(k.descriptio).length>150?"...":""}</span>`}}if(k.secteur&&k.style){if(le+=`<br/><span class="text-sm text-gray-700">${k.secteur}</span>`,k["sous-secteur"]&&(le+=`<br/><span class="text-xs text-gray-600">${k["sous-secteur"]}</span>`),k.description){const ce=String(k.description).slice(0,150);le+=`<br/><span class="text-xs text-gray-600 italic">${ce}${String(k.description).length>150?"...":""}</span>`}k.url&&(le+=`<br/><a href="${k.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(k.nature_operation||k.synthese){k.nature_operation&&(le+=`<br/><span class="text-sm text-red-700">${k.nature_operation}</span>`),k.responsable_operation&&(le+=`<br/><span class="text-xs text-gray-600">Responsable: ${k.responsable_operation}</span>`),k.date_operation&&(le+=`<br/><span class="text-xs text-gray-500">Datum: ${k.date_operation}</span>`);const ce=[];if(k.prehistoire==="Oui"&&ce.push("Prehistorie"),k.protohistoire==="Oui"&&ce.push("Protohistorie"),k.antiquite==="Oui"&&ce.push("Romeins"),k.moyen_age==="Oui"&&ce.push("Middeleeuwen"),k.temps_modernes==="Oui"&&ce.push("Moderne tijd"),ce.length>0&&(le+=`<br/><span class="text-sm text-purple-700">${ce.join(", ")}</span>`),k.adresse&&(le+=`<br/><span class="text-xs text-gray-500">${k.adresse}</span>`),k.synthese){const W=String(k.synthese).slice(0,200);le+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(k.synthese).length>200?"...":""}</span>`}}if(k.operator&&(le+=`<br/><span class="text-sm text-gray-600">${k.operator}</span>`),k.opening_hours&&(le+=`<br/><span class="text-xs text-green-600">Open: ${k.opening_hours}</span>`),k.website&&(le+=`<br/><a href="${k.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`),k.addr_street){const ce=[k.addr_street,k.addr_housenumber,k.addr_postcode].filter(Boolean).join(" ");le+=`<br/><span class="text-xs text-gray-500">${ce}</span>`}const We=k.description||k.omschrijving||k.descr||k.info;We&&We!==Te&&(le+=`<br/><span class="text-sm text-gray-600">${We}</span>`),Ee.push(le)}const re=n.getView().getResolution()||1,te=await Me(ae.coordinate,re);Ee.push(...te);const Y=await J;if(Ee.length===0&&Y!==null){const fe=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${Y.toFixed(2)} m NAP</span>
          </div>`;Ee.push(fe)}Ee.length>0&&Y!==null&&(Ee[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${Y.toFixed(2)} m NAP</span>
        </div>`),Ee.length>0&&(r(Ee),s(0),console.log(` KLIK OPGESLAGEN: [${ae.coordinate[0].toFixed(0)}, ${ae.coordinate[1].toFixed(0)}]`),u(ae.coordinate),d(!1),o(!0))};return n.on("click",he),()=>{n.un("click",he)}},[n]);const Ae=()=>{o(!1),n&&f&&(mS(n),d(!1))},be=(Pe,Me)=>{Me.offset.y>100&&Ae()};return T.jsx(Ma,{children:a&&T.jsxs(T.Fragment,{children:[T.jsx(nn.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Ae}),T.jsxs(nn.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:be,children:[T.jsx("div",{className:"flex justify-center pt-2 pb-1",children:T.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),T.jsxs("div",{className:"flex items-center gap-2 px-3 pb-2 border-b border-gray-100",children:[O&&T.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[T.jsx("button",{onClick:D,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Vorige laag",children:T.jsx(xre,{size:18})}),T.jsxs("span",{className:"text-xs text-gray-500 font-medium min-w-[32px] text-center",children:[i+1,"/",t.length]}),T.jsx("button",{onClick:B,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Volgende laag",children:T.jsx(mF,{size:18})})]}),T.jsx("span",{className:"flex-1 font-semibold text-gray-800 truncate text-sm",children:z||"Info"}),T.jsx("button",{onClick:Ae,className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0","aria-label":"Sluiten",children:T.jsx(Wc,{size:18})})]}),T.jsx("div",{className:"px-4 py-3 max-h-[45vh] overflow-y-auto text-sm",style:{fontSize:`${E}%`},dangerouslySetInnerHTML:{__html:M}}),T.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2",children:[T.jsx(Aie,{size:14,className:"text-gray-400 flex-shrink-0"}),T.jsx("input",{type:"range",min:"80",max:"150",value:E,onChange:Pe=>S(parseInt(Pe.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),T.jsxs("span",{className:"text-xs text-gray-400 w-8 text-right",children:[E,"%"]})]}),b&&x&&T.jsx("div",{className:"px-4 pb-4",children:T.jsxs("button",{onClick:()=>{e(x),o(!1),v(null)},className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[T.jsx(wF,{size:16}),T.jsx("span",{children:"Vondst verwijderen"})]})}),P&&l&&T.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:f?T.jsxs("button",{onClick:V,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-sm text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[T.jsx(sS,{size:16}),T.jsx("span",{children:"Hoogtekaart verbergen"})]}):T.jsx("button",{onClick:U,disabled:g,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-sm text-white rounded-lg transition-colors border-0 outline-none ${g?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:g?T.jsxs(T.Fragment,{children:[T.jsx(_F,{size:16,className:"animate-spin"}),T.jsx("span",{children:"Laden..."})]}):T.jsxs(T.Fragment,{children:[T.jsx(sS,{size:16}),T.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}const s_e="https://router.project-osrm.org/route/v1/driving";function a_e(n,e){const t={depart:"Start de route",arrive:"U bent aangekomen","turn-left":"Sla linksaf","turn-right":"Sla rechtsaf","turn-slight-left":"Houd links aan","turn-slight-right":"Houd rechts aan","turn-sharp-left":"Sla scherp linksaf","turn-sharp-right":"Sla scherp rechtsaf",uturn:"Keer om",straight:"Ga rechtdoor",merge:"Voeg in","on-ramp":"Neem de oprit","off-ramp":"Neem de afrit","fork-left":"Houd links aan bij de splitsing","fork-right":"Houd rechts aan bij de splitsing","end-of-road-left":"Sla linksaf aan het einde van de weg","end-of-road-right":"Sla rechtsaf aan het einde van de weg",roundabout:"Neem de rotonde",rotary:"Neem de rotonde",continue:"Blijf de weg volgen",notification:"Let op"},r=e?`${n}-${e}`:n;return t[r]||t[n]||"Volg de route"}function DO(n,e){const r=(e.lat-n.lat)*Math.PI/180,i=(e.lng-n.lng)*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}const ar=xo()(Ih((n,e)=>({isNavigating:!1,destination:null,destinationName:null,routeCoordinates:null,distance:null,duration:null,loading:!1,error:null,steps:[],currentStepIndex:0,voiceEnabled:!0,lastSpokenStep:-1,lastSpokenTime:0,lastSpokenDistance:-1,startNavigation:async(t,r,i)=>{n(s=>{s.loading=!0,s.error=null});try{const s=`${s_e}/${i.lng},${i.lat};${t.lng},${t.lat}?overview=full&geometries=geojson&steps=true`,a=await fetch(s);if(!a.ok)throw new Error("Route berekening mislukt");const o=await a.json();if(o.code==="Ok"&&o.routes&&o.routes.length>0){const l=o.routes[0],u=l.geometry.coordinates.map(d=>({lng:d[0],lat:d[1]})),f=[];if(l.legs&&l.legs[0]&&l.legs[0].steps)for(const d of l.legs[0].steps){const g=d.maneuver?.type||"continue",p=d.maneuver?.modifier;f.push({instruction:a_e(g,p),maneuver:p?`${g}-${p}`:g,distance:d.distance||0,duration:d.duration||0,location:{lng:d.maneuver?.location?.[0]||i.lng,lat:d.maneuver?.location?.[1]||i.lat}})}if(n(d=>{d.isNavigating=!0,d.destination=t,d.destinationName=r,d.routeCoordinates=u,d.distance=l.distance,d.duration=l.duration,d.steps=f,d.currentStepIndex=0,d.lastSpokenStep=-1,d.loading=!1}),f.length>0){const d=f[0],g=d.distance>1e3?`${(d.distance/1e3).toFixed(1)} kilometer`:`${Math.round(d.distance)} meter`;e().speakInstruction(`${d.instruction}. Over ${g}.`)}console.log(` Navigation started to ${r}`),console.log(` Distance: ${(l.distance/1e3).toFixed(1)} km`),console.log(` Duration: ${Math.round(l.duration/60)} min`),console.log(` Steps: ${f.length}`)}else throw new Error(o.message||"Geen route gevonden")}catch(s){console.error("Navigation error:",s),n(a=>{a.loading=!1,a.error=s.message||"Navigatie fout"})}},stopNavigation:()=>{"speechSynthesis"in window&&window.speechSynthesis.cancel(),n(t=>{t.isNavigating=!1,t.destination=null,t.destinationName=null,t.routeCoordinates=null,t.distance=null,t.duration=null,t.error=null,t.steps=[],t.currentStepIndex=0,t.lastSpokenStep=-1,t.lastSpokenTime=0,t.lastSpokenDistance=-1}),console.log(" Navigation stopped")},clearError:()=>{n(t=>{t.error=null})},updateCurrentStep:t=>{const{steps:r,currentStepIndex:i,lastSpokenStep:s,lastSpokenTime:a,lastSpokenDistance:o,voiceEnabled:l}=e();if(r.length===0)return;const u=Date.now(),f=5e3;let d=i;for(let g=i;g<r.length;g++){const p=r[g].location;DO(t,p)<30&&(d=Math.min(g+1,r.length-1))}if(d!==i&&(n(g=>{g.currentStepIndex=d}),l&&d!==s&&d<r.length&&u-a>f)){const g=r[d],p=g.distance>1e3?`${(g.distance/1e3).toFixed(1)} kilometer`:`${Math.round(g.distance)} meter`;e().speakInstruction(`${g.instruction}. Over ${p}.`),n(x=>{x.lastSpokenStep=d,x.lastSpokenTime=u,x.lastSpokenDistance=-1})}if(l&&i<r.length){const g=r[i],p=DO(t,g.location);if(u-a<f)return;const x=[200,100,50];for(const v of x)if(p<=v&&p>v-30&&(o===-1||Math.abs(o-v)>30)&&g.maneuver!=="depart"&&g.maneuver!=="arrive"){e().speakInstruction(`Over ${v} meter, ${g.instruction.toLowerCase()}.`),n(E=>{E.lastSpokenTime=u,E.lastSpokenDistance=v});break}}},setVoiceEnabled:t=>{n(r=>{r.voiceEnabled=t}),!t&&"speechSynthesis"in window&&window.speechSynthesis.cancel()},speakInstruction:t=>{if(e().voiceEnabled&&"speechSynthesis"in window){window.speechSynthesis.cancel();const r=new SpeechSynthesisUtterance(t);r.lang="nl-NL",r.rate=1,r.pitch=1,r.volume=1;const s=window.speechSynthesis.getVoices().find(a=>a.lang.startsWith("nl"));s&&(r.voice=s),window.speechSynthesis.speak(r),console.log(` Speaking: ${t}`)}}})));function o_e(){const n=ti(S=>S.map),e=Mn(S=>S.position),t=ar(S=>S.startNavigation),r=ar(S=>S.isNavigating),i=Ea(S=>S.openVondstForm),[s,a]=ve.useState(null),[o,l]=ve.useState(!1),[u,f]=ve.useState(!1),d=ve.useRef(null),g=ve.useRef(null);ve.useEffect(()=>{if(!n){console.log(" LongPressMenu: map not ready");return}const S=n.getViewport();if(!S){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",S);const C=600,O=15,N=U=>{if(console.log(" Touch start, touches:",U.touches.length),U.touches.length!==1)return;const V=U.touches[0];g.current={x:V.clientX,y:V.clientY},console.log(" Starting long press timer at:",g.current),d.current&&clearTimeout(d.current),d.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",g.current),!g.current)return;const Ae=window.__olMap;if(!Ae){console.log(" Map not available (global)");return}const be=S.getBoundingClientRect(),Pe=[g.current.x-be.left,g.current.y-be.top],Me=Ae.getCoordinateFromPixel(Pe);if(Me){const he=on(Me);U.preventDefault(),a({pixel:[g.current.x,g.current.y],coordinate:he}),l(!0),f(!1),setTimeout(()=>f(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",he)}},C)},z=U=>{if(!d.current||!g.current)return;const V=U.touches[0],Ae=V.clientX-g.current.x,be=V.clientY-g.current.y,Pe=Math.sqrt(Ae*Ae+be*be);Pe>O&&(console.log(" Touch moved too much, cancelling. Distance:",Pe),clearTimeout(d.current),d.current=null)},M=()=>{console.log(" Touch end, timer active:",!!d.current),d.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(d.current),d.current=null),g.current=null},P=U=>{o&&U.preventDefault()},b=U=>{U.button===0&&(console.log(" Mouse down"),g.current={x:U.clientX,y:U.clientY},d.current&&clearTimeout(d.current),d.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!g.current)return;const V=window.__olMap;if(console.log(" __olMap:",V),console.log(" __olMap constructor:",V?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof V?.getCoordinateAtPixel),!V){console.log(" Map not available (global)");return}const Ae=S.getBoundingClientRect(),be=[g.current.x-Ae.left,g.current.y-Ae.top];console.log(" Pixel:",be);const Pe=V.getCoordinateFromPixel(be);if(console.log(" Coordinate:",Pe),Pe){const Me=on(Pe);a({pixel:[g.current.x,g.current.y],coordinate:Me}),l(!0),f(!1),setTimeout(()=>f(!0),300),console.log(" Long press (mouse) detected at:",Me)}},C))},D=U=>{if(!d.current||!g.current)return;const V=U.clientX-g.current.x,Ae=U.clientY-g.current.y;Math.sqrt(V*V+Ae*Ae)>O&&(console.log(" Mouse moved, cancelling"),clearTimeout(d.current),d.current=null)},B=()=>{console.log(" Mouse up"),d.current&&(clearTimeout(d.current),d.current=null),g.current=null};return S.addEventListener("touchstart",N,{passive:!1}),S.addEventListener("touchmove",z,{passive:!0}),S.addEventListener("touchend",M),S.addEventListener("touchcancel",M),S.addEventListener("contextmenu",P),S.addEventListener("mousedown",b),S.addEventListener("mousemove",D),S.addEventListener("mouseup",B),S.addEventListener("mouseleave",B),()=>{S.removeEventListener("touchstart",N),S.removeEventListener("touchmove",z),S.removeEventListener("touchend",M),S.removeEventListener("touchcancel",M),S.removeEventListener("contextmenu",P),S.removeEventListener("mousedown",b),S.removeEventListener("mousemove",D),S.removeEventListener("mouseup",B),S.removeEventListener("mouseleave",B),d.current&&clearTimeout(d.current)}},[n,o]);const p=()=>{u&&(l(!1),a(null),f(!1))},x=async()=>{if(!s||!e)return;const[S,C]=s.coordinate,O=`${C.toFixed(4)}, ${S.toFixed(4)}`;await t({lng:S,lat:C},O,{lng:e.lng,lat:e.lat}),l(!1),a(null),f(!1)},v=()=>{l(!1),a(null),f(!1)},E=()=>{if(!s)return;const[S,C]=s.coordinate;i({lat:C,lng:S}),l(!1),a(null),f(!1)},R=S=>{const[C,O]=S;return`${O.toFixed(5)}N, ${C.toFixed(5)}E`};return T.jsx(Ma,{children:o&&s&&T.jsxs(T.Fragment,{children:[T.jsx(nn.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:p}),T.jsxs(nn.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden min-w-[200px]",style:{left:Math.min(s.pixel[0],window.innerWidth-220),top:Math.min(s.pixel[1],window.innerHeight-180)},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[T.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:T.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[T.jsx(dh,{size:16}),T.jsx("span",{className:"text-xs font-mono",children:R(s.coordinate)})]})}),T.jsxs("div",{className:"py-1",children:[T.jsxs("button",{onClick:E,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-orange-50 text-gray-700",children:[T.jsx(KA,{size:20,className:"text-orange-500"}),T.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),T.jsx("div",{className:"border-t border-gray-100 my-1"}),T.jsxs("button",{onClick:x,disabled:!e||r,className:`w-full px-4 py-3 flex items-center gap-3 transition-colors ${e&&!r?"hover:bg-blue-50 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[T.jsx(Gd,{size:20,className:e&&!r?"text-blue-500":"text-gray-300"}),T.jsx("span",{className:"font-medium",children:"Navigeer hierheen"})]}),!e&&T.jsx("div",{className:"px-4 py-2 text-xs text-amber-600 bg-amber-50",children:"GPS positie niet beschikbaar"}),r&&T.jsx("div",{className:"px-4 py-2 text-xs text-blue-600 bg-blue-50",children:"Navigatie al actief"})]}),T.jsx("div",{className:"border-t border-gray-100",children:T.jsxs("button",{onClick:v,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-gray-50 transition-colors",children:[T.jsx(Wc,{size:18}),T.jsx("span",{children:"Annuleren"})]})})]})]})})}function l_e(){return T.jsx("div",{className:"fixed bottom-2 left-[60px] z-[800] h-6 flex items-center px-1.5 bg-white/70 backdrop-blur-sm rounded shadow-sm text-[10px] font-mono text-gray-500",children:"v2.7.2"})}const c_e={Compass:Cre,TreePalm:Sie,Mountain:sS,Waves:kie,Search:xF,Target:Eie,Layers:km,Grid:$re},u_e={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},h_e={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},f_e=["Labels Overlay","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","Religieus Erfgoed","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","Veengebieden","AHN 0.5m","Geomorfologie","Bodemkaart","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur","World Hillshade","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Gewaspercelen","Kadastrale Grenzen"],d_e=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function g_e(){const n=ei(f=>f.setLayerVisibility),e=Mn(f=>f.stopTracking),{presetsPanelOpen:t,togglePresetsPanel:r,toggleSettingsPanel:i,closeAllPanels:s}=Ea(),{presets:a,applyPreset:o}=F6(),l=()=>{s(),f_e.forEach(f=>n(f,!1)),d_e.forEach(f=>{n(f,f==="CartoDB (licht)")}),e(),console.log(" Reset: CartoDB (licht), alle lagen uit, GPS uit")},u=f=>{o(f),s()};return T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:i,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Instellingen",children:T.jsx(EF,{size:22,className:"text-gray-600"})}),T.jsx("button",{onClick:l,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Reset - CartoDB, alle lagen uit, GPS uit",children:T.jsx(aS,{size:22,className:"text-gray-600"})}),T.jsx("button",{onClick:r,className:"fixed bottom-[112px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Presets",children:t?T.jsx(pF,{size:22,className:"text-blue-600"}):T.jsx(km,{size:22,className:"text-blue-600"})}),T.jsx(Ma,{children:t&&T.jsxs(T.Fragment,{children:[T.jsx(nn.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r}),T.jsxs(nn.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:"fixed bottom-[112px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden min-w-[140px] backdrop-blur-sm z-[801]",children:[T.jsx("div",{className:"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs font-medium",children:"Presets"}),T.jsx("div",{className:"p-2",children:a.map(f=>{const d=c_e[f.icon]||km,g=u_e[f.icon]||"text-blue-600",p=h_e[f.icon]||"hover:bg-blue-50";return T.jsxs("button",{onClick:()=>u(f.id),className:`w-full flex items-center gap-2 px-2 py-1.5 ${p} rounded text-left transition-colors border-0 outline-none bg-transparent`,children:[T.jsx(d,{size:14,className:g}),T.jsx("span",{className:"text-xs text-gray-700",children:f.name}),!f.isBuiltIn&&T.jsx("span",{className:"ml-auto text-[10px] text-gray-400",children:"custom"})]},f.id)})})]})]})})]})}function m_e(){const{infoPanelOpen:n,toggleInfoPanel:e}=Ea();return T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:e,className:"fixed top-3 right-2.5 z-[800] w-8 h-8 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-lg shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Info & Attributies",children:T.jsx(Hre,{size:16,className:"text-gray-600"})}),T.jsx(Ma,{children:n&&T.jsxs(T.Fragment,{children:[T.jsx(nn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),T.jsxs(nn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[T.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[T.jsx("span",{className:"font-medium",children:"Info & Attributies"}),T.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors",children:T.jsx(Wc,{size:18})})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[T.jsxs("section",{children:[T.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),T.jsx("p",{className:"text-gray-600",children:"Detectorapp NL is een kaartapplicatie voor metal detecting en archeologische verkenning in Nederland."})]}),T.jsxs("section",{children:[T.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),T.jsxs("ul",{className:"space-y-2 text-gray-600",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",T.jsx("br",{}),T.jsx("span",{className:"text-xs",children:"AMK, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed"})]}),T.jsxs("li",{children:[T.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",T.jsx("br",{}),T.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN, IKAW, Bodemkaart, Geomorfologie"})]}),T.jsxs("li",{children:[T.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",T.jsx("br",{}),T.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Parken, etc."})]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Itiner-E"})," (CC BY 4.0)",T.jsx("br",{}),T.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),T.jsxs("li",{children:[T.jsx("strong",{children:"CARTO"})," (CC BY 3.0)",T.jsx("br",{}),T.jsx("span",{className:"text-xs",children:"CartoDB basiskaart"})]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Map5.nl / Kadaster"}),T.jsx("br",{}),T.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Friesland Geoportal"}),T.jsx("br",{}),T.jsx("span",{className:"text-xs",children:"FAMKE Steentijd, Terpen"})]}),T.jsxs("li",{children:[T.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),T.jsx("br",{}),T.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data"})]})]})]}),T.jsxs("section",{children:[T.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy"}),T.jsxs("div",{className:"text-gray-600 space-y-2",children:[T.jsxs("p",{children:[T.jsx("strong",{children:"Locatiegegevens:"})," Deze app gebruikt uw GPS-locatie alleen voor navigatie op de kaart. Locatiegegevens worden niet opgeslagen of gedeeld met derden."]}),T.jsxs("p",{children:[T.jsx("strong",{children:"Geen tracking:"})," We verzamelen geen persoonlijke gegevens, analytics of gebruiksstatistieken."]}),T.jsxs("p",{children:[T.jsx("strong",{children:"Lokale opslag:"})," Alle kaartdata wordt lokaal in de app opgeslagen. Er worden geen gegevens naar externe servers gestuurd."]})]})]}),T.jsxs("section",{children:[T.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Contact"}),T.jsx("p",{className:"text-gray-600",children:"Vragen of feedback? Neem contact op via de ontwikkelaar."})]}),T.jsx("section",{className:"pt-2 border-t border-gray-200",children:T.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Detectorapp NL v2.6.3"})})]})]})]})})]})}const p_e=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN4 Helling NL",color:"blue",default:.6},{name:"AHN 0.5m",color:"blue",default:.7},{name:"World Hillshade",color:"blue",default:.7},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"AMK Monumenten",color:"purple",default:.8}],__e={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function y_e(){const[n,e]=ve.useState(!1),[t,r]=ve.useState(!1),i=ei(f=>f.visible),s=ei(f=>f.opacity),a=ei(f=>f.setLayerOpacity),o=p_e.filter(f=>i[f.name]);if(o.length===0)return null;const l=t?o:o.slice(0,3),u=o.length>3;return T.jsxs("div",{className:"fixed bottom-[112px] right-2 z-[900]",children:[T.jsxs(nn.button,{onClick:()=>e(!n),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:n?"Sluit opacity sliders":"Open opacity sliders",children:[T.jsx(_ie,{size:22,strokeWidth:2,className:"text-gray-500"}),o.length>0&&T.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:o.length})]}),T.jsx(Ma,{children:n&&T.jsxs(nn.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-lg shadow-lg p-3 min-w-[220px] max-h-[60vh] overflow-y-auto",children:[T.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide",children:"Transparantie"}),T.jsx("div",{className:"space-y-3",children:l.map(f=>{const d=s[f.name]??f.default;return T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:f.name,children:f.name}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("input",{type:"range",min:"0",max:"100",value:d*100,onChange:g=>a(f.name,parseInt(g.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${__e[f.color]}`}),T.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(d*100),"%"]})]})]},f.name)})}),u&&T.jsx("button",{onClick:()=>r(!t),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:t?T.jsxs(T.Fragment,{children:[T.jsx(pF,{size:14}),"Minder tonen"]}):T.jsxs(T.Fragment,{children:[T.jsx(yre,{size:14}),o.length-3," meer..."]})})]})})]})}function v_e(){const n=ti(C=>C.map),e=Mn(C=>C.position),t=ar(C=>C.startNavigation);ar(C=>C.isNavigating);const r=ar(C=>C.loading),[i,s]=ve.useState(""),[a,o]=ve.useState([]),[l,u]=ve.useState(!1),[f,d]=ve.useState(!1),g=ve.useRef(null),p=ve.useRef();ve.useEffect(()=>{if(p.current&&clearTimeout(p.current),i.length<2){o([]);return}return p.current=window.setTimeout(async()=>{d(!0);try{const O=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(i)}&rows=7`)).json();O.response?.docs&&o(O.response.docs)}catch(C){console.error("Search error:",C),o([])}finally{d(!1)}},300),()=>{p.current&&clearTimeout(p.current)}},[i]);const x=async C=>{try{const N=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(C)}`)).json();if(N.response?.docs?.[0]?.centroide_ll){const M=N.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(M)return{lng:parseFloat(M[1]),lat:parseFloat(M[2])}}}catch(O){console.error("Lookup error:",O)}return null},v=async C=>{if(!n)return;const O=await x(C.id);O&&n.getView().animate({center:Sc([O.lng,O.lat]),zoom:16,duration:1e3}),s(""),o([]),u(!1)},E=async(C,O)=>{if(O.stopPropagation(),!e){alert("GPS positie niet beschikbaar. Zet GPS aan.");return}const N=await x(C.id);N&&await t(N,C.weergavenaam,{lng:e.lng,lat:e.lat}),s(""),o([]),u(!1)},R=()=>{s(""),o([]),g.current?.focus()},S=C=>{switch(C){case"adres":return"";case"weg":return"";case"woonplaats":return"";case"gemeente":return"";case"provincie":return"";case"postcode":return"";default:return""}};return T.jsxs("div",{className:"search-box",children:[T.jsxs("div",{className:"search-input-wrapper",children:[T.jsx(xF,{size:18,className:"search-icon"}),T.jsx("input",{ref:g,type:"text",value:i,onChange:C=>{s(C.target.value),u(!0)},onFocus:()=>u(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),i&&T.jsx("button",{onClick:R,className:"search-clear",children:T.jsx(Wc,{size:16})})]}),l&&a.length>0&&T.jsx("ul",{className:"search-results",children:a.map(C=>T.jsxs("li",{className:"search-result-item",children:[T.jsxs("div",{className:"search-result-content",onClick:()=>v(C),children:[T.jsx("span",{className:"search-result-icon",children:S(C.type)}),T.jsx("span",{className:"search-result-text",children:C.weergavenaam})]}),T.jsx("button",{className:"search-navigate-btn",onClick:O=>E(C,O),disabled:r||!e,title:e?"Navigeer hierheen":"GPS niet actief",children:T.jsx(Gd,{size:16})})]},C.id))}),l&&f&&T.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function x_e(){const n=ti(r=>r.map),e=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},t=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return T.jsxs("div",{className:"fixed top-2.5 left-2.5 z-[800] flex flex-col gap-1",children:[T.jsx(nn.button,{className:"w-8 h-8 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-lg shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:T.jsx(KA,{size:16,className:"text-gray-600"})}),T.jsx(nn.button,{className:"w-8 h-8 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-lg shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:T.jsx(aie,{size:16,className:"text-gray-600"})})]})}const E_e="detector2024",xS="detectorapp-auth";function w_e({children:n}){const[e,t]=ve.useState(!1),[r,i]=ve.useState(""),[s,a]=ve.useState(!1),[o,l]=ve.useState(""),[u,f]=ve.useState(!0);ve.useEffect(()=>{localStorage.getItem(xS)==="authenticated"&&t(!0),f(!1)},[]);const d=g=>{g.preventDefault(),l(""),r===E_e?(localStorage.setItem(xS,"authenticated"),t(!0)):(l("Onjuist wachtwoord"),i(""))};return u?T.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:T.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?T.jsx(T.Fragment,{children:n}):T.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:T.jsxs(nn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[T.jsxs("div",{className:"text-center mb-6",children:[T.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:T.jsx(eie,{size:32,className:"text-blue-600"})}),T.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),T.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),T.jsxs("form",{onSubmit:d,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:s?"text":"password",value:r,onChange:g=>i(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),T.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?T.jsx(Dre,{size:20}):T.jsx(Vre,{size:20})})]})]}),o&&T.jsx(nn.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:o}),T.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),T.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function T_e(){localStorage.removeItem(xS),window.location.reload()}function S_e({isOpen:n,onClose:e}){const t=s0(l=>l.vondsten),r={total:t.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:t.slice(-5).reverse()};let i=0,s=0;t.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const a=l=>Object.entries(l).sort((u,f)=>f[1]-u[1]),o=l=>Math.max(...Object.values(l),1);return T.jsx(Ma,{children:n&&T.jsxs(T.Fragment,{children:[T.jsx(nn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),T.jsxs(nn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[T.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(gF,{size:18}),T.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),T.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:T.jsx(Wc,{size:18})})]}),T.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:t.length===0?T.jsxs("div",{className:"text-center py-8 text-gray-500",children:[T.jsx(dh,{size:48,className:"mx-auto mb-3 opacity-30"}),T.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),T.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[T.jsx(O2,{icon:T.jsx(dh,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),T.jsx(O2,{icon:T.jsx(fie,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),T.jsx(O2,{icon:T.jsx(vF,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),T.jsx(w1,{title:"Per Type",data:a(r.byType),max:o(r.byType),color:"bg-orange-500"}),T.jsx(w1,{title:"Per Periode",data:a(r.byPeriod),max:o(r.byPeriod),color:"bg-amber-500"}),T.jsx(w1,{title:"Per Materiaal",data:a(r.byMaterial),max:o(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&T.jsx(w1,{title:"Per Conditie",data:a(r.byCondition),max:o(r.byCondition),color:"bg-green-500"}),T.jsxs("div",{children:[T.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[T.jsx(dre,{size:14}),"Recente Vondsten"]}),T.jsx("div",{className:"space-y-2",children:r.recent.map(l=>T.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[T.jsxs("div",{children:[T.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),T.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),T.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),T.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function O2({icon:n,value:e,label:t,color:r}){return T.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[T.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:n}),T.jsx("div",{className:"text-xl font-bold",children:e}),T.jsx("div",{className:"text-xs opacity-70",children:t})]})}function w1({title:n,data:e,max:t,color:r}){return e.length===0?null:T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:n}),T.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),T.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:T.jsx(nn.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/t*100}%`},transition:{duration:.5,ease:"easeOut"}})}),T.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function I_e(){const{settingsPanelOpen:n,toggleSettingsPanel:e,vondstDashboardOpen:t,toggleVondstDashboard:r}=Ea(),i=mo(),{presets:s,createPreset:a,deletePreset:o}=F6(),l=s0(x=>x.vondsten),[u,f]=ve.useState(""),[d,g]=ve.useState(!1),p=()=>{u.trim()&&(a(u.trim(),"Layers"),f(""),g(!1))};return T.jsxs(T.Fragment,{children:[T.jsx(Ma,{children:n&&T.jsxs(T.Fragment,{children:[T.jsx(nn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),T.jsxs(nn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[T.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(EF,{size:18}),T.jsx("span",{className:"font-medium",children:"Instellingen"})]}),T.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:T.jsx(Wc,{size:18})})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:[T.jsxs(rg,{title:"Kaart",icon:T.jsx(yF,{size:16}),children:[T.jsx(A_e,{label:"Standaard achtergrond",children:T.jsxs("select",{value:i.defaultBackground,onChange:x=>i.setDefaultBackground(x.target.value),className:"px-2 py-1 text-sm bg-gray-100 rounded border-0 outline-none",children:[T.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),T.jsx("option",{value:"OpenStreetMap",children:"OSM"}),T.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),T.jsx(Mf,{label:"Schaalbalk tonen",checked:i.showScaleBar,onChange:i.setShowScaleBar})]}),T.jsxs(rg,{title:"GPS",icon:T.jsx(Gd,{size:16}),children:[T.jsx(Mf,{label:"GPS aan bij start",checked:i.gpsAutoStart,onChange:i.setGpsAutoStart}),T.jsx(Mf,{label:"Kaart draait mee (heading up)",checked:i.headingUpMode,onChange:i.setHeadingUpMode}),T.jsx(Mf,{label:"Nauwkeurigheidscirkel",checked:i.showAccuracyCircle,onChange:i.setShowAccuracyCircle})]}),T.jsx(rg,{title:"Feedback",icon:T.jsx(vie,{size:16}),children:T.jsx(Mf,{label:"Trillen bij acties",checked:i.hapticFeedback,onChange:i.setHapticFeedback})}),T.jsxs(rg,{title:"Vondsten",icon:T.jsx(dh,{size:16}),children:[T.jsx(Mf,{label:"Vondsten knop tonen",checked:i.showVondstButton,onChange:i.setShowVondstButton}),T.jsx("p",{className:"text-xs text-gray-500 mt-1 py-1",children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),T.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-sm text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",children:[T.jsx(gF,{size:14}),T.jsxs("span",{children:["Dashboard (",l.length," vondsten)"]})]}),T.jsx(R_e,{})]}),T.jsx(rg,{title:"Presets",icon:T.jsx(km,{size:16}),children:T.jsxs("div",{className:"space-y-2",children:[s.map(x=>T.jsxs("div",{className:"flex items-center justify-between py-1",children:[T.jsxs("span",{className:"text-sm text-gray-600",children:[x.name,x.isBuiltIn&&T.jsx("span",{className:"ml-1 text-[10px] text-gray-400",children:"(standaard)"})]}),!x.isBuiltIn&&T.jsx("button",{onClick:()=>o(x.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:T.jsx(wF,{size:14})})]},x.id)),d?T.jsxs("div",{className:"flex gap-2 mt-2",children:[T.jsx("input",{type:"text",value:u,onChange:x=>f(x.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 text-sm bg-gray-100 rounded border-0 outline-none",onKeyDown:x=>x.key==="Enter"&&p(),autoFocus:!0}),T.jsx("button",{onClick:p,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",children:"Opslaan"}),T.jsx("button",{onClick:()=>g(!1),className:"px-2 py-1 text-xs bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",children:"Annuleren"})]}):T.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",children:[T.jsx(KA,{size:14}),T.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),T.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",children:[T.jsxs("button",{onClick:T_e,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:[T.jsx(nie,{size:16}),T.jsx("span",{children:"Uitloggen"})]}),T.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),T.jsx(S_e,{isOpen:t,onClose:r})]})}function rg({title:n,icon:e,children:t}){return T.jsxs("section",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[T.jsx("span",{className:"text-blue-600",children:e}),T.jsx("span",{className:"font-medium text-gray-800 text-sm",children:n})]}),T.jsx("div",{className:"space-y-2",children:t})]})}function A_e({label:n,children:e}){return T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("span",{className:"text-sm text-gray-600",children:n}),e]})}function Mf({label:n,checked:e,onChange:t}){return T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("span",{className:"text-sm text-gray-600",children:n}),T.jsx("button",{onClick:()=>t(!e),className:`w-10 h-5 rounded-full transition-colors border-0 outline-none relative ${e?"bg-blue-500":"bg-gray-300"}`,children:T.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform ${e?"translate-x-5":"translate-x-0.5"}`})})]})}function R_e(){const[n,e]=ve.useState(!1),{vondsten:t,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:a,exportAsKML:o}=s0(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:a,desc:"GPS apparaten"},{label:"KML",action:o,desc:"Google Earth"}],u=f=>{f(),e(!1)};return t.length===0?T.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-sm text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",children:[T.jsx(Rk,{size:14}),T.jsx("span",{children:"Geen vondsten om te exporteren"})]}):T.jsxs("div",{className:"relative mt-2",children:[T.jsxs("button",{onClick:()=>e(!n),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Rk,{size:14}),T.jsxs("span",{children:["Exporteer vondsten (",t.length,")"]})]}),T.jsx("span",{className:"text-xs",children:""})]}),n&&T.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((f,d)=>T.jsxs("button",{onClick:()=>u(f.action),className:"w-full px-3 py-2 text-left text-sm hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",children:[T.jsx("span",{className:"text-gray-700",children:f.label}),T.jsx("span",{className:"text-xs text-gray-400",children:f.desc})]},d))})]})}function C_e(n,e){const r=(e.lat-n.lat)*Math.PI/180,i=(e.lng-n.lng)*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function P_e(n,e){let t=1/0,r=0;for(let i=0;i<e.length;i++){const s=C_e(n,e[i]);s<t&&(t=s,r=i)}return r}function M_e(){const n=ti(o=>o.map),e=ar(o=>o.routeCoordinates),t=ar(o=>o.destination),r=ar(o=>o.isNavigating),i=Mn(o=>o.position),s=ve.useRef(null),a=ve.useRef(0);return ve.useEffect(()=>{if(!n)return;const o=new Vv;return s.current=new $v({source:o,zIndex:500}),n.addLayer(s.current),()=>{s.current&&n&&n.removeLayer(s.current)}},[n]),ve.useEffect(()=>{r||(a.current=0)},[r]),ve.useEffect(()=>{if(!s.current)return;const o=s.current.getSource();if(!o||(o.clear(),!r||!e||e.length===0))return;let l=0;if(i&&e.length>2){const g={lng:i.lng,lat:i.lat},p=P_e(g,e);p>a.current&&(a.current=p),l=a.current,l>e.length-2&&(l=e.length-2)}const f=e.slice(l).map(g=>Sc([g.lng,g.lat])),d=new qu({geometry:new Zu(f)});if(d.setStyle([new bi({stroke:new Yo({color:"white",width:8,lineCap:"round",lineJoin:"round"})}),new bi({stroke:new Yo({color:"#4285F4",width:5,lineCap:"round",lineJoin:"round"})})]),o.addFeature(d),t){const g=new qu({geometry:new Ic(Sc([t.lng,t.lat]))});g.setStyle(new bi({image:new Th({radius:12,fill:new Ca({color:"#EA4335"}),stroke:new Yo({color:"white",width:3})})})),o.addFeature(g)}if(n&&l===0){const g=o.getExtent();n.getView().fit(g,{padding:[80,80,80,80],duration:500})}},[n,r,e,t,i]),null}function b_e(n){const e={size:24,className:"text-white"};return n.includes("left")?n.includes("sharp")?T.jsx(Mre,{...e}):n.includes("slight")?T.jsx(ore,{...e}):T.jsx(rre,{...e}):n.includes("right")?n.includes("sharp")?T.jsx(kre,{...e}):n.includes("slight")?T.jsx(cre,{...e}):T.jsx(sre,{...e}):n.includes("uturn")?T.jsx(aS,{...e}):n.includes("arrive")?T.jsx(Are,{...e}):n.includes("roundabout")||n.includes("rotary")?T.jsx(aS,{...e}):T.jsx(hre,{...e})}function k_e(){const n=ar(g=>g.isNavigating),e=ar(g=>g.destinationName),t=ar(g=>g.distance),r=ar(g=>g.duration),i=ar(g=>g.steps),s=ar(g=>g.currentStepIndex),a=ar(g=>g.voiceEnabled),o=ar(g=>g.setVoiceEnabled),l=ar(g=>g.stopNavigation),u=i[s],f=g=>g?g<1e3?`${Math.round(g)} m`:`${(g/1e3).toFixed(1)} km`:"--",d=g=>{if(!g)return"--";if(g<60)return`${Math.round(g)} sec`;const p=Math.round(g/60);if(p<60)return`${p} min`;const x=Math.floor(p/60),v=p%60;return`${x}u ${v}m`};return T.jsx(Ma,{children:n&&T.jsxs(nn.div,{className:"fixed top-16 left-2 right-2 z-[1100] bg-white rounded-xl shadow-md overflow-hidden",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[u&&T.jsxs("div",{className:"bg-blue-600 px-4 py-3 flex items-center gap-3",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center flex-shrink-0",children:b_e(u.maneuver)}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsx("div",{className:"text-white font-bold text-lg truncate",children:u.instruction}),T.jsxs("div",{className:"text-blue-200 text-sm",children:["Over ",f(u.distance)]})]}),T.jsx("button",{onClick:()=>o(!a),className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 transition-colors ${a?"bg-blue-700 text-white":"bg-blue-800 text-blue-400"}`,title:a?"Geluid uit":"Geluid aan",children:a?T.jsx(Cie,{size:20}):T.jsx(Mie,{size:20})})]}),T.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0",children:T.jsx(Gd,{size:20,className:"text-gray-600"})}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[T.jsx(dh,{size:12}),T.jsx("span",{children:"Bestemming"})]}),T.jsx("div",{className:"font-medium text-gray-900 truncate text-sm",children:e||"Bestemming"})]}),T.jsxs("div",{className:"text-right flex-shrink-0",children:[T.jsx("div",{className:"text-lg font-bold text-blue-600",children:f(t)}),T.jsx("div",{className:"text-xs text-gray-500",children:d(r)})]}),T.jsx("button",{onClick:l,className:"w-10 h-10 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center flex-shrink-0 transition-colors",title:"Stop navigatie",children:T.jsx(Wc,{size:20,className:"text-white"})})]}),i.length>1&&T.jsxs("div",{className:"px-4 pb-2",children:[T.jsx("div",{className:"flex gap-1",children:i.map((g,p)=>T.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${p<s?"bg-green-500":p===s?"bg-blue-500":"bg-gray-200"}`},p))}),T.jsxs("div",{className:"text-xs text-gray-400 mt-1 text-center",children:["Stap ",s+1," van ",i.length]})]})]})})}function O_e({onClose:n,initialLocation:e}){const t=RN(ae=>ae.user),r=Mn(ae=>ae.position),i=ti(ae=>ae.map),s=_Q(ae=>ae.addVondst),a=s0(ae=>ae.addVondst),o=mo(ae=>ae.vondstenLocalOnly),[l,u]=ve.useState(""),[f,d]=ve.useState("Munt"),[g,p]=ve.useState("Brons"),[x,v]=ve.useState("Romeins (12 v.Chr.-450 n.Chr.)"),[E,R]=ve.useState(!0),[S,C]=ve.useState(!1),[O,N]=ve.useState(""),[z,M]=ve.useState(void 0),[P,b]=ve.useState(e?"map-pick":r?"gps":"map-center"),[D,B]=ve.useState(e||null),[U,V]=ve.useState(!1),Ae=()=>{if(P==="gps"&&r)return{lat:r.lat,lng:r.lng};if(P==="map-pick"&&D)return D;if(i){const ae=i.getView().getCenter();if(ae){const[Ee,J]=on(ae);return{lat:J,lng:Ee}}}return null},be=Ae();ve.useEffect(()=>{if(!U||!i)return;const ae=Ee=>{const[J,F]=on(Ee.coordinate);B({lat:F,lng:J}),b("map-pick"),V(!1)};return i.on("click",ae),()=>i.un("click",ae)},[U,i]);const Pe=()=>{V(!0)},Me=()=>{r&&(b("gps"),B(null))},he=async ae=>{ae.preventDefault();const Ee=Ae();if(!Ee){alert("Geen locatie beschikbaar");return}if(!o&&!t){alert("Log in om vondsten in de cloud op te slaan");return}C(!0);try{o?(a({location:{lat:Ee.lat,lng:Ee.lng},notes:l,objectType:f,material:g,period:x,photoUrl:O||void 0,weight:z}),alert("Vondst lokaal opgeslagen! ")):(await s({userId:t.uid,location:{lat:Ee.lat,lng:Ee.lng,accuracy:P==="gps"?5:50},timestamp:new Date().toISOString(),photos:[],notes:l,objectType:f,material:g,period:x,tags:[x.toLowerCase(),f.toLowerCase()],private:E}),alert("Vondst opgeslagen in cloud! ")),n()}catch(J){alert("Fout bij opslaan: "+J.message)}finally{C(!1)}};return U?T.jsx(nn.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:T.jsxs("div",{className:"bg-orange-500 text-white rounded-lg shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(Ak,{size:24,className:"animate-pulse"}),T.jsxs("div",{children:[T.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),T.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),T.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"Annuleren"})]})}):T.jsx(nn.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:T.jsxs(nn.div,{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[T.jsxs("div",{className:"sticky top-0 z-10 bg-blue-600 text-white px-4 py-3 flex justify-between items-center",children:[T.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),T.jsx("button",{onClick:n,className:"text-2xl",children:""})]}),T.jsxs("form",{onSubmit:he,className:"p-4 space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium mb-1",children:"Locatie"}),be&&T.jsxs("div",{className:`p-2 rounded text-sm flex items-center gap-2 ${P==="gps"?"bg-green-50 border border-green-200 text-green-800":"bg-orange-50 border border-orange-200 text-orange-800"}`,children:[P==="gps"?T.jsx(Gd,{size:16,className:"text-green-600"}):T.jsx(dh,{size:16,className:"text-orange-600"}),T.jsxs("div",{className:"flex-1",children:[T.jsxs("div",{className:"font-medium",children:[P==="gps"&&"GPS locatie",P==="map-center"&&"Kaart centrum",P==="map-pick"&&"Gekozen locatie"]}),T.jsxs("div",{className:"text-xs opacity-75",children:[be.lat.toFixed(6),", ",be.lng.toFixed(6)]})]})]}),T.jsxs("div",{className:"flex gap-2 mt-2",children:[r&&P!=="gps"&&T.jsxs("button",{type:"button",onClick:Me,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors",children:[T.jsx(Gd,{size:14}),T.jsx("span",{children:"GPS gebruiken"})]}),T.jsxs("button",{type:"button",onClick:Pe,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:[T.jsx(Ak,{size:14}),T.jsx("span",{children:"Kies op kaart"})]})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium mb-1",children:"Object type"}),T.jsxs("select",{value:f,onChange:ae=>d(ae.target.value),className:"w-full border rounded px-3 py-2",children:[T.jsx("option",{children:"Munt"}),T.jsx("option",{children:"Aardewerk"}),T.jsx("option",{children:"Gesp"}),T.jsx("option",{children:"Fibula"}),T.jsx("option",{children:"Ring"}),T.jsx("option",{children:"Speld"}),T.jsx("option",{children:"Sieraad"}),T.jsx("option",{children:"Gereedschap"}),T.jsx("option",{children:"Wapen"}),T.jsx("option",{children:"Anders"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium mb-1",children:"Materiaal"}),T.jsxs("select",{value:g,onChange:ae=>p(ae.target.value),className:"w-full border rounded px-3 py-2",children:[T.jsx("option",{children:"Brons"}),T.jsx("option",{children:"IJzer"}),T.jsx("option",{children:"Zilver"}),T.jsx("option",{children:"Goud"}),T.jsx("option",{children:"Keramiek"}),T.jsx("option",{children:"Steen"}),T.jsx("option",{children:"Glas"}),T.jsx("option",{children:"Onbekend"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium mb-1",children:"Periode"}),T.jsxs("select",{value:x,onChange:ae=>v(ae.target.value),className:"w-full border rounded px-3 py-2",children:[T.jsx("option",{children:"Romeins (12 v.Chr.-450 n.Chr.)"}),T.jsx("option",{children:"IJzertijd"}),T.jsx("option",{children:"Middeleeuws (450-1500)"}),T.jsx("option",{children:"Nieuwetijd (1500-1800)"}),T.jsx("option",{children:"Modern (1800+)"}),T.jsx("option",{children:"Onbekend"})]})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center gap-1",children:[T.jsx(vF,{size:14,className:"text-gray-500"}),"Gewicht (gram, optioneel)"]}),T.jsx("input",{type:"number",value:z??"",onChange:ae=>M(ae.target.value?parseFloat(ae.target.value):void 0),className:"w-full border rounded px-3 py-2",min:"0",step:"0.1",placeholder:"bijv. 12.5"})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center gap-1",children:[T.jsx(Xre,{size:14,className:"text-blue-500"}),"Foto link (optioneel)"]}),T.jsx("input",{type:"url",value:O,onChange:ae=>N(ae.target.value),className:"w-full border rounded px-3 py-2",placeholder:"https://photos.google.com/..."}),T.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Plak een deelbare link naar je foto (Google Photos, iCloud, Dropbox, etc.)"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notities"}),T.jsx("textarea",{value:l,onChange:ae=>u(ae.target.value),className:"w-full border rounded px-3 py-2 h-24",placeholder:"Beschrijving, omstandigheden, etc..."})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("input",{type:"checkbox",checked:E,onChange:ae=>R(ae.target.checked),id:"private"}),T.jsx("label",{htmlFor:"private",className:"text-sm",children:"Priv (alleen jij kunt deze vondst zien)"})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border rounded hover:bg-gray-50",children:"Annuleren"}),T.jsx("button",{type:"submit",disabled:S||!be||U,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:S?"Opslaan...":"Opslaan"})]})]})]})})}function L_e(){const{user:n,setUser:e,setLoading:t}=RN();return ve.useEffect(()=>{const s=RY(s2,a=>{e(a),t(!1)});return()=>s()},[e,t]),{user:n,loginAnonymous:async()=>{try{await EY(s2)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await CY(s2)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!n}}function N_e(){const{isAuthenticated:n,loginAnonymous:e}=L_e(),t=mo(u=>u.vondstenLocalOnly),r=mo(u=>u.showVondstButton),i=Ea(u=>u.vondstFormOpen),s=Ea(u=>u.vondstFormLocation),a=Ea(u=>u.openVondstForm),o=Ea(u=>u.closeVondstForm);if(!r)return null;const l=()=>{if(t){a();return}if(!n){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}a()};return T.jsxs(T.Fragment,{children:[T.jsx(nn.button,{className:"fixed bottom-2 right-[60px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:T.jsx(dh,{size:22,strokeWidth:2})}),T.jsx(Ma,{children:i&&T.jsx(O_e,{onClose:o,initialLocation:s||void 0})})]})}const FO={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},D_e={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function F_e(){const n=ti(i=>i.map),e=s0(i=>i.vondsten),t=ei(i=>i.visible["Mijn Vondsten"]),r=ve.useRef(null);return ve.useEffect(()=>{if(!n)return;const i=new Vv;return e.forEach(s=>{const a=new qu({geometry:new Ic(Sc([s.location.lng,s.location.lat])),vondst:s}),o=FO[s.objectType]||FO.Anders,l=D_e[s.objectType]||"?";a.setStyle(new bi({image:new Th({radius:12,fill:new Ca({color:o}),stroke:new Yo({color:"#ffffff",width:2})}),text:new Gv({text:l,font:"bold 10px sans-serif",fill:new Ca({color:"#ffffff"}),offsetY:1})})),i.addFeature(a)}),r.current?r.current.setSource(i):(r.current=new $v({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(t),n.addLayer(r.current)),()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null)}},[n,e]),ve.useEffect(()=>{r.current&&r.current.setVisible(t)},[t]),null}function V_e(){const n=Mn(r=>r.tracking),e=Mn(r=>r.headingSource),t=Mn(r=>r.updateHeading);ve.useEffect(()=>{if(!n||e!=="compass")return;let r=0;const i=100,s=l=>{const u=Date.now();u-r<i||(r=u,l.alpha!==null&&t(360-l.alpha,"compass"))},a=l=>{const u=Date.now();u-r<i||(r=u,l.alpha!==null&&t(360-l.alpha,"compass"))},o=l=>{const u=Date.now();u-r<i||(r=u,l.webkitCompassHeading!==void 0&&t(l.webkitCompassHeading,"compass"))};return window.addEventListener("deviceorientationabsolute",a),window.addEventListener("deviceorientation",s),window.addEventListener("deviceorientation",o),()=>{window.removeEventListener("deviceorientationabsolute",a),window.removeEventListener("deviceorientation",s),window.removeEventListener("deviceorientation",o)}},[n,e,t])}const j_e=n=>n<.5?2*n*n:-1+(4-2*n)*n;function B_e(){const n=ti(o=>o.map),e=ti(o=>o.rotationEnabled),t=ti(o=>o.setRotation),r=Mn(o=>o.smoothHeading),i=Mn(o=>o.tracking),s=mo(o=>o.headingUpMode),a=ve.useRef(null);ve.useEffect(()=>{if(!s){n&&n.getView().getRotation()!==0&&(n.getView().animate({rotation:0,duration:500}),t(0),a.current=null);return}if(!n||!i||!e||r===null){n&&!i&&(n.getView().animate({rotation:0,duration:500}),t(0),a.current=null);return}const o=-(r*Math.PI)/180,l=a.current??n.getView().getRotation();let u=o-l;for(;u>Math.PI;)u-=2*Math.PI;for(;u<-Math.PI;)u+=2*Math.PI;Math.abs(u)<.087||(n.getView().animate({rotation:o,duration:250,easing:j_e}),a.current=o,t(r))},[n,i,e,r,t,s])}function G_e(){const n=ti(f=>f.map),e=Mn(f=>f.position),t=Mn(f=>f.tracking),r=Mn(f=>f.navigationMode),i=Mn(f=>f.toggleMode),s=ar(f=>f.isNavigating),a=ar(f=>f.updateCurrentStep),o=ar(f=>f.destination),l=ve.useRef(!1),u=ve.useRef(0);return ve.useEffect(()=>{s&&!l.current?(console.log(" Navigation started - activating drive mode"),r==="free"&&i(),l.current=!0):!s&&l.current&&(console.log(" Navigation stopped - deactivating drive mode"),r==="drive"&&i(),l.current=!1)},[s,r,i]),ve.useEffect(()=>{!s||!e||a({lng:e.lng,lat:e.lat})},[s,e,a]),ve.useEffect(()=>{if(!n||!e||!s||!t)return;const f=Date.now();if(f-u.current<500)return;u.current=f;const d=Sc([e.lng,e.lat]);n.getView().animate({center:d,duration:300})},[n,e,s,t]),ve.useEffect(()=>{if(!n||!s)return;(n.getView().getZoom()||15)<14&&n.getView().animate({zoom:15,duration:500})},[n,s,e]),{isNavigating:s,destination:o}}function U_e(){const n=ti(i=>i.map),e=ei(i=>i.setLayerOpacity),t=ei(i=>i.visible),r=ve.useRef(null);ve.useEffect(()=>{if(!n)return;const i=()=>{const s=n.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const a=t["AHN 0.5m"],o=t["AHN4 Multi-Hillshade NL"];!a&&!o||(a&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),o&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return n.on("moveend",i),i(),()=>{n.un("moveend",i)}},[n,t,e])}const VO={small:"text-sm",medium:"text-base",large:"text-lg"};function z_e(){V_e(),B_e(),G_e(),U_e();const n=mo(t=>t.fontSize),e=VO[n]||VO.small;return T.jsx(w_e,{children:T.jsxs("div",{className:e,children:[T.jsx(SQ,{}),T.jsx(Die,{}),T.jsx(M_e,{}),T.jsx(F_e,{}),T.jsx(i_e,{}),T.jsx(o_e,{}),T.jsx(v_e,{}),T.jsx(k_e,{}),T.jsx(Nie,{}),T.jsx(x_e,{}),T.jsx(Vie,{}),T.jsx(jie,{}),T.jsx(y_e,{}),T.jsx(l_e,{}),T.jsx(g_e,{}),T.jsx(N_e,{}),T.jsx(m_e,{}),T.jsx(I_e,{})]})})}const $_e="2.7.2";console.log(`%c DetectorApp v${$_e}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");$V.createRoot(document.getElementById("root")).render(T.jsx(z_e,{}));export{Ca as F,qce as G,RU as I,Ic as P,bi as S,vu as T,$v as V,Lf as X,lz as a,ez as b,Yo as c,Vv as d,Gv as e,qu as f,Sc as g,fy as h,ln as p,uue as r};
//# sourceMappingURL=index-DuklHSz7.js.map
