{"version":3,"file":"archeoBretagneOL-CvTCNk69.js","sources":["../../src/layers/archeoBretagneOL.ts"],"sourcesContent":["import { Vector as VectorLayer } from 'ol/layer'\nimport { Vector as VectorSource } from 'ol/source'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Fill, Stroke, Circle as CircleStyle } from 'ol/style'\n\n// Bretagne Archaeological Sites (Carte Arch√©ologique Nationale)\n// Data from G√©oBretagne WFS - DRAC Bretagne\n// 23,683 archaeological sites from prehistory to medieval period\n\nexport async function createArcheoBretagneLayerOL() {\n  try {\n    const response = await fetch('/detectorapp-nl/data/archeo_bretagne_fr.geojson')\n\n    if (!response.ok) {\n      throw new Error(`Bretagne archeo fetch error: ${response.status}`)\n    }\n\n    const geojson = await response.json()\n    console.log(`üèõÔ∏è Archeo Bretagne: loaded ${geojson.features?.length || 0} archaeological sites`)\n\n    const source = new VectorSource({\n      features: new GeoJSON().readFeatures(geojson, {\n        dataProjection: 'EPSG:4326',\n        featureProjection: 'EPSG:3857'\n      })\n    })\n\n    const layer = new VectorLayer({\n      source: source,\n      properties: { title: 'Archeo Sites Bretagne' },\n      visible: false,\n      zIndex: 28,\n      style: new Style({\n        image: new CircleStyle({\n          radius: 5,\n          fill: new Fill({ color: '#7c3aed' }),  // Purple for archaeology\n          stroke: new Stroke({ color: 'white', width: 1 })\n        })\n      })\n    })\n\n    return layer\n  } catch (error) {\n    console.error('‚ùå Failed to load Archeo Bretagne:', error)\n    return new VectorLayer({\n      source: new VectorSource(),\n      properties: { title: 'Archeo Sites Bretagne' },\n      visible: false\n    })\n  }\n}\n\n// Popup content generator for Bretagne archaeological sites\nexport function getArcheoBretagnePopupContent(properties: Record<string, unknown>): string {\n  const nom = properties.nom || 'Onbekend'\n  const nature = properties.nature || ''\n  const debut = properties.debut || ''\n  const fin = properties.fin || ''\n  const commune = properties.commune || ''\n  const decouvert = properties.decouvert || ''\n  const structure = properties.structure || ''\n  const numero = properties.numero || ''\n\n  // Format period\n  let periode = ''\n  if (debut && fin && debut !== fin) {\n    periode = `${debut} - ${fin}`\n  } else if (debut) {\n    periode = debut as string\n  }\n\n  return `\n    <div class=\"popup-content\">\n      <h3 class=\"font-semibold text-purple-800\">${nom}</h3>\n      ${nature ? `<p class=\"text-sm\"><strong>Type:</strong> ${nature}</p>` : ''}\n      ${periode ? `<p class=\"text-sm\"><strong>Periode:</strong> ${periode}</p>` : ''}\n      ${structure ? `<p class=\"text-sm\"><strong>Structuur:</strong> ${structure}</p>` : ''}\n      ${commune ? `<p class=\"text-sm text-gray-600\">${commune}</p>` : ''}\n      ${decouvert ? `<p class=\"text-xs text-gray-500\">Ontdekt: ${decouvert}</p>` : ''}\n      ${numero ? `<p class=\"text-xs text-gray-400\">${numero}</p>` : ''}\n    </div>\n  `\n}\n"],"names":["createArcheoBretagneLayerOL","response","geojson","source","VectorSource","GeoJSON","VectorLayer","Style","CircleStyle","Fill","Stroke","error"],"mappings":"qHASA,eAAsBA,GAA8B,CAClD,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,iDAAiD,EAE9E,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,gCAAgCA,EAAS,MAAM,EAAE,EAGnE,MAAMC,EAAU,MAAMD,EAAS,KAAA,EAC/B,QAAQ,IAAI,+BAA+BC,EAAQ,UAAU,QAAU,CAAC,uBAAuB,EAE/F,MAAMC,EAAS,IAAIC,EAAa,CAC9B,SAAU,IAAIC,IAAU,aAAaH,EAAS,CAC5C,eAAgB,YAChB,kBAAmB,WAAA,CACpB,CAAA,CACF,EAgBD,OAdc,IAAII,EAAY,CAC5B,OAAAH,EACA,WAAY,CAAE,MAAO,uBAAA,EACrB,QAAS,GACT,OAAQ,GACR,MAAO,IAAII,EAAM,CACf,MAAO,IAAIC,EAAY,CACrB,OAAQ,EACR,KAAM,IAAIC,EAAK,CAAE,MAAO,UAAW,EACnC,OAAQ,IAAIC,EAAO,CAAE,MAAO,QAAS,MAAO,EAAG,CAAA,CAChD,CAAA,CACF,CAAA,CACF,CAGH,OAASC,EAAO,CACd,eAAQ,MAAM,oCAAqCA,CAAK,EACjD,IAAIL,EAAY,CACrB,OAAQ,IAAIF,EACZ,WAAY,CAAE,MAAO,uBAAA,EACrB,QAAS,EAAA,CACV,CACH,CACF"}