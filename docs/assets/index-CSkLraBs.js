const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/amkOL-hAgvtQ6c.js","assets/layerLoaderOL-B81y6FYw.js","assets/romeinsOL-C3rMgXNe.js","assets/kastelenOL-Al7e6SWj.js","assets/iconStyles-CdLq1_2l.js","assets/ruinesOL-BDlpiFXN.js","assets/hunebeddenOL-Dlswy-Ji.js","assets/uikavArcheoPuntenOL-BK820a2L.js","assets/uikavVlakkenOL-Dz4CGmqv.js","assets/uikavBufferlaagOL-BU3E1dQY.js","assets/uikavExpertOL-De-_CvsY.js","assets/uikavUiterwaardenOL-CuJOM5ER.js","assets/speeltuinenOL-BLNWqBOg.js","assets/museaOL-Bqh4m_Lh.js","assets/strandjesOL-CXg-WZ-3.js","assets/parkenOL-D29j_RXt.js","assets/kringloopwinkelsOL-Dd1Ndj8D.js","assets/fossielenOL-DJi5jCr5.js","assets/fossielUtils-ClL4kFVL.js","assets/fossielenBelgieOL-C0yUySV3.js","assets/fossielenDuitslandOL-DMNFqG33.js","assets/fossielenFrankrijkOL-DA-KGF99.js","assets/bunkersOL-D_NVCC7g.js","assets/grafheuvelsOL-B012cEeV.js","assets/slagveldenOL-C1oA26cl.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function GI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var d2={exports:{}},Pg={},f2={exports:{}},Jt={};var E4;function fB(){if(E4)return Jt;E4=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function g(ie){return ie===null||typeof ie!="object"?null:(ie=f&&ie[f]||ie["@@iterator"],typeof ie=="function"?ie:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,v={};function w(ie,V,Y){this.props=ie,this.context=V,this.refs=v,this.updater=Y||p}w.prototype.isReactComponent={},w.prototype.setState=function(ie,V){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,V,"setState")},w.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function T(){}T.prototype=w.prototype;function I(ie,V,Y){this.props=ie,this.context=V,this.refs=v,this.updater=Y||p}var A=I.prototype=new T;A.constructor=I,x(A,w.prototype),A.isPureReactComponent=!0;var N=Array.isArray,D=Object.prototype.hasOwnProperty,B={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function P(ie,V,Y){var ee,ne={},de=null,De=null;if(V!=null)for(ee in V.ref!==void 0&&(De=V.ref),V.key!==void 0&&(de=""+V.key),V)D.call(V,ee)&&!k.hasOwnProperty(ee)&&(ne[ee]=V[ee]);var Se=arguments.length-2;if(Se===1)ne.children=Y;else if(1<Se){for(var Fe=Array(Se),je=0;je<Se;je++)Fe[je]=arguments[je+2];ne.children=Fe}if(ie&&ie.defaultProps)for(ee in Se=ie.defaultProps,Se)ne[ee]===void 0&&(ne[ee]=Se[ee]);return{$$typeof:n,type:ie,key:de,ref:De,props:ne,_owner:B.current}}function M(ie,V){return{$$typeof:n,type:ie.type,key:V,ref:ie.ref,props:ie.props,_owner:ie._owner}}function j(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===n}function O(ie){var V={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(Y){return V[Y]})}var W=/\/+/g;function F(ie,V){return typeof ie=="object"&&ie!==null&&ie.key!=null?O(""+ie.key):V.toString(36)}function Te(ie,V,Y,ee,ne){var de=typeof ie;(de==="undefined"||de==="boolean")&&(ie=null);var De=!1;if(ie===null)De=!0;else switch(de){case"string":case"number":De=!0;break;case"object":switch(ie.$$typeof){case n:case e:De=!0}}if(De)return De=ie,ne=ne(De),ie=ee===""?"."+F(De,0):ee,N(ne)?(Y="",ie!=null&&(Y=ie.replace(W,"$&/")+"/"),Te(ne,V,Y,"",function(je){return je})):ne!=null&&(j(ne)&&(ne=M(ne,Y+(!ne.key||De&&De.key===ne.key?"":(""+ne.key).replace(W,"$&/")+"/")+ie)),V.push(ne)),1;if(De=0,ee=ee===""?".":ee+":",N(ie))for(var Se=0;Se<ie.length;Se++){de=ie[Se];var Fe=ee+F(de,Se);De+=Te(de,V,Y,Fe,ne)}else if(Fe=g(ie),typeof Fe=="function")for(ie=Fe.call(ie),Se=0;!(de=ie.next()).done;)de=de.value,Fe=ee+F(de,Se++),De+=Te(de,V,Y,Fe,ne);else if(de==="object")throw V=String(ie),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return De}function Me(ie,V,Y){if(ie==null)return ie;var ee=[],ne=0;return Te(ie,ee,"","",function(de){return V.call(Y,de,ne++)}),ee}function Le(ie){if(ie._status===-1){var V=ie._result;V=V(),V.then(function(Y){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=Y)},function(Y){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=Y)}),ie._status===-1&&(ie._status=0,ie._result=V)}if(ie._status===1)return ie._result.default;throw ie._result}var be={current:null},ce={transition:null},Re={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ce,ReactCurrentOwner:B};function Ie(){throw Error("act(...) is not supported in production builds of React.")}return Jt.Children={map:Me,forEach:function(ie,V,Y){Me(ie,function(){V.apply(this,arguments)},Y)},count:function(ie){var V=0;return Me(ie,function(){V++}),V},toArray:function(ie){return Me(ie,function(V){return V})||[]},only:function(ie){if(!j(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}},Jt.Component=w,Jt.Fragment=t,Jt.Profiler=i,Jt.PureComponent=I,Jt.StrictMode=r,Jt.Suspense=l,Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,Jt.act=Ie,Jt.cloneElement=function(ie,V,Y){if(ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ie+".");var ee=x({},ie.props),ne=ie.key,de=ie.ref,De=ie._owner;if(V!=null){if(V.ref!==void 0&&(de=V.ref,De=B.current),V.key!==void 0&&(ne=""+V.key),ie.type&&ie.type.defaultProps)var Se=ie.type.defaultProps;for(Fe in V)D.call(V,Fe)&&!k.hasOwnProperty(Fe)&&(ee[Fe]=V[Fe]===void 0&&Se!==void 0?Se[Fe]:V[Fe])}var Fe=arguments.length-2;if(Fe===1)ee.children=Y;else if(1<Fe){Se=Array(Fe);for(var je=0;je<Fe;je++)Se[je]=arguments[je+2];ee.children=Se}return{$$typeof:n,type:ie.type,key:ne,ref:de,props:ee,_owner:De}},Jt.createContext=function(ie){return ie={$$typeof:a,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ie.Provider={$$typeof:s,_context:ie},ie.Consumer=ie},Jt.createElement=P,Jt.createFactory=function(ie){var V=P.bind(null,ie);return V.type=ie,V},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(ie){return{$$typeof:o,render:ie}},Jt.isValidElement=j,Jt.lazy=function(ie){return{$$typeof:h,_payload:{_status:-1,_result:ie},_init:Le}},Jt.memo=function(ie,V){return{$$typeof:u,type:ie,compare:V===void 0?null:V}},Jt.startTransition=function(ie){var V=ce.transition;ce.transition={};try{ie()}finally{ce.transition=V}},Jt.unstable_act=Ie,Jt.useCallback=function(ie,V){return be.current.useCallback(ie,V)},Jt.useContext=function(ie){return be.current.useContext(ie)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(ie){return be.current.useDeferredValue(ie)},Jt.useEffect=function(ie,V){return be.current.useEffect(ie,V)},Jt.useId=function(){return be.current.useId()},Jt.useImperativeHandle=function(ie,V,Y){return be.current.useImperativeHandle(ie,V,Y)},Jt.useInsertionEffect=function(ie,V){return be.current.useInsertionEffect(ie,V)},Jt.useLayoutEffect=function(ie,V){return be.current.useLayoutEffect(ie,V)},Jt.useMemo=function(ie,V){return be.current.useMemo(ie,V)},Jt.useReducer=function(ie,V,Y){return be.current.useReducer(ie,V,Y)},Jt.useRef=function(ie){return be.current.useRef(ie)},Jt.useState=function(ie){return be.current.useState(ie)},Jt.useSyncExternalStore=function(ie,V,Y){return be.current.useSyncExternalStore(ie,V,Y)},Jt.useTransition=function(){return be.current.useTransition()},Jt.version="18.3.1",Jt}var w4;function Lp(){return w4||(w4=1,f2.exports=fB()),f2.exports}var S4;function gB(){if(S4)return Pg;S4=1;var n=Lp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var h,f={},g=null,p=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(p=l.ref);for(h in l)r.call(l,h)&&!s.hasOwnProperty(h)&&(f[h]=l[h]);if(o&&o.defaultProps)for(h in l=o.defaultProps,l)f[h]===void 0&&(f[h]=l[h]);return{$$typeof:e,type:o,key:g,ref:p,props:f,_owner:i.current}}return Pg.Fragment=t,Pg.jsx=a,Pg.jsxs=a,Pg}var T4;function mB(){return T4||(T4=1,d2.exports=gB()),d2.exports}var y=mB(),My={},g2={exports:{}},hs={},m2={exports:{}},p2={};var I4;function pB(){return I4||(I4=1,(function(n){function e(ce,Re){var Ie=ce.length;ce.push(Re);e:for(;0<Ie;){var ie=Ie-1>>>1,V=ce[ie];if(0<i(V,Re))ce[ie]=Re,ce[Ie]=V,Ie=ie;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var Re=ce[0],Ie=ce.pop();if(Ie!==Re){ce[0]=Ie;e:for(var ie=0,V=ce.length,Y=V>>>1;ie<Y;){var ee=2*(ie+1)-1,ne=ce[ee],de=ee+1,De=ce[de];if(0>i(ne,Ie))de<V&&0>i(De,ne)?(ce[ie]=De,ce[de]=Ie,ie=de):(ce[ie]=ne,ce[ee]=Ie,ie=ee);else if(de<V&&0>i(De,Ie))ce[ie]=De,ce[de]=Ie,ie=de;else break e}}return Re}function i(ce,Re){var Ie=ce.sortIndex-Re.sortIndex;return Ie!==0?Ie:ce.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,f=null,g=3,p=!1,x=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(ce){for(var Re=t(u);Re!==null;){if(Re.callback===null)r(u);else if(Re.startTime<=ce)r(u),Re.sortIndex=Re.expirationTime,e(l,Re);else break;Re=t(u)}}function N(ce){if(v=!1,A(ce),!x)if(t(l)!==null)x=!0,Le(D);else{var Re=t(u);Re!==null&&be(N,Re.startTime-ce)}}function D(ce,Re){x=!1,v&&(v=!1,T(P),P=-1),p=!0;var Ie=g;try{for(A(Re),f=t(l);f!==null&&(!(f.expirationTime>Re)||ce&&!O());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,g=f.priorityLevel;var V=ie(f.expirationTime<=Re);Re=n.unstable_now(),typeof V=="function"?f.callback=V:f===t(l)&&r(l),A(Re)}else r(l);f=t(l)}if(f!==null)var Y=!0;else{var ee=t(u);ee!==null&&be(N,ee.startTime-Re),Y=!1}return Y}finally{f=null,g=Ie,p=!1}}var B=!1,k=null,P=-1,M=5,j=-1;function O(){return!(n.unstable_now()-j<M)}function W(){if(k!==null){var ce=n.unstable_now();j=ce;var Re=!0;try{Re=k(!0,ce)}finally{Re?F():(B=!1,k=null)}}else B=!1}var F;if(typeof I=="function")F=function(){I(W)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Me=Te.port2;Te.port1.onmessage=W,F=function(){Me.postMessage(null)}}else F=function(){w(W,0)};function Le(ce){k=ce,B||(B=!0,F())}function be(ce,Re){P=w(function(){ce(n.unstable_now())},Re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){x||p||(x=!0,Le(D))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(ce){switch(g){case 1:case 2:case 3:var Re=3;break;default:Re=g}var Ie=g;g=Re;try{return ce()}finally{g=Ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,Re){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Ie=g;g=ce;try{return Re()}finally{g=Ie}},n.unstable_scheduleCallback=function(ce,Re,Ie){var ie=n.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?ie+Ie:ie):Ie=ie,ce){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Ie+V,ce={id:h++,callback:Re,priorityLevel:ce,startTime:Ie,expirationTime:V,sortIndex:-1},Ie>ie?(ce.sortIndex=Ie,e(u,ce),t(l)===null&&ce===t(u)&&(v?(T(P),P=-1):v=!0,be(N,Ie-ie))):(ce.sortIndex=V,e(l,ce),x||p||(x=!0,Le(D))),ce},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(ce){var Re=g;return function(){var Ie=g;g=Re;try{return ce.apply(this,arguments)}finally{g=Ie}}}})(p2)),p2}var A4;function yB(){return A4||(A4=1,m2.exports=pB()),m2.exports}var b4;function _B(){if(b4)return hs;b4=1;var n=Lp(),e=yB();function t(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(c,d){a(c,d),a(c+"Capture",d)}function a(c,d){for(i[c]=d,c=0;c<d.length;c++)r.add(d[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function g(c){return l.call(f,c)?!0:l.call(h,c)?!1:u.test(c)?f[c]=!0:(h[c]=!0,!1)}function p(c,d,m,E){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return E?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function x(c,d,m,E){if(d===null||typeof d>"u"||p(c,d,m,E))return!0;if(E)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function v(c,d,m,E,S,b,G){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=E,this.attributeNamespace=S,this.mustUseProperty=m,this.propertyName=c,this.type=d,this.sanitizeURL=b,this.removeEmptyString=G}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new v(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];w[d]=new v(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new v(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new v(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new v(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new v(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new v(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new v(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new v(c,5,!1,c.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function I(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(T,I);w[d]=new v(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(T,I);w[d]=new v(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(T,I);w[d]=new v(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new v(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new v(c,1,!1,c.toLowerCase(),null,!0,!0)});function A(c,d,m,E){var S=w.hasOwnProperty(d)?w[d]:null;(S!==null?S.type!==0:E||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(x(d,m,S,E)&&(m=null),E||S===null?g(d)&&(m===null?c.removeAttribute(d):c.setAttribute(d,""+m)):S.mustUseProperty?c[S.propertyName]=m===null?S.type===3?!1:"":m:(d=S.attributeName,E=S.attributeNamespace,m===null?c.removeAttribute(d):(S=S.type,m=S===3||S===4&&m===!0?"":""+m,E?c.setAttributeNS(E,d,m):c.setAttribute(d,m))))}var N=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),B=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),O=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ce=Symbol.iterator;function Re(c){return c===null||typeof c!="object"?null:(c=ce&&c[ce]||c["@@iterator"],typeof c=="function"?c:null)}var Ie=Object.assign,ie;function V(c){if(ie===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);ie=d&&d[1]||""}return`
`+ie+c}var Y=!1;function ee(c,d){if(!c||Y)return"";Y=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ve){var E=ve}Reflect.construct(c,[],d)}else{try{d.call()}catch(ve){E=ve}c.call(d.prototype)}else{try{throw Error()}catch(ve){E=ve}c()}}catch(ve){if(ve&&E&&typeof ve.stack=="string"){for(var S=ve.stack.split(`
`),b=E.stack.split(`
`),G=S.length-1,te=b.length-1;1<=G&&0<=te&&S[G]!==b[te];)te--;for(;1<=G&&0<=te;G--,te--)if(S[G]!==b[te]){if(G!==1||te!==1)do if(G--,te--,0>te||S[G]!==b[te]){var ae=`
`+S[G].replace(" at new "," at ");return c.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",c.displayName)),ae}while(1<=G&&0<=te);break}}}finally{Y=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?V(c):""}function ne(c){switch(c.tag){case 5:return V(c.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return c=ee(c.type,!1),c;case 11:return c=ee(c.type.render,!1),c;case 1:return c=ee(c.type,!0),c;default:return""}}function de(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case k:return"Fragment";case B:return"Portal";case M:return"Profiler";case P:return"StrictMode";case F:return"Suspense";case Te:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case O:return(c.displayName||"Context")+".Consumer";case j:return(c._context.displayName||"Context")+".Provider";case W:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Me:return d=c.displayName||null,d!==null?d:de(c.type)||"Memo";case Le:d=c._payload,c=c._init;try{return de(c(d))}catch{}}return null}function De(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(d);case 8:return d===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Se(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Fe(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function je(c){var d=Fe(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),E=""+c[d];if(!c.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,b=m.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return S.call(this)},set:function(G){E=""+G,b.call(this,G)}}),Object.defineProperty(c,d,{enumerable:m.enumerable}),{getValue:function(){return E},setValue:function(G){E=""+G},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Qe(c){c._valueTracker||(c._valueTracker=je(c))}function gt(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),E="";return c&&(E=Fe(c)?c.checked?"true":"false":c.value),c=E,c!==m?(d.setValue(c),!0):!1}function _t(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Lt(c,d){var m=d.checked;return Ie({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function nn(c,d){var m=d.defaultValue==null?"":d.defaultValue,E=d.checked!=null?d.checked:d.defaultChecked;m=Se(d.value!=null?d.value:m),c._wrapperState={initialChecked:E,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function zt(c,d){d=d.checked,d!=null&&A(c,"checked",d,!1)}function Oe(c,d){zt(c,d);var m=Se(d.value),E=d.type;if(m!=null)E==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(E==="submit"||E==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Ae(c,d.type,m):d.hasOwnProperty("defaultValue")&&Ae(c,d.type,Se(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function Xt(c,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var E=d.type;if(!(E!=="submit"&&E!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,m||d===c.value||(c.value=d),c.defaultValue=d}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function Ae(c,d,m){(d!=="number"||_t(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var ge=Array.isArray;function C(c,d,m,E){if(c=c.options,d){d={};for(var S=0;S<m.length;S++)d["$"+m[S]]=!0;for(m=0;m<c.length;m++)S=d.hasOwnProperty("$"+c[m].value),c[m].selected!==S&&(c[m].selected=S),S&&E&&(c[m].defaultSelected=!0)}else{for(m=""+Se(m),d=null,S=0;S<c.length;S++){if(c[S].value===m){c[S].selected=!0,E&&(c[S].defaultSelected=!0);return}d!==null||c[S].disabled||(d=c[S])}d!==null&&(d.selected=!0)}}function wt(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ie({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function q(c,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(t(92));if(ge(m)){if(1<m.length)throw Error(t(93));m=m[0]}d=m}d==null&&(d=""),m=d}c._wrapperState={initialValue:Se(m)}}function Ot(c,d){var m=Se(d.value),E=Se(d.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),d.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),E!=null&&(c.defaultValue=""+E)}function re(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function z(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?z(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Be,we=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,E,S){MSApp.execUnsafeLocalFunction(function(){return c(d,m,E,S)})}:c})(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(Be=Be||document.createElement("div"),Be.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Be.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function Ze(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Et=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(c){Et.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),ht[d]=ht[c]})});function St(c,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||ht.hasOwnProperty(c)&&ht[c]?(""+d).trim():d+"px"}function Rt(c,d){c=c.style;for(var m in d)if(d.hasOwnProperty(m)){var E=m.indexOf("--")===0,S=St(m,d[m],E);m==="float"&&(m="cssFloat"),E?c.setProperty(m,S):c[m]=S}}var en=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jr(c,d){if(d){if(en[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function Cs(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $i=null;function Wi(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ar=null,ci=null,Tn=null;function Ps(c){if(c=mg(c)){if(typeof Ar!="function")throw Error(t(280));var d=c.stateNode;d&&(d=K1(d),Ar(c.stateNode,c.type,d))}}function ks(c){ci?Tn?Tn.push(c):Tn=[c]:ci=c}function nr(){if(ci){var c=ci,d=Tn;if(Tn=ci=null,Ps(c),d)for(c=0;c<d.length;c++)Ps(d[c])}}function is(c,d){return c(d)}function Vr(){}var rr=!1;function Gr(c,d,m){if(rr)return c(d,m);rr=!0;try{return is(c,d,m)}finally{rr=!1,(ci!==null||Tn!==null)&&(Vr(),nr())}}function Br(c,d){var m=c.stateNode;if(m===null)return null;var E=K1(m);if(E===null)return null;m=E[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(c=c.type,E=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!E;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(t(231,d,typeof m));return m}var br=!1;if(o)try{var on={};Object.defineProperty(on,"passive",{get:function(){br=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{br=!1}function hr(c,d,m,E,S,b,G,te,ae){var ve=Array.prototype.slice.call(arguments,3);try{d.apply(m,ve)}catch($e){this.onError($e)}}var xr=!1,ss=null,U=!1,Z=null,K={onError:function(c){xr=!0,ss=c}};function X(c,d,m,E,S,b,G,te,ae){xr=!1,ss=null,hr.apply(K,arguments)}function Q(c,d,m,E,S,b,G,te,ae){if(X.apply(this,arguments),xr){if(xr){var ve=ss;xr=!1,ss=null}else throw Error(t(198));U||(U=!0,Z=ve)}}function J(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function pe(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function Pe(c){if(J(c)!==c)throw Error(t(188))}function me(c){var d=c.alternate;if(!d){if(d=J(c),d===null)throw Error(t(188));return d!==c?null:c}for(var m=c,E=d;;){var S=m.return;if(S===null)break;var b=S.alternate;if(b===null){if(E=S.return,E!==null){m=E;continue}break}if(S.child===b.child){for(b=S.child;b;){if(b===m)return Pe(S),c;if(b===E)return Pe(S),d;b=b.sibling}throw Error(t(188))}if(m.return!==E.return)m=S,E=b;else{for(var G=!1,te=S.child;te;){if(te===m){G=!0,m=S,E=b;break}if(te===E){G=!0,E=S,m=b;break}te=te.sibling}if(!G){for(te=b.child;te;){if(te===m){G=!0,m=b,E=S;break}if(te===E){G=!0,E=b,m=S;break}te=te.sibling}if(!G)throw Error(t(189))}}if(m.alternate!==E)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?c:d}function _e(c){return c=me(c),c!==null?xe(c):null}function xe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=xe(c);if(d!==null)return d;c=c.sibling}return null}var We=e.unstable_scheduleCallback,et=e.unstable_cancelCallback,ut=e.unstable_shouldYield,He=e.unstable_requestPaint,Ke=e.unstable_now,Vt=e.unstable_getCurrentPriorityLevel,In=e.unstable_ImmediatePriority,Pn=e.unstable_UserBlockingPriority,Qn=e.unstable_NormalPriority,Ra=e.unstable_LowPriority,na=e.unstable_IdlePriority,Ms=null,vr=null;function ql(c){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(Ms,c,void 0,(c.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:bu,lo=Math.log,ra=Math.LN2;function bu(c){return c>>>=0,c===0?32:31-(lo(c)/ra|0)|0}var co=64,Zl=4194304;function xn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function el(c,d){var m=c.pendingLanes;if(m===0)return 0;var E=0,S=c.suspendedLanes,b=c.pingedLanes,G=m&268435455;if(G!==0){var te=G&~S;te!==0?E=xn(te):(b&=G,b!==0&&(E=xn(b)))}else G=m&~S,G!==0?E=xn(G):b!==0&&(E=xn(b));if(E===0)return 0;if(d!==0&&d!==E&&(d&S)===0&&(S=E&-E,b=d&-d,S>=b||S===16&&(b&4194240)!==0))return d;if((E&4)!==0&&(E|=m&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=E;0<d;)m=31-ir(d),S=1<<m,E|=c[m],d&=~S;return E}function Ru(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cu(c,d){for(var m=c.suspendedLanes,E=c.pingedLanes,S=c.expirationTimes,b=c.pendingLanes;0<b;){var G=31-ir(b),te=1<<G,ae=S[G];ae===-1?((te&m)===0||(te&E)!==0)&&(S[G]=Ru(te,d)):ae<=d&&(c.expiredLanes|=te),b&=~te}}function Y0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function X0(){var c=co;return co<<=1,(co&4194240)===0&&(co=64),c}function q0(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function Pu(c,d,m){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-ir(d),c[d]=m}function $E(c,d){var m=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var E=c.eventTimes;for(c=c.expirationTimes;0<m;){var S=31-ir(m),b=1<<S;d[S]=0,E[S]=-1,c[S]=-1,m&=~b}}function Z0(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var E=31-ir(m),S=1<<E;S&d|c[E]&d&&(c[E]|=d),m&=~S}}var ln=0;function uo(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Q0,yd,J0,eg,tg,ho=!1,_d=[],fo=null,go=null,ui=null,ku=new Map,tl=new Map,Ns=[],k1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ql(c,d){switch(c){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":ku.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(d.pointerId)}}function Ca(c,d,m,E,S,b){return c===null||c.nativeEvent!==b?(c={blockedOn:d,domEventName:m,eventSystemFlags:E,nativeEvent:b,targetContainers:[S]},d!==null&&(d=mg(d),d!==null&&yd(d)),c):(c.eventSystemFlags|=E,d=c.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),c)}function M1(c,d,m,E,S){switch(d){case"focusin":return fo=Ca(fo,c,d,m,E,S),!0;case"dragenter":return go=Ca(go,c,d,m,E,S),!0;case"mouseover":return ui=Ca(ui,c,d,m,E,S),!0;case"pointerover":var b=S.pointerId;return ku.set(b,Ca(ku.get(b)||null,c,d,m,E,S)),!0;case"gotpointercapture":return b=S.pointerId,tl.set(b,Ca(tl.get(b)||null,c,d,m,E,S)),!0}return!1}function xd(c){var d=Ou(c.target);if(d!==null){var m=J(d);if(m!==null){if(d=m.tag,d===13){if(d=pe(m),d!==null){c.blockedOn=d,tg(c.priority,function(){J0(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Un(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=vd(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var E=new m.constructor(m.type,m);$i=E,m.target.dispatchEvent(E),$i=null}else return d=mg(m),d!==null&&yd(d),c.blockedOn=m,!1;d.shift()}return!0}function N1(c,d,m){Un(c)&&m.delete(d)}function WE(){ho=!1,fo!==null&&Un(fo)&&(fo=null),go!==null&&Un(go)&&(go=null),ui!==null&&Un(ui)&&(ui=null),ku.forEach(N1),tl.forEach(N1)}function Jl(c,d){c.blockedOn===d&&(c.blockedOn=null,ho||(ho=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,WE)))}function ec(c){function d(S){return Jl(S,c)}if(0<_d.length){Jl(_d[0],c);for(var m=1;m<_d.length;m++){var E=_d[m];E.blockedOn===c&&(E.blockedOn=null)}}for(fo!==null&&Jl(fo,c),go!==null&&Jl(go,c),ui!==null&&Jl(ui,c),ku.forEach(d),tl.forEach(d),m=0;m<Ns.length;m++)E=Ns[m],E.blockedOn===c&&(E.blockedOn=null);for(;0<Ns.length&&(m=Ns[0],m.blockedOn===null);)xd(m),m.blockedOn===null&&Ns.shift()}var nl=N.ReactCurrentBatchConfig,rl=!0;function mo(c,d,m,E){var S=ln,b=nl.transition;nl.transition=null;try{ln=1,ng(c,d,m,E)}finally{ln=S,nl.transition=b}}function L1(c,d,m,E){var S=ln,b=nl.transition;nl.transition=null;try{ln=4,ng(c,d,m,E)}finally{ln=S,nl.transition=b}}function ng(c,d,m,E){if(rl){var S=vd(c,d,m,E);if(S===null)nw(c,d,E,po,m),Ql(c,E);else if(M1(S,c,d,m,E))E.stopPropagation();else if(Ql(c,E),d&4&&-1<k1.indexOf(c)){for(;S!==null;){var b=mg(S);if(b!==null&&Q0(b),b=vd(c,d,m,E),b===null&&nw(c,d,E,po,m),b===S)break;S=b}S!==null&&E.stopPropagation()}else nw(c,d,E,null,m)}}var po=null;function vd(c,d,m,E){if(po=null,c=Wi(E),c=Ou(c),c!==null)if(d=J(c),d===null)c=null;else if(m=d.tag,m===13){if(c=pe(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return po=c,null}function Ed(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vt()){case In:return 1;case Pn:return 4;case Qn:case Ra:return 16;case na:return 536870912;default:return 16}default:return 16}}var Ls=null,wd=null,il=null;function O1(){if(il)return il;var c,d=wd,m=d.length,E,S="value"in Ls?Ls.value:Ls.textContent,b=S.length;for(c=0;c<m&&d[c]===S[c];c++);var G=m-c;for(E=1;E<=G&&d[m-E]===S[b-E];E++);return il=S.slice(c,1<E?1-E:void 0)}function Mu(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function yo(){return!0}function rg(){return!1}function Ii(c){function d(m,E,S,b,G){this._reactName=m,this._targetInst=S,this.type=E,this.nativeEvent=b,this.target=G,this.currentTarget=null;for(var te in c)c.hasOwnProperty(te)&&(m=c[te],this[te]=m?m(b):b[te]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?yo:rg,this.isPropagationStopped=rg,this}return Ie(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),d}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=Ii(_o),tc=Ie({},_o,{view:0,detail:0}),Sd=Ii(tc),Td,Id,Os,Lu=Ie({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kt,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Os&&(Os&&c.type==="mousemove"?(Td=c.screenX-Os.screenX,Id=c.screenY-Os.screenY):Id=Td=0,Os=c),Td)},movementY:function(c){return"movementY"in c?c.movementY:Id}}),ig=Ii(Lu),D1=Ie({},Lu,{dataTransfer:0}),F1=Ii(D1),Ad=Ie({},tc,{relatedTarget:0}),hi=Ii(Ad),j1=Ie({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),V1=Ii(j1),nc=Ie({},_o,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_=Ii(nc),R=Ie({},_o,{data:0}),L=Ii(R),H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rt(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Ee[c])?!!d[c]:!1}function Kt(){return rt}var Er=Ie({},tc,{key:function(c){if(c.key){var d=H[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Mu(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?fe[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kt,charCode:function(c){return c.type==="keypress"?Mu(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Mu(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),kn=Ii(Er),Rr=Ie({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ds=Ii(Rr),sl=Ie({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kt}),xo=Ii(sl),vo=Ie({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),bd=Ii(vo),sg=Ie({},Lu,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),oG=Ii(sg),lG=[9,13,27,32],HE=o&&"CompositionEvent"in window,ag=null;o&&"documentMode"in document&&(ag=document.documentMode);var cG=o&&"TextEvent"in window&&!ag,fC=o&&(!HE||ag&&8<ag&&11>=ag),gC=" ",mC=!1;function pC(c,d){switch(c){case"keyup":return lG.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Rd=!1;function uG(c,d){switch(c){case"compositionend":return yC(d);case"keypress":return d.which!==32?null:(mC=!0,gC);case"textInput":return c=d.data,c===gC&&mC?null:c;default:return null}}function hG(c,d){if(Rd)return c==="compositionend"||!HE&&pC(c,d)?(c=O1(),il=wd=Ls=null,Rd=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return fC&&d.locale!=="ko"?null:d.data;default:return null}}var dG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _C(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!dG[c.type]:d==="textarea"}function xC(c,d,m,E){ks(E),d=$1(d,"onChange"),0<d.length&&(m=new Nu("onChange","change",null,m,E),c.push({event:m,listeners:d}))}var og=null,lg=null;function fG(c){FC(c,0)}function G1(c){var d=Nd(c);if(gt(d))return c}function gG(c,d){if(c==="change")return d}var vC=!1;if(o){var KE;if(o){var YE="oninput"in document;if(!YE){var EC=document.createElement("div");EC.setAttribute("oninput","return;"),YE=typeof EC.oninput=="function"}KE=YE}else KE=!1;vC=KE&&(!document.documentMode||9<document.documentMode)}function wC(){og&&(og.detachEvent("onpropertychange",SC),lg=og=null)}function SC(c){if(c.propertyName==="value"&&G1(lg)){var d=[];xC(d,lg,c,Wi(c)),Gr(fG,d)}}function mG(c,d,m){c==="focusin"?(wC(),og=d,lg=m,og.attachEvent("onpropertychange",SC)):c==="focusout"&&wC()}function pG(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return G1(lg)}function yG(c,d){if(c==="click")return G1(d)}function _G(c,d){if(c==="input"||c==="change")return G1(d)}function xG(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Pa=typeof Object.is=="function"?Object.is:xG;function cg(c,d){if(Pa(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),E=Object.keys(d);if(m.length!==E.length)return!1;for(E=0;E<m.length;E++){var S=m[E];if(!l.call(d,S)||!Pa(c[S],d[S]))return!1}return!0}function TC(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function IC(c,d){var m=TC(c);c=0;for(var E;m;){if(m.nodeType===3){if(E=c+m.textContent.length,c<=d&&E>=d)return{node:m,offset:d-c};c=E}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=TC(m)}}function AC(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?AC(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function bC(){for(var c=window,d=_t();d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=_t(c.document)}return d}function XE(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function vG(c){var d=bC(),m=c.focusedElem,E=c.selectionRange;if(d!==m&&m&&m.ownerDocument&&AC(m.ownerDocument.documentElement,m)){if(E!==null&&XE(m)){if(d=E.start,c=E.end,c===void 0&&(c=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(c,m.value.length);else if(c=(d=m.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var S=m.textContent.length,b=Math.min(E.start,S);E=E.end===void 0?b:Math.min(E.end,S),!c.extend&&b>E&&(S=E,E=b,b=S),S=IC(m,b);var G=IC(m,E);S&&G&&(c.rangeCount!==1||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==G.node||c.focusOffset!==G.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),c.removeAllRanges(),b>E?(c.addRange(d),c.extend(G.node,G.offset)):(d.setEnd(G.node,G.offset),c.addRange(d)))}}for(d=[],c=m;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)c=d[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var EG=o&&"documentMode"in document&&11>=document.documentMode,Cd=null,qE=null,ug=null,ZE=!1;function RC(c,d,m){var E=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;ZE||Cd==null||Cd!==_t(E)||(E=Cd,"selectionStart"in E&&XE(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),ug&&cg(ug,E)||(ug=E,E=$1(qE,"onSelect"),0<E.length&&(d=new Nu("onSelect","select",null,d,m),c.push({event:d,listeners:E}),d.target=Cd)))}function B1(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var Pd={animationend:B1("Animation","AnimationEnd"),animationiteration:B1("Animation","AnimationIteration"),animationstart:B1("Animation","AnimationStart"),transitionend:B1("Transition","TransitionEnd")},QE={},CC={};o&&(CC=document.createElement("div").style,"AnimationEvent"in window||(delete Pd.animationend.animation,delete Pd.animationiteration.animation,delete Pd.animationstart.animation),"TransitionEvent"in window||delete Pd.transitionend.transition);function U1(c){if(QE[c])return QE[c];if(!Pd[c])return c;var d=Pd[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in CC)return QE[c]=d[m];return c}var PC=U1("animationend"),kC=U1("animationiteration"),MC=U1("animationstart"),NC=U1("transitionend"),LC=new Map,OC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rc(c,d){LC.set(c,d),s(d,[c])}for(var JE=0;JE<OC.length;JE++){var ew=OC[JE],wG=ew.toLowerCase(),SG=ew[0].toUpperCase()+ew.slice(1);rc(wG,"on"+SG)}rc(PC,"onAnimationEnd"),rc(kC,"onAnimationIteration"),rc(MC,"onAnimationStart"),rc("dblclick","onDoubleClick"),rc("focusin","onFocus"),rc("focusout","onBlur"),rc(NC,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TG=new Set("cancel close invalid load scroll toggle".split(" ").concat(hg));function DC(c,d,m){var E=c.type||"unknown-event";c.currentTarget=m,Q(E,d,void 0,c),c.currentTarget=null}function FC(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var E=c[m],S=E.event;E=E.listeners;e:{var b=void 0;if(d)for(var G=E.length-1;0<=G;G--){var te=E[G],ae=te.instance,ve=te.currentTarget;if(te=te.listener,ae!==b&&S.isPropagationStopped())break e;DC(S,te,ve),b=ae}else for(G=0;G<E.length;G++){if(te=E[G],ae=te.instance,ve=te.currentTarget,te=te.listener,ae!==b&&S.isPropagationStopped())break e;DC(S,te,ve),b=ae}}}if(U)throw c=Z,U=!1,Z=null,c}function Hn(c,d){var m=d[lw];m===void 0&&(m=d[lw]=new Set);var E=c+"__bubble";m.has(E)||(jC(d,c,2,!1),m.add(E))}function tw(c,d,m){var E=0;d&&(E|=4),jC(m,c,E,d)}var z1="_reactListening"+Math.random().toString(36).slice(2);function dg(c){if(!c[z1]){c[z1]=!0,r.forEach(function(m){m!=="selectionchange"&&(TG.has(m)||tw(m,!1,c),tw(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[z1]||(d[z1]=!0,tw("selectionchange",!1,d))}}function jC(c,d,m,E){switch(Ed(d)){case 1:var S=mo;break;case 4:S=L1;break;default:S=ng}m=S.bind(null,d,m,c),S=void 0,!br||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),E?S!==void 0?c.addEventListener(d,m,{capture:!0,passive:S}):c.addEventListener(d,m,!0):S!==void 0?c.addEventListener(d,m,{passive:S}):c.addEventListener(d,m,!1)}function nw(c,d,m,E,S){var b=E;if((d&1)===0&&(d&2)===0&&E!==null)e:for(;;){if(E===null)return;var G=E.tag;if(G===3||G===4){var te=E.stateNode.containerInfo;if(te===S||te.nodeType===8&&te.parentNode===S)break;if(G===4)for(G=E.return;G!==null;){var ae=G.tag;if((ae===3||ae===4)&&(ae=G.stateNode.containerInfo,ae===S||ae.nodeType===8&&ae.parentNode===S))return;G=G.return}for(;te!==null;){if(G=Ou(te),G===null)return;if(ae=G.tag,ae===5||ae===6){E=b=G;continue e}te=te.parentNode}}E=E.return}Gr(function(){var ve=b,$e=Wi(m),Ye=[];e:{var Ue=LC.get(c);if(Ue!==void 0){var ft=Nu,xt=c;switch(c){case"keypress":if(Mu(m)===0)break e;case"keydown":case"keyup":ft=kn;break;case"focusin":xt="focus",ft=hi;break;case"focusout":xt="blur",ft=hi;break;case"beforeblur":case"afterblur":ft=hi;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=F1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=xo;break;case PC:case kC:case MC:ft=V1;break;case NC:ft=bd;break;case"scroll":ft=Sd;break;case"wheel":ft=oG;break;case"copy":case"cut":case"paste":ft=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Ds}var Tt=(d&4)!==0,wr=!Tt&&c==="scroll",he=Tt?Ue!==null?Ue+"Capture":null:Ue;Tt=[];for(var oe=ve,ye;oe!==null;){ye=oe;var Je=ye.stateNode;if(ye.tag===5&&Je!==null&&(ye=Je,he!==null&&(Je=Br(oe,he),Je!=null&&Tt.push(fg(oe,Je,ye)))),wr)break;oe=oe.return}0<Tt.length&&(Ue=new ft(Ue,xt,null,m,$e),Ye.push({event:Ue,listeners:Tt}))}}if((d&7)===0){e:{if(Ue=c==="mouseover"||c==="pointerover",ft=c==="mouseout"||c==="pointerout",Ue&&m!==$i&&(xt=m.relatedTarget||m.fromElement)&&(Ou(xt)||xt[al]))break e;if((ft||Ue)&&(Ue=$e.window===$e?$e:(Ue=$e.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,ft?(xt=m.relatedTarget||m.toElement,ft=ve,xt=xt?Ou(xt):null,xt!==null&&(wr=J(xt),xt!==wr||xt.tag!==5&&xt.tag!==6)&&(xt=null)):(ft=null,xt=ve),ft!==xt)){if(Tt=ig,Je="onMouseLeave",he="onMouseEnter",oe="mouse",(c==="pointerout"||c==="pointerover")&&(Tt=Ds,Je="onPointerLeave",he="onPointerEnter",oe="pointer"),wr=ft==null?Ue:Nd(ft),ye=xt==null?Ue:Nd(xt),Ue=new Tt(Je,oe+"leave",ft,m,$e),Ue.target=wr,Ue.relatedTarget=ye,Je=null,Ou($e)===ve&&(Tt=new Tt(he,oe+"enter",xt,m,$e),Tt.target=ye,Tt.relatedTarget=wr,Je=Tt),wr=Je,ft&&xt)t:{for(Tt=ft,he=xt,oe=0,ye=Tt;ye;ye=kd(ye))oe++;for(ye=0,Je=he;Je;Je=kd(Je))ye++;for(;0<oe-ye;)Tt=kd(Tt),oe--;for(;0<ye-oe;)he=kd(he),ye--;for(;oe--;){if(Tt===he||he!==null&&Tt===he.alternate)break t;Tt=kd(Tt),he=kd(he)}Tt=null}else Tt=null;ft!==null&&VC(Ye,Ue,ft,Tt,!1),xt!==null&&wr!==null&&VC(Ye,wr,xt,Tt,!0)}}e:{if(Ue=ve?Nd(ve):window,ft=Ue.nodeName&&Ue.nodeName.toLowerCase(),ft==="select"||ft==="input"&&Ue.type==="file")var At=gG;else if(_C(Ue))if(vC)At=_G;else{At=pG;var Mt=mG}else(ft=Ue.nodeName)&&ft.toLowerCase()==="input"&&(Ue.type==="checkbox"||Ue.type==="radio")&&(At=yG);if(At&&(At=At(c,ve))){xC(Ye,At,m,$e);break e}Mt&&Mt(c,Ue,ve),c==="focusout"&&(Mt=Ue._wrapperState)&&Mt.controlled&&Ue.type==="number"&&Ae(Ue,"number",Ue.value)}switch(Mt=ve?Nd(ve):window,c){case"focusin":(_C(Mt)||Mt.contentEditable==="true")&&(Cd=Mt,qE=ve,ug=null);break;case"focusout":ug=qE=Cd=null;break;case"mousedown":ZE=!0;break;case"contextmenu":case"mouseup":case"dragend":ZE=!1,RC(Ye,m,$e);break;case"selectionchange":if(EG)break;case"keydown":case"keyup":RC(Ye,m,$e)}var Nt;if(HE)e:{switch(c){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Rd?pC(c,m)&&(Gt="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Gt="onCompositionStart");Gt&&(fC&&m.locale!=="ko"&&(Rd||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Rd&&(Nt=O1()):(Ls=$e,wd="value"in Ls?Ls.value:Ls.textContent,Rd=!0)),Mt=$1(ve,Gt),0<Mt.length&&(Gt=new L(Gt,c,null,m,$e),Ye.push({event:Gt,listeners:Mt}),Nt?Gt.data=Nt:(Nt=yC(m),Nt!==null&&(Gt.data=Nt)))),(Nt=cG?uG(c,m):hG(c,m))&&(ve=$1(ve,"onBeforeInput"),0<ve.length&&($e=new L("onBeforeInput","beforeinput",null,m,$e),Ye.push({event:$e,listeners:ve}),$e.data=Nt))}FC(Ye,d)})}function fg(c,d,m){return{instance:c,listener:d,currentTarget:m}}function $1(c,d){for(var m=d+"Capture",E=[];c!==null;){var S=c,b=S.stateNode;S.tag===5&&b!==null&&(S=b,b=Br(c,m),b!=null&&E.unshift(fg(c,b,S)),b=Br(c,d),b!=null&&E.push(fg(c,b,S))),c=c.return}return E}function kd(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function VC(c,d,m,E,S){for(var b=d._reactName,G=[];m!==null&&m!==E;){var te=m,ae=te.alternate,ve=te.stateNode;if(ae!==null&&ae===E)break;te.tag===5&&ve!==null&&(te=ve,S?(ae=Br(m,b),ae!=null&&G.unshift(fg(m,ae,te))):S||(ae=Br(m,b),ae!=null&&G.push(fg(m,ae,te)))),m=m.return}G.length!==0&&c.push({event:d,listeners:G})}var IG=/\r\n?/g,AG=/\u0000|\uFFFD/g;function GC(c){return(typeof c=="string"?c:""+c).replace(IG,`
`).replace(AG,"")}function W1(c,d,m){if(d=GC(d),GC(c)!==d&&m)throw Error(t(425))}function H1(){}var rw=null,iw=null;function sw(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var aw=typeof setTimeout=="function"?setTimeout:void 0,bG=typeof clearTimeout=="function"?clearTimeout:void 0,BC=typeof Promise=="function"?Promise:void 0,RG=typeof queueMicrotask=="function"?queueMicrotask:typeof BC<"u"?function(c){return BC.resolve(null).then(c).catch(CG)}:aw;function CG(c){setTimeout(function(){throw c})}function ow(c,d){var m=d,E=0;do{var S=m.nextSibling;if(c.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(E===0){c.removeChild(S),ec(d);return}E--}else m!=="$"&&m!=="$?"&&m!=="$!"||E++;m=S}while(m);ec(d)}function ic(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function UC(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return c;d--}else m==="/$"&&d++}c=c.previousSibling}return null}var Md=Math.random().toString(36).slice(2),Eo="__reactFiber$"+Md,gg="__reactProps$"+Md,al="__reactContainer$"+Md,lw="__reactEvents$"+Md,PG="__reactListeners$"+Md,kG="__reactHandles$"+Md;function Ou(c){var d=c[Eo];if(d)return d;for(var m=c.parentNode;m;){if(d=m[al]||m[Eo]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=UC(c);c!==null;){if(m=c[Eo])return m;c=UC(c)}return d}c=m,m=c.parentNode}return null}function mg(c){return c=c[Eo]||c[al],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Nd(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function K1(c){return c[gg]||null}var cw=[],Ld=-1;function sc(c){return{current:c}}function Kn(c){0>Ld||(c.current=cw[Ld],cw[Ld]=null,Ld--)}function $n(c,d){Ld++,cw[Ld]=c.current,c.current=d}var ac={},Ai=sc(ac),as=sc(!1),Du=ac;function Od(c,d){var m=c.type.contextTypes;if(!m)return ac;var E=c.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===d)return E.__reactInternalMemoizedMaskedChildContext;var S={},b;for(b in m)S[b]=d[b];return E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=S),S}function os(c){return c=c.childContextTypes,c!=null}function Y1(){Kn(as),Kn(Ai)}function zC(c,d,m){if(Ai.current!==ac)throw Error(t(168));$n(Ai,d),$n(as,m)}function $C(c,d,m){var E=c.stateNode;if(d=d.childContextTypes,typeof E.getChildContext!="function")return m;E=E.getChildContext();for(var S in E)if(!(S in d))throw Error(t(108,De(c)||"Unknown",S));return Ie({},m,E)}function X1(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||ac,Du=Ai.current,$n(Ai,c),$n(as,as.current),!0}function WC(c,d,m){var E=c.stateNode;if(!E)throw Error(t(169));m?(c=$C(c,d,Du),E.__reactInternalMemoizedMergedChildContext=c,Kn(as),Kn(Ai),$n(Ai,c)):Kn(as),$n(as,m)}var ol=null,q1=!1,uw=!1;function HC(c){ol===null?ol=[c]:ol.push(c)}function MG(c){q1=!0,HC(c)}function oc(){if(!uw&&ol!==null){uw=!0;var c=0,d=ln;try{var m=ol;for(ln=1;c<m.length;c++){var E=m[c];do E=E(!0);while(E!==null)}ol=null,q1=!1}catch(S){throw ol!==null&&(ol=ol.slice(c+1)),We(In,oc),S}finally{ln=d,uw=!1}}return null}var Dd=[],Fd=0,Z1=null,Q1=0,ia=[],sa=0,Fu=null,ll=1,cl="";function ju(c,d){Dd[Fd++]=Q1,Dd[Fd++]=Z1,Z1=c,Q1=d}function KC(c,d,m){ia[sa++]=ll,ia[sa++]=cl,ia[sa++]=Fu,Fu=c;var E=ll;c=cl;var S=32-ir(E)-1;E&=~(1<<S),m+=1;var b=32-ir(d)+S;if(30<b){var G=S-S%5;b=(E&(1<<G)-1).toString(32),E>>=G,S-=G,ll=1<<32-ir(d)+S|m<<S|E,cl=b+c}else ll=1<<b|m<<S|E,cl=c}function hw(c){c.return!==null&&(ju(c,1),KC(c,1,0))}function dw(c){for(;c===Z1;)Z1=Dd[--Fd],Dd[Fd]=null,Q1=Dd[--Fd],Dd[Fd]=null;for(;c===Fu;)Fu=ia[--sa],ia[sa]=null,cl=ia[--sa],ia[sa]=null,ll=ia[--sa],ia[sa]=null}var Fs=null,js=null,Jn=!1,ka=null;function YC(c,d){var m=ca(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=c,d=c.deletions,d===null?(c.deletions=[m],c.flags|=16):d.push(m)}function XC(c,d){switch(c.tag){case 5:var m=c.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,Fs=c,js=ic(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,Fs=c,js=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=Fu!==null?{id:ll,overflow:cl}:null,c.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=ca(18,null,null,0),m.stateNode=d,m.return=c,c.child=m,Fs=c,js=null,!0):!1;default:return!1}}function fw(c){return(c.mode&1)!==0&&(c.flags&128)===0}function gw(c){if(Jn){var d=js;if(d){var m=d;if(!XC(c,d)){if(fw(c))throw Error(t(418));d=ic(m.nextSibling);var E=Fs;d&&XC(c,d)?YC(E,m):(c.flags=c.flags&-4097|2,Jn=!1,Fs=c)}}else{if(fw(c))throw Error(t(418));c.flags=c.flags&-4097|2,Jn=!1,Fs=c}}}function qC(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Fs=c}function J1(c){if(c!==Fs)return!1;if(!Jn)return qC(c),Jn=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!sw(c.type,c.memoizedProps)),d&&(d=js)){if(fw(c))throw ZC(),Error(t(418));for(;d;)YC(c,d),d=ic(d.nextSibling)}if(qC(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(d===0){js=ic(c.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}c=c.nextSibling}js=null}}else js=Fs?ic(c.stateNode.nextSibling):null;return!0}function ZC(){for(var c=js;c;)c=ic(c.nextSibling)}function jd(){js=Fs=null,Jn=!1}function mw(c){ka===null?ka=[c]:ka.push(c)}var NG=N.ReactCurrentBatchConfig;function pg(c,d,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var E=m.stateNode}if(!E)throw Error(t(147,c));var S=E,b=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===b?d.ref:(d=function(G){var te=S.refs;G===null?delete te[b]:te[b]=G},d._stringRef=b,d)}if(typeof c!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,c))}return c}function ey(c,d){throw c=Object.prototype.toString.call(d),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function QC(c){var d=c._init;return d(c._payload)}function JC(c){function d(he,oe){if(c){var ye=he.deletions;ye===null?(he.deletions=[oe],he.flags|=16):ye.push(oe)}}function m(he,oe){if(!c)return null;for(;oe!==null;)d(he,oe),oe=oe.sibling;return null}function E(he,oe){for(he=new Map;oe!==null;)oe.key!==null?he.set(oe.key,oe):he.set(oe.index,oe),oe=oe.sibling;return he}function S(he,oe){return he=mc(he,oe),he.index=0,he.sibling=null,he}function b(he,oe,ye){return he.index=ye,c?(ye=he.alternate,ye!==null?(ye=ye.index,ye<oe?(he.flags|=2,oe):ye):(he.flags|=2,oe)):(he.flags|=1048576,oe)}function G(he){return c&&he.alternate===null&&(he.flags|=2),he}function te(he,oe,ye,Je){return oe===null||oe.tag!==6?(oe=a2(ye,he.mode,Je),oe.return=he,oe):(oe=S(oe,ye),oe.return=he,oe)}function ae(he,oe,ye,Je){var At=ye.type;return At===k?$e(he,oe,ye.props.children,Je,ye.key):oe!==null&&(oe.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Le&&QC(At)===oe.type)?(Je=S(oe,ye.props),Je.ref=pg(he,oe,ye),Je.return=he,Je):(Je=Ty(ye.type,ye.key,ye.props,null,he.mode,Je),Je.ref=pg(he,oe,ye),Je.return=he,Je)}function ve(he,oe,ye,Je){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ye.containerInfo||oe.stateNode.implementation!==ye.implementation?(oe=o2(ye,he.mode,Je),oe.return=he,oe):(oe=S(oe,ye.children||[]),oe.return=he,oe)}function $e(he,oe,ye,Je,At){return oe===null||oe.tag!==7?(oe=Hu(ye,he.mode,Je,At),oe.return=he,oe):(oe=S(oe,ye),oe.return=he,oe)}function Ye(he,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=a2(""+oe,he.mode,ye),oe.return=he,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case D:return ye=Ty(oe.type,oe.key,oe.props,null,he.mode,ye),ye.ref=pg(he,null,oe),ye.return=he,ye;case B:return oe=o2(oe,he.mode,ye),oe.return=he,oe;case Le:var Je=oe._init;return Ye(he,Je(oe._payload),ye)}if(ge(oe)||Re(oe))return oe=Hu(oe,he.mode,ye,null),oe.return=he,oe;ey(he,oe)}return null}function Ue(he,oe,ye,Je){var At=oe!==null?oe.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return At!==null?null:te(he,oe,""+ye,Je);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case D:return ye.key===At?ae(he,oe,ye,Je):null;case B:return ye.key===At?ve(he,oe,ye,Je):null;case Le:return At=ye._init,Ue(he,oe,At(ye._payload),Je)}if(ge(ye)||Re(ye))return At!==null?null:$e(he,oe,ye,Je,null);ey(he,ye)}return null}function ft(he,oe,ye,Je,At){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return he=he.get(ye)||null,te(oe,he,""+Je,At);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case D:return he=he.get(Je.key===null?ye:Je.key)||null,ae(oe,he,Je,At);case B:return he=he.get(Je.key===null?ye:Je.key)||null,ve(oe,he,Je,At);case Le:var Mt=Je._init;return ft(he,oe,ye,Mt(Je._payload),At)}if(ge(Je)||Re(Je))return he=he.get(ye)||null,$e(oe,he,Je,At,null);ey(oe,Je)}return null}function xt(he,oe,ye,Je){for(var At=null,Mt=null,Nt=oe,Gt=oe=0,Jr=null;Nt!==null&&Gt<ye.length;Gt++){Nt.index>Gt?(Jr=Nt,Nt=null):Jr=Nt.sibling;var mn=Ue(he,Nt,ye[Gt],Je);if(mn===null){Nt===null&&(Nt=Jr);break}c&&Nt&&mn.alternate===null&&d(he,Nt),oe=b(mn,oe,Gt),Mt===null?At=mn:Mt.sibling=mn,Mt=mn,Nt=Jr}if(Gt===ye.length)return m(he,Nt),Jn&&ju(he,Gt),At;if(Nt===null){for(;Gt<ye.length;Gt++)Nt=Ye(he,ye[Gt],Je),Nt!==null&&(oe=b(Nt,oe,Gt),Mt===null?At=Nt:Mt.sibling=Nt,Mt=Nt);return Jn&&ju(he,Gt),At}for(Nt=E(he,Nt);Gt<ye.length;Gt++)Jr=ft(Nt,he,Gt,ye[Gt],Je),Jr!==null&&(c&&Jr.alternate!==null&&Nt.delete(Jr.key===null?Gt:Jr.key),oe=b(Jr,oe,Gt),Mt===null?At=Jr:Mt.sibling=Jr,Mt=Jr);return c&&Nt.forEach(function(pc){return d(he,pc)}),Jn&&ju(he,Gt),At}function Tt(he,oe,ye,Je){var At=Re(ye);if(typeof At!="function")throw Error(t(150));if(ye=At.call(ye),ye==null)throw Error(t(151));for(var Mt=At=null,Nt=oe,Gt=oe=0,Jr=null,mn=ye.next();Nt!==null&&!mn.done;Gt++,mn=ye.next()){Nt.index>Gt?(Jr=Nt,Nt=null):Jr=Nt.sibling;var pc=Ue(he,Nt,mn.value,Je);if(pc===null){Nt===null&&(Nt=Jr);break}c&&Nt&&pc.alternate===null&&d(he,Nt),oe=b(pc,oe,Gt),Mt===null?At=pc:Mt.sibling=pc,Mt=pc,Nt=Jr}if(mn.done)return m(he,Nt),Jn&&ju(he,Gt),At;if(Nt===null){for(;!mn.done;Gt++,mn=ye.next())mn=Ye(he,mn.value,Je),mn!==null&&(oe=b(mn,oe,Gt),Mt===null?At=mn:Mt.sibling=mn,Mt=mn);return Jn&&ju(he,Gt),At}for(Nt=E(he,Nt);!mn.done;Gt++,mn=ye.next())mn=ft(Nt,he,Gt,mn.value,Je),mn!==null&&(c&&mn.alternate!==null&&Nt.delete(mn.key===null?Gt:mn.key),oe=b(mn,oe,Gt),Mt===null?At=mn:Mt.sibling=mn,Mt=mn);return c&&Nt.forEach(function(dB){return d(he,dB)}),Jn&&ju(he,Gt),At}function wr(he,oe,ye,Je){if(typeof ye=="object"&&ye!==null&&ye.type===k&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case D:e:{for(var At=ye.key,Mt=oe;Mt!==null;){if(Mt.key===At){if(At=ye.type,At===k){if(Mt.tag===7){m(he,Mt.sibling),oe=S(Mt,ye.props.children),oe.return=he,he=oe;break e}}else if(Mt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Le&&QC(At)===Mt.type){m(he,Mt.sibling),oe=S(Mt,ye.props),oe.ref=pg(he,Mt,ye),oe.return=he,he=oe;break e}m(he,Mt);break}else d(he,Mt);Mt=Mt.sibling}ye.type===k?(oe=Hu(ye.props.children,he.mode,Je,ye.key),oe.return=he,he=oe):(Je=Ty(ye.type,ye.key,ye.props,null,he.mode,Je),Je.ref=pg(he,oe,ye),Je.return=he,he=Je)}return G(he);case B:e:{for(Mt=ye.key;oe!==null;){if(oe.key===Mt)if(oe.tag===4&&oe.stateNode.containerInfo===ye.containerInfo&&oe.stateNode.implementation===ye.implementation){m(he,oe.sibling),oe=S(oe,ye.children||[]),oe.return=he,he=oe;break e}else{m(he,oe);break}else d(he,oe);oe=oe.sibling}oe=o2(ye,he.mode,Je),oe.return=he,he=oe}return G(he);case Le:return Mt=ye._init,wr(he,oe,Mt(ye._payload),Je)}if(ge(ye))return xt(he,oe,ye,Je);if(Re(ye))return Tt(he,oe,ye,Je);ey(he,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,oe!==null&&oe.tag===6?(m(he,oe.sibling),oe=S(oe,ye),oe.return=he,he=oe):(m(he,oe),oe=a2(ye,he.mode,Je),oe.return=he,he=oe),G(he)):m(he,oe)}return wr}var Vd=JC(!0),eP=JC(!1),ty=sc(null),ny=null,Gd=null,pw=null;function yw(){pw=Gd=ny=null}function _w(c){var d=ty.current;Kn(ty),c._currentValue=d}function xw(c,d,m){for(;c!==null;){var E=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),c===m)break;c=c.return}}function Bd(c,d){ny=c,pw=Gd=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(ls=!0),c.firstContext=null)}function aa(c){var d=c._currentValue;if(pw!==c)if(c={context:c,memoizedValue:d,next:null},Gd===null){if(ny===null)throw Error(t(308));Gd=c,ny.dependencies={lanes:0,firstContext:c}}else Gd=Gd.next=c;return d}var Vu=null;function vw(c){Vu===null?Vu=[c]:Vu.push(c)}function tP(c,d,m,E){var S=d.interleaved;return S===null?(m.next=m,vw(d)):(m.next=S.next,S.next=m),d.interleaved=m,ul(c,E)}function ul(c,d){c.lanes|=d;var m=c.alternate;for(m!==null&&(m.lanes|=d),m=c,c=c.return;c!==null;)c.childLanes|=d,m=c.alternate,m!==null&&(m.childLanes|=d),m=c,c=c.return;return m.tag===3?m.stateNode:null}var lc=!1;function Ew(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nP(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function hl(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function cc(c,d,m){var E=c.updateQueue;if(E===null)return null;if(E=E.shared,(dn&2)!==0){var S=E.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),E.pending=d,ul(c,m)}return S=E.interleaved,S===null?(d.next=d,vw(E)):(d.next=S.next,S.next=d),E.interleaved=d,ul(c,m)}function ry(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var E=d.lanes;E&=c.pendingLanes,m|=E,d.lanes=m,Z0(c,m)}}function rP(c,d){var m=c.updateQueue,E=c.alternate;if(E!==null&&(E=E.updateQueue,m===E)){var S=null,b=null;if(m=m.firstBaseUpdate,m!==null){do{var G={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};b===null?S=b=G:b=b.next=G,m=m.next}while(m!==null);b===null?S=b=d:b=b.next=d}else S=b=d;m={baseState:E.baseState,firstBaseUpdate:S,lastBaseUpdate:b,shared:E.shared,effects:E.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}function iy(c,d,m,E){var S=c.updateQueue;lc=!1;var b=S.firstBaseUpdate,G=S.lastBaseUpdate,te=S.shared.pending;if(te!==null){S.shared.pending=null;var ae=te,ve=ae.next;ae.next=null,G===null?b=ve:G.next=ve,G=ae;var $e=c.alternate;$e!==null&&($e=$e.updateQueue,te=$e.lastBaseUpdate,te!==G&&(te===null?$e.firstBaseUpdate=ve:te.next=ve,$e.lastBaseUpdate=ae))}if(b!==null){var Ye=S.baseState;G=0,$e=ve=ae=null,te=b;do{var Ue=te.lane,ft=te.eventTime;if((E&Ue)===Ue){$e!==null&&($e=$e.next={eventTime:ft,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var xt=c,Tt=te;switch(Ue=d,ft=m,Tt.tag){case 1:if(xt=Tt.payload,typeof xt=="function"){Ye=xt.call(ft,Ye,Ue);break e}Ye=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=Tt.payload,Ue=typeof xt=="function"?xt.call(ft,Ye,Ue):xt,Ue==null)break e;Ye=Ie({},Ye,Ue);break e;case 2:lc=!0}}te.callback!==null&&te.lane!==0&&(c.flags|=64,Ue=S.effects,Ue===null?S.effects=[te]:Ue.push(te))}else ft={eventTime:ft,lane:Ue,tag:te.tag,payload:te.payload,callback:te.callback,next:null},$e===null?(ve=$e=ft,ae=Ye):$e=$e.next=ft,G|=Ue;if(te=te.next,te===null){if(te=S.shared.pending,te===null)break;Ue=te,te=Ue.next,Ue.next=null,S.lastBaseUpdate=Ue,S.shared.pending=null}}while(!0);if($e===null&&(ae=Ye),S.baseState=ae,S.firstBaseUpdate=ve,S.lastBaseUpdate=$e,d=S.shared.interleaved,d!==null){S=d;do G|=S.lane,S=S.next;while(S!==d)}else b===null&&(S.shared.lanes=0);Uu|=G,c.lanes=G,c.memoizedState=Ye}}function iP(c,d,m){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var E=c[d],S=E.callback;if(S!==null){if(E.callback=null,E=m,typeof S!="function")throw Error(t(191,S));S.call(E)}}}var yg={},wo=sc(yg),_g=sc(yg),xg=sc(yg);function Gu(c){if(c===yg)throw Error(t(174));return c}function ww(c,d){switch($n(xg,d),$n(_g,c),$n(wo,yg),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:le(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=le(d,c)}Kn(wo),$n(wo,d)}function Ud(){Kn(wo),Kn(_g),Kn(xg)}function sP(c){Gu(xg.current);var d=Gu(wo.current),m=le(d,c.type);d!==m&&($n(_g,c),$n(wo,m))}function Sw(c){_g.current===c&&(Kn(wo),Kn(_g))}var sr=sc(0);function sy(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Tw=[];function Iw(){for(var c=0;c<Tw.length;c++)Tw[c]._workInProgressVersionPrimary=null;Tw.length=0}var ay=N.ReactCurrentDispatcher,Aw=N.ReactCurrentBatchConfig,Bu=0,ar=null,Ur=null,Zr=null,oy=!1,vg=!1,Eg=0,LG=0;function bi(){throw Error(t(321))}function bw(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!Pa(c[m],d[m]))return!1;return!0}function Rw(c,d,m,E,S,b){if(Bu=b,ar=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ay.current=c===null||c.memoizedState===null?jG:VG,c=m(E,S),vg){b=0;do{if(vg=!1,Eg=0,25<=b)throw Error(t(301));b+=1,Zr=Ur=null,d.updateQueue=null,ay.current=GG,c=m(E,S)}while(vg)}if(ay.current=uy,d=Ur!==null&&Ur.next!==null,Bu=0,Zr=Ur=ar=null,oy=!1,d)throw Error(t(300));return c}function Cw(){var c=Eg!==0;return Eg=0,c}function So(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?ar.memoizedState=Zr=c:Zr=Zr.next=c,Zr}function oa(){if(Ur===null){var c=ar.alternate;c=c!==null?c.memoizedState:null}else c=Ur.next;var d=Zr===null?ar.memoizedState:Zr.next;if(d!==null)Zr=d,Ur=c;else{if(c===null)throw Error(t(310));Ur=c,c={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},Zr===null?ar.memoizedState=Zr=c:Zr=Zr.next=c}return Zr}function wg(c,d){return typeof d=="function"?d(c):d}function Pw(c){var d=oa(),m=d.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var E=Ur,S=E.baseQueue,b=m.pending;if(b!==null){if(S!==null){var G=S.next;S.next=b.next,b.next=G}E.baseQueue=S=b,m.pending=null}if(S!==null){b=S.next,E=E.baseState;var te=G=null,ae=null,ve=b;do{var $e=ve.lane;if((Bu&$e)===$e)ae!==null&&(ae=ae.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),E=ve.hasEagerState?ve.eagerState:c(E,ve.action);else{var Ye={lane:$e,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};ae===null?(te=ae=Ye,G=E):ae=ae.next=Ye,ar.lanes|=$e,Uu|=$e}ve=ve.next}while(ve!==null&&ve!==b);ae===null?G=E:ae.next=te,Pa(E,d.memoizedState)||(ls=!0),d.memoizedState=E,d.baseState=G,d.baseQueue=ae,m.lastRenderedState=E}if(c=m.interleaved,c!==null){S=c;do b=S.lane,ar.lanes|=b,Uu|=b,S=S.next;while(S!==c)}else S===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function kw(c){var d=oa(),m=d.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var E=m.dispatch,S=m.pending,b=d.memoizedState;if(S!==null){m.pending=null;var G=S=S.next;do b=c(b,G.action),G=G.next;while(G!==S);Pa(b,d.memoizedState)||(ls=!0),d.memoizedState=b,d.baseQueue===null&&(d.baseState=b),m.lastRenderedState=b}return[b,E]}function aP(){}function oP(c,d){var m=ar,E=oa(),S=d(),b=!Pa(E.memoizedState,S);if(b&&(E.memoizedState=S,ls=!0),E=E.queue,Mw(uP.bind(null,m,E,c),[c]),E.getSnapshot!==d||b||Zr!==null&&Zr.memoizedState.tag&1){if(m.flags|=2048,Sg(9,cP.bind(null,m,E,S,d),void 0,null),Qr===null)throw Error(t(349));(Bu&30)!==0||lP(m,d,S)}return S}function lP(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function cP(c,d,m,E){d.value=m,d.getSnapshot=E,hP(d)&&dP(c)}function uP(c,d,m){return m(function(){hP(d)&&dP(c)})}function hP(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!Pa(c,m)}catch{return!0}}function dP(c){var d=ul(c,1);d!==null&&Oa(d,c,1,-1)}function fP(c){var d=So();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:c},d.queue=c,c=c.dispatch=FG.bind(null,ar,c),[d.memoizedState,c]}function Sg(c,d,m,E){return c={tag:c,create:d,destroy:m,deps:E,next:null},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.lastEffect=c.next=c):(m=d.lastEffect,m===null?d.lastEffect=c.next=c:(E=m.next,m.next=c,c.next=E,d.lastEffect=c)),c}function gP(){return oa().memoizedState}function ly(c,d,m,E){var S=So();ar.flags|=c,S.memoizedState=Sg(1|d,m,void 0,E===void 0?null:E)}function cy(c,d,m,E){var S=oa();E=E===void 0?null:E;var b=void 0;if(Ur!==null){var G=Ur.memoizedState;if(b=G.destroy,E!==null&&bw(E,G.deps)){S.memoizedState=Sg(d,m,b,E);return}}ar.flags|=c,S.memoizedState=Sg(1|d,m,b,E)}function mP(c,d){return ly(8390656,8,c,d)}function Mw(c,d){return cy(2048,8,c,d)}function pP(c,d){return cy(4,2,c,d)}function yP(c,d){return cy(4,4,c,d)}function _P(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function xP(c,d,m){return m=m!=null?m.concat([c]):null,cy(4,4,_P.bind(null,d,c),m)}function Nw(){}function vP(c,d){var m=oa();d=d===void 0?null:d;var E=m.memoizedState;return E!==null&&d!==null&&bw(d,E[1])?E[0]:(m.memoizedState=[c,d],c)}function EP(c,d){var m=oa();d=d===void 0?null:d;var E=m.memoizedState;return E!==null&&d!==null&&bw(d,E[1])?E[0]:(c=c(),m.memoizedState=[c,d],c)}function wP(c,d,m){return(Bu&21)===0?(c.baseState&&(c.baseState=!1,ls=!0),c.memoizedState=m):(Pa(m,d)||(m=X0(),ar.lanes|=m,Uu|=m,c.baseState=!0),d)}function OG(c,d){var m=ln;ln=m!==0&&4>m?m:4,c(!0);var E=Aw.transition;Aw.transition={};try{c(!1),d()}finally{ln=m,Aw.transition=E}}function SP(){return oa().memoizedState}function DG(c,d,m){var E=fc(c);if(m={lane:E,action:m,hasEagerState:!1,eagerState:null,next:null},TP(c))IP(d,m);else if(m=tP(c,d,m,E),m!==null){var S=Ki();Oa(m,c,E,S),AP(m,d,E)}}function FG(c,d,m){var E=fc(c),S={lane:E,action:m,hasEagerState:!1,eagerState:null,next:null};if(TP(c))IP(d,S);else{var b=c.alternate;if(c.lanes===0&&(b===null||b.lanes===0)&&(b=d.lastRenderedReducer,b!==null))try{var G=d.lastRenderedState,te=b(G,m);if(S.hasEagerState=!0,S.eagerState=te,Pa(te,G)){var ae=d.interleaved;ae===null?(S.next=S,vw(d)):(S.next=ae.next,ae.next=S),d.interleaved=S;return}}catch{}m=tP(c,d,S,E),m!==null&&(S=Ki(),Oa(m,c,E,S),AP(m,d,E))}}function TP(c){var d=c.alternate;return c===ar||d!==null&&d===ar}function IP(c,d){vg=oy=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function AP(c,d,m){if((m&4194240)!==0){var E=d.lanes;E&=c.pendingLanes,m|=E,d.lanes=m,Z0(c,m)}}var uy={readContext:aa,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},jG={readContext:aa,useCallback:function(c,d){return So().memoizedState=[c,d===void 0?null:d],c},useContext:aa,useEffect:mP,useImperativeHandle:function(c,d,m){return m=m!=null?m.concat([c]):null,ly(4194308,4,_P.bind(null,d,c),m)},useLayoutEffect:function(c,d){return ly(4194308,4,c,d)},useInsertionEffect:function(c,d){return ly(4,2,c,d)},useMemo:function(c,d){var m=So();return d=d===void 0?null:d,c=c(),m.memoizedState=[c,d],c},useReducer:function(c,d,m){var E=So();return d=m!==void 0?m(d):d,E.memoizedState=E.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},E.queue=c,c=c.dispatch=DG.bind(null,ar,c),[E.memoizedState,c]},useRef:function(c){var d=So();return c={current:c},d.memoizedState=c},useState:fP,useDebugValue:Nw,useDeferredValue:function(c){return So().memoizedState=c},useTransition:function(){var c=fP(!1),d=c[0];return c=OG.bind(null,c[1]),So().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,m){var E=ar,S=So();if(Jn){if(m===void 0)throw Error(t(407));m=m()}else{if(m=d(),Qr===null)throw Error(t(349));(Bu&30)!==0||lP(E,d,m)}S.memoizedState=m;var b={value:m,getSnapshot:d};return S.queue=b,mP(uP.bind(null,E,b,c),[c]),E.flags|=2048,Sg(9,cP.bind(null,E,b,m,d),void 0,null),m},useId:function(){var c=So(),d=Qr.identifierPrefix;if(Jn){var m=cl,E=ll;m=(E&~(1<<32-ir(E)-1)).toString(32)+m,d=":"+d+"R"+m,m=Eg++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=LG++,d=":"+d+"r"+m.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},VG={readContext:aa,useCallback:vP,useContext:aa,useEffect:Mw,useImperativeHandle:xP,useInsertionEffect:pP,useLayoutEffect:yP,useMemo:EP,useReducer:Pw,useRef:gP,useState:function(){return Pw(wg)},useDebugValue:Nw,useDeferredValue:function(c){var d=oa();return wP(d,Ur.memoizedState,c)},useTransition:function(){var c=Pw(wg)[0],d=oa().memoizedState;return[c,d]},useMutableSource:aP,useSyncExternalStore:oP,useId:SP,unstable_isNewReconciler:!1},GG={readContext:aa,useCallback:vP,useContext:aa,useEffect:Mw,useImperativeHandle:xP,useInsertionEffect:pP,useLayoutEffect:yP,useMemo:EP,useReducer:kw,useRef:gP,useState:function(){return kw(wg)},useDebugValue:Nw,useDeferredValue:function(c){var d=oa();return Ur===null?d.memoizedState=c:wP(d,Ur.memoizedState,c)},useTransition:function(){var c=kw(wg)[0],d=oa().memoizedState;return[c,d]},useMutableSource:aP,useSyncExternalStore:oP,useId:SP,unstable_isNewReconciler:!1};function Ma(c,d){if(c&&c.defaultProps){d=Ie({},d),c=c.defaultProps;for(var m in c)d[m]===void 0&&(d[m]=c[m]);return d}return d}function Lw(c,d,m,E){d=c.memoizedState,m=m(E,d),m=m==null?d:Ie({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var hy={isMounted:function(c){return(c=c._reactInternals)?J(c)===c:!1},enqueueSetState:function(c,d,m){c=c._reactInternals;var E=Ki(),S=fc(c),b=hl(E,S);b.payload=d,m!=null&&(b.callback=m),d=cc(c,b,S),d!==null&&(Oa(d,c,S,E),ry(d,c,S))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var E=Ki(),S=fc(c),b=hl(E,S);b.tag=1,b.payload=d,m!=null&&(b.callback=m),d=cc(c,b,S),d!==null&&(Oa(d,c,S,E),ry(d,c,S))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=Ki(),E=fc(c),S=hl(m,E);S.tag=2,d!=null&&(S.callback=d),d=cc(c,S,E),d!==null&&(Oa(d,c,E,m),ry(d,c,E))}};function bP(c,d,m,E,S,b,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(E,b,G):d.prototype&&d.prototype.isPureReactComponent?!cg(m,E)||!cg(S,b):!0}function RP(c,d,m){var E=!1,S=ac,b=d.contextType;return typeof b=="object"&&b!==null?b=aa(b):(S=os(d)?Du:Ai.current,E=d.contextTypes,b=(E=E!=null)?Od(c,S):ac),d=new d(m,b),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=hy,c.stateNode=d,d._reactInternals=c,E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=b),d}function CP(c,d,m,E){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,E),d.state!==c&&hy.enqueueReplaceState(d,d.state,null)}function Ow(c,d,m,E){var S=c.stateNode;S.props=m,S.state=c.memoizedState,S.refs={},Ew(c);var b=d.contextType;typeof b=="object"&&b!==null?S.context=aa(b):(b=os(d)?Du:Ai.current,S.context=Od(c,b)),S.state=c.memoizedState,b=d.getDerivedStateFromProps,typeof b=="function"&&(Lw(c,d,b,m),S.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&hy.enqueueReplaceState(S,S.state,null),iy(c,m,S,E),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308)}function zd(c,d){try{var m="",E=d;do m+=ne(E),E=E.return;while(E);var S=m}catch(b){S=`
Error generating stack: `+b.message+`
`+b.stack}return{value:c,source:d,stack:S,digest:null}}function Dw(c,d,m){return{value:c,source:null,stack:m??null,digest:d??null}}function Fw(c,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var BG=typeof WeakMap=="function"?WeakMap:Map;function PP(c,d,m){m=hl(-1,m),m.tag=3,m.payload={element:null};var E=d.value;return m.callback=function(){_y||(_y=!0,Qw=E),Fw(c,d)},m}function kP(c,d,m){m=hl(-1,m),m.tag=3;var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var S=d.value;m.payload=function(){return E(S)},m.callback=function(){Fw(c,d)}}var b=c.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(m.callback=function(){Fw(c,d),typeof E!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),m}function MP(c,d,m){var E=c.pingCache;if(E===null){E=c.pingCache=new BG;var S=new Set;E.set(d,S)}else S=E.get(d),S===void 0&&(S=new Set,E.set(d,S));S.has(m)||(S.add(m),c=tB.bind(null,c,d,m),d.then(c,c))}function NP(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function LP(c,d,m,E,S){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=hl(-1,1),d.tag=2,cc(m,d,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=S,c)}var UG=N.ReactCurrentOwner,ls=!1;function Hi(c,d,m,E){d.child=c===null?eP(d,null,m,E):Vd(d,c.child,m,E)}function OP(c,d,m,E,S){m=m.render;var b=d.ref;return Bd(d,S),E=Rw(c,d,m,E,b,S),m=Cw(),c!==null&&!ls?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~S,dl(c,d,S)):(Jn&&m&&hw(d),d.flags|=1,Hi(c,d,E,S),d.child)}function DP(c,d,m,E,S){if(c===null){var b=m.type;return typeof b=="function"&&!s2(b)&&b.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=b,FP(c,d,b,E,S)):(c=Ty(m.type,null,E,d,d.mode,S),c.ref=d.ref,c.return=d,d.child=c)}if(b=c.child,(c.lanes&S)===0){var G=b.memoizedProps;if(m=m.compare,m=m!==null?m:cg,m(G,E)&&c.ref===d.ref)return dl(c,d,S)}return d.flags|=1,c=mc(b,E),c.ref=d.ref,c.return=d,d.child=c}function FP(c,d,m,E,S){if(c!==null){var b=c.memoizedProps;if(cg(b,E)&&c.ref===d.ref)if(ls=!1,d.pendingProps=E=b,(c.lanes&S)!==0)(c.flags&131072)!==0&&(ls=!0);else return d.lanes=c.lanes,dl(c,d,S)}return jw(c,d,m,E,S)}function jP(c,d,m){var E=d.pendingProps,S=E.children,b=c!==null?c.memoizedState:null;if(E.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Wd,Vs),Vs|=m;else{if((m&1073741824)===0)return c=b!==null?b.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,$n(Wd,Vs),Vs|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=b!==null?b.baseLanes:m,$n(Wd,Vs),Vs|=E}else b!==null?(E=b.baseLanes|m,d.memoizedState=null):E=m,$n(Wd,Vs),Vs|=E;return Hi(c,d,S,m),d.child}function VP(c,d){var m=d.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function jw(c,d,m,E,S){var b=os(m)?Du:Ai.current;return b=Od(d,b),Bd(d,S),m=Rw(c,d,m,E,b,S),E=Cw(),c!==null&&!ls?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~S,dl(c,d,S)):(Jn&&E&&hw(d),d.flags|=1,Hi(c,d,m,S),d.child)}function GP(c,d,m,E,S){if(os(m)){var b=!0;X1(d)}else b=!1;if(Bd(d,S),d.stateNode===null)fy(c,d),RP(d,m,E),Ow(d,m,E,S),E=!0;else if(c===null){var G=d.stateNode,te=d.memoizedProps;G.props=te;var ae=G.context,ve=m.contextType;typeof ve=="object"&&ve!==null?ve=aa(ve):(ve=os(m)?Du:Ai.current,ve=Od(d,ve));var $e=m.getDerivedStateFromProps,Ye=typeof $e=="function"||typeof G.getSnapshotBeforeUpdate=="function";Ye||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(te!==E||ae!==ve)&&CP(d,G,E,ve),lc=!1;var Ue=d.memoizedState;G.state=Ue,iy(d,E,G,S),ae=d.memoizedState,te!==E||Ue!==ae||as.current||lc?(typeof $e=="function"&&(Lw(d,m,$e,E),ae=d.memoizedState),(te=lc||bP(d,m,te,E,Ue,ae,ve))?(Ye||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=ae),G.props=E,G.state=ae,G.context=ve,E=te):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{G=d.stateNode,nP(c,d),te=d.memoizedProps,ve=d.type===d.elementType?te:Ma(d.type,te),G.props=ve,Ye=d.pendingProps,Ue=G.context,ae=m.contextType,typeof ae=="object"&&ae!==null?ae=aa(ae):(ae=os(m)?Du:Ai.current,ae=Od(d,ae));var ft=m.getDerivedStateFromProps;($e=typeof ft=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(te!==Ye||Ue!==ae)&&CP(d,G,E,ae),lc=!1,Ue=d.memoizedState,G.state=Ue,iy(d,E,G,S);var xt=d.memoizedState;te!==Ye||Ue!==xt||as.current||lc?(typeof ft=="function"&&(Lw(d,m,ft,E),xt=d.memoizedState),(ve=lc||bP(d,m,ve,E,Ue,xt,ae)||!1)?($e||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(E,xt,ae),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(E,xt,ae)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||te===c.memoizedProps&&Ue===c.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||te===c.memoizedProps&&Ue===c.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=xt),G.props=E,G.state=xt,G.context=ae,E=ve):(typeof G.componentDidUpdate!="function"||te===c.memoizedProps&&Ue===c.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||te===c.memoizedProps&&Ue===c.memoizedState||(d.flags|=1024),E=!1)}return Vw(c,d,m,E,b,S)}function Vw(c,d,m,E,S,b){VP(c,d);var G=(d.flags&128)!==0;if(!E&&!G)return S&&WC(d,m,!1),dl(c,d,b);E=d.stateNode,UG.current=d;var te=G&&typeof m.getDerivedStateFromError!="function"?null:E.render();return d.flags|=1,c!==null&&G?(d.child=Vd(d,c.child,null,b),d.child=Vd(d,null,te,b)):Hi(c,d,te,b),d.memoizedState=E.state,S&&WC(d,m,!0),d.child}function BP(c){var d=c.stateNode;d.pendingContext?zC(c,d.pendingContext,d.pendingContext!==d.context):d.context&&zC(c,d.context,!1),ww(c,d.containerInfo)}function UP(c,d,m,E,S){return jd(),mw(S),d.flags|=256,Hi(c,d,m,E),d.child}var Gw={dehydrated:null,treeContext:null,retryLane:0};function Bw(c){return{baseLanes:c,cachePool:null,transitions:null}}function zP(c,d,m){var E=d.pendingProps,S=sr.current,b=!1,G=(d.flags&128)!==0,te;if((te=G)||(te=c!==null&&c.memoizedState===null?!1:(S&2)!==0),te?(b=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(S|=1),$n(sr,S&1),c===null)return gw(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(G=E.children,c=E.fallback,b?(E=d.mode,b=d.child,G={mode:"hidden",children:G},(E&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=G):b=Iy(G,E,0,null),c=Hu(c,E,m,null),b.return=d,c.return=d,b.sibling=c,d.child=b,d.child.memoizedState=Bw(m),d.memoizedState=Gw,c):Uw(d,G));if(S=c.memoizedState,S!==null&&(te=S.dehydrated,te!==null))return zG(c,d,G,E,te,S,m);if(b){b=E.fallback,G=d.mode,S=c.child,te=S.sibling;var ae={mode:"hidden",children:E.children};return(G&1)===0&&d.child!==S?(E=d.child,E.childLanes=0,E.pendingProps=ae,d.deletions=null):(E=mc(S,ae),E.subtreeFlags=S.subtreeFlags&14680064),te!==null?b=mc(te,b):(b=Hu(b,G,m,null),b.flags|=2),b.return=d,E.return=d,E.sibling=b,d.child=E,E=b,b=d.child,G=c.child.memoizedState,G=G===null?Bw(m):{baseLanes:G.baseLanes|m,cachePool:null,transitions:G.transitions},b.memoizedState=G,b.childLanes=c.childLanes&~m,d.memoizedState=Gw,E}return b=c.child,c=b.sibling,E=mc(b,{mode:"visible",children:E.children}),(d.mode&1)===0&&(E.lanes=m),E.return=d,E.sibling=null,c!==null&&(m=d.deletions,m===null?(d.deletions=[c],d.flags|=16):m.push(c)),d.child=E,d.memoizedState=null,E}function Uw(c,d){return d=Iy({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function dy(c,d,m,E){return E!==null&&mw(E),Vd(d,c.child,null,m),c=Uw(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function zG(c,d,m,E,S,b,G){if(m)return d.flags&256?(d.flags&=-257,E=Dw(Error(t(422))),dy(c,d,G,E)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(b=E.fallback,S=d.mode,E=Iy({mode:"visible",children:E.children},S,0,null),b=Hu(b,S,G,null),b.flags|=2,E.return=d,b.return=d,E.sibling=b,d.child=E,(d.mode&1)!==0&&Vd(d,c.child,null,G),d.child.memoizedState=Bw(G),d.memoizedState=Gw,b);if((d.mode&1)===0)return dy(c,d,G,null);if(S.data==="$!"){if(E=S.nextSibling&&S.nextSibling.dataset,E)var te=E.dgst;return E=te,b=Error(t(419)),E=Dw(b,E,void 0),dy(c,d,G,E)}if(te=(G&c.childLanes)!==0,ls||te){if(E=Qr,E!==null){switch(G&-G){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(E.suspendedLanes|G))!==0?0:S,S!==0&&S!==b.retryLane&&(b.retryLane=S,ul(c,S),Oa(E,c,S,-1))}return i2(),E=Dw(Error(t(421))),dy(c,d,G,E)}return S.data==="$?"?(d.flags|=128,d.child=c.child,d=nB.bind(null,c),S._reactRetry=d,null):(c=b.treeContext,js=ic(S.nextSibling),Fs=d,Jn=!0,ka=null,c!==null&&(ia[sa++]=ll,ia[sa++]=cl,ia[sa++]=Fu,ll=c.id,cl=c.overflow,Fu=d),d=Uw(d,E.children),d.flags|=4096,d)}function $P(c,d,m){c.lanes|=d;var E=c.alternate;E!==null&&(E.lanes|=d),xw(c.return,d,m)}function zw(c,d,m,E,S){var b=c.memoizedState;b===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:m,tailMode:S}:(b.isBackwards=d,b.rendering=null,b.renderingStartTime=0,b.last=E,b.tail=m,b.tailMode=S)}function WP(c,d,m){var E=d.pendingProps,S=E.revealOrder,b=E.tail;if(Hi(c,d,E.children,m),E=sr.current,(E&2)!==0)E=E&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&$P(c,m,d);else if(c.tag===19)$P(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}E&=1}if($n(sr,E),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(m=d.child,S=null;m!==null;)c=m.alternate,c!==null&&sy(c)===null&&(S=m),m=m.sibling;m=S,m===null?(S=d.child,d.child=null):(S=m.sibling,m.sibling=null),zw(d,!1,S,m,b);break;case"backwards":for(m=null,S=d.child,d.child=null;S!==null;){if(c=S.alternate,c!==null&&sy(c)===null){d.child=S;break}c=S.sibling,S.sibling=m,m=S,S=c}zw(d,!0,m,null,b);break;case"together":zw(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function fy(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function dl(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),Uu|=d.lanes,(m&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(t(153));if(d.child!==null){for(c=d.child,m=mc(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=mc(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function $G(c,d,m){switch(d.tag){case 3:BP(d),jd();break;case 5:sP(d);break;case 1:os(d.type)&&X1(d);break;case 4:ww(d,d.stateNode.containerInfo);break;case 10:var E=d.type._context,S=d.memoizedProps.value;$n(ty,E._currentValue),E._currentValue=S;break;case 13:if(E=d.memoizedState,E!==null)return E.dehydrated!==null?($n(sr,sr.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?zP(c,d,m):($n(sr,sr.current&1),c=dl(c,d,m),c!==null?c.sibling:null);$n(sr,sr.current&1);break;case 19:if(E=(m&d.childLanes)!==0,(c.flags&128)!==0){if(E)return WP(c,d,m);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),$n(sr,sr.current),E)break;return null;case 22:case 23:return d.lanes=0,jP(c,d,m)}return dl(c,d,m)}var HP,$w,KP,YP;HP=function(c,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},$w=function(){},KP=function(c,d,m,E){var S=c.memoizedProps;if(S!==E){c=d.stateNode,Gu(wo.current);var b=null;switch(m){case"input":S=Lt(c,S),E=Lt(c,E),b=[];break;case"select":S=Ie({},S,{value:void 0}),E=Ie({},E,{value:void 0}),b=[];break;case"textarea":S=wt(c,S),E=wt(c,E),b=[];break;default:typeof S.onClick!="function"&&typeof E.onClick=="function"&&(c.onclick=H1)}jr(m,E);var G;m=null;for(ve in S)if(!E.hasOwnProperty(ve)&&S.hasOwnProperty(ve)&&S[ve]!=null)if(ve==="style"){var te=S[ve];for(G in te)te.hasOwnProperty(G)&&(m||(m={}),m[G]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(i.hasOwnProperty(ve)?b||(b=[]):(b=b||[]).push(ve,null));for(ve in E){var ae=E[ve];if(te=S?.[ve],E.hasOwnProperty(ve)&&ae!==te&&(ae!=null||te!=null))if(ve==="style")if(te){for(G in te)!te.hasOwnProperty(G)||ae&&ae.hasOwnProperty(G)||(m||(m={}),m[G]="");for(G in ae)ae.hasOwnProperty(G)&&te[G]!==ae[G]&&(m||(m={}),m[G]=ae[G])}else m||(b||(b=[]),b.push(ve,m)),m=ae;else ve==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,te=te?te.__html:void 0,ae!=null&&te!==ae&&(b=b||[]).push(ve,ae)):ve==="children"?typeof ae!="string"&&typeof ae!="number"||(b=b||[]).push(ve,""+ae):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(i.hasOwnProperty(ve)?(ae!=null&&ve==="onScroll"&&Hn("scroll",c),b||te===ae||(b=[])):(b=b||[]).push(ve,ae))}m&&(b=b||[]).push("style",m);var ve=b;(d.updateQueue=ve)&&(d.flags|=4)}},YP=function(c,d,m,E){m!==E&&(d.flags|=4)};function Tg(c,d){if(!Jn)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:E.sibling=null}}function Ri(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,E=0;if(d)for(var S=c.child;S!==null;)m|=S.lanes|S.childLanes,E|=S.subtreeFlags&14680064,E|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)m|=S.lanes|S.childLanes,E|=S.subtreeFlags,E|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=E,c.childLanes=m,d}function WG(c,d,m){var E=d.pendingProps;switch(dw(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(d),null;case 1:return os(d.type)&&Y1(),Ri(d),null;case 3:return E=d.stateNode,Ud(),Kn(as),Kn(Ai),Iw(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(c===null||c.child===null)&&(J1(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ka!==null&&(t2(ka),ka=null))),$w(c,d),Ri(d),null;case 5:Sw(d);var S=Gu(xg.current);if(m=d.type,c!==null&&d.stateNode!=null)KP(c,d,m,E,S),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!E){if(d.stateNode===null)throw Error(t(166));return Ri(d),null}if(c=Gu(wo.current),J1(d)){E=d.stateNode,m=d.type;var b=d.memoizedProps;switch(E[Eo]=d,E[gg]=b,c=(d.mode&1)!==0,m){case"dialog":Hn("cancel",E),Hn("close",E);break;case"iframe":case"object":case"embed":Hn("load",E);break;case"video":case"audio":for(S=0;S<hg.length;S++)Hn(hg[S],E);break;case"source":Hn("error",E);break;case"img":case"image":case"link":Hn("error",E),Hn("load",E);break;case"details":Hn("toggle",E);break;case"input":nn(E,b),Hn("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!b.multiple},Hn("invalid",E);break;case"textarea":q(E,b),Hn("invalid",E)}jr(m,b),S=null;for(var G in b)if(b.hasOwnProperty(G)){var te=b[G];G==="children"?typeof te=="string"?E.textContent!==te&&(b.suppressHydrationWarning!==!0&&W1(E.textContent,te,c),S=["children",te]):typeof te=="number"&&E.textContent!==""+te&&(b.suppressHydrationWarning!==!0&&W1(E.textContent,te,c),S=["children",""+te]):i.hasOwnProperty(G)&&te!=null&&G==="onScroll"&&Hn("scroll",E)}switch(m){case"input":Qe(E),Xt(E,b,!0);break;case"textarea":Qe(E),re(E);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(E.onclick=H1)}E=S,d.updateQueue=E,E!==null&&(d.flags|=4)}else{G=S.nodeType===9?S:S.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=z(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof E.is=="string"?c=G.createElement(m,{is:E.is}):(c=G.createElement(m),m==="select"&&(G=c,E.multiple?G.multiple=!0:E.size&&(G.size=E.size))):c=G.createElementNS(c,m),c[Eo]=d,c[gg]=E,HP(c,d,!1,!1),d.stateNode=c;e:{switch(G=Cs(m,E),m){case"dialog":Hn("cancel",c),Hn("close",c),S=E;break;case"iframe":case"object":case"embed":Hn("load",c),S=E;break;case"video":case"audio":for(S=0;S<hg.length;S++)Hn(hg[S],c);S=E;break;case"source":Hn("error",c),S=E;break;case"img":case"image":case"link":Hn("error",c),Hn("load",c),S=E;break;case"details":Hn("toggle",c),S=E;break;case"input":nn(c,E),S=Lt(c,E),Hn("invalid",c);break;case"option":S=E;break;case"select":c._wrapperState={wasMultiple:!!E.multiple},S=Ie({},E,{value:void 0}),Hn("invalid",c);break;case"textarea":q(c,E),S=wt(c,E),Hn("invalid",c);break;default:S=E}jr(m,S),te=S;for(b in te)if(te.hasOwnProperty(b)){var ae=te[b];b==="style"?Rt(c,ae):b==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&we(c,ae)):b==="children"?typeof ae=="string"?(m!=="textarea"||ae!=="")&&Ze(c,ae):typeof ae=="number"&&Ze(c,""+ae):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?ae!=null&&b==="onScroll"&&Hn("scroll",c):ae!=null&&A(c,b,ae,G))}switch(m){case"input":Qe(c),Xt(c,E,!1);break;case"textarea":Qe(c),re(c);break;case"option":E.value!=null&&c.setAttribute("value",""+Se(E.value));break;case"select":c.multiple=!!E.multiple,b=E.value,b!=null?C(c,!!E.multiple,b,!1):E.defaultValue!=null&&C(c,!!E.multiple,E.defaultValue,!0);break;default:typeof S.onClick=="function"&&(c.onclick=H1)}switch(m){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ri(d),null;case 6:if(c&&d.stateNode!=null)YP(c,d,c.memoizedProps,E);else{if(typeof E!="string"&&d.stateNode===null)throw Error(t(166));if(m=Gu(xg.current),Gu(wo.current),J1(d)){if(E=d.stateNode,m=d.memoizedProps,E[Eo]=d,(b=E.nodeValue!==m)&&(c=Fs,c!==null))switch(c.tag){case 3:W1(E.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&W1(E.nodeValue,m,(c.mode&1)!==0)}b&&(d.flags|=4)}else E=(m.nodeType===9?m:m.ownerDocument).createTextNode(E),E[Eo]=d,d.stateNode=E}return Ri(d),null;case 13:if(Kn(sr),E=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Jn&&js!==null&&(d.mode&1)!==0&&(d.flags&128)===0)ZC(),jd(),d.flags|=98560,b=!1;else if(b=J1(d),E!==null&&E.dehydrated!==null){if(c===null){if(!b)throw Error(t(318));if(b=d.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[Eo]=d}else jd(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ri(d),b=!1}else ka!==null&&(t2(ka),ka=null),b=!0;if(!b)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(E=E!==null,E!==(c!==null&&c.memoizedState!==null)&&E&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(sr.current&1)!==0?zr===0&&(zr=3):i2())),d.updateQueue!==null&&(d.flags|=4),Ri(d),null);case 4:return Ud(),$w(c,d),c===null&&dg(d.stateNode.containerInfo),Ri(d),null;case 10:return _w(d.type._context),Ri(d),null;case 17:return os(d.type)&&Y1(),Ri(d),null;case 19:if(Kn(sr),b=d.memoizedState,b===null)return Ri(d),null;if(E=(d.flags&128)!==0,G=b.rendering,G===null)if(E)Tg(b,!1);else{if(zr!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(G=sy(c),G!==null){for(d.flags|=128,Tg(b,!1),E=G.updateQueue,E!==null&&(d.updateQueue=E,d.flags|=4),d.subtreeFlags=0,E=m,m=d.child;m!==null;)b=m,c=E,b.flags&=14680066,G=b.alternate,G===null?(b.childLanes=0,b.lanes=c,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=G.childLanes,b.lanes=G.lanes,b.child=G.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=G.memoizedProps,b.memoizedState=G.memoizedState,b.updateQueue=G.updateQueue,b.type=G.type,c=G.dependencies,b.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return $n(sr,sr.current&1|2),d.child}c=c.sibling}b.tail!==null&&Ke()>Hd&&(d.flags|=128,E=!0,Tg(b,!1),d.lanes=4194304)}else{if(!E)if(c=sy(G),c!==null){if(d.flags|=128,E=!0,m=c.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),Tg(b,!0),b.tail===null&&b.tailMode==="hidden"&&!G.alternate&&!Jn)return Ri(d),null}else 2*Ke()-b.renderingStartTime>Hd&&m!==1073741824&&(d.flags|=128,E=!0,Tg(b,!1),d.lanes=4194304);b.isBackwards?(G.sibling=d.child,d.child=G):(m=b.last,m!==null?m.sibling=G:d.child=G,b.last=G)}return b.tail!==null?(d=b.tail,b.rendering=d,b.tail=d.sibling,b.renderingStartTime=Ke(),d.sibling=null,m=sr.current,$n(sr,E?m&1|2:m&1),d):(Ri(d),null);case 22:case 23:return r2(),E=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==E&&(d.flags|=8192),E&&(d.mode&1)!==0?(Vs&1073741824)!==0&&(Ri(d),d.subtreeFlags&6&&(d.flags|=8192)):Ri(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function HG(c,d){switch(dw(d),d.tag){case 1:return os(d.type)&&Y1(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Ud(),Kn(as),Kn(Ai),Iw(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return Sw(d),null;case 13:if(Kn(sr),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(t(340));jd()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Kn(sr),null;case 4:return Ud(),null;case 10:return _w(d.type._context),null;case 22:case 23:return r2(),null;case 24:return null;default:return null}}var gy=!1,Ci=!1,KG=typeof WeakSet=="function"?WeakSet:Set,mt=null;function $d(c,d){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(E){dr(c,d,E)}else m.current=null}function Ww(c,d,m){try{m()}catch(E){dr(c,d,E)}}var XP=!1;function YG(c,d){if(rw=rl,c=bC(),XE(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var E=m.getSelection&&m.getSelection();if(E&&E.rangeCount!==0){m=E.anchorNode;var S=E.anchorOffset,b=E.focusNode;E=E.focusOffset;try{m.nodeType,b.nodeType}catch{m=null;break e}var G=0,te=-1,ae=-1,ve=0,$e=0,Ye=c,Ue=null;t:for(;;){for(var ft;Ye!==m||S!==0&&Ye.nodeType!==3||(te=G+S),Ye!==b||E!==0&&Ye.nodeType!==3||(ae=G+E),Ye.nodeType===3&&(G+=Ye.nodeValue.length),(ft=Ye.firstChild)!==null;)Ue=Ye,Ye=ft;for(;;){if(Ye===c)break t;if(Ue===m&&++ve===S&&(te=G),Ue===b&&++$e===E&&(ae=G),(ft=Ye.nextSibling)!==null)break;Ye=Ue,Ue=Ye.parentNode}Ye=ft}m=te===-1||ae===-1?null:{start:te,end:ae}}else m=null}m=m||{start:0,end:0}}else m=null;for(iw={focusedElem:c,selectionRange:m},rl=!1,mt=d;mt!==null;)if(d=mt,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,mt=c;else for(;mt!==null;){d=mt;try{var xt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(xt!==null){var Tt=xt.memoizedProps,wr=xt.memoizedState,he=d.stateNode,oe=he.getSnapshotBeforeUpdate(d.elementType===d.type?Tt:Ma(d.type,Tt),wr);he.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ye=d.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Je){dr(d,d.return,Je)}if(c=d.sibling,c!==null){c.return=d.return,mt=c;break}mt=d.return}return xt=XP,XP=!1,xt}function Ig(c,d,m){var E=d.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var S=E=E.next;do{if((S.tag&c)===c){var b=S.destroy;S.destroy=void 0,b!==void 0&&Ww(d,m,b)}S=S.next}while(S!==E)}}function my(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&c)===c){var E=m.create;m.destroy=E()}m=m.next}while(m!==d)}}function Hw(c){var d=c.ref;if(d!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof d=="function"?d(c):d.current=c}}function qP(c){var d=c.alternate;d!==null&&(c.alternate=null,qP(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[Eo],delete d[gg],delete d[lw],delete d[PG],delete d[kG])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function ZP(c){return c.tag===5||c.tag===3||c.tag===4}function QP(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||ZP(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Kw(c,d,m){var E=c.tag;if(E===5||E===6)c=c.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(c,d):m.insertBefore(c,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(c,m)):(d=m,d.appendChild(c)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=H1));else if(E!==4&&(c=c.child,c!==null))for(Kw(c,d,m),c=c.sibling;c!==null;)Kw(c,d,m),c=c.sibling}function Yw(c,d,m){var E=c.tag;if(E===5||E===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(E!==4&&(c=c.child,c!==null))for(Yw(c,d,m),c=c.sibling;c!==null;)Yw(c,d,m),c=c.sibling}var di=null,Na=!1;function uc(c,d,m){for(m=m.child;m!==null;)JP(c,d,m),m=m.sibling}function JP(c,d,m){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(Ms,m)}catch{}switch(m.tag){case 5:Ci||$d(m,d);case 6:var E=di,S=Na;di=null,uc(c,d,m),di=E,Na=S,di!==null&&(Na?(c=di,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):di.removeChild(m.stateNode));break;case 18:di!==null&&(Na?(c=di,m=m.stateNode,c.nodeType===8?ow(c.parentNode,m):c.nodeType===1&&ow(c,m),ec(c)):ow(di,m.stateNode));break;case 4:E=di,S=Na,di=m.stateNode.containerInfo,Na=!0,uc(c,d,m),di=E,Na=S;break;case 0:case 11:case 14:case 15:if(!Ci&&(E=m.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){S=E=E.next;do{var b=S,G=b.destroy;b=b.tag,G!==void 0&&((b&2)!==0||(b&4)!==0)&&Ww(m,d,G),S=S.next}while(S!==E)}uc(c,d,m);break;case 1:if(!Ci&&($d(m,d),E=m.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=m.memoizedProps,E.state=m.memoizedState,E.componentWillUnmount()}catch(te){dr(m,d,te)}uc(c,d,m);break;case 21:uc(c,d,m);break;case 22:m.mode&1?(Ci=(E=Ci)||m.memoizedState!==null,uc(c,d,m),Ci=E):uc(c,d,m);break;default:uc(c,d,m)}}function e4(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new KG),d.forEach(function(E){var S=rB.bind(null,c,E);m.has(E)||(m.add(E),E.then(S,S))})}}function La(c,d){var m=d.deletions;if(m!==null)for(var E=0;E<m.length;E++){var S=m[E];try{var b=c,G=d,te=G;e:for(;te!==null;){switch(te.tag){case 5:di=te.stateNode,Na=!1;break e;case 3:di=te.stateNode.containerInfo,Na=!0;break e;case 4:di=te.stateNode.containerInfo,Na=!0;break e}te=te.return}if(di===null)throw Error(t(160));JP(b,G,S),di=null,Na=!1;var ae=S.alternate;ae!==null&&(ae.return=null),S.return=null}catch(ve){dr(S,d,ve)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)t4(d,c),d=d.sibling}function t4(c,d){var m=c.alternate,E=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(La(d,c),To(c),E&4){try{Ig(3,c,c.return),my(3,c)}catch(Tt){dr(c,c.return,Tt)}try{Ig(5,c,c.return)}catch(Tt){dr(c,c.return,Tt)}}break;case 1:La(d,c),To(c),E&512&&m!==null&&$d(m,m.return);break;case 5:if(La(d,c),To(c),E&512&&m!==null&&$d(m,m.return),c.flags&32){var S=c.stateNode;try{Ze(S,"")}catch(Tt){dr(c,c.return,Tt)}}if(E&4&&(S=c.stateNode,S!=null)){var b=c.memoizedProps,G=m!==null?m.memoizedProps:b,te=c.type,ae=c.updateQueue;if(c.updateQueue=null,ae!==null)try{te==="input"&&b.type==="radio"&&b.name!=null&&zt(S,b),Cs(te,G);var ve=Cs(te,b);for(G=0;G<ae.length;G+=2){var $e=ae[G],Ye=ae[G+1];$e==="style"?Rt(S,Ye):$e==="dangerouslySetInnerHTML"?we(S,Ye):$e==="children"?Ze(S,Ye):A(S,$e,Ye,ve)}switch(te){case"input":Oe(S,b);break;case"textarea":Ot(S,b);break;case"select":var Ue=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!b.multiple;var ft=b.value;ft!=null?C(S,!!b.multiple,ft,!1):Ue!==!!b.multiple&&(b.defaultValue!=null?C(S,!!b.multiple,b.defaultValue,!0):C(S,!!b.multiple,b.multiple?[]:"",!1))}S[gg]=b}catch(Tt){dr(c,c.return,Tt)}}break;case 6:if(La(d,c),To(c),E&4){if(c.stateNode===null)throw Error(t(162));S=c.stateNode,b=c.memoizedProps;try{S.nodeValue=b}catch(Tt){dr(c,c.return,Tt)}}break;case 3:if(La(d,c),To(c),E&4&&m!==null&&m.memoizedState.isDehydrated)try{ec(d.containerInfo)}catch(Tt){dr(c,c.return,Tt)}break;case 4:La(d,c),To(c);break;case 13:La(d,c),To(c),S=c.child,S.flags&8192&&(b=S.memoizedState!==null,S.stateNode.isHidden=b,!b||S.alternate!==null&&S.alternate.memoizedState!==null||(Zw=Ke())),E&4&&e4(c);break;case 22:if($e=m!==null&&m.memoizedState!==null,c.mode&1?(Ci=(ve=Ci)||$e,La(d,c),Ci=ve):La(d,c),To(c),E&8192){if(ve=c.memoizedState!==null,(c.stateNode.isHidden=ve)&&!$e&&(c.mode&1)!==0)for(mt=c,$e=c.child;$e!==null;){for(Ye=mt=$e;mt!==null;){switch(Ue=mt,ft=Ue.child,Ue.tag){case 0:case 11:case 14:case 15:Ig(4,Ue,Ue.return);break;case 1:$d(Ue,Ue.return);var xt=Ue.stateNode;if(typeof xt.componentWillUnmount=="function"){E=Ue,m=Ue.return;try{d=E,xt.props=d.memoizedProps,xt.state=d.memoizedState,xt.componentWillUnmount()}catch(Tt){dr(E,m,Tt)}}break;case 5:$d(Ue,Ue.return);break;case 22:if(Ue.memoizedState!==null){i4(Ye);continue}}ft!==null?(ft.return=Ue,mt=ft):i4(Ye)}$e=$e.sibling}e:for($e=null,Ye=c;;){if(Ye.tag===5){if($e===null){$e=Ye;try{S=Ye.stateNode,ve?(b=S.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(te=Ye.stateNode,ae=Ye.memoizedProps.style,G=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,te.style.display=St("display",G))}catch(Tt){dr(c,c.return,Tt)}}}else if(Ye.tag===6){if($e===null)try{Ye.stateNode.nodeValue=ve?"":Ye.memoizedProps}catch(Tt){dr(c,c.return,Tt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===c)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===c)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===c)break e;$e===Ye&&($e=null),Ye=Ye.return}$e===Ye&&($e=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:La(d,c),To(c),E&4&&e4(c);break;case 21:break;default:La(d,c),To(c)}}function To(c){var d=c.flags;if(d&2){try{e:{for(var m=c.return;m!==null;){if(ZP(m)){var E=m;break e}m=m.return}throw Error(t(160))}switch(E.tag){case 5:var S=E.stateNode;E.flags&32&&(Ze(S,""),E.flags&=-33);var b=QP(c);Yw(c,b,S);break;case 3:case 4:var G=E.stateNode.containerInfo,te=QP(c);Kw(c,te,G);break;default:throw Error(t(161))}}catch(ae){dr(c,c.return,ae)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function XG(c,d,m){mt=c,n4(c)}function n4(c,d,m){for(var E=(c.mode&1)!==0;mt!==null;){var S=mt,b=S.child;if(S.tag===22&&E){var G=S.memoizedState!==null||gy;if(!G){var te=S.alternate,ae=te!==null&&te.memoizedState!==null||Ci;te=gy;var ve=Ci;if(gy=G,(Ci=ae)&&!ve)for(mt=S;mt!==null;)G=mt,ae=G.child,G.tag===22&&G.memoizedState!==null?s4(S):ae!==null?(ae.return=G,mt=ae):s4(S);for(;b!==null;)mt=b,n4(b),b=b.sibling;mt=S,gy=te,Ci=ve}r4(c)}else(S.subtreeFlags&8772)!==0&&b!==null?(b.return=S,mt=b):r4(c)}}function r4(c){for(;mt!==null;){var d=mt;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Ci||my(5,d);break;case 1:var E=d.stateNode;if(d.flags&4&&!Ci)if(m===null)E.componentDidMount();else{var S=d.elementType===d.type?m.memoizedProps:Ma(d.type,m.memoizedProps);E.componentDidUpdate(S,m.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var b=d.updateQueue;b!==null&&iP(d,b,E);break;case 3:var G=d.updateQueue;if(G!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}iP(d,G,m)}break;case 5:var te=d.stateNode;if(m===null&&d.flags&4){m=te;var ae=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&m.focus();break;case"img":ae.src&&(m.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ve=d.alternate;if(ve!==null){var $e=ve.memoizedState;if($e!==null){var Ye=$e.dehydrated;Ye!==null&&ec(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ci||d.flags&512&&Hw(d)}catch(Ue){dr(d,d.return,Ue)}}if(d===c){mt=null;break}if(m=d.sibling,m!==null){m.return=d.return,mt=m;break}mt=d.return}}function i4(c){for(;mt!==null;){var d=mt;if(d===c){mt=null;break}var m=d.sibling;if(m!==null){m.return=d.return,mt=m;break}mt=d.return}}function s4(c){for(;mt!==null;){var d=mt;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{my(4,d)}catch(ae){dr(d,m,ae)}break;case 1:var E=d.stateNode;if(typeof E.componentDidMount=="function"){var S=d.return;try{E.componentDidMount()}catch(ae){dr(d,S,ae)}}var b=d.return;try{Hw(d)}catch(ae){dr(d,b,ae)}break;case 5:var G=d.return;try{Hw(d)}catch(ae){dr(d,G,ae)}}}catch(ae){dr(d,d.return,ae)}if(d===c){mt=null;break}var te=d.sibling;if(te!==null){te.return=d.return,mt=te;break}mt=d.return}}var qG=Math.ceil,py=N.ReactCurrentDispatcher,Xw=N.ReactCurrentOwner,la=N.ReactCurrentBatchConfig,dn=0,Qr=null,Cr=null,fi=0,Vs=0,Wd=sc(0),zr=0,Ag=null,Uu=0,yy=0,qw=0,bg=null,cs=null,Zw=0,Hd=1/0,fl=null,_y=!1,Qw=null,hc=null,xy=!1,dc=null,vy=0,Rg=0,Jw=null,Ey=-1,wy=0;function Ki(){return(dn&6)!==0?Ke():Ey!==-1?Ey:Ey=Ke()}function fc(c){return(c.mode&1)===0?1:(dn&2)!==0&&fi!==0?fi&-fi:NG.transition!==null?(wy===0&&(wy=X0()),wy):(c=ln,c!==0||(c=window.event,c=c===void 0?16:Ed(c.type)),c)}function Oa(c,d,m,E){if(50<Rg)throw Rg=0,Jw=null,Error(t(185));Pu(c,m,E),((dn&2)===0||c!==Qr)&&(c===Qr&&((dn&2)===0&&(yy|=m),zr===4&&gc(c,fi)),us(c,E),m===1&&dn===0&&(d.mode&1)===0&&(Hd=Ke()+500,q1&&oc()))}function us(c,d){var m=c.callbackNode;Cu(c,d);var E=el(c,c===Qr?fi:0);if(E===0)m!==null&&et(m),c.callbackNode=null,c.callbackPriority=0;else if(d=E&-E,c.callbackPriority!==d){if(m!=null&&et(m),d===1)c.tag===0?MG(o4.bind(null,c)):HC(o4.bind(null,c)),RG(function(){(dn&6)===0&&oc()}),m=null;else{switch(uo(E)){case 1:m=In;break;case 4:m=Pn;break;case 16:m=Qn;break;case 536870912:m=na;break;default:m=Qn}m=m4(m,a4.bind(null,c))}c.callbackPriority=d,c.callbackNode=m}}function a4(c,d){if(Ey=-1,wy=0,(dn&6)!==0)throw Error(t(327));var m=c.callbackNode;if(Kd()&&c.callbackNode!==m)return null;var E=el(c,c===Qr?fi:0);if(E===0)return null;if((E&30)!==0||(E&c.expiredLanes)!==0||d)d=Sy(c,E);else{d=E;var S=dn;dn|=2;var b=c4();(Qr!==c||fi!==d)&&(fl=null,Hd=Ke()+500,$u(c,d));do try{JG();break}catch(te){l4(c,te)}while(!0);yw(),py.current=b,dn=S,Cr!==null?d=0:(Qr=null,fi=0,d=zr)}if(d!==0){if(d===2&&(S=Y0(c),S!==0&&(E=S,d=e2(c,S))),d===1)throw m=Ag,$u(c,0),gc(c,E),us(c,Ke()),m;if(d===6)gc(c,E);else{if(S=c.current.alternate,(E&30)===0&&!ZG(S)&&(d=Sy(c,E),d===2&&(b=Y0(c),b!==0&&(E=b,d=e2(c,b))),d===1))throw m=Ag,$u(c,0),gc(c,E),us(c,Ke()),m;switch(c.finishedWork=S,c.finishedLanes=E,d){case 0:case 1:throw Error(t(345));case 2:Wu(c,cs,fl);break;case 3:if(gc(c,E),(E&130023424)===E&&(d=Zw+500-Ke(),10<d)){if(el(c,0)!==0)break;if(S=c.suspendedLanes,(S&E)!==E){Ki(),c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=aw(Wu.bind(null,c,cs,fl),d);break}Wu(c,cs,fl);break;case 4:if(gc(c,E),(E&4194240)===E)break;for(d=c.eventTimes,S=-1;0<E;){var G=31-ir(E);b=1<<G,G=d[G],G>S&&(S=G),E&=~b}if(E=S,E=Ke()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*qG(E/1960))-E,10<E){c.timeoutHandle=aw(Wu.bind(null,c,cs,fl),E);break}Wu(c,cs,fl);break;case 5:Wu(c,cs,fl);break;default:throw Error(t(329))}}}return us(c,Ke()),c.callbackNode===m?a4.bind(null,c):null}function e2(c,d){var m=bg;return c.current.memoizedState.isDehydrated&&($u(c,d).flags|=256),c=Sy(c,d),c!==2&&(d=cs,cs=m,d!==null&&t2(d)),c}function t2(c){cs===null?cs=c:cs.push.apply(cs,c)}function ZG(c){for(var d=c;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var E=0;E<m.length;E++){var S=m[E],b=S.getSnapshot;S=S.value;try{if(!Pa(b(),S))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function gc(c,d){for(d&=~qw,d&=~yy,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var m=31-ir(d),E=1<<m;c[m]=-1,d&=~E}}function o4(c){if((dn&6)!==0)throw Error(t(327));Kd();var d=el(c,0);if((d&1)===0)return us(c,Ke()),null;var m=Sy(c,d);if(c.tag!==0&&m===2){var E=Y0(c);E!==0&&(d=E,m=e2(c,E))}if(m===1)throw m=Ag,$u(c,0),gc(c,d),us(c,Ke()),m;if(m===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Wu(c,cs,fl),us(c,Ke()),null}function n2(c,d){var m=dn;dn|=1;try{return c(d)}finally{dn=m,dn===0&&(Hd=Ke()+500,q1&&oc())}}function zu(c){dc!==null&&dc.tag===0&&(dn&6)===0&&Kd();var d=dn;dn|=1;var m=la.transition,E=ln;try{if(la.transition=null,ln=1,c)return c()}finally{ln=E,la.transition=m,dn=d,(dn&6)===0&&oc()}}function r2(){Vs=Wd.current,Kn(Wd)}function $u(c,d){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,bG(m)),Cr!==null)for(m=Cr.return;m!==null;){var E=m;switch(dw(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Y1();break;case 3:Ud(),Kn(as),Kn(Ai),Iw();break;case 5:Sw(E);break;case 4:Ud();break;case 13:Kn(sr);break;case 19:Kn(sr);break;case 10:_w(E.type._context);break;case 22:case 23:r2()}m=m.return}if(Qr=c,Cr=c=mc(c.current,null),fi=Vs=d,zr=0,Ag=null,qw=yy=Uu=0,cs=bg=null,Vu!==null){for(d=0;d<Vu.length;d++)if(m=Vu[d],E=m.interleaved,E!==null){m.interleaved=null;var S=E.next,b=m.pending;if(b!==null){var G=b.next;b.next=S,E.next=G}m.pending=E}Vu=null}return c}function l4(c,d){do{var m=Cr;try{if(yw(),ay.current=uy,oy){for(var E=ar.memoizedState;E!==null;){var S=E.queue;S!==null&&(S.pending=null),E=E.next}oy=!1}if(Bu=0,Zr=Ur=ar=null,vg=!1,Eg=0,Xw.current=null,m===null||m.return===null){zr=1,Ag=d,Cr=null;break}e:{var b=c,G=m.return,te=m,ae=d;if(d=fi,te.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var ve=ae,$e=te,Ye=$e.tag;if(($e.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ue=$e.alternate;Ue?($e.updateQueue=Ue.updateQueue,$e.memoizedState=Ue.memoizedState,$e.lanes=Ue.lanes):($e.updateQueue=null,$e.memoizedState=null)}var ft=NP(G);if(ft!==null){ft.flags&=-257,LP(ft,G,te,b,d),ft.mode&1&&MP(b,ve,d),d=ft,ae=ve;var xt=d.updateQueue;if(xt===null){var Tt=new Set;Tt.add(ae),d.updateQueue=Tt}else xt.add(ae);break e}else{if((d&1)===0){MP(b,ve,d),i2();break e}ae=Error(t(426))}}else if(Jn&&te.mode&1){var wr=NP(G);if(wr!==null){(wr.flags&65536)===0&&(wr.flags|=256),LP(wr,G,te,b,d),mw(zd(ae,te));break e}}b=ae=zd(ae,te),zr!==4&&(zr=2),bg===null?bg=[b]:bg.push(b),b=G;do{switch(b.tag){case 3:b.flags|=65536,d&=-d,b.lanes|=d;var he=PP(b,ae,d);rP(b,he);break e;case 1:te=ae;var oe=b.type,ye=b.stateNode;if((b.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(hc===null||!hc.has(ye)))){b.flags|=65536,d&=-d,b.lanes|=d;var Je=kP(b,te,d);rP(b,Je);break e}}b=b.return}while(b!==null)}h4(m)}catch(At){d=At,Cr===m&&m!==null&&(Cr=m=m.return);continue}break}while(!0)}function c4(){var c=py.current;return py.current=uy,c===null?uy:c}function i2(){(zr===0||zr===3||zr===2)&&(zr=4),Qr===null||(Uu&268435455)===0&&(yy&268435455)===0||gc(Qr,fi)}function Sy(c,d){var m=dn;dn|=2;var E=c4();(Qr!==c||fi!==d)&&(fl=null,$u(c,d));do try{QG();break}catch(S){l4(c,S)}while(!0);if(yw(),dn=m,py.current=E,Cr!==null)throw Error(t(261));return Qr=null,fi=0,zr}function QG(){for(;Cr!==null;)u4(Cr)}function JG(){for(;Cr!==null&&!ut();)u4(Cr)}function u4(c){var d=g4(c.alternate,c,Vs);c.memoizedProps=c.pendingProps,d===null?h4(c):Cr=d,Xw.current=null}function h4(c){var d=c;do{var m=d.alternate;if(c=d.return,(d.flags&32768)===0){if(m=WG(m,d,Vs),m!==null){Cr=m;return}}else{if(m=HG(m,d),m!==null){m.flags&=32767,Cr=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{zr=6,Cr=null;return}}if(d=d.sibling,d!==null){Cr=d;return}Cr=d=c}while(d!==null);zr===0&&(zr=5)}function Wu(c,d,m){var E=ln,S=la.transition;try{la.transition=null,ln=1,eB(c,d,m,E)}finally{la.transition=S,ln=E}return null}function eB(c,d,m,E){do Kd();while(dc!==null);if((dn&6)!==0)throw Error(t(327));m=c.finishedWork;var S=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var b=m.lanes|m.childLanes;if($E(c,b),c===Qr&&(Cr=Qr=null,fi=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||xy||(xy=!0,m4(Qn,function(){return Kd(),null})),b=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||b){b=la.transition,la.transition=null;var G=ln;ln=1;var te=dn;dn|=4,Xw.current=null,YG(c,m),t4(m,c),vG(iw),rl=!!rw,iw=rw=null,c.current=m,XG(m),He(),dn=te,ln=G,la.transition=b}else c.current=m;if(xy&&(xy=!1,dc=c,vy=S),b=c.pendingLanes,b===0&&(hc=null),ql(m.stateNode),us(c,Ke()),d!==null)for(E=c.onRecoverableError,m=0;m<d.length;m++)S=d[m],E(S.value,{componentStack:S.stack,digest:S.digest});if(_y)throw _y=!1,c=Qw,Qw=null,c;return(vy&1)!==0&&c.tag!==0&&Kd(),b=c.pendingLanes,(b&1)!==0?c===Jw?Rg++:(Rg=0,Jw=c):Rg=0,oc(),null}function Kd(){if(dc!==null){var c=uo(vy),d=la.transition,m=ln;try{if(la.transition=null,ln=16>c?16:c,dc===null)var E=!1;else{if(c=dc,dc=null,vy=0,(dn&6)!==0)throw Error(t(331));var S=dn;for(dn|=4,mt=c.current;mt!==null;){var b=mt,G=b.child;if((mt.flags&16)!==0){var te=b.deletions;if(te!==null){for(var ae=0;ae<te.length;ae++){var ve=te[ae];for(mt=ve;mt!==null;){var $e=mt;switch($e.tag){case 0:case 11:case 15:Ig(8,$e,b)}var Ye=$e.child;if(Ye!==null)Ye.return=$e,mt=Ye;else for(;mt!==null;){$e=mt;var Ue=$e.sibling,ft=$e.return;if(qP($e),$e===ve){mt=null;break}if(Ue!==null){Ue.return=ft,mt=Ue;break}mt=ft}}}var xt=b.alternate;if(xt!==null){var Tt=xt.child;if(Tt!==null){xt.child=null;do{var wr=Tt.sibling;Tt.sibling=null,Tt=wr}while(Tt!==null)}}mt=b}}if((b.subtreeFlags&2064)!==0&&G!==null)G.return=b,mt=G;else e:for(;mt!==null;){if(b=mt,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:Ig(9,b,b.return)}var he=b.sibling;if(he!==null){he.return=b.return,mt=he;break e}mt=b.return}}var oe=c.current;for(mt=oe;mt!==null;){G=mt;var ye=G.child;if((G.subtreeFlags&2064)!==0&&ye!==null)ye.return=G,mt=ye;else e:for(G=oe;mt!==null;){if(te=mt,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:my(9,te)}}catch(At){dr(te,te.return,At)}if(te===G){mt=null;break e}var Je=te.sibling;if(Je!==null){Je.return=te.return,mt=Je;break e}mt=te.return}}if(dn=S,oc(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(Ms,c)}catch{}E=!0}return E}finally{ln=m,la.transition=d}}return!1}function d4(c,d,m){d=zd(m,d),d=PP(c,d,1),c=cc(c,d,1),d=Ki(),c!==null&&(Pu(c,1,d),us(c,d))}function dr(c,d,m){if(c.tag===3)d4(c,c,m);else for(;d!==null;){if(d.tag===3){d4(d,c,m);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(hc===null||!hc.has(E))){c=zd(m,c),c=kP(d,c,1),d=cc(d,c,1),c=Ki(),d!==null&&(Pu(d,1,c),us(d,c));break}}d=d.return}}function tB(c,d,m){var E=c.pingCache;E!==null&&E.delete(d),d=Ki(),c.pingedLanes|=c.suspendedLanes&m,Qr===c&&(fi&m)===m&&(zr===4||zr===3&&(fi&130023424)===fi&&500>Ke()-Zw?$u(c,0):qw|=m),us(c,d)}function f4(c,d){d===0&&((c.mode&1)===0?d=1:(d=Zl,Zl<<=1,(Zl&130023424)===0&&(Zl=4194304)));var m=Ki();c=ul(c,d),c!==null&&(Pu(c,d,m),us(c,m))}function nB(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),f4(c,m)}function rB(c,d){var m=0;switch(c.tag){case 13:var E=c.stateNode,S=c.memoizedState;S!==null&&(m=S.retryLane);break;case 19:E=c.stateNode;break;default:throw Error(t(314))}E!==null&&E.delete(d),f4(c,m)}var g4;g4=function(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps||as.current)ls=!0;else{if((c.lanes&m)===0&&(d.flags&128)===0)return ls=!1,$G(c,d,m);ls=(c.flags&131072)!==0}else ls=!1,Jn&&(d.flags&1048576)!==0&&KC(d,Q1,d.index);switch(d.lanes=0,d.tag){case 2:var E=d.type;fy(c,d),c=d.pendingProps;var S=Od(d,Ai.current);Bd(d,m),S=Rw(null,d,E,c,S,m);var b=Cw();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,os(E)?(b=!0,X1(d)):b=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Ew(d),S.updater=hy,d.stateNode=S,S._reactInternals=d,Ow(d,E,c,m),d=Vw(null,d,E,!0,b,m)):(d.tag=0,Jn&&b&&hw(d),Hi(null,d,S,m),d=d.child),d;case 16:E=d.elementType;e:{switch(fy(c,d),c=d.pendingProps,S=E._init,E=S(E._payload),d.type=E,S=d.tag=sB(E),c=Ma(E,c),S){case 0:d=jw(null,d,E,c,m);break e;case 1:d=GP(null,d,E,c,m);break e;case 11:d=OP(null,d,E,c,m);break e;case 14:d=DP(null,d,E,Ma(E.type,c),m);break e}throw Error(t(306,E,""))}return d;case 0:return E=d.type,S=d.pendingProps,S=d.elementType===E?S:Ma(E,S),jw(c,d,E,S,m);case 1:return E=d.type,S=d.pendingProps,S=d.elementType===E?S:Ma(E,S),GP(c,d,E,S,m);case 3:e:{if(BP(d),c===null)throw Error(t(387));E=d.pendingProps,b=d.memoizedState,S=b.element,nP(c,d),iy(d,E,null,m);var G=d.memoizedState;if(E=G.element,b.isDehydrated)if(b={element:E,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},d.updateQueue.baseState=b,d.memoizedState=b,d.flags&256){S=zd(Error(t(423)),d),d=UP(c,d,E,m,S);break e}else if(E!==S){S=zd(Error(t(424)),d),d=UP(c,d,E,m,S);break e}else for(js=ic(d.stateNode.containerInfo.firstChild),Fs=d,Jn=!0,ka=null,m=eP(d,null,E,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(jd(),E===S){d=dl(c,d,m);break e}Hi(c,d,E,m)}d=d.child}return d;case 5:return sP(d),c===null&&gw(d),E=d.type,S=d.pendingProps,b=c!==null?c.memoizedProps:null,G=S.children,sw(E,S)?G=null:b!==null&&sw(E,b)&&(d.flags|=32),VP(c,d),Hi(c,d,G,m),d.child;case 6:return c===null&&gw(d),null;case 13:return zP(c,d,m);case 4:return ww(d,d.stateNode.containerInfo),E=d.pendingProps,c===null?d.child=Vd(d,null,E,m):Hi(c,d,E,m),d.child;case 11:return E=d.type,S=d.pendingProps,S=d.elementType===E?S:Ma(E,S),OP(c,d,E,S,m);case 7:return Hi(c,d,d.pendingProps,m),d.child;case 8:return Hi(c,d,d.pendingProps.children,m),d.child;case 12:return Hi(c,d,d.pendingProps.children,m),d.child;case 10:e:{if(E=d.type._context,S=d.pendingProps,b=d.memoizedProps,G=S.value,$n(ty,E._currentValue),E._currentValue=G,b!==null)if(Pa(b.value,G)){if(b.children===S.children&&!as.current){d=dl(c,d,m);break e}}else for(b=d.child,b!==null&&(b.return=d);b!==null;){var te=b.dependencies;if(te!==null){G=b.child;for(var ae=te.firstContext;ae!==null;){if(ae.context===E){if(b.tag===1){ae=hl(-1,m&-m),ae.tag=2;var ve=b.updateQueue;if(ve!==null){ve=ve.shared;var $e=ve.pending;$e===null?ae.next=ae:(ae.next=$e.next,$e.next=ae),ve.pending=ae}}b.lanes|=m,ae=b.alternate,ae!==null&&(ae.lanes|=m),xw(b.return,m,d),te.lanes|=m;break}ae=ae.next}}else if(b.tag===10)G=b.type===d.type?null:b.child;else if(b.tag===18){if(G=b.return,G===null)throw Error(t(341));G.lanes|=m,te=G.alternate,te!==null&&(te.lanes|=m),xw(G,m,d),G=b.sibling}else G=b.child;if(G!==null)G.return=b;else for(G=b;G!==null;){if(G===d){G=null;break}if(b=G.sibling,b!==null){b.return=G.return,G=b;break}G=G.return}b=G}Hi(c,d,S.children,m),d=d.child}return d;case 9:return S=d.type,E=d.pendingProps.children,Bd(d,m),S=aa(S),E=E(S),d.flags|=1,Hi(c,d,E,m),d.child;case 14:return E=d.type,S=Ma(E,d.pendingProps),S=Ma(E.type,S),DP(c,d,E,S,m);case 15:return FP(c,d,d.type,d.pendingProps,m);case 17:return E=d.type,S=d.pendingProps,S=d.elementType===E?S:Ma(E,S),fy(c,d),d.tag=1,os(E)?(c=!0,X1(d)):c=!1,Bd(d,m),RP(d,E,S),Ow(d,E,S,m),Vw(null,d,E,!0,c,m);case 19:return WP(c,d,m);case 22:return jP(c,d,m)}throw Error(t(156,d.tag))};function m4(c,d){return We(c,d)}function iB(c,d,m,E){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ca(c,d,m,E){return new iB(c,d,m,E)}function s2(c){return c=c.prototype,!(!c||!c.isReactComponent)}function sB(c){if(typeof c=="function")return s2(c)?1:0;if(c!=null){if(c=c.$$typeof,c===W)return 11;if(c===Me)return 14}return 2}function mc(c,d){var m=c.alternate;return m===null?(m=ca(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function Ty(c,d,m,E,S,b){var G=2;if(E=c,typeof c=="function")s2(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case k:return Hu(m.children,S,b,d);case P:G=8,S|=8;break;case M:return c=ca(12,m,d,S|2),c.elementType=M,c.lanes=b,c;case F:return c=ca(13,m,d,S),c.elementType=F,c.lanes=b,c;case Te:return c=ca(19,m,d,S),c.elementType=Te,c.lanes=b,c;case be:return Iy(m,S,b,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case j:G=10;break e;case O:G=9;break e;case W:G=11;break e;case Me:G=14;break e;case Le:G=16,E=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return d=ca(G,m,d,S),d.elementType=c,d.type=E,d.lanes=b,d}function Hu(c,d,m,E){return c=ca(7,c,E,d),c.lanes=m,c}function Iy(c,d,m,E){return c=ca(22,c,E,d),c.elementType=be,c.lanes=m,c.stateNode={isHidden:!1},c}function a2(c,d,m){return c=ca(6,c,null,d),c.lanes=m,c}function o2(c,d,m){return d=ca(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function aB(c,d,m,E,S){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q0(0),this.expirationTimes=q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q0(0),this.identifierPrefix=E,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function l2(c,d,m,E,S,b,G,te,ae){return c=new aB(c,d,m,te,ae),d===1?(d=1,b===!0&&(d|=8)):d=0,b=ca(3,null,null,d),c.current=b,b.stateNode=c,b.memoizedState={element:E,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ew(b),c}function oB(c,d,m){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:E==null?null:""+E,children:c,containerInfo:d,implementation:m}}function p4(c){if(!c)return ac;c=c._reactInternals;e:{if(J(c)!==c||c.tag!==1)throw Error(t(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(os(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(c.tag===1){var m=c.type;if(os(m))return $C(c,m,d)}return d}function y4(c,d,m,E,S,b,G,te,ae){return c=l2(m,E,!0,c,S,b,G,te,ae),c.context=p4(null),m=c.current,E=Ki(),S=fc(m),b=hl(E,S),b.callback=d??null,cc(m,b,S),c.current.lanes=S,Pu(c,S,E),us(c,E),c}function Ay(c,d,m,E){var S=d.current,b=Ki(),G=fc(S);return m=p4(m),d.context===null?d.context=m:d.pendingContext=m,d=hl(b,G),d.payload={element:c},E=E===void 0?null:E,E!==null&&(d.callback=E),c=cc(S,d,G),c!==null&&(Oa(c,S,G,b),ry(c,S,G)),G}function by(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function _4(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function c2(c,d){_4(c,d),(c=c.alternate)&&_4(c,d)}function lB(){return null}var x4=typeof reportError=="function"?reportError:function(c){console.error(c)};function u2(c){this._internalRoot=c}Ry.prototype.render=u2.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(t(409));Ay(c,d,null,null)},Ry.prototype.unmount=u2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;zu(function(){Ay(null,c,null,null)}),d[al]=null}};function Ry(c){this._internalRoot=c}Ry.prototype.unstable_scheduleHydration=function(c){if(c){var d=eg();c={blockedOn:null,target:c,priority:d};for(var m=0;m<Ns.length&&d!==0&&d<Ns[m].priority;m++);Ns.splice(m,0,c),m===0&&xd(c)}};function h2(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function Cy(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function v4(){}function cB(c,d,m,E,S){if(S){if(typeof E=="function"){var b=E;E=function(){var ve=by(G);b.call(ve)}}var G=y4(d,E,c,0,null,!1,!1,"",v4);return c._reactRootContainer=G,c[al]=G.current,dg(c.nodeType===8?c.parentNode:c),zu(),G}for(;S=c.lastChild;)c.removeChild(S);if(typeof E=="function"){var te=E;E=function(){var ve=by(ae);te.call(ve)}}var ae=l2(c,0,!1,null,null,!1,!1,"",v4);return c._reactRootContainer=ae,c[al]=ae.current,dg(c.nodeType===8?c.parentNode:c),zu(function(){Ay(d,ae,m,E)}),ae}function Py(c,d,m,E,S){var b=m._reactRootContainer;if(b){var G=b;if(typeof S=="function"){var te=S;S=function(){var ae=by(G);te.call(ae)}}Ay(d,G,c,S)}else G=cB(m,d,c,S,E);return by(G)}Q0=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var m=xn(d.pendingLanes);m!==0&&(Z0(d,m|1),us(d,Ke()),(dn&6)===0&&(Hd=Ke()+500,oc()))}break;case 13:zu(function(){var E=ul(c,1);if(E!==null){var S=Ki();Oa(E,c,1,S)}}),c2(c,1)}},yd=function(c){if(c.tag===13){var d=ul(c,134217728);if(d!==null){var m=Ki();Oa(d,c,134217728,m)}c2(c,134217728)}},J0=function(c){if(c.tag===13){var d=fc(c),m=ul(c,d);if(m!==null){var E=Ki();Oa(m,c,d,E)}c2(c,d)}},eg=function(){return ln},tg=function(c,d){var m=ln;try{return ln=c,d()}finally{ln=m}},Ar=function(c,d,m){switch(d){case"input":if(Oe(c,m),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var E=m[d];if(E!==c&&E.form===c.form){var S=K1(E);if(!S)throw Error(t(90));gt(E),Oe(E,S)}}}break;case"textarea":Ot(c,m);break;case"select":d=m.value,d!=null&&C(c,!!m.multiple,d,!1)}},is=n2,Vr=zu;var uB={usingClientEntryPoint:!1,Events:[mg,Nd,K1,ks,nr,n2]},Cg={findFiberByHostInstance:Ou,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hB={bundleType:Cg.bundleType,version:Cg.version,rendererPackageName:Cg.rendererPackageName,rendererConfig:Cg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=_e(c),c===null?null:c.stateNode},findFiberByHostInstance:Cg.findFiberByHostInstance||lB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ky.isDisabled&&ky.supportsFiber)try{Ms=ky.inject(hB),vr=ky}catch{}}return hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uB,hs.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h2(d))throw Error(t(200));return oB(c,d,null,m)},hs.createRoot=function(c,d){if(!h2(c))throw Error(t(299));var m=!1,E="",S=x4;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=l2(c,1,!1,null,null,m,!1,E,S),c[al]=d.current,dg(c.nodeType===8?c.parentNode:c),new u2(d)},hs.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=_e(d),c=c===null?null:c.stateNode,c},hs.flushSync=function(c){return zu(c)},hs.hydrate=function(c,d,m){if(!Cy(d))throw Error(t(200));return Py(null,c,d,!0,m)},hs.hydrateRoot=function(c,d,m){if(!h2(c))throw Error(t(405));var E=m!=null&&m.hydratedSources||null,S=!1,b="",G=x4;if(m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(b=m.identifierPrefix),m.onRecoverableError!==void 0&&(G=m.onRecoverableError)),d=y4(d,null,c,1,m??null,S,!1,b,G),c[al]=d.current,dg(c),E)for(c=0;c<E.length;c++)m=E[c],S=m._getVersion,S=S(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,S]:d.mutableSourceEagerHydrationData.push(m,S);return new Ry(d)},hs.render=function(c,d,m){if(!Cy(d))throw Error(t(200));return Py(null,c,d,!1,m)},hs.unmountComponentAtNode=function(c){if(!Cy(c))throw Error(t(40));return c._reactRootContainer?(zu(function(){Py(null,null,c,!1,function(){c._reactRootContainer=null,c[al]=null})}),!0):!1},hs.unstable_batchedUpdates=n2,hs.unstable_renderSubtreeIntoContainer=function(c,d,m,E){if(!Cy(m))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return Py(c,d,m,!1,E)},hs.version="18.3.1-next-f1338f8080-20240426",hs}var R4;function xB(){if(R4)return g2.exports;R4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),g2.exports=_B(),g2.exports}var C4;function vB(){if(C4)return My;C4=1;var n=xB();return My.createRoot=n.createRoot,My.hydrateRoot=n.hydrateRoot,My}var EB=vB();const wB=GI(EB);var se=Lp();const SB=GI(se),gs={ADD:"add",REMOVE:"remove"},Jf={PROPERTYCHANGE:"propertychange"},$t={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class wv{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function TB(n,e,t){let r,i;t=t||Il;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function Il(n,e){return n>e?1:n<e?-1:0}function IB(n,e){return n<e?1:n>e?-1:0}function Sv(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function AB(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function An(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function xu(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function bB(n,e,t){const r=e||Il;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function Bm(){return!0}function Tv(){return!1}function Um(){}function FO(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!xu(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function jO(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Op(n){for(const e in n)delete n[e]}function Ph(n){let e;for(e in n)return!1;return!e}class qo{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let Dp=class extends wv{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new qo(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let l;for(let u=0,h=i.length;u<h;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(s):l=i[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[r]===0){let u=o[r];for(delete o[r];u--;)this.removeEventListener(r,Um);delete a[r]}return l}disposeInternal(){this.listeners_&&Op(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Um,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function hn(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function K_(n,e,t,r){return hn(n,e,t,r,!0)}function Wn(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Op(n))}class Fp extends Dp{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent($t.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=hn(this,e[s],t);return i}return hn(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=K_(this,e[s],t)}else r=K_(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)RB(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Fp.prototype.on;Fp.prototype.once;Fp.prototype.un;function RB(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Wn(n[e]);else Wn(n)}function jt(){throw new Error("Unimplemented abstract method.")}let CB=0;function _n(n){return n.ol_uid||(n.ol_uid=String(++CB))}class P4 extends qo{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Zo extends Fp{constructor(e){super(),this.on,this.once,this.un,_n(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new P4(r,e,t)),r=Jf.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new P4(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Ph(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const k4={LENGTH:"length"};class Ny extends qo{constructor(e,t,r){super(e),this.element=t,this.index=r}}class _a extends Zo{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(k4.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Ny(gs.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Ny(gs.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Ny(gs.REMOVE,i,e)),this.dispatchEvent(new Ny(gs.ADD,t,e))}updateLength_(){this.set(k4.LENGTH,this.array_.length)}assertUnique_(e,t){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function Cn(n,e){if(!n)throw new Error(e)}let to=class VO extends Zo{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new VO(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Wn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=hn(e,$t.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?PB(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function PB(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Cn(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const ei={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function M4(n){const e=Zs();for(let t=0,r=n.length;t<r;++t)um(e,n[t]);return e}function zm(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function GO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function ed(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function kh(n,e){return BI(n,e[0],e[1])}function Fc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function BI(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function WS(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let l=ei.UNKNOWN;return a<t?l=l|ei.LEFT:a>i&&(l=l|ei.RIGHT),o<r?l=l|ei.BELOW:o>s&&(l=l|ei.ABOVE),l===ei.UNKNOWN&&(l=ei.INTERSECTING),l}function Zs(){return[1/0,1/0,-1/0,-1/0]}function nu(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function jp(n){return nu(1/0,1/0,-1/0,-1/0,n)}function BO(n,e){const t=n[0],r=n[1];return nu(t,r,t,r,e)}function UI(n,e,t,r,i){const s=jp(i);return zO(s,n,e,t,r)}function e0(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function UO(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function um(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function zO(n,e,t,r,i){for(;t<r;t+=i)kB(n,e[t],e[t+1]);return n}function kB(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function $O(n,e){let t;return t=e(Iv(n)),t||(t=e(Av(n)),t)||(t=e(bv(n)),t)||(t=e(td(n)),t)?t:!1}function HS(n){let e=0;return R0(n)||(e=tn(n)*Mr(n)),e}function Iv(n){return[n[0],n[1]]}function Av(n){return[n[2],n[1]]}function Uo(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function MB(n,e){let t;if(e==="bottom-left")t=Iv(n);else if(e==="bottom-right")t=Av(n);else if(e==="top-left")t=td(n);else if(e==="top-right")t=bv(n);else throw new Error("Invalid corner");return t}function Y_(n,e,t,r,i){const[s,a,o,l,u,h,f,g]=WO(n,e,t,r);return nu(Math.min(s,o,u,f),Math.min(a,l,h,g),Math.max(s,o,u,f),Math.max(a,l,h,g),i)}function WO(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),l=i*a,u=i*o,h=s*a,f=s*o,g=n[0],p=n[1];return[g-l+f,p-u-h,g-l-f,p-u+h,g+l-f,p+u+h,g+l+f,p+u-h,g-l+f,p-u-h]}function Mr(n){return n[3]-n[1]}function Al(n,e,t){const r=t||Zs();return Qi(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):jp(r),r}function td(n){return[n[0],n[3]]}function bv(n){return[n[2],n[3]]}function tn(n){return n[2]-n[0]}function Qi(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function R0(n){return n[2]<n[0]||n[3]<n[1]}function NB(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function LB(n,e,t){let r=!1;const i=WS(n,e),s=WS(n,t);if(i===ei.INTERSECTING||s===ei.INTERSECTING)r=!0;else{const a=n[0],o=n[1],l=n[2],u=n[3],h=e[0],f=e[1],g=t[0],p=t[1],x=(p-f)/(g-h);let v,w;s&ei.ABOVE&&!(i&ei.ABOVE)&&(v=g-(p-u)/x,r=v>=a&&v<=l),!r&&s&ei.RIGHT&&!(i&ei.RIGHT)&&(w=p-(g-l)*x,r=w>=o&&w<=u),!r&&s&ei.BELOW&&!(i&ei.BELOW)&&(v=g-(p-o)/x,r=v>=a&&v<=l),!r&&s&ei.LEFT&&!(i&ei.LEFT)&&(w=p-(g-a)*x,r=w>=o&&w<=u)}return r}function HO(n,e){const t=e.getExtent(),r=Uo(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=tn(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function KO(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];HO(n,e);const i=tn(r);if(tn(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function Yn(n,e,t){return Math.min(Math.max(n,e),t)}function OB(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const l=((n-t)*a+(e-r)*o)/(a*a+o*o);l>1?(t=i,r=s):l>0&&(t+=a*l,r+=o*l)}return Eh(n,e,t,r)}function Eh(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function DB(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const l=Math.abs(n[o][r]);l>s&&(s=l,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const l=-n[o][r]/n[r][r];for(let u=r;u<e+1;u++)r==u?n[o][u]=0:n[o][u]+=l*n[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function N4(n){return n*180/Math.PI}function bl(n){return n*Math.PI/180}function Yc(n,e){const t=n%e;return t*e<0?t+e:t}function zs(n,e,t){return n+t*(e-n)}function Vp(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function X_(n,e){return Math.round(Vp(n,e))}function Ly(n,e){return Math.floor(Vp(n,e))}function jc(n,e){return Math.ceil(Vp(n,e))}function KS(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function kg(n,e,t){const r=""+n;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function YO(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const s=parseInt(t[i]||"0",10),a=parseInt(r[i]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function FB(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function q_(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function zI(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function jB(n,e){return n[0]*=e,n[1]*=e,n}function XO(n,e){if(e.canWrapX()){const t=tn(e.getExtent()),r=qO(n,e,t);r&&(n[0]-=r*t)}return n}function qO(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||tn(r),i=Math.floor((n[0]-r[0])/t)),i}function ZO(...n){console.warn(...n)}const t0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Rv=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||t0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Gp=6378137,If=Math.PI*Gp,VB=[-If,-If,If,If],GB=[-180,-85,180,85],Oy=Gp*Math.log(Math.tan(Math.PI/2));class Yd extends Rv{constructor(e){super({code:e,units:"m",extent:VB,global:!0,worldExtent:GB,getPointResolution:function(t,r){return t/Math.cosh(r[1]/Gp)}})}}const L4=[new Yd("EPSG:3857"),new Yd("EPSG:102100"),new Yd("EPSG:102113"),new Yd("EPSG:900913"),new Yd("http://www.opengis.net/def/crs/EPSG/0/3857"),new Yd("http://www.opengis.net/gml/srs/epsg.xml#3857")];function BB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=If*n[s]/180;let a=Gp*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>Oy?a=Oy:a<-Oy&&(a=-Oy),e[s+1]=a}return e}function UB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/If,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Gp))/Math.PI-90;return e}const zB=6378137,O4=[-180,-90,180,90],$B=Math.PI*zB/180;class Ku extends Rv{constructor(e,t){super({code:e,units:"degrees",extent:O4,axisOrientation:t,global:!0,metersPerUnit:$B,worldExtent:O4})}}const D4=[new Ku("CRS:84"),new Ku("EPSG:4326","neu"),new Ku("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ku("urn:ogc:def:crs:OGC:2:84"),new Ku("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ku("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ku("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let YS={};function x_(n){return YS[n]||YS[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function WB(n,e){YS[n]=e}let Df={};function Mh(n,e,t){const r=n.getCode(),i=e.getCode();r in Df||(Df[r]={}),Df[r][i]=t}function v_(n,e){return n in Df&&e in Df[n]?Df[n][e]:null}const Z_=.9996,wa=.00669438,Cv=wa*wa,Pv=Cv*wa,dh=wa/(1-wa),F4=Math.sqrt(1-wa),n0=(1-F4)/(1+F4),QO=n0*n0,$I=QO*n0,WI=$I*n0,JO=WI*n0,e5=1-wa/4-3*Cv/64-5*Pv/256,HB=3*wa/8+3*Cv/32+45*Pv/1024,KB=15*Cv/256+45*Pv/1024,YB=35*Pv/3072,XB=3/2*n0-27/32*$I+269/512*JO,qB=21/16*QO-55/32*WI,ZB=151/96*$I-417/128*JO,QB=1097/512*WI,Q_=6378137;function JB(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/Z_/(Q_*e5),o=a+XB*Math.sin(2*a)+qB*Math.sin(4*a)+ZB*Math.sin(6*a)+QB*Math.sin(8*a),l=Math.sin(o),u=l*l,h=Math.cos(o),f=l/h,g=f*f,p=g*g,x=1-wa*u,v=Math.sqrt(1-wa*u),w=Q_/v,T=(1-wa)/x,I=dh*h**2,A=I*I,N=r/(w*Z_),D=N*N,B=D*N,k=B*N,P=k*N,M=P*N,j=o-f/T*(D/2-k/24*(5+3*g+10*I-4*A-9*dh))+M/720*(61+90*g+298*I+45*p-252*dh-3*A);let O=(N-B/6*(1+2*g+I)+P/120*(5-2*I+28*g-3*A+8*dh+24*p))/h;return O=KS(O+bl(t5(t.number)),-Math.PI,Math.PI),[N4(O),N4(j)]}const j4=-80,V4=84,eU=-180,tU=180;function nU(n,e,t){n=KS(n,eU,tU),e<j4?e=j4:e>V4&&(e=V4);const r=bl(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,l=o*o,u=bl(n),h=t5(t.number),f=bl(h),g=Q_/Math.sqrt(1-wa*i**2),p=dh*s**2,x=s*KS(u-f,-Math.PI,Math.PI),v=x*x,w=v*x,T=w*x,I=T*x,A=I*x,N=Q_*(e5*r-HB*Math.sin(2*r)+KB*Math.sin(4*r)-YB*Math.sin(6*r)),D=Z_*g*(x+w/6*(1-o+p)+I/120*(5-18*o+l+72*p-58*dh))+5e5;let B=Z_*(N+g*a*(v/2+T/24*(5-o+9*p+4*p**2)+A/720*(61-58*o+l+600*p-330*dh)));return t.north||(B+=1e7),[D,B]}function t5(n){return(n-1)*6-180+3}const rU=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function n5(n){let e=0;for(const i of rU){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function G4(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],u=t[o+1],h=n(l,u,e);r[o]=h[0],r[o+1]=h[1]}return r}}function iU(n){return n5(n)?new Rv({code:n,units:"m"}):null}function sU(n){const e=n5(n.getCode());return e?{forward:G4(nU,e),inverse:G4(JB,e)}:null}const aU=63710088e-1;function B4(n,e,t){t=t||aU;const r=bl(n[1]),i=bl(e[1]),s=(i-r)/2,a=bl(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const oU=[sU],lU=[iU];let XS=!0;function r5(n){XS=!1}function HI(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function J_(n){WB(n.getCode(),n),Mh(n,n,HI)}function cU(n){n.forEach(J_)}function Bn(n){if(typeof n!="string")return n;const e=x_(n);if(e)return e;for(const t of lU){const r=t(n);if(r)return r}return null}function ex(n,e,t,r){n=Bn(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/t0[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=YI(n,Bn("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=o(u,u,2);const h=B4(u.slice(0,2),u.slice(2,4)),f=B4(u.slice(4,6),u.slice(6,8));i=(h+f)/2}const l=r?t0[r]:n.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function qS(n){cU(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Mh(e,t,HI)})})}function uU(n,e,t,r){n.forEach(function(i){e.forEach(function(s){Mh(i,s,t),Mh(s,i,r)})})}function KI(n,e){return n?typeof n=="string"?Bn(n):n:Bn(e)}function ZS(n){return(function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),l=o.length;for(let u=0,h=i;u<h;++u)t[a+u]=u>=l?e[a+u]:o[u]}return t})}function hU(n,e,t,r){const i=Bn(n),s=Bn(e);Mh(i,s,ZS(t)),Mh(s,i,ZS(r))}function ru(n,e){return r5(),Bp(n,"EPSG:4326","EPSG:3857")}function fn(n,e){const t=Bp(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Yc(r+180,360)-180),t}function wh(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||YI(n,e)===HI)&&t}function YI(n,e){const t=n.getCode(),r=e.getCode();let i=v_(t,r);if(i)return i;let s=null,a=null;for(const l of oU)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=y2(s.inverse,a.forward);else{const l=v_(t,o);l&&(i=y2(l,a.forward))}else{const l=v_(o,r);l&&(i=y2(s.inverse,l))}return i&&(J_(n),J_(e),Mh(n,e,i)),i}function y2(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function $m(n,e){const t=Bn(n),r=Bn(e);return YI(t,r)}function Bp(n,e,t){const r=$m(e,t);if(!r){const i=Bn(e).getCode(),s=Bn(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}function QS(n,e){return n}function yl(n,e){return XS&&!q_(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(XS=!1,ZO("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function i5(n,e){return n}function Po(n,e){return n}function U4(n,e,t){return function(r){let i,s;if(n.canWrapX()){const a=n.getExtent(),o=tn(a);r=r.slice(0),s=qO(r,n,o),s&&(r[0]=r[0]-s*o),r[0]=Yn(r[0],a[0],a[2]),r[1]=Yn(r[1],a[1],a[3]),i=t(r)}else i=t(r);return s&&e.canWrapX()&&(i[0]+=s*tn(e.getExtent())),i}}function dU(){qS(L4),qS(D4),uU(D4,L4,BB,UB)}dU();new Array(6);function Xa(){return[1,0,0,1,0,0]}function fU(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Hr(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function zo(n,e,t,r,i,s,a,o){const l=Math.sin(s),u=Math.cos(s);return n[0]=r*u,n[1]=i*l,n[2]=-r*l,n[3]=i*u,n[4]=a*r*u-o*r*l+e,n[5]=a*i*l+o*i*u+t,n}function s5(n,e){const t=gU(e);Cn(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*l-a*o)/t,n[5]=-(r*l-i*o)/t,n}function gU(n){return n[0]*n[3]-n[1]*n[2]}const mU=[1e5,1e5,1e5,1e5,2,2];function pU(n){return"matrix("+n.join(", ")+")"}function JS(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function yU(n,e){const t=JS(n),r=JS(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*mU[i])!==0)return!1;return!0}function Xc(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=r){const u=n[l],h=n[l+1];s[o++]=i[0]*u+i[2]*h+i[4],s[o++]=i[1]*u+i[3]*h+i[5];for(let f=2;f<a;f++)s[o++]=n[l+f]}return s&&s.length!=o&&(s.length=o),s}function a5(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),l=Math.sin(i),u=s[0],h=s[1];let f=0;for(let g=e;g<t;g+=r){const p=n[g]-u,x=n[g+1]-h;a[f++]=u+p*o-x*l,a[f++]=h+p*l+x*o;for(let v=g+2;v<g+r;++v)a[f++]=n[v]}return a&&a.length!=f&&(a.length=f),a}function _U(n,e,t,r,i,s,a,o){o=o||[];const l=a[0],u=a[1];let h=0;for(let f=e;f<t;f+=r){const g=n[f]-l,p=n[f+1]-u;o[h++]=l+i*g,o[h++]=u+s*p;for(let x=f+2;x<f+r;++x)o[h++]=n[x]}return o&&o.length!=h&&(o.length=h),o}function xU(n,e,t,r,i,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=r){a[o++]=n[l]+i,a[o++]=n[l+1]+s;for(let u=l+2;u<l+r;++u)a[o++]=n[u]}return a&&a.length!=o&&(a.length=o),a}const z4=Xa(),vU=[NaN,NaN];class o5 extends Zo{constructor(){super(),this.extent_=Zs(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=FO((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return jt()}closestPointXY(e,t,r,i){return jt()}containsXY(e,t){return this.closestPointXY(e,t,vU,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return jt()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&jp(t),this.extentRevision_=this.getRevision()}return NB(this.extent_,e)}rotate(e,t){jt()}scale(e,t,r){jt()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return jt()}getType(){return jt()}applyTransform(e){jt()}intersectsExtent(e){return jt()}translate(e,t){jt()}transform(e,t){const r=Bn(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const l=r.getExtent(),u=r.getWorldExtent(),h=Mr(u)/Mr(l);zo(z4,u[0],u[3],h,-h,0,0,0);const f=Xc(s,0,s.length,o,z4,a),g=$m(r,t);return g?g(f,f,o):f}:$m(r,t);return this.applyTransform(i),this}}class nd extends o5{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return UI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return jt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=$4(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){jt()}setLayout(e,t,r){let i;if(e)i=$4(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=rd(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();a5(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Uo(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();_U(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();xU(r,0,r.length,i,e,t,r),this.changed()}}}function rd(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function $4(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function EU(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return Xc(r,0,r.length,i,e,t)}function W4(n,e,t,r,i,s,a){const o=n[e],l=n[e+1],u=n[t]-o,h=n[t+1]-l;let f;if(u===0&&h===0)f=e;else{const g=((i-o)*u+(s-l)*h)/(u*u+h*h);if(g>1)f=t;else if(g>0){for(let p=0;p<r;++p)a[p]=zs(n[e+p],n[t+p],g);a.length=r;return}else f=e}for(let g=0;g<r;++g)a[g]=n[f+g];a.length=r}function XI(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],l=n[e+1],u=Eh(s,a,o,l);u>i&&(i=u),s=o,a=l}return i}function qI(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=XI(n,e,o,r,i),e=o}return i}function wU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=qI(n,e,o,r,i),e=o[o.length-1]}return i}function ZI(n,e,t,r,i,s,a,o,l,u,h){if(e==t)return u;let f,g;if(i===0){if(g=Eh(a,o,n[e],n[e+1]),g<u){for(f=0;f<r;++f)l[f]=n[e+f];return l.length=r,g}return u}h=h||[NaN,NaN];let p=e+r;for(;p<t;)if(W4(n,p-r,p,r,a,o,h),g=Eh(a,o,h[0],h[1]),g<u){for(u=g,f=0;f<r;++f)l[f]=h[f];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(g)-Math.sqrt(u))/i|0,1);if(s&&(W4(n,t-r,e,r,a,o,h),g=Eh(a,o,h[0],h[1]),g<u)){for(u=g,f=0;f<r;++f)l[f]=h[f];l.length=r}return u}function QI(n,e,t,r,i,s,a,o,l,u,h){h=h||[NaN,NaN];for(let f=0,g=t.length;f<g;++f){const p=t[f];u=ZI(n,e,p,r,i,s,a,o,l,u,h),e=p}return u}function SU(n,e,t,r,i,s,a,o,l,u,h){h=h||[NaN,NaN];for(let f=0,g=t.length;f<g;++f){const p=t[f];u=QI(n,e,p,r,i,s,a,o,l,u,h),e=p[p.length-1]}return u}function TU(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function kv(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function Up(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=kv(n,e,t[a],r);i[s++]=l,e=l}return i.length=s,i}function l5(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Up(n,e,t[a],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function Vc(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function Wm(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=Vc(n,e,l,r,i[s]),e=l}return i.length=s,i}function eT(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=l.length===1&&l[0]===e?[]:Wm(n,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function tx(n,e,t,r,i,s,a){let o,l;const u=(t-e)/r;if(u===1)o=e;else if(u===2)o=e,l=i;else if(u!==0){let h=n[e],f=n[e+1],g=0;const p=[0];for(let w=e+r;w<t;w+=r){const T=n[w],I=n[w+1];g+=Math.sqrt((T-h)*(T-h)+(I-f)*(I-f)),p.push(g),h=T,f=I}const x=i*g,v=TB(p,x);v<0?(l=(x-p[-v-2])/(p[-v-1]-p[-v-2]),o=e+(-v-2)*r):o=e+v*r}a=a>1?a:2,s=s||new Array(a);for(let h=0;h<a;++h)s[h]=o===void 0?NaN:l===void 0?n[o+h]:zs(n[o+h],n[o+r+h],l);return s}function tT(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,l=t/r;for(;o<l;){const g=o+l>>1;i<n[(g+1)*r-1]?l=g:o=g+1}const u=n[o*r-1];if(i==u)return n.slice((o-1)*r,(o-1)*r+r);const h=n[(o+1)*r-1],f=(i-u)/(h-u);a=[];for(let g=0;g<r-1;++g)a.push(zs(n[(o-1)*r+g],n[o*r+g],f));return a.push(i),a}function IU(n,e,t,r,i,s,a){if(a)return tT(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let l=0,u=t.length;l<u;++l){const h=t[l];if(e!=h){if(i<n[e+r-1])return null;if(i<=n[h-1])return tT(n,e,h,r,i,!1);e=h}}return null}function AU(n,e,t,r,i){return!$O(i,function(a){return!fh(n,e,t,r,a[0],a[1])})}function fh(n,e,t,r,i,s){let a=0,o=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const u=n[e],h=n[e+1];l<=s?h>s&&(u-o)*(s-l)-(i-o)*(h-l)>0&&a++:h<=s&&(u-o)*(s-l)-(i-o)*(h-l)<0&&a--,o=u,l=h}return a!==0}function JI(n,e,t,r,i,s){if(t.length===0||!fh(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(fh(n,t[a-1],t[a],r,i,s))return!1;return!0}function bU(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const l=t[a];if(JI(n,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function c5(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Mv(n,e,t,r,i,s){return s=s??zO(Zs(),n,e,t,r),Qi(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:c5(n,e,t,r,function(a,o){return LB(i,a,o)}):!1}function RU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(Mv(n,e,t[s],r,i))return!0;e=t[s]}return!1}function u5(n,e,t,r,i){return!!(Mv(n,e,t,r,i)||fh(n,e,t,r,i[0],i[1])||fh(n,e,t,r,i[0],i[3])||fh(n,e,t,r,i[2],i[1])||fh(n,e,t,r,i[2],i[3]))}function h5(n,e,t,r,i){if(!u5(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(AU(n,t[s-1],t[s],r,i)&&!Mv(n,t[s-1],t[s],r,i))return!1;return!0}function CU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(h5(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function eA(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const l=n[o],u=n[o+1];a+=Math.sqrt((l-i)*(l-i)+(u-s)*(u-s)),i=l,s=u}return a}function Nv(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[e,t-r];let h=0;for(;u.length>0;){const f=u.pop(),g=u.pop();let p=0;const x=n[g],v=n[g+1],w=n[f],T=n[f+1];for(let I=g+r;I<f;I+=r){const A=n[I],N=n[I+1],D=OB(A,N,x,v,w,T);D>p&&(h=I,p=D)}p>i&&(l[(h-e)/r]=1,g+r<h&&u.push(g,h),h+r<f&&u.push(h,f))}for(let f=0;f<o;++f)l[f]&&(s[a++]=n[e+f*r],s[a++]=n[e+f*r+1]);return a}function d5(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l];a=Nv(n,e,h,r,i,s,a),o.push(a),e=h}return a}function Zu(n,e){return e*Math.round(n/e)}function PU(n,e,t,r,i,s,a){if(e==t)return a;let o=Zu(n[e],i),l=Zu(n[e+1],i);e+=r,s[a++]=o,s[a++]=l;let u,h;do if(u=Zu(n[e],i),h=Zu(n[e+1],i),e+=r,e==t)return s[a++]=u,s[a++]=h,a;while(u==o&&h==l);for(;e<t;){const f=Zu(n[e],i),g=Zu(n[e+1],i);if(e+=r,f==u&&g==h)continue;const p=u-o,x=h-l,v=f-o,w=g-l;if(p*w==x*v&&(p<0&&v<p||p==v||p>0&&v>p)&&(x<0&&w<x||x==w||x>0&&w>x)){u=f,h=g;continue}s[a++]=u,s[a++]=h,o=u,l=h,u=f,h=g}return s[a++]=u,s[a++]=h,a}function tA(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l];a=PU(n,e,h,r,i,s,a),o.push(a),e=h}return a}function kU(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l],f=[];a=tA(n,e,h,r,i,s,a,f),o.push(f),e=h[h.length-1]}return a}class $o extends nd{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){An(this.flatCoordinates,e),this.changed()}clone(){const e=new $o(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<ed(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(XI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ZI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return c5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,tT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Vc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return tx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return eA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Nv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new $o(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Mv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=kv(this.flatCoordinates,0,e,this.stride),this.changed()}}let no=class f5 extends nd{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new f5(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=Eh(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let l=0;l<o;++l)r[l]=s[l];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return BO(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return BI(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=TU(this.flatCoordinates,0,e,this.stride),this.changed()}};const xa={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Nh=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",MU=Nh.includes("safari")&&!Nh.includes("chrom");MU&&(Nh.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Nh));const NU=Nh.includes("webkit")&&!Nh.includes("edge"),g5=Nh.includes("macintosh"),LU=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ks=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,nA=typeof Image<"u"&&Image.prototype.decode,m5=typeof createImageBitmap=="function",p5=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),yt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Kr(n,e,t,r){let i;return t&&t.length?i=t.shift():Ks?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let _2;function nx(){return _2||(_2=Kr(1,1)),_2}function Lv(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function H4(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function OU(n){for(;n.lastChild;)n.lastChild.remove()}function DU(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function y5(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function Gc(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}const rA=[NaN,NaN,NaN,0];let x2;function FU(){return x2||(x2=Kr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),x2}const jU=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,VU=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,GU=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,BU=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Dy(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function hm(n){throw new Error('failed to parse "'+n+'" as color')}function _5(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(VU)||n.match(jU)||n.match(GU);if(s){const a=s[4],o=100/255;return[Yn(Dy(s[1],o)+.5|0,0,255),Yn(Dy(s[2],o)+.5|0,0,255),Yn(Dy(s[3],o)+.5|0,0,255),a!==void 0?Yn(Dy(a,100),0,1):1]}hm(n)}if(n.startsWith("#")){if(BU.test(n)){const s=n.substring(1),a=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,u=s.length;l<u;l+=a){let h=parseInt(s.substring(l,l+a),16);a===1&&(h+=h<<4),o[l/a]=h}return o[3]=o[3]/255,o}hm(n)}const e=FU();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&hm(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return _5(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Vp(i[3]/255,3),i}function UU(n){return typeof n=="string"?n:sA(n)}const zU=1024,Mg={};let v2=0;function $U(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function E2(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function w2(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function S2(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function T2(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function K4(n){const e=S2(n[0]),t=S2(n[1]),r=S2(n[2]),i=T2(e*.222488403+t*.716873169+r*.06060791),s=500*(T2(e*.452247074+t*.399439023+r*.148375274)-i),a=200*(i-T2(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(a,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+a*a),o<0?o+360:o,n[3]]}function WU(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=w2(e),s=w2(e+t/500*Math.cos(r)),a=w2(e-t/200*Math.sin(r)),o=E2(s*3.021973625-i*1.617392459-a*.404875592),l=E2(s*-.943766287+i*1.916279586+a*.027607165),u=E2(s*.069407491-i*.22898585+a*1.159737864);return[Yn(o+.5|0,0,255),Yn(l+.5|0,0,255),Yn(u+.5|0,0,255),n[3]]}function iA(n){if(n==="none")return rA;if(Mg.hasOwnProperty(n))return Mg[n];if(v2>=zU){let t=0;for(const r in Mg)(t++&3)===0&&(delete Mg[r],--v2)}const e=_5(n);e.length!==4&&hm(n);for(const t of e)isNaN(t)&&hm(n);return Mg[n]=e,++v2,e}function Lh(n){return Array.isArray(n)?n:iA(n)}function sA(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class x5 extends Dp{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?yt.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent($t.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==yt.IDLE&&this.loader){this.state=yt.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;jO(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||m5&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=yt.LOADED}).catch(r=>{this.state=yt.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function HU(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[K_(r,$t.LOAD,function(){a=!0,s||e()})];return r.src&&nA?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(a?e():t())})):o.push(K_(r,$t.ERROR,t)),function(){i=!1,o.forEach(Wn)}}function KU(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function v5(n,e){return e&&(n.src=e),n.src&&nA?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):KU(n)}function E5(n,e){return e&&(n.src=e),n.src&&nA&&m5?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):v5(n)}class YU{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=I2(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=I2(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=I2(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===yt.IDLE&&i.load(),i.getImageState()===yt.LOADING?i.ready().then(()=>{this.patternCache_[a]=nx().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=nx().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function I2(n,e,t){const r=t?Lh(t):"null";return e+":"+n+":"+r}const va=new YU;let Ng=null;class w5 extends Dp{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?yt.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===yt.LOADED){Ng||(Ng=Kr(1,1,void 0,{willReadFrequently:!0})),Ng.drawImage(this.image_,0,0);try{Ng.getImageData(0,0,1,1),this.tainted_=!1}catch{Ng=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent($t.CHANGE)}handleImageError_(){this.imageState_=yt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=yt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Kr(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===yt.IDLE){this.image_||this.initializeImage_(),this.imageState_=yt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&v5(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==yt.LOADED)return;const t=this.image_,r=Kr(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=UU(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===yt.LOADED||this.imageState_===yt.ERROR)e();else{const t=()=>{(this.imageState_===yt.LOADED||this.imageState_===yt.ERROR)&&(this.removeEventListener($t.CHANGE,t),e())};this.addEventListener($t.CHANGE,t)}})),this.ready_}}function rx(n,e,t,r,i,s){let a=e===void 0?void 0:va.get(e,t,i);return a||(a=new w5(n,n&&"src"in n?n.src||void 0:e,t,r,i),va.set(e,t,i,a,s)),s&&a&&!va.getPattern(e,t,i)&&va.set(e,t,i,a,s),a}function ko(n){return n?Array.isArray(n)?sA(n):typeof n=="object"&&"src"in n?XU(n):n:null}function XU(n){if(!n.offset||!n.size)return va.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=va.getPattern(e,void 0,n.color);if(t)return t;const r=va.get(n.src,"anonymous",null);if(r.getImageState()!==yt.LOADED)return null;const i=Kr(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),rx(i.canvas,e,void 0,yt.LOADED,n.color,!0),va.getPattern(e,void 0,n.color)}class S5{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const Fy="ol-hidden",zp="ol-unselectable",aA="ol-control",Y4="ol-collapsed",qU=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),X4=["style","variant","weight","size","lineHeight","family"],nT={normal:400,bold:700},rT=function(n){const e=n.match(qU);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=X4.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[X4[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in nT&&(t.weight=nT[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t},T5="10px sans-serif",ms="#000",r0="round",Rl=[],Cl=0,i0="round",Hm=10,Km="#000",Ym="center",ix="middle",gh=[0,0,0,0],Xm=1,df=new Zo;let Lg=null,q4;const iT={},ZU=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function QU(n,e,t){return`${n} ${e} 16px "${t}"`}const JU=(function(){let e,t;async function r(s){await t.ready;const a=await t.load(s);if(a.length===0)return!1;const o=rT(s),l=o.families[0].toLowerCase(),u=o.weight;return a.some(h=>{const f=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),g=nT[h.weight]||h.weight;return f===l&&h.style===o.style&&g==u})}async function i(){await t.ready;let s=!0;const a=df.getProperties(),o=Object.keys(a).filter(l=>a[l]<100);for(let l=o.length-1;l>=0;--l){const u=o[l];let h=a[u];h<100&&(await r(u)?(Op(iT),df.set(u,100)):(h+=10,df.set(u,h,!0),h<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=Ks?self.fonts:document.fonts);const a=rT(s);if(!a)return;const o=a.families;let l=!1;for(const u of o){if(ZU.has(u))continue;const h=QU(a.style,a.weight,u);df.get(h)===void 0&&(df.set(h,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),ez=(function(){let n;return function(e){let t=iT[e];if(t==null){if(Ks){const r=rT(e),i=I5(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);iT[e]=t}return t}})();function I5(n,e){return Lg||(Lg=Kr(1,1)),n!=q4&&(Lg.font=n,q4=Lg.font),Lg.measureText(e)}function A5(n,e){return I5(n,e).width}function Z4(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,A5(n,s)),0);return t[e]=r,r}function tz(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,l=0;for(let u=0,h=e.length;u<=h;u+=2){const f=e[u];if(f===`
`||u===h){s=Math.max(s,a),i.push(a),a=0,o+=l,l=0;continue}const g=e[u+1]||n.font,p=A5(g,f);t.push(p),a+=p;const x=ez(g);r.push(x),l=Math.max(l,x)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function nz(n,e,t,r,i,s,a,o,l,u,h){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=f=>f.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,u),n.scale(h[0],h[1]),rz(r,n)):h[0]<0||h[1]<0?(n.translate(l,u),n.scale(h[0],h[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,l,u,a*h[0],o*h[1]),n.restore()}function rz(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class iz extends S5{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Vp(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Xa()}drawImages_(e,t,r,i){if(!this.image_)return;const s=Xc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let h=0,f=s.length;h<f;h+=2){const g=s[h]-this.imageAnchorX_,p=s[h+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const x=g+this.imageAnchorX_,v=p+this.imageAnchorY_;zo(o,x,v,1,1,u,-x,-v),a.save(),a.transform.apply(a,o),a.translate(x,v),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Xc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=Xc(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qi(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=EU(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qi(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Qi(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(i,s,a[l],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];i=this.drawRings_(r,i,u,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),xu(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:Ym;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:ko(r||ms)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),h=s||Rl;this.strokeState_={lineCap:i!==void 0?i:r0,lineDash:this.pixelRatio_===1?h:h.map(f=>f*this.pixelRatio_),lineDashOffset:(a||Cl)*this.pixelRatio_,lineJoin:o!==void 0?o:i0,lineWidth:(l!==void 0?l:Xm)*this.pixelRatio_,miterLimit:u!==void 0?u:Hm,strokeStyle:ko(r||Km)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const p=t.getColor();this.textFillState_={fillStyle:ko(p||ms)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),x=r.getLineCap(),v=r.getLineDash(),w=r.getLineDashOffset(),T=r.getLineJoin(),I=r.getWidth(),A=r.getMiterLimit();this.textStrokeState_={lineCap:x!==void 0?x:r0,lineDash:v||Rl,lineDashOffset:w||Cl,lineJoin:T!==void 0?T:i0,lineWidth:I!==void 0?I:Xm,miterLimit:A!==void 0?A:Hm,strokeStyle:ko(p||Km)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),h=e.getText(),f=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:T5,textAlign:f!==void 0?f:Ym,textBaseline:g!==void 0?g:ix},this.text_=h!==void 0?Array.isArray(h)?h.reduce((p,x,v)=>p+=v%2?" ":x,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const sz=.5,b5={Point:fz,LineString:uz,Polygon:mz,MultiPoint:gz,MultiLineString:hz,MultiPolygon:dz,GeometryCollection:cz,Circle:oz};function az(n,e){return parseInt(_n(n),10)-parseInt(_n(e),10)}function Q4(n,e){const t=R5(n,e);return t*t}function R5(n,e){return sz*n/e}function oz(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r)}}function J4(n,e,t,r,i,s,a,o){const l=[],u=t.getImage();if(u){let g=!0;const p=u.getImageState();p==yt.LOADED||p==yt.ERROR?g=!1:p==yt.IDLE&&u.load(),g&&l.push(u.ready())}const h=t.getFill();h&&h.loading()&&l.push(h.ready());const f=l.length>0;return f&&Promise.all(l).then(()=>i(null)),lz(n,e,t,r,s,a,o),f}function lz(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(r,i);if(t.getRenderer())C5(n,l,t,e,a);else{const h=b5[l.getType()];h(n,l,t,e,a,s)}}function C5(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,l=a.length;o<l;++o)C5(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function cz(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const u=b5[a[o].getType()];u(n,a[o],t,r,i,s)}}function uz(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function hz(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function dz(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function fz(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),l=o&&o.getText(),u=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=yt.LOADED)return;const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(a,u),h.drawPoint(e,r,i)}if(l){const h=n.getBuilder(t.getZIndex(),"Text");h.setTextStyle(o,u),h.drawText(e,r,i)}}function gz(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),h=s&&o&&u?{}:void 0;if(o){if(a.getImageState()!=yt.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(a,h),f.drawMultiPoint(e,r,i)}if(u){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(l,h),f.drawText(e,r,i)}}function mz(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}let pz=!1;function yz(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=pz,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=e.getType();try{let h;u=="text"||u=="json"?h=o.responseText:u=="xml"?h=o.responseXML||o.responseText:u=="arraybuffer"&&(h=o.response),h?s(e.readFeatures(h,{extent:t,featureProjection:i}),e.readProjection(h)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function ek(n,e){return function(t,r,i,s,a){yz(n,e,t,r,i,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),a!==void 0&&a()})}}function _z(n,e){return[[-1/0,-1/0,1/0,1/0]]}function P5(n,e,t,r){const i=[];let s=Zs();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=UI(n,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function oA(n,e,t,r,i,s,a){let o,l,u,h,f,g,p;const x=i[s+1],v=[];for(let I=0,A=t.length;I<A;++I){const N=t[I];for(h=n[N-r],g=n[N-r+1],o=e;o<N;o+=r)f=n[o],p=n[o+1],(x<=g&&p<=x||g<=x&&x<=p)&&(u=(x-g)/(p-g)*(f-h)+h,v.push(u)),h=f,g=p}let w=NaN,T=-1/0;for(v.sort(Il),h=v[0],o=1,l=v.length;o<l;++o){f=v[o];const I=Math.abs(f-h);I>T&&(u=(h+f)/2,JI(n,e,t,r,u,x)&&(w=u,T=I)),h=f}return isNaN(w)&&(w=i[s]),a?(a.push(w,x,T),a):[w,x,T]}function k5(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=oA(n,e,l,r,i,2*a,s),e=l[l.length-1]}return s}function xz(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function lA(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],l=n[e+1];i+=(o-s)*(l+a),s=o,a=l}return i===0?void 0:i>0}function cA(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=lA(n,e,o,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=o}return!0}function M5(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!cA(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function sx(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=lA(n,e,o,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&xz(n,e,o,r),e=o}return e}function sT(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=sx(n,e,t[s],r,i);return e}function vz(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=lA(n,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=l}return t}class qa extends o5{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Wn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(hn(e[t],$t.CHANGE,this.changed,this))}clone(){const e=new qa(A2(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<ed(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){jp(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)UO(e,t[r].getExtent());return e}getGeometries(){return A2(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(i=!0)}return i?new qa(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Uo(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(A2(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function A2(n){return n.map(e=>e.clone())}function N5(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,l=0;for(;e<t;e+=r){const u=n[e]-s,h=n[e+1]-a;i+=l*u-o*h,o=u,l=h}return i/2}function L5(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=N5(n,e,o,r),e=o}return i}function Ez(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=L5(n,e,o,r),e=o[o.length-1]}return i}class qm extends nd{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new qm(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<ed(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(XI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ZI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return N5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Vc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Nv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new qm(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=kv(this.flatCoordinates,0,e,this.stride),this.changed()}}class iu extends nd{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let l=0,u=i.length;l<u;++l){const h=i[l];An(s,h.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){An(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new iu(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<ed(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(qI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),QI(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,IU(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return Wm(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new $o(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a],u=new $o(e.slice(s,l),r);i.push(u),s=l}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=eA(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const l=i[a],u=tx(t,r,l,s,.5);An(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=d5(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new iu(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return RU(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Up(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class C0 extends nd{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){An(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new C0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<ed(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=Eh(e,t,s[o],s[o+1]);if(u<i){i=u;for(let h=0;h<a;++h)r[h]=s[o+h];r.length=a}}return i}getCoordinates(){return Vc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new no(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new no(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(BI(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=kv(this.flatCoordinates,0,e,this.stride),this.changed()}}class ro extends nd{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?An(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ro(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<ed(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(qI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),QI(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return JI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return L5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),sx(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Wm(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Uo(this.getExtent());this.flatInteriorPoint_=oA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new no(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new qm(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=new qm(t.slice(s,l),e);i.push(u),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;cA(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=sx(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=tA(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new ro(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return h5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Up(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function tk(n){if(R0(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new ro(s,"XY",[s.length])}class s0 extends nd{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,l=i.length;o<l;++o){const u=i[o],h=s.length,f=u.getEnds();for(let g=0,p=f.length;g<p;++g)f[g]+=h;An(s,u.getFlatCoordinates()),a.push(f)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;An(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new s0(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<ed(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wU(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),SU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return bU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Ez(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),sT(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,eT(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=P5(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=k5(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new C0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;M5(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=sT(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=kU(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new s0(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new ro(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a].slice(),u=l[l.length-1];if(s!==0)for(let f=0,g=l.length;f<g;++f)l[f]-=s;const h=new ro(t.slice(s,u),e,l);i.push(h),s=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return CU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=l5(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const nk=Xa();class $s{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?BO(this.flatCoordinates_):UI(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Uo(this.getExtent());this.flatInteriorPoints_=oA(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=vz(this.flatCoordinates_,this.ends_),t=P5(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=k5(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=tx(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=tx(e,t,a,2,.5);An(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Bn(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Mr(r)/Mr(t);zo(nk,r[0],r[3],i,-i,0,0,0),Xc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,nk,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new $s(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=FO((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Nv(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=d5(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=tA(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new $s(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}$s.prototype.getFlatCoordinates=$s.prototype.getOrientedFlatCoordinates;function O5(n,e,t=0,r=n.length-1,i=wz){for(;r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,h=Math.log(l),f=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(t,Math.floor(e-u*f/l+g)),x=Math.min(r,Math.floor(e+(l-u)*f/l+g));O5(n,e,p,x,i)}const s=n[e];let a=t,o=r;for(Og(n,t,e),i(n[r],s)>0&&Og(n,t,r);a<o;){for(Og(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Og(n,t,o):(o++,Og(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Og(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function wz(n,e){return n<e?-1:n>e?1:0}let D5=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!Vy(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?i(o):o;Vy(e,l)&&(t.leaf?r.push(o):R2(e,l)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!Vy(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(Vy(e,a)){if(t.leaf||R2(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ff([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),r.leaf){const h=Sz(e,r.children,t);if(h!==-1)return r.children.splice(h,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&R2(r,i)?(s.push(r),a.push(o),o=0,l=r,r=r.children[0]):l?(o++,r=l.children[o],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=ff(e.slice(t,r+1)),Xd(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=ff([]),o.leaf=!1,o.height=i;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));rk(e,t,r,u,this.compareMinX);for(let h=t;h<=r;h+=u){const f=Math.min(h+u-1,r);rk(e,h,f,l,this.compareMinY);for(let g=h;g<=f;g+=l){const p=Math.min(g+l-1,f);o.children.push(this._build(e,g,p,i-1))}}return Xd(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const u=t.children[l],h=b2(u),f=Az(e,u)-h;f<a?(a=f,s=h<s?h:s,o=u):f===a&&h<s&&(s=h,o=u)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Kg(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=ff(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,Xd(r,this.toBBox),Xd(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=ff([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Xd(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const l=Hg(e,0,o,this.toBBox),u=Hg(e,o,r,this.toBBox),h=bz(l,u),f=b2(l)+b2(u);h<s?(s=h,i=o,a=f<a?f:a):h===s&&f<a&&(a=f,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:Tz,s=e.leaf?this.compareMinY:Iz,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=Hg(e,0,t,s),o=Hg(e,r-t,r,s);let l=jy(a)+jy(o);for(let u=t;u<r-t;u++){const h=e.children[u];Kg(a,e.leaf?s(h):h),l+=jy(a)}for(let u=r-t-1;u>=t;u--){const h=e.children[u];Kg(o,e.leaf?s(h):h),l+=jy(o)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Kg(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():Xd(e[t],this.toBBox)}};function Sz(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function Xd(n,e){Hg(n,0,n.children.length,e,n)}function Hg(n,e,t,r,i){i||(i=ff(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Kg(i,n.leaf?r(a):a)}return i}function Kg(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Tz(n,e){return n.minX-e.minX}function Iz(n,e){return n.minY-e.minY}function b2(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function jy(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Az(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function bz(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function R2(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Vy(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function ff(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rk(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;O5(n,a,e,t,i),s.push(e,a,a,t)}}class ik{constructor(e){this.rbush_=new D5(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[_n(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=l,this.items_[_n(o)]=l}this.rbush_.load(r)}remove(e){const t=_n(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[_n(t)],i=[r.minX,r.minY,r.maxX,r.maxY];e0(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return Ph(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return nu(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class uA extends Zo{constructor(e){super(),this.projection=Bn(e.projection),this.attributions_=sk(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=sk(e),this.changed()}setState(e){this.state_=e,this.changed()}}function sk(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const ua={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class yc extends qo{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class $p extends uA{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Um,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Cn(this.format_,"`format` must be set when `url` is set"),this.loader_=ek(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:_z;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new ik:null,this.loadedExtentsRtree_=new ik,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new _a(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=_n(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new yc(ua.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof $s||(this.featureChangeKeys_[e]=[hn(t,$t.CHANGE,this.handleFeatureChange_,this),hn(t,Jf.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof $s){const s=this.idIndex_[i];s instanceof $s?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(Cn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=_n(o);this.addToIndex_(l,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],l=_n(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const h=u.getExtent();t.push(h),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(ua.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new yc(ua.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ua.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(ua.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(gs.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(gs.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Wn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new yc(ua.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof $s||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof $s||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ph(this.nullGeometryFeatures_)||An(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=KO(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Bm,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const h=u.getGeometry(),f=o;if(o=h instanceof $s?0:h.closestPointXY(r,i,a,o),o<f){s=u;const g=Math.sqrt(o);l[0]=r-g,l[1]=i-g,l[2]=r+g,l[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=_n(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new yc(ua.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:_n(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ph(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const l=s[a];i.forEachInExtent(l,function(h){return Fc(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new yc(ua.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new yc(ua.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new yc(ua.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(e0(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=_n(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Wn),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(ua.REMOVEFEATURE)&&this.dispatchEvent(new yc(ua.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Cn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(ek(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class oi{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new oi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=rx(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===yt.IDLE&&t.load(),t.getImageState()===yt.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?_n(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Lh(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class xs{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new xs({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function ak(n){return n[0]>0&&n[1]>0}function Rz(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function vs(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Ov{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=vs(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ov({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return jt()}getImage(e){return jt()}getHitDetectionImage(){return jt()}getPixelRatio(e){return 1}getImageState(){return jt()}getImageSize(){return jt()}getOrigin(){return jt()}getSize(){return jt()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=vs(e)}listenImageChange(e){jt()}load(){jt()}unlistenImageChange(e){jt()}ready(){return Promise.resolve()}}class Dv extends Ov{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?yt.LOADING:yt.LOADED,this.imageState_===yt.LOADING&&this.ready().then(()=>this.imageState_=yt.LOADED),this.render()}clone(){const e=this.getScale(),t=new Dv({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=va.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,a=Math.ceil(s.size*e),o=Kr(a,a);this.draw_(s,o,e),i=o.canvas,va.set(r,null,null,new w5(i,void 0,null,yt.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const B=i;i=s,s=B}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),h=i-u,f=Math.sqrt(l*l+h*h),g=f/l;if(e==="miter"&&g<=r)return g*t;const p=t/2/g,x=t/2*(h/f),w=Math.sqrt((i+p)*(i+p)+x*x)-i;if(this.radius2_===void 0||e==="bevel")return w*2;const T=i*Math.sin(o),I=Math.sqrt(i*i-T*T),A=s-I,D=Math.sqrt(T*T+A*A)/T;if(D<=r){const B=D*t/2-s-i;return 2*Math.max(w,B)}return w*2}createRenderOptions(){let e=r0,t=i0,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=ko(this.stroke_.getColor()??Km),o=this.stroke_.getWidth()??Xm,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??i0,e=this.stroke_.getLineCap()??r0,r=this.stroke_.getMiterLimit()??Hm);const l=this.calculateLineJoinSize_(t,o,r),u=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:o,size:h,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=ms),t.fillStyle=ko(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Lh(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Kr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,u=o%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=ms,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Dl extends Dv{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Dl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class ur{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=ok,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new ur({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=ok,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Cz(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Cn(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let C2=null;function F5(n,e){if(!C2){const t=new oi({color:"rgba(255,255,255,0.4)"}),r=new xs({color:"#3399CC",width:1.25});C2=[new ur({image:new Dl({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return C2}function ok(n){return n.getGeometry()}const Pz="#333";class id{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=vs(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new oi({color:Pz}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new id({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof oi?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=vs(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const ni={ANIMATING:0,INTERACTING:1},Pt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Gy=[Pt.FILL],Bc=[Pt.STROKE],mh=[Pt.BEGIN_PATH],lk=[Pt.CLOSE_PATH];class Wp extends S5{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)i[0]=e[o],i[1]=e[o+1],kh(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(t+=i);let h=e[t],f=e[t+1];const g=this.tmpCoordinate_;let p=!0,x,v,w;for(x=t+i;x<r;x+=i)g[0]=e[x],g[1]=e[x+1],w=WS(u,g),w!==v?(p&&(o[l++]=h,o[l++]=f,p=!1),o[l++]=g[0],o[l++]=g[1]):w===ei.INTERSECTING?(o[l++]=g[0],o[l++]=g[1],p=!1):p=!0,h=g[0],f=g[1],v=w;return(s&&p||x===t+i)&&(o[l++]=h,o[l++]=f),l}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const l=r[a],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,h,f,g,p;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),g=[];const x=e.getEndss();p=0;for(let v=0,w=x.length;v<w;++v){const T=[];p=this.drawCustomCoordinates_(u,p,x[v],o,T),g.push(T)}this.instructions.push([Pt.CUSTOM,l,g,e,r,eT,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,g,e,i||r,eT,s]);break;case"Polygon":case"MultiLineString":f=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),o,f),this.instructions.push([Pt.CUSTOM,l,f,e,r,Wm,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,f,e,i||r,Wm,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([Pt.CUSTOM,l,h,e,r,Vc,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,h,e,i||r,Vc,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),h=this.appendFlatPointCoordinates(u,o),h>l&&(this.instructions.push([Pt.CUSTOM,l,h,e,r,Vc,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,h,e,i||r,Vc,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([Pt.CUSTOM,l,h,e,r,void 0,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,h,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Pt.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Pt.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Pt.END_GEOMETRY?a=t:s==Pt.BEGIN_GEOMETRY&&(i[2]=t,AB(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=ko(r||ms)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=ko(r||Km);const i=e.getLineCap();t.lineCap=i!==void 0?i:r0;const s=e.getLineDash();t.lineDash=s?s.slice():Rl;const a=e.getLineDashOffset();t.lineDashOffset=a||Cl;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:i0;const l=e.getWidth();t.lineWidth=l!==void 0?l:Xm;const u=e.getMiterLimit();t.miterLimit=u!==void 0?u:Hm,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[Pt.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Pt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!xu(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Pt.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=GO(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;zm(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class kz extends Wp{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!kh(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Pt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Pt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||kh(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Pt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Pt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Mz extends Wp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[Pt.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Rl,Cl],mh);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(Bc),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Rl,Cl],mh);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let h=0;for(let f=0,g=o.length;f<g;++f)h=this.drawFlatCoordinates_(l,h,o[f],u);this.hitDetectionInstructions.push(Bc),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Bc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Bc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(mh)}}class ck extends Wp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=r.length;this.instructions.push(mh),this.hitDetectionInstructions.push(mh);for(let u=0;u<l;++u){const h=r[u],f=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,h,i,!0,!o),p=[Pt.MOVE_TO_LINE_TO,f,g];this.instructions.push(p),this.hitDetectionInstructions.push(p),o&&(this.instructions.push(lk),this.hitDetectionInstructions.push(lk)),t=h}return a&&(this.instructions.push(Gy),this.hitDetectionInstructions.push(Gy)),o&&(this.instructions.push(Bc),this.hitDetectionInstructions.push(Bc)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_FILL_STYLE,ms]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Rl,Cl]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const h=[Pt.CIRCLE,u];this.instructions.push(mh,h),this.hitDetectionInstructions.push(mh,h),i.fillStyle!==void 0&&(this.instructions.push(Gy),this.hitDetectionInstructions.push(Gy)),i.strokeStyle!==void 0&&(this.instructions.push(Bc),this.hitDetectionInstructions.push(Bc)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_FILL_STYLE,ms]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Rl,Cl]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_FILL_STYLE,ms]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Rl,Cl]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let h=0;for(let f=0,g=o.length;f<g;++f)h=this.drawFlatCoordinatess_(l,h,o[f],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=Zu(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Nz(n,e,t,r,i){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+i<r;){const[u,h]=l.slice(-2),f=e[a+i],g=e[a+i+1],p=Math.sqrt((f-u)*(f-u)+(g-h)*(g-h));if(o+=p,o>=n){const x=(n-o+p)/p,v=zs(u,f,x),w=zs(h,g,x);l.push(v,w),s.push(l),l=[v,w],o==n&&(a+=i),o=0}else if(o<n)l.push(e[a+i],e[a+i+1]),a+=i;else{const x=p-o,v=zs(u,f,x/p),w=zs(h,g,x/p);l.push(v,w),s.push(l),l=[v,w],o=0,a+=i}}return o>0&&s.push(l),s}function Lz(n,e,t,r,i){let s=t,a=t,o=0,l=0,u=t,h,f,g,p,x,v,w,T,I,A;for(f=t;f<r;f+=i){const N=e[f],D=e[f+1];x!==void 0&&(I=N-x,A=D-v,p=Math.sqrt(I*I+A*A),w!==void 0&&(l+=g,h=Math.acos((w*I+T*A)/(g*p)),h>n&&(l>o&&(o=l,s=u,a=f),l=0,u=f-i)),g=p,w=I,T=A),x=N,v=D}return l+=p,l>o?[u,f]:[s,a]}const ax={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Oz extends Wp{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ms]={fillStyle:ms},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let l=o.length;const u=e.getType();let h=null,f=e.getStride();if(a.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Qi(this.maxExtent,e.getExtent()))return;let g;if(h=e.getFlatCoordinates(),u=="LineString")g=[h.length];else if(u=="MultiLineString")g=e.getEnds();else if(u=="Polygon")g=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const w=e.getEndss();g=[];for(let T=0,I=w.length;T<I;++T)g.push(w[T][0])}this.beginGeometry(e,t,r);const p=a.repeat,x=p?void 0:a.textAlign;let v=0;for(let w=0,T=g.length;w<T;++w){let I;p?I=Nz(p*this.resolution,h,v,g[w],f):I=[h.slice(v,g[w])];for(let A=0,N=I.length;A<N;++A){const D=I[A];let B=0,k=D.length;if(x==null){const M=Lz(a.maxAngle,D,0,D.length,2);B=M[0],k=M[1]}for(let M=B;M<k;M+=f)o.push(D[M],D[M+1]);const P=o.length;v=g[w],this.drawChars_(l,P),l=P}}this.endGeometry(t)}else{let g=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":h=e.getFlatCoordinates();break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":h=e.getFlatMidpoints(),f=2;break;case"Polygon":h=e.getFlatInteriorPoint(),a.overflow||g.push(h[2]/this.resolution),f=3;break;case"MultiPolygon":const N=e.getFlatInteriorPoints();h=[];for(let D=0,B=N.length;D<B;D+=3)a.overflow||g.push(N[D+2]/this.resolution),h.push(N[D],N[D+1]);if(h.length===0)return;f=2;break}const p=this.appendFlatPointCoordinates(h,f);if(p===l)return;if(g&&(p-l)/2!==h.length/f){let N=l/2;g=g.filter((D,B)=>{const k=o[(N+B)*2]===h[B*f]&&o[(N+B)*2+1]===h[B*f+1];return k||--N,k})}this.saveTextStates_();const x=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,v=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let w=a.padding;if(w!=gh&&(a.scale[0]<0||a.scale[1]<0)){let N=a.padding[0],D=a.padding[1],B=a.padding[2],k=a.padding[3];a.scale[0]<0&&(D=-D,k=-k),a.scale[1]<0&&(N=-N,B=-B),w=[N,D,B,k]}const T=this.pixelRatio;this.instructions.push([Pt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,w==gh?gh:w.map(function(N){return N*T}),x,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const I=1/T,A=x?x.slice(0):null;A&&(A[1]=ms),this.hitDetectionInstructions.push([Pt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[I,I],NaN,this.declutterMode_,this.declutterImageWithText_,w,A,v,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ms:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||Ym,justify:t.justify,textBaseline:t.textBaseline||ix,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=ax[i.textBaseline],h=this.textOffsetY_*l,f=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Pt.DRAW_CHARS,e,t,u,i.overflow,o,i.maxAngle,l,h,s,g*l,f,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Pt.DRAW_CHARS,e,t,u,i.overflow,o&&ms,i.maxAngle,l,h,s,g*l,f,a,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=ko(a.getColor()||ms)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const v=o.getLineDash(),w=o.getLineDashOffset(),T=o.getWidth(),I=o.getMiterLimit();s.lineCap=o.getLineCap()||r0,s.lineDash=v?v.slice():Rl,s.lineDashOffset=w===void 0?Cl:w,s.lineJoin=o.getLineJoin()||i0,s.lineWidth=T===void 0?Xm:T,s.miterLimit=I===void 0?Hm:I,s.strokeStyle=ko(o.getColor()||Km)}r=this.textState_;const l=e.getFont()||T5;JU(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||ix,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||gh,r.scale=u===void 0?[1,1]:u;const h=e.getOffsetX(),f=e.getOffsetY(),g=e.getRotateWithView(),p=e.getKeepUpright(),x=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=g===void 0?!1:g,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=x===void 0?0:x,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:_n(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+_n(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Dz={Circle:ck,Default:Wp,Image:kz,LineString:Mz,Polygon:ck,Text:Oz};class Fz{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=Dz[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function jz(n,e,t,r,i,s,a,o,l,u,h,f,g=!0){let p=n[e],x=n[e+1],v=0,w=0,T=0,I=0;function A(){v=p,w=x,e+=r,p=n[e],x=n[e+1],I+=T,T=Math.sqrt((p-v)*(p-v)+(x-w)*(x-w))}do A();while(e<t-r&&I+T<s);let N=T===0?0:(s-I)/T;const D=zs(v,p,N),B=zs(w,x,N),k=e-r,P=I,M=s+o*l(u,i,h);for(;e<t-r&&I+T<M;)A();N=T===0?0:(M-I)/T;const j=zs(v,p,N),O=zs(w,x,N);let W=!1;if(g)if(f){const be=[D,B,j,O];a5(be,0,4,2,f,be,be),W=be[0]>be[2]}else W=D>j;const F=Math.PI,Te=[],Me=k+r===e;e=k,T=0,I=P,p=n[e],x=n[e+1];let Le;if(Me){A(),Le=Math.atan2(x-w,p-v),W&&(Le+=Le>0?-F:F);const be=(j+D)/2,ce=(O+B)/2;return Te[0]=[be,ce,(M-s)/2,Le,i],Te}i=i.replace(/\n/g," ");for(let be=0,ce=i.length;be<ce;){A();let Re=Math.atan2(x-w,p-v);if(W&&(Re+=Re>0?-F:F),Le!==void 0){let ne=Re-Le;if(ne+=ne>F?-2*F:ne<-F?2*F:0,Math.abs(ne)>a)return null}Le=Re;const Ie=be;let ie=0;for(;be<ce;++be){const ne=W?ce-be-1:be,de=o*l(u,i[ne],h);if(e+r<t&&I+T<s+ie+de/2)break;ie+=de}if(be===Ie)continue;const V=W?i.substring(ce-Ie,ce-be):i.substring(Ie,be);N=T===0?0:(s+ie/2-I)/T;const Y=zs(v,p,N),ee=zs(w,x,N);Te.push([Y,ee,ie/2,Re,V]),s+=ie}return Te}class j5{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(nx(),{get:(e,t)=>{if(typeof nx()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const qd=Zs(),_c=[],gl=[],ml=[],xc=[];function uk(n){return n[3].declutterBox}const hk=new RegExp("[-----]");function P2(n,e){return e==="start"?e=hk.test(n)?"right":"left":e==="end"&&(e=hk.test(n)?"left":"right"),ax[e]}function Vz(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function Gz(n,e,t){return t%2===0&&(n+=e),n}class Bz{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Xa(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new j5:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],f=l.justify?ax[l.justify]:P2(Array.isArray(e)?e[0]:e,l.textAlign||Ym),g=i&&a.lineWidth?a.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(Vz,[]),{width:x,height:v,widths:w,heights:T,lineWidths:I}=tz(l,p),A=x+g,N=[],D=(A+2)*h[0],B=(v+g)*h[1],k={width:D<0?Math.floor(D):Math.ceil(D),height:B<0?Math.floor(B):Math.ceil(B),contextInstructions:N};(h[0]!=1||h[1]!=1)&&N.push("scale",h),i&&(N.push("strokeStyle",a.strokeStyle),N.push("lineWidth",g),N.push("lineCap",a.lineCap),N.push("lineJoin",a.lineJoin),N.push("miterLimit",a.miterLimit),N.push("setLineDash",[a.lineDash]),N.push("lineDashOffset",a.lineDashOffset)),r&&N.push("fillStyle",o.fillStyle),N.push("textBaseline","middle"),N.push("textAlign","center");const P=.5-f;let M=f*A+P*g;const j=[],O=[];let W=0,F=0,Te=0,Me=0,Le;for(let be=0,ce=p.length;be<ce;be+=2){const Re=p[be];if(Re===`
`){F+=W,W=0,M=f*A+P*g,++Me;continue}const Ie=p[be+1]||l.font;Ie!==Le&&(i&&j.push("font",Ie),r&&O.push("font",Ie),Le=Ie),W=Math.max(W,T[Te]);const ie=[Re,M+P*w[Te]+f*(w[Te]-I[Me]),.5*(g+W)+F];M+=w[Te],i&&j.push("strokeText",ie),r&&O.push("fillText",ie),++Te}return Array.prototype.push.apply(N,j),Array.prototype.push.apply(N,O),this.labels_[s]=k,k}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,l,u,h,f,g,p,x,v,w){o*=g[0],l*=g[1];let T=r-o,I=i-l;const A=s+u>e?e-u:s,N=a+h>t?t-h:a,D=x[3]+A*g[0]+x[1],B=x[0]+N*g[1]+x[2],k=T-x[3],P=I-x[0];(v||f!==0)&&(_c[0]=k,xc[0]=k,_c[1]=P,gl[1]=P,gl[0]=k+D,ml[0]=gl[0],ml[1]=P+B,xc[1]=ml[1]);let M;return f!==0?(M=zo(Xa(),r,i,1,1,f,-r,-i),Hr(M,_c),Hr(M,gl),Hr(M,ml),Hr(M,xc),nu(Math.min(_c[0],gl[0],ml[0],xc[0]),Math.min(_c[1],gl[1],ml[1],xc[1]),Math.max(_c[0],gl[0],ml[0],xc[0]),Math.max(_c[1],gl[1],ml[1],xc[1]),qd)):nu(Math.min(k,k+D),Math.min(P,P+B),Math.max(k,k+D),Math.max(P,P+B),qd),p&&(T=Math.round(T),I=Math.round(I)),{drawImageX:T,drawImageY:I,drawImageW:A,drawImageH:N,originX:u,originY:h,declutterBox:{minX:qd[0],minY:qd[1],maxX:qd[2],maxY:qd[3],value:w},canvasTransform:M,scale:g}}replayImageOrLabel_(e,t,r,i,s,a,o){const l=!!(a||o),u=i.declutterBox,h=o?o[2]*i.scale[0]/2:0;return u.minX-h<=t[0]&&u.maxX+h>=0&&u.minY-h<=t[1]&&u.maxY+h>=0&&(l&&this.replayTextBackground_(e,_c,gl,ml,xc,a,o),nz(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Hr(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],l=this.pixelRatio,u=P2(Array.isArray(e)?e[0]:e,s.textAlign||Ym),h=ax[s.textBaseline||ix],f=o&&o.lineWidth?o.lineWidth:0,g=a.width/l-2*s.scale[0],p=u*g+2*(.5-u)*f,x=h*a.height/l+2*(.5-h)*f;return{label:a,anchorX:p,anchorY:x}}execute_(e,t,r,i,s,a,o,l){const u=this.zIndexContext_;let h;this.pixelCoordinates_&&xu(r,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Xc(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),fU(this.renderedTransform_,r));let f=0;const g=i.length;let p=0,x,v,w,T,I,A,N,D,B,k,P,M,j,O=0,W=0;const F=this.coordinateCache_,Te=this.viewRotation_,Me=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Le={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Te},be=this.instructions!=i||this.overlaps?0:200;let ce,Re,Ie,ie;for(;f<g;){const V=i[f];switch(V[0]){case Pt.BEGIN_GEOMETRY:ce=V[1],ie=V[3],ce.getGeometry()?o!==void 0&&!Qi(o,ie.getExtent())?f=V[2]+1:++f:f=V[2],u&&(u.zIndex=V[4]);break;case Pt.BEGIN_PATH:O>be&&(this.fill_(e),O=0),W>be&&(e.stroke(),W=0),!O&&!W&&(e.beginPath(),I=NaN,A=NaN),++f;break;case Pt.CIRCLE:p=V[1];const ee=h[p],ne=h[p+1],de=h[p+2],De=h[p+3],Se=de-ee,Fe=De-ne,je=Math.sqrt(Se*Se+Fe*Fe);e.moveTo(ee+je,ne),e.arc(ee,ne,je,0,2*Math.PI,!0),++f;break;case Pt.CLOSE_PATH:e.closePath(),++f;break;case Pt.CUSTOM:p=V[1],x=V[2];const Qe=V[3],gt=V[4],_t=V[5];Le.geometry=Qe,Le.feature=ce,f in F||(F[f]=[]);const Lt=F[f];_t?_t(h,p,x,2,Lt):(Lt[0]=h[p],Lt[1]=h[p+1],Lt.length=2),u&&(u.zIndex=V[6]),gt(Lt,Le),++f;break;case Pt.DRAW_IMAGE:p=V[1],x=V[2],B=V[3],v=V[4],w=V[5];let nn=V[6];const zt=V[7],Oe=V[8],Xt=V[9],Ae=V[10];let ge=V[11];const C=V[12];let wt=V[13];T=V[14]||"declutter";const q=V[15];if(!B&&V.length>=20){k=V[19],P=V[20],M=V[21],j=V[22];const nr=this.drawLabelWithPointPlacement_(k,P,M,j);B=nr.label,V[3]=B;const is=V[23];v=(nr.anchorX-is)*this.pixelRatio,V[4]=v;const Vr=V[24];w=(nr.anchorY-Vr)*this.pixelRatio,V[5]=w,nn=B.height,V[6]=nn,wt=B.width,V[13]=wt}let Ot;V.length>25&&(Ot=V[25]);let re,z,le;V.length>17?(re=V[16],z=V[17],le=V[18]):(re=gh,z=null,le=null),Ae&&Me?ge+=Te:!Ae&&!Me&&(ge-=Te);let Be=0;for(;p<x;p+=2){if(Ot&&Ot[Be++]<wt/this.pixelRatio)continue;const nr=this.calculateImageOrLabelDimensions_(B.width,B.height,h[p],h[p+1],wt,nn,v,w,Oe,Xt,ge,C,s,re,!!z||!!le,ce),is=[e,t,B,nr,zt,z,le];if(l){let Vr,rr,Gr;if(q){const on=x-p;if(!q[on]){q[on]={args:is,declutterMode:T};continue}const hr=q[on];Vr=hr.args,rr=hr.declutterMode,delete q[on],Gr=uk(Vr)}let Br,br;if(Vr&&(rr!=="declutter"||!l.collides(Gr))&&(Br=!0),(T!=="declutter"||!l.collides(nr.declutterBox))&&(br=!0),rr==="declutter"&&T==="declutter"){const on=Br&&br;Br=on,br=on}Br&&(rr!=="none"&&l.insert(Gr),this.replayImageOrLabel_.apply(this,Vr)),br&&(T!=="none"&&l.insert(nr.declutterBox),this.replayImageOrLabel_.apply(this,is))}else this.replayImageOrLabel_.apply(this,is)}++f;break;case Pt.DRAW_CHARS:const we=V[1],Ze=V[2],ht=V[3],Et=V[4];j=V[5];const St=V[6],Rt=V[7],en=V[8];M=V[9];const jr=V[10];k=V[11],Array.isArray(k)&&(k=k.reduce(Gz,"")),P=V[12];const Cs=[V[13],V[13]];T=V[14]||"declutter";const $i=V[15],Wi=this.textStates[P],Ar=Wi.font,ci=[Wi.scale[0]*Rt,Wi.scale[1]*Rt];let Tn;Ar in this.widths_?Tn=this.widths_[Ar]:(Tn={},this.widths_[Ar]=Tn);const Ps=eA(h,we,Ze,2),ks=Math.abs(ci[0])*Z4(Ar,k,Tn);if(Et||ks<=Ps){const nr=this.textStates[P].textAlign,is=(Ps-ks)*P2(k,nr),Vr=jz(h,we,Ze,2,k,is,St,Math.abs(ci[0]),Z4,Ar,Tn,Me?0:this.viewRotation_,$i);e:if(Vr){const rr=[];let Gr,Br,br,on,hr;if(M)for(Gr=0,Br=Vr.length;Gr<Br;++Gr){hr=Vr[Gr],br=hr[4],on=this.createLabel(br,P,"",M),v=hr[2]+(ci[0]<0?-jr:jr),w=ht*on.height+(.5-ht)*2*jr*ci[1]/ci[0]-en;const xr=this.calculateImageOrLabelDimensions_(on.width,on.height,hr[0],hr[1],on.width,on.height,v,w,0,0,hr[3],Cs,!1,gh,!1,ce);if(l&&T==="declutter"&&l.collides(xr.declutterBox))break e;rr.push([e,t,on,xr,1,null,null])}if(j)for(Gr=0,Br=Vr.length;Gr<Br;++Gr){hr=Vr[Gr],br=hr[4],on=this.createLabel(br,P,j,""),v=hr[2],w=ht*on.height-en;const xr=this.calculateImageOrLabelDimensions_(on.width,on.height,hr[0],hr[1],on.width,on.height,v,w,0,0,hr[3],Cs,!1,gh,!1,ce);if(l&&T==="declutter"&&l.collides(xr.declutterBox))break e;rr.push([e,t,on,xr,1,null,null])}l&&T!=="none"&&l.load(rr.map(uk));for(let xr=0,ss=rr.length;xr<ss;++xr)this.replayImageOrLabel_.apply(this,rr[xr])}}++f;break;case Pt.END_GEOMETRY:if(a!==void 0){ce=V[1];const nr=a(ce,ie,T);if(nr)return nr}++f;break;case Pt.FILL:be?O++:this.fill_(e),++f;break;case Pt.MOVE_TO_LINE_TO:for(p=V[1],x=V[2],Re=h[p],Ie=h[p+1],e.moveTo(Re,Ie),I=Re+.5|0,A=Ie+.5|0,p+=2;p<x;p+=2)Re=h[p],Ie=h[p+1],N=Re+.5|0,D=Ie+.5|0,(p==x-2||N!==I||D!==A)&&(e.lineTo(Re,Ie),I=N,A=D);++f;break;case Pt.SET_FILL_STYLE:this.alignAndScaleFill_=V[2],O&&(this.fill_(e),O=0,W&&(e.stroke(),W=0)),e.fillStyle=V[1],++f;break;case Pt.SET_STROKE_STYLE:W&&(e.stroke(),W=0),this.setStrokeStyle_(e,V),++f;break;case Pt.STROKE:be?W++:e.stroke(),++f;break;default:++f;break}}O&&this.fill_(e),W&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const ah=["Polygon","Circle","LineString","Image","Text","Default"],V5=["Image","Text"],Uz=ah.filter(n=>!V5.includes(n));class zz{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Xa(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new Bz(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,l=zo(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Kr(o,o));const h=this.hitDetectionContext_;h.canvas.width!==o||h.canvas.height!==o?(h.canvas.width=o,h.canvas.height=o):u||h.clearRect(0,0,o,o);let f;this.renderBuffer_!==void 0&&(f=Zs(),um(f,e),zm(f,t*(this.renderBuffer_+i),f));const g=$z(i);let p;function x(D,B,k){const P=h.getImageData(0,0,o,o).data;for(let M=0,j=g.length;M<j;M++)if(P[g[M]]>0){if(!a||k==="none"||p!=="Image"&&p!=="Text"||a.includes(D)){const O=(g[M]-3)/4,W=i-O%o,F=i-(O/o|0),Te=s(D,B,W*W+F*F);if(Te)return Te}h.clearRect(0,0,o,o);break}}const v=Object.keys(this.executorsByZIndex_).map(Number);v.sort(Il);let w,T,I,A,N;for(w=v.length-1;w>=0;--w){const D=v[w].toString();for(I=this.executorsByZIndex_[D],T=ah.length-1;T>=0;--T)if(p=ah[T],A=I[p],A!==void 0&&(N=A.executeHitDetection(h,l,r,x,f),N))return N}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return Xc(o,0,8,2,e,o),o}isEmpty(){return Ph(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?IB:Il),a=a||ah;const u=ah.length;for(let h=0,f=l.length;h<f;++h){const g=l[h].toString(),p=this.executorsByZIndex_[g];for(let x=0,v=a.length;x<v;++x){const w=a[x],T=p[w];if(T!==void 0){const I=o===null?void 0:T.getZIndexContext(),A=I?I.getContext():e,N=this.maxExtent_&&w!=="Image"&&w!=="Text";if(N&&(A.save(),this.clip(A,r)),!I||w==="Text"||w==="Image"?T.execute(A,t,r,i,s,o):I.pushFunction(D=>T.execute(D,t,r,i,s,o)),N&&A.restore(),I){I.offset();const D=l[h]*u+ah.indexOf(w);this.deferredZIndexContexts_[D]||(this.deferredZIndexContexts_[D]=[]),this.deferredZIndexContexts_[D].push(I)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Il);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const k2={};function $z(n){if(k2[n]!==void 0)return k2[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=r[o];l||(l=[],r[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return k2[n]=i,i}function dk(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let Hp=class G5 extends Ov{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;Cn(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||_n(a)),Cn(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),Cn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=yt.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?yt.LOADED:yt.IDLE:l=yt.LOADING:l=yt.LOADED),this.color_=e.color!==void 0?Lh(e.color):null,this.iconImage_=rx(a,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,h;if(e.size)[u,h]=e.size;else{const f=this.getImage(1);if(f.width&&f.height)u=f.width,h=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(dk(p[0],p[1],e.width,e.height))};this.listenImageChange(g);return}}u!==void 0&&this.setScale(dk(u,h,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new G5({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=rx(null,e,this.crossOrigin_,yt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==yt.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==yt.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener($t.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener($t.CHANGE,e)}ready(){return this.iconImage_.ready()}};const Ro=.5;function Wz(n,e,t,r,i,s,a,o,l){const u=i,h=n[0]*Ro,f=n[1]*Ro,g=Kr(h,f);g.imageSmoothingEnabled=!1;const p=g.canvas,x=new iz(g,Ro,i,null,a,o,null),v=t.length,w=Math.floor((256*256*256-1)/v),T={};for(let A=1;A<=v;++A){const N=t[A-1],D=N.getStyleFunction()||r;if(!D)continue;let B=D(N,s);if(!B)continue;Array.isArray(B)||(B=[B]);const P=(A*w).toString(16).padStart(7,"#00000");for(let M=0,j=B.length;M<j;++M){const O=B[M],W=O.getGeometryFunction()(N);if(!W||!Qi(u,W.getExtent()))continue;const F=O.clone(),Te=F.getFill();Te&&Te.setColor(P);const Me=F.getStroke();Me&&(Me.setColor(P),Me.setLineDash(null)),F.setText(void 0);const Le=O.getImage();if(Le){const Ie=Le.getImageSize();if(!Ie)continue;const ie=Kr(Ie[0],Ie[1],void 0,{alpha:!1}),V=ie.canvas;ie.fillStyle=P,ie.fillRect(0,0,V.width,V.height),F.setImage(new Hp({img:V,anchor:Le.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Le.getOrigin(),opacity:1,size:Le.getSize(),scale:Le.getScale(),rotation:Le.getRotation(),rotateWithView:Le.getRotateWithView()}))}const be=F.getZIndex()||0;let ce=T[be];ce||(ce={},T[be]=ce,ce.Polygon=[],ce.Circle=[],ce.LineString=[],ce.Point=[]);const Re=W.getType();if(Re==="GeometryCollection"){const Ie=W.getGeometriesArrayRecursive();for(let ie=0,V=Ie.length;ie<V;++ie){const Y=Ie[ie];ce[Y.getType().replace("Multi","")].push(Y,F)}}else ce[Re.replace("Multi","")].push(W,F)}}const I=Object.keys(T).map(Number).sort(Il);for(let A=0,N=I.length;A<N;++A){const D=T[I[A]];for(const B in D){const k=D[B];for(let P=0,M=k.length;P<M;P+=2){x.setStyle(k[P+1]);for(let j=0,O=e.length;j<O;++j)x.setTransform(e[j]),x.drawGeometry(k[P])}}}return g.getImageData(0,0,p.width,p.height)}function Hz(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*Ro),s=Math.floor(Math.round(n[1])*Ro),a=(Yn(i,0,t.width-1)+Yn(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],h=t.data[a+2]+256*(l+256*o),f=Math.floor((256*256*256-1)/e.length);h&&h%f===0&&r.push(e[h/f-1])}return r}class B5 extends qo{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const Kz=5;class Yz extends Fp{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Kz}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return jt()}getData(e){return null}prepareFrame(e){return jt()}renderFrame(e,t){return jt()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===yt.LOADED||t.getState()===yt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=yt.LOADED&&t!=yt.ERROR&&e.addEventListener($t.CHANGE,this.boundHandleImageChange_),t==yt.IDLE&&(e.load(),t=e.getState()),t==yt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const fk=[];let gf=null;function Xz(){gf=Kr(1,1,void 0,{willReadFrequently:!0})}class hA extends Yz{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Xa(),this.pixelTransform=Xa(),this.inversePixelTransform=Xa(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){gf||Xz(),gf.clearRect(0,0,1,1);let i;try{gf.drawImage(e,t,r,1,1,0,0,1,1),i=gf.getImageData(0,0,1,1).data}catch{return gf=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&xu(Lh(e.style.backgroundColor),Lh(r)))){const o=e.firstElementChild;Gc(o)&&(a=o.getContext("2d"))}if(a&&yU(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=Ks?y5():document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Kr();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=td(r),s=bv(r),a=Av(r),o=Iv(r);Hr(t.coordinateToPixelTransform,i),Hr(t.coordinateToPixelTransform,s),Hr(t.coordinateToPixelTransform,a),Hr(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;Hr(l,i),Hr(l,s),Hr(l,a),Hr(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(tn(r)/i*a),l=Math.round(Mr(r)/i*a);zo(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-l/2),s5(this.inversePixelTransform,this.pixelTransform);const u=pU(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const h=this.context.canvas;h.width!=o||h.height!=l?(h.width=o,h.height=l):this.context.clearRect(0,0,o,l),u!==h.style.transform&&(h.style.transform=u)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new B5(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(xa.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(xa.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new j5),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(xa.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(xa.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const l=s/2,u=a/2,h=i/t,f=-h,g=-e[0]+o,p=-e[1];return zo(this.tempTransform,l,u,h,f,-r,g,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class qz extends hA{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Zs(),this.wrappedRenderedExtent_=Zs(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,h=l.getExtent(),f=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),p=t.pixelRatio,x=t.viewHints,v=!(x[ni.ANIMATING]||x[ni.INTERACTING]),w=this.context,T=Math.round(tn(i)/o*p),I=Math.round(Mr(i)/o*p),A=f.getWrapX()&&l.canWrapX(),N=A?tn(h):null,D=A?Math.ceil((i[2]-h[2])/N)+1:1;let B=A?Math.floor((i[0]-h[0])/N):0;do{let k=this.getRenderTransform(a,o,0,p,T,I,B*N);t.declutter&&(k=k.slice(0)),e.execute(w,[w.canvas.width,w.canvas.height],k,u,v,r===void 0?ah:r?V5:Uz,r?g&&t.declutter[g]:void 0)}while(++B<D)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Kr(this.context.canvas.width,this.context.canvas.height,fk))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Lv(this.context),fk.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(xa.PRERENDER)||this.getLayer().hasListener(xa.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const l=Po(r.extent);o=Qi(l,e.extent),this.clipped_=o&&!Fc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),h=[],f=r[0]*Ro,g=r[1]*Ro;h.push(this.getRenderTransform(i,s,a,Ro,f,g,0).slice());const p=u.getSource(),x=o.getExtent();if(p.getWrapX()&&o.canWrapX()&&!Fc(x,l)){let v=l[0];const w=tn(x);let T=0,I;for(;v<x[0];)--T,I=w*T,h.push(this.getRenderTransform(i,s,a,Ro,f,g,I).slice()),v+=w;for(T=0,v=l[2];v>x[2];)++T,I=w*T,h.push(this.getRenderTransform(i,s,a,Ro,f,g,I).slice()),v-=w}this.hitDetectionImageData_=Wz(r,h,this.renderedFeatures_,u.getStyleFunction(),l,s,a,Q4(s,this.renderedPixelRatio_))}t(Hz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),u={},h=function(g,p,x){const v=_n(g),w=u[v];if(w){if(w!==!0&&x<w.distanceSq){if(x===0)return u[v]=!0,s.splice(s.lastIndexOf(w),1),i(g,l,p);w.geometry=p,w.distanceSq=x}}else{if(x===0)return u[v]=!0,i(g,l,p);s.push(u[v]={feature:g,layer:l,geometry:p,distanceSq:x,callback:i})}},f=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,h,f?t.declutter?.[f]?.all().map(g=>g.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[ni.ANIMATING],s=e.viewHints[ni.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,h=u.projection,f=u.resolution,g=e.pixelRatio,p=t.getRevision(),x=t.getRenderBuffer();let v=t.getRenderOrder();v===void 0&&(v=az);const w=u.center.slice(),T=zm(l,x*f),I=T.slice(),A=[T.slice()],N=h.getExtent();if(r.getWrapX()&&h.canWrapX()&&!Fc(N,e.extent)){const Te=tn(N),Me=Math.max(tn(T)/2,Te);T[0]=N[0]-Me,T[2]=N[2]+Me,XO(w,h);const Le=HO(A[0],h);Le[0]<N[0]&&Le[2]<N[2]?A.push([Le[0]+Te,Le[1],Le[2]+Te,Le[3]]):Le[0]>N[0]&&Le[2]>N[2]&&A.push([Le[0]-Te,Le[1],Le[2]-Te,Le[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==p&&this.renderedRenderOrder_==v&&this.renderedFrameDeclutter_===!!e.declutter&&Fc(this.wrappedRenderedExtent_,T))return xu(this.renderedExtent_,I)||(this.hitDetectionImageData_=null,this.renderedExtent_=I),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const D=new Fz(R5(f,g),T,f,g);let B;for(let Te=0,Me=A.length;Te<Me;++Te)r.loadFeatures(A[Te],f,h);const k=Q4(f,g);let P=!0;const M=(Te,Me)=>{let Le;const be=Te.getStyleFunction()||t.getStyleFunction();if(be&&(Le=be(Te,f)),Le){const ce=this.renderFeature(Te,k,Le,D,B,this.getLayer().getDeclutter(),Me);P=P&&!ce}},j=i5(T),O=r.getFeaturesInExtent(j);v&&O.sort(v);for(let Te=0,Me=O.length;Te<Me;++Te)M(O[Te],Te);this.renderedFeatures_=O,this.ready=P;const W=D.finish(),F=new zz(T,f,g,r.getOverlaps(),W,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=f,this.renderedRevision_=p,this.renderedRenderOrder_=v,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=I,this.wrappedRenderedExtent_=T,this.renderedCenter_=w,this.renderedProjection_=h,this.renderedPixelRatio_=g,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,h=r.length;u<h;++u)l=J4(i,e,r[u],t,this.boundHandleStyleImageChange_,s,a,o)||l;else l=J4(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return l}}let sd=0;const Zi=1<<sd++,cn=1<<sd++,ps=1<<sd++,Ua=1<<sd++,Oh=1<<sd++,Yg=1<<sd++,By=Math.pow(2,sd)-1,dA={[Zi]:"boolean",[cn]:"number",[ps]:"string",[Ua]:"color",[Oh]:"number[]",[Yg]:"size"},Zz=Object.keys(dA).map(Number).sort(Il);function Qz(n){return n in dA}function Xg(n){const e=[];for(const t of Zz)qg(n,t)&&e.push(dA[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function qg(n,e){return(n&e)===e}function vc(n,e){return n===e}class Wr{constructor(e,t){if(!Qz(e))throw new Error(`literal expressions must have a specific type, got ${Xg(e)}`);this.type=e,this.value=t}}class Jz{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function U5(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function wi(n,e,t){switch(typeof n){case"boolean":{if(vc(e,ps))return new Wr(ps,n?"true":"false");if(!qg(e,Zi))throw new Error(`got a boolean, but expected ${Xg(e)}`);return new Wr(Zi,n)}case"number":{if(vc(e,Yg))return new Wr(Yg,vs(n));if(vc(e,Zi))return new Wr(Zi,!!n);if(vc(e,ps))return new Wr(ps,n.toString());if(!qg(e,cn))throw new Error(`got a number, but expected ${Xg(e)}`);return new Wr(cn,n)}case"string":{if(vc(e,Ua))return new Wr(Ua,iA(n));if(vc(e,Zi))return new Wr(Zi,!!n);if(!qg(e,ps))throw new Error(`got a string, but expected ${Xg(e)}`);return new Wr(ps,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return u$(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(vc(e,Yg)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Wr(Yg,n)}if(vc(e,Ua)){if(n.length===3)return new Wr(Ua,[...n,1]);if(n.length===4)return new Wr(Ua,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!qg(e,Oh))throw new Error(`got an array of numbers, but expected ${Xg(e)}`);return new Wr(Oh,n)}const Ne={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},e$={[Ne.Get]:Bt(Yt(1,1/0),gk),[Ne.Var]:Bt(Yt(1,1),t$),[Ne.Has]:Bt(Yt(1,1/0),gk),[Ne.Id]:Bt(n$,Zd),[Ne.Concat]:Bt(Yt(2,1/0),vn(ps)),[Ne.GeometryType]:Bt(r$,Zd),[Ne.LineMetric]:Bt(Zd),[Ne.Resolution]:Bt(M2,Zd),[Ne.Zoom]:Bt(M2,Zd),[Ne.Time]:Bt(M2,Zd),[Ne.Any]:Bt(Yt(2,1/0),vn(Zi)),[Ne.All]:Bt(Yt(2,1/0),vn(Zi)),[Ne.Not]:Bt(Yt(1,1),vn(Zi)),[Ne.Equal]:Bt(Yt(2,2),vn(By)),[Ne.NotEqual]:Bt(Yt(2,2),vn(By)),[Ne.GreaterThan]:Bt(Yt(2,2),vn(cn)),[Ne.GreaterThanOrEqualTo]:Bt(Yt(2,2),vn(cn)),[Ne.LessThan]:Bt(Yt(2,2),vn(cn)),[Ne.LessThanOrEqualTo]:Bt(Yt(2,2),vn(cn)),[Ne.Multiply]:Bt(Yt(2,1/0),mk),[Ne.Coalesce]:Bt(Yt(2,1/0),mk),[Ne.Divide]:Bt(Yt(2,2),vn(cn)),[Ne.Add]:Bt(Yt(2,1/0),vn(cn)),[Ne.Subtract]:Bt(Yt(2,2),vn(cn)),[Ne.Clamp]:Bt(Yt(3,3),vn(cn)),[Ne.Mod]:Bt(Yt(2,2),vn(cn)),[Ne.Pow]:Bt(Yt(2,2),vn(cn)),[Ne.Abs]:Bt(Yt(1,1),vn(cn)),[Ne.Floor]:Bt(Yt(1,1),vn(cn)),[Ne.Ceil]:Bt(Yt(1,1),vn(cn)),[Ne.Round]:Bt(Yt(1,1),vn(cn)),[Ne.Sin]:Bt(Yt(1,1),vn(cn)),[Ne.Cos]:Bt(Yt(1,1),vn(cn)),[Ne.Atan]:Bt(Yt(1,2),vn(cn)),[Ne.Sqrt]:Bt(Yt(1,1),vn(cn)),[Ne.Match]:Bt(Yt(4,1/0),pk,s$),[Ne.Between]:Bt(Yt(3,3),vn(cn)),[Ne.Interpolate]:Bt(Yt(6,1/0),pk,a$),[Ne.Case]:Bt(Yt(3,1/0),i$,o$),[Ne.In]:Bt(Yt(2,2),l$),[Ne.Number]:Bt(Yt(1,1/0),vn(By)),[Ne.String]:Bt(Yt(1,1/0),vn(By)),[Ne.Array]:Bt(Yt(1,1/0),vn(cn)),[Ne.Color]:Bt(Yt(1,4),vn(cn)),[Ne.Band]:Bt(Yt(1,3),vn(cn)),[Ne.Palette]:Bt(Yt(2,2),c$),[Ne.ToString]:Bt(Yt(1,1),vn(Zi|cn|ps|Ua))};function gk(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new Wr(cn,a);break}case"string":{i[s]=new Wr(ps,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function t$(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new Wr(ps,r)]}function n$(n,e,t){t.featureId=!0}function r$(n,e,t){t.geometryType=!0}function M2(n,e,t){t.mapState=!0}function Zd(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Yt(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function mk(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=wi(n[s+1],e,t);i[s]=a}return i}function vn(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=wi(e[a+1],n,r);s[a]=o}return s}}function i$(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function pk(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function s$(n,e,t){const r=n.length-1,i=ps|cn|Zi,s=wi(n[1],i,t),a=wi(n[n.length-1],e,t),o=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const u=wi(n[l+2],s.type,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=wi(n[l+3],a.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...o,a]}function a$(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new Wr(cn,i);let a;try{a=wi(n[2],cn,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const u=wi(n[l+3],cn,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=wi(n[l+4],e,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,a,...o]}function o$(n,e,t){const r=wi(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=wi(n[s+1],Zi,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=wi(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function l$(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=ps}else i=cn;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const l=wi(r[o],i,t);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[wi(n[1],i,t),...s]}function c$(n,e,t){let r;try{r=wi(n[1],cn,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=wi(i[a],Ua,t)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof Wr))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function Bt(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new Jz(t,i,...s)}}function u$(n,e,t){const r=n[0],i=e$[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function z5(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return z5(n.getGeometries()[0]);default:return""}}function $5(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function $l(n,e,t){const r=wi(n,e,t);return io(r)}function io(n,e){if(n instanceof Wr){if(n.type===Ua&&typeof n.value=="string"){const r=iA(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Ne.Number:case Ne.String:case Ne.Coalesce:return h$(n);case Ne.Get:case Ne.Var:case Ne.Has:return d$(n);case Ne.Id:return r=>r.featureId;case Ne.GeometryType:return r=>r.geometryType;case Ne.Concat:{const r=n.args.map(i=>io(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Ne.Resolution:return r=>r.resolution;case Ne.Any:case Ne.All:case Ne.Between:case Ne.In:case Ne.Not:return g$(n);case Ne.Equal:case Ne.NotEqual:case Ne.LessThan:case Ne.LessThanOrEqualTo:case Ne.GreaterThan:case Ne.GreaterThanOrEqualTo:return f$(n);case Ne.Multiply:case Ne.Divide:case Ne.Add:case Ne.Subtract:case Ne.Clamp:case Ne.Mod:case Ne.Pow:case Ne.Abs:case Ne.Floor:case Ne.Ceil:case Ne.Round:case Ne.Sin:case Ne.Cos:case Ne.Atan:case Ne.Sqrt:return m$(n);case Ne.Case:return p$(n);case Ne.Match:return y$(n);case Ne.Interpolate:return _$(n);case Ne.ToString:return x$(n);default:throw new Error(`Unsupported operator ${t}`)}}function h$(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=io(n.args[s]);switch(t){case Ne.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Ne.Number:case Ne.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function d$(n,e){const r=n.args[0].value;switch(n.operator){case Ne.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;a=a[h]}return a};case Ne.Var:return i=>i.variables[r];case Ne.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;if(!a||!Object.hasOwn(a,h))return!1;a=a[h]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function f$(n,e){const t=n.operator,r=io(n.args[0]),i=io(n.args[1]);switch(t){case Ne.Equal:return s=>r(s)===i(s);case Ne.NotEqual:return s=>r(s)!==i(s);case Ne.LessThan:return s=>r(s)<i(s);case Ne.LessThanOrEqualTo:return s=>r(s)<=i(s);case Ne.GreaterThan:return s=>r(s)>i(s);case Ne.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function g$(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=io(n.args[s]);switch(t){case Ne.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Ne.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Ne.Between:return s=>{const a=i[0](s),o=i[1](s),l=i[2](s);return a>=o&&a<=l};case Ne.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case Ne.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function m$(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=io(n.args[s]);switch(t){case Ne.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case Ne.Divide:return s=>i[0](s)/i[1](s);case Ne.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case Ne.Subtract:return s=>i[0](s)-i[1](s);case Ne.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const l=i[2](s);return a>l?l:a};case Ne.Mod:return s=>i[0](s)%i[1](s);case Ne.Pow:return s=>Math.pow(i[0](s),i[1](s));case Ne.Abs:return s=>Math.abs(i[0](s));case Ne.Floor:return s=>Math.floor(i[0](s));case Ne.Ceil:return s=>Math.ceil(i[0](s));case Ne.Round:return s=>Math.round(i[0](s));case Ne.Sin:return s=>Math.sin(i[0](s));case Ne.Cos:return s=>Math.cos(i[0](s));case Ne.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Ne.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function p$(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=io(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function y$(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=io(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t-1;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function _$(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=io(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,l;for(let u=2;u<t;u+=2){const h=r[u](i);let f=r[u+1](i);const g=Array.isArray(f);if(g&&(f=$U(f)),h>=a)return u===2?f:g?v$(s,a,o,l,h,f):Zg(s,a,o,l,h,f);o=h,l=f}return l}}function x$(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=io(n.args[s]);switch(t){case Ne.ToString:return s=>{const a=i[0](s);return n.args[0].type===Ua?sA(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Zg(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+l*(s-r)}function v$(n,e,t,r,i,s){if(i-t===0)return r;const o=K4(r),l=K4(s);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const h=[Zg(n,e,t,o[0],i,l[0]),Zg(n,e,t,o[1],i,l[1]),o[2]+Zg(n,e,t,0,i,u),Zg(n,e,t,r[3],i,s[3])];return WU(h)}function E$(n){return!0}function w$(n){const e=U5(),t=S$(n,e),r=$5();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=z5(i.getGeometry())),t(r)}}function yk(n){const e=U5(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=aT(n[a],e);const i=$5(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const u=a.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const h=r[u](i);h&&(s[l]=h,l+=1)}return s.length=l,s}}function S$(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?$l(s.filter,Zi,e):E$;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=aT(s.style[u],e)}else o=[aT(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const l=r[o].filter;if(l(i)&&!(n[o].else&&a)){a=!0;for(const u of r[o].styles){const h=u(i);h&&s.push(h)}}}return s}}function aT(n,e){const t=Zm(n,"",e),r=Qm(n,"",e),i=T$(n,e),s=I$(n,e),a=ys(n,"z-index",e);if(!t&&!r&&!i&&!s&&!Ph(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new ur;return function(l){let u=!0;if(t){const h=t(l);h&&(u=!1),o.setFill(h)}if(r){const h=r(l);h&&(u=!1),o.setStroke(h)}if(i){const h=i(l);h&&(u=!1),o.setText(h)}if(s){const h=s(l);h&&(u=!1),o.setImage(h)}return a&&o.setZIndex(a(l)),u?null:o}}function Zm(n,e,t){let r;if(e+"fill-pattern-src"in n)r=C$(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=fA(n,e+"fill-color",t)}if(!r)return null;const i=new oi;return function(s){const a=r(s);return a===rA?null:(i.setColor(a),i)}}function Qm(n,e,t){const r=ys(n,e+"stroke-width",t),i=fA(n,e+"stroke-color",t);if(!r&&!i)return null;const s=_l(n,e+"stroke-line-cap",t),a=_l(n,e+"stroke-line-join",t),o=W5(n,e+"stroke-line-dash",t),l=ys(n,e+"stroke-line-dash-offset",t),u=ys(n,e+"stroke-miter-limit",t),h=new xs;return function(f){if(i){const g=i(f);if(g===rA)return null;h.setColor(g)}if(r&&h.setWidth(r(f)),s){const g=s(f);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(g)}if(a){const g=a(f);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(g)}return o&&h.setLineDash(o(f)),l&&h.setLineDashOffset(l(f)),u&&h.setMiterLimit(u(f)),h}}function T$(n,e){const t="text-",r=_l(n,t+"value",e);if(!r)return null;const i=Zm(n,t,e),s=Zm(n,t+"background-",e),a=Qm(n,t,e),o=Qm(n,t+"background-",e),l=_l(n,t+"font",e),u=ys(n,t+"max-angle",e),h=ys(n,t+"offset-x",e),f=ys(n,t+"offset-y",e),g=Ff(n,t+"overflow",e),p=_l(n,t+"placement",e),x=ys(n,t+"repeat",e),v=Fv(n,t+"scale",e),w=Ff(n,t+"rotate-with-view",e),T=ys(n,t+"rotation",e),I=_l(n,t+"align",e),A=_l(n,t+"justify",e),N=_l(n,t+"baseline",e),D=Ff(n,t+"keep-upright",e),B=W5(n,t+"padding",e),k=jv(n,t+"declutter-mode"),P=new id({declutterMode:k});return function(M){if(P.setText(r(M)),i&&P.setFill(i(M)),s&&P.setBackgroundFill(s(M)),a&&P.setStroke(a(M)),o&&P.setBackgroundStroke(o(M)),l&&P.setFont(l(M)),u&&P.setMaxAngle(u(M)),h&&P.setOffsetX(h(M)),f&&P.setOffsetY(f(M)),g&&P.setOverflow(g(M)),p){const j=p(M);if(j!=="point"&&j!=="line")throw new Error("Expected point or line for text-placement");P.setPlacement(j)}if(x&&P.setRepeat(x(M)),v&&P.setScale(v(M)),w&&P.setRotateWithView(w(M)),T&&P.setRotation(T(M)),I){const j=I(M);if(j!=="left"&&j!=="center"&&j!=="right"&&j!=="end"&&j!=="start")throw new Error("Expected left, right, center, start, or end for text-align");P.setTextAlign(j)}if(A){const j=A(M);if(j!=="left"&&j!=="right"&&j!=="center")throw new Error("Expected left, right, or center for text-justify");P.setJustify(j)}if(N){const j=N(M);if(j!=="bottom"&&j!=="top"&&j!=="middle"&&j!=="alphabetic"&&j!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");P.setTextBaseline(j)}return B&&P.setPadding(B(M)),D&&P.setKeepUpright(D(M)),P}}function I$(n,e){return"icon-src"in n?A$(n,e):"shape-points"in n?b$(n,e):"circle-radius"in n?R$(n,e):null}function A$(n,e){const t="icon-",r=t+"src",i=H5(n[r],r),s=ox(n,t+"anchor",e),a=Fv(n,t+"scale",e),o=ys(n,t+"opacity",e),l=ox(n,t+"displacement",e),u=ys(n,t+"rotation",e),h=Ff(n,t+"rotate-with-view",e),f=xk(n,t+"anchor-origin"),g=vk(n,t+"anchor-x-units"),p=vk(n,t+"anchor-y-units"),x=N$(n,t+"color"),v=k$(n,t+"cross-origin"),w=M$(n,t+"offset"),T=xk(n,t+"offset-origin"),I=lx(n,t+"width"),A=lx(n,t+"height"),N=P$(n,t+"size"),D=jv(n,t+"declutter-mode"),B=new Hp({src:i,anchorOrigin:f,anchorXUnits:g,anchorYUnits:p,color:x,crossOrigin:v,offset:w,offsetOrigin:T,height:A,width:I,size:N,declutterMode:D});return function(k){return o&&B.setOpacity(o(k)),l&&B.setDisplacement(l(k)),u&&B.setRotation(u(k)),h&&B.setRotateWithView(h(k)),a&&B.setScale(a(k)),s&&B.setAnchor(s(k)),B}}function b$(n,e){const t="shape-",r=t+"points",i=t+"radius",s=oT(n[r],r),a=oT(n[i],i),o=Zm(n,t,e),l=Qm(n,t,e),u=Fv(n,t+"scale",e),h=ox(n,t+"displacement",e),f=ys(n,t+"rotation",e),g=Ff(n,t+"rotate-with-view",e),p=lx(n,t+"radius2"),x=lx(n,t+"angle"),v=jv(n,t+"declutter-mode"),w=new Dv({points:s,radius:a,radius2:p,angle:x,declutterMode:v});return function(T){return o&&w.setFill(o(T)),l&&w.setStroke(l(T)),h&&w.setDisplacement(h(T)),f&&w.setRotation(f(T)),g&&w.setRotateWithView(g(T)),u&&w.setScale(u(T)),w}}function R$(n,e){const t="circle-",r=Zm(n,t,e),i=Qm(n,t,e),s=ys(n,t+"radius",e),a=Fv(n,t+"scale",e),o=ox(n,t+"displacement",e),l=ys(n,t+"rotation",e),u=Ff(n,t+"rotate-with-view",e),h=jv(n,t+"declutter-mode"),f=new Dl({radius:5,declutterMode:h});return function(g){return s&&f.setRadius(s(g)),r&&f.setFill(r(g)),i&&f.setStroke(i(g)),o&&f.setDisplacement(o(g)),l&&f.setRotation(l(g)),u&&f.setRotateWithView(u(g)),a&&f.setScale(a(g)),f}}function ys(n,e,t){if(!(e in n))return;const r=$l(n[e],cn,t);return function(i){return oT(r(i),e)}}function _l(n,e,t){if(!(e in n))return null;const r=$l(n[e],ps,t);return function(i){return H5(r(i),e)}}function C$(n,e,t){const r=_l(n,e+"pattern-src",t),i=_k(n,e+"pattern-offset",t),s=_k(n,e+"pattern-size",t),a=fA(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function Ff(n,e,t){if(!(e in n))return null;const r=$l(n[e],Zi,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function fA(n,e,t){if(!(e in n))return null;const r=$l(n[e],Ua,t);return function(i){return K5(r(i),e)}}function W5(n,e,t){if(!(e in n))return null;const r=$l(n[e],Oh,t);return function(i){return Kp(r(i),e)}}function ox(n,e,t){if(!(e in n))return null;const r=$l(n[e],Oh,t);return function(i){const s=Kp(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function _k(n,e,t){if(!(e in n))return null;const r=$l(n[e],Oh,t);return function(i){return Y5(r(i),e)}}function Fv(n,e,t){if(!(e in n))return null;const r=$l(n[e],Oh|cn,t);return function(i){return L$(r(i),e)}}function lx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function P$(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return vs(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function k$(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function xk(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function vk(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function M$(n,e){const t=n[e];if(t!==void 0)return Kp(t,e)}function jv(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function N$(n,e){const t=n[e];if(t!==void 0)return K5(t,e)}function Kp(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function H5(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function oT(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function K5(n,e){if(typeof n=="string")return n;const t=Kp(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Y5(n,e){const t=Kp(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function L$(n,e){return typeof n=="number"?n:Y5(n,e)}const Da={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ek(n,e,t){return(function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,u=e?0:s[1]*i,h=o?o[0]:0,f=o?o[1]:0;let g=n[0]+l/2+h,p=n[2]-l/2+h,x=n[1]+u/2+f,v=n[3]-u/2+f;g>p&&(g=(p+g)/2,p=g),x>v&&(x=(v+x)/2,v=x);let w=Yn(r[0],g,p),T=Yn(r[1],x,v);if(a&&t&&i){const I=30*i;w+=-I*Math.log(1+Math.max(0,g-r[0])/I)+I*Math.log(1+Math.max(0,r[0]-p)/I),T+=-I*Math.log(1+Math.max(0,x-r[1])/I)+I*Math.log(1+Math.max(0,r[1]-v)/I)}return[w,T]})}function O$(n){return n}function X5(n){return Math.pow(n,3)}function P0(n){return 1-X5(1-n)}function D$(n){return 3*n*n-2*n*n*n}function F$(n){return n}function gA(n,e,t,r){const i=tn(e)/t[0],s=Mr(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function mA(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Yn(r,t/2,e*2)}function j$(n,e,t,r){return e=e!==void 0?e:!0,(function(i,s,a,o){if(i!==void 0){const l=n[0],u=n[n.length-1],h=t?gA(l,t,a,r):l;if(o)return e?mA(i,h,u):Yn(i,u,h);const f=Math.min(h,i),g=Math.floor(Sv(n,f,s));return n[g]>h&&g<n.length-1?n[g+1]:n[g]}})}function V$(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(a,o,l,u){if(a!==void 0){const h=i?gA(e,i,l,s):e;if(u)return r?mA(a,h,t):Yn(a,t,h);const f=1e-9,g=Math.ceil(Math.log(e/h)/Math.log(n)-f),p=-o*(.5-f)+.5,x=Math.min(h,a),v=Math.floor(Math.log(e/x)/Math.log(n)+p),w=Math.max(g,v),T=e/Math.pow(n,w);return Yn(T,t,h)}})}function wk(n,e,t,r,i){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const u=r?gA(n,r,o,i):n;return!t||!l?Yn(s,e,u):mA(s,u,e)}})}function pA(n){if(n!==void 0)return 0}function Sk(n){if(n!==void 0)return n}function G$(n){const e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function B$(n){const e=bl(5);return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}const U$=42,yA=256,N2=0;class Co extends Zo{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=KI(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&r5(),e.center&&(e.center=yl(e.center,this.projection_)),e.extent&&(e.extent=Po(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Da)delete t[o];this.setProperties(t,!0);const r=$$(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=z$(e),s=r.constraint,a=W$(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=yl(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=yl(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const h=arguments[i];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(i===t){r&&Uy(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const h=arguments[i],f={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||D$,callback:r};if(h.center&&(f.sourceCenter=a,f.targetCenter=h.center.slice(),a=f.targetCenter),h.zoom!==void 0?(f.sourceResolution=o,f.targetResolution=this.getResolutionForZoom(h.zoom),o=f.targetResolution):h.resolution&&(f.sourceResolution=o,f.targetResolution=h.resolution,o=f.targetResolution),h.rotation!==void 0){f.sourceRotation=l;const g=Yc(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+g,l=f.targetRotation}H$(f)?f.complete=!0:s+=f.duration,u.push(f)}this.animations_.push(u),this.setHint(ni.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ni.ANIMATING]>0}getInteracting(){return this.hints_[ni.INTERACTING]>0}cancelAnimations(){this.setHint(ni.ANIMATING,-this.hints_[ni.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&Uy(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l.complete)continue;const u=e-l.start;let h=l.duration>0?u/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const f=l.easing(h);if(l.sourceCenter){const g=l.sourceCenter[0],p=l.sourceCenter[1],x=l.targetCenter[0],v=l.targetCenter[1];this.nextCenter_=l.targetCenter;const w=g+f*(x-g),T=p+f*(v-p);this.targetCenter_=[w,T]}if(l.sourceResolution&&l.targetResolution){const g=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(g,0,p,!0);this.targetCenter_=this.calculateCenterZoom(x,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const g=f===1?Yc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(ni.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&Uy(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],zI(r,e-this.getRotation()),FB(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&QS(e,this.getProjection())}getCenterInternal(){return this.get(Da.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return i5(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Cn(t,"The view center is not defined");const r=this.getResolution();Cn(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return Cn(i!==void 0,"The view rotation is not defined"),Y_(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Da.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Po(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=tn(e)/t[0],i=Mr(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(s){return t/Math.pow(e,s*i)})}getRotation(){return this.get(Da.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return(function(a){return Math.log(r/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=L2(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Sv(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Yn(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Yn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(Cn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Cn(!R0(e),"Cannot fit empty extent provided as `geometry`");const i=Po(e,this.getProjection());r=tk(i)}else if(e.getType()==="Circle"){const i=Po(e.getExtent(),this.getProjection());r=tk(i),r.rotate(this.getRotation(),Uo(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,u=-1/0,h=-1/0;for(let f=0,g=s.length;f<g;f+=a){const p=s[f]*r-s[f+1]*i,x=s[f]*i+s[f+1]*r;o=Math.min(o,p),l=Math.min(l,x),u=Math.max(u,p),h=Math.max(h,x)}return[o,l,u,h]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),h=Math.sin(u),f=Math.cos(u),g=Uo(o);g[0]+=(i[1]-i[3])/2*l,g[1]+=(i[0]-i[2])/2*l;const p=g[0]*f-g[1]*h,x=g[1]*f+g[0]*h,v=this.getConstrainedCenter([p,x],l),w=t.callback?t.callback:Um;t.duration!==void 0?this.animateInternal({resolution:l,center:v,duration:t.duration,easing:t.easing},w):(this.targetResolution_=l,this.targetCenter_=v,this.applyTargetState_(!1,!0),Uy(w,!0))}centerOn(e,t,r){this.centerOnInternal(yl(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(L2(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),l=L2(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=QS(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&yl(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=yl(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&yl(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(Da.ROTATION)!==i&&this.set(Da.ROTATION,i),this.get(Da.RESOLUTION)!==a&&(this.set(Da.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Da.CENTER)||!q_(this.get(Da.CENTER),o))&&this.set(Da.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!q_(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:P0,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ni.INTERACTING,1)}endInteraction(e,t,r){r=r&&yl(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(ni.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function Uy(n,e){setTimeout(function(){n(e)},0)}function z$(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Ek(n.extent,n.constrainOnlyCenter,t)}const e=KI(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Ek(t,!1,!1)}return O$}function $$(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:N2,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,h=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,f=n.showFullExtent!==void 0?n.showFullExtent:!1,g=KI(n.projection,"EPSG:3857"),p=g.getExtent();let x=n.constrainOnlyCenter,v=n.extent;if(!u&&!v&&g.isGlobal()&&(x=!1,v=p),n.resolutions!==void 0){const w=n.resolutions;t=w[a],r=w[o]!==void 0?w[o]:w[w.length-1],n.constrainResolution?e=j$(w,h,!x&&v,f):e=wk(t,r,h,!x&&v,f)}else{const T=(p?Math.max(tn(p),Mr(p)):360*t0.degrees/g.getMetersPerUnit())/yA/Math.pow(2,N2),I=T/Math.pow(2,28-N2);t=n.maxResolution,t!==void 0?a=0:t=T/Math.pow(l,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,o):r=T/Math.pow(l,o):r=I),o=a+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,o-a),n.constrainResolution?e=V$(l,t,r,h,!x&&v,f):e=wk(t,r,h,!x&&v,f)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:l}}function W$(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?B$():t===!1?Sk:typeof t=="number"?G$(t):Sk}return pA}function H$(n){return!(n.sourceCenter&&n.targetCenter&&!q_(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function L2(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,a=-a;const u=o*s-l*a,h=l*s+o*a;return[u,h]}const Mn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class q5 extends Zo{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Mn.OPACITY]=e.opacity!==void 0?e.opacity:1,Cn(typeof t[Mn.OPACITY]=="number","Layer opacity must be a number"),t[Mn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Mn.Z_INDEX]=e.zIndex,t[Mn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Mn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Mn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Mn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Yn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return jt()}getLayerStatesArray(e){return jt()}getExtent(){return this.get(Mn.EXTENT)}getMaxResolution(){return this.get(Mn.MAX_RESOLUTION)}getMinResolution(){return this.get(Mn.MIN_RESOLUTION)}getMinZoom(){return this.get(Mn.MIN_ZOOM)}getMaxZoom(){return this.get(Mn.MAX_ZOOM)}getOpacity(){return this.get(Mn.OPACITY)}getSourceState(){return jt()}getVisible(){return this.get(Mn.VISIBLE)}getZIndex(){return this.get(Mn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Mn.EXTENT,e)}setMaxResolution(e){this.set(Mn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Mn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Mn.MAX_ZOOM,e)}setMinZoom(e){this.set(Mn.MIN_ZOOM,e)}setOpacity(e){Cn(typeof e=="number","Layer opacity must be a number"),this.set(Mn.OPACITY,e)}setVisible(e){this.set(Mn.VISIBLE,e)}setZIndex(e){this.set(Mn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Yp extends q5{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Mn.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Mn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Wn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=hn(e,$t.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Co?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return _A(i,t.viewState)&&(!s||Qi(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof Co?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Mn.MAP,e)}getMapInternal(){return this.get(Mn.MAP)}setMap(e){this.mapPrecomposeKey_&&(Wn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Wn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=hn(e,xa.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=hn(this,$t.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);Cn(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Mn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function _A(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const Tk={RENDER_ORDER:"renderOrder"};class Z5 extends Yp{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Tk.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new D5(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Tk.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?F5:e;const t=K$(e);this.styleFunction_=e===null?void 0:Cz(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function K$(n){if(n===void 0)return F5;if(!n)return null;if(typeof n=="function"||n instanceof ur)return n;if(!Array.isArray(n))return yk([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof ur){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof ur))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return w$(i)}return yk(n)}class Xp extends Z5{constructor(e){super(e)}createRenderer(){return new qz(this)}}const Ec={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class kc extends qo{constructor(e,t){super(e),this.layer=t}}const O2={LAYERS:"layers"};let Vv=class Q5 extends q5{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(O2.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new _a(r.slice(),{unique:!0}):Cn(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new _a(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Wn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(hn(e,gs.ADD,this.handleLayersAdd_,this),hn(e,gs.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Wn);Op(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new kc(Ec.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[hn(e,Jf.PROPERTYCHANGE,this.handleLayerChange_,this),hn(e,$t.CHANGE,this.handleLayerChange_,this)];e instanceof Q5&&t.push(hn(e,Ec.ADDLAYER,this.handleLayerGroupAdd_,this),hn(e,Ec.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[_n(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new kc(Ec.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new kc(Ec.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new kc(Ec.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=_n(t);this.listenerKeys_[r].forEach(Wn),delete this.listenerKeys_[r],this.dispatchEvent(new kc(Ec.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(O2.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new kc(Ec.REMOVELAYER,r[i]))}this.set(O2.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const l=t[a];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=Al(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}};const kt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class xA extends Dp{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent($t.CHANGE)}release(){this.setState(kt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==kt.EMPTY){if(this.state!==kt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){jt()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:X5(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function lT(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const Y$=new Error("disposed"),X$=[256,256];class Ik extends xA{constructor(e){const t=kt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=lT(this.data_);return e?[e.width,e.height]:X$}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==kt.IDLE&&this.state!==kt.ERROR)return;this.state=kt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=kt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=kt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Y$),this.controller_=null),super.disposeInternal()}}class J5 extends xA{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,Ks?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=kt.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=kt.ERROR,this.unlistenImage_(),this.image_=q$(),this.changed()}handleImageLoad_(){if(Ks)this.state=kt.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=kt.LOADED:this.state=kt.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==kt.ERROR&&(this.state=kt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==kt.IDLE&&(this.state=kt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=HU(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function q$(){const n=Kr(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let D2;const jf=[];function Ak(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function F2(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Z$(){if(D2===void 0){const n=Kr(6,6,jf);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Ak(n,4,5,4,0),Ak(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;D2=F2(e,0)||F2(e,4)||F2(e,8),Lv(n),jf.push(n.canvas)}return D2}function cx(n,e,t,r){const i=Bp(t,e,n);let s=ex(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||kh(l,i)){const u=ex(n,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function Q$(n,e,t,r){const i=Uo(t);let s=cx(n,e,i,r);return(!isFinite(s)||s<=0)&&$O(t,function(a){return s=cx(n,e,a,r),isFinite(s)&&s>0}),s}function eD(n,e,t,r,i,s,a,o,l,u,h,f,g,p){const x=Kr(Math.round(t*n),Math.round(t*e),jf);if(f||(x.imageSmoothingEnabled=!1),l.length===0)return x.canvas;x.scale(t,t);function v(D){return Math.round(D*t)/t}x.globalCompositeOperation="lighter";const w=Zs();l.forEach(function(D,B,k){UO(w,D.extent)});let T;const I=t/r,A=(f?1:1+Math.pow(2,-24))/I;(!g||l.length!==1||u!==0)&&(T=Kr(Math.round(tn(w)*I),Math.round(Mr(w)*I),jf),f||(T.imageSmoothingEnabled=!1),l.forEach(function(D,B,k){if(D.image.width>0&&D.image.height>0){if(D.clipExtent){T.save();const W=(D.clipExtent[0]-w[0])*I,F=-(D.clipExtent[3]-w[3])*I,Te=tn(D.clipExtent)*I,Me=Mr(D.clipExtent)*I;T.rect(f?W:Math.round(W),f?F:Math.round(F),f?Te:Math.round(W+Te)-Math.round(W),f?Me:Math.round(F+Me)-Math.round(F)),T.clip()}const P=(D.extent[0]-w[0])*I,M=-(D.extent[3]-w[3])*I,j=tn(D.extent)*I,O=Mr(D.extent)*I;T.drawImage(D.image,u,u,D.image.width-2*u,D.image.height-2*u,f?P:Math.round(P),f?M:Math.round(M),f?j:Math.round(P+j)-Math.round(P),f?O:Math.round(M+O)-Math.round(M)),D.clipExtent&&T.restore()}}));const N=td(a);return o.getTriangles().forEach(function(D,B,k){const P=D.source,M=D.target;let j=P[0][0],O=P[0][1],W=P[1][0],F=P[1][1],Te=P[2][0],Me=P[2][1];const Le=v((M[0][0]-N[0])/s),be=v(-(M[0][1]-N[1])/s),ce=v((M[1][0]-N[0])/s),Re=v(-(M[1][1]-N[1])/s),Ie=v((M[2][0]-N[0])/s),ie=v(-(M[2][1]-N[1])/s),V=j,Y=O;j=0,O=0,W-=V,F-=Y,Te-=V,Me-=Y;const ee=[[W,F,0,0,ce-Le],[Te,Me,0,0,Ie-Le],[0,0,W,F,Re-be],[0,0,Te,Me,ie-be]],ne=DB(ee);if(!ne)return;if(x.save(),x.beginPath(),Z$()||!f){x.moveTo(ce,Re);const De=4,Se=Le-ce,Fe=be-Re;for(let je=0;je<De;je++)x.lineTo(ce+v((je+1)*Se/De),Re+v(je*Fe/(De-1))),je!=De-1&&x.lineTo(ce+v((je+1)*Se/De),Re+v((je+1)*Fe/(De-1)));x.lineTo(Ie,ie)}else x.moveTo(ce,Re),x.lineTo(Le,be),x.lineTo(Ie,ie);x.clip(),x.transform(ne[0],ne[2],ne[1],ne[3],Le,be),x.translate(w[0]-V,w[3]-Y);let de;if(T)de=T.canvas,x.scale(A,-A);else{const De=l[0],Se=De.extent;de=De.image,x.scale(tn(Se)/de.width,-Mr(Se)/de.height)}x.drawImage(de,0,0),x.restore()}),T&&(Lv(T),jf.push(T.canvas)),h&&(x.save(),x.globalCompositeOperation="source-over",x.strokeStyle="black",x.lineWidth=1,o.getTriangles().forEach(function(D,B,k){const P=D.target,M=(P[0][0]-N[0])/s,j=-(P[0][1]-N[1])/s,O=(P[1][0]-N[0])/s,W=-(P[1][1]-N[1])/s,F=(P[2][0]-N[0])/s,Te=-(P[2][1]-N[1])/s;x.beginPath(),x.moveTo(O,W),x.lineTo(M,j),x.lineTo(F,Te),x.closePath(),x.stroke()}),x.restore()),x.canvas}const J$=10,bk=.25;class tD{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let l={};const u=o?ZS(A=>Hr(o,Bp(A,this.targetProj_,this.sourceProj_))):$m(this.targetProj_,this.sourceProj_);this.transformInv_=function(A){const N=A[0]+"/"+A[1];return l[N]||(l[N]=u(A)),l[N]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&tn(i)>=tn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?tn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?tn(this.targetProj_.getExtent()):null;const h=td(r),f=bv(r),g=Av(r),p=Iv(r),x=this.transformInv_(h),v=this.transformInv_(f),w=this.transformInv_(g),T=this.transformInv_(p),I=J$+(a?Math.max(0,Math.ceil(Math.log2(HS(r)/(a*a*256*256)))):0);if(this.addQuad_(h,f,g,p,x,v,w,T,I),this.wrapsXInSource_){let A=1/0;this.triangles_.forEach(function(N,D,B){A=Math.min(A,N.source[0][0],N.source[1][0],N.source[2][0])}),this.triangles_.forEach(N=>{if(Math.max(N.source[0][0],N.source[1][0],N.source[2][0])-A>this.sourceWorldWidth_/2){const D=[[N.source[0][0],N.source[0][1]],[N.source[1][0],N.source[1][1]],[N.source[2][0],N.source[2][1]]];D[0][0]-A>this.sourceWorldWidth_/2&&(D[0][0]-=this.sourceWorldWidth_),D[1][0]-A>this.sourceWorldWidth_/2&&(D[1][0]-=this.sourceWorldWidth_),D[2][0]-A>this.sourceWorldWidth_/2&&(D[2][0]-=this.sourceWorldWidth_);const B=Math.min(D[0][0],D[1][0],D[2][0]);Math.max(D[0][0],D[1][0],D[2][0])-B<this.sourceWorldWidth_/2&&(N.source=D)}})}l={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,l,u){const h=M4([s,a,o,l]),f=this.sourceWorldWidth_?tn(h)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&f>.5&&f<1;let x=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const w=M4([e,t,r,i]);x=tn(w)/this.targetWorldWidth_>bk||x}!p&&this.sourceProj_.isGlobal()&&f&&(x=f>bk||x)}if(!x&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Qi(h,this.maxSourceExtent_))return;let v=0;if(!x&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)x=!0;else if(v=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),v!=1&&v!=2&&v!=4&&v!=8)return}if(u>0){if(!x){const w=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(w);let I;p?I=(Yc(s[0],g)+Yc(o[0],g))/2-Yc(T[0],g):I=(s[0]+o[0])/2-T[0];const A=(s[1]+o[1])/2-T[1];x=I*I+A*A>this.errorThresholdSquared_}if(x){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const w=[(t[0]+r[0])/2,(t[1]+r[1])/2],T=this.transformInv_(w),I=[(i[0]+e[0])/2,(i[1]+e[1])/2],A=this.transformInv_(I);this.addQuad_(e,t,w,I,s,a,T,A,u-1),this.addQuad_(I,w,r,i,A,T,o,l,u-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],T=this.transformInv_(w),I=[(r[0]+i[0])/2,(r[1]+i[1])/2],A=this.transformInv_(I);this.addQuad_(e,w,I,i,s,T,A,l,u-1),this.addQuad_(w,t,r,I,T,a,o,A,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(v&11)==0&&this.addTriangle_(e,r,i,s,o,l),(v&14)==0&&this.addTriangle_(e,r,t,s,o,a),v&&((v&13)==0&&this.addTriangle_(t,i,e,a,l,s),(v&7)==0&&this.addTriangle_(t,i,r,a,l,o))}calculateSourceExtent(){const e=Zs();return this.triangles_.forEach(function(t,r,i){const s=t.source;um(e,s[0]),um(e,s[1]),um(e,s[2])}),e}getTriangles(){return this.triangles_}}const nD=.5;class rD extends xA{constructor(e,t,r,i,s,a,o,l,u,h,f,g){super(s,kt.IDLE,g),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=i.getTileCoordExtent(this.wrappedTileCoord_),x=this.targetTileGrid_.getExtent();let v=this.sourceTileGrid_.getExtent();const w=x?Al(p,x):p;if(HS(w)===0){this.state=kt.EMPTY;return}const T=e.getExtent();T&&(v?v=Al(v,T):v=T);const I=i.getResolution(this.wrappedTileCoord_[0]),A=Q$(e,r,w,I);if(!isFinite(A)||A<=0){this.state=kt.EMPTY;return}const N=h!==void 0?h:nD;if(this.triangulation_=new tD(e,r,w,v,A*N,I),this.triangulation_.getTriangles().length===0){this.state=kt.EMPTY;return}this.sourceZ_=t.getZForResolution(A);let D=this.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(D[1]=Yn(D[1],v[1],v[3]),D[3]=Yn(D[3],v[1],v[3])):D=Al(D,v)),!HS(D))this.state=kt.EMPTY;else{let B=0,k=0;e.canWrapX()&&(B=tn(T),k=Math.floor((D[0]-T[0])/B)),KO(D.slice(),e,!0).forEach(M=>{const j=t.getTileRangeForExtentAndZ(M,this.sourceZ_);for(let O=j.minX;O<=j.maxX;O++)for(let W=j.minY;W<=j.maxY;W++){const F=u(this.sourceZ_,O,W,o);if(F){const Te=k*B;this.sourceTiles_.push({tile:F,offset:Te})}}++k}),this.sourceTiles_.length===0&&(this.state=kt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==kt.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=kt.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=eD(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=kt.LOADED}this.changed()}load(){if(this.state==kt.IDLE){this.state=kt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==kt.IDLE||r==kt.LOADING){e++;const i=hn(t,$t.CHANGE,s=>{const a=t.getState();(a==kt.LOADED||a==kt.ERROR||a==kt.EMPTY)&&(Wn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==kt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Wn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Lv(this.canvas_.getContext("2d")),jf.push(this.canvas_),this.canvas_=null),super.release()}}class vA{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Qd(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new vA(n,e,t,r)}class Rk{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof wv&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return Cn(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return Cn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Cn(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function ux(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function eW(n,e,t){return n+"/"+e+"/"+t}function E_(n,e,t,r,i){return`${_n(n)},${e},${eW(t,r,i)}`}function iD(n){return tW(n[0],n[1],n[2])}function tW(n,e,t){return(e<<n)+t}function nW(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class rW extends hA{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=Al(l,Po(t.extent,i.projection))),!o[ni.ANIMATING]&&!o[ni.INTERACTING]&&!R0(l))if(a){const u=i.projection,h=a.getImage(l,s,r,u);h&&(this.loadImage(h)?this.image=h:h.getState()===yt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Hr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!kh(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),l=tn(a),u=Math.floor(o.width*((i[0]-a[0])/l));if(u<0||u>=o.width)return null;const h=Mr(a),f=Math.floor(o.height*((a[3]-i[1])/h));return f<0||f>=o.height?null:this.getImageData(o,u,f)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],h=e.pixelRatio,f=e.viewState,g=f.center,p=f.resolution,x=h*a/(p*l),v=h*o/(p*l);this.prepareContainer(e,t);const w=this.context.canvas.width,T=this.context.canvas.height,I=this.getRenderContext(e);let A=!1,N=!0;if(u.extent){const M=Po(u.extent,f.projection);N=Qi(M,e.extent),A=N&&!Fc(M,e.extent),A&&this.clipUnrotated(I,e,M)}const D=r.getImage(),B=zo(this.tempTransform,w/2,T/2,x,v,0,l*(i[0]-g[0])/a,l*(g[1]-i[3])/o);this.renderedResolution=o*h/l;const k=D.width*B[0],P=D.height*B[3];if(this.getLayer().getSource().getInterpolate()||(I.imageSmoothingEnabled=!1),this.preRender(I,e),N&&k>=.5&&P>=.5){const M=B[4],j=B[5],O=u.opacity;O!==1&&(I.save(),I.globalAlpha=O),I.drawImage(D,0,0,+D.width,+D.height,M,j,k,P),O!==1&&I.restore()}return this.postRender(this.context,e),A&&I.restore(),I.imageSmoothingEnabled=!0,this.container}}class iW extends Yp{constructor(e){e=e||{},super(e)}}class sW extends iW{constructor(e){super(e)}createRenderer(){return new rW(this)}getData(e){return super.getData(e)}}function j2(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function aW(n,e,t){const r=n[t];return r?r.delete(e):!1}function Ck(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Al(e,Po(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Al(e,i))}return e}class oW extends hA{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Zs(),this.tempTileRange_=new vA(0,0,0,0),this.tempTileCoord_=ux(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Rk(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new Rk(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),l=E_(o,o.getKey(),e,t,r);let u;if(s.containsKey(l))u=s.get(l);else{const h=i.viewState.projection,f=o.getProjection();if(u=o.getTile(e,t,r,i.pixelRatio,h,!f||wh(f,h)?void 0:this.getSourceTileCache()),!u)return null;s.set(l,u)}return u}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Hr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!kh(s,i))return null;const a=t.viewState,o=r.getRenderSource(),l=o.getTileGridForProjection(a.projection),u=o.getTilePixelRatio(t.pixelRatio);for(let h=l.getZForResolution(a.resolution);h>=l.getMinZoom();--h){const f=l.getTileCoordForCoordAndZ(i,h),g=this.getTile(h,f[1],f[2],t);if(!g||g.getState()!==kt.LOADED)continue;const p=l.getOrigin(h),x=vs(l.getTileSize(h)),v=l.getResolution(h);let w;if(g instanceof J5||g instanceof rD)w=g.getImage();else if(g instanceof Ik){if(w=lT(g.getData()),!w)continue}else continue;const T=Math.floor(u*((i[0]-p[0])/v-f[1]*x[0])),I=Math.floor(u*((p[1]-i[1])/v-f[2]*x[1])),A=Math.round(u*o.getGutterForProjection(a.projection));return this.getImageData(w,T+A,I+A)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),l=o.getRenderSource(),u=l.getTileGridForProjection(a.projection),h=_n(l);h in e.wantedTiles||(e.wantedTiles[h]={});const f=e.wantedTiles[h],g=o.getMapInternal(),p=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(o.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):u.getResolution(0)),l.zDirection)),x=a.rotation,v=x?WO(a.center,a.resolution,x,e.size):void 0;for(let w=r;w>=p;--w){const T=u.getTileRangeForExtentAndZ(t,w,this.tempTileRange_),I=u.getResolution(w);for(let A=T.minX;A<=T.maxX;++A)for(let N=T.minY;N<=T.maxY;++N){if(x&&!u.tileCoordIntersectsViewport([w,A,N],v))continue;const D=this.getTile(w,A,N,e);if(!D||!j2(i,D,w))continue;const k=D.getKey();if(f[k]=!0,D.getState()===kt.IDLE&&!e.tileQueue.isKeyQueued(k)){const P=ux(w,A,N,this.tempTileCoord_);e.tileQueue.enqueue([D,h,u.getTileCoordCenter(P),I])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const u=E_(this.getLayer().getSource(),o[l],i,s,a);if(r.containsKey(u)){const h=r.peek(u);if(h.getState()===kt.LOADED)return h.endTransition(_n(this)),j2(t,h,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,l=this.getLayer().getRenderSource(),u=l.getKey();for(let h=s.minX;h<=s.maxX;++h)for(let f=s.minY;f<=s.maxY;++f){const g=E_(l,u,r,h,f);let p=!1;if(o.containsKey(g)){const x=o.peek(g);x.getState()===kt.LOADED&&(j2(i,x,r),p=!0)}p||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,a=i.resolution,o=i.center,l=e.pixelRatio,u=this.getLayer(),h=u.getSource(),f=h.getTileGridForProjection(s),g=f.getZForResolution(a,h.zDirection),p=f.getResolution(g),x=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==x&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=x):this.renderedSourceKey_=x;let v=e.extent;const w=h.getTilePixelRatio(l);this.prepareContainer(e,t);const T=this.context.canvas.width,I=this.context.canvas.height,A=r.extent&&Po(r.extent);A&&(v=Al(v,Po(r.extent)));const N=p*T/2/w,D=p*I/2/w,B=[o[0]-N,o[1]-D,o[0]+N,o[1]+D],k={};this.renderedTiles.length=0;const P=u.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const ce=f.getZForResolution(i.nextResolution,h.zDirection),Re=Ck(e,e.nextExtent);this.enqueueTiles(e,Re,ce,k,P)}const M=Ck(e,v);if(this.enqueueTiles(e,M,g,k,0),P>0&&setTimeout(()=>{this.enqueueTiles(e,M,g-1,k,P-1)},0),!(g in k))return this.container;const j=_n(this),O=e.time;for(const ce of k[g]){const Re=ce.getState();if(Re===kt.EMPTY)continue;const Ie=ce.tileCoord;if(Re===kt.LOADED&&ce.getAlpha(j,O)===1){ce.endTransition(j);continue}if(Re!==kt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ie,k)){aW(k,ce,g),e.animate=!0;continue}if(this.findAltTiles_(f,Ie,g+1,k))continue;const Y=f.getMinZoom();for(let ee=g-1;ee>=Y&&!this.findAltTiles_(f,Ie,ee,k);--ee);}const W=p/a*l/w,F=this.getRenderContext(e);zo(this.tempTransform,T/2,I/2,W,W,0,-T/2,-I/2),r.extent&&this.clipUnrotated(F,e,A),h.getInterpolate()||(F.imageSmoothingEnabled=!1),this.preRender(F,e);const Te=Object.keys(k).map(Number);Te.sort(Il);let Me;const Le=[],be=[];for(let ce=Te.length-1;ce>=0;--ce){const Re=Te[ce],Ie=h.getTilePixelSize(Re,l,s),V=f.getResolution(Re)/p,Y=Ie[0]*V*W,ee=Ie[1]*V*W,ne=f.getTileCoordForCoordAndZ(td(B),Re),de=f.getTileCoordExtent(ne),De=Hr(this.tempTransform,[w*(de[0]-B[0])/p,w*(B[3]-de[3])/p]),Se=w*h.getGutterForProjection(s);for(const Fe of k[Re]){if(Fe.getState()!==kt.LOADED)continue;const je=Fe.tileCoord,Qe=ne[1]-je[1],gt=Math.round(De[0]-(Qe-1)*Y),_t=ne[2]-je[2],Lt=Math.round(De[1]-(_t-1)*ee),nn=Math.round(De[0]-Qe*Y),zt=Math.round(De[1]-_t*ee),Oe=gt-nn,Xt=Lt-zt,Ae=Te.length===1;let ge=!1;Me=[nn,zt,nn+Oe,zt,nn+Oe,zt+Xt,nn,zt+Xt];for(let C=0,wt=Le.length;C<wt;++C)if(!Ae&&Re<be[C]){const q=Le[C];Qi([nn,zt,nn+Oe,zt+Xt],[q[0],q[3],q[4],q[7]])&&(ge||(F.save(),ge=!0),F.beginPath(),F.moveTo(Me[0],Me[1]),F.lineTo(Me[2],Me[3]),F.lineTo(Me[4],Me[5]),F.lineTo(Me[6],Me[7]),F.moveTo(q[6],q[7]),F.lineTo(q[4],q[5]),F.lineTo(q[2],q[3]),F.lineTo(q[0],q[1]),F.clip())}Le.push(Me),be.push(Re),this.drawTile(Fe,e,nn,zt,Oe,Xt,Se,Ae),ge&&F.restore(),this.renderedTiles.unshift(Fe),this.updateUsedTiles(e.usedTiles,h,Fe)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!e0(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&F.restore(),F.imageSmoothingEnabled=!0,this.renderComplete){const ce=(Re,Ie)=>{const ie=_n(h),V=Ie.wantedTiles[ie],Y=V?Object.keys(V).length:0;this.updateCacheSize(Y),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(ce)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,l){let u;if(e instanceof Ik){if(u=lT(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const h=this.getRenderContext(t),f=_n(this),g=t.layerStatesArray[t.layerIndex],p=g.opacity*(l?e.getAlpha(f,t.time):1),x=p!==h.globalAlpha;x&&(h.save(),h.globalAlpha=p),h.drawImage(u,o,o,u.width-2*o,u.height-2*o,r,i,s,a),x&&h.restore(),p!==g.opacity?t.animate=!0:l&&e.endTransition(f)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=_n(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const zy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class lW extends Yp{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(zy.PRELOAD)}setPreload(e){this.set(zy.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(zy.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(zy.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Qu extends lW{constructor(e){super(e)}createRenderer(){return new oW(this,{cacheSize:this.getCacheSize()})}}function cT(n){return Array.isArray(n)?Math.min(...n):n}const Jd=[0,0,0],wc=5;class sD{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Cn(bB(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Cn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=td(r)),Cn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Cn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:yA,Cn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new vA(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,l=i.maxY;o<=l;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=Qd(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return Qd(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return Qd(s,a,s,a,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(s*l),h=Math.floor(a*l);if(t<i)return Qd(u,u,h,h,r);const f=Math.floor(l*(s+1))-1,g=Math.floor(l*(a+1))-1;return Qd(u,f,h,g,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Jd);const i=Jd[1],s=Jd[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Jd);const a=Jd[1],o=Jd[2];return Qd(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=vs(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=vs(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,l=a+s[0]*i,u=o+s[1]*i;return nu(a,o,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),l=this.getOrigin(a),u=vs(this.getTileSize(a),this.tmpSize_);let h=o*(e-l[0])/r/u[0],f=o*(l[1]-t)/r/u[1];return i?(h=jc(h,wc)-1,f=jc(f,wc)-1):(h=Ly(h,wc),f=Ly(f,wc)),ux(a,h,f,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),l=vs(this.getTileSize(r),this.tmpSize_);let u=(e-a[0])/o/l[0],h=(a[1]-t)/o/l[1];return i?(u=jc(u,wc)-1,h=jc(h,wc)-1):(u=Ly(u,wc),h=Ly(h,wc)),ux(r,u,h,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Sv(this.resolutions_,e,t||0);return Yn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return u5(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function aD(n){let e=n.getDefaultTileGrid();return e||(e=dW(n),n.setDefaultTileGrid(e)),e}function cW(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=EA(t);if(!kh(s,i)){const a=tn(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function uW(n,e,t,r){r=r!==void 0?r:"top-left";const i=oD(n,e,t);return new sD({extent:n,origin:MB(n,r),resolutions:i,tileSize:t})}function hW(n){const e=n||{},t=e.extent||Bn("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:oD(t,e.maxZoom,e.tileSize,e.maxResolution)};return new sD(r)}function oD(n,e,t,r){e=e!==void 0?e:U$,t=vs(t!==void 0?t:yA);const i=Mr(n),s=tn(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=r/Math.pow(2,l);return o}function dW(n,e,t,r){const i=EA(n);return uW(i,e,t,r)}function EA(n){n=Bn(n);let e=n.getExtent();if(!e){const t=180*t0.degrees/n.getMetersPerUnit();e=nu(-t,-t,t,t)}return e}function wA(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const fW=/\{z\}/g,gW=/\{x\}/g,mW=/\{y\}/g,pW=/\{-y\}/g;function yW(n,e,t,r,i){return n.replace(fW,e.toString()).replace(gW,t.toString()).replace(mW,r.toString()).replace(pW,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function _W(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function xW(n,e){return(function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return yW(n,a,t[1],t[2],s)})}function vW(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=xW(n[i],e);return EW(r)}function EW(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;const i=iD(e),s=Yc(i,n.length);return n[s](e,t,r)})}class wW extends uA{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&vs(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||_n(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s,a){return jt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:aD(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=vs(i.getTileSize(e),this.tmpSize);return s==1?a:Rz(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=cW(i,e,r)),nW(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class SW extends qo{constructor(e,t){super(e),this.tile=t}}const V2={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class SA extends wW{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===SA.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=_n(t),i=t.getState();let s;i==kt.LOADING?(this.tileLoadingKeys_[r]=!0,s=V2.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==kt.ERROR?V2.TILELOADERROR:i==kt.LOADED?V2.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new SW(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=_W(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(vW(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class lD extends SA{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:cD,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:J5,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!wh(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||wh(t,e)))return this.tileGrid;const r=_n(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=aD(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,i,s):void 0,h=new this.tileClass(o,u!==void 0?kt.IDLE:kt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener($t.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,r,i,s,a){const o=this.getProjection();if(!o||!s||wh(o,s))return this.getTileInternal(e,t,r,i,o||s);const l=[e,t,r],u=this.getKey(),h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new rD(o,h,s,f,l,g,this.getTilePixelRatio(i),this.getGutter(),(x,v,w,T)=>this.getTileInternal(x,v,w,T,o,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=u,p}getTileInternal(e,t,r,i,s,a){const o=this.getKey(),l=E_(this,o,e,t,r);if(a&&a.containsKey(l))return a.get(l);const u=this.createTile_(e,t,r,i,s,o);return a?.set(l,u),u}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Bn(e);if(r){const i=_n(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function cD(n,e){if(Ks){const t=n.getCrossOrigin();let r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const a=n.getImage();a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),s.close?.(),a.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class mf extends lD{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:hW({extent:EA(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const TW="modulepreload",IW=function(n){return"/detectorapp-nl/"+n},Pk={},dt=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(t.map(u=>{if(u=IW(u),u in Pk)return;Pk[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":TW,h||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),h)return new Promise((p,x)=>{g.addEventListener("load",p),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};class AW extends x5{constructor(e,t,r,i,s,a,o){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const h=u?Al(r,u):r,f=Uo(h),g=cx(e,t,f,i),p=nD,x=new tD(e,t,h,l,g*p,i),v=x.calculateSourceExtent(),w=R0(v)?null:a(v,g,s),T=w?yt.IDLE:yt.EMPTY,I=w?w.getPixelRatio():1;super(r,i,I,T),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=x,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=w,this.sourcePixelRatio_=I,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==yt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==yt.LOADED){const t=tn(this.targetExtent_)/this.targetResolution_,r=Mr(this.targetExtent_)/this.targetResolution_;this.canvas_=eD(t,r,this.sourcePixelRatio_,cT(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==yt.IDLE){this.state=yt.LOADING,this.changed();const e=this.sourceImage_.getState();e==yt.LOADED||e==yt.ERROR?this.reproject_():(this.sourceListenerKey_=hn(this.sourceImage_,$t.CHANGE,t=>{const r=this.sourceImage_.getState();(r==yt.LOADED||r==yt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Wn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Uc=4,G2={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class bW extends qo{constructor(e,t){super(e),this.image=t}}class RW extends uA{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Sv(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||wh(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&wh(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&e0(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new AW(s,i,e,t,r,(a,o,l)=>this.getImageInternal(a,o,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=uD(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Fc(this.wantedExtent_,s)||Fc(this.image.getExtent(),s))&&(this.wantedResolution_&&cT(this.wantedResolution_)===a||cT(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new x5(s,a,r,this.loader),this.image.addEventListener($t.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case yt.LOADING:this.loading=!0,r=G2.IMAGELOADSTART;break;case yt.LOADED:this.loading=!1,r=G2.IMAGELOADEND;break;case yt.ERROR:this.loading=!1,r=G2.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new bW(r,t))}}function CW(n,e){n.getImage().src=e}function uD(n,e,t,r){const i=e/t,s=Uo(n),a=jc(tn(n)/i,Uc),o=jc(Mr(n)/i,Uc),l=jc((r-1)*a/2,Uc),u=a+2*l,h=jc((r-1)*o/2,Uc),f=o+2*h;return Y_(s,i,0,[u,f])}function PW(n,e,t,r,i,s){const a=i.getCode().split(/:(?=\d+$)/).pop(),o=t/r,l=[X_(tn(e)/o,Uc),X_(Mr(e)/o,Uc)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return wA(u,s)}function kW(n){const e=n.load?n.load:E5,t=Bn(n.projection||"EPSG:3857"),r=n.ratio??1.5,i=n.crossOrigin??null;return function(s,a,o){o=n.hidpi?o:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,n.params),s=uD(s,a,o,r);const u=PW(n.url,s,a,o,t,l),h=new Image;return h.crossOrigin=i,e(h,u).then(f=>{const g=tn(s)/f.width*o;return{image:f,extent:s,resolution:g,pixelRatio:o}})}}class MW extends RW{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:CW,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=kW({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),E5(s))})),super.getImageInternal(e,t,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const uT="1.3.0";function NW(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const s=r.getAxisOrientation(),a=YO(i.VERSION,"1.3")>=0;i[a?"CRS":"SRS"]=r.getCode();const o=a&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=o.join(","),wA(n,i)}function LW(n,e,t,r,i,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=e/t,l=[X_(tn(n)/o,Uc),X_(Mr(n)/o,Uc)];if(t!=1)switch(a){case"geoserver":const h=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return NW(i,n,l,r,s)}function kk(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:uT,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}const OW='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class DW extends mf{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[OW];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,a)=>{const o=s.getImage();!Ks&&o instanceof HTMLImageElement&&(o.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||cD)(s,a)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const hx=1/0;class FW{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Op(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){Cn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=hx?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),h=u<i&&r[u]<r[l]?u:l;t[e]=t[h],r[e]=r[h],e=h}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==hx?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=l,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class jW extends FW{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener($t.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===kt.LOADED||r===kt.ERROR||r===kt.EMPTY){r!==kt.ERROR&&t.removeEventListener($t.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===kt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function VW(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return hx;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class GW extends lD{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Zs(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const s=Bn(r),a=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(a));const l=Bp(e,s,a),u=cx(a,s,e,t),h=o.getZForResolution(u,this.zDirection),f=o.getResolution(h),g=o.getTileCoordForCoordAndZ(l,h);if(o.getResolutions().length<=g[0])return;let p=o.getTileCoordExtent(g,this.tmpExtent_);const x=this.gutter_;x!==0&&(p=zm(p,f*x,p));const v={QUERY_LAYERS:this.params_.LAYERS};Object.assign(v,kk(this.params_,"GetFeatureInfo"),i);const w=Math.floor((l[0]-p[0])/f),T=Math.floor((p[3]-l[1])/f);return v[this.v13_?"I":"X"]=w,v[this.v13_?"J":"Y"]=T,this.getRequestUrl_(g,p,1,a||s,v)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:uT,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,t),wA(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,s){const a=this.urls;if(!a)return;let o;if(a.length==1)o=a[0];else{const l=Yc(iD(e),a.length);o=a[l]}return LW(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,o,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||uT;this.v13_=YO(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=i.getResolution(e[0]);let a=i.getTileCoordExtent(e,this.tmpExtent_);const o=this.gutter_;o!==0&&(a=zm(a,s*o,a));const l=Object.assign({},kk(this.params_,"GetMap"));return this.getRequestUrl_(e,a,t,r,l)}}class pf extends qo{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class Rc extends pf{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const fr={SINGLECLICK:"singleclick",CLICK:$t.CLICK,DBLCLICK:$t.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},hT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class BW extends Dp{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=hn(r,hT.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=hn(r,hT.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener($t.TOUCHMOVE,this.boundHandleTouchMove_,p5?{passive:!1}:!1)}emulateClick_(e){let t=new Rc(fr.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Rc(fr.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Rc(fr.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==fr.POINTERUP||t.type==fr.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==fr.POINTERDOWN||t.type==fr.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Rc(fr.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Wn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Rc(fr.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(hn(r,fr.POINTERMOVE,this.handlePointerMove_,this),hn(r,fr.POINTERUP,this.handlePointerUp_,this),hn(this.element_,fr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(hn(this.element_.getRootNode(),fr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Rc(fr.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Rc(fr.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Wn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener($t.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Wn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Wn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Cc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Mi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class Gv extends Zo{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)Wn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Um&&this.listenerKeys.push(hn(e,Cc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class UW extends Gv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener($t.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+zp+" "+aA+(this.collapsed_&&this.collapsible_?" "+Y4:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>jO(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!xu(t,this.renderedAttributions_)){OU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Y4),this.collapsed_?H4(this.collapseLabel_,this.label_):H4(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class zW extends Gv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener($t.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+zp+" "+aA,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Fy)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:P0}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Fy);!s&&r===0?this.element.classList.add(Fy):s&&r!==0&&this.element.classList.remove(Fy)}this.label_.style.transform=i}this.rotation_=r}}class $W extends Gv{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=i,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener($t.CLICK,this.handleClick_.bind(this,r),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=u,f.appendChild(typeof o=="string"?document.createTextNode(o):o),f.addEventListener($t.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+zp+" "+aA,p=this.element;p.className=g,p.appendChild(h),p.appendChild(f),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:P0})):r.setZoom(s)}}}function WW(n){n=n||{};const e=new _a;return(n.zoom===void 0||n.zoom)&&e.push(new $W(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new zW(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new UW(n.attributionOptions)),e}class HW{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Mk={ACTIVE:"active"};class qp extends Zo{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Mk.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Mk.ACTIVE,e)}setMap(e){this.map_=e}}function KW(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:F$,center:n.getConstrainedCenter(i)})}}function TA(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:P0})}class YW extends qp{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==fr.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();TA(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function dT(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const XW=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},qW=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},hD=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?qW(n):!0},ZW=Bm,dD=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(NU&&g5&&e.ctrlKey)},fD=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},QW=function(n){const e=n.originalEvent;return g5?e.metaKey:e.ctrlKey},JW=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},gD=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},B2=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},eH=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Zp extends qp{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==fr.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==fr.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==fr.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==fr.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function IA(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class tH extends Zp{constructor(e){super({stopDown:Tv}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:dT(fD,eH);this.condition_=e.onFocusOnly?dT(hD,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(IA(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();jB(s,o.getResolution()),zI(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:P0})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class nH extends Zp{constructor(e){e=e||{},super({stopDown:Tv}),this.condition_=e.condition?e.condition:XW,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!B2(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===pA)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return B2(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return B2(e)&&dD(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class rH extends wv{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new ro([i])}getGeometry(){return this.geometry_}}const ef={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Dg extends qo{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class iH extends Zp{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new rH(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??dD,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Dg(ef.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Dg(t?ef.BOXEND:ef.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Dg(ef.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Dg(ef.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Dg(ef.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class sH extends iH{constructor(e){e=e||{};const t=e.condition?e.condition:JW;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:P0})}}const Yu={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class aH extends qp{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return fD(t)&&gD(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==$t.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Yu.DOWN||i==Yu.LEFT||i==Yu.RIGHT||i==Yu.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;i==Yu.DOWN?u=-o:i==Yu.LEFT?l=-o:i==Yu.RIGHT?l=o:u=o;const h=[l,u];zI(h,a.getRotation()),KW(a,h,this.duration_),r.preventDefault(),t=!0}}return!t}}class oH extends qp{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!QW(t)&&gD(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==$t.KEYDOWN||e.type==$t.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();TA(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const lH=40,cH=300;class uH extends qp{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:ZW;this.condition_=e.onFocusOnly?dT(hD,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==$t.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=lH;break;case WheelEvent.DOM_DELTA_PAGE:s*=cH;break}if(s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Yn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),TA(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class hH extends Zp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Tv),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==pA&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(IA(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class dH extends Zp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Tv),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(IA(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function fH(n){n=n||{};const e=new _a,t=new HW(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new nH),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new YW({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new tH({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new hH),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new dH({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new aH),e.push(new oH({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new uH({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new sH({duration:n.zoomDuration})),e}class gH extends wv{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){jt()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;zo(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),s5(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,l){let u;const h=t.viewState;function f(N,D,B,k){return s.call(a,D,N?B:null,k)}const g=h.projection,p=XO(e.slice(),g),x=[[0,0]];if(g.canWrapX()&&i){const N=g.getExtent(),D=tn(N);x.push([-D,0],[D,0])}const v=t.layerStatesArray,w=v.length,T=[],I=[];for(let N=0;N<x.length;N++)for(let D=w-1;D>=0;--D){const B=v[D],k=B.layer;if(k.hasRenderer()&&_A(B,h)&&o.call(l,k)){const P=k.getRenderer(),M=k.getSource();if(P&&M){const j=M.getWrapX()?p:e,O=f.bind(null,B.managed);I[0]=j[0]+x[N][0],I[1]=j[1]+x[N][1],u=P.forEachFeatureAtCoordinate(I,t,r,O,T)}if(u)return u}}if(T.length===0)return;const A=1/T.length;return T.forEach((N,D)=>N.distanceSq+=D*A),T.sort((N,D)=>N.distanceSq-D.distanceSq),T.some(N=>u=N.callback(N.feature,N.layer,N.geometry)),u}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,Bm,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){jt()}scheduleExpireIconCache(e){va.canExpireCache()&&e.postRenderFunctions.push(mH)}}function mH(n,e){va.expire()}class pH extends gH{constructor(e){super(e),this.fontChangeListenerKey_=hn(df,Jf.PROPERTYCHANGE,e.redrawText,e),this.element_=Ks?y5():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=zp+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new B5(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Wn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(xa.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,h)=>u.zIndex-h.zIndex);t.some(u=>u.layer instanceof Z5&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let u=0,h=t.length;u<h;++u){const f=t[u];e.layerIndex=u;const g=f.layer,p=g.getSourceState();if(!_A(f,i)||p!="ready"&&p!="undefined"){g.unrender();continue}const x=g.render(e,a);x&&(x!==a&&(this.children_.push(x),a=x),s.push(f))}this.declutter(e,s),DU(this.element_,this.children_);const l=this.getMap().getTargetElement();if(Gc(l)){const u=l.getContext("2d");for(const h of this.children_){const f=h.firstElementChild||h,g=h.style.backgroundColor;if(g&&(!Gc(f)||f.width>0)&&(u.fillStyle=g,u.fillRect(0,0,l.width,l.height)),Gc(f)&&f.width>0){const p=h.style.opacity||f.style.opacity;u.globalAlpha=p===""?1:Number(p);const x=f.style.transform;if(x)u.setTransform(...JS(x));else{const v=parseFloat(f.style.width)/f.width,w=parseFloat(f.style.height)/f.height;u.setTransform(v,0,0,w,0,0)}u.drawImage(f,0,0)}}u.globalAlpha=1,u.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(xa.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function mD(n){if(n instanceof Yp){n.setMapInternal(null);return}n instanceof Vv&&n.getLayers().forEach(mD)}function pD(n,e){if(n instanceof Yp){n.setMapInternal(e);return}if(n instanceof Vv){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)pD(t[r],e)}}let yH=class extends Zo{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=_H(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:LU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Xa(),this.pixelToCoordinateTransform_=Xa(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Ks||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Ks||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Ks?new _a:WW()),this.interactions=t.interactions||(Ks?new _a:fH({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new jW(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Mi.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Mi.VIEW,this.handleViewChanged_),this.addChangeListener(Mi.SIZE,this.handleSizeChanged_),this.addChangeListener(Mi.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof Co)&&e.view.then(function(i){r.setView(new Co(i))}),this.controls.addEventListener(gs.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(gs.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(gs.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(gs.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(gs.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(gs.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){pD(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:Bm,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Vv?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:Bm,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(Mi.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return QS(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Hr(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Mi.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof _a){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=yl(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Hr(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Mi.SIZE)}getView(){return this.get(Mi.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return VW(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new Rc(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===hT.POINTERDOWN||r===$t.WHEEL||r===$t.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[ni.ANIMATING]||a[ni.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(xa.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xa.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new pf(Cc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new pf(Cc.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Wn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener($t.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener($t.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Gc(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Gc(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new pH(this)),!Gc(t)){this.mapBrowserEventHandler_=new BW(this,this.moveTolerance_);for(const i in fr)this.mapBrowserEventHandler_.addEventListener(fr[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener($t.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener($t.WHEEL,this.boundHandleBrowserEvent_,p5?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[hn(r,$t.KEYDOWN,this.handleBrowserEvent,this),hn(r,$t.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Wn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Wn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=hn(e,Jf.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=hn(e,$t.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Wn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new kc("addlayer",e)),this.layerGroupPropertyListenerKeys_=[hn(e,Jf.PROPERTYCHANGE,this.render,this),hn(e,$t.CHANGE,this.render,this),hn(e,"addlayer",this.handleLayerAdd_,this),hn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){mD(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&ak(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Y_(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:_n(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=Y_(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!R0(this.previousExtent_)&&!e0(s.extent,this.previousExtent_))&&(this.dispatchEvent(new pf(Cc.MOVESTART,this,i)),this.previousExtent_=jp(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ni.ANIMATING]&&!s.viewHints[ni.INTERACTING]&&!e0(s.extent,this.previousExtent_)&&(this.dispatchEvent(new pf(Cc.MOVEEND,this,s)),GO(s.extent,this.previousExtent_))),this.dispatchEvent(new pf(Cc.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Cc.LOADSTART)||this.hasListener(Cc.LOADEND)||this.hasListener(xa.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new kc("removelayer",t)),this.set(Mi.LAYERGROUP,e)}setSize(e){this.set(Mi.SIZE,e)}setTarget(e){this.set(Mi.TARGET,e)}setView(e){if(!e||e instanceof Co){this.set(Mi.VIEW,e);return}this.set(Mi.VIEW,new Co);const t=this;e.then(function(r){t.setView(new Co(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){let i,s;if(Gc(e))i=e.width,s=e.height;else{const a=getComputedStyle(e);i=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),s=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(t=[Math.max(0,i),Math.max(0,s)],!ak(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&ZO("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!xu(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function _H(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Vv({layers:n.layers});t[Mi.LAYERGROUP]=r,t[Mi.TARGET]=n.target,t[Mi.VIEW]=n.view instanceof Co?n.view:new Co;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new _a(n.controls.slice()):(Cn(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new _a(n.interactions.slice()):(Cn(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new _a(n.overlays.slice()):(Cn(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new _a,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const U2="units",xH=[1,2,5],Fg=25.4/.28;class vH extends Gv{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+zp,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(U2,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(U2)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(U2,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let a=ex(r,e.resolution,t,s);const o=this.minWidth_*(this.dpi_||Fg)/Fg,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Fg)/Fg:void 0;let u=o*a,h="";if(i=="degrees"){const A=t0.degrees;u*=A,u<A/60?(h="",a*=3600):u<A?(h="",a*=60):h=""}else if(i=="imperial")u<.9144?(h="in",a/=.0254):u<1609.344?(h="ft",a/=.3048):(h="mi",a/=1609.344);else if(i=="nautical")a/=1852,h="NM";else if(i=="metric")u<1e-6?(h="nm",a*=1e9):u<.001?(h="m",a*=1e6):u<1?(h="mm",a*=1e3):u<1e3?h="m":(h="km",a/=1e3);else if(i=="us")u<.9144?(h="in",a*=39.37):u<1609.344?(h="ft",a/=.30480061):(h="mi",a/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(o*a)/Math.log(10)),g,p,x,v=0,w,T;for(;;){x=Math.floor(f/3);const A=Math.pow(10,x);if(g=xH[(f%3+3)%3]*A,p=Math.round(g/a),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){g=v,p=w,x=T;break}else if(p>=o)break;v=g,w=p,T=x,++f}const I=this.scaleBar_?this.createScaleBar(p,g,h):g.toFixed(x<0?-x:0)+" "+h;this.renderedHTML_!=I&&(this.innerElement_.innerHTML=I,this.renderedHTML_=I),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),a=this.scaleBarSteps_,o=e/a,l=[this.createMarker("absolute")];for(let h=0;h<a;++h){const f=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(h%2===0||a===2?this.createStepText(h,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(a,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,s){const o=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=ex(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Fg,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const EH={},Nk=n=>{let e;const t=new Set,r=(h,f)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const p=e;e=f??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(x=>x(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(EH?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(r,i,l);return l},wH=n=>n?Nk(n):Nk;var z2={exports:{}},$2={},W2={exports:{}},H2={};var Lk;function SH(){if(Lk)return H2;Lk=1;var n=Lp();function e(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(f,g){var p=g(),x=r({inst:{value:p,getSnapshot:g}}),v=x[0].inst,w=x[1];return s(function(){v.value=p,v.getSnapshot=g,l(v)&&w({inst:v})},[f,p,g]),i(function(){return l(v)&&w({inst:v}),f(function(){l(v)&&w({inst:v})})},[f]),a(p),p}function l(f){var g=f.getSnapshot;f=f.value;try{var p=g();return!t(f,p)}catch{return!0}}function u(f,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return H2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,H2}var Ok;function TH(){return Ok||(Ok=1,W2.exports=SH()),W2.exports}var Dk;function IH(){if(Dk)return $2;Dk=1;var n=Lp(),e=TH();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,l=n.useDebugValue;return $2.useSyncExternalStoreWithSelector=function(u,h,f,g,p){var x=s(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=o(function(){function T(B){if(!I){if(I=!0,A=B,B=g(B),p!==void 0&&v.hasValue){var k=v.value;if(p(k,B))return N=k}return N=B}if(k=N,r(A,B))return k;var P=g(B);return p!==void 0&&p(k,P)?(A=B,k):(A=B,N=P)}var I=!1,A,N,D=f===void 0?null:f;return[function(){return T(h())},D===null?void 0:function(){return T(D())}]},[h,f,g,p]);var w=i(u,x[0],x[1]);return a(function(){v.hasValue=!0,v.value=w},[w]),l(w),w},$2}var Fk;function AH(){return Fk||(Fk=1,z2.exports=IH()),z2.exports}var bH=AH();const RH=GI(bH),yD={},{useDebugValue:CH}=SB,{useSyncExternalStoreWithSelector:PH}=RH;let jk=!1;const kH=n=>n;function MH(n,e=kH,t){(yD?"production":void 0)!=="production"&&t&&!jk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jk=!0);const r=PH(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return CH(r),r}const NH=n=>{(yD?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?wH(n):n,t=(r,i)=>MH(e,r,i);return Object.assign(t,e),t},Aa=n=>NH;var _D=Symbol.for("immer-nothing"),Vk=Symbol.for("immer-draftable"),Qs=Symbol.for("immer-state");function za(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Jm=Object.getPrototypeOf;function a0(n){return!!n&&!!n[Qs]}function Dh(n){return n?xD(n)||Array.isArray(n)||!!n[Vk]||!!n.constructor?.[Vk]||Qp(n)||Uv(n):!1}var LH=Object.prototype.constructor.toString(),Gk=new WeakMap;function xD(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=Gk.get(t);return r===void 0&&(r=Function.toString.call(t),Gk.set(t,r)),r===LH}function dx(n,e,t=!0){Bv(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function Bv(n){const e=n[Qs];return e?e.type_:Array.isArray(n)?1:Qp(n)?2:Uv(n)?3:0}function fT(n,e){return Bv(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function vD(n,e,t){const r=Bv(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function OH(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Qp(n){return n instanceof Map}function Uv(n){return n instanceof Set}function Ju(n){return n.copy_||n.base_}function gT(n,e){if(Qp(n))return new Map(n);if(Uv(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=xD(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Qs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create(Jm(n),r)}else{const r=Jm(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function AA(n,e=!1){return zv(n)||a0(n)||!Dh(n)||(Bv(n)>1&&Object.defineProperties(n,{set:$y,add:$y,clear:$y,delete:$y}),Object.freeze(n),e&&Object.values(n).forEach(t=>AA(t,!0))),n}function DH(){za(2)}var $y={value:DH};function zv(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var FH={};function Fh(n){const e=FH[n];return e||za(0,n),e}var ep;function ED(){return ep}function jH(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Bk(n,e){e&&(Fh("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function mT(n){pT(n),n.drafts_.forEach(VH),n.drafts_=null}function pT(n){n===ep&&(ep=n.parent_)}function Uk(n){return ep=jH(ep,n)}function VH(n){const e=n[Qs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function zk(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Qs].modified_&&(mT(e),za(4)),Dh(n)&&(n=fx(e,n),e.parent_||gx(e,n)),e.patches_&&Fh("Patches").generateReplacementPatches_(t[Qs].base_,n,e.patches_,e.inversePatches_)):n=fx(e,t,[]),mT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==_D?n:void 0}function fx(n,e,t){if(zv(e))return e;const r=n.immer_.shouldUseStrictIteration(),i=e[Qs];if(!i)return dx(e,(s,a)=>$k(n,i,e,s,a,t),r),e;if(i.scope_!==n)return e;if(!i.modified_)return gx(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),dx(a,(l,u)=>$k(n,i,s,l,u,t,o),r),gx(n,s,!1),t&&n.patches_&&Fh("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function $k(n,e,t,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=zv(i);if(!(o&&!a)){if(a0(i)){const l=s&&e&&e.type_!==3&&!fT(e.assigned_,r)?s.concat(r):void 0,u=fx(n,i,l);if(vD(t,r,u),a0(u))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Dh(i)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;fx(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Qp(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&gx(n,i)}}}function gx(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&AA(e,t)}function GH(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:ED(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=bA;t&&(i=[r],s=tp);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var bA={get(n,e){if(e===Qs)return n;const t=Ju(n);if(!fT(t,e))return BH(n,t,e);const r=t[e];return n.finalized_||!Dh(r)?r:r===K2(n.base_,e)?(Y2(n),n.copy_[e]=_T(r,n)):r},has(n,e){return e in Ju(n)},ownKeys(n){return Reflect.ownKeys(Ju(n))},set(n,e,t){const r=wD(Ju(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=K2(Ju(n),e),s=i?.[Qs];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(OH(t,i)&&(t!==void 0||fT(n.base_,e)))return!0;Y2(n),yT(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return K2(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Y2(n),yT(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Ju(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){za(11)},getPrototypeOf(n){return Jm(n.base_)},setPrototypeOf(){za(12)}},tp={};dx(bA,(n,e)=>{tp[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});tp.deleteProperty=function(n,e){return tp.set.call(this,n,e,void 0)};tp.set=function(n,e,t){return bA.set.call(this,n[0],e,t,n[0])};function K2(n,e){const t=n[Qs];return(t?Ju(t):n)[e]}function BH(n,e,t){const r=wD(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function wD(n,e){if(!(e in n))return;let t=Jm(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Jm(t)}}function yT(n){n.modified_||(n.modified_=!0,n.parent_&&yT(n.parent_))}function Y2(n){n.copy_||(n.copy_=gT(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var UH=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...u){return a.produce(l,h=>t.call(this,h,...u))}}typeof t!="function"&&za(6),r!==void 0&&typeof r!="function"&&za(7);let i;if(Dh(e)){const s=Uk(this),a=_T(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?mT(s):pT(s)}return Bk(s,r),zk(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===_D&&(i=void 0),this.autoFreeze_&&AA(i,!0),r){const s=[],a=[];Fh("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else za(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,t,(a,o)=>{r=a,i=o}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Dh(n)||za(8),a0(n)&&(n=zH(n));const e=Uk(this),t=_T(n,void 0);return t[Qs].isManual_=!0,pT(e),t}finishDraft(n,e){const t=n&&n[Qs];(!t||!t.isManual_)&&za(9);const{scope_:r}=t;return Bk(r,e),zk(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Fh("Patches").applyPatches_;return a0(n)?r(n,e):this.produce(n,i=>r(i,e))}};function _T(n,e){const t=Qp(n)?Fh("MapSet").proxyMap_(n,e):Uv(n)?Fh("MapSet").proxySet_(n,e):GH(n,e);return(e?e.scope_:ED()).drafts_.push(t),t}function zH(n){return a0(n)||za(10,n),SD(n)}function SD(n){if(!Dh(n)||zv(n))return n;const e=n[Qs];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=gT(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=gT(n,!0);return dx(t,(i,s)=>{vD(t,i,SD(s))},r),e&&(e.finalized_=!1),t}var $H=new UH,WH=$H.produce;const HH=n=>(e,t,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?WH(i):i;return e(o,s,...a)},n(r.setState,t,r)),k0=HH,qi=Aa()(k0((n,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,config:{smoothingFactor:.2,minRotationSpeed:8,centerOnUser:!0,animationDuration:100},startTracking:()=>{n(t=>{t.tracking=!0})},stopTracking:()=>{n(t=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),t.tracking=!1,t.speed=null,t.headingSource=null,t.watchId=null})},updatePosition:t=>{n(r=>{r.position={lat:t.coords.latitude,lng:t.coords.longitude},r.accuracy=t.coords.accuracy,r.speed=t.coords.speed;const i=15,s=.5;if(!(t.coords.accuracy!==null&&t.coords.accuracy<i)){r.headingSource=null;return}if(t.coords.heading!==null&&t.coords.speed!==null&&t.coords.speed>s){r.headingSource="gps";const o=t.coords.heading;e().updateHeading(o,"gps")}else r.headingSource="compass"})},updateHeading:(t,r="compass")=>{n(i=>{const{smoothHeading:s,config:a}=e();if(s===null){i.smoothHeading=t,i.heading=t;return}let o=t-s;o>180&&(o-=360),o<-180&&(o+=360);const l=r==="compass"?5:3;if(Math.abs(o)<l)return;const h=s+o*(r==="gps"?.5:.35);i.smoothHeading=(h+360)%360,i.heading=t})},setSmoothedHeading:t=>{n(r=>{r.smoothHeading=t,r.heading=t})},setWatchId:t=>{n(r=>{r.watchId=t})},resetFirstFix:()=>{n(t=>{t.firstFix=!1})}}))),RA={"TMK 1850":{name:"TMK 1850",factory:async()=>null,immediateLoad:!0,tier:"premium"},"Bonnebladen 1900":{name:"Bonnebladen 1900",factory:async()=>null,immediateLoad:!0,tier:"premium"},"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:n}=await dt(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createAHNLayerOL:e}},[]);return n()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:n}=await dt(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createGeomorfologieLayerOL:e}},[]);return n()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:n}=await dt(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createBodemkaartLayerOL:e}},[]);return n()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:n}=await dt(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createIKAWLayerOL:e}},[]);return n()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:n}=await dt(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createFAMKESteentijdLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Landschappen":{name:"Archeo Landschappen",factory:async()=>{const{createArcheoLandschappenLayerOL:n}=await dt(async()=>{const{createArcheoLandschappenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createArcheoLandschappenLayerOL:e}},[]);return n()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:n}=await dt(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createEssenLayerOL:e}},[]);return n()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:n}=await dt(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createRijksmonumentenLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:n}=await dt(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return n()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:n}=await dt(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createWerelderfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:n}=await dt(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-DICFp3J0.js");return{createTerpenLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:n}=await dt(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-C-J6JT53.js");return{createLiniesLayerOL:e}},[]);return n()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:n}=await dt(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-C-J6JT53.js");return{createInundatiesLayerOL:e}},[]);return n()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:n}=await dt(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-C-J6JT53.js");return{createMilitaireObjectenLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:n}=await dt(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-BKMuPvBm.js");return{createPaleo800ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:n}=await dt(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-BKMuPvBm.js");return{createPaleo100ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:n}=await dt(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-BKMuPvBm.js");return{createPaleo500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:n}=await dt(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-BKMuPvBm.js");return{createPaleo1500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:n}=await dt(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-BKMuPvBm.js");return{createPaleo2750vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:n}=await dt(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-BKMuPvBm.js");return{createPaleo5500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:n}=await dt(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-BKMuPvBm.js");return{createPaleo9000vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:n}=await dt(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-XccahqV_.js");return{createReligieusErfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:n}=await dt(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-KWEq4CgL.js");return{createAHN4ColorElevationLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:n}=await dt(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-KWEq4CgL.js");return{createAHN4HillshadeLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:n}=await dt(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-KWEq4CgL.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:n}=await dt(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createGewaspercelenLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:n}=await dt(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createKadastraleKaartLayerOL:e}},[]);return n()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:n}=await dt(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createScheepswrakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:n}=await dt(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createWoonheuvelsLayerOL:e}},[]);return n()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:n}=await dt(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createRomeinseFortenLayerOL:e}},[]);return n()},immediateLoad:!0},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:n}=await dt(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createWindmolensLayerOL:e}},[]);return n()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:n}=await dt(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createErfgoedlijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:n}=await dt(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createOudeKernenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenkaartPuntenLayerOL:n}=await dt(async()=>{const{createRelictenkaartPuntenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createRelictenkaartPuntenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:n}=await dt(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:n}=await dt(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:n}=await dt(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-Dqm1HCs4.js");return{createVerdronkenDorpenLayerOL:e}},[]);return n()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:n}=await dt(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-hAgvtQ6c.js");return{createAMKLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:n}=await dt(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-hAgvtQ6c.js");return{createAMKRomeinsLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:n}=await dt(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-hAgvtQ6c.js");return{createAMKSteentijdLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:n}=await dt(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-hAgvtQ6c.js");return{createAMKVroegeMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:n}=await dt(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-hAgvtQ6c.js");return{createAMKLateMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:n}=await dt(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-hAgvtQ6c.js");return{createAMKOverigLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"Romeinse wegen (regio)":{name:"Romeinse wegen (regio)",factory:async()=>{const{createRomeinseWegenLayerOL:n}=await dt(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-C3rMgXNe.js");return{createRomeinseWegenLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:n}=await dt(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-C3rMgXNe.js");return{createRomeinseWegenWereldLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:n}=await dt(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-Al7e6SWj.js");return{createKastelenLayerOL:e}},__vite__mapDeps([3,4]));return n()},immediateLoad:!1},Runes:{name:"Runes",factory:async()=>{const{createRuinesLayerOL:n}=await dt(async()=>{const{createRuinesLayerOL:e}=await import("./ruinesOL-BDlpiFXN.js");return{createRuinesLayerOL:e}},__vite__mapDeps([5,4]));return n()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:n}=await dt(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-Dr7ysw_x.js");return{createVeengebiedenLayerOL:e}},[]);return n()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:n}=await dt(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-Dlswy-Ji.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([6,4]));return n()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:n}=await dt(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-BK820a2L.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([7,1,4]));return n()},immediateLoad:!1,tier:"premium"},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:n}=await dt(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-Dz4CGmqv.js");return{createUIKAVVlakkenLayerOL:e}},__vite__mapDeps([8,1]));return n()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:n}=await dt(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-BU3E1dQY.js");return{createUIKAVBufferlaagLayerOL:e}},__vite__mapDeps([9,1]));return n()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:n}=await dt(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-De-_CvsY.js");return{createUIKAVExpertLayerOL:e}},__vite__mapDeps([10,1]));return n()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:n}=await dt(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-CuJOM5ER.js");return{createUIKAVUiterwaardenLayerOL:e}},__vite__mapDeps([11,1]));return n()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:n}=await dt(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-BLNWqBOg.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([12,1,4]));return n()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:n}=await dt(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-Bqh4m_Lh.js");return{createMuseaLayerOL:e}},__vite__mapDeps([13,1,4]));return n()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:n}=await dt(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-CXg-WZ-3.js");return{createStrandjesLayerOL:e}},__vite__mapDeps([14,1]));return n()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:n}=await dt(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-D29j_RXt.js");return{createParkenLayerOL:e}},__vite__mapDeps([15,1]));return n()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:n}=await dt(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-Dd1Ndj8D.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([16,4]));return n()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:n}=await dt(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-DJi5jCr5.js");return{createFossielenLayerOL:e}},__vite__mapDeps([17,18,4]));return n()},immediateLoad:!1,tier:"premium"},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:n}=await dt(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-C0yUySV3.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([19,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["be"]},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:n}=await dt(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-DMNFqG33.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([20,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["de"]},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:n}=await dt(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-DA-KGF99.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([21,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["fr"]},"Fossiel Hotspots":{name:"Fossiel Hotspots",factory:async()=>{const{createFossielHotspotsLayerOL:n}=await dt(async()=>{const{createFossielHotspotsLayerOL:e}=await import("./fossielHotspotsOL-C-kjGhuz.js");return{createFossielHotspotsLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"Mineralen Hotspots":{name:"Mineralen Hotspots",factory:async()=>{const{createMineralenHotspotsLayerOL:n}=await dt(async()=>{const{createMineralenHotspotsLayerOL:e}=await import("./mineralenHotspotsOL-ChVHAXP6.js");return{createMineralenHotspotsLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Goudrivieren:{name:"Goudrivieren",factory:async()=>{const{createGoudrivierenLayerOL:n}=await dt(async()=>{const{createGoudrivierenLayerOL:e}=await import("./goudrivierenOL-CUhRuM8d.js");return{createGoudrivierenLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Wandelroutes:{name:"Wandelroutes",factory:async()=>{const{createWandelroutesLayer:n}=await dt(async()=>{const{createWandelroutesLayer:e}=await import("./wandelroutesOL-DSHYuBn1.js");return{createWandelroutesLayer:e}},[]);return n()},immediateLoad:!1,tier:"free",regions:["nl","be"]},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:n}=await dt(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-D_NVCC7g.js");return{createBunkersLayerOL:e}},__vite__mapDeps([22,4]));return n()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:n}=await dt(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-B012cEeV.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([23,4]));return n()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:n}=await dt(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-C1oA26cl.js");return{createSlagveldenLayerOL:e}},__vite__mapDeps([24,4]));return n()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:n}=await dt(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-BX9X_VfD.js");return{createVliegveldenLayerOL:e}},[]);return n()},immediateLoad:!1}};function KH(){return Object.values(RA).filter(n=>n.immediateLoad)}const rs=Aa()(k0((n,e)=>({map:null,rotation:0,rotationEnabled:!0,setMap:t=>{n(r=>{r.map=t})},setRotation:t=>{n(r=>{if(r.rotation=t,r.map&&r.rotationEnabled){const i=t*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{n(t=>{t.rotationEnabled=!0})},disableRotation:()=>{n(t=>{t.rotationEnabled=!1,t.rotation=0,t.map&&t.map.getView().animate({rotation:0,duration:500})})}}))),ri=Aa()(k0((n,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Romeinse wegen (regio)":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,"Archeo Landschappen":!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN 0.5m":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN 0.5m":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"Archeo Landschappen":.5,Essen:.6,Terpen:.7,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},toggleLayer:t=>{const r=e(),i=!r.visible[t];n(s=>{s.visible[t]=i}),i&&!r.layers[t]?e().loadLayer(t):r.layers[t]&&r.layers[t].setVisible(i)},setLayerVisibility:(t,r)=>{const i=e();n(s=>{s.visible[t]=r;const a=s.layers[t];a&&a.setVisible(r)}),r&&!i.layers[t]&&e().loadLayer(t)},setLayerOpacity:(t,r)=>{n(i=>{i.opacity[t]=r;const s=i.layers[t];s&&s.setOpacity(r)})},registerLayer:(t,r)=>{n(i=>{i.layers[t]=r,i.loadingState[t]="loaded",i.visible[t]!==void 0&&r.setVisible(i.visible[t]),i.opacity[t]!==void 0&&r.setOpacity(i.opacity[t])})},unregisterLayer:t=>{n(r=>{delete r.layers[t],delete r.loadingState[t]})},loadLayer:async t=>{const r=e();if(r.loadingState[t]==="loading"||r.layers[t])return;const i=RA[t];if(!i){console.warn(` Layer "${t}" not found in registry`);return}const s=rs.getState().map;if(!s){console.warn(` Cannot load layer "${t}": map not initialized`);return}n(a=>{a.loadingState[t]="loading"}),console.log(` Loading layer: ${t}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const o=e();a.setVisible(o.visible[t]??!1),o.opacity[t]!==void 0&&a.setOpacity(o.opacity[t]),s.addLayer(a),n(l=>{l.layers[t]=a,l.loadingState[t]="loaded"}),console.log(` Layer loaded: ${t}`)}catch(a){console.error(` Failed to load layer "${t}":`,a),n(o=>{o.loadingState[t]="error"})}}}))),Vi=Aa()(k0((n,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstDashboardOpen:!1,createLayerModalOpen:!1,addPointModalOpen:!1,addPointModalLayerId:null,addPointModalLocation:null,layerManagerModalOpen:!1,layerDashboardOpen:!1,layerDashboardLayerId:null,collapsedCategories:new Set,closeAllPanels:()=>{n(t=>{t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1})},toggleLayerControl:()=>{n(t=>{t.layerControlOpen=!t.layerControlOpen})},toggleLegend:()=>{n(t=>{t.legendOpen=!t.legendOpen})},toggleBackgroundsPanel:()=>{n(t=>{const r=t.backgroundsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{n(t=>{const r=t.themesPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{n(t=>{const r=t.settingsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{n(t=>{const r=t.infoPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.infoPanelOpen=!0)})},togglePresetsPanel:()=>{n(t=>{const r=t.presetsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.presetsPanelOpen=!0)})},toggleCategory:t=>{n(r=>{r.collapsedCategories.has(t)?r.collapsedCategories.delete(t):r.collapsedCategories.add(t)})},setLayerControlOpen:t=>{n(r=>{r.layerControlOpen=t})},setLegendOpen:t=>{n(r=>{r.legendOpen=t})},openVondstForm:t=>{n(r=>{r.backgroundsPanelOpen=!1,r.themesPanelOpen=!1,r.settingsPanelOpen=!1,r.infoPanelOpen=!1,r.presetsPanelOpen=!1,r.vondstFormOpen=!0,r.vondstFormLocation=t||null})},closeVondstForm:()=>{n(t=>{t.vondstFormOpen=!1,t.vondstFormLocation=null})},toggleVondstDashboard:()=>{n(t=>{const r=t.vondstDashboardOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,t.vondstDashboardOpen=!r})},openCreateLayerModal:()=>{n(t=>{t.createLayerModalOpen=!0})},closeCreateLayerModal:()=>{n(t=>{t.createLayerModalOpen=!1})},openAddPointModal:(t,r)=>{n(i=>{i.addPointModalOpen=!0,i.addPointModalLayerId=t,i.addPointModalLocation=r})},closeAddPointModal:()=>{n(t=>{t.addPointModalOpen=!1,t.addPointModalLayerId=null,t.addPointModalLocation=null})},openLayerManagerModal:()=>{n(t=>{t.layerManagerModalOpen=!0})},closeLayerManagerModal:()=>{n(t=>{t.layerManagerModalOpen=!1})},openLayerDashboard:t=>{n(r=>{r.layerDashboardOpen=!0,r.layerDashboardLayerId=t,r.layerManagerModalOpen=!1})},closeLayerDashboard:()=>{n(t=>{t.layerDashboardOpen=!1,t.layerDashboardLayerId=null})}}))),YH=()=>{};var Wk={};const TD=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},XH=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ID={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=s>>2,f=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;l||(p=64,a||(g=64)),r.push(t[h],t[f],t[g],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||f==null)throw new qH;const g=s<<2|o>>4;if(r.push(g),u!==64){const p=o<<4&240|u>>2;if(r.push(p),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZH=function(n){const e=TD(n);return ID.encodeByteArray(e,!0)},mx=function(n){return ZH(n).replace(/\./g,"")},AD=function(n){try{return ID.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const QH=()=>bD().__FIREBASE_DEFAULTS__,JH=()=>{if(typeof process>"u"||typeof Wk>"u")return;const n=Wk.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&AD(n[1]);return e&&JSON.parse(e)},$v=()=>{try{return YH()||QH()||JH()||eK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RD=n=>$v()?.emulatorHosts?.[n],CD=n=>{const e=RD(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},PD=()=>$v()?.config,kD=n=>$v()?.[`_${n}`];class tK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ad(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CA(n){return(await fetch(n,{credentials:"include"})).ok}function MD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[mx(JSON.stringify(t)),mx(JSON.stringify(a)),""].join(".")}const dm={};function nK(){const n={prod:[],emulator:[]};for(const e of Object.keys(dm))dm[e]?n.emulator.push(e):n.prod.push(e);return n}function rK(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Hk=!1;function PA(n,e){if(typeof window>"u"||typeof document>"u"||!ad(window.location.host)||dm[n]===e||dm[n]||Hk)return;dm[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=nK().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Hk=!0,a()},g}function h(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=rK(r),p=t("text"),x=document.getElementById(p)||document.createElement("span"),v=t("learnmore"),w=document.getElementById(v)||document.createElement("a"),T=t("preprendIcon"),I=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const A=g.element;o(A),h(w,v);const N=u();l(I,T),A.append(I,x,w,N),document.body.appendChild(A)}s?(x.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Yr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yr())}function ND(){const n=$v()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aK(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lK(){const n=Yr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function LD(){return!ND()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OD(){return!ND()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function DD(){try{return typeof indexedDB=="object"}catch{return!1}}function cK(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const uK="FirebaseError";class Qo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=uK,Object.setPrototypeOf(this,Qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jp.prototype.create)}}class Jp{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?hK(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Qo(i,o,r)}}function hK(n,e){return n.replace(dK,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dK=/\{\$([^}]+)}/g;function fK(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Kk(s)&&Kk(a)){if(!jh(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Kk(n){return n!==null&&typeof n=="object"}function e1(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gK(n,e){const t=new mK(n,e);return t.subscribe.bind(t)}class mK{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");pK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=X2),i.error===void 0&&(i.error=X2),i.complete===void 0&&(i.complete=X2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pK(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function X2(){}function li(n){return n&&n._delegate?n._delegate:n}class su{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const eh="[DEFAULT]";class yK{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new tK;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xK(e))try{this.getOrInitializeService({instanceIdentifier:eh})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=eh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eh){return this.instances.has(e)}getOptions(e=eh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_K(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eh){return this.component?this.component.multipleInstances?e:eh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _K(n){return n===eh?void 0:n}function xK(n){return n.instantiationMode==="EAGER"}class vK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yK(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var rn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rn||(rn={}));const EK={debug:rn.DEBUG,verbose:rn.VERBOSE,info:rn.INFO,warn:rn.WARN,error:rn.ERROR,silent:rn.SILENT},wK=rn.INFO,SK={[rn.DEBUG]:"log",[rn.VERBOSE]:"log",[rn.INFO]:"info",[rn.WARN]:"warn",[rn.ERROR]:"error"},TK=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=SK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kA{constructor(e){this.name=e,this._logLevel=wK,this._logHandler=TK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rn.DEBUG,...e),this._logHandler(this,rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rn.VERBOSE,...e),this._logHandler(this,rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rn.INFO,...e),this._logHandler(this,rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rn.WARN,...e),this._logHandler(this,rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rn.ERROR,...e),this._logHandler(this,rn.ERROR,...e)}}const IK=(n,e)=>e.some(t=>n instanceof t);let Yk,Xk;function AK(){return Yk||(Yk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bK(){return Xk||(Xk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FD=new WeakMap,xT=new WeakMap,jD=new WeakMap,q2=new WeakMap,MA=new WeakMap;function RK(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(qc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&FD.set(t,n)}).catch(()=>{}),MA.set(e,n),e}function CK(n){if(xT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});xT.set(n,e)}let vT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function PK(n){vT=n(vT)}function kK(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Z2(this),e,...t);return jD.set(r,e.sort?e.sort():[e]),qc(r)}:bK().includes(n)?function(...e){return n.apply(Z2(this),e),qc(FD.get(this))}:function(...e){return qc(n.apply(Z2(this),e))}}function MK(n){return typeof n=="function"?kK(n):(n instanceof IDBTransaction&&CK(n),IK(n,AK())?new Proxy(n,vT):n)}function qc(n){if(n instanceof IDBRequest)return RK(n);if(q2.has(n))return q2.get(n);const e=MK(n);return e!==n&&(q2.set(n,e),MA.set(e,n)),e}const Z2=n=>MA.get(n);function NK(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=qc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(qc(a.result),l.oldVersion,l.newVersion,qc(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const LK=["get","getKey","getAll","getAllKeys","count"],OK=["put","add","delete","clear"],Q2=new Map;function qk(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Q2.get(e))return Q2.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=OK.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LK.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return Q2.set(e,s),s}PK(n=>({...n,get:(e,t,r)=>qk(e,t)||n.get(e,t,r),has:(e,t)=>!!qk(e,t)||n.has(e,t)}));class DK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FK(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function FK(n){return n.getComponent()?.type==="VERSION"}const ET="@firebase/app",Zk="0.14.6";const Fl=new kA("@firebase/app"),jK="@firebase/app-compat",VK="@firebase/analytics-compat",GK="@firebase/analytics",BK="@firebase/app-check-compat",UK="@firebase/app-check",zK="@firebase/auth",$K="@firebase/auth-compat",WK="@firebase/database",HK="@firebase/data-connect",KK="@firebase/database-compat",YK="@firebase/functions",XK="@firebase/functions-compat",qK="@firebase/installations",ZK="@firebase/installations-compat",QK="@firebase/messaging",JK="@firebase/messaging-compat",eY="@firebase/performance",tY="@firebase/performance-compat",nY="@firebase/remote-config",rY="@firebase/remote-config-compat",iY="@firebase/storage",sY="@firebase/storage-compat",aY="@firebase/firestore",oY="@firebase/ai",lY="@firebase/firestore-compat",cY="firebase",uY="12.6.0";const wT="[DEFAULT]",hY={[ET]:"fire-core",[jK]:"fire-core-compat",[GK]:"fire-analytics",[VK]:"fire-analytics-compat",[UK]:"fire-app-check",[BK]:"fire-app-check-compat",[zK]:"fire-auth",[$K]:"fire-auth-compat",[WK]:"fire-rtdb",[HK]:"fire-data-connect",[KK]:"fire-rtdb-compat",[YK]:"fire-fn",[XK]:"fire-fn-compat",[qK]:"fire-iid",[ZK]:"fire-iid-compat",[QK]:"fire-fcm",[JK]:"fire-fcm-compat",[eY]:"fire-perf",[tY]:"fire-perf-compat",[nY]:"fire-rc",[rY]:"fire-rc-compat",[iY]:"fire-gcs",[sY]:"fire-gcs-compat",[aY]:"fire-fst",[lY]:"fire-fst-compat",[oY]:"fire-vertex","fire-js":"fire-js",[cY]:"fire-js-all"};const px=new Map,dY=new Map,ST=new Map;function Qk(n,e){try{n.container.addComponent(e)}catch(t){Fl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vh(n){const e=n.name;if(ST.has(e))return Fl.debug(`There were multiple attempts to register component ${e}.`),!1;ST.set(e,n);for(const t of px.values())Qk(t,n);for(const t of dY.values())Qk(t,n);return!0}function Wv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pa(n){return n==null?!1:n.settings!==void 0}const fY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zc=new Jp("app","Firebase",fY);class gY{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new su("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zc.create("app-deleted",{appName:this._name})}}const od=uY;function VD(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:wT,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Zc.create("bad-app-name",{appName:String(i)});if(t||(t=PD()),!t)throw Zc.create("no-options");const s=px.get(i);if(s){if(jh(t,s.options)&&jh(r,s.config))return s;throw Zc.create("duplicate-app",{appName:i})}const a=new vK(i);for(const l of ST.values())a.addComponent(l);const o=new gY(t,r,a);return px.set(i,o),o}function NA(n=wT){const e=px.get(n);if(!e&&n===wT&&PD())return VD();if(!e)throw Zc.create("no-app",{appName:n});return e}function Lo(n,e,t){let r=hY[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fl.warn(a.join(" "));return}Vh(new su(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const mY="firebase-heartbeat-database",pY=1,np="firebase-heartbeat-store";let J2=null;function GD(){return J2||(J2=NK(mY,pY,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(np)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zc.create("idb-open",{originalErrorMessage:n.message})})),J2}async function yY(n){try{const t=(await GD()).transaction(np),r=await t.objectStore(np).get(BD(n));return await t.done,r}catch(e){if(e instanceof Qo)Fl.warn(e.message);else{const t=Zc.create("idb-get",{originalErrorMessage:e?.message});Fl.warn(t.message)}}}async function Jk(n,e){try{const r=(await GD()).transaction(np,"readwrite");await r.objectStore(np).put(e,BD(n)),await r.done}catch(t){if(t instanceof Qo)Fl.warn(t.message);else{const r=Zc.create("idb-set",{originalErrorMessage:t?.message});Fl.warn(r.message)}}}function BD(n){return`${n.name}!${n.options.appId}`}const _Y=1024,xY=30;class vY{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wY(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eM();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>xY){const i=SY(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eM(),{heartbeatsToSend:t,unsentEntries:r}=EY(this._heartbeatsCache.heartbeats),i=mx(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Fl.warn(e),""}}}function eM(){return new Date().toISOString().substring(0,10)}function EY(n,e=_Y){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),tM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class wY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DD()?cK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yY(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tM(n){return mx(JSON.stringify({version:2,heartbeats:n})).length}function SY(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function TY(n){Vh(new su("platform-logger",e=>new DK(e),"PRIVATE")),Vh(new su("heartbeat",e=>new vY(e),"PRIVATE")),Lo(ET,Zk,n),Lo(ET,Zk,"esm2020"),Lo("fire-js","")}TY("");function UD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IY=UD,zD=new Jp("auth","Firebase",UD());const yx=new kA("@firebase/auth");function AY(n,...e){yx.logLevel<=rn.WARN&&yx.warn(`Auth (${od}): ${n}`,...e)}function w_(n,...e){yx.logLevel<=rn.ERROR&&yx.error(`Auth (${od}): ${n}`,...e)}function Wo(n,...e){throw OA(n,...e)}function Za(n,...e){return OA(n,...e)}function LA(n,e,t){const r={...IY(),[e]:t};return new Jp("auth","Firebase",r).create(e,{appName:n.name})}function Sh(n){return LA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bY(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wo(n,"argument-error"),LA(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function OA(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zD.create(n,...e)}function Ut(n,e,...t){if(!n)throw OA(e,...t)}function vl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw w_(e),new Error(e)}function jl(n,e){n||vl(e)}function TT(){return typeof self<"u"&&self.location?.href||""}function RY(){return nM()==="http:"||nM()==="https:"}function nM(){return typeof self<"u"&&self.location?.protocol||null}function CY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RY()||aK()||"connection"in navigator)?navigator.onLine:!0}function PY(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class t1{constructor(e,t){this.shortDelay=e,this.longDelay=t,jl(t>e,"Short delay should be less than long delay!"),this.isMobile=iK()||oK()}get(){return CY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function DA(n,e){jl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class $D{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const MY=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NY=new t1(3e4,6e4);function FA(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function M0(n,e,t,r,i={}){return WD(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=e1({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...s};return sK()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&ad(n.emulatorConfig.host)&&(u.credentials="include"),$D.fetch()(await HD(n,n.config.apiHost,t,o),u)})}async function WD(n,e,t){n._canInitEmulator=!1;const r={...kY,...e};try{const i=new OY(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Wy(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wy(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Wy(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Wy(n,"user-disabled",a);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw LA(n,h,u);Wo(n,h)}}catch(i){if(i instanceof Qo)throw i;Wo(n,"network-request-failed",{message:String(i)})}}async function LY(n,e,t,r,i={}){const s=await M0(n,e,t,r,i);return"mfaPendingCredential"in s&&Wo(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function HD(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?DA(n.config,i):`${n.config.apiScheme}://${i}`;return MY.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class OY{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Za(this.auth,"network-request-failed")),NY.get())})}}function Wy(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Za(n,e,r);return i.customData._tokenResponse=t,i}async function DY(n,e){return M0(n,"POST","/v1/accounts:delete",e)}async function _x(n,e){return M0(n,"POST","/v1/accounts:lookup",e)}function fm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FY(n,e=!1){const t=li(n),r=await t.getIdToken(e),i=jA(r);Ut(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:fm(eS(i.auth_time)),issuedAtTime:fm(eS(i.iat)),expirationTime:fm(eS(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function eS(n){return Number(n)*1e3}function jA(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return w_("JWT malformed, contained fewer than 3 sections"),null;try{const i=AD(t);return i?JSON.parse(i):(w_("Failed to decode base64 JWT payload"),null)}catch(i){return w_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rM(n){const e=jA(n);return Ut(e,"internal-error"),Ut(typeof e.exp<"u","internal-error"),Ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function rp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Qo&&jY(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function jY({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class VY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class IT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fm(this.lastLoginAt),this.creationTime=fm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xx(n){const e=n.auth,t=await n.getIdToken(),r=await rp(n,_x(e,{idToken:t}));Ut(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?KD(i.providerUserInfo):[],a=BY(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!a?.length,u=o?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new IT(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function GY(n){const e=li(n);await xx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KD(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function UY(n,e){const t=await WD(n,{},async()=>{const r=e1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await HD(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&ad(n.emulatorConfig.host)&&(l.credentials="include"),$D.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zY(n,e){return M0(n,"POST","/v2/accounts:revokeToken",FA(n,e))}class Vf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ut(e.idToken,"internal-error"),Ut(typeof e.idToken<"u","internal-error"),Ut(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ut(e.length!==0,"internal-error");const t=rM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await UY(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Vf;return r&&(Ut(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ut(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ut(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vf,this.toJSON())}_performRefresh(){return vl("not implemented")}}function Sc(n,e){Ut(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ha{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new VY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new IT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await rp(this,this.stsTokenManager.getToken(this.auth,e));return Ut(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FY(this,e)}reload(){return GY(this)}_assign(e){this!==e&&(Ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ha({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xx(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pa(this.auth.app))return Promise.reject(Sh(this.auth));const e=await this.getIdToken();return await rp(this,DY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:f,emailVerified:g,isAnonymous:p,providerData:x,stsTokenManager:v}=t;Ut(f&&v,e,"internal-error");const w=Vf.fromJSON(this.name,v);Ut(typeof f=="string",e,"internal-error"),Sc(r,e.name),Sc(i,e.name),Ut(typeof g=="boolean",e,"internal-error"),Ut(typeof p=="boolean",e,"internal-error"),Sc(s,e.name),Sc(a,e.name),Sc(o,e.name),Sc(l,e.name),Sc(u,e.name),Sc(h,e.name);const T=new Ha({uid:f,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:h});return x&&Array.isArray(x)&&(T.providerData=x.map(I=>({...I}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new Vf;i.updateFromServerResponse(t);const s=new Ha({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xx(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ut(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?KD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new Vf;o.updateFromIdToken(r);const l=new Ha({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new IT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const iM=new Map;function El(n){jl(n instanceof Function,"Expected a class definition");let e=iM.get(n);return e?(jl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iM.set(n,e),e)}class YD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}YD.type="NONE";const sM=YD;function S_(n,e,t){return`firebase:${n}:${e}:${t}`}class Gf{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=S_(this.userKey,i.apiKey,s),this.fullPersistenceKey=S_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _x(this.auth,{idToken:e}).catch(()=>{});return t?Ha._fromGetAccountInfoResponse(this.auth,t,e):null}return Ha._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Gf(El(sM),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||El(sM);const a=S_(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const g=await _x(e,{idToken:h}).catch(()=>{});if(!g)break;f=await Ha._fromGetAccountInfoResponse(e,g,h)}else f=Ha._fromJSON(e,h);u!==s&&(o=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Gf(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Gf(s,e,r))}}function aM(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e6(e))return"Blackberry";if(t6(e))return"Webos";if(qD(e))return"Safari";if((e.includes("chrome/")||ZD(e))&&!e.includes("edge/"))return"Chrome";if(JD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function XD(n=Yr()){return/firefox\//i.test(n)}function qD(n=Yr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZD(n=Yr()){return/crios\//i.test(n)}function QD(n=Yr()){return/iemobile/i.test(n)}function JD(n=Yr()){return/android/i.test(n)}function e6(n=Yr()){return/blackberry/i.test(n)}function t6(n=Yr()){return/webos/i.test(n)}function VA(n=Yr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $Y(n=Yr()){return VA(n)&&!!window.navigator?.standalone}function WY(){return lK()&&document.documentMode===10}function n6(n=Yr()){return VA(n)||JD(n)||t6(n)||e6(n)||/windows phone/i.test(n)||QD(n)}function r6(n,e=[]){let t;switch(n){case"Browser":t=aM(Yr());break;case"Worker":t=`${aM(Yr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${od}/${r}`}class HY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function KY(n,e={}){return M0(n,"GET","/v2/passwordPolicy",FA(n,e))}const YY=6;class XY{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??YY,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class qY{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oM(this),this.idTokenSubscription=new oM(this),this.beforeStateQueue=new HY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=El(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Gf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _x(this,{idToken:e}),r=await Ha._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pa(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!s||s===a)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xx(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pa(this.app))return Promise.reject(Sh(this));const t=e?li(e):null;return t&&Ut(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pa(this.app)?Promise.reject(Sh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pa(this.app)?Promise.reject(Sh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(El(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KY(this),t=new XY(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jp("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await zY(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&El(e)||this._popupRedirectResolver;Ut(t,this,"argument-error"),this.redirectPersistenceManager=await Gf.create(this,[El(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=r6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(pa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AY(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Hv(n){return li(n)}class oM{constructor(e){this.auth=e,this.observer=null,this.addObserver=gK(t=>this.observer=t)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let GA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZY(n){GA=n}function QY(n){return GA.loadJS(n)}function JY(){return GA.gapiScript}function eX(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function tX(n,e){const t=Wv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(jh(s,e??{}))return i;Wo(i,"already-initialized")}return t.initialize({options:e})}function nX(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(El);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function rX(n,e,t){const r=Hv(n);Ut(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=i6(e),{host:a,port:o}=iX(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ut(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ut(jh(u,r.config.emulator)&&jh(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ad(a)?(CA(`${s}//${a}${l}`),PA("Auth",!0)):sX()}function i6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iX(n){const e=i6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:lM(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:lM(a)}}}function lM(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sX(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class s6{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vl("not implemented")}_getIdTokenResponse(e){return vl("not implemented")}_linkToIdToken(e,t){return vl("not implemented")}_getReauthenticationResolver(e){return vl("not implemented")}}async function Bf(n,e){return LY(n,"POST","/v1/accounts:signInWithIdp",FA(n,e))}const aX="http://localhost";class Gh extends s6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Gh(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Bf(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Bf(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bf(e,t)}buildRequest(){const e={requestUri:aX,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=e1(t)}return e}}class BA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class n1 extends BA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Nc extends n1{constructor(){super("facebook.com")}static credential(e){return Gh._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nc.credential(e.oauthAccessToken)}catch{return null}}}Nc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nc.PROVIDER_ID="facebook.com";class xl extends n1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gh._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return xl.credential(t,r)}catch{return null}}}xl.GOOGLE_SIGN_IN_METHOD="google.com";xl.PROVIDER_ID="google.com";class Lc extends n1{constructor(){super("github.com")}static credential(e){return Gh._fromParams({providerId:Lc.PROVIDER_ID,signInMethod:Lc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lc.credentialFromTaggedObject(e)}static credentialFromError(e){return Lc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lc.credential(e.oauthAccessToken)}catch{return null}}}Lc.GITHUB_SIGN_IN_METHOD="github.com";Lc.PROVIDER_ID="github.com";class Oc extends n1{constructor(){super("twitter.com")}static credential(e,t){return Gh._fromParams({providerId:Oc.PROVIDER_ID,signInMethod:Oc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Oc.credentialFromTaggedObject(e)}static credentialFromError(e){return Oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Oc.credential(t,r)}catch{return null}}}Oc.TWITTER_SIGN_IN_METHOD="twitter.com";Oc.PROVIDER_ID="twitter.com";class o0{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ha._fromIdTokenResponse(e,r,i),a=cM(r);return new o0({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=cM(r);return new o0({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function cM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class vx extends Qo{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vx.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new vx(e,t,r,i)}}function a6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vx._fromErrorAndOperation(n,s,e,r):s})}async function oX(n,e,t=!1){const r=await rp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return o0._forOperation(n,"link",r)}async function lX(n,e,t=!1){const{auth:r}=n;if(pa(r.app))return Promise.reject(Sh(r));const i="reauthenticate";try{const s=await rp(n,a6(r,i,e,n),t);Ut(s.idToken,r,"internal-error");const a=jA(s.idToken);Ut(a,r,"internal-error");const{sub:o}=a;return Ut(n.uid===o,r,"user-mismatch"),o0._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Wo(r,"user-mismatch"),s}}async function cX(n,e,t=!1){if(pa(n.app))return Promise.reject(Sh(n));const r="signIn",i=await a6(n,r,e),s=await o0._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function uX(n,e,t,r){return li(n).onIdTokenChanged(e,t,r)}function hX(n,e,t){return li(n).beforeAuthStateChanged(e,t)}function dX(n,e,t,r){return li(n).onAuthStateChanged(e,t,r)}function fX(n){return li(n).signOut()}const Ex="__sak";class o6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ex,"1"),this.storage.removeItem(Ex),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const gX=1e3,mX=10;class l6 extends o6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=n6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);WY()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mX):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},gX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}l6.type="LOCAL";const pX=l6;class c6 extends o6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}c6.type="SESSION";const u6=c6;function yX(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Kv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Kv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await yX(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kv.receivers=[];function UA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class _X{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=UA("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Oo(){return window}function xX(n){Oo().location.href=n}function h6(){return typeof Oo().WorkerGlobalScope<"u"&&typeof Oo().importScripts=="function"}async function vX(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EX(){return navigator?.serviceWorker?.controller||null}function wX(){return h6()?self:null}const d6="firebaseLocalStorageDb",SX=1,wx="firebaseLocalStorage",f6="fbase_key";class r1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yv(n,e){return n.transaction([wx],e?"readwrite":"readonly").objectStore(wx)}function TX(){const n=indexedDB.deleteDatabase(d6);return new r1(n).toPromise()}function AT(){const n=indexedDB.open(d6,SX);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(wx,{keyPath:f6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(wx)?e(r):(r.close(),await TX(),e(await AT()))})})}async function uM(n,e,t){const r=Yv(n,!0).put({[f6]:e,value:t});return new r1(r).toPromise()}async function IX(n,e){const t=Yv(n,!1).get(e),r=await new r1(t).toPromise();return r===void 0?null:r.value}function hM(n,e){const t=Yv(n,!0).delete(e);return new r1(t).toPromise()}const AX=800,bX=3;class g6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await AT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return h6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kv._getInstance(wX()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vX(),!this.activeServiceWorker)return;this.sender=new _X(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EX()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await AT();return await uM(e,Ex,"1"),await hM(e,Ex),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uM(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>IX(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hM(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Yv(i,!1).getAll();return new r1(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g6.type="LOCAL";const RX=g6;new t1(3e4,6e4);function m6(n,e){return e?El(e):(Ut(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class zA extends s6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CX(n){return cX(n.auth,new zA(n),n.bypassAuthState)}function PX(n){const{auth:e,user:t}=n;return Ut(t,e,"internal-error"),lX(t,new zA(n),n.bypassAuthState)}async function kX(n){const{auth:e,user:t}=n;return Ut(t,e,"internal-error"),oX(t,new zA(n),n.bypassAuthState)}class p6{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CX;case"linkViaPopup":case"linkViaRedirect":return kX;case"reauthViaPopup":case"reauthViaRedirect":return PX;default:Wo(this.auth,"internal-error")}}resolve(e){jl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const MX=new t1(2e3,1e4);async function NX(n,e,t){if(pa(n.app))return Promise.reject(Za(n,"operation-not-supported-in-this-environment"));const r=Hv(n);bY(n,e,BA);const i=m6(r,t);return new ph(r,"signInViaPopup",e,i).executeNotNull()}class ph extends p6{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ph.currentPopupAction&&ph.currentPopupAction.cancel(),ph.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ut(e,this.auth,"internal-error"),e}async onExecution(){jl(this.filter.length===1,"Popup operations only handle one event");const e=UA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Za(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Za(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ph.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Za(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MX.get())};e()}}ph.currentPopupAction=null;const LX="pendingRedirect",T_=new Map;class OX extends p6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=T_.get(this.auth._key());if(!e){try{const r=await DX(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}T_.set(this.auth._key(),e)}return this.bypassAuthState||T_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DX(n,e){const t=VX(e),r=jX(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function FX(n,e){T_.set(n._key(),e)}function jX(n){return El(n._redirectPersistence)}function VX(n){return S_(LX,n.config.apiKey,n.name)}async function GX(n,e,t=!1){if(pa(n.app))return Promise.reject(Sh(n));const r=Hv(n),i=m6(r,e),a=await new OX(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const BX=600*1e3;class UX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zX(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!y6(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Za(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BX&&this.cachedEventUids.clear(),this.cachedEventUids.has(dM(e))}saveEventToCache(e){this.cachedEventUids.add(dM(e)),this.lastProcessedEventTime=Date.now()}}function dM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function y6({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function zX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return y6(n);default:return!1}}async function $X(n,e={}){return M0(n,"GET","/v1/projects",e)}const WX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HX=/^https?/;async function KX(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $X(n);for(const t of e)try{if(YX(t))return}catch{}Wo(n,"unauthorized-domain")}function YX(n){const e=TT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!HX.test(t))return!1;if(WX.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const XX=new t1(3e4,6e4);function fM(){const n=Oo().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qX(n){return new Promise((e,t)=>{function r(){fM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fM(),t(Za(n,"network-request-failed"))},timeout:XX.get()})}if(Oo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oo().gapi?.load)r();else{const i=eX("iframefcb");return Oo()[i]=()=>{gapi.load?r():t(Za(n,"network-request-failed"))},QY(`${JY()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw I_=null,e})}let I_=null;function ZX(n){return I_=I_||qX(n),I_}const QX=new t1(5e3,15e3),JX="__/auth/iframe",eq="emulator/auth/iframe",tq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rq(n){const e=n.config;Ut(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?DA(e,eq):`https://${n.config.authDomain}/${JX}`,r={apiKey:e.apiKey,appName:n.name,v:od},i=nq.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${e1(r).slice(1)}`}async function iq(n){const e=await ZX(n),t=Oo().gapi;return Ut(t,n,"internal-error"),e.open({where:document.body,url:rq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Za(n,"network-request-failed"),o=Oo().setTimeout(()=>{s(a)},QX.get());function l(){Oo().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}const sq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aq=500,oq=600,lq="_blank",cq="http://localhost";class gM{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uq(n,e,t,r=aq,i=oq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...sq,width:r.toString(),height:i.toString(),top:s,left:a},u=Yr().toLowerCase();t&&(o=ZD(u)?lq:t),XD(u)&&(e=e||cq,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[p,x])=>`${g}${p}=${x},`,"");if($Y(u)&&o!=="_self")return hq(e||"",o),new gM(null);const f=window.open(e||"",o,h);Ut(f,n,"popup-blocked");try{f.focus()}catch{}return new gM(f)}function hq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const dq="__/auth/handler",fq="emulator/auth/handler",gq=encodeURIComponent("fac");async function mM(n,e,t,r,i,s){Ut(n.config.authDomain,n,"auth-domain-config-required"),Ut(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:od,eventId:i};if(e instanceof BA){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",fK(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof n1){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await n._getAppCheckToken(),u=l?`#${gq}=${encodeURIComponent(l)}`:"";return`${mq(n)}?${e1(o).slice(1)}${u}`}function mq({config:n}){return n.emulator?DA(n,fq):`https://${n.authDomain}/${dq}`}const tS="webStorageSupport";class pq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u6,this._completeRedirectFn=GX,this._overrideRedirectResult=FX}async _openPopup(e,t,r,i){jl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await mM(e,t,r,TT(),i);return uq(e,s,UA())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await mM(e,t,r,TT(),i);return xX(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(jl(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await iq(e),r=new UX(e);return t.register("authEvent",i=>(Ut(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tS,{type:tS},i=>{const s=i?.[0]?.[tS];s!==void 0&&t(!!s),Wo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return n6()||qD()||VA()}}const yq=pq;var pM="@firebase/auth",yM="1.12.0";class _q{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vq(n){Vh(new su("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Ut(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r6(n)},u=new qY(r,i,s,l);return nX(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Vh(new su("auth-internal",e=>{const t=Hv(e.getProvider("auth").getImmediate());return(r=>new _q(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lo(pM,yM,xq(n)),Lo(pM,yM,"esm2020")}const Eq=300,wq=kD("authIdTokenMaxAge")||Eq;let _M=null;const Sq=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>wq)return;const i=t?.token;_M!==i&&(_M=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Tq(n=NA()){const e=Wv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tX(n,{popupRedirectResolver:yq,persistence:[RX,pX,u6]}),r=kD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Sq(s.toString());hX(t,a,()=>a(t.currentUser)),uX(t,o=>a(o))}}const i=RD("auth");return i&&rX(t,`http://${i}`),t}function Iq(){return document.getElementsByTagName("head")?.[0]??document}ZY({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Za("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Iq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vq("Browser");var Aq="firebase",bq="12.7.0";Lo(Aq,bq,"app");var xM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qc,_6;(function(){var n;function e(k,P){function M(){}M.prototype=P.prototype,k.F=P.prototype,k.prototype=new M,k.prototype.constructor=k,k.D=function(j,O,W){for(var F=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)F[Te-2]=arguments[Te];return P.prototype[O].apply(j,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,P,M){M||(M=0);const j=Array(16);if(typeof P=="string")for(var O=0;O<16;++O)j[O]=P.charCodeAt(M++)|P.charCodeAt(M++)<<8|P.charCodeAt(M++)<<16|P.charCodeAt(M++)<<24;else for(O=0;O<16;++O)j[O]=P[M++]|P[M++]<<8|P[M++]<<16|P[M++]<<24;P=k.g[0],M=k.g[1],O=k.g[2];let W=k.g[3],F;F=P+(W^M&(O^W))+j[0]+3614090360&4294967295,P=M+(F<<7&4294967295|F>>>25),F=W+(O^P&(M^O))+j[1]+3905402710&4294967295,W=P+(F<<12&4294967295|F>>>20),F=O+(M^W&(P^M))+j[2]+606105819&4294967295,O=W+(F<<17&4294967295|F>>>15),F=M+(P^O&(W^P))+j[3]+3250441966&4294967295,M=O+(F<<22&4294967295|F>>>10),F=P+(W^M&(O^W))+j[4]+4118548399&4294967295,P=M+(F<<7&4294967295|F>>>25),F=W+(O^P&(M^O))+j[5]+1200080426&4294967295,W=P+(F<<12&4294967295|F>>>20),F=O+(M^W&(P^M))+j[6]+2821735955&4294967295,O=W+(F<<17&4294967295|F>>>15),F=M+(P^O&(W^P))+j[7]+4249261313&4294967295,M=O+(F<<22&4294967295|F>>>10),F=P+(W^M&(O^W))+j[8]+1770035416&4294967295,P=M+(F<<7&4294967295|F>>>25),F=W+(O^P&(M^O))+j[9]+2336552879&4294967295,W=P+(F<<12&4294967295|F>>>20),F=O+(M^W&(P^M))+j[10]+4294925233&4294967295,O=W+(F<<17&4294967295|F>>>15),F=M+(P^O&(W^P))+j[11]+2304563134&4294967295,M=O+(F<<22&4294967295|F>>>10),F=P+(W^M&(O^W))+j[12]+1804603682&4294967295,P=M+(F<<7&4294967295|F>>>25),F=W+(O^P&(M^O))+j[13]+4254626195&4294967295,W=P+(F<<12&4294967295|F>>>20),F=O+(M^W&(P^M))+j[14]+2792965006&4294967295,O=W+(F<<17&4294967295|F>>>15),F=M+(P^O&(W^P))+j[15]+1236535329&4294967295,M=O+(F<<22&4294967295|F>>>10),F=P+(O^W&(M^O))+j[1]+4129170786&4294967295,P=M+(F<<5&4294967295|F>>>27),F=W+(M^O&(P^M))+j[6]+3225465664&4294967295,W=P+(F<<9&4294967295|F>>>23),F=O+(P^M&(W^P))+j[11]+643717713&4294967295,O=W+(F<<14&4294967295|F>>>18),F=M+(W^P&(O^W))+j[0]+3921069994&4294967295,M=O+(F<<20&4294967295|F>>>12),F=P+(O^W&(M^O))+j[5]+3593408605&4294967295,P=M+(F<<5&4294967295|F>>>27),F=W+(M^O&(P^M))+j[10]+38016083&4294967295,W=P+(F<<9&4294967295|F>>>23),F=O+(P^M&(W^P))+j[15]+3634488961&4294967295,O=W+(F<<14&4294967295|F>>>18),F=M+(W^P&(O^W))+j[4]+3889429448&4294967295,M=O+(F<<20&4294967295|F>>>12),F=P+(O^W&(M^O))+j[9]+568446438&4294967295,P=M+(F<<5&4294967295|F>>>27),F=W+(M^O&(P^M))+j[14]+3275163606&4294967295,W=P+(F<<9&4294967295|F>>>23),F=O+(P^M&(W^P))+j[3]+4107603335&4294967295,O=W+(F<<14&4294967295|F>>>18),F=M+(W^P&(O^W))+j[8]+1163531501&4294967295,M=O+(F<<20&4294967295|F>>>12),F=P+(O^W&(M^O))+j[13]+2850285829&4294967295,P=M+(F<<5&4294967295|F>>>27),F=W+(M^O&(P^M))+j[2]+4243563512&4294967295,W=P+(F<<9&4294967295|F>>>23),F=O+(P^M&(W^P))+j[7]+1735328473&4294967295,O=W+(F<<14&4294967295|F>>>18),F=M+(W^P&(O^W))+j[12]+2368359562&4294967295,M=O+(F<<20&4294967295|F>>>12),F=P+(M^O^W)+j[5]+4294588738&4294967295,P=M+(F<<4&4294967295|F>>>28),F=W+(P^M^O)+j[8]+2272392833&4294967295,W=P+(F<<11&4294967295|F>>>21),F=O+(W^P^M)+j[11]+1839030562&4294967295,O=W+(F<<16&4294967295|F>>>16),F=M+(O^W^P)+j[14]+4259657740&4294967295,M=O+(F<<23&4294967295|F>>>9),F=P+(M^O^W)+j[1]+2763975236&4294967295,P=M+(F<<4&4294967295|F>>>28),F=W+(P^M^O)+j[4]+1272893353&4294967295,W=P+(F<<11&4294967295|F>>>21),F=O+(W^P^M)+j[7]+4139469664&4294967295,O=W+(F<<16&4294967295|F>>>16),F=M+(O^W^P)+j[10]+3200236656&4294967295,M=O+(F<<23&4294967295|F>>>9),F=P+(M^O^W)+j[13]+681279174&4294967295,P=M+(F<<4&4294967295|F>>>28),F=W+(P^M^O)+j[0]+3936430074&4294967295,W=P+(F<<11&4294967295|F>>>21),F=O+(W^P^M)+j[3]+3572445317&4294967295,O=W+(F<<16&4294967295|F>>>16),F=M+(O^W^P)+j[6]+76029189&4294967295,M=O+(F<<23&4294967295|F>>>9),F=P+(M^O^W)+j[9]+3654602809&4294967295,P=M+(F<<4&4294967295|F>>>28),F=W+(P^M^O)+j[12]+3873151461&4294967295,W=P+(F<<11&4294967295|F>>>21),F=O+(W^P^M)+j[15]+530742520&4294967295,O=W+(F<<16&4294967295|F>>>16),F=M+(O^W^P)+j[2]+3299628645&4294967295,M=O+(F<<23&4294967295|F>>>9),F=P+(O^(M|~W))+j[0]+4096336452&4294967295,P=M+(F<<6&4294967295|F>>>26),F=W+(M^(P|~O))+j[7]+1126891415&4294967295,W=P+(F<<10&4294967295|F>>>22),F=O+(P^(W|~M))+j[14]+2878612391&4294967295,O=W+(F<<15&4294967295|F>>>17),F=M+(W^(O|~P))+j[5]+4237533241&4294967295,M=O+(F<<21&4294967295|F>>>11),F=P+(O^(M|~W))+j[12]+1700485571&4294967295,P=M+(F<<6&4294967295|F>>>26),F=W+(M^(P|~O))+j[3]+2399980690&4294967295,W=P+(F<<10&4294967295|F>>>22),F=O+(P^(W|~M))+j[10]+4293915773&4294967295,O=W+(F<<15&4294967295|F>>>17),F=M+(W^(O|~P))+j[1]+2240044497&4294967295,M=O+(F<<21&4294967295|F>>>11),F=P+(O^(M|~W))+j[8]+1873313359&4294967295,P=M+(F<<6&4294967295|F>>>26),F=W+(M^(P|~O))+j[15]+4264355552&4294967295,W=P+(F<<10&4294967295|F>>>22),F=O+(P^(W|~M))+j[6]+2734768916&4294967295,O=W+(F<<15&4294967295|F>>>17),F=M+(W^(O|~P))+j[13]+1309151649&4294967295,M=O+(F<<21&4294967295|F>>>11),F=P+(O^(M|~W))+j[4]+4149444226&4294967295,P=M+(F<<6&4294967295|F>>>26),F=W+(M^(P|~O))+j[11]+3174756917&4294967295,W=P+(F<<10&4294967295|F>>>22),F=O+(P^(W|~M))+j[2]+718787259&4294967295,O=W+(F<<15&4294967295|F>>>17),F=M+(W^(O|~P))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+P&4294967295,k.g[1]=k.g[1]+(O+(F<<21&4294967295|F>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+W&4294967295}r.prototype.v=function(k,P){P===void 0&&(P=k.length);const M=P-this.blockSize,j=this.C;let O=this.h,W=0;for(;W<P;){if(O==0)for(;W<=M;)i(this,k,W),W+=this.blockSize;if(typeof k=="string"){for(;W<P;)if(j[O++]=k.charCodeAt(W++),O==this.blockSize){i(this,j),O=0;break}}else for(;W<P;)if(j[O++]=k[W++],O==this.blockSize){i(this,j),O=0;break}}this.h=O,this.o+=P},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var P=1;P<k.length-8;++P)k[P]=0;P=this.o*8;for(var M=k.length-8;M<k.length;++M)k[M]=P&255,P/=256;for(this.v(k),k=Array(16),P=0,M=0;M<4;++M)for(let j=0;j<32;j+=8)k[P++]=this.g[M]>>>j&255;return k};function s(k,P){var M=o;return Object.prototype.hasOwnProperty.call(M,k)?M[k]:M[k]=P(k)}function a(k,P){this.h=P;const M=[];let j=!0;for(let O=k.length-1;O>=0;O--){const W=k[O]|0;j&&W==P||(M[O]=W,j=!1)}this.g=M}var o={};function l(k){return-128<=k&&k<128?s(k,function(P){return new a([P|0],P<0?-1:0)}):new a([k|0],k<0?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return f;if(k<0)return w(u(-k));const P=[];let M=1;for(let j=0;k>=M;j++)P[j]=k/M|0,M*=4294967296;return new a(P,0)}function h(k,P){if(k.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(k.charAt(0)=="-")return w(h(k.substring(1),P));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=u(Math.pow(P,8));let j=f;for(let W=0;W<k.length;W+=8){var O=Math.min(8,k.length-W);const F=parseInt(k.substring(W,W+O),P);O<8?(O=u(Math.pow(P,O)),j=j.j(O).add(u(F))):(j=j.j(M),j=j.add(u(F)))}return j}var f=l(0),g=l(1),p=l(16777216);n=a.prototype,n.m=function(){if(v(this))return-w(this).m();let k=0,P=1;for(let M=0;M<this.g.length;M++){const j=this.i(M);k+=(j>=0?j:4294967296+j)*P,P*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(v(this))return"-"+w(this).toString(k);const P=u(Math.pow(k,6));var M=this;let j="";for(;;){const O=N(M,P).g;M=T(M,O.j(P));let W=((M.g.length>0?M.g[0]:M.h)>>>0).toString(k);if(M=O,x(M))return W+j;for(;W.length<6;)W="0"+W;j=W+j}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(let P=0;P<k.g.length;P++)if(k.g[P]!=0)return!1;return!0}function v(k){return k.h==-1}n.l=function(k){return k=T(this,k),v(k)?-1:x(k)?0:1};function w(k){const P=k.g.length,M=[];for(let j=0;j<P;j++)M[j]=~k.g[j];return new a(M,~k.h).add(g)}n.abs=function(){return v(this)?w(this):this},n.add=function(k){const P=Math.max(this.g.length,k.g.length),M=[];let j=0;for(let O=0;O<=P;O++){let W=j+(this.i(O)&65535)+(k.i(O)&65535),F=(W>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);j=F>>>16,W&=65535,F&=65535,M[O]=F<<16|W}return new a(M,M[M.length-1]&-2147483648?-1:0)};function T(k,P){return k.add(w(P))}n.j=function(k){if(x(this)||x(k))return f;if(v(this))return v(k)?w(this).j(w(k)):w(w(this).j(k));if(v(k))return w(this.j(w(k)));if(this.l(p)<0&&k.l(p)<0)return u(this.m()*k.m());const P=this.g.length+k.g.length,M=[];for(var j=0;j<2*P;j++)M[j]=0;for(j=0;j<this.g.length;j++)for(let O=0;O<k.g.length;O++){const W=this.i(j)>>>16,F=this.i(j)&65535,Te=k.i(O)>>>16,Me=k.i(O)&65535;M[2*j+2*O]+=F*Me,I(M,2*j+2*O),M[2*j+2*O+1]+=W*Me,I(M,2*j+2*O+1),M[2*j+2*O+1]+=F*Te,I(M,2*j+2*O+1),M[2*j+2*O+2]+=W*Te,I(M,2*j+2*O+2)}for(k=0;k<P;k++)M[k]=M[2*k+1]<<16|M[2*k];for(k=P;k<2*P;k++)M[k]=0;return new a(M,0)};function I(k,P){for(;(k[P]&65535)!=k[P];)k[P+1]+=k[P]>>>16,k[P]&=65535,P++}function A(k,P){this.g=k,this.h=P}function N(k,P){if(x(P))throw Error("division by zero");if(x(k))return new A(f,f);if(v(k))return P=N(w(k),P),new A(w(P.g),w(P.h));if(v(P))return P=N(k,w(P)),new A(w(P.g),P.h);if(k.g.length>30){if(v(k)||v(P))throw Error("slowDivide_ only works with positive integers.");for(var M=g,j=P;j.l(k)<=0;)M=D(M),j=D(j);var O=B(M,1),W=B(j,1);for(j=B(j,2),M=B(M,2);!x(j);){var F=W.add(j);F.l(k)<=0&&(O=O.add(M),W=F),j=B(j,1),M=B(M,1)}return P=T(k,O.j(P)),new A(O,P)}for(O=f;k.l(P)>=0;){for(M=Math.max(1,Math.floor(k.m()/P.m())),j=Math.ceil(Math.log(M)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),W=u(M),F=W.j(P);v(F)||F.l(k)>0;)M-=j,W=u(M),F=W.j(P);x(W)&&(W=g),O=O.add(W),k=T(k,F)}return new A(O,k)}n.B=function(k){return N(this,k).h},n.and=function(k){const P=Math.max(this.g.length,k.g.length),M=[];for(let j=0;j<P;j++)M[j]=this.i(j)&k.i(j);return new a(M,this.h&k.h)},n.or=function(k){const P=Math.max(this.g.length,k.g.length),M=[];for(let j=0;j<P;j++)M[j]=this.i(j)|k.i(j);return new a(M,this.h|k.h)},n.xor=function(k){const P=Math.max(this.g.length,k.g.length),M=[];for(let j=0;j<P;j++)M[j]=this.i(j)^k.i(j);return new a(M,this.h^k.h)};function D(k){const P=k.g.length+1,M=[];for(let j=0;j<P;j++)M[j]=k.i(j)<<1|k.i(j-1)>>>31;return new a(M,k.h)}function B(k,P){const M=P>>5;P%=32;const j=k.g.length-M,O=[];for(let W=0;W<j;W++)O[W]=P>0?k.i(W+M)>>>P|k.i(W+M+1)<<32-P:k.i(W+M);return new a(O,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_6=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Qc=a}).apply(typeof xM<"u"?xM:typeof self<"u"?self:typeof window<"u"?window:{});var Hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var x6,Qg,v6,A_,bT,E6,w6,S6;(function(){var n,e=Object.defineProperty;function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hy=="object"&&Hy];for(var R=0;R<_.length;++R){var L=_[R];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=t(this);function i(_,R){if(R)e:{var L=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var fe=_[H];if(!(fe in L))break e;L=L[fe]}_=_[_.length-1],H=L[_],R=R(H),R!=H&&R!=null&&e(L,_,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(R){var L=[],H;for(H in R)Object.prototype.hasOwnProperty.call(R,H)&&L.push([H,R[H]]);return L}});var s=s||{},a=this||self;function o(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function l(_,R,L){return _.call.apply(_.bind,arguments)}function u(_,R,L){return u=l,u.apply(null,arguments)}function h(_,R){var L=Array.prototype.slice.call(arguments,1);return function(){var H=L.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function f(_,R){function L(){}L.prototype=R.prototype,_.Z=R.prototype,_.prototype=new L,_.prototype.constructor=_,_.Ob=function(H,fe,Ee){for(var rt=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)rt[Kt-2]=arguments[Kt];return R.prototype[fe].apply(H,rt)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function p(_){const R=_.length;if(R>0){const L=Array(R);for(let H=0;H<R;H++)L[H]=_[H];return L}return[]}function x(_,R){for(let H=1;H<arguments.length;H++){const fe=arguments[H];var L=typeof fe;if(L=L!="object"?L:fe?Array.isArray(fe)?"array":L:"null",L=="array"||L=="object"&&typeof fe.length=="number"){L=_.length||0;const Ee=fe.length||0;_.length=L+Ee;for(let rt=0;rt<Ee;rt++)_[L+rt]=fe[rt]}else _.push(fe)}}class v{constructor(R,L){this.i=R,this.j=L,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function w(_){a.setTimeout(()=>{throw _},0)}function T(){var _=k;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class I{constructor(){this.h=this.g=null}add(R,L){const H=A.get();H.set(R,L),this.h?this.h.next=H:this.g=H,this.h=H}}var A=new v(()=>new N,_=>_.reset());class N{constructor(){this.next=this.g=this.h=null}set(R,L){this.h=R,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let D,B=!1,k=new I,P=()=>{const _=Promise.resolve(void 0);D=()=>{_.then(M)}};function M(){for(var _;_=T();){try{_.h.call(_.g)}catch(L){w(L)}var R=A;R.j(_),R.h<100&&(R.h++,_.next=R.g,R.g=_)}B=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const L=()=>{};a.addEventListener("test",L,R),a.removeEventListener("test",L,R)}catch{}return _})();function F(_){return/^[\s\xa0]*$/.test(_)}function Te(_,R){O.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,R)}f(Te,O),Te.prototype.init=function(_,R){const L=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget,R||(L=="mouseover"?R=_.fromElement:L=="mouseout"&&(R=_.toElement)),this.relatedTarget=R,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),Le=0;function be(_,R,L,H,fe){this.listener=_,this.proxy=null,this.src=R,this.type=L,this.capture=!!H,this.ha=fe,this.key=++Le,this.da=this.fa=!1}function ce(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Re(_,R,L){for(const H in _)R.call(L,_[H],H,_)}function Ie(_,R){for(const L in _)R.call(void 0,_[L],L,_)}function ie(_){const R={};for(const L in _)R[L]=_[L];return R}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(_,R){let L,H;for(let fe=1;fe<arguments.length;fe++){H=arguments[fe];for(L in H)_[L]=H[L];for(let Ee=0;Ee<V.length;Ee++)L=V[Ee],Object.prototype.hasOwnProperty.call(H,L)&&(_[L]=H[L])}}function ee(_){this.src=_,this.g={},this.h=0}ee.prototype.add=function(_,R,L,H,fe){const Ee=_.toString();_=this.g[Ee],_||(_=this.g[Ee]=[],this.h++);const rt=de(_,R,H,fe);return rt>-1?(R=_[rt],L||(R.fa=!1)):(R=new be(R,this.src,Ee,!!H,fe),R.fa=L,_.push(R)),R};function ne(_,R){const L=R.type;if(L in _.g){var H=_.g[L],fe=Array.prototype.indexOf.call(H,R,void 0),Ee;(Ee=fe>=0)&&Array.prototype.splice.call(H,fe,1),Ee&&(ce(R),_.g[L].length==0&&(delete _.g[L],_.h--))}}function de(_,R,L,H){for(let fe=0;fe<_.length;++fe){const Ee=_[fe];if(!Ee.da&&Ee.listener==R&&Ee.capture==!!L&&Ee.ha==H)return fe}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Se={};function Fe(_,R,L,H,fe){if(Array.isArray(R)){for(let Ee=0;Ee<R.length;Ee++)Fe(_,R[Ee],L,H,fe);return null}return L=Xt(L),_&&_[Me]?_.J(R,L,o(H)?!!H.capture:!1,fe):je(_,R,L,!1,H,fe)}function je(_,R,L,H,fe,Ee){if(!R)throw Error("Invalid event type");const rt=o(fe)?!!fe.capture:!!fe;let Kt=zt(_);if(Kt||(_[De]=Kt=new ee(_)),L=Kt.add(R,L,H,rt,Ee),L.proxy)return L;if(H=Qe(),L.proxy=H,H.src=_,H.listener=L,_.addEventListener)W||(fe=rt),fe===void 0&&(fe=!1),_.addEventListener(R.toString(),H,fe);else if(_.attachEvent)_.attachEvent(Lt(R.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Qe(){function _(L){return R.call(_.src,_.listener,L)}const R=nn;return _}function gt(_,R,L,H,fe){if(Array.isArray(R))for(var Ee=0;Ee<R.length;Ee++)gt(_,R[Ee],L,H,fe);else H=o(H)?!!H.capture:!!H,L=Xt(L),_&&_[Me]?(_=_.i,Ee=String(R).toString(),Ee in _.g&&(R=_.g[Ee],L=de(R,L,H,fe),L>-1&&(ce(R[L]),Array.prototype.splice.call(R,L,1),R.length==0&&(delete _.g[Ee],_.h--)))):_&&(_=zt(_))&&(R=_.g[R.toString()],_=-1,R&&(_=de(R,L,H,fe)),(L=_>-1?R[_]:null)&&_t(L))}function _t(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[Me])ne(R.i,_);else{var L=_.type,H=_.proxy;R.removeEventListener?R.removeEventListener(L,H,_.capture):R.detachEvent?R.detachEvent(Lt(L),H):R.addListener&&R.removeListener&&R.removeListener(H),(L=zt(R))?(ne(L,_),L.h==0&&(L.src=null,R[De]=null)):ce(_)}}}function Lt(_){return _ in Se?Se[_]:Se[_]="on"+_}function nn(_,R){if(_.da)_=!0;else{R=new Te(R,this);const L=_.listener,H=_.ha||_.src;_.fa&&_t(_),_=L.call(H,R)}return _}function zt(_){return _=_[De],_ instanceof ee?_:null}var Oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xt(_){return typeof _=="function"?_:(_[Oe]||(_[Oe]=function(R){return _.handleEvent(R)}),_[Oe])}function Ae(){j.call(this),this.i=new ee(this),this.M=this,this.G=null}f(Ae,j),Ae.prototype[Me]=!0,Ae.prototype.removeEventListener=function(_,R,L,H){gt(this,_,R,L,H)};function ge(_,R){var L,H=_.G;if(H)for(L=[];H;H=H.G)L.push(H);if(_=_.M,H=R.type||R,typeof R=="string")R=new O(R,_);else if(R instanceof O)R.target=R.target||_;else{var fe=R;R=new O(H,_),Y(R,fe)}fe=!0;let Ee,rt;if(L)for(rt=L.length-1;rt>=0;rt--)Ee=R.g=L[rt],fe=C(Ee,H,!0,R)&&fe;if(Ee=R.g=_,fe=C(Ee,H,!0,R)&&fe,fe=C(Ee,H,!1,R)&&fe,L)for(rt=0;rt<L.length;rt++)Ee=R.g=L[rt],fe=C(Ee,H,!1,R)&&fe}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var _=this.i;for(const R in _.g){const L=_.g[R];for(let H=0;H<L.length;H++)ce(L[H]);delete _.g[R],_.h--}}this.G=null},Ae.prototype.J=function(_,R,L,H){return this.i.add(String(_),R,!1,L,H)},Ae.prototype.K=function(_,R,L,H){return this.i.add(String(_),R,!0,L,H)};function C(_,R,L,H){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();let fe=!0;for(let Ee=0;Ee<R.length;++Ee){const rt=R[Ee];if(rt&&!rt.da&&rt.capture==L){const Kt=rt.listener,Er=rt.ha||rt.src;rt.fa&&ne(_.i,rt),fe=Kt.call(Er,H)!==!1&&fe}}return fe&&!H.defaultPrevented}function wt(_,R){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:a.setTimeout(_,R||0)}function q(_){_.g=wt(()=>{_.g=null,_.i&&(_.i=!1,q(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class Ot extends j{constructor(R,L){super(),this.m=R,this.l=L,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(_){j.call(this),this.h=_,this.g={}}f(re,j);var z=[];function le(_){Re(_.g,function(R,L){this.g.hasOwnProperty(L)&&_t(R)},_),_.g={}}re.prototype.N=function(){re.Z.N.call(this),le(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Be=a.JSON.stringify,we=a.JSON.parse,Ze=class{stringify(_){return a.JSON.stringify(_,void 0)}parse(_){return a.JSON.parse(_,void 0)}};function ht(){}function Et(){}var St={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rt(){O.call(this,"d")}f(Rt,O);function en(){O.call(this,"c")}f(en,O);var jr={},Cs=null;function $i(){return Cs=Cs||new Ae}jr.Ia="serverreachability";function Wi(_){O.call(this,jr.Ia,_)}f(Wi,O);function Ar(_){const R=$i();ge(R,new Wi(R))}jr.STAT_EVENT="statevent";function ci(_,R){O.call(this,jr.STAT_EVENT,_),this.stat=R}f(ci,O);function Tn(_){const R=$i();ge(R,new ci(R,_))}jr.Ja="timingevent";function Ps(_,R){O.call(this,jr.Ja,_),this.size=R}f(Ps,O);function ks(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){_()},R)}function nr(){this.g=!0}nr.prototype.ua=function(){this.g=!1};function is(_,R,L,H,fe,Ee){_.info(function(){if(_.g)if(Ee){var rt="",Kt=Ee.split("&");for(let kn=0;kn<Kt.length;kn++){var Er=Kt[kn].split("=");if(Er.length>1){const Rr=Er[0];Er=Er[1];const Ds=Rr.split("_");rt=Ds.length>=2&&Ds[1]=="type"?rt+(Rr+"="+Er+"&"):rt+(Rr+"=redacted&")}}}else rt=null;else rt=Ee;return"XMLHTTP REQ ("+H+") [attempt "+fe+"]: "+R+`
`+L+`
`+rt})}function Vr(_,R,L,H,fe,Ee,rt){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+fe+"]: "+R+`
`+L+`
`+Ee+" "+rt})}function rr(_,R,L,H){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+Br(_,L)+(H?" "+H:"")})}function Gr(_,R){_.info(function(){return"TIMEOUT: "+R})}nr.prototype.info=function(){};function Br(_,R){if(!_.g)return R;if(!R)return null;try{const Ee=JSON.parse(R);if(Ee){for(_=0;_<Ee.length;_++)if(Array.isArray(Ee[_])){var L=Ee[_];if(!(L.length<2)){var H=L[1];if(Array.isArray(H)&&!(H.length<1)){var fe=H[0];if(fe!="noop"&&fe!="stop"&&fe!="close")for(let rt=1;rt<H.length;rt++)H[rt]=""}}}}return Be(Ee)}catch{return R}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},on={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hr;function xr(){}f(xr,ht),xr.prototype.g=function(){return new XMLHttpRequest},hr=new xr;function ss(_){return encodeURIComponent(String(_))}function U(_){var R=1;_=_.split(":");const L=[];for(;R>0&&_.length;)L.push(_.shift()),R--;return _.length&&L.push(_.join(":")),L}function Z(_,R,L,H){this.j=_,this.i=R,this.l=L,this.S=H||1,this.V=new re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new K}function K(){this.i=null,this.g="",this.h=!1}var X={},Q={};function J(_,R,L){_.M=1,_.A=el(ra(R)),_.u=L,_.R=!0,pe(_,null)}function pe(_,R){_.F=Date.now(),xe(_),_.B=ra(_.A);var L=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),eg(L.i,"t",H),_.C=0,L=_.j.L,_.h=new K,_.g=D1(_.j,L?R:null,!_.u),_.P>0&&(_.O=new Ot(u(_.Y,_,_.g),_.P)),R=_.V,L=_.g,H=_.ba;var fe="readystatechange";Array.isArray(fe)||(fe&&(z[0]=fe.toString()),fe=z);for(let Ee=0;Ee<fe.length;Ee++){const rt=Fe(L,fe[Ee],H||R.handleEvent,!1,R.h||R);if(!rt)break;R.g[rt.key]=rt}R=_.J?ie(_.J):{},_.u?(_.v||(_.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,R)):(_.v="GET",_.g.ea(_.B,_.v,null,R)),Ar(),is(_.i,_.v,_.B,_.l,_.S,_.u)}Z.prototype.ba=function(_){_=_.target;const R=this.O;R&&mo(_)==3?R.j():this.Y(_)},Z.prototype.Y=function(_){try{if(_==this.g)e:{const Kt=mo(this.g),Er=this.g.ya(),kn=this.g.ca();if(!(Kt<3)&&(Kt!=3||this.g&&(this.h.h||this.g.la()||L1(this.g)))){this.K||Kt!=4||Er==7||(Er==8||kn<=0?Ar(3):Ar(2)),et(this);var R=this.g.ca();this.X=R;var L=Pe(this);if(this.o=R==200,Vr(this.i,this.v,this.B,this.l,this.S,Kt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var H,fe=this.g;if((H=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(H)){var Ee=H;break t}}Ee=null}if(_=Ee)rr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ke(this,_);else{this.o=!1,this.m=3,Tn(12),He(this),ut(this);break e}}if(this.R){_=!0;let Rr;for(;!this.K&&this.C<L.length;)if(Rr=_e(this,L),Rr==Q){Kt==4&&(this.m=4,Tn(14),_=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==X){this.m=4,Tn(15),rr(this.i,this.l,L,"[Invalid Chunk]"),_=!1;break}else rr(this.i,this.l,Rr,null),Ke(this,Rr);if(me(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||L.length!=0||this.h.h||(this.m=1,Tn(16),_=!1),this.o=this.o&&_,!_)rr(this.i,this.l,L,"[Invalid Chunked Response]"),He(this),ut(this);else if(L.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Nu(rt),rt.P=!0,Tn(11))}}else rr(this.i,this.l,L,null),Ke(this,L);Kt==4&&He(this),this.o&&!this.K&&(Kt==4?Td(this.j,this):(this.o=!1,xe(this)))}else ng(this.g),R==400&&L.indexOf("Unknown SID")>0?(this.m=3,Tn(12)):(this.m=0,Tn(13)),He(this),ut(this)}}}catch{}};function Pe(_){if(!me(_))return _.g.la();const R=L1(_.g);if(R==="")return"";let L="";const H=R.length,fe=mo(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return He(_),ut(_),"";_.h.i=new a.TextDecoder}for(let Ee=0;Ee<H;Ee++)_.h.h=!0,L+=_.h.i.decode(R[Ee],{stream:!(fe&&Ee==H-1)});return R.length=0,_.h.g+=L,_.C=0,_.h.g}function me(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function _e(_,R){var L=_.C,H=R.indexOf(`
`,L);return H==-1?Q:(L=Number(R.substring(L,H)),isNaN(L)?X:(H+=1,H+L>R.length?Q:(R=R.slice(H,H+L),_.C=H+L,R)))}Z.prototype.cancel=function(){this.K=!0,He(this)};function xe(_){_.T=Date.now()+_.H,We(_,_.H)}function We(_,R){if(_.D!=null)throw Error("WatchDog timer not null");_.D=ks(u(_.aa,_),R)}function et(_){_.D&&(a.clearTimeout(_.D),_.D=null)}Z.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(Gr(this.i,this.B),this.M!=2&&(Ar(),Tn(17)),He(this),this.m=2,ut(this)):We(this,this.T-_)};function ut(_){_.j.I==0||_.K||Td(_.j,_)}function He(_){et(_);var R=_.O;R&&typeof R.dispose=="function"&&R.dispose(),_.O=null,le(_.V),_.g&&(R=_.g,_.g=null,R.abort(),R.dispose())}function Ke(_,R){try{var L=_.j;if(L.I!=0&&(L.g==_||Ra(L.h,_))){if(!_.L&&Ra(L.h,_)&&L.I==3){try{var H=L.Ba.g.parse(R)}catch{H=null}if(Array.isArray(H)&&H.length==3){var fe=H;if(fe[0]==0){e:if(!L.v){if(L.g)if(L.g.F+3e3<_.F)Sd(L),Ls(L);else break e;_o(L),Tn(18)}}else L.xa=fe[1],0<L.xa-L.K&&fe[2]<37500&&L.F&&L.A==0&&!L.C&&(L.C=ks(u(L.Va,L),6e3));Qn(L.h)<=1&&L.ta&&(L.ta=void 0)}else Os(L,11)}else if((_.L||L.g==_)&&Sd(L),!F(R))for(fe=L.Ba.g.parse(R),R=0;R<fe.length;R++){let kn=fe[R];const Rr=kn[0];if(!(Rr<=L.K))if(L.K=Rr,kn=kn[1],L.I==2)if(kn[0]=="c"){L.M=kn[1],L.ba=kn[2];const Ds=kn[3];Ds!=null&&(L.ka=Ds,L.j.info("VER="+L.ka));const sl=kn[4];sl!=null&&(L.za=sl,L.j.info("SVER="+L.za));const xo=kn[5];xo!=null&&typeof xo=="number"&&xo>0&&(H=1.5*xo,L.O=H,L.j.info("backChannelRequestTimeoutMs_="+H)),H=L;const vo=_.g;if(vo){const bd=vo.g?vo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bd){var Ee=H.h;Ee.g||bd.indexOf("spdy")==-1&&bd.indexOf("quic")==-1&&bd.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(na(Ee,Ee.h),Ee.h=null))}if(H.G){const sg=vo.g?vo.g.getResponseHeader("X-HTTP-Session-Id"):null;sg&&(H.wa=sg,xn(H.J,H.G,sg))}}L.I=3,L.l&&L.l.ra(),L.aa&&(L.T=Date.now()-_.F,L.j.info("Handshake RTT: "+L.T+"ms")),H=L;var rt=_;if(H.na=ig(H,H.L?H.ba:null,H.W),rt.L){Ms(H.h,rt);var Kt=rt,Er=H.O;Er&&(Kt.H=Er),Kt.D&&(et(Kt),xe(Kt)),H.g=rt}else Ii(H);L.i.length>0&&il(L)}else kn[0]!="stop"&&kn[0]!="close"||Os(L,7);else L.I==3&&(kn[0]=="stop"||kn[0]=="close"?kn[0]=="stop"?Os(L,7):Ed(L):kn[0]!="noop"&&L.l&&L.l.qa(kn),L.A=0)}}Ar(4)}catch{}}var Vt=class{constructor(_,R){this.g=_,this.map=R}};function In(_){this.l=_||10,a.PerformanceNavigationTiming?(_=a.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pn(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Qn(_){return _.h?1:_.g?_.g.size:0}function Ra(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function na(_,R){_.g?_.g.add(R):_.h=R}function Ms(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}In.prototype.cancel=function(){if(this.i=vr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function vr(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const L of _.g.values())R=R.concat(L.G);return R}return p(_.i)}var ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(_,R){if(_){_=_.split("&");for(let L=0;L<_.length;L++){const H=_[L].indexOf("=");let fe,Ee=null;H>=0?(fe=_[L].substring(0,H),Ee=_[L].substring(H+1)):fe=_[L],R(fe,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function lo(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;_ instanceof lo?(this.l=_.l,bu(this,_.j),this.o=_.o,this.g=_.g,co(this,_.u),this.h=_.h,Zl(this,tg(_.i)),this.m=_.m):_&&(R=String(_).match(ql))?(this.l=!1,bu(this,R[1]||"",!0),this.o=Ru(R[2]||""),this.g=Ru(R[3]||"",!0),co(this,R[4]),this.h=Ru(R[5]||"",!0),Zl(this,R[6]||"",!0),this.m=Ru(R[7]||"")):(this.l=!1,this.i=new ln(null,this.l))}lo.prototype.toString=function(){const _=[];var R=this.j;R&&_.push(Cu(R,X0,!0),":");var L=this.g;return(L||R=="file")&&(_.push("//"),(R=this.o)&&_.push(Cu(R,X0,!0),"@"),_.push(ss(L).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.u,L!=null&&_.push(":",String(L))),(L=this.h)&&(this.g&&L.charAt(0)!="/"&&_.push("/"),_.push(Cu(L,L.charAt(0)=="/"?Pu:q0,!0))),(L=this.i.toString())&&_.push("?",L),(L=this.m)&&_.push("#",Cu(L,Z0)),_.join("")},lo.prototype.resolve=function(_){const R=ra(this);let L=!!_.j;L?bu(R,_.j):L=!!_.o,L?R.o=_.o:L=!!_.g,L?R.g=_.g:L=_.u!=null;var H=_.h;if(L)co(R,_.u);else if(L=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var fe=R.h.lastIndexOf("/");fe!=-1&&(H=R.h.slice(0,fe+1)+H)}if(fe=H,fe==".."||fe==".")H="";else if(fe.indexOf("./")!=-1||fe.indexOf("/.")!=-1){H=fe.lastIndexOf("/",0)==0,fe=fe.split("/");const Ee=[];for(let rt=0;rt<fe.length;){const Kt=fe[rt++];Kt=="."?H&&rt==fe.length&&Ee.push(""):Kt==".."?((Ee.length>1||Ee.length==1&&Ee[0]!="")&&Ee.pop(),H&&rt==fe.length&&Ee.push("")):(Ee.push(Kt),H=!0)}H=Ee.join("/")}else H=fe}return L?R.h=H:L=_.i.toString()!=="",L?Zl(R,tg(_.i)):L=!!_.m,L&&(R.m=_.m),R};function ra(_){return new lo(_)}function bu(_,R,L){_.j=L?Ru(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function co(_,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);_.u=R}else _.u=null}function Zl(_,R,L){R instanceof ln?(_.i=R,_d(_.i,_.l)):(L||(R=Cu(R,$E)),_.i=new ln(R,_.l))}function xn(_,R,L){_.i.set(R,L)}function el(_){return xn(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Ru(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Cu(_,R,L){return typeof _=="string"?(_=encodeURI(_).replace(R,Y0),L&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Y0(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var X0=/[#\/\?@]/g,q0=/[#\?:]/g,Pu=/[#\?]/g,$E=/[#\?@]/g,Z0=/#/g;function ln(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function uo(_){_.g||(_.g=new Map,_.h=0,_.i&&ir(_.i,function(R,L){_.add(decodeURIComponent(R.replace(/\+/g," ")),L)}))}n=ln.prototype,n.add=function(_,R){uo(this),this.i=null,_=ho(this,_);let L=this.g.get(_);return L||this.g.set(_,L=[]),L.push(R),this.h+=1,this};function Q0(_,R){uo(_),R=ho(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function yd(_,R){return uo(_),R=ho(_,R),_.g.has(R)}n.forEach=function(_,R){uo(this),this.g.forEach(function(L,H){L.forEach(function(fe){_.call(R,fe,H,this)},this)},this)};function J0(_,R){uo(_);let L=[];if(typeof R=="string")yd(_,R)&&(L=L.concat(_.g.get(ho(_,R))));else for(_=Array.from(_.g.values()),R=0;R<_.length;R++)L=L.concat(_[R]);return L}n.set=function(_,R){return uo(this),this.i=null,_=ho(this,_),yd(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=J0(this,_),_.length>0?String(_[0]):R):R};function eg(_,R,L){Q0(_,R),L.length>0&&(_.i=null,_.g.set(ho(_,R),p(L)),_.h+=L.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(let H=0;H<R.length;H++){var L=R[H];const fe=ss(L);L=J0(this,L);for(let Ee=0;Ee<L.length;Ee++){let rt=fe;L[Ee]!==""&&(rt+="="+ss(L[Ee])),_.push(rt)}}return this.i=_.join("&")};function tg(_){const R=new ln;return R.i=_.i,_.g&&(R.g=new Map(_.g),R.h=_.h),R}function ho(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function _d(_,R){R&&!_.j&&(uo(_),_.i=null,_.g.forEach(function(L,H){const fe=H.toLowerCase();H!=fe&&(Q0(this,H),eg(this,fe,L))},_)),_.j=R}function fo(_,R){const L=new nr;if(a.Image){const H=new Image;H.onload=h(ui,L,"TestLoadImage: loaded",!0,R,H),H.onerror=h(ui,L,"TestLoadImage: error",!1,R,H),H.onabort=h(ui,L,"TestLoadImage: abort",!1,R,H),H.ontimeout=h(ui,L,"TestLoadImage: timeout",!1,R,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else R(!1)}function go(_,R){const L=new nr,H=new AbortController,fe=setTimeout(()=>{H.abort(),ui(L,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:H.signal}).then(Ee=>{clearTimeout(fe),Ee.ok?ui(L,"TestPingServer: ok",!0,R):ui(L,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(fe),ui(L,"TestPingServer: error",!1,R)})}function ui(_,R,L,H,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),H(L)}catch{}}function ku(){this.g=new Ze}function tl(_){this.i=_.Sb||null,this.h=_.ab||!1}f(tl,ht),tl.prototype.g=function(){return new Ns(this.i,this.h)};function Ns(_,R){Ae.call(this),this.H=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ns,Ae),n=Ns.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=R,this.readyState=1,Ca(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(R.body=_),(this.H||a).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ql(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Ca(this)),this.g&&(this.readyState=3,Ca(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;k1(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function k1(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?Ql(this):Ca(this),this.readyState==3&&k1(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,Ql(this))},n.Na=function(_){this.g&&(this.response=_,Ql(this))},n.ga=function(){this.g&&Ql(this)};function Ql(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Ca(_)}n.setRequestHeader=function(_,R){this.A.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var L=R.next();!L.done;)L=L.value,_.push(L[0]+": "+L[1]),L=R.next();return _.join(`\r
`)};function Ca(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function M1(_){let R="";return Re(_,function(L,H){R+=H,R+=":",R+=L,R+=`\r
`}),R}function xd(_,R,L){e:{for(H in L){var H=!1;break e}H=!0}H||(L=M1(L),typeof _=="string"?L!=null&&ss(L):xn(_,R,L))}function Un(_){Ae.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Un,Ae);var N1=/^https?$/i,WE=["POST","PUT"];n=Un.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,R,L,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hr.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(Ee){Jl(this,Ee);return}if(_=L||"",L=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var fe in H)L.set(fe,H[fe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const Ee of H.keys())L.set(Ee,H.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(L.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),fe=a.FormData&&_ instanceof a.FormData,!(Array.prototype.indexOf.call(WE,R,void 0)>=0)||H||fe||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,rt]of L)this.g.setRequestHeader(Ee,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(Ee){Jl(this,Ee)}};function Jl(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.o=5,ec(_),rl(_)}function ec(_){_.A||(_.A=!0,ge(_,"complete"),ge(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,ge(this,"complete"),ge(this,"abort"),rl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),Un.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?nl(this):this.Xa())},n.Xa=function(){nl(this)};function nl(_){if(_.h&&typeof s<"u"){if(_.v&&mo(_)==4)setTimeout(_.Ca.bind(_),0);else if(ge(_,"readystatechange"),mo(_)==4){_.h=!1;try{const Ee=_.ca();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var L;if(!(L=R)){var H;if(H=Ee===0){let rt=String(_.D).match(ql)[1]||null;!rt&&a.self&&a.self.location&&(rt=a.self.location.protocol.slice(0,-1)),H=!N1.test(rt?rt.toLowerCase():"")}L=H}if(L)ge(_,"complete"),ge(_,"success");else{_.o=6;try{var fe=mo(_)>2?_.g.statusText:""}catch{fe=""}_.l=fe+" ["+_.ca()+"]",ec(_)}}finally{rl(_)}}}}function rl(_,R){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const L=_.g;_.g=null,R||ge(_,"ready");try{L.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function mo(_){return _.g?_.g.readyState:0}n.ca=function(){try{return mo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),we(R)}};function L1(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function ng(_){const R={};_=(_.g&&mo(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(F(_[H]))continue;var L=U(_[H]);const fe=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const Ee=R[fe]||[];R[fe]=Ee,Ee.push(L)}Ie(R,function(H){return H.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function po(_,R,L){return L&&L.internalChannelParams&&L.internalChannelParams[_]||R}function vd(_){this.za=0,this.i=[],this.j=new nr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=po("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=po("baseRetryDelayMs",5e3,_),this.Za=po("retryDelaySeedMs",1e4,_),this.Ta=po("forwardChannelMaxRetries",2,_),this.va=po("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new In(_&&_.concurrentRequestLimit),this.Ba=new ku,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=vd.prototype,n.ka=8,n.I=1,n.connect=function(_,R,L,H){Tn(0),this.W=_,this.H=R||{},L&&H!==void 0&&(this.H.OSID=L,this.H.OAID=H),this.F=this.X,this.J=ig(this,null,this.W),il(this)};function Ed(_){if(wd(_),_.I==3){var R=_.V++,L=ra(_.J);if(xn(L,"SID",_.M),xn(L,"RID",R),xn(L,"TYPE","terminate"),yo(_,L),R=new Z(_,_.j,R),R.M=2,R.A=el(ra(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(R.A.toString(),"")}catch{}!L&&a.Image&&(new Image().src=R.A,L=!0),L||(R.g=D1(R.j,null),R.g.ea(R.A)),R.F=Date.now(),xe(R)}Lu(_)}function Ls(_){_.g&&(Nu(_),_.g.cancel(),_.g=null)}function wd(_){Ls(_),_.v&&(a.clearTimeout(_.v),_.v=null),Sd(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&a.clearTimeout(_.m),_.m=null)}function il(_){if(!Pn(_.h)&&!_.m){_.m=!0;var R=_.Ea;D||P(),B||(D(),B=!0),k.add(R,_),_.D=0}}function O1(_,R){return Qn(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=R.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=ks(u(_.Ea,_,R),Id(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const fe=new Z(this,this.j,_);let Ee=this.o;if(this.U&&(Ee?(Ee=ie(Ee),Y(Ee,this.U)):Ee=this.U),this.u!==null||this.R||(fe.J=Ee,Ee=null),this.S)e:{for(var R=0,L=0;L<this.i.length;L++){t:{var H=this.i[L];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(R+=H,R>4096){R=L;break e}if(R===4096||L===this.i.length-1){R=L+1;break e}}R=1e3}else R=1e3;R=rg(this,fe,R),L=ra(this.J),xn(L,"RID",_),xn(L,"CVER",22),this.G&&xn(L,"X-HTTP-Session-Id",this.G),yo(this,L),Ee&&(this.R?R="headers="+ss(M1(Ee))+"&"+R:this.u&&xd(L,this.u,Ee)),na(this.h,fe),this.Ra&&xn(L,"TYPE","init"),this.S?(xn(L,"$req",R),xn(L,"SID","null"),fe.U=!0,J(fe,L,null)):J(fe,L,R),this.I=2}}else this.I==3&&(_?Mu(this,_):this.i.length==0||Pn(this.h)||Mu(this))};function Mu(_,R){var L;R?L=R.l:L=_.V++;const H=ra(_.J);xn(H,"SID",_.M),xn(H,"RID",L),xn(H,"AID",_.K),yo(_,H),_.u&&_.o&&xd(H,_.u,_.o),L=new Z(_,_.j,L,_.D+1),_.u===null&&(L.J=_.o),R&&(_.i=R.G.concat(_.i)),R=rg(_,L,1e3),L.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),na(_.h,L),J(L,H,R)}function yo(_,R){_.H&&Re(_.H,function(L,H){xn(R,H,L)}),_.l&&Re({},function(L,H){xn(R,H,L)})}function rg(_,R,L){L=Math.min(_.i.length,L);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var fe=_.i;let Kt=-1;for(;;){const Er=["count="+L];Kt==-1?L>0?(Kt=fe[0].g,Er.push("ofs="+Kt)):Kt=0:Er.push("ofs="+Kt);let kn=!0;for(let Rr=0;Rr<L;Rr++){var Ee=fe[Rr].g;const Ds=fe[Rr].map;if(Ee-=Kt,Ee<0)Kt=Math.max(0,fe[Rr].g-100),kn=!1;else try{Ee="req"+Ee+"_"||"";try{var rt=Ds instanceof Map?Ds:Object.entries(Ds);for(const[sl,xo]of rt){let vo=xo;o(xo)&&(vo=Be(xo)),Er.push(Ee+sl+"="+encodeURIComponent(vo))}}catch(sl){throw Er.push(Ee+"type="+encodeURIComponent("_badmap")),sl}}catch{H&&H(Ds)}}if(kn){rt=Er.join("&");break e}}rt=void 0}return _=_.i.splice(0,L),R.G=_,rt}function Ii(_){if(!_.g&&!_.v){_.Y=1;var R=_.Da;D||P(),B||(D(),B=!0),k.add(R,_),_.A=0}}function _o(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=ks(u(_.Da,_),Id(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,tc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=ks(u(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tn(10),Ls(this),tc(this))};function Nu(_){_.B!=null&&(a.clearTimeout(_.B),_.B=null)}function tc(_){_.g=new Z(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var R=ra(_.na);xn(R,"RID","rpc"),xn(R,"SID",_.M),xn(R,"AID",_.K),xn(R,"CI",_.F?"0":"1"),!_.F&&_.ia&&xn(R,"TO",_.ia),xn(R,"TYPE","xmlhttp"),yo(_,R),_.u&&_.o&&xd(R,_.u,_.o),_.O&&(_.g.H=_.O);var L=_.g;_=_.ba,L.M=1,L.A=el(ra(R)),L.u=null,L.R=!0,pe(L,_)}n.Va=function(){this.C!=null&&(this.C=null,Ls(this),_o(this),Tn(19))};function Sd(_){_.C!=null&&(a.clearTimeout(_.C),_.C=null)}function Td(_,R){var L=null;if(_.g==R){Sd(_),Nu(_),_.g=null;var H=2}else if(Ra(_.h,R))L=R.G,Ms(_.h,R),H=1;else return;if(_.I!=0){if(R.o)if(H==1){L=R.u?R.u.length:0,R=Date.now()-R.F;var fe=_.D;H=$i(),ge(H,new Ps(H,L)),il(_)}else Ii(_);else if(fe=R.m,fe==3||fe==0&&R.X>0||!(H==1&&O1(_,R)||H==2&&_o(_)))switch(L&&L.length>0&&(R=_.h,R.i=R.i.concat(L)),fe){case 1:Os(_,5);break;case 4:Os(_,10);break;case 3:Os(_,6);break;default:Os(_,2)}}}function Id(_,R){let L=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(L*=2),L*R}function Os(_,R){if(_.j.info("Error code "+R),R==2){var L=u(_.bb,_),H=_.Ua;const fe=!H;H=new lo(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bu(H,"https"),el(H),fe?fo(H.toString(),L):go(H.toString(),L)}else Tn(2);_.I=0,_.l&&_.l.pa(R),Lu(_),wd(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))};function Lu(_){if(_.I=0,_.ja=[],_.l){const R=vr(_.h);(R.length!=0||_.i.length!=0)&&(x(_.ja,R),x(_.ja,_.i),_.h.i.length=0,p(_.i),_.i.length=0),_.l.oa()}}function ig(_,R,L){var H=L instanceof lo?ra(L):new lo(L);if(H.g!="")R&&(H.g=R+"."+H.g),co(H,H.u);else{var fe=a.location;H=fe.protocol,R=R?R+"."+fe.hostname:fe.hostname,fe=+fe.port;const Ee=new lo(null);H&&bu(Ee,H),R&&(Ee.g=R),fe&&co(Ee,fe),L&&(Ee.h=L),H=Ee}return L=_.G,R=_.wa,L&&R&&xn(H,L,R),xn(H,"VER",_.ka),yo(_,H),H}function D1(_,R,L){if(R&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Aa&&!_.ma?new Un(new tl({ab:L})):new Un(_.ma),R.Fa(_.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function F1(){}n=F1.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ad(){}Ad.prototype.g=function(_,R){return new hi(_,R)};function hi(_,R){Ae.call(this),this.g=new vd(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(_?_["X-WebChannel-Client-Profile"]=R.sa:_={"X-WebChannel-Client-Profile":R.sa}),this.g.U=_,(_=R&&R.Qb)&&!F(_)&&(this.g.u=_),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!F(R)&&(this.g.G=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new nc(this)}f(hi,Ae),hi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hi.prototype.close=function(){Ed(this.g)},hi.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var L={};L.__data__=_,_=L}else this.v&&(L={},L.__data__=Be(_),_=L);R.i.push(new Vt(R.Ya++,_)),R.I==3&&il(R)},hi.prototype.N=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,hi.Z.N.call(this)};function j1(_){Rt.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){e:{for(const L in R){_=L;break e}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}f(j1,Rt);function V1(){en.call(this),this.status=1}f(V1,en);function nc(_){this.g=_}f(nc,F1),nc.prototype.ra=function(){ge(this.g,"a")},nc.prototype.qa=function(_){ge(this.g,new j1(_))},nc.prototype.pa=function(_){ge(this.g,new V1)},nc.prototype.oa=function(){ge(this.g,"b")},Ad.prototype.createWebChannel=Ad.prototype.g,hi.prototype.send=hi.prototype.o,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,S6=function(){return new Ad},w6=function(){return $i()},E6=jr,bT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,A_=br,on.COMPLETE="complete",v6=on,Et.EventType=St,St.OPEN="a",St.CLOSE="b",St.ERROR="c",St.MESSAGE="d",Ae.prototype.listen=Ae.prototype.J,Qg=Et,Un.prototype.listenOnce=Un.prototype.K,Un.prototype.getLastError=Un.prototype.Ha,Un.prototype.getLastErrorCode=Un.prototype.ya,Un.prototype.getStatus=Un.prototype.ca,Un.prototype.getResponseJson=Un.prototype.La,Un.prototype.getResponseText=Un.prototype.la,Un.prototype.send=Un.prototype.ea,Un.prototype.setWithCredentials=Un.prototype.Fa,x6=Un}).apply(typeof Hy<"u"?Hy:typeof self<"u"?self:typeof window<"u"?window:{});const vM="@firebase/firestore",EM="4.9.3";let _i=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_i.UNAUTHENTICATED=new _i(null),_i.GOOGLE_CREDENTIALS=new _i("google-credentials-uid"),_i.FIRST_PARTY=new _i("first-party-uid"),_i.MOCK_USER=new _i("mock-user");let N0="12.7.0";const Bh=new kA("@firebase/firestore");function yf(){return Bh.logLevel}function Xe(n,...e){if(Bh.logLevel<=rn.DEBUG){const t=e.map($A);Bh.debug(`Firestore (${N0}): ${n}`,...t)}}function Ji(n,...e){if(Bh.logLevel<=rn.ERROR){const t=e.map($A);Bh.error(`Firestore (${N0}): ${n}`,...t)}}function Uh(n,...e){if(Bh.logLevel<=rn.WARN){const t=e.map($A);Bh.warn(`Firestore (${N0}): ${n}`,...t)}}function $A(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function vt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,T6(n,r,t)}function T6(n,e,t){let r=`FIRESTORE (${N0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ji(r),new Error(r)}function bt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||T6(e,i,r)}function Ht(n,e){return n}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends Qo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Do{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class I6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_i.UNAUTHENTICATED)))}shutdown(){}}class Cq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Pq{constructor(e){this.t=e,this.currentUser=_i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Do;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Do,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Do)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string",31837,{l:r}),new I6(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new _i(e)}}class kq{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=_i.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Mq{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new kq(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nq{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);const r=s=>{s.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Xe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wM(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wM(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Lq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class WA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Lq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function RT(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return nS(i)===nS(s)?Wt(i,s):nS(i)?1:-1}return Wt(n.length,e.length)}const Oq=55296,Dq=57343;function nS(n){const e=n.charCodeAt(0);return e>=Oq&&e<=Dq}function l0(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function A6(n){return n+"\0"}const SM="__name__";class bo{constructor(e,t,r){t===void 0?t=0:t>e.length&&vt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&vt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=bo.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Wt(e.length,t.length)}static compareSegments(e,t){const r=bo.isNumericId(e),i=bo.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?bo.extractNumericId(e).compare(bo.extractNumericId(t)):RT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qc.fromString(e.substring(4,e.length-2))}}class Sn extends bo{construct(e,t,r){return new Sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new st(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Sn(t)}static emptyPath(){return new Sn([])}}const Fq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends bo{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return Fq.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SM}static keyField(){return new lr([SM])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new st(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new st(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new st(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new st(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(Sn.fromString(e))}static fromName(e){return new at(Sn.fromString(e).popFirst(5))}static empty(){return new at(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new Sn(e.slice()))}}function b6(n,e,t){if(!t)throw new st(ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jq(n,e,t,r){if(e===!0&&r===!0)throw new st(ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TM(n){if(!at.isDocumentKey(n))throw new st(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IM(n){if(at.isDocumentKey(n))throw new st(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function R6(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":vt(12329,{type:typeof n})}function Ia(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new st(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xv(n);throw new st(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Nr(n,e){const t={typeString:n};return e&&(t.value=e),t}function i1(n,e){if(!R6(n))throw new st(ke.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new st(ke.INVALID_ARGUMENT,t);return!0}const AM=-62135596800,bM=1e6;class On{static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bM);return new On(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new st(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new st(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AM)throw new st(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bM}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:On._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(i1(e,On._jsonSchema))return new On(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}On._jsonSchemaVersion="firestore/timestamp/1.0",On._jsonSchema={type:Nr("string",On._jsonSchemaVersion),seconds:Nr("number"),nanoseconds:Nr("number")};class Ct{static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new On(0,0))}static max(){return new Ct(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ip=-1;class Sx{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function CT(n){return n.fields.find((e=>e.kind===2))}function th(n){return n.fields.filter((e=>e.kind!==2))}Sx.UNKNOWN_ID=-1;class b_{constructor(e,t){this.fieldPath=e,this.kind=t}}class sp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sp(0,Js.min())}}function Vq(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(r===1e9?new On(t+1,0):new On(t,r));return new Js(i,at.empty(),e)}function C6(n){return new Js(n.readTime,n.key,ip)}class Js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Js(Ct.min(),at.empty(),ip)}static max(){return new Js(Ct.max(),at.empty(),ip)}}function HA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=at.comparator(n.documentKey,e.documentKey),t!==0?t:Wt(n.largestBatchId,e.largestBatchId))}const P6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ld(n){if(n.code!==ke.FAILED_PRECONDITION||n.message!==P6)throw n;Xe("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,r)=>{t(e)}))}static reject(e){return new ue(((t,r)=>{r(e)}))}static waitFor(e){return new ue(((t,r)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(l=>r(l)))})),a=!0,s===i&&t()}))}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next((i=>i?ue.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new ue(((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((h=>{a[u]=h,++o,o===s&&r(a)}),(h=>i(h)))}}))}static doWhile(e,t){return new ue(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const Bs="SimpleDb";class qv{static open(e,t,r,i){try{return new qv(t,e.transaction(i,r))}catch(s){throw new gm(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Do,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new gm(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=KA(r.target.error);this.S.reject(new gm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Xe(Bs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Bq(t)}}class Jc{static delete(e){return Xe(Bs,"Removing database:",e),oh(bD().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!DD())return!1;if(Jc.F())return!0;const e=Yr(),t=Jc.M(e),r=0<t&&t<10,i=M6(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Jc.M(Yr())===12.2&&Ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Xe(Bs,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new gm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new st(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new st(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new gm(e,a))},i.onupgradeneeded=s=>{Xe(Bs,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{Xe(Bs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=qv.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),ue.reject(u)))).toPromise();return l.catch((()=>{})),await o.D,l}catch(o){const l=o,u=l.name!=="FirebaseError"&&a<3;if(Xe(Bs,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function M6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Gq{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return oh(this.U.delete())}}class gm extends st{constructor(e,t){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function vu(n){return n.name==="IndexedDbTransactionError"}class Bq{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Xe(Bs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Xe(Bs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oh(r)}add(e){return Xe(Bs,"ADD",this.store.name,e,e),oh(this.store.add(e))}get(e){return oh(this.store.get(e)).next((t=>(t===void 0&&(t=null),Xe(Bs,"GET",this.store.name,e,t),t)))}delete(e){return Xe(Bs,"DELETE",this.store.name,e),oh(this.store.delete(e))}count(){return Xe(Bs,"COUNT",this.store.name),oh(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new ue(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((o,l)=>{a.push(l)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ue(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){Xe(Bs,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ue(((r,i)=>{t.onerror=s=>{const a=KA(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,t){const r=[];return new ue(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new Gq(o),u=t(o.primaryKey,o.value,l);if(u instanceof ue){const h=u.catch((f=>(l.done(),ue.reject(f))));r.push(h)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}})).next((()=>ue.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oh(n){return new ue(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=KA(r.target.error);t(i)}}))}let RM=!1;function KA(n){const e=Jc.M(Yr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RM||(RM=!0,setTimeout((()=>{throw r}),0)),r}}return n}const mm="IndexBackfiller";class Uq{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Xe(mm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Xe(mm,`Documents written: ${t}`)}catch(t){vu(t)?Xe(mm,"Ignoring IndexedDB error during index backfill: ",t):await ld(t)}await this.re(6e4)}))}}class zq{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return ue.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return Xe(mm,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>(Xe(mm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=C6(s);HA(a,r)>0&&(r=a)})),new Js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ea{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ea.ce=-1;const Th=-1;function Zv(n){return n==null}function ap(n){return n===0&&1/n==-1/0}function $q(n){return typeof n=="number"&&Number.isInteger(n)&&!ap(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Tx="";function Gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CM(e)),e=Wq(n.get(t),e);return CM(e)}function Wq(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Tx:t+="";break;default:t+=s}}return t}function CM(n){return n+Tx+""}function Mo(n){const e=n.length;if(bt(e>=2,64408,{path:n}),e===2)return bt(n.charAt(0)===Tx&&n.charAt(1)==="",56145,{path:n}),Sn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(Tx,s);switch((a<0||a>t)&&vt(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:vt(61167,{path:n})}s=a+2}return new Sn(r)}const nh="remoteDocuments",s1="owner",tf="owner",op="mutationQueues",Hq="userId",Ba="mutations",PM="batchId",yh="userMutationsIndex",kM=["userId","batchId"];function R_(n,e){return[n,Gi(e)]}function N6(n,e,t){return[n,Gi(e),t]}const Kq={},c0="documentMutations",Ix="remoteDocumentsV14",Yq=["prefixPath","collectionGroup","readTime","documentId"],C_="documentKeyIndex",Xq=["prefixPath","collectionGroup","documentId"],L6="collectionGroupIndex",qq=["collectionGroup","readTime","prefixPath","documentId"],lp="remoteDocumentGlobal",PT="remoteDocumentGlobalKey",u0="targets",O6="queryTargetsIndex",Zq=["canonicalId","targetId"],h0="targetDocuments",Qq=["targetId","path"],YA="documentTargetsIndex",Jq=["path","targetId"],Ax="targetGlobalKey",Ih="targetGlobal",cp="collectionParents",eZ=["collectionId","parent"],d0="clientMetadata",tZ="clientId",Qv="bundles",nZ="bundleId",Jv="namedQueries",rZ="name",XA="indexConfiguration",iZ="indexId",kT="collectionGroupIndex",sZ="collectionGroup",pm="indexState",aZ=["indexId","uid"],D6="sequenceNumberIndex",oZ=["uid","sequenceNumber"],ym="indexEntries",lZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],F6="documentKeyIndex",cZ=["indexId","uid","orderedDocumentKey"],eE="documentOverlays",uZ=["userId","collectionPath","documentId"],MT="collectionPathOverlayIndex",hZ=["userId","collectionPath","largestBatchId"],j6="collectionGroupOverlayIndex",dZ=["userId","collectionGroup","largestBatchId"],qA="globals",fZ="name",V6=[op,Ba,c0,nh,u0,s1,Ih,h0,d0,lp,cp,Qv,Jv],gZ=[...V6,eE],G6=[op,Ba,c0,Ix,u0,s1,Ih,h0,d0,lp,cp,Qv,Jv,eE],B6=G6,ZA=[...B6,XA,pm,ym],mZ=ZA,U6=[...ZA,qA],pZ=U6;class NT extends k6{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function qr(n,e){const t=Ht(n);return Jc.O(t.le,e)}function MM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function z6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tr{constructor(e,t){this.comparator=e,this.root=t||xi.EMPTY}insert(e,t){return new tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ky(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ky(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ky(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ky(this.root,e,this.comparator,!0)}}class Ky{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??xi.RED,this.left=i??xi.EMPTY,this.right=s??xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new xi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return xi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw vt(27949);return e+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1;xi.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NM(this.data.getIterator())}getIteratorFrom(e){return new NM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class NM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nf(n){return n.hasNext()?n.getNext():void 0}class Es{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new Es([])}unionWith(e){let t=new jn(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return l0(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class $6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $6("Invalid base64 string: "+s):s}})(e);return new Or(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const yZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(n){if(bt(!!n,39018),typeof n=="string"){let e=0;const t=yZ.exec(n);if(bt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gl(n){return typeof n=="string"?Or.fromBase64String(n):Or.fromUint8Array(n)}const W6="server_timestamp",H6="__type__",K6="__previous_value__",Y6="__local_write_time__";function QA(n){return(n?.mapValue?.fields||{})[H6]?.stringValue===W6}function tE(n){const e=n.mapValue.fields[K6];return QA(e)?tE(e):e}function up(n){const e=Vl(n.mapValue.fields[Y6].timestampValue);return new On(e.seconds,e.nanos)}class _Z{constructor(e,t,r,i,s,a,o,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const bx="(default)";class zh{constructor(e,t){this.projectId=e,this.database=t||bx}static empty(){return new zh("","")}get isDefaultDatabase(){return this.database===bx}isEqual(e){return e instanceof zh&&e.projectId===this.projectId&&e.database===this.database}}const JA="__type__",X6="__max__",zc={mapValue:{fields:{__type__:{stringValue:X6}}}},eb="__vector__",f0="value",P_={nullValue:"NULL_VALUE"};function au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?QA(n)?4:q6(n)?9007199254740991:nE(n)?10:11:vt(28295,{value:n})}function Ho(n,e){if(n===e)return!0;const t=au(n);if(t!==au(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return up(n).isEqual(up(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Vl(i.timestampValue),o=Vl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Gl(i.bytesValue).isEqual(Gl(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return er(i.geoPointValue.latitude)===er(s.geoPointValue.latitude)&&er(i.geoPointValue.longitude)===er(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return er(i.integerValue)===er(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=er(i.doubleValue),o=er(s.doubleValue);return a===o?ap(a)===ap(o):isNaN(a)&&isNaN(o)}return!1})(n,e);case 9:return l0(n.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(MM(a)!==MM(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ho(a[l],o[l])))return!1;return!0})(n,e);default:return vt(52216,{left:n})}}function hp(n,e){return(n.values||[]).find((t=>Ho(t,e)))!==void 0}function ou(n,e){if(n===e)return 0;const t=au(n),r=au(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=er(s.integerValue||s.doubleValue),l=er(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(n,e);case 3:return LM(n.timestampValue,e.timestampValue);case 4:return LM(up(n),up(e));case 5:return RT(n.stringValue,e.stringValue);case 6:return(function(s,a){const o=Gl(s),l=Gl(a);return o.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const h=Wt(o[u],l[u]);if(h!==0)return h}return Wt(o.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=Wt(er(s.latitude),er(a.latitude));return o!==0?o:Wt(er(s.longitude),er(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return OM(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const o=s.fields||{},l=a.fields||{},u=o[f0]?.arrayValue,h=l[f0]?.arrayValue,f=Wt(u?.values?.length||0,h?.values?.length||0);return f!==0?f:OM(u,h)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===zc.mapValue&&a===zc.mapValue)return 0;if(s===zc.mapValue)return 1;if(a===zc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const g=RT(l[f],h[f]);if(g!==0)return g;const p=ou(o[l[f]],u[h[f]]);if(p!==0)return p}return Wt(l.length,h.length)})(n.mapValue,e.mapValue);default:throw vt(23264,{he:t})}}function LM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Wt(n,e);const t=Vl(n),r=Vl(e),i=Wt(t.seconds,r.seconds);return i!==0?i:Wt(t.nanos,r.nanos)}function OM(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ou(t[i],r[i]);if(s)return s}return Wt(t.length,r.length)}function g0(n){return LT(n)}function LT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Vl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Gl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return at.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=LT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${LT(t.fields[a])}`;return i+"}"})(n.mapValue):vt(61005,{value:n})}function k_(n){switch(au(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tE(n);return e?16+k_(e):16;case 5:return 2*n.stringValue.length;case 6:return Gl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+k_(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Eu(r.fields,((s,a)=>{i+=s.length+k_(a)})),i})(n.mapValue);default:throw vt(13486,{value:n})}}function dp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function OT(n){return!!n&&"integerValue"in n}function fp(n){return!!n&&"arrayValue"in n}function DM(n){return!!n&&"nullValue"in n}function FM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function M_(n){return!!n&&"mapValue"in n}function nE(n){return(n?.mapValue?.fields||{})[JA]?.stringValue===eb}function _m(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Eu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=_m(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_m(n.arrayValue.values[t]);return e}return{...n}}function q6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===X6}const Z6={mapValue:{fields:{[JA]:{stringValue:eb},[f0]:{arrayValue:{}}}}};function xZ(n){return"nullValue"in n?P_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dp(zh.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?nE(n)?Z6:{mapValue:{}}:vt(35942,{value:n})}function vZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dp(zh.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Z6:"mapValue"in n?nE(n)?{mapValue:{}}:zc:vt(61959,{value:n})}function jM(n,e){const t=ou(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VM(n,e){const t=ou(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!M_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_m(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=_m(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());M_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];M_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Eu(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Di(_m(this.value))}}function Q6(n){const e=[];return Eu(n.fields,((t,r)=>{const i=new lr([t]);if(M_(r)){const s=Q6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Es(e)}class yr{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new yr(e,0,Ct.min(),Ct.min(),Ct.min(),Di.empty(),0)}static newFoundDocument(e,t,r,i){return new yr(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new yr(e,2,t,Ct.min(),Ct.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new yr(e,3,t,Ct.min(),Ct.min(),Di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class m0{constructor(e,t){this.position=e,this.inclusive=t}}function GM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=at.comparator(at.fromName(a.referenceValue),t.key):r=ou(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function BM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ho(n.position[t],e.position[t]))return!1;return!0}class Rx{constructor(e,t="asc"){this.field=e,this.dir=t}}function EZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class J6{}class sn extends J6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new wZ(e,t,r):t==="array-contains"?new IZ(e,r):t==="in"?new sF(e,r):t==="not-in"?new AZ(e,r):t==="array-contains-any"?new bZ(e,r):new sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new SZ(e,r):new TZ(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ou(t,this.value)):t!==null&&au(this.value)===au(t)&&this.matchesComparison(ou(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends J6{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Dn(e,t)}matches(e){return p0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function p0(n){return n.op==="and"}function DT(n){return n.op==="or"}function tb(n){return eF(n)&&p0(n)}function eF(n){for(const e of n.filters)if(e instanceof Dn)return!1;return!0}function FT(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+g0(n.value);if(tb(n))return n.filters.map((e=>FT(e))).join(",");{const e=n.filters.map((t=>FT(t))).join(",");return`${n.op}(${e})`}}function tF(n,e){return n instanceof sn?(function(r,i){return i instanceof sn&&r.op===i.op&&r.field.isEqual(i.field)&&Ho(r.value,i.value)})(n,e):n instanceof Dn?(function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,o)=>s&&tF(a,i.filters[o])),!0):!1})(n,e):void vt(19439)}function nF(n,e){const t=n.filters.concat(e);return Dn.create(t,n.op)}function rF(n){return n instanceof sn?(function(t){return`${t.field.canonicalString()} ${t.op} ${g0(t.value)}`})(n):n instanceof Dn?(function(t){return t.op.toString()+" {"+t.getFilters().map(rF).join(" ,")+"}"})(n):"Filter"}class wZ extends sn{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.matchesComparison(t)}}class SZ extends sn{constructor(e,t){super(e,"in",t),this.keys=iF("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class TZ extends sn{constructor(e,t){super(e,"not-in",t),this.keys=iF("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iF(n,e){return(e.arrayValue?.values||[]).map((t=>at.fromName(t.referenceValue)))}class IZ extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fp(t)&&hp(t.arrayValue,this.value)}}class sF extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hp(this.value.arrayValue,t)}}class AZ extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(hp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hp(this.value.arrayValue,t)}}class bZ extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>hp(this.value.arrayValue,r)))}}class RZ{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function jT(n,e=null,t=[],r=[],i=null,s=null,a=null){return new RZ(n,e,t,r,i,s,a)}function $h(n){const e=Ht(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>FT(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Zv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>g0(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>g0(r))).join(",")),e.Te=t}return e.Te}function a1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BM(n.startAt,e.startAt)&&BM(n.endAt,e.endAt)}function Cx(n){return at.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Px(n,e){return n.filters.filter((t=>t instanceof sn&&t.field.isEqual(e)))}function UM(n,e,t){let r=P_,i=!0;for(const s of Px(n,e)){let a=P_,o=!0;switch(s.op){case"<":case"<=":a=xZ(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=P_}jM({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];jM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function zM(n,e,t){let r=zc,i=!0;for(const s of Px(n,e)){let a=zc,o=!0;switch(s.op){case">=":case">":a=vZ(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=zc}VM({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];VM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class o1{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CZ(n,e,t,r,i,s,a,o){return new o1(n,e,t,r,i,s,a,o)}function rE(n){return new o1(n)}function $M(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aF(n){return n.collectionGroup!==null}function xm(n){const e=Ht(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new jn(lr.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Rx(s,r))})),t.has(lr.keyField().canonicalString())||e.Ie.push(new Rx(lr.keyField(),r))}return e.Ie}function Sa(n){const e=Ht(n);return e.Ee||(e.Ee=PZ(e,xm(n))),e.Ee}function PZ(n,e){if(n.limitType==="F")return jT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Rx(i.field,s)}));const t=n.endAt?new m0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new m0(n.startAt.position,n.startAt.inclusive):null;return jT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function VT(n,e){const t=n.filters.concat([e]);return new o1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function GT(n,e,t){return new o1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function iE(n,e){return a1(Sa(n),Sa(e))&&n.limitType===e.limitType}function oF(n){return`${$h(Sa(n))}|lt:${n.limitType}`}function _f(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>rF(i))).join(", ")}]`),Zv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>g0(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>g0(i))).join(",")),`Target(${r})`})(Sa(n))}; limitType=${n.limitType})`}function l1(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):at.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of xm(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,o,l){const u=GM(a,o,l);return a.inclusive?u<=0:u<0})(r.startAt,xm(r),i)||r.endAt&&!(function(a,o,l){const u=GM(a,o,l);return a.inclusive?u>=0:u>0})(r.endAt,xm(r),i))})(n,e)}function kZ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lF(n){return(e,t)=>{let r=!1;for(const i of xm(n)){const s=MZ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MZ(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):(function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?ou(l,u):vt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt(19790,{direction:n.dir})}}class Wl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Eu(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return z6(this.inner)}size(){return this.innerSize}}const NZ=new tr(at.comparator);function Ys(){return NZ}const cF=new tr(at.comparator);function Jg(...n){let e=cF;for(const t of n)e=e.insert(t.key,t);return e}function uF(n){let e=cF;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function No(){return vm()}function hF(){return vm()}function vm(){return new Wl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const LZ=new tr(at.comparator),OZ=new jn(at.comparator);function Qt(...n){let e=OZ;for(const t of n)e=e.add(t);return e}const DZ=new jn(Wt);function FZ(){return DZ}function nb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ap(e)?"-0":e}}function dF(n){return{integerValue:""+n}}function jZ(n,e){return $q(e)?dF(e):nb(n,e)}class sE{constructor(){this._=void 0}}function VZ(n,e,t){return n instanceof y0?(function(i,s){const a={fields:{[H6]:{stringValue:W6},[Y6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&QA(s)&&(s=tE(s)),s&&(a.fields[K6]=s),{mapValue:a}})(t,e):n instanceof _0?gF(n,e):n instanceof x0?mF(n,e):(function(i,s){const a=fF(i,s),o=WM(a)+WM(i.Ae);return OT(a)&&OT(i.Ae)?dF(o):nb(i.serializer,o)})(n,e)}function GZ(n,e,t){return n instanceof _0?gF(n,e):n instanceof x0?mF(n,e):t}function fF(n,e){return n instanceof gp?(function(r){return OT(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class y0 extends sE{}class _0 extends sE{constructor(e){super(),this.elements=e}}function gF(n,e){const t=pF(e);for(const r of n.elements)t.some((i=>Ho(i,r)))||t.push(r);return{arrayValue:{values:t}}}class x0 extends sE{constructor(e){super(),this.elements=e}}function mF(n,e){let t=pF(e);for(const r of n.elements)t=t.filter((i=>!Ho(i,r)));return{arrayValue:{values:t}}}class gp extends sE{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function WM(n){return er(n.integerValue||n.doubleValue)}function pF(n){return fp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yF{constructor(e,t){this.field=e,this.transform=t}}function BZ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof _0&&i instanceof _0||r instanceof x0&&i instanceof x0?l0(r.elements,i.elements,Ho):r instanceof gp&&i instanceof gp?Ho(r.Ae,i.Ae):r instanceof y0&&i instanceof y0})(n.transform,e.transform)}class UZ{constructor(e,t){this.version=e,this.transformResults=t}}class Fi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function N_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class aE{}function _F(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new oE(n.key,Fi.none()):new L0(n.key,n.data,Fi.none());{const t=n.data,r=Di.empty();let i=new jn(lr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Hl(n.key,r,new Es(i.toArray()),Fi.none())}}function zZ(n,e,t){n instanceof L0?(function(i,s,a){const o=i.value.clone(),l=KM(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Hl?(function(i,s,a){if(!N_(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=KM(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(xF(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Em(n,e,t,r){return n instanceof L0?(function(s,a,o,l){if(!N_(s.precondition,a))return o;const u=s.value.clone(),h=YM(s.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Hl?(function(s,a,o,l){if(!N_(s.precondition,a))return o;const u=YM(s.fieldTransforms,l,a),h=a.data;return h.setAll(xF(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((f=>f.field)))})(n,e,t,r):(function(s,a,o){return N_(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(n,e,t)}function $Z(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=fF(r.transform,i||null);s!=null&&(t===null&&(t=Di.empty()),t.set(r.field,s))}return t||null}function HM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&l0(r,i,((s,a)=>BZ(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class L0 extends aE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hl extends aE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xF(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function KM(n,e,t){const r=new Map;bt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,GZ(a,o,t[i]))}return r}function YM(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,VZ(s,a,e))}return r}class oE extends aE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vF extends aE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Em(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Em(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hF();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=_F(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Ct.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qt())}isEqual(e){return this.batchId===e.batchId&&l0(this.mutations,e.mutations,((t,r)=>HM(t,r)))&&l0(this.baseMutations,e.baseMutations,((t,r)=>HM(t,r)))}}class ib{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){bt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return LZ})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new ib(e,t,r,i)}}class sb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var kr,un;function HZ(n){switch(n){case ke.OK:return vt(64938);case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0;default:return vt(15467,{code:n})}}function EF(n){if(n===void 0)return Ji("GRPC error has no .code"),ke.UNKNOWN;switch(n){case kr.OK:return ke.OK;case kr.CANCELLED:return ke.CANCELLED;case kr.UNKNOWN:return ke.UNKNOWN;case kr.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case kr.INTERNAL:return ke.INTERNAL;case kr.UNAVAILABLE:return ke.UNAVAILABLE;case kr.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case kr.NOT_FOUND:return ke.NOT_FOUND;case kr.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case kr.ABORTED:return ke.ABORTED;case kr.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case kr.DATA_LOSS:return ke.DATA_LOSS;default:return vt(39323,{code:n})}}(un=kr||(kr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";function KZ(){return new TextEncoder}const YZ=new Qc([4294967295,4294967295],0);function XM(n){const e=KZ().encode(n),t=new _6;return t.update(e),new Uint8Array(t.digest())}function qM(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qc([t,r],0),new Qc([i,s],0)]}class ab{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new em(`Invalid padding: ${t}`);if(r<0)throw new em(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new em(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new em(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qc.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Qc.fromNumber(r)));return i.compare(YZ)===1&&(i=new Qc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=XM(e),[r,i]=qM(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new ab(s,i,t);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=XM(e),[r,i]=qM(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class em extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,c1.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lE(Ct.min(),i,new tr(Wt),Ys(),Qt())}}class c1{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new c1(r,t,Qt(),Qt(),Qt())}}class L_{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class wF{constructor(e,t){this.targetId=e,this.Ce=t}}class SF{constructor(e,t,r=Or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ZM{constructor(){this.ve=0,this.Fe=QM(),this.Me=Or.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qt(),t=Qt(),r=Qt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:vt(38017,{changeType:s})}})),new c1(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=QM()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XZ{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ys(),this.Je=Yy(),this.He=Yy(),this.Ye=new tr(Wt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:vt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Cx(s))if(r===0){const a=new at(s.path);this.et(t,a,yr.newNoDocument(a,Ct.min()))}else bt(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=Gl(r).toUint8Array()}catch(l){if(l instanceof $6)return Uh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new ab(a,i,s)}catch(l){return Uh(l instanceof em?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Cx(o.target)){const l=new at(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,yr.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=Qt();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new lE(e,t,this.Ye,this.je,r);return this.je=Ys(),this.Je=Yy(),this.He=Yy(),this.Ye=new tr(Wt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ZM,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jn(Wt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jn(Wt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ZM),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yy(){return new tr(at.comparator)}function QM(){return new tr(at.comparator)}const qZ={asc:"ASCENDING",desc:"DESCENDING"},ZZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QZ={and:"AND",or:"OR"};class JZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function BT(n,e){return n.useProto3Json||Zv(e)?e:{value:e}}function v0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eQ(n,e){return v0(n,e.toTimestamp())}function ts(n){return bt(!!n,49232),Ct.fromTimestamp((function(t){const r=Vl(t);return new On(r.seconds,r.nanos)})(n))}function ob(n,e){return UT(n,e).canonicalString()}function UT(n,e){const t=(function(i){return new Sn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function IF(n){const e=Sn.fromString(n);return bt(LF(e),10190,{key:e.toString()}),e}function kx(n,e){return ob(n.databaseId,e.path)}function Ah(n,e){const t=IF(e);if(t.get(1)!==n.databaseId.projectId)throw new st(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new st(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(RF(t))}function AF(n,e){return ob(n.databaseId,e)}function bF(n){const e=IF(n);return e.length===4?Sn.emptyPath():RF(e)}function zT(n){return new Sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RF(n){return bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JM(n,e,t){return{name:kx(n,e),fields:t.value.mapValue.fields}}function tQ(n,e,t){const r=Ah(n,e.name),i=ts(e.updateTime),s=e.createTime?ts(e.createTime):Ct.min(),a=new Di({mapValue:{fields:e.fields}}),o=yr.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function nQ(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:vt(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,h){return u.useProto3Json?(bt(h===void 0||typeof h=="string",58123),Or.fromBase64String(h||"")):(bt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Or.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(u){const h=u.code===void 0?ke.UNKNOWN:EF(u.code);return new st(h,u.message||"")})(a);t=new SF(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ah(n,r.document.name),s=ts(r.document.updateTime),a=r.document.createTime?ts(r.document.createTime):Ct.min(),o=new Di({mapValue:{fields:r.document.fields}}),l=yr.newFoundDocument(i,s,a,o),u=r.targetIds||[],h=r.removedTargetIds||[];t=new L_(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ah(n,r.document),s=r.readTime?ts(r.readTime):Ct.min(),a=yr.newNoDocument(i,s),o=r.removedTargetIds||[];t=new L_([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ah(n,r.document),s=r.removedTargetIds||[];t=new L_([],s,i,null)}else{if(!("filter"in e))return vt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new WZ(i,s),o=r.targetId;t=new wF(o,a)}}return t}function Mx(n,e){let t;if(e instanceof L0)t={update:JM(n,e.key,e.value)};else if(e instanceof oE)t={delete:kx(n,e.key)};else if(e instanceof Hl)t={update:JM(n,e.key,e.data),updateMask:lQ(e.fieldMask)};else{if(!(e instanceof vF))return vt(16599,{Vt:e.type});t={verify:kx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const o=a.transform;if(o instanceof y0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof x0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof gp)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw vt(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:eQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:vt(27497)})(n,e.precondition)),t}function $T(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Fi.updateTime(ts(s.updateTime)):s.exists!==void 0?Fi.exists(s.exists):Fi.none()})(e.currentDocument):Fi.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)bt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new y0;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new _0(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new x0(h)}else"increment"in o?l=new gp(a,o.increment):vt(16584,{proto:o});const u=lr.fromServerFormat(o.fieldPath);return new yF(u,l)})(n,i))):[];if(e.update){e.update.name;const i=Ah(n,e.update.name),s=new Di({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const u=l.fieldPaths||[];return new Es(u.map((h=>lr.fromServerFormat(h))))})(e.updateMask);return new Hl(i,s,a,t,r)}return new L0(i,s,t,r)}if(e.delete){const i=Ah(n,e.delete);return new oE(i,t)}if(e.verify){const i=Ah(n,e.verify);return new vF(i,t)}return vt(1463,{proto:e})}function rQ(n,e){return n&&n.length>0?(bt(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?ts(i.updateTime):ts(s);return a.isEqual(Ct.min())&&(a=ts(s)),new UZ(a,i.transformResults||[])})(t,e)))):[]}function CF(n,e){return{documents:[AF(n,e.path)]}}function PF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=AF(n,i);const s=(function(u){if(u.length!==0)return NF(Dn.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((h=>(function(g){return{field:xf(g.field),direction:sQ(g.dir)}})(h)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=BT(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function kF(n){let e=bF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){bt(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(f){const g=MF(f);return g instanceof Dn&&tb(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(f){return f.map((g=>(function(x){return new Rx(vf(x.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(g)))})(t.orderBy));let o=null;t.limit&&(o=(function(f){let g;return g=typeof f=="object"?f.value:f,Zv(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(f){const g=!!f.before,p=f.values||[];return new m0(p,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){const g=!f.before,p=f.values||[];return new m0(p,g)})(t.endAt)),CZ(e,i,a,s,o,"F",l,u)}function iQ(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vf(t.unaryFilter.field);return sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vf(t.unaryFilter.field);return sn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vf(t.unaryFilter.field);return sn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=vf(t.unaryFilter.field);return sn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return sn.create(vf(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Dn.create(t.compositeFilter.filters.map((r=>MF(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt(1026)}})(t.compositeFilter.op))})(n):vt(30097,{filter:n})}function sQ(n){return qZ[n]}function aQ(n){return ZZ[n]}function oQ(n){return QZ[n]}function xf(n){return{fieldPath:n.canonicalString()}}function vf(n){return lr.fromServerFormat(n.fieldPath)}function NF(n){return n instanceof sn?(function(t){if(t.op==="=="){if(FM(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NAN"}};if(DM(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FM(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NOT_NAN"}};if(DM(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xf(t.field),op:aQ(t.op),value:t.value}}})(n):n instanceof Dn?(function(t){const r=t.getFilters().map((i=>NF(i)));return r.length===1?r[0]:{compositeFilter:{op:oQ(t.op),filters:r}}})(n):vt(54877,{filter:n})}function lQ(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function LF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class wl{constructor(e,t,r,i,s=Ct.min(),a=Ct.min(),o=Or.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new wl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OF{constructor(e){this.yt=e}}function cQ(n,e){let t;if(e.document)t=tQ(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),i=Hh(e.noDocument.readTime);t=yr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return vt(56709);{const r=at.fromSegments(e.unknownDocument.path),i=Hh(e.unknownDocument.version);t=yr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new On(i[0],i[1]);return Ct.fromTimestamp(s)})(e.readTime)),t}function e3(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:kx(s,a.key),fields:a.data.value.mapValue.fields,updateTime:v0(s,a.version.toTimestamp()),createTime:v0(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wh(e.version)};else{if(!e.isUnknownDocument())return vt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Wh(e.version)}}return r}function Nx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hh(n){const e=new On(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function lh(n,e){const t=(e.baseMutations||[]).map((s=>$T(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>$T(n.yt,s))),i=On.fromMillis(e.localWriteTimeMs);return new rb(e.batchId,i,t,r)}function tm(n){const e=Hh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Hh(n.lastLimboFreeSnapshotVersion):Ct.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return bt(a===1,1966,{count:a}),Sa(rE(bF(s.documents[0])))})(n.query):(function(s){return Sa(kF(s))})(n.query),new wl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Or.fromBase64String(n.resumeToken))}function DF(n,e){const t=Wh(e.snapshotVersion),r=Wh(e.lastLimboFreeSnapshotVersion);let i;i=Cx(e.target)?CF(n.yt,e.target):PF(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$h(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function FF(n){const e=kF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?GT(e,e.limit,"L"):e}function rS(n,e){return new sb(e.largestBatchId,$T(n.yt,e.overlayMutation))}function t3(n,e){const t=e.path.lastSegment();return[n,Gi(e.path.popLast()),t]}function n3(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Wh(r.readTime),documentKey:Gi(r.documentKey.path),largestBatchId:r.largestBatchId}}class uQ{getBundleMetadata(e,t){return r3(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Hh(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return r3(e).put((function(i){return{bundleId:i.id,createTime:Wh(ts(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return i3(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:FF(s.bundledQuery),readTime:Hh(s.readTime)}})(r)}))}saveNamedQuery(e,t){return i3(e).put((function(i){return{name:i.name,readTime:Wh(ts(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function r3(n){return qr(n,Qv)}function i3(n){return qr(n,Jv)}class cE{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new cE(e,r)}getOverlay(e,t){return jg(e).get(t3(this.userId,t)).next((r=>r?rS(this.serializer,r):null))}getOverlays(e,t){const r=No();return ue.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const o=new sb(t,a);i.push(this.St(e,o))})),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(Gi(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(jg(e).Z(MT,o))})),ue.waitFor(s)}getOverlaysForCollection(e,t,r){const i=No(),s=Gi(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return jg(e).J(MT,a).next((o=>{for(const l of o){const u=rS(this.serializer,l);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=No();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jg(e).ee({index:j6,range:o},((l,u,h)=>{const f=rS(this.serializer,u);s.size()<i||f.largestBatchId===a?(s.set(f.getKey(),f),a=f.largestBatchId):h.done()})).next((()=>s))}St(e,t){return jg(e).put((function(i,s,a){const[o,l,u]=t3(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Mx(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function jg(n){return qr(n,eE)}class hQ{bt(e){return qr(e,qA)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Or.fromUint8Array(r):Or.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ch{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ap(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Vl(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Gl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?q6(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):nE(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):vt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=f0,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(er(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),at.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ch.Kt=new ch;const rf=255;function dQ(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function s3(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=dQ(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class fQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=s3(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=s3(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(rf),this.sn(255)}_n(){this.an(rf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===rf?(this.sn(rf),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===rf?(this.an(rf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class gQ{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class mQ{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vg{constructor(){this.cn=new fQ,this.ln=new gQ(this.cn),this.hn=new mQ(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class uh{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new uh(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:O_(this.En),directionalValue:O_(this.dn),orderedDocumentKey:O_(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Tc(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=a3(n.En,e.En),t!==0?t:(t=a3(n.dn,e.dn),t!==0?t:at.comparator(n.In,e.In)))}function a3(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function O_(n){return OD()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function o3(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class l3{constructor(e){this.mn=new jn(((t,r)=>lr.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(bt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=CT(e);if(t!==void 0&&!this.wn(t))return!1;const r=th(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new jn(lr.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new b_(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new b_(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new b_(r.field,r.dir==="asc"?0:1)));return new Sx(Sx.UNKNOWN_ID,this.collectionId,t,sp.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function jF(n){if(bt(n instanceof sn||n instanceof Dn,20012),n instanceof sn){if(n instanceof sF){const t=n.value.arrayValue?.values?.map((r=>sn.create(n.field,"==",r)))||[];return Dn.create(t,"or")}return n}const e=n.filters.map((t=>jF(t)));return Dn.create(e,n.op)}function pQ(n){if(n.getFilters().length===0)return[];const e=KT(jF(n));return bt(VF(e),7391),WT(e)||HT(e)?[e]:e.getFilters()}function WT(n){return n instanceof sn}function HT(n){return n instanceof Dn&&tb(n)}function VF(n){return WT(n)||HT(n)||(function(t){if(t instanceof Dn&&DT(t)){for(const r of t.getFilters())if(!WT(r)&&!HT(r))return!1;return!0}return!1})(n)}function KT(n){if(bt(n instanceof sn||n instanceof Dn,34018),n instanceof sn)return n;if(n.filters.length===1)return KT(n.filters[0]);const e=n.filters.map((r=>KT(r)));let t=Dn.create(e,n.op);return t=Lx(t),VF(t)?t:(bt(t instanceof Dn,64498),bt(p0(t),40251),bt(t.filters.length>1,57927),t.filters.reduce(((r,i)=>lb(r,i))))}function lb(n,e){let t;return bt(n instanceof sn||n instanceof Dn,38388),bt(e instanceof sn||e instanceof Dn,25473),t=n instanceof sn?e instanceof sn?(function(i,s){return Dn.create([i,s],"and")})(n,e):c3(n,e):e instanceof sn?c3(e,n):(function(i,s){if(bt(i.filters.length>0&&s.filters.length>0,48005),p0(i)&&p0(s))return nF(i,s.getFilters());const a=DT(i)?i:s,o=DT(i)?s:i,l=a.filters.map((u=>lb(u,o)));return Dn.create(l,"or")})(n,e),Lx(t)}function c3(n,e){if(p0(e))return nF(e,n.getFilters());{const t=e.filters.map((r=>lb(n,r)));return Dn.create(t,"or")}}function Lx(n){if(bt(n instanceof sn||n instanceof Dn,11850),n instanceof sn)return n;const e=n.getFilters();if(e.length===1)return Lx(e[0]);if(eF(n))return n;const t=e.map((i=>Lx(i))),r=[];return t.forEach((i=>{i instanceof sn?r.push(i):i instanceof Dn&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Dn.create(r,n.op)}class yQ{constructor(){this.Cn=new cb}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Js.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class cb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(Sn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(Sn.comparator)).toArray()}}const u3="IndexedDbIndexManager",Xy=new Uint8Array(0);class _Q{constructor(e,t){this.databaseId=t,this.vn=new cb,this.Fn=new Wl((r=>$h(r)),((r,i)=>a1(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:Gi(i)};return h3(e).put(s)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[A6(t),""],!1,!0);return h3(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Mo(a.parent))}return r}))}addFieldIndex(e,t){const r=Gg(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=af(e);return s.next((o=>{a.put(n3(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Gg(e),i=af(e),s=sf(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Gg(e),r=sf(e),i=af(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return ue.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new l3(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=sf(e);let i=!0;const s=new Map;return ue.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=Qt();const o=[];return ue.forEach(s,((l,u)=>{Xe(u3,`Using index ${(function(A){return`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(l)} to execute ${$h(t)}`);const h=(function(A,N){const D=CT(N);if(D===void 0)return null;for(const B of Px(A,D.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null})(u,l),f=(function(A,N){const D=new Map;for(const B of th(N))for(const k of Px(A,B.fieldPath))switch(k.op){case"==":case"in":D.set(B.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return D.set(B.fieldPath.canonicalString(),k.value),Array.from(D.values())}return null})(u,l),g=(function(A,N){const D=[];let B=!0;for(const k of th(N)){const P=k.kind===0?UM(A,k.fieldPath,A.startAt):zM(A,k.fieldPath,A.startAt);D.push(P.value),B&&(B=P.inclusive)}return new m0(D,B)})(u,l),p=(function(A,N){const D=[];let B=!0;for(const k of th(N)){const P=k.kind===0?zM(A,k.fieldPath,A.endAt):UM(A,k.fieldPath,A.endAt);D.push(P.value),B&&(B=P.inclusive)}return new m0(D,B)})(u,l),x=this.On(l,u,g),v=this.On(l,u,p),w=this.Nn(l,u,f),T=this.Bn(l.indexId,h,x,g.inclusive,v,p.inclusive,w);return ue.forEach(T,(I=>r.Y(I,t.limit).next((A=>{A.forEach((N=>{const D=at.fromSegments(N.documentKey);a.has(D)||(a=a.add(D),o.push(D))}))}))))})).next((()=>o))}return ue.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=pQ(Dn.create(e.filters,"and")).map((r=>jT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),h=[];for(let f=0;f<l;++f){const g=t?this.Ln(t[f/u]):Xy,p=this.kn(e,g,r[f%u],i),x=this.qn(e,g,s[f%u],a),v=o.map((w=>this.kn(e,g,w,!0)));h.push(...this.createRange(p,x,v))}return h}kn(e,t,r,i){const s=new uh(e,at.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new uh(e,at.empty(),t,r);return i?s.An():s}xn(e,t){const r=new l3(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return ue.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(l){let u=new jn(lr.comparator),h=!1;for(const f of l.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:u=u.add(g.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Vg;for(const i of th(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);ch.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Vg;return ch.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Vg;return ch.Kt.Dt(dp(this.databaseId,t),r.Pn((function(s){const a=th(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Vg);let s=0;for(const a of th(e)){const o=r[s++];for(const l of i)if(this.Un(t,a.fieldPath)&&fp(o))i=this.Kn(i,a,o);else{const u=l.Pn(a.kind);ch.Kt.Dt(o,u)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Vg;l.seed(o.un()),ch.Kt.Dt(a,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof sn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Gg(e),i=af(e);return(t?r.J(kT,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return ue.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(h,f){const g=f?new sp(f.sequenceNumber,new Js(Hh(f.readTime),new at(Mo(f.documentKey)),f.largestBatchId)):sp.empty(),p=h.fields.map((([x,v])=>new b_(lr.fromServerFormat(x),v)));return new Sx(h.indexId,h.collectionGroup,p,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Wt(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Gg(e),s=af(e);return this.Gn(e).next((a=>i.J(kT,IDBKeyRange.bound(t,t)).next((o=>ue.forEach(o,(l=>s.put(n3(l.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?ue.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),ue.forEach(o,(l=>this.zn(e,i,l).next((u=>{const h=this.jn(s,l);return u.isEqual(h)?ue.resolve():this.Jn(e,s,l,u,h)})))))))}))}Hn(e,t,r,i){return sf(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return sf(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=sf(e);let s=new jn(Tc);return i.ee({index:F6,range:IDBKeyRange.only([r.indexId,this.uid,O_(this.$n(r,t))])},((a,o)=>{s=s.add(new uh(r.indexId,t,o3(o.arrayValue),o3(o.directionalValue)))})).next((()=>s))}jn(e,t){let r=new jn(Tc);const i=this.Qn(t,e);if(i==null)return r;const s=CT(t);if(s!=null){const a=e.data.field(s.fieldPath);if(fp(a))for(const o of a.arrayValue.values||[])r=r.add(new uh(t.indexId,e.key,this.Ln(o),i))}else r=r.add(new uh(t.indexId,e.key,Xy,i));return r}Jn(e,t,r,i,s){Xe(u3,"Updating index entries for document '%s'",t.key);const a=[];return(function(l,u,h,f,g){const p=l.getIterator(),x=u.getIterator();let v=nf(p),w=nf(x);for(;v||w;){let T=!1,I=!1;if(v&&w){const A=h(v,w);A<0?I=!0:A>0&&(T=!0)}else v!=null?I=!0:T=!0;T?(f(w),w=nf(x)):I?(g(v),v=nf(p)):(v=nf(p),w=nf(x))}})(i,s,Tc,(o=>{a.push(this.Hn(e,t,r,o))}),(o=>{a.push(this.Yn(e,t,r,o))})),ue.waitFor(a)}Gn(e){let t=1;return af(e).ee({index:D6,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,o)=>Tc(a,o))).filter(((a,o,l)=>!o||Tc(a,l[o-1])!==0));const i=[];i.push(e);for(const a of r){const o=Tc(a,e),l=Tc(a,t);if(o===0)i[0]=e.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,Xy,at.empty()),l=i[a+1].Vn(this.uid,Xy,at.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,t){return Tc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(d3)}getMinOffset(e,t){return ue.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||vt(44426))))).next(d3)}}function h3(n){return qr(n,cp)}function sf(n){return qr(n,ym)}function Gg(n){return qr(n,XA)}function af(n){return qr(n,pm)}function d3(n){bt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;HA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Js(e.readTime,e.documentKey,t)}const f3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GF=41943040;class Li{static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function BF(n,e,t){const r=n.store(Ba),i=n.store(c0),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.ee({range:a},((h,f,g)=>(o++,g.delete())));s.push(l.next((()=>{bt(o===1,47070,{batchId:t.batchId})})));const u=[];for(const h of t.mutations){const f=N6(e,h.key.path,t.batchId);s.push(i.delete(f)),u.push(h.key)}return ue.waitFor(s).next((()=>u))}function Ox(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw vt(14731);e=n.noDocument}return JSON.stringify(e).length}Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(GF,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class uE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){bt(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new uE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).ee({index:yh,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=Ef(e),a=Ic(e);return a.add({}).next((o=>{bt(typeof o=="number",49019);const l=new rb(o,t,r,i),u=(function(p,x,v){const w=v.baseMutations.map((I=>Mx(p.yt,I))),T=v.mutations.map((I=>Mx(p.yt,I)));return{userId:x,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:w,mutations:T}})(this.serializer,this.userId,l),h=[];let f=new jn(((g,p)=>Wt(g.canonicalString(),p.canonicalString())));for(const g of i){const p=N6(this.userId,g.key.path,o);f=f.add(g.key.path.popLast()),h.push(a.put(u)),h.push(s.put(p,Kq))}return f.forEach((g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=l.keys()})),ue.waitFor(h).next((()=>l))}))}lookupMutationBatch(e,t){return Ic(e).get(t).next((r=>r?(bt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),lh(this.serializer,r)):null))}er(e,t){return this.Xn[t]?ue.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ic(e).ee({index:yh,range:i},((a,o,l)=>{o.userId===this.userId&&(bt(o.batchId>=r,47524,{tr:r}),s=lh(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Th;return Ic(e).ee({index:yh,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Th],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).J(yh,t).next((r=>r.map((i=>lh(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=R_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Ef(e).ee({range:i},((a,o,l)=>{const[u,h,f]=a,g=Mo(h);if(u===this.userId&&t.path.isEqual(g))return Ic(e).get(f).next((p=>{if(!p)throw vt(61480,{nr:a,batchId:f});bt(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:f}),s.push(lh(this.serializer,p))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Wt);const i=[];return t.forEach((s=>{const a=R_(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Ef(e).ee({range:o},((u,h,f)=>{const[g,p,x]=u,v=Mo(p);g===this.userId&&s.path.isEqual(v)?r=r.add(x):f.done()}));i.push(l)})),ue.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=R_(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new jn(Wt);return Ef(e).ee({range:a},((l,u,h)=>{const[f,g,p]=l,x=Mo(g);f===this.userId&&r.isPrefixOf(x)?x.length===i&&(o=o.add(p)):h.done()})).next((()=>this.rr(e,o)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(Ic(e).get(s).next((a=>{if(a===null)throw vt(35274,{batchId:s});bt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(lh(this.serializer,a))})))})),ue.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return BF(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),ue.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return Ef(e).ee({range:r},((s,a,o)=>{if(s[0]===this.userId){const l=Mo(s[1]);i.push(l)}else o.done()})).next((()=>{bt(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return UF(e,this.userId,t)}_r(e){return zF(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Th,lastStreamToken:""}))}}function UF(n,e,t){const r=R_(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Ef(n).ee({range:s,X:!0},((o,l,u)=>{const[h,f,g]=o;h===e&&f===i&&(a=!0),u.done()})).next((()=>a))}function Ic(n){return qr(n,Ba)}function Ef(n){return qr(n,c0)}function zF(n){return qr(n,op)}class Kh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Kh(0)}static cr(){return new Kh(-1)}}class xQ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Kh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ct.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>of(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(bt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return of(e).ee(((a,o)=>{const l=tm(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>ue.waitFor(s))).next((()=>i))}forEachTarget(e,t){return of(e).ee(((r,i)=>{const s=tm(i);t(s)}))}lr(e){return g3(e).get(Ax).next((t=>(bt(t!==null,2888),t)))}hr(e,t){return g3(e).put(Ax,t)}Pr(e,t){return of(e).put(DF(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=$h(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return of(e).ee({range:i,index:O6},((a,o,l)=>{const u=tm(o);a1(t,u.target)&&(s=u,l.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Dc(e);return t.forEach((a=>{const o=Gi(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))})),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Dc(e);return ue.forEach(t,(s=>{const a=Gi(s.path);return ue.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Dc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Dc(e);let s=Qt();return i.ee({range:r,X:!0},((a,o,l)=>{const u=Mo(a[1]),h=new at(u);s=s.add(h)})).next((()=>s))}containsKey(e,t){const r=Gi(t.path),i=IDBKeyRange.bound([r],[A6(r)],!1,!0);let s=0;return Dc(e).ee({index:YA,X:!0,range:i},(([a,o],l,u)=>{a!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return of(e).get(t).next((r=>r?tm(r):null))}}function of(n){return qr(n,u0)}function g3(n){return qr(n,Ih)}function Dc(n){return qr(n,h0)}const m3="LruGarbageCollector",vQ=1048576;function p3([n,e],[t,r]){const i=Wt(n,t);return i===0?Wt(e,r):i}class EQ{constructor(e){this.Ir=e,this.buffer=new jn(p3),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();p3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $F{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Xe(m3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vu(t)?Xe(m3,"Ignoring IndexedDB error during garbage collection: ",t):await ld(t)}await this.Vr(3e5)}))}}class wQ{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Ea.ce);const r=new EQ(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(f3)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f3):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,o,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i)))).next((f=>(r=f,o=Date.now(),this.removeTargets(e,r,t)))).next((f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),yf()<=rn.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f}))))}}function WF(n,e){return new wQ(n,e)}class SQ{constructor(e,t){this.db=e,this.garbageCollector=WF(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return qy(e,r)}removeReference(e,t,r){return qy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qy(e,t)}br(e,t){return(function(i,s){let a=!1;return zF(i).te((o=>UF(i,o,s).next((l=>(l&&(a=!0),ue.resolve(!l)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const l=this.br(e,a).next((u=>{if(!u)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Ct.min()),Dc(e).delete((function(f){return[0,Gi(f.path)]})(a)))))}));i.push(l)}})).next((()=>ue.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qy(e,t)}Sr(e,t){const r=Dc(e);let i,s=Ea.ce;return r.ee({index:YA},(([a,o],{path:l,sequenceNumber:u})=>{a===0?(s!==Ea.ce&&t(new at(Mo(i)),s),s=u,i=l):s=Ea.ce})).next((()=>{s!==Ea.ce&&t(new at(Mo(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qy(n,e){return Dc(n).put((function(r,i){return{targetId:0,path:Gi(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class HF{constructor(){this.changes=new Wl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xu(e).put(r)}removeEntry(e,t,r){return Xu(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Nx(a),o[o.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=yr.newInvalidDocument(t);return Xu(e).ee({index:C_,range:IDBKeyRange.only(Bg(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:yr.newInvalidDocument(t)};return Xu(e).ee({index:C_,range:IDBKeyRange.only(Bg(t))},((i,s)=>{r={document:this.Cr(t,s),size:Ox(s)}})).next((()=>r))}getEntries(e,t){let r=Ys();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=Ys(),i=new tr(at.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,Ox(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return ue.resolve();let i=new jn(x3);t.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(Bg(i.first()),Bg(i.last())),a=i.getIterator();let o=a.getNext();return Xu(e).ee({index:C_,range:s},((l,u,h)=>{const f=at.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&x3(o,f)<0;)r(o,null),o=a.getNext();o&&o.isEqual(f)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?h.j(Bg(o)):h.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Nx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xu(e).J(IDBKeyRange.bound(o,l,!0)).next((u=>{s?.incrementDocumentReadCount(u.length);let h=Ys();for(const f of u){const g=this.Cr(at.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(l1(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h}))}getAllFromCollectionGroup(e,t,r,i){let s=Ys();const a=_3(t,r),o=_3(t,Js.max());return Xu(e).ee({index:L6,range:IDBKeyRange.bound(a,o,!0)},((l,u,h)=>{const f=this.Cr(at.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()})).next((()=>s))}newChangeBuffer(e){return new IQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return y3(e).get(PT).next((t=>(bt(!!t,20021),t)))}Dr(e,t){return y3(e).put(PT,t)}Cr(e,t){if(t){const r=cQ(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ct.min())))return r}return yr.newInvalidDocument(e)}}function KF(n){return new TQ(n)}class IQ extends HF{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Wl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new jn(((s,a)=>Wt(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=e3(this.Nr.serializer,a);i=i.add(s.path.popLast());const u=Ox(l);r+=u-o.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=e3(this.Nr.serializer,a.convertToNoDocument(Ct.min()));t.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function y3(n){return qr(n,lp)}function Xu(n){return qr(n,Ix)}function Bg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _3(n,e){const t=e.documentKey.path.toArray();return[n,Nx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function x3(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Wt(t[s],r[s]),i)return i;return i=Wt(t.length,r.length),i||(i=Wt(t[t.length-2],r[r.length-2]),i||Wt(t[t.length-1],r[r.length-1]))}class AQ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class YF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Em(r.mutation,i,Es.empty(),On.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Qt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Qt()){const i=No();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Jg();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=No();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Qt())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,r,i){let s=Ys();const a=vm(),o=(function(){return vm()})();return t.forEach(((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Hl)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Em(h.mutation,u,h.mutation.getFieldMask(),On.now())):a.set(u.key,Es.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,h)=>a.set(u,h))),t.forEach(((u,h)=>o.set(u,new AQ(h,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=vm();let i=new tr(((a,o)=>a-o)),s=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||Es.empty();h=o.applyToLocalView(u,h),r.set(l,h);const f=(i.get(o.batchId)||Qt()).add(l);i=i.insert(o.batchId,f)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,h=l.value,f=hF();h.forEach((g=>{if(!s.has(g)){const p=_F(t.get(g),r.get(g));p!==null&&f.set(g,p),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ue.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return at.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ue.resolve(No());let o=ip,l=s;return a.next((u=>ue.forEach(u,((h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(h)?ue.resolve():this.remoteDocumentCache.getEntry(e,h).next((g=>{l=l.insert(h,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,Qt()))).next((h=>({batchId:o,changes:uF(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next((r=>{let i=Jg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Jg();return this.indexManager.getCollectionParents(e,s).next((o=>ue.forEach(o,(l=>{const u=(function(f,g){return new o1(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((h=>{h.forEach(((f,g)=>{a=a.insert(f,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,yr.newInvalidDocument(h)))}));let o=Jg();return a.forEach(((l,u)=>{const h=s.get(l);h!==void 0&&Em(h.mutation,u,Es.empty(),On.now()),l1(t,u)&&(o=o.insert(l,u))})),o}))}}class bQ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ts(i.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:FF(i.bundledQuery),readTime:ts(i.readTime)}})(t)),ue.resolve()}}class RQ{constructor(){this.overlays=new tr(at.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=No();return ue.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=No(),s=t.length+1,a=new at(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tr(((u,h)=>u-h));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=No(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=No(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>o.set(u,h))),!(o.size()>=i)););return ue.resolve(o)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new sb(t,r));let s=this.qr.get(t);s===void 0&&(s=Qt(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class CQ{constructor(){this.sessionToken=Or.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}class ub{constructor(){this.Qr=new jn(ti.$r),this.Ur=new jn(ti.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ti(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ti(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new at(new Sn([])),r=new ti(t,e),i=new ti(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new at(new Sn([])),r=new ti(t,e),i=new ti(t,e+1);let s=Qt();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new ti(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return at.comparator(e.key,t.key)||Wt(e.Yr,t.Yr)}static Kr(e,t){return Wt(e.Yr,t.Yr)||at.comparator(e.key,t.key)}}class PQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jn(ti.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rb(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new ti(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ue.resolve(a)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Th:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),i=new ti(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Wt);return t.forEach((i=>{const s=new ti(i,0),a=new ti(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{r=r.add(o.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;at.isDocumentKey(s)||(s=s.child(""));const a=new ti(new at(s),0);let o=new jn(Wt);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)}),a),ue.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){bt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(t.mutations,(i=>{const s=new ti(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new ti(t,0),i=this.Zr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kQ{constructor(e){this.ri=e,this.docs=(function(){return new tr(at.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():yr.newInvalidDocument(t))}getEntries(e,t){let r=Ys();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yr.newInvalidDocument(i))})),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ys();const a=t.path,o=new at(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||HA(C6(h),r)<=0||(i.has(h.key)||l1(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return ue.resolve(s)}getAllFromCollectionGroup(e,t,r,i){vt(9500)}ii(e,t){return ue.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new MQ(this)}getSize(e){return ue.resolve(this.size)}}class MQ extends HF{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class NQ{constructor(e){this.persistence=e,this.si=new Wl((t=>$h(t)),a1),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.oi=0,this._i=new ub,this.targetCount=0,this.ai=Kh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Kh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),ue.waitFor(s).next((()=>i))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),ue.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}class hb{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ea(0),this.li=!1,this.li=!0,this.hi=new CQ,this.referenceDelegate=e(this),this.Pi=new NQ(this),this.indexManager=new yQ,this.remoteDocumentCache=(function(i){return new kQ(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new OF(t),this.Ii=new bQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new PQ(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Xe("MemoryPersistence","Starting transaction:",e);const i=new LQ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class LQ extends k6{constructor(e){super(),this.currentSequenceNumber=e}}class hE{constructor(e){this.persistence=e,this.Ri=new ub,this.Vi=null}static mi(e){return new hE(e)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const i=at.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Ct.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dx{constructor(e,t){this.persistence=e,this.pi=new Wl((r=>Gi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=WF(this,t)}static mi(e,t){return new Dx(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?ue.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(r++,s.removeEntry(a,Ct.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=k_(e.data.value)),t}br(e,t,r){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ue.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class OQ{constructor(e){this.serializer=e}k(e,t,r,i){const s=new qv("createOrUpgrade",t);r<1&&i>=1&&((function(l){l.createObjectStore(s1)})(e),(function(l){l.createObjectStore(op,{keyPath:Hq}),l.createObjectStore(Ba,{keyPath:PM,autoIncrement:!0}).createIndex(yh,kM,{unique:!0}),l.createObjectStore(c0)})(e),v3(e),(function(l){l.createObjectStore(nh)})(e));let a=ue.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(h0),l.deleteObjectStore(u0),l.deleteObjectStore(Ih)})(e),v3(e)),a=a.next((()=>(function(l){const u=l.store(Ih),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return u.put(Ax,h)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(l,u){return u.store(Ba).J().next((f=>{l.deleteObjectStore(Ba),l.createObjectStore(Ba,{keyPath:PM,autoIncrement:!0}).createIndex(yh,kM,{unique:!0});const g=u.store(Ba),p=f.map((x=>g.put(x)));return ue.waitFor(p)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore(d0,{keyPath:tZ})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore(lp)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore(Qv,{keyPath:nZ})})(e),(function(l){l.createObjectStore(Jv,{keyPath:rZ})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(l){const u=l.createObjectStore(eE,{keyPath:uZ});u.createIndex(MT,hZ,{unique:!1}),u.createIndex(j6,dZ,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(l){const u=l.createObjectStore(Ix,{keyPath:Yq});u.createIndex(C_,Xq),u.createIndex(L6,qq)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(nh)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore(XA,{keyPath:iZ,autoIncrement:!0}).createIndex(kT,sZ,{unique:!1}),l.createObjectStore(pm,{keyPath:aZ}).createIndex(D6,oZ,{unique:!1}),l.createObjectStore(ym,{keyPath:lZ}).createIndex(F6,cZ,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(pm).clear()})).next((()=>{t.objectStore(ym).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore(qA,{keyPath:fZ})})(e)}))),r<18&&i>=18&&OD()&&(a=a.next((()=>{t.objectStore(pm).clear()})).next((()=>{t.objectStore(ym).clear()}))),a}wi(e){let t=0;return e.store(nh).ee(((r,i)=>{t+=Ox(i)})).next((()=>{const r={byteSize:t};return e.store(lp).put(PT,r)}))}yi(e){const t=e.store(op),r=e.store(Ba);return t.J().next((i=>ue.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,Th],[s.userId,s.lastAcknowledgedBatchId]);return r.J(yh,a).next((o=>ue.forEach(o,(l=>{bt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=lh(this.serializer,l);return BF(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(h0),r=e.store(nh);return e.store(Ih).get(Ax).next((i=>{const s=[];return r.ee(((a,o)=>{const l=new Sn(a),u=(function(f){return[0,Gi(f)]})(l);s.push(t.get(u).next((h=>h?ue.resolve():(f=>t.put({targetId:0,path:Gi(f),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>ue.waitFor(s)))}))}bi(e,t){e.createObjectStore(cp,{keyPath:eZ});const r=t.store(cp),i=new cb,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Gi(l)})}};return t.store(nh).ee({X:!0},((a,o)=>{const l=new Sn(a);return s(l.popLast())})).next((()=>t.store(c0).ee({X:!0},(([a,o,l],u)=>{const h=Mo(o);return s(h.popLast())}))))}Di(e){const t=e.store(u0);return t.ee(((r,i)=>{const s=tm(i),a=DF(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(nh),i=[];return r.ee(((s,a)=>{const o=t.store(Ix),l=(function(f){return f.document?new at(Sn.fromString(f.document.name).popFirst(5)):f.noDocument?at.fromSegments(f.noDocument.path):f.unknownDocument?at.fromSegments(f.unknownDocument.path):vt(36783)})(a).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))})).next((()=>ue.waitFor(i)))}Fi(e,t){const r=t.store(Ba),i=KF(this.serializer),s=new hb(hE.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((l=>{let u=o.get(l.userId)??Qt();lh(this.serializer,l).keys().forEach((h=>u=u.add(h))),o.set(l.userId,u)})),ue.forEach(o,((l,u)=>{const h=new _i(u),f=cE.wt(this.serializer,h),g=s.getIndexManager(h),p=uE.wt(h,this.serializer,g,s.referenceDelegate);return new YF(i,p,f,g).recalculateAndSaveOverlaysForDocumentKeys(new NT(t,Ea.ce),l).next()}))}))}}function v3(n){n.createObjectStore(h0,{keyPath:Qq}).createIndex(YA,Jq,{unique:!0}),n.createObjectStore(u0,{keyPath:"targetId"}).createIndex(O6,Zq,{unique:!0}),n.createObjectStore(Ih)}const Ac="IndexedDbPersistence",iS=18e5,sS=5e3,aS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",DQ="main";class db{constructor(e,t,r,i,s,a,o,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!db.v())throw new st(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SQ(this,i),this.$i=t+DQ,this.serializer=new OF(l),this.Ui=new Jc(this.$i,this.Ni,new OQ(this.serializer)),this.hi=new hQ,this.Pi=new xQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KF(this.serializer),this.Ii=new uQ,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&Ji(Ac,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(ke.FAILED_PRECONDITION,aS);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ea(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Zy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(vu(e))return Xe(Ac,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe(Ac,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ug(e).get(tf).next((t=>ue.resolve(this.es(t))))}ts(e){return Zy(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,iS)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=qr(t,d0);return r.J().next((i=>{const s=this.ss(i,iS),a=i.filter((o=>s.indexOf(o)===-1));return ue.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ue.resolve(!0):Ug(e).get(tf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sS)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new st(ke.FAILED_PRECONDITION,aS);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zy(e).J().next((r=>this.ss(r,sS).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Xe(Ac,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[s1,d0],(e=>{const t=new NT(e,Ea.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Zy(e).J().next((t=>this.ss(t,iS).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return uE.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _Q(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return cE.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Xe(Ac,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?pZ:l===17?U6:l===16?mZ:l===15?ZA:l===14?B6:l===13?G6:l===12?gZ:l===11?V6:void vt(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new NT(o,this.ci?this.ci.next():Ea.ce),t==="readwrite-primary"?this.Hi(a).next((l=>!!l||this.Yi(a))).next((l=>{if(!l)throw Ji(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new st(ke.FAILED_PRECONDITION,P6);return r(a)})).next((l=>this.Xi(a).next((()=>l)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return Ug(e).get(tf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sS)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new st(ke.FAILED_PRECONDITION,aS)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ug(e).put(tf,t)}static v(){return Jc.v()}Zi(e){const t=Ug(e);return t.get(tf).next((r=>this.es(r)?(Xe(Ac,"Releasing primary lease."),t.delete(tf)):ue.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ji(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;LD()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Xe(Ac,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ji(Ac,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ji("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ug(n){return qr(n,s1)}function Zy(n){return qr(n,d0)}function FQ(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Qt(),i=Qt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fb(e,t.fromCache,r,i)}}class jQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class XF{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return LD()?8:M6(Yr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new jQ;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(yf()<=rn.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",_f(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(yf()<=rn.DEBUG&&Xe("QueryEngine","Query:",_f(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(yf()<=rn.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",_f(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sa(t))):ue.resolve())}ys(e,t){if($M(t))return ue.resolve(null);let r=Sa(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=GT(t,null,"F"),r=Sa(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=Qt(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,GT(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,i){return $M(t)||i.isEqual(Ct.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?ue.resolve(null):(yf()<=rn.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_f(t)),this.vs(e,a,t,Vq(i,ip)).next((o=>o)))}))}Ds(e,t){let r=new jn(lF(e));return t.forEach(((i,s)=>{l1(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return yf()<=rn.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",_f(t)),this.ps.getDocumentsMatchingQuery(e,t,Js.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const gb="LocalStore",VQ=3e8;class GQ{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new tr(Wt),this.xs=new Wl((s=>$h(s)),a1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YF(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function qF(n,e,t,r){return new GQ(n,e,t,r)}async function ZF(n,e){const t=Ht(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],o=[];let l=Qt();for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function BQ(n,e){const t=Ht(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,l,u,h){const f=u.batch,g=f.keys();let p=ue.resolve();return g.forEach((x=>{p=p.next((()=>h.getEntry(l,x))).next((v=>{const w=u.docVersions.get(x);bt(w!==null,48541),v.version.compareTo(w)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))}))})),p.next((()=>o.mutationQueue.removeMutationBatch(l,f)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let l=Qt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function QF(n){const e=Ht(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function UQ(n,e){const t=Ht(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((h,f)=>{const g=i.get(f);if(!g)return;o.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(s,h.addedDocuments,f))));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Or.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,r)),i=i.insert(f,p),(function(v,w,T){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=VQ?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(g,p,h)&&o.push(t.Pi.updateTargetData(s,p))}));let l=Ys(),u=Qt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))})),o.push(zQ(s,a,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(Ct.min())){const h=t.Pi.getLastRemoteSnapshotVersion(s).next((f=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));o.push(h)}return ue.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Ms=i,s)))}function zQ(n,e,t){let r=Qt(),i=Qt();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Ys();return t.forEach(((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ct.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Xe(gb,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)})),{ks:a,qs:i}}))}function $Q(n,e){const t=Ht(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Th),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function WQ(n,e){const t=Ht(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,ue.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new wl(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function YT(n,e,t){const r=Ht(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!vu(a))throw a;Xe(gb,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function E3(n,e,t){const r=Ht(n);let i=Ct.min(),s=Qt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,u,h){const f=Ht(l),g=f.xs.get(h);return g!==void 0?ue.resolve(f.Ms.get(g)):f.Pi.getTargetData(u,h)})(r,a,Sa(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Ct.min(),t?s:Qt()))).next((o=>(HQ(r,kZ(e),o),{documents:o,Qs:s})))))}function HQ(n,e,t){let r=n.Os.get(e)||Ct.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class w3{constructor(){this.activeTargetIds=FZ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JF{constructor(){this.Mo=new w3,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w3,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KQ{Oo(e){}shutdown(){}}const S3="ConnectivityMonitor";class T3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Xe(S3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Xe(S3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qy=null;function XT(){return Qy===null?Qy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qy++,"0x"+Qy.toString(16)}const oS="RestConnection",YQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XQ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===bx?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=XT(),o=this.zo(e,t.toUriEncodedString());Xe(oS,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),h=ad(u);return this.Jo(e,o,l,r,h).then((f=>(Xe(oS,`Received RPC '${e}' ${a}: `,f),f)),(f=>{throw Uh(oS,`RPC '${e}' ${a} failed with error: `,f,"url: ",o,"request:",r),f}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+N0})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=YQ[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class qQ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Pi="WebChannelConnection";class ZQ extends XQ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=XT();return new Promise(((o,l)=>{const u=new x6;u.setWithCredentials(!0),u.listenOnce(v6.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case A_.NO_ERROR:const f=u.getResponseJson();Xe(Pi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case A_.TIMEOUT:Xe(Pi,`RPC '${e}' ${a} timed out`),l(new st(ke.DEADLINE_EXCEEDED,"Request time out"));break;case A_.HTTP_ERROR:const g=u.getStatus();if(Xe(Pi,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const x=p?.error;if(x&&x.status&&x.message){const v=(function(T){const I=T.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(I)>=0?I:ke.UNKNOWN})(x.status);l(new st(v,x.message))}else l(new st(ke.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new st(ke.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Xe(Pi,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Xe(Pi,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",h,r,15)}))}T_(e,t,r){const i=XT(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=S6(),o=w6(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Xe(Pi,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=a.createWebChannel(h,l);this.I_(f);let g=!1,p=!1;const x=new qQ({Yo:w=>{p?Xe(Pi,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(Xe(Pi,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),Xe(Pi,`RPC '${e}' stream ${i} sending:`,w),f.send(w))},Zo:()=>f.close()}),v=(w,T,I)=>{w.listen(T,(A=>{try{I(A)}catch(N){setTimeout((()=>{throw N}),0)}}))};return v(f,Qg.EventType.OPEN,(()=>{p||(Xe(Pi,`RPC '${e}' stream ${i} transport opened.`),x.o_())})),v(f,Qg.EventType.CLOSE,(()=>{p||(p=!0,Xe(Pi,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(f))})),v(f,Qg.EventType.ERROR,(w=>{p||(p=!0,Uh(Pi,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),x.a_(new st(ke.UNAVAILABLE,"The operation could not be completed")))})),v(f,Qg.EventType.MESSAGE,(w=>{if(!p){const T=w.data[0];bt(!!T,16349);const I=T,A=I?.error||I[0]?.error;if(A){Xe(Pi,`RPC '${e}' stream ${i} received error:`,A);const N=A.status;let D=(function(P){const M=kr[P];if(M!==void 0)return EF(M)})(N),B=A.message;D===void 0&&(D=ke.INTERNAL,B="Unknown error status: "+N+" with message "+A.message),p=!0,x.a_(new st(D,B)),f.close()}else Xe(Pi,`RPC '${e}' stream ${i} received:`,T),x.u_(T)}})),v(o,E6.STAT_EVENT,(w=>{w.stat===bT.PROXY?Xe(Pi,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===bT.NOPROXY&&Xe(Pi,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function QQ(){return typeof window<"u"?window:null}function D_(){return typeof document<"u"?document:null}function dE(n){return new JZ(n,!0)}class e8{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const I3="PersistentStream";class t8{constructor(e,t,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new e8(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ke.RESOURCE_EXHAUSTED?(Ji(t.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new st(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Xe(I3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Xe(I3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JQ extends t8{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=nQ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ct.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ct.min():a.readTime?ts(a.readTime):Ct.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=zT(this.serializer),t.addTarget=(function(s,a){let o;const l=a.target;if(o=Cx(l)?{documents:CF(s,l)}:{query:PF(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=TF(s,a.resumeToken);const u=BT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Ct.min())>0){o.readTime=v0(s,a.snapshotVersion.toTimestamp());const u=BT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=iQ(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=zT(this.serializer),t.removeTarget=e,this.q_(t)}}class eJ extends t8{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=rQ(e.writeResults,e.commitTime),r=ts(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=zT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Mx(this.serializer,r)))};this.q_(t)}}class tJ{}class nJ extends tJ{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new st(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,UT(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new st(ke.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,UT(t,r),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(ke.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ji(t),this.aa=!1):Xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Yh="RemoteStore";class iJ{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{cd(this)&&(Xe(Yh,"Restarting streams for network reachability change."),await(async function(l){const u=Ht(l);u.Ea.add(4),await u1(u),u.Ra.set("Unknown"),u.Ea.delete(4),await fE(u)})(this))}))})),this.Ra=new rJ(r,i)}}async function fE(n){if(cd(n))for(const e of n.da)await e(!0)}async function u1(n){for(const e of n.da)await e(!1)}function n8(n,e){const t=Ht(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),_b(t)?yb(t):O0(t).O_()&&pb(t,e))}function mb(n,e){const t=Ht(n),r=O0(t);t.Ia.delete(e),r.O_()&&r8(t,e),t.Ia.size===0&&(r.O_()?r.L_():cd(t)&&t.Ra.set("Unknown"))}function pb(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}O0(n).Y_(e)}function r8(n,e){n.Va.Ue(e),O0(n).Z_(e)}function yb(n){n.Va=new XZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),O0(n).start(),n.Ra.ua()}function _b(n){return cd(n)&&!O0(n).x_()&&n.Ia.size>0}function cd(n){return Ht(n).Ea.size===0}function i8(n){n.Va=void 0}async function sJ(n){n.Ra.set("Online")}async function aJ(n){n.Ia.forEach(((e,t)=>{pb(n,e)}))}async function oJ(n,e){i8(n),_b(n)?(n.Ra.ha(e),yb(n)):n.Ra.set("Unknown")}async function lJ(n,e,t){if(n.Ra.set("Online"),e instanceof SF&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(n,e)}catch(r){Xe(Yh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fx(n,r)}else if(e instanceof L_?n.Va.Ze(e):e instanceof wF?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ct.min()))try{const r=await QF(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(Or.EMPTY_BYTE_STRING,h.snapshotVersion)),r8(s,l);const f=new wl(h.target,l,u,h.sequenceNumber);pb(s,f)})),s.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){Xe(Yh,"Failed to raise snapshot:",r),await Fx(n,r)}}async function Fx(n,e,t){if(!vu(e))throw e;n.Ea.add(1),await u1(n),n.Ra.set("Offline"),t||(t=()=>QF(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Xe(Yh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await fE(n)}))}function s8(n,e){return e().catch((t=>Fx(n,t,e)))}async function h1(n){const e=Ht(n),t=lu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Th;for(;cJ(e);)try{const i=await $Q(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,uJ(e,i)}catch(i){await Fx(e,i)}a8(e)&&o8(e)}function cJ(n){return cd(n)&&n.Ta.length<10}function uJ(n,e){n.Ta.push(e);const t=lu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function a8(n){return cd(n)&&!lu(n).x_()&&n.Ta.length>0}function o8(n){lu(n).start()}async function hJ(n){lu(n).ra()}async function dJ(n){const e=lu(n);for(const t of n.Ta)e.ea(t.mutations)}async function fJ(n,e,t){const r=n.Ta.shift(),i=ib.from(r,e,t);await s8(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await h1(n)}async function gJ(n,e){e&&lu(n).X_&&await(async function(r,i){if((function(a){return HZ(a)&&a!==ke.ABORTED})(i.code)){const s=r.Ta.shift();lu(r).B_(),await s8(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await h1(r)}})(n,e),a8(n)&&o8(n)}async function A3(n,e){const t=Ht(n);t.asyncQueue.verifyOperationInProgress(),Xe(Yh,"RemoteStore received new credentials");const r=cd(t);t.Ea.add(3),await u1(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await fE(t)}async function mJ(n,e){const t=Ht(n);e?(t.Ea.delete(2),await fE(t)):e||(t.Ea.add(2),await u1(t),t.Ra.set("Unknown"))}function O0(n){return n.ma||(n.ma=(function(t,r,i){const s=Ht(t);return s.sa(),new JQ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:sJ.bind(null,n),t_:aJ.bind(null,n),r_:oJ.bind(null,n),H_:lJ.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),_b(n)?yb(n):n.Ra.set("Unknown")):(await n.ma.stop(),i8(n))}))),n.ma}function lu(n){return n.fa||(n.fa=(function(t,r,i){const s=Ht(t);return s.sa(),new eJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:hJ.bind(null,n),r_:gJ.bind(null,n),ta:dJ.bind(null,n),na:fJ.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await h1(n)):(await n.fa.stop(),n.Ta.length>0&&(Xe(Yh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class xb{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Do,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new xb(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vb(n,e){if(Ji("AsyncQueue",`${e}: ${n}`),vu(n))return new st(ke.UNAVAILABLE,`${e}: ${n}`);throw n}class Uf{static emptySet(e){return new Uf(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=Jg(),this.sortedSet=new tr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Uf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class b3{constructor(){this.ga=new tr(at.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):vt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class E0{constructor(e,t,r,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new E0(e,t,Uf.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class pJ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yJ{constructor(){this.queries=R3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ht(t),s=i.queries;i.queries=R3(),s.forEach(((a,o)=>{for(const l of o.Sa)l.onError(r)}))})(this,new st(ke.ABORTED,"Firestore shutting down"))}}function R3(){return new Wl((n=>oF(n)),iE)}async function l8(n,e){const t=Ht(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new pJ,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=vb(a,`Initialization of query '${_f(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Eb(t)}async function c8(n,e){const t=Ht(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _J(n,e){const t=Ht(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&Eb(t)}function xJ(n,e,t){const r=Ht(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function Eb(n){n.Ca.forEach((e=>{e.next()}))}var qT,C3;(C3=qT||(qT={})).Ma="default",C3.Cache="cache";class u8{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new E0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=E0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qT.Cache}}class h8{constructor(e){this.key=e}}class d8{constructor(e){this.key=e}}class vJ{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qt(),this.mutatedKeys=Qt(),this.eu=lF(e),this.tu=new Uf(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new b3,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,f)=>{const g=i.get(h),p=l1(this.query,f)?f:null,x=!!g&&this.mutatedKeys.has(g.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;g&&p?g.data.isEqual(p.data)?x!==v&&(r.track({type:3,doc:p}),w=!0):this.su(g,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!g&&p?(r.track({type:0,doc:p}),w=!0):g&&!p&&(r.track({type:1,doc:g}),w=!0,(l||u)&&(o=!0)),w&&(p?(a=a.add(p),s=v?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((h,f)=>(function(p,x){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:w})}};return v(p)-v(x)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new E0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new d8(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new h8(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Qt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return E0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wb="SyncEngine";class EJ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wJ{constructor(e){this.key=e,this.hu=!1}}class SJ{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Wl((o=>oF(o)),iE),this.Iu=new Map,this.Eu=new Set,this.du=new tr(at.comparator),this.Au=new Map,this.Ru=new ub,this.Vu={},this.mu=new Map,this.fu=Kh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TJ(n,e,t=!0){const r=_8(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await f8(r,e,t,!0),i}async function IJ(n,e){const t=_8(n);await f8(t,e,!0,!1)}async function f8(n,e,t,r){const i=await WQ(n.localStore,Sa(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await AJ(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&n8(n.remoteStore,i),o}async function AJ(n,e,t,r,i){n.pu=(f,g,p)=>(async function(v,w,T,I){let A=w.view.ru(T);A.Cs&&(A=await E3(v.localStore,w.query,!1).then((({documents:k})=>w.view.ru(k,A))));const N=I&&I.targetChanges.get(w.targetId),D=I&&I.targetMismatches.get(w.targetId)!=null,B=w.view.applyChanges(A,v.isPrimaryClient,N,D);return k3(v,w.targetId,B.au),B.snapshot})(n,f,g,p);const s=await E3(n.localStore,e,!0),a=new vJ(e,s.Qs),o=a.ru(s.documents),l=c1.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,l);k3(n,t,u.au);const h=new EJ(e,t,a);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function bJ(n,e,t){const r=Ht(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!iE(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await YT(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mb(r.remoteStore,i.targetId),ZT(r,i.targetId)})).catch(ld)):(ZT(r,i.targetId),await YT(r.localStore,i.targetId,!0))}async function RJ(n,e){const t=Ht(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mb(t.remoteStore,r.targetId))}async function CJ(n,e,t){const r=x8(n);try{const i=await(function(a,o){const l=Ht(a),u=On.now(),h=o.reduce(((p,x)=>p.add(x.key)),Qt());let f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let x=Ys(),v=Qt();return l.Ns.getEntries(p,h).next((w=>{x=w,x.forEach(((T,I)=>{I.isValidDocument()||(v=v.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,x))).next((w=>{f=w;const T=[];for(const I of o){const A=$Z(I,f.get(I.key).overlayedDocument);A!=null&&T.push(new Hl(I.key,A,Q6(A.value.mapValue),Fi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,T,o)})).next((w=>{g=w;const T=w.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(p,w.batchId,T)}))})).then((()=>({batchId:g.batchId,changes:uF(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new tr(Wt)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u})(r,i.batchId,t),await d1(r,i.changes),await h1(r.remoteStore)}catch(i){const s=vb(i,"Failed to persist write");t.reject(s)}}async function g8(n,e){const t=Ht(n);try{const r=await UQ(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?bt(a.hu,14607):i.removedDocuments.size>0&&(bt(a.hu,42227),a.hu=!1))})),await d1(t,r,e)}catch(r){await ld(r)}}function P3(n,e,t){const r=Ht(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=Ht(a);l.onlineState=o;let u=!1;l.queries.forEach(((h,f)=>{for(const g of f.Sa)g.va(o)&&(u=!0)})),u&&Eb(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PJ(n,e,t){const r=Ht(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new tr(at.comparator);a=a.insert(s,yr.newNoDocument(s,Ct.min()));const o=Qt().add(s),l=new lE(Ct.min(),new Map,new tr(Wt),a,o);await g8(r,l),r.du=r.du.remove(s),r.Au.delete(e),Sb(r)}else await YT(r.localStore,e,!1).then((()=>ZT(r,e,t))).catch(ld)}async function kJ(n,e){const t=Ht(n),r=e.batch.batchId;try{const i=await BQ(t.localStore,e);p8(t,r,null),m8(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await d1(t,i)}catch(i){await ld(i)}}async function MJ(n,e,t){const r=Ht(n);try{const i=await(function(a,o){const l=Ht(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,o).next((f=>(bt(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);p8(r,e,t),m8(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await d1(r,i)}catch(i){await ld(i)}}function m8(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function p8(n,e,t){const r=Ht(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ZT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||y8(n,r)}))}function y8(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(mb(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Sb(n))}function k3(n,e,t){for(const r of t)r instanceof h8?(n.Ru.addReference(r.key,e),NJ(n,r)):r instanceof d8?(Xe(wb,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||y8(n,r.key)):vt(19791,{wu:r})}function NJ(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Xe(wb,"New document in limbo: "+t),n.Eu.add(r),Sb(n))}function Sb(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new at(Sn.fromString(e)),r=n.fu.next();n.Au.set(r,new wJ(t)),n.du=n.du.insert(t,r),n8(n.remoteStore,new wl(Sa(rE(t.path)),r,"TargetPurposeLimboResolution",Ea.ce))}}async function d1(n,e,t){const r=Ht(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,l)=>{a.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const h=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=fb.As(l.targetId,u);s.push(h)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(l,u){const h=Ht(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>ue.forEach(u,(g=>ue.forEach(g.Es,(p=>h.persistence.referenceDelegate.addReference(f,g.targetId,p))).next((()=>ue.forEach(g.ds,(p=>h.persistence.referenceDelegate.removeReference(f,g.targetId,p)))))))))}catch(f){if(!vu(f))throw f;Xe(gb,"Failed to update sequence numbers: "+f)}for(const f of u){const g=f.targetId;if(!f.fromCache){const p=h.Ms.get(g),x=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(x);h.Ms=h.Ms.insert(g,v)}}})(r.localStore,s))}async function LJ(n,e){const t=Ht(n);if(!t.currentUser.isEqual(e)){Xe(wb,"User change. New user:",e.toKey());const r=await ZF(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((l=>{l.reject(new st(ke.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await d1(t,r.Ls)}}function OJ(n,e){const t=Ht(n),r=t.Au.get(e);if(r&&r.hu)return Qt().add(r.key);{let i=Qt();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function _8(n){const e=Ht(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=g8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PJ.bind(null,e),e.Pu.H_=_J.bind(null,e.eventManager),e.Pu.yu=xJ.bind(null,e.eventManager),e}function x8(n){const e=Ht(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MJ.bind(null,e),e}class mp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dE(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qF(this.persistence,new XF,e.initialUser,this.serializer)}Cu(e){return new hb(hE.mi,this.serializer)}Du(e){return new JF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mp.provider={build:()=>new mp};class DJ extends mp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){bt(this.persistence.referenceDelegate instanceof Dx,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $F(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new hb((r=>Dx.mi(r,t)),this.serializer)}}class FJ extends mp{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await x8(this.xu.syncEngine),await h1(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return qF(this.persistence,new XF,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new $F(r,e.asyncQueue,t)}Mu(e,t){const r=new zq(t,this.persistence);return new Uq(e.asyncQueue,r)}Cu(e){const t=FQ(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new db(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,QQ(),D_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new JF}}class jx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>P3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LJ.bind(null,this.syncEngine),await mJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yJ})()}createDatastore(e){const t=dE(e.databaseInfo.databaseId),r=(function(s){return new ZQ(s)})(e.databaseInfo);return(function(s,a,o,l){return new nJ(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,o){return new iJ(r,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>P3(this.syncEngine,t,0)),(function(){return T3.v()?new T3:new KQ})())}createSyncEngine(e,t){return(function(i,s,a,o,l,u,h){const f=new SJ(i,s,a,o,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ht(t);Xe(Yh,"RemoteStore shutting down."),r.Ea.add(5),await u1(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jx.provider={build:()=>new jx};class v8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ji("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const cu="FirestoreClient";class jJ{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=_i.UNAUTHENTICATED,this.clientId=WA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{Xe(cu,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(Xe(cu,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Do;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=vb(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function lS(n,e){n.asyncQueue.verifyOperationInProgress(),Xe(cu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await ZF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function M3(n,e){n.asyncQueue.verifyOperationInProgress();const t=await VJ(n);Xe(cu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>A3(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>A3(e.remoteStore,i))),n._onlineComponents=e}async function VJ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Xe(cu,"Using user provided OfflineComponentProvider");try{await lS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Uh("Error using user provided cache. Falling back to memory cache: "+t),await lS(n,new mp)}}else Xe(cu,"Using default OfflineComponentProvider"),await lS(n,new DJ(void 0));return n._offlineComponents}async function E8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Xe(cu,"Using user provided OnlineComponentProvider"),await M3(n,n._uninitializedComponentsProvider._online)):(Xe(cu,"Using default OnlineComponentProvider"),await M3(n,new jx))),n._onlineComponents}function GJ(n){return E8(n).then((e=>e.syncEngine))}async function w8(n){const e=await E8(n),t=e.eventManager;return t.onListen=TJ.bind(null,e.syncEngine),t.onUnlisten=bJ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RJ.bind(null,e.syncEngine),t}function BJ(n,e,t={}){const r=new Do;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const h=new v8({next:g=>{h.Nu(),a.enqueueAndForget((()=>c8(s,f)));const p=g.docs.has(o);!p&&g.fromCache?u.reject(new st(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&g.fromCache&&l&&l.source==="server"?u.reject(new st(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new u8(rE(o.path),h,{includeMetadataChanges:!0,qa:!0});return l8(s,f)})(await w8(n),n.asyncQueue,e,t,r))),r.promise}function UJ(n,e,t={}){const r=new Do;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const h=new v8({next:g=>{h.Nu(),a.enqueueAndForget((()=>c8(s,f))),g.fromCache&&l.source==="server"?u.reject(new st(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new u8(o,h,{includeMetadataChanges:!0,qa:!0});return l8(s,f)})(await w8(n),n.asyncQueue,e,t,r))),r.promise}function S8(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const N3=new Map;const T8="firestore.googleapis.com",L3=!0;class O3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new st(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=T8,this.ssl=L3}else this.host=e.host,this.ssl=e.ssl??L3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vQ)throw new st(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S8(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Rq;switch(r.type){case"firstParty":return new Mq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=N3.get(t);r&&(Xe("ComponentProvider","Removing Datastore"),N3.delete(t),r.terminate())})(this),Promise.resolve()}}function zJ(n,e,t,r={}){n=Ia(n,gE);const i=ad(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;i&&(CA(`https://${o}`),PA("Firestore",!0)),s.host!==T8&&s.host!==o&&Uh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!jh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=_i.MOCK_USER;else{u=MD(r.mockUserToken,n._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new st(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new _i(f)}n._authCredentials=new Cq(new I6(u,h))}}class D0{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new D0(this.firestore,e,this._query)}}class Ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ir(this.firestore,e,this._key)}toJSON(){return{type:Ir._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(i1(t,Ir._jsonSchema))return new Ir(e,r||null,new at(Sn.fromString(t.referencePath)))}}Ir._jsonSchemaVersion="firestore/documentReference/1.0",Ir._jsonSchema={type:Nr("string",Ir._jsonSchemaVersion),referencePath:Nr("string")};class eu extends D0{constructor(e,t,r){super(e,t,rE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new at(e))}withConverter(e){return new eu(this.firestore,e,this._path)}}function D3(n,e,...t){if(n=li(n),b6("collection","path",e),n instanceof gE){const r=Sn.fromString(e,...t);return IM(r),new eu(n,null,r)}{if(!(n instanceof Ir||n instanceof eu))throw new st(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sn.fromString(e,...t));return IM(r),new eu(n.firestore,null,r)}}function zf(n,e,...t){if(n=li(n),arguments.length===1&&(e=WA.newId()),b6("doc","path",e),n instanceof gE){const r=Sn.fromString(e,...t);return TM(r),new Ir(n,null,new at(r))}{if(!(n instanceof Ir||n instanceof eu))throw new st(ke.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sn.fromString(e,...t));return TM(r),new Ir(n.firestore,n instanceof eu?n.converter:null,new at(r))}}const F3="AsyncQueue";class j3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new e8(this,"async_queue_retry"),this._c=()=>{const r=D_();r&&Xe(F3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=D_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=D_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Do;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vu(e))throw e;Xe(F3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ji("INTERNAL UNHANDLED ERROR: ",V3(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=xb.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&vt(47125,{Pc:V3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function V3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class wu extends gE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new j3,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j3(e),this._firestoreClient=void 0,await e}}}function $J(n,e){const t=typeof n=="object"?n:NA(),r=typeof n=="string"?n:bx,i=Wv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=CD("firestore");s&&zJ(i,...s)}return i}function Tb(n){if(n._terminated)throw new st(ke.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||I8(n),n._firestoreClient}function I8(n){const e=n._freezeSettings(),t=(function(i,s,a,o){return new _Z(i,s,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,S8(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new jJ(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function WJ(n,e){Uh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return HJ(n,jx.provider,{build:r=>new FJ(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function HJ(n,e,t){if((n=Ia(n,wu))._firestoreClient||n._terminated)throw new st(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new st(ke.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},I8(n)}class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(Or.fromBase64String(e))}catch(t){throw new st(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ya(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ya._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(i1(e,ya._jsonSchema))return ya.fromBase64String(e.bytes)}}ya._jsonSchemaVersion="firestore/bytes/1.0",ya._jsonSchema={type:Nr("string",ya._jsonSchemaVersion),bytes:Nr("string")};class mE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new st(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pE{constructor(e){this._methodName=e}}class Fo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new st(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new st(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fo._jsonSchemaVersion}}static fromJSON(e){if(i1(e,Fo._jsonSchema))return new Fo(e.latitude,e.longitude)}}Fo._jsonSchemaVersion="firestore/geoPoint/1.0",Fo._jsonSchema={type:Nr("string",Fo._jsonSchemaVersion),latitude:Nr("number"),longitude:Nr("number")};class jo{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:jo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(i1(e,jo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new jo(e.vectorValues);throw new st(ke.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jo._jsonSchemaVersion="firestore/vectorValue/1.0",jo._jsonSchema={type:Nr("string",jo._jsonSchemaVersion),vectorValues:Nr("object")};const KJ=/^__.*__$/;class YJ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hl(e,this.data,this.fieldMask,t,this.fieldTransforms):new L0(e,this.data,t,this.fieldTransforms)}}class A8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function b8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:n})}}class Ib{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ib({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(b8(this.Ac)&&KJ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XJ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dE(e)}Cc(e,t,r,i=!1){return new Ib({Ac:e,methodName:t,Dc:r,path:lr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yE(n){const e=n._freezeSettings(),t=dE(n._databaseId);return new XJ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function R8(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);bb("Data must be an object, but it was:",a,r);const o=C8(r,a);let l,u;if(s.merge)l=new Es(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const g=QT(e,f,t);if(!a.contains(g))throw new st(ke.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);k8(h,g)||h.push(g)}l=new Es(h),u=a.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=a.fieldTransforms;return new YJ(new Di(o),l,u)}class _E extends pE{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _E}}class Ab extends pE{_toFieldTransform(e){return new yF(e.path,new y0)}isEqual(e){return e instanceof Ab}}function qJ(n,e,t,r){const i=n.Cc(1,e,t);bb("Data must be an object, but it was:",i,r);const s=[],a=Di.empty();Eu(r,((l,u)=>{const h=Rb(e,l,t);u=li(u);const f=i.yc(h);if(u instanceof _E)s.push(h);else{const g=f1(u,f);g!=null&&(s.push(h),a.set(h,g))}}));const o=new Es(s);return new A8(a,o,i.fieldTransforms)}function ZJ(n,e,t,r,i,s){const a=n.Cc(1,e,t),o=[QT(e,r,t)],l=[i];if(s.length%2!=0)throw new st(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(QT(e,s[g])),l.push(s[g+1]);const u=[],h=Di.empty();for(let g=o.length-1;g>=0;--g)if(!k8(u,o[g])){const p=o[g];let x=l[g];x=li(x);const v=a.yc(p);if(x instanceof _E)u.push(p);else{const w=f1(x,v);w!=null&&(u.push(p),h.set(p,w))}}const f=new Es(u);return new A8(h,f,a.fieldTransforms)}function QJ(n,e,t,r=!1){return f1(t,n.Cc(r?4:3,e))}function f1(n,e){if(P8(n=li(n)))return bb("Unsupported field value:",e,n),C8(n,e);if(n instanceof pE)return(function(r,i){if(!b8(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const o of r){let l=f1(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=On.fromDate(r);return{timestampValue:v0(i.serializer,s)}}if(r instanceof On){const s=new On(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:v0(i.serializer,s)}}if(r instanceof Fo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ya)return{bytesValue:TF(i.serializer,r._byteString)};if(r instanceof Ir){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ob(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jo)return(function(a,o){return{mapValue:{fields:{[JA]:{stringValue:eb},[f0]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return nb(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Xv(r)}`)})(n,e)}function C8(n,e){const t={};return z6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eu(n,((r,i)=>{const s=f1(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function P8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof On||n instanceof Fo||n instanceof ya||n instanceof Ir||n instanceof pE||n instanceof jo)}function bb(n,e,t){if(!P8(t)||!R6(t)){const r=Xv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function QT(n,e,t){if((e=li(e))instanceof mE)return e._internalPath;if(typeof e=="string")return Rb(n,e);throw Vx("Field path arguments must be of type string or ",n,!1,void 0,t)}const JJ=new RegExp("[~\\*/\\[\\]]");function Rb(n,e,t){if(e.search(JJ)>=0)throw Vx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mE(...e.split("."))._internalPath}catch{throw Vx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vx(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new st(ke.INVALID_ARGUMENT,o+n+l)}function k8(n,e){return n.some((t=>t.isEqual(e)))}class M8{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eee extends M8{data(){return super.data()}}function Cb(n,e){return typeof e=="string"?Rb(n,e):e instanceof mE?e._internalPath:e._delegate._internalPath}function tee(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new st(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pb{}class nee extends Pb{}function ree(n,e,...t){let r=[];e instanceof Pb&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((l=>l instanceof kb)).length,o=s.filter((l=>l instanceof xE)).length;if(a>1||a>0&&o>0)throw new st(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class xE extends nee{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new xE(e,t,r)}_apply(e){const t=this._parse(e);return N8(e._query,t),new D0(e.firestore,e.converter,VT(e._query,t))}_parse(e){const t=yE(e.firestore);return(function(s,a,o,l,u,h,f){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new st(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){B3(f,h);const x=[];for(const v of f)x.push(G3(l,s,v));g={arrayValue:{values:x}}}else g=G3(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||B3(f,h),g=QJ(o,a,f,h==="in"||h==="not-in");return sn.create(u,h,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function iee(n,e,t){const r=e,i=Cb("where",n);return xE._create(i,r,t)}class kb extends Pb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new kb(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)N8(a,l),a=VT(a,l)})(e._query,t),new D0(e.firestore,e.converter,VT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function G3(n,e,t){if(typeof(t=li(t))=="string"){if(t==="")throw new st(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aF(e)&&t.indexOf("/")!==-1)throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Sn.fromString(t));if(!at.isDocumentKey(r))throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dp(n,new at(r))}if(t instanceof Ir)return dp(n,t._key);throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xv(t)}.`)}function B3(n,e){if(!Array.isArray(n)||n.length===0)throw new st(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N8(n,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new st(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class see{convertValue(e,t="none"){switch(au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Eu(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[f0].arrayValue?.values?.map((r=>er(r.doubleValue)));return new jo(t)}convertGeoPoint(e){return new Fo(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(up(e));default:return null}}convertTimestamp(e){const t=Vl(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Sn.fromString(e);bt(LF(r),9688,{name:e});const i=new zh(r.get(1),r.get(3)),s=new at(r.popFirst(5));return i.isEqual(t)||Ji(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function L8(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bh extends M8{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new F_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(ke.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bh._jsonSchemaVersion="firestore/documentSnapshot/1.0",bh._jsonSchema={type:Nr("string",bh._jsonSchemaVersion),bundleSource:Nr("string","DocumentSnapshot"),bundleName:Nr("string"),bundle:Nr("string")};class F_ extends bh{data(e={}){return super.data(e)}}class $f{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new nm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new F_(this._firestore,this._userDataWriter,r.key,r,new nm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new st(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new F_(i._firestore,i._userDataWriter,o.doc.key,o.doc,new nm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new F_(i._firestore,i._userDataWriter,o.doc.key,o.doc,new nm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:aee(o.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(ke.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$f._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=WA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:n})}}function oee(n){n=Ia(n,Ir);const e=Ia(n.firestore,wu);return BJ(Tb(e),n._key).then((t=>dee(e,n,t)))}$f._jsonSchemaVersion="firestore/querySnapshot/1.0",$f._jsonSchema={type:Nr("string",$f._jsonSchemaVersion),bundleSource:Nr("string","QuerySnapshot"),bundleName:Nr("string"),bundle:Nr("string")};class O8 extends see{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}function lee(n){n=Ia(n,D0);const e=Ia(n.firestore,wu),t=Tb(e),r=new O8(e);return tee(n._query),UJ(t,n._query).then((i=>new $f(e,r,n,i)))}function U3(n,e,t){n=Ia(n,Ir);const r=Ia(n.firestore,wu),i=L8(n.converter,e,t);return vE(r,[R8(yE(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Fi.none())])}function cee(n,e,t,...r){n=Ia(n,Ir);const i=Ia(n.firestore,wu),s=yE(i);let a;return a=typeof(e=li(e))=="string"||e instanceof mE?ZJ(s,"updateDoc",n._key,e,t,r):qJ(s,"updateDoc",n._key,e),vE(i,[a.toMutation(n._key,Fi.exists(!0))])}function uee(n){return vE(Ia(n.firestore,wu),[new oE(n._key,Fi.none())])}function hee(n,e){const t=Ia(n.firestore,wu),r=zf(n),i=L8(n.converter,e);return vE(t,[R8(yE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Fi.exists(!1))]).then((()=>r))}function vE(n,e){return(function(r,i){const s=new Do;return r.asyncQueue.enqueueAndForget((async()=>CJ(await GJ(r),i,s))),s.promise})(Tb(n),e)}function dee(n,e,t){const r=t.docs.get(e._key),i=new O8(n);return new bh(n,i,e._key,r,new nm(t.hasPendingWrites,t.fromCache),e.converter)}function z3(){return new Ab("serverTimestamp")}(function(e,t=!0){(function(i){N0=i})(od),Vh(new su("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new wu(new Pq(r.getProvider("auth-internal")),new Nq(a,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new st(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zh(u.options.projectId,h)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),Lo(vM,EM,e),Lo(vM,EM,"esm2020")})();const D8="firebasestorage.googleapis.com",fee="storageBucket",gee=120*1e3,mee=600*1e3;class Jo extends Qo{constructor(e,t,r=0){super(cS(e),`Firebase Storage: ${t} (${cS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jo.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ko;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ko||(Ko={}));function cS(n){return"storage/"+n}function pee(){const n="An unknown error occurred, please check the error payload for server response.";return new Jo(Ko.UNKNOWN,n)}function yee(){return new Jo(Ko.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _ee(){return new Jo(Ko.CANCELED,"User canceled the upload/download.")}function xee(n){return new Jo(Ko.INVALID_URL,"Invalid URL '"+n+"'.")}function vee(n){return new Jo(Ko.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function $3(n){return new Jo(Ko.INVALID_ARGUMENT,n)}function F8(){return new Jo(Ko.APP_DELETED,"The Firebase app was deleted.")}function Eee(n){return new Jo(Ko.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ka{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ka.makeFromUrl(e,t)}catch{return new Ka(e,"")}if(r.path==="")return r;throw vee(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${h}/b/${i}/o${g}`,"i"),x={bucket:1,path:3},v=t===D8?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",T=new RegExp(`^https?://${v}/${i}/${w}`,"i"),A=[{regex:o,indices:l,postModify:s},{regex:p,indices:x,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<A.length;N++){const D=A[N],B=D.regex.exec(e);if(B){const k=B[D.indices.bucket];let P=B[D.indices.path];P||(P=""),r=new Ka(k,P),D.postModify(r);break}}if(r==null)throw xee(e);return r}}class wee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function See(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function h(...w){u||(u=!0,e.apply(null,w))}function f(w){i=setTimeout(()=>{i=null,n(p,l())},w)}function g(){s&&clearTimeout(s)}function p(w,...T){if(u){g();return}if(w){g(),h.call(null,w,...T);return}if(l()||a){g(),h.call(null,w,...T);return}r<64&&(r*=2);let A;o===1?(o=2,A=0):A=(r+Math.random())*1e3,f(A)}let x=!1;function v(w){x||(x=!0,g(),!u&&(i!==null?(w||(o=2),clearTimeout(i),f(0)):w||(o=1)))}return f(0),s=setTimeout(()=>{a=!0,v(!0)},t),v}function Tee(n){n(!1)}function Iee(n){return n!==void 0}function W3(n,e,t,r){if(r<e)throw $3(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw $3(`Invalid value for '${n}'. Expected ${t} or less.`)}function Aee(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Gx;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Gx||(Gx={}));function bee(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class Ree{constructor(e,t,r,i,s,a,o,l,u,h,f,g=!0,p=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=g,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,v)=>{this.resolve_=x,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Jy(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Gx.NO_ERROR,l=s.getStatus();if(!o||bee(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Gx.ABORT;r(!1,new Jy(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Jy(u,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Iee(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=pee();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?F8():_ee();a(l)}else{const l=yee();a(l)}};this.canceled_?t(!1,new Jy(!1,null,!0)):this.backoffId_=See(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Tee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jy{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Cee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Pee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Mee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Nee(n,e,t,r,i,s,a=!0,o=!1){const l=Aee(n.urlParams),u=n.url+l,h=Object.assign({},n.headers);return kee(h,e),Cee(h,t),Pee(h,s),Mee(h,r),new Ree(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,o)}function Lee(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Oee(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class Bx{constructor(e,t){this._service=e,t instanceof Ka?this._location=t:this._location=Ka.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bx(e,t)}get root(){const e=new Ka(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Oee(this._location.path)}get storage(){return this._service}get parent(){const e=Lee(this._location.path);if(e===null)return null;const t=new Ka(this._location.bucket,e);return new Bx(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Eee(e)}}function H3(n,e){const t=e?.[fee];return t==null?null:Ka.makeFromBucketSpec(t,n)}function Dee(n,e,t,r={}){n.host=`${e}:${t}`;const i=ad(e);i&&(CA(`https://${n.host}/b`),PA("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:MD(s,n.app.options.projectId))}class Fee{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=D8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gee,this._maxUploadRetryTime=mee,this._requests=new Set,i!=null?this._bucket=Ka.makeFromBucketSpec(i,this._host):this._bucket=H3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ka.makeFromBucketSpec(this._url,e):this._bucket=H3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(pa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bx(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new wee(F8());{const a=Nee(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const K3="@firebase/storage",Y3="0.14.0";const j8="storage";function jee(n=NA(),e){n=li(n);const r=Wv(n,j8).getImmediate({identifier:e}),i=CD("storage");return i&&Vee(r,...i),r}function Vee(n,e,t,r={}){Dee(n,e,t,r)}function Gee(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Fee(t,r,i,e,od)}function Bee(){Vh(new su(j8,Gee,"PUBLIC").setMultipleInstances(!0)),Lo(K3,Y3,""),Lo(K3,Y3,"esm2020")}Bee();const Uee={apiKey:"AIzaSyBcLuKvUr5XqEJTwOf9I0hqJ1o9g3kOZ-g",authDomain:"detectorapp-nl.firebaseapp.com",projectId:"detectorapp-nl",storageBucket:"detectorapp-nl.firebasestorage.app",messagingSenderId:"110954177210",appId:"1:110954177210:web:d77c9ed262ad92bc431883"},Mb=VD(Uee),uS=Tq(Mb),$c=$J(Mb);jee(Mb);WJ($c).catch(n=>{n.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const EE=Aa()(k0((n,e)=>({user:null,loading:!1,error:null,initialized:!1,setUser:t=>{n(r=>{r.user=t,r.loading=!1})},setLoading:t=>{n(r=>{r.loading=t})},setError:t=>{n(r=>{r.error=t})},signInWithGoogle:async()=>{n(t=>{t.loading=!0,t.error=null});try{const t=new xl;await NX(uS,t)}catch(t){console.error("Google sign-in error:",t),n(r=>{r.error=t.message,r.loading=!1})}},logout:async()=>{n(t=>{t.loading=!0});try{await fX(uS)}catch(t){console.error("Logout error:",t),n(r=>{r.error=t.message,r.loading=!1})}},initAuth:()=>{e().initialized||(n(t=>{t.initialized=!0}),dX(uS,t=>{n(r=>{r.user=t,r.loading=!1})}))}}))),zee=Aa()(k0((n,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async t=>{n(r=>{r.loading=!0});try{const r=ree(D3($c,"vondsten"),iee("userId","==",t)),s=(await lee(r)).docs.map(a=>({id:a.id,...a.data()}));n(a=>{a.vondsten=s,a.loading=!1})}catch(r){n(i=>{i.error=r.message,i.loading=!1})}},addVondst:async t=>{const r=new Date().toISOString(),i={...t,createdAt:r,updatedAt:r},s=await hee(D3($c,"vondsten"),i);return n(a=>{a.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(t,r)=>{const i=zf($c,"vondsten",t);await cee(i,{...r,updatedAt:new Date().toISOString()}),n(s=>{const a=s.vondsten.findIndex(o=>o.id===t);a!==-1&&(s.vondsten[a]={...s.vondsten[a],...r})})},deleteVondst:async t=>{await uee(zf($c,"vondsten",t)),n(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==t)})}}))),$ee={};function Wee(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=t.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const pp=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return pp(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return pp(r)(t)}}}},Hee=(n,e)=>(t,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,T)=>({...T,...w}),...e},a=!1;const o=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return n((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...w)},r,i);const h=pp(s.serialize),f=()=>{const w=s.partialize({...r()});let T;const I=h({state:w,version:s.version}).then(A=>u.setItem(s.name,A)).catch(A=>{T=A});if(T)throw T;return I},g=i.setState;i.setState=(w,T)=>{g(w,T),f()};const p=n((...w)=>{t(...w),f()},r,i);let x;const v=()=>{var w;if(!u)return;a=!1,o.forEach(I=>I(r()));const T=((w=s.onRehydrateStorage)==null?void 0:w.call(s,r()))||void 0;return pp(u.getItem.bind(u))(s.name).then(I=>{if(I)return s.deserialize(I)}).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==s.version){if(s.migrate)return s.migrate(I.state,I.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return I.state}).then(I=>{var A;return x=s.merge(I,(A=r())!=null?A:p),t(x,!0),f()}).then(()=>{T?.(x,void 0),a=!0,l.forEach(I=>I(x))}).catch(I=>{T?.(void 0,I)})};return i.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(u=w.getStorage())},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:w=>(o.add(w),()=>{o.delete(w)}),onFinishHydration:w=>(l.add(w),()=>{l.delete(w)})},v(),x||p},Kee=(n,e)=>(t,r,i)=>{let s={storage:Wee(()=>localStorage),partialize:v=>v,version:0,merge:(v,w)=>({...w,...v}),...e},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...v)},r,i);const h=()=>{const v=s.partialize({...r()});return u.setItem(s.name,{state:v,version:s.version})},f=i.setState;i.setState=(v,w)=>{f(v,w),h()};const g=n((...v)=>{t(...v),h()},r,i);i.getInitialState=()=>g;let p;const x=()=>{var v,w;if(!u)return;a=!1,o.forEach(I=>{var A;return I((A=r())!=null?A:g)});const T=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(v=r())!=null?v:g))||void 0;return pp(u.getItem.bind(u))(s.name).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==s.version){if(s.migrate)return[!0,s.migrate(I.state,I.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,I.state];return[!1,void 0]}).then(I=>{var A;const[N,D]=I;if(p=s.merge(D,(A=r())!=null?A:g),t(p,!0),N)return h()}).then(()=>{T?.(p,void 0),p=r(),a=!0,l.forEach(I=>I(p))}).catch(I=>{T?.(void 0,I)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>a,onHydrate:v=>(o.add(v),()=>{o.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},s.skipHydration||x(),p||g},Yee=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?(($ee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Hee(n,e)):Kee(n,e),F0=Yee,Xr=Aa()(F0(n=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!0,showLocalVondsten:!0,showCustomPointLayers:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,menuFontScale:100,setDefaultBackground:e=>n({defaultBackground:e}),setShowScaleBar:e=>n({showScaleBar:e}),setGpsAutoStart:e=>n({gpsAutoStart:e}),setShowAccuracyCircle:e=>n({showAccuracyCircle:e}),setHapticFeedback:e=>n({hapticFeedback:e}),setVondstenLocalOnly:e=>n({vondstenLocalOnly:e}),setShowVondstButton:e=>n({showVondstButton:e}),setShowLocalVondsten:e=>n({showLocalVondsten:e}),setShowCustomPointLayers:e=>n({showCustomPointLayers:e}),setFontScale:e=>n({fontScale:e}),setLayerPanelFontScale:e=>n({layerPanelFontScale:e}),setPresetPanelFontScale:e=>n({presetPanelFontScale:e}),setMenuFontScale:e=>n({menuFontScale:e})}),{name:"detectorapp-settings",version:2,migrate:(n,e)=>e<2?{...n,showScaleBar:!0}:n})),hS=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen","IKAW"],baseLayer:"CartoDB (licht)",isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Vroege ME",icon:"Layers",layers:["Romeinse wegen (regio)","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Late ME - Nieuw",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","Archeo Landschappen","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],X3=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],V8=Aa()(F0((n,e)=>({presets:[...hS],applyPreset:t=>{const r=e().presets.find(s=>s.id===t);if(!r)return;const i=ri.getState();X3.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(a=>{i.setLayerVisibility(a,a===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(t,r)=>{const i=ri.getState(),s=Object.entries(i.visible).filter(([o,l])=>l&&X3.includes(o)).map(([o])=>o),a={id:`custom-${Date.now()}`,name:t,icon:r,layers:s,isBuiltIn:!1};n(o=>({presets:[...o.presets,a]})),console.log(` Preset aangemaakt: ${t} met ${s.length} lagen`)},updatePreset:(t,r)=>{n(i=>({presets:i.presets.map(s=>s.id===t?{...s,...r}:s)}))},deletePreset:t=>{n(r=>({presets:r.presets.filter(i=>i.id!==t||i.isBuiltIn)}))},resetToDefaults:()=>{n({presets:[...hS]})}}),{name:"detectorapp-presets",version:7,migrate:(n,e)=>e<7?{presets:[...hS]}:n})),q3=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],wE=Aa()(F0((n,e)=>({layers:[],addLayer:t=>{const r=crypto.randomUUID(),i=e().layers.length,s=q3[i%q3.length];return n(a=>({layers:[...a.layers,{...t,id:r,createdAt:new Date().toISOString(),color:t.color||s,visible:t.visible??!0,opacity:t.opacity??1}]})),r},removeLayer:t=>n(r=>({layers:r.layers.filter(i=>i.id!==t)})),updateLayer:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)})),toggleVisibility:t=>n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)})),setOpacity:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,opacity:r}:s)})),setColor:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,color:r}:s)})),clearAll:()=>n({layers:[]})}),{name:"detectorapp-custom-layers",version:1})),Xee=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Labels Overlay","Mijn Vondsten"],G8=Aa()(F0((n,e)=>({tier:"free",unlockedRegions:["nl"],devMode:!0,setTier:t=>n({tier:t}),unlockRegion:t=>n(r=>({unlockedRegions:r.unlockedRegions.includes(t)?r.unlockedRegions:[...r.unlockedRegions,t]})),lockRegion:t=>n(r=>({unlockedRegions:r.unlockedRegions.filter(i=>i!==t)})),setDevMode:t=>n({devMode:t}),isRegionUnlocked:t=>{const r=e();return r.devMode||r.tier==="pro"?!0:r.unlockedRegions.includes(t)},isLayerUnlocked:(t,r="free",i=["nl"])=>{const s=e();return s.devMode||Xee.includes(t)||r==="free"||s.tier==="pro"?!0:s.tier==="premium"?i.some(a=>s.unlockedRegions.includes(a)):!1},canAccessPremiumFeatures:()=>{const t=e();return t.devMode||t.tier!=="free"}}),{name:"detectorapp-subscription",version:1}));function qee({target:n,viewOptions:e}){const t=se.useRef(null),r=se.useRef(null),i=rs(a=>a.setMap),s=Xr(a=>a.showScaleBar);return se.useEffect(()=>{if(!t.current){const a={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},o=new yH({target:n,controls:[],view:new Co({center:ru(a.center),zoom:a.zoom,rotation:a.rotation,minZoom:a.minZoom,maxZoom:a.maxZoom})});t.current=o,i(o),window.__olMap=o}return()=>{t.current&&(t.current.setTarget(void 0),i(null),window.__olMap=null)}},[n,e,i]),se.useEffect(()=>{const a=t.current;a&&(s?r.current||(r.current=new vH({units:"metric",bar:!1,text:!0,minWidth:80}),a.addControl(r.current)):r.current&&(a.removeControl(r.current),r.current=null))},[s]),t.current}const Z3=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function Zee(){const n=se.useRef(null),e=se.useRef(!1);qee({target:"map"});const t=rs(f=>f.map),r=ri(f=>f.registerLayer),i=ri(f=>f.setLayerVisibility),s=Xr(f=>f.defaultBackground);se.useEffect(()=>{if(!t){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const f=new Qu({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new DW}),g=new Qu({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new mf({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),p=new Qu({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new mf({url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_orthoHR/EPSG:3857/{z}/{x}/{y}.jpeg",attributions:" Kadaster / PDOK Luchtfoto",maxZoom:19})}),x=new Qu({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new mf({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),v=new Qu({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new mf({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),w=new Qu({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new mf({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});t.addLayer(f),t.addLayer(g),t.addLayer(p),t.addLayer(x),t.addLayer(v),t.addLayer(w),console.log(" Base layers added:",{osm:f.getVisible(),cartodb:g.getVisible(),satellite:p.getVisible()}),r("OpenStreetMap",f),r("CartoDB (licht)",g),r("Luchtfoto",p),r("Labels Overlay",x),r("TMK 1850",v),r("Bonnebladen 1900",w),t.updateSize(),console.log(" Map size:",t.getSize()),console.log(" Map center:",t.getView().getCenter()),console.log(" Map zoom:",t.getView().getZoom()),a()},[t,r]);async function a(){if(!t){console.error(" Cannot load layers: map is null");return}const f=KH();console.log(` Loading ${f.length} immediate-load layers (WMS/Tile)...`);const g=await Promise.allSettled(f.map(async x=>{try{const v=await x.factory();return v?{name:x.name,layer:v}:null}catch(v){return console.warn(` Failed to create ${x.name}:`,v),null}}));let p=0;g.forEach(x=>{if(x.status==="fulfilled"&&x.value){const{name:v,layer:w}=x.value;t.addLayer(w),r(v,w),p++,console.log(`   ${v}`)}}),console.log(` Immediate layers loaded: ${p}/${f.length}`),console.log(` Total layers on map: ${t.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}se.useEffect(()=>{if(!t||e.current)return;const f=setTimeout(()=>{const g=s||"CartoDB (licht)";Z3.forEach(p=>{i(p,!1)}),Z3.includes(g)?i(g,!0):i("CartoDB (licht)",!0),e.current=!0,console.log(` Default background: ${g}`)},100);return()=>clearTimeout(f)},[t,s,i]);const o=Xr(f=>f.gpsAutoStart),l=qi(f=>f.startTracking),u=se.useRef(!1);se.useEffect(()=>{if(!(!t||u.current)&&o){const f=setTimeout(()=>{l(),u.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(f)}},[t,o,l]);const h={width:"100%",height:"100vh"};return y.jsx("div",{id:"map",ref:n,style:h})}const Nb=se.createContext({});function Lb(n){const e=se.useRef(null);return e.current===null&&(e.current=n()),e.current}const SE=se.createContext(null),Ob=se.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class Qee extends se.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Jee({children:n,isPresent:e}){const t=se.useId(),r=se.useRef(null),i=se.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=se.useContext(Ob);return se.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=t;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),y.jsx(Qee,{isPresent:e,childRef:r,sizeRef:i,children:se.cloneElement(n,{ref:r})})}const ete=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=Lb(tte),l=se.useId(),u=se.useCallback(f=>{o.set(f,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),h=se.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),s?[Math.random(),u]:[t,u]);return se.useMemo(()=>{o.forEach((f,g)=>o.set(g,!1))},[t]),se.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),a==="popLayout"&&(n=y.jsx(Jee,{isPresent:t,children:n})),y.jsx(SE.Provider,{value:h,children:n})};function tte(){return new Map}function B8(n=!0){const e=se.useContext(SE);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=se.useId();se.useEffect(()=>{n&&i(s)},[n]);const a=se.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const e_=n=>n.key||"";function Q3(n){const e=[];return se.Children.forEach(n,t=>{se.isValidElement(t)&&e.push(t)}),e}const Db=typeof window<"u",U8=Db?se.useLayoutEffect:se.useEffect,Dr=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=B8(a),u=se.useMemo(()=>Q3(n),[n]),h=a&&!o?[]:u.map(e_),f=se.useRef(!0),g=se.useRef(u),p=Lb(()=>new Map),[x,v]=se.useState(u),[w,T]=se.useState(u);U8(()=>{f.current=!1,g.current=u;for(let N=0;N<w.length;N++){const D=e_(w[N]);h.includes(D)?p.delete(D):p.get(D)!==!0&&p.set(D,!1)}},[w,h.length,h.join("-")]);const I=[];if(u!==x){let N=[...u];for(let D=0;D<w.length;D++){const B=w[D],k=e_(B);h.includes(k)||(N.splice(D,0,B),I.push(B))}s==="wait"&&I.length&&(N=I),T(Q3(N)),v(u);return}const{forceRender:A}=se.useContext(Nb);return y.jsx(y.Fragment,{children:w.map(N=>{const D=e_(N),B=a&&!o?!1:u===w||h.includes(D),k=()=>{if(p.has(D))p.set(D,!0);else return;let P=!0;p.forEach(M=>{M||(P=!1)}),P&&(A?.(),T(g.current),a&&l?.(),r&&r())};return y.jsx(ete,{isPresent:B,initial:!f.current||t?void 0:!1,custom:B?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:B?void 0:k,children:N},D)})})},Xs=n=>n;let z8=Xs;function Fb(n){let e;return()=>(e===void 0&&(e=n()),e)}const w0=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Pl=n=>n*1e3,kl=n=>n/1e3,nte={useManualTiming:!1};function rte(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),n()),u(a)}const l={schedule:(u,h=!1,f=!1)=>{const p=f&&r?e:t;return h&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{t.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const t_=["read","resolveKeyframes","update","preRender","render","postRender"],ite=40;function $8(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=t_.reduce((T,I)=>(T[I]=rte(s),T),{}),{read:o,resolveKeyframes:l,update:u,preRender:h,render:f,postRender:g}=a,p=()=>{const T=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,ite),1),i.timestamp=T,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),h.process(i),f.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(p))},x=()=>{t=!0,r=!0,i.isProcessing||n(p)};return{schedule:t_.reduce((T,I)=>{const A=a[I];return T[I]=(N,D=!1,B=!1)=>(t||x(),A.schedule(N,D,B)),T},{}),cancel:T=>{for(let I=0;I<t_.length;I++)a[t_[I]].cancel(T)},state:i,steps:a}}const{schedule:qn,cancel:uu,state:pi,steps:dS}=$8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xs,!0),W8=se.createContext({strict:!1}),J3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},S0={};for(const n in J3)S0[n]={isEnabled:e=>J3[n].some(t=>!!e[t])};function ste(n){for(const e in n)S0[e]={...S0[e],...n[e]}}const ate=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ux(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ate.has(n)}let H8=n=>!Ux(n);function ote(n){n&&(H8=e=>e.startsWith("on")?!Ux(e):n(e))}try{ote(require("@emotion/is-prop-valid").default)}catch{}function lte(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(H8(i)||t===!0&&Ux(i)||!e&&!Ux(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function cte(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const TE=se.createContext({});function yp(n){return typeof n=="string"||Array.isArray(n)}function IE(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const jb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vb=["initial",...jb];function AE(n){return IE(n.animate)||Vb.some(e=>yp(n[e]))}function K8(n){return!!(AE(n)||n.variants)}function ute(n,e){if(AE(n)){const{initial:t,animate:r}=n;return{initial:t===!1||yp(t)?t:void 0,animate:yp(r)?r:void 0}}return n.inherit!==!1?e:{}}function hte(n){const{initial:e,animate:t}=ute(n,se.useContext(TE));return se.useMemo(()=>({initial:e,animate:t}),[eN(e),eN(t)])}function eN(n){return Array.isArray(n)?n.join(" "):n}const dte=Symbol.for("motionComponentSymbol");function Af(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function fte(n,e,t){return se.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Af(t)&&(t.current=r))},[e])}const Gb=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gte="framerAppearId",Y8="data-"+Gb(gte),{schedule:Bb}=$8(queueMicrotask,!1),X8=se.createContext({});function mte(n,e,t,r,i){var s,a;const{visualElement:o}=se.useContext(TE),l=se.useContext(W8),u=se.useContext(SE),h=se.useContext(Ob).reducedMotion,f=se.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,p=se.useContext(X8);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&pte(f.current,t,i,p);const x=se.useRef(!1);se.useInsertionEffect(()=>{g&&x.current&&g.update(t,u)});const v=t[Y8],w=se.useRef(!!v&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,v))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,v)));return U8(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Bb.render(g.render),w.current&&g.animationState&&g.animationState.animateChanges())}),se.useEffect(()=>{g&&(!w.current&&g.animationState&&g.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,v)}),w.current=!1))}),g}function pte(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:q8(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Af(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function q8(n){if(n)return n.options.allowProjection!==!1?n.projection:q8(n.parent)}function yte({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,a;n&&ste(n);function o(u,h){let f;const g={...se.useContext(Ob),...u,layoutId:_te(u)},{isStatic:p}=g,x=hte(u),v=r(u,p);if(!p&&Db){xte();const w=vte(g);f=w.MeasureLayout,x.visualElement=mte(i,v,g,e,w.ProjectionNode)}return y.jsxs(TE.Provider,{value:x,children:[f&&x.visualElement?y.jsx(f,{visualElement:x.visualElement,...g}):null,t(i,u,fte(v,x.visualElement,h),v,p,x.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=se.forwardRef(o);return l[dte]=i,l}function _te({layoutId:n}){const e=se.useContext(Nb).id;return e&&n!==void 0?e+"-"+n:n}function xte(n,e){se.useContext(W8).strict}function vte(n){const{drag:e,layout:t}=S0;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Ete=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ub(n){return typeof n!="string"||n.includes("-")?!1:!!(Ete.indexOf(n)>-1||/[A-Z]/u.test(n))}function tN(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function zb(n,e,t,r){if(typeof e=="function"){const[i,s]=tN(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=tN(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const JT=n=>Array.isArray(n),wte=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Ste=n=>JT(n)?n[n.length-1]||0:n,ji=n=>!!(n&&n.getVelocity);function j_(n){const e=ji(n)?n.get():n;return wte(e)?e.toValue():e}function Tte({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const a={latestValues:Ite(r,i,s,n),renderState:e()};return t&&(a.onMount=o=>t({props:r,current:o,...a}),a.onUpdate=o=>t(o)),a}const Z8=n=>(e,t)=>{const r=se.useContext(TE),i=se.useContext(SE),s=()=>Tte(n,e,r,i);return t?s():Lb(s)};function Ite(n,e,t,r){const i={},s=r(n,{});for(const g in s)i[g]=j_(s[g]);let{initial:a,animate:o}=n;const l=AE(n),u=K8(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=t?t.initial===!1:!1;h=h||a===!1;const f=h?o:a;if(f&&typeof f!="boolean"&&!IE(f)){const g=Array.isArray(f)?f:[f];for(let p=0;p<g.length;p++){const x=zb(n,g[p]);if(x){const{transitionEnd:v,transition:w,...T}=x;for(const I in T){let A=T[I];if(Array.isArray(A)){const N=h?A.length-1:0;A=A[N]}A!==null&&(i[I]=A)}for(const I in v)i[I]=v[I]}}}return i}const j0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ud=new Set(j0),Q8=n=>e=>typeof e=="string"&&e.startsWith(n),J8=Q8("--"),Ate=Q8("var(--"),$b=n=>Ate(n)?bte.test(n.split("/*")[0].trim()):!1,bte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,e9=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Bl=(n,e,t)=>t>e?e:t<n?n:t,V0={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},_p={...V0,transform:n=>Bl(0,1,n)},n_={...V0,default:1},g1=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Pc=g1("deg"),Vo=g1("%"),Dt=g1("px"),Rte=g1("vh"),Cte=g1("vw"),nN={...Vo,parse:n=>Vo.parse(n)/100,transform:n=>Vo.transform(n*100)},Pte={borderWidth:Dt,borderTopWidth:Dt,borderRightWidth:Dt,borderBottomWidth:Dt,borderLeftWidth:Dt,borderRadius:Dt,radius:Dt,borderTopLeftRadius:Dt,borderTopRightRadius:Dt,borderBottomRightRadius:Dt,borderBottomLeftRadius:Dt,width:Dt,maxWidth:Dt,height:Dt,maxHeight:Dt,top:Dt,right:Dt,bottom:Dt,left:Dt,padding:Dt,paddingTop:Dt,paddingRight:Dt,paddingBottom:Dt,paddingLeft:Dt,margin:Dt,marginTop:Dt,marginRight:Dt,marginBottom:Dt,marginLeft:Dt,backgroundPositionX:Dt,backgroundPositionY:Dt},kte={rotate:Pc,rotateX:Pc,rotateY:Pc,rotateZ:Pc,scale:n_,scaleX:n_,scaleY:n_,scaleZ:n_,skew:Pc,skewX:Pc,skewY:Pc,distance:Dt,translateX:Dt,translateY:Dt,translateZ:Dt,x:Dt,y:Dt,z:Dt,perspective:Dt,transformPerspective:Dt,opacity:_p,originX:nN,originY:nN,originZ:Dt},rN={...V0,transform:Math.round},Wb={...Pte,...kte,zIndex:rN,size:Dt,fillOpacity:_p,strokeOpacity:_p,numOctaves:rN},Mte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nte=j0.length;function Lte(n,e,t){let r="",i=!0;for(let s=0;s<Nte;s++){const a=j0[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=e9(o,Wb[a]);if(!l){i=!1;const h=Mte[a]||a;r+=`${h}(${u}) `}t&&(e[a]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Hb(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(ud.has(l)){a=!0;continue}else if(J8(l)){i[l]=u;continue}else{const h=e9(u,Wb[l]);l.startsWith("origin")?(o=!0,s[l]=h):r[l]=h}}if(e.transform||(a||t?r.transform=Lte(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${u} ${h}`}}const Ote={offset:"stroke-dashoffset",array:"stroke-dasharray"},Dte={offset:"strokeDashoffset",array:"strokeDasharray"};function Fte(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Ote:Dte;n[s.offset]=Dt.transform(-r);const a=Dt.transform(e),o=Dt.transform(t);n[s.array]=`${a} ${o}`}function iN(n,e,t){return typeof n=="string"?n:Dt.transform(e+t*n)}function jte(n,e,t){const r=iN(e,n.x,n.width),i=iN(t,n.y,n.height);return`${r} ${i}`}function Kb(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},h,f){if(Hb(n,u,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:p,dimensions:x}=n;g.transform&&(x&&(p.transform=g.transform),delete g.transform),x&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=jte(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),a!==void 0&&Fte(g,a,o,l,!1)}const Yb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),t9=()=>({...Yb(),attrs:{}}),Xb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function n9(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const r9=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function i9(n,e,t,r){n9(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(r9.has(i)?i:Gb(i),e.attrs[i])}const zx={};function Vte(n){Object.assign(zx,n)}function s9(n,{layout:e,layoutId:t}){return ud.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!zx[n]||n==="opacity")}function qb(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(ji(i[a])||e.style&&ji(e.style[a])||s9(a,n)||((r=t?.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function a9(n,e,t){const r=qb(n,e,t);for(const i in n)if(ji(n[i])||ji(e[i])){const s=j0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function Gte(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const sN=["x","y","width","height","cx","cy","r"],Bte={useVisualState:Z8({scrapeMotionValuesFromProps:a9,createRenderState:t9,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const o in i)if(ud.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<sN.length;o++){const l=sN[o];n[l]!==e[l]&&(a=!0)}a&&qn.read(()=>{Gte(t,r),qn.render(()=>{Kb(r,i,Xb(t.tagName),n.transformTemplate),i9(t,r)})})}})},Ute={useVisualState:Z8({scrapeMotionValuesFromProps:qb,createRenderState:Yb})};function o9(n,e,t){for(const r in e)!ji(e[r])&&!s9(r,t)&&(n[r]=e[r])}function zte({transformTemplate:n},e){return se.useMemo(()=>{const t=Yb();return Hb(t,e,n),Object.assign({},t.vars,t.style)},[e])}function $te(n,e){const t=n.style||{},r={};return o9(r,t,n),Object.assign(r,zte(n,e)),r}function Wte(n,e){const t={},r=$te(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function Hte(n,e,t,r){const i=se.useMemo(()=>{const s=t9();return Kb(s,e,Xb(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};o9(s,n.style,n),i.style={...s,...i.style}}return i}function Kte(n=!1){return(t,r,i,{latestValues:s},a)=>{const l=(Ub(t)?Hte:Wte)(r,s,a,t),u=lte(r,typeof t=="string",n),h=t!==se.Fragment?{...u,...l,ref:i}:{},{children:f}=r,g=se.useMemo(()=>ji(f)?f.get():f,[f]);return se.createElement(t,{...h,children:g})}}function Yte(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...Ub(r)?Bte:Ute,preloadedFeatures:n,useRender:Kte(i),createVisualElement:e,Component:r};return yte(a)}}function l9(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function bE(n,e,t){const r=n.getProps();return zb(r,e,t!==void 0?t:r.custom,n)}const Xte=Fb(()=>window.ScrollTimeline!==void 0);class qte{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(Xte()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Zte extends qte{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Zb(n,e){return n?n[e]||n.default||n:void 0}const eI=2e4;function c9(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<eI;)e+=t,r=n.next(e);return e>=eI?1/0:e}function Qb(n){return typeof n=="function"}function aN(n,e){n.timeline=e,n.onfinish=null}const Jb=n=>Array.isArray(n)&&typeof n[0]=="number",Qte={linearEasing:void 0};function Jte(n,e){const t=Fb(n);return()=>{var r;return(r=Qte[e])!==null&&r!==void 0?r:t()}}const $x=Jte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),u9=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(w0(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function h9(n){return!!(typeof n=="function"&&$x()||!n||typeof n=="string"&&(n in tI||$x())||Jb(n)||Array.isArray(n)&&n.every(h9))}const rm=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,tI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rm([0,.65,.55,1]),circOut:rm([.55,0,1,.45]),backIn:rm([.31,.01,.66,-.59]),backOut:rm([.33,1.53,.69,.99])};function d9(n,e){if(n)return typeof n=="function"&&$x()?u9(n,e):Jb(n)?rm(n):Array.isArray(n)?n.map(t=>d9(t,e)||tI.easeOut):tI[n]}const Va={x:!1,y:!1};function f9(){return Va.x||Va.y}function ene(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function g9(n,e){const t=ene(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function oN(n){return e=>{e.pointerType==="touch"||f9()||n(e)}}function tne(n,e,t={}){const[r,i,s]=g9(n,t),a=oN(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const h=oN(f=>{u(f),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const m9=(n,e)=>e?n===e?!0:m9(n,e.parentElement):!1,eR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,nne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function rne(n){return nne.has(n.tagName)||n.tabIndex!==-1}const im=new WeakSet;function lN(n){return e=>{e.key==="Enter"&&n(e)}}function fS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ine=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=lN(()=>{if(im.has(t))return;fS(t,"down");const i=lN(()=>{fS(t,"up")}),s=()=>fS(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function cN(n){return eR(n)&&!f9()}function sne(n,e,t={}){const[r,i,s]=g9(n,t),a=o=>{const l=o.currentTarget;if(!cN(o)||im.has(l))return;im.add(l);const u=e(o),h=(p,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),!(!cN(p)||!im.has(l))&&(im.delete(l),typeof u=="function"&&u(p,{success:x}))},f=p=>{h(p,t.useGlobalTarget||m9(l,p.target))},g=p=>{h(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!rne(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>ine(u,i),i)}),s}function ane(n){return n==="x"||n==="y"?Va[n]?null:(Va[n]=!0,()=>{Va[n]=!1}):Va.x||Va.y?null:(Va.x=Va.y=!0,()=>{Va.x=Va.y=!1})}const p9=new Set(["width","height","top","left","right","bottom",...j0]);let V_;function one(){V_=void 0}const Go={now:()=>(V_===void 0&&Go.set(pi.isProcessing||nte.useManualTiming?pi.timestamp:performance.now()),V_),set:n=>{V_=n,queueMicrotask(one)}};function tR(n,e){n.indexOf(e)===-1&&n.push(e)}function nR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class rR{constructor(){this.subscriptions=[]}add(e){return tR(this.subscriptions,e),()=>nR(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function y9(n,e){return e?n*(1e3/e):0}const uN=30,lne=n=>!isNaN(parseFloat(n));class cne{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Go.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Go.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new rR);const r=this.events[e].add(t);return e==="change"?()=>{r(),qn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Go.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>uN)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,uN);return y9(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xp(n,e){return new cne(n,e)}function une(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,xp(t))}function hne(n,e){const t=bE(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const o=Ste(s[a]);une(n,a,o)}}function dne(n){return!!(ji(n)&&n.add)}function nI(n,e){const t=n.getValue("willChange");if(dne(t))return t.add(e)}function _9(n){return n.props[Y8]}const x9=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,fne=1e-7,gne=12;function mne(n,e,t,r,i){let s,a,o=0;do a=e+(t-e)/2,s=x9(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>fne&&++o<gne);return a}function m1(n,e,t,r){if(n===e&&t===r)return Xs;const i=s=>mne(s,0,1,n,t);return s=>s===0||s===1?s:x9(i(s),e,r)}const v9=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,E9=n=>e=>1-n(1-e),w9=m1(.33,1.53,.69,.99),iR=E9(w9),S9=v9(iR),T9=n=>(n*=2)<1?.5*iR(n):.5*(2-Math.pow(2,-10*(n-1))),sR=n=>1-Math.sin(Math.acos(n)),I9=E9(sR),A9=v9(sR),b9=n=>/^0[^.\s]+$/u.test(n);function pne(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||b9(n):!0}const wm=n=>Math.round(n*1e5)/1e5,aR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yne(n){return n==null}const _ne=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,oR=(n,e)=>t=>!!(typeof t=="string"&&_ne.test(t)&&t.startsWith(n)||e&&!yne(t)&&Object.prototype.hasOwnProperty.call(t,e)),R9=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(aR);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},xne=n=>Bl(0,255,n),gS={...V0,transform:n=>Math.round(xne(n))},_h={test:oR("rgb","red"),parse:R9("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+gS.transform(n)+", "+gS.transform(e)+", "+gS.transform(t)+", "+wm(_p.transform(r))+")"};function vne(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const rI={test:oR("#"),parse:vne,transform:_h.transform},bf={test:oR("hsl","hue"),parse:R9("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Vo.transform(wm(e))+", "+Vo.transform(wm(t))+", "+wm(_p.transform(r))+")"},Ni={test:n=>_h.test(n)||rI.test(n)||bf.test(n),parse:n=>_h.test(n)?_h.parse(n):bf.test(n)?bf.parse(n):rI.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?_h.transform(n):bf.transform(n)},Ene=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wne(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(aR))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Ene))===null||t===void 0?void 0:t.length)||0)>0}const C9="number",P9="color",Sne="var",Tne="var(",hN="${}",Ine=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vp(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(Ine,l=>(Ni.test(l)?(r.color.push(s),i.push(P9),t.push(Ni.parse(l))):l.startsWith(Tne)?(r.var.push(s),i.push(Sne),t.push(l)):(r.number.push(s),i.push(C9),t.push(parseFloat(l))),++s,hN)).split(hN);return{values:t,split:o,indexes:r,types:i}}function k9(n){return vp(n).values}function M9(n){const{split:e,types:t}=vp(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===C9?s+=wm(i[a]):o===P9?s+=Ni.transform(i[a]):s+=i[a]}return s}}const Ane=n=>typeof n=="number"?0:n;function bne(n){const e=k9(n);return M9(n)(e.map(Ane))}const hu={test:wne,parse:k9,createTransformer:M9,getAnimatableNone:bne},Rne=new Set(["brightness","contrast","saturate","opacity"]);function Cne(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(aR)||[];if(!r)return n;const i=t.replace(r,"");let s=Rne.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const Pne=/\b([a-z-]*)\(.*?\)/gu,iI={...hu,getAnimatableNone:n=>{const e=n.match(Pne);return e?e.map(Cne).join(" "):n}},kne={...Wb,color:Ni,backgroundColor:Ni,outlineColor:Ni,fill:Ni,stroke:Ni,borderColor:Ni,borderTopColor:Ni,borderRightColor:Ni,borderBottomColor:Ni,borderLeftColor:Ni,filter:iI,WebkitFilter:iI},lR=n=>kne[n];function N9(n,e){let t=lR(n);return t!==iI&&(t=hu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Mne=new Set(["auto","none","0"]);function Nne(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Mne.has(s)&&vp(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=N9(t,i)}const dN=n=>n===V0||n===Dt,fN=(n,e)=>parseFloat(n.split(", ")[e]),gN=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return fN(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?fN(s[1],n):0}},Lne=new Set(["x","y","z"]),One=j0.filter(n=>!Lne.has(n));function Dne(n){const e=[];return One.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const T0={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:gN(4,13),y:gN(5,14)};T0.translateX=T0.x;T0.translateY=T0.y;const Rh=new Set;let sI=!1,aI=!1;function L9(){if(aI){const n=Array.from(Rh).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=Dne(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}aI=!1,sI=!1,Rh.forEach(n=>n.complete()),Rh.clear()}function O9(){Rh.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(aI=!0)})}function Fne(){O9(),L9()}class cR{constructor(e,t,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Rh.add(this),sI||(sI=!0,qn.read(O9),qn.resolveKeyframes(L9))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const l=r.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Rh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Rh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const D9=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),jne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Vne(n){const e=jne.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function F9(n,e,t=1){const[r,i]=Vne(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return D9(a)?parseFloat(a):a}return $b(i)?F9(i,e,t+1):i}const j9=n=>e=>e.test(n),Gne={test:n=>n==="auto",parse:n=>n},V9=[V0,Dt,Vo,Pc,Cte,Rte,Gne],mN=n=>V9.find(j9(n));class G9 extends cR{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),$b(u))){const h=F9(u,t.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!p9.has(r)||e.length!==2)return;const[i,s]=e,a=mN(i),o=mN(s);if(a!==o)if(dN(a)&&dN(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)pne(e[i])&&r.push(i);r.length&&Nne(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=T0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=T0[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const pN=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(hu.test(n)||n==="0")&&!n.startsWith("url("));function Bne(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Une(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=pN(i,e),o=pN(s,e);return!a||!o?!1:Bne(n)||(t==="spring"||Qb(t))&&r}const zne=n=>n!==null;function RE(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(zne),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const $ne=40;class B9{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Go.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>$ne?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Fne(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Go.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!Une(e,r,i,s))if(a)this.options.duration=0;else{l&&l(RE(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const cr=(n,e,t)=>n+(e-n)*t;function mS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Wne({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=mS(l,o,n+1/3),s=mS(l,o,n),a=mS(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Wx(n,e){return t=>t>0?e:n}const pS=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Hne=[rI,_h,bf],Kne=n=>Hne.find(e=>e.test(n));function yN(n){const e=Kne(n);if(!e)return!1;let t=e.parse(n);return e===bf&&(t=Wne(t)),t}const _N=(n,e)=>{const t=yN(n),r=yN(e);if(!t||!r)return Wx(n,e);const i={...t};return s=>(i.red=pS(t.red,r.red,s),i.green=pS(t.green,r.green,s),i.blue=pS(t.blue,r.blue,s),i.alpha=cr(t.alpha,r.alpha,s),_h.transform(i))},Yne=(n,e)=>t=>e(n(t)),p1=(...n)=>n.reduce(Yne),oI=new Set(["none","hidden"]);function Xne(n,e){return oI.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function qne(n,e){return t=>cr(n,e,t)}function uR(n){return typeof n=="number"?qne:typeof n=="string"?$b(n)?Wx:Ni.test(n)?_N:Jne:Array.isArray(n)?U9:typeof n=="object"?Ni.test(n)?_N:Zne:Wx}function U9(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>uR(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function Zne(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=uR(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Qne(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=n.indexes[a][i[a]],l=(t=n.values[o])!==null&&t!==void 0?t:0;r[s]=l,i[a]++}return r}const Jne=(n,e)=>{const t=hu.createTransformer(e),r=vp(n),i=vp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?oI.has(n)&&!i.values.length||oI.has(e)&&!r.values.length?Xne(n,e):p1(U9(Qne(r,i),i.values),t):Wx(n,e)};function z9(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?cr(n,e,t):uR(n)(n,e)}const ere=5;function $9(n,e,t){const r=Math.max(e-ere,0);return y9(t-n(r),e-r)}const mr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yS=.001;function tre({duration:n=mr.duration,bounce:e=mr.bounce,velocity:t=mr.velocity,mass:r=mr.mass}){let i,s,a=1-e;a=Bl(mr.minDamping,mr.maxDamping,a),n=Bl(mr.minDuration,mr.maxDuration,kl(n)),a<1?(i=u=>{const h=u*a,f=h*n,g=h-t,p=lI(u,a),x=Math.exp(-f);return yS-g/p*x},s=u=>{const f=u*a*n,g=f*t+t,p=Math.pow(a,2)*Math.pow(u,2)*n,x=Math.exp(-f),v=lI(Math.pow(u,2),a);return(-i(u)+yS>0?-1:1)*((g-p)*x)/v}):(i=u=>{const h=Math.exp(-u*n),f=(u-t)*n+1;return-yS+h*f},s=u=>{const h=Math.exp(-u*n),f=(t-u)*(n*n);return h*f});const o=5/n,l=rre(i,s,o);if(n=Pl(n),isNaN(l))return{stiffness:mr.stiffness,damping:mr.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:n}}}const nre=12;function rre(n,e,t){let r=t;for(let i=1;i<nre;i++)r=r-n(r)/e(r);return r}function lI(n,e){return n*Math.sqrt(1-e*e)}const ire=["duration","bounce"],sre=["stiffness","damping","mass"];function xN(n,e){return e.some(t=>n[t]!==void 0)}function are(n){let e={velocity:mr.velocity,stiffness:mr.stiffness,damping:mr.damping,mass:mr.mass,isResolvedFromDuration:!1,...n};if(!xN(n,sre)&&xN(n,ire))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Bl(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:mr.mass,stiffness:i,damping:s}}else{const t=tre(n);e={...e,...t,mass:mr.mass},e.isResolvedFromDuration=!0}return e}function W9(n=mr.visualDuration,e=mr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:f,velocity:g,isResolvedFromDuration:p}=are({...t,velocity:-kl(t.velocity||0)}),x=g||0,v=u/(2*Math.sqrt(l*h)),w=a-s,T=kl(Math.sqrt(l/h)),I=Math.abs(w)<5;r||(r=I?mr.restSpeed.granular:mr.restSpeed.default),i||(i=I?mr.restDelta.granular:mr.restDelta.default);let A;if(v<1){const D=lI(T,v);A=B=>{const k=Math.exp(-v*T*B);return a-k*((x+v*T*w)/D*Math.sin(D*B)+w*Math.cos(D*B))}}else if(v===1)A=D=>a-Math.exp(-T*D)*(w+(x+T*w)*D);else{const D=T*Math.sqrt(v*v-1);A=B=>{const k=Math.exp(-v*T*B),P=Math.min(D*B,300);return a-k*((x+v*T*w)*Math.sinh(P)+D*w*Math.cosh(P))/D}}const N={calculatedDuration:p&&f||null,next:D=>{const B=A(D);if(p)o.done=D>=f;else{let k=0;v<1&&(k=D===0?Pl(x):$9(A,D,B));const P=Math.abs(k)<=r,M=Math.abs(a-B)<=i;o.done=P&&M}return o.value=o.done?a:B,o},toString:()=>{const D=Math.min(c9(N),eI),B=u9(k=>N.next(D*k).value,D,30);return D+"ms "+B}};return N}function vN({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:h}){const f=n[0],g={done:!1,value:f},p=P=>o!==void 0&&P<o||l!==void 0&&P>l,x=P=>o===void 0?l:l===void 0||Math.abs(o-P)<Math.abs(l-P)?o:l;let v=t*e;const w=f+v,T=a===void 0?w:a(w);T!==w&&(v=T-f);const I=P=>-v*Math.exp(-P/r),A=P=>T+I(P),N=P=>{const M=I(P),j=A(P);g.done=Math.abs(M)<=u,g.value=g.done?T:j};let D,B;const k=P=>{p(g.value)&&(D=P,B=W9({keyframes:[g.value,x(g.value)],velocity:$9(A,P,g.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return k(0),{calculatedDuration:null,next:P=>{let M=!1;return!B&&D===void 0&&(M=!0,N(P),k(P)),D!==void 0&&P>=D?B.next(P-D):(!M&&N(P),g)}}}const ore=m1(.42,0,1,1),lre=m1(0,0,.58,1),H9=m1(.42,0,.58,1),cre=n=>Array.isArray(n)&&typeof n[0]!="number",ure={linear:Xs,easeIn:ore,easeInOut:H9,easeOut:lre,circIn:sR,circInOut:A9,circOut:I9,backIn:iR,backInOut:S9,backOut:w9,anticipate:T9},EN=n=>{if(Jb(n)){z8(n.length===4);const[e,t,r,i]=n;return m1(e,t,r,i)}else if(typeof n=="string")return ure[n];return n};function hre(n,e,t){const r=[],i=t||z9,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||Xs:e;o=p1(l,o)}r.push(o)}return r}function dre(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(z8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=hre(e,r,i),l=o.length,u=h=>{if(a&&h<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const g=w0(n[f],n[f+1],h);return o[f](g)};return t?h=>u(Bl(n[0],n[s-1],h)):u}function fre(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=w0(0,e,r);n.push(cr(t,1,i))}}function gre(n){const e=[0];return fre(e,n.length-1),e}function mre(n,e){return n.map(t=>t*e)}function pre(n,e){return n.map(()=>e||H9).splice(0,n.length-1)}function Hx({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=cre(r)?r.map(EN):EN(r),s={done:!1,value:e[0]},a=mre(t&&t.length===e.length?t:gre(e),n),o=dre(a,e,{ease:Array.isArray(i)?i:pre(e,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const yre=n=>{const e=({timestamp:t})=>n(t);return{start:()=>qn.update(e,!0),stop:()=>uu(e),now:()=>pi.isProcessing?pi.timestamp:Go.now()}},_re={decay:vN,inertia:vN,tween:Hx,keyframes:Hx,spring:W9},xre=n=>n/100;class hR extends B9{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,a=i?.KeyframeResolver||cR,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=Qb(t)?t:_re[t]||Hx;let l,u;o!==Hx&&typeof e[0]!="number"&&(l=p1(xre,z9(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=c9(h));const{calculatedDuration:f}=h,g=f+i,p=g*(r+1)-i;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:g,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:p,repeatType:x,repeatDelay:v,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-g*(this.speed>=0?1:-1),I=this.speed>=0?T<0:T>h;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let A=this.currentTime,N=s;if(p){const P=Math.min(this.currentTime,h)/f;let M=Math.floor(P),j=P%1;!j&&P>=1&&(j=1),j===1&&M--,M=Math.min(M,p+1),M%2&&(x==="reverse"?(j=1-j,v&&(j-=v/f)):x==="mirror"&&(N=a)),A=Bl(0,1,j)*f}const D=I?{done:!1,value:l[0]}:N.next(A);o&&(D.value=o(D.value));let{done:B}=D;!I&&u!==null&&(B=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return k&&i!==void 0&&(D.value=RE(l,this.options,i)),w&&w(D.value),k&&this.finish(),D}get duration(){const{resolved:e}=this;return e?kl(e.calculatedDuration):0}get time(){return kl(this.currentTime)}set time(e){e=Pl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=kl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=yre,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const vre=new Set(["opacity","clipPath","filter","transform"]);function Ere(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const h=d9(o,i);return Array.isArray(h)&&(u.easing=h),n.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const wre=Fb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Kx=10,Sre=2e4;function Tre(n){return Qb(n.type)||n.type==="spring"||!h9(n.ease)}function Ire(n,e){const t=new hR({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<Sre;)r=t.sample(s),i.push(r.value),s+=Kx;return{times:void 0,keyframes:i,duration:s-Kx,ease:"linear"}}const K9={anticipate:T9,backInOut:S9,circInOut:A9};function Are(n){return n in K9}class wN extends B9{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new G9(s,(a,o)=>this.onKeyframesResolved(a,o),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&$x()&&Are(s)&&(s=K9[s]),Tre(this.options)){const{onComplete:f,onUpdate:g,motionValue:p,element:x,...v}=this.options,w=Ire(e,v);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,i=w.times,s=w.ease,a="keyframes"}const h=Ere(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(aN(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;o.set(RE(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return kl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return kl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Pl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Xs;const{animation:r}=t;aN(r,e)}return Xs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:f,element:g,...p}=this.options,x=new hR({...p,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),v=Pl(this.time);u.setWithVelocity(x.sample(v-Kx).value,x.sample(v).value,Kx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return wre()&&r&&vre.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const bre={type:"spring",stiffness:500,damping:25,restSpeed:10},Rre=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Cre={type:"keyframes",duration:.8},Pre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kre=(n,{keyframes:e})=>e.length>2?Cre:ud.has(n)?n.startsWith("scale")?Rre(e[1]):bre:Pre;function Mre({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const dR=(n,e,t,r={},i,s)=>a=>{const o=Zb(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Pl(l);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:i};Mre(o)||(h={...h,...kre(n,h)}),h.duration&&(h.duration=Pl(h.duration)),h.repeatDelay&&(h.repeatDelay=Pl(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const g=RE(h.keyframes,o);if(g!==void 0)return qn.update(()=>{h.onUpdate(g),h.onComplete()}),new Zte([])}return!s&&wN.supports(h)?new wN(h):new hR(h)};function Nre({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Y9(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:a=n.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const f in l){const g=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),p=l[f];if(p===void 0||h&&Nre(h,f))continue;const x={delay:t,...Zb(a||{},f)};let v=!1;if(window.MotionHandoffAnimation){const T=_9(n);if(T){const I=window.MotionHandoffAnimation(T,f,qn);I!==null&&(x.startTime=I,v=!0)}}nI(n,f),g.start(dR(f,g,p,n.shouldReduceMotion&&p9.has(f)?{type:!1}:x,n,v));const w=g.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{qn.update(()=>{o&&hne(n,o)})}),u}function cI(n,e,t={}){var r;const i=bE(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(Y9(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=s;return Lre(n,e,h+u,f,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>h())}else return Promise.all([a(),o(t.delay)])}function Lre(n,e,t=0,r=0,i=1,s){const a=[],o=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(n.variantChildren).sort(Ore).forEach((u,h)=>{u.notify("AnimationStart",e),a.push(cI(u,e,{...s,delay:t+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function Ore(n,e){return n.sortNodePosition(e)}function Dre(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>cI(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=cI(n,e,t);else{const i=typeof e=="function"?bE(n,e,t.custom):e;r=Promise.all(Y9(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const Fre=Vb.length;function X9(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?X9(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Fre;t++){const r=Vb[t],i=n.props[r];(yp(i)||i===!1)&&(e[r]=i)}return e}const jre=[...jb].reverse(),Vre=jb.length;function Gre(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Dre(n,t,r)))}function Bre(n){let e=Gre(n),t=SN(),r=!0;const i=l=>(u,h)=>{var f;const g=bE(n,h,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(g){const{transition:p,transitionEnd:x,...v}=g;u={...u,...v,...x}}return u};function s(l){e=l(n)}function a(l){const{props:u}=n,h=X9(n.parent)||{},f=[],g=new Set;let p={},x=1/0;for(let w=0;w<Vre;w++){const T=jre[w],I=t[T],A=u[T]!==void 0?u[T]:h[T],N=yp(A),D=T===l?I.isActive:null;D===!1&&(x=w);let B=A===h[T]&&A!==u[T]&&N;if(B&&r&&n.manuallyAnimateOnMount&&(B=!1),I.protectedKeys={...p},!I.isActive&&D===null||!A&&!I.prevProp||IE(A)||typeof A=="boolean")continue;const k=Ure(I.prevProp,A);let P=k||T===l&&I.isActive&&!B&&N||w>x&&N,M=!1;const j=Array.isArray(A)?A:[A];let O=j.reduce(i(T),{});D===!1&&(O={});const{prevResolvedValues:W={}}=I,F={...W,...O},Te=be=>{P=!0,g.has(be)&&(M=!0,g.delete(be)),I.needsAnimating[be]=!0;const ce=n.getValue(be);ce&&(ce.liveStyle=!1)};for(const be in F){const ce=O[be],Re=W[be];if(p.hasOwnProperty(be))continue;let Ie=!1;JT(ce)&&JT(Re)?Ie=!l9(ce,Re):Ie=ce!==Re,Ie?ce!=null?Te(be):g.add(be):ce!==void 0&&g.has(be)?Te(be):I.protectedKeys[be]=!0}I.prevProp=A,I.prevResolvedValues=O,I.isActive&&(p={...p,...O}),r&&n.blockInitialAnimation&&(P=!1),P&&(!(B&&k)||M)&&f.push(...j.map(be=>({animation:be,options:{type:T}})))}if(g.size){const w={};g.forEach(T=>{const I=n.getBaseTarget(T),A=n.getValue(T);A&&(A.liveStyle=!0),w[T]=I??null}),f.push({animation:w})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(g=>{var p;return(p=g.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),t[l].isActive=u;const f=a(l);for(const g in t)t[g].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=SN(),r=!0}}}function Ure(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!l9(e,n):!1}function qu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SN(){return{animate:qu(!0),whileInView:qu(),whileHover:qu(),whileTap:qu(),whileDrag:qu(),whileFocus:qu(),exit:qu()}}class Su{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zre extends Su{constructor(e){super(e),e.animationState||(e.animationState=Bre(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();IE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let $re=0;class Wre extends Su{constructor(){super(...arguments),this.id=$re++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Hre={animation:{Feature:zre},exit:{Feature:Wre}};function Ep(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function y1(n){return{point:{x:n.pageX,y:n.pageY}}}const Kre=n=>e=>eR(e)&&n(e,y1(e));function Sm(n,e,t,r){return Ep(n,e,Kre(t),r)}const TN=(n,e)=>Math.abs(n-e);function Yre(n,e){const t=TN(n.x,e.x),r=TN(n.y,e.y);return Math.sqrt(t**2+r**2)}class q9{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=xS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=Yre(f.offset,{x:0,y:0})>=3;if(!g&&!p)return;const{point:x}=f,{timestamp:v}=pi;this.history.push({...x,timestamp:v});const{onStart:w,onMove:T}=this.handlers;g||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,f)},this.handlePointerMove=(f,g)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=_S(g,this.transformPagePoint),qn.update(this.updatePoint,!0)},this.handlePointerUp=(f,g)=>{this.end();const{onEnd:p,onSessionEnd:x,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=xS(f.type==="pointercancel"?this.lastMoveEventInfo:_S(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,w),x&&x(f,w)},!eR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=y1(e),o=_S(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=pi;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,xS(o,this.history)),this.removeListeners=p1(Sm(this.contextWindow,"pointermove",this.handlePointerMove),Sm(this.contextWindow,"pointerup",this.handlePointerUp),Sm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),uu(this.updatePoint)}}function _S(n,e){return e?{point:e(n.point)}:n}function IN(n,e){return{x:n.x-e.x,y:n.y-e.y}}function xS({point:n},e){return{point:n,delta:IN(n,Z9(e)),offset:IN(n,Xre(e)),velocity:qre(e,.1)}}function Xre(n){return n[0]}function Z9(n){return n[n.length-1]}function qre(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=Z9(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Pl(e)));)t--;if(!r)return{x:0,y:0};const s=kl(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const Q9=1e-4,Zre=1-Q9,Qre=1+Q9,J9=.01,Jre=0-J9,eie=0+J9;function ea(n){return n.max-n.min}function tie(n,e,t){return Math.abs(n-e)<=t}function AN(n,e,t,r=.5){n.origin=r,n.originPoint=cr(e.min,e.max,n.origin),n.scale=ea(t)/ea(e),n.translate=cr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Zre&&n.scale<=Qre||isNaN(n.scale))&&(n.scale=1),(n.translate>=Jre&&n.translate<=eie||isNaN(n.translate))&&(n.translate=0)}function Tm(n,e,t,r){AN(n.x,e.x,t.x,r?r.originX:void 0),AN(n.y,e.y,t.y,r?r.originY:void 0)}function bN(n,e,t){n.min=t.min+e.min,n.max=n.min+ea(e)}function nie(n,e,t){bN(n.x,e.x,t.x),bN(n.y,e.y,t.y)}function RN(n,e,t){n.min=e.min-t.min,n.max=n.min+ea(e)}function Im(n,e,t){RN(n.x,e.x,t.x),RN(n.y,e.y,t.y)}function rie(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?cr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?cr(t,n,r.max):Math.min(n,t)),n}function CN(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function iie(n,{top:e,left:t,bottom:r,right:i}){return{x:CN(n.x,t,i),y:CN(n.y,e,r)}}function PN(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function sie(n,e){return{x:PN(n.x,e.x),y:PN(n.y,e.y)}}function aie(n,e){let t=.5;const r=ea(n),i=ea(e);return i>r?t=w0(e.min,e.max-r,n.min):r>i&&(t=w0(n.min,n.max-i,e.min)),Bl(0,1,t)}function oie(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const uI=.35;function lie(n=uI){return n===!1?n=0:n===!0&&(n=uI),{x:kN(n,"left","right"),y:kN(n,"top","bottom")}}function kN(n,e,t){return{min:MN(n,e),max:MN(n,t)}}function MN(n,e){return typeof n=="number"?n:n[e]||0}const NN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rf=()=>({x:NN(),y:NN()}),LN=()=>({min:0,max:0}),Sr=()=>({x:LN(),y:LN()});function fa(n){return[n("x"),n("y")]}function ej({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function cie({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function uie(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function vS(n){return n===void 0||n===1}function hI({scale:n,scaleX:e,scaleY:t}){return!vS(n)||!vS(e)||!vS(t)}function rh(n){return hI(n)||tj(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function tj(n){return ON(n.x)||ON(n.y)}function ON(n){return n&&n!=="0%"}function Yx(n,e,t){const r=n-t,i=e*r;return t+i}function DN(n,e,t,r,i){return i!==void 0&&(n=Yx(n,i,r)),Yx(n,t,r)+e}function dI(n,e=0,t=1,r,i){n.min=DN(n.min,e,t,r,i),n.max=DN(n.max,e,t,r,i)}function nj(n,{x:e,y:t}){dI(n.x,e.translate,e.scale,e.originPoint),dI(n.y,t.translate,t.scale,t.originPoint)}const FN=.999999999999,jN=1.0000000000001;function hie(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Pf(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,nj(n,a)),r&&rh(s.latestValues)&&Pf(n,s.latestValues))}e.x<jN&&e.x>FN&&(e.x=1),e.y<jN&&e.y>FN&&(e.y=1)}function Cf(n,e){n.min=n.min+e,n.max=n.max+e}function VN(n,e,t,r,i=.5){const s=cr(n.min,n.max,i);dI(n,e,t,s,r)}function Pf(n,e){VN(n.x,e.x,e.scaleX,e.scale,e.originX),VN(n.y,e.y,e.scaleY,e.scale,e.originY)}function rj(n,e){return ej(uie(n.getBoundingClientRect(),e))}function die(n,e,t){const r=rj(n,t),{scroll:i}=e;return i&&(Cf(r.x,i.offset.x),Cf(r.y,i.offset.y)),r}const ij=({current:n})=>n?n.ownerDocument.defaultView:null,fie=new WeakMap;class gie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Sr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(y1(h).point)},s=(h,f)=>{const{drag:g,dragPropagation:p,onDragStart:x}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ane(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fa(w=>{let T=this.getAxisMotionValue(w).get()||0;if(Vo.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const A=I.layout.layoutBox[w];A&&(T=ea(A)*(parseFloat(T)/100))}}this.originPoint[w]=T}),x&&qn.postRender(()=>x(h,f)),nI(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(h,f)=>{const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:x,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=f;if(p&&this.currentDirection===null){this.currentDirection=mie(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),v&&v(h,f)},o=(h,f)=>this.stop(h,f),l=()=>fa(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new q9(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:ij(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&qn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!r_(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=rie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Af(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=iie(i.layoutBox,t):this.constraints=!1,this.elastic=lie(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&fa(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=oie(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Af(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=die(r,i.root,this.visualElement.getTransformPagePoint());let a=sie(i.layout.layoutBox,s);if(t){const o=t(cie(a));this.hasMutatedConstraints=!!o,o&&(a=ej(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=fa(h=>{if(!r_(h,t,this.currentDirection))return;let f=l&&l[h]||{};a&&(f={min:0,max:0});const g=i?200:1e6,p=i?40:1e7,x={type:"inertia",velocity:r?e[h]:0,bounceStiffness:g,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,x)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return nI(this.visualElement,e),r.start(dR(e,r,0,t,this.visualElement,!1))}stopAnimation(){fa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fa(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){fa(t=>{const{drag:r}=this.getProps();if(!r_(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-cr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Af(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};fa(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=aie({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fa(a=>{if(!r_(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(cr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;fie.set(this.visualElement,this);const e=this.visualElement.current,t=Sm(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Af(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),qn.read(r);const a=Ep(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(fa(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=uI,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function r_(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function mie(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class pie extends Su{constructor(e){super(e),this.removeGroupControls=Xs,this.removeListeners=Xs,this.controls=new gie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xs}unmount(){this.removeGroupControls(),this.removeListeners()}}const GN=n=>(e,t)=>{n&&qn.postRender(()=>n(e,t))};class yie extends Su{constructor(){super(...arguments),this.removePointerDownListener=Xs}onPointerDown(e){this.session=new q9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ij(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:GN(e),onStart:GN(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&qn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Sm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const G_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function BN(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const zg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Dt.test(n))n=parseFloat(n);else return n;const t=BN(n,e.target.x),r=BN(n,e.target.y);return`${t}% ${r}%`}},_ie={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=hu.parse(n);if(i.length>5)return r;const s=hu.createTransformer(n),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=cr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class xie extends se.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Vte(vie),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),G_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||qn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Bb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sj(n){const[e,t]=B8(),r=se.useContext(Nb);return y.jsx(xie,{...n,layoutGroup:r,switchLayoutGroup:se.useContext(X8),isPresent:e,safeToRemove:t})}const vie={borderRadius:{...zg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zg,borderTopRightRadius:zg,borderBottomLeftRadius:zg,borderBottomRightRadius:zg,boxShadow:_ie};function Eie(n,e,t){const r=ji(n)?n:xp(n);return r.start(dR("",r,e,t)),r.animation}function wie(n){return n instanceof SVGElement&&n.tagName!=="svg"}const Sie=(n,e)=>n.depth-e.depth;class Tie{constructor(){this.children=[],this.isDirty=!1}add(e){tR(this.children,e),this.isDirty=!0}remove(e){nR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Sie),this.isDirty=!1,this.children.forEach(e)}}function Iie(n,e){const t=Go.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(uu(r),n(s-e))};return qn.read(r,!0),()=>uu(r)}const aj=["TopLeft","TopRight","BottomLeft","BottomRight"],Aie=aj.length,UN=n=>typeof n=="string"?parseFloat(n):n,zN=n=>typeof n=="number"||Dt.test(n);function bie(n,e,t,r,i,s){i?(n.opacity=cr(0,t.opacity!==void 0?t.opacity:1,Rie(r)),n.opacityExit=cr(e.opacity!==void 0?e.opacity:1,0,Cie(r))):s&&(n.opacity=cr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<Aie;a++){const o=`border${aj[a]}Radius`;let l=$N(e,o),u=$N(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||zN(l)===zN(u)?(n[o]=Math.max(cr(UN(l),UN(u),r),0),(Vo.test(u)||Vo.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=cr(e.rotate||0,t.rotate||0,r))}function $N(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Rie=oj(0,.5,I9),Cie=oj(.5,.95,Xs);function oj(n,e,t){return r=>r<n?0:r>e?1:t(w0(n,e,r))}function WN(n,e){n.min=e.min,n.max=e.max}function ha(n,e){WN(n.x,e.x),WN(n.y,e.y)}function HN(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function KN(n,e,t,r,i){return n-=e,n=Yx(n,1/t,r),i!==void 0&&(n=Yx(n,1/i,r)),n}function Pie(n,e=0,t=1,r=.5,i,s=n,a=n){if(Vo.test(e)&&(e=parseFloat(e),e=cr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=cr(s.min,s.max,r);n===s&&(o-=e),n.min=KN(n.min,e,t,o,i),n.max=KN(n.max,e,t,o,i)}function YN(n,e,[t,r,i],s,a){Pie(n,e[t],e[r],e[i],e.scale,s,a)}const kie=["x","scaleX","originX"],Mie=["y","scaleY","originY"];function XN(n,e,t,r){YN(n.x,e,kie,t?t.x:void 0,r?r.x:void 0),YN(n.y,e,Mie,t?t.y:void 0,r?r.y:void 0)}function qN(n){return n.translate===0&&n.scale===1}function lj(n){return qN(n.x)&&qN(n.y)}function ZN(n,e){return n.min===e.min&&n.max===e.max}function Nie(n,e){return ZN(n.x,e.x)&&ZN(n.y,e.y)}function QN(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function cj(n,e){return QN(n.x,e.x)&&QN(n.y,e.y)}function JN(n){return ea(n.x)/ea(n.y)}function eL(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class Lie{constructor(){this.members=[]}add(e){tR(this.members,e),e.scheduleRender()}remove(e){if(nR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Oie(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:g,skewX:p,skewY:x}=t;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),g&&(r+=`rotateY(${g}deg) `),p&&(r+=`skewX(${p}deg) `),x&&(r+=`skewY(${x}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const ih={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sm=typeof window<"u"&&window.MotionDebug!==void 0,ES=["","X","Y","Z"],Die={visibility:"hidden"},tL=1e3;let Fie=0;function wS(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function uj(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=_9(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",qn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&uj(r)}function hj({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=Fie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sm&&(ih.totalNodes=ih.resolvedTargetDeltas=ih.recalculatedProjection=0),this.nodes.forEach(Gie),this.nodes.forEach(Wie),this.nodes.forEach(Hie),this.nodes.forEach(Bie),sm&&window.MotionDebug.record(ih)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Tie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new rR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wie(a),this.instance=a;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),n){let f;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Iie(g,250),G_.hasAnimatedSinceResize&&(G_.hasAnimatedSinceResize=!1,this.nodes.forEach(rL))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:g,hasRelativeTargetChanged:p,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||h.getDefaultTransition()||Zie,{onLayoutAnimationStart:w,onLayoutAnimationComplete:T}=h.getProps(),I=!this.targetLayout||!cj(this.targetLayout,x)||p,A=!g&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||g&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,A);const N={...Zb(v,"layout"),onPlay:w,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else g||rL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,uu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Kie),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nL);return}this.isUpdating||this.nodes.forEach(zie),this.isUpdating=!1,this.nodes.forEach($ie),this.nodes.forEach(jie),this.nodes.forEach(Vie),this.clearAllSnapshots();const o=Go.now();pi.delta=Bl(0,1e3/60,o-pi.timestamp),pi.timestamp=o,pi.isProcessing=!0,dS.update.process(pi),dS.preRender.process(pi),dS.render.process(pi),pi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Uie),this.sharedNodes.forEach(Yie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Sr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!lj(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&(o||rh(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Qie(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Sr();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Jie))){const{scroll:h}=this.root;h&&(Cf(l.x,h.offset.x),Cf(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=Sr();if(ha(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:g}=h;h!==this.root&&f&&g.layoutScroll&&(f.wasRoot&&ha(l,a),Cf(l.x,f.offset.x),Cf(l.y,f.offset.y))}return l}applyTransform(a,o=!1){const l=Sr();ha(l,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Pf(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),rh(h.latestValues)&&Pf(l,h.latestValues)}return rh(this.latestValues)&&Pf(l,this.latestValues),l}removeTransform(a){const o=Sr();ha(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!rh(u.latestValues))continue;hI(u.latestValues)&&u.updateSnapshot();const h=Sr(),f=u.measurePageBox();ha(h,f),XN(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return rh(this.latestValues)&&XN(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:g}=this.options;if(!(!this.layout||!(f||g))){if(this.resolvedRelativeTargetAt=pi.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Sr(),this.relativeTargetOrigin=Sr(),Im(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ha(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Sr(),this.targetWithTransforms=Sr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ha(this.target,this.layout.layoutBox),nj(this.target,this.targetDelta)):ha(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Sr(),this.relativeTargetOrigin=Sr(),Im(this.relativeTargetOrigin,this.target,p.target),ha(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sm&&ih.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hI(this.parent.latestValues)||tj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===pi.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;ha(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,p=this.treeScale.y;hie(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Sr());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HN(this.prevProjectionDelta.x,this.projectionDelta.x),HN(this.prevProjectionDelta.y,this.projectionDelta.y)),Tm(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==p||!eL(this.projectionDelta.x,this.prevProjectionDelta.x)||!eL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),sm&&ih.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Rf(),this.projectionDelta=Rf(),this.projectionDeltaWithTransform=Rf()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=Rf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Sr(),p=l?l.source:void 0,x=this.layout?this.layout.source:void 0,v=p!==x,w=this.getStack(),T=!w||w.members.length<=1,I=!!(v&&!T&&this.options.crossfade===!0&&!this.path.some(qie));this.animationProgress=0;let A;this.mixTargetDelta=N=>{const D=N/1e3;iL(f.x,a.x,D),iL(f.y,a.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Im(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Xie(this.relativeTarget,this.relativeTargetOrigin,g,D),A&&Nie(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Sr()),ha(A,this.relativeTarget)),v&&(this.animationValues=h,bie(h,u,this.latestValues,D,I,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(uu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qn.update(()=>{G_.hasAnimatedSinceResize=!0,this.currentAnimation=Eie(0,tL,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:h}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&dj(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Sr();const f=ea(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const g=ea(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}ha(o,l),Pf(o,h),Tm(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Lie),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&wS("z",a,u,this.animationValues);for(let h=0;h<ES.length;h++)wS(`rotate${ES[h]}`,a,u,this.animationValues),wS(`skew${ES[h]}`,a,u,this.animationValues);a.render();for(const h in u)a.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Die;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=j_(a?.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=j_(a?.pointerEvents)||""),this.hasProjected&&!rh(this.latestValues)&&(v.transform=h?h({},""):"none",this.hasProjected=!1),v}const g=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Oie(this.projectionDeltaWithTransform,this.treeScale,g),h&&(u.transform=h(g,u.transform));const{x:p,y:x}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${x.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const v in zx){if(g[v]===void 0)continue;const{correct:w,applyTo:T}=zx[v],I=u.transform==="none"?g[v]:w(g[v],f);if(T){const A=T.length;for(let N=0;N<A;N++)u[T[N]]=I}else u[v]=I}return this.options.layoutId&&(u.pointerEvents=f===this?j_(a?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(nL),this.root.sharedNodes.clear()}}}function jie(n){n.updateLayout()}function Vie(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?fa(f=>{const g=a?t.measuredBox[f]:t.layoutBox[f],p=ea(g);g.min=r[f].min,g.max=g.min+p}):dj(s,t.layoutBox,r)&&fa(f=>{const g=a?t.measuredBox[f]:t.layoutBox[f],p=ea(r[f]);g.max=g.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+p)});const o=Rf();Tm(o,r,t.layoutBox);const l=Rf();a?Tm(l,n.applyTransform(i,!0),t.measuredBox):Tm(l,r,t.layoutBox);const u=!lj(o);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:g,layout:p}=f;if(g&&p){const x=Sr();Im(x,t.layoutBox,g.layoutBox);const v=Sr();Im(v,r,p.layoutBox),cj(x,v)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=x,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Gie(n){sm&&ih.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Bie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Uie(n){n.clearSnapshot()}function nL(n){n.clearMeasurements()}function zie(n){n.isLayoutDirty=!1}function $ie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function rL(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Wie(n){n.resolveTargetDelta()}function Hie(n){n.calcProjection()}function Kie(n){n.resetSkewAndRotation()}function Yie(n){n.removeLeadSnapshot()}function iL(n,e,t){n.translate=cr(e.translate,0,t),n.scale=cr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function sL(n,e,t,r){n.min=cr(e.min,t.min,r),n.max=cr(e.max,t.max,r)}function Xie(n,e,t,r){sL(n.x,e.x,t.x,r),sL(n.y,e.y,t.y,r)}function qie(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Zie={duration:.45,ease:[.4,0,.1,1]},aL=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),oL=aL("applewebkit/")&&!aL("chrome/")?Math.round:Xs;function lL(n){n.min=oL(n.min),n.max=oL(n.max)}function Qie(n){lL(n.x),lL(n.y)}function dj(n,e,t){return n==="position"||n==="preserve-aspect"&&!tie(JN(e),JN(t),.2)}function Jie(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const ese=hj({attachResizeListener:(n,e)=>Ep(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),SS={current:void 0},fj=hj({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!SS.current){const n=new ese({});n.mount(window),n.setOptions({layoutScroll:!0}),SS.current=n}return SS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),tse={pan:{Feature:yie},drag:{Feature:pie,ProjectionNode:fj,MeasureLayout:sj}};function cL(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&qn.postRender(()=>s(e,y1(e)))}class nse extends Su{mount(){const{current:e}=this.node;e&&(this.unmount=tne(e,t=>(cL(this.node,t,"Start"),r=>cL(this.node,r,"End"))))}unmount(){}}class rse extends Su{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=p1(Ep(this.node.current,"focus",()=>this.onFocus()),Ep(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uL(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&qn.postRender(()=>s(e,y1(e)))}class ise extends Su{mount(){const{current:e}=this.node;e&&(this.unmount=sne(e,t=>(uL(this.node,t,"Start"),(r,{success:i})=>uL(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fI=new WeakMap,TS=new WeakMap,sse=n=>{const e=fI.get(n.target);e&&e(n)},ase=n=>{n.forEach(sse)};function ose({root:n,...e}){const t=n||document;TS.has(t)||TS.set(t,{});const r=TS.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ase,{root:n,...e})),r[i]}function lse(n,e,t){const r=ose(e);return fI.set(n,t),r.observe(n),()=>{fI.delete(n),r.unobserve(n)}}const cse={some:0,all:1};class use extends Su{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:cse[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),g=u?h:f;g&&g(l)};return lse(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hse(e,t))&&this.startObserver()}unmount(){}}function hse({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const dse={inView:{Feature:use},tap:{Feature:ise},focus:{Feature:rse},hover:{Feature:nse}},fse={layout:{ProjectionNode:fj,MeasureLayout:sj}},gI={current:null},gj={current:!1};function gse(){if(gj.current=!0,!!Db)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>gI.current=n.matches;n.addListener(e),e()}else gI.current=!1}const mse=[...V9,Ni,hu],pse=n=>mse.find(j9(n)),hL=new WeakMap;function yse(n,e,t){for(const r in e){const i=e[r],s=t[r];if(ji(i))n.addValue(r,i);else if(ji(s))n.addValue(r,xp(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,xp(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const dL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _se{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Go.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,qn.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:h}=a;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=AE(t),this.isVariantNode=K8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in g){const x=g[p];l[p]!==void 0&&ji(x)&&x.set(l[p],!1)}}mount(e){this.current=e,hL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),gj.current||gse(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hL.delete(this.current),this.projection&&this.projection.unmount(),uu(this.notifyUpdate),uu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ud.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&qn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in S0){const t=S0[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Sr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<dL.length;r++){const i=dL[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=yse(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=xp(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(D9(i)||b9(i))?i=parseFloat(i):!pse(i)&&hu.test(t)&&(i=N9(e,t)),this.setBaseTarget(e,ji(i)?i.get():i)),ji(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=zb(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ji(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new rR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class mj extends _se{constructor(){super(...arguments),this.KeyframeResolver=G9}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ji(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function xse(n){return window.getComputedStyle(n)}class vse extends mj{constructor(){super(...arguments),this.type="html",this.renderInstance=n9}readValueFromInstance(e,t){if(ud.has(t)){const r=lR(t);return r&&r.default||0}else{const r=xse(e),i=(J8(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return rj(e,t)}build(e,t,r){Hb(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return qb(e,t,r)}}class Ese extends mj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Sr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ud.has(t)){const r=lR(t);return r&&r.default||0}return t=r9.has(t)?t:Gb(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return a9(e,t,r)}build(e,t,r){Kb(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){i9(e,t,r,i)}mount(e){this.isSVGTag=Xb(e.tagName),super.mount(e)}}const wse=(n,e)=>Ub(n)?new Ese(e):new vse(e,{allowProjection:n!==se.Fragment}),Sse=Yte({...Hre,...dse,...tse,...fse},wse),Ft=cte(Sse);const Tse=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ise=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),fL=n=>{const e=Ise(n);return e.charAt(0).toUpperCase()+e.slice(1)},pj=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Ase=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var bse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rse=se.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>se.createElement("svg",{ref:l,...bse,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:pj("lucide",i),...!s&&!Ase(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,h])=>se.createElement(u,h)),...Array.isArray(s)?s:[s]]));const pt=(n,e)=>{const t=se.forwardRef(({className:r,...i},s)=>se.createElement(Rse,{ref:s,iconNode:e,className:pj(`lucide-${Tse(fL(n))}`,`lucide-${n}`,r),...i}));return t.displayName=fL(n),t};const Cse=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],Pse=pt("archive-restore",Cse);const kse=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],yj=pt("archive",kse);const Mse=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nse=pt("ban",Mse);const Lse=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ose=pt("book-open",Lse);const Dse=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],_j=pt("bug",Dse);const Fse=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jse=pt("calendar",Fse);const Vse=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Gse=pt("camera",Vse);const Bse=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],xj=pt("chart-column",Bse);const Use=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],G0=pt("check",Use);const zse=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fR=pt("chevron-down",zse);const $se=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Wse=pt("chevron-left",$se);const Hse=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],CE=pt("chevron-right",Hse);const Kse=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],vj=pt("chevron-up",Kse);const Yse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ej=pt("circle-alert",Yse);const Xse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],qse=pt("circle-check-big",Xse);const Zse=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Qse=pt("cloud-off",Zse);const Jse=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],gL=pt("cloud",Jse);const eae=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],tae=pt("code",eae);const nae=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rae=pt("compass",nae);const iae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],mL=pt("crosshair",iae);const sae=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mI=pt("download",sae);const aae=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],_1=pt("external-link",aae);const oae=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gR=pt("eye-off",oae);const lae=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mR=pt("eye",lae);const cae=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pR=pt("file-text",cae);const uae=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],hae=pt("folder-open",uae);const dae=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],fae=pt("folder",dae);const gae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],mae=pt("grid-3x3",gae);const pae=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],yae=pt("image-plus",pae);const _ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],wj=pt("info",_ae);const xae=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Qa=pt("layers",xae);const vae=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Eae=pt("link",vae);const wae=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Sae=pt("list",wae);const Tae=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yR=pt("loader-circle",Tae);const Iae=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Aae=pt("locate-fixed",Iae);const bae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pI=pt("lock",bae);const Rae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_R=pt("log-out",Rae);const Cae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],du=pt("map-pin",Cae);const Pae=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],xR=pt("map",Pae);const kae=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Mae=pt("menu",kae);const Nae=[["path",{d:"M5 12h14",key:"1ays0h"}]],Lae=pt("minus",Nae);const Oae=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],yI=pt("mountain",Oae);const Dae=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Fae=pt("mouse-pointer",Dae);const jae=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],vR=pt("navigation",jae);const Vae=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pL=pt("pen-line",Vae);const Gae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Bae=pt("pen",Gae);const Uae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],_I=pt("pencil",Uae);const zae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bo=pt("plus",zae);const $ae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Wae=pt("rotate-ccw",$ae);const Hae=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Kae=pt("ruler",Hae);const Yae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xae=pt("save",Yae);const qae=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Zae=pt("scale",qae);const Qae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xI=pt("search",Qae);const Jae=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vI=pt("settings",Jae);const eoe=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],toe=pt("sliders-horizontal",eoe);const noe=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],roe=pt("sliders-vertical",noe);const ioe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],soe=pt("smartphone",ioe);const aoe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ooe=pt("tag",aoe);const loe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],coe=pt("target",loe);const uoe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],B0=pt("trash-2",uoe);const hoe=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],doe=pt("tree-palm",hoe);const foe=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],goe=pt("type",foe);const moe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ER=pt("upload",moe);const poe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wR=pt("user",poe);const yoe=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],_oe=pt("waves",yoe);const xoe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bs=pt("x",xoe);function voe(){const{tracking:n,startTracking:e,stopTracking:t,updatePosition:r,setWatchId:i,resetFirstFix:s}=qi(),a=se.useCallback(l=>{r(l)},[r]),o=se.useCallback(l=>{console.error("GPS error:",l),alert(`GPS fout: ${l.message}`),t()},[t]);return se.useEffect(()=>{if(!n)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),t();return}const l=navigator.geolocation.watchPosition(a,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(l),()=>{navigator.geolocation.clearWatch(l)}},[n,a,o,i,t]),{tracking:n,start:e,stop:t,toggle:()=>n?t():e()}}function Eoe(){const{tracking:n,toggle:e}=voe();return y.jsx(Ft.button,{className:`
        fixed bottom-2 right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},animate:n?{scale:[1,1.02,1]}:{},transition:n?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":n?"GPS tracking actief":"GPS tracking starten",title:n?"GPS tracking actief":"GPS tracking starten",children:y.jsx(Aae,{size:22,strokeWidth:2})})}const woe="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`);function Soe(){const n=rs(p=>p.map),e=qi(p=>p.position),t=qi(p=>p.accuracy),r=qi(p=>p.tracking),i=qi(p=>p.smoothHeading),s=Xr(p=>p.showAccuracyCircle),a=qi(p=>p.firstFix),o=qi(p=>p.resetFirstFix),l=qi(p=>p.config.centerOnUser),u=se.useRef(null),h=se.useRef(null),f=se.useRef(null),g=se.useMemo(()=>p=>new ur({image:new Hp({src:woe,scale:.9,rotation:p,rotateWithView:!1,anchor:[.5,.5]})}),[]);return se.useEffect(()=>{if(!n||!r&&!e)return;const p=ru([5.1214,52.0907]);return u.current=new to({geometry:new no(p)}),u.current.setStyle(g(0)),h.current=new to({geometry:new no(p)}),f.current=new Xp({source:new $p({features:[h.current,u.current]}),zIndex:1e3}),n.addLayer(f.current),()=>{f.current&&n&&n.removeLayer(f.current)}},[n,r,e,g]),se.useEffect(()=>{if(!n||!e||!u.current||!h.current)return;const p=ru([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(p),h.current.getGeometry()?.setCoordinates(p),s&&t){const x=n.getView().getResolution()||1,v=Math.min(t/x,80);h.current.setStyle(new ur({image:new Dl({radius:v,fill:new oi({color:"rgba(66, 133, 244, 0.12)"})})}))}else h.current.setStyle(new ur({}));if(a&&r){n.getView().setCenter(p),n.getView().setZoom(17),o();return}r&&l&&!a&&n.getView().animate({center:p,duration:150})},[n,r,e,t,a,o,l,s]),se.useEffect(()=>{if(!u.current)return;const p=i!==null?i*Math.PI/180:0;u.current.setStyle(g(p))},[i,g]),null}function Toe(){const n=Vi(t=>t.themesPanelOpen),e=Vi(t=>t.toggleThemesPanel);return y.jsx(Ft.button,{className:`
        fixed bottom-[60px] right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":n?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:y.jsx(xR,{size:22,strokeWidth:2})})}function Ioe(){return y.jsx(Toe,{})}const i_=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],Mc=["Mineraal","Fossiel","Erfgoed","Monument","Overig"],qs=Aa()(F0((n,e)=>({layers:[],colorIndex:0,addLayer:(t,r=Mc)=>{const i=crypto.randomUUID(),s=i_[e().colorIndex%i_.length];return n(a=>({layers:[...a.layers,{id:i,name:t,color:s,categories:[...r],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:a.colorIndex+1})),i},removeLayer:t=>{n(r=>({layers:r.layers.filter(i=>i.id!==t)}))},updateLayer:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)}))},toggleVisibility:t=>{n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)}))},toggleArchived:t=>{n(r=>({layers:r.layers.map(i=>i.id===t?{...i,archived:!i.archived,visible:i.archived?i.visible:!1}:i)}))},addPoint:(t,r)=>{const i={...r,status:r.status||"todo",id:crypto.randomUUID(),createdAt:new Date().toISOString()};n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:[...a.points,i]}:a)}))},removePoint:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,points:s.points.filter(a=>a.id!==r)}:s)}))},updatePoint:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,...i}:o)}:a)}))},setPointStatus:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,status:i}:o)}:a)}))},addCategory:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t&&!s.categories.includes(r)?{...s,categories:[...s.categories,r]}:s)}))},removeCategory:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,categories:s.categories.filter(a=>a!==r)}:s)}))},addPhotoToPoint:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,photos:[...o.photos||[],i]}:o)}:a)}))},removePhotoFromPoint:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,photos:(o.photos||[]).filter(l=>l.id!==i)}:o)}:a)}))},updatePhotoInPoint:(t,r,i,s)=>{n(a=>({layers:a.layers.map(o=>o.id===t?{...o,points:o.points.map(l=>l.id===r?{...l,photos:(l.photos||[]).map(u=>u.id===i?{...u,...s}:u)}:l)}:o)}))},exportLayerAsGeoJSON:t=>{const r=e().layers.find(l=>l.id===t);if(!r)return;const i={type:"FeatureCollection",properties:{name:r.name,color:r.color,categories:r.categories,createdAt:r.createdAt,exportedAt:new Date().toISOString()},features:r.points.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:{id:l.id,name:l.name,category:l.category,notes:l.notes,url:l.url,status:l.status,sourceLayer:l.sourceLayer,sourceId:l.sourceId,photos:l.photos,createdAt:l.createdAt}}))},s=new Blob([JSON.stringify(i,null,2)],{type:"application/geo+json"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`${r.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},importLayerFromGeoJSON:t=>{try{const r=JSON.parse(t);if(r.type!=="FeatureCollection")return{success:!1,error:"Ongeldig GeoJSON formaat"};const i=r.properties||{},s=i.name||`Gemporteerd ${new Date().toLocaleDateString("nl-NL")}`,a=i.categories||Mc,o=i.color||i_[e().colorIndex%i_.length],l=(r.features||[]).filter(h=>h.geometry?.type==="Point").map(h=>({id:h.properties?.id||crypto.randomUUID(),name:h.properties?.name||"Naamloos",category:h.properties?.category||"Overig",notes:h.properties?.notes||"",url:h.properties?.url,status:h.properties?.status||"todo",sourceLayer:h.properties?.sourceLayer,sourceId:h.properties?.sourceId,photos:h.properties?.photos,coordinates:h.geometry.coordinates,createdAt:h.properties?.createdAt||new Date().toISOString()})),u=crypto.randomUUID();return n(h=>({layers:[...h.layers,{id:u,name:s,color:o,categories:a,points:l,visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:h.colorIndex+1})),{success:!0,layerId:u}}catch{return{success:!1,error:"Fout bij parsen van GeoJSON"}}},getLayer:t=>e().layers.find(r=>r.id===t),getActiveLayerCount:()=>e().layers.filter(t=>!t.archived).length,getArchivedLayerCount:()=>e().layers.filter(t=>t.archived).length,clearAll:()=>{n({layers:[],colorIndex:0})}}),{name:"detectorapp-custom-point-layers"}));function ki({title:n,children:e,defaultExpanded:t=!0,layerNames:r}){const[i,s]=se.useState(t),a=ri(p=>p.visible),o=ri(p=>p.setLayerVisibility),l=r?.filter(p=>a[p]).length||0,u=r?.length||0,h=u>0&&l===u,f=l>0&&l<u,g=p=>{if(p.stopPropagation(),!r)return;const x=!h;r.forEach(v=>{o(v,x)})};return y.jsxs("div",{className:"mb-0.5",children:[y.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[y.jsxs("button",{onClick:p=>{p.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[y.jsx(Ft.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:y.jsx(CE,{size:14})}),i?y.jsx(hae,{size:16,className:"text-blue-500"}):y.jsx(fae,{size:16,className:"text-blue-500"}),y.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:n}),l>0&&y.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:l})]}),r&&r.length>0&&y.jsx("button",{onClick:g,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:h?"#3b82f6":f?"#93c5fd":"white",border:h?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(h||f)&&y.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:y.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),y.jsx(Dr,{initial:!1,children:i&&y.jsx(Ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function lt({name:n,type:e,hasOverlay:t}){const r=ri(A=>A.visible[n]),i=ri(A=>A.visible["Labels Overlay"]),s=ri(A=>A.loadingState[n]),a=ri(A=>A.toggleLayer),o=ri(A=>A.setLayerVisibility),l=G8(A=>A.isLayerUnlocked),u=s==="loading",h=s==="error",f=RA[n],g=f?.tier??"free",p=f?.regions??["nl"],v=!l(n,g,p),w=A=>{A.stopPropagation(),!(u||v)&&(e==="overlay"?a(n):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(D=>{o(D,D===n)}))},T=A=>{A.stopPropagation(),o("Labels Overlay",!i)},I=r??!1;return y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsxs("button",{onClick:w,disabled:u||v,className:`flex-1 flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${v?"opacity-50 cursor-not-allowed bg-gray-50":u?"opacity-70 cursor-wait bg-transparent":I?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},title:v?"Premium laag - upgrade om te ontgrendelen":void 0,children:[y.jsxs("span",{className:`flex items-center gap-1 ${h?"text-red-500":v?"text-gray-400":"text-gray-600"}`,children:[n,h&&y.jsx(Ej,{size:12,className:"text-red-500"}),v&&y.jsx(pI,{size:12,className:"text-amber-500"})]}),y.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:v?"#e5e7eb":u?"#93c5fd":I?"#3b82f6":"white",border:v?"2px solid #d1d5db":u?"2px solid #93c5fd":I?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:v?y.jsx(pI,{size:10,strokeWidth:3,className:"text-gray-400"}):u?y.jsx(yR,{size:10,strokeWidth:3,className:"animate-spin"}):I?y.jsx(G0,{size:12,strokeWidth:3}):null})]}),t&&I&&y.jsx("button",{onClick:T,className:`p-1 rounded transition-colors border-0 outline-none ${i?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:i?"Labels verbergen":"Labels tonen",children:y.jsx(ooe,{size:12})})]})}function Aoe(){const{themesPanelOpen:n,toggleThemesPanel:e}=Vi(),{layers:t,toggleVisibility:r}=qs(),i=se.useRef(null),s=Xr(l=>l.layerPanelFontScale),a=Xr(l=>l.setLayerPanelFontScale),o=13*s/100;return se.useEffect(()=>{if(!n)return;const l=h=>{i.current&&!i.current.contains(h.target)&&e()},u=setTimeout(()=>{document.addEventListener("click",l)},100);return()=>{clearTimeout(u),document.removeEventListener("click",l)}},[n,e]),y.jsx(Dr,{children:n&&y.jsxs(Ft.div,{ref:i,className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[y.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-500",style:{fontSize:`${o}px`},children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Qa,{size:14,className:"text-white"}),y.jsx("span",{className:"font-medium text-white",children:"Kaartlagen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:s,onInput:l=>{a(parseInt(l.target.value))},onChange:l=>a(parseInt(l.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s}%`}),y.jsx("span",{className:"text-xs text-blue-200",children:"T"}),y.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none bg-blue-400/50 hover:bg-blue-400 transition-colors ml-1",children:y.jsx(bs,{size:16,className:"text-white",strokeWidth:2.5})})]})]}),y.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${o}px`},children:[y.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[y.jsx("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:y.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.9em"},children:"Mijn Vondsten"})}),y.jsx(lt,{name:"Mijn Vondsten",type:"overlay"})]}),t.filter(l=>!l.archived).length>0&&y.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[y.jsx("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:y.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.9em"},children:"Mijn Lagen"})}),t.filter(l=>!l.archived).map(l=>y.jsxs("button",{onClick:()=>r(l.id),className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${l.visible?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},children:[y.jsxs("span",{className:"flex items-center gap-2 text-gray-600",children:[l.name,y.jsxs("span",{className:"text-xs text-gray-400",children:["(",l.points.length,")"]})]}),y.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:l.visible?"#3b82f6":"white",border:l.visible?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:l.visible&&y.jsx(G0,{size:12,strokeWidth:3})})]},l.id))]}),y.jsxs("div",{className:"mb-2",children:[y.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1",children:y.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Basislaag"})}),y.jsxs("div",{className:"space-y-0",children:[y.jsx(lt,{name:"CartoDB (licht)",type:"base"}),y.jsx(lt,{name:"OpenStreetMap",type:"base"}),y.jsx(lt,{name:"Luchtfoto",type:"base",hasOverlay:!0}),y.jsx(lt,{name:"TMK 1850",type:"base",hasOverlay:!0}),y.jsx(lt,{name:"Bonnebladen 1900",type:"base",hasOverlay:!0})]})]}),y.jsxs("div",{className:"mb-2",children:[y.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1 border-t border-gray-100 pt-2",children:y.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Thema's"})}),y.jsxs(ki,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[y.jsx(lt,{name:"Hunebedden",type:"overlay"}),y.jsx(lt,{name:"FAMKE Steentijd",type:"overlay"}),y.jsx(lt,{name:"Grafheuvels",type:"overlay"}),y.jsx(lt,{name:"Terpen",type:"overlay"}),y.jsxs(ki,{title:"Paleokaarten (tijdreizen)",defaultExpanded:!1,layerNames:["Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[y.jsx(lt,{name:"Paleokaart 9000 v.Chr.",type:"overlay"}),y.jsx(lt,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),y.jsx(lt,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),y.jsx(lt,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),y.jsx(lt,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),y.jsx(lt,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),y.jsx(lt,{name:"Paleokaart 800 n.Chr.",type:"overlay"})]})]}),y.jsxs(ki,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","IKAW","Archeo Landschappen","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[y.jsx(lt,{name:"AMK Monumenten",type:"overlay"}),y.jsxs(ki,{title:"AMK per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[y.jsx(lt,{name:"AMK Romeins",type:"overlay"}),y.jsx(lt,{name:"AMK Steentijd",type:"overlay"}),y.jsx(lt,{name:"AMK Vroege ME",type:"overlay"}),y.jsx(lt,{name:"AMK Late ME",type:"overlay"}),y.jsx(lt,{name:"AMK Overig",type:"overlay"})]}),y.jsx(lt,{name:"Romeinse wegen (regio)",type:"overlay"}),y.jsx(lt,{name:"Romeinse wegen (Wereld)",type:"overlay"}),y.jsx(lt,{name:"IKAW",type:"overlay"}),y.jsx(lt,{name:"Archeo Landschappen",type:"overlay"}),y.jsxs(ki,{title:"Verwachtingen uiterwaarden",defaultExpanded:!1,layerNames:["UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[y.jsx(lt,{name:"UIKAV Punten",type:"overlay"}),y.jsx(lt,{name:"UIKAV Vlakken",type:"overlay"}),y.jsx(lt,{name:"UIKAV Expert",type:"overlay"}),y.jsx(lt,{name:"UIKAV Buffer",type:"overlay"}),y.jsx(lt,{name:"UIKAV Indeling",type:"overlay"})]})]}),y.jsxs(ki,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Runes"],children:[y.jsx(lt,{name:"Rijksmonumenten",type:"overlay"}),y.jsx(lt,{name:"Werelderfgoed",type:"overlay"}),y.jsx(lt,{name:"Religieus Erfgoed",type:"overlay"}),y.jsx(lt,{name:"Kastelen",type:"overlay"}),y.jsx(lt,{name:"Runes",type:"overlay"})]}),y.jsxs(ki,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[y.jsx(lt,{name:"WWII Bunkers",type:"overlay"}),y.jsx(lt,{name:"Slagvelden",type:"overlay"}),y.jsx(lt,{name:"Militaire Vliegvelden",type:"overlay"}),y.jsx(lt,{name:"Verdedigingslinies",type:"overlay"}),y.jsx(lt,{name:"Militaire Objecten",type:"overlay"}),y.jsx(lt,{name:"Inundatiegebieden",type:"overlay"})]}),y.jsxs(ki,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m"],children:[y.jsx(lt,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),y.jsx(lt,{name:"AHN4 Hillshade NL",type:"overlay"}),y.jsx(lt,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),y.jsx(lt,{name:"AHN 0.5m",type:"overlay"})]}),y.jsxs(ki,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Veengebieden","Geomorfologie","Bodemkaart","Essen"],children:[y.jsx(lt,{name:"Veengebieden",type:"overlay"}),y.jsx(lt,{name:"Geomorfologie",type:"overlay"}),y.jsx(lt,{name:"Bodemkaart",type:"overlay"}),y.jsx(lt,{name:"Essen",type:"overlay"})]}),y.jsxs(ki,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[y.jsx(lt,{name:"Gewaspercelen",type:"overlay"}),y.jsx(lt,{name:"Kadastrale Grenzen",type:"overlay"})]}),y.jsxs(ki,{title:"Provinciale Thema's",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[y.jsxs(ki,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[y.jsx(lt,{name:"Scheepswrakken",type:"overlay"}),y.jsx(lt,{name:"Woonheuvels ZH",type:"overlay"}),y.jsx(lt,{name:"Romeinse Forten",type:"overlay"}),y.jsx(lt,{name:"Windmolens",type:"overlay"}),y.jsx(lt,{name:"Erfgoedlijnen",type:"overlay"}),y.jsx(lt,{name:"Oude Kernen",type:"overlay"})]}),y.jsxs(ki,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[y.jsx(lt,{name:"Relictenkaart Punten",type:"overlay"}),y.jsx(lt,{name:"Relictenkaart Lijnen",type:"overlay"}),y.jsx(lt,{name:"Relictenkaart Vlakken",type:"overlay"})]}),y.jsx(ki,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:y.jsx(lt,{name:"Verdronken Dorpen",type:"overlay"})})]}),y.jsxs(ki,{title:"Fossielen, Mineralen & Goud",defaultExpanded:!1,layerNames:["Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[y.jsx(lt,{name:"Fossiel Hotspots",type:"overlay"}),y.jsx(lt,{name:"Mineralen Hotspots",type:"overlay"}),y.jsx(lt,{name:"Goudrivieren",type:"overlay"}),y.jsx(lt,{name:"Fossielen Nederland",type:"overlay"}),y.jsx(lt,{name:"Fossielen Belgi",type:"overlay"}),y.jsx(lt,{name:"Fossielen Duitsland",type:"overlay"}),y.jsx(lt,{name:"Fossielen Frankrijk",type:"overlay"})]}),y.jsxs(ki,{title:"Recreatie",defaultExpanded:!1,layerNames:["Wandelroutes","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[y.jsx(lt,{name:"Wandelroutes",type:"overlay"}),y.jsx(lt,{name:"Parken",type:"overlay"}),y.jsx(lt,{name:"Speeltuinen",type:"overlay"}),y.jsx(lt,{name:"Musea",type:"overlay"}),y.jsx(lt,{name:"Strandjes",type:"overlay"}),y.jsx(lt,{name:"Kringloopwinkels",type:"overlay"})]})]})]})]})})}function boe(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var Xh=1,qh=2,Wf=3,Roe=4,EI=5,yL=6378137,Coe=6356752314e-3,_L=.0066943799901413165,Am=484813681109536e-20,ze=Math.PI/2,Poe=.16666666666666666,koe=.04722222222222222,Moe=.022156084656084655,it=1e-10,gr=.017453292519943295,ws=57.29577951308232,bn=Math.PI/4,wp=Math.PI*2,Tr=3.14159265359,Rs={};Rs.greenwich=0;Rs.lisbon=-9.131906111111;Rs.paris=2.337229166667;Rs.bogota=-74.080916666667;Rs.madrid=-3.687938888889;Rs.rome=12.452333333333;Rs.bern=7.439583333333;Rs.jakarta=106.807719444444;Rs.ferro=-17.666666666667;Rs.brussels=4.367975;Rs.stockholm=18.058277777778;Rs.athens=23.7163375;Rs.oslo=10.722916666667;const Noe={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var xL=/[\s_\-\/\(\)]/g;function fu(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(xL,""),i=-1,s,a;++i<t.length;)if(s=t[i],a=s.toLowerCase().replace(xL,""),a===r)return n[s]}function wI(n){var e={},t=n.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var u=l.split("=");return u.push(!0),o[u[0].toLowerCase()]=u[1],o},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*gr},lat_1:function(o){e.lat1=o*gr},lat_2:function(o){e.lat2=o*gr},lat_ts:function(o){e.lat_ts=o*gr},lon_0:function(o){e.long0=o*gr},lon_1:function(o){e.long1=o*gr},lon_2:function(o){e.long2=o*gr},alpha:function(o){e.alpha=parseFloat(o)*gr},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*gr},lonc:function(o){e.longc=o*gr},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=fu(Noe,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*gr},pm:function(o){var l=fu(Rs,o);e.from_greenwich=(l||parseFloat(o))*gr},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}class Sj{static getId(e){const t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:a}}static convertAxis(e){const t=e[1]||"Unknown";let r;const i=t.match(/^\((.)\)$/);if(i){const u=i[1].toUpperCase();if(u==="E")r="east";else if(u==="N")r="north";else if(u==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${u}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(u=>Array.isArray(u)&&u[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=e.find(u=>Array.isArray(u)&&(u[0]==="LENGTHUNIT"||u[0]==="ANGLEUNIT"||u[0]==="SCALEUNIT")),l=this.convertUnit(o);return{name:t,direction:r,unit:l,order:a}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,t.conversion=e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const r=e.find(g=>Array.isArray(g)&&g[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(i){const g=this.convertUnit(i);t.coordinate_system.unit=g}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const s=e.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(s){const g=this.convert(s);s[0]==="ENSEMBLE"?t.datum_ensemble=g:t.datum=g;const p=e.find(x=>Array.isArray(x)&&x[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(g.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const a=e.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");a&&(t.accuracy=parseFloat(a[1]));const o=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");o&&(t.ellipsoid=this.convert(o)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const l=e.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(l){const g=l.find(p=>Array.isArray(p));t.source_crs=g?this.convert(g):null}const u=e.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(u){const g=u.find(p=>Array.isArray(p));t.target_crs=g?this.convert(g):null}const h=e.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");h?t.transformation=this.convert(h):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const g=t.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const f=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=f)}),f.conversion_factor&&f.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:f});break;default:t.keyword=e[0];break}return t}}class Loe extends Sj{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class Ooe extends Sj{static convert(e,t={}){super.convert(e,t);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),a=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),o=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},s&&(t.usage.scope=s[1]),a&&(t.usage.area=a[1]),o&&(t.usage.bbox=o.slice(1))}return t}}function Doe(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function Foe(n){return(Doe(n)==="2019"?Ooe:Loe).convert(n)}function joe(n){const e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var Sp=1,Tj=2,Ij=3,Xx=4,Aj=5,SR=-1,Voe=/\s/,Goe=/[A-Za-z]/,Boe=/[A-Za-z84_]/,PE=/[,\]]/,bj=/[\d\.E\-\+]/;function Kl(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Sp}Kl.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Xx)for(;Voe.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case Sp:return this.neutral(n);case Tj:return this.keyword(n);case Xx:return this.quoted(n);case Aj:return this.afterquote(n);case Ij:return this.number(n);case SR:return}};Kl.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Xx;return}if(PE.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Kl.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Sp;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Sp,this.currentObject=this.stack.pop(),this.currentObject||(this.state=SR);return}};Kl.prototype.number=function(n){if(bj.test(n)){this.word+=n;return}if(PE.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Kl.prototype.quoted=function(n){if(n==='"'){this.state=Aj;return}this.word+=n};Kl.prototype.keyword=function(n){if(Boe.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Sp;return}if(PE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Kl.prototype.neutral=function(n){if(Goe.test(n)){this.word=n,this.state=Tj;return}if(n==='"'){this.word="",this.state=Xx;return}if(bj.test(n)){this.word=n,this.state=Ij;return}if(PE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Kl.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===SR)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Uoe(n){var e=new Kl(n);return e.output()}function IS(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(s,a){return kf(a,s),s},r);e&&(n[e]=i)}function kf(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},kf(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&kf(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&kf(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],IS(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],IS(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return kf(n,e[t]);return IS(e,t,n)}}var zoe=.017453292519943295;function Ga(n){return n*zoe}function Rj(n){const e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=Ga(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=Ga(n.lat0>0?90:-90),delete n.lat1)}function vL(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function EL(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function wL(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=EL(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-EL(n.ellipsoid.semi_minor_axis))))}function qx(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?(qx(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{const r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,wL(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,wL(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=vL(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=vL(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),a=i.value;i.unit&&i.unit.conversion_factor?e[s]=a*i.unit.conversion_factor:i.unit==="degree"?e[s]=a*Math.PI/180:e[s]=a});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":qx(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),Rj(e),e)}var $oe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Woe(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function Cj(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];$oe.indexOf(i)!==-1&&Hoe(n[i]),typeof n[i]=="object"&&Cj(n[i])}}function Hoe(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var s=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=Ga(n.rectified_grid_angle));function o(h){var f=n.to_meter||1;return h*f}var l=function(h){return Woe(n,h)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ga],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ga],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Ga],["lat0","latitude_of_origin",Ga],["lat0","standard_parallel_1",Ga],["lat1","standard_parallel_1",Ga],["lat2","standard_parallel_2",Ga],["azimuth","Azimuth"],["alpha","azimuth",Ga],["srsCode","name"]];u.forEach(l),Rj(n)}function Zx(n){if(typeof n=="object")return qx(n);const e=joe(n);var t=Uoe(n);if(e==="WKT2"){const s=Foe(t);return qx(s)}var r=t[0],i={};return kf(t,i),Cj(i),i[r]}function mi(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?mi[n]=wI(arguments[1]):mi[n]=Zx(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?mi[n]=Zx(arguments[1]):(mi[n]=t,t||delete mi[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?mi.apply(e,r):mi(r)});if(typeof n=="string"){if(n in mi)return mi[n]}else"EPSG"in n?mi["EPSG:"+n.EPSG]=n:"ESRI"in n?mi["ESRI:"+n.ESRI]=n:"IAU2000"in n?mi["IAU2000:"+n.IAU2000]=n:console.log(n);return}}boe(mi);function Koe(n){return typeof n=="string"}function Yoe(n){return n in mi}function Xoe(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var qoe=["3857","900913","3785","102113"];function Zoe(n){var e=fu(n,"authority");if(e){var t=fu(e,"epsg");return t&&qoe.indexOf(t)>-1}}function Qoe(n){var e=fu(n,"extension");if(e)return fu(e,"proj4")}function Joe(n){return n[0]==="+"}function ele(n){if(Koe(n)){if(Yoe(n))return mi[n];if(Xoe(n)){var e=Zx(n);if(Zoe(e))return mi["EPSG:3857"];var t=Qoe(e);return t?wI(t):e}if(Joe(n))return wI(n)}else return"projName"in n?n:Zx(n)}function SL(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function Yo(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function x1(n){return n<0?-1:1}function ct(n,e){return e||Math.abs(n)<=Tr?n:n-x1(n)*wp}function Ja(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(ze-e))/r}function Tp(n,e){for(var t=.5*n,r,i,s=ze-2*Math.atan(e),a=0;a<=15;a++)if(r=n*Math.sin(s),i=ze-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function tle(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Yo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function nle(n){var e=n.x,t=n.y;if(t*ws>90&&t*ws<-90&&e*ws>180&&e*ws<-180)return null;var r,i;if(Math.abs(Math.abs(t)-ze)<=it)return null;if(this.sphere)r=this.x0+this.a*this.k0*ct(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(bn+.5*t));else{var s=Math.sin(t),a=Ja(this.e,t,s);r=this.x0+this.a*this.k0*ct(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(a)}return n.x=r,n.y=i,n}function rle(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=ze-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(i=Tp(this.e,s),i===-9999)return null}return r=ct(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var ile=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const sle={init:tle,forward:nle,inverse:rle,names:ile};function ale(){}function TL(n){return n}var Pj=["longlat","identity"];const ole={init:ale,forward:TL,inverse:TL,names:Pj};var lle=[sle,ole],sh={},Mf=[];function kj(n,e){var t=Mf.length;return n.names?(Mf[t]=n,n.names.forEach(function(r){sh[r.toLowerCase()]=t}),this):(console.log(e),!0)}function Mj(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function cle(n){if(!n)return!1;var e=n.toLowerCase();if(typeof sh[e]<"u"&&Mf[sh[e]]||(e=Mj(e),e in sh&&Mf[sh[e]]))return Mf[sh[e]]}function ule(){lle.forEach(kj)}const hle={start:ule,add:kj,get:cle};var Nj={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const dle=Nj.WGS84;function fle(n,e,t,r){var i=n*n,s=e*e,a=(i-s)/i,o=0;r?(n*=1-a*(Poe+a*(koe+a*Moe)),i=n*n,a=0):o=Math.sqrt(a);var l=(i-s)/s;return{es:a,e:o,ep2:l}}function gle(n,e,t,r,i){if(!n){var s=fu(Nj,r);s||(s=dle),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<it)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var B_={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var mle in B_){var AS=B_[mle];AS.datumName&&(B_[AS.datumName]=AS)}function ple(n,e,t,r,i,s,a){var o={};return n===void 0||n==="none"?o.datum_type=EI:o.datum_type=Roe,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Xh),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=qh,o.datum_params[3]*=Am,o.datum_params[4]*=Am,o.datum_params[5]*=Am,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=Wf,o.grids=a),o.a=t,o.b=r,o.es=i,o.ep2=s,o}var TR={};function yle(n,e,t){return e instanceof ArrayBuffer?_le(n,e,t):{ready:xle(n,e)}}function _le(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=wle(i),a=Sle(i,s),o=Tle(i,a,s,r),l={header:a,subgrids:o};return TR[n]=l,l}async function xle(n,e){for(var t=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),a=await s.readRasters(),o=a,l=[s.getWidth(),s.getHeight()],u=s.getBoundingBox().map(IL),h=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(IL),f=u[0]+(l[0]-1)*h[0],g=u[3]-(l[1]-1)*h[1],p=o[0],x=o[1],v=[];for(let I=l[1]-1;I>=0;I--)for(let A=l[0]-1;A>=0;A--){var w=I*l[0]+A;v.push([-Wc(x[w]),Wc(p[w])])}t.push({del:h,lim:l,ll:[-f,g],cvs:v})}var T={header:{nSubgrids:r},subgrids:t};return TR[n]=T,T}function vle(n){if(n===void 0)return null;var e=n.split(",");return e.map(Ele)}function Ele(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:TR[n]||null,isNull:!1}}function IL(n){return n*Math.PI/180}function Wc(n){return n/3600*Math.PI/180}function wle(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Sle(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:SI(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function SI(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Tle(n,e,t,r){for(var i=176,s=[],a=0;a<e.nSubgrids;a++){var o=Ale(n,i,t),l=ble(n,i,o,t,r),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[Wc(o.lowerLongitude),Wc(o.lowerLatitude)],del:[Wc(o.longitudeInterval),Wc(o.latitudeInterval)],lim:[u,h],count:o.gridNodeCount,cvs:Ile(l)});var f=16;r===!1&&(f=8),i+=176+o.gridNodeCount*f}return s}function Ile(n){return n.map(function(e){return[Wc(e.longitudeShift),Wc(e.latitudeShift)]})}function Ale(n,e,t){return{name:SI(n,e+8,e+16).trim(),parent:SI(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function ble(n,e,t,r,i){var s=e+176,a=16;i===!1&&(a=8);for(var o=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:n.getFloat32(s+l*a,r),longitudeShift:n.getFloat32(s+l*a+4,r)};i!==!1&&(u.latitudeAccuracy=n.getFloat32(s+l*a+8,r),u.longitudeAccuracy=n.getFloat32(s+l*a+12,r)),o.push(u)}return o}function Ta(n,e){if(!(this instanceof Ta))return new Ta(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(u){if(u)throw u};var t=ele(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=Ta.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=fu(B_,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=gle(t.a,t.b,t.rf,t.ellps,t.sphere),a=fle(s.a,s.b,s.rf,t.R_A),o=vle(t.nadgrids),l=t.datum||ple(t.datumCode,t.datum_params,s.a,s.b,a.es,a.ep2,o);SL(this,t),SL(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}Ta.projections=hle;Ta.projections.start();function Rle(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===Xh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===qh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function Lj(n,e,t){var r=n.x,i=n.y,s=n.z?n.z:0,a,o,l,u;if(i<-ze&&i>-1.001*ze)i=-ze;else if(i>ze&&i<1.001*ze)i=ze;else{if(i<-ze)return{x:-1/0,y:-1/0,z:n.z};if(i>ze)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),o=Math.sin(i),u=Math.cos(i),l=o*o,a=t/Math.sqrt(1-e*l),{x:(a+s)*u*Math.cos(r),y:(a+s)*u*Math.sin(r),z:(a*(1-e)+s)*o}}function Oj(n,e,t,r){var i=1e-12,s=i*i,a=30,o,l,u,h,f,g,p,x,v,w,T,I,A,N=n.x,D=n.y,B=n.z?n.z:0,k,P,M;if(o=Math.sqrt(N*N+D*D),l=Math.sqrt(N*N+D*D+B*B),o/t<i){if(k=0,l/t<i)return P=ze,M=-r,{x:n.x,y:n.y,z:n.z}}else k=Math.atan2(D,N);u=B/l,h=o/l,f=1/Math.sqrt(1-e*(2-e)*h*h),x=h*(1-e)*f,v=u*f,A=0;do A++,p=t/Math.sqrt(1-e*v*v),M=o*x+B*v-p*(1-e*v*v),g=e*p/(p+M),f=1/Math.sqrt(1-g*(2-g)*h*h),w=h*(1-g)*f,T=u*f,I=T*x-w*v,x=w,v=T;while(I*I>s&&A<a);return P=Math.atan(T/Math.abs(w)),{x:k,y:P,z:M}}function Cle(n,e,t){if(e===Xh)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===qh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6];return{x:u*(n.x-l*n.y+o*n.z)+r,y:u*(l*n.x+n.y-a*n.z)+i,z:u*(-o*n.x+a*n.y+n.z)+s}}}function Ple(n,e,t){if(e===Xh)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===qh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],h=(n.x-r)/u,f=(n.y-i)/u,g=(n.z-s)/u;return{x:h+l*f-o*g,y:-l*h+f+a*g,z:o*h-a*f+g}}}function s_(n){return n===Xh||n===qh}function kle(n,e,t){if(Rle(n,e)||n.datum_type===EI||e.datum_type===EI)return t;var r=n.a,i=n.es;if(n.datum_type===Wf){var s=AL(n,!1,t);if(s!==0)return;r=yL,i=_L}var a=e.a,o=e.b,l=e.es;if(e.datum_type===Wf&&(a=yL,o=Coe,l=_L),i===l&&r===a&&!s_(n.datum_type)&&!s_(e.datum_type))return t;if(t=Lj(t,i,r),s_(n.datum_type)&&(t=Cle(t,n.datum_type,n.datum_params)),s_(e.datum_type)&&(t=Ple(t,e.datum_type,e.datum_params)),t=Oj(t,l,a,o),e.datum_type===Wf){var u=AL(e,!0,t);if(u!==0)return}return t}function AL(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<n.grids.length;a++){var o=n.grids[a];if(s.push(o.name),o.isNull){i=r;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,u=0,h=l.length;u<h;u++){var f=l[u],g=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,p=f.ll[0]-g,x=f.ll[1]-g,v=f.ll[0]+(f.lim[0]-1)*f.del[0]+g,w=f.ll[1]+(f.lim[1]-1)*f.del[1]+g;if(!(x>r.y||p>r.x||w<r.y||v<r.x)&&(i=Mle(r,e,f),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*ws+" "+r.y*ws+" tried: '"+s+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function Mle(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=ct(i.x-Math.PI)+Math.PI;var s=bL(i,t);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,o=1e-12,l,u;do{if(u=bL(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+s.x),y:i.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=ct(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=n.x+s.x,r.y=n.y+s.y);return r}function bL(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var u={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var h={x:e.cvs[a][0],y:e.cvs[a][1]},f=i.x*i.y,g=i.x*(1-i.y),p=(1-i.x)*(1-i.y),x=(1-i.x)*i.y;return s.x=p*o.x+g*l.x+x*h.x+f*u.x,s.y=p*o.y+g*l.y+x*h.y+f*u.y,s}function RL(n,e,t){var r=t.x,i=t.y,s=t.z||0,a,o,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(a=r,"ew".indexOf(n.axis[l])!==-1?o="x":o="y"):l===1?(a=i,"ns".indexOf(n.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),n.axis[l]){case"e":u[o]=a;break;case"w":u[o]=-a;break;case"n":u[o]=a;break;case"s":u[o]=-a;break;case"u":t[o]!==void 0&&(u.z=a);break;case"d":t[o]!==void 0&&(u.z=-a);break;default:return null}return u}function Dj(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function Nle(n){CL(n.x),CL(n.y)}function CL(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function Lle(n,e){return(n.datum.datum_type===Xh||n.datum.datum_type===qh||n.datum.datum_type===Wf)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Xh||e.datum.datum_type===qh||e.datum.datum_type===Wf)&&n.datumCode!=="WGS84"}function Qx(n,e,t,r){var i;Array.isArray(t)?t=Dj(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(Nle(t),n.datum&&e.datum&&Lle(n,e)&&(i=new Ta("WGS84"),t=Qx(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=RL(n,!1,t)),n.projName==="longlat")t={x:t.x*gr,y:t.y*gr,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=kle(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*ws,y:t.y*ws,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?RL(e,!0,t):(t&&!s&&delete t.z,t)}var PL=Ta("WGS84");function bS(n,e,t,r){var i,s,a;return Array.isArray(t)?(i=Qx(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(s=Qx(n,e,t,r),a=Object.keys(t),a.length===2||a.forEach(function(o){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=t[o]}),s)}function a_(n){return n instanceof Ta?n:typeof n=="object"&&"oProj"in n?n.oProj:Ta(n)}function Ole(n,e,t){var r,i,s=!1,a;return typeof e>"u"?(i=a_(n),r=PL,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=a_(n),r=PL,s=!0),r||(r=a_(n)),i||(i=a_(e)),t?bS(r,i,t):(a={forward:function(o,l){return bS(r,i,o,l)},inverse:function(o,l){return bS(i,r,o,l)}},s&&(a.oProj=i),a)}var kL=6,Fj="AJSAJS",jj="AFAFAF",Nf=65,ds=73,ga=79,am=86,om=90;const Dle={forward:Vj,inverse:Fle,toPoint:Gj};function Vj(n,e){return e=e||5,Gle(jle({lat:n[1],lon:n[0]}),e)}function Fle(n){var e=IR(Uj(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Gj(n){var e=IR(Uj(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function RS(n){return n*(Math.PI/180)}function ML(n){return 180*(n/Math.PI)}function jle(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,s=.9996,a,o,l,u,h,f,g,p=RS(e),x=RS(t),v,w;w=Math.floor((t+180)/6)+1,t===180&&(w=60),e>=56&&e<64&&t>=3&&t<12&&(w=32),e>=72&&e<84&&(t>=0&&t<9?w=31:t>=9&&t<21?w=33:t>=21&&t<33?w=35:t>=33&&t<42&&(w=37)),a=(w-1)*6-180+3,v=RS(a),o=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),h=o*Math.cos(p)*Math.cos(p),f=Math.cos(p)*(x-v),g=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var T=s*l*(f+(1-u+h)*f*f*f/6+(5-18*u+u*u+72*h-58*o)*f*f*f*f*f/120)+5e5,I=s*(g+l*Math.tan(p)*(f*f/2+(5-u+9*h+4*h*h)*f*f*f*f/24+(61-58*u+u*u+600*h-330*o)*f*f*f*f*f*f/720));return e<0&&(I+=1e7),{northing:Math.round(I),easting:Math.round(T),zoneNumber:w,zoneLetter:Vle(e)}}function IR(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,o=.00669438,l,u=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),h,f,g,p,x,v,w,T,I,A=t-5e5,N=e;r<"N"&&(N-=1e7),w=(i-1)*6-180+3,l=o/(1-o),v=N/s,T=v/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),I=T+(3*u/2-27*u*u*u/32)*Math.sin(2*T)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*T)+151*u*u*u/96*Math.sin(6*T),h=a/Math.sqrt(1-o*Math.sin(I)*Math.sin(I)),f=Math.tan(I)*Math.tan(I),g=l*Math.cos(I)*Math.cos(I),p=a*(1-o)/Math.pow(1-o*Math.sin(I)*Math.sin(I),1.5),x=A/(h*s);var D=I-h*Math.tan(I)/p*(x*x/2-(5+3*f+10*g-4*g*g-9*l)*x*x*x*x/24+(61+90*f+298*g+45*f*f-252*l-3*g*g)*x*x*x*x*x*x/720);D=ML(D);var B=(x-(1+2*f+g)*x*x*x/6+(5-2*g+28*f-3*g*g+8*l+24*f*f)*x*x*x*x*x/120)/Math.cos(I);B=w+ML(B);var k;if(n.accuracy){var P=IR({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});k={top:P.lat,right:P.lon,bottom:D,left:B}}else k={lat:D,lon:B};return k}function Vle(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function Gle(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+Ble(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function Ble(n,e,t){var r=Bj(t),i=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return Ule(i,s,r)}function Bj(n){var e=n%kL;return e===0&&(e=kL),e}function Ule(n,e,t){var r=t-1,i=Fj.charCodeAt(r),s=jj.charCodeAt(r),a=i+n-1,o=s+e,l=!1;a>om&&(a=a-om+Nf-1,l=!0),(a===ds||i<ds&&a>ds||(a>ds||i<ds)&&l)&&a++,(a===ga||i<ga&&a>ga||(a>ga||i<ga)&&l)&&(a++,a===ds&&a++),a>om&&(a=a-om+Nf-1),o>am?(o=o-am+Nf-1,l=!0):l=!1,(o===ds||s<ds&&o>ds||(o>ds||s<ds)&&l)&&o++,(o===ga||s<ga&&o>ga||(o>ga||s<ga)&&l)&&(o++,o===ds&&o++),o>am&&(o=o-am+Nf-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function Uj(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var o=n.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+n;t=n.substring(s,s+=2);for(var l=Bj(a),u=zle(t.charAt(0),l),h=$le(t.charAt(1),l);h<Wle(o);)h+=2e6;var f=e-s;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var g=f/2,p=0,x=0,v,w,T,I,A;return g>0&&(v=1e5/Math.pow(10,g),w=n.substring(s,s+g),p=parseFloat(w)*v,T=n.substring(s+g),x=parseFloat(T)*v),I=p+u,A=x+h,{easting:I,northing:A,zoneLetter:o,zoneNumber:a,accuracy:v}}function zle(n,e){for(var t=Fj.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===ds&&t++,t===ga&&t++,t>om){if(i)throw"Bad character: "+n;t=Nf,i=!0}r+=1e5}return r}function $le(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=jj.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===ds&&t++,t===ga&&t++,t>am){if(i)throw"Bad character: "+n;t=Nf,i=!0}r+=1e5}return r}function Wle(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function I0(n,e,t){if(!(this instanceof I0))return new I0(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}I0.fromMGRS=function(n){return new I0(Gj(n))};I0.prototype.toMGRS=function(n){return Vj([this.x,this.y],n)};var Hle=1,Kle=.25,NL=.046875,LL=.01953125,OL=.01068115234375,Yle=.75,Xle=.46875,qle=.013020833333333334,Zle=.007120768229166667,Qle=.3645833333333333,Jle=.005696614583333333,ece=.3076171875;function AR(n){var e=[];e[0]=Hle-n*(Kle+n*(NL+n*(LL+n*OL))),e[1]=n*(Yle-n*(NL+n*(LL+n*OL)));var t=n*n;return e[2]=t*(Xle-n*(qle+n*Zle)),t*=n,e[3]=t*(Qle-n*Jle),e[4]=t*n*ece,e}function U0(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var tce=20;function bR(n,e,t){for(var r=1/(1-e),i=n,s=tce;s;--s){var a=Math.sin(i),o=1-e*a*a;if(o=(U0(i,a,Math.cos(i),t)-n)*(o*Math.sqrt(o))*r,i-=o,Math.abs(o)<it)return i}return i}function nce(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=AR(this.es),this.ml0=U0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function rce(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i,s,a,o=Math.sin(t),l=Math.cos(t);if(this.es){var h=l*r,f=Math.pow(h,2),g=this.ep2*Math.pow(l,2),p=Math.pow(g,2),x=Math.abs(l)>it?Math.tan(t):0,v=Math.pow(x,2),w=Math.pow(v,2);i=1-this.es*Math.pow(o,2),h=h/Math.sqrt(i);var T=U0(t,o,l,this.en);s=this.a*(this.k0*h*(1+f/6*(1-v+g+f/20*(5-18*v+w+14*g-58*v*g+f/42*(61+179*w-w*v-479*v)))))+this.x0,a=this.a*(this.k0*(T-this.ml0+o*r*h/2*(1+f/12*(5-v+9*g+4*p+f/30*(61+w-58*v+270*g-330*v*g+f/56*(1385+543*w-w*v-3111*v))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<it)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,a=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(a),u>=1){if(u-1>it)return 93;a=0}else a=Math.acos(a);t<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return n.x=s,n.y=a,n}function ice(n){var e,t,r,i,s=(n.x-this.x0)*(1/this.a),a=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,t=bR(e,this.es,this.en),Math.abs(t)<ze){var f=Math.sin(t),g=Math.cos(t),p=Math.abs(g)>it?Math.tan(t):0,x=this.ep2*Math.pow(g,2),v=Math.pow(x,2),w=Math.pow(p,2),T=Math.pow(w,2);e=1-this.es*Math.pow(f,2);var I=s*Math.sqrt(e)/this.k0,A=Math.pow(I,2);e=e*p,r=t-e*A/(1-this.es)*.5*(1-A/12*(5+3*w-9*x*w+x-4*v-A/30*(61+90*w-252*x*w+45*T+46*x-A/56*(1385+3633*w+4095*T+1574*T*w)))),i=ct(this.long0+I*(1-A/6*(1+2*w+x-A/20*(5+28*w+24*T+8*x*w+6*x-A/42*(61+662*w+1320*T+720*T*w))))/g,this.over)}else r=ze*x1(a),i=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),u=this.lat0+a/this.k0,h=Math.cos(u);e=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),r=Math.asin(e),a<0&&(r=-r),l===0&&h===0?i=0:i=ct(Math.atan2(l,h)+this.long0,this.over)}return n.x=i,n.y=r,n}var sce=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const U_={init:nce,forward:rce,inverse:ice,names:sce};function zj(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function _s(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function ace(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function oce(n){var e=Math.abs(n);return e=ace(e*(1+e/(_s(1,e)+1))),n<0?-e:e}function RR(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return e+a*Math.sin(2*e)}function lce(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return Math.sin(e)*a}function cce(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function $j(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),s=zj(t),a=cce(t),o=2*i*a,l=-2*r*s,u=n.length-1,h=n[u],f=0,g=0,p=0,x,v;--u>=0;)x=g,v=f,g=h,f=p,h=-x+o*g-l*f+n[u],p=-v+l*g+o*f;return o=r*a,l=i*s,[o*h-l*p,o*p+l*h]}function uce(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(U_.init.apply(this),this.forward=U_.forward,this.inverse=U_.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=RR(this.cbg,this.lat0);this.Zb=-this.Qn*(r+lce(this.gtu,2*r))}function hce(n){var e=ct(n.x-this.long0,this.over),t=n.y;t=RR(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),s=Math.sin(e),a=Math.cos(e);t=Math.atan2(r,a*i),e=Math.atan2(s*i,_s(r,i*a)),e=oce(Math.tan(e));var o=$j(this.gtu,2*t,2*e);t=t+o[0],e=e+o[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),n.x=l,n.y=u,n}function dce(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=$j(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(zj(e));var a=Math.sin(t),o=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(a*u,_s(l,u*o)),e=Math.atan2(l,u*o),r=ct(e+this.long0,this.over),i=RR(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var fce=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const z_={init:uce,forward:hce,inverse:dce,names:fce};function gce(n,e){if(n===void 0){if(n=Math.floor((ct(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var mce="etmerc";function pce(){var n=gce(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*gr,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,z_.init.apply(this),this.forward=z_.forward,this.inverse=z_.inverse}var yce=["Universal Transverse Mercator System","utm"];const _ce={init:pce,names:yce,dependsOn:mce};function CR(n,e){return Math.pow((1-n)/(1+n),e)}var xce=20;function vce(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+bn)/(Math.pow(Math.tan(.5*this.lat0+bn),this.C)*CR(this.e*n,this.ratexp))}function Ece(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+bn),this.C)*CR(this.e*Math.sin(t),this.ratexp))-ze,n.x=this.C*e,n}function wce(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+bn)/this.K,1/this.C),s=xce;s>0&&(r=2*Math.atan(i*CR(this.e*Math.sin(n.y),-.5*this.e))-ze,!(Math.abs(r-n.y)<e));--s)n.y=r;return s?(n.x=t,n.y=r,n):null}const PR={init:vce,forward:Ece,inverse:wce};function Sce(){PR.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Tce(n){var e,t,r,i;return n.x=ct(n.x-this.long0,this.over),PR.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Ice(n){var e,t,r,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=_s(n.x,n.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),t=Math.cos(a),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),r=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,PR.inverse.apply(this,[n]),n.x=ct(n.x+this.long0,this.over),n}var Ace=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const bce={init:Sce,forward:Tce,inverse:Ice,names:Ace};function kR(n,e,t){return e*=t,Math.tan(.5*(ze+n))*Math.pow((1-e)/(1+e),.5*t)}function Rce(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&(this.k0=.5*(1+x1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=it&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&Math.abs(Math.cos(this.lat_ts))>it&&(this.k0=.5*this.cons*Yo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ja(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Yo(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(kR(this.lat0,this.sinlat0,this.e))-ze,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Cce(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),s,a,o,l,u,h,f=ct(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=it&&Math.abs(t+this.lat0)<=it?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(f)),n.x=this.a*s*i*Math.sin(f)+this.x0,n.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(f))+this.y0,n):(a=2*Math.atan(kR(t,r,this.e))-ze,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=it?(u=Ja(this.e,t*this.con,this.con*r),h=2*this.a*this.k0*u/this.cons,n.x=this.x0+h*Math.sin(e-this.long0),n.y=this.y0-this.con*h*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<it?(s=2*this.a*this.k0/(1+l*Math.cos(f)),n.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(f))),n.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(f))+this.y0),n.x=s*l*Math.sin(f)+this.x0,n))}function Pce(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,t=this.lat0,a<=it?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(o)*this.sinlat0+n.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<it?this.lat0>0?e=ct(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=ct(this.long0+Math.atan2(n.x,n.y),this.over):e=ct(this.long0+Math.atan2(n.x*Math.sin(o),a*this.coslat0*Math.cos(o)-n.y*this.sinlat0*Math.sin(o)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=it){if(a<=it)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=a*this.cons/(2*this.a*this.k0),t=this.con*Tp(this.e,r),e=this.con*ct(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=it?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/a),e=ct(this.long0+Math.atan2(n.x*Math.sin(i),a*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*Tp(this.e,Math.tan(.5*(ze+s)));return n.x=e,n.y=t,n}var kce=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Mce={init:Rce,forward:Cce,inverse:Pce,names:kce,ssfn_:kR};function Nce(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*u}function Lce(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,n.x=this.R*a+this.x0,n}function Oce(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+a/this.alpha,l=0,u=s,h=-1e3,f=0;Math.abs(u-h)>1e-7;){if(++f>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=o,n.y=u,n}var Dce=["somerc"];const Fce={init:Nce,forward:Lce,inverse:Oce,names:Dce};var wf=1e-7;function jce(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(Mj(t))!==-1}function Vce(){var n,e,t,r,i,s,a,o,l,u,h=0,f,g=0,p=0,x=0,v=0,w=0,T=0;this.no_off=jce(this),this.no_rot="no_rot"in this;var I=!1;"alpha"in this&&(I=!0);var A=!1;if("rectified_grid_angle"in this&&(A=!0),I&&(T=this.alpha),A&&(h=this.rectified_grid_angle),I||A)g=this.longc;else if(p=this.long1,v=this.lat1,x=this.long2,w=this.lat2,Math.abs(v-w)<=wf||(n=Math.abs(v))<=wf||Math.abs(n-ze)<=wf||Math.abs(Math.abs(this.lat0)-ze)<=wf||Math.abs(Math.abs(w)-ze)<=wf)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>it?(o=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*o*o,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Ja(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),I||A?(I?(f=Math.asin(Math.sin(T)/r),A||(h=T)):(f=h,T=Math.asin(r*Math.sin(f))),this.lam0=g-Math.asin(.5*(i-1/i)*Math.tan(f))/this.B):(s=Math.pow(Ja(this.e,v,Math.sin(v)),this.B),a=Math.pow(Ja(this.e,w,Math.sin(w)),this.B),i=this.E/s,l=(a-s)/(a+s),u=this.E*this.E,u=(u-a*s)/(u+a*s),n=p-x,n<-Math.PI?x-=wp:n>Math.PI&&(x+=wp),this.lam0=ct(.5*(p+x)-Math.atan(u*Math.tan(.5*this.B*(p-x))/l)/this.B,this.over),f=Math.atan(2*Math.sin(this.B*ct(p-this.lam0,this.over))/(i-1/i)),h=T=Math.asin(r*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(bn-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(bn+i))}function Gce(n){var e={},t,r,i,s,a,o,l,u;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-ze)>it){if(a=this.E/Math.pow(Ja(this.e,n.y,Math.sin(n.y)),this.B),o=1/a,t=.5*(a-o),r=.5*(a+o),s=Math.sin(this.B*n.x),i=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<it)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*n.x),Math.abs(o)<wf?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,o)}else u=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Bce(n){var e,t,r,i,s,a,o,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),o=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<it)l.x=0,l.y=o<0?-ze:ze;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=Tp(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var Uce=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const zce={init:Vce,forward:Gce,inverse:Bce,names:Uce};function $ce(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<it)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=Yo(this.e,e,t),i=Ja(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=Yo(this.e,s,a),l=Ja(this.e,this.lat2,s),u=Math.abs(Math.abs(this.lat0)-ze)<it?0:Ja(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>it?this.ns=Math.log(r/o)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Wce(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=it&&(t=x1(t)*(ze-2*it));var r=Math.abs(Math.abs(t)-ze),i,s;if(r>it)i=Ja(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var a=this.ns*ct(e-this.long0,this.over);return n.x=this.k0*(s*Math.sin(a))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,n}function Hce(n){var e,t,r,i,s,a=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),t=1):(e=-Math.sqrt(a*a+o*o),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*a,t*o)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=Tp(this.e,r),i===-9999)return null}else i=-ze;return s=ct(l/this.ns+this.long0,this.over),n.x=s,n.y=i,n}var Kce=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Yce={init:$ce,forward:Wce,inverse:Hce,names:Kce};function Xce(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function qce(n){var e,t,r,i,s,a,o,l=n.x,u=n.y,h=ct(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-h*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=o*Math.cos(a)/1,n.x=o*Math.sin(a)/1,this.czech||(n.y*=-1,n.x*=-1),n}function Zce(n){var e,t,r,i,s,a,o,l,u=n.x;n.x=n.y,n.y=u,this.czech||(n.y*=-1,n.x*=-1),a=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,o=e,l=0;var h=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-n.y)<1e-10&&(l=1),o=n.y,h+=1;while(l===0&&h<15);return h>=15?null:n}var Qce=["Krovak","krovak"];const Jce={init:Xce,forward:qce,inverse:Zce,names:Qce};function es(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function v1(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function E1(n){return .375*n*(1+.25*n*(1+.46875*n))}function w1(n){return .05859375*n*n*(1+.75*n)}function S1(n){return n*n*n*(35/3072)}function MR(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function Tu(n){return Math.abs(n)<ze?n:n-x1(n)*Math.PI}function Jx(n,e,t,r,i){var s,a;s=n/e;for(var o=0;o<15;o++)if(a=(n-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function eue(){this.sphere||(this.e0=v1(this.es),this.e1=E1(this.es),this.e2=w1(this.es),this.e3=S1(this.es),this.ml0=this.a*es(this.e0,this.e1,this.e2,this.e3,this.lat0))}function tue(n){var e,t,r=n.x,i=n.y;if(r=ct(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),o=MR(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),h=u*u,f=this.es*a*a/(1-this.es),g=this.a*es(this.e0,this.e1,this.e2,this.e3,i);e=o*u*(1-h*l*(1/6-(8-l+8*f)*h/120)),t=g-this.ml0+o*s/a*h*(.5+(5-l+6*f)*h/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function nue(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+t,o=Jx(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-ze)<=it)return n.x=this.long0,n.y=ze,t<0&&(n.y*=-1),n;var l=MR(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(o),2),f=e*this.a/l,g=f*f;r=o-l*Math.tan(o)/u*f*f*(.5-(1+3*h)*f*f/24),i=f*(1-g*(h/3+(1+3*h)*h*g/15))/Math.cos(o)}return n.x=ct(i+this.long0,this.over),n.y=Tu(r),n}var rue=["Cassini","Cassini_Soldner","cass"];const iue={init:eue,forward:tue,inverse:nue,names:rue};function tu(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var TI=1,II=2,AI=3,$_=4;function sue(){var n=Math.abs(this.lat0);if(Math.abs(n-ze)<it?this.mode=this.lat0<0?TI:II:Math.abs(n)<it?this.mode=AI:this.mode=$_,this.es>0){var e;switch(this.qp=tu(this.e,1),this.mmf=.5/(1-this.es),this.apa=gue(this.es),this.mode){case II:this.dd=1;break;case TI:this.dd=1;break;case AI:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case $_:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=tu(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===$_&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function aue(n){var e,t,r,i,s,a,o,l,u,h,f=n.x,g=n.y;if(f=ct(f-this.long0,this.over),this.sphere){if(s=Math.sin(g),h=Math.cos(g),r=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+h*r:1+this.sinph0*s+this.cosph0*h*r,t<=it)return null;t=Math.sqrt(2/t),e=t*h*Math.sin(f),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(g+this.lat0)<it)return null;t=bn-g*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(f),t*=r}}else{switch(o=0,l=0,u=0,r=Math.cos(f),i=Math.sin(f),s=Math.sin(g),a=tu(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=ze+g,a=this.qp-a;break;case this.S_POLE:u=g-ze,a=this.qp+a;break}if(Math.abs(u)<it)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*o-this.sinb1*l*r):t=(u=Math.sqrt(2/(1+l*r)))*o*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,t=r*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function oue(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,s,a,o,l,u;if(this.sphere){var h=0,f,g=0;if(f=Math.sqrt(e*e+t*t),i=f*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(i),h=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(f)<=it?0:Math.asin(t*g/f),e*=g,t=h*f;break;case this.OBLIQ:i=Math.abs(f)<=it?this.lat0:Math.asin(h*this.sinph0+t*g*this.cosph0/f),e*=g*this.cosph0,t=(h-Math.sin(i)*this.sinph0)*f;break;case this.N_POLE:t=-t,i=ze-i;break;case this.S_POLE:i-=ze;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<it)return n.x=this.long0,n.y=this.lat0,n;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(u=s*this.sinb1+t*a*this.cosb1/l,o=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*a):(u=t*a/l,o=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=e*e+t*t,!o)return n.x=this.long0,n.y=this.lat0,n;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,t),i=mue(Math.asin(u),this.apa)}return n.x=ct(this.long0+r,this.over),n.y=i,n}var lue=.3333333333333333,cue=.17222222222222222,uue=.10257936507936508,hue=.06388888888888888,due=.0664021164021164,fue=.016415012942191543;function gue(n){var e,t=[];return t[0]=n*lue,e=n*n,t[0]+=e*cue,t[1]=e*hue,e*=n,t[0]+=e*uue,t[1]+=e*due,t[2]=e*fue,t}function mue(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var pue=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const yue={init:sue,forward:aue,inverse:oue,names:pue,S_POLE:TI,N_POLE:II,EQUIT:AI,OBLIQ:$_};function gu(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function _ue(){Math.abs(this.lat1+this.lat2)<it||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Yo(this.e3,this.sin_po,this.cos_po),this.qs1=tu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Yo(this.e3,this.sin_po,this.cos_po),this.qs2=tu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=tu(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>it?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function xue(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=tu(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*ct(e-this.long0,this.over),a=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return n.x=a,n.y=o,n}function vue(n){var e,t,r,i,s,a;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,t)),s=ct(i/this.ns0+this.long0,this.over),n.x=s,n.y=a,n}function Eue(n,e){var t,r,i,s,a,o=gu(.5*e);if(n<it)return o;for(var l=n*n,u=1;u<=25;u++)if(t=Math.sin(o),r=Math.cos(o),i=n*t,s=1-i*i,a=.5*s*s/r*(e/(1-l)-t/s+.5/n*Math.log((1-i)/(1+i))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var wue=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Sue={init:_ue,forward:xue,inverse:vue,names:wue,phi1z:Eue};function Tue(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Iue(n){var e,t,r,i,s,a,o,l,u=n.x,h=n.y;return r=ct(u-this.long0,this.over),e=Math.sin(h),t=Math.cos(h),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,a>0||Math.abs(a)<=it?(o=this.x0+this.a*s*t*Math.sin(r)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)/a):(o=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function Aue(n){var e,t,r,i,s,a;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),a=gu(r*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),s=ct(this.long0+s,this.over)):(a=this.phic0,s=0),n.x=s,n.y=a,n}var bue=["gnom"];const Rue={init:Tue,forward:Iue,inverse:Aue,names:bue};function Cue(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*ze:ze;for(var r=Math.asin(.5*e),i,s,a,o,l=0;l<30;l++)if(s=Math.sin(r),a=Math.cos(r),o=n*s,i=Math.pow(1-o*o,2)/(2*a)*(e/(1-n*n)-s/(1-o*o)+.5/n*Math.log((1-o)/(1+o))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function Pue(){this.sphere||(this.k0=Yo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function kue(n){var e=n.x,t=n.y,r,i,s=ct(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var a=tu(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return n.x=r,n.y=i,n}function Mue(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=ct(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=Cue(this.e,2*n.y*this.k0/this.a),e=ct(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var Nue=["cea"];const Lue={init:Pue,forward:kue,inverse:Mue,names:Nue};function Oue(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Due(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=Tu(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function Fue(n){var e=n.x,t=n.y;return n.x=ct(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=Tu(this.lat0+(t-this.y0)/this.a),n}var jue=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Vue={init:Oue,forward:Due,inverse:Fue,names:jue};var DL=20;function Gue(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=v1(this.es),this.e1=E1(this.es),this.e2=w1(this.es),this.e3=S1(this.es),this.ml0=this.a*es(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Bue(n){var e=n.x,t=n.y,r,i,s,a=ct(e-this.long0,this.over);if(s=a*Math.sin(t),this.sphere)Math.abs(t)<=it?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),i=this.a*(Tu(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=it)r=this.a*a,i=-1*this.ml0;else{var o=MR(this.a,this.e,Math.sin(t))/Math.tan(t);r=o*Math.sin(s),i=this.a*es(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(s))}return n.x=r+this.x0,n.y=i+this.y0,n}function Uue(n){var e,t,r,i,s,a,o,l,u;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=it)e=ct(r/this.a+this.long0,this.over),t=0;else{a=this.lat0+i/this.a,o=r*r/this.a/this.a+a*a,l=a;var h;for(s=DL;s;--s)if(h=Math.tan(l),u=-1*(a*(l*h+1)-l-.5*(l*l+o)*h)/((l-a)/h-1),l+=u,Math.abs(u)<=it){t=l;break}e=ct(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=it)t=0,e=ct(this.long0+r/this.a,this.over);else{a=(this.ml0+i)/this.a,o=r*r/this.a/this.a+a*a,l=a;var f,g,p,x,v;for(s=DL;s;--s)if(v=this.e*Math.sin(l),f=Math.sqrt(1-v*v)*Math.tan(l),g=this.a*es(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),x=g/this.a,u=(a*(f*x+1)-x-.5*f*(x*x+o))/(this.es*Math.sin(2*l)*(x*x+o-2*a*x)/(4*f)+(a-x)*(f*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=it){t=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=ct(this.long0+Math.asin(r*f/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var zue=["Polyconic","American_Polyconic","poly"];const $ue={init:Gue,forward:Bue,inverse:Uue,names:zue};function Wue(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Hue(n){var e,t=n.x,r=n.y,i=r-this.lat0,s=t-this.long0,a=i/Am*1e-5,o=s,l=1,u=0;for(e=1;e<=10;e++)l=l*a,u=u+this.A[e]*l;var h=u,f=o,g=1,p=0,x,v,w=0,T=0;for(e=1;e<=6;e++)x=g*h-p*f,v=p*h+g*f,g=x,p=v,w=w+this.B_re[e]*g-this.B_im[e]*p,T=T+this.B_im[e]*g+this.B_re[e]*p;return n.x=T*this.a+this.x0,n.y=w*this.a+this.y0,n}function Kue(n){var e,t=n.x,r=n.y,i=t-this.x0,s=r-this.y0,a=s/this.a,o=i/this.a,l=1,u=0,h,f,g=0,p=0;for(e=1;e<=6;e++)h=l*a-u*o,f=u*a+l*o,l=h,u=f,g=g+this.C_re[e]*l-this.C_im[e]*u,p=p+this.C_im[e]*l+this.C_re[e]*u;for(var x=0;x<this.iterations;x++){var v=g,w=p,T,I,A=a,N=o;for(e=2;e<=6;e++)T=v*g-w*p,I=w*g+v*p,v=T,w=I,A=A+(e-1)*(this.B_re[e]*v-this.B_im[e]*w),N=N+(e-1)*(this.B_im[e]*v+this.B_re[e]*w);v=1,w=0;var D=this.B_re[1],B=this.B_im[1];for(e=2;e<=6;e++)T=v*g-w*p,I=w*g+v*p,v=T,w=I,D=D+e*(this.B_re[e]*v-this.B_im[e]*w),B=B+e*(this.B_im[e]*v+this.B_re[e]*w);var k=D*D+B*B;g=(A*D+N*B)/k,p=(N*D-A*B)/k}var P=g,M=p,j=1,O=0;for(e=1;e<=9;e++)j=j*P,O=O+this.D[e]*j;var W=this.lat0+O*Am*1e5,F=this.long0+M;return n.x=F,n.y=W,n}var Yue=["New_Zealand_Map_Grid","nzmg"];const Xue={init:Wue,forward:Hue,inverse:Kue,names:Yue};function que(){}function Zue(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=s,n}function Que(n){n.x-=this.x0,n.y-=this.y0;var e=ct(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var Jue=["Miller_Cylindrical","mill"];const ehe={init:que,forward:Zue,inverse:Que,names:Jue};var the=20;function nhe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=AR(this.es)}function rhe(n){var e,t,r=n.x,i=n.y;if(r=ct(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=the;a;--a){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<it)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);t=this.a*U0(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function ihe(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=gu((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=gu(Math.sin(e)/this.n)),r=ct(r+this.long0,this.over),e=Tu(e)):(e=bR(n.y/this.a,this.es,this.en),i=Math.abs(e),i<ze?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=ct(t,this.over)):i-it<ze&&(r=this.long0)),n.x=r,n.y=e,n}var she=["Sinusoidal","sinu"];const ahe={init:nhe,forward:rhe,inverse:ihe,names:she};function ohe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function lhe(n){for(var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=t,s=Math.PI*Math.sin(t);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<it)break}i/=2,Math.PI/2-Math.abs(t)<it&&(r=0);var o=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=o,n.y=l,n}function che(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=ct(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var uhe=["Mollweide","moll"];const hhe={init:ohe,forward:lhe,inverse:che,names:uhe};function dhe(){Math.abs(this.lat1+this.lat2)<it||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=v1(this.es),this.e1=E1(this.es),this.e2=w1(this.es),this.e3=S1(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Yo(this.e,this.sin_phi,this.cos_phi),this.ml1=es(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<it?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Yo(this.e,this.sin_phi,this.cos_phi),this.ml2=es(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=es(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function fhe(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=es(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var s=this.ns*ct(e-this.long0,this.over),a=this.x0+r*Math.sin(s),o=this.y0+this.rh-r*Math.cos(s);return n.x=a,n.y=o,n}function ghe(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=ct(this.long0+s/this.ns,this.over),r=Tu(this.g-t/this.a),n.x=i,n.y=r,n;var a=this.g-t/this.a;return r=Jx(a,this.e0,this.e1,this.e2,this.e3),i=ct(this.long0+s/this.ns,this.over),n.x=i,n.y=r,n}var mhe=["Equidistant_Conic","eqdc"];const phe={init:dhe,forward:fhe,inverse:ghe,names:mhe};function yhe(){this.R=this.a}function _he(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i,s;Math.abs(t)<=it&&(i=this.x0+this.R*r,s=this.y0);var a=gu(2*Math.abs(t/Math.PI));(Math.abs(r)<=it||Math.abs(Math.abs(t)-ze)<=it)&&(i=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/r-r/Math.PI),l=o*o,u=Math.sin(a),h=Math.cos(a),f=h/(u+h-1),g=f*f,p=f*(2/u-1),x=p*p,v=Math.PI*this.R*(o*(f-x)+Math.sqrt(l*(f-x)*(f-x)-(x+l)*(g-x)))/(x+l);r<0&&(v=-v),i=this.x0+v;var w=l+f;return v=Math.PI*this.R*(p*w-o*Math.sqrt((x+l)*(l+1)-w*w))/(x+l),t>=0?s=this.y0+v:s=this.y0-v,n.x=i,n.y=s,n}function xhe(n){var e,t,r,i,s,a,o,l,u,h,f,g,p;return n.x-=this.x0,n.y-=this.y0,f=Math.PI*this.R,r=n.x/f,i=n.y/f,s=r*r+i*i,a=-Math.abs(i)*(1+s),o=a-2*i*i+r*r,l=-2*a+1+2*i*i+s*s,p=i*i/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,u=(a-o*o/3/l)/l,h=2*Math.sqrt(-u/3),f=3*p/u/h,Math.abs(f)>1&&(f>=0?f=1:f=-1),g=Math.acos(f)/3,n.y>=0?t=(-h*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI:t=-(-h*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI,Math.abs(r)<it?e=this.long0:e=ct(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),n.x=e,n.y=t,n}var vhe=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const Ehe={init:yhe,forward:_he,inverse:xhe,names:vhe};function whe(n,e,t,r,i,s){const a=r-e,o=Math.atan((1-s)*Math.tan(n)),l=Math.atan((1-s)*Math.tan(t)),u=Math.sin(o),h=Math.cos(o),f=Math.sin(l),g=Math.cos(l);let p=a,x,v=100,w,T,I,A,N,D,B,k,P,M,j,O,W,F;do{if(w=Math.sin(p),T=Math.cos(p),I=Math.sqrt(g*w*(g*w)+(h*f-u*g*T)*(h*f-u*g*T)),I===0)return{azi1:0,s12:0};A=u*f+h*g*T,N=Math.atan2(I,A),D=h*g*w/I,B=1-D*D,k=B!==0?A-2*u*f/B:0,P=s/16*B*(4+s*(4-3*B)),x=p,p=a+(1-P)*s*D*(N+P*I*(k+P*A*(-1+2*k*k)))}while(Math.abs(p-x)>1e-12&&--v>0);return v===0?{azi1:NaN,s12:NaN}:(M=B*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),j=1+M/16384*(4096+M*(-768+M*(320-175*M))),O=M/1024*(256+M*(-128+M*(74-47*M))),W=O*I*(k+O/4*(A*(-1+2*k*k)-O/6*k*(-3+4*I*I)*(-3+4*k*k))),F=i*(1-s)*j*(N-W),{azi1:Math.atan2(g*w,h*f-u*g*T),s12:F})}function She(n,e,t,r,i,s){const a=Math.atan((1-s)*Math.tan(n)),o=Math.sin(a),l=Math.cos(a),u=Math.sin(t),h=Math.cos(t),f=Math.atan2(o,l*h),g=l*u,p=1-g*g,x=p*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),v=1+x/16384*(4096+x*(-768+x*(320-175*x))),w=x/1024*(256+x*(-128+x*(74-47*x)));let T=r/(i*(1-s)*v),I,A=100,N,D,B,k;do N=Math.cos(2*f+T),D=Math.sin(T),B=Math.cos(T),k=w*D*(N+w/4*(B*(-1+2*N*N)-w/6*N*(-3+4*D*D)*(-3+4*N*N))),I=T,T=r/(i*(1-s)*v)+k;while(Math.abs(T-I)>1e-12&&--A>0);if(A===0)return{lat2:NaN,lon2:NaN};const P=o*D-l*B*h,M=Math.atan2(o*B+l*D*h,(1-s)*Math.sqrt(g*g+P*P)),j=Math.atan2(D*u,l*B-o*D*h),O=s/16*p*(4+s*(4-3*p)),W=j-(1-O)*s*g*(T+O*D*(N+O*B*(-1+2*N*N))),F=e+W;return{lat2:M,lon2:F}}function The(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Ihe(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),s=ct(e-this.long0,this.over),a,o,l,u,h,f,g,p,x,v,w;return this.sphere?Math.abs(this.sin_p12-1)<=it?(n.x=this.x0+this.a*(ze-t)*Math.sin(s),n.y=this.y0-this.a*(ze-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=it?(n.x=this.x0+this.a*(ze+t)*Math.sin(s),n.y=this.y0+this.a*(ze+t)*Math.cos(s),n):(x=this.sin_p12*r+this.cos_p12*i*Math.cos(s),g=Math.acos(x),p=g?g/Math.sin(g):1,n.x=this.x0+this.a*p*i*Math.sin(s),n.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),n):(a=v1(this.es),o=E1(this.es),l=w1(this.es),u=S1(this.es),Math.abs(this.sin_p12-1)<=it?(h=this.a*es(a,o,l,u,ze),f=this.a*es(a,o,l,u,t),n.x=this.x0+(h-f)*Math.sin(s),n.y=this.y0-(h-f)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=it?(h=this.a*es(a,o,l,u,ze),f=this.a*es(a,o,l,u,t),n.x=this.x0+(h+f)*Math.sin(s),n.y=this.y0+(h+f)*Math.cos(s),n):Math.abs(e)<it&&Math.abs(t-this.lat0)<it?(n.x=n.y=0,n):(v=whe(this.lat0,this.long0,t,e,this.a,this.f),w=v.azi1,n.x=v.s12*Math.sin(w),n.y=v.s12*Math.cos(w),n))}function Ahe(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a,o,l,u,h,f,g,p,x,v,w;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*ze*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=it?a=this.lat0:(a=gu(i*this.sin_p12+n.y*r*this.cos_p12/e),o=Math.abs(this.lat0)-ze,Math.abs(o)<=it?this.lat0>=0?s=ct(this.long0+Math.atan2(n.x,-n.y),this.over):s=ct(this.long0-Math.atan2(-n.x,n.y),this.over):s=ct(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=s,n.y=a,n)):(l=v1(this.es),u=E1(this.es),h=w1(this.es),f=S1(this.es),Math.abs(this.sin_p12-1)<=it?(g=this.a*es(l,u,h,f,ze),e=Math.sqrt(n.x*n.x+n.y*n.y),p=g-e,a=Jx(p/this.a,l,u,h,f),s=ct(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=s,n.y=a,n):Math.abs(this.sin_p12+1)<=it?(g=this.a*es(l,u,h,f,ze),e=Math.sqrt(n.x*n.x+n.y*n.y),p=e-g,a=Jx(p/this.a,l,u,h,f),s=ct(this.long0+Math.atan2(n.x,n.y),this.over),n.x=s,n.y=a,n):(x=Math.atan2(n.x,n.y),v=Math.sqrt(n.x*n.x+n.y*n.y),w=She(this.lat0,this.long0,x,v,this.a,this.f),n.x=w.lon2,n.y=w.lat2,n))}var bhe=["Azimuthal_Equidistant","aeqd"];const Rhe={init:The,forward:Ihe,inverse:Ahe,names:bhe};function Che(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Phe(n){var e,t,r,i,s,a,o,l,u=n.x,h=n.y;return r=ct(u-this.long0,this.over),e=Math.sin(h),t=Math.cos(h),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,(a>0||Math.abs(a)<=it)&&(o=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function khe(n){var e,t,r,i,s,a,o;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=gu(e/this.a),r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=it?(o=this.lat0,n.x=a,n.y=o,n):(o=gu(i*this.sin_p14+n.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-ze,Math.abs(s)<=it?(this.lat0>=0?a=ct(this.long0+Math.atan2(n.x,-n.y),this.over):a=ct(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=a,n.y=o,n):(a=ct(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=a,n.y=o,n))}var Mhe=["ortho"];const Nhe={init:Che,forward:Phe,inverse:khe,names:Mhe};var or={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Rn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Lhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=ze-bn/2?this.face=or.TOP:this.lat0<=-(ze-bn/2)?this.face=or.BOTTOM:Math.abs(this.long0)<=bn?this.face=or.FRONT:Math.abs(this.long0)<=ze+bn?this.face=this.long0>0?or.RIGHT:or.LEFT:this.face=or.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Ohe(n){var e={x:0,y:0},t,r,i,s,a,o,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===or.TOP)s=ze-t,r>=bn&&r<=ze+bn?(l.value=Rn.AREA_0,i=r-ze):r>ze+bn||r<=-(ze+bn)?(l.value=Rn.AREA_1,i=r>0?r-Tr:r+Tr):r>-(ze+bn)&&r<=-bn?(l.value=Rn.AREA_2,i=r+ze):(l.value=Rn.AREA_3,i=r);else if(this.face===or.BOTTOM)s=ze+t,r>=bn&&r<=ze+bn?(l.value=Rn.AREA_0,i=-r+ze):r<bn&&r>=-bn?(l.value=Rn.AREA_1,i=-r):r<-bn&&r>=-(ze+bn)?(l.value=Rn.AREA_2,i=-r-ze):(l.value=Rn.AREA_3,i=r>0?-r+Tr:-r-Tr);else{var u,h,f,g,p,x,v;this.face===or.RIGHT?r=Hf(r,+ze):this.face===or.BACK?r=Hf(r,+Tr):this.face===or.LEFT&&(r=Hf(r,-ze)),g=Math.sin(t),p=Math.cos(t),x=Math.sin(r),v=Math.cos(r),u=p*v,h=p*x,f=g,this.face===or.FRONT?(s=Math.acos(u),i=o_(s,f,h,l)):this.face===or.RIGHT?(s=Math.acos(h),i=o_(s,f,-u,l)):this.face===or.BACK?(s=Math.acos(-u),i=o_(s,f,-h,l)):this.face===or.LEFT?(s=Math.acos(-h),i=o_(s,f,u,l)):(s=i=0,l.value=Rn.AREA_0)}return o=Math.atan(12/Tr*(i+Math.acos(Math.sin(i)*Math.cos(bn))-ze)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Rn.AREA_1?o+=ze:l.value===Rn.AREA_2?o+=Tr:l.value===Rn.AREA_3&&(o+=1.5*Tr),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function Dhe(n){var e={lam:0,phi:0},t,r,i,s,a,o,l,u,h,f={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?f.value=Rn.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(f.value=Rn.AREA_1,t-=ze):n.x<0&&-n.x>=Math.abs(n.y)?(f.value=Rn.AREA_2,t=t<0?t+Tr:t-Tr):(f.value=Rn.AREA_3,t+=ze),h=Tr/12*Math.tan(t),a=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),o=Math.atan(a),i=Math.cos(t),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===or.TOP)u=Math.acos(l),e.phi=ze-u,f.value===Rn.AREA_0?e.lam=o+ze:f.value===Rn.AREA_1?e.lam=o<0?o+Tr:o-Tr:f.value===Rn.AREA_2?e.lam=o-ze:e.lam=o;else if(this.face===or.BOTTOM)u=Math.acos(l),e.phi=u-ze,f.value===Rn.AREA_0?e.lam=-o+ze:f.value===Rn.AREA_1?e.lam=-o:f.value===Rn.AREA_2?e.lam=-o-ze:e.lam=o<0?-o-Tr:-o+Tr;else{var g,p,x;g=l,h=g*g,h>=1?x=0:x=Math.sqrt(1-h)*Math.sin(o),h+=x*x,h>=1?p=0:p=Math.sqrt(1-h),f.value===Rn.AREA_1?(h=p,p=-x,x=h):f.value===Rn.AREA_2?(p=-p,x=-x):f.value===Rn.AREA_3&&(h=p,p=x,x=-h),this.face===or.RIGHT?(h=g,g=-p,p=h):this.face===or.BACK?(g=-g,p=-p):this.face===or.LEFT&&(h=g,g=p,p=-h),e.phi=Math.acos(-x)-ze,e.lam=Math.atan2(p,g),this.face===or.RIGHT?e.lam=Hf(e.lam,-ze):this.face===or.BACK?e.lam=Hf(e.lam,-Tr):this.face===or.LEFT&&(e.lam=Hf(e.lam,+ze))}if(this.es!==0){var v,w,T;v=e.phi<0?1:0,w=Math.tan(e.phi),T=this.b/Math.sqrt(w*w+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),v&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function o_(n,e,t,r){var i;return n<it?(r.value=Rn.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=bn?r.value=Rn.AREA_0:i>bn&&i<=ze+bn?(r.value=Rn.AREA_1,i-=ze):i>ze+bn||i<=-(ze+bn)?(r.value=Rn.AREA_2,i=i>=0?i-Tr:i+Tr):(r.value=Rn.AREA_3,i+=ze)),i}function Hf(n,e){var t=n+e;return t<-Tr?t+=wp:t>+Tr&&(t-=wp),t}var Fhe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const jhe={init:Lhe,forward:Ohe,inverse:Dhe,names:Fhe};var bI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],lm=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Wj=.8487,Hj=1.3523,Kj=ws/5,Vhe=1/Kj,Lf=18,ev=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},Ghe=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function Bhe(n,e,t,r){for(var i=e;r;--r){var s=n(i);if(i-=s,Math.abs(s)<t)break}return i}function Uhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function zhe(n){var e=ct(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*Kj);r<0?r=0:r>=Lf&&(r=Lf-1),t=ws*(t-Vhe*r);var i={x:ev(bI[r],t)*e,y:ev(lm[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*Wj+this.x0,i.y=i.y*this.a*Hj+this.y0,i}function $he(n){var e={x:(n.x-this.x0)/(this.a*Wj),y:Math.abs(n.y-this.y0)/(this.a*Hj)};if(e.y>=1)e.x/=bI[Lf][0],e.y=n.y<0?-ze:ze;else{var t=Math.floor(e.y*Lf);for(t<0?t=0:t>=Lf&&(t=Lf-1);;)if(lm[t][0]>e.y)--t;else if(lm[t+1][0]<=e.y)++t;else break;var r=lm[t],i=5*(e.y-r[0])/(lm[t+1][0]-r[0]);i=Bhe(function(s){return(ev(r,s)-e.y)/Ghe(r,s)},i,it,100),e.x/=ev(bI[t],i),e.y=(5*t+i)*gr,n.y<0&&(e.y=-e.y)}return e.x=ct(e.x+this.long0,this.over),e}var Whe=["Robinson","robin"];const Hhe={init:Uhe,forward:zhe,inverse:$he,names:Whe};function Khe(){this.name="geocent"}function Yhe(n){var e=Lj(n,this.es,this.a);return e}function Xhe(n){var e=Oj(n,this.es,this.a,this.b);return e}var qhe=["Geocentric","geocentric","geocent","Geocent"];const Zhe={init:Khe,forward:Yhe,inverse:Xhe,names:qhe};var Oi={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},$g={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Qhe(){if(Object.keys($g).forEach((function(t){if(typeof this[t]>"u")this[t]=$g[t].def;else{if($g[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);$g[t].num&&(this[t]=parseFloat(this[t]))}$g[t].degrees&&(this[t]=this[t]*gr)}).bind(this)),Math.abs(Math.abs(this.lat0)-ze)<it?this.mode=this.lat0<0?Oi.S_POLE:Oi.N_POLE:Math.abs(this.lat0)<it?this.mode=Oi.EQUIT:(this.mode=Oi.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function Jhe(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,s;switch(this.mode){case Oi.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case Oi.EQUIT:s=t*r;break;case Oi.S_POLE:s=-e;break;case Oi.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*t*Math.sin(n.x),this.mode){case Oi.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case Oi.EQUIT:s*=e;break;case Oi.N_POLE:s*=-(t*r);break;case Oi.S_POLE:s*=t*r;break}var a,o;return a=s*this.cg+i*this.sg,o=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=a*o,n.x=i*this.a,n.y=s*this.a,n}function ede(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var s=_s(n.x,n.y);if(Math.abs(s)<it)e.x=0,e.y=n.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Oi.OBLIQ:e.y=Math.asin(a*this.sinph0+n.y*o*this.cosph0/s),n.y=(a-this.sinph0*Math.sin(e.y))*s,n.x*=o*this.cosph0;break;case Oi.EQUIT:e.y=Math.asin(n.y*o/s),n.y=a*s,n.x*=o;break;case Oi.N_POLE:e.y=Math.asin(a),n.y=-n.y;break;case Oi.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var tde=["Tilted_Perspective","tpers"];const nde={init:Qhe,forward:Jhe,inverse:ede,names:tde};function rde(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function ide(n){var e=n.x,t=n.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var o=this.radius_p/_s(this.radius_p*Math.cos(t),Math.sin(t));if(i=o*Math.cos(e)*Math.cos(t),s=o*Math.sin(e)*Math.cos(t),a=o*Math.sin(t),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/_s(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/_s(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/_s(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/_s(s,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function sde(n){var e=-1,t=0,r=0,i,s,a,o;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*_s(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*_s(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var ade=["Geostationary Satellite View","Geostationary_Satellite","geos"];const ode={init:rde,forward:ide,inverse:sde,names:ade};var bm=1.340264,Rm=-.081106,Cm=893e-6,Pm=.003796,tv=Math.sqrt(3)/2;function lde(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function cde(n){var e=ct(n.x-this.long0,this.over),t=n.y,r=Math.asin(tv*Math.sin(t)),i=r*r,s=i*i*i;return n.x=e*Math.cos(r)/(tv*(bm+3*Rm*i+s*(7*Cm+9*Pm*i))),n.y=r*(bm+Rm*i+s*(Cm+Pm*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function ude(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,s,a,o,l,u;for(u=0;u<t&&(i=r*r,s=i*i*i,a=r*(bm+Rm*i+s*(Cm+Pm*i))-n.y,o=bm+3*Rm*i+s*(7*Cm+9*Pm*i),r-=l=a/o,!(Math.abs(l)<e));++u);return i=r*r,s=i*i*i,n.x=tv*n.x*(bm+3*Rm*i+s*(7*Cm+9*Pm*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/tv),n.x=ct(n.x+this.long0,this.over),n}var hde=["eqearth","Equal Earth","Equal_Earth"];const dde={init:lde,forward:cde,inverse:ude,names:hde};var Ip=1e-10;function fde(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<Ip)throw new Error;this.es?(this.en=AR(this.es),this.m1=U0(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=mde,this.forward=gde):(Math.abs(this.phi1)+Ip>=ze?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=yde,this.forward=pde)}function gde(n){var e=ct(n.x-(this.long0||0),this.over),t=n.y,r,i,s;return r=this.am1+this.m1-U0(t,i=Math.sin(t),s=Math.cos(t),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function mde(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=_s(n.x,n.y=this.am1-n.y),i=bR(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<ze)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-ze)<=Ip)r=0;else throw new Error;return n.x=ct(r+(this.long0||0),this.over),n.y=Tu(i),n}function pde(n){var e=ct(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>Ip?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function yde(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=_s(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>ze)throw new Error;return Math.abs(Math.abs(t)-ze)<=Ip?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=ct(e+(this.long0||0),this.over),n.y=Tu(t),n}var _de=["bonne","Bonne (Werner lat_1=90)"];const xde={init:fde,names:_de},FL={OBLIQUE:{forward:Tde,inverse:Ade},TRANSVERSE:{forward:Ide,inverse:bde}},nv={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function vde(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=Pj.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=Ta(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const r=Object.keys(nv),i=o=>{if(typeof this[o]>"u")return;const l=parseFloat(this[o])*gr;if(isNaN(l))throw new Error("Invalid value for "+o+": "+this[o]);return l};for(let o=0;o<r.length;o++){const l=r[o],u=nv[l],h=Object.entries(u);if(h.some(([g])=>typeof this[g]<"u")){t=u;for(let g=0;g<h.length;g++){const[p,x]=h[g],v=i(p);if(typeof v>"u")throw new Error("Missing parameter: "+p+".");this[x]=v}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:a}=Sde(this,t);this.lamp=s,Math.abs(a)>it?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=FL.OBLIQUE):this.projectionType=FL.TRANSVERSE}function Ede(n){return this.projectionType.forward(this,n)}function wde(n){return this.projectionType.inverse(this,n)}function Sde(n,e){let t,r;if(e===nv.ROTATE){let i=n.oLongC,s=n.oLatC,a=n.oAlpha;if(Math.abs(Math.abs(s)-ze)<=it)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(s)),t=Math.asin(Math.cos(s)*Math.sin(a))}else if(e===nv.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,s=n.oLat1,a=n.oLong2,o=n.oLat2,l=Math.abs(s);if(Math.abs(s)>ze-it)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90");if(Math.abs(o)>ze-it)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90");if(Math.abs(s-o)<it)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<it)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(o)*Math.cos(i)-Math.sin(s)*Math.cos(o)*Math.cos(a),Math.sin(s)*Math.cos(o)*Math.sin(a)-Math.cos(s)*Math.sin(o)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:t}}function Tde(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(t),s=Math.sin(r),a=Math.cos(r);e.x=ct(Math.atan2(a*Math.sin(t),n.sphip*a*i+n.cphip*s)+n.lamp),e.y=Math.asin(n.sphip*s-n.cphip*a*i);const o=n.obliqueProjection.forward(e);return n.isIdentity&&(o.x*=ws,o.y*=ws),o}function Ide(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(r),s=Math.cos(t);e.x=ct(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*s);const a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=ws,a.y*=ws),a}function Ade(n,e){n.isIdentity&&(e.x*=gr,e.y*=gr);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(r),n.sphip*o*s-n.cphip*a),e.y=Math.asin(n.sphip*a+n.cphip*o*s)}return e.x=ct(e.x+n.long0),e}function bde(n,e){n.isIdentity&&(e.x*=gr,e.y*=gr);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=n.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=ct(e.x+n.long0),e}var Rde=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Cde={init:vde,forward:Ede,inverse:wde,names:Rde};function Pde(n){n.Proj.projections.add(U_),n.Proj.projections.add(z_),n.Proj.projections.add(_ce),n.Proj.projections.add(bce),n.Proj.projections.add(Mce),n.Proj.projections.add(Fce),n.Proj.projections.add(zce),n.Proj.projections.add(Yce),n.Proj.projections.add(Jce),n.Proj.projections.add(iue),n.Proj.projections.add(yue),n.Proj.projections.add(Sue),n.Proj.projections.add(Rue),n.Proj.projections.add(Lue),n.Proj.projections.add(Vue),n.Proj.projections.add($ue),n.Proj.projections.add(Xue),n.Proj.projections.add(ehe),n.Proj.projections.add(ahe),n.Proj.projections.add(hhe),n.Proj.projections.add(phe),n.Proj.projections.add(Ehe),n.Proj.projections.add(Rhe),n.Proj.projections.add(Nhe),n.Proj.projections.add(jhe),n.Proj.projections.add(Hhe),n.Proj.projections.add(Zhe),n.Proj.projections.add(nde),n.Proj.projections.add(ode),n.Proj.projections.add(dde),n.Proj.projections.add(xde),n.Proj.projections.add(Cde)}const gn=Object.assign(Ole,{defaultDatum:"WGS84",Proj:Ta,WGS84:new Ta("WGS84"),Point:I0,toPoint:Dj,defs:mi,nadgrid:yle,transform:Qx,mgrs:Dle,version:"__VERSION__"});Pde(gn);class Yj{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=to,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Bn(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Bn(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return jt()}readFeature(e,t){return jt()}readFeatures(e,t){return jt()}readGeometry(e,t){return jt()}readProjection(e){return jt()}writeFeature(e,t){return jt()}writeFeatures(e,t){return jt()}writeGeometry(e,t){return jt()}}function so(n,e,t){const r=t?Bn(t.featureProjection):null,i=t?Bn(t.dataProjection):null;let s=n;if(r&&i&&!wh(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform($m(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(l){for(let u=0,h=l.length;u<h;++u)l[u]=Math.round(l[u]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const kde={Point:no,LineString:$o,Polygon:ro,MultiPoint:C0,MultiLineString:iu,MultiPolygon:s0};function Mde(n,e,t){return Array.isArray(e[0])?(M5(n,0,e,t)||(n=n.slice(),sT(n,0,e,t)),n):(cA(n,0,e,t)||(n=n.slice(),sx(n,0,e,t)),n)}function Xj(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>Xj({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return so(new $s(r,r==="Polygon"?Mde(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function NR(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>NR(i,e));return new qa(r)}const t=kde[n.type];return so(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Nde extends Yj{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(l_(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(l_(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return jt()}readFeaturesFromObject(e,t){return jt()}readGeometry(e,t){return this.readGeometryFromObject(l_(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return jt()}readProjection(e){return this.readProjectionFromObject(l_(e))}readProjectionFromObject(e){return jt()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return jt()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return jt()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return jt()}}function l_(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class LR extends Nde{constructor(e){e=e||{},super(),this.dataProjection=Bn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Bn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=OR(r.geometry);if(this.featureClass===$s)return Xj({geometry:i,id:r.id,properties:r.properties},t);const s=new to;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(NR(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,l=a.length;o<l;++o){const u=this.readFeatureFromObject(a[o],t);u&&i.push(u)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Lde(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Bn(t.properties.name);else if(t.type==="EPSG")r=Bn("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=RI(a,t),delete s[e.getGeometryName()]),Ph(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return RI(e,this.adaptOptions(t))}}function OR(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Dde(n);break}case"LineString":{t=Fde(n);break}case"Polygon":{t=Bde(n);break}case"MultiPoint":{t=Vde(n);break}case"MultiLineString":{t=jde(n);break}case"MultiPolygon":{t=Gde(n);break}case"GeometryCollection":{t=Ode(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Lde(n,e){const t=OR(n);return NR(t,e)}function Ode(n,e){return n.geometries.map(function(r){return OR(r)})}function Dde(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:rd(e.length)}}function Fde(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:rd(e[0]?.length||2)}}function jde(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=Up(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:rd(t)}}function Vde(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:rd(e[0]?.length||2)}}function Gde(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=l5(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:rd(r)}}function Bde(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=Up(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:rd(r)}}function RI(n,e){n=so(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=Kde(n);break}case"LineString":{r=zde(n);break}case"Polygon":{r=Yde(n,e);break}case"MultiPoint":{r=Wde(n);break}case"MultiLineString":{r=$de(n);break}case"MultiPolygon":{r=Hde(n,e);break}case"GeometryCollection":{r=Ude(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function Ude(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return RI(r,e)})}}function zde(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function $de(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Wde(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Hde(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Kde(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Yde(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const rv="http://www.w3.org/2001/XMLSchema-instance";function hd(n,e){return z0().createElementNS(n,e)}function ao(n,e){return qj(n,e,[]).join("")}function qj(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)qj(r,e,t)}return t}function Sl(n){return"documentElement"in n}function Tl(n){return new DOMParser().parseFromString(n,"application/xml")}function jL(n,e){return(function(t,r){const i=n.call(e??this,t,r);if(i!==void 0){const s=r[r.length-1];An(s,i)}})}function $a(n,e){return(function(t,r){const i=n.call(e??this,t,r);i!==void 0&&r[r.length-1].push(i)})}function DR(n,e){return(function(t,r){const i=n.call(this,t,r);i!==void 0&&(r[r.length-1]=i)})}function Ve(n,e,t){return(function(r,i){const s=n.call(this,r,i);if(s!==void 0){const a=i[i.length-1],o=e!==void 0?e:r.localName;a[o]=s}})}function qe(n,e){return(function(t,r,i){n.call(this,t,r,i),i[i.length-1].node.appendChild(t)})}function Zj(n,e){let t,r;return function(i,s,a){if(t===void 0){t={};const o={};o[i.localName]=n,t[i.namespaceURI]=o,r=oo(i.localName)}Qj(t,r,s,a)}}function oo(n,e){return(function(t,r,i){const a=r[r.length-1].node;let o=n;o===void 0&&(o=i);const l=a.namespaceURI;return hd(l,o)})}const Bi=oo();function Ts(n,e){const t=e.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=n[e[i]];return r}function ot(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function Iu(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=n[i.namespaceURI];if(s!==void 0){const a=s[i.localName];a!==void 0&&a.call(r,i,t)}}}function an(n,e,t,r,i){return r.push(n),Iu(e,t,r,i),r.pop()}function Qj(n,e,t,r,i,s){const a=(i!==void 0?i:t).length;let o,l;for(let u=0;u<a;++u)o=t[u],o!==void 0&&(l=e.call(s,o,r,i!==void 0?i[u]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(s,l,o,r))}function zn(n,e,t,r,i,s,a){return i.push(n),Qj(e,t,r,i,s,a),i.pop()}let CS;function Xde(){return CS===void 0&&typeof XMLSerializer<"u"&&(CS=new XMLSerializer),CS}let PS;function z0(){return PS===void 0&&typeof document<"u"&&(PS=document.implementation.createDocument("","",null)),PS}class Jj extends Yj{constructor(){super(),this.xmlSerializer_=Xde()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const r=Tl(e);return this.readFeatureFromDocument(r,t)}return Sl(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const r=Tl(e);return this.readFeaturesFromDocument(r,t)}return Sl(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&An(r,this.readFeaturesFromNode(i,t));return r}readFeaturesFromNode(e,t){return jt()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const r=Tl(e);return this.readGeometryFromDocument(r,t)}return Sl(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=Tl(e);return this.readProjectionFromDocument(t)}return Sl(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}function mu(n){const e=ao(n,!1);return qde(e)}function qde(n){const e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function kE(n){const e=ao(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function yn(n){const e=ao(n,!1);return Zde(e)}function Zde(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function Ap(n){const e=ao(n,!1);return Qde(e)}function Qde(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function Zt(n){return ao(n,!1).trim()}function A0(n,e){wn(n,e?"1":"0")}function Jde(n,e){n.appendChild(z0().createCDATASection(e))}function efe(n,e){const t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+kg(t.getUTCMonth()+1,2)+"-"+kg(t.getUTCDate(),2)+"T"+kg(t.getUTCHours(),2)+":"+kg(t.getUTCMinutes(),2)+":"+kg(t.getUTCSeconds(),2)+"Z";n.appendChild(z0().createTextNode(r))}function fs(n,e){const t=e.toPrecision();n.appendChild(z0().createTextNode(t))}function iv(n,e){const t=e.toString();n.appendChild(z0().createTextNode(t))}const tfe=/^\s/,nfe=/\s$/,rfe=/(\n|\t|\r|<|&| {2})/;function wn(n,e){typeof e=="string"&&(tfe.test(e)||nfe.test(e)||rfe.test(e))?e.split("]]>").forEach((t,r,i)=>{r<i.length-1&&(t+="]]"),r>0&&(t=">"+t),Jde(n,t)}):n.appendChild(z0().createTextNode(e))}const Xn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],ife="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",sfe={rte:e7,trk:t7,wpt:n7},afe=ot(Xn,{rte:$a(e7),trk:$a(t7),wpt:$a(n7)}),ofe=ot(Xn,{text:Ve(Zt,"linkText"),type:Ve(Zt,"linkType")}),lfe=ot(Xn,{name:Ve(Zt),email:Ofe,link:T1}),cfe=ot(Xn,{name:Ve(Zt),desc:Ve(Zt),author:Ve(Mfe),copyright:Ve(Nfe),link:T1,time:Ve(kE),keywords:Ve(Zt),bounds:Lfe,extensions:ME}),ufe=ot(Xn,{year:Ve(Ap),license:Ve(Zt)}),hfe=ot(Xn,{rte:qe(Vfe),trk:qe(Gfe),wpt:qe(Ufe)});class dfe extends Jj{constructor(e){super(),e=e||{},this.dataProjection=Bn("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const i=e[t];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Tl(e)):Sl(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!Xn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Xn.includes(t.namespaceURI)&&t.localName==="metadata")return an({},cfe,t,[]);return null}readFeatureFromNode(e,t){if(!Xn.includes(e.namespaceURI))return null;const r=sfe[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!Xn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=an([],afe,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=hd("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",rv),r.setAttributeNS(rv,"xsi:schemaLocation",ife),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),zn({node:r},hfe,kfe,e,[t]),r}}const ffe=ot(Xn,{name:Ve(Zt),cmt:Ve(Zt),desc:Ve(Zt),src:Ve(Zt),link:T1,number:Ve(Ap),extensions:ME,type:Ve(Zt),rtept:Dfe}),gfe=ot(Xn,{ele:Ve(yn),time:Ve(kE)}),mfe=ot(Xn,{name:Ve(Zt),cmt:Ve(Zt),desc:Ve(Zt),src:Ve(Zt),link:T1,number:Ve(Ap),type:Ve(Zt),extensions:ME,trkseg:jfe}),pfe=ot(Xn,{trkpt:Ffe}),yfe=ot(Xn,{ele:Ve(yn),time:Ve(kE)}),_fe=ot(Xn,{ele:Ve(yn),time:Ve(kE),magvar:Ve(yn),geoidheight:Ve(yn),name:Ve(Zt),cmt:Ve(Zt),desc:Ve(Zt),src:Ve(Zt),link:T1,sym:Ve(Zt),type:Ve(Zt),fix:Ve(Zt),sat:Ve(Ap),hdop:Ve(yn),vdop:Ve(yn),pdop:Ve(yn),ageofdgpsdata:Ve(yn),dgpsid:Ve(Ap),extensions:ME}),xfe=["text","type"],vfe=ot(Xn,{text:qe(wn),type:qe(wn)}),Efe=ot(Xn,["name","cmt","desc","src","link","number","type","rtept"]),wfe=ot(Xn,{name:qe(wn),cmt:qe(wn),desc:qe(wn),src:qe(wn),link:qe(VR),number:qe(iv),type:qe(wn),rtept:Zj(qe(GR))}),Sfe=ot(Xn,["ele","time"]),Tfe=ot(Xn,["name","cmt","desc","src","link","number","type","trkseg"]),Ife=ot(Xn,{name:qe(wn),cmt:qe(wn),desc:qe(wn),src:qe(wn),link:qe(VR),number:qe(iv),type:qe(wn),trkseg:Zj(qe(Bfe))}),Afe=oo("trkpt"),bfe=ot(Xn,{trkpt:qe(GR)}),Rfe=ot(Xn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Cfe=ot(Xn,{ele:qe(fs),time:qe(efe),magvar:qe(fs),geoidheight:qe(fs),name:qe(wn),cmt:qe(wn),desc:qe(wn),src:qe(wn),link:qe(VR),sym:qe(wn),type:qe(wn),fix:qe(wn),sat:qe(iv),hdop:qe(fs),vdop:qe(fs),pdop:qe(fs),ageofdgpsdata:qe(fs),dgpsid:qe(iv)}),Pfe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function kfe(n,e,t){const r=n.getGeometry();if(r){const i=Pfe[r.getType()];if(i){const s=e[e.length-1].node;return hd(s.namespaceURI,i)}}}function FR(n,e,t,r){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,e.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,e.hasM=!0):n.push(0),n}function jR(n,e,t){let r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),i!==4){for(let s=0,a=e.length/4;s<a;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],n.hasZ&&(e[s*i+2]=e[s*4+2]),n.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,t)for(let s=0,a=t.length;s<a;s++)t[s]=t[s]/4*i}return r}function Mfe(n,e){const t=an({},lfe,n,e);if(t)return t}function Nfe(n,e){const t=an({},ufe,n,e);if(t){const r=n.getAttribute("author");return r!==null&&(t.author=r),t}}function Lfe(n,e){const t=e[e.length-1],r=n.getAttribute("minlat"),i=n.getAttribute("minlon"),s=n.getAttribute("maxlat"),a=n.getAttribute("maxlon");i!==null&&r!==null&&a!==null&&s!==null&&(t.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(a),parseFloat(s)]])}function Ofe(n,e){const t=e[e.length-1],r=n.getAttribute("id"),i=n.getAttribute("domain");r!==null&&i!==null&&(t.email=`${r}@${i}`)}function T1(n,e){const t=e[e.length-1],r=n.getAttribute("href");r!==null&&(t.link=r),Iu(ofe,n,e)}function ME(n,e){const t=e[e.length-1];t.extensionsNode_=n}function Dfe(n,e){const t=an({},gfe,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;FR(i,s,n,t)}}function Ffe(n,e){const t=an({},yfe,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;FR(i,s,n,t)}}function jfe(n,e){const t=e[e.length-1];Iu(pfe,n,e);const r=t.flatCoordinates;t.ends.push(r.length)}function e7(n,e){const t=e[0],r=an({flatCoordinates:[],layoutOptions:{}},ffe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const a=jR(s,i),o=new $o(i,a);so(o,!1,t);const l=new to(o);return l.setProperties(r,!0),l}function t7(n,e){const t=e[0],r=an({flatCoordinates:[],ends:[],layoutOptions:{}},mfe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const a=r.layoutOptions;delete r.layoutOptions;const o=jR(a,i,s),l=new iu(i,o,s);so(l,!1,t);const u=new to(l);return u.setProperties(r,!0),u}function n7(n,e){const t=e[0],r=an({},_fe,n,e);if(!r)return;const i={},s=FR([],i,n,r),a=jR(i,s),o=new no(s,a);so(o,!1,t);const l=new to(o);return l.setProperties(r,!0),l}function VR(n,e,t){n.setAttribute("href",e);const i=t[t.length-1].properties,s=[i.linkText,i.linkType];zn({node:n},vfe,Bi,s,t,xfe)}function GR(n,e,t){const r=t[t.length-1],s=r.node.namespaceURI,a=r.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(a.time=e[3]);case"XYZ":e[2]!==0&&(a.ele=e[2]);break;case"XYM":e[2]!==0&&(a.time=e[2]);break}const l=n.nodeName=="rtept"?Sfe[s]:Rfe[s],u=Ts(a,l);zn({node:n,properties:a},Cfe,Bi,u,t,l)}function Vfe(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="LineString"){const h=so(a,!0,r);s.geometryLayout=h.getLayout(),i.rtept=h.getCoordinates()}const o=t[t.length-1].node,l=Efe[o.namespaceURI],u=Ts(i,l);zn(s,wfe,Bi,u,t,l)}function Gfe(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="MultiLineString"){const h=so(a,!0,r);i.trkseg=h.getLineStrings()}const o=t[t.length-1].node,l=Tfe[o.namespaceURI],u=Ts(i,l);zn(s,Ife,Bi,u,t,l)}function Bfe(n,e,t){const r={node:n};r.geometryLayout=e.getLayout(),r.properties={},zn(r,bfe,Afe,e.getCoordinates(),t)}function Ufe(n,e,t){const r=t[0],i=t[t.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const a=so(s,!0,r);i.geometryLayout=a.getLayout(),GR(n,a.getCoordinates(),t)}}const Yl=["http://www.google.com/kml/ext/2.2"],It=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],zfe="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",VL={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},$fe=ot(It,{ExtendedData:y7,Region:_7,MultiGeometry:Ve(g7,"geometry"),LineString:Ve(d7,"geometry"),LinearRing:Ve(f7,"geometry"),Point:Ve(m7,"geometry"),Polygon:Ve(p7,"geometry"),Style:Ve(zR),StyleMap:b0e,address:Ve(Zt),description:Ve(Zt),name:Ve(Zt),open:Ve(mu),phoneNumber:Ve(Zt),styleUrl:Ve(o7),visibility:Ve(mu)},ot(Yl,{MultiTrack:Ve(g0e,"geometry"),Track:Ve(h7,"geometry")})),Wfe=ot(It,{ExtendedData:y7,Region:_7,Link:V0e,address:Ve(Zt),description:Ve(Zt),name:Ve(Zt),open:Ve(mu),phoneNumber:Ve(Zt),visibility:Ve(mu)}),Hfe=ot(It,{href:Ve(a7)}),Kfe=ot(It,{Altitude:Ve(yn),Longitude:Ve(yn),Latitude:Ve(yn),Tilt:Ve(yn),AltitudeMode:Ve(Zt),Heading:Ve(yn),Roll:Ve(yn)}),r7=ot(It,{LatLonAltBox:M0e,Lod:L0e}),Yfe=ot(It,["Document","Placemark"]),Xfe=ot(It,{Document:qe(K0e),Placemark:qe(E7)});let Kf,W_=null,CI,km,Mm,Nm,sv,PI=null,BR,kI=null,MI,xh=null,GL=null,NI=null;function av(n){return 32/Math.min(n[0],n[1])}function qfe(){Kf=[255,255,255,1],W_=new oi({color:Kf}),CI=[20,2],km="pixels",Mm="pixels",Nm=[64,64],sv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",PI=new Hp({anchor:CI,anchorOrigin:"bottom-left",anchorXUnits:km,anchorYUnits:Mm,crossOrigin:"anonymous",rotation:0,scale:av(Nm),size:Nm,src:sv}),BR="NO_IMAGE",kI=new xs({color:Kf,width:1}),MI=new xs({color:[51,51,51,1],width:2}),xh=new id({font:"bold 16px Helvetica",fill:W_,stroke:MI,scale:.8}),GL=new ur({fill:W_,image:PI,text:xh,stroke:kI,zIndex:0}),NI=[GL]}let c_;function Zfe(n){return n}class Qfe extends Jj{constructor(e){super(),e=e||{},NI||qfe(),this.dataProjection=Bn("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:NI,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:Zfe,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const r=ot(It,{Document:jL(this.readDocumentOrFolder_,this),Folder:jL(this.readDocumentOrFolder_,this),Placemark:$a(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=an([],r,e,t,this);if(i)return i}readPlacemark_(e,t){const r=an({geometry:null},$fe,e,t,this);if(!r)return;const i=new to,s=e.getAttribute("id");s!==null&&i.setId(s);const a=t[0],o=r.geometry;if(o&&so(o,!1,a),i.setGeometry(o),delete r.geometry,this.extractStyles_){const l=r.Style,u=r.styleUrl,h=e0e(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(h)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,t){const r=e.getAttribute("id");if(r!==null){const i=zR.call(this,e,t);if(i){let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,t){const r=e.getAttribute("id");if(r===null)return;const i=c7.call(this,e,t);if(!i)return;let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,t){if(!It.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!It.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const a=this.readFeaturesFromNode(s,t);a&&An(r,a)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const t=Tl(e);return this.readNameFromDocument(t)}return Sl(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(It.includes(t.namespaceURI)&&t.localName=="name")return Zt(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const r=t.localName;if(It.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const r=Tl(e);An(t,this.readNetworkLinksFromDocument(r))}else Sl(e)?An(t,this.readNetworkLinksFromDocument(e)):An(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&An(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(It.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=an({},Wfe,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;It.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&An(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){const t=[];if(typeof e=="string"){const r=Tl(e);An(t,this.readRegionFromDocument(r))}else Sl(e)?An(t,this.readRegionFromDocument(e)):An(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&An(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(It.includes(r.namespaceURI)&&r.localName=="Region"){const i=an({},r7,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;It.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&An(t,this.readRegionFromNode(r))}return t}readCamera(e){const t=[];if(typeof e=="string"){const r=Tl(e);An(t,this.readCameraFromDocument(r))}else Sl(e)?An(t,this.readCameraFromDocument(e)):An(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&An(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(It.includes(r.namespaceURI)&&r.localName==="Camera"){const i=an({},Kfe,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;It.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&An(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=hd(It[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",Yl[0]),r.setAttributeNS(i,"xmlns:xsi",rv),r.setAttributeNS(rv,"xsi:schemaLocation",zfe);const s={node:r},a={};e.length>1?a.Document=e:e.length==1&&(a.Placemark=e[0]);const o=Yfe[r.namespaceURI],l=Ts(a,o);return zn(s,Xfe,Bi,l,[t],o,this),r}}function Jfe(n,e){const t=[0,0];let r="start";const i=n.getImage();if(i){const o=i.getSize();if(o&&o.length==2){const l=i.getScaleArray(),u=i.getAnchor();t[0]=l[0]*(o[0]-u[0]),t[1]=l[1]*(o[1]/2-u[1]),r="left"}}let s=n.getText();return s?(s=s.clone(),s.setFont(s.getFont()||xh.getFont()),s.setScale(s.getScale()||xh.getScale()),s.setFill(s.getFill()||xh.getFill()),s.setStroke(s.getStroke()||MI)):s=xh.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(r),new ur({image:i,text:s})}function e0e(n,e,t,r,i){return(function(s,a){let o=i,l="",u=[];if(o){const f=s.getGeometry();if(f)if(f instanceof qa)u=f.getGeometriesArrayRecursive().filter(function(g){const p=g.getType();return p==="Point"||p==="MultiPoint"}),o=u.length>0;else{const g=f.getType();o=g==="Point"||g==="MultiPoint"}}o&&(l=s.get("name"),o=o&&!!l,o&&/&[^&]+;/.test(l)&&(c_||(c_=document.createElement("textarea")),c_.innerHTML=l,l=c_.value));let h=t;if(n?h=n:e&&(h=i7(e,t,r)),o){const f=Jfe(h[0],l);if(u.length>0){f.setGeometry(new qa(u));const g=new ur({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[f,g].concat(h.slice(1))}return f}return h})}function i7(n,e,t){return Array.isArray(n)?n:typeof n=="string"?i7(t[n],e,t):e}function NE(n){const e=ao(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function s7(n){let e=ao(n,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),a=parseFloat(i[2]),o=i[3]?parseFloat(i[3]):0;t.push(s,a,o),e=e.substr(i[0].length)}if(e==="")return t}function a7(n){const e=ao(n,!1).trim();let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function o7(n){const e=ao(n,!1).trim().replace(/^(?!.*#)/,"#");let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function t0e(n){const e=n.getAttribute("xunits"),t=n.getAttribute("yunits");let r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(n.getAttribute("x")),xunits:VL[e],y:parseFloat(n.getAttribute("y")),yunits:VL[t],origin:r}}function l7(n){return yn(n)}const n0e=ot(It,{Pair:A0e});function c7(n,e){return an(void 0,n0e,n,e,this)}const r0e=ot(It,{Icon:Ve(y0e),color:Ve(NE),heading:Ve(yn),hotSpot:Ve(t0e),scale:Ve(l7)});function i0e(n,e){const t=an({},r0e,n,e);if(!t)return;const r=e[e.length-1],i="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(i).length>0;let a;const o=i.href;o?a=o:s&&(a=sv);let l,u,h,f="bottom-left";const g=t.hotSpot;g?(l=[g.x,g.y],u=g.xunits,h=g.yunits,f=g.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(a.includes("pushpin")?(l=CI,u=km,h=Mm):a.includes("arrow-reverse")?(l=[54,42],u=km,h=Mm):a.includes("paddle")&&(l=[32,1],u=km,h=Mm));let p;const x=i.x,v=i.y;x!==void 0&&v!==void 0&&(p=[x,v]);let w;const T=i.w,I=i.h;T!==void 0&&I!==void 0&&(w=[T,I]);let A;const N=t.heading;N!==void 0&&(A=bl(N));const D=t.scale,B=t.color;if(s){a==sv&&(w=Nm);const k=new Hp({anchor:l,anchorOrigin:f,anchorXUnits:u,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:A,scale:D,size:w,src:this.iconUrlFunction_(a),color:B}),P=k.getScaleArray()[0],M=k.getSize();if(M===null){const j=k.getImageState();if(j===yt.IDLE||j===yt.LOADING){const O=function(){const W=k.getImageState();if(!(W===yt.IDLE||W===yt.LOADING)){const F=k.getSize();if(F&&F.length==2){const Te=av(F);k.setScale(P*Te)}k.unlistenImageChange(O)}};k.listenImageChange(O),j===yt.IDLE&&k.load()}}else if(M.length==2){const j=av(M);k.setScale(P*j)}r.imageStyle=k}else r.imageStyle=BR}const s0e=ot(It,{color:Ve(NE),scale:Ve(l7)});function a0e(n,e){const t=an({},s0e,n,e);if(!t)return;const r=e[e.length-1],i=new id({fill:new oi({color:"color"in t?t.color:Kf}),scale:t.scale});r.textStyle=i}const o0e=ot(It,{color:Ve(NE),width:Ve(yn)});function l0e(n,e){const t=an({},o0e,n,e);if(!t)return;const r=e[e.length-1],i=new xs({color:"color"in t?t.color:Kf,width:"width"in t?t.width:1});r.strokeStyle=i}const c0e=ot(It,{color:Ve(NE),fill:Ve(mu),outline:Ve(mu)});function u0e(n,e){const t=an({},c0e,n,e);if(!t)return;const r=e[e.length-1],i=new oi({color:"color"in t?t.color:Kf});r.fillStyle=i;const s=t.fill;s!==void 0&&(r.fill=s);const a=t.outline;a!==void 0&&(r.outline=a)}const h0e=ot(It,{coordinates:DR(s7)});function u7(n,e){return an(null,h0e,n,e)}function d0e(n,e){const r=e[e.length-1].coordinates,i=ao(n,!1),a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(a){const o=parseFloat(a[1]),l=parseFloat(a[2]),u=parseFloat(a[3]);r.push([o,l,u])}else r.push([])}const f0e=ot(Yl,{Track:$a(h7)});function g0e(n,e){const t=an([],f0e,n,e);if(t)return new iu(t)}const m0e=ot(It,{when:G0e},ot(Yl,{coord:d0e}));function h7(n,e){const t=an({coordinates:[],whens:[]},m0e,n,e);if(!t)return;const r=[],i=t.coordinates,s=t.whens;for(let a=0,o=Math.min(i.length,s.length);a<o;++a)i[a].length==3&&r.push(i[a][0],i[a][1],i[a][2],s[a]);return new $o(r,"XYZM")}const p0e=ot(It,{href:Ve(a7)},ot(Yl,{x:Ve(yn),y:Ve(yn),w:Ve(yn),h:Ve(yn)}));function y0e(n,e){const t=an({},p0e,n,e);return t||null}const _0e=ot(It,{coordinates:DR(s7)});function UR(n,e){return an(null,_0e,n,e)}const LE=ot(It,{extrude:Ve(mu),tessellate:Ve(mu),altitudeMode:Ve(Zt)});function d7(n,e){const t=an({},LE,n,e),r=UR(n,e);if(r){const i=new $o(r,"XYZ");return i.setProperties(t,!0),i}}function f7(n,e){const t=an({},LE,n,e),r=UR(n,e);if(r){const i=new ro(r,"XYZ",[r.length]);return i.setProperties(t,!0),i}}const x0e=ot(It,{LineString:$a(d7),LinearRing:$a(f7),MultiGeometry:$a(g7),Point:$a(m7),Polygon:$a(p7)});function g7(n,e){const t=an([],x0e,n,e);if(!t)return null;if(t.length===0)return new qa(t);let r,i=!0;const s=t[0].getType();let a;for(let o=1,l=t.length;o<l;++o)if(a=t[o],a.getType()!=s){i=!1;break}if(i){let o,l;if(s=="Point"){const u=t[0];o=u.getLayout(),l=u.getFlatCoordinates();for(let h=1,f=t.length;h<f;++h)a=t[h],An(l,a.getFlatCoordinates());r=new C0(l,o),kS(r,t)}else if(s=="LineString")r=new iu(t),kS(r,t);else if(s=="Polygon")r=new s0(t),kS(r,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new qa(t);else throw new Error("Unknown geometry type found")}else r=new qa(t);return r}function m7(n,e){const t=an({},LE,n,e),r=UR(n,e);if(r){const i=new no(r,"XYZ");return i.setProperties(t,!0),i}}const v0e=ot(It,{innerBoundaryIs:D0e,outerBoundaryIs:j0e});function p7(n,e){const t=an({},LE,n,e),r=an([null],v0e,n,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let o=1,l=r.length;o<l;++o)An(i,r[o]),s.push(i.length);const a=new ro(i,"XYZ",s);return a.setProperties(t,!0),a}}const E0e=ot(It,{IconStyle:i0e,LabelStyle:a0e,LineStyle:l0e,PolyStyle:u0e});function zR(n,e){const t=an({},E0e,n,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:W_;const i=t.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in t?t.imageStyle!=BR&&(s=t.imageStyle):s=PI;const a="textStyle"in t?t.textStyle:xh,o="strokeStyle"in t?t.strokeStyle:kI,l=t.outline;return l!==void 0&&!l?[new ur({geometry:function(u){const h=u.getGeometry(),f=h.getType();if(f==="GeometryCollection"){const g=h;return new qa(g.getGeometriesArrayRecursive().filter(function(p){const x=p.getType();return x!=="Polygon"&&x!=="MultiPolygon"}))}if(f!=="Polygon"&&f!=="MultiPolygon")return h},fill:r,image:s,stroke:o,text:a,zIndex:void 0}),new ur({geometry:function(u){const h=u.getGeometry(),f=h.getType();if(f==="GeometryCollection"){const g=h;return new qa(g.getGeometriesArrayRecursive().filter(function(p){const x=p.getType();return x==="Polygon"||x==="MultiPolygon"}))}if(f==="Polygon"||f==="MultiPolygon")return h},fill:r,stroke:null,zIndex:void 0})]:[new ur({fill:r,image:s,stroke:o,text:a,zIndex:void 0})]}function kS(n,e){const t=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let a,o,l;a=!1,o=!1,l=!1;for(let u=0;u<t;++u){const h=e[u];r[u]=h.get("extrude"),i[u]=h.get("tessellate"),s[u]=h.get("altitudeMode"),a=a||r[u]!==void 0,o=o||i[u]!==void 0,l=l||s[u]}a&&n.set("extrude",r),o&&n.set("tessellate",i),l&&n.set("altitudeMode",s)}const w0e=ot(It,{displayName:Ve(Zt),value:Ve(Zt)});function S0e(n,e){const t=n.getAttribute("name");Iu(w0e,n,e);const r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const T0e=ot(It,{Data:S0e,SchemaData:C0e});function y7(n,e){Iu(T0e,n,e)}function _7(n,e){Iu(r7,n,e)}const I0e=ot(It,{Style:Ve(zR),key:Ve(Zt),styleUrl:Ve(o7)});function A0e(n,e){const t=an({},I0e,n,e,this);if(!t)return;const r=t.key;if(r&&r=="normal"){const i=t.styleUrl;i&&(e[e.length-1]=i);const s=t.Style;s&&(e[e.length-1]=s)}}function b0e(n,e){const t=c7.call(this,n,e);if(!t)return;const r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const R0e=ot(It,{SimpleData:P0e});function C0e(n,e){Iu(R0e,n,e)}function P0e(n,e){const t=n.getAttribute("name");if(t!==null){const r=Zt(n),i=e[e.length-1];i[t]=r}}const k0e=ot(It,{altitudeMode:Ve(Zt),minAltitude:Ve(yn),maxAltitude:Ve(yn),north:Ve(yn),south:Ve(yn),east:Ve(yn),west:Ve(yn)});function M0e(n,e){const t=an({},k0e,n,e);if(!t)return;const r=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=i,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}const N0e=ot(It,{minLodPixels:Ve(yn),maxLodPixels:Ve(yn),minFadeExtent:Ve(yn),maxFadeExtent:Ve(yn)});function L0e(n,e){const t=an({},N0e,n,e);if(!t)return;const r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}const O0e=ot(It,{LinearRing:$a(u7)});function D0e(n,e){const t=an([],O0e,n,e);t.length>0&&e[e.length-1].push(...t)}const F0e=ot(It,{LinearRing:DR(u7)});function j0e(n,e){const t=an(void 0,F0e,n,e);if(t){const r=e[e.length-1];r[0]=t}}function V0e(n,e){Iu(Hfe,n,e)}function G0e(n,e){const r=e[e.length-1].whens,i=ao(n,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function OE(n,e){const t=Lh(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const a=Math.floor(i[s]).toString(16);i[s]=a.length==1?"0"+a:a}wn(n,i.join(""))}function B0e(n,e,t){const r=t[t.length-1],i=r.layout,s=r.stride;let a;if(i=="XY"||i=="XYM")a=2;else if(i=="XYZ"||i=="XYZM")a=3;else throw new Error("Invalid geometry layout");const o=e.length;let l="";if(o>0){l+=e[0];for(let u=1;u<a;++u)l+=","+e[u];for(let u=s;u<o;u+=s){l+=" "+e[u];for(let h=1;h<a;++h)l+=","+e[u+h]}}wn(n,l)}const H_=ot(It,{Data:qe(U0e),value:qe($0e),displayName:qe(z0e)});function U0e(n,e,t){n.setAttribute("name",e.name);const r={node:n},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&zn(r,H_,Bi,[i.displayName],t,["displayName"]),i!==null&&i.value&&zn(r,H_,Bi,[i.value],t,["value"])):zn(r,H_,Bi,[i],t,["value"])}function z0e(n,e){wn(n,e)}function $0e(n,e){wn(n,e)}const W0e=ot(It,{Placemark:qe(E7)}),H0e=function(n,e,t){const r=e[e.length-1].node;return hd(r.namespaceURI,"Placemark")};function K0e(n,e,t){zn({node:n},W0e,H0e,e,t,void 0,this)}const Y0e=oo("Data");function X0e(n,e,t){const r={node:n},i=e.names,s=e.values,a=i.length;for(let o=0;o<a;o++)zn(r,H_,Y0e,[{name:i[o],value:s[o]}],t)}const BL=ot(It,["href"],ot(Yl,["x","y","w","h"])),UL=ot(It,{href:qe(wn)},ot(Yl,{x:qe(fs),y:qe(fs),w:qe(fs),h:qe(fs)})),q0e=function(n,e,t){return hd(Yl[0],"gx:"+t)};function Z0e(n,e,t){const r={node:n},i=t[t.length-1].node;let s=BL[i.namespaceURI],a=Ts(e,s);zn(r,UL,Bi,a,t,s),s=BL[Yl[0]],a=Ts(e,s),zn(r,UL,q0e,a,t,s)}const Q0e=ot(It,["scale","heading","Icon","color","hotSpot"]),J0e=ot(It,{Icon:qe(Z0e),color:qe(OE),heading:qe(fs),hotSpot:qe(Age),scale:qe(S7)});function ege(n,e,t){const r={node:n},i={},s=e.getSrc(),a=e.getSize(),o=e.getImageSize(),l={href:s};if(a){l.w=a[0],l.h=a[1];const w=e.getAnchor(),T=e.getOrigin();if(T&&o&&T[0]!==0&&T[1]!==a[1]&&(l.x=T[0],l.y=o[1]-(T[1]+a[1])),w&&(w[0]!==a[0]/2||w[1]!==a[1]/2)){const I={x:w[0],xunits:"pixels",y:a[1]-w[1],yunits:"pixels"};i.hotSpot=I}}i.Icon=l;let u=e.getScaleArray()[0],h=a;if(h===null&&(h=Nm),h.length==2){const w=av(h);u=u/w}u!==1&&(i.scale=u);const f=e.getRotation();f!==0&&(i.heading=f);const g=e.getColor();g&&(i.color=g);const p=t[t.length-1].node,x=Q0e[p.namespaceURI],v=Ts(i,x);zn(r,J0e,Bi,v,t,x)}const tge=ot(It,["color","scale"]),nge=ot(It,{color:qe(OE),scale:qe(S7)});function rge(n,e,t){const r={node:n},i={},s=e.getFill();s&&(i.color=s.getColor());const a=e.getScale();a&&a!==1&&(i.scale=a);const o=t[t.length-1].node,l=tge[o.namespaceURI],u=Ts(i,l);zn(r,nge,Bi,u,t,l)}const ige=ot(It,["color","width"]),sge=ot(It,{color:qe(OE),width:qe(fs)});function age(n,e,t){const r={node:n},i={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,a=ige[s.namespaceURI],o=Ts(i,a);zn(r,sge,Bi,o,t,a)}const oge={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},x7=function(n,e,t){if(n){const r=e[e.length-1].node;return hd(r.namespaceURI,oge[n.getType()])}},lge=oo("Point"),cge=oo("LineString"),uge=oo("LinearRing"),hge=oo("Polygon"),dge=ot(It,{LineString:qe(Yf),Point:qe(Yf),Polygon:qe(w7),GeometryCollection:qe(v7)});function v7(n,e,t){const r={node:n},i=e.getType();let s=[],a;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(o){const l=o.getType();if(l==="MultiPoint")s=s.concat(o.getPoints());else if(l==="MultiLineString")s=s.concat(o.getLineStrings());else if(l==="MultiPolygon")s=s.concat(o.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(o);else throw new Error("Unknown geometry type")}),a=x7;else if(i==="MultiPoint")s=e.getPoints(),a=lge;else if(i==="MultiLineString")s=e.getLineStrings(),a=cge;else if(i==="MultiPolygon")s=e.getPolygons(),a=hge;else throw new Error("Unknown geometry type");zn(r,dge,a,s,t)}const fge=ot(It,{LinearRing:qe(Yf)});function zL(n,e,t){zn({node:n},fge,uge,[e],t)}const MS=ot(It,{ExtendedData:qe(X0e),MultiGeometry:qe(v7),LineString:qe(Yf),LinearRing:qe(Yf),Point:qe(Yf),Polygon:qe(w7),Style:qe(Ige),address:qe(wn),description:qe(wn),name:qe(wn),open:qe(A0),phoneNumber:qe(wn),styleUrl:qe(wn),visibility:qe(A0)}),gge=ot(It,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),mge=oo("ExtendedData");function E7(n,e,t){const r={node:n};e.getId()&&n.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const a=Object.keys(i||{}).sort().filter(function(p){return!s[p]}),o=e.getStyleFunction();if(o){const p=o(e,0);if(p){const x=Array.isArray(p)?p:[p];let v=x;if(e.getGeometry()&&(v=x.filter(function(w){const T=w.getGeometryFunction()(e);if(T){const I=T.getType();return I==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(A){const N=A.getType();return N==="Point"||N==="MultiPoint"}).length:I==="Point"||I==="MultiPoint"}})),this.writeStyles_){let w=x,T=x;e.getGeometry()&&(w=x.filter(function(I){const A=I.getGeometryFunction()(e);if(A){const N=A.getType();return N==="GeometryCollection"?A.getGeometriesArrayRecursive().filter(function(D){const B=D.getType();return B==="LineString"||B==="MultiLineString"}).length:N==="LineString"||N==="MultiLineString"}}),T=x.filter(function(I){const A=I.getGeometryFunction()(e);if(A){const N=A.getType();return N==="GeometryCollection"?A.getGeometriesArrayRecursive().filter(function(D){const B=D.getType();return B==="Polygon"||B==="MultiPolygon"}).length:N==="Polygon"||N==="MultiPolygon"}})),i.Style={pointStyles:v,lineStyles:w,polyStyles:T}}if(v.length&&i.name===void 0){const w=v[0].getText();w&&(i.name=w.getText())}}}const l=t[t.length-1].node,u=gge[l.namespaceURI],h=Ts(i,u);if(zn(r,MS,Bi,h,t,u),a.length>0){const p=Ts(i,a);zn(r,MS,mge,[{names:a,values:p}],t)}const f=t[0];let g=e.getGeometry();g&&(g=so(g,!0,f)),zn(r,MS,x7,[g],t)}const pge=ot(It,["extrude","tessellate","altitudeMode","coordinates"]),yge=ot(It,{extrude:qe(A0),tessellate:qe(A0),altitudeMode:qe(wn),coordinates:qe(B0e)});function Yf(n,e,t){const r=e.getFlatCoordinates(),i={node:n};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const a=t[t.length-1].node,o=pge[a.namespaceURI],l=Ts(s,o);zn(i,yge,Bi,l,t,o)}const _ge=ot(It,["color","fill","outline"]),$L=ot(It,{outerBoundaryIs:qe(zL),innerBoundaryIs:qe(zL)}),xge=oo("innerBoundaryIs"),vge=oo("outerBoundaryIs");function w7(n,e,t){const r=e.getLinearRings(),i=r.shift(),s={node:n};zn(s,$L,xge,r,t),zn(s,$L,vge,[i],t)}const Ege=ot(It,{color:qe(OE),fill:qe(A0),outline:qe(A0)});function wge(n,e,t){const r={node:n},i=e.getFill(),s=e.getStroke(),a={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},o=t[t.length-1].node,l=_ge[o.namespaceURI],u=Ts(a,l);zn(r,Ege,Bi,u,t,l)}function S7(n,e){fs(n,Math.round(e*1e6)/1e6)}const Sge=ot(It,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Tge=ot(It,{IconStyle:qe(ege),LabelStyle:qe(rge),LineStyle:qe(age),PolyStyle:qe(wge)});function Ige(n,e,t){const r={node:n},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(i.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,a=Sge[s.namespaceURI],o=Ts(i,a);zn(r,Tge,Bi,o,t,a)}function Age(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}function T7(n){const e=Object.keys(n.defs),t=e.length;let r,i;for(r=0;r<t;++r){const s=e[r];if(!x_(s)){const a=n.defs(s);let o=a.units;!o&&a.projName==="longlat"&&(o="degrees"),J_(new Rv({code:s,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:o}))}}for(r=0;r<t;++r){const s=e[r],a=x_(s);for(i=0;i<t;++i){const o=e[i],l=x_(o);if(!v_(s,o))if(n.defs[s]===n.defs[o])qS([a,l]);else{const u=n(s,o);hU(a,l,U4(a,l,u.forward),U4(l,a,u.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");gn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");T7(gn);let vh=null,Lm=null,Sf=null;function LI(n){vh&&(n.removeLayer(vh),vh=null),Lm&&(n.removeLayer(Lm),Lm=null),Sf=null}async function bge(n,e){try{const t=fn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${t[0].toFixed(5)}, ${t[1].toFixed(5)}`);const r=gn("EPSG:4326","EPSG:28992",t);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;LI(n);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,a=Date.now(),o=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${a}`;console.log(" WFS URL:",o);const l=new AbortController,u=setTimeout(()=>l.abort(),1e4),h=await fetch(o,{signal:l.signal});if(clearTimeout(u),!h.ok)return console.error("WFS request failed:",h.status),!1;const f=await h.json();if(console.log(" WFS RESPONSE:",JSON.stringify(f).substring(0,500)),!f.features||f.features.length===0)return console.log("No parcel found at location"),!1;const g=f.features[0];console.log(" PARCEL ID:",g.id||g.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(g.bbox||"geen bbox"));const x=new LR().readFeature(g,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),v=x.getGeometry();if(!v)return console.log("No geometry in parcel feature"),!1;const w=g.properties||{};console.log(` Parcel: ${w.category||"unknown"} - ${w.gewasnaam||w.gewas||"geen gewas"}`),console.log(` Geometry type: ${v.getType()}, extent: ${v.getExtent().map(M=>M.toFixed(0)).join(", ")}`);const T=v.getExtent(),I=T[2]-T[0],A=T[3]-T[1],N=Math.max(I,A)*.05,D=[T[0]-N,T[1]-N,T[2]+N,T[3]+N],B=Math.max(I,A)*.3,k=[T[0]-B,T[1]-B,T[2]+B,T[3]+B];Sf=v,vh=new sW({source:new MW({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:D,zIndex:998}),vh.on("prerender",M=>{if(!Sf)return;const j=M.context;if(!j)return;const O=M.frameState;if(!O)return;j.save(),j.beginPath(),(Sf.getType()==="Polygon"?Sf.getCoordinates()[0]:Sf.getCoordinates()[0][0]).forEach((F,Te)=>{const Me=n.getPixelFromCoordinate(F);if(!Me)return;const Le=O.pixelRatio,be=Me[0]*Le,ce=Me[1]*Le;Te===0?j.moveTo(be,ce):j.lineTo(be,ce)}),j.closePath(),j.clip()}),vh.on("postrender",M=>{const j=M.context;j&&j.restore()}),n.addLayer(vh);const P=new $p({features:[x]});return Lm=new Xp({source:P,style:new ur({fill:new oi({color:"rgba(0, 0, 0, 0)"}),stroke:new xs({color:"#dc2626",width:3})}),zIndex:999}),n.addLayer(Lm),console.log(" Parcel height map displayed"),!0}catch(t){return console.error("Failed to show parcel height map:",t),!1}}var ov={};ov.version="0.18.5";var I7=1252,Rge=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],A7=function(n){Rge.indexOf(n)!=-1&&(I7=n)};function Cge(){A7(1252)}var bp=function(n){A7(n)};function Pge(){bp(1200),Cge()}var u_=function(e){return String.fromCharCode(e)},WL=function(e){return String.fromCharCode(e)},lv,Hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Rp(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),e+=Hc.charAt(s)+Hc.charAt(a)+Hc.charAt(o)+Hc.charAt(l);return e}function Ul(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Hc.indexOf(n.charAt(u++)),a=Hc.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Hc.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Hc.indexOf(n.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var En=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Xl=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Zh(n){return En?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function HL(n){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Wa=function(e){return En?Xl(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function DE(n){if(typeof ArrayBuffer>"u")return Wa(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function I1(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function kge(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var vi=En?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:Xl(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Mge(n){for(var e=[],t=0,r=n.length+250,i=Zh(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Zh(65535),r=65530)}return e.push(i.slice(0,t)),vi(e)}var Om=/\u0000/g,h_=/[\u0001-\u0006]/g;function Xf(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Ya(n,e){var t=""+n;return t.length>=e?t:pr("0",e-t.length)+t}function $R(n,e){var t=""+n;return t.length>=e?t:pr(" ",e-t.length)+t}function cv(n,e){var t=""+n;return t.length>=e?t:t+pr(" ",e-t.length)}function Nge(n,e){var t=""+Math.round(n);return t.length>=e?t:pr("0",e-t.length)+t}function Lge(n,e){var t=""+n;return t.length>=e?t:pr("0",e-t.length)+t}var KL=Math.pow(2,32);function lf(n,e){if(n>KL||n<-KL)return Nge(n,e);var t=Math.round(n);return Lge(t,e)}function uv(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var YL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],NS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Oge(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var _r={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},XL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Dge={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function hv(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,l=1,u=0,h=0,f=Math.floor(i);u<e&&(f=Math.floor(i),o=f*a+s,h=f*u+l,!(i-f<5e-8));)i=1/(i-f),s=a,a=o,l=u,u=h;if(h>e&&(u>e?(h=l,o=s):(h=u,o=a)),!t)return[0,r*o,h];var g=Math.floor(r*o/h);return[g,r*o-g*h,h]}function d_(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),t&&(s=zge(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var b7=new Date(1899,11,31,0,0,0),Fge=b7.getTime(),jge=new Date(1900,2,1,0,0,0);function R7(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=jge&&(t+=1440*60*1e3),(t-(Fge+(n.getTimezoneOffset()-b7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function WR(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Vge(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Gge(n){var e=n<0?12:11,t=WR(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function Bge(n){var e=WR(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function Uge(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=Gge(n):e===10?t=n.toFixed(10).substr(0,12):t=Bge(n),WR(Vge(t.toUpperCase()))}function OI(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):Uge(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return pu(14,R7(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function zge(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function $ge(n,e,t,r){var i="",s=0,a=0,o=t.y,l,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,u=e.length;break;case 3:return NS[t.m-1][1];case 5:return NS[t.m-1][0];default:return NS[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,u=e.length;break;case 3:return YL[t.q][0];default:return YL[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Ya(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Ya(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var h=u>0?Ya(l,u):"";return h}function Kc(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var C7=/%/g;function Wge(n,e,t){var r=e.replace(C7,""),i=e.length-r.length;return Ml(n,r,t*Math.pow(10,2*i))+pr("%",i)}function Hge(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Ml(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function P7(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+P7(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var k7=/# (\?+)( ?)\/( ?)(\d+)/;function Kge(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?pr(" ",n[1].length+1+n[4].length):$R(a,n[1].length)+n[2]+"/"+n[3]+Ya(o,n[4].length))}function Yge(n,e,t){return t+(e===0?"":""+e)+pr(" ",n[1].length+2+n[4].length)}var M7=/^#*0*\.([0#]+)/,N7=/\).*[0#]/,L7=/\(###\) ###\\?-####/;function Yi(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function qL(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function ZL(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function Xge(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function qge(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function da(n,e,t){if(n.charCodeAt(0)===40&&!e.match(N7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?da("n",r,t):"("+da("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return Hge(n,e,t);if(e.indexOf("%")!==-1)return Wge(n,e,t);if(e.indexOf("E")!==-1)return P7(e,t);if(e.charCodeAt(0)===36)return"$"+da(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+lf(l,e.length);if(e.match(/^[#?]+$/))return i=lf(t,0),i==="0"&&(i=""),i.length>e.length?i:Yi(e.substr(0,e.length-i.length))+i;if(s=e.match(k7))return Kge(s,l,u);if(e.match(/^#+0+$/))return u+lf(l,e.length-e.indexOf("0"));if(s=e.match(M7))return i=qL(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Yi(s[1])).replace(/\.$/,"."+Yi(s[1])).replace(/\.(\d*)$/,function(x,v){return"."+v+pr("0",Yi(s[1]).length-v.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+qL(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Kc(lf(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+da(n,e,-t):Kc(""+(Math.floor(t)+Xge(t,s[1].length)))+"."+Ya(ZL(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return da(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Xf(da(n,e.replace(/[\\-]/g,""),t)),a=0,Xf(Xf(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(L7))return i=da(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=hv(l,Math.pow(10,a)-1,!1),i=""+u,h=Ml("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=cv(o[2],a),h.length<s[4].length&&(h=Yi(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=hv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?$R(o[1],a)+s[2]+"/"+s[3]+cv(o[2],a):pr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=lf(t,0),e.length<=i.length?i:Yi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,g=e.length-i.length-f;return Yi(e.substr(0,f)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=ZL(t,s[1].length),t<0?"-"+da(n,e,-t):Kc(qge(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Ya(0,3-x.length):"")+x})+"."+Ya(a,s[1].length);switch(e){case"###,##0.00":return da(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=Kc(lf(l,0));return p!=="0"?u+p:"";case"###,###.00":return da(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return da(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Zge(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Ml(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function Qge(n,e,t){var r=e.replace(C7,""),i=e.length-r.length;return Ml(n,r,t*Math.pow(10,2*i))+pr("%",i)}function O7(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+O7(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Io(n,e,t){if(n.charCodeAt(0)===40&&!e.match(N7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Io("n",r,t):"("+Io("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return Zge(n,e,t);if(e.indexOf("%")!==-1)return Qge(n,e,t);if(e.indexOf("E")!==-1)return O7(e,t);if(e.charCodeAt(0)===36)return"$"+Io(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Ya(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Yi(e.substr(0,e.length-i.length))+i;if(s=e.match(k7))return Yge(s,l,u);if(e.match(/^#+0+$/))return u+Ya(l,e.length-e.indexOf("0"));if(s=e.match(M7))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Yi(s[1])).replace(/\.$/,"."+Yi(s[1])),i=i.replace(/\.(\d*)$/,function(x,v){return"."+v+pr("0",Yi(s[1]).length-v.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Kc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Io(n,e,-t):Kc(""+t)+"."+pr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Io(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Xf(Io(n,e.replace(/[\\-]/g,""),t)),a=0,Xf(Xf(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(L7))return i=Io(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=hv(l,Math.pow(10,a)-1,!1),i=""+u,h=Ml("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=cv(o[2],a),h.length<s[4].length&&(h=Yi(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=hv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?$R(o[1],a)+s[2]+"/"+s[3]+cv(o[2],a):pr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Yi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,g=e.length-i.length-f;return Yi(e.substr(0,f)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Io(n,e,-t):Kc(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Ya(0,3-x.length):"")+x})+"."+Ya(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Kc(""+l);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return Io(n,e.slice(0,e.lastIndexOf(".")),t)+Yi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ml(n,e,t){return(t|0)===t?Io(n,e,t):da(n,e,t)}function Jge(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var D7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function F7(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":uv(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(D7))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function eme(n,e,t,r){for(var i=[],s="",a=0,o="",l="t",u,h,f,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!uv(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(f=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(f);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=n.charAt(++a),x=p==="("||p===")"?p:"t";i[i.length]={t:x,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=d_(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=d_(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(u==null&&(u=d_(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(v.v=u.H>=12?"":""),v.t="T",a+=5,g="h"):(v.t="t",++a),u==null&&v.t==="T")return"";i[i.length]=v,l=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(D7)){if(u==null&&(u=d_(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",F7(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var w=0,T=0,I;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",w<1&&(w=1);break;case"s":(I=i[a].v.match(/\.0+$/))&&(T=Math.max(T,I[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&i[a].v.match(/[Hh]/)&&(w=1),w<2&&i[a].v.match(/[Mm]/)&&(w=2),w<3&&i[a].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var A="",N;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=$ge(i[a].t.charCodeAt(0),i[a].v,u,T),i[a].t="t";break;case"n":case"?":for(N=a+1;i[N]!=null&&((o=i[N].t)==="?"||o==="D"||(o===" "||o==="t")&&i[N+1]!=null&&(i[N+1].t==="?"||i[N+1].t==="t"&&i[N+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[N].v==="/"||i[N].v===" "&&i[N+1]!=null&&i[N+1].t=="?"));)i[a].v+=i[N].v,i[N]={v:"",t:";"},++N;A+=i[a].v,a=N-1;break;case"G":i[a].t="t",i[a].v=OI(e,t);break}var D="",B,k;if(A.length>0){A.charCodeAt(0)==40?(B=e<0&&A.charCodeAt(0)===45?-e:e,k=Ml("n",A,B)):(B=e<0&&r>1?-e:e,k=Ml("n",A,B),B<0&&i[0]&&i[0].t=="t"&&(k=k.substr(1),i[0].v="-"+i[0].v)),N=k.length-1;var P=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){P=a;break}var M=i.length;if(P===i.length&&k.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(N>=i[a].v.length-1?(N-=i[a].v.length,i[a].v=k.substr(N+1,i[a].v.length)):N<0?i[a].v="":(i[a].v=k.substr(0,N+1),N=-1),i[a].t="t",M=a);N>=0&&M<i.length&&(i[M].v=k.substr(0,N+1)+i[M].v)}else if(P!==i.length&&k.indexOf("E")===-1){for(N=k.indexOf(".")-1,a=P;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(h=i[a].v.indexOf(".")>-1&&a===P?i[a].v.indexOf(".")-1:i[a].v.length-1,D=i[a].v.substr(h+1);h>=0;--h)N>=0&&(i[a].v.charAt(h)==="0"||i[a].v.charAt(h)==="#")&&(D=k.charAt(N--)+D);i[a].v=D,i[a].t="t",M=a}for(N>=0&&M<i.length&&(i[M].v=k.substr(0,N+1)+i[M].v),N=k.indexOf(".")+1,a=P;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==P)){for(h=i[a].v.indexOf(".")>-1&&a===P?i[a].v.indexOf(".")+1:0,D=i[a].v.substr(0,h);h<i[a].v.length;++h)N<k.length&&(D+=k.charAt(N++));i[a].v=D,i[a].t="t",M=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(B=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Ml(i[a].t,i[a].v,B),i[a].t="t");var j="";for(a=0;a!==i.length;++a)i[a]!=null&&(j+=i[a].v);return j}var QL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function JL(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function tme(n,e){var t=Jge(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(QL),o=t[1].match(QL);return JL(e,a)?[r,t[0]]:JL(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function pu(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:_r)[n],r==null&&(r=t.table&&t.table[XL[n]]||_r[XL[n]]),r==null&&(r=Dge[n]||"General");break}if(uv(r,0))return OI(e,t);e instanceof Date&&(e=R7(e,t.date1904));var i=tme(r,e);if(uv(i[1]))return OI(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return eme(i[1],e,t,i[0])}function j7(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(_r[t]==null){e<0&&(e=t);continue}if(_r[t]==n){e=t;break}}e<0&&(e=391)}return _r[e]=n,e}function FE(n){for(var e=0;e!=392;++e)n[e]!==void 0&&j7(n[e],e)}function jE(){_r=Oge()}var V7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function nme(n){var e=typeof n=="number"?_r[n]:n;return e=e.replace(V7,"(\\d+)"),new RegExp("^"+e+"$")}function rme(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(V7)||[]).forEach(function(f,g){var p=parseInt(t[g+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:i=p;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:r==-1&&i==-1&&s==-1?h:u+"T"+h}var ime=(function(){var n={};n.version="1.2.0";function e(){for(var k=0,P=new Array(256),M=0;M!=256;++M)k=M,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,P[M]=k;return typeof Int32Array<"u"?new Int32Array(P):P}var t=e();function r(k){var P=0,M=0,j=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(j=0;j!=256;++j)O[j]=k[j];for(j=0;j!=256;++j)for(M=k[j],P=256+j;P<4096;P+=256)M=O[P]=M>>>8^k[M&255];var W=[];for(j=1;j!=16;++j)W[j-1]=typeof Int32Array<"u"?O.subarray(j*256,j*256+256):O.slice(j*256,j*256+256);return W}var i=r(t),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],h=i[5],f=i[6],g=i[7],p=i[8],x=i[9],v=i[10],w=i[11],T=i[12],I=i[13],A=i[14];function N(k,P){for(var M=P^-1,j=0,O=k.length;j<O;)M=M>>>8^t[(M^k.charCodeAt(j++))&255];return~M}function D(k,P){for(var M=P^-1,j=k.length-15,O=0;O<j;)M=A[k[O++]^M&255]^I[k[O++]^M>>8&255]^T[k[O++]^M>>16&255]^w[k[O++]^M>>>24]^v[k[O++]]^x[k[O++]]^p[k[O++]]^g[k[O++]]^f[k[O++]]^h[k[O++]]^u[k[O++]]^l[k[O++]]^o[k[O++]]^a[k[O++]]^s[k[O++]]^t[k[O++]];for(j+=15;O<j;)M=M>>>8^t[(M^k[O++])&255];return~M}function B(k,P){for(var M=P^-1,j=0,O=k.length,W=0,F=0;j<O;)W=k.charCodeAt(j++),W<128?M=M>>>8^t[(M^W)&255]:W<2048?(M=M>>>8^t[(M^(192|W>>6&31))&255],M=M>>>8^t[(M^(128|W&63))&255]):W>=55296&&W<57344?(W=(W&1023)+64,F=k.charCodeAt(j++)&1023,M=M>>>8^t[(M^(240|W>>8&7))&255],M=M>>>8^t[(M^(128|W>>2&63))&255],M=M>>>8^t[(M^(128|F>>6&15|(W&3)<<4))&255],M=M>>>8^t[(M^(128|F&63))&255]):(M=M>>>8^t[(M^(224|W>>12&15))&255],M=M>>>8^t[(M^(128|W>>6&63))&255],M=M>>>8^t[(M^(128|W&63))&255]);return~M}return n.table=t,n.bstr=N,n.buf=D,n.str=B,n})(),Gn=(function(){var e={};e.version="1.2.1";function t(U,Z){for(var K=U.split("/"),X=Z.split("/"),Q=0,J=0,pe=Math.min(K.length,X.length);Q<pe;++Q){if(J=K[Q].length-X[Q].length)return J;if(K[Q]!=X[Q])return K[Q]<X[Q]?-1:1}return K.length-X.length}function r(U){if(U.charAt(U.length-1)=="/")return U.slice(0,-1).indexOf("/")===-1?U:r(U.slice(0,-1));var Z=U.lastIndexOf("/");return Z===-1?U:U.slice(0,Z+1)}function i(U){if(U.charAt(U.length-1)=="/")return i(U.slice(0,-1));var Z=U.lastIndexOf("/");return Z===-1?U:U.slice(Z+1)}function s(U,Z){typeof Z=="string"&&(Z=new Date(Z));var K=Z.getHours();K=K<<6|Z.getMinutes(),K=K<<5|Z.getSeconds()>>>1,U.write_shift(2,K);var X=Z.getFullYear()-1980;X=X<<4|Z.getMonth()+1,X=X<<5|Z.getDate(),U.write_shift(2,X)}function a(U){var Z=U.read_shift(2)&65535,K=U.read_shift(2)&65535,X=new Date,Q=K&31;K>>>=5;var J=K&15;K>>>=4,X.setMilliseconds(0),X.setFullYear(K+1980),X.setMonth(J-1),X.setDate(Q);var pe=Z&31;Z>>>=5;var Pe=Z&63;return Z>>>=6,X.setHours(Z),X.setMinutes(Pe),X.setSeconds(pe<<1),X}function o(U){Us(U,0);for(var Z={},K=0;U.l<=U.length-4;){var X=U.read_shift(2),Q=U.read_shift(2),J=U.l+Q,pe={};switch(X){case 21589:K=U.read_shift(1),K&1&&(pe.mtime=U.read_shift(4)),Q>5&&(K&2&&(pe.atime=U.read_shift(4)),K&4&&(pe.ctime=U.read_shift(4))),pe.mtime&&(pe.mt=new Date(pe.mtime*1e3));break}U.l=J,Z[X]=pe}return Z}var l;function u(){return l||(l={})}function h(U,Z){if(U[0]==80&&U[1]==75)return Ar(U,Z);if((U[0]|32)==109&&(U[1]|32)==105)return Gr(U,Z);if(U.length<512)throw new Error("CFB file size "+U.length+" < 512");var K=3,X=512,Q=0,J=0,pe=0,Pe=0,me=0,_e=[],xe=U.slice(0,512);Us(xe,0);var We=f(xe);switch(K=We[0],K){case 3:X=512;break;case 4:X=4096;break;case 0:if(We[1]==0)return Ar(U,Z);default:throw new Error("Major Version: Expected 3 or 4 saw "+K)}X!==512&&(xe=U.slice(0,X),Us(xe,28));var et=U.slice(0,X);g(xe,K);var ut=xe.read_shift(4,"i");if(K===3&&ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ut);xe.l+=4,pe=xe.read_shift(4,"i"),xe.l+=4,xe.chk("00100000","Mini Stream Cutoff Size: "),Pe=xe.read_shift(4,"i"),Q=xe.read_shift(4,"i"),me=xe.read_shift(4,"i"),J=xe.read_shift(4,"i");for(var He=-1,Ke=0;Ke<109&&(He=xe.read_shift(4,"i"),!(He<0));++Ke)_e[Ke]=He;var Vt=p(U,X);w(me,J,Vt,X,_e);var In=I(Vt,pe,_e,X);In[pe].name="!Directory",Q>0&&Pe!==F&&(In[Pe].name="!MiniFAT"),In[_e[0]].name="!FAT",In.fat_addrs=_e,In.ssz=X;var Pn={},Qn=[],Ra=[],na=[];A(pe,In,Vt,Qn,Q,Pn,Ra,Pe),x(Ra,na,Qn),Qn.shift();var Ms={FileIndex:Ra,FullPaths:na};return Z&&Z.raw&&(Ms.raw={header:et,sectors:Vt}),Ms}function f(U){if(U[U.l]==80&&U[U.l+1]==75)return[0,0];U.chk(Te,"Header Signature: "),U.l+=16;var Z=U.read_shift(2,"u");return[U.read_shift(2,"u"),Z]}function g(U,Z){var K=9;switch(U.l+=2,K=U.read_shift(2)){case 9:if(Z!=3)throw new Error("Sector Shift: Expected 9 saw "+K);break;case 12:if(Z!=4)throw new Error("Sector Shift: Expected 12 saw "+K);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+K)}U.chk("0600","Mini Sector Shift: "),U.chk("000000000000","Reserved: ")}function p(U,Z){for(var K=Math.ceil(U.length/Z)-1,X=[],Q=1;Q<K;++Q)X[Q-1]=U.slice(Q*Z,(Q+1)*Z);return X[K-1]=U.slice(K*Z),X}function x(U,Z,K){for(var X=0,Q=0,J=0,pe=0,Pe=0,me=K.length,_e=[],xe=[];X<me;++X)_e[X]=xe[X]=X,Z[X]=K[X];for(;Pe<xe.length;++Pe)X=xe[Pe],Q=U[X].L,J=U[X].R,pe=U[X].C,_e[X]===X&&(Q!==-1&&_e[Q]!==Q&&(_e[X]=_e[Q]),J!==-1&&_e[J]!==J&&(_e[X]=_e[J])),pe!==-1&&(_e[pe]=X),Q!==-1&&X!=_e[X]&&(_e[Q]=_e[X],xe.lastIndexOf(Q)<Pe&&xe.push(Q)),J!==-1&&X!=_e[X]&&(_e[J]=_e[X],xe.lastIndexOf(J)<Pe&&xe.push(J));for(X=1;X<me;++X)_e[X]===X&&(J!==-1&&_e[J]!==J?_e[X]=_e[J]:Q!==-1&&_e[Q]!==Q&&(_e[X]=_e[Q]));for(X=1;X<me;++X)if(U[X].type!==0){if(Pe=X,Pe!=_e[Pe])do Pe=_e[Pe],Z[X]=Z[Pe]+"/"+Z[X];while(Pe!==0&&_e[Pe]!==-1&&Pe!=_e[Pe]);_e[X]=-1}for(Z[0]+="/",X=1;X<me;++X)U[X].type!==2&&(Z[X]+="/")}function v(U,Z,K){for(var X=U.start,Q=U.size,J=[],pe=X;K&&Q>0&&pe>=0;)J.push(Z.slice(pe*W,pe*W+W)),Q-=W,pe=hh(K,pe*4);return J.length===0?Ce(0):vi(J).slice(0,U.size)}function w(U,Z,K,X,Q){var J=F;if(U===F){if(Z!==0)throw new Error("DIFAT chain shorter than expected")}else if(U!==-1){var pe=K[U],Pe=(X>>>2)-1;if(!pe)return;for(var me=0;me<Pe&&(J=hh(pe,me*4))!==F;++me)Q.push(J);w(hh(pe,X-4),Z-1,K,X,Q)}}function T(U,Z,K,X,Q){var J=[],pe=[];Q||(Q=[]);var Pe=X-1,me=0,_e=0;for(me=Z;me>=0;){Q[me]=!0,J[J.length]=me,pe.push(U[me]);var xe=K[Math.floor(me*4/X)];if(_e=me*4&Pe,X<4+_e)throw new Error("FAT boundary crossed: "+me+" 4 "+X);if(!U[xe])break;me=hh(U[xe],_e)}return{nodes:J,data:oO([pe])}}function I(U,Z,K,X){var Q=U.length,J=[],pe=[],Pe=[],me=[],_e=X-1,xe=0,We=0,et=0,ut=0;for(xe=0;xe<Q;++xe)if(Pe=[],et=xe+Z,et>=Q&&(et-=Q),!pe[et]){me=[];var He=[];for(We=et;We>=0;){He[We]=!0,pe[We]=!0,Pe[Pe.length]=We,me.push(U[We]);var Ke=K[Math.floor(We*4/X)];if(ut=We*4&_e,X<4+ut)throw new Error("FAT boundary crossed: "+We+" 4 "+X);if(!U[Ke]||(We=hh(U[Ke],ut),He[We]))break}J[et]={nodes:Pe,data:oO([me])}}return J}function A(U,Z,K,X,Q,J,pe,Pe){for(var me=0,_e=X.length?2:0,xe=Z[U].data,We=0,et=0,ut;We<xe.length;We+=128){var He=xe.slice(We,We+128);Us(He,64),et=He.read_shift(2),ut=qR(He,0,et-_e),X.push(ut);var Ke={name:ut,type:He.read_shift(1),color:He.read_shift(1),L:He.read_shift(4,"i"),R:He.read_shift(4,"i"),C:He.read_shift(4,"i"),clsid:He.read_shift(16),state:He.read_shift(4,"i"),start:0,size:0},Vt=He.read_shift(2)+He.read_shift(2)+He.read_shift(2)+He.read_shift(2);Vt!==0&&(Ke.ct=N(He,He.l-8));var In=He.read_shift(2)+He.read_shift(2)+He.read_shift(2)+He.read_shift(2);In!==0&&(Ke.mt=N(He,He.l-8)),Ke.start=He.read_shift(4,"i"),Ke.size=He.read_shift(4,"i"),Ke.size<0&&Ke.start<0&&(Ke.size=Ke.type=0,Ke.start=F,Ke.name=""),Ke.type===5?(me=Ke.start,Q>0&&me!==F&&(Z[me].name="!StreamData")):Ke.size>=4096?(Ke.storage="fat",Z[Ke.start]===void 0&&(Z[Ke.start]=T(K,Ke.start,Z.fat_addrs,Z.ssz)),Z[Ke.start].name=Ke.name,Ke.content=Z[Ke.start].data.slice(0,Ke.size)):(Ke.storage="minifat",Ke.size<0?Ke.size=0:me!==F&&Ke.start!==F&&Z[me]&&(Ke.content=v(Ke,Z[me].data,(Z[Pe]||{}).data))),Ke.content&&Us(Ke.content,0),J[ut]=Ke,pe.push(Ke)}}function N(U,Z){return new Date((Hs(U,Z+4)/1e7*Math.pow(2,32)+Hs(U,Z)/1e7-11644473600)*1e3)}function D(U,Z){return u(),h(l.readFileSync(U),Z)}function B(U,Z){var K=Z&&Z.type;switch(K||En&&Buffer.isBuffer(U)&&(K="buffer"),K||"base64"){case"file":return D(U,Z);case"base64":return h(Wa(Ul(U)),Z);case"binary":return h(Wa(U),Z)}return h(U,Z)}function k(U,Z){var K=Z||{},X=K.root||"Root Entry";if(U.FullPaths||(U.FullPaths=[]),U.FileIndex||(U.FileIndex=[]),U.FullPaths.length!==U.FileIndex.length)throw new Error("inconsistent CFB structure");U.FullPaths.length===0&&(U.FullPaths[0]=X+"/",U.FileIndex[0]={name:X,type:5}),K.CLSID&&(U.FileIndex[0].clsid=K.CLSID),P(U)}function P(U){var Z="Sh33tJ5";if(!Gn.find(U,"/"+Z)){var K=Ce(4);K[0]=55,K[1]=K[3]=50,K[2]=54,U.FileIndex.push({name:Z,type:2,content:K,size:4,L:69,R:69,C:69}),U.FullPaths.push(U.FullPaths[0]+Z),M(U)}}function M(U,Z){k(U);for(var K=!1,X=!1,Q=U.FullPaths.length-1;Q>=0;--Q){var J=U.FileIndex[Q];switch(J.type){case 0:X?K=!0:(U.FileIndex.pop(),U.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(J.R*J.L*J.C)&&(K=!0),J.R>-1&&J.L>-1&&J.R==J.L&&(K=!0);break;default:K=!0;break}}if(!(!K&&!Z)){var pe=new Date(1987,1,19),Pe=0,me=Object.create?Object.create(null):{},_e=[];for(Q=0;Q<U.FullPaths.length;++Q)me[U.FullPaths[Q]]=!0,U.FileIndex[Q].type!==0&&_e.push([U.FullPaths[Q],U.FileIndex[Q]]);for(Q=0;Q<_e.length;++Q){var xe=r(_e[Q][0]);X=me[xe],X||(_e.push([xe,{name:i(xe).replace("/",""),type:1,clsid:Le,ct:pe,mt:pe,content:null}]),me[xe]=!0)}for(_e.sort(function(ut,He){return t(ut[0],He[0])}),U.FullPaths=[],U.FileIndex=[],Q=0;Q<_e.length;++Q)U.FullPaths[Q]=_e[Q][0],U.FileIndex[Q]=_e[Q][1];for(Q=0;Q<_e.length;++Q){var We=U.FileIndex[Q],et=U.FullPaths[Q];if(We.name=i(et).replace("/",""),We.L=We.R=We.C=-(We.color=1),We.size=We.content?We.content.length:0,We.start=0,We.clsid=We.clsid||Le,Q===0)We.C=_e.length>1?1:-1,We.size=0,We.type=5;else if(et.slice(-1)=="/"){for(Pe=Q+1;Pe<_e.length&&r(U.FullPaths[Pe])!=et;++Pe);for(We.C=Pe>=_e.length?-1:Pe,Pe=Q+1;Pe<_e.length&&r(U.FullPaths[Pe])!=r(et);++Pe);We.R=Pe>=_e.length?-1:Pe,We.type=1}else r(U.FullPaths[Q+1]||"")==r(et)&&(We.R=Q+1),We.type=2}}}function j(U,Z){var K=Z||{};if(K.fileType=="mad")return Br(U,K);switch(M(U),K.fileType){case"zip":return Tn(U,K)}var X=(function(ut){for(var He=0,Ke=0,Vt=0;Vt<ut.FileIndex.length;++Vt){var In=ut.FileIndex[Vt];if(In.content){var Pn=In.content.length;Pn>0&&(Pn<4096?He+=Pn+63>>6:Ke+=Pn+511>>9)}}for(var Qn=ut.FullPaths.length+3>>2,Ra=He+7>>3,na=He+127>>7,Ms=Ra+Ke+Qn+na,vr=Ms+127>>7,ql=vr<=109?0:Math.ceil((vr-109)/127);Ms+vr+ql+127>>7>vr;)ql=++vr<=109?0:Math.ceil((vr-109)/127);var ir=[1,ql,vr,na,Qn,Ke,He,0];return ut.FileIndex[0].size=He<<6,ir[7]=(ut.FileIndex[0].start=ir[0]+ir[1]+ir[2]+ir[3]+ir[4]+ir[5])+(ir[6]+7>>3),ir})(U),Q=Ce(X[7]<<9),J=0,pe=0;{for(J=0;J<8;++J)Q.write_shift(1,Me[J]);for(J=0;J<8;++J)Q.write_shift(2,0);for(Q.write_shift(2,62),Q.write_shift(2,3),Q.write_shift(2,65534),Q.write_shift(2,9),Q.write_shift(2,6),J=0;J<3;++J)Q.write_shift(2,0);for(Q.write_shift(4,0),Q.write_shift(4,X[2]),Q.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),Q.write_shift(4,0),Q.write_shift(4,4096),Q.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:F),Q.write_shift(4,X[3]),Q.write_shift(-4,X[1]?X[0]-1:F),Q.write_shift(4,X[1]),J=0;J<109;++J)Q.write_shift(-4,J<X[2]?X[1]+J:-1)}if(X[1])for(pe=0;pe<X[1];++pe){for(;J<236+pe*127;++J)Q.write_shift(-4,J<X[2]?X[1]+J:-1);Q.write_shift(-4,pe===X[1]-1?F:pe+1)}var Pe=function(ut){for(pe+=ut;J<pe-1;++J)Q.write_shift(-4,J+1);ut&&(++J,Q.write_shift(-4,F))};for(pe=J=0,pe+=X[1];J<pe;++J)Q.write_shift(-4,be.DIFSECT);for(pe+=X[2];J<pe;++J)Q.write_shift(-4,be.FATSECT);Pe(X[3]),Pe(X[4]);for(var me=0,_e=0,xe=U.FileIndex[0];me<U.FileIndex.length;++me)xe=U.FileIndex[me],xe.content&&(_e=xe.content.length,!(_e<4096)&&(xe.start=pe,Pe(_e+511>>9)));for(Pe(X[6]+7>>3);Q.l&511;)Q.write_shift(-4,be.ENDOFCHAIN);for(pe=J=0,me=0;me<U.FileIndex.length;++me)xe=U.FileIndex[me],xe.content&&(_e=xe.content.length,!(!_e||_e>=4096)&&(xe.start=pe,Pe(_e+63>>6)));for(;Q.l&511;)Q.write_shift(-4,be.ENDOFCHAIN);for(J=0;J<X[4]<<2;++J){var We=U.FullPaths[J];if(!We||We.length===0){for(me=0;me<17;++me)Q.write_shift(4,0);for(me=0;me<3;++me)Q.write_shift(4,-1);for(me=0;me<12;++me)Q.write_shift(4,0);continue}xe=U.FileIndex[J],J===0&&(xe.start=xe.size?xe.start-1:F);var et=J===0&&K.root||xe.name;if(_e=2*(et.length+1),Q.write_shift(64,et,"utf16le"),Q.write_shift(2,_e),Q.write_shift(1,xe.type),Q.write_shift(1,xe.color),Q.write_shift(-4,xe.L),Q.write_shift(-4,xe.R),Q.write_shift(-4,xe.C),xe.clsid)Q.write_shift(16,xe.clsid,"hex");else for(me=0;me<4;++me)Q.write_shift(4,0);Q.write_shift(4,xe.state||0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,xe.start),Q.write_shift(4,xe.size),Q.write_shift(4,0)}for(J=1;J<U.FileIndex.length;++J)if(xe=U.FileIndex[J],xe.size>=4096)if(Q.l=xe.start+1<<9,En&&Buffer.isBuffer(xe.content))xe.content.copy(Q,Q.l,0,xe.size),Q.l+=xe.size+511&-512;else{for(me=0;me<xe.size;++me)Q.write_shift(1,xe.content[me]);for(;me&511;++me)Q.write_shift(1,0)}for(J=1;J<U.FileIndex.length;++J)if(xe=U.FileIndex[J],xe.size>0&&xe.size<4096)if(En&&Buffer.isBuffer(xe.content))xe.content.copy(Q,Q.l,0,xe.size),Q.l+=xe.size+63&-64;else{for(me=0;me<xe.size;++me)Q.write_shift(1,xe.content[me]);for(;me&63;++me)Q.write_shift(1,0)}if(En)Q.l=Q.length;else for(;Q.l<Q.length;)Q.write_shift(1,0);return Q}function O(U,Z){var K=U.FullPaths.map(function(me){return me.toUpperCase()}),X=K.map(function(me){var _e=me.split("/");return _e[_e.length-(me.slice(-1)=="/"?2:1)]}),Q=!1;Z.charCodeAt(0)===47?(Q=!0,Z=K[0].slice(0,-1)+Z):Q=Z.indexOf("/")!==-1;var J=Z.toUpperCase(),pe=Q===!0?K.indexOf(J):X.indexOf(J);if(pe!==-1)return U.FileIndex[pe];var Pe=!J.match(h_);for(J=J.replace(Om,""),Pe&&(J=J.replace(h_,"!")),pe=0;pe<K.length;++pe)if((Pe?K[pe].replace(h_,"!"):K[pe]).replace(Om,"")==J||(Pe?X[pe].replace(h_,"!"):X[pe]).replace(Om,"")==J)return U.FileIndex[pe];return null}var W=64,F=-2,Te="d0cf11e0a1b11ae1",Me=[208,207,17,224,161,177,26,225],Le="00000000000000000000000000000000",be={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:Te,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Le,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(U,Z,K){u();var X=j(U,K);l.writeFileSync(Z,X)}function Re(U){for(var Z=new Array(U.length),K=0;K<U.length;++K)Z[K]=String.fromCharCode(U[K]);return Z.join("")}function Ie(U,Z){var K=j(U,Z);switch(Z&&Z.type||"buffer"){case"file":return u(),l.writeFileSync(Z.filename,K),K;case"binary":return typeof K=="string"?K:Re(K);case"base64":return Rp(typeof K=="string"?K:Re(K));case"buffer":if(En)return Buffer.isBuffer(K)?K:Xl(K);case"array":return typeof K=="string"?Wa(K):K}return K}var ie;function V(U){try{var Z=U.InflateRaw,K=new Z;if(K._processChunk(new Uint8Array([3,0]),K._finishFlushFlag),K.bytesRead)ie=U;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function Y(U,Z){if(!ie)return $i(U,Z);var K=ie.InflateRaw,X=new K,Q=X._processChunk(U.slice(U.l),X._finishFlushFlag);return U.l+=X.bytesRead,Q}function ee(U){return ie?ie.deflateRawSync(U):Ze(U)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],De=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Se(U){var Z=(U<<1|U<<11)&139536|(U<<5|U<<15)&558144;return(Z>>16|Z>>8|Z)&255}for(var Fe=typeof Uint8Array<"u",je=Fe?new Uint8Array(256):[],Qe=0;Qe<256;++Qe)je[Qe]=Se(Qe);function gt(U,Z){var K=je[U&255];return Z<=8?K>>>8-Z:(K=K<<8|je[U>>8&255],Z<=16?K>>>16-Z:(K=K<<8|je[U>>16&255],K>>>24-Z))}function _t(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=6?0:U[X+1]<<8))>>>K&3}function Lt(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=5?0:U[X+1]<<8))>>>K&7}function nn(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=4?0:U[X+1]<<8))>>>K&15}function zt(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=3?0:U[X+1]<<8))>>>K&31}function Oe(U,Z){var K=Z&7,X=Z>>>3;return(U[X]|(K<=1?0:U[X+1]<<8))>>>K&127}function Xt(U,Z,K){var X=Z&7,Q=Z>>>3,J=(1<<K)-1,pe=U[Q]>>>X;return K<8-X||(pe|=U[Q+1]<<8-X,K<16-X)||(pe|=U[Q+2]<<16-X,K<24-X)||(pe|=U[Q+3]<<24-X),pe&J}function Ae(U,Z,K){var X=Z&7,Q=Z>>>3;return X<=5?U[Q]|=(K&7)<<X:(U[Q]|=K<<X&255,U[Q+1]=(K&7)>>8-X),Z+3}function ge(U,Z,K){var X=Z&7,Q=Z>>>3;return K=(K&1)<<X,U[Q]|=K,Z+1}function C(U,Z,K){var X=Z&7,Q=Z>>>3;return K<<=X,U[Q]|=K&255,K>>>=8,U[Q+1]=K,Z+8}function wt(U,Z,K){var X=Z&7,Q=Z>>>3;return K<<=X,U[Q]|=K&255,K>>>=8,U[Q+1]=K&255,U[Q+2]=K>>>8,Z+16}function q(U,Z){var K=U.length,X=2*K>Z?2*K:Z+5,Q=0;if(K>=Z)return U;if(En){var J=HL(X);if(U.copy)U.copy(J);else for(;Q<U.length;++Q)J[Q]=U[Q];return J}else if(Fe){var pe=new Uint8Array(X);if(pe.set)pe.set(U);else for(;Q<K;++Q)pe[Q]=U[Q];return pe}return U.length=X,U}function Ot(U){for(var Z=new Array(U),K=0;K<U;++K)Z[K]=0;return Z}function re(U,Z,K){var X=1,Q=0,J=0,pe=0,Pe=0,me=U.length,_e=Fe?new Uint16Array(32):Ot(32);for(J=0;J<32;++J)_e[J]=0;for(J=me;J<K;++J)U[J]=0;me=U.length;var xe=Fe?new Uint16Array(me):Ot(me);for(J=0;J<me;++J)_e[Q=U[J]]++,X<Q&&(X=Q),xe[J]=0;for(_e[0]=0,J=1;J<=X;++J)_e[J+16]=Pe=Pe+_e[J-1]<<1;for(J=0;J<me;++J)Pe=U[J],Pe!=0&&(xe[J]=_e[Pe+16]++);var We=0;for(J=0;J<me;++J)if(We=U[J],We!=0)for(Pe=gt(xe[J],X)>>X-We,pe=(1<<X+4-We)-1;pe>=0;--pe)Z[Pe|pe<<We]=We&15|J<<4;return X}var z=Fe?new Uint16Array(512):Ot(512),le=Fe?new Uint16Array(32):Ot(32);if(!Fe){for(var Be=0;Be<512;++Be)z[Be]=0;for(Be=0;Be<32;++Be)le[Be]=0}(function(){for(var U=[],Z=0;Z<32;Z++)U.push(5);re(U,le,32);var K=[];for(Z=0;Z<=143;Z++)K.push(8);for(;Z<=255;Z++)K.push(9);for(;Z<=279;Z++)K.push(7);for(;Z<=287;Z++)K.push(8);re(K,z,288)})();var we=(function(){for(var Z=Fe?new Uint8Array(32768):[],K=0,X=0;K<De.length-1;++K)for(;X<De[K+1];++X)Z[X]=K;for(;X<32768;++X)Z[X]=29;var Q=Fe?new Uint8Array(259):[];for(K=0,X=0;K<de.length-1;++K)for(;X<de[K+1];++X)Q[X]=K;function J(Pe,me){for(var _e=0;_e<Pe.length;){var xe=Math.min(65535,Pe.length-_e),We=_e+xe==Pe.length;for(me.write_shift(1,+We),me.write_shift(2,xe),me.write_shift(2,~xe&65535);xe-- >0;)me[me.l++]=Pe[_e++]}return me.l}function pe(Pe,me){for(var _e=0,xe=0,We=Fe?new Uint16Array(32768):[];xe<Pe.length;){var et=Math.min(65535,Pe.length-xe);if(et<10){for(_e=Ae(me,_e,+(xe+et==Pe.length)),_e&7&&(_e+=8-(_e&7)),me.l=_e/8|0,me.write_shift(2,et),me.write_shift(2,~et&65535);et-- >0;)me[me.l++]=Pe[xe++];_e=me.l*8;continue}_e=Ae(me,_e,+(xe+et==Pe.length)+2);for(var ut=0;et-- >0;){var He=Pe[xe];ut=(ut<<5^He)&32767;var Ke=-1,Vt=0;if((Ke=We[ut])&&(Ke|=xe&-32768,Ke>xe&&(Ke-=32768),Ke<xe))for(;Pe[Ke+Vt]==Pe[xe+Vt]&&Vt<250;)++Vt;if(Vt>2){He=Q[Vt],He<=22?_e=C(me,_e,je[He+1]>>1)-1:(C(me,_e,3),_e+=5,C(me,_e,je[He-23]>>5),_e+=3);var In=He<8?0:He-4>>2;In>0&&(wt(me,_e,Vt-de[He]),_e+=In),He=Z[xe-Ke],_e=C(me,_e,je[He]>>3),_e-=3;var Pn=He<4?0:He-2>>1;Pn>0&&(wt(me,_e,xe-Ke-De[He]),_e+=Pn);for(var Qn=0;Qn<Vt;++Qn)We[ut]=xe&32767,ut=(ut<<5^Pe[xe])&32767,++xe;et-=Vt-1}else He<=143?He=He+48:_e=ge(me,_e,1),_e=C(me,_e,je[He]),We[ut]=xe&32767,++xe}_e=C(me,_e,0)-1}return me.l=(_e+7)/8|0,me.l}return function(me,_e){return me.length<8?J(me,_e):pe(me,_e)}})();function Ze(U){var Z=Ce(50+Math.floor(U.length*1.1)),K=we(U,Z);return Z.slice(0,K)}var ht=Fe?new Uint16Array(32768):Ot(32768),Et=Fe?new Uint16Array(32768):Ot(32768),St=Fe?new Uint16Array(128):Ot(128),Rt=1,en=1;function jr(U,Z){var K=zt(U,Z)+257;Z+=5;var X=zt(U,Z)+1;Z+=5;var Q=nn(U,Z)+4;Z+=4;for(var J=0,pe=Fe?new Uint8Array(19):Ot(19),Pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],me=1,_e=Fe?new Uint8Array(8):Ot(8),xe=Fe?new Uint8Array(8):Ot(8),We=pe.length,et=0;et<Q;++et)pe[ne[et]]=J=Lt(U,Z),me<J&&(me=J),_e[J]++,Z+=3;var ut=0;for(_e[0]=0,et=1;et<=me;++et)xe[et]=ut=ut+_e[et-1]<<1;for(et=0;et<We;++et)(ut=pe[et])!=0&&(Pe[et]=xe[ut]++);var He=0;for(et=0;et<We;++et)if(He=pe[et],He!=0){ut=je[Pe[et]]>>8-He;for(var Ke=(1<<7-He)-1;Ke>=0;--Ke)St[ut|Ke<<He]=He&7|et<<3}var Vt=[];for(me=1;Vt.length<K+X;)switch(ut=St[Oe(U,Z)],Z+=ut&7,ut>>>=3){case 16:for(J=3+_t(U,Z),Z+=2,ut=Vt[Vt.length-1];J-- >0;)Vt.push(ut);break;case 17:for(J=3+Lt(U,Z),Z+=3;J-- >0;)Vt.push(0);break;case 18:for(J=11+Oe(U,Z),Z+=7;J-- >0;)Vt.push(0);break;default:Vt.push(ut),me<ut&&(me=ut);break}var In=Vt.slice(0,K),Pn=Vt.slice(K);for(et=K;et<286;++et)In[et]=0;for(et=X;et<30;++et)Pn[et]=0;return Rt=re(In,ht,286),en=re(Pn,Et,30),Z}function Cs(U,Z){if(U[0]==3&&!(U[1]&3))return[Zh(Z),2];for(var K=0,X=0,Q=HL(Z||1<<18),J=0,pe=Q.length>>>0,Pe=0,me=0;(X&1)==0;){if(X=Lt(U,K),K+=3,X>>>1)X>>1==1?(Pe=9,me=5):(K=jr(U,K),Pe=Rt,me=en);else{K&7&&(K+=8-(K&7));var _e=U[K>>>3]|U[(K>>>3)+1]<<8;if(K+=32,_e>0)for(!Z&&pe<J+_e&&(Q=q(Q,J+_e),pe=Q.length);_e-- >0;)Q[J++]=U[K>>>3],K+=8;continue}for(;;){!Z&&pe<J+32767&&(Q=q(Q,J+32767),pe=Q.length);var xe=Xt(U,K,Pe),We=X>>>1==1?z[xe]:ht[xe];if(K+=We&15,We>>>=4,(We>>>8&255)===0)Q[J++]=We;else{if(We==256)break;We-=257;var et=We<8?0:We-4>>2;et>5&&(et=0);var ut=J+de[We];et>0&&(ut+=Xt(U,K,et),K+=et),xe=Xt(U,K,me),We=X>>>1==1?le[xe]:Et[xe],K+=We&15,We>>>=4;var He=We<4?0:We-2>>1,Ke=De[We];for(He>0&&(Ke+=Xt(U,K,He),K+=He),!Z&&pe<ut&&(Q=q(Q,ut+100),pe=Q.length);J<ut;)Q[J]=Q[J-Ke],++J}}}return Z?[Q,K+7>>>3]:[Q.slice(0,J),K+7>>>3]}function $i(U,Z){var K=U.slice(U.l||0),X=Cs(K,Z);return U.l+=X[1],X[0]}function Wi(U,Z){if(U)typeof console<"u"&&console.error(Z);else throw new Error(Z)}function Ar(U,Z){var K=U;Us(K,0);var X=[],Q=[],J={FileIndex:X,FullPaths:Q};k(J,{root:Z.root});for(var pe=K.length-4;(K[pe]!=80||K[pe+1]!=75||K[pe+2]!=5||K[pe+3]!=6)&&pe>=0;)--pe;K.l=pe+4,K.l+=4;var Pe=K.read_shift(2);K.l+=6;var me=K.read_shift(4);for(K.l=me,pe=0;pe<Pe;++pe){K.l+=20;var _e=K.read_shift(4),xe=K.read_shift(4),We=K.read_shift(2),et=K.read_shift(2),ut=K.read_shift(2);K.l+=8;var He=K.read_shift(4),Ke=o(K.slice(K.l+We,K.l+We+et));K.l+=We+et+ut;var Vt=K.l;K.l=He+4,ci(K,_e,xe,J,Ke),K.l=Vt}return J}function ci(U,Z,K,X,Q){U.l+=2;var J=U.read_shift(2),pe=U.read_shift(2),Pe=a(U);if(J&8257)throw new Error("Unsupported ZIP encryption");for(var me=U.read_shift(4),_e=U.read_shift(4),xe=U.read_shift(4),We=U.read_shift(2),et=U.read_shift(2),ut="",He=0;He<We;++He)ut+=String.fromCharCode(U[U.l++]);if(et){var Ke=o(U.slice(U.l,U.l+et));(Ke[21589]||{}).mt&&(Pe=Ke[21589].mt),((Q||{})[21589]||{}).mt&&(Pe=Q[21589].mt)}U.l+=et;var Vt=U.slice(U.l,U.l+_e);switch(pe){case 8:Vt=Y(U,xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+pe)}var In=!1;J&8&&(me=U.read_shift(4),me==134695760&&(me=U.read_shift(4),In=!0),_e=U.read_shift(4),xe=U.read_shift(4)),_e!=Z&&Wi(In,"Bad compressed size: "+Z+" != "+_e),xe!=K&&Wi(In,"Bad uncompressed size: "+K+" != "+xe),on(X,ut,Vt,{unsafe:!0,mt:Pe})}function Tn(U,Z){var K=Z||{},X=[],Q=[],J=Ce(1),pe=K.compression?8:0,Pe=0,me=0,_e=0,xe=0,We=0,et=U.FullPaths[0],ut=et,He=U.FileIndex[0],Ke=[],Vt=0;for(me=1;me<U.FullPaths.length;++me)if(ut=U.FullPaths[me].slice(et.length),He=U.FileIndex[me],!(!He.size||!He.content||ut=="Sh33tJ5")){var In=xe,Pn=Ce(ut.length);for(_e=0;_e<ut.length;++_e)Pn.write_shift(1,ut.charCodeAt(_e)&127);Pn=Pn.slice(0,Pn.l),Ke[We]=ime.buf(He.content,0);var Qn=He.content;pe==8&&(Qn=ee(Qn)),J=Ce(30),J.write_shift(4,67324752),J.write_shift(2,20),J.write_shift(2,Pe),J.write_shift(2,pe),He.mt?s(J,He.mt):J.write_shift(4,0),J.write_shift(-4,Ke[We]),J.write_shift(4,Qn.length),J.write_shift(4,He.content.length),J.write_shift(2,Pn.length),J.write_shift(2,0),xe+=J.length,X.push(J),xe+=Pn.length,X.push(Pn),xe+=Qn.length,X.push(Qn),J=Ce(46),J.write_shift(4,33639248),J.write_shift(2,0),J.write_shift(2,20),J.write_shift(2,Pe),J.write_shift(2,pe),J.write_shift(4,0),J.write_shift(-4,Ke[We]),J.write_shift(4,Qn.length),J.write_shift(4,He.content.length),J.write_shift(2,Pn.length),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(4,0),J.write_shift(4,In),Vt+=J.l,Q.push(J),Vt+=Pn.length,Q.push(Pn),++We}return J=Ce(22),J.write_shift(4,101010256),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,We),J.write_shift(2,We),J.write_shift(4,Vt),J.write_shift(4,xe),J.write_shift(2,0),vi([vi(X),vi(Q),J])}var Ps={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ks(U,Z){if(U.ctype)return U.ctype;var K=U.name||"",X=K.match(/\.([^\.]+)$/);return X&&Ps[X[1]]||Z&&(X=(K=Z).match(/[\.\\]([^\.\\])+$/),X&&Ps[X[1]])?Ps[X[1]]:"application/octet-stream"}function nr(U){for(var Z=Rp(U),K=[],X=0;X<Z.length;X+=76)K.push(Z.slice(X,X+76));return K.join(`\r
`)+`\r
`}function is(U){var Z=U.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(_e){var xe=_e.charCodeAt(0).toString(16).toUpperCase();return"="+(xe.length==1?"0"+xe:xe)});Z=Z.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Z.charAt(0)==`
`&&(Z="=0D"+Z.slice(1)),Z=Z.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var K=[],X=Z.split(`\r
`),Q=0;Q<X.length;++Q){var J=X[Q];if(J.length==0){K.push("");continue}for(var pe=0;pe<J.length;){var Pe=76,me=J.slice(pe,pe+Pe);me.charAt(Pe-1)=="="?Pe--:me.charAt(Pe-2)=="="?Pe-=2:me.charAt(Pe-3)=="="&&(Pe-=3),me=J.slice(pe,pe+Pe),pe+=Pe,pe<J.length&&(me+="="),K.push(me)}}return K.join(`\r
`)}function Vr(U){for(var Z=[],K=0;K<U.length;++K){for(var X=U[K];K<=U.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+U[++K];Z.push(X)}for(var Q=0;Q<Z.length;++Q)Z[Q]=Z[Q].replace(/[=][0-9A-Fa-f]{2}/g,function(J){return String.fromCharCode(parseInt(J.slice(1),16))});return Wa(Z.join(`\r
`))}function rr(U,Z,K){for(var X="",Q="",J="",pe,Pe=0;Pe<10;++Pe){var me=Z[Pe];if(!me||me.match(/^\s*$/))break;var _e=me.match(/^(.*?):\s*([^\s].*)$/);if(_e)switch(_e[1].toLowerCase()){case"content-location":X=_e[2].trim();break;case"content-type":J=_e[2].trim();break;case"content-transfer-encoding":Q=_e[2].trim();break}}switch(++Pe,Q.toLowerCase()){case"base64":pe=Wa(Ul(Z.slice(Pe).join("")));break;case"quoted-printable":pe=Vr(Z.slice(Pe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Q)}var xe=on(U,X.slice(K.length),pe,{unsafe:!0});J&&(xe.ctype=J)}function Gr(U,Z){if(Re(U.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var K=Z&&Z.root||"",X=(En&&Buffer.isBuffer(U)?U.toString("binary"):Re(U)).split(`\r
`),Q=0,J="";for(Q=0;Q<X.length;++Q)if(J=X[Q],!!/^Content-Location:/i.test(J)&&(J=J.slice(J.indexOf("file")),K||(K=J.slice(0,J.lastIndexOf("/")+1)),J.slice(0,K.length)!=K))for(;K.length>0&&(K=K.slice(0,K.length-1),K=K.slice(0,K.lastIndexOf("/")+1),J.slice(0,K.length)!=K););var pe=(X[1]||"").match(/boundary="(.*?)"/);if(!pe)throw new Error("MAD cannot find boundary");var Pe="--"+(pe[1]||""),me=[],_e=[],xe={FileIndex:me,FullPaths:_e};k(xe);var We,et=0;for(Q=0;Q<X.length;++Q){var ut=X[Q];ut!==Pe&&ut!==Pe+"--"||(et++&&rr(xe,X.slice(We,Q),K),We=Q)}return xe}function Br(U,Z){var K=Z||{},X=K.boundary||"SheetJS";X="------="+X;for(var Q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],J=U.FullPaths[0],pe=J,Pe=U.FileIndex[0],me=1;me<U.FullPaths.length;++me)if(pe=U.FullPaths[me].slice(J.length),Pe=U.FileIndex[me],!(!Pe.size||!Pe.content||pe=="Sh33tJ5")){pe=pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Vt){return"_x"+Vt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Vt){return"_u"+Vt.charCodeAt(0).toString(16)+"_"});for(var _e=Pe.content,xe=En&&Buffer.isBuffer(_e)?_e.toString("binary"):Re(_e),We=0,et=Math.min(1024,xe.length),ut=0,He=0;He<=et;++He)(ut=xe.charCodeAt(He))>=32&&ut<128&&++We;var Ke=We>=et*4/5;Q.push(X),Q.push("Content-Location: "+(K.root||"file:///C:/SheetJS/")+pe),Q.push("Content-Transfer-Encoding: "+(Ke?"quoted-printable":"base64")),Q.push("Content-Type: "+ks(Pe,pe)),Q.push(""),Q.push(Ke?is(xe):nr(xe))}return Q.push(X+`--\r
`),Q.join(`\r
`)}function br(U){var Z={};return k(Z,U),Z}function on(U,Z,K,X){var Q=X&&X.unsafe;Q||k(U);var J=!Q&&Gn.find(U,Z);if(!J){var pe=U.FullPaths[0];Z.slice(0,pe.length)==pe?pe=Z:(pe.slice(-1)!="/"&&(pe+="/"),pe=(pe+Z).replace("//","/")),J={name:i(Z),type:2},U.FileIndex.push(J),U.FullPaths.push(pe),Q||Gn.utils.cfb_gc(U)}return J.content=K,J.size=K?K.length:0,X&&(X.CLSID&&(J.clsid=X.CLSID),X.mt&&(J.mt=X.mt),X.ct&&(J.ct=X.ct)),J}function hr(U,Z){k(U);var K=Gn.find(U,Z);if(K){for(var X=0;X<U.FileIndex.length;++X)if(U.FileIndex[X]==K)return U.FileIndex.splice(X,1),U.FullPaths.splice(X,1),!0}return!1}function xr(U,Z,K){k(U);var X=Gn.find(U,Z);if(X){for(var Q=0;Q<U.FileIndex.length;++Q)if(U.FileIndex[Q]==X)return U.FileIndex[Q].name=i(K),U.FullPaths[Q]=K,!0}return!1}function ss(U){M(U,!0)}return e.find=O,e.read=B,e.parse=h,e.write=Ie,e.writeFile=ce,e.utils={cfb_new:br,cfb_add:on,cfb_del:hr,cfb_mov:xr,cfb_gc:ss,ReadShift:Fm,CheckField:rV,prep_blob:Us,bconcat:vi,use_zlib:V,_deflateRaw:Ze,_inflateRaw:$i,consts:be},e})();function sme(n){return typeof n=="string"?DE(n):Array.isArray(n)?kge(n):n}function A1(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=DE(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Pp(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([sme(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=I1(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function Ti(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function eO(n,e){for(var t=[],r=Ti(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function HR(n){for(var e=[],t=Ti(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function VE(n){for(var e=[],t=Ti(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function ame(n){for(var e=[],t=Ti(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var dv=new Date(1899,11,30,0,0,0);function Is(n,e){var t=n.getTime(),r=dv.getTime()+(n.getTimezoneOffset()-dv.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var G7=new Date,ome=dv.getTime()+(G7.getTimezoneOffset()-dv.getTimezoneOffset())*6e4,tO=G7.getTimezoneOffset();function B7(n){var e=new Date;return e.setTime(n*24*60*60*1e3+ome),e.getTimezoneOffset()!==tO&&e.setTime(e.getTime()+(e.getTimezoneOffset()-tO)*6e4),e}var nO=new Date("2017-02-19T19:06:09.000Z"),U7=isNaN(nO.getFullYear())?new Date("2/19/17"):nO,lme=U7.getFullYear()==2017;function ns(n,e){var t=new Date(n);if(lme)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(U7.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function GE(n,e){if(En&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function As(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=As(n[t]));return e}function pr(n,e){for(var t="";t.length<e;)t+=n;return t}function Nl(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var cme=["january","february","march","april","may","june","july","august","september","october","november","december"];function Cp(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&cme.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function qt(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return En?r=Xl(t):r=Mge(t),Gn.utils.cfb_add(n,e,r)}Gn.utils.cfb_add(n,e,t)}else n.file(e,t)}function KR(){return Gn.utils.cfb_new()}var Fr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ume={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},YR=HR(ume),XR=/[&<>'"]/g,hme=/[\u0000-\u0008\u000b-\u001f]/g;function Fn(n){var e=n+"";return e.replace(XR,function(t){return YR[t]}).replace(hme,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function rO(n){return Fn(n).replace(/ /g,"_x0020_")}var z7=/[\u0000-\u001f]/g;function dme(n){var e=n+"";return e.replace(XR,function(t){return YR[t]}).replace(/\n/g,"<br/>").replace(z7,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function fme(n){var e=n+"";return e.replace(XR,function(t){return YR[t]}).replace(z7,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function gme(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function mme(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function LS(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function iO(n){var e=Zh(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function sO(n){return Xl(n,"binary").toString("utf8")}var f_="foo bar baz",Dm=En&&(sO(f_)==LS(f_)&&sO||iO(f_)==LS(f_)&&iO)||LS,Pp=En?function(n){return Xl(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},pme=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}})(),$7=/(^\s|\s$|\n)/;function Ei(n,e){return"<"+n+(e.match($7)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function kp(n){return Ti(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function tt(n,e,t){return"<"+n+(t!=null?kp(t):"")+(e!=null?(e.match($7)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function DI(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function yme(n,e){switch(typeof n){case"string":var t=tt("vt:lpwstr",Fn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return tt((n|0)==n?"vt:i4":"vt:r8",Fn(String(n)));case"boolean":return tt("vt:bool",n?"true":"false")}if(n instanceof Date)return tt("vt:filetime",DI(n));throw new Error("Unable to serialize "+n)}var ii={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},$0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ws={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function _me(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function xme(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var aO=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},oO=En?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:Xl(e)})):aO(n)}:aO,lO=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(cm(n,i)));return r.join("").replace(Om,"")},qR=En?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(Om,""):lO(n,e,t)}:lO,cO=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},W7=En?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):cO(n,e,t)}:cO,uO=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(Tf(n,i)));return r.join("")},b1=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):uO(e,t,r)}:uO,H7=function(n,e){var t=Hs(n,e);return t>0?b1(n,e+4,e+4+t-1):""},K7=H7,Y7=function(n,e){var t=Hs(n,e);return t>0?b1(n,e+4,e+4+t-1):""},X7=Y7,q7=function(n,e){var t=2*Hs(n,e);return t>0?b1(n,e+4,e+4+t-1):""},Z7=q7,Q7=function(e,t){var r=Hs(e,t);return r>0?qR(e,t+4,t+4+r):""},J7=Q7,eV=function(n,e){var t=Hs(n,e);return t>0?b1(n,e+4,e+4+t):""},tV=eV,nV=function(n,e){return _me(n,e)},fv=nV,ZR=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};En&&(K7=function(e,t){if(!Buffer.isBuffer(e))return H7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},X7=function(e,t){if(!Buffer.isBuffer(e))return Y7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},Z7=function(e,t){if(!Buffer.isBuffer(e))return q7(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},J7=function(e,t){if(!Buffer.isBuffer(e))return Q7(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},tV=function(e,t){if(!Buffer.isBuffer(e))return eV(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},fv=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):nV(e,t)},ZR=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Tf=function(n,e){return n[e]},cm=function(n,e){return n[e+1]*256+n[e]},vme=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},Hs=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},hh=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},Eme=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Fm(n,e){var t="",r,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,En&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(cm(this,u)),u+=2;n*=2;break;case"utf8":t=b1(this,this.l,this.l+n);break;case"utf16le":n*=2,t=qR(this,this.l,this.l+n);break;case"wstr":return Fm.call(this,n,"dbcs");case"lpstr-ansi":t=K7(this,this.l),n=4+Hs(this,this.l);break;case"lpstr-cp":t=X7(this,this.l),n=4+Hs(this,this.l);break;case"lpwstr":t=Z7(this,this.l),n=4+2*Hs(this,this.l);break;case"lpp4":n=4+Hs(this,this.l),t=J7(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+Hs(this,this.l),t=tV(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=Tf(this,this.l+n++))!==0;)s.push(u_(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=cm(this,this.l+n))!==0;)s.push(u_(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Tf(this,u),this.l=u+1,o=Fm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(u_(cm(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Tf(this,u),this.l=u+1,o=Fm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(u_(Tf(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=Tf(this,this.l),this.l++,r;case 2:return r=(e==="i"?vme:cm)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?hh:Eme)(this,this.l),this.l+=4,r):(i=Hs(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=fv(this,this.l):i=fv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=W7(this,this.l,n);break}}return this.l+=n,t}var wme=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},Sme=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},Tme=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function Ime(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)Tme(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,wme(this,e,this.l);break;case 8:if(r=8,t==="f"){xme(this,e,this.l);break}case 16:break;case-4:r=4,Sme(this,e,this.l);break}return this.l+=r,this}function rV(n,e){var t=W7(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Us(n,e){n.l=e,n.read_shift=Fm,n.chk=rV,n.write_shift=Ime}function Xo(n,e){n.l+=e}function Ce(n){var e=Zh(n);return Us(e,0),e}function Ss(){var n=[],e=En?256:2048,t=function(u){var h=Ce(u);return Us(h,0),h},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),vi(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function Ge(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=_ve[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&ZR(t)&&n.push(t)}}function jm(n,e,t){var r=As(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function hO(n,e,t){var r=As(n);return r.s=jm(r.s,e.s,t),r.e=jm(r.e,e.s,t),r}function Vm(n,e){if(n.cRel&&n.c<0)for(n=As(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=As(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=Vn(n);return!n.cRel&&n.cRel!=null&&(t=Rme(t)),!n.rRel&&n.rRel!=null&&(t=Ame(t)),t}function OS(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Ui(n.s.c)+":"+(n.e.cRel?"":"$")+Ui(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+Si(n.s.r)+":"+(n.e.rRel?"":"$")+Si(n.e.r):Vm(n.s,e.biff)+":"+Vm(n.e,e.biff)}function QR(n){return parseInt(bme(n),10)-1}function Si(n){return""+(n+1)}function Ame(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function bme(n){return n.replace(/\$(\d+)$/,"$1")}function JR(n){for(var e=Cme(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Ui(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function Rme(n){return n.replace(/^([A-Z])/,"$$$1")}function Cme(n){return n.replace(/^\$([A-Z])/,"$1")}function Pme(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function si(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function Vn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function ta(n){var e=n.indexOf(":");return e==-1?{s:si(n),e:si(n)}:{s:si(n.slice(0,e)),e:si(n.slice(e+1))}}function Lr(n,e){return typeof e>"u"||typeof e=="number"?Lr(n.s,n.e):(typeof n!="string"&&(n=Vn(n)),typeof e!="string"&&(e=Vn(e)),n==e?n:n+":"+e)}function Zn(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function dO(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=pu(n.z,t?Is(e):e)}catch{}try{return n.w=pu((n.XF||{}).numFmtId||(t?14:0),t?Is(e):e)}catch{return""+e}}function zl(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?R1[n.v]||n.v:e==null?dO(n,n.v):dO(n,e))}function dd(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function iV(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?si(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var h=Zn(s["!ref"]);u.s.c=h.s.c,u.s.r=h.s.r,u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),a==-1&&(u.e.r=a=h.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[f].length;++g)if(!(typeof e[f][g]>"u")){var p={v:e[f][g]},x=a+f,v=o+g;if(u.s.r>x&&(u.s.r=x),u.s.c>v&&(u.s.c=v),u.e.r<x&&(u.e.r=x),u.e.c<v&&(u.e.c=v),e[f][g]&&typeof e[f][g]=="object"&&!Array.isArray(e[f][g])&&!(e[f][g]instanceof Date))p=e[f][g];else if(Array.isArray(p.v)&&(p.f=e[f][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||_r[14],r.cellDates?(p.t="d",p.w=pu(p.z,Is(p.v))):(p.t="n",p.v=Is(p.v),p.w=pu(p.z,p.v))):p.t="s";if(i)s[x]||(s[x]=[]),s[x][v]&&s[x][v].z&&(p.z=s[x][v].z),s[x][v]=p;else{var w=Vn({c:v,r:x});s[w]&&s[w].z&&(p.z=s[w].z),s[w]=p}}}return u.s.c<1e7&&(s["!ref"]=Lr(u)),s}function W0(n,e){return iV(null,n,e)}function kme(n){return n.read_shift(4,"i")}function eo(n,e){return e||(e=Ce(4)),e.write_shift(4,n),e}function zi(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function ai(n,e){var t=!1;return e==null&&(t=!0,e=Ce(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function Mme(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function Nme(n,e){return e||(e=Ce(4)),e.write_shift(2,0),e.write_shift(2,0),e}function eC(n,e){var t=n.l,r=n.read_shift(1),i=zi(n),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=n.read_shift(4),l=0;l!=o;++l)s.push(Mme(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function Lme(n,e){var t=!1;return e==null&&(t=!0,e=Ce(15+4*n.t.length)),e.write_shift(1,0),ai(n.t,e),t?e.slice(0,e.l):e}var Ome=eC;function Dme(n,e){var t=!1;return e==null&&(t=!0,e=Ce(23+4*n.t.length)),e.write_shift(1,1),ai(n.t,e),e.write_shift(4,1),Nme({},e),t?e.slice(0,e.l):e}function ba(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function fd(n,e){return e==null&&(e=Ce(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function gd(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function md(n,e){return e==null&&(e=Ce(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var Fme=zi,sV=ai;function tC(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function gv(n,e){var t=!1;return e==null&&(t=!0,e=Ce(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var jme=zi,FI=tC,nC=gv;function aV(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?fv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):hh(e,0)>>2;return t?i/100:i}function oV(n,e){e==null&&(e=Ce(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function lV(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function Vme(n,e){return e||(e=Ce(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var pd=lV,H0=Vme;function K0(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Qh(n,e){return(e||Ce(8)).write_shift(8,n,"f")}function Gme(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=Xme[i];u&&(e.rgb=SO(u));break;case 2:e.rgb=SO([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function mv(n,e){if(e||(e=Ce(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Bme(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function Ume(n,e){e||(e=Ce(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var cV=2,Gs=3,g_=11,pv=19,m_=64,zme=65,$me=71,Wme=4108,Hme=4126,yi=80,fO={1:{n:"CodePage",t:cV},2:{n:"Category",t:yi},3:{n:"PresentationFormat",t:yi},4:{n:"ByteCount",t:Gs},5:{n:"LineCount",t:Gs},6:{n:"ParagraphCount",t:Gs},7:{n:"SlideCount",t:Gs},8:{n:"NoteCount",t:Gs},9:{n:"HiddenCount",t:Gs},10:{n:"MultimediaClipCount",t:Gs},11:{n:"ScaleCrop",t:g_},12:{n:"HeadingPairs",t:Wme},13:{n:"TitlesOfParts",t:Hme},14:{n:"Manager",t:yi},15:{n:"Company",t:yi},16:{n:"LinksUpToDate",t:g_},17:{n:"CharacterCount",t:Gs},19:{n:"SharedDoc",t:g_},22:{n:"HyperlinksChanged",t:g_},23:{n:"AppVersion",t:Gs,p:"version"},24:{n:"DigSig",t:zme},26:{n:"ContentType",t:yi},27:{n:"ContentStatus",t:yi},28:{n:"Language",t:yi},29:{n:"Version",t:yi},255:{},2147483648:{n:"Locale",t:pv},2147483651:{n:"Behavior",t:pv},1919054434:{}},gO={1:{n:"CodePage",t:cV},2:{n:"Title",t:yi},3:{n:"Subject",t:yi},4:{n:"Author",t:yi},5:{n:"Keywords",t:yi},6:{n:"Comments",t:yi},7:{n:"Template",t:yi},8:{n:"LastAuthor",t:yi},9:{n:"RevNumber",t:yi},10:{n:"EditTime",t:m_},11:{n:"LastPrinted",t:m_},12:{n:"CreatedDate",t:m_},13:{n:"ModifiedDate",t:m_},14:{n:"PageCount",t:Gs},15:{n:"WordCount",t:Gs},16:{n:"CharCount",t:Gs},17:{n:"Thumbnail",t:$me},18:{n:"Application",t:yi},19:{n:"DocSecurity",t:Gs},255:{},2147483648:{n:"Locale",t:pv},2147483651:{n:"Behavior",t:pv},1919054434:{}};function Kme(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Yme=Kme([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Xme=As(Yme),R1={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},qme={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},p_={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function uV(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function hV(n,e){var t=ame(qme),r=[],i;r[r.length]=Fr,r[r.length]=tt("Types",null,{xmlns:ii.CT,"xmlns:xsd":ii.xsd,"xmlns:xsi":ii.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return tt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){n[l]&&n[l].length>0&&(i=n[l][0],r[r.length]=tt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:p_[l][e.bookType]||p_[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=tt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:p_[l][e.bookType]||p_[l].xlsx})})},o=function(l){(n[l]||[]).forEach(function(u){r[r.length]=tt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var pn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function dV(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function qf(n){var e=[Fr,tt("Relationships",null,{xmlns:ii.RELS})];return Ti(n["!id"]).forEach(function(t){e[e.length]=tt("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Ln(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[pn.HLINK,pn.XPATH,pn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function Zme(n){var e=[Fr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function mO(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Qme(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Jme(n){var e=[Fr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(mO(n[t][0],n[t][1])),e.push(Qme("",n[t][0]));return e.push(mO("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function fV(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ov.version+"</meta:generator></office:meta></office:document-meta>"}var Ch=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function DS(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=Fn(e),r[r.length]=t?tt(n,e,t):Ei(n,e))}function gV(n,e){var t=e||{},r=[Fr,tt("cp:coreProperties",null,{"xmlns:cp":ii.CORE_PROPS,"xmlns:dc":ii.dc,"xmlns:dcterms":ii.dcterms,"xmlns:dcmitype":ii.dcmitype,"xmlns:xsi":ii.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&DS("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:DI(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&DS("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:DI(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=Ch.length;++s){var a=Ch[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&DS(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Zf=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],mV=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function pV(n){var e=[],t=tt;return n||(n={}),n.Application="SheetJS",e[e.length]=Fr,e[e.length]=tt("Properties",null,{xmlns:ii.EXT_PROPS,"xmlns:vt":ii.vt}),Zf.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Fn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Fn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function yV(n){var e=[Fr,tt("Properties",null,{xmlns:ii.CUST_PROPS,"xmlns:vt":ii.vt})];if(!n)return e.join("");var t=1;return Ti(n).forEach(function(i){++t,e[e.length]=tt("property",yme(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Fn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var pO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function epe(n,e){var t=[];return Ti(pO).map(function(r){for(var i=0;i<Ch.length;++i)if(Ch[i][1]==r)return Ch[i];for(i=0;i<Zf.length;++i)if(Zf[i][1]==r)return Zf[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(Ei(pO[r[1]]||r[1],i))}}),tt("DocumentProperties",t.join(""),{xmlns:Ws.o})}function tpe(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&Ti(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<Ch.length;++a)if(s==Ch[a][1])return;for(a=0;a<Zf.length;++a)if(s==Zf[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(tt(rO(s),o,{"dt:dt":l}))}}),e&&Ti(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(tt(rO(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Ws.o+'">'+i.join("")+"</"+r+">"}function npe(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=Ce(8);return a.write_shift(4,r),a.write_shift(4,i),a}function yO(n,e){var t=Ce(4),r=Ce(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=Ce(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=npe(e);break;case 31:case 80:for(r=Ce(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return vi([t,r])}var _V=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function rpe(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function _O(n,e,t){var r=Ce(8),i=[],s=[],a=8,o=0,l=Ce(8),u=Ce(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=Ce(8),u.write_shift(4,0),i.unshift(u);var h=[Ce(4)];for(h[0].write_shift(4,n.length),o=0;o<n.length;++o){var f=n[o][0];for(l=Ce(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);h.push(l)}l=vi(h),s.unshift(l),a+=8+l.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(_V.indexOf(n[o][0])>-1||mV.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],p=0;if(e){p=+e[n[o][0]];var x=t[p];if(x.p=="version"&&typeof g=="string"){var v=g.split(".");g=(+v[0]<<16)+(+v[1]||0)}l=yO(x.t,g)}else{var w=rpe(g);w==-1&&(w=31,g=String(g)),l=yO(w,g)}s.push(l),u=Ce(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+l.length}var T=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,T),T+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),vi([r].concat(i).concat(s))}function xO(n,e,t,r,i,s){var a=Ce(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Gn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=_O(n,t,r);if(o.push(l),i){var u=_O(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return vi(o)}function ipe(n,e){e||(e=Ce(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function spe(n,e){return n.read_shift(e)===1}function Xi(n,e){return e||(e=Ce(2)),e.write_shift(2,+!!n),e}function xV(n){return n.read_shift(2,"u")}function ma(n,e){return e||(e=Ce(2)),e.write_shift(2,n),e}function vV(n,e,t){return t||(t=Ce(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function EV(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function ape(n){var e=n.t||"",t=Ce(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=Ce(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return vi(i)}function ope(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function lpe(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):ope(n,r,t)}function cpe(n,e,t){if(t.biff>5)return lpe(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function wV(n,e,t){return t||(t=Ce(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function vO(n,e){e||(e=Ce(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function upe(n){var e=Ce(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),vO(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&vO(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),t=0;t<r.length-3*l;++t)e.write_shift(1,r.charCodeAt(t+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Jh(n,e,t,r){return r||(r=Ce(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function hpe(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function dpe(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function SV(n,e){return e||(e=Ce(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function rC(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ce(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function fpe(n,e){var t=!e||e.biff==8,r=Ce(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function gpe(n,e){var t=!e||e.biff>=8?2:1,r=Ce(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function mpe(n,e){var t=Ce(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=ape(n[i]);var s=vi([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function ppe(){var n=Ce(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function ype(n){var e=Ce(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function _pe(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=Ce(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function xpe(n,e,t,r){var i=Ce(10);return Jh(n,e,r,i),i.write_shift(4,t),i}function vpe(n,e,t,r,i){var s=!i||i.biff==8,a=Ce(8+ +s+(1+s)*t.length);return Jh(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function Epe(n,e,t,r){var i=t&&t.biff==5;r||(r=Ce(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function wpe(n,e){var t=e.biff==8||!e.biff?4:2,r=Ce(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function EO(n,e,t,r){var i=t&&t.biff==5;r||(r=Ce(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Spe(n){var e=Ce(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Tpe(n,e,t,r,i,s){var a=Ce(8);return Jh(n,e,r,a),vV(t,s,a),a}function Ipe(n,e,t,r){var i=Ce(14);return Jh(n,e,r,i),Qh(t,i),i}function Ape(n,e,t){if(t.biff<8)return bpe(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(hpe(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function bpe(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=EV(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function Rpe(n){var e=Ce(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)SV(n[t],e);return e}function Cpe(n){var e=Ce(24),t=si(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return vi([e,upe(n[1])])}function Ppe(n){var e=n[1].Tooltip,t=Ce(10+2*(e.length+1));t.write_shift(2,2048);var r=si(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function kpe(n){return n||(n=Ce(4)),n.write_shift(2,1),n.write_shift(2,1),n}function Mpe(n,e,t){if(!t.cellStyles)return Xo(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(u.level=l>>8&7),u}function Npe(n,e){var t=Ce(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function Lpe(n){for(var e=Ce(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function Ope(n,e,t){var r=Ce(15);return P1(r,n,e),r.write_shift(8,t,"f"),r}function Dpe(n,e,t){var r=Ce(9);return P1(r,n,e),r.write_shift(2,t),r}var Fpe=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=HR({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var u=[],h=Zh(1);switch(l.type){case"base64":h=Wa(Ul(o));break;case"binary":h=Wa(o);break;case"buffer":case"array":h=o;break}Us(h,0);var f=h.read_shift(1),g=!!(f&136),p=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,w=521;f==2&&(v=h.read_shift(2)),h.l+=3,f!=2&&(v=h.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(w=h.read_shift(2));var T=h.read_shift(2),I=l.codepage||1252;f!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(I=n[h[h.l]]),h.l+=1,h.l+=2),x&&(h.l+=36);for(var A=[],N={},D=Math.min(h.length,f==2?521:w-10-(p?264:0)),B=x?32:11;h.l<D&&h[h.l]!=13;)switch(N={},N.name=lv.utils.decode(I,h.slice(h.l,h.l+B)).replace(/[\u0000\r\n].*$/g,""),h.l+=B,N.type=String.fromCharCode(h.read_shift(1)),f!=2&&!x&&(N.offset=h.read_shift(4)),N.len=h.read_shift(1),f==2&&(N.offset=h.read_shift(2)),N.dec=h.read_shift(1),N.name.length&&A.push(N),f!=2&&(h.l+=x?13:14),N.type){case"B":(!p||N.len!=8)&&l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(h[h.l]!==13&&(h.l=w-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=w;var k=0,P=0;for(u[0]=[],P=0;P!=A.length;++P)u[0][P]=A[P].name;for(;v-- >0;){if(h[h.l]===42){h.l+=T;continue}for(++h.l,u[++k]=[],P=0,P=0;P!=A.length;++P){var M=h.slice(h.l,h.l+A[P].len);h.l+=A[P].len,Us(M,0);var j=lv.utils.decode(I,M);switch(A[P].type){case"C":j.trim().length&&(u[k][P]=j.replace(/\s+$/,""));break;case"D":j.length===8?u[k][P]=new Date(+j.slice(0,4),+j.slice(4,6)-1,+j.slice(6,8)):u[k][P]=j;break;case"F":u[k][P]=parseFloat(j.trim());break;case"+":case"I":u[k][P]=x?M.read_shift(-4,"i")^2147483648:M.read_shift(4,"i");break;case"L":switch(j.trim().toUpperCase()){case"Y":case"T":u[k][P]=!0;break;case"N":case"F":u[k][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+j+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[k][P]="##MEMO##"+(x?parseInt(j.trim(),10):M.read_shift(4));break;case"N":j=j.replace(/\u0000/g,"").trim(),j&&j!="."&&(u[k][P]=+j||0);break;case"@":u[k][P]=new Date(M.read_shift(-8,"f")-621356832e5);break;case"T":u[k][P]=new Date((M.read_shift(4)-2440588)*864e5+M.read_shift(4));break;case"Y":u[k][P]=M.read_shift(4,"i")/1e4+M.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[k][P]=-M.read_shift(-8,"f");break;case"B":if(p&&A[P].len==8){u[k][P]=M.read_shift(8,"f");break}case"G":case"P":M.l+=A[P].len;break;case"0":if(A[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+A[P].type)}}}if(f!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=A,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var h=W0(t(o,u),u);return h["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,h}function i(o,l){try{return dd(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&bp(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var h=Ss(),f=Ev(o,{header:1,raw:!0,cellDates:!0}),g=f[0],p=f.slice(1),x=o["!cols"]||[],v=0,w=0,T=0,I=1;for(v=0;v<g.length;++v){if(((x[v]||{}).DBF||{}).name){g[v]=x[v].DBF.name,++T;continue}if(g[v]!=null){if(++T,typeof g[v]=="number"&&(g[v]=g[v].toString(10)),typeof g[v]!="string")throw new Error("DBF Invalid column name "+g[v]+" |"+typeof g[v]+"|");if(g.indexOf(g[v])!==v){for(w=0;w<1024;++w)if(g.indexOf(g[v]+"_"+w)==-1){g[v]+="_"+w;break}}}}var A=Zn(o["!ref"]),N=[],D=[],B=[];for(v=0;v<=A.e.c-A.s.c;++v){var k="",P="",M=0,j=[];for(w=0;w<p.length;++w)p[w][v]!=null&&j.push(p[w][v]);if(j.length==0||g[v]==null){N[v]="?";continue}for(w=0;w<j.length;++w){switch(typeof j[w]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=j[w]instanceof Date?"D":"C";break;default:P="C"}M=Math.max(M,String(j[w]).length),k=k&&k!=P?"C":P}M>250&&(M=250),P=((x[v]||{}).DBF||{}).type,P=="C"&&x[v].DBF.len>M&&(M=x[v].DBF.len),k=="B"&&P=="N"&&(k="N",B[v]=x[v].DBF.dec,M=x[v].DBF.len),D[v]=k=="C"||P=="N"?M:s[k]||0,I+=D[v],N[v]=k}var O=h.next(32);for(O.write_shift(4,318902576),O.write_shift(4,p.length),O.write_shift(2,296+32*T),O.write_shift(2,I),v=0;v<4;++v)O.write_shift(4,0);for(O.write_shift(4,0|(+e[I7]||3)<<8),v=0,w=0;v<g.length;++v)if(g[v]!=null){var W=h.next(32),F=(g[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);W.write_shift(1,F,"sbcs"),W.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),W.write_shift(4,w),W.write_shift(1,D[v]||s[N[v]]||0),W.write_shift(1,B[v]||0),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(1,0),W.write_shift(4,0),W.write_shift(4,0),w+=D[v]||s[N[v]]||0}var Te=h.next(264);for(Te.write_shift(4,13),v=0;v<65;++v)Te.write_shift(4,0);for(v=0;v<p.length;++v){var Me=h.next(I);for(Me.write_shift(1,0),w=0;w<g.length;++w)if(g[w]!=null)switch(N[w]){case"L":Me.write_shift(1,p[v][w]==null?63:p[v][w]?84:70);break;case"B":Me.write_shift(8,p[v][w]||0,"f");break;case"N":var Le="0";for(typeof p[v][w]=="number"&&(Le=p[v][w].toFixed(B[w]||0)),T=0;T<D[w]-Le.length;++T)Me.write_shift(1,32);Me.write_shift(1,Le,"sbcs");break;case"D":p[v][w]?(Me.write_shift(4,("0000"+p[v][w].getFullYear()).slice(-4),"sbcs"),Me.write_shift(2,("00"+(p[v][w].getMonth()+1)).slice(-2),"sbcs"),Me.write_shift(2,("00"+p[v][w].getDate()).slice(-2),"sbcs")):Me.write_shift(8,"00000000","sbcs");break;case"C":var be=String(p[v][w]!=null?p[v][w]:"").slice(0,D[w]);for(Me.write_shift(1,be,"sbcs"),T=0;T<D[w]-be.length;++T)Me.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}})(),jpe=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ti(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var x=n[p];return typeof x=="number"?WL(x):x},r=function(g,p,x){var v=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return v==59?g:WL(v)};n["|"]=254;function i(g,p){switch(p.type){case"base64":return s(Ul(g),p);case"binary":return s(g,p);case"buffer":return s(En&&Buffer.isBuffer(g)?g.toString("binary"):I1(g),p);case"array":return s(GE(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var x=g.split(/[\n\r]+/),v=-1,w=-1,T=0,I=0,A=[],N=[],D=null,B={},k=[],P=[],M=[],j=0,O;for(+p.codepage>=0&&bp(+p.codepage);T!==x.length;++T){j=0;var W=x[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),F=W.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),Te=F[0],Me;if(W.length>0)switch(Te){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&N.push(W.slice(3).replace(/;;/g,";"));break;case"C":var Le=!1,be=!1,ce=!1,Re=!1,Ie=-1,ie=-1;for(I=1;I<F.length;++I)switch(F[I].charAt(0)){case"A":break;case"X":w=parseInt(F[I].slice(1))-1,be=!0;break;case"Y":for(v=parseInt(F[I].slice(1))-1,be||(w=0),O=A.length;O<=v;++O)A[O]=[];break;case"K":Me=F[I].slice(1),Me.charAt(0)==='"'?Me=Me.slice(1,Me.length-1):Me==="TRUE"?Me=!0:Me==="FALSE"?Me=!1:isNaN(Nl(Me))?isNaN(Cp(Me).getDate())||(Me=ns(Me)):(Me=Nl(Me),D!==null&&F7(D)&&(Me=B7(Me))),Le=!0;break;case"E":Re=!0;var V=D1e(F[I].slice(1),{r:v,c:w});A[v][w]=[A[v][w],V];break;case"S":ce=!0,A[v][w]=[A[v][w],"S5S"];break;case"G":break;case"R":Ie=parseInt(F[I].slice(1))-1;break;case"C":ie=parseInt(F[I].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}if(Le&&(A[v][w]&&A[v][w].length==2?A[v][w][0]=Me:A[v][w]=Me,D=null),ce){if(Re)throw new Error("SYLK shared formula cannot have own formula");var Y=Ie>-1&&A[Ie][ie];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");A[v][w][1]=F1e(Y[1],{r:v-Ie,c:w-ie})}break;case"F":var ee=0;for(I=1;I<F.length;++I)switch(F[I].charAt(0)){case"X":w=parseInt(F[I].slice(1))-1,++ee;break;case"Y":for(v=parseInt(F[I].slice(1))-1,O=A.length;O<=v;++O)A[O]=[];break;case"M":j=parseInt(F[I].slice(1))/20;break;case"F":break;case"G":break;case"P":D=N[parseInt(F[I].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(M=F[I].slice(1).split(" "),O=parseInt(M[0],10);O<=parseInt(M[1],10);++O)j=parseInt(M[2],10),P[O-1]=j===0?{hidden:!0}:{wch:j},iC(P[O-1]);break;case"C":w=parseInt(F[I].slice(1))-1,P[w]||(P[w]={});break;case"R":v=parseInt(F[I].slice(1))-1,k[v]||(k[v]={}),j>0?(k[v].hpt=j,k[v].hpx=RV(j)):j===0&&(k[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}ee<1&&(D=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}}return k.length>0&&(B["!rows"]=k),P.length>0&&(B["!cols"]=P),p&&p.sheetRows&&(A=A.slice(0,p.sheetRows)),[A,B]}function a(g,p){var x=i(g,p),v=x[0],w=x[1],T=W0(v,p);return Ti(w).forEach(function(I){T[I]=w[I]}),T}function o(g,p){return dd(a(g,p),p)}function l(g,p,x,v){var w="C;Y"+(x+1)+";X"+(v+1)+";K";switch(g.t){case"n":w+=g.v||0,g.f&&!g.F&&(w+=";E"+aC(g.f,{r:x,c:v}));break;case"b":w+=g.v?"TRUE":"FALSE";break;case"e":w+=g.w||g.v;break;case"d":w+='"'+(g.w||g.v)+'"';break;case"s":w+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function u(g,p){p.forEach(function(x,v){var w="F;W"+(v+1)+" "+(v+1)+" ";x.hidden?w+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=yv(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=_v(x.wpx)),typeof x.wch=="number"&&(w+=Math.round(x.wch))),w.charAt(w.length-1)!=" "&&g.push(w)})}function h(g,p){p.forEach(function(x,v){var w="F;";x.hidden?w+="M0;":x.hpt?w+="M"+20*x.hpt+";":x.hpx&&(w+="M"+20*xv(x.hpx)+";"),w.length>2&&g.push(w+"R"+(v+1))})}function f(g,p){var x=["ID;PWXL;N;E"],v=[],w=Zn(g["!ref"]),T,I=Array.isArray(g),A=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),g["!cols"]&&u(x,g["!cols"]),g["!rows"]&&h(x,g["!rows"]),x.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var N=w.s.r;N<=w.e.r;++N)for(var D=w.s.c;D<=w.e.c;++D){var B=Vn({r:N,c:D});T=I?(g[N]||[])[D]:g[B],!(!T||T.v==null&&(!T.f||T.F))&&v.push(l(T,g,N,D))}return x.join(A)+A+v.join(A)+A+"E"+A}return{to_workbook:o,to_sheet:a,from_sheet:f}})(),Vpe=(function(){function n(s,a){switch(a.type){case"base64":return e(Ul(s),a);case"binary":return e(s,a);case"buffer":return e(En&&Buffer.isBuffer(s)?s.toString("binary"):I1(s),a);case"array":return e(GE(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,h=0,f=[];h!==o.length;++h){if(o[h].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var g=o[h].trim().split(","),p=g[0],x=g[1];++h;for(var v=o[h]||"";(v.match(/["]/g)||[]).length&1&&h<o.length-1;)v+=`
`+o[++h];switch(v=v.trim(),+p){case-1:if(v==="BOT"){f[++l]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[l][u]=!0:v==="FALSE"?f[l][u]=!1:isNaN(Nl(x))?isNaN(Cp(x).getDate())?f[l][u]=x:f[l][u]=ns(x):f[l][u]=Nl(x),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[l][u++]=v!==""?v:null;break}if(v==="EOD")break}}return a&&a.sheetRows&&(f=f.slice(0,a.sheetRows)),f}function t(s,a){return W0(n(s,a),a)}function r(s,a){return dd(t(s,a),a)}var i=(function(){var s=function(l,u,h,f,g){l.push(u),l.push(h+","+f),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,u,h,f){l.push(u+","+h),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],h=Zn(l["!ref"]),f,g=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,h.e.r-h.s.r+1,""),s(u,"TUPLES",0,h.e.c-h.s.c+1,""),s(u,"DATA",0,0,"");for(var p=h.s.r;p<=h.e.r;++p){a(u,-1,0,"BOT");for(var x=h.s.c;x<=h.e.c;++x){var v=Vn({r:p,c:x});if(f=g?(l[p]||[])[x]:l[v],!f){a(u,1,0,"");continue}switch(f.t){case"n":var w=f.w;!w&&f.v!=null&&(w=f.v),w==null?f.f&&!f.F?a(u,1,0,"="+f.f):a(u,1,0,""):a(u,0,w,"V");break;case"b":a(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=pu(f.z||_r[14],Is(ns(f.v)))),a(u,0,f.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var T=`\r
`,I=u.join(T);return I}})();return{to_workbook:r,to_sheet:t,from_sheet:i}})(),TV=(function(){function n(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(f,g){for(var p=f.split(`
`),x=-1,v=-1,w=0,T=[];w!==p.length;++w){var I=p[w].trim().split(":");if(I[0]==="cell"){var A=si(I[1]);if(T.length<=A.r)for(x=T.length;x<=A.r;++x)T[x]||(T[x]=[]);switch(x=A.r,v=A.c,I[2]){case"t":T[x][v]=n(I[3]);break;case"v":T[x][v]=+I[3];break;case"vtf":var N=I[I.length-1];case"vtc":switch(I[3]){case"nl":T[x][v]=!!+I[4];break;default:T[x][v]=+I[4];break}I[2]=="vtf"&&(T[x][v]=[T[x][v],N])}}}return g&&g.sheetRows&&(T=T.slice(0,g.sheetRows)),T}function r(f,g){return W0(t(f,g),g)}function i(f,g){return dd(r(f,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var g=[],p=[],x,v="",w=ta(f["!ref"]),T=Array.isArray(f),I=w.s.r;I<=w.e.r;++I)for(var A=w.s.c;A<=w.e.c;++A)if(v=Vn({r:I,c:A}),x=T?(f[I]||[])[A]:f[v],!(!x||x.v==null||x.t==="z")){switch(p=["cell",v,"t"],x.t){case"s":case"str":p.push(e(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=e(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var N=Is(ns(x.v));p[2]="vtc",p[3]="nd",p[4]=""+N,p[5]=x.w||pu(x.z||_r[14],N);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function h(f){return[s,a,o,a,u(f),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:h}})(),Gpe=(function(){function n(h,f,g,p,x){x.raw?f[g][p]=h:h===""||(h==="TRUE"?f[g][p]=!0:h==="FALSE"?f[g][p]=!1:isNaN(Nl(h))?isNaN(Cp(h).getDate())?f[g][p]=h:f[g][p]=ns(h):f[g][p]=Nl(h))}function e(h,f){var g=f||{},p=[];if(!h||h.length===0)return p;for(var x=h.split(/[\r\n]/),v=x.length-1;v>=0&&x[v].length===0;)--v;for(var w=10,T=0,I=0;I<=v;++I)T=x[I].indexOf(" "),T==-1?T=x[I].length:T++,w=Math.max(w,T);for(I=0;I<=v;++I){p[I]=[];var A=0;for(n(x[I].slice(0,w).trim(),p,I,A,g),A=1;A<=(x[I].length-w)/10+1;++A)n(x[I].slice(w+(A-1)*10,w+A*10).trim(),p,I,A,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(h){for(var f={},g=!1,p=0,x=0;p<h.length;++p)(x=h.charCodeAt(p))==34?g=!g:!g&&x in t&&(f[x]=(f[x]||0)+1);x=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&x.push([f[p],p]);if(!x.length){f=r;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&x.push([f[p],p])}return x.sort(function(v,w){return v[0]-w[0]||r[v[1]]-r[w[1]]}),t[x.pop()[1]]||44}function s(h,f){var g=f||{},p="",x=g.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(p=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(p=h.charAt(4),h=h.slice(6)):p=i(h.slice(0,1024)):g&&g.FS?p=g.FS:p=i(h.slice(0,1024));var w=0,T=0,I=0,A=0,N=0,D=p.charCodeAt(0),B=!1,k=0,P=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var M=g.dateNF!=null?nme(g.dateNF):null;function j(){var O=h.slice(A,N),W={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)W.t="z";else if(g.raw)W.t="s",W.v=O;else if(O.trim().length===0)W.t="s",W.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(W.t="s",W.v=O.slice(2,-1).replace(/""/g,'"')):j1e(O)?(W.t="n",W.f=O.slice(1)):(W.t="s",W.v=O);else if(O=="TRUE")W.t="b",W.v=!0;else if(O=="FALSE")W.t="b",W.v=!1;else if(!isNaN(I=Nl(O)))W.t="n",g.cellText!==!1&&(W.w=O),W.v=I;else if(!isNaN(Cp(O).getDate())||M&&O.match(M)){W.z=g.dateNF||_r[14];var F=0;M&&O.match(M)&&(O=rme(O,g.dateNF,O.match(M)||[]),F=1),g.cellDates?(W.t="d",W.v=ns(O,F)):(W.t="n",W.v=Is(ns(O,F))),g.cellText!==!1&&(W.w=pu(W.z,W.v instanceof Date?Is(W.v):W.v)),g.cellNF||delete W.z}else W.t="s",W.v=O;if(W.t=="z"||(g.dense?(x[w]||(x[w]=[]),x[w][T]=W):x[Vn({c:T,r:w})]=W),A=N+1,P=h.charCodeAt(A),v.e.c<T&&(v.e.c=T),v.e.r<w&&(v.e.r=w),k==D)++T;else if(T=0,++w,g.sheetRows&&g.sheetRows<=w)return!0}e:for(;N<h.length;++N)switch(k=h.charCodeAt(N)){case 34:P===34&&(B=!B);break;case D:case 10:case 13:if(!B&&j())break e;break}return N-A>0&&j(),x["!ref"]=Lr(v),x}function a(h,f){return!(f&&f.PRN)||f.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?s(h,f):W0(e(h,f),f)}function o(h,f){var g="",p=f.type=="string"?[0,0,0,0]:Qve(h,f);switch(f.type){case"base64":g=Ul(h);break;case"binary":g=h;break;case"buffer":f.codepage==65001?g=h.toString("utf8"):f.codepage&&typeof lv<"u"||(g=En&&Buffer.isBuffer(h)?h.toString("binary"):I1(h));break;case"array":g=GE(h);break;case"string":g=h;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=Dm(g.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?g=Dm(g):f.type=="binary"&&typeof lv<"u",g.slice(0,19)=="socialcalc:version:"?TV.to_sheet(f.type=="string"?g:Dm(g),f):a(g,f)}function l(h,f){return dd(o(h,f),f)}function u(h){for(var f=[],g=Zn(h["!ref"]),p,x=Array.isArray(h),v=g.s.r;v<=g.e.r;++v){for(var w=[],T=g.s.c;T<=g.e.c;++T){var I=Vn({r:v,c:T});if(p=x?(h[v]||[])[T]:h[I],!p||p.v==null){w.push("          ");continue}for(var A=(p.w||(zl(p),p.w)||"").slice(0,10);A.length<10;)A+=" ";w.push(A+(T===0?" ":""))}f.push(w.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})(),wO=(function(){function n(V,Y,ee){if(V){Us(V,V.l||0);for(var ne=ee.Enum||Ie;V.l<V.length;){var de=V.read_shift(2),De=ne[de]||ne[65535],Se=V.read_shift(2),Fe=V.l+Se,je=De.f&&De.f(V,Se,ee);if(V.l=Fe,Y(je,De,de))return}}}function e(V,Y){switch(Y.type){case"base64":return t(Wa(Ul(V)),Y);case"binary":return t(Wa(V),Y);case"buffer":case"array":return t(V,Y)}throw"Unsupported type "+Y.type}function t(V,Y){if(!V)return V;var ee=Y||{},ne=ee.dense?[]:{},de="Sheet1",De="",Se=0,Fe={},je=[],Qe=[],gt={s:{r:0,c:0},e:{r:0,c:0}},_t=ee.sheetRows||0;if(V[2]==0&&(V[3]==8||V[3]==9)&&V.length>=16&&V[14]==5&&V[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(V[2]==2)ee.Enum=Ie,n(V,function(Oe,Xt,Ae){switch(Ae){case 0:ee.vers=Oe,Oe>=4096&&(ee.qpro=!0);break;case 6:gt=Oe;break;case 204:Oe&&(De=Oe);break;case 222:De=Oe;break;case 15:case 51:ee.qpro||(Oe[1].v=Oe[1].v.slice(1));case 13:case 14:case 16:Ae==14&&(Oe[2]&112)==112&&(Oe[2]&15)>1&&(Oe[2]&15)<15&&(Oe[1].z=ee.dateNF||_r[14],ee.cellDates&&(Oe[1].t="d",Oe[1].v=B7(Oe[1].v))),ee.qpro&&Oe[3]>Se&&(ne["!ref"]=Lr(gt),Fe[de]=ne,je.push(de),ne=ee.dense?[]:{},gt={s:{r:0,c:0},e:{r:0,c:0}},Se=Oe[3],de=De||"Sheet"+(Se+1),De="");var ge=ee.dense?(ne[Oe[0].r]||[])[Oe[0].c]:ne[Vn(Oe[0])];if(ge){ge.t=Oe[1].t,ge.v=Oe[1].v,Oe[1].z!=null&&(ge.z=Oe[1].z),Oe[1].f!=null&&(ge.f=Oe[1].f);break}ee.dense?(ne[Oe[0].r]||(ne[Oe[0].r]=[]),ne[Oe[0].r][Oe[0].c]=Oe[1]):ne[Vn(Oe[0])]=Oe[1];break}},ee);else if(V[2]==26||V[2]==14)ee.Enum=ie,V[2]==14&&(ee.qpro=!0,V.l=0),n(V,function(Oe,Xt,Ae){switch(Ae){case 204:de=Oe;break;case 22:Oe[1].v=Oe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Oe[3]>Se&&(ne["!ref"]=Lr(gt),Fe[de]=ne,je.push(de),ne=ee.dense?[]:{},gt={s:{r:0,c:0},e:{r:0,c:0}},Se=Oe[3],de="Sheet"+(Se+1)),_t>0&&Oe[0].r>=_t)break;ee.dense?(ne[Oe[0].r]||(ne[Oe[0].r]=[]),ne[Oe[0].r][Oe[0].c]=Oe[1]):ne[Vn(Oe[0])]=Oe[1],gt.e.c<Oe[0].c&&(gt.e.c=Oe[0].c),gt.e.r<Oe[0].r&&(gt.e.r=Oe[0].r);break;case 27:Oe[14e3]&&(Qe[Oe[14e3][0]]=Oe[14e3][1]);break;case 1537:Qe[Oe[0]]=Oe[1],Oe[0]==Se&&(de=Oe[1]);break}},ee);else throw new Error("Unrecognized LOTUS BOF "+V[2]);if(ne["!ref"]=Lr(gt),Fe[De||de]=ne,je.push(De||de),!Qe.length)return{SheetNames:je,Sheets:Fe};for(var Lt={},nn=[],zt=0;zt<Qe.length;++zt)Fe[je[zt]]?(nn.push(Qe[zt]||je[zt]),Lt[Qe[zt]]=Fe[Qe[zt]]||Fe[je[zt]]):(nn.push(Qe[zt]),Lt[Qe[zt]]={"!ref":"A1"});return{SheetNames:nn,Sheets:Lt}}function r(V,Y){var ee=Y||{};if(+ee.codepage>=0&&bp(+ee.codepage),ee.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=Ss(),de=Zn(V["!ref"]),De=Array.isArray(V),Se=[];nt(ne,0,s(1030)),nt(ne,6,l(de));for(var Fe=Math.min(de.e.r,8191),je=de.s.r;je<=Fe;++je)for(var Qe=Si(je),gt=de.s.c;gt<=de.e.c;++gt){je===de.s.r&&(Se[gt]=Ui(gt));var _t=Se[gt]+Qe,Lt=De?(V[je]||[])[gt]:V[_t];if(!(!Lt||Lt.t=="z"))if(Lt.t=="n")(Lt.v|0)==Lt.v&&Lt.v>=-32768&&Lt.v<=32767?nt(ne,13,p(je,gt,Lt.v)):nt(ne,14,v(je,gt,Lt.v));else{var nn=zl(Lt);nt(ne,15,f(je,gt,nn.slice(0,239)))}}return nt(ne,1),ne.end()}function i(V,Y){var ee=Y||{};if(+ee.codepage>=0&&bp(+ee.codepage),ee.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=Ss();nt(ne,0,a(V));for(var de=0,De=0;de<V.SheetNames.length;++de)(V.Sheets[V.SheetNames[de]]||{})["!ref"]&&nt(ne,27,Re(V.SheetNames[de],De++));var Se=0;for(de=0;de<V.SheetNames.length;++de){var Fe=V.Sheets[V.SheetNames[de]];if(!(!Fe||!Fe["!ref"])){for(var je=Zn(Fe["!ref"]),Qe=Array.isArray(Fe),gt=[],_t=Math.min(je.e.r,8191),Lt=je.s.r;Lt<=_t;++Lt)for(var nn=Si(Lt),zt=je.s.c;zt<=je.e.c;++zt){Lt===je.s.r&&(gt[zt]=Ui(zt));var Oe=gt[zt]+nn,Xt=Qe?(Fe[Lt]||[])[zt]:Fe[Oe];if(!(!Xt||Xt.t=="z"))if(Xt.t=="n")nt(ne,23,j(Lt,zt,Se,Xt.v));else{var Ae=zl(Xt);nt(ne,22,k(Lt,zt,Se,Ae.slice(0,239)))}}++Se}}return nt(ne,1),ne.end()}function s(V){var Y=Ce(2);return Y.write_shift(2,V),Y}function a(V){var Y=Ce(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var ee=0,ne=0,de=0,De=0;De<V.SheetNames.length;++De){var Se=V.SheetNames[De],Fe=V.Sheets[Se];if(!(!Fe||!Fe["!ref"])){++de;var je=ta(Fe["!ref"]);ee<je.e.r&&(ee=je.e.r),ne<je.e.c&&(ne=je.e.c)}}return ee>8191&&(ee=8191),Y.write_shift(2,ee),Y.write_shift(1,de),Y.write_shift(1,ne),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function o(V,Y,ee){var ne={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&ee.qpro?(ne.s.c=V.read_shift(1),V.l++,ne.s.r=V.read_shift(2),ne.e.c=V.read_shift(1),V.l++,ne.e.r=V.read_shift(2),ne):(ne.s.c=V.read_shift(2),ne.s.r=V.read_shift(2),Y==12&&ee.qpro&&(V.l+=2),ne.e.c=V.read_shift(2),ne.e.r=V.read_shift(2),Y==12&&ee.qpro&&(V.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function l(V){var Y=Ce(8);return Y.write_shift(2,V.s.c),Y.write_shift(2,V.s.r),Y.write_shift(2,V.e.c),Y.write_shift(2,V.e.r),Y}function u(V,Y,ee){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return ee.qpro&&ee.vers!=20768?(ne[0].c=V.read_shift(1),ne[3]=V.read_shift(1),ne[0].r=V.read_shift(2),V.l+=2):(ne[2]=V.read_shift(1),ne[0].c=V.read_shift(2),ne[0].r=V.read_shift(2)),ne}function h(V,Y,ee){var ne=V.l+Y,de=u(V,Y,ee);if(de[1].t="s",ee.vers==20768){V.l++;var De=V.read_shift(1);return de[1].v=V.read_shift(De,"utf8"),de}return ee.qpro&&V.l++,de[1].v=V.read_shift(ne-V.l,"cstr"),de}function f(V,Y,ee){var ne=Ce(7+ee.length);ne.write_shift(1,255),ne.write_shift(2,Y),ne.write_shift(2,V),ne.write_shift(1,39);for(var de=0;de<ne.length;++de){var De=ee.charCodeAt(de);ne.write_shift(1,De>=128?95:De)}return ne.write_shift(1,0),ne}function g(V,Y,ee){var ne=u(V,Y,ee);return ne[1].v=V.read_shift(2,"i"),ne}function p(V,Y,ee){var ne=Ce(7);return ne.write_shift(1,255),ne.write_shift(2,Y),ne.write_shift(2,V),ne.write_shift(2,ee,"i"),ne}function x(V,Y,ee){var ne=u(V,Y,ee);return ne[1].v=V.read_shift(8,"f"),ne}function v(V,Y,ee){var ne=Ce(13);return ne.write_shift(1,255),ne.write_shift(2,Y),ne.write_shift(2,V),ne.write_shift(8,ee,"f"),ne}function w(V,Y,ee){var ne=V.l+Y,de=u(V,Y,ee);if(de[1].v=V.read_shift(8,"f"),ee.qpro)V.l=ne;else{var De=V.read_shift(2);N(V.slice(V.l,V.l+De),de),V.l+=De}return de}function T(V,Y,ee){var ne=Y&32768;return Y&=-32769,Y=(ne?V:0)+(Y>=8192?Y-16384:Y),(ne?"":"$")+(ee?Ui(Y):Si(Y))}var I={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},A=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(V,Y){Us(V,0);for(var ee=[],ne=0,de="",De="",Se="",Fe="";V.l<V.length;){var je=V[V.l++];switch(je){case 0:ee.push(V.read_shift(8,"f"));break;case 1:De=T(Y[0].c,V.read_shift(2),!0),de=T(Y[0].r,V.read_shift(2),!1),ee.push(De+de);break;case 2:{var Qe=T(Y[0].c,V.read_shift(2),!0),gt=T(Y[0].r,V.read_shift(2),!1);De=T(Y[0].c,V.read_shift(2),!0),de=T(Y[0].r,V.read_shift(2),!1),ee.push(Qe+gt+":"+De+de)}break;case 3:if(V.l<V.length){console.error("WK1 premature formula end");return}break;case 4:ee.push("("+ee.pop()+")");break;case 5:ee.push(V.read_shift(2));break;case 6:{for(var _t="";je=V[V.l++];)_t+=String.fromCharCode(je);ee.push('"'+_t.replace(/"/g,'""')+'"')}break;case 8:ee.push("-"+ee.pop());break;case 23:ee.push("+"+ee.pop());break;case 22:ee.push("NOT("+ee.pop()+")");break;case 20:case 21:Fe=ee.pop(),Se=ee.pop(),ee.push(["AND","OR"][je-20]+"("+Se+","+Fe+")");break;default:if(je<32&&A[je])Fe=ee.pop(),Se=ee.pop(),ee.push(Se+A[je]+Fe);else if(I[je]){if(ne=I[je][1],ne==69&&(ne=V[V.l++]),ne>ee.length){console.error("WK1 bad formula parse 0x"+je.toString(16)+":|"+ee.join("|")+"|");return}var Lt=ee.slice(-ne);ee.length-=ne,ee.push(I[je][0]+"("+Lt.join(",")+")")}else return je<=7?console.error("WK1 invalid opcode "+je.toString(16)):je<=24?console.error("WK1 unsupported op "+je.toString(16)):je<=30?console.error("WK1 invalid opcode "+je.toString(16)):je<=115?console.error("WK1 unsupported function opcode "+je.toString(16)):console.error("WK1 unrecognized opcode "+je.toString(16))}}ee.length==1?Y[1].f=""+ee[0]:console.error("WK1 bad formula parse |"+ee.join("|")+"|")}function D(V){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=V.read_shift(2),Y[3]=V[V.l++],Y[0].c=V[V.l++],Y}function B(V,Y){var ee=D(V);return ee[1].t="s",ee[1].v=V.read_shift(Y-4,"cstr"),ee}function k(V,Y,ee,ne){var de=Ce(6+ne.length);de.write_shift(2,V),de.write_shift(1,ee),de.write_shift(1,Y),de.write_shift(1,39);for(var De=0;De<ne.length;++De){var Se=ne.charCodeAt(De);de.write_shift(1,Se>=128?95:Se)}return de.write_shift(1,0),de}function P(V,Y){var ee=D(V);ee[1].v=V.read_shift(2);var ne=ee[1].v>>1;if(ee[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return ee[1].v=ne,ee}function M(V,Y){var ee=D(V),ne=V.read_shift(4),de=V.read_shift(4),De=V.read_shift(2);if(De==65535)return ne===0&&de===3221225472?(ee[1].t="e",ee[1].v=15):ne===0&&de===3489660928?(ee[1].t="e",ee[1].v=42):ee[1].v=0,ee;var Se=De&32768;return De=(De&32767)-16446,ee[1].v=(1-Se*2)*(de*Math.pow(2,De+32)+ne*Math.pow(2,De)),ee}function j(V,Y,ee,ne){var de=Ce(14);if(de.write_shift(2,V),de.write_shift(1,ee),de.write_shift(1,Y),ne==0)return de.write_shift(4,0),de.write_shift(4,0),de.write_shift(2,65535),de;var De=0,Se=0,Fe=0,je=0;return ne<0&&(De=1,ne=-ne),Se=Math.log2(ne)|0,ne/=Math.pow(2,Se-31),je=ne>>>0,(je&2147483648)==0&&(ne/=2,++Se,je=ne>>>0),ne-=je,je|=2147483648,je>>>=0,ne*=Math.pow(2,32),Fe=ne>>>0,de.write_shift(4,Fe),de.write_shift(4,je),Se+=16383+(De?32768:0),de.write_shift(2,Se),de}function O(V,Y){var ee=M(V);return V.l+=Y-14,ee}function W(V,Y){var ee=D(V),ne=V.read_shift(4);return ee[1].v=ne>>6,ee}function F(V,Y){var ee=D(V),ne=V.read_shift(8,"f");return ee[1].v=ne,ee}function Te(V,Y){var ee=F(V);return V.l+=Y-10,ee}function Me(V,Y){return V[V.l+Y-1]==0?V.read_shift(Y,"cstr"):""}function Le(V,Y){var ee=V[V.l++];ee>Y-1&&(ee=Y-1);for(var ne="";ne.length<ee;)ne+=String.fromCharCode(V[V.l++]);return ne}function be(V,Y,ee){if(!(!ee.qpro||Y<21)){var ne=V.read_shift(1);V.l+=17,V.l+=1,V.l+=2;var de=V.read_shift(Y-21,"cstr");return[ne,de]}}function ce(V,Y){for(var ee={},ne=V.l+Y;V.l<ne;){var de=V.read_shift(2);if(de==14e3){for(ee[de]=[0,""],ee[de][0]=V.read_shift(2);V[V.l];)ee[de][1]+=String.fromCharCode(V[V.l]),V.l++;V.l++}}return ee}function Re(V,Y){var ee=Ce(5+V.length);ee.write_shift(2,14e3),ee.write_shift(2,Y);for(var ne=0;ne<V.length;++ne){var de=V.charCodeAt(ne);ee[ee.l++]=de>127?95:de}return ee[ee.l++]=0,ee}var Ie={0:{n:"BOF",f:xV},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Me},222:{n:"SHEETNAMELP",f:Le},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:B},23:{n:"NUMBER17",f:M},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:W},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:Te},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:be},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),Bpe=/^\s|\s$|[\t\n\r]/;function IV(n,e){if(!e.bookSST)return"";var t=[Fr];t[t.length]=tt("sst",null,{xmlns:$0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Bpe)&&(s+=' xml:space="preserve"'),s+=">"+Fn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function Upe(n){return[n.read_shift(4),n.read_shift(4)]}function zpe(n,e){return e||(e=Ce(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var $pe=Lme;function Wpe(n){var e=Ss();Ge(e,159,zpe(n));for(var t=0;t<n.length;++t)Ge(e,19,$pe(n[t]));return Ge(e,160),e.end()}function Hpe(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function AV(n){var e=0,t,r=Hpe(n),i=r.length+1,s,a,o,l,u;for(t=Zh(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var Kpe=(function(){function n(i,s){switch(s.type){case"base64":return e(Ul(i),s);case"binary":return e(i,s);case"buffer":return e(En&&Buffer.isBuffer(i)?i.toString("binary"):I1(i),s);case"array":return e(GE(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(h,f){Array.isArray(o)&&(o[f]=[]);for(var g=/\\\w+\b/g,p=0,x,v=-1;x=g.exec(h);){switch(x[0]){case"\\cell":var w=h.slice(p,g.lastIndex-x[0].length);if(w[0]==" "&&(w=w.slice(1)),++v,w.length){var T={v:w,t:"s"};Array.isArray(o)?o[f][v]=T:o[Vn({r:f,c:v})]=T}break}p=g.lastIndex}v>u.e.c&&(u.e.c=v)}),o["!ref"]=Lr(u),o}function t(i,s){return dd(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=Zn(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var h=a.s.c;h<=a.e.c;++h)s.push("\\cellx"+(h+1));for(s.push("\\pard\\intbl"),h=a.s.c;h<=a.e.c;++h){var f=Vn({r:u,c:h});o=l?(i[u]||[])[h]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(zl(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function SO(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var Ype=6,Ll=Ype;function yv(n){return Math.floor((n+Math.round(128/Ll)/256)*Ll)}function _v(n){return Math.floor((n-5)/Ll*100+.5)/100}function jI(n){return Math.round((n*Ll+5)/Ll*256)/256}function iC(n){n.width?(n.wpx=yv(n.width),n.wch=_v(n.wpx),n.MDW=Ll):n.wpx?(n.wch=_v(n.wpx),n.width=jI(n.wch),n.MDW=Ll):typeof n.wch=="number"&&(n.width=jI(n.wch),n.wpx=yv(n.width),n.MDW=Ll),n.customWidth&&delete n.customWidth}var Xpe=96,bV=Xpe;function xv(n){return n*96/bV}function RV(n){return n*bV/96}function qpe(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=tt("numFmt",null,{numFmtId:r,formatCode:Fn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=tt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function Zpe(n){var e=[];return e[e.length]=tt("cellXfs",null),n.forEach(function(t){e[e.length]=tt("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=tt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function CV(n,e){var t=[Fr,tt("styleSheet",null,{xmlns:$0[0],"xmlns:vt":ii.vt})],r;return n.SSF&&(r=qpe(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Zpe(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function Qpe(n,e){var t=n.read_shift(2),r=zi(n);return[t,r]}function Jpe(n,e,t){t||(t=Ce(6+4*e.length)),t.write_shift(2,n),ai(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function e1e(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=Bme(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=Gme(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=zi(n),r}function t1e(n,e){e||(e=Ce(153)),e.write_shift(2,n.sz*20),Ume(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),mv(n.color,e);var r=0;return r=2,e.write_shift(1,r),ai(n.name,e),e.length>e.l?e.slice(0,e.l):e}var n1e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],FS,r1e=Xo;function TO(n,e){e||(e=Ce(84)),FS||(FS=HR(n1e));var t=FS[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(mv({auto:1},e),mv({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function i1e(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function PV(n,e,t){t||(t=Ce(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Wg(n,e){return e||(e=Ce(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var s1e=Xo;function a1e(n,e){return e||(e=Ce(51)),e.write_shift(1,0),Wg(null,e),Wg(null,e),Wg(null,e),Wg(null,e),Wg(null,e),e.length>e.l?e.slice(0,e.l):e}function o1e(n,e){return e||(e=Ce(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),gv(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function l1e(n,e,t){var r=Ce(2052);return r.write_shift(4,n),gv(e,r),gv(t,r),r.length>r.l?r.slice(0,r.l):r}function c1e(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Ge(n,615,eo(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Ge(n,44,Jpe(i,e[i]))}),Ge(n,616))}}function u1e(n){var e=1;Ge(n,611,eo(e)),Ge(n,43,t1e({sz:12,color:{theme:1},name:"Calibri",family:2})),Ge(n,612)}function h1e(n){var e=2;Ge(n,603,eo(e)),Ge(n,45,TO({patternType:"none"})),Ge(n,45,TO({patternType:"gray125"})),Ge(n,604)}function d1e(n){var e=1;Ge(n,613,eo(e)),Ge(n,46,a1e()),Ge(n,614)}function f1e(n){var e=1;Ge(n,626,eo(e)),Ge(n,47,PV({numFmtId:0},65535)),Ge(n,627)}function g1e(n,e){Ge(n,617,eo(e.length)),e.forEach(function(t){Ge(n,47,PV(t,0))}),Ge(n,618)}function m1e(n){var e=1;Ge(n,619,eo(e)),Ge(n,48,o1e({xfId:0,name:"Normal"})),Ge(n,620)}function p1e(n){var e=0;Ge(n,505,eo(e)),Ge(n,506)}function y1e(n){var e=0;Ge(n,508,l1e(e,"TableStyleMedium9","PivotStyleMedium4")),Ge(n,509)}function _1e(n,e){var t=Ss();return Ge(t,278),c1e(t,n.SSF),u1e(t),h1e(t),d1e(t),f1e(t),g1e(t,e.cellXfs),m1e(t),p1e(t),y1e(t),Ge(t,279),t.end()}function kV(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[Fr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function x1e(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:zi(n)}}function v1e(n){var e=Ce(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),ai(n.name,e),e.slice(0,e.l)}function E1e(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function w1e(n){var e=Ce(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function S1e(n,e){var t=Ce(8+2*e.length);return t.write_shift(4,n),ai(e,t),t.slice(0,t.l)}function T1e(n){return n.l+=4,n.read_shift(4)!=0}function I1e(n,e){var t=Ce(8);return t.write_shift(4,n),t.write_shift(4,1),t}function A1e(){var n=Ss();return Ge(n,332),Ge(n,334,eo(1)),Ge(n,335,v1e({name:"XLDAPR",version:12e4,flags:3496657072})),Ge(n,336),Ge(n,339,S1e(1,"XLDAPR")),Ge(n,52),Ge(n,35,eo(514)),Ge(n,4096,eo(0)),Ge(n,4097,ma(1)),Ge(n,36),Ge(n,53),Ge(n,340),Ge(n,337,I1e(1)),Ge(n,51,w1e([[1,0]])),Ge(n,338),Ge(n,333),n.end()}function MV(){var n=[Fr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function b1e(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=Vn(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Of=1024;function NV(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[tt("xml",null,{"xmlns:v":Ws.v,"xmlns:o":Ws.o,"xmlns:x":Ws.x,"xmlns:mv":Ws.mv}).replace(/\/>/,">"),tt("o:shapelayout",tt("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),tt("v:shapetype",[tt("v:stroke",null,{joinstyle:"miter"}),tt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];Of<n*1e3;)Of+=1e3;return e.forEach(function(s){var a=si(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?tt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=tt("v:fill",l,o),h={on:"t",obscured:"t"};++Of,i=i.concat(["<v:shape"+kp({id:"_x0000_s"+Of,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,tt("v:shadow",null,h),tt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ei("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Ei("x:AutoFill","False"),Ei("x:Row",String(a.r)),Ei("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function LV(n){var e=[Fr,tt("comments",null,{xmlns:$0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=Fn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=t.indexOf(Fn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Ei("t",Fn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(Ei("t",Fn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function R1e(n,e,t){var r=[Fr,tt("ThreadedComments",null,{xmlns:ii.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(tt("threadedComment",Ei("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function C1e(n){var e=[Fr,tt("personList",null,{xmlns:ii.TCMNT,"xmlns:x":$0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(tt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function P1e(n){var e={};e.iauthor=n.read_shift(4);var t=pd(n);return e.rfx=t.s,e.ref=Vn(t.s),n.l+=16,e}function k1e(n,e){return e==null&&(e=Ce(36)),e.write_shift(4,n[1].iauthor),H0(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var M1e=zi;function N1e(n){return ai(n.slice(0,54))}function L1e(n){var e=Ss(),t=[];return Ge(e,628),Ge(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Ge(e,632,N1e(i.a)))})}),Ge(e,631),Ge(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:si(r[0]),e:si(r[0])};Ge(e,635,k1e([s,i])),i.t&&i.t.length>0&&Ge(e,637,Dme(i)),Ge(e,636),delete i.iauthor})}),Ge(e,634),Ge(e,629),e.end()}function O1e(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Gn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var OV=["xlsb","xlsm","xlam","biff8","xla"],D1e=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,h=a.length>0?parseInt(a,10)|0:0;return o?h+=e.c:--h,l?u+=e.r:--u,i+(o?"":"$")+Ui(h)+(l?"":"$")+Si(u)}return function(i,s){return e=s,i.replace(n,t)}})(),sC=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,aC=(function(){return function(e,t){return e.replace(sC,function(r,i,s,a,o,l){var u=JR(a)-(s?0:t.c),h=QR(l)-(o?0:t.r),f=h==0?"":o?h+1:"["+h+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+f+"C"+g})}})();function F1e(n,e){return n.replace(sC,function(t,r,i,s,a,o){return r+(i=="$"?i+s:Ui(JR(s)+e.c))+(a=="$"?a+o:Si(QR(o)+e.r))})}function j1e(n){return n.length!=1}function Pr(n){n.l+=1}function yu(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function DV(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return FV(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=yu(n),o=yu(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function FV(n){var e=yu(n),t=yu(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function V1e(n,e,t){if(t.biff<8)return FV(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=yu(n),a=yu(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function jV(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return G1e(n);var r=n.read_shift(t&&t.biff==12?4:2),i=yu(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function G1e(n){var e=yu(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function B1e(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function U1e(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return z1e(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function z1e(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function $1e(n,e,t){var r=(n[n.l++]&96)>>5,i=DV(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function W1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=DV(n,s,t);return[r,i,a]}function H1e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function K1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function Y1e(n,e,t){var r=(n[n.l++]&96)>>5,i=V1e(n,e-1,t);return[r,i]}function X1e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function IO(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function q1e(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function Z1e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function Q1e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function J1e(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function eye(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function VV(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function tye(n){return n.read_shift(2),VV(n)}function nye(n){return n.read_shift(2),VV(n)}function rye(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=jV(n,0,t);return[r,i]}function iye(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=U1e(n,0,t);return[r,i]}function sye(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=jV(n,0,t);return[r,i,s]}function aye(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[a_e[i],UV[i],r]}function oye(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:lye(n);return[i,(s[0]===0?UV:s_e)[s[1]]]}function lye(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function cye(n,e,t){n.l+=t&&t.biff==2?3:4}function uye(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function hye(n){return n.l++,R1[n.read_shift(1)]}function dye(n){return n.l++,n.read_shift(2)}function fye(n){return n.l++,n.read_shift(1)!==0}function gye(n){return n.l++,K0(n)}function mye(n,e,t){return n.l++,EV(n,e-1,t)}function pye(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=spe(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=R1[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=K0(n);break;case 2:t[1]=cpe(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function yye(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?pd:dpe)(n));return i}function _ye(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=pye(n,t.biff);return a}function xye(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function vye(n,e,t){if(t.biff==5)return Eye(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function Eye(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function wye(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Sye(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Tye(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function Iye(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var Aye=Xo,bye=Xo,Rye=Xo;function C1(n,e,t){return n.l+=2,[B1e(n)]}function oC(n){return n.l+=6,[]}var Cye=C1,Pye=oC,kye=oC,Mye=C1;function GV(n){return n.l+=2,[xV(n),n.read_shift(2)&1]}var Nye=C1,Lye=GV,Oye=oC,Dye=C1,Fye=C1,jye=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Vye(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=jye[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function Gye(n){return n.l+=2,[n.read_shift(4)]}function Bye(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function Uye(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function zye(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function $ye(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function Wye(n){return n.l+=4,[0,0]}var AO={1:{n:"PtgExp",f:uye},2:{n:"PtgTbl",f:Rye},3:{n:"PtgAdd",f:Pr},4:{n:"PtgSub",f:Pr},5:{n:"PtgMul",f:Pr},6:{n:"PtgDiv",f:Pr},7:{n:"PtgPower",f:Pr},8:{n:"PtgConcat",f:Pr},9:{n:"PtgLt",f:Pr},10:{n:"PtgLe",f:Pr},11:{n:"PtgEq",f:Pr},12:{n:"PtgGe",f:Pr},13:{n:"PtgGt",f:Pr},14:{n:"PtgNe",f:Pr},15:{n:"PtgIsect",f:Pr},16:{n:"PtgUnion",f:Pr},17:{n:"PtgRange",f:Pr},18:{n:"PtgUplus",f:Pr},19:{n:"PtgUminus",f:Pr},20:{n:"PtgPercent",f:Pr},21:{n:"PtgParen",f:Pr},22:{n:"PtgMissArg",f:Pr},23:{n:"PtgStr",f:mye},26:{n:"PtgSheet",f:Bye},27:{n:"PtgEndSheet",f:Uye},28:{n:"PtgErr",f:hye},29:{n:"PtgBool",f:fye},30:{n:"PtgInt",f:dye},31:{n:"PtgNum",f:gye},32:{n:"PtgArray",f:X1e},33:{n:"PtgFunc",f:aye},34:{n:"PtgFuncVar",f:oye},35:{n:"PtgName",f:xye},36:{n:"PtgRef",f:rye},37:{n:"PtgArea",f:$1e},38:{n:"PtgMemArea",f:wye},39:{n:"PtgMemErr",f:Aye},40:{n:"PtgMemNoMem",f:bye},41:{n:"PtgMemFunc",f:Sye},42:{n:"PtgRefErr",f:Tye},43:{n:"PtgAreaErr",f:H1e},44:{n:"PtgRefN",f:iye},45:{n:"PtgAreaN",f:Y1e},46:{n:"PtgMemAreaN",f:zye},47:{n:"PtgMemNoMemN",f:$ye},57:{n:"PtgNameX",f:vye},58:{n:"PtgRef3d",f:sye},59:{n:"PtgArea3d",f:W1e},60:{n:"PtgRefErr3d",f:Iye},61:{n:"PtgAreaErr3d",f:K1e},255:{}},Hye={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Kye={1:{n:"PtgElfLel",f:GV},2:{n:"PtgElfRw",f:Dye},3:{n:"PtgElfCol",f:Cye},6:{n:"PtgElfRwV",f:Fye},7:{n:"PtgElfColV",f:Mye},10:{n:"PtgElfRadical",f:Nye},11:{n:"PtgElfRadicalS",f:Oye},13:{n:"PtgElfColS",f:Pye},15:{n:"PtgElfColSV",f:kye},16:{n:"PtgElfRadicalLel",f:Lye},25:{n:"PtgList",f:Vye},29:{n:"PtgSxName",f:Gye},255:{}},Yye={0:{n:"PtgAttrNoop",f:Wye},1:{n:"PtgAttrSemi",f:eye},2:{n:"PtgAttrIf",f:Q1e},4:{n:"PtgAttrChoose",f:q1e},8:{n:"PtgAttrGoto",f:Z1e},16:{n:"PtgAttrSum",f:cye},32:{n:"PtgAttrBaxcel",f:IO},33:{n:"PtgAttrBaxcel",f:IO},64:{n:"PtgAttrSpace",f:tye},65:{n:"PtgAttrSpaceSemi",f:nye},128:{n:"PtgAttrIfError",f:J1e},255:{}};function Xye(n,e,t,r){if(r.biff<8)return Xo(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=_ye(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=yye(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(Xo(n,e)),s}function qye(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=AO[s]||AO[Hye[s]],(s===24||s===25)&&(i=(s===24?Kye:Yye)[n[n.l+1]]),!i||!i.f?Xo(n,e):a.push([i.n,i.f(n,e,t)]);return a}function Zye(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var Qye={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Jye(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function BV(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function bO(n,e,t){var r=BV(n,e,t);return r=="#REF"?r:Jye(r,t)}function b0(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,h,f=0,g=0,p,x="";if(!n[0]||!n[0][0])return"";for(var v=-1,w="",T=0,I=n[0].length;T<I;++T){var A=n[0][T];switch(A[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),v>=0){switch(n[0][v][1][0]){case 0:w=pr(" ",n[0][v][1][1]);break;case 1:w=pr("\r",n[0][v][1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][v][1][0])}u=u+w,v=-1}o.push(u+Qye[A[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=jm(A[1][1],a,i),o.push(Vm(h,s));break;case"PtgRefN":h=t?jm(A[1][1],t,i):A[1][1],o.push(Vm(h,s));break;case"PtgRef3d":f=A[1][1],h=jm(A[1][2],a,i),x=bO(r,f,i),o.push(x+"!"+Vm(h,s));break;case"PtgFunc":case"PtgFuncVar":var N=A[1][0],D=A[1][1];N||(N=0),N&=127;var B=N==0?[]:o.slice(-N);o.length-=N,D==="User"&&(D=B.shift()),o.push(D+"("+B.join(",")+")");break;case"PtgBool":o.push(A[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(A[1]);break;case"PtgNum":o.push(String(A[1]));break;case"PtgStr":o.push('"'+A[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(A[1]);break;case"PtgAreaN":p=hO(A[1][1],t?{s:t}:a,i),o.push(OS(p,i));break;case"PtgArea":p=hO(A[1][1],a,i),o.push(OS(p,i));break;case"PtgArea3d":f=A[1][1],p=A[1][2],x=bO(r,f,i),o.push(x+"!"+OS(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=A[1][2];var k=(r.names||[])[g-1]||(r[0]||[])[g],P=k?k.Name:"SH33TJSNAME"+String(g);P&&P.slice(0,6)=="_xlfn."&&!i.xlfn&&(P=P.slice(6)),o.push(P);break;case"PtgNameX":var M=A[1][1];g=A[1][2];var j;if(i.biff<=5)M<0&&(M=-M),r[M]&&(j=r[M][g]);else{var O="";if(((r[M]||[])[0]||[])[0]==14849||(((r[M]||[])[0]||[])[0]==1025?r[M][g]&&r[M][g].itab>0&&(O=r.SheetNames[r[M][g].itab-1]+"!"):O=r.SheetNames[g-1]+"!"),r[M]&&r[M][g])O+=r[M][g].Name;else if(r[0]&&r[0][g])O+=r[0][g].Name;else{var W=(BV(r,M,i)||"").split(";;");W[g-1]?O=W[g-1]:O+="SH33TJSERRX"}o.push(O);break}j||(j={Name:"SH33TJSERRY"}),o.push(j.Name);break;case"PtgParen":var F="(",Te=")";if(v>=0){switch(w="",n[0][v][1][0]){case 2:F=pr(" ",n[0][v][1][1])+F;break;case 3:F=pr("\r",n[0][v][1][1])+F;break;case 4:Te=pr(" ",n[0][v][1][1])+Te;break;case 5:Te=pr("\r",n[0][v][1][1])+Te;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][v][1][0])}v=-1}o.push(F+o.pop()+Te);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:A[1][1],r:A[1][0]};var Me={c:t.c,r:t.r};if(r.sharedf[Vn(h)]){var Le=r.sharedf[Vn(h)];o.push(b0(Le,a,Me,r,i))}else{var be=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(h.c<u[0].s.c||h.c>u[0].e.c)&&!(h.r<u[0].s.r||h.r>u[0].e.r)){o.push(b0(u[1],a,Me,r,i)),be=!0;break}be||o.push(A[1])}break;case"PtgArray":o.push("{"+Zye(A[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+A[1].idx+"[#"+A[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(A));default:throw new Error("Unrecognized Formula Token: "+String(A))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&v>=0&&ce.indexOf(n[0][T][0])==-1){A=n[0][v];var Re=!0;switch(A[1][0]){case 4:Re=!1;case 0:w=pr(" ",A[1][1]);break;case 5:Re=!1;case 1:w=pr("\r",A[1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+A[1][0])}o.push((Re?w:"")+o.pop()+(Re?"":w)),v=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function e_e(n){if(n==null){var e=Ce(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Qh(n);return Qh(0)}function t_e(n,e,t,r,i){var s=Jh(e,t,i),a=e_e(n.v),o=Ce(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Ce(n.bf.length),h=0;h<n.bf.length;++h)u[h]=n.bf[h];var f=vi([s,a,o,u]);return f}function BE(n,e,t){var r=n.read_shift(4),i=qye(n,r,t),s=n.read_shift(4),a=s>0?Xye(n,s,i,t):null;return[i,a]}var n_e=BE,UE=BE,r_e=BE,i_e=BE,s_e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},UV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},a_e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function o_e(n){var e="of:="+n.replace(sC,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function l_e(n){return n.replace(/\./,"!")}var Gm=typeof Map<"u";function lC(n,e,t){var r=0,i=n.length;if(t){if(Gm?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Gm?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(Gm?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function zE(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Ll=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=_v(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=jI(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function zV(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function Au(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){j7(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function c_e(n,e,t){if(n&&n["!ref"]){var r=Zn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function u_e(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+Lr(n[t])+'"/>';return e+"</mergeCells>"}function h_e(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}s=!0,a.codeName=Pp(Fn(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+tt("outlinePr",null,u)}!s&&!o||(i[i.length]=tt("sheetPr",o,a))}var d_e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],f_e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function g_e(n){var e={sheet:1};return d_e.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),f_e.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=AV(n.password).toString(16).toUpperCase()),tt("sheetProtection",null,e)}function m_e(n){return zV(n),tt("pageMargins",null,n)}function p_e(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=tt("col",null,zE(i,r)));return t[t.length]="</cols>",t.join("")}function y_e(n,e,t,r){var i=typeof n.ref=="string"?n.ref:Lr(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=ta(i);a.s.r==a.e.r&&(a.e.r=ta(e["!ref"]).e.r,i=Lr(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),tt("autoFilter",null,{ref:i})}function __e(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),tt("sheetViews",tt("sheetView",null,i),{})}function x_e(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=R1[n.v];break;case"d":r&&r.cellDates?i=ns(n.v,-1).toISOString():(n=As(n),n.t="n",i=""+(n.v=Is(ns(n.v)))),typeof n.z>"u"&&(n.z=_r[14]);break;default:i=n.v;break}var o=Ei("v",Fn(i)),l={r:e},u=Au(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Ei("v",""+lC(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var h=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=tt("f",Fn(n.f),h)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(l.cm=1),tt("c",o,l)}function v_e(n,e,t,r){var i=[],s=[],a=Zn(n["!ref"]),o="",l,u="",h=[],f=0,g=0,p=n["!rows"],x=Array.isArray(n),v={r:u},w,T=-1;for(g=a.s.c;g<=a.e.c;++g)h[g]=Ui(g);for(f=a.s.r;f<=a.e.r;++f){for(s=[],u=Si(f),g=a.s.c;g<=a.e.c;++g){l=h[g]+u;var I=x?(n[f]||[])[g]:n[l];I!==void 0&&(o=x_e(I,l,n,e))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(v={r:u},p&&p[f]&&(w=p[f],w.hidden&&(v.hidden=1),T=-1,w.hpx?T=xv(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(v.ht=T,v.customHeight=1),w.level&&(v.outlineLevel=w.level)),i[i.length]=tt("row",s.join(""),v))}if(p)for(;f<p.length;++f)p&&p[f]&&(v={r:f+1},w=p[f],w.hidden&&(v.hidden=1),T=-1,w.hpx?T=xv(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(v.ht=T,v.customHeight=1),w.level&&(v.outlineLevel=w.level),i[i.length]=tt("row","",v));return i.join("")}function $V(n,e,t,r){var i=[Fr,tt("worksheet",null,{xmlns:$0[0],"xmlns:r":ii.r})],s=t.SheetNames[n],a=0,o="",l=t.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",h=Zn(u);if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),u=Lr(h)}r||(r={}),l["!comments"]=[];var f=[];h_e(l,t,n,e,i),i[i.length]=tt("dimension",null,{ref:u}),i[i.length]=__e(l,e,n,t),e.sheetFormat&&(i[i.length]=tt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=p_e(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=v_e(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=g_e(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=y_e(l["!autofilter"],l,t,n)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=u_e(l["!merges"]));var g=-1,p,x=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(x=Ln(r,-1,Fn(v[1].Target).replace(/#.*$/,""),pn.HLINK),p["r:id"]="rId"+x),(g=v[1].Target.indexOf("#"))>-1&&(p.location=Fn(v[1].Target.slice(g+1))),v[1].Tooltip&&(p.tooltip=Fn(v[1].Tooltip)),i[i.length]=tt("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=m_e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Ei("ignoredErrors",tt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=Ln(r,-1,"../drawings/drawing"+(n+1)+".xml",pn.DRAW),i[i.length]=tt("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=Ln(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",pn.VML),i[i.length]=tt("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function E_e(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function w_e(n,e,t){var r=Ce(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=xv(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:n,c:0},h=0;h<16;++h)if(!(e.s.c>h+1<<10||e.e.c<h<<10)){for(var f=-1,g=-1,p=h<<10;p<h+1<<10;++p){u.c=p;var x=Array.isArray(t)?(t[u.r]||[])[u.c]:t[Vn(u)];x&&(f<0&&(f=p),g=p)}f<0||(++o,r.write_shift(4,f),r.write_shift(4,g))}var v=r.l;return r.l=l,r.write_shift(4,o),r.l=v,r.length>r.l?r.slice(0,r.l):r}function S_e(n,e,t,r){var i=w_e(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Ge(n,0,i)}var T_e=pd,I_e=H0;function A_e(){}function b_e(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=Fme(n),t}function R_e(n,e,t){t==null&&(t=Ce(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return mv({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),sV(n,t),t.slice(0,t.l)}function C_e(n){var e=ba(n);return[e]}function P_e(n,e,t){return t==null&&(t=Ce(8)),fd(e,t)}function k_e(n){var e=gd(n);return[e]}function M_e(n,e,t){return t==null&&(t=Ce(4)),md(e,t)}function N_e(n){var e=ba(n),t=n.read_shift(1);return[e,t,"b"]}function L_e(n,e,t){return t==null&&(t=Ce(9)),fd(e,t),t.write_shift(1,n.v?1:0),t}function O_e(n){var e=gd(n),t=n.read_shift(1);return[e,t,"b"]}function D_e(n,e,t){return t==null&&(t=Ce(5)),md(e,t),t.write_shift(1,n.v?1:0),t}function F_e(n){var e=ba(n),t=n.read_shift(1);return[e,t,"e"]}function j_e(n,e,t){return t==null&&(t=Ce(9)),fd(e,t),t.write_shift(1,n.v),t}function V_e(n){var e=gd(n),t=n.read_shift(1);return[e,t,"e"]}function G_e(n,e,t){return t==null&&(t=Ce(8)),md(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function B_e(n){var e=ba(n),t=n.read_shift(4);return[e,t,"s"]}function U_e(n,e,t){return t==null&&(t=Ce(12)),fd(e,t),t.write_shift(4,e.v),t}function z_e(n){var e=gd(n),t=n.read_shift(4);return[e,t,"s"]}function $_e(n,e,t){return t==null&&(t=Ce(8)),md(e,t),t.write_shift(4,e.v),t}function W_e(n){var e=ba(n),t=K0(n);return[e,t,"n"]}function H_e(n,e,t){return t==null&&(t=Ce(16)),fd(e,t),Qh(n.v,t),t}function K_e(n){var e=gd(n),t=K0(n);return[e,t,"n"]}function Y_e(n,e,t){return t==null&&(t=Ce(12)),md(e,t),Qh(n.v,t),t}function X_e(n){var e=ba(n),t=aV(n);return[e,t,"n"]}function q_e(n,e,t){return t==null&&(t=Ce(12)),fd(e,t),oV(n.v,t),t}function Z_e(n){var e=gd(n),t=aV(n);return[e,t,"n"]}function Q_e(n,e,t){return t==null&&(t=Ce(8)),md(e,t),oV(n.v,t),t}function J_e(n){var e=ba(n),t=eC(n);return[e,t,"is"]}function exe(n){var e=ba(n),t=zi(n);return[e,t,"str"]}function txe(n,e,t){return t==null&&(t=Ce(12+4*n.v.length)),fd(e,t),ai(n.v,t),t.length>t.l?t.slice(0,t.l):t}function nxe(n){var e=gd(n),t=zi(n);return[e,t,"str"]}function rxe(n,e,t){return t==null&&(t=Ce(8+4*n.v.length)),md(e,t),ai(n.v,t),t.length>t.l?t.slice(0,t.l):t}function ixe(n,e,t){var r=n.l+e,i=ba(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=UE(n,r-n.l,t);a[3]=b0(o,null,i,t.supbooks,t)}else n.l=r;return a}function sxe(n,e,t){var r=n.l+e,i=ba(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=UE(n,r-n.l,t);a[3]=b0(o,null,i,t.supbooks,t)}else n.l=r;return a}function axe(n,e,t){var r=n.l+e,i=ba(n);i.r=t["!row"];var s=K0(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=UE(n,r-n.l,t);a[3]=b0(o,null,i,t.supbooks,t)}else n.l=r;return a}function oxe(n,e,t){var r=n.l+e,i=ba(n);i.r=t["!row"];var s=zi(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=UE(n,r-n.l,t);a[3]=b0(o,null,i,t.supbooks,t)}else n.l=r;return a}var lxe=pd,cxe=H0;function uxe(n,e){return e==null&&(e=Ce(4)),e.write_shift(4,n),e}function hxe(n,e){var t=n.l+e,r=pd(n),i=tC(n),s=zi(n),a=zi(n),o=zi(n);n.l=t;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function dxe(n,e){var t=Ce(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));H0({s:si(n[0]),e:si(n[0])},t),nC("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return ai(i||"",t),ai(n[1].Tooltip||"",t),ai("",t),t.slice(0,t.l)}function fxe(){}function gxe(n,e,t){var r=n.l+e,i=lV(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=n_e(n,r-n.l,t);a[1]=o}else n.l=r;return a}function mxe(n,e,t){var r=n.l+e,i=pd(n),s=[i];if(t.cellFormula){var a=i_e(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function pxe(n,e,t){t==null&&(t=Ce(18));var r=zE(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var WV=["left","right","top","bottom","header","footer"];function yxe(n){var e={};return WV.forEach(function(t){e[t]=K0(n)}),e}function _xe(n,e){return e==null&&(e=Ce(48)),zV(n),WV.forEach(function(t){Qh(n[t],e)}),e}function xxe(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function vxe(n,e,t){t==null&&(t=Ce(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function Exe(n){var e=Ce(24);return e.write_shift(4,4),e.write_shift(4,1),H0(n,e),e}function wxe(n,e){return e==null&&(e=Ce(66)),e.write_shift(2,n.password?AV(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function Sxe(){}function Txe(){}function Ixe(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=As(e),e.z=e.z||_r[14],e.v=Is(ns(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:t,c:r};switch(l.s=Au(i.cellXfs,e,i),e.l&&s["!links"].push([Vn(l),e.l]),e.c&&s["!comments"].push([Vn(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=lC(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?Ge(n,18,$_e(e,l)):Ge(n,7,U_e(e,l))):(l.t="str",a?Ge(n,17,rxe(e,l)):Ge(n,6,txe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Ge(n,13,Q_e(e,l)):Ge(n,2,q_e(e,l)):a?Ge(n,16,Y_e(e,l)):Ge(n,5,H_e(e,l)),!0;case"b":return l.t="b",a?Ge(n,15,D_e(e,l)):Ge(n,4,L_e(e,l)),!0;case"e":return l.t="e",a?Ge(n,14,G_e(e,l)):Ge(n,3,j_e(e,l)),!0}return a?Ge(n,12,M_e(e,l)):Ge(n,1,P_e(e,l)),!0}function Axe(n,e,t,r){var i=Zn(e["!ref"]||"A1"),s,a="",o=[];Ge(n,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var h=i.s.r;h<=u;++h){a=Si(h),S_e(n,e,i,h);var f=!1;if(h<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){h===i.s.r&&(o[g]=Ui(g)),s=o[g]+a;var p=l?(e[h]||[])[g]:e[s];if(!p){f=!1;continue}f=Ixe(n,p,h,g,r,e,f)}}Ge(n,146)}function bxe(n,e){!e||!e["!merges"]||(Ge(n,177,uxe(e["!merges"].length)),e["!merges"].forEach(function(t){Ge(n,176,cxe(t))}),Ge(n,178))}function Rxe(n,e){!e||!e["!cols"]||(Ge(n,390),e["!cols"].forEach(function(t,r){t&&Ge(n,60,pxe(r,t))}),Ge(n,391))}function Cxe(n,e){!e||!e["!ref"]||(Ge(n,648),Ge(n,649,Exe(Zn(e["!ref"]))),Ge(n,650))}function Pxe(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=Ln(t,-1,r[1].Target.replace(/#.*$/,""),pn.HLINK);Ge(n,494,dxe(r,i))}}),delete e["!links"]}function kxe(n,e,t,r){if(e["!comments"].length>0){var i=Ln(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",pn.VML);Ge(n,551,nC("rId"+i)),e["!legacy"]=i}}function Mxe(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Lr(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=ta(s);o.s.r==o.e.r&&(o.e.r=ta(e["!ref"]).e.r,s=Lr(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Ge(n,161,H0(Zn(s))),Ge(n,162)}}function Nxe(n,e,t){Ge(n,133),Ge(n,137,vxe(e,t)),Ge(n,138),Ge(n,134)}function Lxe(n,e){e["!protect"]&&Ge(n,535,wxe(e["!protect"]))}function Oxe(n,e,t,r){var i=Ss(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var l=Zn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Ge(i,129),(t.vbaraw||a["!outline"])&&Ge(i,147,R_e(o,a["!outline"])),Ge(i,148,I_e(l)),Nxe(i,a,t.Workbook),Rxe(i,a),Axe(i,a,n,e),Lxe(i,a),Mxe(i,a,t,n),bxe(i,a),Pxe(i,a,r),a["!margins"]&&Ge(i,476,_xe(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Cxe(i,a),kxe(i,a,n,r),Ge(i,130),i.end()}function Dxe(n,e){n.l+=10;var t=zi(n);return{name:t}}var Fxe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function jxe(n){return!n.Workbook||!n.Workbook.WBProps?"false":mme(n.Workbook.WBProps.date1904)?"true":"false"}var Vxe="][*?/\\".split("");function HV(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return Vxe.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function Gxe(n,e,t){n.forEach(function(r,i){HV(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Bxe(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];Gxe(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)c_e(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function KV(n){var e=[Fr];e[e.length]=tt("workbook",null,{xmlns:$0[0],"xmlns:r":ii.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(Fxe.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=tt("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:Fn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=tt("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=tt("definedName",Fn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Uxe(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=FI(n),t.name=zi(n),t}function zxe(n,e){return e||(e=Ce(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),nC(n.strRelID,e),ai(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function $xe(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?zi(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Wxe(n,e){e||(e=Ce(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),sV(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Hxe(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=jme(n),a=r_e(n,0,t),o=tC(n);n.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function Kxe(n,e){Ge(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Ge(n,156,zxe(i))}Ge(n,144)}function Yxe(n,e){e||(e=Ce(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return ai("SheetJS",e),ai(ov.version,e),ai(ov.version,e),ai("7262",e),e.length>e.l?e.slice(0,e.l):e}function Xxe(n,e){e||(e=Ce(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function qxe(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Ge(n,135),Ge(n,158,Xxe(i)),Ge(n,136))}}function Zxe(n,e){var t=Ss();return Ge(t,131),Ge(t,128,Yxe()),Ge(t,153,Wxe(n.Workbook&&n.Workbook.WBProps||null)),qxe(t,n),Kxe(t,n),Ge(t,132),t.end()}function Qxe(n,e,t){return(e.slice(-4)===".bin"?Zxe:KV)(n)}function Jxe(n,e,t,r,i){return(e.slice(-4)===".bin"?Oxe:$V)(n,t,r,i)}function eve(n,e,t){return(e.slice(-4)===".bin"?_1e:CV)(n,t)}function tve(n,e,t){return(e.slice(-4)===".bin"?Wpe:IV)(n,t)}function nve(n,e,t){return(e.slice(-4)===".bin"?L1e:LV)(n)}function rve(n){return(n.slice(-4)===".bin"?A1e:MV)()}function ive(n,e){var t=[];return n.Props&&t.push(epe(n.Props,e)),n.Custprops&&t.push(tpe(n.Props,n.Custprops)),t.join("")}function sve(){return""}function ave(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(tt("NumberFormat",null,{"ss:Format":Fn(_r[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(tt("Style",s.join(""),a))}),tt("Styles",t.join(""))}function YV(n){return tt("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+aC(n.Ref,{r:0,c:0})})}function ove(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(YV(i)))}return tt("Names",t.join(""))}function lve(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(YV(o)))}return s.join("")}function cve(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(tt("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(tt("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(tt("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(tt("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(Ei("ProtectContents","True")),n["!protect"].objects&&i.push(Ei("ProtectObjects","True")),n["!protect"].scenarios&&i.push(Ei("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(Ei("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(Ei("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":tt("WorksheetOptions",i.join(""),{xmlns:Ws.x})}function uve(n){return n.map(function(e){var t=gme(e.t||""),r=tt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return tt("Comment",r,{"ss:Author":e.a})}).join("")}function hve(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+Fn(aC(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var l=si(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=Fn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=Fn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],h=0;h!=u.length;++h)u[h].s.c!=a.c||u[h].s.r!=a.r||(u[h].e.c>u[h].s.c&&(o["ss:MergeAcross"]=u[h].e.c-u[h].s.c),u[h].e.r>u[h].s.r&&(o["ss:MergeDown"]=u[h].e.r-u[h].s.r));var f="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":f="Number",g=String(n.v);break;case"b":f="Boolean",g=n.v?"1":"0";break;case"e":f="Error",g=R1[n.v];break;case"d":f="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||_r[14]);break;case"s":f="String",g=fme(n.v||"");break}var p=Au(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var x=n.v!=null?g:"",v=n.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(n.c||[]).length>0&&(v+=uve(n.c)),tt("Cell",v,o)}function dve(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=RV(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function fve(n,e,t,r){if(!n["!ref"])return"";var i=Zn(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(w,T){iC(w);var I=!!w.width,A=zE(T,w),N={"ss:Index":T+1};I&&(N["ss:Width"]=yv(A.width)),w.hidden&&(N["ss:Hidden"]="1"),o.push(tt("Column",null,N))});for(var l=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var h=[dve(u,(n["!rows"]||[])[u])],f=i.s.c;f<=i.e.c;++f){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>f)&&!(s[a].s.r>u)&&!(s[a].e.c<f)&&!(s[a].e.r<u)){(s[a].s.c!=f||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:f},x=Vn(p),v=l?(n[u]||[])[f]:n[x];h.push(hve(v,x,n,e,t,r,p))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function gve(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?lve(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?fve(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(cve(s,e,n,t)),r.join("")}function mve(n,e){e||(e={}),n.SSF||(n.SSF=As(_r)),n.SSF&&(jE(),FE(n.SSF),e.revssf=VE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Au(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(ive(n,e)),t.push(sve()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(tt("Worksheet",gve(r,e,n),{"ss:Name":Fn(n.SheetNames[r])}));return t[2]=ave(n,e),t[3]=ove(n),Fr+tt("Workbook",t.join(""),{xmlns:Ws.ss,"xmlns:o":Ws.o,"xmlns:x":Ws.x,"xmlns:ss":Ws.ss,"xmlns:dt":Ws.dt,"xmlns:html":Ws.html})}var jS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function pve(n,e){var t=[],r=[],i=[],s=0,a,o=eO(fO,"n"),l=eO(gO,"n");if(n.Props)for(a=Ti(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=Ti(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)_V.indexOf(i[s][0])>-1||mV.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&Gn.utils.cfb_add(e,"/SummaryInformation",xO(r,jS.SI,l,gO)),(t.length||u.length)&&Gn.utils.cfb_add(e,"/DocumentSummaryInformation",xO(t,jS.DSI,o,fO,u.length?u:null,jS.UDI))}function yve(n,e){var t=e||{},r=Gn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Gn.utils.cfb_add(r,i,XV(n,t)),t.biff==8&&(n.Props||n.Custprops)&&pve(n,r),t.biff==8&&n.vbaraw&&O1e(r,Gn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var _ve={0:{f:E_e},1:{f:C_e},2:{f:X_e},3:{f:F_e},4:{f:N_e},5:{f:W_e},6:{f:exe},7:{f:B_e},8:{f:oxe},9:{f:axe},10:{f:ixe},11:{f:sxe},12:{f:k_e},13:{f:Z_e},14:{f:V_e},15:{f:O_e},16:{f:K_e},17:{f:nxe},18:{f:z_e},19:{f:eC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Hxe},40:{},42:{},43:{f:e1e},44:{f:Qpe},45:{f:r1e},46:{f:s1e},47:{f:i1e},48:{},49:{f:kme},50:{},51:{f:E1e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Mpe},62:{f:J_e},63:{f:b1e},64:{f:Sxe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Xo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:xxe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:b_e},148:{f:T_e,p:16},151:{f:fxe},152:{},153:{f:$xe},154:{},155:{},156:{f:Uxe},157:{},158:{},159:{T:1,f:Upe},160:{T:-1},161:{T:1,f:pd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:lxe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:x1e},336:{T:-1},337:{f:T1e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:FI},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Ape},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:gxe},427:{f:mxe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:yxe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:A_e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:hxe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:FI},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:M1e},633:{T:1},634:{T:-1},635:{T:1,f:P1e},636:{T:-1},637:{f:Ome},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Dxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Txe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function nt(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&ZR(t)&&n.push(t)}}function xve(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return nt(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var h=n.next(4);for(h.write_shift(2,s),h.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u;l<i;){for(h=n.next(4),h.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;h.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u}}}function P1(n,e,t){return n||(n=Ce(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function vve(n,e,t,r){var i=Ce(9);return P1(i,n,e),vV(t,r||"b",i),i}function Eve(n,e,t){var r=Ce(8+2*t.length);return P1(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function wve(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Is(ns(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?nt(n,2,Dpe(t,r,i)):nt(n,3,Ope(t,r,i));return;case"b":case"e":nt(n,5,vve(t,r,e.v,e.t));return;case"s":case"str":nt(n,4,Eve(t,r,(e.v||"").slice(0,255)));return}nt(n,1,P1(null,t,r))}function Sve(n,e,t,r){var i=Array.isArray(e),s=Zn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Lr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=Si(u);for(var h=s.s.c;h<=s.e.c;++h){u===s.s.r&&(l[h]=Ui(h)),a=l[h]+o;var f=i?(e[u]||[])[h]:e[a];f&&wve(n,f,u,h)}}}function Tve(n,e){for(var t=e||{},r=Ss(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return nt(r,t.biff==4?1033:t.biff==3?521:9,rC(n,16,t)),Sve(r,n.Sheets[n.SheetNames[i]],i,t),nt(r,10),r.end()}function Ive(n,e,t){nt(n,49,_pe({sz:12,name:"Arial"},t))}function Ave(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&nt(n,1054,Epe(i,e[i],t))})}function bve(n,e){var t=Ce(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),nt(n,2151,t),t=Ce(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),SV(Zn(e["!ref"]||"A1"),t),t.write_shift(4,4),nt(n,2152,t)}function Rve(n,e){for(var t=0;t<16;++t)nt(n,224,EO({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){nt(n,224,EO(r,0,e))})}function Cve(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];nt(n,440,Cpe(r)),r[1].Tooltip&&nt(n,2048,Ppe(r))}delete e["!links"]}function Pve(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&nt(n,125,Npe(zE(i,r),i))})}}function kve(n,e,t,r,i){var s=16+Au(i.cellXfs,e,i);if(e.v==null&&!e.bf){nt(n,513,Jh(t,r,s));return}if(e.bf)nt(n,6,t_e(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Is(ns(e.v)):e.v;nt(n,515,Ipe(t,r,a,s));break;case"b":case"e":nt(n,517,Tpe(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=lC(i.Strings,e.v,i.revStrings);nt(n,253,xpe(t,r,o,s))}else nt(n,516,vpe(t,r,(e.v||"").slice(0,255),s,i));break;default:nt(n,513,Jh(t,r,s))}}function Mve(n,e,t){var r=Ss(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},l=Array.isArray(s),u=e.biff==8,h,f="",g=[],p=Zn(s["!ref"]||"A1"),x=u?65536:16384;if(p.e.c>255||p.e.r>=x){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}nt(r,2057,rC(t,16,e)),nt(r,13,ma(1)),nt(r,12,ma(100)),nt(r,15,Xi(!0)),nt(r,17,Xi(!1)),nt(r,16,Qh(.001)),nt(r,95,Xi(!0)),nt(r,42,Xi(!1)),nt(r,43,Xi(!1)),nt(r,130,ma(1)),nt(r,128,Spe()),nt(r,131,Xi(!1)),nt(r,132,Xi(!1)),u&&Pve(r,s["!cols"]),nt(r,512,wpe(p,e)),u&&(s["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){f=Si(v);for(var w=p.s.c;w<=p.e.c;++w){v===p.s.r&&(g[w]=Ui(w)),h=g[w]+f;var T=l?(s[v]||[])[w]:s[h];T&&(kve(r,T,v,w,e),u&&T.l&&s["!links"].push([h,T.l]))}}var I=o.CodeName||o.name||i;return u&&nt(r,574,ype((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&nt(r,229,Rpe(s["!merges"])),u&&Cve(r,s),nt(r,442,wV(I)),u&&bve(r,s),nt(r,10),r.end()}function Nve(n,e,t){var r=Ss(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,l=t.biff==5;if(nt(r,2057,rC(n,5,t)),t.bookType=="xla"&&nt(r,135),nt(r,225,o?ma(1200):null),nt(r,193,ipe(2)),l&&nt(r,191),l&&nt(r,192),nt(r,226),nt(r,92,fpe("SheetJS",t)),nt(r,66,ma(o?1200:1252)),o&&nt(r,353,ma(0)),o&&nt(r,448),nt(r,317,Lpe(n.SheetNames.length)),o&&n.vbaraw&&nt(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";nt(r,442,wV(u))}nt(r,156,ma(17)),nt(r,25,Xi(!1)),nt(r,18,Xi(!1)),nt(r,19,ma(0)),o&&nt(r,431,Xi(!1)),o&&nt(r,444,ma(0)),nt(r,61,ppe()),nt(r,64,Xi(!1)),nt(r,141,ma(0)),nt(r,34,Xi(jxe(n)=="true")),nt(r,14,Xi(!0)),o&&nt(r,439,Xi(!1)),nt(r,218,ma(0)),Ive(r,n,t),Ave(r,n.SSF,t),Rve(r,t),o&&nt(r,352,Xi(!1));var h=r.end(),f=Ss();o&&nt(f,140,kpe()),o&&t.Strings&&xve(f,252,mpe(t.Strings)),nt(f,10);var g=f.end(),p=Ss(),x=0,v=0;for(v=0;v<n.SheetNames.length;++v)x+=(o?12:11)+(o?2:1)*n.SheetNames[v].length;var w=h.length+x+g.length;for(v=0;v<n.SheetNames.length;++v){var T=s[v]||{};nt(p,133,gpe({pos:w,hs:T.Hidden||0,dt:0,name:n.SheetNames[v]},t)),w+=e[v].length}var I=p.end();if(x!=I.length)throw new Error("BS8 "+x+" != "+I.length);var A=[];return h.length&&A.push(h),I.length&&A.push(I),g.length&&A.push(g),vi(A)}function Lve(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=As(_r)),n&&n.SSF&&(jE(),FE(n.SSF),t.revssf=VE(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cC(t),t.cellXfs=[],Au(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=Mve(i,t,n);return r.unshift(Nve(n,r,t)),vi(r)}function XV(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=ta(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Lve(n,e);case 4:case 3:case 2:return Tve(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Ove(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var h=Vn({r:t,c:a}),f=r.dense?(n[t]||[])[a]:n[h],g=f&&f.v!=null&&(f.h||dme(f.w||(zl(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?g='<span contenteditable="true">'+g+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+f.l.Target+'">'+g+"</a>")),p.id=(r.id||"sjs")+"-"+h,s.push(tt("td",g,p))}}var x="<tr>";return x+s.join("")+"</tr>"}var Dve='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Fve="</body></html>";function jve(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function qV(n,e){var t=e||{},r=t.header!=null?t.header:Dve,i=t.footer!=null?t.footer:Fve,s=[r],a=ta(n["!ref"]);t.dense=Array.isArray(n),s.push(jve(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(Ove(n,a,o,t));return s.push("</table>"+i),s.join("")}function ZV(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?si(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var h=ta(n["!ref"]);u.s.r=Math.min(u.s.r,h.s.r),u.s.c=Math.min(u.s.c,h.s.c),u.e.r=Math.max(u.e.r,h.e.r),u.e.c=Math.max(u.e.c,h.e.c),i==-1&&(u.e.r=i=h.e.r+1)}var f=[],g=0,p=n["!rows"]||(n["!rows"]=[]),x=0,v=0,w=0,T=0,I=0,A=0;for(n["!cols"]||(n["!cols"]=[]);x<o.length&&v<l;++x){var N=o[x];if(RO(N)){if(r.display)continue;p[v]={hidden:!0}}var D=N.children;for(w=T=0;w<D.length;++w){var B=D[w];if(!(r.display&&RO(B))){var k=B.hasAttribute("data-v")?B.getAttribute("data-v"):B.hasAttribute("v")?B.getAttribute("v"):pme(B.innerHTML),P=B.getAttribute("data-z")||B.getAttribute("z");for(g=0;g<f.length;++g){var M=f[g];M.s.c==T+s&&M.s.r<v+i&&v+i<=M.e.r&&(T=M.e.c+1-s,g=-1)}A=+B.getAttribute("colspan")||1,((I=+B.getAttribute("rowspan")||1)>1||A>1)&&f.push({s:{r:v+i,c:T+s},e:{r:v+i+(I||1)-1,c:T+s+(A||1)-1}});var j={t:"s",v:k},O=B.getAttribute("data-t")||B.getAttribute("t")||"";k!=null&&(k.length==0?j.t=O||"z":r.raw||k.trim().length==0||O=="s"||(k==="TRUE"?j={t:"b",v:!0}:k==="FALSE"?j={t:"b",v:!1}:isNaN(Nl(k))?isNaN(Cp(k).getDate())||(j={t:"d",v:ns(k)},r.cellDates||(j={t:"n",v:Is(j.v)}),j.z=r.dateNF||_r[14]):j={t:"n",v:Nl(k)})),j.z===void 0&&P!=null&&(j.z=P);var W="",F=B.getElementsByTagName("A");if(F&&F.length)for(var Te=0;Te<F.length&&!(F[Te].hasAttribute("href")&&(W=F[Te].getAttribute("href"),W.charAt(0)!="#"));++Te);W&&W.charAt(0)!="#"&&(j.l={Target:W}),r.dense?(n[v+i]||(n[v+i]=[]),n[v+i][T+s]=j):n[Vn({c:T+s,r:v+i})]=j,u.e.c<T+s&&(u.e.c=T+s),T+=A}}++v}return f.length&&(n["!merges"]=(n["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,v-1+i),n["!ref"]=Lr(u),v>=l&&(n["!fullref"]=Lr((u.e.r=o.length-x+v-1+i,u))),n}function QV(n,e){var t=e||{},r=t.dense?[]:{};return ZV(r,n,e)}function Vve(n,e){return dd(QV(n,e),e)}function RO(n){var e="",t=Gve(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function Gve(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Bve=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+kp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Fr+e}})(),CO=(function(){var n=function(s){return Fn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var l=[];l.push('      <table:table table:name="'+Fn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,h=0,f=ta(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,x=Array.isArray(s);if(s["!cols"])for(h=0;h<=f.e.c;++h)l.push("        <table:table-column"+(s["!cols"][h]?' table:style-name="co'+s["!cols"][h].ods+'"':"")+`></table:table-column>
`);var v="",w=s["!rows"]||[];for(u=0;u<f.s.r;++u)v=w[u]?' table:style-name="ro'+w[u].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=f.e.r;++u){for(v=w[u]?' table:style-name="ro'+w[u].ods+'"':"",l.push("        <table:table-row"+v+`>
`),h=0;h<f.s.c;++h)l.push(e);for(;h<=f.e.c;++h){var T=!1,I={},A="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>h)&&!(g[p].s.r>u)&&!(g[p].e.c<h)&&!(g[p].e.r<u)){(g[p].s.c!=h||g[p].s.r!=u)&&(T=!0),I["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,I["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(T){l.push(t);continue}var N=Vn({r:u,c:h}),D=x?(s[u]||[])[h]:s[N];if(D&&D.f&&(I["table:formula"]=Fn(o_e(D.f)),D.F&&D.F.slice(0,N.length)==N)){var B=ta(D.F);I["table:number-matrix-columns-spanned"]=B.e.c-B.s.c+1,I["table:number-matrix-rows-spanned"]=B.e.r-B.s.r+1}if(!D){l.push(e);continue}switch(D.t){case"b":A=D.v?"TRUE":"FALSE",I["office:value-type"]="boolean",I["office:boolean-value"]=D.v?"true":"false";break;case"n":A=D.w||String(D.v||0),I["office:value-type"]="float",I["office:value"]=D.v||0;break;case"s":case"str":A=D.v==null?"":D.v,I["office:value-type"]="string";break;case"d":A=D.w||ns(D.v).toISOString(),I["office:value-type"]="date",I["office:date-value"]=ns(D.v).toISOString(),I["table:style-name"]="ce1";break;default:l.push(e);continue}var k=n(A);if(D.l&&D.l.Target){var P=D.l.Target;P=P.charAt(0)=="#"?"#"+l_e(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),k=tt("text:a",k,{"xlink:href":P.replace(/&/g,"&amp;")})}l.push("          "+tt("table:table-cell",tt("text:p",k,{}),I)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var h=0;h<u["!cols"].length;++h)if(u["!cols"][h]){var f=u["!cols"][h];if(f.width==null&&f.wpx==null&&f.wch==null)continue;iC(f),f.ods=o;var g=u["!cols"][h].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var h=0;h<u["!rows"].length;++h)if(u["!rows"][h]){u["!rows"][h].ods=l;var f=u["!rows"][h].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Fr],u=kp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=kp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+h+`>
`),l.push(fV().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=a.SheetNames.length;++f)l.push(r(a.Sheets[a.SheetNames[f]],a,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function JV(n,e){if(e.bookType=="fods")return CO(n,e);var t=KR(),r="",i=[],s=[];return r="mimetype",qt(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",qt(t,r,CO(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",qt(t,r,Bve(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",qt(t,r,Fr+fV()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",qt(t,r,Jme(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",qt(t,r,Zme(i)),t}function vv(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Uve(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Wa(Pp(n))}function zve(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function _u(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function $ve(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Mp(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function Nn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function Qf(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function $r(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Mp(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Mp(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function gi(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(Nn(r*8+i.type)),i.type==2&&e.push(Nn(i.data.length)),e.push(i.data))})}),_u(e)}function Fa(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Mp(n,r),s=$r(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:Qf(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=$r(o.data),u=Qf(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Qf(s[3][0].data)>>>0>0),t.push(a)}return t}function cf(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:Nn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:Nn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Nn(a.data.length)}],r[2].push({data:gi(a.meta),type:2})});var s=gi(r);e.push(Nn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),_u(e)}function Wve(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Mp(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[_u(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var h=_u(i);if(h.length!=r)throw new Error("Unexpected length: ".concat(h.length," != ").concat(r));return h}function ja(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(Wve(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return _u(e)}function uf(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=Nn(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return _u(e)}function VS(n,e){var t=new Uint8Array(32),r=vv(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,$ve(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function GS(n,e){var t=new Uint8Array(32),r=vv(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function bc(n){var e=$r(n);return Mp(e[1][0].data)}function Hve(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&Qf(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=vv(n[7][0].data),h=0,f=[],g=vv(n[4][0].data),p=0,x=[],v=0;v<e.length;++v){if(e[v]==null){u.setUint16(v*2,65535,!0),g.setUint16(v*2,65535);continue}u.setUint16(v*2,h,!0),g.setUint16(v*2,p,!0);var w,T;switch(typeof e[v]){case"string":w=VS({t:"s",v:e[v]},t),T=GS({t:"s",v:e[v]},t);break;case"number":w=VS({t:"n",v:e[v]},t),T=GS({t:"n",v:e[v]},t);break;case"boolean":w=VS({t:"b",v:e[v]},t),T=GS({t:"b",v:e[v]},t);break;default:throw new Error("Unsupported value "+e[v])}f.push(w),h+=w.length,x.push(T),p+=T.length,++l}for(n[2][0].data=Nn(l);v<n[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),g.setUint16(v*2,65535,!0);return n[6][0].data=_u(f),n[3][0].data=_u(x),l}function Kve(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=ta(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Lr(r)));var s=Ev(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(Y){return Y.forEach(function(ee){typeof ee=="string"&&a.push(ee)})});var o={},l=[],u=Gn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(Y,ee){return[Y,u.FullPaths[ee]]}).forEach(function(Y){var ee=Y[0],ne=Y[1];if(ee.type==2&&ee.name.match(/\.iwa/)){var de=ee.content,De=ja(de),Se=Fa(De);Se.forEach(function(Fe){l.push(Fe.id),o[Fe.id]={deps:[],location:ne,type:Qf(Fe.messages[0].meta[1][0].data)}})}}),l.sort(function(Y,ee){return Y-ee});var h=l.filter(function(Y){return Y>1}).map(function(Y){return[Y,Nn(Y)]});u.FileIndex.map(function(Y,ee){return[Y,u.FullPaths[ee]]}).forEach(function(Y){var ee=Y[0];if(Y[1],!!ee.name.match(/\.iwa/)){var ne=Fa(ja(ee.content));ne.forEach(function(de){de.messages.forEach(function(De){h.forEach(function(Se){de.messages.some(function(Fe){return Qf(Fe.meta[1][0].data)!=11006&&zve(Fe.data,Se[1])})&&o[Se[0]].deps.push(de.id)})})})}});for(var f=Gn.find(u,o[1].location),g=Fa(ja(f.content)),p,x=0;x<g.length;++x){var v=g[x];v.id==1&&(p=v)}var w=bc($r(p.messages[0].data)[1][0].data);for(f=Gn.find(u,o[w].location),g=Fa(ja(f.content)),x=0;x<g.length;++x)v=g[x],v.id==w&&(p=v);for(w=bc($r(p.messages[0].data)[2][0].data),f=Gn.find(u,o[w].location),g=Fa(ja(f.content)),x=0;x<g.length;++x)v=g[x],v.id==w&&(p=v);for(w=bc($r(p.messages[0].data)[2][0].data),f=Gn.find(u,o[w].location),g=Fa(ja(f.content)),x=0;x<g.length;++x)v=g[x],v.id==w&&(p=v);var T=$r(p.messages[0].data);{T[6][0].data=Nn(r.e.r+1),T[7][0].data=Nn(r.e.c+1);var I=bc(T[46][0].data),A=Gn.find(u,o[I].location),N=Fa(ja(A.content));{for(var D=0;D<N.length&&N[D].id!=I;++D);if(N[D].id!=I)throw"Bad ColumnRowUIDMapArchive";var B=$r(N[D].messages[0].data);B[1]=[],B[2]=[],B[3]=[];for(var k=0;k<=r.e.c;++k){var P=[];P[1]=P[2]=[{type:0,data:Nn(k+420690)}],B[1].push({type:2,data:gi(P)}),B[2].push({type:0,data:Nn(k)}),B[3].push({type:0,data:Nn(k)})}B[4]=[],B[5]=[],B[6]=[];for(var M=0;M<=r.e.r;++M)P=[],P[1]=P[2]=[{type:0,data:Nn(M+726270)}],B[4].push({type:2,data:gi(P)}),B[5].push({type:0,data:Nn(M)}),B[6].push({type:0,data:Nn(M)});N[D].messages[0].data=gi(B)}A.content=uf(cf(N)),A.size=A.content.length,delete T[46];var j=$r(T[4][0].data);{j[7][0].data=Nn(r.e.r+1);var O=$r(j[1][0].data),W=bc(O[2][0].data);A=Gn.find(u,o[W].location),N=Fa(ja(A.content));{if(N[0].id!=W)throw"Bad HeaderStorageBucket";var F=$r(N[0].messages[0].data);for(M=0;M<s.length;++M){var Te=$r(F[2][0].data);Te[1][0].data=Nn(M),Te[4][0].data=Nn(s[M].length),F[2][M]={type:F[2][0].type,data:gi(Te)}}N[0].messages[0].data=gi(F)}A.content=uf(cf(N)),A.size=A.content.length;var Me=bc(j[2][0].data);A=Gn.find(u,o[Me].location),N=Fa(ja(A.content));{if(N[0].id!=Me)throw"Bad HeaderStorageBucket";for(F=$r(N[0].messages[0].data),k=0;k<=r.e.c;++k)Te=$r(F[2][0].data),Te[1][0].data=Nn(k),Te[4][0].data=Nn(r.e.r+1),F[2][k]={type:F[2][0].type,data:gi(Te)};N[0].messages[0].data=gi(F)}A.content=uf(cf(N)),A.size=A.content.length;var Le=bc(j[4][0].data);(function(){for(var Y=Gn.find(u,o[Le].location),ee=Fa(ja(Y.content)),ne,de=0;de<ee.length;++de){var De=ee[de];De.id==Le&&(ne=De)}var Se=$r(ne.messages[0].data);{Se[3]=[];var Fe=[];a.forEach(function(gt,_t){Fe[1]=[{type:0,data:Nn(_t)}],Fe[2]=[{type:0,data:Nn(1)}],Fe[3]=[{type:2,data:Uve(gt)}],Se[3].push({type:2,data:gi(Fe)})})}ne.messages[0].data=gi(Se);var je=cf(ee),Qe=uf(je);Y.content=Qe,Y.size=Y.content.length})();var be=$r(j[3][0].data);{var ce=be[1][0];delete be[2];var Re=$r(ce.data);{var Ie=bc(Re[2][0].data);(function(){for(var Y=Gn.find(u,o[Ie].location),ee=Fa(ja(Y.content)),ne,de=0;de<ee.length;++de){var De=ee[de];De.id==Ie&&(ne=De)}var Se=$r(ne.messages[0].data);{delete Se[6],delete be[7];var Fe=new Uint8Array(Se[5][0].data);Se[5]=[];for(var je=0,Qe=0;Qe<=r.e.r;++Qe){var gt=$r(Fe);je+=Hve(gt,s[Qe],a),gt[1][0].data=Nn(Qe),Se[5].push({data:gi(gt),type:2})}Se[1]=[{type:0,data:Nn(r.e.c+1)}],Se[2]=[{type:0,data:Nn(r.e.r+1)}],Se[3]=[{type:0,data:Nn(je)}],Se[4]=[{type:0,data:Nn(r.e.r+1)}]}ne.messages[0].data=gi(Se);var _t=cf(ee),Lt=uf(_t);Y.content=Lt,Y.size=Y.content.length})()}ce.data=gi(Re)}j[3][0].data=gi(be)}T[4][0].data=gi(j)}p.messages[0].data=gi(T);var ie=cf(g),V=uf(ie);return f.content=V,f.size=f.content.length,u}function Yve(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function cC(n){Yve([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function Xve(n,e){return e.bookType=="ods"?JV(n,e):e.bookType=="numbers"?Kve(n,e):e.bookType=="xlsb"?qve(n,e):Zve(n,e)}function qve(n,e){Of=1024,n&&!n.SSF&&(n.SSF=As(_r)),n&&n.SSF&&(jE(),FE(n.SSF),e.revssf=VE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Gm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=OV.indexOf(e.bookType)>-1,i=uV();cC(e=e||{});var s=KR(),a="",o=0;if(e.cellXfs=[],Au(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",qt(s,a,gV(n.Props,e)),i.coreprops.push(a),Ln(e.rels,2,a,pn.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,qt(s,a,pV(n.Props)),i.extprops.push(a),Ln(e.rels,3,a,pn.EXT_PROPS),n.Custprops!==n.Props&&Ti(n.Custprops||{}).length>0&&(a="docProps/custom.xml",qt(s,a,yV(n.Custprops)),i.custprops.push(a),Ln(e.rels,4,a,pn.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var h={"!id":{}},f=n.Sheets[n.SheetNames[o-1]],g=(f||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,qt(s,a,Jxe(o-1,a,e,n,h)),i.sheets.push(a),Ln(e.wbrels,-1,"worksheets/sheet"+o+"."+t,pn.WS[0])}if(f){var p=f["!comments"],x=!1,v="";p&&p.length>0&&(v="xl/comments"+o+"."+t,qt(s,v,nve(p,v)),i.comments.push(v),Ln(h,-1,"../comments"+o+"."+t,pn.CMNT),x=!0),f["!legacy"]&&x&&qt(s,"xl/drawings/vmlDrawing"+o+".vml",NV(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&qt(s,dV(a),qf(h))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,qt(s,a,tve(e.Strings,a,e)),i.strs.push(a),Ln(e.wbrels,-1,"sharedStrings."+t,pn.SST)),a="xl/workbook."+t,qt(s,a,Qxe(n,a)),i.workbooks.push(a),Ln(e.rels,1,a,pn.WB),a="xl/theme/theme1.xml",qt(s,a,kV(n.Themes,e)),i.themes.push(a),Ln(e.wbrels,-1,"theme/theme1.xml",pn.THEME),a="xl/styles."+t,qt(s,a,eve(n,a,e)),i.styles.push(a),Ln(e.wbrels,-1,"styles."+t,pn.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",qt(s,a,n.vbaraw),i.vba.push(a),Ln(e.wbrels,-1,"vbaProject.bin",pn.VBA)),a="xl/metadata."+t,qt(s,a,rve(a)),i.metadata.push(a),Ln(e.wbrels,-1,"metadata."+t,pn.XLMETA),qt(s,"[Content_Types].xml",hV(i,e)),qt(s,"_rels/.rels",qf(e.rels)),qt(s,"xl/_rels/workbook."+t+".rels",qf(e.wbrels)),delete e.revssf,delete e.ssf,s}function Zve(n,e){Of=1024,n&&!n.SSF&&(n.SSF=As(_r)),n&&n.SSF&&(jE(),FE(n.SSF),e.revssf=VE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Gm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=OV.indexOf(e.bookType)>-1,i=uV();cC(e=e||{});var s=KR(),a="",o=0;if(e.cellXfs=[],Au(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",qt(s,a,gV(n.Props,e)),i.coreprops.push(a),Ln(e.rels,2,a,pn.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,qt(s,a,pV(n.Props)),i.extprops.push(a),Ln(e.rels,3,a,pn.EXT_PROPS),n.Custprops!==n.Props&&Ti(n.Custprops||{}).length>0&&(a="docProps/custom.xml",qt(s,a,yV(n.Custprops)),i.custprops.push(a),Ln(e.rels,4,a,pn.CUST_PROPS));var h=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var f={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,qt(s,a,$V(o-1,e,n,f)),i.sheets.push(a),Ln(e.wbrels,-1,"worksheets/sheet"+o+"."+t,pn.WS[0])}if(g){var x=g["!comments"],v=!1,w="";if(x&&x.length>0){var T=!1;x.forEach(function(I){I[1].forEach(function(A){A.T==!0&&(T=!0)})}),T&&(w="xl/threadedComments/threadedComment"+o+"."+t,qt(s,w,R1e(x,h,e)),i.threadedcomments.push(w),Ln(f,-1,"../threadedComments/threadedComment"+o+"."+t,pn.TCMNT)),w="xl/comments"+o+"."+t,qt(s,w,LV(x)),i.comments.push(w),Ln(f,-1,"../comments"+o+"."+t,pn.CMNT),v=!0}g["!legacy"]&&v&&qt(s,"xl/drawings/vmlDrawing"+o+".vml",NV(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}f["!id"].rId1&&qt(s,dV(a),qf(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,qt(s,a,IV(e.Strings,e)),i.strs.push(a),Ln(e.wbrels,-1,"sharedStrings."+t,pn.SST)),a="xl/workbook."+t,qt(s,a,KV(n)),i.workbooks.push(a),Ln(e.rels,1,a,pn.WB),a="xl/theme/theme1.xml",qt(s,a,kV(n.Themes,e)),i.themes.push(a),Ln(e.wbrels,-1,"theme/theme1.xml",pn.THEME),a="xl/styles."+t,qt(s,a,CV(n,e)),i.styles.push(a),Ln(e.wbrels,-1,"styles."+t,pn.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",qt(s,a,n.vbaraw),i.vba.push(a),Ln(e.wbrels,-1,"vbaProject.bin",pn.VBA)),a="xl/metadata."+t,qt(s,a,MV()),i.metadata.push(a),Ln(e.wbrels,-1,"metadata."+t,pn.XLMETA),h.length>1&&(a="xl/persons/person.xml",qt(s,a,C1e(h)),i.people.push(a),Ln(e.wbrels,-1,"persons/person.xml",pn.PEOPLE)),qt(s,"[Content_Types].xml",hV(i,e)),qt(s,"_rels/.rels",qf(e.rels)),qt(s,"xl/_rels/workbook."+t+".rels",qf(e.wbrels)),delete e.revssf,delete e.ssf,s}function Qve(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=Ul(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function eG(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return A1(e.file,Gn.write(n,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Gn.write(n,e)}function Jve(n,e){var t=As(e||{}),r=Xve(n,t);return eEe(r,t)}function eEe(n,e){var t={},r=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?Gn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(DE(i))}return e.password&&typeof encrypt_agile<"u"?eG(encrypt_agile(i,e.password),e):e.type==="file"?A1(e.file,i):e.type=="string"?Dm(i):i}function tEe(n,e){var t=e||{},r=yve(n,t);return eG(r,t)}function Ao(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Rp(Pp(r));case"binary":return Pp(r);case"string":return n;case"file":return A1(e.file,r,"utf8");case"buffer":return En?Xl(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Ao(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function nEe(n,e){switch(e.type){case"base64":return Rp(n);case"binary":return n;case"string":return n;case"file":return A1(e.file,n,"binary");case"buffer":return En?Xl(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function y_(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Rp(t):e.type=="string"?Dm(t):t;case"file":return A1(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function tG(n,e){Pge(),Bxe(n);var t=As(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=tG(n,t);return t.type="array",DE(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return Ao(mve(n,t),t);case"slk":case"sylk":return Ao(jpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return Ao(qV(n.Sheets[n.SheetNames[i]],t),t);case"txt":return nEe(nG(n.Sheets[n.SheetNames[i]],t),t);case"csv":return Ao(uC(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return Ao(Vpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return y_(Fpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return Ao(Gpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return Ao(Kpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return Ao(TV.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return Ao(JV(n,t),t);case"wk1":return y_(wO.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return y_(wO.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),y_(XV(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),tEe(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Jve(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function rEe(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function iEe(n,e,t){var r={};return r.type="file",r.file=e,rEe(r),tG(n,r)}function sEe(n,e,t,r,i,s,a,o){var l=Si(t),u=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var p=e.s.c;p<=e.e.c;++p){var x=a?n[t][p]:n[r[p]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var v=x.v;switch(x.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(s[p]!=null){if(v==null)if(x.t=="e"&&v===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(h&&v===null)g[s[p]]=null;else continue;else g[s[p]]=h&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?v:zl(x,v,o);v!=null&&(f=!1)}}return{row:g,isempty:f}}function Ev(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},h=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof h){case"string":l=Zn(h);break;case"number":l=Zn(n["!ref"]),l.s.r=h;break;default:l=h}r>0&&(i=0);var f=Si(l.s.r),g=[],p=[],x=0,v=0,w=Array.isArray(n),T=l.s.r,I=0,A={};w&&!n[T]&&(n[T]=[]);var N=u.skipHidden&&n["!cols"]||[],D=u.skipHidden&&n["!rows"]||[];for(I=l.s.c;I<=l.e.c;++I)if(!(N[I]||{}).hidden)switch(g[I]=Ui(I),t=w?n[T][I]:n[g[I]+f],r){case 1:s[I]=I-l.s.c;break;case 2:s[I]=g[I];break;case 3:s[I]=u.header[I-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=zl(t,null,u),v=A[a]||0,!v)A[a]=1;else{do o=a+"_"+v++;while(A[o]);A[a]=v,A[o]=1}s[I]=o}for(T=l.s.r+i;T<=l.e.r;++T)if(!(D[T]||{}).hidden){var B=sEe(n,l,T,g,r,s,w,u);(B.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[x++]=B.row)}return p.length=x,p}var PO=/"/g;function aEe(n,e,t,r,i,s,a,o){for(var l=!0,u=[],h="",f=Si(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var p=o.dense?(n[t]||[])[g]:n[r[g]+f];if(p==null)h="";else if(p.v!=null){l=!1,h=""+(o.rawNumbers&&p.t=="n"?p.v:zl(p,null,o));for(var x=0,v=0;x!==h.length;++x)if((v=h.charCodeAt(x))===i||v===s||v===34||o.forceQuotes){h='"'+h.replace(PO,'""')+'"';break}h=="ID"&&(h='"ID"')}else p.f!=null&&!p.F?(l=!1,h="="+p.f,h.indexOf(",")>=0&&(h='"'+h.replace(PO,'""')+'"')):h="";u.push(h)}return o.blankrows===!1&&l?null:u.join(a)}function uC(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=Zn(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),h="",f=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(g[x]||{}).hidden||(f[x]=Ui(x));for(var v=0,w=i.s.r;w<=i.e.r;++w)(p[w]||{}).hidden||(h=aEe(n,i,w,f,a,l,s,r),h!=null&&(r.strip&&(h=h.replace(u,"")),(h||r.blankrows!==!1)&&t.push((v++?o:"")+h)));return delete r.dense,t.join("")}function nG(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=uC(n,e);return t}function oEe(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=Zn(n["!ref"]),s="",a=[],o,l=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=Ui(o);for(var h=i.s.r;h<=i.e.r;++h)for(s=Si(h),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[h]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function rG(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?si(r.origin):r.origin;a=l.r,o=l.c}var u,h={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var f=Zn(s["!ref"]);h.e.c=Math.max(h.e.c,f.e.c),h.e.r=Math.max(h.e.r,f.e.r),a==-1&&(a=f.e.r+1,h.e.r=a+e.length-1+i)}else a==-1&&(a=0,h.e.r=e.length-1+i);var g=r.header||[],p=0;e.forEach(function(v,w){Ti(v).forEach(function(T){(p=g.indexOf(T))==-1&&(g[p=g.length]=T);var I=v[T],A="z",N="",D=Vn({c:o+p,r:a+w+i});u=Np(s,D),I&&typeof I=="object"&&!(I instanceof Date)?s[D]=I:(typeof I=="number"?A="n":typeof I=="boolean"?A="b":typeof I=="string"?A="s":I instanceof Date?(A="d",r.cellDates||(A="n",I=Is(I)),N=r.dateNF||_r[14]):I===null&&r.nullError&&(A="e",I=0),u?(u.t=A,u.v=I,delete u.w,delete u.R,N&&(u.z=N)):s[D]=u={t:A,v:I},N&&(u.z=N))})}),h.e.c=Math.max(h.e.c,o+g.length-1);var x=Si(a);if(i)for(p=0;p<g.length;++p)s[Ui(p+o)+x]={t:"s",v:g[p]};return s["!ref"]=Lr(h),s}function lEe(n,e){return rG(null,n,e)}function Np(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=si(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?Np(n,Vn(e)):Np(n,Vn({r:e,c:t||0}))}function cEe(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function uEe(){return{SheetNames:[],Sheets:{}}}function hEe(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(HV(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function dEe(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=cEe(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function fEe(n,e){return n.z=e,n}function iG(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function gEe(n,e,t){return iG(n,"#"+e,t)}function mEe(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function pEe(n,e,t,r){for(var i=typeof e!="string"?e:Zn(e),s=typeof e=="string"?e:Lr(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=Np(n,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=t,r&&(l.D=!0))}return n}var BS={encode_col:Ui,encode_row:Si,encode_cell:Vn,encode_range:Lr,decode_col:JR,decode_row:QR,split_cell:Pme,decode_cell:si,decode_range:ta,format_cell:zl,sheet_add_aoa:iV,sheet_add_json:rG,sheet_add_dom:ZV,aoa_to_sheet:W0,json_to_sheet:lEe,table_to_sheet:QV,table_to_book:Vve,sheet_to_csv:uC,sheet_to_txt:nG,sheet_to_json:Ev,sheet_to_html:qV,sheet_to_formulae:oEe,sheet_to_row_object_array:Ev,sheet_get_cell:Np,book_new:uEe,book_append_sheet:hEe,book_set_sheet_visibility:dEe,cell_set_number_format:fEe,cell_set_hyperlink:iG,cell_set_internal_link:gEe,cell_add_comment:mEe,sheet_set_array_formula:pEe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Ol=Aa()(F0((n,e)=>({vondsten:[],addVondst:t=>n(r=>({vondsten:[...r.vondsten,{...t,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:t=>n(r=>({vondsten:r.vondsten.filter(i=>i.id!==t)})),updateVondst:(t,r)=>n(i=>({vondsten:i.vondsten.map(s=>s.id===t?{...s,...r}:s)})),clearAll:()=>n({vondsten:[]}),exportAsGeoJSON:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:t.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:[o.location.lng,o.location.lat]},properties:{id:o.id,objectType:o.objectType,material:o.material,period:o.period,depth:o.depth,notes:o.notes,timestamp:o.timestamp,photoUrl:o.photoUrl,condition:o.condition,weight:o.weight,length:o.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},exportAsCSV:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=t.map(u=>{const h=new Date(u.timestamp).toLocaleDateString("nl-NL"),f=u.notes?`"${u.notes.replace(/"/g,'""')}"`:"";return`${u.id},${u.location.lat},${u.location.lng},${h},${u.objectType},${u.material},${u.period},${u.depth||""},${u.condition||""},${u.weight||""},${u.length||""},${f},${u.photoUrl||""}`}).join(`
`),s=r+i,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},exportAsExcel:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(o=>({ID:o.id,Latitude:o.location.lat,Longitude:o.location.lng,Datum:new Date(o.timestamp).toLocaleDateString("nl-NL"),Type:o.objectType,Materiaal:o.material,Periode:o.period,"Diepte (cm)":o.depth||"",Conditie:o.condition||"","Gewicht (g)":o.weight||"","Lengte (mm)":o.length||"",Notities:o.notes||"","Foto URL":o.photoUrl||""})),i=BS.json_to_sheet(r),s=BS.book_new();BS.book_append_sheet(s,i,"Vondsten");const a=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=a,iEe(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(l=>{const u=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${u}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},exportAsKML:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${t.map(l=>{const u=new Date(l.timestamp).toLocaleDateString("nl-NL"),h=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${u}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${h}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}}),{name:"detectorapp-local-vondsten"}));gn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function yEe(n){if(!n)return n;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let t=n;return Object.entries(e).forEach(([r,i])=>{t=t.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),t=t.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),t}async function _Ee(n){try{const e=fn(n),t=gn("EPSG:4326","EPSG:28992",e);if(t[0]<7e3||t[0]>3e5||t[1]<289e3||t[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${t[0]-r},${t[1]-r},${t[0]+r},${t[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,o=await(await fetch(s)).json();if(o.features&&o.features.length>0){const l=o.features[0].properties,u=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(u!=null){const h=typeof u=="number"?u:parseFloat(u);if(!isNaN(h))return h}}}catch(e){console.warn("AHN height query failed:",e)}return null}const xEe={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},vEe={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function kO(n,e){const t=[],r=n.toLowerCase(),i=(e||"").toLowerCase();return r.includes("kalkhoudend")||i.endsWith("a")?t.push("Kalkhoudend = goede metaalconservering"):(r.includes("kalkarm")||r.includes("kalkloos"))&&t.push("Kalkarm = meer corrosie op metalen"),r.includes("poldervaag")?t.push("Poldervaaggrond = jonge rivierklei, ingepolderd gebied"):r.includes("enkeerdgrond")||r.includes("enk")?t.push("Enkeerdgrond = oude akkers met plaggenbemesting - archeologisch interessant!"):r.includes("podzol")?t.push("Podzolgrond = uitgeloogde zandgrond, vaak zuur"):(r.includes("veengrond")||r.includes("veen"))&&t.push("Veengrond = zuur, slechte metaalconservering (tenzij waterverzadigd)"),r.includes("zware klei")?t.push("Zware klei = moeilijk graven, goede conservering"):r.includes("lichte klei")||r.includes("zavel")?t.push("Zavel/lichte klei = redelijk te graven"):r.includes("zand")&&!r.includes("zavel")&&t.push("Zandgrond = makkelijk graven"),r.includes("rivierklei")||i.startsWith("r")?t.push("Rivierafzetting"):(r.includes("zeeklei")||i.startsWith("m"))&&t.push("Zeekleiafzetting"),t}function EEe(){const n=rs(Se=>Se.map),e=Ol(Se=>Se.removeVondst),{layers:t,addPoint:r}=qs(),[i,s]=se.useState([]),[a,o]=se.useState(0),[l,u]=se.useState(!1),[h,f]=se.useState(null),[g,p]=se.useState(!1),[x,v]=se.useState(!1),[w,T]=se.useState(null),[I,A]=se.useState(null),[N,D]=se.useState(!1),[B,k]=se.useState(null),[P,M]=se.useState(null),[j,O]=se.useState(()=>{const Se=localStorage.getItem("popupTextScale");return Se?parseInt(Se):100}),W=Se=>{O(Se),localStorage.setItem("popupTextScale",Se.toString())},F=i[a]||"",Te=i.length>1,Me=Se=>{const Fe=Se.match(/<strong[^>]*>(.*?)<\/strong>/);if(Fe){const je=Fe[1].replace(/<[^>]+>/g,""),Qe=Se.replace(Fe[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:je,contentWithoutTitle:Qe}}return{title:"",contentWithoutTitle:Se}},Le=Se=>Se.replace(/class="([^"]*)"/g,(je,Qe)=>{if(Qe.includes("text-xs")){const gt=Qe.replace(/\btext-xs\b/g,"").trim();return gt?`style="font-size:0.857em" class="${gt}"`:'style="font-size:0.857em"'}if(Qe.includes("text-sm")){const gt=Qe.replace(/\btext-sm\b/g,"").trim();return gt?`class="${gt}"`:""}return je}).replace(/class=""/g,""),{title:be,contentWithoutTitle:ce}=Me(F),Re=Le(ce),Ie=F.includes("Landbouwperceel"),ie=F.includes("data-vondst-id="),V=()=>{o(Se=>(Se-1+i.length)%i.length)},Y=()=>{o(Se=>(Se+1)%i.length)},ee=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",h),!n||!h||x){console.log(" STOP - map:",!!n,"coord:",h,"loading:",x);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${h[0]}, ${h[1]}]`),v(!0);try{await bge(n,h)&&p(!0)}catch(Se){console.error("Failed to load height map:",Se)}finally{v(!1)}},ne=()=>{n&&(LI(n),p(!1))};se.useEffect(()=>{if(!n)return;const Se=Qe=>{let gt='<strong class="text-purple-800">AMK Monument</strong>';if(Qe.toponiem&&(gt+=`<br/><span class="text-sm font-semibold">${Qe.toponiem}</span>`),Qe.kwaliteitswaarde&&(gt+=`<br/><span class="text-sm text-purple-700">${Qe.kwaliteitswaarde}</span>`),Qe.omschrijving&&(gt+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Qe.omschrijving}</span>`),Qe.txt_label){const _t=Qe.txt_label.split(", ").slice(0,3).join(", ");gt+=`<br/><span class="text-xs text-gray-500 italic">${_t}${Qe.txt_label.split(", ").length>3?"...":""}</span>`}return gt},Fe=async(Qe,gt)=>{const _t=[],Lt=n.getLayers().getArray().filter(nn=>nn instanceof Qu&&nn.getVisible()?nn.getSource()instanceof GW:!1);for(const nn of Lt){const zt=nn.getSource();if(!zt)continue;const Oe=nn.get("title")||"";if(Oe.startsWith("Paleokaart"))continue;if(Oe==="Archeo Landschappen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,le=z.landschapsnaam||z.naam||"Archeologisch Landschap",Be=z.omschrijving||"";let we=`<strong class="text-green-800">${le}</strong>`;Be&&(we+=`<br/><span class="text-sm text-gray-600">${Be}</span>`),we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Een archeologisch landschap is een gebied waar het landschap nog sporen draagt van menselijke activiteit uit het verleden. Denk aan oude akkers, nederzettingen of verdedigingswerken.</div>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Aardewerk, munten, gereedschap en andere voorwerpen van vroegere bewoners. De kans op vondsten hangt af van het type landschap.</div>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Bekijk de Rijksdienst voor het Cultureel Erfgoed (RCE) voor meer informatie over archeologische landschappen.</div>',_t.push(we)}}catch(Ae){console.warn("Archeo Landschappen WMS query failed:",Ae)}continue}if(Oe==="Essen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(z.naam||z.Naam||z.NAME)&&(le+=`<br/><span class="text-sm font-semibold text-amber-700">${z.naam||z.Naam||z.NAME}</span>`),(z.type||z.Type||z.TYPE)&&(le+=`<br/><span class="text-xs text-gray-600">${z.type||z.Type||z.TYPE}</span>`),(z.omschrijving||z.Omschrijving)&&(le+=`<br/><span class="text-xs text-gray-500">${z.omschrijving||z.Omschrijving}</span>`),_t.push(le)}}catch(Ae){console.warn("Essen WMS query failed:",Ae)}continue}if(Oe==="FAMKE Steentijd"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=FAMKE_Advies_steentijd-bronstijd3339&QUERY_LAYERS=FAMKE_Advies_steentijd-bronstijd3339&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';le+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart voor oude vondsten</span>';const Be=z.advies||z.Advies||"";if(Be){le+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',le+=`<div class="text-sm text-amber-700 mt-1">${Be}</div>`;const we=Be.toLowerCase();let Ze="",ht="text-gray-600",Et="";we.includes("karterend")?(Ze="Op deze plek verwachten archeologen vondsten uit de steentijd of bronstijd. Bij graafwerk moet er eerst onderzoek komen.",Et="Goede kans op oude vondsten (vuursteen, bijlen, aardewerk)",ht="text-amber-600"):we.includes("waarderend")?(Ze="Hier zijn mogelijk belangrijke vindplaatsen. Proefsleuven zijn nodig om te kijken wat er precies zit.",Et="Mogelijk interessante vondsten uit de prehistorie",ht="text-orange-600"):we.includes("geen")?(Ze="De kans op prehistorische vondsten is hier klein. De grond is waarschijnlijk te jong of te veel verstoord.",Et="Weinig kans op steentijd-vondsten",ht="text-green-600"):we.includes("quickscan")&&(Ze="Hier is eerst bureau-onderzoek nodig. Er kunnen vondsten zitten, maar dat is nog niet zeker.",Et="Onbekend, nader onderzoek nodig",ht="text-blue-600"),Ze&&(le+=`<div class="text-sm ${ht} mt-1">${Ze}</div>`),Et&&(le+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',le+=`<div class="text-sm text-gray-700 mt-1">${Et}</div>`),le+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',le+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de steentijd en bronstijd te verwachten zijn.</div>'}_t.push(le)}}catch(Ae){console.warn("FAMKE WMS query failed:",Ae)}continue}if(Oe==="Archeo Onderzoeken"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-blue-800">Archeologisch Onderzoek</strong>';if(z.type_onderzoek&&(le+=`<br/><span class="text-sm font-semibold">${z.type_onderzoek}</span>`),z.onderzoeksmeldingnummer&&(le+=`<br/><span class="text-xs text-gray-500">Melding: ${z.onderzoeksmeldingnummer}</span>`),z.uitvoerder&&(le+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${z.uitvoerder}</span>`),z.startdatum||z.einddatum){const Be=[z.startdatum,z.einddatum].filter(Boolean).join(" - ");le+=`<br/><span class="text-xs text-gray-600">Periode: ${Be}</span>`}if(z.gemeente&&(le+=`<br/><span class="text-xs text-gray-500">${z.gemeente}</span>`),z.type_uri){const Be=z.type_uri.replace("type_uri:","").trim();Be.startsWith("http")&&(le+=`<br/><a href="${Be}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">Meer informatie</a>`)}for(const[Be,we]of Object.entries(z))if(Be.toLowerCase().includes("uri")&&typeof we=="string"&&Be!=="type_uri"){const Ze=we.replace(/^[a-z_]+:/i,"").trim();Ze.startsWith("http")&&(le+=`<br/><a href="${Ze}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">${Be.replace("_uri","")}</a>`)}_t.push(le)}}catch(Ae){console.warn("Archeo Onderzoeken WMS query failed:",Ae)}continue}if(Oe==="IKAW"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=500,q=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,le=Math.round(z.PALETTE_INDEX||z.palette_index||0),Be=vEe[le]||`Trefkans onbekend (${le})`;let we='<strong class="text-orange-800">IKAW Verwachtingskaart</strong>';we+='<br/><span class="text-sm text-gray-500">Kaart met kansen op archeologische vondsten</span>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',we+=`<div class="text-sm text-orange-700 mt-1">${Be}</div>`;const ht={1:{tekst:"De kans op archeologische vondsten is hier zeer klein. De grond is waarschijnlijk verstoord of te jong.",vondsten:"Niet veel te verwachten, maar verrassingen zijn altijd mogelijk.",kleur:"text-gray-600"},2:{tekst:"De kans op vondsten is laag, maar niet uitgesloten. Soms worden hier toch interessante objecten gevonden.",vondsten:"Af en toe losse vondsten uit verschillende periodes.",kleur:"text-yellow-600"},3:{tekst:"Dit is een interessant gebied met een redelijke kans op vondsten. Hier woonden of werkten mensen in het verleden.",vondsten:"Aardewerk, munten, metalen voorwerpen uit verschillende tijdperken.",kleur:"text-amber-600"},4:{tekst:"Dit is een zeer kansrijk gebied! Hier zijn waarschijnlijk resten van oude bewoning of activiteit. Let op: bij graafwerk kan een vergunning nodig zijn.",vondsten:"Grote kans op interessante vondsten: aardewerk, munten, sieraden, gereedschap.",kleur:"text-orange-600"},5:{tekst:"Dit is een waterbodem. Vondsten zijn hier moeilijker te bereiken maar kunnen goed bewaard zijn gebleven.",vondsten:"Scheepswrakken, verloren lading, gedumpte voorwerpen.",kleur:"text-blue-600"},6:{tekst:"Waterbodem met archeologische potentie. Hier kunnen interessante vondsten liggen die door het water goed bewaard zijn.",vondsten:"Scheepsresten, ankers, aardewerk, metalen voorwerpen.",kleur:"text-blue-600"},7:{tekst:"Waterbodem met hoge archeologische waarde. Hier zijn bekende vindplaatsen of scheepswrakken.",vondsten:"Belangrijke maritieme vondsten, beschermd gebied.",kleur:"text-blue-700"}}[le];ht&&(we+=`<div class="text-sm ${ht.kleur} mt-1">${ht.tekst}</div>`,we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',we+=`<div class="text-sm text-gray-700 mt-1">${ht.vondsten}</div>`),we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de IKAW?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">De IKAW (Indicatieve Kaart Archeologische Waarden) toont de kans op archeologische vondsten in heel Nederland. De kaart is gemaakt door de Rijksdienst voor het Cultureel Erfgoed.</div>',_t.push(we)}}catch(Ae){console.warn("IKAW WMS query failed:",Ae)}continue}if(Oe==="Inundatiegebieden"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-blue-800">Inundatiegebied</strong>';(z["linie-naam"]||z.linie_naam)&&(le+=`<br/><span class="text-sm font-semibold text-blue-700">${z["linie-naam"]||z.linie_naam}</span>`),z.naam&&(le+=`<br/><span class="text-sm text-gray-700">${z.naam}</span>`),z.periode&&(le+=`<br/><span class="text-xs text-gray-500">${z.periode}</span>`),z.lin_period&&(le+=`<br/><span class="text-xs text-gray-400">${z.lin_period}</span>`),_t.push(le)}}catch(Ae){console.warn("Inundatiegebieden WMS query failed:",Ae)}continue}if(Oe==="Militaire Objecten"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=50,q=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,le=z.obj_soort||"",Be=z.obj_naam||"",we=z.lin_period||"",Ze=z["linie-naam"]||z.linie_naam||"";let ht=le||"Militair Object",Et="Dit is een historisch militair object uit de Nederlandse verdedigingsgeschiedenis.",St="";const Rt=le.toLowerCase();Rt.includes("fort")?(Et="Een fort is een versterkte verdedigingspost, vaak met dikke muren en geschutsopstellingen. Forten maakten deel uit van grotere verdedigingslinies.",St="Rond forten worden soms kogels, knopen van uniformen, muntjes of andere militaire voorwerpen gevonden."):Rt.includes("schans")?(Et="Een schans is een kleinere versterking, vaak gemaakt van aarde en palissaden. Schansen werden gebruikt om strategische punten te verdedigen.",St="Bij schansen kun je musketkogels, knopen en soms munten uit de 17e-18e eeuw tegenkomen."):Rt.includes("batterij")||Rt.includes("battery")?(Et="Een batterij is een geschutsopstelling, vaak op een strategische plek om vijanden onder vuur te nemen.",St="Bij batterijen worden soms kanonkogels of onderdelen van geschut gevonden."):Rt.includes("bunker")||Rt.includes("kazemat")?(Et="Een bunker of kazemat is een versterkte betonnen schuilplaats. Veel werden gebouwd rond 1940 als onderdeel van verdedigingslinies.",St="Bij bunkers worden soms militaire voorwerpen uit WOII gevonden, zoals knopen, gespen of munitieresten."):Rt.includes("sluis")||Rt.includes("inlaatwerk")?(Et="Militaire sluizen en inlaatwerken werden gebruikt om land onder water te zetten (inunderen). Dit was een belangrijke verdedigingstactiek.",St="Bij historische sluizen worden soms voorwerpen gevonden van soldaten die deze bewaakten."):Rt.includes("toren")||Rt.includes("wachttoren")?(Et="Wachttorens werden gebruikt om de omgeving in de gaten te houden en vijandelijke bewegingen te signaleren.",St="Bij torens worden soms persoonlijke voorwerpen van soldaten gevonden."):Rt.includes("kazerne")&&(Et="Een kazerne is een gebouw waar soldaten gelegerd waren. Hier woonden, aten en oefenden de troepen.",St="Rond kazernes worden regelmatig knopen, gespen en andere persoonlijke voorwerpen gevonden.");let en=`<strong class="text-stone-800">${ht}</strong>`;Be&&(en+=`<br/><span class="text-sm font-semibold text-stone-700">${Be}</span>`),Ze&&(en+=`<br/><span class="text-sm text-blue-600">${Ze}</span>`),we&&(en+=`<br/><span class="text-xs text-gray-500">${we}</span>`),en+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',en+=`<div class="text-sm text-gray-700 mt-1">${Et}</div>`,St&&(en+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',en+=`<div class="text-sm text-gray-700 mt-1">${St}</div>`),en+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',en+='<div class="text-sm text-gray-700 mt-1">',en+='<a href="https://erfgoedenlocatie.nl/linies-en-stellingen" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Linies en Stellingen</a>',en+="</div>",_t.push(en)}}catch(Ae){console.warn("Militaire Objecten WMS query failed:",Ae)}continue}if(Oe==="Verdedigingslinies"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-amber-800">Verdedigingslinie</strong>';const Be={"Hollandse Waterlinie":"Verdedigingsstelsel (1815-1940) dat gebruik maakte van inundaties om Holland te beschermen. UNESCO Werelderfgoed.","Nieuwe Hollandse Waterlinie":"Uitgebreide versie (1815-1940) met forten en inundatiegebieden van Muiden tot Gorinchem.","Stelling van Amsterdam":"Ringverdediging rond Amsterdam (1880-1920) met 42 forten. UNESCO Werelderfgoed.",Grebbelinie:"Verdedigingslinie langs de Grebbe (17e-20e eeuw). Zware gevechten in mei 1940.",IJssellinie:"Koude Oorlog verdediging (1950-1968) langs de IJssel tegen Sovjet-invasie.",Atlantikwall:"Duitse kustverdediging WOII (1942-1945) van Noorwegen tot Spanje.","Peel-Raamstelling":"Verdedigingslinie in Brabant/Limburg. Gevechten mei 1940.","Maas-Waalstelling":"Linie tussen Maas en Waal, onderdeel landsverdediging.",Zuiderwaterlinie:"Waterlinie in West-Brabant en Zeeland (17e-19e eeuw).","Staats-Spaanse Linies":"Vestingwerken uit de 80-jarige oorlog (1568-1648)."},we=z.naam||z.lin_naam||"";if(we){le+=`<br/><span class="text-sm font-semibold text-amber-700">${we}</span>`;const Ze=Object.entries(Be).find(([ht])=>we.toLowerCase().includes(ht.toLowerCase())||ht.toLowerCase().includes(we.toLowerCase()));Ze&&(le+=`<br/><span class="text-sm text-gray-700">${Ze[1]}</span>`)}z.lin_period&&(le+=`<br/><span class="text-xs text-purple-600">${z.lin_period}</span>`),z.status&&(le+=`<br/><span class="text-xs text-gray-400">${z.status}</span>`),_t.push(le)}}catch(Ae){console.warn("Verdedigingslinies WMS query failed:",Ae)}continue}if(Oe==="Rijksmonumenten"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=50,q=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-red-800">Rijksmonument</strong>';(z.cbsNaam||z.cbs_naam)&&(le+=`<br/><span class="text-sm font-semibold">${z.cbsNaam||z.cbs_naam}</span>`),z.hoofdcategorie&&(le+=`<br/><span class="text-sm text-red-700">${z.hoofdcategorie}</span>`),z.subcategorie&&(le+=`<br/><span class="text-xs text-gray-600">${z.subcategorie}</span>`),z.rijksmonumentnummer&&(le+=`<br/><span class="text-xs text-gray-500">Nr: ${z.rijksmonumentnummer}</span>`),(z.bouwjaar||z.oorspronkelijkebouwjaar)&&(le+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.bouwjaar||z.oorspronkelijkebouwjaar}</span>`),_t.push(le)}}catch(Ae){console.warn("Rijksmonumenten WMS query failed:",Ae)}continue}if(Oe==="Werelderfgoed"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=500,q=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(z.siteName||z.naam)&&(le+=`<br/><span class="text-sm font-semibold text-cyan-700">${z.siteName||z.naam}</span>`),z.siteDesignation&&(le+=`<br/><span class="text-xs text-gray-600">${z.siteDesignation}</span>`),_t.push(le)}}catch(Ae){console.warn("Werelderfgoed WMS query failed:",Ae)}continue}if(Oe==="Terpen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=terpen3335&QUERY_LAYERS=terpen3335&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,le=z.naam||z.NAAM||z.Naam||"Terp",Be=z.plaats||z.PLAATS||z.Plaats||"";let we=`<strong class="text-orange-800">${le}</strong>`;Be&&(we+=`<br/><span class="text-sm text-gray-500">${Be}</span>`),we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Een terp is een kunstmatige heuvel. Mensen bouwden deze heuvels om droog te wonen in het vlakke, natte land. Terpen zijn vaak meer dan 2000 jaar oud.</div>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Op en rond terpen worden vaak vondsten gedaan:</div>',we+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',we+="<li>Middeleeuws aardewerk en botten</li>",we+="<li>Munten uit verschillende periodes</li>",we+="<li>Metalen voorwerpen (gespen, fibulae, sieraden)</li>",we+="<li>Soms Romeinse of zelfs prehistorische vondsten</li>",we+="</ul>",we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waarom zijn terpen interessant?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Terpen waren vaak dorpskernen waar mensen eeuwenlang woonden. Door de ophoging bleven veel voorwerpen goed bewaard. Let op: sommige terpen zijn beschermd monument!</div>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Veel terpen zijn nog zichtbaar in het landschap. Vraag altijd toestemming aan de grondeigenaar voordat je gaat detecteren.</div>',_t.push(we)}}catch(Ae){console.warn("Terpen WMS query failed:",Ae)}continue}if(Oe==="Religieus Erfgoed"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=50,q=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,le=z.naam||z.NAAM||z.name||z.NAME||"Onbekend",Be=z.denominatie||z.DENOMINATIE||z.religie||"",we=z.type||z.TYPE||z.functie||"",Ze=z.bouwjaar||z.BOUWJAAR||z.jaar||"",ht=z.gemeente||z.GEMEENTE||z.plaats||"";let Et=`<strong class="text-purple-800">${le}</strong>`;const St=we.toLowerCase();let Rt="Een religieus gebouw of heilige plek.",en="Munten van kerkgangers, knopen, gespen, religieuze voorwerpen";St.includes("kerk")||St.includes("church")?(Rt="Een kerk was het hart van de gemeenschap. Hier kwamen mensen samen voor diensten, maar ook voor belangrijke gebeurtenissen.",en="Munten uit de collecte, knopen, gespen, pelgrimsinsignes, loden zegels"):St.includes("kapel")||St.includes("chapel")?(Rt="Een kapel is een klein gebedshuis, vaak bij een landgoed, langs een weg, of op een bijzondere plek.",en="Devotionalia, munten, kruisjes, rozenkransen"):St.includes("synagoge")?(Rt="Een synagoge is een Joods gebedshuis. Veel synagogen in Nederland zijn verwoest of herbestemd na de Tweede Wereldoorlog.",en="Munten, knopen, kleine religieuze voorwerpen"):St.includes("klooster")||St.includes("monastery")?(Rt="Een klooster was een woon- en werkplek voor monniken of nonnen. Veel kloosters hadden eigen werkplaatsen en landerijen.",en="Religieuze voorwerpen, zegels, gereedschap, aardewerk, middeleeuwse munten"):St.includes("toren")||St.includes("tower")?(Rt="Een kerktoren of klokkentoren. Soms is alleen de toren nog over van een verdwenen kerk.",en="Munten, knopen, bouwmateriaal"):(St.includes("begraafplaats")||St.includes("cemetery"))&&(Rt="Een historische begraafplaats. Detecteren op begraafplaatsen is niet toegestaan zonder toestemming.",en="Detecteren hier niet toegestaan"),Be&&(Et+=`<br/><span class="text-sm text-purple-600">${Be}</span>`),we&&(Et+=`<br/><span class="text-sm text-gray-600">${we}</span>`),Ze&&(Et+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${Ze}</span>`),ht&&(Et+=`<br/><span class="text-xs text-gray-400">${ht}</span>`),Et+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Et+=`<div class="text-sm text-gray-700 mt-1">${Rt}</div>`,Et+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Et+=`<div class="text-sm text-gray-700 mt-1">${en}</div>`,Et+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',St.includes("begraafplaats")?Et+='<div class="text-sm text-red-600 mt-1">Detecteren op begraafplaatsen is niet toegestaan. Respecteer de rust van de overledenen.</div>':Et+='<div class="text-sm text-gray-700 mt-1">Veel kerken en religieuze gebouwen zijn beschermd monument. Vraag altijd toestemming voordat je gaat detecteren op het terrein.</div>',_t.push(Et)}}catch(Ae){console.warn("Religieus Erfgoed WMS query failed:",Ae)}continue}if(Oe==="Gewaspercelen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=50,wt=`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`,q=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${wt}`,Ot=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${wt}`,[re,z]=await Promise.all([fetch(q),fetch(Ot).catch(()=>null)]),le=await re.json();if(le.features&&le.features.length>0){const Be=le.features[0].properties;let we='<strong class="text-green-800">Landbouwperceel</strong>';if((Be.gewas||Be.gewasnaam)&&(we+=`<br/><span class="text-sm font-semibold text-green-700">${Be.gewas||Be.gewasnaam}</span>`),(Be.categorie||Be.category)&&(we+=`<br/><span class="text-xs text-gray-600">${Be.categorie||Be.category}</span>`),Be.oppervlakte&&(we+=`<br/><span class="text-xs text-gray-500">${Be.oppervlakte} ha</span>`),z)try{const Ze=await z.json();if(Ze.features&&Ze.features.length>0){const ht=Ze.features[0].properties,Et=ht.first_soilname||ht.soilname||ht.bodemtype,St=ht.first_soilcode||ht.soilcode||ht.maparea_soilcode;if(Et){we+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${Et}</span>`;const Rt=kO(Et,St);Rt.length>0&&(we+=`<br/><span class="text-xs text-gray-500 italic">${Rt.join("  ")}</span>`)}}}catch{}_t.push(we)}}catch(Ae){console.warn("BRP Gewaspercelen WMS query failed:",Ae)}continue}if(Oe==="Kadastrale Grenzen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=20,q=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,le=z.kadastraleGemeenteWaarde||z.kadastrale_gemeente_waarde||z.kadastraleGemeente||xEe[String(z.kadastraleGemeenteCode)]||z.kadastraleGemeenteCode,Be=z.sectie||z.Sectie||"",we=z.perceelnummer||z.perceelNummer||z.Perceelnummer||"",Ze=z.kadastraleGrootteWaarde||z.kadastrale_grootte_waarde||z.kadastraleGrootte||z.oppervlakte,ht=z.AKRKadastraleGemeenteCodeWaarde||z.akrKadastraleGemeenteCodeWaarde||"",Et=[le,Be,we].filter(Boolean).join(" "),St=ht&&Be&&we?`${ht}-${Be}-${we}`:"";let Rt='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(Et&&(Rt+=`<br/><span class="text-sm text-indigo-700">${Et}</span>`),St&&(Rt+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${St}</span>`),Ze){const en=typeof Ze=="number"?Ze:parseFloat(Ze);isNaN(en)||(Rt+=`<br/><span class="text-xs text-gray-600">${en.toLocaleString("nl-NL")} m</span>`)}Rt+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code, ga naar </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-600"> en klik "Zoek op aanduiding"</span><span class="text-xs text-gray-400"> (betaalde dienst)</span>',_t.push(Rt)}}catch(Ae){console.warn("Kadastrale Grenzen WMS query failed:",Ae)}continue}if(Oe==="Scheepswrakken"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-cyan-800">Scheepswrak</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-cyan-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.datering||z.DATERING)&&(le+=`<br/><span class="text-xs text-gray-500">Datering: ${z.datering||z.DATERING}</span>`),(z.bron||z.BRON)&&(le+=`<br/><span class="text-xs text-gray-400">${z.bron||z.BRON}</span>`),_t.push(le)}}catch(Ae){console.warn("Scheepswrakken WMS query failed:",Ae)}continue}if(Oe==="Woonheuvels ZH"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-orange-800">Woonheuvel</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-orange-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),_t.push(le)}}catch(Ae){console.warn("Woonheuvels WMS query failed:",Ae)}continue}if(Oe==="Romeinse Forten"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=200,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-red-800">Romeins Fort</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-red-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.periode||z.PERIODE)&&(le+=`<br/><span class="text-xs text-gray-500">${z.periode||z.PERIODE}</span>`),_t.push(le)}}catch(Ae){console.warn("Romeinse Forten WMS query failed:",Ae)}continue}if(Oe==="Windmolens"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=50,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-amber-800">Windmolen</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-amber-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE||z.functie||z.FUNCTIE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE||z.functie||z.FUNCTIE}</span>`),(z.bouwjaar||z.BOUWJAAR)&&(le+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.bouwjaar||z.BOUWJAAR}</span>`),_t.push(le)}}catch(Ae){console.warn("Windmolens WMS query failed:",Ae)}continue}if(Oe==="Erfgoedlijnen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=200,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-purple-800">Erfgoedlijn</strong>';(z.naam||z.NAAM||z.erfgoedlijn)&&(le+=`<br/><span class="text-sm font-semibold text-purple-700">${z.naam||z.NAAM||z.erfgoedlijn}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.omschrijving||z.OMSCHRIJVING)&&(le+=`<br/><span class="text-xs text-gray-500">${z.omschrijving||z.OMSCHRIJVING}</span>`),_t.push(le)}}catch(Ae){console.warn("Erfgoedlijnen WMS query failed:",Ae)}continue}if(Oe==="Oude Kernen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=200,q=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-stone-800">Historische Kern</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-stone-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.periode||z.PERIODE)&&(le+=`<br/><span class="text-xs text-gray-500">${z.periode||z.PERIODE}</span>`),_t.push(le)}}catch(Ae){console.warn("Oude Kernen WMS query failed:",Ae)}continue}if(Oe==="Relictenkaart Punten"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=50,q=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,le={KV:"Kasteel/Vesting",K:"Kapel",KE:"Kerkhof",B:"Buitenhuis",OB:"Oud Bebouwingsrelict",OV:"Oude Verkaveling",NR:"Nijverheidsrelict",GH:"Grafheuvel",BP:"Begraafplaats",HH:"Havezate",RM:"Rosmolen",WM:"Windmolen",PM:"Poldermolen",EK:"Eendenkooi",SH:"Scholtenhoeve"},Be=z.type?.replace(/[0-9]/g,"")||"",we=le[Be]||z.type||"Cultuurhistorisch object";let Ze='<strong class="text-emerald-800">Relict</strong>';Ze+=`<br/><span class="text-sm font-semibold text-emerald-700">${we}</span>`,z.type&&Be!==z.type&&(Ze+=`<br/><span class="text-xs text-gray-500">Code: ${z.type}</span>`),z.streek&&(Ze+=`<br/><span class="text-xs text-gray-400">Streek: ${z.streek}</span>`),_t.push(Ze)}}catch(Ae){console.warn("Relictenkaart Punten WMS query failed:",Ae)}continue}if(Oe==="Relictenkaart Lijnen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=50,q=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,Be={1:"Sprengenbeek",2:"Oude waterloop",3:"Doorgaande weg",4:"Hessenweg",5:"Oude weg",6:"Historische grens",7:"Trekpad",8:"Jaagpad"}[z.klasse]||`Historisch lijnrelict (${z.klasse})`;let we='<strong class="text-teal-800">Lijnrelict</strong>';we+=`<br/><span class="text-sm font-semibold text-teal-700">${Be}</span>`,_t.push(we)}}catch(Ae){console.warn("Relictenkaart Lijnen WMS query failed:",Ae)}continue}if(Oe==="Relictenkaart Vlakken"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=100,q=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,Be={1:"Onveranderd agrarisch (voor 1850)",2:"Jonge heideontginning (1850-1950)",3:"Open essencomplex",4:"Kampenlandschap",5:"Heiderelict (1850)",6:"Bosrelict (1850)",7:"Stuifzandrelict",8:"Oud bouwland",9:"Historisch grasland",10:"Beekdal"}[z.klasse]||`Historisch landschap (${z.klasse})`;let we='<strong class="text-lime-800">Landschapsrelict</strong>';if(we+=`<br/><span class="text-sm font-semibold text-lime-700">${Be}</span>`,z.st_area_shape_){const Ze=(z.st_area_shape_/1e4).toFixed(1);we+=`<br/><span class="text-xs text-gray-500">${Ze} ha</span>`}_t.push(we)}}catch(Ae){console.warn("Relictenkaart Vlakken WMS query failed:",Ae)}continue}if(Oe==="Verdronken Dorpen"){try{const Ae=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Ae),C=200,q=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-C},${ge[1]-C},${ge[0]+C},${ge[1]+C}`}`,re=await(await fetch(q)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let le='<strong class="text-blue-800">Verdronken Dorp</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-blue-700">${z.naam||z.NAAM}</span>`),(z.verdronken||z.VERDRONKEN||z.jaar||z.JAAR)&&(le+=`<br/><span class="text-xs text-gray-600">Verdronken: ${z.verdronken||z.VERDRONKEN||z.jaar||z.JAAR}</span>`),(z.gemeente||z.GEMEENTE)&&(le+=`<br/><span class="text-xs text-gray-500">${z.gemeente||z.GEMEENTE}</span>`),(z.bron||z.BRON)&&(le+=`<br/><span class="text-xs text-gray-400">${z.bron||z.BRON}</span>`),_t.push(le)}}catch(Ae){console.warn("Verdronken Dorpen WMS query failed:",Ae)}continue}const Xt=zt.getFeatureInfoUrl(Qe,gt,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Xt)try{const ge=await(await fetch(Xt)).json();if(ge.features&&ge.features.length>0){const C=ge.features[0].properties;if(Oe==="AHN 0.5m"){let re='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const z=C.value_list??C.GRAY_INDEX??C.value??C.gray_index??C.dtm_05m??C.DTM_05M??C.hoogte??C.HOOGTE??C.elevation??C.ELEVATION;if(z!=null&&!isNaN(Number(z))){const le=typeof z=="number"?z.toFixed(2):Number(z).toFixed(2);re+=`<br/><span class="text-sm text-blue-700">Hoogte: ${le} m NAP</span>`,_t.push(re)}else{let le=!1;const Be=["geometry","id","fid","gml_id","bbox"];for(const[we,Ze]of Object.entries(C))!Be.includes(we.toLowerCase())&&Ze!==null&&Ze!==""&&(re+=`<br/><span class="text-xs text-gray-600">${we}: ${Ze}</span>`,le=!0);le&&_t.push(re)}continue}if(Oe==="Geomorfologie"){let re='<strong class="text-green-800">Geomorfologie</strong>',z=!1;const le=C.landform_subgroup_description,Be=C.relief_klasse,we=C.relief_subklasse,Ze=C.genese_description,ht=C.active_process;if(le&&(re+=`<br/><span class="text-sm text-green-700">${le}</span>`,z=!0),Be){const Et=we&&we!==Be?`${Be} (${we})`:Be;re+=`<br/><span class="text-xs text-gray-600">Relief: ${Et}</span>`,z=!0}if(Ze&&(re+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${Ze}</span>`,z=!0),ht&&ht!=="onbekend"&&(re+=`<br/><span class="text-xs text-gray-500">Actief proces: ${ht}</span>`,z=!0),!z){const Et=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[St,Rt]of Object.entries(C))!Et.includes(St.toLowerCase())&&Rt!==null&&Rt!==""&&!St.includes("validfrom")&&!St.includes("validto")&&(re+=`<br/><span class="text-xs text-gray-600">${St}: ${Rt}</span>`)}re+='<br/><a href="https://legendageomorfologie.wur.nl/" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">Meer over geomorfologie</a>',_t.push(re);continue}let wt=`<strong>${Oe}</strong>`;const q=C.first_soilname||C.soilname,Ot=C.soilcode||C.first_soilcode;if(q&&(wt+=`<br/><span class="text-sm text-amber-700">${q}</span>`,Oe==="Bodemkaart")){const re=kO(q,Ot);re.length>0&&(wt+=`<br/><span class="text-xs text-gray-500 italic">${re.join("  ")}</span>`)}if(C.soilslope&&C.soilslope!=="Niet opgenomen"&&(wt+=`<br/><span class="text-xs text-gray-500">Helling: ${C.soilslope}</span>`),!q){const re=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[z,le]of Object.entries(C))!re.includes(z)&&le&&le!=="Niet opgenomen"&&(wt+=`<br/><span class="text-xs text-gray-600">${z}: ${le}</span>`)}_t.push(wt)}}catch(Ae){console.warn("WMS GetFeatureInfo failed:",Ae)}}return _t},je=async Qe=>{const gt=[],_t=_Ee(Qe.coordinate),Lt=[];n.forEachFeatureAtPixel(Qe.pixel,Xt=>{Lt.push(Xt)});for(const Xt of Lt){const Ae=Xt.getProperties(),{geometry:ge,...C}=Ae;if(C.vondst){const re=C.vondst,z=`<strong>${re.objectType}</strong>
            <div data-vondst-id="${re.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${re.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${re.period}</span>
            ${re.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${re.depth} cm</span>`:""}
            ${re.condition&&re.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${re.condition}</span>`:""}
            ${re.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${re.weight} gram</span>`:""}
            ${re.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${re.notes}</span>`:""}
            ${re.photoUrl?`<br/><a href="${re.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(re.timestamp).toLocaleDateString("nl-NL")}</span>`;gt.push(z),T(re.id);continue}if(C.layerType==="customPoint"&&C.customPoint){const re=C.customPoint,z=C.customLayerName||"Mijn Laag";let le=`<strong>${re.name}</strong>`;if(le+=`<br/><span class="text-xs text-gray-500">${z}</span>`,re.category&&(le+=`<br/><span class="text-sm text-gray-600"><strong>Categorie:</strong> ${re.category}</span>`),re.photos&&re.photos.length>0){le+='<div class="flex flex-wrap gap-1 my-2">';for(const Be of re.photos.slice(0,3)){const we=Be.thumbnailUrl||Be.thumbnailBase64;we&&(le+=`<img src="${we}" alt="Foto" class="w-16 h-16 object-cover rounded border border-gray-200" />`)}re.photos.length>3&&(le+=`<span class="text-xs text-gray-400 self-end">+${re.photos.length-3} meer</span>`),le+="</div>"}re.notes&&(le+=`<br/><span class="text-sm text-gray-600 mt-1">${re.notes}</span>`),re.url&&(le+=`<br/><a href="${re.url}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Meer info</a>`),le+=`<br/><span class="text-xs text-gray-400">${new Date(re.createdAt).toLocaleDateString("nl-NL")}</span>`,gt.push(le);continue}if(C.kwaliteitswaarde&&C.kwaliteitswaarde.includes("archeologische waarde")){const re=Se(C);gt.push(re);continue}let wt=C.name||C.naam||C.title||C.NAAM||C.NAME||C.label||C.route_name||C.road_name;wt||(C.leisure==="playground"?wt="Speeltuin":C.leisure==="park"?wt="Park":C.leisure==="swimming_area"||C.sport==="swimming"?wt="Zwemplek":C.tourism==="museum"?wt="Museum":C.amenity==="cafe"||C.amenity==="restaurant"?wt=C.amenity==="cafe"?"Caf":"Restaurant":C.historic==="castle"?wt="Kasteel":wt="Info"),(C.bunker_type||C.name&&(C.name.toLowerCase().includes("bunker")||C.name.toLowerCase().includes("kazemat")||C.name.toLowerCase().includes("schuilplaats")))&&(wt="Bunker"),C.historic==="battlefield"&&(wt="Historisch slagveld");let q=`<strong>${wt}</strong>`;if(C.category&&(q+=`<br/><span class="text-sm text-gray-600">Categorie: ${C.category}</span>`),C.from_to&&C.from_to!==wt&&(q+=`<br/><span class="text-sm text-gray-600">${C.from_to}</span>`),C.route&&C.route!==wt&&(q+=`<br/><span class="text-sm text-gray-600">${C.route}</span>`),C.TOPONIEM&&(q+=`<br/><span class="text-sm font-semibold text-gray-800">${C.TOPONIEM}</span>`,C.PLAATS&&(q+=`<br/><span class="text-xs text-gray-500">${C.PLAATS}</span>`)),(C.AARD_VINDP||C.Aard_vindp)&&(q+=`<br/><span class="text-sm text-gray-700">Aard: ${C.AARD_VINDP||C.Aard_vindp}</span>`),C.BEGIN_PER&&C.EIND_PER&&(q+=`<br/><span class="text-sm text-purple-700">Periode: ${C.BEGIN_PER} - ${C.EIND_PER}</span>`),(C.AARD_OPM||C.Aard_opmer)&&(q+=`<br/><span class="text-xs text-gray-600 italic">${C.AARD_OPM||C.Aard_opmer}</span>`),C.Gemeente&&(q+=`<br/><span class="text-sm text-gray-600">Gemeente: ${C.Gemeente}</span>`),C.Bron&&(q+=`<br/><span class="text-xs text-gray-500">Bron: ${C.Bron}</span>`),C.Bron_besch&&(q+=`<br/><span class="text-xs text-gray-500">${C.Bron_besch}</span>`),C.Dat_st_z&&C.Dat_ei_z&&(q+=`<br/><span class="text-sm text-purple-700">Datering: ${C.Dat_st_z} - ${C.Dat_ei_z}</span>`),C.Begin&&C.Einde&&(q+=`<br/><span class="text-sm text-purple-700">Periode: ${C.Begin} - ${C.Einde}</span>`),C.Uiterwaard&&(q+=`<br/><span class="text-sm font-semibold">${C.Uiterwaard}</span>`),C.rivier&&(q+=`<br/><span class="text-sm text-blue-600">Rivier: ${C.rivier}</span>`),C.Beschrijvi&&(q+=`<br/><span class="text-sm text-gray-700">${C.Beschrijvi}</span>`),C.leisure&&C.name){const re=C.leisure==="playground"?"Speeltuin":C.leisure==="park"?"Park":C.leisure==="swimming_area"?"Zwemplek":null;re&&(q+=`<br/><span class="text-xs text-green-600">${re}</span>`)}if((C.tourism==="museum"||C.museum)&&C.name&&(q+='<br/><span class="text-xs text-purple-600">Museum</span>'),(C.leisure==="swimming_area"||C.sport==="swimming")&&C.name&&(q+='<br/><span class="text-xs text-cyan-600">Zwemplek</span>'),C.osm_id&&C.address!==void 0&&(q+='<br/><span class="text-xs text-lime-600">Kringloopwinkel</span>',C.address&&(q+=`<br/><span class="text-xs text-gray-500">${C.address}</span>`),C.phone&&(q+=`<br/><span class="text-xs text-gray-600">${C.phone}</span>`)),C.site_type==="tumulus"){const re=Xt.getGeometry()?.getCoordinates();let z="",le="";if(re){const Be=fn(re),we=Be[0],Ze=Be[1];we>5.5&&we<6.3&&Ze>52&&Ze<52.5?(z="Veluwe",le="De Veluwe heeft de grootste concentratie grafheuvels van Nederland. Veel heuvels liggen in grafvelden met tientallen heuvels bij elkaar."):we>6.2&&we<7.1&&Ze>52.6&&Ze<53.3?(z="Drenthe",le="Drenthe is beroemd om zijn prehistorische monumenten. Naast hunebedden liggen hier honderden grafheuvels uit de Bronstijd."):we>4.5&&we<6&&Ze>51.3&&Ze<51.9?(z="Noord-Brabant",le="Op de Brabantse zandgronden liggen veel grafheuvels, vaak in kleine groepjes op hogere gronden."):we>5.5&&we<6.3&&Ze>50.7&&Ze<51.6?(z="Limburg",le="De Limburgse heuvels en plateaus herbergen grafheuvels uit verschillende periodes, van Bronstijd tot Romeinse tijd."):we>5&&we<5.6&&Ze>52&&Ze<52.4&&(z="Utrechtse Heuvelrug",le="De stuwwallen van de Utrechtse Heuvelrug en het Gooi waren al in de prehistorie bewoond. Grafheuvels markeren de laatste rustplaats van de vroege bewoners.")}q+='<br/><span class="text-sm text-amber-700">Grafheuvel uit de Bronstijd of IJzertijd</span>',z&&(q+=`<br/><span class="text-sm text-gray-500">${z}</span>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">Een grafheuvel is een kunstmatige heuvel over een of meerdere graven. De meeste Nederlandse grafheuvels zijn 3000 tot 4000 jaar oud, uit de Bronstijd (2000-800 v.Chr.) of vroege IJzertijd.</div>',le&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Over deze regio</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${le}</div>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe herken je een grafheuvel?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">Grafheuvels zijn vaak ronde, lage heuvels van 10-30 meter doorsnee en 1-3 meter hoog. Ze liggen meestal op zandgronden, vaak in groepjes (grafvelden). Let op de kenmerkende ronde vorm in het landschap.</div>',C.wikidata?(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',q+=`<div class="text-sm text-gray-700 mt-1"><a href="https://www.wikidata.org/wiki/${C.wikidata}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk op Wikidata</a></div>`):(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',q+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Grafheuvel" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Lees meer over grafheuvels op Wikipedia</a></div>')}if(C.historic==="castle"||C.castle_type){const re={manor:{label:"Landhuis",uitleg:"Een landhuis of havezate was het woonhuis van een adellijke familie. Vaak met een landgoed eromheen.",vondsten:"Sieraden, gespen, munten, aardewerk van rijke bewoners"},stately:{label:"Statig huis",uitleg:"Een groot en deftig woonhuis, vaak van welgestelde families. Soms met kasteelachtige kenmerken.",vondsten:"Huishoudelijke voorwerpen, munten, knopen, aardewerk"},fortress:{label:"Fort/Vesting",uitleg:"Een versterkte militaire bouwwerk, gebouwd om een gebied te verdedigen.",vondsten:"Militaire voorwerpen, kogels, gespen, uniformonderdelen"},defensive:{label:"Verdedigingskasteel",uitleg:"Een kasteel gebouwd voor verdediging, met dikke muren, een gracht en torens.",vondsten:"Wapens, harnasonderdelen, pijlpunten, middeleeuwse munten"},palace:{label:"Paleis",uitleg:"Een groot en luxueus gebouw voor koningen, prinsen of zeer rijke families.",vondsten:"Luxe voorwerpen, sieraden, zegels, zeldzame munten"},castrum:{label:"Romeins fort",uitleg:"Een Romeins legerkamp of fort. Deze zijn bijna 2000 jaar oud!",vondsten:"Romeinse munten, fibulae, militaria, aardewerk"},citadel:{label:"Citadel",uitleg:"Een sterk versterkte kern binnen een stad, als laatste verdedigingslinie.",vondsten:"Militaire voorwerpen uit verschillende periodes"}},z=C.castle_type?re[C.castle_type]:null,le=z?.label||"Kasteel";if(q+=`<br/><span class="text-sm text-purple-600">${le}</span>`,C.start_date&&(q+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${C.start_date}</span>`),C.heritage&&(q+='<br/><span class="text-sm text-amber-600">Rijksmonument</span>'),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',z?q+=`<div class="text-sm text-gray-700 mt-1">${z.uitleg}</div>`:q+='<div class="text-sm text-gray-700 mt-1">Een historisch kasteel of adellijk huis. Kastelen waren vaak het middelpunt van macht en rijkdom in een gebied.</div>',q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',z?q+=`<div class="text-sm text-gray-700 mt-1">${z.vondsten}</div>`:q+='<div class="text-sm text-gray-700 mt-1">Munten, sieraden, gespen, aardewerk en andere voorwerpen van de vroegere bewoners.</div>',C.wikipedia||C.website){if(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',C.wikipedia){const Be=C.wikipedia.startsWith("http")?C.wikipedia:`https://nl.wikipedia.org/wiki/${C.wikipedia.replace(/^nl:/,"")}`;q+=`<div class="text-sm text-gray-700 mt-1"><a href="${Be}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}C.website&&(q+=`<div class="text-sm text-gray-700 mt-1"><a href="${C.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Website bezoeken</a></div>`)}}if(C.historic==="ruins"){const re=C.ruins_type||"";let z="Rune",le="Een rune is wat overblijft van een oud gebouw. Het kan een kerk, kasteel, molen of ander bouwwerk zijn geweest.",Be="Baksteenfragmenten, aardewerk, metalen voorwerpen van vroegere bewoners of gebruikers";if(re.toLowerCase().includes("church")||re.toLowerCase().includes("kerk")?(z="Kerkrune",le="De overblijfselen van een oude kerk. Vaak nog te herkennen aan de fundering of een paar muren.",Be="Religieuze voorwerpen, munten van kerkgangers, knopen, gespen"):re.toLowerCase().includes("castle")||re.toLowerCase().includes("kasteel")?(z="Kasteelrune",le="De resten van een middeleeuws kasteel. Soms is alleen de gracht of fundering nog zichtbaar.",Be="Middeleeuwse munten, sieraden, harnasonderdelen, pijlpunten"):re.toLowerCase().includes("mill")||re.toLowerCase().includes("molen")?(z="Molenrune",le="Wat rest van een oude molen. Vaak nog te zien aan de stenen fundering of de molenberg.",Be="Gereedschap, munten, huishoudelijke voorwerpen"):re.toLowerCase().includes("fort")&&(z="Fortrune",le="De overblijfselen van een militair fort of verdedigingswerk.",Be="Militaire voorwerpen, kogels, gespen, uniformonderdelen"),q+=`<br/><span class="text-sm text-gray-600">${z}</span>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${le}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${Be}</div>`,C.description&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Beschrijving</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.description}</div>`),C.wikipedia){const we=C.wikipedia.startsWith("http")?C.wikipedia:`https://${C.wikipedia.split(":")[0]||"nl"}.wikipedia.org/wiki/${C.wikipedia.replace(/^[a-z]{2}:/,"")}`;q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${we}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(C.bunker_type||C.name&&(C.name.toLowerCase().includes("bunker")||C.name.toLowerCase().includes("kazemat")||C.name.toLowerCase().includes("schuilplaats"))){const re={munitions:"Munitiebunker",personnel_shelter:"Personeelsschuilplaats",personell_shelter:"Personeelsschuilplaats",command:"Commandobunker",gun_emplacement:"Geschutsbunker",mg_nest:"Mitrailleursnest",technical:"Technische bunker",storage:"Opslagbunker",tobruk:"Tobruk",kazemat:"Kazemat",Flak:"Luchtafweerstelling",hardened_aircraft_shelter:"Vliegtuigshelter",shelter:"Schuilkelder",observation:"Observatiebunker",anti_aircraft:"Luchtafweerstelling"},z=C.name||"",le=C.bunker_type?re[C.bunker_type]||C.bunker_type:"";z&&z!=="Bunker"&&(q+=`<br/><span class="text-sm font-semibold text-gray-700">${z}</span>`),le&&le!==z&&(q+=`<br/><span class="text-xs text-gray-500">${le}</span>`);const Be=Xt.getGeometry()?.getCoordinates();let we="",Ze="",ht="";if(Be){const Et=fn(Be),St=Et[0],Rt=Et[1],en=St<4.8||St<5.2&&Rt>51.8&&Rt<53.5,jr=St>4.2&&St<4.4&&Rt>52&&Rt<52.15,Cs=St>4.5&&St<4.7&&Rt>52.4&&Rt<52.5,$i=St>4&&St<4.2&&Rt>51.95&&Rt<52.05,Wi=St<4.2&&Rt<51.6,Ar=St>5.2&&St<5.8&&Rt>51.9&&Rt<52.3;jr?(we="Deze bunker maakt deel uit van de Atlantikwall bij Scheveningen. De Duitsers bouwden hier tijdens WOII zo'n 80 bunkers in de duinen. De muren zijn soms 3 meter dik beton. Voor deze bunkers moesten 138.000 mensen uit Den Haag en Scheveningen hun huis verlaten.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall_Museum_Scheveningen",ht="Atlantikwall Museum Scheveningen"):Cs?(we="Deze bunker hoort bij Festung IJmuiden, een van de zwaarst verdedigde punten van de Atlantikwall. De Duitsers bouwden hier bunkers om de haventoegang te beschermen. Er zijn nu rondleidingen door het Bunkermuseum.",Ze="https://www.bunkermuseum.nl/",ht="Bunkermuseum IJmuiden"):$i?(we="Deze bunker maakt deel uit van de Atlantikwall bij Hoek van Holland. Dit was een strategisch punt voor de Duitsers vanwege de Nieuwe Waterweg. Veel bunkers zijn nog te bezoeken.",Ze="https://www.atlantikwallhoekvanholland.nl/",ht="Atlantikwall Hoek van Holland"):Wi?(we="Deze bunker hoort bij de Atlantikwall in Zeeland. De Duitsers verdedigden hier de Westerschelde en de kust. Bij Zoutelande en Westkapelle zijn veel bunkers bewaard gebleven.",Ze="https://www.bunkermuseumzoutelande.nl/",ht="Bunkermuseum Zoutelande"):en?(we="Deze bunker maakt deel uit van de Atlantikwall: de Duitse verdedigingslinie langs de hele kust van Europa. In Nederland bouwden de Duitsers duizenden bunkers tussen 1942 en 1944.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",ht="Atlantikwall (Wikipedia)"):Ar?(we="Deze bunker hoort mogelijk bij de Grebbelinie of de Nieuwe Hollandse Waterlinie. Dit waren Nederlandse verdedigingslinies die de Duitsers na 1940 versterkten met bunkers.",Ze="https://nl.wikipedia.org/wiki/Grebbelinie",ht="Grebbelinie (Wikipedia)"):(we="Een bunker uit de Tweede Wereldoorlog. De meeste bunkers in Nederland zijn gebouwd tussen 1940 en 1944, als onderdeel van de Duitse verdediging of langs bestaande Nederlandse linies.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",ht="WOII bunkers (Wikipedia)")}else we="Een bunker uit de Tweede Wereldoorlog.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",ht="WOII bunkers (Wikipedia)";q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${we}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je vinden?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">Bij bunkers worden soms voorwerpen gevonden zoals patronen, uniformknopen, gespen en persoonlijke spullen van soldaten.</div>',q+='<div class="mt-2 text-xs text-gray-500 italic">Let op: betreed nooit een bunker zonder toestemming. Raak munitieresten niet aan.</div>',q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',q+='<div class="text-sm text-gray-700 mt-1">',q+=`<a href="${Ze}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${ht}</a>`,C.website?q+=`<br/><a href="${C.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>`:q+='<br/><a href="https://www.tracesofwar.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>',q+="</div>"}if(C.historic==="battlefield"){const re=C.name||"Onbekend slagveld",le={"Slag om Arnhem":{periode:"September 1944",samenvatting:"De Slag om Arnhem was onderdeel van Operatie Market Garden. Geallieerde parachutisten probeerden de brug over de Rijn te veroveren. Na negen dagen hevige gevechten moesten ze zich terugtrekken. Van de 10.000 Britse soldaten werden er 1.500 gedood en 6.500 krijgsgevangen gemaakt.",watZieJe:"Er zijn veel monumenten en infoborden. Het Airborne Museum in Oosterbeek vertelt het hele verhaal. Elk jaar in september is er een herdenking.",uitkomst:"De geallieerden verloren de slag. Nederland bleef nog tot mei 1945 bezet.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Arnhem"},"Slag om de Sloedam":{periode:"1-2 november 1944",samenvatting:"Canadese soldaten vielen de Sloedam aan om Walcheren te bevrijden. De dam was smal en de Duitsers verdedigden fel. Veel soldaten sneuvelden bij deze bloedige aanval.",watZieJe:"Bij de dam staat een monument voor de gevallen Canadezen. Er zijn infoborden die de slag uitleggen.",uitkomst:"De Canadezen wonnen na zware verliezen. Dit opende de weg naar de bevrijding van Walcheren.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_de_Sloedam"},"Slag bij Heiligerlee (1568)":{periode:"23 mei 1568",samenvatting:"De eerste veldslag van de Tachtigjarige Oorlog. Lodewijk van Nassau versloeg het Spaanse leger. Zijn broer Adolf sneuvelde tijdens de strijd.",watZieJe:"In Heiligerlee staat het Slag bij Heiligerlee monument. Het klooster waar Adolf van Nassau begraven ligt is nog te bezoeken.",uitkomst:"De opstandelingen wonnen, maar dit was pas het begin van 80 jaar oorlog.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_bij_Heiligerlee_(1568)"},Overloon:{periode:"Oktober 1944",samenvatting:"Bij Overloon vochten Britten en Amerikanen tegen de Duitsers. Het was een van de zwaarste tankgevechten op Nederlandse bodem. Het dorp werd volledig verwoest.",watZieJe:"Het Oorlogsmuseum Overloon staat op het voormalige slagveld. Je kunt tanks, vliegtuigen en andere voertuigen zien.",uitkomst:"De geallieerden wonnen na wekenlange gevechten.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Overloon"},"Slagveld Lanakerveld":{periode:"1568",samenvatting:"Onderdeel van de Nederlandse opstand tegen Spanje. Hier vonden gevechten plaats tijdens de beginjaren van de Tachtigjarige Oorlog.",watZieJe:"Het gebied is nu grotendeels landbouwgrond. Lokaal zijn er soms infoborden.",uitkomst:"Onderdeel van de lange strijd tegen de Spaanse overheersing.",wikiUrl:"https://nl.wikipedia.org/wiki/Tachtigjarige_Oorlog"},Blessebrugschans:{periode:"Diverse periodes",samenvatting:"Een historische schans die meerdere keren werd gebruikt in militaire conflicten.",watZieJe:"De resten van de schans zijn nog zichtbaar in het landschap.",uitkomst:"De schans speelde een rol in verschillende conflicten.",wikiUrl:"https://nl.wikipedia.org/wiki/Schans_(vestingwerk)"}}[re];if(re!=="Onbekend slagveld"&&re!=="Historisch slagveld"&&(q+=`<br/><span class="text-sm font-semibold text-red-700">${re}</span>`),le)q+=`<br/><span class="text-xs text-gray-500">${le.periode}</span>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${le.samenvatting}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe liep het af?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${le.uitkomst}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je zien?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${le.watZieJe}</div>`,q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',q+='<div class="text-sm text-gray-700 mt-1">',q+=`<a href="${le.wikiUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a>`,re.includes("Arnhem")&&(q+='<br/><a href="https://www.airbornemuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Airborne Museum Oosterbeek</a>'),re.includes("Overloon")&&(q+='<br/><a href="https://www.oorlogsmuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Oorlogsmuseum Overloon</a>'),q+="</div>";else if(C.date&&(q+=`<br/><span class="text-xs text-gray-500">${C.date}</span>`),C.description?(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.description}</div>`):(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">Op deze plek vonden historische gevechten plaats. Zoek lokaal naar infoborden of monumenten.</div>'),C.wikipedia){const Be=C.wikipedia.startsWith("http")?C.wikipedia:`https://nl.wikipedia.org/wiki/${C.wikipedia.replace("nl:","")}`;q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',q+=`<div class="text-sm text-gray-700 mt-1"><a href="${Be}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(C.bron==="Paleobiology Database"){const re=we=>{const Ze={Mollusca:"weekdieren zoals schelpen en slakken",Brachiopoda:"armpotigen, schelp-achtige dieren",Echinodermata:"stekelhuidigen zoals zee-egels en zeesterren",Chordata:"gewervelde dieren",Arthropoda:"geleedpotigen zoals kreeften en trilobieten",Cnidaria:"neteldieren zoals koralen en kwallen",Bryozoa:"mosdiertjes",Foraminifera:"eencellige schelpdieren",Plantae:"planten",Crinoidea:"zeelelies",Gastropoda:"slakken",Bivalvia:"tweekleppigen zoals mossels en oesters",Cephalopoda:"koppotigen zoals inktvissen en ammonieten",Trilobita:"trilobieten, uitgestorven kreeftachtigen",Mammalia:"zoogdieren",Reptilia:"reptielen",Pisces:"vissen",Amphibia:"amfibien"};for(const[ht,Et]of Object.entries(Ze))if(we.toLowerCase().includes(ht.toLowerCase()))return Et;return""},z=we=>{const Ze={Cambrium:"541-485 miljoen jaar geleden",Ordovicium:"485-444 miljoen jaar geleden",Siluur:"444-419 miljoen jaar geleden",Devoon:"419-359 miljoen jaar geleden",Carboon:"359-299 miljoen jaar geleden",Perm:"299-252 miljoen jaar geleden",Trias:"252-201 miljoen jaar geleden",Jura:"201-145 miljoen jaar geleden",Krijt:"145-66 miljoen jaar geleden",Paleogeen:"66-23 miljoen jaar geleden",Neogeen:"23-2,6 miljoen jaar geleden",Kwartair:"2,6 miljoen jaar - nu",Pleistoceen:"2,6 miljoen - 11.700 jaar geleden",Holoceen:"11.700 jaar geleden - nu"};for(const[ht,Et]of Object.entries(Ze))if(we.toLowerCase().includes(ht.toLowerCase()))return Et;return""},le=we=>{const Ze={limestone:"kalksteen",sandstone:"zandsteen",shale:"schalie",clay:"klei",sand:"zand",gravel:"grind",marl:"mergel",chalk:"krijt",mudstone:"moddersteen",siltstone:"siltsteen"};let ht=we;for(const[Et,St]of Object.entries(Ze))ht=ht.replace(new RegExp(Et,"gi"),St);return ht},Be=we=>{const Ze={marine:"zee",coastal:"kust",terrestrial:"land",fluvial:"rivier",lacustrine:"meer",reef:"rif",deltaic:"delta",shallow:"ondiep water",deep:"diep water"};let ht=we;for(const[Et,St]of Object.entries(Ze))ht=ht.replace(new RegExp(Et,"gi"),St);return ht};if(C.vindplaats&&(q+=`<br/><span class="text-xs text-gray-600">${C.vindplaats}</span>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',C.taxonomie&&C.taxonomie!=="Onbekend"){const we=re(C.taxonomie);we?(q+=`<div class="text-sm text-gray-700 mt-1">${we}</div>`,q+=`<div class="text-xs text-gray-500 italic">(${C.taxonomie})</div>`):q+=`<div class="text-sm text-gray-700 mt-1">${C.taxonomie}</div>`}if(C.aantal_fossielen){const we=parseInt(C.aantal_fossielen),Ze=we>100?"Veel fossielen gevonden op deze locatie.":we>10?"Meerdere fossielen gevonden op deze locatie.":`${C.aantal_fossielen} fossiel${we>1?"en":""} gevonden op deze locatie.`;q+=`<div class="text-sm text-gray-600 mt-1">${Ze}</div>`}if(C.periode&&C.periode!=="Onbekend"){q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wanneer leefden deze dieren?</span></div>';const we=z(C.periode);q+=`<div class="text-sm text-gray-700 mt-1">${C.periode}</div>`,we&&(q+=`<div class="text-sm text-gray-600">${we}</div>`),C.ouderdom&&C.ouderdom!=="Onbekend"&&(q+=`<div class="text-sm text-gray-600">Ouderdom: ${C.ouderdom}</div>`)}(C.gesteente||C.formatie||C.milieu)&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">In wat voor gesteente?</span></div>',C.gesteente&&(q+=`<div class="text-sm text-gray-700 mt-1">${le(C.gesteente)}</div>`),C.formatie&&(q+=`<div class="text-sm text-gray-600">Formatie: ${C.formatie}</div>`,C.lid&&(q+=`<div class="text-sm text-gray-600 ml-3">Lid: ${C.lid}</div>`)),C.milieu&&(q+=`<div class="text-sm text-gray-600">Leefomgeving: ${Be(C.milieu)}</div>`))}if(C.layerType==="fossielHotspot"){const re=[];if(C.type&&re.push(C.type),C.region&&re.push(C.region),C.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};re.push(z[C.country]||C.country)}if(re.length>0&&(q+=`<br/><span class="text-xs text-gray-600">${re.join("  ")}</span>`),(C.finds||C.period)&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',C.finds&&(q+=`<div class="text-sm text-gray-700 mt-1">${C.finds}</div>`),C.period&&(q+=`<div class="text-sm text-gray-600 mt-1">Periode: ${C.period}</div>`),C.geology&&(q+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${C.geology}</div>`)),C.access||C.tips){if(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',C.access){const le=C.access.toLowerCase().includes("verboden")||C.access.toLowerCase().includes("niet toegankelijk")?"text-red-600":"text-gray-700";q+=`<div class="text-sm ${le} mt-1">${C.access}</div>`}C.tips&&(q+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${C.tips}</div>`)}}if(C.layerType==="mineralenHotspot"){const re=[];if(C.region&&re.push(C.region),C.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};re.push(z[C.country]||C.country)}if(re.length>0&&(q+=`<br/><span class="text-xs text-gray-600">${re.join("  ")}</span>`),C.minerals&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.minerals}</div>`,C.geology&&(q+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${C.geology}</div>`)),C.access||C.tips){if(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',C.access){const le=C.access.toLowerCase().includes("verboden")||C.access.toLowerCase().includes("niet toegankelijk")||C.access.toLowerCase().includes("gesloten")?"text-red-600":"text-gray-700";q+=`<div class="text-sm ${le} mt-1">${C.access}</div>`}C.tips&&(q+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${C.tips}</div>`)}}if(C.layerType==="goudrivier"){const re=[];if(C.river&&re.push(C.river),C.region&&re.push(C.region),C.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};re.push(z[C.country]||C.country)}if(re.length>0&&(q+=`<br/><span class="text-xs text-gray-600">${re.join("  ")}</span>`),(C.goldType||C.origin)&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',C.goldType&&(q+=`<div class="text-sm text-gray-700 mt-1">${C.goldType}</div>`),C.origin&&(q+=`<div class="text-sm text-gray-600 mt-1">Herkomst: ${C.origin}</div>`)),C.legal||C.tips){if(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Mag ik hier zoeken?</span></div>',C.legal){const le=C.legal.includes("VERBODEN")?"text-red-600 font-semibold":"text-gray-700";q+=`<div class="text-sm ${le} mt-1">${C.legal}</div>`}C.tips&&(q+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${C.tips}</div>`)}}if(C.layerType==="wandelroute"){const re=[];if(C.region&&re.push(C.region),C.country){const z={NL:"Nederland",BE:"Belgi"};re.push(z[C.country]||C.country)}if(re.length>0&&(q+=`<br/><span class="text-xs text-gray-600">${re.join("  ")}</span>`),C.distance||C.duration){const z=C.distance?`${C.distance} km`:"",le=C.duration?`${C.duration}`:"",Be=[z,le].filter(Boolean).join("  ");Be&&(q+=`<br/><span class="text-sm text-green-700 font-medium">${Be}</span>`)}(C.description||C.highlights)&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat ga je zien?</span></div>',C.description&&(q+=`<div class="text-sm text-gray-700 mt-1">${C.description}</div>`),C.highlights&&(q+=`<div class="text-sm text-gray-600 mt-1">Hoogtepunten: ${C.highlights}</div>`)),C.startAddress&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waar begin ik?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.startAddress}</div>`),C.url&&(q+=`<div class="mt-3"><a href="${C.url}" target="_blank" class="text-sm text-blue-600 hover:underline">Bekijk route en download GPX</a></div>`)}if(C.layerType==="hunebed"){C.period&&(q+=`<br/><span class="text-sm text-purple-700">Periode: ${C.period}</span>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',C.description&&(q+=`<div class="text-sm text-gray-700 mt-1">${C.description}</div>`);const re=[];if(C.stones){const z=C.stones.toLowerCase(),le=z.match(/(\d+)\s*dekst[^\s,]*/i),Be=z.match(/(\d+)\s*draagst[^\s,]*/i),we=z.match(/(\d+)\s*sluitst[^\s,]*/i),Ze=z.match(/(\d+)\s*poortst[^\s,]*/i),ht=z.match(/(\d+)\s*gangdekst[^\s,]*/i),Et=z.match(/(\d+)\s*gangzijst[^\s,]*/i);le&&re.push(`${le[1]} deksteen${parseInt(le[1])>1?"en":""} (de grote steen${parseInt(le[1])>1?"en":""} bovenop)`),Be&&re.push(`${Be[1]} draagstenen (de stenen die de dekstenen dragen)`),we&&re.push(`${we[1]} sluitsteen${parseInt(we[1])>1?"en":""} (afsluiting aan de korte zijden)`),Ze&&re.push(`${Ze[1]} poortsteen${parseInt(Ze[1])>1?"en":""} (bij de ingang)`),ht&&re.push(`${ht[1]} gangdeksteen${parseInt(ht[1])>1?"en":""} (boven de toegangsgang)`),Et&&re.push(`${Et[1]} gangzijstenen (langs de toegangsgang)`)}if(C.length&&re.push(`Een grafkamer van ${C.length} lang`),C.width&&re.push(`${C.width}`),re.length>0&&(q+='<div class="text-sm text-gray-700 mt-1">Het hunebed heeft:</div>',q+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',re.forEach(z=>{q+=`<li>${z}</li>`}),q+="</ul>"),C.notable){const z=C.notable.toLowerCase();let le="Wat is hier bijzonder?";z.includes("grootste")?le="Waarom is dit het grootste hunebed?":z.includes("klein")||z.includes("kindhunebed")?le="Waarom is dit hunebed zo klein?":z.includes("cluster")||z.includes("naast elkaar")?le="Waarom liggen hier meerdere hunebedden?":(z.includes("enige")||z.includes("westelijk")||z.includes("noordelijk"))&&(le="Wat maakt deze locatie bijzonder?"),q+=`<div class="mt-3"><span class="text-sm font-semibold text-gray-800">${le}</span></div>`,q+=`<div class="text-sm text-gray-700 mt-1">${C.notable}</div>`}q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de Trechterbeker cultuur?</span></div>',q+='<div class="text-sm text-gray-700 mt-1">De Trechterbeker cultuur is de naam voor de mensen die 5.000 jaar geleden in Nederland woonden. Ze maakten potten met een trechter-vorm. Daarom heten ze zo. Deze mensen bouwden de hunebedden als graven voor hun doden.</div>',C.finds&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.finds}</div>`),C.museum&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Museum in de buurt</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">${C.museum}</div>`),q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',C.access?q+=`<div class="text-sm text-gray-700 mt-1">${C.access}</div>`:q+='<div class="text-sm text-gray-700 mt-1">Je kunt dit hunebed gratis bezoeken.</div>',C.wikipedia&&(q+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',q+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${C.wikipedia}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`)}if((C.inventarisnummer||C.locatie_naam)&&(C.locatie_naam&&(q+=`<br/><span class="text-sm font-semibold">${C.locatie_naam}</span>`),C.inventarisnummer&&(q+=`<br/><span class="text-xs text-gray-500">CAI: ${C.inventarisnummer}</span>`),C.datering_tekst&&(q+=`<br/><span class="text-sm text-purple-700">${C.datering_tekst}</span>`)),(C.veensoort||C.dikte)&&(C.veensoort&&(q+=`<br/><span class="text-sm text-amber-700">${C.veensoort}</span>`),C.dikte&&(q+=`<br/><span class="text-xs text-gray-600">Dikte: ${C.dikte}</span>`)),C.nature&&C.debut){q+=`<br/><span class="text-sm text-purple-700">${C.nature}</span>`;const re=C.debut===C.fin?C.debut:`${C.debut} - ${C.fin}`;re&&(q+=`<br/><span class="text-sm text-gray-700">Periode: ${re}</span>`),C.structure&&(q+=`<br/><span class="text-xs text-gray-600">${C.structure}</span>`),C.commune&&(q+=`<br/><span class="text-xs text-gray-500">${C.commune}</span>`),C.decouvert&&(q+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${C.decouvert}</span>`),C.numero&&(q+=`<br/><span class="text-xs text-gray-400">${C.numero}</span>`)}if((C.NATURE_OPE||C.CODE_OPERA)&&(C.TITRE&&(q+=`<br/><span class="text-sm font-semibold">${C.TITRE}</span>`),C.NATURE_OPE&&(q+=`<br/><span class="text-sm text-amber-700">${C.NATURE_OPE}</span>`),C.AUTEUR&&(q+=`<br/><span class="text-xs text-gray-600">Auteur: ${C.AUTEUR}</span>`),C.DATE&&(q+=`<br/><span class="text-xs text-gray-500">Datum: ${C.DATE}</span>`),C.COMMUNE&&(q+=`<br/><span class="text-xs text-gray-500">${C.COMMUNE}</span>`)),C.type_protection&&(C.n_site||C.t_site)){const re=C.type_protection==="Classe"?"text-red-700":"text-amber-700";q+=`<br/><span class="text-sm ${re}">${C.type_protection}</span>`,C.n_site&&(q+=`<br/><span class="text-sm font-semibold">${C.n_site}</span>`),C.t_site&&(q+=`<br/><span class="text-xs text-gray-600">${C.t_site}</span>`),C.c_site&&(q+=`<br/><span class="text-xs text-gray-500">Code: ${C.c_site}</span>`),C.d_creation&&(q+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${C.d_creation}</span>`)}if(C.type_protection&&C.cod_diren){const re=C.type_protection==="Classe"?"text-red-700":"text-amber-700";if(q+=`<br/><span class="text-sm ${re}">${C.type_protection}</span>`,C.proced&&(q+=`<br/><span class="text-xs text-gray-600">${C.proced}</span>`),C.d_proced&&(q+=`<br/><span class="text-xs text-gray-500">Date: ${C.d_proced}</span>`),C.comment){const z=String(C.comment).slice(0,150);q+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(C.comment).length>150?"...":""}</span>`}}if(C.type_protection&&C.nomsite){const re=C.type_protection==="Classe"?"text-red-700":"text-amber-700";if(q+=`<br/><span class="text-sm ${re}">${C.type_protection}</span>`,C.caractere&&(q+=`<br/><span class="text-xs text-gray-600">${C.caractere}</span>`),C.datedecis&&(q+=`<br/><span class="text-xs text-gray-500">Date: ${C.datedecis}</span>`),C.descriptio){const z=String(C.descriptio).slice(0,150);q+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(C.descriptio).length>150?"...":""}</span>`}}if(C.secteur&&C.style){if(q+=`<br/><span class="text-sm text-gray-700">${C.secteur}</span>`,C["sous-secteur"]&&(q+=`<br/><span class="text-xs text-gray-600">${C["sous-secteur"]}</span>`),C.description){const re=String(C.description).slice(0,150);q+=`<br/><span class="text-xs text-gray-600 italic">${re}${String(C.description).length>150?"...":""}</span>`}C.url&&(q+=`<br/><a href="${C.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(C.nature_operation||C.synthese){C.nature_operation&&(q+=`<br/><span class="text-sm text-red-700">${C.nature_operation}</span>`),C.responsable_operation&&(q+=`<br/><span class="text-xs text-gray-600">Responsable: ${C.responsable_operation}</span>`),C.date_operation&&(q+=`<br/><span class="text-xs text-gray-500">Datum: ${C.date_operation}</span>`);const re=[];if(C.prehistoire==="Oui"&&re.push("Prehistorie"),C.protohistoire==="Oui"&&re.push("Protohistorie"),C.antiquite==="Oui"&&re.push("Romeins"),C.moyen_age==="Oui"&&re.push("Middeleeuwen"),C.temps_modernes==="Oui"&&re.push("Moderne tijd"),re.length>0&&(q+=`<br/><span class="text-sm text-purple-700">${re.join(", ")}</span>`),C.adresse&&(q+=`<br/><span class="text-xs text-gray-500">${C.adresse}</span>`),C.synthese){const z=String(C.synthese).slice(0,200);q+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(C.synthese).length>200?"...":""}</span>`}}if(C.operator&&(q+=`<br/><span class="text-sm text-gray-600">${C.operator}</span>`),C.opening_hours){const re=yEe(String(C.opening_hours));q+=`<br/><span class="text-xs text-green-600">Open: ${re}</span>`}if(C.website&&(q+=`<br/><a href="${C.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`),C.addr_street){const re=[C.addr_street,C.addr_housenumber,C.addr_postcode].filter(Boolean).join(" ");q+=`<br/><span class="text-xs text-gray-500">${re}</span>`}const Ot=C.description||C.omschrijving||C.descr||C.info;Ot&&Ot!==wt&&(q+=`<br/><span class="text-sm text-gray-600">${Ot}</span>`),gt.push(q)}const nn=n.getView().getResolution()||1,zt=await Fe(Qe.coordinate,nn);gt.push(...zt);const Oe=await _t;if(gt.length===0&&Oe!==null){const Xt=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${Oe.toFixed(2)} m NAP</span>
          </div>`;gt.push(Xt)}if(gt.length>0&&Oe!==null&&(gt[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${Oe.toFixed(2)} m NAP</span>
        </div>`),gt.length>0){s(gt),o(0),console.log(` KLIK OPGESLAGEN: [${Qe.coordinate[0].toFixed(0)}, ${Qe.coordinate[1].toFixed(0)}]`),f(Qe.coordinate),p(!1),D(!1),k(null);const Xt=fn(Qe.coordinate);M(Xt),A(`https://www.google.com/maps/dir/?api=1&destination=${Xt[1]},${Xt[0]}`),u(!0)}};return n.on("click",je),()=>{n.un("click",je)}},[n]);const de=()=>{u(!1),n&&g&&(LI(n),p(!1))},De=(Se,Fe)=>{Fe.offset.y>100&&de()};return y.jsx(Dr,{children:l&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:de}),y.jsxs(Ft.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl",style:{fontSize:`${14*j/100}px`},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:De,children:[y.jsx("div",{className:"flex justify-center pt-2 pb-1",children:y.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),y.jsxs("div",{className:"flex items-center gap-2 px-3 pb-2 border-b border-gray-100",children:[Te&&y.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[y.jsx("button",{onClick:V,className:"p-1 text-blue-500 hover:text-blue-600 transition-colors border-0 outline-none bg-transparent","aria-label":"Vorige laag",children:y.jsx(Wse,{size:18})}),y.jsxs("span",{className:"text-gray-500 font-medium min-w-[32px] text-center",style:{fontSize:"0.857em"},children:[a+1,"/",i.length]}),y.jsx("button",{onClick:Y,className:"p-1 text-blue-500 hover:text-blue-600 transition-colors border-0 outline-none bg-transparent","aria-label":"Volgende laag",children:y.jsx(CE,{size:18})})]}),y.jsx("span",{className:"flex-1 font-semibold text-gray-800 truncate",style:{fontSize:"1em"},children:be||"Info"}),P&&t.filter(Se=>!Se.archived).length>0&&y.jsxs("div",{className:"relative",children:[y.jsx("button",{onClick:()=>D(!N),className:`p-1.5 transition-colors flex-shrink-0 border-0 outline-none bg-transparent ${B?"text-green-500":"text-orange-500 hover:text-orange-600"}`,title:"Toevoegen aan mijn laag","aria-label":"Toevoegen aan mijn laag",children:B?y.jsx(G0,{size:18}):y.jsx(Bo,{size:18})}),N&&y.jsxs("div",{className:"absolute right-0 top-8 z-50 bg-white rounded-lg shadow-lg border border-gray-100 py-1 min-w-[180px]",children:[y.jsx("div",{className:"px-3 py-1.5 text-xs text-gray-400 font-medium",children:"Toevoegen aan:"}),t.filter(Se=>!Se.archived).map(Se=>y.jsxs("button",{onClick:()=>{r(Se.id,{name:be||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[P[0],P[1]],sourceLayer:be}),D(!1),k(Se.name),setTimeout(()=>k(null),2e3)},className:"w-full px-3 py-1.5 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:Se.color}}),y.jsx("span",{className:"truncate",children:Se.name})]},Se.id))]})]}),I&&y.jsx("a",{href:I,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-blue-500 hover:text-blue-600 transition-colors flex-shrink-0",title:"Open in Google Maps","aria-label":"Open in Google Maps",children:y.jsx(_1,{size:18})}),y.jsx("button",{onClick:de,className:"p-1.5 text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0 border-0 outline-none bg-transparent","aria-label":"Sluiten",children:y.jsx(bs,{size:18})})]}),y.jsx("div",{className:"px-4 py-3 max-h-[45vh] overflow-y-auto select-text",style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:Re}}),y.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2",children:[y.jsx(goe,{size:14,className:"text-gray-400 flex-shrink-0"}),y.jsx("input",{type:"range",min:"80",max:"150",value:j,onChange:Se=>W(parseInt(Se.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),y.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[j,"%"]})]}),ie&&w&&y.jsx("div",{className:"px-4 pb-4",children:y.jsxs("button",{onClick:()=>{e(w),u(!1),T(null)},className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[y.jsx(B0,{size:16}),y.jsx("span",{children:"Vondst verwijderen"})]})}),Ie&&h&&y.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:g?y.jsxs("button",{onClick:ne,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[y.jsx(yI,{size:16}),y.jsx("span",{children:"Hoogtekaart verbergen"})]}):y.jsx("button",{onClick:ee,disabled:x,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${x?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:x?y.jsxs(y.Fragment,{children:[y.jsx(yR,{size:16,className:"animate-spin"}),y.jsx("span",{children:"Laden..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(yI,{size:16}),y.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}const MO=1e-4;function wEe(n,e){return n.points.some(t=>{const r=Math.abs(t.coordinates[0]-e[0]),i=Math.abs(t.coordinates[1]-e[1]);return r<MO&&i<MO})}function SEe(){const n=rs(B=>B.map),e=Vi(B=>B.openVondstForm),{openAddPointModal:t,openCreateLayerModal:r}=Vi(),i=qs(B=>B.layers),[s,a]=se.useState(null),[o,l]=se.useState(!1),[u,h]=se.useState(!1),[f,g]=se.useState(!1),p=se.useRef(null),x=se.useRef(null);se.useEffect(()=>{if(!n){console.log(" LongPressMenu: map not ready");return}const B=n.getViewport();if(!B){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",B);const k=600,P=15,M=Le=>{if(console.log(" Touch start, touches:",Le.touches.length),Le.touches.length!==1)return;const be=Le.touches[0];x.current={x:be.clientX,y:be.clientY},console.log(" Starting long press timer at:",x.current),p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",x.current),!x.current)return;const ce=window.__olMap;if(!ce){console.log(" Map not available (global)");return}const Re=B.getBoundingClientRect(),Ie=[x.current.x-Re.left,x.current.y-Re.top],ie=ce.getCoordinateFromPixel(Ie);if(ie){const V=fn(ie);Le.preventDefault(),a({pixel:[x.current.x,x.current.y],coordinate:V}),l(!0),h(!1),setTimeout(()=>h(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",V)}},k)},j=Le=>{if(!p.current||!x.current)return;const be=Le.touches[0],ce=be.clientX-x.current.x,Re=be.clientY-x.current.y,Ie=Math.sqrt(ce*ce+Re*Re);Ie>P&&(console.log(" Touch moved too much, cancelling. Distance:",Ie),clearTimeout(p.current),p.current=null)},O=()=>{console.log(" Touch end, timer active:",!!p.current),p.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(p.current),p.current=null),x.current=null},W=Le=>{o&&Le.preventDefault()},F=Le=>{Le.button===0&&(console.log(" Mouse down"),x.current={x:Le.clientX,y:Le.clientY},p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!x.current)return;const be=window.__olMap;if(console.log(" __olMap:",be),console.log(" __olMap constructor:",be?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof be?.getCoordinateAtPixel),!be){console.log(" Map not available (global)");return}const ce=B.getBoundingClientRect(),Re=[x.current.x-ce.left,x.current.y-ce.top];console.log(" Pixel:",Re);const Ie=be.getCoordinateFromPixel(Re);if(console.log(" Coordinate:",Ie),Ie){const ie=fn(Ie);a({pixel:[x.current.x,x.current.y],coordinate:ie}),l(!0),h(!1),setTimeout(()=>h(!0),300),console.log(" Long press (mouse) detected at:",ie)}},k))},Te=Le=>{if(!p.current||!x.current)return;const be=Le.clientX-x.current.x,ce=Le.clientY-x.current.y;Math.sqrt(be*be+ce*ce)>P&&(console.log(" Mouse moved, cancelling"),clearTimeout(p.current),p.current=null)},Me=()=>{console.log(" Mouse up"),p.current&&(clearTimeout(p.current),p.current=null),x.current=null};return B.addEventListener("touchstart",M,{passive:!1}),B.addEventListener("touchmove",j,{passive:!0}),B.addEventListener("touchend",O),B.addEventListener("touchcancel",O),B.addEventListener("contextmenu",W),B.addEventListener("mousedown",F),B.addEventListener("mousemove",Te),B.addEventListener("mouseup",Me),B.addEventListener("mouseleave",Me),()=>{B.removeEventListener("touchstart",M),B.removeEventListener("touchmove",j),B.removeEventListener("touchend",O),B.removeEventListener("touchcancel",O),B.removeEventListener("contextmenu",W),B.removeEventListener("mousedown",F),B.removeEventListener("mousemove",Te),B.removeEventListener("mouseup",Me),B.removeEventListener("mouseleave",Me),p.current&&clearTimeout(p.current)}},[n,o]);const v=()=>{u&&(l(!1),a(null),h(!1),g(!1))},w=()=>{l(!1),a(null),h(!1),g(!1)},T=B=>{if(!s)return;const[k,P]=s.coordinate;t(B,{lat:P,lng:k}),w()},I=()=>{r(),w()},A=()=>{if(!s)return;const[B,k]=s.coordinate;e({lat:k,lng:B}),l(!1),a(null),h(!1)},N=()=>{if(!s)return;const[B,k]=s.coordinate,P=`https://www.google.com/maps?q=${k},${B}`;window.open(P,"_blank"),l(!1),a(null),h(!1)},D=B=>{const[k,P]=B;return`${P.toFixed(5)}N, ${k.toFixed(5)}E`};return y.jsx(Dr,{children:o&&s&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:v}),y.jsxs(Ft.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(s.pixel[0],window.innerWidth-220),top:Math.min(s.pixel[1],window.innerHeight-240)},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[y.jsx("div",{className:"px-4 py-3 bg-white border-b border-gray-100",children:y.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[y.jsx(du,{size:16}),y.jsx("span",{className:"text-xs font-mono",children:D(s.coordinate)})]})}),y.jsxs("div",{className:"bg-white",children:[y.jsxs("button",{onClick:A,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(Bo,{size:20,className:"text-blue-500"}),y.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),y.jsxs("div",{className:"relative",children:[y.jsxs("button",{onClick:()=>g(!f),className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(Qa,{size:20,className:"text-purple-500"}),y.jsx("span",{className:"font-medium flex-1 text-left",children:"Voeg toe aan laag..."}),y.jsx(CE,{size:16,className:`text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),y.jsx(Dr,{children:f&&y.jsx(Ft.div,{className:"bg-gray-50 border-t border-gray-100",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:i.length===0?y.jsxs("button",{onClick:I,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none",children:[y.jsx(Bo,{size:14}),y.jsx("span",{children:"Maak eerst een laag aan"})]}):y.jsxs(y.Fragment,{children:[i.map(B=>{const k=s?wEe(B,s.coordinate):!1;return y.jsxs("button",{onClick:()=>!k&&T(B.id),className:`w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm bg-transparent border-0 outline-none ${k?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,title:k?"Al toegevoegd aan deze laag":void 0,disabled:k,children:[k?y.jsx(G0,{size:14,className:"text-green-500 flex-shrink-0"}):y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:B.color}}),y.jsx("span",{className:"truncate",children:B.name}),y.jsx("span",{className:"text-xs text-gray-400 ml-auto",children:k?"al toegevoegd":`(${B.points.length})`})]},B.id)}),y.jsxs("button",{onClick:I,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none border-t border-gray-200",children:[y.jsx(Bo,{size:14}),y.jsx("span",{children:"Nieuwe laag..."})]})]})})})]}),y.jsxs("button",{onClick:N,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(_1,{size:20,className:"text-blue-600"}),y.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]})]}),y.jsx("div",{className:"bg-white",children:y.jsxs("button",{onClick:w,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[y.jsx(bs,{size:18}),y.jsx("span",{children:"Annuleren"})]})})]})]})})}const TEe={Compass:rae,TreePalm:doe,Mountain:yI,Waves:_oe,Search:xI,Target:coe,Layers:Qa,Grid:mae},IEe={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},AEe={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},NO=["Mijn Vondsten","Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","Runes","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Wandelroutes","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],bEe=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"],REe=[5.2913,52.1326],CEe=8;function PEe(){const n=ri(w=>w.setLayerVisibility),e=qi(w=>w.stopTracking),t=rs(w=>w.map),{presetsPanelOpen:r,togglePresetsPanel:i,closeAllPanels:s}=Vi(),{presets:a,applyPreset:o,updatePreset:l}=V8(),u=ri(w=>w.visible),h=Xr(w=>w.presetPanelFontScale),f=Xr(w=>w.setPresetPanelFontScale),g=12*h/100,p=()=>{s(),NO.forEach(w=>n(w,!1)),bEe.forEach(w=>{n(w,w==="CartoDB (licht)")}),e(),t&&t.getView().animate({center:ru(REe),zoom:CEe,duration:500}),console.log(" Reset: CartoDB, alle lagen uit, GPS uit, zoom naar Nederland")},x=w=>{o(w),s()},v=(w,T)=>{w.stopPropagation();const I=Object.entries(u).filter(([A,N])=>N&&NO.includes(A)).map(([A])=>A);l(T,{layers:I}),console.log(" Lagen opgeslagen naar preset")};return y.jsxs(y.Fragment,{children:[y.jsx(Ft.button,{onClick:p,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Reset - CartoDB, alle lagen uit, GPS uit",children:y.jsx(Wae,{size:20,className:"text-gray-600"})}),y.jsx(Ft.button,{onClick:i,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Presets",children:r?y.jsx(vj,{size:20,className:"text-blue-600"}):y.jsx(Qa,{size:20,className:"text-blue-600"})}),y.jsx(Dr,{children:r&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i}),y.jsxs(Ft.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:"fixed bottom-[112px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[220px] backdrop-blur-sm z-[801]",children:[y.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",style:{fontSize:`${g}px`},children:[y.jsx("span",{className:"font-medium text-white",children:"Presets"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:h,onInput:w=>{f(parseInt(w.target.value))},onChange:w=>f(parseInt(w.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${h}%`}),y.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),y.jsx("div",{className:"p-2",children:a.map(w=>{const T=TEe[w.icon]||Qa,I=IEe[w.icon]||"text-blue-600",A=AEe[w.icon]||"hover:bg-blue-50";return y.jsxs("button",{onClick:()=>x(w.id),className:`w-full h-8 flex items-center gap-2 px-2 ${A} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden`,style:{fontSize:`${g}px`},children:[y.jsx(T,{size:14,className:`${I} flex-shrink-0`}),y.jsx("span",{className:"text-gray-700 truncate",children:w.name}),y.jsx("span",{onClick:N=>v(N,w.id),className:"ml-auto p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:y.jsx(Xae,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},w.id)})})]})]})})]})}function kEe(){const n=rs(a=>a.map),[e,t]=se.useState(0),[r,i]=se.useState(!1);se.useEffect(()=>{if(!n)return;const a=n.getView(),o=()=>{const l=a.getRotation(),u=l*180/Math.PI;t(u),i(Math.abs(l)>.087)};return o(),a.on("change:rotation",o),()=>{a.un("change:rotation",o)}},[n]);const s=()=>{n&&n.getView().animate({rotation:0,duration:300})};return y.jsx(Dr,{children:r&&y.jsx(Ft.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:y.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[y.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),y.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),y.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const MEe=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Kadastrale Grenzen",color:"purple",default:.7},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],NEe={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function LEe(){const[n,e]=se.useState(!1),[t,r]=se.useState(!1),i=ri(h=>h.visible),s=ri(h=>h.opacity),a=ri(h=>h.setLayerOpacity),o=MEe.filter(h=>i[h.name]);if(o.length===0)return null;const l=t?o:o.slice(0,3),u=o.length>3;return y.jsxs("div",{className:"fixed bottom-[112px] right-2 z-[900]",children:[y.jsxs(Ft.button,{onClick:()=>e(!n),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:n?"Sluit opacity sliders":"Open opacity sliders",children:[y.jsx(toe,{size:22,strokeWidth:2,className:"text-gray-500"}),o.length>0&&y.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:o.length})]}),y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),y.jsxs(Ft.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-lg shadow-lg p-3 min-w-[220px] max-h-[60vh] overflow-y-auto",children:[y.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide",children:"Transparantie"}),y.jsx("div",{className:"space-y-3",children:l.map(h=>{const f=s[h.name]??h.default;return y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:h.name,children:h.name}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:f*100,onChange:g=>a(h.name,parseInt(g.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${NEe[h.color]}`}),y.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(f*100),"%"]})]})]},h.name)})}),u&&y.jsx("button",{onClick:()=>r(!t),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:t?y.jsxs(y.Fragment,{children:[y.jsx(vj,{size:14}),"Minder tonen"]}):y.jsxs(y.Fragment,{children:[y.jsx(fR,{size:14}),o.length-3," meer..."]})})]})]})})]})}function OEe(){const n=rs(A=>A.map),[e,t]=se.useState(!1),[r,i]=se.useState(""),[s,a]=se.useState([]),[o,l]=se.useState(!1),[u,h]=se.useState(!1),f=se.useRef(null),g=se.useRef(null),p=se.useRef();se.useEffect(()=>{e&&f.current&&f.current.focus()},[e]),se.useEffect(()=>{if(!e)return;const A=N=>{g.current&&!g.current.contains(N.target)&&x()};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[e]),se.useEffect(()=>{if(!e)return;const A=N=>{N.key==="Escape"&&x()};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[e]),se.useEffect(()=>{if(p.current&&clearTimeout(p.current),r.length<2){a([]);return}return p.current=window.setTimeout(async()=>{h(!0);try{const N=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(r)}&rows=7`)).json();N.response?.docs&&a(N.response.docs)}catch(A){console.error("Search error:",A),a([])}finally{h(!1)}},300),()=>{p.current&&clearTimeout(p.current)}},[r]);const x=()=>{t(!1),i(""),a([]),l(!1)},v=async A=>{try{const D=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(A)}`)).json();if(D.response?.docs?.[0]?.centroide_ll){const k=D.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(k)return{lng:parseFloat(k[1]),lat:parseFloat(k[2])}}}catch(N){console.error("Lookup error:",N)}return null},w=async A=>{if(!n)return;const N=await v(A.id);N&&n.getView().animate({center:ru([N.lng,N.lat]),zoom:16,duration:1e3}),x()},T=async(A,N)=>{N.stopPropagation();const D=await v(A.id);if(D){const B=`https://www.google.com/maps?q=${D.lat},${D.lng}`;window.open(B,"_blank")}x()},I={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"};return e?y.jsxs("div",{ref:g,className:"fixed left-[52px] right-14 z-[850]",style:I,children:[y.jsxs(Ft.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"search-input-wrapper",children:[y.jsx(xI,{size:18,className:"search-icon"}),y.jsx("input",{ref:f,type:"text",value:r,onChange:A=>{i(A.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),y.jsx("button",{onClick:x,className:"search-clear",title:"Sluiten",children:y.jsx(bs,{size:18})})]}),y.jsx(Dr,{children:o&&s.length>0&&y.jsx(Ft.ul,{className:"search-results",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:s.map(A=>y.jsxs("li",{className:"search-result-item",children:[y.jsx("div",{className:"search-result-content",onClick:()=>w(A),children:y.jsx("span",{className:"search-result-text",children:A.weergavenaam})}),y.jsx("button",{className:"search-navigate-btn",onClick:N=>T(A,N),title:"Open in Google Maps",children:y.jsx(_1,{size:20})})]},A.id))})}),o&&u&&y.jsx("div",{className:"search-loading",children:"Zoeken..."})]}):y.jsx(Ft.button,{className:"fixed right-14 z-[800] w-11 h-11 flex items-center justify-center bg-white/90 hover:bg-white rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",style:I,onClick:()=>t(!0),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Zoeken",children:y.jsx(xI,{size:22,className:"text-gray-600"})})}function DEe(){const n=rs(r=>r.map),e=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},t=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return y.jsxs("div",{className:"fixed top-2 left-2 z-[800] flex flex-col gap-1",children:[y.jsx(Ft.button,{className:"w-9 h-9 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:y.jsx(Bo,{size:18,className:"text-gray-600"})}),y.jsx(Ft.button,{className:"w-9 h-9 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:y.jsx(Lae,{size:18,className:"text-gray-600"})})]})}const FEe="detector2024",VI="detectorapp-auth";function jEe({children:n}){const[e,t]=se.useState(!1),[r,i]=se.useState(""),[s,a]=se.useState(!1),[o,l]=se.useState(""),[u,h]=se.useState(!0);se.useEffect(()=>{localStorage.getItem(VI)==="authenticated"&&t(!0),h(!1)},[]);const f=g=>{g.preventDefault(),l(""),r===FEe?(localStorage.setItem(VI,"authenticated"),t(!0)):(l("Onjuist wachtwoord"),i(""))};return u?y.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:y.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?y.jsx(y.Fragment,{children:n}):y.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:y.jsxs(Ft.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(pI,{size:32,className:"text-blue-600"})}),y.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),y.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),y.jsxs("form",{onSubmit:f,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:s?"text":"password",value:r,onChange:g=>i(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),y.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?y.jsx(gR,{size:20}):y.jsx(mR,{size:20})})]})]}),o&&y.jsx(Ft.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:o}),y.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),y.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function VEe(){localStorage.removeItem(VI),window.location.reload()}function GEe({isOpen:n,onClose:e}){const t=Ol(l=>l.vondsten),r={total:t.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:t.slice(-5).reverse()};let i=0,s=0;t.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const a=l=>Object.entries(l).sort((u,h)=>h[1]-u[1]),o=l=>Math.max(...Object.values(l),1);return y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Ft.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(xj,{size:18}),y.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),y.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:y.jsx(bs,{size:18})})]}),y.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:t.length===0?y.jsxs("div",{className:"text-center py-8 text-gray-500",children:[y.jsx(du,{size:48,className:"mx-auto mb-3 opacity-30"}),y.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),y.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[y.jsx(US,{icon:y.jsx(du,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),y.jsx(US,{icon:y.jsx(Kae,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),y.jsx(US,{icon:y.jsx(Zae,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),y.jsx(__,{title:"Per Type",data:a(r.byType),max:o(r.byType),color:"bg-orange-500"}),y.jsx(__,{title:"Per Periode",data:a(r.byPeriod),max:o(r.byPeriod),color:"bg-amber-500"}),y.jsx(__,{title:"Per Materiaal",data:a(r.byMaterial),max:o(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&y.jsx(__,{title:"Per Conditie",data:a(r.byCondition),max:o(r.byCondition),color:"bg-green-500"}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[y.jsx(jse,{size:14}),"Recente Vondsten"]}),y.jsx("div",{className:"space-y-2",children:r.recent.map(l=>y.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),y.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),y.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),y.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function US({icon:n,value:e,label:t,color:r}){return y.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[y.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:n}),y.jsx("div",{className:"text-xl font-bold",children:e}),y.jsx("div",{className:"text-xs opacity-70",children:t})]})}function __({title:n,data:e,max:t,color:r}){return e.length===0?null:y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:n}),y.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),y.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:y.jsx(Ft.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/t*100}%`},transition:{duration:.5,ease:"easeOut"}})}),y.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function BEe(n){const{type:e,coordinates:t}=n,r=o=>ru(o),i=o=>o.map(r),s=o=>o.map(i),a=o=>o.map(s);switch(e){case"Point":return new no(r(t));case"LineString":return new $o(i(t));case"Polygon":return new ro(s(t));case"MultiPoint":return new C0(i(t));case"MultiLineString":return new iu(s(t));case"MultiPolygon":return new s0(a(t));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function UEe(n,e,t){const r=n.color,i=10,s=5,a=14;let o=i;if(t>50?o=s:t>10?o=Math.max(s,i-(t-10)/10):t<2&&(o=a),e==="Point"||e==="MultiPoint")return new ur({image:new Dl({radius:o,fill:new oi({color:r}),stroke:new xs({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new ur({stroke:new xs({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=zEe(r,.3);return new ur({fill:new oi({color:l}),stroke:new xs({color:r,width:2})})}return new ur({image:new Dl({radius:o,fill:new oi({color:r}),stroke:new xs({color:"#ffffff",width:2})})})}function zEe(n,e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(t){const r=parseInt(t[1],16),i=parseInt(t[2],16),s=parseInt(t[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return n}function $Ee(){const n=rs(r=>r.map),e=wE(r=>r.layers),t=se.useRef(new Map);return se.useEffect(()=>{if(!n)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new $p;i.features.features.forEach((o,l)=>{if(!o.geometry)return;const u=BEe(o.geometry);if(!u)return;const h=new to({geometry:u,properties:o.properties,layerId:i.id,featureIndex:l});h.setStyle((f,g)=>UEe(i,o.geometry.type,g)),s.addFeature(h)});const a=t.current.get(i.id);if(a)a.setSource(s),a.setVisible(i.visible),a.setOpacity(i.opacity);else{const o=new Xp({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});n.addLayer(o),t.current.set(i.id,o)}}),t.current.forEach((i,s)=>{r.has(s)||(n.removeLayer(i),t.current.delete(s))})},[n,e]),se.useEffect(()=>()=>{n&&(t.current.forEach(r=>{n.removeLayer(r)}),t.current.clear())},[n]),null}gn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");T7(gn);function WEe(n){if(!n||n.length<2)return"unknown";const[e,t]=n;return e>=7e3&&e<=3e5&&t>=289e3&&t<=629e3?"RD":Math.abs(e)<=180&&Math.abs(t)<=90?"WGS84":"unknown"}function HEe(n){const[e,t]=n;return gn("EPSG:28992","EPSG:4326",[e,t])}function sG(n,e){return typeof n[0]=="number"?e(n):n.map(t=>sG(t,e))}function KEe(n){const e=n.coordinates;return!e||Array.isArray(e)&&e.length===0?null:n.type==="Point"?e:n.type==="LineString"||n.type==="MultiPoint"?e[0]:n.type==="Polygon"||n.type==="MultiLineString"?e[0]?.[0]:n.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function YEe(n){const e=[],t=[];try{const r=await n.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((u,h)=>({type:"Feature",geometry:u,properties:{id:h}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&t.push("Geen features gevonden in bestand");let a="unknown",o=!1;if(s.length>0&&s[0].geometry){const u=KEe(s[0].geometry);u&&(a=WEe(u))}a==="RD"&&(t.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),o=!0,s=s.map(u=>{if(!u.geometry)return u;const h=sG(u.geometry.coordinates,HEe);return{...u,geometry:{...u.geometry,coordinates:h}}}),a="WGS84");const l=[...new Set(s.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:t,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:a,transformed:o}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function XEe(n){const e=[],t=[];try{const r=await n.text(),s=new Qfe({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in KML bestand");const l=new LR().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((h,f)=>{const g={...h.properties},p=g.name||g.Name||`Feature ${f+1}`,x=g.description||g.Description||"";return{type:"Feature",geometry:h.geometry,properties:{...g,name:p,description:x}}}),u=[...new Set(l.filter(h=>h.geometry).map(h=>h.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function qEe(n){const e=[],t=[];try{const r=await n.text(),s=new dfe().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in GPX bestand");const l=new LR().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((h,f)=>{const g={...h.properties},p=g.name||g.Name||`Waypoint ${f+1}`,x=g.desc||g.description||"",v=g.time||null,w=g.ele||null;return{type:"Feature",geometry:h.geometry,properties:{...g,name:p,description:x,time:v,elevation:w}}}),u=[...new Set(l.filter(h=>h.geometry).map(h=>h.geometry.type))];return u.includes("LineString")&&t.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function hC(n){switch(n.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function ZEe(){return".geojson,.json,.kml,.gpx"}function dC(){return"GeoJSON, KML (Google My Maps), GPX"}async function QEe(n){switch(hC(n.name)){case"geojson":return YEe(n);case"kml":return XEe(n);case"gpx":return qEe(n);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${n.name}. Ondersteunde formaten: ${dC()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function JEe(n){return n.size>10485760?{valid:!1,error:`Bestand te groot (${(n.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:hC(n.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${dC()}`}:n.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function ewe({isOpen:n,onClose:e}){const t=wE(P=>P.addLayer),r=se.useRef(null),[i,s]=se.useState("idle"),[a,o]=se.useState(null),[l,u]=se.useState(null),[h,f]=se.useState(""),[g,p]=se.useState(null),[x,v]=se.useState(!1),w=se.useCallback(()=>{s("idle"),o(null),u(null),f(""),p(null),r.current&&(r.current.value="")},[]),T=se.useCallback(()=>{w(),e()},[w,e]),I=se.useCallback(async P=>{const M=JEe(P);if(!M.valid){p(M.error||"Ongeldig bestand"),s("error");return}o(P),s("parsing"),p(null);const j=P.name.replace(/\.[^/.]+$/,"");f(j);try{const O=await QEe(P);if(!O.success){p(O.errors.join(`
`)),s("error");return}if(O.features.features.length===0){p("Geen features gevonden in het bestand"),s("error");return}u(O),s("preview")}catch(O){p(O instanceof Error?O.message:"Onbekende fout bij parsen"),s("error")}},[]),A=se.useCallback(P=>{const M=P.target.files?.[0];M&&I(M)},[I]),N=se.useCallback(P=>{P.preventDefault(),v(!0)},[]),D=se.useCallback(P=>{P.preventDefault(),v(!1)},[]),B=se.useCallback(P=>{P.preventDefault(),v(!1);const M=P.dataTransfer.files?.[0];M&&I(M)},[I]),k=se.useCallback(()=>{if(!l||!h.trim())return;const P=a?hC(a.name):"geojson";t({name:h.trim(),type:P==="unsupported"?"geojson":P,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:a?.name||"unknown"}),T()},[l,h,a,t,T]);return y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),y.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(ER,{size:18}),y.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),y.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:y.jsx(bs,{size:18})})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${x?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:N,onDragLeave:D,onDrop:B,children:[y.jsx(pR,{size:40,className:"mx-auto text-gray-400 mb-3"}),y.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),y.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),y.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),y.jsx("input",{ref:r,type:"file",accept:ZEe(),onChange:A,className:"hidden"})]}),y.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[y.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),y.jsx("p",{children:dC()})]})]}),i==="parsing"&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[y.jsx(yR,{size:40,className:"text-purple-500 animate-spin mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),y.jsx("p",{className:"text-gray-400 text-sm",children:a?.name})]}),i==="error"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[y.jsx(Ej,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),y.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:g})]})]}),y.jsx("button",{onClick:w,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[y.jsx(qse,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),y.jsx("p",{className:"text-sm text-green-600",children:a?.name})]})]}),l.warnings.length>0&&y.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[y.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),y.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((P,M)=>y.jsx("li",{children:P},M))})]}),y.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-gray-500",children:"Features:"}),y.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-gray-500",children:"Types:"}),y.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),y.jsx("input",{type:"text",value:h,onChange:P=>f(P.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&y.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[y.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),y.jsx("button",{onClick:k,disabled:!h.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function twe({layer:n}){const{toggleVisibility:e,removeLayer:t}=wE(),[r,i]=se.useState(!1),s=n.features.features.length,a=[...new Set(n.features.features.map(l=>l.geometry?.type).filter(Boolean))],o=()=>{r?t(n.id):(i(!0),setTimeout(()=>i(!1),3e3))};return y.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[y.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"flex items-center gap-1",children:y.jsx("span",{className:"text-sm text-gray-700 truncate",children:n.name})}),y.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[y.jsx(pR,{size:10}),y.jsxs("span",{children:[s," ",s===1?"feature":"features"]}),a.length>0&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"mx-0.5",children:""}),y.jsx("span",{children:a.join(", ")})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>e(n.id),className:`p-1 rounded transition-colors border-0 outline-none ${n.visible?"text-purple-500 hover:bg-purple-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?y.jsx(mR,{size:14}):y.jsx(gR,{size:14})}),y.jsx("button",{onClick:o,className:`p-1 rounded transition-colors border-0 outline-none ${r?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:r?"Klik nogmaals om te verwijderen":"Verwijderen",children:y.jsx(B0,{size:14})})]})]})}function nwe(){const{user:n,loading:e,error:t,signInWithGoogle:r,logout:i,initAuth:s}=EE();return se.useEffect(()=>{s()},[s]),e?y.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg text-gray-500",children:[y.jsx(gL,{size:16,className:"animate-pulse"}),y.jsx("span",{className:"text-sm",children:"Laden..."})]}):n?y.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-green-50 rounded-lg",children:[n.photoURL?y.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-8 h-8 rounded-full border-2 border-green-200",referrerPolicy:"no-referrer"}):y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-200 flex items-center justify-center",children:y.jsx(wR,{size:16,className:"text-green-600"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"text-sm font-medium text-green-800 truncate",children:n.displayName||n.email}),y.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[y.jsx(gL,{size:12}),"Cloud sync actief"]})]}),y.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:y.jsx(_R,{size:16})})]}):y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg text-gray-500",children:[y.jsx(Qse,{size:16}),y.jsx("span",{className:"text-sm",children:"Alleen lokale opslag"})]}),y.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none",children:[y.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",children:[y.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),y.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),y.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),y.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),y.jsx("span",{className:"text-sm text-gray-700",children:"Inloggen met Google"})]}),t&&y.jsx("div",{className:"px-3 py-2 bg-red-50 text-red-700 text-xs rounded-lg",children:t})]})}const rwe="https://forms.gle/R5LCk11Bzu5XrkBj8";function iwe(){const{settingsPanelOpen:n,toggleSettingsPanel:e,vondstDashboardOpen:t,toggleVondstDashboard:r,openLayerManagerModal:i}=Vi(),s=Xr(),{presets:a,createPreset:o,deletePreset:l,updatePreset:u}=V8(),h=Ol(Y=>Y.vondsten),f=wE(Y=>Y.layers),{layers:g,updateLayer:p}=qs(),{devMode:x,setDevMode:v,tier:w}=G8(),[T,I]=se.useState(""),[A,N]=se.useState(!1),[D,B]=se.useState(!1),[k,P]=se.useState(null),[M,j]=se.useState(""),[O,W]=se.useState(null),[F,Te]=se.useState(""),[Me,Le]=se.useState("algemeen"),be=14*s.fontScale/100,ce=()=>{T.trim()&&(o(T.trim(),"Layers"),I(""),N(!1))},Re=(Y,ee)=>{P(Y),j(ee)},Ie=Y=>{M.trim()&&(u(Y,{name:M.trim()}),console.log(` Preset hernoemd naar "${M.trim()}"`)),P(null),j("")},ie=()=>{P(null),j("")},V=[{id:"algemeen",label:"Algemeen",icon:y.jsx(roe,{size:14})},{id:"lagen",label:"Lagen",icon:y.jsx(Qa,{size:14})},{id:"vondsten",label:"Vondsten",icon:y.jsx(du,{size:14})}];return y.jsxs(y.Fragment,{children:[y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Ft.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",style:{fontSize:`${be}px`},children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(vI,{size:18,className:"text-white"}),y.jsx("span",{className:"font-medium text-white",children:"Instellingen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:s.fontScale,onInput:Y=>{s.setFontScale(parseInt(Y.target.value))},onChange:Y=>s.setFontScale(parseInt(Y.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s.fontScale}%`}),y.jsx("span",{className:"text-xs text-blue-200",children:"T"}),y.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none ml-1",children:y.jsx(bs,{size:18,className:"text-white",strokeWidth:2.5})})]})]}),y.jsx("div",{className:"flex border-b border-gray-200",children:V.map(Y=>y.jsxs("button",{onClick:()=>Le(Y.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${Me===Y.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[Y.icon,Y.label]},Y.id))}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${be}px`},children:[Me==="algemeen"&&y.jsxs(y.Fragment,{children:[y.jsx(pl,{title:"Account",icon:y.jsx(wR,{size:16}),children:y.jsx(nwe,{})}),y.jsxs(pl,{title:"Kaart",icon:y.jsx(xR,{size:16}),children:[y.jsx(swe,{label:"Standaard achtergrond",children:y.jsxs("select",{value:s.defaultBackground,onChange:Y=>s.setDefaultBackground(Y.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),y.jsx("option",{value:"OpenStreetMap",children:"OSM"}),y.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),y.jsx(hf,{label:"Schaalbalk tonen",checked:s.showScaleBar,onChange:s.setShowScaleBar})]}),y.jsxs(pl,{title:"GPS",icon:y.jsx(vR,{size:16}),children:[y.jsx(hf,{label:"GPS aan bij start",checked:s.gpsAutoStart,onChange:s.setGpsAutoStart}),y.jsx(hf,{label:"Nauwkeurigheidscirkel",checked:s.showAccuracyCircle,onChange:s.setShowAccuracyCircle})]}),y.jsx(pl,{title:"Feedback",icon:y.jsx(soe,{size:16}),children:y.jsx(hf,{label:"Trillen bij acties",checked:s.hapticFeedback,onChange:s.setHapticFeedback})}),y.jsxs(pl,{title:"Development",icon:y.jsx(tae,{size:16}),children:[y.jsx(hf,{label:"Dev Mode (alles ontgrendeld)",checked:x,onChange:v}),y.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:["Huidige tier: ",y.jsx("span",{className:"font-medium text-blue-600",children:w}),x&&y.jsx("span",{className:"text-green-600",children:" (alle lagen ontgrendeld)"})]})]})]}),Me==="lagen"&&y.jsxs(y.Fragment,{children:[y.jsx(pl,{title:"Mijn Lagen",icon:y.jsx(Qa,{size:16}),isOwn:!0,children:y.jsxs("div",{className:"space-y-1",children:[g.filter(Y=>!Y.archived).length===0?y.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen aangemaakt."}):g.filter(Y=>!Y.archived).map(Y=>y.jsxs("div",{className:"flex items-center gap-2 py-1.5 px-2 hover:bg-gray-50 rounded",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:Y.color}}),O===Y.id?y.jsx("input",{type:"text",value:F,onChange:ee=>Te(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"?(F.trim()&&p(Y.id,{name:F.trim()}),W(null)):ee.key==="Escape"&&W(null)},onBlur:()=>{F.trim()&&p(Y.id,{name:F.trim()}),W(null)},autoFocus:!0,className:"flex-1 px-1.5 py-0.5 text-sm bg-orange-50 rounded outline-none focus:ring-1 focus:ring-orange-400"}):y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"flex-1 text-sm text-gray-700 truncate",children:Y.name}),y.jsxs("span",{className:"text-xs text-gray-400",children:[Y.points.length," punten"]}),y.jsx("button",{onClick:()=>{W(Y.id),Te(Y.name)},className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none bg-transparent",title:"Naam bewerken",children:y.jsx(_I,{size:12})})]})]},Y.id)),y.jsxs("button",{onClick:()=>{i(),e()},className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(vI,{size:14}),y.jsx("span",{children:"Lagen beheren"})]})]})}),y.jsx(pl,{title:"Eigen Lagen",icon:y.jsx(ER,{size:16}),children:y.jsxs("div",{className:"space-y-1",children:[f.length===0?y.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen gemporteerd."}):f.map(Y=>y.jsx(twe,{layer:Y},Y.id)),y.jsxs("button",{onClick:()=>B(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-purple-600 hover:bg-purple-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(Bo,{size:14}),y.jsx("span",{children:"Laag importeren"})]}),y.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),y.jsx(pl,{title:"Presets",icon:y.jsx(Qa,{size:16}),children:y.jsxs("div",{className:"space-y-2",children:[a.map(Y=>y.jsx("div",{className:"flex items-center justify-between py-1",children:k===Y.id?y.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[y.jsx("input",{type:"text",value:M,onChange:ee=>j(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&Ie(Y.id),ee.key==="Escape"&&ie()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),y.jsx("button",{onClick:()=>Ie(Y.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),y.jsx("button",{onClick:ie,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[Y.name,Y.isBuiltIn&&y.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),y.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",Y.layers.length," lagen)"]})]}),!Y.isBuiltIn&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>Re(Y.id,Y.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:y.jsx(_I,{size:14})}),y.jsx("button",{onClick:()=>l(Y.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:y.jsx(B0,{size:14})})]})]})},Y.id)),A?y.jsxs("div",{className:"flex gap-2 mt-2",children:[y.jsx("input",{type:"text",value:T,onChange:Y=>I(Y.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:Y=>Y.key==="Enter"&&ce(),autoFocus:!0}),y.jsx("button",{onClick:ce,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),y.jsx("button",{onClick:()=>N(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):y.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(Bo,{size:14}),y.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),Me==="vondsten"&&y.jsx(y.Fragment,{children:y.jsxs(pl,{title:"Vondsten",icon:y.jsx(du,{size:16}),isOwn:!0,children:[y.jsx(hf,{label:"Vondsten knop tonen",checked:s.showVondstButton,onChange:s.setShowVondstButton}),y.jsx("p",{className:"text-gray-500 mt-1 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),y.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(xj,{size:14}),y.jsxs("span",{children:["Dashboard (",h.length," vondsten)"]})]}),y.jsx(awe,{})]})})]}),y.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${be}px`},children:[y.jsxs("a",{href:rwe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx(_j,{size:16}),y.jsx("span",{children:"Meld een bug"})]}),y.jsxs("button",{onClick:VEe,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx(_R,{size:16}),y.jsx("span",{children:"Uitloggen"})]}),y.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),y.jsx(GEe,{isOpen:t,onClose:r}),y.jsx(ewe,{isOpen:D,onClose:()=>B(!1)})]})}function pl({title:n,icon:e,children:t,isOwn:r}){return y.jsxs("section",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[y.jsx("span",{className:r?"text-orange-600":"text-blue-600",children:e}),y.jsx("span",{className:`font-medium ${r?"text-orange-600":"text-gray-800"}`,style:{fontSize:"1em"},children:n})]}),y.jsx("div",{className:"space-y-2",children:t})]})}function swe({label:n,children:e}){return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),e]})}function hf({label:n,checked:e,onChange:t}){return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),y.jsx("button",{onClick:()=>t(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:y.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function awe(){const[n,e]=se.useState(!1),{vondsten:t,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:a,exportAsKML:o}=Ol(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:a,desc:"GPS apparaten"},{label:"KML",action:o,desc:"Google Earth"}],u=h=>{h(),e(!1)};return t.length===0?y.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[y.jsx(mI,{size:14}),y.jsx("span",{children:"Geen vondsten om te exporteren"})]}):y.jsxs("div",{className:"relative mt-2",children:[y.jsxs("button",{onClick:()=>e(!n),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(mI,{size:14}),y.jsxs("span",{children:["Exporteer vondsten (",t.length,")"]})]}),y.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),n&&y.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((h,f)=>y.jsxs("button",{onClick:()=>u(h.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[y.jsx("span",{className:"text-gray-700",children:h.label}),y.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:h.desc})]},f))})]})}function owe({size:n=18}){return y.jsxs("svg",{viewBox:"0 0 24 24",width:n,height:n,children:[y.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),y.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),y.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),y.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function lwe(){const[n,e]=se.useState(!1),{user:t,loading:r,signInWithGoogle:i,logout:s}=EE(),{toggleInfoPanel:a,toggleSettingsPanel:o}=Vi(),l=Xr(T=>T.menuFontScale),u=Xr(T=>T.setMenuFontScale),h={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"},f=()=>e(!1),g=()=>{f(),a()},p=()=>{f(),o()},x=()=>{f(),i()},v=()=>{f(),s()},w=13*l/100;return y.jsxs(y.Fragment,{children:[y.jsx(Ft.button,{className:`fixed right-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${n?"bg-blue-500 hover:bg-blue-600":"bg-white/90 hover:bg-white"}`,style:h,onClick:()=>e(!n),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Menu",children:n?y.jsx(bs,{size:22,className:"text-white"}):y.jsx(Mae,{size:22,className:"text-gray-600"})}),y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[799]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f}),y.jsxs(Ft.div,{initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15},className:"fixed right-2 z-[801] w-64 bg-white rounded-xl shadow-lg overflow-hidden flex flex-col",style:{top:"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)",fontSize:`${w}px`},children:[y.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",children:[y.jsx("span",{className:"font-medium text-white",style:{fontSize:`${w}px`},children:"Menu"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:l,onInput:T=>u(parseInt(T.target.value)),onChange:T=>u(parseInt(T.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${l}%`}),y.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),r?y.jsx("div",{className:"px-3 py-4 flex items-center justify-center",children:y.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}):t?y.jsx("div",{className:"px-3 py-3 border-b border-gray-100",children:y.jsxs("div",{className:"flex items-center gap-3",children:[t.photoURL?y.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-8 h-8 rounded-full",referrerPolicy:"no-referrer"}):y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:y.jsx(wR,{size:16,className:"text-white"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"font-medium text-gray-800 truncate",style:{fontSize:"0.85em"},children:t.displayName||"Gebruiker"}),y.jsx("div",{className:"text-green-600",style:{fontSize:"0.7em"},children:"Cloud sync actief"})]}),y.jsx("button",{onClick:v,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:y.jsx(_R,{size:16})})]})}):y.jsxs("button",{onClick:x,className:"w-full px-3 py-3 flex items-center gap-3 hover:bg-blue-50 transition-colors border-0 outline-none bg-transparent",children:[y.jsx(owe,{size:18}),y.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Inloggen met Google"})]}),y.jsx("div",{className:"py-1",children:y.jsxs("button",{onClick:g,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-blue-50",style:{fontSize:"0.95em"},children:[y.jsx(wj,{size:18,className:"text-blue-500"}),y.jsx("span",{children:"Info & handleiding"})]})}),y.jsx("div",{className:"mt-auto border-t border-gray-100",children:y.jsxs("button",{onClick:p,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-gray-50",style:{fontSize:"0.95em"},children:[y.jsx(vI,{size:18,className:"text-gray-500"}),y.jsx("span",{children:"Instellingen"})]})}),y.jsx("div",{className:"px-3 py-1.5 bg-gray-50 text-center text-gray-400",style:{fontSize:"0.65em"},children:"DetectorApp NL v2.26.4"})]})]})})]})}const cwe="https://forms.gle/R5LCk11Bzu5XrkBj8";function uwe(){const{infoPanelOpen:n,toggleInfoPanel:e}=Vi(),[t,r]=se.useState("info"),i=[{id:"info",label:"Info",icon:y.jsx(wj,{size:14})},{id:"functies",label:"Functies",icon:y.jsx(pR,{size:14})},{id:"handleiding",label:"Handleiding",icon:y.jsx(Ose,{size:14})}];return y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Ft.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",children:[y.jsx("span",{className:"font-medium text-white",children:"DetectorApp NL"}),y.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none",children:y.jsx(bs,{size:18,className:"text-white",strokeWidth:2.5})})]}),y.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>y.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${t===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[t==="info"&&y.jsx(hwe,{}),t==="functies"&&y.jsx(dwe,{}),t==="handleiding"&&y.jsx(fwe,{}),y.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[y.jsxs("a",{href:cwe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[y.jsx(_j,{size:14}),y.jsx("span",{className:"text-sm",children:"Meld een bug"})]}),y.jsx("p",{className:"text-xs text-gray-400 text-center",children:"DetectorApp NL v2.26.4"})]})]})]})]})})}function hwe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),y.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d kaartapplicatie voor metaaldetectie en archeologische verkenning in Nederland. Met 60+ kaartlagen, GPS tracking met richtingspijl en vondstenbeheer."})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),y.jsxs("ul",{className:"space-y-2 text-gray-600",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"AMK, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Parken, Kringloopwinkels, Musea"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Itiner-E"})," (CC BY 4.0)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"CARTO"})," (CC BY 3.0)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"CartoDB basiskaart"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Map5.nl / Kadaster"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Provinciale data"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data"})]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy"}),y.jsxs("div",{className:"text-gray-600 space-y-2",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Locatiegegevens:"})," Alleen voor navigatie, niet opgeslagen of gedeeld."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Geen tracking:"})," Geen analytics of gebruiksstatistieken."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Lokale opslag:"})," Alle data blijft op je apparaat."]})]})]})]})}function dwe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(xR,{size:16,className:"text-blue-600"}),"Kaartlagen (60+)"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Romeinse wegen, Kastelen, IKAW"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Percelen:"})," Gewaspercelen, Kadastrale Grenzen"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(vR,{size:16,className:"text-green-600"}),"GPS Tracking"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),y.jsx("li",{children:"Richtingspijl draait mee met je telefoon (zoals Google Maps)"}),y.jsx("li",{children:"Kaart handmatig draaien + kompasknop om terug te draaien naar noorden"}),y.jsx("li",{children:"Schaalbalk onderaan (instelbaar in Instellingen)"}),y.jsx("li",{children:'Open locatie in Google Maps (long-press  "Open in Google Maps")'})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(du,{size:16,className:"text-orange-600"}),"Vondsten"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Toevoegen via GPS, long-press of handmatig"}),y.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht, foto-link"}),y.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),y.jsx("li",{children:"Dashboard met statistieken"}),y.jsx("li",{children:"Lokale opslag (geen account nodig)"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(Qa,{size:16,className:"text-purple-600"}),"Presets"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen"}),y.jsx("li",{children:"Alle presets zijn aanpasbaar - klik op het diskette-icoon om huidige lagen op te slaan"}),y.jsx("li",{children:"Eigen presets aanmaken via Instellingen"}),y.jsx("li",{children:"Tekstgrootte per panel instelbaar via slider in header"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(Fae,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:'Zet "Kadastrale Grenzen" aan en tik op een perceel'}),y.jsx("li",{children:"Toont: kadastrale aanduiding (gemeente, sectie, nummer) + oppervlakte"}),y.jsx("li",{children:"Link naar eigenaar opzoeken (betaalde dienst)"}),y.jsx("li",{children:"Hoogtekaart per perceel (AHN4)"})]})]})]})}function fwe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),y.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[y.jsxs("li",{children:["Tik op de ",y.jsx("strong",{children:"GPS knop"})," (rechtsonder) om je locatie te zien"]}),y.jsxs("li",{children:["Kies een ",y.jsx("strong",{children:"preset"})," (links, laagjes-icoon) of selecteer kaartlagen handmatig"]}),y.jsxs("li",{children:["Tik op de ",y.jsx("strong",{children:"Kaartlagen knop"})," voor alle beschikbare lagen"]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS knop"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Uit (grijs icoon):"})," GPS tracking uit, geen locatie zichtbaar."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Aan (blauw icoon):"})," GPS tracking aan, je locatie en richting worden getoond."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Richtingspijl:"})," De blauwe pijl draait vloeiend mee met de richting van je telefoon."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als de kaart gedraaid is. Tik om terug naar noorden te draaien."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst toevoegen"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 1 - GPS:"})," Tik op de oranje + knop rechtsonder. Je huidige locatie wordt automatisch ingevuld."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 2 - Long-press:"}),' Houd je vinger lang op de kaart. Kies "Vondst toevoegen" in het menu.']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 3 - Handmatig:"}),' In het vondstenformulier, tik "Kies op kaart" en selecteer de exacte locatie.']})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Toepassen:"})," Tik op het laagjes-icoon links en kies een preset."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Snel opslaan:"})," Zet de gewenste lagen aan en tik op het diskette-icoon naast een preset om die te overschrijven."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Nieuw aanmaken:"}),' Ga naar Instellingen  Presets  "Huidige lagen als preset opslaan".']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Tekstgrootte:"})," Gebruik de slider in de header van het Presets/Kaartlagen panel."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zoeken & Navigatie"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Zoeken:"})," Gebruik de zoekbalk bovenaan om een adres te vinden."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Google Maps:"}),' Long-press op een locatie en kies "Open in Google Maps" om te navigeren.']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Schaalbalk:"})," Onderaan de kaart - aan/uit in Instellingen."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor in het veld"}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[y.jsxs("li",{children:["Gebruik ",y.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),y.jsxs("li",{children:["Combineer ",y.jsx("strong",{children:"AMK"})," met ",y.jsx("strong",{children:"Gewaspercelen"})," voor detectie"]}),y.jsxs("li",{children:["Check de ",y.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),y.jsxs("li",{children:["Gebruik ",y.jsx("strong",{children:"historische kaarten"})," om oude structuren te vinden"]}),y.jsxs("li",{children:["Zet ",y.jsx("strong",{children:"GPS tracking"})," aan om je route te volgen"]}),y.jsx("li",{children:"Tik op objecten (bunkers, musea, etc.) voor openingstijden en info"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(_1,{size:16,className:"text-blue-600"}),"Meer informatie"]}),y.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Uitleg over grondsoorten wordt direct in de popup getoond bij Bodemkaart en Gewaspercelen."}),y.jsxs("ul",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("li",{children:[y.jsx("a",{href:"https://legendageomorfologie.wur.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Geomorfologie legenda (WUR)"}),y.jsx("br",{}),y.jsx("span",{className:"text-gray-500",children:"Uitgebreide uitleg over landvormen"})]}),y.jsxs("li",{children:[y.jsx("a",{href:"https://legenda-bodemkaart.bodemdata.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Bodemkaart legenda (BRO)"}),y.jsx("br",{}),y.jsx("span",{className:"text-gray-500",children:"Volledige bodemclassificatie"})]})]})]})]})}function zS({value:n,onChange:e,options:t,label:r,required:i=!1,placeholder:s="Typ hier..."}){const[a,o]=se.useState(!1),[l,u]=se.useState(!1),[h,f]=se.useState(""),g=se.useRef(null),p=se.useRef(null),x=n&&n!=="-maak een keuze-"&&!t.includes(n);se.useEffect(()=>{if(!a)return;const A=N=>{g.current&&!g.current.contains(N.target)&&o(!1)};return document.addEventListener("click",A),()=>document.removeEventListener("click",A)},[a]),se.useEffect(()=>{l&&p.current&&p.current.focus()},[l]);const v=()=>{u(!0),f(x?n:""),o(!1)},w=()=>{h.trim()&&e(h.trim()),u(!1)},T=A=>{A.key==="Enter"?(A.preventDefault(),w()):A.key==="Escape"&&u(!1)},I=!n||n==="-maak een keuze-"?"-maak een keuze-":n;return l?y.jsxs("div",{ref:g,children:[y.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:[r,i&&" *"]}),y.jsx("div",{className:"flex gap-2",children:y.jsx("input",{ref:p,type:"text",value:h,onChange:A=>f(A.target.value),onKeyDown:T,onBlur:w,placeholder:s,className:"flex-1 px-3 py-1.5 bg-white rounded text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none",outline:"none"}})})]}):y.jsxs("div",{ref:g,className:"relative",children:[y.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:[r,i&&" *"]}),y.jsxs("button",{type:"button",onClick:()=>o(!a),className:"w-full flex items-center justify-between px-3 py-1.5 bg-white rounded text-sm text-gray-600 hover:bg-blue-50 transition-colors text-left",style:{border:"none",outline:"none"},children:[y.jsxs("span",{className:I==="-maak een keuze-"?"text-gray-400":"",children:[I,x&&y.jsx(pL,{size:12,className:"inline ml-1 text-orange-500"})]}),y.jsx(fR,{size:14,className:`text-gray-400 transition-transform ${a?"rotate-180":""}`})]}),a&&y.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white rounded shadow-lg max-h-48 overflow-y-auto",children:[y.jsx("button",{type:"button",onClick:()=>{e("-maak een keuze-"),o(!1)},className:`w-full px-3 py-1.5 text-left text-sm transition-colors ${!n||n==="-maak een keuze-"?"bg-blue-50 text-blue-600":"text-gray-400 hover:bg-blue-50"}`,style:{border:"none",outline:"none"},children:"-maak een keuze-"}),y.jsxs("button",{type:"button",onClick:v,className:"w-full px-3 py-1.5 text-left text-sm text-orange-600 hover:bg-orange-50 transition-colors flex items-center gap-2",style:{border:"none",outline:"none"},children:[y.jsx(pL,{size:12}),"Vrije invoer"]}),y.jsx("div",{className:"border-t border-gray-100 my-1"}),t.map(A=>y.jsx("button",{type:"button",onClick:()=>{e(A),o(!1)},className:`w-full px-3 py-1.5 text-left text-sm transition-colors ${A===n?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-blue-50"}`,style:{border:"none",outline:"none"},children:A},A))]})]})}function gwe({onClose:n,initialLocation:e}){const t=EE(Y=>Y.user),r=qi(Y=>Y.position),i=rs(Y=>Y.map),s=zee(Y=>Y.addVondst),a=Ol(Y=>Y.addVondst),o=Xr(Y=>Y.vondstenLocalOnly),[l,u]=se.useState(""),[h,f]=se.useState(""),[g,p]=se.useState(""),[x,v]=se.useState(""),[w,T]=se.useState(!0),[I,A]=se.useState(!1),[N,D]=se.useState(""),[B,k]=se.useState(void 0),[P,M]=se.useState(void 0),[j,O]=se.useState(e?"map-pick":r?"gps":"map-center"),[W,F]=se.useState(e||null),[Te,Me]=se.useState(!1),Le=()=>{if(j==="gps"&&r)return{lat:r.lat,lng:r.lng};if(j==="map-pick"&&W)return W;if(i){const Y=i.getView().getCenter();if(Y){const[ee,ne]=fn(Y);return{lat:ne,lng:ee}}}return null},be=Le();se.useEffect(()=>{if(!Te||!i)return;const Y=ee=>{const[ne,de]=fn(ee.coordinate);F({lat:de,lng:ne}),O("map-pick"),Me(!1)};return i.on("click",Y),()=>i.un("click",Y)},[Te,i]);const ce=()=>{Me(!0)},Re=()=>{r&&(O("gps"),F(null))},Ie=h&&h!=="-maak een keuze-",ie=Y=>!Y||Y==="-maak een keuze-"?"":Y,V=async Y=>{Y.preventDefault();const ee=Le();if(!ee){alert("Geen locatie beschikbaar");return}if(!Ie){alert("Kies een objecttype");return}if(!o&&!t){alert("Log in om vondsten in de cloud op te slaan");return}A(!0);try{if(o)a({location:{lat:ee.lat,lng:ee.lng},notes:l,objectType:ie(h),material:ie(g),period:ie(x),photoUrl:N||void 0,weight:B,length:P}),alert("Vondst lokaal opgeslagen! ");else{const ne=ie(h),de=ie(g),De=ie(x);await s({userId:t.uid,location:{lat:ee.lat,lng:ee.lng,accuracy:j==="gps"?5:50},timestamp:new Date().toISOString(),photos:[],notes:l,objectType:ne,material:de,period:De,tags:[De.toLowerCase(),ne.toLowerCase()].filter(Boolean),private:w}),alert("Vondst opgeslagen in cloud! ")}n()}catch(ne){alert("Fout bij opslaan: "+ne.message)}finally{A(!1)}};return Te?y.jsx(Ft.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:y.jsxs("div",{className:"bg-orange-500 text-white rounded-lg shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(mL,{size:24,className:"animate-pulse"}),y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),y.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),y.jsx("button",{onClick:()=>Me(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"Annuleren"})]})}):y.jsx(Ft.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y.jsxs(Ft.div,{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[y.jsxs("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 flex justify-between items-center",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),y.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:""})]}),y.jsxs("form",{onSubmit:V,className:"p-4 space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Locatie"}),y.jsxs("div",{className:"flex gap-2",children:[r&&j!=="gps"&&y.jsxs("button",{type:"button",onClick:Re,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs bg-white text-green-700 rounded hover:bg-blue-50 transition-colors border-0 outline-none",children:[y.jsx(vR,{size:14}),y.jsx("span",{children:"GPS gebruiken"})]}),y.jsxs("button",{type:"button",onClick:ce,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs text-blue-700 rounded hover:bg-blue-50 transition-colors bg-white outline-none border-0",children:[y.jsx(mL,{size:14}),y.jsx("span",{children:"Kies op kaart"})]})]})]}),y.jsx(zS,{label:"Objecttype",value:h,onChange:f,options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],required:!0,placeholder:"Typ objecttype..."}),y.jsx(zS,{label:"Materiaal",value:g,onChange:p,options:["Brons","IJzer","Zilver","Goud","Keramiek","Steen","Glas","Onbekend"],placeholder:"Typ materiaal..."}),y.jsx(zS,{label:"Periode",value:x,onChange:v,options:["Romeins (12 v.Chr.-450 n.Chr.)","IJzertijd","Middeleeuws (450-1500)","Nieuwetijd (1500-1800)","Modern (1800+)","Onbekend"],placeholder:"Typ periode..."}),y.jsxs("div",{className:"flex gap-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Gewicht (g)"}),y.jsx("input",{type:"number",value:B??"",onChange:Y=>k(Y.target.value?parseFloat(Y.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-white outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Lengte (mm)"}),y.jsx("input",{type:"number",value:P??"",onChange:Y=>M(Y.target.value?parseFloat(Y.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-white outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1"})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm text-gray-600 mb-1 flex items-center gap-1",children:[y.jsx(Eae,{size:12,className:"text-blue-500"}),"Foto link"]}),y.jsx("input",{type:"url",value:N,onChange:Y=>D(Y.target.value),className:"w-full rounded px-3 py-1.5 bg-white outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},placeholder:"Bijvoorbeeld https://photos.google.com/..."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Notities"}),y.jsx("textarea",{value:l,onChange:Y=>u(Y.target.value),className:"w-full rounded px-3 py-1.5 h-16 bg-white outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors resize-none",style:{border:"none"},placeholder:"Beschrijving..."})]}),y.jsx("p",{className:"text-xs text-gray-400",children:"Vondsten worden lokaal opgeslagen op dit apparaat."}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-1.5 rounded hover:bg-blue-50 transition-colors bg-white outline-none text-sm text-gray-600",style:{border:"none"},children:"Annuleren"}),y.jsx("button",{type:"submit",disabled:I||!be||Te||!Ie,className:"flex-1 px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 outline-none text-sm",style:{border:"none"},children:I?"Opslaan...":"Opslaan"})]})]})]})})}const LO={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},mwe={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function pwe(){const n=rs(i=>i.map),e=Ol(i=>i.vondsten),t=Xr(i=>i.showLocalVondsten),r=se.useRef(null);return se.useEffect(()=>{if(!n)return;const i=new $p;return e.forEach(s=>{const a=new to({geometry:new no(ru([s.location.lng,s.location.lat])),vondst:s}),o=LO[s.objectType]||LO.Anders,l=mwe[s.objectType]||"?";a.setStyle((u,h)=>{let x=12;h>50?x=6:h>10?x=Math.max(6,12-(h-10)/10):h<2&&(x=14);const v=Math.max(8,Math.min(12,x-2));return new ur({image:new Dl({radius:x,fill:new oi({color:o}),stroke:new xs({color:"#ffffff",width:x>8?2:1})}),text:x>=8?new id({text:l,font:`bold ${v}px sans-serif`,fill:new oi({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(a)}),r.current?r.current.setSource(i):(r.current=new Xp({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(t),n.addLayer(r.current)),()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null)}},[n,e]),se.useEffect(()=>{r.current&&r.current.setVisible(t)},[t]),null}const ywe={Mineraal:"M",Fossiel:"F",Erfgoed:"E",Monument:"Mo",Overig:""};function _we(){const n=rs(i=>i.map),e=qs(i=>i.layers),t=Xr(i=>i.showCustomPointLayers),r=se.useRef(new Map);return se.useEffect(()=>{if(!n)return;const i=new Set(e.map(s=>s.id));return r.current.forEach((s,a)=>{i.has(a)||(n.removeLayer(s),r.current.delete(a))}),e.forEach(s=>{const a=new $p;s.points.forEach(l=>{const u=new to({geometry:new no(ru(l.coordinates)),layerType:"customPoint",customPoint:l,customLayerId:s.id,customLayerName:s.name,customLayerColor:s.color}),h=ywe[l.category]||l.category.charAt(0).toUpperCase();u.setStyle((f,g)=>{let w=12;g>50?w=6:g>10?w=Math.max(6,12-(g-10)/10):g<2&&(w=14);const T=Math.max(8,Math.min(12,w-2));return new ur({image:new Dl({radius:w,fill:new oi({color:s.color}),stroke:new xs({color:"#ffffff",width:w>8?2:1})}),text:w>=8?new id({text:h,font:`bold ${T}px sans-serif`,fill:new oi({color:"#ffffff"}),offsetY:1}):void 0})}),a.addFeature(u)});const o=r.current.get(s.id);if(o)o.setSource(a),o.setVisible(t&&s.visible);else{const l=new Xp({source:a,zIndex:950,properties:{title:s.name,customPointLayerId:s.id},visible:t&&s.visible});n.addLayer(l),r.current.set(s.id,l)}}),()=>{r.current.forEach(s=>{n&&n.removeLayer(s)}),r.current.clear()}},[n,e,t]),null}function xwe(){const{createLayerModalOpen:n,closeCreateLayerModal:e}=Vi(),{addLayer:t}=qs(),r=Xr(),[i,s]=se.useState(""),[a,o]=se.useState([...Mc]),[l,u]=se.useState(""),h=14*r.fontScale/100,f=()=>{const w=l.trim();w&&!a.includes(w)&&(o([...a,w]),u(""))},g=w=>{o(a.filter(T=>T!==w))},p=w=>{a.includes(w)?o(a.filter(T=>T!==w)):o([...a,w])},x=()=>{i.trim()&&(t(i.trim(),a),s(""),o([...Mc]),u(""),e())},v=()=>{s(""),o([...Mc]),u(""),e()};return y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:v}),y.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Qa,{size:18}),y.jsx("span",{className:"font-medium",children:"Nieuwe laag"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:r.fontScale,onChange:w=>r.setFontScale(parseInt(w.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:v,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(bs,{size:18})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${h}px`},children:[y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam van de laag"}),y.jsx("input",{type:"text",value:i,onChange:w=>s(w.target.value),placeholder:"bijv. Vakantie Frankrijk 2026",className:"w-full px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Categorien"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:Mc.map(w=>y.jsx("button",{onClick:()=>p(w),className:`px-3 py-1 rounded-full transition-colors border-0 outline-none ${a.includes(w)?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-blue-50"}`,style:{fontSize:"0.9em"},children:w},w))})]}),a.filter(w=>!Mc.includes(w)).length>0&&y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Eigen categorien"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:a.filter(w=>!Mc.includes(w)).map(w=>y.jsxs("button",{onClick:()=>g(w),className:"flex items-center gap-1 px-3 py-1 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[w,y.jsx(B0,{size:12})]},w))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Eigen categorie toevoegen"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",value:l,onChange:w=>u(w.target.value),placeholder:"bijv. Grot, Bron, ...",className:"flex-1 px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},onKeyDown:w=>w.key==="Enter"&&f()}),y.jsx("button",{onClick:f,disabled:!l.trim(),className:"px-3 py-2 bg-white hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors border-0 outline-none text-gray-600",children:y.jsx(Bo,{size:20})})]})]})]}),y.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${h}px`},children:[y.jsx("button",{onClick:v,className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),y.jsx("button",{onClick:x,disabled:!i.trim(),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Aanmaken"})]})]})]})})}const aG=200,vwe=.7;async function Ewe(n,e=aG){return new Promise((t,r)=>{const i=new Image,s=document.createElement("canvas"),a=s.getContext("2d");i.onload=()=>{let o=i.width,l=i.height;o>l?o>e&&(l=Math.round(l*e/o),o=e):l>e&&(o=Math.round(o*e/l),l=e),s.width=o,s.height=l,a?.drawImage(i,0,0,o,l),s.toBlob(u=>{u?t(u):r(new Error("Failed to create blob from canvas"))},"image/jpeg",vwe)},i.onerror=()=>r(new Error("Failed to load image")),i.src=URL.createObjectURL(n)})}function wwe(n){return new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?e(r.result):t(new Error("Failed to convert blob to base64"))},r.onerror=()=>t(new Error("Failed to read blob")),r.readAsDataURL(n)})}async function Swe(n){const e=await Ewe(n,aG),t=await wwe(e);return{thumbnailBlob:e,thumbnailBase64:t}}function Twe(){return`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const $S=5;function Iwe({photos:n,onAddPhoto:e,onRemovePhoto:t,disabled:r}){const i=se.useRef(null),s=se.useRef(null),a=async l=>{const u=l.target.files;if(!u||u.length===0)return;const h=$S-n.length,f=Array.from(u).slice(0,h);for(const g of f)try{const{thumbnailBase64:p}=await Swe(g),x={id:Twe(),thumbnailBase64:p,createdAt:new Date().toISOString(),pendingUpload:!0};e(x)}catch(p){console.error("Failed to process image:",p)}l.target.value=""},o=n.length<$S;return y.jsxs("div",{className:"space-y-2",children:[y.jsxs("label",{className:"block font-medium text-gray-700",style:{fontSize:"0.9em"},children:["Foto's (",n.length,"/",$S,")"]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.map(l=>y.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:[y.jsx("img",{src:l.thumbnailUrl||l.thumbnailBase64,alt:"Foto",className:"w-full h-full object-cover"}),!r&&y.jsx("button",{type:"button",onClick:()=>t(l.id),className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-0 outline-none",children:y.jsx(bs,{size:12,className:"text-white"})}),l.pendingUpload&&y.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-orange-500/80 text-white text-center py-0.5",style:{fontSize:"0.6em"},children:"Wacht..."})]},l.id)),o&&!r&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{type:"button",onClick:()=>s.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Maak foto",children:[y.jsx(Gse,{size:20,className:"text-gray-400"}),y.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Camera"})]}),y.jsxs("button",{type:"button",onClick:()=>i.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Kies foto",children:[y.jsx(yae,{size:20,className:"text-gray-400"}),y.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Gallerij"})]})]})]}),y.jsx("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:a,className:"hidden"}),y.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden"})]})}function Awe(){const{addPointModalOpen:n,addPointModalLayerId:e,addPointModalLocation:t,closeAddPointModal:r}=Vi(),{addPoint:i,getLayer:s}=qs(),a=Xr(),[o,l]=se.useState(""),[u,h]=se.useState(""),[f,g]=se.useState(""),[p,x]=se.useState([]),v=e?s(e):null,w=14*a.fontScale/100,T=()=>{!o.trim()||!e||!t||(i(e,{name:o.trim(),category:"Overig",notes:u.trim(),url:f.trim()||void 0,coordinates:[t.lng,t.lat],photos:p.length>0?p:void 0}),l(""),h(""),g(""),x([]),r())},I=()=>{l(""),h(""),g(""),x([]),r()};return v?y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:I}),y.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(du,{size:18}),y.jsx("span",{className:"font-medium",children:"Punt toevoegen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:a.fontScale,onChange:A=>a.setFontScale(parseInt(A.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:I,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(bs,{size:18})})]})]}),y.jsx("div",{className:"px-4 py-1.5",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:v.color}}),y.jsx("span",{className:"text-sm text-gray-600",children:v.name})]})}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{fontSize:`${w}px`},children:[y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam *"}),y.jsx("input",{type:"text",value:o,onChange:A=>l(A.target.value),className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),y.jsx(Iwe,{photos:p,onAddPhoto:A=>x([...p,A]),onRemovePhoto:A=>x(p.filter(N=>N.id!==A))}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Notities"}),y.jsx("textarea",{value:u,onChange:A=>h(A.target.value),placeholder:"Beschrijving, tips, opmerkingen...",rows:2,className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors resize-none",style:{fontSize:"1em"}})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Link"}),y.jsx("input",{type:"url",value:f,onChange:A=>g(A.target.value),placeholder:"https://...",className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"}})]})]}),y.jsxs("div",{className:"p-3 flex gap-3",style:{fontSize:`${w}px`},children:[y.jsx("button",{onClick:I,className:"flex-1 px-4 py-1.5 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),y.jsx("button",{onClick:T,disabled:!o.trim(),className:"flex-1 px-4 py-1.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Toevoegen"})]})]})]})}):null}function bwe(){const{layerManagerModalOpen:n,closeLayerManagerModal:e,openCreateLayerModal:t,openLayerDashboard:r}=Vi(),{layers:i,removeLayer:s,toggleVisibility:a,toggleArchived:o,exportLayerAsGeoJSON:l,importLayerFromGeoJSON:u}=qs(),h=Xr(),f=14*h.fontScale/100,[g,p]=se.useState(null),[x,v]=se.useState(null),[w,T]=se.useState(null),[I,A]=se.useState(!1),N=i.filter(F=>!F.archived),D=i.filter(F=>F.archived),B=I?D:N,k=F=>{x===F?(s(F),v(null)):(v(F),setTimeout(()=>v(null),3e3))},P=F=>{l(F)},M=async F=>{const Te=F.target.files?.[0];if(Te){try{const Me=await Te.text(),Le=u(Me);Le.success||(T(Le.error||"Import mislukt"),setTimeout(()=>T(null),3e3))}catch{T("Kon bestand niet lezen"),setTimeout(()=>T(null),3e3)}F.target.value=""}},j=()=>{p(null),v(null),T(null),A(!1),e()},O=F=>{r(F)},W=()=>{j(),t()};return y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:j}),y.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Qa,{size:18}),y.jsx("span",{className:"font-medium",children:"Mijn Lagen beheren"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:h.fontScale,onChange:F=>h.setFontScale(parseInt(F.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${h.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:j,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(bs,{size:18})})]})]}),y.jsxs("div",{className:"flex border-b border-gray-100",children:[y.jsxs("button",{onClick:()=>A(!1),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${I?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50"}`,children:["Actief (",N.length,")"]}),y.jsxs("button",{onClick:()=>A(!0),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none flex items-center justify-center gap-1 ${I?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[y.jsx(yj,{size:14}),"Archief (",D.length,")"]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${f}px`},children:[B.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500",children:I?y.jsx("p",{style:{fontSize:"1em"},children:"Geen gearchiveerde lagen."}):y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"mb-4",style:{fontSize:"1em"},children:"Je hebt nog geen eigen lagen."}),y.jsxs("button",{onClick:W,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:[y.jsx(Bo,{size:16,className:"inline mr-2"}),"Nieuwe laag aanmaken"]})]})}):y.jsx("div",{className:"divide-y divide-gray-100",children:B.map(F=>y.jsx(Rwe,{layer:F,isExpanded:g===F.id,onToggleExpand:()=>p(g===F.id?null:F.id),onToggleVisibility:()=>a(F.id),onToggleArchived:()=>o(F.id),onOpenDashboard:()=>O(F.id),onExport:()=>P(F.id),onDelete:()=>k(F.id),confirmDelete:x===F.id,onRename:Te=>qs.getState().updateLayer(F.id,{name:Te})},F.id))}),w&&y.jsx("div",{className:"mx-4 my-2 p-3 bg-red-50 text-red-700 text-sm rounded-lg",children:w})]}),y.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${f}px`},children:[y.jsxs("label",{className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-2 border-0 outline-none text-gray-600",children:[y.jsx(ER,{size:16}),y.jsx("span",{style:{fontSize:"1em"},children:"Importeren"}),y.jsx("input",{type:"file",accept:".geojson,.json",onChange:M,className:"hidden"})]}),y.jsxs("button",{onClick:W,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",style:{fontSize:"1em"},children:[y.jsx(Bo,{size:16}),y.jsx("span",{children:"Nieuwe laag"})]})]})]})]})})}function Rwe({layer:n,isExpanded:e,onToggleExpand:t,onToggleVisibility:r,onToggleArchived:i,onOpenDashboard:s,onExport:a,onDelete:o,confirmDelete:l,onRename:u}){const[h,f]=se.useState(!1),[g,p]=se.useState(n.name),x=se.useRef(null);se.useEffect(()=>{h&&x.current&&(x.current.focus(),x.current.select())},[h]);const v=()=>{p(n.name),f(!0)},w=()=>{const D=g.trim();D&&D!==n.name&&u(D),f(!1)},T=()=>{p(n.name),f(!1)},I=D=>{D.key==="Enter"?w():D.key==="Escape"&&T()},A=n.points.filter(D=>D.status==="completed").length,N=n.points.length;return y.jsxs("div",{className:"bg-white",children:[y.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[y.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors border-0 outline-none bg-transparent",children:e?y.jsx(fR,{size:16}):y.jsx(CE,{size:16})}),y.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),h?y.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[y.jsx("input",{ref:x,type:"text",value:g,onChange:D=>p(D.target.value),onKeyDown:I,onBlur:w,className:"flex-1 px-2 py-1 text-gray-800 font-medium bg-orange-50 rounded outline-none focus:ring-2 focus:ring-orange-400"}),y.jsx("button",{onClick:w,className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Opslaan",children:y.jsx(G0,{size:16})})]}):y.jsxs("button",{onClick:s,className:"flex-1 min-w-0 text-left border-0 outline-none bg-transparent hover:bg-orange-50 rounded px-2 py-1 -ml-2 transition-colors",title:"Bekijk dashboard",children:[y.jsx("div",{className:"font-medium text-gray-800 truncate hover:text-orange-600",children:n.name}),y.jsx("div",{className:"text-xs text-gray-500",children:N>0?y.jsxs("span",{className:A===N?"text-green-600":"",children:[A,"/",N," voltooid"]}):"Geen punten"})]}),!h&&y.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam bewerken",children:y.jsx(_I,{size:16})}),y.jsx("button",{onClick:s,className:"p-2 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Open dashboard",children:y.jsx(Sae,{size:18})}),!n.archived&&y.jsx("button",{onClick:r,className:`p-2 rounded transition-colors border-0 outline-none ${n.visible?"text-blue-500 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?y.jsx(mR,{size:18}):y.jsx(gR,{size:18})}),y.jsx("button",{onClick:i,className:`p-2 rounded transition-colors border-0 outline-none ${n.archived?"text-green-500 hover:text-green-600 hover:bg-green-50":"text-gray-400 hover:text-amber-600 hover:bg-amber-50"}`,title:n.archived?"Herstellen":"Archiveren",children:n.archived?y.jsx(Pse,{size:18}):y.jsx(yj,{size:18})}),y.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteren als GeoJSON",children:y.jsx(mI,{size:18})}),y.jsx("button",{onClick:o,className:`p-2 rounded transition-colors border-0 outline-none ${l?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:l?"Klik nogmaals om te verwijderen":"Verwijderen",children:y.jsx(B0,{size:18})})]}),y.jsx(Dr,{children:e&&y.jsx(Ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:y.jsxs("div",{className:"px-4 pb-3 pl-12 space-y-2",children:[n.categories.length>0&&y.jsx("div",{className:"flex flex-wrap gap-1",children:n.categories.map(D=>y.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:D},D))}),n.points.length>0&&y.jsxs("div",{className:"text-xs text-gray-500 space-y-1 max-h-32 overflow-y-auto",children:[n.points.slice(0,5).map(D=>y.jsx("div",{className:"flex items-center gap-2",children:y.jsx("span",{className:`font-medium ${D.status==="completed"?"text-green-600 line-through":D.status==="skipped"?"text-gray-400 line-through":"text-gray-700"}`,children:D.name})},D.id)),n.points.length>5&&y.jsxs("div",{className:"text-gray-400",children:["...en ",n.points.length-5," meer"]})]}),y.jsxs("div",{className:"text-xs text-gray-400",children:["Aangemaakt: ",new Date(n.createdAt).toLocaleDateString("nl-NL")]})]})})})]})}function Cwe(){const{layerDashboardOpen:n,layerDashboardLayerId:e,closeLayerDashboard:t}=Vi(),{getLayer:r,setPointStatus:i,updatePoint:s,removePoint:a}=qs(),o=Xr(),[l,u]=se.useState("all"),[h,f]=se.useState(null),[g,p]=se.useState(""),[x,v]=se.useState(null),w=e?r(e):null,T=14*o.fontScale/100;if(!w)return null;const I=w.points.filter(O=>l==="all"?!0:O.status===l),A=w.points.length,N=w.points.filter(O=>O.status==="completed").length,D=w.points.filter(O=>O.status==="todo").length,B=w.points.filter(O=>O.status==="skipped").length,k=(O,W)=>{i(w.id,O,W)},P=O=>{s(w.id,O,{notes:g}),f(null),p("")},M=O=>{x===O?(a(w.id,O),v(null)):(v(O),setTimeout(()=>v(null),3e3))},j=()=>{f(null),v(null),t()};return y.jsx(Dr,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:j}),y.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/50",style:{backgroundColor:w.color}}),y.jsx("span",{className:"font-medium truncate",children:w.name})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:o.fontScale,onChange:O=>o.setFontScale(parseInt(O.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${o.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:j,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(bs,{size:18})})]})]}),y.jsxs("div",{className:"px-4 py-2 bg-orange-50 flex items-center justify-between text-sm",children:[y.jsxs("span",{className:"text-orange-800 font-medium",children:[N,"/",A," voltooid"]}),y.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[y.jsxs("span",{className:"text-orange-600",children:[D," te doen"]}),B>0&&y.jsxs("span",{className:"text-gray-500",children:[B," overgeslagen"]})]})]}),y.jsx("div",{className:"flex border-b border-gray-100",children:["all","todo","completed","skipped"].map(O=>y.jsxs("button",{onClick:()=>u(O),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${l===O?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[O==="all"&&"Alles",O==="todo"&&"Te doen",O==="completed"&&"Voltooid",O==="skipped"&&"Overgeslagen"]},O))}),y.jsx("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${T}px`},children:I.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500",children:y.jsx("p",{children:"Geen punten gevonden"})}):y.jsx("div",{className:"divide-y divide-gray-100",children:I.map(O=>y.jsx("div",{className:"p-3",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsxs("div",{className:"flex flex-col gap-1 pt-0.5",children:[y.jsx("button",{onClick:()=>k(O.id,O.status==="completed"?"todo":"completed"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${O.status==="completed"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-green-100"}`,title:O.status==="completed"?"Markeer als te doen":"Markeer als voltooid",children:y.jsx(G0,{size:14,className:O.status==="completed"?"text-green-600":"text-gray-400"})}),y.jsx("button",{onClick:()=>k(O.id,O.status==="skipped"?"todo":"skipped"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${O.status==="skipped"?"bg-gray-200 hover:bg-gray-300":"bg-gray-100 hover:bg-gray-200"}`,title:O.status==="skipped"?"Markeer als te doen":"Overslaan",children:y.jsx(Nse,{size:14,className:O.status==="skipped"?"text-gray-600":"text-gray-400"})})]}),O.photos&&O.photos.length>0&&y.jsxs("div",{className:"relative flex-shrink-0",children:[y.jsx("img",{src:O.photos[0].thumbnailUrl||O.photos[0].thumbnailBase64,alt:"Foto",className:"w-12 h-12 object-cover rounded border border-gray-200"}),O.photos.length>1&&y.jsxs("span",{className:"absolute -bottom-1 -right-1 bg-orange-500 text-white text-[9px] px-1 rounded-full",children:["+",O.photos.length-1]})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:`font-medium truncate ${O.status==="completed"?"text-green-700 line-through":O.status==="skipped"?"text-gray-400 line-through":"text-gray-800"}`,children:O.name}),O.sourceLayer&&y.jsxs("span",{className:"text-xs text-gray-400 truncate",children:["via ",O.sourceLayer]})]}),h===O.id?y.jsxs("div",{className:"mt-2",children:[y.jsx("textarea",{value:g,onChange:W=>p(W.target.value),placeholder:"Notities...",rows:2,className:"w-full px-2 py-1 bg-white rounded border-0 outline-none hover:bg-blue-50 transition-colors resize-none text-sm",autoFocus:!0}),y.jsxs("div",{className:"flex gap-2 mt-1",children:[y.jsx("button",{onClick:()=>P(O.id),className:"px-2 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 border-0 outline-none",children:"Opslaan"}),y.jsx("button",{onClick:()=>{f(null),p("")},className:"px-2 py-1 text-xs bg-white text-gray-600 rounded hover:bg-blue-50 border-0 outline-none",children:"Annuleren"})]})]}):O.notes?y.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.notes}):null,O.url&&y.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 mt-1",children:[y.jsx(_1,{size:12}),"Link"]})]}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("button",{onClick:()=>{f(O.id),p(O.notes)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded border-0 outline-none",title:"Notities bewerken",children:y.jsx(Bae,{size:14})}),y.jsx("button",{onClick:()=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${O.coordinates[1]},${O.coordinates[0]}`,"_blank")},className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded border-0 outline-none",title:"Navigeer naar",children:y.jsx(du,{size:14})}),y.jsx("button",{onClick:()=>M(O.id),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none ${x===O.id?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:x===O.id?"Klik nogmaals":"Verwijderen",children:y.jsx(B0,{size:14})})]})]})},O.id))})})]})]})})}class OO{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const t=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/t)}add(e){if(this.buffer.length>0){const t=this.buffer[this.buffer.length-1];let r=e-t;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalizeHeading(this.buffer[0]);let e=0,t=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,t+=s}return this.normalizeHeading(e/t)}normalizeHeading(e){return(e%360+360)%360}clear(){this.buffer=[]}}function Pwe(){const n=qi(u=>u.tracking),e=qi(u=>u.headingSource);qi(u=>u.speed);const t=qi(u=>u.setSmoothedHeading),r=se.useRef(new OO(6)),i=se.useRef(new OO(10)),s=se.useRef(0),a=se.useRef(null),o=33,l=se.useCallback((u,h)=>{const f=performance.now();if(f-s.current<o)return;const g=h==="gps"?r.current:i.current;g.add(u);const p=g.getSmoothed();p!==null&&(s.current=f,t(p))},[t]);se.useEffect(()=>{if(!n)return;const u=f=>{f.coords.heading!==null&&f.coords.speed!==null&&f.coords.speed>.8&&f.coords.accuracy<20&&l(f.coords.heading,"gps")},h=navigator.geolocation.watchPosition(u,()=>{},{enableHighAccuracy:!0,maximumAge:500,timeout:1e4});return()=>navigator.geolocation.clearWatch(h)},[n,l]),se.useEffect(()=>{if(!n||e!=="compass")return;let u=0;const h=50,f=p=>{const x=performance.now();if(!(x-u<h)&&(u=x,p.alpha!==null)){const v=(360-p.alpha)%360;l(v,"compass")}},g=p=>{const x=performance.now();x-u<h||(u=x,p.webkitCompassHeading!==void 0&&l(p.webkitCompassHeading,"compass"))};return window.addEventListener("deviceorientationabsolute",f),window.addEventListener("deviceorientation",g),()=>{window.removeEventListener("deviceorientationabsolute",f),window.removeEventListener("deviceorientation",g)}},[n,e,l]),se.useEffect(()=>{n||(r.current.clear(),i.current.clear())},[n]),se.useEffect(()=>()=>{a.current&&cancelAnimationFrame(a.current)},[])}function kwe(){const n=rs(i=>i.map),e=ri(i=>i.setLayerOpacity),t=ri(i=>i.visible),r=se.useRef(null);se.useEffect(()=>{if(!n)return;const i=()=>{const s=n.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const a=t["AHN 0.5m"],o=t["AHN4 Multi-Hillshade NL"];!a&&!o||(a&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),o&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return n.on("moveend",i),i(),()=>{n.un("moveend",i)}},[n,t,e])}const DO=2e3;function Mwe(){const n=EE(g=>g.user),{layers:e,clearAll:t}=qs(),{vondsten:r,clearAll:i}=Ol(),s=se.useRef(null),a=se.useRef(!0),o=se.useRef(""),l=se.useRef(""),u=se.useCallback(async g=>{if(n)try{const p=zf($c,"users",n.uid);await U3(p,{layers:g,layersUpdatedAt:z3()},{merge:!0}),console.log(" Lagen gesynchroniseerd naar cloud")}catch(p){console.error(" Fout bij synchroniseren lagen:",p)}},[n]),h=se.useCallback(async g=>{if(n)try{const p=zf($c,"users",n.uid);await U3(p,{vondsten:g,vondstenUpdatedAt:z3()},{merge:!0}),console.log(" Vondsten gesynchroniseerd naar cloud")}catch(p){console.error(" Fout bij synchroniseren vondsten:",p)}},[n]),f=se.useCallback(async()=>{if(n)try{const g=zf($c,"users",n.uid),p=await oee(g);if(p.exists()){const x=p.data();if(x.layers&&Array.isArray(x.layers)){const v=x.layers,w=qs.getState().layers,T=[...v],I=new Set(v.map(A=>A.id));w.forEach(A=>{I.has(A.id)||T.push(A)}),qs.setState({layers:T}),o.current=JSON.stringify(T),console.log(` ${v.length} lagen geladen uit cloud`)}if(x.vondsten&&Array.isArray(x.vondsten)){const v=x.vondsten,w=Ol.getState().vondsten,T=[...v],I=new Set(v.map(A=>A.id));w.forEach(A=>{I.has(A.id)||T.push(A)}),Ol.setState({vondsten:T}),l.current=JSON.stringify(T),console.log(` ${v.length} vondsten geladen uit cloud`)}}else console.log(" Geen cloud data gevonden, lokale data wordt gesynchroniseerd..."),await u(e),await h(r);a.current=!1}catch(g){console.error(" Fout bij laden uit cloud:",g),a.current=!1}},[n,e,r,u,h]);return se.useEffect(()=>{n?(a.current=!0,f()):(a.current=!0,o.current="",l.current="")},[n?.uid]),se.useEffect(()=>{if(!n||a.current)return;const g=JSON.stringify(e);if(g!==o.current)return s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{o.current=g,u(e)},DO),()=>{s.current&&clearTimeout(s.current)}},[n,e,u]),se.useEffect(()=>{if(!n||a.current)return;const g=JSON.stringify(r);if(g!==l.current)return s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{l.current=g,h(r)},DO),()=>{s.current&&clearTimeout(s.current)}},[n,r,h]),{isLoggedIn:!!n,syncLayersToCloud:u,syncVondstenToCloud:h}}function Nwe(){Pwe(),kwe(),Mwe();const e=14*Xr(s=>s.fontScale)/100,t=Vi(s=>s.vondstFormOpen),r=Vi(s=>s.vondstFormLocation),i=Vi(s=>s.closeVondstForm);return y.jsx(jEe,{children:y.jsxs("div",{style:{fontSize:`${e}px`},children:[y.jsx(Zee,{}),y.jsx(Soe,{}),y.jsx(pwe,{}),y.jsx($Ee,{}),y.jsx(_we,{}),y.jsx(EEe,{}),y.jsx(SEe,{}),y.jsx(OEe,{}),y.jsx(Eoe,{}),y.jsx(DEe,{}),y.jsx(Ioe,{}),y.jsx(Aoe,{}),y.jsx(LEe,{}),y.jsx(lwe,{}),y.jsx(PEe,{}),y.jsx(uwe,{}),y.jsx(kEe,{}),y.jsx(iwe,{}),y.jsx(xwe,{}),y.jsx(Awe,{}),y.jsx(bwe,{}),y.jsx(Cwe,{}),y.jsx(Dr,{children:t&&y.jsx(gwe,{onClose:i,initialLocation:r||void 0})})]})})}const Lwe="2.26.4";console.log(`%c DetectorApp v${Lwe}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");wB.createRoot(document.getElementById("root")).render(y.jsx(Nwe,{}));export{Dl as C,oi as F,LR as G,sW as I,$o as L,no as P,ur as S,Qu as T,Xp as V,GW as a,MW as b,xs as c,$p as d,id as e,to as f,ru as g,Hp as h,gn as p,T7 as r};
//# sourceMappingURL=index-CSkLraBs.js.map
