const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/amkOL-D0oLSJik.js","assets/layerLoaderOL-Dgmt4S1W.js","assets/romeinsOL-0XzU27sm.js","assets/kastelenOL-DF-eVXAj.js","assets/iconStyles-BZU-tZUN.js","assets/ruinesOL-CuUbr-VD.js","assets/hunebeddenOL-DGp1AaIg.js","assets/uikavArcheoPuntenOL-mdPWlkk3.js","assets/uikavVlakkenOL-DR3sXIF1.js","assets/uikavBufferlaagOL--t4L98ZY.js","assets/uikavExpertOL-D8qKTbjw.js","assets/uikavUiterwaardenOL-C-nnb2Gr.js","assets/speeltuinenOL-DSf8A3J1.js","assets/museaOL-DhoK7uY1.js","assets/strandjesOL-CE-VFPzT.js","assets/parkenOL-DuRPc-iY.js","assets/kringloopwinkelsOL-BjFiUq9D.js","assets/fossielenOL-BahoBjjY.js","assets/fossielUtils-DqGvzoHm.js","assets/fossielenBelgieOL-YLGH2EU6.js","assets/fossielenDuitslandOL-WS5GNc4I.js","assets/fossielenFrankrijkOL-CM8qtEz9.js","assets/bunkersOL-_A6QurCs.js","assets/grafheuvelsOL-ZsPY_juc.js","assets/slagveldenOL-D8zRdlxx.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function zI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var p2={exports:{}},Mg={},y2={exports:{}},rn={};var I4;function EB(){if(I4)return rn;I4=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function g(ie){return ie===null||typeof ie!="object"?null:(ie=f&&ie[f]||ie["@@iterator"],typeof ie=="function"?ie:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function w(ie,V,J){this.props=ie,this.context=V,this.refs=x,this.updater=J||y}w.prototype.isReactComponent={},w.prototype.setState=function(ie,V){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,V,"setState")},w.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function T(){}T.prototype=w.prototype;function I(ie,V,J){this.props=ie,this.context=V,this.refs=x,this.updater=J||y}var b=I.prototype=new T;b.constructor=I,v(b,w.prototype),b.isPureReactComponent=!0;var N=Array.isArray,F=Object.prototype.hasOwnProperty,W={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function C(ie,V,J){var te,X={},ue=null,Me=null;if(V!=null)for(te in V.ref!==void 0&&(Me=V.ref),V.key!==void 0&&(ue=""+V.key),V)F.call(V,te)&&!M.hasOwnProperty(te)&&(X[te]=V[te]);var Fe=arguments.length-2;if(Fe===1)X.children=J;else if(1<Fe){for(var Le=Array(Fe),je=0;je<Fe;je++)Le[je]=arguments[je+2];X.children=Le}if(ie&&ie.defaultProps)for(te in Fe=ie.defaultProps,Fe)X[te]===void 0&&(X[te]=Fe[te]);return{$$typeof:n,type:ie,key:ue,ref:Me,props:X,_owner:W.current}}function P(ie,V){return{$$typeof:n,type:ie.type,key:V,ref:ie.ref,props:ie.props,_owner:ie._owner}}function L(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===n}function O(ie){var V={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(J){return V[J]})}var U=/\/+/g;function j(ie,V){return typeof ie=="object"&&ie!==null&&ie.key!=null?O(""+ie.key):V.toString(36)}function xe(ie,V,J,te,X){var ue=typeof ie;(ue==="undefined"||ue==="boolean")&&(ie=null);var Me=!1;if(ie===null)Me=!0;else switch(ue){case"string":case"number":Me=!0;break;case"object":switch(ie.$$typeof){case n:case e:Me=!0}}if(Me)return Me=ie,X=X(Me),ie=te===""?"."+j(Me,0):te,N(X)?(J="",ie!=null&&(J=ie.replace(U,"$&/")+"/"),xe(X,V,J,"",function(je){return je})):X!=null&&(L(X)&&(X=P(X,J+(!X.key||Me&&Me.key===X.key?"":(""+X.key).replace(U,"$&/")+"/")+ie)),V.push(X)),1;if(Me=0,te=te===""?".":te+":",N(ie))for(var Fe=0;Fe<ie.length;Fe++){ue=ie[Fe];var Le=te+j(ue,Fe);Me+=xe(ue,V,J,Le,X)}else if(Le=g(ie),typeof Le=="function")for(ie=Le.call(ie),Fe=0;!(ue=ie.next()).done;)ue=ue.value,Le=te+j(ue,Fe++),Me+=xe(ue,V,J,Le,X);else if(ue==="object")throw V=String(ie),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return Me}function Ce(ie,V,J){if(ie==null)return ie;var te=[],X=0;return xe(ie,te,"","",function(ue){return V.call(J,ue,X++)}),te}function Ge(ie){if(ie._status===-1){var V=ie._result;V=V(),V.then(function(J){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=J)},function(J){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=J)}),ie._status===-1&&(ie._status=0,ie._result=V)}if(ie._status===1)return ie._result.default;throw ie._result}var ke={current:null},ce={transition:null},Ie={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:ce,ReactCurrentOwner:W};function Te(){throw Error("act(...) is not supported in production builds of React.")}return rn.Children={map:Ce,forEach:function(ie,V,J){Ce(ie,function(){V.apply(this,arguments)},J)},count:function(ie){var V=0;return Ce(ie,function(){V++}),V},toArray:function(ie){return Ce(ie,function(V){return V})||[]},only:function(ie){if(!L(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}},rn.Component=w,rn.Fragment=t,rn.Profiler=i,rn.PureComponent=I,rn.StrictMode=r,rn.Suspense=l,rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,rn.act=Te,rn.cloneElement=function(ie,V,J){if(ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ie+".");var te=v({},ie.props),X=ie.key,ue=ie.ref,Me=ie._owner;if(V!=null){if(V.ref!==void 0&&(ue=V.ref,Me=W.current),V.key!==void 0&&(X=""+V.key),ie.type&&ie.type.defaultProps)var Fe=ie.type.defaultProps;for(Le in V)F.call(V,Le)&&!M.hasOwnProperty(Le)&&(te[Le]=V[Le]===void 0&&Fe!==void 0?Fe[Le]:V[Le])}var Le=arguments.length-2;if(Le===1)te.children=J;else if(1<Le){Fe=Array(Le);for(var je=0;je<Le;je++)Fe[je]=arguments[je+2];te.children=Fe}return{$$typeof:n,type:ie.type,key:X,ref:ue,props:te,_owner:Me}},rn.createContext=function(ie){return ie={$$typeof:a,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ie.Provider={$$typeof:s,_context:ie},ie.Consumer=ie},rn.createElement=C,rn.createFactory=function(ie){var V=C.bind(null,ie);return V.type=ie,V},rn.createRef=function(){return{current:null}},rn.forwardRef=function(ie){return{$$typeof:o,render:ie}},rn.isValidElement=L,rn.lazy=function(ie){return{$$typeof:h,_payload:{_status:-1,_result:ie},_init:Ge}},rn.memo=function(ie,V){return{$$typeof:u,type:ie,compare:V===void 0?null:V}},rn.startTransition=function(ie){var V=ce.transition;ce.transition={};try{ie()}finally{ce.transition=V}},rn.unstable_act=Te,rn.useCallback=function(ie,V){return ke.current.useCallback(ie,V)},rn.useContext=function(ie){return ke.current.useContext(ie)},rn.useDebugValue=function(){},rn.useDeferredValue=function(ie){return ke.current.useDeferredValue(ie)},rn.useEffect=function(ie,V){return ke.current.useEffect(ie,V)},rn.useId=function(){return ke.current.useId()},rn.useImperativeHandle=function(ie,V,J){return ke.current.useImperativeHandle(ie,V,J)},rn.useInsertionEffect=function(ie,V){return ke.current.useInsertionEffect(ie,V)},rn.useLayoutEffect=function(ie,V){return ke.current.useLayoutEffect(ie,V)},rn.useMemo=function(ie,V){return ke.current.useMemo(ie,V)},rn.useReducer=function(ie,V,J){return ke.current.useReducer(ie,V,J)},rn.useRef=function(ie){return ke.current.useRef(ie)},rn.useState=function(ie){return ke.current.useState(ie)},rn.useSyncExternalStore=function(ie,V,J){return ke.current.useSyncExternalStore(ie,V,J)},rn.useTransition=function(){return ke.current.useTransition()},rn.version="18.3.1",rn}var A4;function Dp(){return A4||(A4=1,y2.exports=EB()),y2.exports}var b4;function wB(){if(b4)return Mg;b4=1;var n=Dp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var h,f={},g=null,y=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(y=l.ref);for(h in l)r.call(l,h)&&!s.hasOwnProperty(h)&&(f[h]=l[h]);if(o&&o.defaultProps)for(h in l=o.defaultProps,l)f[h]===void 0&&(f[h]=l[h]);return{$$typeof:e,type:o,key:g,ref:y,props:f,_owner:i.current}}return Mg.Fragment=t,Mg.jsx=a,Mg.jsxs=a,Mg}var R4;function SB(){return R4||(R4=1,p2.exports=wB()),p2.exports}var p=SB(),Oy={},_2={exports:{}},ps={},x2={exports:{}},v2={};var C4;function TB(){return C4||(C4=1,(function(n){function e(ce,Ie){var Te=ce.length;ce.push(Ie);e:for(;0<Te;){var ie=Te-1>>>1,V=ce[ie];if(0<i(V,Ie))ce[ie]=Ie,ce[Te]=V,Te=ie;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var Ie=ce[0],Te=ce.pop();if(Te!==Ie){ce[0]=Te;e:for(var ie=0,V=ce.length,J=V>>>1;ie<J;){var te=2*(ie+1)-1,X=ce[te],ue=te+1,Me=ce[ue];if(0>i(X,Te))ue<V&&0>i(Me,X)?(ce[ie]=Me,ce[ue]=Te,ie=ue):(ce[ie]=X,ce[te]=Te,ie=te);else if(ue<V&&0>i(Me,Te))ce[ie]=Me,ce[ue]=Te,ie=ue;else break e}}return Ie}function i(ce,Ie){var Te=ce.sortIndex-Ie.sortIndex;return Te!==0?Te:ce.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,f=null,g=3,y=!1,v=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ce){for(var Ie=t(u);Ie!==null;){if(Ie.callback===null)r(u);else if(Ie.startTime<=ce)r(u),Ie.sortIndex=Ie.expirationTime,e(l,Ie);else break;Ie=t(u)}}function N(ce){if(x=!1,b(ce),!v)if(t(l)!==null)v=!0,Ge(F);else{var Ie=t(u);Ie!==null&&ke(N,Ie.startTime-ce)}}function F(ce,Ie){v=!1,x&&(x=!1,T(C),C=-1),y=!0;var Te=g;try{for(b(Ie),f=t(l);f!==null&&(!(f.expirationTime>Ie)||ce&&!O());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,g=f.priorityLevel;var V=ie(f.expirationTime<=Ie);Ie=n.unstable_now(),typeof V=="function"?f.callback=V:f===t(l)&&r(l),b(Ie)}else r(l);f=t(l)}if(f!==null)var J=!0;else{var te=t(u);te!==null&&ke(N,te.startTime-Ie),J=!1}return J}finally{f=null,g=Te,y=!1}}var W=!1,M=null,C=-1,P=5,L=-1;function O(){return!(n.unstable_now()-L<P)}function U(){if(M!==null){var ce=n.unstable_now();L=ce;var Ie=!0;try{Ie=M(!0,ce)}finally{Ie?j():(W=!1,M=null)}}else W=!1}var j;if(typeof I=="function")j=function(){I(U)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ce=xe.port2;xe.port1.onmessage=U,j=function(){Ce.postMessage(null)}}else j=function(){w(U,0)};function Ge(ce){M=ce,W||(W=!0,j())}function ke(ce,Ie){C=w(function(){ce(n.unstable_now())},Ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){v||y||(v=!0,Ge(F))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(ce){switch(g){case 1:case 2:case 3:var Ie=3;break;default:Ie=g}var Te=g;g=Ie;try{return ce()}finally{g=Te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,Ie){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Te=g;g=ce;try{return Ie()}finally{g=Te}},n.unstable_scheduleCallback=function(ce,Ie,Te){var ie=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?ie+Te:ie):Te=ie,ce){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Te+V,ce={id:h++,callback:Ie,priorityLevel:ce,startTime:Te,expirationTime:V,sortIndex:-1},Te>ie?(ce.sortIndex=Te,e(u,ce),t(l)===null&&ce===t(u)&&(x?(T(C),C=-1):x=!0,ke(N,Te-ie))):(ce.sortIndex=V,e(l,ce),v||y||(v=!0,Ge(F))),ce},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(ce){var Ie=g;return function(){var Te=g;g=Ie;try{return ce.apply(this,arguments)}finally{g=Te}}}})(v2)),v2}var P4;function IB(){return P4||(P4=1,x2.exports=TB()),x2.exports}var k4;function AB(){if(k4)return ps;k4=1;var n=Dp(),e=IB();function t(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(c,d){a(c,d),a(c+"Capture",d)}function a(c,d){for(i[c]=d,c=0;c<d.length;c++)r.add(d[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function g(c){return l.call(f,c)?!0:l.call(h,c)?!1:u.test(c)?f[c]=!0:(h[c]=!0,!1)}function y(c,d,m,E){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return E?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function v(c,d,m,E){if(d===null||typeof d>"u"||y(c,d,m,E))return!0;if(E)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function x(c,d,m,E,S,A,G){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=E,this.attributeNamespace=S,this.mustUseProperty=m,this.propertyName=c,this.type=d,this.sanitizeURL=A,this.removeEmptyString=G}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new x(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];w[d]=new x(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new x(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new x(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new x(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new x(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new x(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new x(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new x(c,5,!1,c.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function I(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(T,I);w[d]=new x(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(T,I);w[d]=new x(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(T,I);w[d]=new x(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new x(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new x(c,1,!1,c.toLowerCase(),null,!0,!0)});function b(c,d,m,E){var S=w.hasOwnProperty(d)?w[d]:null;(S!==null?S.type!==0:E||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(v(d,m,S,E)&&(m=null),E||S===null?g(d)&&(m===null?c.removeAttribute(d):c.setAttribute(d,""+m)):S.mustUseProperty?c[S.propertyName]=m===null?S.type===3?!1:"":m:(d=S.attributeName,E=S.attributeNamespace,m===null?c.removeAttribute(d):(S=S.type,m=S===3||S===4&&m===!0?"":""+m,E?c.setAttributeNS(E,d,m):c.setAttribute(d,m))))}var N=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),W=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),ce=Symbol.iterator;function Ie(c){return c===null||typeof c!="object"?null:(c=ce&&c[ce]||c["@@iterator"],typeof c=="function"?c:null)}var Te=Object.assign,ie;function V(c){if(ie===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);ie=d&&d[1]||""}return`
`+ie+c}var J=!1;function te(c,d){if(!c||J)return"";J=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ve){var E=ve}Reflect.construct(c,[],d)}else{try{d.call()}catch(ve){E=ve}c.call(d.prototype)}else{try{throw Error()}catch(ve){E=ve}c()}}catch(ve){if(ve&&E&&typeof ve.stack=="string"){for(var S=ve.stack.split(`
`),A=E.stack.split(`
`),G=S.length-1,ne=A.length-1;1<=G&&0<=ne&&S[G]!==A[ne];)ne--;for(;1<=G&&0<=ne;G--,ne--)if(S[G]!==A[ne]){if(G!==1||ne!==1)do if(G--,ne--,0>ne||S[G]!==A[ne]){var oe=`
`+S[G].replace(" at new "," at ");return c.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",c.displayName)),oe}while(1<=G&&0<=ne);break}}}finally{J=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?V(c):""}function X(c){switch(c.tag){case 5:return V(c.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return c=te(c.type,!1),c;case 11:return c=te(c.type.render,!1),c;case 1:return c=te(c.type,!0),c;default:return""}}function ue(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case M:return"Fragment";case W:return"Portal";case P:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case xe:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case O:return(c.displayName||"Context")+".Consumer";case L:return(c._context.displayName||"Context")+".Provider";case U:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Ce:return d=c.displayName||null,d!==null?d:ue(c.type)||"Memo";case Ge:d=c._payload,c=c._init;try{return ue(c(d))}catch{}}return null}function Me(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(d);case 8:return d===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Fe(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Le(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function je(c){var d=Le(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),E=""+c[d];if(!c.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,A=m.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return S.call(this)},set:function(G){E=""+G,A.call(this,G)}}),Object.defineProperty(c,d,{enumerable:m.enumerable}),{getValue:function(){return E},setValue:function(G){E=""+G},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function qt(c){c._valueTracker||(c._valueTracker=je(c))}function Ye(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),E="";return c&&(E=Le(c)?c.checked?"true":"false":c.value),c=E,c!==m?(d.setValue(c),!0):!1}function Zt(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Nt(c,d){var m=d.checked;return Te({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function at(c,d){var m=d.defaultValue==null?"":d.defaultValue,E=d.checked!=null?d.checked:d.defaultChecked;m=Fe(d.value!=null?d.value:m),c._wrapperState={initialChecked:E,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function yt(c,d){d=d.checked,d!=null&&b(c,"checked",d,!1)}function Oe(c,d){yt(c,d);var m=Fe(d.value),E=d.type;if(m!=null)E==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(E==="submit"||E==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?$t(c,d.type,m):d.hasOwnProperty("defaultValue")&&$t(c,d.type,Fe(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function bn(c,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var E=d.type;if(!(E!=="submit"&&E!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,m||d===c.value||(c.value=d),c.defaultValue=d}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function $t(c,d,m){(d!=="number"||Zt(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var Xt=Array.isArray;function It(c,d,m,E){if(c=c.options,d){d={};for(var S=0;S<m.length;S++)d["$"+m[S]]=!0;for(m=0;m<c.length;m++)S=d.hasOwnProperty("$"+c[m].value),c[m].selected!==S&&(c[m].selected=S),S&&E&&(c[m].defaultSelected=!0)}else{for(m=""+Fe(m),d=null,S=0;S<c.length;S++){if(c[S].value===m){c[S].selected=!0,E&&(c[S].defaultSelected=!0);return}d!==null||c[S].disabled||(d=c[S])}d!==null&&(d.selected=!0)}}function Rn(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Te({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Ae(c,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(t(92));if(Xt(m)){if(1<m.length)throw Error(t(93));m=m[0]}d=m}d==null&&(d=""),m=d}c._wrapperState={initialValue:Fe(m)}}function Ee(c,d){var m=Fe(d.value),E=Fe(d.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),d.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),E!=null&&(c.defaultValue=""+E)}function k(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function St(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Z(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?St(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var jt,re=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,E,S){MSApp.execUnsafeLocalFunction(function(){return c(d,m,E,S)})}:c})(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(jt=jt||document.createElement("div"),jt.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=jt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function z(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qe=["Webkit","ms","Moz","O"];Object.keys(ae).forEach(function(c){qe.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),ae[d]=ae[c]})});function we(c,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||ae.hasOwnProperty(c)&&ae[c]?(""+d).trim():d+"px"}function Je(c,d){c=c.style;for(var m in d)if(d.hasOwnProperty(m)){var E=m.indexOf("--")===0,S=we(m,d[m],E);m==="float"&&(m="cssFloat"),E?c.setProperty(m,S):c[m]=S}}var gt=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dt(c,d){if(d){if(gt[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function At(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=null;function tn(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Nr=null,$r=null,yn=null;function Yi(c){if(c=yg(c)){if(typeof Nr!="function")throw Error(t(280));var d=c.stateNode;d&&(d=q1(d),Nr(c.stateNode,c.type,d))}}function Xi(c){$r?yn?yn.push(c):yn=[c]:$r=c}function ar(){if($r){var c=$r,d=yn;if(yn=$r=null,Yi(c),d)for(c=0;c<d.length;c++)Yi(d[c])}}function cs(c,d){return c(d)}function Wr(){}var or=!1;function Hr(c,d,m){if(or)return c(d,m);or=!0;try{return cs(c,d,m)}finally{or=!1,($r!==null||yn!==null)&&(Wr(),ar())}}function Kr(c,d){var m=c.stateNode;if(m===null)return null;var E=q1(m);if(E===null)return null;m=E[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(c=c.type,E=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!E;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(t(231,d,typeof m));return m}var Lr=!1;if(o)try{var cn={};Object.defineProperty(cn,"passive",{get:function(){Lr=!0}}),window.addEventListener("test",cn,cn),window.removeEventListener("test",cn,cn)}catch{Lr=!1}function mr(c,d,m,E,S,A,G,ne,oe){var ve=Array.prototype.slice.call(arguments,3);try{d.apply(m,ve)}catch(ze){this.onError(ze)}}var Sr=!1,us=null,B=!1,q=null,K={onError:function(c){Sr=!0,us=c}};function Y(c,d,m,E,S,A,G,ne,oe){Sr=!1,us=null,mr.apply(K,arguments)}function Q(c,d,m,E,S,A,G,ne,oe){if(Y.apply(this,arguments),Sr){if(Sr){var ve=us;Sr=!1,us=null}else throw Error(t(198));B||(B=!0,q=ve)}}function ee(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function me(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function Re(c){if(ee(c)!==c)throw Error(t(188))}function ge(c){var d=c.alternate;if(!d){if(d=ee(c),d===null)throw Error(t(188));return d!==c?null:c}for(var m=c,E=d;;){var S=m.return;if(S===null)break;var A=S.alternate;if(A===null){if(E=S.return,E!==null){m=E;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===m)return Re(S),c;if(A===E)return Re(S),d;A=A.sibling}throw Error(t(188))}if(m.return!==E.return)m=S,E=A;else{for(var G=!1,ne=S.child;ne;){if(ne===m){G=!0,m=S,E=A;break}if(ne===E){G=!0,E=S,m=A;break}ne=ne.sibling}if(!G){for(ne=A.child;ne;){if(ne===m){G=!0,m=A,E=S;break}if(ne===E){G=!0,E=A,m=S;break}ne=ne.sibling}if(!G)throw Error(t(189))}}if(m.alternate!==E)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?c:d}function ye(c){return c=ge(c),c!==null?_e(c):null}function _e(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=_e(c);if(d!==null)return d;c=c.sibling}return null}var $e=e.unstable_scheduleCallback,et=e.unstable_cancelCallback,ht=e.unstable_shouldYield,We=e.unstable_requestPaint,He=e.unstable_now,Gt=e.unstable_getCurrentPriorityLevel,Cn=e.unstable_ImmediatePriority,Ln=e.unstable_UserBlockingPriority,nr=e.unstable_NormalPriority,Ra=e.unstable_LowPriority,ra=e.unstable_IdlePriority,Ns=null,Tr=null;function Ql(c){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Ns,c,void 0,(c.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:ku,lo=Math.log,ia=Math.LN2;function ku(c){return c>>>=0,c===0?32:31-(lo(c)/ia|0)|0}var co=64,Jl=4194304;function wn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function nl(c,d){var m=c.pendingLanes;if(m===0)return 0;var E=0,S=c.suspendedLanes,A=c.pingedLanes,G=m&268435455;if(G!==0){var ne=G&~S;ne!==0?E=wn(ne):(A&=G,A!==0&&(E=wn(A)))}else G=m&~S,G!==0?E=wn(G):A!==0&&(E=wn(A));if(E===0)return 0;if(d!==0&&d!==E&&(d&S)===0&&(S=E&-E,A=d&-d,S>=A||S===16&&(A&4194240)!==0))return d;if((E&4)!==0&&(E|=m&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=E;0<d;)m=31-lr(d),S=1<<m,E|=c[m],d&=~S;return E}function Mu(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nu(c,d){for(var m=c.suspendedLanes,E=c.pingedLanes,S=c.expirationTimes,A=c.pendingLanes;0<A;){var G=31-lr(A),ne=1<<G,oe=S[G];oe===-1?((ne&m)===0||(ne&E)!==0)&&(S[G]=Mu(ne,d)):oe<=d&&(c.expiredLanes|=ne),A&=~ne}}function q0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Z0(){var c=co;return co<<=1,(co&4194240)===0&&(co=64),c}function Q0(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function Lu(c,d,m){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-lr(d),c[d]=m}function YE(c,d){var m=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var E=c.eventTimes;for(c=c.expirationTimes;0<m;){var S=31-lr(m),A=1<<S;d[S]=0,E[S]=-1,c[S]=-1,m&=~A}}function J0(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var E=31-lr(m),S=1<<E;S&d|c[E]&d&&(c[E]|=d),m&=~S}}var un=0;function uo(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var eg,Ed,tg,ng,rg,ho=!1,wd=[],fo=null,go=null,gi=null,Ou=new Map,rl=new Map,Ls=[],L1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ec(c,d){switch(c){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Ou.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(d.pointerId)}}function Ca(c,d,m,E,S,A){return c===null||c.nativeEvent!==A?(c={blockedOn:d,domEventName:m,eventSystemFlags:E,nativeEvent:A,targetContainers:[S]},d!==null&&(d=yg(d),d!==null&&Ed(d)),c):(c.eventSystemFlags|=E,d=c.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),c)}function O1(c,d,m,E,S){switch(d){case"focusin":return fo=Ca(fo,c,d,m,E,S),!0;case"dragenter":return go=Ca(go,c,d,m,E,S),!0;case"mouseover":return gi=Ca(gi,c,d,m,E,S),!0;case"pointerover":var A=S.pointerId;return Ou.set(A,Ca(Ou.get(A)||null,c,d,m,E,S)),!0;case"gotpointercapture":return A=S.pointerId,rl.set(A,Ca(rl.get(A)||null,c,d,m,E,S)),!0}return!1}function Sd(c){var d=Vu(c.target);if(d!==null){var m=ee(d);if(m!==null){if(d=m.tag,d===13){if(d=me(m),d!==null){c.blockedOn=d,rg(c.priority,function(){tg(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Hn(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=Td(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var E=new m.constructor(m.type,m);Rt=E,m.target.dispatchEvent(E),Rt=null}else return d=yg(m),d!==null&&Ed(d),c.blockedOn=m,!1;d.shift()}return!0}function D1(c,d,m){Hn(c)&&m.delete(d)}function XE(){ho=!1,fo!==null&&Hn(fo)&&(fo=null),go!==null&&Hn(go)&&(go=null),gi!==null&&Hn(gi)&&(gi=null),Ou.forEach(D1),rl.forEach(D1)}function tc(c,d){c.blockedOn===d&&(c.blockedOn=null,ho||(ho=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,XE)))}function nc(c){function d(S){return tc(S,c)}if(0<wd.length){tc(wd[0],c);for(var m=1;m<wd.length;m++){var E=wd[m];E.blockedOn===c&&(E.blockedOn=null)}}for(fo!==null&&tc(fo,c),go!==null&&tc(go,c),gi!==null&&tc(gi,c),Ou.forEach(d),rl.forEach(d),m=0;m<Ls.length;m++)E=Ls[m],E.blockedOn===c&&(E.blockedOn=null);for(;0<Ls.length&&(m=Ls[0],m.blockedOn===null);)Sd(m),m.blockedOn===null&&Ls.shift()}var il=N.ReactCurrentBatchConfig,sl=!0;function mo(c,d,m,E){var S=un,A=il.transition;il.transition=null;try{un=1,ig(c,d,m,E)}finally{un=S,il.transition=A}}function F1(c,d,m,E){var S=un,A=il.transition;il.transition=null;try{un=4,ig(c,d,m,E)}finally{un=S,il.transition=A}}function ig(c,d,m,E){if(sl){var S=Td(c,d,m,E);if(S===null)aw(c,d,E,po,m),ec(c,E);else if(O1(S,c,d,m,E))E.stopPropagation();else if(ec(c,E),d&4&&-1<L1.indexOf(c)){for(;S!==null;){var A=yg(S);if(A!==null&&eg(A),A=Td(c,d,m,E),A===null&&aw(c,d,E,po,m),A===S)break;S=A}S!==null&&E.stopPropagation()}else aw(c,d,E,null,m)}}var po=null;function Td(c,d,m,E){if(po=null,c=tn(E),c=Vu(c),c!==null)if(d=ee(c),d===null)c=null;else if(m=d.tag,m===13){if(c=me(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return po=c,null}function Id(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gt()){case Cn:return 1;case Ln:return 4;case nr:case Ra:return 16;case ra:return 536870912;default:return 16}default:return 16}}var Os=null,Ad=null,al=null;function j1(){if(al)return al;var c,d=Ad,m=d.length,E,S="value"in Os?Os.value:Os.textContent,A=S.length;for(c=0;c<m&&d[c]===S[c];c++);var G=m-c;for(E=1;E<=G&&d[m-E]===S[A-E];E++);return al=S.slice(c,1<E?1-E:void 0)}function Du(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function yo(){return!0}function sg(){return!1}function Ci(c){function d(m,E,S,A,G){this._reactName=m,this._targetInst=S,this.type=E,this.nativeEvent=A,this.target=G,this.currentTarget=null;for(var ne in c)c.hasOwnProperty(ne)&&(m=c[ne],this[ne]=m?m(A):A[ne]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?yo:sg,this.isPropagationStopped=sg,this}return Te(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),d}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fu=Ci(_o),rc=Te({},_o,{view:0,detail:0}),bd=Ci(rc),Rd,Cd,Ds,ju=Te({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yt,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ds&&(Ds&&c.type==="mousemove"?(Rd=c.screenX-Ds.screenX,Cd=c.screenY-Ds.screenY):Cd=Rd=0,Ds=c),Rd)},movementY:function(c){return"movementY"in c?c.movementY:Cd}}),ag=Ci(ju),V1=Te({},ju,{dataTransfer:0}),G1=Ci(V1),Pd=Te({},rc,{relatedTarget:0}),mi=Ci(Pd),B1=Te({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),U1=Ci(B1),ic=Te({},_o,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_=Ci(ic),R=Te({},_o,{data:0}),D=Ci(R),H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Se={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rt(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Se[c])?!!d[c]:!1}function Yt(){return rt}var Ir=Te({},rc,{key:function(c){if(c.key){var d=H[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Du(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?fe[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yt,charCode:function(c){return c.type==="keypress"?Du(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Du(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),On=Ci(Ir),Or=Te({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fs=Ci(Or),ol=Te({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yt}),xo=Ci(ol),vo=Te({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),kd=Ci(vo),og=Te({},ju,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),mG=Ci(og),pG=[9,13,27,32],qE=o&&"CompositionEvent"in window,lg=null;o&&"documentMode"in document&&(lg=document.documentMode);var yG=o&&"TextEvent"in window&&!lg,yC=o&&(!qE||lg&&8<lg&&11>=lg),_C=" ",xC=!1;function vC(c,d){switch(c){case"keyup":return pG.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Md=!1;function _G(c,d){switch(c){case"compositionend":return EC(d);case"keypress":return d.which!==32?null:(xC=!0,_C);case"textInput":return c=d.data,c===_C&&xC?null:c;default:return null}}function xG(c,d){if(Md)return c==="compositionend"||!qE&&vC(c,d)?(c=j1(),al=Ad=Os=null,Md=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return yC&&d.locale!=="ko"?null:d.data;default:return null}}var vG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wC(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!vG[c.type]:d==="textarea"}function SC(c,d,m,E){Xi(E),d=K1(d,"onChange"),0<d.length&&(m=new Fu("onChange","change",null,m,E),c.push({event:m,listeners:d}))}var cg=null,ug=null;function EG(c){BC(c,0)}function z1(c){var d=Fd(c);if(Ye(d))return c}function wG(c,d){if(c==="change")return d}var TC=!1;if(o){var ZE;if(o){var QE="oninput"in document;if(!QE){var IC=document.createElement("div");IC.setAttribute("oninput","return;"),QE=typeof IC.oninput=="function"}ZE=QE}else ZE=!1;TC=ZE&&(!document.documentMode||9<document.documentMode)}function AC(){cg&&(cg.detachEvent("onpropertychange",bC),ug=cg=null)}function bC(c){if(c.propertyName==="value"&&z1(ug)){var d=[];SC(d,ug,c,tn(c)),Hr(EG,d)}}function SG(c,d,m){c==="focusin"?(AC(),cg=d,ug=m,cg.attachEvent("onpropertychange",bC)):c==="focusout"&&AC()}function TG(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return z1(ug)}function IG(c,d){if(c==="click")return z1(d)}function AG(c,d){if(c==="input"||c==="change")return z1(d)}function bG(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Pa=typeof Object.is=="function"?Object.is:bG;function hg(c,d){if(Pa(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),E=Object.keys(d);if(m.length!==E.length)return!1;for(E=0;E<m.length;E++){var S=m[E];if(!l.call(d,S)||!Pa(c[S],d[S]))return!1}return!0}function RC(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function CC(c,d){var m=RC(c);c=0;for(var E;m;){if(m.nodeType===3){if(E=c+m.textContent.length,c<=d&&E>=d)return{node:m,offset:d-c};c=E}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=RC(m)}}function PC(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?PC(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function kC(){for(var c=window,d=Zt();d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=Zt(c.document)}return d}function JE(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function RG(c){var d=kC(),m=c.focusedElem,E=c.selectionRange;if(d!==m&&m&&m.ownerDocument&&PC(m.ownerDocument.documentElement,m)){if(E!==null&&JE(m)){if(d=E.start,c=E.end,c===void 0&&(c=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(c,m.value.length);else if(c=(d=m.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var S=m.textContent.length,A=Math.min(E.start,S);E=E.end===void 0?A:Math.min(E.end,S),!c.extend&&A>E&&(S=E,E=A,A=S),S=CC(m,A);var G=CC(m,E);S&&G&&(c.rangeCount!==1||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==G.node||c.focusOffset!==G.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),c.removeAllRanges(),A>E?(c.addRange(d),c.extend(G.node,G.offset)):(d.setEnd(G.node,G.offset),c.addRange(d)))}}for(d=[],c=m;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)c=d[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var CG=o&&"documentMode"in document&&11>=document.documentMode,Nd=null,ew=null,dg=null,tw=!1;function MC(c,d,m){var E=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;tw||Nd==null||Nd!==Zt(E)||(E=Nd,"selectionStart"in E&&JE(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),dg&&hg(dg,E)||(dg=E,E=K1(ew,"onSelect"),0<E.length&&(d=new Fu("onSelect","select",null,d,m),c.push({event:d,listeners:E}),d.target=Nd)))}function $1(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var Ld={animationend:$1("Animation","AnimationEnd"),animationiteration:$1("Animation","AnimationIteration"),animationstart:$1("Animation","AnimationStart"),transitionend:$1("Transition","TransitionEnd")},nw={},NC={};o&&(NC=document.createElement("div").style,"AnimationEvent"in window||(delete Ld.animationend.animation,delete Ld.animationiteration.animation,delete Ld.animationstart.animation),"TransitionEvent"in window||delete Ld.transitionend.transition);function W1(c){if(nw[c])return nw[c];if(!Ld[c])return c;var d=Ld[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in NC)return nw[c]=d[m];return c}var LC=W1("animationend"),OC=W1("animationiteration"),DC=W1("animationstart"),FC=W1("transitionend"),jC=new Map,VC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sc(c,d){jC.set(c,d),s(d,[c])}for(var rw=0;rw<VC.length;rw++){var iw=VC[rw],PG=iw.toLowerCase(),kG=iw[0].toUpperCase()+iw.slice(1);sc(PG,"on"+kG)}sc(LC,"onAnimationEnd"),sc(OC,"onAnimationIteration"),sc(DC,"onAnimationStart"),sc("dblclick","onDoubleClick"),sc("focusin","onFocus"),sc("focusout","onBlur"),sc(FC,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MG=new Set("cancel close invalid load scroll toggle".split(" ").concat(fg));function GC(c,d,m){var E=c.type||"unknown-event";c.currentTarget=m,Q(E,d,void 0,c),c.currentTarget=null}function BC(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var E=c[m],S=E.event;E=E.listeners;e:{var A=void 0;if(d)for(var G=E.length-1;0<=G;G--){var ne=E[G],oe=ne.instance,ve=ne.currentTarget;if(ne=ne.listener,oe!==A&&S.isPropagationStopped())break e;GC(S,ne,ve),A=oe}else for(G=0;G<E.length;G++){if(ne=E[G],oe=ne.instance,ve=ne.currentTarget,ne=ne.listener,oe!==A&&S.isPropagationStopped())break e;GC(S,ne,ve),A=oe}}}if(B)throw c=q,B=!1,q=null,c}function qn(c,d){var m=d[dw];m===void 0&&(m=d[dw]=new Set);var E=c+"__bubble";m.has(E)||(UC(d,c,2,!1),m.add(E))}function sw(c,d,m){var E=0;d&&(E|=4),UC(m,c,E,d)}var H1="_reactListening"+Math.random().toString(36).slice(2);function gg(c){if(!c[H1]){c[H1]=!0,r.forEach(function(m){m!=="selectionchange"&&(MG.has(m)||sw(m,!1,c),sw(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[H1]||(d[H1]=!0,sw("selectionchange",!1,d))}}function UC(c,d,m,E){switch(Id(d)){case 1:var S=mo;break;case 4:S=F1;break;default:S=ig}m=S.bind(null,d,m,c),S=void 0,!Lr||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),E?S!==void 0?c.addEventListener(d,m,{capture:!0,passive:S}):c.addEventListener(d,m,!0):S!==void 0?c.addEventListener(d,m,{passive:S}):c.addEventListener(d,m,!1)}function aw(c,d,m,E,S){var A=E;if((d&1)===0&&(d&2)===0&&E!==null)e:for(;;){if(E===null)return;var G=E.tag;if(G===3||G===4){var ne=E.stateNode.containerInfo;if(ne===S||ne.nodeType===8&&ne.parentNode===S)break;if(G===4)for(G=E.return;G!==null;){var oe=G.tag;if((oe===3||oe===4)&&(oe=G.stateNode.containerInfo,oe===S||oe.nodeType===8&&oe.parentNode===S))return;G=G.return}for(;ne!==null;){if(G=Vu(ne),G===null)return;if(oe=G.tag,oe===5||oe===6){E=A=G;continue e}ne=ne.parentNode}}E=E.return}Hr(function(){var ve=A,ze=tn(m),Ke=[];e:{var Be=jC.get(c);if(Be!==void 0){var mt=Fu,vt=c;switch(c){case"keypress":if(Du(m)===0)break e;case"keydown":case"keyup":mt=On;break;case"focusin":vt="focus",mt=mi;break;case"focusout":vt="blur",mt=mi;break;case"beforeblur":case"afterblur":mt=mi;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=G1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=xo;break;case LC:case OC:case DC:mt=U1;break;case FC:mt=kd;break;case"scroll":mt=bd;break;case"wheel":mt=mG;break;case"copy":case"cut":case"paste":mt=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Fs}var wt=(d&4)!==0,Ar=!wt&&c==="scroll",de=wt?Be!==null?Be+"Capture":null:Be;wt=[];for(var le=ve,pe;le!==null;){pe=le;var Qe=pe.stateNode;if(pe.tag===5&&Qe!==null&&(pe=Qe,de!==null&&(Qe=Kr(le,de),Qe!=null&&wt.push(mg(le,Qe,pe)))),Ar)break;le=le.return}0<wt.length&&(Be=new mt(Be,vt,null,m,ze),Ke.push({event:Be,listeners:wt}))}}if((d&7)===0){e:{if(Be=c==="mouseover"||c==="pointerover",mt=c==="mouseout"||c==="pointerout",Be&&m!==Rt&&(vt=m.relatedTarget||m.fromElement)&&(Vu(vt)||vt[ll]))break e;if((mt||Be)&&(Be=ze.window===ze?ze:(Be=ze.ownerDocument)?Be.defaultView||Be.parentWindow:window,mt?(vt=m.relatedTarget||m.toElement,mt=ve,vt=vt?Vu(vt):null,vt!==null&&(Ar=ee(vt),vt!==Ar||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(mt=null,vt=ve),mt!==vt)){if(wt=ag,Qe="onMouseLeave",de="onMouseEnter",le="mouse",(c==="pointerout"||c==="pointerover")&&(wt=Fs,Qe="onPointerLeave",de="onPointerEnter",le="pointer"),Ar=mt==null?Be:Fd(mt),pe=vt==null?Be:Fd(vt),Be=new wt(Qe,le+"leave",mt,m,ze),Be.target=Ar,Be.relatedTarget=pe,Qe=null,Vu(ze)===ve&&(wt=new wt(de,le+"enter",vt,m,ze),wt.target=pe,wt.relatedTarget=Ar,Qe=wt),Ar=Qe,mt&&vt)t:{for(wt=mt,de=vt,le=0,pe=wt;pe;pe=Od(pe))le++;for(pe=0,Qe=de;Qe;Qe=Od(Qe))pe++;for(;0<le-pe;)wt=Od(wt),le--;for(;0<pe-le;)de=Od(de),pe--;for(;le--;){if(wt===de||de!==null&&wt===de.alternate)break t;wt=Od(wt),de=Od(de)}wt=null}else wt=null;mt!==null&&zC(Ke,Be,mt,wt,!1),vt!==null&&Ar!==null&&zC(Ke,Ar,vt,wt,!0)}}e:{if(Be=ve?Fd(ve):window,mt=Be.nodeName&&Be.nodeName.toLowerCase(),mt==="select"||mt==="input"&&Be.type==="file")var bt=wG;else if(wC(Be))if(TC)bt=AG;else{bt=TG;var Lt=SG}else(mt=Be.nodeName)&&mt.toLowerCase()==="input"&&(Be.type==="checkbox"||Be.type==="radio")&&(bt=IG);if(bt&&(bt=bt(c,ve))){SC(Ke,bt,m,ze);break e}Lt&&Lt(c,Be,ve),c==="focusout"&&(Lt=Be._wrapperState)&&Lt.controlled&&Be.type==="number"&&$t(Be,"number",Be.value)}switch(Lt=ve?Fd(ve):window,c){case"focusin":(wC(Lt)||Lt.contentEditable==="true")&&(Nd=Lt,ew=ve,dg=null);break;case"focusout":dg=ew=Nd=null;break;case"mousedown":tw=!0;break;case"contextmenu":case"mouseup":case"dragend":tw=!1,MC(Ke,m,ze);break;case"selectionchange":if(CG)break;case"keydown":case"keyup":MC(Ke,m,ze)}var Ot;if(qE)e:{switch(c){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else Md?vC(c,m)&&(Bt="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Bt="onCompositionStart");Bt&&(yC&&m.locale!=="ko"&&(Md||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Md&&(Ot=j1()):(Os=ze,Ad="value"in Os?Os.value:Os.textContent,Md=!0)),Lt=K1(ve,Bt),0<Lt.length&&(Bt=new D(Bt,c,null,m,ze),Ke.push({event:Bt,listeners:Lt}),Ot?Bt.data=Ot:(Ot=EC(m),Ot!==null&&(Bt.data=Ot)))),(Ot=yG?_G(c,m):xG(c,m))&&(ve=K1(ve,"onBeforeInput"),0<ve.length&&(ze=new D("onBeforeInput","beforeinput",null,m,ze),Ke.push({event:ze,listeners:ve}),ze.data=Ot))}BC(Ke,d)})}function mg(c,d,m){return{instance:c,listener:d,currentTarget:m}}function K1(c,d){for(var m=d+"Capture",E=[];c!==null;){var S=c,A=S.stateNode;S.tag===5&&A!==null&&(S=A,A=Kr(c,m),A!=null&&E.unshift(mg(c,A,S)),A=Kr(c,d),A!=null&&E.push(mg(c,A,S))),c=c.return}return E}function Od(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function zC(c,d,m,E,S){for(var A=d._reactName,G=[];m!==null&&m!==E;){var ne=m,oe=ne.alternate,ve=ne.stateNode;if(oe!==null&&oe===E)break;ne.tag===5&&ve!==null&&(ne=ve,S?(oe=Kr(m,A),oe!=null&&G.unshift(mg(m,oe,ne))):S||(oe=Kr(m,A),oe!=null&&G.push(mg(m,oe,ne)))),m=m.return}G.length!==0&&c.push({event:d,listeners:G})}var NG=/\r\n?/g,LG=/\u0000|\uFFFD/g;function $C(c){return(typeof c=="string"?c:""+c).replace(NG,`
`).replace(LG,"")}function Y1(c,d,m){if(d=$C(d),$C(c)!==d&&m)throw Error(t(425))}function X1(){}var ow=null,lw=null;function cw(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var uw=typeof setTimeout=="function"?setTimeout:void 0,OG=typeof clearTimeout=="function"?clearTimeout:void 0,WC=typeof Promise=="function"?Promise:void 0,DG=typeof queueMicrotask=="function"?queueMicrotask:typeof WC<"u"?function(c){return WC.resolve(null).then(c).catch(FG)}:uw;function FG(c){setTimeout(function(){throw c})}function hw(c,d){var m=d,E=0;do{var S=m.nextSibling;if(c.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(E===0){c.removeChild(S),nc(d);return}E--}else m!=="$"&&m!=="$?"&&m!=="$!"||E++;m=S}while(m);nc(d)}function ac(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function HC(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return c;d--}else m==="/$"&&d++}c=c.previousSibling}return null}var Dd=Math.random().toString(36).slice(2),Eo="__reactFiber$"+Dd,pg="__reactProps$"+Dd,ll="__reactContainer$"+Dd,dw="__reactEvents$"+Dd,jG="__reactListeners$"+Dd,VG="__reactHandles$"+Dd;function Vu(c){var d=c[Eo];if(d)return d;for(var m=c.parentNode;m;){if(d=m[ll]||m[Eo]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=HC(c);c!==null;){if(m=c[Eo])return m;c=HC(c)}return d}c=m,m=c.parentNode}return null}function yg(c){return c=c[Eo]||c[ll],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Fd(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function q1(c){return c[pg]||null}var fw=[],jd=-1;function oc(c){return{current:c}}function Zn(c){0>jd||(c.current=fw[jd],fw[jd]=null,jd--)}function Yn(c,d){jd++,fw[jd]=c.current,c.current=d}var lc={},Pi=oc(lc),hs=oc(!1),Gu=lc;function Vd(c,d){var m=c.type.contextTypes;if(!m)return lc;var E=c.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===d)return E.__reactInternalMemoizedMaskedChildContext;var S={},A;for(A in m)S[A]=d[A];return E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=S),S}function ds(c){return c=c.childContextTypes,c!=null}function Z1(){Zn(hs),Zn(Pi)}function KC(c,d,m){if(Pi.current!==lc)throw Error(t(168));Yn(Pi,d),Yn(hs,m)}function YC(c,d,m){var E=c.stateNode;if(d=d.childContextTypes,typeof E.getChildContext!="function")return m;E=E.getChildContext();for(var S in E)if(!(S in d))throw Error(t(108,Me(c)||"Unknown",S));return Te({},m,E)}function Q1(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||lc,Gu=Pi.current,Yn(Pi,c),Yn(hs,hs.current),!0}function XC(c,d,m){var E=c.stateNode;if(!E)throw Error(t(169));m?(c=YC(c,d,Gu),E.__reactInternalMemoizedMergedChildContext=c,Zn(hs),Zn(Pi),Yn(Pi,c)):Zn(hs),Yn(hs,m)}var cl=null,J1=!1,gw=!1;function qC(c){cl===null?cl=[c]:cl.push(c)}function GG(c){J1=!0,qC(c)}function cc(){if(!gw&&cl!==null){gw=!0;var c=0,d=un;try{var m=cl;for(un=1;c<m.length;c++){var E=m[c];do E=E(!0);while(E!==null)}cl=null,J1=!1}catch(S){throw cl!==null&&(cl=cl.slice(c+1)),$e(Cn,cc),S}finally{un=d,gw=!1}}return null}var Gd=[],Bd=0,ey=null,ty=0,sa=[],aa=0,Bu=null,ul=1,hl="";function Uu(c,d){Gd[Bd++]=ty,Gd[Bd++]=ey,ey=c,ty=d}function ZC(c,d,m){sa[aa++]=ul,sa[aa++]=hl,sa[aa++]=Bu,Bu=c;var E=ul;c=hl;var S=32-lr(E)-1;E&=~(1<<S),m+=1;var A=32-lr(d)+S;if(30<A){var G=S-S%5;A=(E&(1<<G)-1).toString(32),E>>=G,S-=G,ul=1<<32-lr(d)+S|m<<S|E,hl=A+c}else ul=1<<A|m<<S|E,hl=c}function mw(c){c.return!==null&&(Uu(c,1),ZC(c,1,0))}function pw(c){for(;c===ey;)ey=Gd[--Bd],Gd[Bd]=null,ty=Gd[--Bd],Gd[Bd]=null;for(;c===Bu;)Bu=sa[--aa],sa[aa]=null,hl=sa[--aa],sa[aa]=null,ul=sa[--aa],sa[aa]=null}var js=null,Vs=null,rr=!1,ka=null;function QC(c,d){var m=ua(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=c,d=c.deletions,d===null?(c.deletions=[m],c.flags|=16):d.push(m)}function JC(c,d){switch(c.tag){case 5:var m=c.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,js=c,Vs=ac(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,js=c,Vs=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=Bu!==null?{id:ul,overflow:hl}:null,c.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=ua(18,null,null,0),m.stateNode=d,m.return=c,c.child=m,js=c,Vs=null,!0):!1;default:return!1}}function yw(c){return(c.mode&1)!==0&&(c.flags&128)===0}function _w(c){if(rr){var d=Vs;if(d){var m=d;if(!JC(c,d)){if(yw(c))throw Error(t(418));d=ac(m.nextSibling);var E=js;d&&JC(c,d)?QC(E,m):(c.flags=c.flags&-4097|2,rr=!1,js=c)}}else{if(yw(c))throw Error(t(418));c.flags=c.flags&-4097|2,rr=!1,js=c}}}function eP(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;js=c}function ny(c){if(c!==js)return!1;if(!rr)return eP(c),rr=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!cw(c.type,c.memoizedProps)),d&&(d=Vs)){if(yw(c))throw tP(),Error(t(418));for(;d;)QC(c,d),d=ac(d.nextSibling)}if(eP(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(d===0){Vs=ac(c.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}c=c.nextSibling}Vs=null}}else Vs=js?ac(c.stateNode.nextSibling):null;return!0}function tP(){for(var c=Vs;c;)c=ac(c.nextSibling)}function Ud(){Vs=js=null,rr=!1}function xw(c){ka===null?ka=[c]:ka.push(c)}var BG=N.ReactCurrentBatchConfig;function _g(c,d,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var E=m.stateNode}if(!E)throw Error(t(147,c));var S=E,A=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===A?d.ref:(d=function(G){var ne=S.refs;G===null?delete ne[A]:ne[A]=G},d._stringRef=A,d)}if(typeof c!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,c))}return c}function ry(c,d){throw c=Object.prototype.toString.call(d),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function nP(c){var d=c._init;return d(c._payload)}function rP(c){function d(de,le){if(c){var pe=de.deletions;pe===null?(de.deletions=[le],de.flags|=16):pe.push(le)}}function m(de,le){if(!c)return null;for(;le!==null;)d(de,le),le=le.sibling;return null}function E(de,le){for(de=new Map;le!==null;)le.key!==null?de.set(le.key,le):de.set(le.index,le),le=le.sibling;return de}function S(de,le){return de=yc(de,le),de.index=0,de.sibling=null,de}function A(de,le,pe){return de.index=pe,c?(pe=de.alternate,pe!==null?(pe=pe.index,pe<le?(de.flags|=2,le):pe):(de.flags|=2,le)):(de.flags|=1048576,le)}function G(de){return c&&de.alternate===null&&(de.flags|=2),de}function ne(de,le,pe,Qe){return le===null||le.tag!==6?(le=u2(pe,de.mode,Qe),le.return=de,le):(le=S(le,pe),le.return=de,le)}function oe(de,le,pe,Qe){var bt=pe.type;return bt===M?ze(de,le,pe.props.children,Qe,pe.key):le!==null&&(le.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===Ge&&nP(bt)===le.type)?(Qe=S(le,pe.props),Qe.ref=_g(de,le,pe),Qe.return=de,Qe):(Qe=by(pe.type,pe.key,pe.props,null,de.mode,Qe),Qe.ref=_g(de,le,pe),Qe.return=de,Qe)}function ve(de,le,pe,Qe){return le===null||le.tag!==4||le.stateNode.containerInfo!==pe.containerInfo||le.stateNode.implementation!==pe.implementation?(le=h2(pe,de.mode,Qe),le.return=de,le):(le=S(le,pe.children||[]),le.return=de,le)}function ze(de,le,pe,Qe,bt){return le===null||le.tag!==7?(le=qu(pe,de.mode,Qe,bt),le.return=de,le):(le=S(le,pe),le.return=de,le)}function Ke(de,le,pe){if(typeof le=="string"&&le!==""||typeof le=="number")return le=u2(""+le,de.mode,pe),le.return=de,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case F:return pe=by(le.type,le.key,le.props,null,de.mode,pe),pe.ref=_g(de,null,le),pe.return=de,pe;case W:return le=h2(le,de.mode,pe),le.return=de,le;case Ge:var Qe=le._init;return Ke(de,Qe(le._payload),pe)}if(Xt(le)||Ie(le))return le=qu(le,de.mode,pe,null),le.return=de,le;ry(de,le)}return null}function Be(de,le,pe,Qe){var bt=le!==null?le.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return bt!==null?null:ne(de,le,""+pe,Qe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case F:return pe.key===bt?oe(de,le,pe,Qe):null;case W:return pe.key===bt?ve(de,le,pe,Qe):null;case Ge:return bt=pe._init,Be(de,le,bt(pe._payload),Qe)}if(Xt(pe)||Ie(pe))return bt!==null?null:ze(de,le,pe,Qe,null);ry(de,pe)}return null}function mt(de,le,pe,Qe,bt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return de=de.get(pe)||null,ne(le,de,""+Qe,bt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case F:return de=de.get(Qe.key===null?pe:Qe.key)||null,oe(le,de,Qe,bt);case W:return de=de.get(Qe.key===null?pe:Qe.key)||null,ve(le,de,Qe,bt);case Ge:var Lt=Qe._init;return mt(de,le,pe,Lt(Qe._payload),bt)}if(Xt(Qe)||Ie(Qe))return de=de.get(pe)||null,ze(le,de,Qe,bt,null);ry(le,Qe)}return null}function vt(de,le,pe,Qe){for(var bt=null,Lt=null,Ot=le,Bt=le=0,ii=null;Ot!==null&&Bt<pe.length;Bt++){Ot.index>Bt?(ii=Ot,Ot=null):ii=Ot.sibling;var _n=Be(de,Ot,pe[Bt],Qe);if(_n===null){Ot===null&&(Ot=ii);break}c&&Ot&&_n.alternate===null&&d(de,Ot),le=A(_n,le,Bt),Lt===null?bt=_n:Lt.sibling=_n,Lt=_n,Ot=ii}if(Bt===pe.length)return m(de,Ot),rr&&Uu(de,Bt),bt;if(Ot===null){for(;Bt<pe.length;Bt++)Ot=Ke(de,pe[Bt],Qe),Ot!==null&&(le=A(Ot,le,Bt),Lt===null?bt=Ot:Lt.sibling=Ot,Lt=Ot);return rr&&Uu(de,Bt),bt}for(Ot=E(de,Ot);Bt<pe.length;Bt++)ii=mt(Ot,de,Bt,pe[Bt],Qe),ii!==null&&(c&&ii.alternate!==null&&Ot.delete(ii.key===null?Bt:ii.key),le=A(ii,le,Bt),Lt===null?bt=ii:Lt.sibling=ii,Lt=ii);return c&&Ot.forEach(function(_c){return d(de,_c)}),rr&&Uu(de,Bt),bt}function wt(de,le,pe,Qe){var bt=Ie(pe);if(typeof bt!="function")throw Error(t(150));if(pe=bt.call(pe),pe==null)throw Error(t(151));for(var Lt=bt=null,Ot=le,Bt=le=0,ii=null,_n=pe.next();Ot!==null&&!_n.done;Bt++,_n=pe.next()){Ot.index>Bt?(ii=Ot,Ot=null):ii=Ot.sibling;var _c=Be(de,Ot,_n.value,Qe);if(_c===null){Ot===null&&(Ot=ii);break}c&&Ot&&_c.alternate===null&&d(de,Ot),le=A(_c,le,Bt),Lt===null?bt=_c:Lt.sibling=_c,Lt=_c,Ot=ii}if(_n.done)return m(de,Ot),rr&&Uu(de,Bt),bt;if(Ot===null){for(;!_n.done;Bt++,_n=pe.next())_n=Ke(de,_n.value,Qe),_n!==null&&(le=A(_n,le,Bt),Lt===null?bt=_n:Lt.sibling=_n,Lt=_n);return rr&&Uu(de,Bt),bt}for(Ot=E(de,Ot);!_n.done;Bt++,_n=pe.next())_n=mt(Ot,de,Bt,_n.value,Qe),_n!==null&&(c&&_n.alternate!==null&&Ot.delete(_n.key===null?Bt:_n.key),le=A(_n,le,Bt),Lt===null?bt=_n:Lt.sibling=_n,Lt=_n);return c&&Ot.forEach(function(vB){return d(de,vB)}),rr&&Uu(de,Bt),bt}function Ar(de,le,pe,Qe){if(typeof pe=="object"&&pe!==null&&pe.type===M&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case F:e:{for(var bt=pe.key,Lt=le;Lt!==null;){if(Lt.key===bt){if(bt=pe.type,bt===M){if(Lt.tag===7){m(de,Lt.sibling),le=S(Lt,pe.props.children),le.return=de,de=le;break e}}else if(Lt.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===Ge&&nP(bt)===Lt.type){m(de,Lt.sibling),le=S(Lt,pe.props),le.ref=_g(de,Lt,pe),le.return=de,de=le;break e}m(de,Lt);break}else d(de,Lt);Lt=Lt.sibling}pe.type===M?(le=qu(pe.props.children,de.mode,Qe,pe.key),le.return=de,de=le):(Qe=by(pe.type,pe.key,pe.props,null,de.mode,Qe),Qe.ref=_g(de,le,pe),Qe.return=de,de=Qe)}return G(de);case W:e:{for(Lt=pe.key;le!==null;){if(le.key===Lt)if(le.tag===4&&le.stateNode.containerInfo===pe.containerInfo&&le.stateNode.implementation===pe.implementation){m(de,le.sibling),le=S(le,pe.children||[]),le.return=de,de=le;break e}else{m(de,le);break}else d(de,le);le=le.sibling}le=h2(pe,de.mode,Qe),le.return=de,de=le}return G(de);case Ge:return Lt=pe._init,Ar(de,le,Lt(pe._payload),Qe)}if(Xt(pe))return vt(de,le,pe,Qe);if(Ie(pe))return wt(de,le,pe,Qe);ry(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,le!==null&&le.tag===6?(m(de,le.sibling),le=S(le,pe),le.return=de,de=le):(m(de,le),le=u2(pe,de.mode,Qe),le.return=de,de=le),G(de)):m(de,le)}return Ar}var zd=rP(!0),iP=rP(!1),iy=oc(null),sy=null,$d=null,vw=null;function Ew(){vw=$d=sy=null}function ww(c){var d=iy.current;Zn(iy),c._currentValue=d}function Sw(c,d,m){for(;c!==null;){var E=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),c===m)break;c=c.return}}function Wd(c,d){sy=c,vw=$d=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(fs=!0),c.firstContext=null)}function oa(c){var d=c._currentValue;if(vw!==c)if(c={context:c,memoizedValue:d,next:null},$d===null){if(sy===null)throw Error(t(308));$d=c,sy.dependencies={lanes:0,firstContext:c}}else $d=$d.next=c;return d}var zu=null;function Tw(c){zu===null?zu=[c]:zu.push(c)}function sP(c,d,m,E){var S=d.interleaved;return S===null?(m.next=m,Tw(d)):(m.next=S.next,S.next=m),d.interleaved=m,dl(c,E)}function dl(c,d){c.lanes|=d;var m=c.alternate;for(m!==null&&(m.lanes|=d),m=c,c=c.return;c!==null;)c.childLanes|=d,m=c.alternate,m!==null&&(m.childLanes|=d),m=c,c=c.return;return m.tag===3?m.stateNode:null}var uc=!1;function Iw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aP(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function fl(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function hc(c,d,m){var E=c.updateQueue;if(E===null)return null;if(E=E.shared,(gn&2)!==0){var S=E.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),E.pending=d,dl(c,m)}return S=E.interleaved,S===null?(d.next=d,Tw(E)):(d.next=S.next,S.next=d),E.interleaved=d,dl(c,m)}function ay(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var E=d.lanes;E&=c.pendingLanes,m|=E,d.lanes=m,J0(c,m)}}function oP(c,d){var m=c.updateQueue,E=c.alternate;if(E!==null&&(E=E.updateQueue,m===E)){var S=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var G={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?S=A=G:A=A.next=G,m=m.next}while(m!==null);A===null?S=A=d:A=A.next=d}else S=A=d;m={baseState:E.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:E.shared,effects:E.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}function oy(c,d,m,E){var S=c.updateQueue;uc=!1;var A=S.firstBaseUpdate,G=S.lastBaseUpdate,ne=S.shared.pending;if(ne!==null){S.shared.pending=null;var oe=ne,ve=oe.next;oe.next=null,G===null?A=ve:G.next=ve,G=oe;var ze=c.alternate;ze!==null&&(ze=ze.updateQueue,ne=ze.lastBaseUpdate,ne!==G&&(ne===null?ze.firstBaseUpdate=ve:ne.next=ve,ze.lastBaseUpdate=oe))}if(A!==null){var Ke=S.baseState;G=0,ze=ve=oe=null,ne=A;do{var Be=ne.lane,mt=ne.eventTime;if((E&Be)===Be){ze!==null&&(ze=ze.next={eventTime:mt,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var vt=c,wt=ne;switch(Be=d,mt=m,wt.tag){case 1:if(vt=wt.payload,typeof vt=="function"){Ke=vt.call(mt,Ke,Be);break e}Ke=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=wt.payload,Be=typeof vt=="function"?vt.call(mt,Ke,Be):vt,Be==null)break e;Ke=Te({},Ke,Be);break e;case 2:uc=!0}}ne.callback!==null&&ne.lane!==0&&(c.flags|=64,Be=S.effects,Be===null?S.effects=[ne]:Be.push(ne))}else mt={eventTime:mt,lane:Be,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},ze===null?(ve=ze=mt,oe=Ke):ze=ze.next=mt,G|=Be;if(ne=ne.next,ne===null){if(ne=S.shared.pending,ne===null)break;Be=ne,ne=Be.next,Be.next=null,S.lastBaseUpdate=Be,S.shared.pending=null}}while(!0);if(ze===null&&(oe=Ke),S.baseState=oe,S.firstBaseUpdate=ve,S.lastBaseUpdate=ze,d=S.shared.interleaved,d!==null){S=d;do G|=S.lane,S=S.next;while(S!==d)}else A===null&&(S.shared.lanes=0);Hu|=G,c.lanes=G,c.memoizedState=Ke}}function lP(c,d,m){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var E=c[d],S=E.callback;if(S!==null){if(E.callback=null,E=m,typeof S!="function")throw Error(t(191,S));S.call(E)}}}var xg={},wo=oc(xg),vg=oc(xg),Eg=oc(xg);function $u(c){if(c===xg)throw Error(t(174));return c}function Aw(c,d){switch(Yn(Eg,d),Yn(vg,c),Yn(wo,xg),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Z(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=Z(d,c)}Zn(wo),Yn(wo,d)}function Hd(){Zn(wo),Zn(vg),Zn(Eg)}function cP(c){$u(Eg.current);var d=$u(wo.current),m=Z(d,c.type);d!==m&&(Yn(vg,c),Yn(wo,m))}function bw(c){vg.current===c&&(Zn(wo),Zn(vg))}var cr=oc(0);function ly(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Rw=[];function Cw(){for(var c=0;c<Rw.length;c++)Rw[c]._workInProgressVersionPrimary=null;Rw.length=0}var cy=N.ReactCurrentDispatcher,Pw=N.ReactCurrentBatchConfig,Wu=0,ur=null,Yr=null,ni=null,uy=!1,wg=!1,Sg=0,UG=0;function ki(){throw Error(t(321))}function kw(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!Pa(c[m],d[m]))return!1;return!0}function Mw(c,d,m,E,S,A){if(Wu=A,ur=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,cy.current=c===null||c.memoizedState===null?HG:KG,c=m(E,S),wg){A=0;do{if(wg=!1,Sg=0,25<=A)throw Error(t(301));A+=1,ni=Yr=null,d.updateQueue=null,cy.current=YG,c=m(E,S)}while(wg)}if(cy.current=fy,d=Yr!==null&&Yr.next!==null,Wu=0,ni=Yr=ur=null,uy=!1,d)throw Error(t(300));return c}function Nw(){var c=Sg!==0;return Sg=0,c}function So(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ni===null?ur.memoizedState=ni=c:ni=ni.next=c,ni}function la(){if(Yr===null){var c=ur.alternate;c=c!==null?c.memoizedState:null}else c=Yr.next;var d=ni===null?ur.memoizedState:ni.next;if(d!==null)ni=d,Yr=c;else{if(c===null)throw Error(t(310));Yr=c,c={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},ni===null?ur.memoizedState=ni=c:ni=ni.next=c}return ni}function Tg(c,d){return typeof d=="function"?d(c):d}function Lw(c){var d=la(),m=d.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var E=Yr,S=E.baseQueue,A=m.pending;if(A!==null){if(S!==null){var G=S.next;S.next=A.next,A.next=G}E.baseQueue=S=A,m.pending=null}if(S!==null){A=S.next,E=E.baseState;var ne=G=null,oe=null,ve=A;do{var ze=ve.lane;if((Wu&ze)===ze)oe!==null&&(oe=oe.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),E=ve.hasEagerState?ve.eagerState:c(E,ve.action);else{var Ke={lane:ze,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};oe===null?(ne=oe=Ke,G=E):oe=oe.next=Ke,ur.lanes|=ze,Hu|=ze}ve=ve.next}while(ve!==null&&ve!==A);oe===null?G=E:oe.next=ne,Pa(E,d.memoizedState)||(fs=!0),d.memoizedState=E,d.baseState=G,d.baseQueue=oe,m.lastRenderedState=E}if(c=m.interleaved,c!==null){S=c;do A=S.lane,ur.lanes|=A,Hu|=A,S=S.next;while(S!==c)}else S===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function Ow(c){var d=la(),m=d.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var E=m.dispatch,S=m.pending,A=d.memoizedState;if(S!==null){m.pending=null;var G=S=S.next;do A=c(A,G.action),G=G.next;while(G!==S);Pa(A,d.memoizedState)||(fs=!0),d.memoizedState=A,d.baseQueue===null&&(d.baseState=A),m.lastRenderedState=A}return[A,E]}function uP(){}function hP(c,d){var m=ur,E=la(),S=d(),A=!Pa(E.memoizedState,S);if(A&&(E.memoizedState=S,fs=!0),E=E.queue,Dw(gP.bind(null,m,E,c),[c]),E.getSnapshot!==d||A||ni!==null&&ni.memoizedState.tag&1){if(m.flags|=2048,Ig(9,fP.bind(null,m,E,S,d),void 0,null),ri===null)throw Error(t(349));(Wu&30)!==0||dP(m,d,S)}return S}function dP(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=ur.updateQueue,d===null?(d={lastEffect:null,stores:null},ur.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function fP(c,d,m,E){d.value=m,d.getSnapshot=E,mP(d)&&pP(c)}function gP(c,d,m){return m(function(){mP(d)&&pP(c)})}function mP(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!Pa(c,m)}catch{return!0}}function pP(c){var d=dl(c,1);d!==null&&Oa(d,c,1,-1)}function yP(c){var d=So();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tg,lastRenderedState:c},d.queue=c,c=c.dispatch=WG.bind(null,ur,c),[d.memoizedState,c]}function Ig(c,d,m,E){return c={tag:c,create:d,destroy:m,deps:E,next:null},d=ur.updateQueue,d===null?(d={lastEffect:null,stores:null},ur.updateQueue=d,d.lastEffect=c.next=c):(m=d.lastEffect,m===null?d.lastEffect=c.next=c:(E=m.next,m.next=c,c.next=E,d.lastEffect=c)),c}function _P(){return la().memoizedState}function hy(c,d,m,E){var S=So();ur.flags|=c,S.memoizedState=Ig(1|d,m,void 0,E===void 0?null:E)}function dy(c,d,m,E){var S=la();E=E===void 0?null:E;var A=void 0;if(Yr!==null){var G=Yr.memoizedState;if(A=G.destroy,E!==null&&kw(E,G.deps)){S.memoizedState=Ig(d,m,A,E);return}}ur.flags|=c,S.memoizedState=Ig(1|d,m,A,E)}function xP(c,d){return hy(8390656,8,c,d)}function Dw(c,d){return dy(2048,8,c,d)}function vP(c,d){return dy(4,2,c,d)}function EP(c,d){return dy(4,4,c,d)}function wP(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function SP(c,d,m){return m=m!=null?m.concat([c]):null,dy(4,4,wP.bind(null,d,c),m)}function Fw(){}function TP(c,d){var m=la();d=d===void 0?null:d;var E=m.memoizedState;return E!==null&&d!==null&&kw(d,E[1])?E[0]:(m.memoizedState=[c,d],c)}function IP(c,d){var m=la();d=d===void 0?null:d;var E=m.memoizedState;return E!==null&&d!==null&&kw(d,E[1])?E[0]:(c=c(),m.memoizedState=[c,d],c)}function AP(c,d,m){return(Wu&21)===0?(c.baseState&&(c.baseState=!1,fs=!0),c.memoizedState=m):(Pa(m,d)||(m=Z0(),ur.lanes|=m,Hu|=m,c.baseState=!0),d)}function zG(c,d){var m=un;un=m!==0&&4>m?m:4,c(!0);var E=Pw.transition;Pw.transition={};try{c(!1),d()}finally{un=m,Pw.transition=E}}function bP(){return la().memoizedState}function $G(c,d,m){var E=mc(c);if(m={lane:E,action:m,hasEagerState:!1,eagerState:null,next:null},RP(c))CP(d,m);else if(m=sP(c,d,m,E),m!==null){var S=Zi();Oa(m,c,E,S),PP(m,d,E)}}function WG(c,d,m){var E=mc(c),S={lane:E,action:m,hasEagerState:!1,eagerState:null,next:null};if(RP(c))CP(d,S);else{var A=c.alternate;if(c.lanes===0&&(A===null||A.lanes===0)&&(A=d.lastRenderedReducer,A!==null))try{var G=d.lastRenderedState,ne=A(G,m);if(S.hasEagerState=!0,S.eagerState=ne,Pa(ne,G)){var oe=d.interleaved;oe===null?(S.next=S,Tw(d)):(S.next=oe.next,oe.next=S),d.interleaved=S;return}}catch{}m=sP(c,d,S,E),m!==null&&(S=Zi(),Oa(m,c,E,S),PP(m,d,E))}}function RP(c){var d=c.alternate;return c===ur||d!==null&&d===ur}function CP(c,d){wg=uy=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function PP(c,d,m){if((m&4194240)!==0){var E=d.lanes;E&=c.pendingLanes,m|=E,d.lanes=m,J0(c,m)}}var fy={readContext:oa,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useInsertionEffect:ki,useLayoutEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useMutableSource:ki,useSyncExternalStore:ki,useId:ki,unstable_isNewReconciler:!1},HG={readContext:oa,useCallback:function(c,d){return So().memoizedState=[c,d===void 0?null:d],c},useContext:oa,useEffect:xP,useImperativeHandle:function(c,d,m){return m=m!=null?m.concat([c]):null,hy(4194308,4,wP.bind(null,d,c),m)},useLayoutEffect:function(c,d){return hy(4194308,4,c,d)},useInsertionEffect:function(c,d){return hy(4,2,c,d)},useMemo:function(c,d){var m=So();return d=d===void 0?null:d,c=c(),m.memoizedState=[c,d],c},useReducer:function(c,d,m){var E=So();return d=m!==void 0?m(d):d,E.memoizedState=E.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},E.queue=c,c=c.dispatch=$G.bind(null,ur,c),[E.memoizedState,c]},useRef:function(c){var d=So();return c={current:c},d.memoizedState=c},useState:yP,useDebugValue:Fw,useDeferredValue:function(c){return So().memoizedState=c},useTransition:function(){var c=yP(!1),d=c[0];return c=zG.bind(null,c[1]),So().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,m){var E=ur,S=So();if(rr){if(m===void 0)throw Error(t(407));m=m()}else{if(m=d(),ri===null)throw Error(t(349));(Wu&30)!==0||dP(E,d,m)}S.memoizedState=m;var A={value:m,getSnapshot:d};return S.queue=A,xP(gP.bind(null,E,A,c),[c]),E.flags|=2048,Ig(9,fP.bind(null,E,A,m,d),void 0,null),m},useId:function(){var c=So(),d=ri.identifierPrefix;if(rr){var m=hl,E=ul;m=(E&~(1<<32-lr(E)-1)).toString(32)+m,d=":"+d+"R"+m,m=Sg++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=UG++,d=":"+d+"r"+m.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},KG={readContext:oa,useCallback:TP,useContext:oa,useEffect:Dw,useImperativeHandle:SP,useInsertionEffect:vP,useLayoutEffect:EP,useMemo:IP,useReducer:Lw,useRef:_P,useState:function(){return Lw(Tg)},useDebugValue:Fw,useDeferredValue:function(c){var d=la();return AP(d,Yr.memoizedState,c)},useTransition:function(){var c=Lw(Tg)[0],d=la().memoizedState;return[c,d]},useMutableSource:uP,useSyncExternalStore:hP,useId:bP,unstable_isNewReconciler:!1},YG={readContext:oa,useCallback:TP,useContext:oa,useEffect:Dw,useImperativeHandle:SP,useInsertionEffect:vP,useLayoutEffect:EP,useMemo:IP,useReducer:Ow,useRef:_P,useState:function(){return Ow(Tg)},useDebugValue:Fw,useDeferredValue:function(c){var d=la();return Yr===null?d.memoizedState=c:AP(d,Yr.memoizedState,c)},useTransition:function(){var c=Ow(Tg)[0],d=la().memoizedState;return[c,d]},useMutableSource:uP,useSyncExternalStore:hP,useId:bP,unstable_isNewReconciler:!1};function Ma(c,d){if(c&&c.defaultProps){d=Te({},d),c=c.defaultProps;for(var m in c)d[m]===void 0&&(d[m]=c[m]);return d}return d}function jw(c,d,m,E){d=c.memoizedState,m=m(E,d),m=m==null?d:Te({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var gy={isMounted:function(c){return(c=c._reactInternals)?ee(c)===c:!1},enqueueSetState:function(c,d,m){c=c._reactInternals;var E=Zi(),S=mc(c),A=fl(E,S);A.payload=d,m!=null&&(A.callback=m),d=hc(c,A,S),d!==null&&(Oa(d,c,S,E),ay(d,c,S))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var E=Zi(),S=mc(c),A=fl(E,S);A.tag=1,A.payload=d,m!=null&&(A.callback=m),d=hc(c,A,S),d!==null&&(Oa(d,c,S,E),ay(d,c,S))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=Zi(),E=mc(c),S=fl(m,E);S.tag=2,d!=null&&(S.callback=d),d=hc(c,S,E),d!==null&&(Oa(d,c,E,m),ay(d,c,E))}};function kP(c,d,m,E,S,A,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(E,A,G):d.prototype&&d.prototype.isPureReactComponent?!hg(m,E)||!hg(S,A):!0}function MP(c,d,m){var E=!1,S=lc,A=d.contextType;return typeof A=="object"&&A!==null?A=oa(A):(S=ds(d)?Gu:Pi.current,E=d.contextTypes,A=(E=E!=null)?Vd(c,S):lc),d=new d(m,A),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=gy,c.stateNode=d,d._reactInternals=c,E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=A),d}function NP(c,d,m,E){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,E),d.state!==c&&gy.enqueueReplaceState(d,d.state,null)}function Vw(c,d,m,E){var S=c.stateNode;S.props=m,S.state=c.memoizedState,S.refs={},Iw(c);var A=d.contextType;typeof A=="object"&&A!==null?S.context=oa(A):(A=ds(d)?Gu:Pi.current,S.context=Vd(c,A)),S.state=c.memoizedState,A=d.getDerivedStateFromProps,typeof A=="function"&&(jw(c,d,A,m),S.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&gy.enqueueReplaceState(S,S.state,null),oy(c,m,S,E),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308)}function Kd(c,d){try{var m="",E=d;do m+=X(E),E=E.return;while(E);var S=m}catch(A){S=`
Error generating stack: `+A.message+`
`+A.stack}return{value:c,source:d,stack:S,digest:null}}function Gw(c,d,m){return{value:c,source:null,stack:m??null,digest:d??null}}function Bw(c,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var XG=typeof WeakMap=="function"?WeakMap:Map;function LP(c,d,m){m=fl(-1,m),m.tag=3,m.payload={element:null};var E=d.value;return m.callback=function(){Ey||(Ey=!0,n2=E),Bw(c,d)},m}function OP(c,d,m){m=fl(-1,m),m.tag=3;var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var S=d.value;m.payload=function(){return E(S)},m.callback=function(){Bw(c,d)}}var A=c.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){Bw(c,d),typeof E!="function"&&(fc===null?fc=new Set([this]):fc.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),m}function DP(c,d,m){var E=c.pingCache;if(E===null){E=c.pingCache=new XG;var S=new Set;E.set(d,S)}else S=E.get(d),S===void 0&&(S=new Set,E.set(d,S));S.has(m)||(S.add(m),c=cB.bind(null,c,d,m),d.then(c,c))}function FP(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function jP(c,d,m,E,S){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=fl(-1,1),d.tag=2,hc(m,d,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=S,c)}var qG=N.ReactCurrentOwner,fs=!1;function qi(c,d,m,E){d.child=c===null?iP(d,null,m,E):zd(d,c.child,m,E)}function VP(c,d,m,E,S){m=m.render;var A=d.ref;return Wd(d,S),E=Mw(c,d,m,E,A,S),m=Nw(),c!==null&&!fs?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~S,gl(c,d,S)):(rr&&m&&mw(d),d.flags|=1,qi(c,d,E,S),d.child)}function GP(c,d,m,E,S){if(c===null){var A=m.type;return typeof A=="function"&&!c2(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=A,BP(c,d,A,E,S)):(c=by(m.type,null,E,d,d.mode,S),c.ref=d.ref,c.return=d,d.child=c)}if(A=c.child,(c.lanes&S)===0){var G=A.memoizedProps;if(m=m.compare,m=m!==null?m:hg,m(G,E)&&c.ref===d.ref)return gl(c,d,S)}return d.flags|=1,c=yc(A,E),c.ref=d.ref,c.return=d,d.child=c}function BP(c,d,m,E,S){if(c!==null){var A=c.memoizedProps;if(hg(A,E)&&c.ref===d.ref)if(fs=!1,d.pendingProps=E=A,(c.lanes&S)!==0)(c.flags&131072)!==0&&(fs=!0);else return d.lanes=c.lanes,gl(c,d,S)}return Uw(c,d,m,E,S)}function UP(c,d,m){var E=d.pendingProps,S=E.children,A=c!==null?c.memoizedState:null;if(E.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yn(Xd,Gs),Gs|=m;else{if((m&1073741824)===0)return c=A!==null?A.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Yn(Xd,Gs),Gs|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=A!==null?A.baseLanes:m,Yn(Xd,Gs),Gs|=E}else A!==null?(E=A.baseLanes|m,d.memoizedState=null):E=m,Yn(Xd,Gs),Gs|=E;return qi(c,d,S,m),d.child}function zP(c,d){var m=d.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function Uw(c,d,m,E,S){var A=ds(m)?Gu:Pi.current;return A=Vd(d,A),Wd(d,S),m=Mw(c,d,m,E,A,S),E=Nw(),c!==null&&!fs?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~S,gl(c,d,S)):(rr&&E&&mw(d),d.flags|=1,qi(c,d,m,S),d.child)}function $P(c,d,m,E,S){if(ds(m)){var A=!0;Q1(d)}else A=!1;if(Wd(d,S),d.stateNode===null)py(c,d),MP(d,m,E),Vw(d,m,E,S),E=!0;else if(c===null){var G=d.stateNode,ne=d.memoizedProps;G.props=ne;var oe=G.context,ve=m.contextType;typeof ve=="object"&&ve!==null?ve=oa(ve):(ve=ds(m)?Gu:Pi.current,ve=Vd(d,ve));var ze=m.getDerivedStateFromProps,Ke=typeof ze=="function"||typeof G.getSnapshotBeforeUpdate=="function";Ke||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ne!==E||oe!==ve)&&NP(d,G,E,ve),uc=!1;var Be=d.memoizedState;G.state=Be,oy(d,E,G,S),oe=d.memoizedState,ne!==E||Be!==oe||hs.current||uc?(typeof ze=="function"&&(jw(d,m,ze,E),oe=d.memoizedState),(ne=uc||kP(d,m,ne,E,Be,oe,ve))?(Ke||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=oe),G.props=E,G.state=oe,G.context=ve,E=ne):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{G=d.stateNode,aP(c,d),ne=d.memoizedProps,ve=d.type===d.elementType?ne:Ma(d.type,ne),G.props=ve,Ke=d.pendingProps,Be=G.context,oe=m.contextType,typeof oe=="object"&&oe!==null?oe=oa(oe):(oe=ds(m)?Gu:Pi.current,oe=Vd(d,oe));var mt=m.getDerivedStateFromProps;(ze=typeof mt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ne!==Ke||Be!==oe)&&NP(d,G,E,oe),uc=!1,Be=d.memoizedState,G.state=Be,oy(d,E,G,S);var vt=d.memoizedState;ne!==Ke||Be!==vt||hs.current||uc?(typeof mt=="function"&&(jw(d,m,mt,E),vt=d.memoizedState),(ve=uc||kP(d,m,ve,E,Be,vt,oe)||!1)?(ze||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(E,vt,oe),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(E,vt,oe)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||ne===c.memoizedProps&&Be===c.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ne===c.memoizedProps&&Be===c.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=vt),G.props=E,G.state=vt,G.context=oe,E=ve):(typeof G.componentDidUpdate!="function"||ne===c.memoizedProps&&Be===c.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ne===c.memoizedProps&&Be===c.memoizedState||(d.flags|=1024),E=!1)}return zw(c,d,m,E,A,S)}function zw(c,d,m,E,S,A){zP(c,d);var G=(d.flags&128)!==0;if(!E&&!G)return S&&XC(d,m,!1),gl(c,d,A);E=d.stateNode,qG.current=d;var ne=G&&typeof m.getDerivedStateFromError!="function"?null:E.render();return d.flags|=1,c!==null&&G?(d.child=zd(d,c.child,null,A),d.child=zd(d,null,ne,A)):qi(c,d,ne,A),d.memoizedState=E.state,S&&XC(d,m,!0),d.child}function WP(c){var d=c.stateNode;d.pendingContext?KC(c,d.pendingContext,d.pendingContext!==d.context):d.context&&KC(c,d.context,!1),Aw(c,d.containerInfo)}function HP(c,d,m,E,S){return Ud(),xw(S),d.flags|=256,qi(c,d,m,E),d.child}var $w={dehydrated:null,treeContext:null,retryLane:0};function Ww(c){return{baseLanes:c,cachePool:null,transitions:null}}function KP(c,d,m){var E=d.pendingProps,S=cr.current,A=!1,G=(d.flags&128)!==0,ne;if((ne=G)||(ne=c!==null&&c.memoizedState===null?!1:(S&2)!==0),ne?(A=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(S|=1),Yn(cr,S&1),c===null)return _w(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(G=E.children,c=E.fallback,A?(E=d.mode,A=d.child,G={mode:"hidden",children:G},(E&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=G):A=Ry(G,E,0,null),c=qu(c,E,m,null),A.return=d,c.return=d,A.sibling=c,d.child=A,d.child.memoizedState=Ww(m),d.memoizedState=$w,c):Hw(d,G));if(S=c.memoizedState,S!==null&&(ne=S.dehydrated,ne!==null))return ZG(c,d,G,E,ne,S,m);if(A){A=E.fallback,G=d.mode,S=c.child,ne=S.sibling;var oe={mode:"hidden",children:E.children};return(G&1)===0&&d.child!==S?(E=d.child,E.childLanes=0,E.pendingProps=oe,d.deletions=null):(E=yc(S,oe),E.subtreeFlags=S.subtreeFlags&14680064),ne!==null?A=yc(ne,A):(A=qu(A,G,m,null),A.flags|=2),A.return=d,E.return=d,E.sibling=A,d.child=E,E=A,A=d.child,G=c.child.memoizedState,G=G===null?Ww(m):{baseLanes:G.baseLanes|m,cachePool:null,transitions:G.transitions},A.memoizedState=G,A.childLanes=c.childLanes&~m,d.memoizedState=$w,E}return A=c.child,c=A.sibling,E=yc(A,{mode:"visible",children:E.children}),(d.mode&1)===0&&(E.lanes=m),E.return=d,E.sibling=null,c!==null&&(m=d.deletions,m===null?(d.deletions=[c],d.flags|=16):m.push(c)),d.child=E,d.memoizedState=null,E}function Hw(c,d){return d=Ry({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function my(c,d,m,E){return E!==null&&xw(E),zd(d,c.child,null,m),c=Hw(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function ZG(c,d,m,E,S,A,G){if(m)return d.flags&256?(d.flags&=-257,E=Gw(Error(t(422))),my(c,d,G,E)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(A=E.fallback,S=d.mode,E=Ry({mode:"visible",children:E.children},S,0,null),A=qu(A,S,G,null),A.flags|=2,E.return=d,A.return=d,E.sibling=A,d.child=E,(d.mode&1)!==0&&zd(d,c.child,null,G),d.child.memoizedState=Ww(G),d.memoizedState=$w,A);if((d.mode&1)===0)return my(c,d,G,null);if(S.data==="$!"){if(E=S.nextSibling&&S.nextSibling.dataset,E)var ne=E.dgst;return E=ne,A=Error(t(419)),E=Gw(A,E,void 0),my(c,d,G,E)}if(ne=(G&c.childLanes)!==0,fs||ne){if(E=ri,E!==null){switch(G&-G){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(E.suspendedLanes|G))!==0?0:S,S!==0&&S!==A.retryLane&&(A.retryLane=S,dl(c,S),Oa(E,c,S,-1))}return l2(),E=Gw(Error(t(421))),my(c,d,G,E)}return S.data==="$?"?(d.flags|=128,d.child=c.child,d=uB.bind(null,c),S._reactRetry=d,null):(c=A.treeContext,Vs=ac(S.nextSibling),js=d,rr=!0,ka=null,c!==null&&(sa[aa++]=ul,sa[aa++]=hl,sa[aa++]=Bu,ul=c.id,hl=c.overflow,Bu=d),d=Hw(d,E.children),d.flags|=4096,d)}function YP(c,d,m){c.lanes|=d;var E=c.alternate;E!==null&&(E.lanes|=d),Sw(c.return,d,m)}function Kw(c,d,m,E,S){var A=c.memoizedState;A===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:m,tailMode:S}:(A.isBackwards=d,A.rendering=null,A.renderingStartTime=0,A.last=E,A.tail=m,A.tailMode=S)}function XP(c,d,m){var E=d.pendingProps,S=E.revealOrder,A=E.tail;if(qi(c,d,E.children,m),E=cr.current,(E&2)!==0)E=E&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&YP(c,m,d);else if(c.tag===19)YP(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}E&=1}if(Yn(cr,E),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(m=d.child,S=null;m!==null;)c=m.alternate,c!==null&&ly(c)===null&&(S=m),m=m.sibling;m=S,m===null?(S=d.child,d.child=null):(S=m.sibling,m.sibling=null),Kw(d,!1,S,m,A);break;case"backwards":for(m=null,S=d.child,d.child=null;S!==null;){if(c=S.alternate,c!==null&&ly(c)===null){d.child=S;break}c=S.sibling,S.sibling=m,m=S,S=c}Kw(d,!0,m,null,A);break;case"together":Kw(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function py(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function gl(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),Hu|=d.lanes,(m&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(t(153));if(d.child!==null){for(c=d.child,m=yc(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=yc(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function QG(c,d,m){switch(d.tag){case 3:WP(d),Ud();break;case 5:cP(d);break;case 1:ds(d.type)&&Q1(d);break;case 4:Aw(d,d.stateNode.containerInfo);break;case 10:var E=d.type._context,S=d.memoizedProps.value;Yn(iy,E._currentValue),E._currentValue=S;break;case 13:if(E=d.memoizedState,E!==null)return E.dehydrated!==null?(Yn(cr,cr.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?KP(c,d,m):(Yn(cr,cr.current&1),c=gl(c,d,m),c!==null?c.sibling:null);Yn(cr,cr.current&1);break;case 19:if(E=(m&d.childLanes)!==0,(c.flags&128)!==0){if(E)return XP(c,d,m);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Yn(cr,cr.current),E)break;return null;case 22:case 23:return d.lanes=0,UP(c,d,m)}return gl(c,d,m)}var qP,Yw,ZP,QP;qP=function(c,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Yw=function(){},ZP=function(c,d,m,E){var S=c.memoizedProps;if(S!==E){c=d.stateNode,$u(wo.current);var A=null;switch(m){case"input":S=Nt(c,S),E=Nt(c,E),A=[];break;case"select":S=Te({},S,{value:void 0}),E=Te({},E,{value:void 0}),A=[];break;case"textarea":S=Rn(c,S),E=Rn(c,E),A=[];break;default:typeof S.onClick!="function"&&typeof E.onClick=="function"&&(c.onclick=X1)}dt(m,E);var G;m=null;for(ve in S)if(!E.hasOwnProperty(ve)&&S.hasOwnProperty(ve)&&S[ve]!=null)if(ve==="style"){var ne=S[ve];for(G in ne)ne.hasOwnProperty(G)&&(m||(m={}),m[G]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(i.hasOwnProperty(ve)?A||(A=[]):(A=A||[]).push(ve,null));for(ve in E){var oe=E[ve];if(ne=S?.[ve],E.hasOwnProperty(ve)&&oe!==ne&&(oe!=null||ne!=null))if(ve==="style")if(ne){for(G in ne)!ne.hasOwnProperty(G)||oe&&oe.hasOwnProperty(G)||(m||(m={}),m[G]="");for(G in oe)oe.hasOwnProperty(G)&&ne[G]!==oe[G]&&(m||(m={}),m[G]=oe[G])}else m||(A||(A=[]),A.push(ve,m)),m=oe;else ve==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,ne=ne?ne.__html:void 0,oe!=null&&ne!==oe&&(A=A||[]).push(ve,oe)):ve==="children"?typeof oe!="string"&&typeof oe!="number"||(A=A||[]).push(ve,""+oe):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(i.hasOwnProperty(ve)?(oe!=null&&ve==="onScroll"&&qn("scroll",c),A||ne===oe||(A=[])):(A=A||[]).push(ve,oe))}m&&(A=A||[]).push("style",m);var ve=A;(d.updateQueue=ve)&&(d.flags|=4)}},QP=function(c,d,m,E){m!==E&&(d.flags|=4)};function Ag(c,d){if(!rr)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:E.sibling=null}}function Mi(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,E=0;if(d)for(var S=c.child;S!==null;)m|=S.lanes|S.childLanes,E|=S.subtreeFlags&14680064,E|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)m|=S.lanes|S.childLanes,E|=S.subtreeFlags,E|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=E,c.childLanes=m,d}function JG(c,d,m){var E=d.pendingProps;switch(pw(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(d),null;case 1:return ds(d.type)&&Z1(),Mi(d),null;case 3:return E=d.stateNode,Hd(),Zn(hs),Zn(Pi),Cw(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(c===null||c.child===null)&&(ny(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ka!==null&&(s2(ka),ka=null))),Yw(c,d),Mi(d),null;case 5:bw(d);var S=$u(Eg.current);if(m=d.type,c!==null&&d.stateNode!=null)ZP(c,d,m,E,S),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!E){if(d.stateNode===null)throw Error(t(166));return Mi(d),null}if(c=$u(wo.current),ny(d)){E=d.stateNode,m=d.type;var A=d.memoizedProps;switch(E[Eo]=d,E[pg]=A,c=(d.mode&1)!==0,m){case"dialog":qn("cancel",E),qn("close",E);break;case"iframe":case"object":case"embed":qn("load",E);break;case"video":case"audio":for(S=0;S<fg.length;S++)qn(fg[S],E);break;case"source":qn("error",E);break;case"img":case"image":case"link":qn("error",E),qn("load",E);break;case"details":qn("toggle",E);break;case"input":at(E,A),qn("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!A.multiple},qn("invalid",E);break;case"textarea":Ae(E,A),qn("invalid",E)}dt(m,A),S=null;for(var G in A)if(A.hasOwnProperty(G)){var ne=A[G];G==="children"?typeof ne=="string"?E.textContent!==ne&&(A.suppressHydrationWarning!==!0&&Y1(E.textContent,ne,c),S=["children",ne]):typeof ne=="number"&&E.textContent!==""+ne&&(A.suppressHydrationWarning!==!0&&Y1(E.textContent,ne,c),S=["children",""+ne]):i.hasOwnProperty(G)&&ne!=null&&G==="onScroll"&&qn("scroll",E)}switch(m){case"input":qt(E),bn(E,A,!0);break;case"textarea":qt(E),k(E);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(E.onclick=X1)}E=S,d.updateQueue=E,E!==null&&(d.flags|=4)}else{G=S.nodeType===9?S:S.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=St(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof E.is=="string"?c=G.createElement(m,{is:E.is}):(c=G.createElement(m),m==="select"&&(G=c,E.multiple?G.multiple=!0:E.size&&(G.size=E.size))):c=G.createElementNS(c,m),c[Eo]=d,c[pg]=E,qP(c,d,!1,!1),d.stateNode=c;e:{switch(G=At(m,E),m){case"dialog":qn("cancel",c),qn("close",c),S=E;break;case"iframe":case"object":case"embed":qn("load",c),S=E;break;case"video":case"audio":for(S=0;S<fg.length;S++)qn(fg[S],c);S=E;break;case"source":qn("error",c),S=E;break;case"img":case"image":case"link":qn("error",c),qn("load",c),S=E;break;case"details":qn("toggle",c),S=E;break;case"input":at(c,E),S=Nt(c,E),qn("invalid",c);break;case"option":S=E;break;case"select":c._wrapperState={wasMultiple:!!E.multiple},S=Te({},E,{value:void 0}),qn("invalid",c);break;case"textarea":Ae(c,E),S=Rn(c,E),qn("invalid",c);break;default:S=E}dt(m,S),ne=S;for(A in ne)if(ne.hasOwnProperty(A)){var oe=ne[A];A==="style"?Je(c,oe):A==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,oe!=null&&re(c,oe)):A==="children"?typeof oe=="string"?(m!=="textarea"||oe!=="")&&z(c,oe):typeof oe=="number"&&z(c,""+oe):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?oe!=null&&A==="onScroll"&&qn("scroll",c):oe!=null&&b(c,A,oe,G))}switch(m){case"input":qt(c),bn(c,E,!1);break;case"textarea":qt(c),k(c);break;case"option":E.value!=null&&c.setAttribute("value",""+Fe(E.value));break;case"select":c.multiple=!!E.multiple,A=E.value,A!=null?It(c,!!E.multiple,A,!1):E.defaultValue!=null&&It(c,!!E.multiple,E.defaultValue,!0);break;default:typeof S.onClick=="function"&&(c.onclick=X1)}switch(m){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Mi(d),null;case 6:if(c&&d.stateNode!=null)QP(c,d,c.memoizedProps,E);else{if(typeof E!="string"&&d.stateNode===null)throw Error(t(166));if(m=$u(Eg.current),$u(wo.current),ny(d)){if(E=d.stateNode,m=d.memoizedProps,E[Eo]=d,(A=E.nodeValue!==m)&&(c=js,c!==null))switch(c.tag){case 3:Y1(E.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Y1(E.nodeValue,m,(c.mode&1)!==0)}A&&(d.flags|=4)}else E=(m.nodeType===9?m:m.ownerDocument).createTextNode(E),E[Eo]=d,d.stateNode=E}return Mi(d),null;case 13:if(Zn(cr),E=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(rr&&Vs!==null&&(d.mode&1)!==0&&(d.flags&128)===0)tP(),Ud(),d.flags|=98560,A=!1;else if(A=ny(d),E!==null&&E.dehydrated!==null){if(c===null){if(!A)throw Error(t(318));if(A=d.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(t(317));A[Eo]=d}else Ud(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Mi(d),A=!1}else ka!==null&&(s2(ka),ka=null),A=!0;if(!A)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(E=E!==null,E!==(c!==null&&c.memoizedState!==null)&&E&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(cr.current&1)!==0?Xr===0&&(Xr=3):l2())),d.updateQueue!==null&&(d.flags|=4),Mi(d),null);case 4:return Hd(),Yw(c,d),c===null&&gg(d.stateNode.containerInfo),Mi(d),null;case 10:return ww(d.type._context),Mi(d),null;case 17:return ds(d.type)&&Z1(),Mi(d),null;case 19:if(Zn(cr),A=d.memoizedState,A===null)return Mi(d),null;if(E=(d.flags&128)!==0,G=A.rendering,G===null)if(E)Ag(A,!1);else{if(Xr!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(G=ly(c),G!==null){for(d.flags|=128,Ag(A,!1),E=G.updateQueue,E!==null&&(d.updateQueue=E,d.flags|=4),d.subtreeFlags=0,E=m,m=d.child;m!==null;)A=m,c=E,A.flags&=14680066,G=A.alternate,G===null?(A.childLanes=0,A.lanes=c,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=G.childLanes,A.lanes=G.lanes,A.child=G.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=G.memoizedProps,A.memoizedState=G.memoizedState,A.updateQueue=G.updateQueue,A.type=G.type,c=G.dependencies,A.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return Yn(cr,cr.current&1|2),d.child}c=c.sibling}A.tail!==null&&He()>qd&&(d.flags|=128,E=!0,Ag(A,!1),d.lanes=4194304)}else{if(!E)if(c=ly(G),c!==null){if(d.flags|=128,E=!0,m=c.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),Ag(A,!0),A.tail===null&&A.tailMode==="hidden"&&!G.alternate&&!rr)return Mi(d),null}else 2*He()-A.renderingStartTime>qd&&m!==1073741824&&(d.flags|=128,E=!0,Ag(A,!1),d.lanes=4194304);A.isBackwards?(G.sibling=d.child,d.child=G):(m=A.last,m!==null?m.sibling=G:d.child=G,A.last=G)}return A.tail!==null?(d=A.tail,A.rendering=d,A.tail=d.sibling,A.renderingStartTime=He(),d.sibling=null,m=cr.current,Yn(cr,E?m&1|2:m&1),d):(Mi(d),null);case 22:case 23:return o2(),E=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==E&&(d.flags|=8192),E&&(d.mode&1)!==0?(Gs&1073741824)!==0&&(Mi(d),d.subtreeFlags&6&&(d.flags|=8192)):Mi(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function eB(c,d){switch(pw(d),d.tag){case 1:return ds(d.type)&&Z1(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Hd(),Zn(hs),Zn(Pi),Cw(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return bw(d),null;case 13:if(Zn(cr),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(t(340));Ud()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Zn(cr),null;case 4:return Hd(),null;case 10:return ww(d.type._context),null;case 22:case 23:return o2(),null;case 24:return null;default:return null}}var yy=!1,Ni=!1,tB=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Yd(c,d){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(E){pr(c,d,E)}else m.current=null}function Xw(c,d,m){try{m()}catch(E){pr(c,d,E)}}var JP=!1;function nB(c,d){if(ow=sl,c=kC(),JE(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var E=m.getSelection&&m.getSelection();if(E&&E.rangeCount!==0){m=E.anchorNode;var S=E.anchorOffset,A=E.focusNode;E=E.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var G=0,ne=-1,oe=-1,ve=0,ze=0,Ke=c,Be=null;t:for(;;){for(var mt;Ke!==m||S!==0&&Ke.nodeType!==3||(ne=G+S),Ke!==A||E!==0&&Ke.nodeType!==3||(oe=G+E),Ke.nodeType===3&&(G+=Ke.nodeValue.length),(mt=Ke.firstChild)!==null;)Be=Ke,Ke=mt;for(;;){if(Ke===c)break t;if(Be===m&&++ve===S&&(ne=G),Be===A&&++ze===E&&(oe=G),(mt=Ke.nextSibling)!==null)break;Ke=Be,Be=Ke.parentNode}Ke=mt}m=ne===-1||oe===-1?null:{start:ne,end:oe}}else m=null}m=m||{start:0,end:0}}else m=null;for(lw={focusedElem:c,selectionRange:m},sl=!1,_t=d;_t!==null;)if(d=_t,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,_t=c;else for(;_t!==null;){d=_t;try{var vt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var wt=vt.memoizedProps,Ar=vt.memoizedState,de=d.stateNode,le=de.getSnapshotBeforeUpdate(d.elementType===d.type?wt:Ma(d.type,wt),Ar);de.__reactInternalSnapshotBeforeUpdate=le}break;case 3:var pe=d.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Qe){pr(d,d.return,Qe)}if(c=d.sibling,c!==null){c.return=d.return,_t=c;break}_t=d.return}return vt=JP,JP=!1,vt}function bg(c,d,m){var E=d.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var S=E=E.next;do{if((S.tag&c)===c){var A=S.destroy;S.destroy=void 0,A!==void 0&&Xw(d,m,A)}S=S.next}while(S!==E)}}function _y(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&c)===c){var E=m.create;m.destroy=E()}m=m.next}while(m!==d)}}function qw(c){var d=c.ref;if(d!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof d=="function"?d(c):d.current=c}}function e4(c){var d=c.alternate;d!==null&&(c.alternate=null,e4(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[Eo],delete d[pg],delete d[dw],delete d[jG],delete d[VG])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function t4(c){return c.tag===5||c.tag===3||c.tag===4}function n4(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||t4(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Zw(c,d,m){var E=c.tag;if(E===5||E===6)c=c.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(c,d):m.insertBefore(c,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(c,m)):(d=m,d.appendChild(c)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=X1));else if(E!==4&&(c=c.child,c!==null))for(Zw(c,d,m),c=c.sibling;c!==null;)Zw(c,d,m),c=c.sibling}function Qw(c,d,m){var E=c.tag;if(E===5||E===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(E!==4&&(c=c.child,c!==null))for(Qw(c,d,m),c=c.sibling;c!==null;)Qw(c,d,m),c=c.sibling}var pi=null,Na=!1;function dc(c,d,m){for(m=m.child;m!==null;)r4(c,d,m),m=m.sibling}function r4(c,d,m){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Ns,m)}catch{}switch(m.tag){case 5:Ni||Yd(m,d);case 6:var E=pi,S=Na;pi=null,dc(c,d,m),pi=E,Na=S,pi!==null&&(Na?(c=pi,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):pi.removeChild(m.stateNode));break;case 18:pi!==null&&(Na?(c=pi,m=m.stateNode,c.nodeType===8?hw(c.parentNode,m):c.nodeType===1&&hw(c,m),nc(c)):hw(pi,m.stateNode));break;case 4:E=pi,S=Na,pi=m.stateNode.containerInfo,Na=!0,dc(c,d,m),pi=E,Na=S;break;case 0:case 11:case 14:case 15:if(!Ni&&(E=m.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){S=E=E.next;do{var A=S,G=A.destroy;A=A.tag,G!==void 0&&((A&2)!==0||(A&4)!==0)&&Xw(m,d,G),S=S.next}while(S!==E)}dc(c,d,m);break;case 1:if(!Ni&&(Yd(m,d),E=m.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=m.memoizedProps,E.state=m.memoizedState,E.componentWillUnmount()}catch(ne){pr(m,d,ne)}dc(c,d,m);break;case 21:dc(c,d,m);break;case 22:m.mode&1?(Ni=(E=Ni)||m.memoizedState!==null,dc(c,d,m),Ni=E):dc(c,d,m);break;default:dc(c,d,m)}}function i4(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new tB),d.forEach(function(E){var S=hB.bind(null,c,E);m.has(E)||(m.add(E),E.then(S,S))})}}function La(c,d){var m=d.deletions;if(m!==null)for(var E=0;E<m.length;E++){var S=m[E];try{var A=c,G=d,ne=G;e:for(;ne!==null;){switch(ne.tag){case 5:pi=ne.stateNode,Na=!1;break e;case 3:pi=ne.stateNode.containerInfo,Na=!0;break e;case 4:pi=ne.stateNode.containerInfo,Na=!0;break e}ne=ne.return}if(pi===null)throw Error(t(160));r4(A,G,S),pi=null,Na=!1;var oe=S.alternate;oe!==null&&(oe.return=null),S.return=null}catch(ve){pr(S,d,ve)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)s4(d,c),d=d.sibling}function s4(c,d){var m=c.alternate,E=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(La(d,c),To(c),E&4){try{bg(3,c,c.return),_y(3,c)}catch(wt){pr(c,c.return,wt)}try{bg(5,c,c.return)}catch(wt){pr(c,c.return,wt)}}break;case 1:La(d,c),To(c),E&512&&m!==null&&Yd(m,m.return);break;case 5:if(La(d,c),To(c),E&512&&m!==null&&Yd(m,m.return),c.flags&32){var S=c.stateNode;try{z(S,"")}catch(wt){pr(c,c.return,wt)}}if(E&4&&(S=c.stateNode,S!=null)){var A=c.memoizedProps,G=m!==null?m.memoizedProps:A,ne=c.type,oe=c.updateQueue;if(c.updateQueue=null,oe!==null)try{ne==="input"&&A.type==="radio"&&A.name!=null&&yt(S,A),At(ne,G);var ve=At(ne,A);for(G=0;G<oe.length;G+=2){var ze=oe[G],Ke=oe[G+1];ze==="style"?Je(S,Ke):ze==="dangerouslySetInnerHTML"?re(S,Ke):ze==="children"?z(S,Ke):b(S,ze,Ke,ve)}switch(ne){case"input":Oe(S,A);break;case"textarea":Ee(S,A);break;case"select":var Be=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!A.multiple;var mt=A.value;mt!=null?It(S,!!A.multiple,mt,!1):Be!==!!A.multiple&&(A.defaultValue!=null?It(S,!!A.multiple,A.defaultValue,!0):It(S,!!A.multiple,A.multiple?[]:"",!1))}S[pg]=A}catch(wt){pr(c,c.return,wt)}}break;case 6:if(La(d,c),To(c),E&4){if(c.stateNode===null)throw Error(t(162));S=c.stateNode,A=c.memoizedProps;try{S.nodeValue=A}catch(wt){pr(c,c.return,wt)}}break;case 3:if(La(d,c),To(c),E&4&&m!==null&&m.memoizedState.isDehydrated)try{nc(d.containerInfo)}catch(wt){pr(c,c.return,wt)}break;case 4:La(d,c),To(c);break;case 13:La(d,c),To(c),S=c.child,S.flags&8192&&(A=S.memoizedState!==null,S.stateNode.isHidden=A,!A||S.alternate!==null&&S.alternate.memoizedState!==null||(t2=He())),E&4&&i4(c);break;case 22:if(ze=m!==null&&m.memoizedState!==null,c.mode&1?(Ni=(ve=Ni)||ze,La(d,c),Ni=ve):La(d,c),To(c),E&8192){if(ve=c.memoizedState!==null,(c.stateNode.isHidden=ve)&&!ze&&(c.mode&1)!==0)for(_t=c,ze=c.child;ze!==null;){for(Ke=_t=ze;_t!==null;){switch(Be=_t,mt=Be.child,Be.tag){case 0:case 11:case 14:case 15:bg(4,Be,Be.return);break;case 1:Yd(Be,Be.return);var vt=Be.stateNode;if(typeof vt.componentWillUnmount=="function"){E=Be,m=Be.return;try{d=E,vt.props=d.memoizedProps,vt.state=d.memoizedState,vt.componentWillUnmount()}catch(wt){pr(E,m,wt)}}break;case 5:Yd(Be,Be.return);break;case 22:if(Be.memoizedState!==null){l4(Ke);continue}}mt!==null?(mt.return=Be,_t=mt):l4(Ke)}ze=ze.sibling}e:for(ze=null,Ke=c;;){if(Ke.tag===5){if(ze===null){ze=Ke;try{S=Ke.stateNode,ve?(A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(ne=Ke.stateNode,oe=Ke.memoizedProps.style,G=oe!=null&&oe.hasOwnProperty("display")?oe.display:null,ne.style.display=we("display",G))}catch(wt){pr(c,c.return,wt)}}}else if(Ke.tag===6){if(ze===null)try{Ke.stateNode.nodeValue=ve?"":Ke.memoizedProps}catch(wt){pr(c,c.return,wt)}}else if((Ke.tag!==22&&Ke.tag!==23||Ke.memoizedState===null||Ke===c)&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===c)break e;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===c)break e;ze===Ke&&(ze=null),Ke=Ke.return}ze===Ke&&(ze=null),Ke.sibling.return=Ke.return,Ke=Ke.sibling}}break;case 19:La(d,c),To(c),E&4&&i4(c);break;case 21:break;default:La(d,c),To(c)}}function To(c){var d=c.flags;if(d&2){try{e:{for(var m=c.return;m!==null;){if(t4(m)){var E=m;break e}m=m.return}throw Error(t(160))}switch(E.tag){case 5:var S=E.stateNode;E.flags&32&&(z(S,""),E.flags&=-33);var A=n4(c);Qw(c,A,S);break;case 3:case 4:var G=E.stateNode.containerInfo,ne=n4(c);Zw(c,ne,G);break;default:throw Error(t(161))}}catch(oe){pr(c,c.return,oe)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function rB(c,d,m){_t=c,a4(c)}function a4(c,d,m){for(var E=(c.mode&1)!==0;_t!==null;){var S=_t,A=S.child;if(S.tag===22&&E){var G=S.memoizedState!==null||yy;if(!G){var ne=S.alternate,oe=ne!==null&&ne.memoizedState!==null||Ni;ne=yy;var ve=Ni;if(yy=G,(Ni=oe)&&!ve)for(_t=S;_t!==null;)G=_t,oe=G.child,G.tag===22&&G.memoizedState!==null?c4(S):oe!==null?(oe.return=G,_t=oe):c4(S);for(;A!==null;)_t=A,a4(A),A=A.sibling;_t=S,yy=ne,Ni=ve}o4(c)}else(S.subtreeFlags&8772)!==0&&A!==null?(A.return=S,_t=A):o4(c)}}function o4(c){for(;_t!==null;){var d=_t;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Ni||_y(5,d);break;case 1:var E=d.stateNode;if(d.flags&4&&!Ni)if(m===null)E.componentDidMount();else{var S=d.elementType===d.type?m.memoizedProps:Ma(d.type,m.memoizedProps);E.componentDidUpdate(S,m.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var A=d.updateQueue;A!==null&&lP(d,A,E);break;case 3:var G=d.updateQueue;if(G!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}lP(d,G,m)}break;case 5:var ne=d.stateNode;if(m===null&&d.flags&4){m=ne;var oe=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":oe.autoFocus&&m.focus();break;case"img":oe.src&&(m.src=oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ve=d.alternate;if(ve!==null){var ze=ve.memoizedState;if(ze!==null){var Ke=ze.dehydrated;Ke!==null&&nc(Ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ni||d.flags&512&&qw(d)}catch(Be){pr(d,d.return,Be)}}if(d===c){_t=null;break}if(m=d.sibling,m!==null){m.return=d.return,_t=m;break}_t=d.return}}function l4(c){for(;_t!==null;){var d=_t;if(d===c){_t=null;break}var m=d.sibling;if(m!==null){m.return=d.return,_t=m;break}_t=d.return}}function c4(c){for(;_t!==null;){var d=_t;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{_y(4,d)}catch(oe){pr(d,m,oe)}break;case 1:var E=d.stateNode;if(typeof E.componentDidMount=="function"){var S=d.return;try{E.componentDidMount()}catch(oe){pr(d,S,oe)}}var A=d.return;try{qw(d)}catch(oe){pr(d,A,oe)}break;case 5:var G=d.return;try{qw(d)}catch(oe){pr(d,G,oe)}}}catch(oe){pr(d,d.return,oe)}if(d===c){_t=null;break}var ne=d.sibling;if(ne!==null){ne.return=d.return,_t=ne;break}_t=d.return}}var iB=Math.ceil,xy=N.ReactCurrentDispatcher,Jw=N.ReactCurrentOwner,ca=N.ReactCurrentBatchConfig,gn=0,ri=null,Dr=null,yi=0,Gs=0,Xd=oc(0),Xr=0,Rg=null,Hu=0,vy=0,e2=0,Cg=null,gs=null,t2=0,qd=1/0,ml=null,Ey=!1,n2=null,fc=null,wy=!1,gc=null,Sy=0,Pg=0,r2=null,Ty=-1,Iy=0;function Zi(){return(gn&6)!==0?He():Ty!==-1?Ty:Ty=He()}function mc(c){return(c.mode&1)===0?1:(gn&2)!==0&&yi!==0?yi&-yi:BG.transition!==null?(Iy===0&&(Iy=Z0()),Iy):(c=un,c!==0||(c=window.event,c=c===void 0?16:Id(c.type)),c)}function Oa(c,d,m,E){if(50<Pg)throw Pg=0,r2=null,Error(t(185));Lu(c,m,E),((gn&2)===0||c!==ri)&&(c===ri&&((gn&2)===0&&(vy|=m),Xr===4&&pc(c,yi)),ms(c,E),m===1&&gn===0&&(d.mode&1)===0&&(qd=He()+500,J1&&cc()))}function ms(c,d){var m=c.callbackNode;Nu(c,d);var E=nl(c,c===ri?yi:0);if(E===0)m!==null&&et(m),c.callbackNode=null,c.callbackPriority=0;else if(d=E&-E,c.callbackPriority!==d){if(m!=null&&et(m),d===1)c.tag===0?GG(h4.bind(null,c)):qC(h4.bind(null,c)),DG(function(){(gn&6)===0&&cc()}),m=null;else{switch(uo(E)){case 1:m=Cn;break;case 4:m=Ln;break;case 16:m=nr;break;case 536870912:m=ra;break;default:m=nr}m=x4(m,u4.bind(null,c))}c.callbackPriority=d,c.callbackNode=m}}function u4(c,d){if(Ty=-1,Iy=0,(gn&6)!==0)throw Error(t(327));var m=c.callbackNode;if(Zd()&&c.callbackNode!==m)return null;var E=nl(c,c===ri?yi:0);if(E===0)return null;if((E&30)!==0||(E&c.expiredLanes)!==0||d)d=Ay(c,E);else{d=E;var S=gn;gn|=2;var A=f4();(ri!==c||yi!==d)&&(ml=null,qd=He()+500,Yu(c,d));do try{oB();break}catch(ne){d4(c,ne)}while(!0);Ew(),xy.current=A,gn=S,Dr!==null?d=0:(ri=null,yi=0,d=Xr)}if(d!==0){if(d===2&&(S=q0(c),S!==0&&(E=S,d=i2(c,S))),d===1)throw m=Rg,Yu(c,0),pc(c,E),ms(c,He()),m;if(d===6)pc(c,E);else{if(S=c.current.alternate,(E&30)===0&&!sB(S)&&(d=Ay(c,E),d===2&&(A=q0(c),A!==0&&(E=A,d=i2(c,A))),d===1))throw m=Rg,Yu(c,0),pc(c,E),ms(c,He()),m;switch(c.finishedWork=S,c.finishedLanes=E,d){case 0:case 1:throw Error(t(345));case 2:Xu(c,gs,ml);break;case 3:if(pc(c,E),(E&130023424)===E&&(d=t2+500-He(),10<d)){if(nl(c,0)!==0)break;if(S=c.suspendedLanes,(S&E)!==E){Zi(),c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=uw(Xu.bind(null,c,gs,ml),d);break}Xu(c,gs,ml);break;case 4:if(pc(c,E),(E&4194240)===E)break;for(d=c.eventTimes,S=-1;0<E;){var G=31-lr(E);A=1<<G,G=d[G],G>S&&(S=G),E&=~A}if(E=S,E=He()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*iB(E/1960))-E,10<E){c.timeoutHandle=uw(Xu.bind(null,c,gs,ml),E);break}Xu(c,gs,ml);break;case 5:Xu(c,gs,ml);break;default:throw Error(t(329))}}}return ms(c,He()),c.callbackNode===m?u4.bind(null,c):null}function i2(c,d){var m=Cg;return c.current.memoizedState.isDehydrated&&(Yu(c,d).flags|=256),c=Ay(c,d),c!==2&&(d=gs,gs=m,d!==null&&s2(d)),c}function s2(c){gs===null?gs=c:gs.push.apply(gs,c)}function sB(c){for(var d=c;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var E=0;E<m.length;E++){var S=m[E],A=S.getSnapshot;S=S.value;try{if(!Pa(A(),S))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function pc(c,d){for(d&=~e2,d&=~vy,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var m=31-lr(d),E=1<<m;c[m]=-1,d&=~E}}function h4(c){if((gn&6)!==0)throw Error(t(327));Zd();var d=nl(c,0);if((d&1)===0)return ms(c,He()),null;var m=Ay(c,d);if(c.tag!==0&&m===2){var E=q0(c);E!==0&&(d=E,m=i2(c,E))}if(m===1)throw m=Rg,Yu(c,0),pc(c,d),ms(c,He()),m;if(m===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Xu(c,gs,ml),ms(c,He()),null}function a2(c,d){var m=gn;gn|=1;try{return c(d)}finally{gn=m,gn===0&&(qd=He()+500,J1&&cc())}}function Ku(c){gc!==null&&gc.tag===0&&(gn&6)===0&&Zd();var d=gn;gn|=1;var m=ca.transition,E=un;try{if(ca.transition=null,un=1,c)return c()}finally{un=E,ca.transition=m,gn=d,(gn&6)===0&&cc()}}function o2(){Gs=Xd.current,Zn(Xd)}function Yu(c,d){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,OG(m)),Dr!==null)for(m=Dr.return;m!==null;){var E=m;switch(pw(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Z1();break;case 3:Hd(),Zn(hs),Zn(Pi),Cw();break;case 5:bw(E);break;case 4:Hd();break;case 13:Zn(cr);break;case 19:Zn(cr);break;case 10:ww(E.type._context);break;case 22:case 23:o2()}m=m.return}if(ri=c,Dr=c=yc(c.current,null),yi=Gs=d,Xr=0,Rg=null,e2=vy=Hu=0,gs=Cg=null,zu!==null){for(d=0;d<zu.length;d++)if(m=zu[d],E=m.interleaved,E!==null){m.interleaved=null;var S=E.next,A=m.pending;if(A!==null){var G=A.next;A.next=S,E.next=G}m.pending=E}zu=null}return c}function d4(c,d){do{var m=Dr;try{if(Ew(),cy.current=fy,uy){for(var E=ur.memoizedState;E!==null;){var S=E.queue;S!==null&&(S.pending=null),E=E.next}uy=!1}if(Wu=0,ni=Yr=ur=null,wg=!1,Sg=0,Jw.current=null,m===null||m.return===null){Xr=1,Rg=d,Dr=null;break}e:{var A=c,G=m.return,ne=m,oe=d;if(d=yi,ne.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var ve=oe,ze=ne,Ke=ze.tag;if((ze.mode&1)===0&&(Ke===0||Ke===11||Ke===15)){var Be=ze.alternate;Be?(ze.updateQueue=Be.updateQueue,ze.memoizedState=Be.memoizedState,ze.lanes=Be.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var mt=FP(G);if(mt!==null){mt.flags&=-257,jP(mt,G,ne,A,d),mt.mode&1&&DP(A,ve,d),d=mt,oe=ve;var vt=d.updateQueue;if(vt===null){var wt=new Set;wt.add(oe),d.updateQueue=wt}else vt.add(oe);break e}else{if((d&1)===0){DP(A,ve,d),l2();break e}oe=Error(t(426))}}else if(rr&&ne.mode&1){var Ar=FP(G);if(Ar!==null){(Ar.flags&65536)===0&&(Ar.flags|=256),jP(Ar,G,ne,A,d),xw(Kd(oe,ne));break e}}A=oe=Kd(oe,ne),Xr!==4&&(Xr=2),Cg===null?Cg=[A]:Cg.push(A),A=G;do{switch(A.tag){case 3:A.flags|=65536,d&=-d,A.lanes|=d;var de=LP(A,oe,d);oP(A,de);break e;case 1:ne=oe;var le=A.type,pe=A.stateNode;if((A.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(fc===null||!fc.has(pe)))){A.flags|=65536,d&=-d,A.lanes|=d;var Qe=OP(A,ne,d);oP(A,Qe);break e}}A=A.return}while(A!==null)}m4(m)}catch(bt){d=bt,Dr===m&&m!==null&&(Dr=m=m.return);continue}break}while(!0)}function f4(){var c=xy.current;return xy.current=fy,c===null?fy:c}function l2(){(Xr===0||Xr===3||Xr===2)&&(Xr=4),ri===null||(Hu&268435455)===0&&(vy&268435455)===0||pc(ri,yi)}function Ay(c,d){var m=gn;gn|=2;var E=f4();(ri!==c||yi!==d)&&(ml=null,Yu(c,d));do try{aB();break}catch(S){d4(c,S)}while(!0);if(Ew(),gn=m,xy.current=E,Dr!==null)throw Error(t(261));return ri=null,yi=0,Xr}function aB(){for(;Dr!==null;)g4(Dr)}function oB(){for(;Dr!==null&&!ht();)g4(Dr)}function g4(c){var d=_4(c.alternate,c,Gs);c.memoizedProps=c.pendingProps,d===null?m4(c):Dr=d,Jw.current=null}function m4(c){var d=c;do{var m=d.alternate;if(c=d.return,(d.flags&32768)===0){if(m=JG(m,d,Gs),m!==null){Dr=m;return}}else{if(m=eB(m,d),m!==null){m.flags&=32767,Dr=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Xr=6,Dr=null;return}}if(d=d.sibling,d!==null){Dr=d;return}Dr=d=c}while(d!==null);Xr===0&&(Xr=5)}function Xu(c,d,m){var E=un,S=ca.transition;try{ca.transition=null,un=1,lB(c,d,m,E)}finally{ca.transition=S,un=E}return null}function lB(c,d,m,E){do Zd();while(gc!==null);if((gn&6)!==0)throw Error(t(327));m=c.finishedWork;var S=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var A=m.lanes|m.childLanes;if(YE(c,A),c===ri&&(Dr=ri=null,yi=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||wy||(wy=!0,x4(nr,function(){return Zd(),null})),A=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||A){A=ca.transition,ca.transition=null;var G=un;un=1;var ne=gn;gn|=4,Jw.current=null,nB(c,m),s4(m,c),RG(lw),sl=!!ow,lw=ow=null,c.current=m,rB(m),We(),gn=ne,un=G,ca.transition=A}else c.current=m;if(wy&&(wy=!1,gc=c,Sy=S),A=c.pendingLanes,A===0&&(fc=null),Ql(m.stateNode),ms(c,He()),d!==null)for(E=c.onRecoverableError,m=0;m<d.length;m++)S=d[m],E(S.value,{componentStack:S.stack,digest:S.digest});if(Ey)throw Ey=!1,c=n2,n2=null,c;return(Sy&1)!==0&&c.tag!==0&&Zd(),A=c.pendingLanes,(A&1)!==0?c===r2?Pg++:(Pg=0,r2=c):Pg=0,cc(),null}function Zd(){if(gc!==null){var c=uo(Sy),d=ca.transition,m=un;try{if(ca.transition=null,un=16>c?16:c,gc===null)var E=!1;else{if(c=gc,gc=null,Sy=0,(gn&6)!==0)throw Error(t(331));var S=gn;for(gn|=4,_t=c.current;_t!==null;){var A=_t,G=A.child;if((_t.flags&16)!==0){var ne=A.deletions;if(ne!==null){for(var oe=0;oe<ne.length;oe++){var ve=ne[oe];for(_t=ve;_t!==null;){var ze=_t;switch(ze.tag){case 0:case 11:case 15:bg(8,ze,A)}var Ke=ze.child;if(Ke!==null)Ke.return=ze,_t=Ke;else for(;_t!==null;){ze=_t;var Be=ze.sibling,mt=ze.return;if(e4(ze),ze===ve){_t=null;break}if(Be!==null){Be.return=mt,_t=Be;break}_t=mt}}}var vt=A.alternate;if(vt!==null){var wt=vt.child;if(wt!==null){vt.child=null;do{var Ar=wt.sibling;wt.sibling=null,wt=Ar}while(wt!==null)}}_t=A}}if((A.subtreeFlags&2064)!==0&&G!==null)G.return=A,_t=G;else e:for(;_t!==null;){if(A=_t,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:bg(9,A,A.return)}var de=A.sibling;if(de!==null){de.return=A.return,_t=de;break e}_t=A.return}}var le=c.current;for(_t=le;_t!==null;){G=_t;var pe=G.child;if((G.subtreeFlags&2064)!==0&&pe!==null)pe.return=G,_t=pe;else e:for(G=le;_t!==null;){if(ne=_t,(ne.flags&2048)!==0)try{switch(ne.tag){case 0:case 11:case 15:_y(9,ne)}}catch(bt){pr(ne,ne.return,bt)}if(ne===G){_t=null;break e}var Qe=ne.sibling;if(Qe!==null){Qe.return=ne.return,_t=Qe;break e}_t=ne.return}}if(gn=S,cc(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Ns,c)}catch{}E=!0}return E}finally{un=m,ca.transition=d}}return!1}function p4(c,d,m){d=Kd(m,d),d=LP(c,d,1),c=hc(c,d,1),d=Zi(),c!==null&&(Lu(c,1,d),ms(c,d))}function pr(c,d,m){if(c.tag===3)p4(c,c,m);else for(;d!==null;){if(d.tag===3){p4(d,c,m);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(fc===null||!fc.has(E))){c=Kd(m,c),c=OP(d,c,1),d=hc(d,c,1),c=Zi(),d!==null&&(Lu(d,1,c),ms(d,c));break}}d=d.return}}function cB(c,d,m){var E=c.pingCache;E!==null&&E.delete(d),d=Zi(),c.pingedLanes|=c.suspendedLanes&m,ri===c&&(yi&m)===m&&(Xr===4||Xr===3&&(yi&130023424)===yi&&500>He()-t2?Yu(c,0):e2|=m),ms(c,d)}function y4(c,d){d===0&&((c.mode&1)===0?d=1:(d=Jl,Jl<<=1,(Jl&130023424)===0&&(Jl=4194304)));var m=Zi();c=dl(c,d),c!==null&&(Lu(c,d,m),ms(c,m))}function uB(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),y4(c,m)}function hB(c,d){var m=0;switch(c.tag){case 13:var E=c.stateNode,S=c.memoizedState;S!==null&&(m=S.retryLane);break;case 19:E=c.stateNode;break;default:throw Error(t(314))}E!==null&&E.delete(d),y4(c,m)}var _4;_4=function(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps||hs.current)fs=!0;else{if((c.lanes&m)===0&&(d.flags&128)===0)return fs=!1,QG(c,d,m);fs=(c.flags&131072)!==0}else fs=!1,rr&&(d.flags&1048576)!==0&&ZC(d,ty,d.index);switch(d.lanes=0,d.tag){case 2:var E=d.type;py(c,d),c=d.pendingProps;var S=Vd(d,Pi.current);Wd(d,m),S=Mw(null,d,E,c,S,m);var A=Nw();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,ds(E)?(A=!0,Q1(d)):A=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Iw(d),S.updater=gy,d.stateNode=S,S._reactInternals=d,Vw(d,E,c,m),d=zw(null,d,E,!0,A,m)):(d.tag=0,rr&&A&&mw(d),qi(null,d,S,m),d=d.child),d;case 16:E=d.elementType;e:{switch(py(c,d),c=d.pendingProps,S=E._init,E=S(E._payload),d.type=E,S=d.tag=fB(E),c=Ma(E,c),S){case 0:d=Uw(null,d,E,c,m);break e;case 1:d=$P(null,d,E,c,m);break e;case 11:d=VP(null,d,E,c,m);break e;case 14:d=GP(null,d,E,Ma(E.type,c),m);break e}throw Error(t(306,E,""))}return d;case 0:return E=d.type,S=d.pendingProps,S=d.elementType===E?S:Ma(E,S),Uw(c,d,E,S,m);case 1:return E=d.type,S=d.pendingProps,S=d.elementType===E?S:Ma(E,S),$P(c,d,E,S,m);case 3:e:{if(WP(d),c===null)throw Error(t(387));E=d.pendingProps,A=d.memoizedState,S=A.element,aP(c,d),oy(d,E,null,m);var G=d.memoizedState;if(E=G.element,A.isDehydrated)if(A={element:E,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},d.updateQueue.baseState=A,d.memoizedState=A,d.flags&256){S=Kd(Error(t(423)),d),d=HP(c,d,E,m,S);break e}else if(E!==S){S=Kd(Error(t(424)),d),d=HP(c,d,E,m,S);break e}else for(Vs=ac(d.stateNode.containerInfo.firstChild),js=d,rr=!0,ka=null,m=iP(d,null,E,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Ud(),E===S){d=gl(c,d,m);break e}qi(c,d,E,m)}d=d.child}return d;case 5:return cP(d),c===null&&_w(d),E=d.type,S=d.pendingProps,A=c!==null?c.memoizedProps:null,G=S.children,cw(E,S)?G=null:A!==null&&cw(E,A)&&(d.flags|=32),zP(c,d),qi(c,d,G,m),d.child;case 6:return c===null&&_w(d),null;case 13:return KP(c,d,m);case 4:return Aw(d,d.stateNode.containerInfo),E=d.pendingProps,c===null?d.child=zd(d,null,E,m):qi(c,d,E,m),d.child;case 11:return E=d.type,S=d.pendingProps,S=d.elementType===E?S:Ma(E,S),VP(c,d,E,S,m);case 7:return qi(c,d,d.pendingProps,m),d.child;case 8:return qi(c,d,d.pendingProps.children,m),d.child;case 12:return qi(c,d,d.pendingProps.children,m),d.child;case 10:e:{if(E=d.type._context,S=d.pendingProps,A=d.memoizedProps,G=S.value,Yn(iy,E._currentValue),E._currentValue=G,A!==null)if(Pa(A.value,G)){if(A.children===S.children&&!hs.current){d=gl(c,d,m);break e}}else for(A=d.child,A!==null&&(A.return=d);A!==null;){var ne=A.dependencies;if(ne!==null){G=A.child;for(var oe=ne.firstContext;oe!==null;){if(oe.context===E){if(A.tag===1){oe=fl(-1,m&-m),oe.tag=2;var ve=A.updateQueue;if(ve!==null){ve=ve.shared;var ze=ve.pending;ze===null?oe.next=oe:(oe.next=ze.next,ze.next=oe),ve.pending=oe}}A.lanes|=m,oe=A.alternate,oe!==null&&(oe.lanes|=m),Sw(A.return,m,d),ne.lanes|=m;break}oe=oe.next}}else if(A.tag===10)G=A.type===d.type?null:A.child;else if(A.tag===18){if(G=A.return,G===null)throw Error(t(341));G.lanes|=m,ne=G.alternate,ne!==null&&(ne.lanes|=m),Sw(G,m,d),G=A.sibling}else G=A.child;if(G!==null)G.return=A;else for(G=A;G!==null;){if(G===d){G=null;break}if(A=G.sibling,A!==null){A.return=G.return,G=A;break}G=G.return}A=G}qi(c,d,S.children,m),d=d.child}return d;case 9:return S=d.type,E=d.pendingProps.children,Wd(d,m),S=oa(S),E=E(S),d.flags|=1,qi(c,d,E,m),d.child;case 14:return E=d.type,S=Ma(E,d.pendingProps),S=Ma(E.type,S),GP(c,d,E,S,m);case 15:return BP(c,d,d.type,d.pendingProps,m);case 17:return E=d.type,S=d.pendingProps,S=d.elementType===E?S:Ma(E,S),py(c,d),d.tag=1,ds(E)?(c=!0,Q1(d)):c=!1,Wd(d,m),MP(d,E,S),Vw(d,E,S,m),zw(null,d,E,!0,c,m);case 19:return XP(c,d,m);case 22:return UP(c,d,m)}throw Error(t(156,d.tag))};function x4(c,d){return $e(c,d)}function dB(c,d,m,E){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ua(c,d,m,E){return new dB(c,d,m,E)}function c2(c){return c=c.prototype,!(!c||!c.isReactComponent)}function fB(c){if(typeof c=="function")return c2(c)?1:0;if(c!=null){if(c=c.$$typeof,c===U)return 11;if(c===Ce)return 14}return 2}function yc(c,d){var m=c.alternate;return m===null?(m=ua(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function by(c,d,m,E,S,A){var G=2;if(E=c,typeof c=="function")c2(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case M:return qu(m.children,S,A,d);case C:G=8,S|=8;break;case P:return c=ua(12,m,d,S|2),c.elementType=P,c.lanes=A,c;case j:return c=ua(13,m,d,S),c.elementType=j,c.lanes=A,c;case xe:return c=ua(19,m,d,S),c.elementType=xe,c.lanes=A,c;case ke:return Ry(m,S,A,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case L:G=10;break e;case O:G=9;break e;case U:G=11;break e;case Ce:G=14;break e;case Ge:G=16,E=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return d=ua(G,m,d,S),d.elementType=c,d.type=E,d.lanes=A,d}function qu(c,d,m,E){return c=ua(7,c,E,d),c.lanes=m,c}function Ry(c,d,m,E){return c=ua(22,c,E,d),c.elementType=ke,c.lanes=m,c.stateNode={isHidden:!1},c}function u2(c,d,m){return c=ua(6,c,null,d),c.lanes=m,c}function h2(c,d,m){return d=ua(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function gB(c,d,m,E,S){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q0(0),this.expirationTimes=Q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q0(0),this.identifierPrefix=E,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function d2(c,d,m,E,S,A,G,ne,oe){return c=new gB(c,d,m,ne,oe),d===1?(d=1,A===!0&&(d|=8)):d=0,A=ua(3,null,null,d),c.current=A,A.stateNode=c,A.memoizedState={element:E,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iw(A),c}function mB(c,d,m){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:E==null?null:""+E,children:c,containerInfo:d,implementation:m}}function v4(c){if(!c)return lc;c=c._reactInternals;e:{if(ee(c)!==c||c.tag!==1)throw Error(t(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(ds(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(c.tag===1){var m=c.type;if(ds(m))return YC(c,m,d)}return d}function E4(c,d,m,E,S,A,G,ne,oe){return c=d2(m,E,!0,c,S,A,G,ne,oe),c.context=v4(null),m=c.current,E=Zi(),S=mc(m),A=fl(E,S),A.callback=d??null,hc(m,A,S),c.current.lanes=S,Lu(c,S,E),ms(c,E),c}function Cy(c,d,m,E){var S=d.current,A=Zi(),G=mc(S);return m=v4(m),d.context===null?d.context=m:d.pendingContext=m,d=fl(A,G),d.payload={element:c},E=E===void 0?null:E,E!==null&&(d.callback=E),c=hc(S,d,G),c!==null&&(Oa(c,S,G,A),ay(c,S,G)),G}function Py(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function w4(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function f2(c,d){w4(c,d),(c=c.alternate)&&w4(c,d)}function pB(){return null}var S4=typeof reportError=="function"?reportError:function(c){console.error(c)};function g2(c){this._internalRoot=c}ky.prototype.render=g2.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(t(409));Cy(c,d,null,null)},ky.prototype.unmount=g2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;Ku(function(){Cy(null,c,null,null)}),d[ll]=null}};function ky(c){this._internalRoot=c}ky.prototype.unstable_scheduleHydration=function(c){if(c){var d=ng();c={blockedOn:null,target:c,priority:d};for(var m=0;m<Ls.length&&d!==0&&d<Ls[m].priority;m++);Ls.splice(m,0,c),m===0&&Sd(c)}};function m2(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function My(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function T4(){}function yB(c,d,m,E,S){if(S){if(typeof E=="function"){var A=E;E=function(){var ve=Py(G);A.call(ve)}}var G=E4(d,E,c,0,null,!1,!1,"",T4);return c._reactRootContainer=G,c[ll]=G.current,gg(c.nodeType===8?c.parentNode:c),Ku(),G}for(;S=c.lastChild;)c.removeChild(S);if(typeof E=="function"){var ne=E;E=function(){var ve=Py(oe);ne.call(ve)}}var oe=d2(c,0,!1,null,null,!1,!1,"",T4);return c._reactRootContainer=oe,c[ll]=oe.current,gg(c.nodeType===8?c.parentNode:c),Ku(function(){Cy(d,oe,m,E)}),oe}function Ny(c,d,m,E,S){var A=m._reactRootContainer;if(A){var G=A;if(typeof S=="function"){var ne=S;S=function(){var oe=Py(G);ne.call(oe)}}Cy(d,G,c,S)}else G=yB(m,d,c,S,E);return Py(G)}eg=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var m=wn(d.pendingLanes);m!==0&&(J0(d,m|1),ms(d,He()),(gn&6)===0&&(qd=He()+500,cc()))}break;case 13:Ku(function(){var E=dl(c,1);if(E!==null){var S=Zi();Oa(E,c,1,S)}}),f2(c,1)}},Ed=function(c){if(c.tag===13){var d=dl(c,134217728);if(d!==null){var m=Zi();Oa(d,c,134217728,m)}f2(c,134217728)}},tg=function(c){if(c.tag===13){var d=mc(c),m=dl(c,d);if(m!==null){var E=Zi();Oa(m,c,d,E)}f2(c,d)}},ng=function(){return un},rg=function(c,d){var m=un;try{return un=c,d()}finally{un=m}},Nr=function(c,d,m){switch(d){case"input":if(Oe(c,m),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var E=m[d];if(E!==c&&E.form===c.form){var S=q1(E);if(!S)throw Error(t(90));Ye(E),Oe(E,S)}}}break;case"textarea":Ee(c,m);break;case"select":d=m.value,d!=null&&It(c,!!m.multiple,d,!1)}},cs=a2,Wr=Ku;var _B={usingClientEntryPoint:!1,Events:[yg,Fd,q1,Xi,ar,a2]},kg={findFiberByHostInstance:Vu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xB={bundleType:kg.bundleType,version:kg.version,rendererPackageName:kg.rendererPackageName,rendererConfig:kg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ye(c),c===null?null:c.stateNode},findFiberByHostInstance:kg.findFiberByHostInstance||pB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ly.isDisabled&&Ly.supportsFiber)try{Ns=Ly.inject(xB),Tr=Ly}catch{}}return ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_B,ps.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m2(d))throw Error(t(200));return mB(c,d,null,m)},ps.createRoot=function(c,d){if(!m2(c))throw Error(t(299));var m=!1,E="",S=S4;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=d2(c,1,!1,null,null,m,!1,E,S),c[ll]=d.current,gg(c.nodeType===8?c.parentNode:c),new g2(d)},ps.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=ye(d),c=c===null?null:c.stateNode,c},ps.flushSync=function(c){return Ku(c)},ps.hydrate=function(c,d,m){if(!My(d))throw Error(t(200));return Ny(null,c,d,!0,m)},ps.hydrateRoot=function(c,d,m){if(!m2(c))throw Error(t(405));var E=m!=null&&m.hydratedSources||null,S=!1,A="",G=S4;if(m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(G=m.onRecoverableError)),d=E4(d,null,c,1,m??null,S,!1,A,G),c[ll]=d.current,gg(c),E)for(c=0;c<E.length;c++)m=E[c],S=m._getVersion,S=S(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,S]:d.mutableSourceEagerHydrationData.push(m,S);return new ky(d)},ps.render=function(c,d,m){if(!My(d))throw Error(t(200));return Ny(null,c,d,!1,m)},ps.unmountComponentAtNode=function(c){if(!My(c))throw Error(t(40));return c._reactRootContainer?(Ku(function(){Ny(null,null,c,!1,function(){c._reactRootContainer=null,c[ll]=null})}),!0):!1},ps.unstable_batchedUpdates=a2,ps.unstable_renderSubtreeIntoContainer=function(c,d,m,E){if(!My(m))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return Ny(c,d,m,!1,E)},ps.version="18.3.1-next-f1338f8080-20240426",ps}var M4;function bB(){if(M4)return _2.exports;M4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_2.exports=AB(),_2.exports}var N4;function RB(){if(N4)return Oy;N4=1;var n=bB();return Oy.createRoot=n.createRoot,Oy.hydrateRoot=n.hydrateRoot,Oy}var CB=RB();const PB=zI(CB);var se=Dp();const kB=zI(se),xs={ADD:"add",REMOVE:"remove"},i0={PROPERTYCHANGE:"propertychange"},Wt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Av{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function MB(n,e,t){let r,i;t=t||bl;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function bl(n,e){return n>e?1:n<e?-1:0}function NB(n,e){return n<e?1:n>e?-1:0}function bv(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function LB(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function Pn(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function Su(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function OB(n,e,t){const r=e||bl;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function zm(){return!0}function Rv(){return!1}function $m(){}function GO(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!Su(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function BO(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Fp(n){for(const e in n)delete n[e]}function Nh(n){let e;for(e in n)return!1;return!e}class Qo{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let jp=class extends Av{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new Qo(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let l;for(let u=0,h=i.length;u<h;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(s):l=i[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[r]===0){let u=o[r];for(delete o[r];u--;)this.removeEventListener(r,$m);delete a[r]}return l}disposeInternal(){this.listeners_&&Fp(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=$m,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function fn(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function q_(n,e,t,r){return fn(n,e,t,r,!0)}function Xn(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Fp(n))}class Vp extends jp{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Wt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=fn(this,e[s],t);return i}return fn(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=q_(this,e[s],t)}else r=q_(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)DB(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Vp.prototype.on;Vp.prototype.once;Vp.prototype.un;function DB(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Xn(n[e]);else Xn(n)}function Vt(){throw new Error("Unimplemented abstract method.")}let FB=0;function En(n){return n.ol_uid||(n.ol_uid=String(++FB))}class L4 extends Qo{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Jo extends Vp{constructor(e){super(),this.on,this.once,this.un,En(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new L4(r,e,t)),r=i0.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new L4(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Nh(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const O4={LENGTH:"length"};class Dy extends Qo{constructor(e,t,r){super(e),this.element=t,this.index=r}}class _a extends Jo{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(O4.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Dy(xs.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Dy(xs.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Dy(xs.REMOVE,i,e)),this.dispatchEvent(new Dy(xs.ADD,t,e))}updateLength_(){this.set(O4.LENGTH,this.array_.length)}assertUnique_(e,t){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function Nn(n,e){if(!n)throw new Error(e)}let to=class UO extends Jo{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new UO(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Xn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=fn(e,Wt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?jB(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function jB(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Nn(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const si={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function D4(n){const e=Qs();for(let t=0,r=n.length;t<r;++t)dm(e,n[t]);return e}function Wm(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function zO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function rd(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Lh(n,e){return $I(n,e[0],e[1])}function Vc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function $I(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function YS(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let l=si.UNKNOWN;return a<t?l=l|si.LEFT:a>i&&(l=l|si.RIGHT),o<r?l=l|si.BELOW:o>s&&(l=l|si.ABOVE),l===si.UNKNOWN&&(l=si.INTERSECTING),l}function Qs(){return[1/0,1/0,-1/0,-1/0]}function su(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Gp(n){return su(1/0,1/0,-1/0,-1/0,n)}function $O(n,e){const t=n[0],r=n[1];return su(t,r,t,r,e)}function WI(n,e,t,r,i){const s=Gp(i);return HO(s,n,e,t,r)}function s0(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function WO(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function dm(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function HO(n,e,t,r,i){for(;t<r;t+=i)VB(n,e[t],e[t+1]);return n}function VB(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function KO(n,e){let t;return t=e(Cv(n)),t||(t=e(Pv(n)),t)||(t=e(kv(n)),t)||(t=e(id(n)),t)?t:!1}function XS(n){let e=0;return M0(n)||(e=sn(n)*Vr(n)),e}function Cv(n){return[n[0],n[1]]}function Pv(n){return[n[2],n[1]]}function zo(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function GB(n,e){let t;if(e==="bottom-left")t=Cv(n);else if(e==="bottom-right")t=Pv(n);else if(e==="top-left")t=id(n);else if(e==="top-right")t=kv(n);else throw new Error("Invalid corner");return t}function Z_(n,e,t,r,i){const[s,a,o,l,u,h,f,g]=YO(n,e,t,r);return su(Math.min(s,o,u,f),Math.min(a,l,h,g),Math.max(s,o,u,f),Math.max(a,l,h,g),i)}function YO(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),l=i*a,u=i*o,h=s*a,f=s*o,g=n[0],y=n[1];return[g-l+f,y-u-h,g-l-f,y-u+h,g+l-f,y+u+h,g+l+f,y+u-h,g-l+f,y-u-h]}function Vr(n){return n[3]-n[1]}function Rl(n,e,t){const r=t||Qs();return ns(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Gp(r),r}function id(n){return[n[0],n[3]]}function kv(n){return[n[2],n[3]]}function sn(n){return n[2]-n[0]}function ns(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function M0(n){return n[2]<n[0]||n[3]<n[1]}function BB(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function UB(n,e,t){let r=!1;const i=YS(n,e),s=YS(n,t);if(i===si.INTERSECTING||s===si.INTERSECTING)r=!0;else{const a=n[0],o=n[1],l=n[2],u=n[3],h=e[0],f=e[1],g=t[0],y=t[1],v=(y-f)/(g-h);let x,w;s&si.ABOVE&&!(i&si.ABOVE)&&(x=g-(y-u)/v,r=x>=a&&x<=l),!r&&s&si.RIGHT&&!(i&si.RIGHT)&&(w=y-(g-l)*v,r=w>=o&&w<=u),!r&&s&si.BELOW&&!(i&si.BELOW)&&(x=g-(y-o)/v,r=x>=a&&x<=l),!r&&s&si.LEFT&&!(i&si.LEFT)&&(w=y-(g-a)*v,r=w>=o&&w<=u)}return r}function XO(n,e){const t=e.getExtent(),r=zo(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=sn(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function qO(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];XO(n,e);const i=sn(r);if(sn(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function Qn(n,e,t){return Math.min(Math.max(n,e),t)}function zB(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const l=((n-t)*a+(e-r)*o)/(a*a+o*o);l>1?(t=i,r=s):l>0&&(t+=a*l,r+=o*l)}return Ih(n,e,t,r)}function Ih(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function $B(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const l=Math.abs(n[o][r]);l>s&&(s=l,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const l=-n[o][r]/n[r][r];for(let u=r;u<e+1;u++)r==u?n[o][u]=0:n[o][u]+=l*n[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function F4(n){return n*180/Math.PI}function Cl(n){return n*Math.PI/180}function qc(n,e){const t=n%e;return t*e<0?t+e:t}function $s(n,e,t){return n+t*(e-n)}function Bp(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Q_(n,e){return Math.round(Bp(n,e))}function Fy(n,e){return Math.floor(Bp(n,e))}function Gc(n,e){return Math.ceil(Bp(n,e))}function qS(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function Ng(n,e,t){const r=""+n;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function ZO(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const s=parseInt(t[i]||"0",10),a=parseInt(r[i]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function WB(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function J_(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function HI(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function HB(n,e){return n[0]*=e,n[1]*=e,n}function QO(n,e){if(e.canWrapX()){const t=sn(e.getExtent()),r=JO(n,e,t);r&&(n[0]-=r*t)}return n}function JO(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||sn(r),i=Math.floor((n[0]-r[0])/t)),i}function e5(...n){console.warn(...n)}const a0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Mv=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||a0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Up=6378137,Cf=Math.PI*Up,KB=[-Cf,-Cf,Cf,Cf],YB=[-180,-85,180,85],jy=Up*Math.log(Math.tan(Math.PI/2));class Qd extends Mv{constructor(e){super({code:e,units:"m",extent:KB,global:!0,worldExtent:YB,getPointResolution:function(t,r){return t/Math.cosh(r[1]/Up)}})}}const j4=[new Qd("EPSG:3857"),new Qd("EPSG:102100"),new Qd("EPSG:102113"),new Qd("EPSG:900913"),new Qd("http://www.opengis.net/def/crs/EPSG/0/3857"),new Qd("http://www.opengis.net/gml/srs/epsg.xml#3857")];function XB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=Cf*n[s]/180;let a=Up*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>jy?a=jy:a<-jy&&(a=-jy),e[s+1]=a}return e}function qB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/Cf,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Up))/Math.PI-90;return e}const ZB=6378137,V4=[-180,-90,180,90],QB=Math.PI*ZB/180;class Zu extends Mv{constructor(e,t){super({code:e,units:"degrees",extent:V4,axisOrientation:t,global:!0,metersPerUnit:QB,worldExtent:V4})}}const G4=[new Zu("CRS:84"),new Zu("EPSG:4326","neu"),new Zu("urn:ogc:def:crs:OGC:1.3:CRS84"),new Zu("urn:ogc:def:crs:OGC:2:84"),new Zu("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Zu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Zu("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ZS={};function w_(n){return ZS[n]||ZS[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function JB(n,e){ZS[n]=e}let Gf={};function Oh(n,e,t){const r=n.getCode(),i=e.getCode();r in Gf||(Gf[r]={}),Gf[r][i]=t}function S_(n,e){return n in Gf&&e in Gf[n]?Gf[n][e]:null}const ex=.9996,wa=.00669438,Nv=wa*wa,Lv=Nv*wa,ph=wa/(1-wa),B4=Math.sqrt(1-wa),o0=(1-B4)/(1+B4),t5=o0*o0,KI=t5*o0,YI=KI*o0,n5=YI*o0,r5=1-wa/4-3*Nv/64-5*Lv/256,eU=3*wa/8+3*Nv/32+45*Lv/1024,tU=15*Nv/256+45*Lv/1024,nU=35*Lv/3072,rU=3/2*o0-27/32*KI+269/512*n5,iU=21/16*t5-55/32*YI,sU=151/96*KI-417/128*n5,aU=1097/512*YI,tx=6378137;function oU(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/ex/(tx*r5),o=a+rU*Math.sin(2*a)+iU*Math.sin(4*a)+sU*Math.sin(6*a)+aU*Math.sin(8*a),l=Math.sin(o),u=l*l,h=Math.cos(o),f=l/h,g=f*f,y=g*g,v=1-wa*u,x=Math.sqrt(1-wa*u),w=tx/x,T=(1-wa)/v,I=ph*h**2,b=I*I,N=r/(w*ex),F=N*N,W=F*N,M=W*N,C=M*N,P=C*N,L=o-f/T*(F/2-M/24*(5+3*g+10*I-4*b-9*ph))+P/720*(61+90*g+298*I+45*y-252*ph-3*b);let O=(N-W/6*(1+2*g+I)+C/120*(5-2*I+28*g-3*b+8*ph+24*y))/h;return O=qS(O+Cl(i5(t.number)),-Math.PI,Math.PI),[F4(O),F4(L)]}const U4=-80,z4=84,lU=-180,cU=180;function uU(n,e,t){n=qS(n,lU,cU),e<U4?e=U4:e>z4&&(e=z4);const r=Cl(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,l=o*o,u=Cl(n),h=i5(t.number),f=Cl(h),g=tx/Math.sqrt(1-wa*i**2),y=ph*s**2,v=s*qS(u-f,-Math.PI,Math.PI),x=v*v,w=x*v,T=w*v,I=T*v,b=I*v,N=tx*(r5*r-eU*Math.sin(2*r)+tU*Math.sin(4*r)-nU*Math.sin(6*r)),F=ex*g*(v+w/6*(1-o+y)+I/120*(5-18*o+l+72*y-58*ph))+5e5;let W=ex*(N+g*a*(x/2+T/24*(5-o+9*y+4*y**2)+b/720*(61-58*o+l+600*y-330*ph)));return t.north||(W+=1e7),[F,W]}function i5(n){return(n-1)*6-180+3}const hU=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function s5(n){let e=0;for(const i of hU){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function $4(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],u=t[o+1],h=n(l,u,e);r[o]=h[0],r[o+1]=h[1]}return r}}function dU(n){return s5(n)?new Mv({code:n,units:"m"}):null}function fU(n){const e=s5(n.getCode());return e?{forward:$4(uU,e),inverse:$4(oU,e)}:null}const gU=63710088e-1;function W4(n,e,t){t=t||gU;const r=Cl(n[1]),i=Cl(e[1]),s=(i-r)/2,a=Cl(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const mU=[fU],pU=[dU];let QS=!0;function a5(n){QS=!1}function XI(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function nx(n){JB(n.getCode(),n),Oh(n,n,XI)}function yU(n){n.forEach(nx)}function Wn(n){if(typeof n!="string")return n;const e=w_(n);if(e)return e;for(const t of pU){const r=t(n);if(r)return r}return null}function rx(n,e,t,r){n=Wn(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/a0[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=ZI(n,Wn("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=o(u,u,2);const h=W4(u.slice(0,2),u.slice(2,4)),f=W4(u.slice(4,6),u.slice(6,8));i=(h+f)/2}const l=r?a0[r]:n.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function JS(n){yU(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Oh(e,t,XI)})})}function _U(n,e,t,r){n.forEach(function(i){e.forEach(function(s){Oh(i,s,t),Oh(s,i,r)})})}function qI(n,e){return n?typeof n=="string"?Wn(n):n:Wn(e)}function eT(n){return(function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),l=o.length;for(let u=0,h=i;u<h;++u)t[a+u]=u>=l?e[a+u]:o[u]}return t})}function xU(n,e,t,r){const i=Wn(n),s=Wn(e);Oh(i,s,eT(t)),Oh(s,i,eT(r))}function au(n,e){return a5(),zp(n,"EPSG:4326","EPSG:3857")}function mn(n,e){const t=zp(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=qc(r+180,360)-180),t}function Ah(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||ZI(n,e)===XI)&&t}function ZI(n,e){const t=n.getCode(),r=e.getCode();let i=S_(t,r);if(i)return i;let s=null,a=null;for(const l of mU)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=E2(s.inverse,a.forward);else{const l=S_(t,o);l&&(i=E2(l,a.forward))}else{const l=S_(o,r);l&&(i=E2(s.inverse,l))}return i&&(nx(n),nx(e),Oh(n,e,i)),i}function E2(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function Hm(n,e){const t=Wn(n),r=Wn(e);return ZI(t,r)}function zp(n,e,t){const r=Hm(e,t);if(!r){const i=Wn(e).getCode(),s=Wn(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}function tT(n,e){return n}function xl(n,e){return QS&&!J_(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(QS=!1,e5("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function o5(n,e){return n}function ko(n,e){return n}function H4(n,e,t){return function(r){let i,s;if(n.canWrapX()){const a=n.getExtent(),o=sn(a);r=r.slice(0),s=JO(r,n,o),s&&(r[0]=r[0]-s*o),r[0]=Qn(r[0],a[0],a[2]),r[1]=Qn(r[1],a[1],a[3]),i=t(r)}else i=t(r);return s&&e.canWrapX()&&(i[0]+=s*sn(e.getExtent())),i}}function vU(){JS(j4),JS(G4),_U(G4,j4,XB,qB)}vU();new Array(6);function Xa(){return[1,0,0,1,0,0]}function EU(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Qr(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function $o(n,e,t,r,i,s,a,o){const l=Math.sin(s),u=Math.cos(s);return n[0]=r*u,n[1]=i*l,n[2]=-r*l,n[3]=i*u,n[4]=a*r*u-o*r*l+e,n[5]=a*i*l+o*i*u+t,n}function l5(n,e){const t=wU(e);Nn(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*l-a*o)/t,n[5]=-(r*l-i*o)/t,n}function wU(n){return n[0]*n[3]-n[1]*n[2]}const SU=[1e5,1e5,1e5,1e5,2,2];function TU(n){return"matrix("+n.join(", ")+")"}function nT(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function IU(n,e){const t=nT(n),r=nT(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*SU[i])!==0)return!1;return!0}function Zc(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=r){const u=n[l],h=n[l+1];s[o++]=i[0]*u+i[2]*h+i[4],s[o++]=i[1]*u+i[3]*h+i[5];for(let f=2;f<a;f++)s[o++]=n[l+f]}return s&&s.length!=o&&(s.length=o),s}function c5(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),l=Math.sin(i),u=s[0],h=s[1];let f=0;for(let g=e;g<t;g+=r){const y=n[g]-u,v=n[g+1]-h;a[f++]=u+y*o-v*l,a[f++]=h+y*l+v*o;for(let x=g+2;x<g+r;++x)a[f++]=n[x]}return a&&a.length!=f&&(a.length=f),a}function AU(n,e,t,r,i,s,a,o){o=o||[];const l=a[0],u=a[1];let h=0;for(let f=e;f<t;f+=r){const g=n[f]-l,y=n[f+1]-u;o[h++]=l+i*g,o[h++]=u+s*y;for(let v=f+2;v<f+r;++v)o[h++]=n[v]}return o&&o.length!=h&&(o.length=h),o}function bU(n,e,t,r,i,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=r){a[o++]=n[l]+i,a[o++]=n[l+1]+s;for(let u=l+2;u<l+r;++u)a[o++]=n[u]}return a&&a.length!=o&&(a.length=o),a}const K4=Xa(),RU=[NaN,NaN];class u5 extends Jo{constructor(){super(),this.extent_=Qs(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=GO((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Vt()}closestPointXY(e,t,r,i){return Vt()}containsXY(e,t){return this.closestPointXY(e,t,RU,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Vt()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Gp(t),this.extentRevision_=this.getRevision()}return BB(this.extent_,e)}rotate(e,t){Vt()}scale(e,t,r){Vt()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Vt()}getType(){return Vt()}applyTransform(e){Vt()}intersectsExtent(e){return Vt()}translate(e,t){Vt()}transform(e,t){const r=Wn(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const l=r.getExtent(),u=r.getWorldExtent(),h=Vr(u)/Vr(l);$o(K4,u[0],u[3],h,-h,0,0,0);const f=Zc(s,0,s.length,o,K4,a),g=Hm(r,t);return g?g(f,f,o):f}:Hm(r,t);return this.applyTransform(i),this}}class sd extends u5{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return WI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Vt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Y4(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Vt()}setLayout(e,t,r){let i;if(e)i=Y4(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=ad(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();c5(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=zo(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();AU(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();bU(r,0,r.length,i,e,t,r),this.changed()}}}function ad(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Y4(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function CU(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return Zc(r,0,r.length,i,e,t)}function X4(n,e,t,r,i,s,a){const o=n[e],l=n[e+1],u=n[t]-o,h=n[t+1]-l;let f;if(u===0&&h===0)f=e;else{const g=((i-o)*u+(s-l)*h)/(u*u+h*h);if(g>1)f=t;else if(g>0){for(let y=0;y<r;++y)a[y]=$s(n[e+y],n[t+y],g);a.length=r;return}else f=e}for(let g=0;g<r;++g)a[g]=n[f+g];a.length=r}function QI(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],l=n[e+1],u=Ih(s,a,o,l);u>i&&(i=u),s=o,a=l}return i}function JI(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=QI(n,e,o,r,i),e=o}return i}function PU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=JI(n,e,o,r,i),e=o[o.length-1]}return i}function eA(n,e,t,r,i,s,a,o,l,u,h){if(e==t)return u;let f,g;if(i===0){if(g=Ih(a,o,n[e],n[e+1]),g<u){for(f=0;f<r;++f)l[f]=n[e+f];return l.length=r,g}return u}h=h||[NaN,NaN];let y=e+r;for(;y<t;)if(X4(n,y-r,y,r,a,o,h),g=Ih(a,o,h[0],h[1]),g<u){for(u=g,f=0;f<r;++f)l[f]=h[f];l.length=r,y+=r}else y+=r*Math.max((Math.sqrt(g)-Math.sqrt(u))/i|0,1);if(s&&(X4(n,t-r,e,r,a,o,h),g=Ih(a,o,h[0],h[1]),g<u)){for(u=g,f=0;f<r;++f)l[f]=h[f];l.length=r}return u}function tA(n,e,t,r,i,s,a,o,l,u,h){h=h||[NaN,NaN];for(let f=0,g=t.length;f<g;++f){const y=t[f];u=eA(n,e,y,r,i,s,a,o,l,u,h),e=y}return u}function kU(n,e,t,r,i,s,a,o,l,u,h){h=h||[NaN,NaN];for(let f=0,g=t.length;f<g;++f){const y=t[f];u=tA(n,e,y,r,i,s,a,o,l,u,h),e=y[y.length-1]}return u}function MU(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Ov(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function $p(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Ov(n,e,t[a],r);i[s++]=l,e=l}return i.length=s,i}function h5(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=$p(n,e,t[a],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function Bc(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function Km(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=Bc(n,e,l,r,i[s]),e=l}return i.length=s,i}function rT(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=l.length===1&&l[0]===e?[]:Km(n,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function ix(n,e,t,r,i,s,a){let o,l;const u=(t-e)/r;if(u===1)o=e;else if(u===2)o=e,l=i;else if(u!==0){let h=n[e],f=n[e+1],g=0;const y=[0];for(let w=e+r;w<t;w+=r){const T=n[w],I=n[w+1];g+=Math.sqrt((T-h)*(T-h)+(I-f)*(I-f)),y.push(g),h=T,f=I}const v=i*g,x=MB(y,v);x<0?(l=(v-y[-x-2])/(y[-x-1]-y[-x-2]),o=e+(-x-2)*r):o=e+x*r}a=a>1?a:2,s=s||new Array(a);for(let h=0;h<a;++h)s[h]=o===void 0?NaN:l===void 0?n[o+h]:$s(n[o+h],n[o+r+h],l);return s}function iT(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,l=t/r;for(;o<l;){const g=o+l>>1;i<n[(g+1)*r-1]?l=g:o=g+1}const u=n[o*r-1];if(i==u)return n.slice((o-1)*r,(o-1)*r+r);const h=n[(o+1)*r-1],f=(i-u)/(h-u);a=[];for(let g=0;g<r-1;++g)a.push($s(n[(o-1)*r+g],n[o*r+g],f));return a.push(i),a}function NU(n,e,t,r,i,s,a){if(a)return iT(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let l=0,u=t.length;l<u;++l){const h=t[l];if(e!=h){if(i<n[e+r-1])return null;if(i<=n[h-1])return iT(n,e,h,r,i,!1);e=h}}return null}function LU(n,e,t,r,i){return!KO(i,function(a){return!yh(n,e,t,r,a[0],a[1])})}function yh(n,e,t,r,i,s){let a=0,o=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const u=n[e],h=n[e+1];l<=s?h>s&&(u-o)*(s-l)-(i-o)*(h-l)>0&&a++:h<=s&&(u-o)*(s-l)-(i-o)*(h-l)<0&&a--,o=u,l=h}return a!==0}function nA(n,e,t,r,i,s){if(t.length===0||!yh(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(yh(n,t[a-1],t[a],r,i,s))return!1;return!0}function OU(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const l=t[a];if(nA(n,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function d5(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Dv(n,e,t,r,i,s){return s=s??HO(Qs(),n,e,t,r),ns(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:d5(n,e,t,r,function(a,o){return UB(i,a,o)}):!1}function DU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(Dv(n,e,t[s],r,i))return!0;e=t[s]}return!1}function f5(n,e,t,r,i){return!!(Dv(n,e,t,r,i)||yh(n,e,t,r,i[0],i[1])||yh(n,e,t,r,i[0],i[3])||yh(n,e,t,r,i[2],i[1])||yh(n,e,t,r,i[2],i[3]))}function g5(n,e,t,r,i){if(!f5(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(LU(n,t[s-1],t[s],r,i)&&!Dv(n,t[s-1],t[s],r,i))return!1;return!0}function FU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(g5(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function rA(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const l=n[o],u=n[o+1];a+=Math.sqrt((l-i)*(l-i)+(u-s)*(u-s)),i=l,s=u}return a}function Fv(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[e,t-r];let h=0;for(;u.length>0;){const f=u.pop(),g=u.pop();let y=0;const v=n[g],x=n[g+1],w=n[f],T=n[f+1];for(let I=g+r;I<f;I+=r){const b=n[I],N=n[I+1],F=zB(b,N,v,x,w,T);F>y&&(h=I,y=F)}y>i&&(l[(h-e)/r]=1,g+r<h&&u.push(g,h),h+r<f&&u.push(h,f))}for(let f=0;f<o;++f)l[f]&&(s[a++]=n[e+f*r],s[a++]=n[e+f*r+1]);return a}function m5(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l];a=Fv(n,e,h,r,i,s,a),o.push(a),e=h}return a}function th(n,e){return e*Math.round(n/e)}function jU(n,e,t,r,i,s,a){if(e==t)return a;let o=th(n[e],i),l=th(n[e+1],i);e+=r,s[a++]=o,s[a++]=l;let u,h;do if(u=th(n[e],i),h=th(n[e+1],i),e+=r,e==t)return s[a++]=u,s[a++]=h,a;while(u==o&&h==l);for(;e<t;){const f=th(n[e],i),g=th(n[e+1],i);if(e+=r,f==u&&g==h)continue;const y=u-o,v=h-l,x=f-o,w=g-l;if(y*w==v*x&&(y<0&&x<y||y==x||y>0&&x>y)&&(v<0&&w<v||v==w||v>0&&w>v)){u=f,h=g;continue}s[a++]=u,s[a++]=h,o=u,l=h,u=f,h=g}return s[a++]=u,s[a++]=h,a}function iA(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l];a=jU(n,e,h,r,i,s,a),o.push(a),e=h}return a}function VU(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l],f=[];a=iA(n,e,h,r,i,s,a,f),o.push(f),e=h[h.length-1]}return a}class Wo extends sd{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Pn(this.flatCoordinates,e),this.changed()}clone(){const e=new Wo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<rd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(QI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return d5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,iT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return ix(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return rA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Fv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Wo(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Dv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ov(this.flatCoordinates,0,e,this.stride),this.changed()}}let no=class p5 extends sd{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new p5(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=Ih(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let l=0;l<o;++l)r[l]=s[l];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return $O(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return $I(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=MU(this.flatCoordinates,0,e,this.stride),this.changed()}};const xa={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Dh=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",GU=Dh.includes("safari")&&!Dh.includes("chrom");GU&&(Dh.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Dh));const BU=Dh.includes("webkit")&&!Dh.includes("edge"),y5=Dh.includes("macintosh"),UU=typeof devicePixelRatio<"u"?devicePixelRatio:1,Xs=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,sA=typeof Image<"u"&&Image.prototype.decode,_5=typeof createImageBitmap=="function",x5=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),xt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Jr(n,e,t,r){let i;return t&&t.length?i=t.shift():Xs?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let w2;function sx(){return w2||(w2=Jr(1,1)),w2}function jv(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function q4(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function zU(n){for(;n.lastChild;)n.lastChild.remove()}function $U(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function v5(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function Uc(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}const aA=[NaN,NaN,NaN,0];let S2;function WU(){return S2||(S2=Jr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),S2}const HU=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,KU=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,YU=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,XU=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Vy(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function fm(n){throw new Error('failed to parse "'+n+'" as color')}function E5(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(KU)||n.match(HU)||n.match(YU);if(s){const a=s[4],o=100/255;return[Qn(Vy(s[1],o)+.5|0,0,255),Qn(Vy(s[2],o)+.5|0,0,255),Qn(Vy(s[3],o)+.5|0,0,255),a!==void 0?Qn(Vy(a,100),0,1):1]}fm(n)}if(n.startsWith("#")){if(XU.test(n)){const s=n.substring(1),a=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,u=s.length;l<u;l+=a){let h=parseInt(s.substring(l,l+a),16);a===1&&(h+=h<<4),o[l/a]=h}return o[3]=o[3]/255,o}fm(n)}const e=WU();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&fm(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return E5(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Bp(i[3]/255,3),i}function qU(n){return typeof n=="string"?n:lA(n)}const ZU=1024,Lg={};let T2=0;function QU(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function I2(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function A2(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function b2(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function R2(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function Z4(n){const e=b2(n[0]),t=b2(n[1]),r=b2(n[2]),i=R2(e*.222488403+t*.716873169+r*.06060791),s=500*(R2(e*.452247074+t*.399439023+r*.148375274)-i),a=200*(i-R2(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(a,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+a*a),o<0?o+360:o,n[3]]}function JU(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=A2(e),s=A2(e+t/500*Math.cos(r)),a=A2(e-t/200*Math.sin(r)),o=I2(s*3.021973625-i*1.617392459-a*.404875592),l=I2(s*-.943766287+i*1.916279586+a*.027607165),u=I2(s*.069407491-i*.22898585+a*1.159737864);return[Qn(o+.5|0,0,255),Qn(l+.5|0,0,255),Qn(u+.5|0,0,255),n[3]]}function oA(n){if(n==="none")return aA;if(Lg.hasOwnProperty(n))return Lg[n];if(T2>=ZU){let t=0;for(const r in Lg)(t++&3)===0&&(delete Lg[r],--T2)}const e=E5(n);e.length!==4&&fm(n);for(const t of e)isNaN(t)&&fm(n);return Lg[n]=e,++T2,e}function Fh(n){return Array.isArray(n)?n:oA(n)}function lA(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class w5 extends jp{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?xt.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(Wt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==xt.IDLE&&this.loader){this.state=xt.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;BO(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||_5&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=xt.LOADED}).catch(r=>{this.state=xt.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function ez(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[q_(r,Wt.LOAD,function(){a=!0,s||e()})];return r.src&&sA?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(a?e():t())})):o.push(q_(r,Wt.ERROR,t)),function(){i=!1,o.forEach(Xn)}}function tz(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function S5(n,e){return e&&(n.src=e),n.src&&sA?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):tz(n)}function T5(n,e){return e&&(n.src=e),n.src&&sA&&_5?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):S5(n)}class nz{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=C2(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=C2(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=C2(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===xt.IDLE&&i.load(),i.getImageState()===xt.LOADING?i.ready().then(()=>{this.patternCache_[a]=sx().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=sx().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function C2(n,e,t){const r=t?Fh(t):"null";return e+":"+n+":"+r}const va=new nz;let Og=null;class I5 extends jp{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?xt.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===xt.LOADED){Og||(Og=Jr(1,1,void 0,{willReadFrequently:!0})),Og.drawImage(this.image_,0,0);try{Og.getImageData(0,0,1,1),this.tainted_=!1}catch{Og=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Wt.CHANGE)}handleImageError_(){this.imageState_=xt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=xt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Jr(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===xt.IDLE){this.image_||this.initializeImage_(),this.imageState_=xt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&S5(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==xt.LOADED)return;const t=this.image_,r=Jr(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=qU(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===xt.LOADED||this.imageState_===xt.ERROR)e();else{const t=()=>{(this.imageState_===xt.LOADED||this.imageState_===xt.ERROR)&&(this.removeEventListener(Wt.CHANGE,t),e())};this.addEventListener(Wt.CHANGE,t)}})),this.ready_}}function ax(n,e,t,r,i,s){let a=e===void 0?void 0:va.get(e,t,i);return a||(a=new I5(n,n&&"src"in n?n.src||void 0:e,t,r,i),va.set(e,t,i,a,s)),s&&a&&!va.getPattern(e,t,i)&&va.set(e,t,i,a,s),a}function Mo(n){return n?Array.isArray(n)?lA(n):typeof n=="object"&&"src"in n?rz(n):n:null}function rz(n){if(!n.offset||!n.size)return va.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=va.getPattern(e,void 0,n.color);if(t)return t;const r=va.get(n.src,"anonymous",null);if(r.getImageState()!==xt.LOADED)return null;const i=Jr(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),ax(i.canvas,e,void 0,xt.LOADED,n.color,!0),va.getPattern(e,void 0,n.color)}class A5{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const Gy="ol-hidden",Wp="ol-unselectable",cA="ol-control",Q4="ol-collapsed",iz=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),J4=["style","variant","weight","size","lineHeight","family"],sT={normal:400,bold:700},aT=function(n){const e=n.match(iz);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=J4.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[J4[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in sT&&(t.weight=sT[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t},b5="10px sans-serif",vs="#000",l0="round",Pl=[],kl=0,c0="round",Ym=10,Xm="#000",qm="center",ox="middle",_h=[0,0,0,0],Zm=1,pf=new Jo;let Dg=null,ek;const oT={},sz=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function az(n,e,t){return`${n} ${e} 16px "${t}"`}const oz=(function(){let e,t;async function r(s){await t.ready;const a=await t.load(s);if(a.length===0)return!1;const o=aT(s),l=o.families[0].toLowerCase(),u=o.weight;return a.some(h=>{const f=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),g=sT[h.weight]||h.weight;return f===l&&h.style===o.style&&g==u})}async function i(){await t.ready;let s=!0;const a=pf.getProperties(),o=Object.keys(a).filter(l=>a[l]<100);for(let l=o.length-1;l>=0;--l){const u=o[l];let h=a[u];h<100&&(await r(u)?(Fp(oT),pf.set(u,100)):(h+=10,pf.set(u,h,!0),h<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=Xs?self.fonts:document.fonts);const a=aT(s);if(!a)return;const o=a.families;let l=!1;for(const u of o){if(sz.has(u))continue;const h=az(a.style,a.weight,u);pf.get(h)===void 0&&(pf.set(h,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),lz=(function(){let n;return function(e){let t=oT[e];if(t==null){if(Xs){const r=aT(e),i=R5(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);oT[e]=t}return t}})();function R5(n,e){return Dg||(Dg=Jr(1,1)),n!=ek&&(Dg.font=n,ek=Dg.font),Dg.measureText(e)}function C5(n,e){return R5(n,e).width}function tk(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,C5(n,s)),0);return t[e]=r,r}function cz(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,l=0;for(let u=0,h=e.length;u<=h;u+=2){const f=e[u];if(f===`
`||u===h){s=Math.max(s,a),i.push(a),a=0,o+=l,l=0;continue}const g=e[u+1]||n.font,y=C5(g,f);t.push(y),a+=y;const v=lz(g);r.push(v),l=Math.max(l,v)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function uz(n,e,t,r,i,s,a,o,l,u,h){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=f=>f.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,u),n.scale(h[0],h[1]),hz(r,n)):h[0]<0||h[1]<0?(n.translate(l,u),n.scale(h[0],h[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,l,u,a*h[0],o*h[1]),n.restore()}function hz(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class dz extends A5{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Bp(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Xa()}drawImages_(e,t,r,i){if(!this.image_)return;const s=Zc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let h=0,f=s.length;h<f;h+=2){const g=s[h]-this.imageAnchorX_,y=s[h+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=g+this.imageAnchorX_,x=y+this.imageAnchorY_;$o(o,v,x,1,1,u,-v,-x),a.save(),a.transform.apply(a,o),a.translate(v,x),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,y,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Zc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=Zc(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ns(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=CU(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ns(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(ns(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(i,s,a[l],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ns(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ns(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];i=this.drawRings_(r,i,u,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),Su(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:qm;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Mo(r||vs)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),h=s||Pl;this.strokeState_={lineCap:i!==void 0?i:l0,lineDash:this.pixelRatio_===1?h:h.map(f=>f*this.pixelRatio_),lineDashOffset:(a||kl)*this.pixelRatio_,lineJoin:o!==void 0?o:c0,lineWidth:(l!==void 0?l:Zm)*this.pixelRatio_,miterLimit:u!==void 0?u:Ym,strokeStyle:Mo(r||Xm)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const y=t.getColor();this.textFillState_={fillStyle:Mo(y||vs)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const y=r.getColor(),v=r.getLineCap(),x=r.getLineDash(),w=r.getLineDashOffset(),T=r.getLineJoin(),I=r.getWidth(),b=r.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:l0,lineDash:x||Pl,lineDashOffset:w||kl,lineJoin:T!==void 0?T:c0,lineWidth:I!==void 0?I:Zm,miterLimit:b!==void 0?b:Ym,strokeStyle:Mo(y||Xm)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),h=e.getText(),f=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:b5,textAlign:f!==void 0?f:qm,textBaseline:g!==void 0?g:ox},this.text_=h!==void 0?Array.isArray(h)?h.reduce((y,v,x)=>y+=x%2?" ":v,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const fz=.5,P5={Point:Ez,LineString:_z,Polygon:Sz,MultiPoint:wz,MultiLineString:xz,MultiPolygon:vz,GeometryCollection:yz,Circle:mz};function gz(n,e){return parseInt(En(n),10)-parseInt(En(e),10)}function nk(n,e){const t=k5(n,e);return t*t}function k5(n,e){return fz*n/e}function mz(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r)}}function rk(n,e,t,r,i,s,a,o){const l=[],u=t.getImage();if(u){let g=!0;const y=u.getImageState();y==xt.LOADED||y==xt.ERROR?g=!1:y==xt.IDLE&&u.load(),g&&l.push(u.ready())}const h=t.getFill();h&&h.loading()&&l.push(h.ready());const f=l.length>0;return f&&Promise.all(l).then(()=>i(null)),pz(n,e,t,r,s,a,o),f}function pz(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(r,i);if(t.getRenderer())M5(n,l,t,e,a);else{const h=P5[l.getType()];h(n,l,t,e,a,s)}}function M5(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,l=a.length;o<l;++o)M5(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function yz(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const u=P5[a[o].getType()];u(n,a[o],t,r,i,s)}}function _z(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function xz(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function vz(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function Ez(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),l=o&&o.getText(),u=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=xt.LOADED)return;const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(a,u),h.drawPoint(e,r,i)}if(l){const h=n.getBuilder(t.getZIndex(),"Text");h.setTextStyle(o,u),h.drawText(e,r,i)}}function wz(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),h=s&&o&&u?{}:void 0;if(o){if(a.getImageState()!=xt.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(a,h),f.drawMultiPoint(e,r,i)}if(u){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(l,h),f.drawText(e,r,i)}}function Sz(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}let Tz=!1;function Iz(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=Tz,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=e.getType();try{let h;u=="text"||u=="json"?h=o.responseText:u=="xml"?h=o.responseXML||o.responseText:u=="arraybuffer"&&(h=o.response),h?s(e.readFeatures(h,{extent:t,featureProjection:i}),e.readProjection(h)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function ik(n,e){return function(t,r,i,s,a){Iz(n,e,t,r,i,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),a!==void 0&&a()})}}function Az(n,e){return[[-1/0,-1/0,1/0,1/0]]}function N5(n,e,t,r){const i=[];let s=Qs();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=WI(n,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function uA(n,e,t,r,i,s,a){let o,l,u,h,f,g,y;const v=i[s+1],x=[];for(let I=0,b=t.length;I<b;++I){const N=t[I];for(h=n[N-r],g=n[N-r+1],o=e;o<N;o+=r)f=n[o],y=n[o+1],(v<=g&&y<=v||g<=v&&v<=y)&&(u=(v-g)/(y-g)*(f-h)+h,x.push(u)),h=f,g=y}let w=NaN,T=-1/0;for(x.sort(bl),h=x[0],o=1,l=x.length;o<l;++o){f=x[o];const I=Math.abs(f-h);I>T&&(u=(h+f)/2,nA(n,e,t,r,u,v)&&(w=u,T=I)),h=f}return isNaN(w)&&(w=i[s]),a?(a.push(w,v,T),a):[w,v,T]}function L5(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=uA(n,e,l,r,i,2*a,s),e=l[l.length-1]}return s}function bz(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function hA(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],l=n[e+1];i+=(o-s)*(l+a),s=o,a=l}return i===0?void 0:i>0}function dA(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=hA(n,e,o,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=o}return!0}function O5(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!dA(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function lx(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=hA(n,e,o,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&bz(n,e,o,r),e=o}return e}function lT(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=lx(n,e,t[s],r,i);return e}function Rz(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=hA(n,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=l}return t}class qa extends u5{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Xn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(fn(e[t],Wt.CHANGE,this.changed,this))}clone(){const e=new qa(P2(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<rd(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Gp(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)WO(e,t[r].getExtent());return e}getGeometries(){return P2(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(i=!0)}return i?new qa(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=zo(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(P2(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function P2(n){return n.map(e=>e.clone())}function D5(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,l=0;for(;e<t;e+=r){const u=n[e]-s,h=n[e+1]-a;i+=l*u-o*h,o=u,l=h}return i/2}function F5(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=D5(n,e,o,r),e=o}return i}function Cz(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=F5(n,e,o,r),e=o[o.length-1]}return i}class Qm extends sd{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Qm(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<rd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(QI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return D5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Fv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Qm(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ov(this.flatCoordinates,0,e,this.stride),this.changed()}}class ou extends sd{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let l=0,u=i.length;l<u;++l){const h=i[l];Pn(s,h.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){Pn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ou(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<rd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(JI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tA(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,NU(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return Km(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Wo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a],u=new Wo(e.slice(s,l),r);i.push(u),s=l}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=rA(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const l=i[a],u=ix(t,r,l,s,.5);Pn(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=m5(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new ou(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return DU(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=$p(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class N0 extends sd{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Pn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new N0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<rd(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=Ih(e,t,s[o],s[o+1]);if(u<i){i=u;for(let h=0;h<a;++h)r[h]=s[o+h];r.length=a}}return i}getCoordinates(){return Bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new no(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new no(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if($I(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ov(this.flatCoordinates,0,e,this.stride),this.changed()}}class ro extends sd{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Pn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ro(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<rd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(JI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tA(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return nA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return F5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),lx(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Km(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=zo(this.getExtent());this.flatInteriorPoint_=uA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new no(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Qm(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=new Qm(t.slice(s,l),e);i.push(u),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;dA(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=lx(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=iA(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new ro(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return g5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=$p(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function sk(n){if(M0(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new ro(s,"XY",[s.length])}class u0 extends sd{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,l=i.length;o<l;++o){const u=i[o],h=s.length,f=u.getEnds();for(let g=0,y=f.length;g<y;++g)f[g]+=h;Pn(s,u.getFlatCoordinates()),a.push(f)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Pn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new u0(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<rd(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(PU(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return OU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Cz(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),lT(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,rT(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=N5(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=L5(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new N0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;O5(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=lT(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=VU(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new u0(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new ro(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a].slice(),u=l[l.length-1];if(s!==0)for(let f=0,g=l.length;f<g;++f)l[f]-=s;const h=new ro(t.slice(s,u),e,l);i.push(h),s=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return FU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=h5(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const ak=Xa();class Ws{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?$O(this.flatCoordinates_):WI(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=zo(this.getExtent());this.flatInteriorPoints_=uA(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Rz(this.flatCoordinates_,this.ends_),t=N5(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=L5(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=ix(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=ix(e,t,a,2,.5);Pn(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Wn(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Vr(r)/Vr(t);$o(ak,r[0],r[3],i,-i,0,0,0),Zc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,ak,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Ws(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=GO((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Fv(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=m5(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=iA(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new Ws(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Ws.prototype.getFlatCoordinates=Ws.prototype.getOrientedFlatCoordinates;function j5(n,e,t=0,r=n.length-1,i=Pz){for(;r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,h=Math.log(l),f=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),y=Math.max(t,Math.floor(e-u*f/l+g)),v=Math.min(r,Math.floor(e+(l-u)*f/l+g));j5(n,e,y,v,i)}const s=n[e];let a=t,o=r;for(Fg(n,t,e),i(n[r],s)>0&&Fg(n,t,r);a<o;){for(Fg(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Fg(n,t,o):(o++,Fg(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Fg(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Pz(n,e){return n<e?-1:n>e?1:0}let V5=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!Uy(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?i(o):o;Uy(e,l)&&(t.leaf?r.push(o):M2(e,l)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!Uy(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(Uy(e,a)){if(t.leaf||M2(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=yf([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),r.leaf){const h=kz(e,r.children,t);if(h!==-1)return r.children.splice(h,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&M2(r,i)?(s.push(r),a.push(o),o=0,l=r,r=r.children[0]):l?(o++,r=l.children[o],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=yf(e.slice(t,r+1)),Jd(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=yf([]),o.leaf=!1,o.height=i;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));ok(e,t,r,u,this.compareMinX);for(let h=t;h<=r;h+=u){const f=Math.min(h+u-1,r);ok(e,h,f,l,this.compareMinY);for(let g=h;g<=f;g+=l){const y=Math.min(g+l-1,f);o.children.push(this._build(e,g,y,i-1))}}return Jd(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const u=t.children[l],h=k2(u),f=Lz(e,u)-h;f<a?(a=f,s=h<s?h:s,o=u):f===a&&h<s&&(s=h,o=u)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Xg(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=yf(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,Jd(r,this.toBBox),Jd(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=yf([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Jd(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const l=Yg(e,0,o,this.toBBox),u=Yg(e,o,r,this.toBBox),h=Oz(l,u),f=k2(l)+k2(u);h<s?(s=h,i=o,a=f<a?f:a):h===s&&f<a&&(a=f,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:Mz,s=e.leaf?this.compareMinY:Nz,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=Yg(e,0,t,s),o=Yg(e,r-t,r,s);let l=By(a)+By(o);for(let u=t;u<r-t;u++){const h=e.children[u];Xg(a,e.leaf?s(h):h),l+=By(a)}for(let u=r-t-1;u>=t;u--){const h=e.children[u];Xg(o,e.leaf?s(h):h),l+=By(o)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Xg(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():Jd(e[t],this.toBBox)}};function kz(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function Jd(n,e){Yg(n,0,n.children.length,e,n)}function Yg(n,e,t,r,i){i||(i=yf(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Xg(i,n.leaf?r(a):a)}return i}function Xg(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Mz(n,e){return n.minX-e.minX}function Nz(n,e){return n.minY-e.minY}function k2(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function By(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Lz(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Oz(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function M2(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Uy(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function yf(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ok(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;j5(n,a,e,t,i),s.push(e,a,a,t)}}class lk{constructor(e){this.rbush_=new V5(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[En(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=l,this.items_[En(o)]=l}this.rbush_.load(r)}remove(e){const t=En(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[En(t)],i=[r.minX,r.minY,r.maxX,r.maxY];s0(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return Nh(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return su(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class fA extends Jo{constructor(e){super(),this.projection=Wn(e.projection),this.attributions_=ck(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=ck(e),this.changed()}setState(e){this.state_=e,this.changed()}}function ck(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const ha={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class xc extends Qo{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Hp extends fA{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=$m,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Nn(this.format_,"`format` must be set when `url` is set"),this.loader_=ik(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Az;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new lk:null,this.loadedExtentsRtree_=new lk,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new _a(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=En(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new xc(ha.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Ws||(this.featureChangeKeys_[e]=[fn(t,Wt.CHANGE,this.handleFeatureChange_,this),fn(t,i0.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof Ws){const s=this.idIndex_[i];s instanceof Ws?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(Nn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=En(o);this.addToIndex_(l,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],l=En(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const h=u.getExtent();t.push(h),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(ha.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new xc(ha.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ha.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(ha.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(xs.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(xs.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Xn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new xc(ha.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof Ws||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof Ws||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Nh(this.nullGeometryFeatures_)||Pn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=qO(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||zm,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const h=u.getGeometry(),f=o;if(o=h instanceof Ws?0:h.closestPointXY(r,i,a,o),o<f){s=u;const g=Math.sqrt(o);l[0]=r-g,l[1]=i-g,l[2]=r+g,l[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=En(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new xc(ha.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:En(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Nh(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const l=s[a];i.forEachInExtent(l,function(h){return Vc(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new xc(ha.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new xc(ha.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new xc(ha.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(s0(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=En(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Xn),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(ha.REMOVEFEATURE)&&this.dispatchEvent(new xc(ha.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Nn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(ik(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class di{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new di({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=ax(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===xt.IDLE&&t.load(),t.getImageState()===xt.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?En(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Fh(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Ts{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Ts({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function uk(n){return n[0]>0&&n[1]>0}function Dz(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Is(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Vv{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Is(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Vv({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Vt()}getImage(e){return Vt()}getHitDetectionImage(){return Vt()}getPixelRatio(e){return 1}getImageState(){return Vt()}getImageSize(){return Vt()}getOrigin(){return Vt()}getSize(){return Vt()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Is(e)}listenImageChange(e){Vt()}load(){Vt()}unlistenImageChange(e){Vt()}ready(){return Promise.resolve()}}class Gv extends Vv{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?xt.LOADING:xt.LOADED,this.imageState_===xt.LOADING&&this.ready().then(()=>this.imageState_=xt.LOADED),this.render()}clone(){const e=this.getScale(),t=new Gv({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=va.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,a=Math.ceil(s.size*e),o=Jr(a,a);this.draw_(s,o,e),i=o.canvas,va.set(r,null,null,new I5(i,void 0,null,xt.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const W=i;i=s,s=W}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),h=i-u,f=Math.sqrt(l*l+h*h),g=f/l;if(e==="miter"&&g<=r)return g*t;const y=t/2/g,v=t/2*(h/f),w=Math.sqrt((i+y)*(i+y)+v*v)-i;if(this.radius2_===void 0||e==="bevel")return w*2;const T=i*Math.sin(o),I=Math.sqrt(i*i-T*T),b=s-I,F=Math.sqrt(T*T+b*b)/T;if(F<=r){const W=F*t/2-s-i;return 2*Math.max(w,W)}return w*2}createRenderOptions(){let e=l0,t=c0,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=Mo(this.stroke_.getColor()??Xm),o=this.stroke_.getWidth()??Zm,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??c0,e=this.stroke_.getLineCap()??l0,r=this.stroke_.getMiterLimit()??Ym);const l=this.calculateLineJoinSize_(t,o,r),u=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:o,size:h,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=vs),t.fillStyle=Mo(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Fh(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Jr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,u=o%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=vs,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Fl extends Gv{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Fl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class gr{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=hk,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new gr({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=hk,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Fz(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Nn(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let N2=null;function G5(n,e){if(!N2){const t=new di({color:"rgba(255,255,255,0.4)"}),r=new Ts({color:"#3399CC",width:1.25});N2=[new gr({image:new Fl({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return N2}function hk(n){return n.getGeometry()}const jz="#333";class od{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Is(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new di({color:jz}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new od({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof di?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Is(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const oi={ANIMATING:0,INTERACTING:1},kt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},zy=[kt.FILL],zc=[kt.STROKE],xh=[kt.BEGIN_PATH],dk=[kt.CLOSE_PATH];class Kp extends A5{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)i[0]=e[o],i[1]=e[o+1],Lh(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(t+=i);let h=e[t],f=e[t+1];const g=this.tmpCoordinate_;let y=!0,v,x,w;for(v=t+i;v<r;v+=i)g[0]=e[v],g[1]=e[v+1],w=YS(u,g),w!==x?(y&&(o[l++]=h,o[l++]=f,y=!1),o[l++]=g[0],o[l++]=g[1]):w===si.INTERSECTING?(o[l++]=g[0],o[l++]=g[1],y=!1):y=!0,h=g[0],f=g[1],x=w;return(s&&y||v===t+i)&&(o[l++]=h,o[l++]=f),l}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const l=r[a],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,h,f,g,y;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),g=[];const v=e.getEndss();y=0;for(let x=0,w=v.length;x<w;++x){const T=[];y=this.drawCustomCoordinates_(u,y,v[x],o,T),g.push(T)}this.instructions.push([kt.CUSTOM,l,g,e,r,rT,s]),this.hitDetectionInstructions.push([kt.CUSTOM,l,g,e,i||r,rT,s]);break;case"Polygon":case"MultiLineString":f=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),y=this.drawCustomCoordinates_(u,0,e.getEnds(),o,f),this.instructions.push([kt.CUSTOM,l,f,e,r,Km,s]),this.hitDetectionInstructions.push([kt.CUSTOM,l,f,e,i||r,Km,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([kt.CUSTOM,l,h,e,r,Bc,s]),this.hitDetectionInstructions.push([kt.CUSTOM,l,h,e,i||r,Bc,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),h=this.appendFlatPointCoordinates(u,o),h>l&&(this.instructions.push([kt.CUSTOM,l,h,e,r,Bc,s]),this.hitDetectionInstructions.push([kt.CUSTOM,l,h,e,i||r,Bc,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([kt.CUSTOM,l,h,e,r,void 0,s]),this.hitDetectionInstructions.push([kt.CUSTOM,l,h,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[kt.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[kt.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==kt.END_GEOMETRY?a=t:s==kt.BEGIN_GEOMETRY&&(i[2]=t,LB(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Mo(r||vs)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Mo(r||Xm);const i=e.getLineCap();t.lineCap=i!==void 0?i:l0;const s=e.getLineDash();t.lineDash=s?s.slice():Pl;const a=e.getLineDashOffset();t.lineDashOffset=a||kl;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:c0;const l=e.getWidth();t.lineWidth=l!==void 0?l:Zm;const u=e.getMiterLimit();t.miterLimit=u!==void 0?u:Ym,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[kt.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[kt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Su(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[kt.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=zO(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Wm(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Vz extends Kp{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Lh(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([kt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([kt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||Lh(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([kt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([kt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Gz extends Kp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[kt.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,kl],xh);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(zc),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,kl],xh);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let h=0;for(let f=0,g=o.length;f<g;++f)h=this.drawFlatCoordinates_(l,h,o[f],u);this.hitDetectionInstructions.push(zc),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(zc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(zc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(xh)}}class fk extends Kp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=r.length;this.instructions.push(xh),this.hitDetectionInstructions.push(xh);for(let u=0;u<l;++u){const h=r[u],f=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,h,i,!0,!o),y=[kt.MOVE_TO_LINE_TO,f,g];this.instructions.push(y),this.hitDetectionInstructions.push(y),o&&(this.instructions.push(dk),this.hitDetectionInstructions.push(dk)),t=h}return a&&(this.instructions.push(zy),this.hitDetectionInstructions.push(zy)),o&&(this.instructions.push(zc),this.hitDetectionInstructions.push(zc)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,vs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,kl]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const h=[kt.CIRCLE,u];this.instructions.push(xh,h),this.hitDetectionInstructions.push(xh,h),i.fillStyle!==void 0&&(this.instructions.push(zy),this.hitDetectionInstructions.push(zy)),i.strokeStyle!==void 0&&(this.instructions.push(zc),this.hitDetectionInstructions.push(zc)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,vs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,kl]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,vs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pl,kl]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let h=0;for(let f=0,g=o.length;f<g;++f)h=this.drawFlatCoordinatess_(l,h,o[f],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=th(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Bz(n,e,t,r,i){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+i<r;){const[u,h]=l.slice(-2),f=e[a+i],g=e[a+i+1],y=Math.sqrt((f-u)*(f-u)+(g-h)*(g-h));if(o+=y,o>=n){const v=(n-o+y)/y,x=$s(u,f,v),w=$s(h,g,v);l.push(x,w),s.push(l),l=[x,w],o==n&&(a+=i),o=0}else if(o<n)l.push(e[a+i],e[a+i+1]),a+=i;else{const v=y-o,x=$s(u,f,v/y),w=$s(h,g,v/y);l.push(x,w),s.push(l),l=[x,w],o=0,a+=i}}return o>0&&s.push(l),s}function Uz(n,e,t,r,i){let s=t,a=t,o=0,l=0,u=t,h,f,g,y,v,x,w,T,I,b;for(f=t;f<r;f+=i){const N=e[f],F=e[f+1];v!==void 0&&(I=N-v,b=F-x,y=Math.sqrt(I*I+b*b),w!==void 0&&(l+=g,h=Math.acos((w*I+T*b)/(g*y)),h>n&&(l>o&&(o=l,s=u,a=f),l=0,u=f-i)),g=y,w=I,T=b),v=N,x=F}return l+=y,l>o?[u,f]:[s,a]}const cx={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class zz extends Kp{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[vs]={fillStyle:vs},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let l=o.length;const u=e.getType();let h=null,f=e.getStride();if(a.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!ns(this.maxExtent,e.getExtent()))return;let g;if(h=e.getFlatCoordinates(),u=="LineString")g=[h.length];else if(u=="MultiLineString")g=e.getEnds();else if(u=="Polygon")g=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const w=e.getEndss();g=[];for(let T=0,I=w.length;T<I;++T)g.push(w[T][0])}this.beginGeometry(e,t,r);const y=a.repeat,v=y?void 0:a.textAlign;let x=0;for(let w=0,T=g.length;w<T;++w){let I;y?I=Bz(y*this.resolution,h,x,g[w],f):I=[h.slice(x,g[w])];for(let b=0,N=I.length;b<N;++b){const F=I[b];let W=0,M=F.length;if(v==null){const P=Uz(a.maxAngle,F,0,F.length,2);W=P[0],M=P[1]}for(let P=W;P<M;P+=f)o.push(F[P],F[P+1]);const C=o.length;x=g[w],this.drawChars_(l,C),l=C}}this.endGeometry(t)}else{let g=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":h=e.getFlatCoordinates();break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":h=e.getFlatMidpoints(),f=2;break;case"Polygon":h=e.getFlatInteriorPoint(),a.overflow||g.push(h[2]/this.resolution),f=3;break;case"MultiPolygon":const N=e.getFlatInteriorPoints();h=[];for(let F=0,W=N.length;F<W;F+=3)a.overflow||g.push(N[F+2]/this.resolution),h.push(N[F],N[F+1]);if(h.length===0)return;f=2;break}const y=this.appendFlatPointCoordinates(h,f);if(y===l)return;if(g&&(y-l)/2!==h.length/f){let N=l/2;g=g.filter((F,W)=>{const M=o[(N+W)*2]===h[W*f]&&o[(N+W)*2+1]===h[W*f+1];return M||--N,M})}this.saveTextStates_();const v=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,x=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let w=a.padding;if(w!=_h&&(a.scale[0]<0||a.scale[1]<0)){let N=a.padding[0],F=a.padding[1],W=a.padding[2],M=a.padding[3];a.scale[0]<0&&(F=-F,M=-M),a.scale[1]<0&&(N=-N,W=-W),w=[N,F,W,M]}const T=this.pixelRatio;this.instructions.push([kt.DRAW_IMAGE,l,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,w==_h?_h:w.map(function(N){return N*T}),v,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const I=1/T,b=v?v.slice(0):null;b&&(b[1]=vs),this.hitDetectionInstructions.push([kt.DRAW_IMAGE,l,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[I,I],NaN,this.declutterMode_,this.declutterImageWithText_,w,b,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?vs:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||qm,justify:t.justify,textBaseline:t.textBaseline||ox,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=cx[i.textBaseline],h=this.textOffsetY_*l,f=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([kt.DRAW_CHARS,e,t,u,i.overflow,o,i.maxAngle,l,h,s,g*l,f,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([kt.DRAW_CHARS,e,t,u,i.overflow,o&&vs,i.maxAngle,l,h,s,g*l,f,a,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Mo(a.getColor()||vs)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const x=o.getLineDash(),w=o.getLineDashOffset(),T=o.getWidth(),I=o.getMiterLimit();s.lineCap=o.getLineCap()||l0,s.lineDash=x?x.slice():Pl,s.lineDashOffset=w===void 0?kl:w,s.lineJoin=o.getLineJoin()||c0,s.lineWidth=T===void 0?Zm:T,s.miterLimit=I===void 0?Ym:I,s.strokeStyle=Mo(o.getColor()||Xm)}r=this.textState_;const l=e.getFont()||b5;oz(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||ox,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||_h,r.scale=u===void 0?[1,1]:u;const h=e.getOffsetX(),f=e.getOffsetY(),g=e.getRotateWithView(),y=e.getKeepUpright(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=g===void 0?!1:g,this.textKeepUpright_=y===void 0?!0:y,this.textRotation_=v===void 0?0:v,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:En(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+En(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const $z={Circle:fk,Default:Kp,Image:Vz,LineString:Gz,Polygon:fk,Text:zz};class Wz{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=$z[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function Hz(n,e,t,r,i,s,a,o,l,u,h,f,g=!0){let y=n[e],v=n[e+1],x=0,w=0,T=0,I=0;function b(){x=y,w=v,e+=r,y=n[e],v=n[e+1],I+=T,T=Math.sqrt((y-x)*(y-x)+(v-w)*(v-w))}do b();while(e<t-r&&I+T<s);let N=T===0?0:(s-I)/T;const F=$s(x,y,N),W=$s(w,v,N),M=e-r,C=I,P=s+o*l(u,i,h);for(;e<t-r&&I+T<P;)b();N=T===0?0:(P-I)/T;const L=$s(x,y,N),O=$s(w,v,N);let U=!1;if(g)if(f){const ke=[F,W,L,O];c5(ke,0,4,2,f,ke,ke),U=ke[0]>ke[2]}else U=F>L;const j=Math.PI,xe=[],Ce=M+r===e;e=M,T=0,I=C,y=n[e],v=n[e+1];let Ge;if(Ce){b(),Ge=Math.atan2(v-w,y-x),U&&(Ge+=Ge>0?-j:j);const ke=(L+F)/2,ce=(O+W)/2;return xe[0]=[ke,ce,(P-s)/2,Ge,i],xe}i=i.replace(/\n/g," ");for(let ke=0,ce=i.length;ke<ce;){b();let Ie=Math.atan2(v-w,y-x);if(U&&(Ie+=Ie>0?-j:j),Ge!==void 0){let X=Ie-Ge;if(X+=X>j?-2*j:X<-j?2*j:0,Math.abs(X)>a)return null}Ge=Ie;const Te=ke;let ie=0;for(;ke<ce;++ke){const X=U?ce-ke-1:ke,ue=o*l(u,i[X],h);if(e+r<t&&I+T<s+ie+ue/2)break;ie+=ue}if(ke===Te)continue;const V=U?i.substring(ce-Te,ce-ke):i.substring(Te,ke);N=T===0?0:(s+ie/2-I)/T;const J=$s(x,y,N),te=$s(w,v,N);xe.push([J,te,ie/2,Ie,V]),s+=ie}return xe}class B5{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(sx(),{get:(e,t)=>{if(typeof sx()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ef=Qs(),vc=[],pl=[],yl=[],Ec=[];function gk(n){return n[3].declutterBox}const mk=new RegExp("[-----]");function L2(n,e){return e==="start"?e=mk.test(n)?"right":"left":e==="end"&&(e=mk.test(n)?"left":"right"),cx[e]}function Kz(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function Yz(n,e,t){return t%2===0&&(n+=e),n}class Xz{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Xa(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new B5:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],f=l.justify?cx[l.justify]:L2(Array.isArray(e)?e[0]:e,l.textAlign||qm),g=i&&a.lineWidth?a.lineWidth:0,y=Array.isArray(e)?e:String(e).split(`
`).reduce(Kz,[]),{width:v,height:x,widths:w,heights:T,lineWidths:I}=cz(l,y),b=v+g,N=[],F=(b+2)*h[0],W=(x+g)*h[1],M={width:F<0?Math.floor(F):Math.ceil(F),height:W<0?Math.floor(W):Math.ceil(W),contextInstructions:N};(h[0]!=1||h[1]!=1)&&N.push("scale",h),i&&(N.push("strokeStyle",a.strokeStyle),N.push("lineWidth",g),N.push("lineCap",a.lineCap),N.push("lineJoin",a.lineJoin),N.push("miterLimit",a.miterLimit),N.push("setLineDash",[a.lineDash]),N.push("lineDashOffset",a.lineDashOffset)),r&&N.push("fillStyle",o.fillStyle),N.push("textBaseline","middle"),N.push("textAlign","center");const C=.5-f;let P=f*b+C*g;const L=[],O=[];let U=0,j=0,xe=0,Ce=0,Ge;for(let ke=0,ce=y.length;ke<ce;ke+=2){const Ie=y[ke];if(Ie===`
`){j+=U,U=0,P=f*b+C*g,++Ce;continue}const Te=y[ke+1]||l.font;Te!==Ge&&(i&&L.push("font",Te),r&&O.push("font",Te),Ge=Te),U=Math.max(U,T[xe]);const ie=[Ie,P+C*w[xe]+f*(w[xe]-I[Ce]),.5*(g+U)+j];P+=w[xe],i&&L.push("strokeText",ie),r&&O.push("fillText",ie),++xe}return Array.prototype.push.apply(N,L),Array.prototype.push.apply(N,O),this.labels_[s]=M,M}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,l,u,h,f,g,y,v,x,w){o*=g[0],l*=g[1];let T=r-o,I=i-l;const b=s+u>e?e-u:s,N=a+h>t?t-h:a,F=v[3]+b*g[0]+v[1],W=v[0]+N*g[1]+v[2],M=T-v[3],C=I-v[0];(x||f!==0)&&(vc[0]=M,Ec[0]=M,vc[1]=C,pl[1]=C,pl[0]=M+F,yl[0]=pl[0],yl[1]=C+W,Ec[1]=yl[1]);let P;return f!==0?(P=$o(Xa(),r,i,1,1,f,-r,-i),Qr(P,vc),Qr(P,pl),Qr(P,yl),Qr(P,Ec),su(Math.min(vc[0],pl[0],yl[0],Ec[0]),Math.min(vc[1],pl[1],yl[1],Ec[1]),Math.max(vc[0],pl[0],yl[0],Ec[0]),Math.max(vc[1],pl[1],yl[1],Ec[1]),ef)):su(Math.min(M,M+F),Math.min(C,C+W),Math.max(M,M+F),Math.max(C,C+W),ef),y&&(T=Math.round(T),I=Math.round(I)),{drawImageX:T,drawImageY:I,drawImageW:b,drawImageH:N,originX:u,originY:h,declutterBox:{minX:ef[0],minY:ef[1],maxX:ef[2],maxY:ef[3],value:w},canvasTransform:P,scale:g}}replayImageOrLabel_(e,t,r,i,s,a,o){const l=!!(a||o),u=i.declutterBox,h=o?o[2]*i.scale[0]/2:0;return u.minX-h<=t[0]&&u.maxX+h>=0&&u.minY-h<=t[1]&&u.maxY+h>=0&&(l&&this.replayTextBackground_(e,vc,pl,yl,Ec,a,o),uz(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Qr(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],l=this.pixelRatio,u=L2(Array.isArray(e)?e[0]:e,s.textAlign||qm),h=cx[s.textBaseline||ox],f=o&&o.lineWidth?o.lineWidth:0,g=a.width/l-2*s.scale[0],y=u*g+2*(.5-u)*f,v=h*a.height/l+2*(.5-h)*f;return{label:a,anchorX:y,anchorY:v}}execute_(e,t,r,i,s,a,o,l){const u=this.zIndexContext_;let h;this.pixelCoordinates_&&Su(r,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Zc(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),EU(this.renderedTransform_,r));let f=0;const g=i.length;let y=0,v,x,w,T,I,b,N,F,W,M,C,P,L,O=0,U=0;const j=this.coordinateCache_,xe=this.viewRotation_,Ce=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Ge={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:xe},ke=this.instructions!=i||this.overlaps?0:200;let ce,Ie,Te,ie;for(;f<g;){const V=i[f];switch(V[0]){case kt.BEGIN_GEOMETRY:ce=V[1],ie=V[3],ce.getGeometry()?o!==void 0&&!ns(o,ie.getExtent())?f=V[2]+1:++f:f=V[2],u&&(u.zIndex=V[4]);break;case kt.BEGIN_PATH:O>ke&&(this.fill_(e),O=0),U>ke&&(e.stroke(),U=0),!O&&!U&&(e.beginPath(),I=NaN,b=NaN),++f;break;case kt.CIRCLE:y=V[1];const te=h[y],X=h[y+1],ue=h[y+2],Me=h[y+3],Fe=ue-te,Le=Me-X,je=Math.sqrt(Fe*Fe+Le*Le);e.moveTo(te+je,X),e.arc(te,X,je,0,2*Math.PI,!0),++f;break;case kt.CLOSE_PATH:e.closePath(),++f;break;case kt.CUSTOM:y=V[1],v=V[2];const qt=V[3],Ye=V[4],Zt=V[5];Ge.geometry=qt,Ge.feature=ce,f in j||(j[f]=[]);const Nt=j[f];Zt?Zt(h,y,v,2,Nt):(Nt[0]=h[y],Nt[1]=h[y+1],Nt.length=2),u&&(u.zIndex=V[6]),Ye(Nt,Ge),++f;break;case kt.DRAW_IMAGE:y=V[1],v=V[2],W=V[3],x=V[4],w=V[5];let at=V[6];const yt=V[7],Oe=V[8],bn=V[9],$t=V[10];let Xt=V[11];const It=V[12];let Rn=V[13];T=V[14]||"declutter";const Ae=V[15];if(!W&&V.length>=20){M=V[19],C=V[20],P=V[21],L=V[22];const ar=this.drawLabelWithPointPlacement_(M,C,P,L);W=ar.label,V[3]=W;const cs=V[23];x=(ar.anchorX-cs)*this.pixelRatio,V[4]=x;const Wr=V[24];w=(ar.anchorY-Wr)*this.pixelRatio,V[5]=w,at=W.height,V[6]=at,Rn=W.width,V[13]=Rn}let Ee;V.length>25&&(Ee=V[25]);let k,St,Z;V.length>17?(k=V[16],St=V[17],Z=V[18]):(k=_h,St=null,Z=null),$t&&Ce?Xt+=xe:!$t&&!Ce&&(Xt-=xe);let jt=0;for(;y<v;y+=2){if(Ee&&Ee[jt++]<Rn/this.pixelRatio)continue;const ar=this.calculateImageOrLabelDimensions_(W.width,W.height,h[y],h[y+1],Rn,at,x,w,Oe,bn,Xt,It,s,k,!!St||!!Z,ce),cs=[e,t,W,ar,yt,St,Z];if(l){let Wr,or,Hr;if(Ae){const cn=v-y;if(!Ae[cn]){Ae[cn]={args:cs,declutterMode:T};continue}const mr=Ae[cn];Wr=mr.args,or=mr.declutterMode,delete Ae[cn],Hr=gk(Wr)}let Kr,Lr;if(Wr&&(or!=="declutter"||!l.collides(Hr))&&(Kr=!0),(T!=="declutter"||!l.collides(ar.declutterBox))&&(Lr=!0),or==="declutter"&&T==="declutter"){const cn=Kr&&Lr;Kr=cn,Lr=cn}Kr&&(or!=="none"&&l.insert(Hr),this.replayImageOrLabel_.apply(this,Wr)),Lr&&(T!=="none"&&l.insert(ar.declutterBox),this.replayImageOrLabel_.apply(this,cs))}else this.replayImageOrLabel_.apply(this,cs)}++f;break;case kt.DRAW_CHARS:const re=V[1],z=V[2],ae=V[3],qe=V[4];L=V[5];const we=V[6],Je=V[7],gt=V[8];P=V[9];const dt=V[10];M=V[11],Array.isArray(M)&&(M=M.reduce(Yz,"")),C=V[12];const At=[V[13],V[13]];T=V[14]||"declutter";const Rt=V[15],tn=this.textStates[C],Nr=tn.font,$r=[tn.scale[0]*Je,tn.scale[1]*Je];let yn;Nr in this.widths_?yn=this.widths_[Nr]:(yn={},this.widths_[Nr]=yn);const Yi=rA(h,re,z,2),Xi=Math.abs($r[0])*tk(Nr,M,yn);if(qe||Xi<=Yi){const ar=this.textStates[C].textAlign,cs=(Yi-Xi)*L2(M,ar),Wr=Hz(h,re,z,2,M,cs,we,Math.abs($r[0]),tk,Nr,yn,Ce?0:this.viewRotation_,Rt);e:if(Wr){const or=[];let Hr,Kr,Lr,cn,mr;if(P)for(Hr=0,Kr=Wr.length;Hr<Kr;++Hr){mr=Wr[Hr],Lr=mr[4],cn=this.createLabel(Lr,C,"",P),x=mr[2]+($r[0]<0?-dt:dt),w=ae*cn.height+(.5-ae)*2*dt*$r[1]/$r[0]-gt;const Sr=this.calculateImageOrLabelDimensions_(cn.width,cn.height,mr[0],mr[1],cn.width,cn.height,x,w,0,0,mr[3],At,!1,_h,!1,ce);if(l&&T==="declutter"&&l.collides(Sr.declutterBox))break e;or.push([e,t,cn,Sr,1,null,null])}if(L)for(Hr=0,Kr=Wr.length;Hr<Kr;++Hr){mr=Wr[Hr],Lr=mr[4],cn=this.createLabel(Lr,C,L,""),x=mr[2],w=ae*cn.height-gt;const Sr=this.calculateImageOrLabelDimensions_(cn.width,cn.height,mr[0],mr[1],cn.width,cn.height,x,w,0,0,mr[3],At,!1,_h,!1,ce);if(l&&T==="declutter"&&l.collides(Sr.declutterBox))break e;or.push([e,t,cn,Sr,1,null,null])}l&&T!=="none"&&l.load(or.map(gk));for(let Sr=0,us=or.length;Sr<us;++Sr)this.replayImageOrLabel_.apply(this,or[Sr])}}++f;break;case kt.END_GEOMETRY:if(a!==void 0){ce=V[1];const ar=a(ce,ie,T);if(ar)return ar}++f;break;case kt.FILL:ke?O++:this.fill_(e),++f;break;case kt.MOVE_TO_LINE_TO:for(y=V[1],v=V[2],Ie=h[y],Te=h[y+1],e.moveTo(Ie,Te),I=Ie+.5|0,b=Te+.5|0,y+=2;y<v;y+=2)Ie=h[y],Te=h[y+1],N=Ie+.5|0,F=Te+.5|0,(y==v-2||N!==I||F!==b)&&(e.lineTo(Ie,Te),I=N,b=F);++f;break;case kt.SET_FILL_STYLE:this.alignAndScaleFill_=V[2],O&&(this.fill_(e),O=0,U&&(e.stroke(),U=0)),e.fillStyle=V[1],++f;break;case kt.SET_STROKE_STYLE:U&&(e.stroke(),U=0),this.setStrokeStyle_(e,V),++f;break;case kt.STROKE:ke?U++:e.stroke(),++f;break;default:++f;break}}O&&this.fill_(e),U&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const uh=["Polygon","Circle","LineString","Image","Text","Default"],U5=["Image","Text"],qz=uh.filter(n=>!U5.includes(n));class Zz{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Xa(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new Xz(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,l=$o(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Jr(o,o));const h=this.hitDetectionContext_;h.canvas.width!==o||h.canvas.height!==o?(h.canvas.width=o,h.canvas.height=o):u||h.clearRect(0,0,o,o);let f;this.renderBuffer_!==void 0&&(f=Qs(),dm(f,e),Wm(f,t*(this.renderBuffer_+i),f));const g=Qz(i);let y;function v(F,W,M){const C=h.getImageData(0,0,o,o).data;for(let P=0,L=g.length;P<L;P++)if(C[g[P]]>0){if(!a||M==="none"||y!=="Image"&&y!=="Text"||a.includes(F)){const O=(g[P]-3)/4,U=i-O%o,j=i-(O/o|0),xe=s(F,W,U*U+j*j);if(xe)return xe}h.clearRect(0,0,o,o);break}}const x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(bl);let w,T,I,b,N;for(w=x.length-1;w>=0;--w){const F=x[w].toString();for(I=this.executorsByZIndex_[F],T=uh.length-1;T>=0;--T)if(y=uh[T],b=I[y],b!==void 0&&(N=b.executeHitDetection(h,l,r,v,f),N))return N}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return Zc(o,0,8,2,e,o),o}isEmpty(){return Nh(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?NB:bl),a=a||uh;const u=uh.length;for(let h=0,f=l.length;h<f;++h){const g=l[h].toString(),y=this.executorsByZIndex_[g];for(let v=0,x=a.length;v<x;++v){const w=a[v],T=y[w];if(T!==void 0){const I=o===null?void 0:T.getZIndexContext(),b=I?I.getContext():e,N=this.maxExtent_&&w!=="Image"&&w!=="Text";if(N&&(b.save(),this.clip(b,r)),!I||w==="Text"||w==="Image"?T.execute(b,t,r,i,s,o):I.pushFunction(F=>T.execute(F,t,r,i,s,o)),N&&b.restore(),I){I.offset();const F=l[h]*u+uh.indexOf(w);this.deferredZIndexContexts_[F]||(this.deferredZIndexContexts_[F]=[]),this.deferredZIndexContexts_[F].push(I)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(bl);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const O2={};function Qz(n){if(O2[n]!==void 0)return O2[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=r[o];l||(l=[],r[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return O2[n]=i,i}function pk(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let Yp=class z5 extends Vv{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;Nn(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||En(a)),Nn(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),Nn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=xt.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?xt.LOADED:xt.IDLE:l=xt.LOADING:l=xt.LOADED),this.color_=e.color!==void 0?Fh(e.color):null,this.iconImage_=ax(a,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,h;if(e.size)[u,h]=e.size;else{const f=this.getImage(1);if(f.width&&f.height)u=f.width,h=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const y=this.iconImage_.getSize();this.setScale(pk(y[0],y[1],e.width,e.height))};this.listenImageChange(g);return}}u!==void 0&&this.setScale(pk(u,h,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new z5({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=ax(null,e,this.crossOrigin_,xt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==xt.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==xt.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Wt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Wt.CHANGE,e)}ready(){return this.iconImage_.ready()}};const Co=.5;function Jz(n,e,t,r,i,s,a,o,l){const u=i,h=n[0]*Co,f=n[1]*Co,g=Jr(h,f);g.imageSmoothingEnabled=!1;const y=g.canvas,v=new dz(g,Co,i,null,a,o,null),x=t.length,w=Math.floor((256*256*256-1)/x),T={};for(let b=1;b<=x;++b){const N=t[b-1],F=N.getStyleFunction()||r;if(!F)continue;let W=F(N,s);if(!W)continue;Array.isArray(W)||(W=[W]);const C=(b*w).toString(16).padStart(7,"#00000");for(let P=0,L=W.length;P<L;++P){const O=W[P],U=O.getGeometryFunction()(N);if(!U||!ns(u,U.getExtent()))continue;const j=O.clone(),xe=j.getFill();xe&&xe.setColor(C);const Ce=j.getStroke();Ce&&(Ce.setColor(C),Ce.setLineDash(null)),j.setText(void 0);const Ge=O.getImage();if(Ge){const Te=Ge.getImageSize();if(!Te)continue;const ie=Jr(Te[0],Te[1],void 0,{alpha:!1}),V=ie.canvas;ie.fillStyle=C,ie.fillRect(0,0,V.width,V.height),j.setImage(new Yp({img:V,anchor:Ge.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ge.getOrigin(),opacity:1,size:Ge.getSize(),scale:Ge.getScale(),rotation:Ge.getRotation(),rotateWithView:Ge.getRotateWithView()}))}const ke=j.getZIndex()||0;let ce=T[ke];ce||(ce={},T[ke]=ce,ce.Polygon=[],ce.Circle=[],ce.LineString=[],ce.Point=[]);const Ie=U.getType();if(Ie==="GeometryCollection"){const Te=U.getGeometriesArrayRecursive();for(let ie=0,V=Te.length;ie<V;++ie){const J=Te[ie];ce[J.getType().replace("Multi","")].push(J,j)}}else ce[Ie.replace("Multi","")].push(U,j)}}const I=Object.keys(T).map(Number).sort(bl);for(let b=0,N=I.length;b<N;++b){const F=T[I[b]];for(const W in F){const M=F[W];for(let C=0,P=M.length;C<P;C+=2){v.setStyle(M[C+1]);for(let L=0,O=e.length;L<O;++L)v.setTransform(e[L]),v.drawGeometry(M[C])}}}return g.getImageData(0,0,y.width,y.height)}function e$(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*Co),s=Math.floor(Math.round(n[1])*Co),a=(Qn(i,0,t.width-1)+Qn(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],h=t.data[a+2]+256*(l+256*o),f=Math.floor((256*256*256-1)/e.length);h&&h%f===0&&r.push(e[h/f-1])}return r}class $5 extends Qo{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const t$=5;class n$ extends Vp{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=t$}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Vt()}getData(e){return null}prepareFrame(e){return Vt()}renderFrame(e,t){return Vt()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===xt.LOADED||t.getState()===xt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=xt.LOADED&&t!=xt.ERROR&&e.addEventListener(Wt.CHANGE,this.boundHandleImageChange_),t==xt.IDLE&&(e.load(),t=e.getState()),t==xt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const yk=[];let _f=null;function r$(){_f=Jr(1,1,void 0,{willReadFrequently:!0})}class gA extends n${constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Xa(),this.pixelTransform=Xa(),this.inversePixelTransform=Xa(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){_f||r$(),_f.clearRect(0,0,1,1);let i;try{_f.drawImage(e,t,r,1,1,0,0,1,1),i=_f.getImageData(0,0,1,1).data}catch{return _f=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Su(Fh(e.style.backgroundColor),Fh(r)))){const o=e.firstElementChild;Uc(o)&&(a=o.getContext("2d"))}if(a&&IU(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=Xs?v5():document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Jr();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=id(r),s=kv(r),a=Pv(r),o=Cv(r);Qr(t.coordinateToPixelTransform,i),Qr(t.coordinateToPixelTransform,s),Qr(t.coordinateToPixelTransform,a),Qr(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;Qr(l,i),Qr(l,s),Qr(l,a),Qr(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(sn(r)/i*a),l=Math.round(Vr(r)/i*a);$o(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-l/2),l5(this.inversePixelTransform,this.pixelTransform);const u=TU(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const h=this.context.canvas;h.width!=o||h.height!=l?(h.width=o,h.height=l):this.context.clearRect(0,0,o,l),u!==h.style.transform&&(h.style.transform=u)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new $5(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(xa.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(xa.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new B5),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(xa.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(xa.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const l=s/2,u=a/2,h=i/t,f=-h,g=-e[0]+o,y=-e[1];return $o(this.tempTransform,l,u,h,f,-r,g,y)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class i$ extends gA{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Qs(),this.wrappedRenderedExtent_=Qs(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,h=l.getExtent(),f=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),y=t.pixelRatio,v=t.viewHints,x=!(v[oi.ANIMATING]||v[oi.INTERACTING]),w=this.context,T=Math.round(sn(i)/o*y),I=Math.round(Vr(i)/o*y),b=f.getWrapX()&&l.canWrapX(),N=b?sn(h):null,F=b?Math.ceil((i[2]-h[2])/N)+1:1;let W=b?Math.floor((i[0]-h[0])/N):0;do{let M=this.getRenderTransform(a,o,0,y,T,I,W*N);t.declutter&&(M=M.slice(0)),e.execute(w,[w.canvas.width,w.canvas.height],M,u,x,r===void 0?uh:r?U5:qz,r?g&&t.declutter[g]:void 0)}while(++W<F)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Jr(this.context.canvas.width,this.context.canvas.height,yk))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,jv(this.context),yk.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(xa.PRERENDER)||this.getLayer().hasListener(xa.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const l=ko(r.extent);o=ns(l,e.extent),this.clipped_=o&&!Vc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),h=[],f=r[0]*Co,g=r[1]*Co;h.push(this.getRenderTransform(i,s,a,Co,f,g,0).slice());const y=u.getSource(),v=o.getExtent();if(y.getWrapX()&&o.canWrapX()&&!Vc(v,l)){let x=l[0];const w=sn(v);let T=0,I;for(;x<v[0];)--T,I=w*T,h.push(this.getRenderTransform(i,s,a,Co,f,g,I).slice()),x+=w;for(T=0,x=l[2];x>v[2];)++T,I=w*T,h.push(this.getRenderTransform(i,s,a,Co,f,g,I).slice()),x-=w}this.hitDetectionImageData_=Jz(r,h,this.renderedFeatures_,u.getStyleFunction(),l,s,a,nk(s,this.renderedPixelRatio_))}t(e$(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),u={},h=function(g,y,v){const x=En(g),w=u[x];if(w){if(w!==!0&&v<w.distanceSq){if(v===0)return u[x]=!0,s.splice(s.lastIndexOf(w),1),i(g,l,y);w.geometry=y,w.distanceSq=v}}else{if(v===0)return u[x]=!0,i(g,l,y);s.push(u[x]={feature:g,layer:l,geometry:y,distanceSq:v,callback:i})}},f=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,h,f?t.declutter?.[f]?.all().map(g=>g.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[oi.ANIMATING],s=e.viewHints[oi.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,h=u.projection,f=u.resolution,g=e.pixelRatio,y=t.getRevision(),v=t.getRenderBuffer();let x=t.getRenderOrder();x===void 0&&(x=gz);const w=u.center.slice(),T=Wm(l,v*f),I=T.slice(),b=[T.slice()],N=h.getExtent();if(r.getWrapX()&&h.canWrapX()&&!Vc(N,e.extent)){const xe=sn(N),Ce=Math.max(sn(T)/2,xe);T[0]=N[0]-Ce,T[2]=N[2]+Ce,QO(w,h);const Ge=XO(b[0],h);Ge[0]<N[0]&&Ge[2]<N[2]?b.push([Ge[0]+xe,Ge[1],Ge[2]+xe,Ge[3]]):Ge[0]>N[0]&&Ge[2]>N[2]&&b.push([Ge[0]-xe,Ge[1],Ge[2]-xe,Ge[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==y&&this.renderedRenderOrder_==x&&this.renderedFrameDeclutter_===!!e.declutter&&Vc(this.wrappedRenderedExtent_,T))return Su(this.renderedExtent_,I)||(this.hitDetectionImageData_=null,this.renderedExtent_=I),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const F=new Wz(k5(f,g),T,f,g);let W;for(let xe=0,Ce=b.length;xe<Ce;++xe)r.loadFeatures(b[xe],f,h);const M=nk(f,g);let C=!0;const P=(xe,Ce)=>{let Ge;const ke=xe.getStyleFunction()||t.getStyleFunction();if(ke&&(Ge=ke(xe,f)),Ge){const ce=this.renderFeature(xe,M,Ge,F,W,this.getLayer().getDeclutter(),Ce);C=C&&!ce}},L=o5(T),O=r.getFeaturesInExtent(L);x&&O.sort(x);for(let xe=0,Ce=O.length;xe<Ce;++xe)P(O[xe],xe);this.renderedFeatures_=O,this.ready=C;const U=F.finish(),j=new Zz(T,f,g,r.getOverlaps(),U,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=f,this.renderedRevision_=y,this.renderedRenderOrder_=x,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=I,this.wrappedRenderedExtent_=T,this.renderedCenter_=w,this.renderedProjection_=h,this.renderedPixelRatio_=g,this.replayGroup_=j,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,h=r.length;u<h;++u)l=rk(i,e,r[u],t,this.boundHandleStyleImageChange_,s,a,o)||l;else l=rk(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return l}}let ld=0;const ts=1<<ld++,hn=1<<ld++,Es=1<<ld++,Ua=1<<ld++,jh=1<<ld++,qg=1<<ld++,$y=Math.pow(2,ld)-1,mA={[ts]:"boolean",[hn]:"number",[Es]:"string",[Ua]:"color",[jh]:"number[]",[qg]:"size"},s$=Object.keys(mA).map(Number).sort(bl);function a$(n){return n in mA}function Zg(n){const e=[];for(const t of s$)Qg(n,t)&&e.push(mA[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Qg(n,e){return(n&e)===e}function wc(n,e){return n===e}class Zr{constructor(e,t){if(!a$(e))throw new Error(`literal expressions must have a specific type, got ${Zg(e)}`);this.type=e,this.value=t}}class o${constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function W5(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Ai(n,e,t){switch(typeof n){case"boolean":{if(wc(e,Es))return new Zr(Es,n?"true":"false");if(!Qg(e,ts))throw new Error(`got a boolean, but expected ${Zg(e)}`);return new Zr(ts,n)}case"number":{if(wc(e,qg))return new Zr(qg,Is(n));if(wc(e,ts))return new Zr(ts,!!n);if(wc(e,Es))return new Zr(Es,n.toString());if(!Qg(e,hn))throw new Error(`got a number, but expected ${Zg(e)}`);return new Zr(hn,n)}case"string":{if(wc(e,Ua))return new Zr(Ua,oA(n));if(wc(e,ts))return new Zr(ts,!!n);if(!Qg(e,Es))throw new Error(`got a string, but expected ${Zg(e)}`);return new Zr(Es,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return _$(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(wc(e,qg)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Zr(qg,n)}if(wc(e,Ua)){if(n.length===3)return new Zr(Ua,[...n,1]);if(n.length===4)return new Zr(Ua,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Qg(e,jh))throw new Error(`got an array of numbers, but expected ${Zg(e)}`);return new Zr(jh,n)}const Ne={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},l$={[Ne.Get]:Ut(Qt(1,1/0),_k),[Ne.Var]:Ut(Qt(1,1),c$),[Ne.Has]:Ut(Qt(1,1/0),_k),[Ne.Id]:Ut(u$,tf),[Ne.Concat]:Ut(Qt(2,1/0),Sn(Es)),[Ne.GeometryType]:Ut(h$,tf),[Ne.LineMetric]:Ut(tf),[Ne.Resolution]:Ut(D2,tf),[Ne.Zoom]:Ut(D2,tf),[Ne.Time]:Ut(D2,tf),[Ne.Any]:Ut(Qt(2,1/0),Sn(ts)),[Ne.All]:Ut(Qt(2,1/0),Sn(ts)),[Ne.Not]:Ut(Qt(1,1),Sn(ts)),[Ne.Equal]:Ut(Qt(2,2),Sn($y)),[Ne.NotEqual]:Ut(Qt(2,2),Sn($y)),[Ne.GreaterThan]:Ut(Qt(2,2),Sn(hn)),[Ne.GreaterThanOrEqualTo]:Ut(Qt(2,2),Sn(hn)),[Ne.LessThan]:Ut(Qt(2,2),Sn(hn)),[Ne.LessThanOrEqualTo]:Ut(Qt(2,2),Sn(hn)),[Ne.Multiply]:Ut(Qt(2,1/0),xk),[Ne.Coalesce]:Ut(Qt(2,1/0),xk),[Ne.Divide]:Ut(Qt(2,2),Sn(hn)),[Ne.Add]:Ut(Qt(2,1/0),Sn(hn)),[Ne.Subtract]:Ut(Qt(2,2),Sn(hn)),[Ne.Clamp]:Ut(Qt(3,3),Sn(hn)),[Ne.Mod]:Ut(Qt(2,2),Sn(hn)),[Ne.Pow]:Ut(Qt(2,2),Sn(hn)),[Ne.Abs]:Ut(Qt(1,1),Sn(hn)),[Ne.Floor]:Ut(Qt(1,1),Sn(hn)),[Ne.Ceil]:Ut(Qt(1,1),Sn(hn)),[Ne.Round]:Ut(Qt(1,1),Sn(hn)),[Ne.Sin]:Ut(Qt(1,1),Sn(hn)),[Ne.Cos]:Ut(Qt(1,1),Sn(hn)),[Ne.Atan]:Ut(Qt(1,2),Sn(hn)),[Ne.Sqrt]:Ut(Qt(1,1),Sn(hn)),[Ne.Match]:Ut(Qt(4,1/0),vk,f$),[Ne.Between]:Ut(Qt(3,3),Sn(hn)),[Ne.Interpolate]:Ut(Qt(6,1/0),vk,g$),[Ne.Case]:Ut(Qt(3,1/0),d$,m$),[Ne.In]:Ut(Qt(2,2),p$),[Ne.Number]:Ut(Qt(1,1/0),Sn($y)),[Ne.String]:Ut(Qt(1,1/0),Sn($y)),[Ne.Array]:Ut(Qt(1,1/0),Sn(hn)),[Ne.Color]:Ut(Qt(1,4),Sn(hn)),[Ne.Band]:Ut(Qt(1,3),Sn(hn)),[Ne.Palette]:Ut(Qt(2,2),y$),[Ne.ToString]:Ut(Qt(1,1),Sn(ts|hn|Es|Ua))};function _k(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new Zr(hn,a);break}case"string":{i[s]=new Zr(Es,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function c$(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new Zr(Es,r)]}function u$(n,e,t){t.featureId=!0}function h$(n,e,t){t.geometryType=!0}function D2(n,e,t){t.mapState=!0}function tf(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Qt(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function xk(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=Ai(n[s+1],e,t);i[s]=a}return i}function Sn(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=Ai(e[a+1],n,r);s[a]=o}return s}}function d$(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function vk(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function f$(n,e,t){const r=n.length-1,i=Es|hn|ts,s=Ai(n[1],i,t),a=Ai(n[n.length-1],e,t),o=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const u=Ai(n[l+2],s.type,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=Ai(n[l+3],a.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...o,a]}function g$(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new Zr(hn,i);let a;try{a=Ai(n[2],hn,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const u=Ai(n[l+3],hn,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=Ai(n[l+4],e,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,a,...o]}function m$(n,e,t){const r=Ai(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=Ai(n[s+1],ts,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=Ai(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function p$(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=Es}else i=hn;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const l=Ai(r[o],i,t);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[Ai(n[1],i,t),...s]}function y$(n,e,t){let r;try{r=Ai(n[1],hn,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=Ai(i[a],Ua,t)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof Zr))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function Ut(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new o$(t,i,...s)}}function _$(n,e,t){const r=n[0],i=l$[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function H5(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return H5(n.getGeometries()[0]);default:return""}}function K5(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Hl(n,e,t){const r=Ai(n,e,t);return io(r)}function io(n,e){if(n instanceof Zr){if(n.type===Ua&&typeof n.value=="string"){const r=oA(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Ne.Number:case Ne.String:case Ne.Coalesce:return x$(n);case Ne.Get:case Ne.Var:case Ne.Has:return v$(n);case Ne.Id:return r=>r.featureId;case Ne.GeometryType:return r=>r.geometryType;case Ne.Concat:{const r=n.args.map(i=>io(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Ne.Resolution:return r=>r.resolution;case Ne.Any:case Ne.All:case Ne.Between:case Ne.In:case Ne.Not:return w$(n);case Ne.Equal:case Ne.NotEqual:case Ne.LessThan:case Ne.LessThanOrEqualTo:case Ne.GreaterThan:case Ne.GreaterThanOrEqualTo:return E$(n);case Ne.Multiply:case Ne.Divide:case Ne.Add:case Ne.Subtract:case Ne.Clamp:case Ne.Mod:case Ne.Pow:case Ne.Abs:case Ne.Floor:case Ne.Ceil:case Ne.Round:case Ne.Sin:case Ne.Cos:case Ne.Atan:case Ne.Sqrt:return S$(n);case Ne.Case:return T$(n);case Ne.Match:return I$(n);case Ne.Interpolate:return A$(n);case Ne.ToString:return b$(n);default:throw new Error(`Unsupported operator ${t}`)}}function x$(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=io(n.args[s]);switch(t){case Ne.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Ne.Number:case Ne.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function v$(n,e){const r=n.args[0].value;switch(n.operator){case Ne.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;a=a[h]}return a};case Ne.Var:return i=>i.variables[r];case Ne.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;if(!a||!Object.hasOwn(a,h))return!1;a=a[h]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function E$(n,e){const t=n.operator,r=io(n.args[0]),i=io(n.args[1]);switch(t){case Ne.Equal:return s=>r(s)===i(s);case Ne.NotEqual:return s=>r(s)!==i(s);case Ne.LessThan:return s=>r(s)<i(s);case Ne.LessThanOrEqualTo:return s=>r(s)<=i(s);case Ne.GreaterThan:return s=>r(s)>i(s);case Ne.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function w$(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=io(n.args[s]);switch(t){case Ne.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Ne.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Ne.Between:return s=>{const a=i[0](s),o=i[1](s),l=i[2](s);return a>=o&&a<=l};case Ne.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case Ne.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function S$(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=io(n.args[s]);switch(t){case Ne.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case Ne.Divide:return s=>i[0](s)/i[1](s);case Ne.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case Ne.Subtract:return s=>i[0](s)-i[1](s);case Ne.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const l=i[2](s);return a>l?l:a};case Ne.Mod:return s=>i[0](s)%i[1](s);case Ne.Pow:return s=>Math.pow(i[0](s),i[1](s));case Ne.Abs:return s=>Math.abs(i[0](s));case Ne.Floor:return s=>Math.floor(i[0](s));case Ne.Ceil:return s=>Math.ceil(i[0](s));case Ne.Round:return s=>Math.round(i[0](s));case Ne.Sin:return s=>Math.sin(i[0](s));case Ne.Cos:return s=>Math.cos(i[0](s));case Ne.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Ne.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function T$(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=io(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function I$(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=io(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t-1;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function A$(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=io(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,l;for(let u=2;u<t;u+=2){const h=r[u](i);let f=r[u+1](i);const g=Array.isArray(f);if(g&&(f=QU(f)),h>=a)return u===2?f:g?R$(s,a,o,l,h,f):Jg(s,a,o,l,h,f);o=h,l=f}return l}}function b$(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=io(n.args[s]);switch(t){case Ne.ToString:return s=>{const a=i[0](s);return n.args[0].type===Ua?lA(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Jg(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+l*(s-r)}function R$(n,e,t,r,i,s){if(i-t===0)return r;const o=Z4(r),l=Z4(s);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const h=[Jg(n,e,t,o[0],i,l[0]),Jg(n,e,t,o[1],i,l[1]),o[2]+Jg(n,e,t,0,i,u),Jg(n,e,t,r[3],i,s[3])];return JU(h)}function C$(n){return!0}function P$(n){const e=W5(),t=k$(n,e),r=K5();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=H5(i.getGeometry())),t(r)}}function Ek(n){const e=W5(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=cT(n[a],e);const i=K5(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const u=a.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const h=r[u](i);h&&(s[l]=h,l+=1)}return s.length=l,s}}function k$(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?Hl(s.filter,ts,e):C$;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=cT(s.style[u],e)}else o=[cT(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const l=r[o].filter;if(l(i)&&!(n[o].else&&a)){a=!0;for(const u of r[o].styles){const h=u(i);h&&s.push(h)}}}return s}}function cT(n,e){const t=Jm(n,"",e),r=ep(n,"",e),i=M$(n,e),s=N$(n,e),a=ws(n,"z-index",e);if(!t&&!r&&!i&&!s&&!Nh(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new gr;return function(l){let u=!0;if(t){const h=t(l);h&&(u=!1),o.setFill(h)}if(r){const h=r(l);h&&(u=!1),o.setStroke(h)}if(i){const h=i(l);h&&(u=!1),o.setText(h)}if(s){const h=s(l);h&&(u=!1),o.setImage(h)}return a&&o.setZIndex(a(l)),u?null:o}}function Jm(n,e,t){let r;if(e+"fill-pattern-src"in n)r=F$(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=pA(n,e+"fill-color",t)}if(!r)return null;const i=new di;return function(s){const a=r(s);return a===aA?null:(i.setColor(a),i)}}function ep(n,e,t){const r=ws(n,e+"stroke-width",t),i=pA(n,e+"stroke-color",t);if(!r&&!i)return null;const s=vl(n,e+"stroke-line-cap",t),a=vl(n,e+"stroke-line-join",t),o=Y5(n,e+"stroke-line-dash",t),l=ws(n,e+"stroke-line-dash-offset",t),u=ws(n,e+"stroke-miter-limit",t),h=new Ts;return function(f){if(i){const g=i(f);if(g===aA)return null;h.setColor(g)}if(r&&h.setWidth(r(f)),s){const g=s(f);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(g)}if(a){const g=a(f);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(g)}return o&&h.setLineDash(o(f)),l&&h.setLineDashOffset(l(f)),u&&h.setMiterLimit(u(f)),h}}function M$(n,e){const t="text-",r=vl(n,t+"value",e);if(!r)return null;const i=Jm(n,t,e),s=Jm(n,t+"background-",e),a=ep(n,t,e),o=ep(n,t+"background-",e),l=vl(n,t+"font",e),u=ws(n,t+"max-angle",e),h=ws(n,t+"offset-x",e),f=ws(n,t+"offset-y",e),g=Bf(n,t+"overflow",e),y=vl(n,t+"placement",e),v=ws(n,t+"repeat",e),x=Bv(n,t+"scale",e),w=Bf(n,t+"rotate-with-view",e),T=ws(n,t+"rotation",e),I=vl(n,t+"align",e),b=vl(n,t+"justify",e),N=vl(n,t+"baseline",e),F=Bf(n,t+"keep-upright",e),W=Y5(n,t+"padding",e),M=Uv(n,t+"declutter-mode"),C=new od({declutterMode:M});return function(P){if(C.setText(r(P)),i&&C.setFill(i(P)),s&&C.setBackgroundFill(s(P)),a&&C.setStroke(a(P)),o&&C.setBackgroundStroke(o(P)),l&&C.setFont(l(P)),u&&C.setMaxAngle(u(P)),h&&C.setOffsetX(h(P)),f&&C.setOffsetY(f(P)),g&&C.setOverflow(g(P)),y){const L=y(P);if(L!=="point"&&L!=="line")throw new Error("Expected point or line for text-placement");C.setPlacement(L)}if(v&&C.setRepeat(v(P)),x&&C.setScale(x(P)),w&&C.setRotateWithView(w(P)),T&&C.setRotation(T(P)),I){const L=I(P);if(L!=="left"&&L!=="center"&&L!=="right"&&L!=="end"&&L!=="start")throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(L)}if(b){const L=b(P);if(L!=="left"&&L!=="right"&&L!=="center")throw new Error("Expected left, right, or center for text-justify");C.setJustify(L)}if(N){const L=N(P);if(L!=="bottom"&&L!=="top"&&L!=="middle"&&L!=="alphabetic"&&L!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(L)}return W&&C.setPadding(W(P)),F&&C.setKeepUpright(F(P)),C}}function N$(n,e){return"icon-src"in n?L$(n,e):"shape-points"in n?O$(n,e):"circle-radius"in n?D$(n,e):null}function L$(n,e){const t="icon-",r=t+"src",i=X5(n[r],r),s=ux(n,t+"anchor",e),a=Bv(n,t+"scale",e),o=ws(n,t+"opacity",e),l=ux(n,t+"displacement",e),u=ws(n,t+"rotation",e),h=Bf(n,t+"rotate-with-view",e),f=Sk(n,t+"anchor-origin"),g=Tk(n,t+"anchor-x-units"),y=Tk(n,t+"anchor-y-units"),v=B$(n,t+"color"),x=V$(n,t+"cross-origin"),w=G$(n,t+"offset"),T=Sk(n,t+"offset-origin"),I=hx(n,t+"width"),b=hx(n,t+"height"),N=j$(n,t+"size"),F=Uv(n,t+"declutter-mode"),W=new Yp({src:i,anchorOrigin:f,anchorXUnits:g,anchorYUnits:y,color:v,crossOrigin:x,offset:w,offsetOrigin:T,height:b,width:I,size:N,declutterMode:F});return function(M){return o&&W.setOpacity(o(M)),l&&W.setDisplacement(l(M)),u&&W.setRotation(u(M)),h&&W.setRotateWithView(h(M)),a&&W.setScale(a(M)),s&&W.setAnchor(s(M)),W}}function O$(n,e){const t="shape-",r=t+"points",i=t+"radius",s=uT(n[r],r),a=uT(n[i],i),o=Jm(n,t,e),l=ep(n,t,e),u=Bv(n,t+"scale",e),h=ux(n,t+"displacement",e),f=ws(n,t+"rotation",e),g=Bf(n,t+"rotate-with-view",e),y=hx(n,t+"radius2"),v=hx(n,t+"angle"),x=Uv(n,t+"declutter-mode"),w=new Gv({points:s,radius:a,radius2:y,angle:v,declutterMode:x});return function(T){return o&&w.setFill(o(T)),l&&w.setStroke(l(T)),h&&w.setDisplacement(h(T)),f&&w.setRotation(f(T)),g&&w.setRotateWithView(g(T)),u&&w.setScale(u(T)),w}}function D$(n,e){const t="circle-",r=Jm(n,t,e),i=ep(n,t,e),s=ws(n,t+"radius",e),a=Bv(n,t+"scale",e),o=ux(n,t+"displacement",e),l=ws(n,t+"rotation",e),u=Bf(n,t+"rotate-with-view",e),h=Uv(n,t+"declutter-mode"),f=new Fl({radius:5,declutterMode:h});return function(g){return s&&f.setRadius(s(g)),r&&f.setFill(r(g)),i&&f.setStroke(i(g)),o&&f.setDisplacement(o(g)),l&&f.setRotation(l(g)),u&&f.setRotateWithView(u(g)),a&&f.setScale(a(g)),f}}function ws(n,e,t){if(!(e in n))return;const r=Hl(n[e],hn,t);return function(i){return uT(r(i),e)}}function vl(n,e,t){if(!(e in n))return null;const r=Hl(n[e],Es,t);return function(i){return X5(r(i),e)}}function F$(n,e,t){const r=vl(n,e+"pattern-src",t),i=wk(n,e+"pattern-offset",t),s=wk(n,e+"pattern-size",t),a=pA(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function Bf(n,e,t){if(!(e in n))return null;const r=Hl(n[e],ts,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function pA(n,e,t){if(!(e in n))return null;const r=Hl(n[e],Ua,t);return function(i){return q5(r(i),e)}}function Y5(n,e,t){if(!(e in n))return null;const r=Hl(n[e],jh,t);return function(i){return Xp(r(i),e)}}function ux(n,e,t){if(!(e in n))return null;const r=Hl(n[e],jh,t);return function(i){const s=Xp(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function wk(n,e,t){if(!(e in n))return null;const r=Hl(n[e],jh,t);return function(i){return Z5(r(i),e)}}function Bv(n,e,t){if(!(e in n))return null;const r=Hl(n[e],jh|hn,t);return function(i){return U$(r(i),e)}}function hx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function j$(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return Is(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function V$(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Sk(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Tk(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function G$(n,e){const t=n[e];if(t!==void 0)return Xp(t,e)}function Uv(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function B$(n,e){const t=n[e];if(t!==void 0)return q5(t,e)}function Xp(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function X5(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function uT(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function q5(n,e){if(typeof n=="string")return n;const t=Xp(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Z5(n,e){const t=Xp(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function U$(n,e){return typeof n=="number"?n:Z5(n,e)}const Da={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ik(n,e,t){return(function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,u=e?0:s[1]*i,h=o?o[0]:0,f=o?o[1]:0;let g=n[0]+l/2+h,y=n[2]-l/2+h,v=n[1]+u/2+f,x=n[3]-u/2+f;g>y&&(g=(y+g)/2,y=g),v>x&&(v=(x+v)/2,x=v);let w=Qn(r[0],g,y),T=Qn(r[1],v,x);if(a&&t&&i){const I=30*i;w+=-I*Math.log(1+Math.max(0,g-r[0])/I)+I*Math.log(1+Math.max(0,r[0]-y)/I),T+=-I*Math.log(1+Math.max(0,v-r[1])/I)+I*Math.log(1+Math.max(0,r[1]-x)/I)}return[w,T]})}function z$(n){return n}function Q5(n){return Math.pow(n,3)}function L0(n){return 1-Q5(1-n)}function $$(n){return 3*n*n-2*n*n*n}function W$(n){return n}function yA(n,e,t,r){const i=sn(e)/t[0],s=Vr(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function _A(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Qn(r,t/2,e*2)}function H$(n,e,t,r){return e=e!==void 0?e:!0,(function(i,s,a,o){if(i!==void 0){const l=n[0],u=n[n.length-1],h=t?yA(l,t,a,r):l;if(o)return e?_A(i,h,u):Qn(i,u,h);const f=Math.min(h,i),g=Math.floor(bv(n,f,s));return n[g]>h&&g<n.length-1?n[g+1]:n[g]}})}function K$(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(a,o,l,u){if(a!==void 0){const h=i?yA(e,i,l,s):e;if(u)return r?_A(a,h,t):Qn(a,t,h);const f=1e-9,g=Math.ceil(Math.log(e/h)/Math.log(n)-f),y=-o*(.5-f)+.5,v=Math.min(h,a),x=Math.floor(Math.log(e/v)/Math.log(n)+y),w=Math.max(g,x),T=e/Math.pow(n,w);return Qn(T,t,h)}})}function Ak(n,e,t,r,i){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const u=r?yA(n,r,o,i):n;return!t||!l?Qn(s,e,u):_A(s,u,e)}})}function xA(n){if(n!==void 0)return 0}function bk(n){if(n!==void 0)return n}function Y$(n){const e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function X$(n){const e=Cl(5);return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}const q$=42,vA=256,F2=0;class Po extends Jo{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=qI(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&a5(),e.center&&(e.center=xl(e.center,this.projection_)),e.extent&&(e.extent=ko(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Da)delete t[o];this.setProperties(t,!0);const r=Q$(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=Z$(e),s=r.constraint,a=J$(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=xl(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=xl(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const h=arguments[i];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(i===t){r&&Wy(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const h=arguments[i],f={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||$$,callback:r};if(h.center&&(f.sourceCenter=a,f.targetCenter=h.center.slice(),a=f.targetCenter),h.zoom!==void 0?(f.sourceResolution=o,f.targetResolution=this.getResolutionForZoom(h.zoom),o=f.targetResolution):h.resolution&&(f.sourceResolution=o,f.targetResolution=h.resolution,o=f.targetResolution),h.rotation!==void 0){f.sourceRotation=l;const g=qc(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+g,l=f.targetRotation}eW(f)?f.complete=!0:s+=f.duration,u.push(f)}this.animations_.push(u),this.setHint(oi.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[oi.ANIMATING]>0}getInteracting(){return this.hints_[oi.INTERACTING]>0}cancelAnimations(){this.setHint(oi.ANIMATING,-this.hints_[oi.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&Wy(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l.complete)continue;const u=e-l.start;let h=l.duration>0?u/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const f=l.easing(h);if(l.sourceCenter){const g=l.sourceCenter[0],y=l.sourceCenter[1],v=l.targetCenter[0],x=l.targetCenter[1];this.nextCenter_=l.targetCenter;const w=g+f*(v-g),T=y+f*(x-y);this.targetCenter_=[w,T]}if(l.sourceResolution&&l.targetResolution){const g=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const y=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(g,0,y,!0);this.targetCenter_=this.calculateCenterZoom(v,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const g=f===1?qc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const y=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(y,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(oi.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&Wy(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],HI(r,e-this.getRotation()),WB(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&tT(e,this.getProjection())}getCenterInternal(){return this.get(Da.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return o5(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Nn(t,"The view center is not defined");const r=this.getResolution();Nn(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return Nn(i!==void 0,"The view rotation is not defined"),Z_(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Da.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(ko(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=sn(e)/t[0],i=Vr(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(s){return t/Math.pow(e,s*i)})}getRotation(){return this.get(Da.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return(function(a){return Math.log(r/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=j2(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=bv(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Qn(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Qn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(Nn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Nn(!M0(e),"Cannot fit empty extent provided as `geometry`");const i=ko(e,this.getProjection());r=sk(i)}else if(e.getType()==="Circle"){const i=ko(e.getExtent(),this.getProjection());r=sk(i),r.rotate(this.getRotation(),zo(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,u=-1/0,h=-1/0;for(let f=0,g=s.length;f<g;f+=a){const y=s[f]*r-s[f+1]*i,v=s[f]*i+s[f+1]*r;o=Math.min(o,y),l=Math.min(l,v),u=Math.max(u,y),h=Math.max(h,v)}return[o,l,u,h]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),h=Math.sin(u),f=Math.cos(u),g=zo(o);g[0]+=(i[1]-i[3])/2*l,g[1]+=(i[0]-i[2])/2*l;const y=g[0]*f-g[1]*h,v=g[1]*f+g[0]*h,x=this.getConstrainedCenter([y,v],l),w=t.callback?t.callback:$m;t.duration!==void 0?this.animateInternal({resolution:l,center:x,duration:t.duration,easing:t.easing},w):(this.targetResolution_=l,this.targetCenter_=x,this.applyTargetState_(!1,!0),Wy(w,!0))}centerOn(e,t,r){this.centerOnInternal(xl(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(j2(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),l=j2(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=tT(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&xl(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=xl(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&xl(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(Da.ROTATION)!==i&&this.set(Da.ROTATION,i),this.get(Da.RESOLUTION)!==a&&(this.set(Da.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Da.CENTER)||!J_(this.get(Da.CENTER),o))&&this.set(Da.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!J_(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:L0,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(oi.INTERACTING,1)}endInteraction(e,t,r){r=r&&xl(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(oi.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function Wy(n,e){setTimeout(function(){n(e)},0)}function Z$(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Ik(n.extent,n.constrainOnlyCenter,t)}const e=qI(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Ik(t,!1,!1)}return z$}function Q$(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:F2,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,h=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,f=n.showFullExtent!==void 0?n.showFullExtent:!1,g=qI(n.projection,"EPSG:3857"),y=g.getExtent();let v=n.constrainOnlyCenter,x=n.extent;if(!u&&!x&&g.isGlobal()&&(v=!1,x=y),n.resolutions!==void 0){const w=n.resolutions;t=w[a],r=w[o]!==void 0?w[o]:w[w.length-1],n.constrainResolution?e=H$(w,h,!v&&x,f):e=Ak(t,r,h,!v&&x,f)}else{const T=(y?Math.max(sn(y),Vr(y)):360*a0.degrees/g.getMetersPerUnit())/vA/Math.pow(2,F2),I=T/Math.pow(2,28-F2);t=n.maxResolution,t!==void 0?a=0:t=T/Math.pow(l,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,o):r=T/Math.pow(l,o):r=I),o=a+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,o-a),n.constrainResolution?e=K$(l,t,r,h,!v&&x,f):e=Ak(t,r,h,!v&&x,f)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:l}}function J$(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?X$():t===!1?bk:typeof t=="number"?Y$(t):bk}return xA}function eW(n){return!(n.sourceCenter&&n.targetCenter&&!J_(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function j2(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,a=-a;const u=o*s-l*a,h=l*s+o*a;return[u,h]}const Dn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class J5 extends Jo{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Dn.OPACITY]=e.opacity!==void 0?e.opacity:1,Nn(typeof t[Dn.OPACITY]=="number","Layer opacity must be a number"),t[Dn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Dn.Z_INDEX]=e.zIndex,t[Dn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Dn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Dn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Dn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Qn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Vt()}getLayerStatesArray(e){return Vt()}getExtent(){return this.get(Dn.EXTENT)}getMaxResolution(){return this.get(Dn.MAX_RESOLUTION)}getMinResolution(){return this.get(Dn.MIN_RESOLUTION)}getMinZoom(){return this.get(Dn.MIN_ZOOM)}getMaxZoom(){return this.get(Dn.MAX_ZOOM)}getOpacity(){return this.get(Dn.OPACITY)}getSourceState(){return Vt()}getVisible(){return this.get(Dn.VISIBLE)}getZIndex(){return this.get(Dn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Dn.EXTENT,e)}setMaxResolution(e){this.set(Dn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Dn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Dn.MAX_ZOOM,e)}setMinZoom(e){this.set(Dn.MIN_ZOOM,e)}setOpacity(e){Nn(typeof e=="number","Layer opacity must be a number"),this.set(Dn.OPACITY,e)}setVisible(e){this.set(Dn.VISIBLE,e)}setZIndex(e){this.set(Dn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class qp extends J5{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Dn.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Dn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Xn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=fn(e,Wt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Po?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return EA(i,t.viewState)&&(!s||ns(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof Po?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Dn.MAP,e)}getMapInternal(){return this.get(Dn.MAP)}setMap(e){this.mapPrecomposeKey_&&(Xn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Xn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=fn(e,xa.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=fn(this,Wt.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);Nn(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Dn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function EA(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const Rk={RENDER_ORDER:"renderOrder"};class eD extends qp{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Rk.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new V5(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Rk.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?G5:e;const t=tW(e);this.styleFunction_=e===null?void 0:Fz(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function tW(n){if(n===void 0)return G5;if(!n)return null;if(typeof n=="function"||n instanceof gr)return n;if(!Array.isArray(n))return Ek([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof gr){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof gr))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return P$(i)}return Ek(n)}class Zp extends eD{constructor(e){super(e)}createRenderer(){return new i$(this)}}const Sc={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Nc extends Qo{constructor(e,t){super(e),this.layer=t}}const V2={LAYERS:"layers"};let zv=class tD extends J5{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(V2.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new _a(r.slice(),{unique:!0}):Nn(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new _a(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Xn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(fn(e,xs.ADD,this.handleLayersAdd_,this),fn(e,xs.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Xn);Fp(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new Nc(Sc.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[fn(e,i0.PROPERTYCHANGE,this.handleLayerChange_,this),fn(e,Wt.CHANGE,this.handleLayerChange_,this)];e instanceof tD&&t.push(fn(e,Sc.ADDLAYER,this.handleLayerGroupAdd_,this),fn(e,Sc.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[En(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Nc(Sc.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Nc(Sc.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Nc(Sc.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=En(t);this.listenerKeys_[r].forEach(Xn),delete this.listenerKeys_[r],this.dispatchEvent(new Nc(Sc.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(V2.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new Nc(Sc.REMOVELAYER,r[i]))}this.set(V2.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const l=t[a];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=Rl(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}};const Mt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class wA extends jp{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(Wt.CHANGE)}release(){this.setState(Mt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Mt.EMPTY){if(this.state!==Mt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Vt()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:Q5(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function hT(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const nW=new Error("disposed"),rW=[256,256];class Ck extends wA{constructor(e){const t=Mt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=hT(this.data_);return e?[e.width,e.height]:rW}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Mt.IDLE&&this.state!==Mt.ERROR)return;this.state=Mt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Mt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Mt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(nW),this.controller_=null),super.disposeInternal()}}class nD extends wA{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,Xs?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Mt.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=Mt.ERROR,this.unlistenImage_(),this.image_=iW(),this.changed()}handleImageLoad_(){if(Xs)this.state=Mt.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Mt.LOADED:this.state=Mt.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==Mt.ERROR&&(this.state=Mt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Mt.IDLE&&(this.state=Mt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ez(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function iW(){const n=Jr(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let G2;const Uf=[];function Pk(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function B2(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function sW(){if(G2===void 0){const n=Jr(6,6,Uf);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Pk(n,4,5,4,0),Pk(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;G2=B2(e,0)||B2(e,4)||B2(e,8),jv(n),Uf.push(n.canvas)}return G2}function dx(n,e,t,r){const i=zp(t,e,n);let s=rx(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||Lh(l,i)){const u=rx(n,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function aW(n,e,t,r){const i=zo(t);let s=dx(n,e,i,r);return(!isFinite(s)||s<=0)&&KO(t,function(a){return s=dx(n,e,a,r),isFinite(s)&&s>0}),s}function rD(n,e,t,r,i,s,a,o,l,u,h,f,g,y){const v=Jr(Math.round(t*n),Math.round(t*e),Uf);if(f||(v.imageSmoothingEnabled=!1),l.length===0)return v.canvas;v.scale(t,t);function x(F){return Math.round(F*t)/t}v.globalCompositeOperation="lighter";const w=Qs();l.forEach(function(F,W,M){WO(w,F.extent)});let T;const I=t/r,b=(f?1:1+Math.pow(2,-24))/I;(!g||l.length!==1||u!==0)&&(T=Jr(Math.round(sn(w)*I),Math.round(Vr(w)*I),Uf),f||(T.imageSmoothingEnabled=!1),l.forEach(function(F,W,M){if(F.image.width>0&&F.image.height>0){if(F.clipExtent){T.save();const U=(F.clipExtent[0]-w[0])*I,j=-(F.clipExtent[3]-w[3])*I,xe=sn(F.clipExtent)*I,Ce=Vr(F.clipExtent)*I;T.rect(f?U:Math.round(U),f?j:Math.round(j),f?xe:Math.round(U+xe)-Math.round(U),f?Ce:Math.round(j+Ce)-Math.round(j)),T.clip()}const C=(F.extent[0]-w[0])*I,P=-(F.extent[3]-w[3])*I,L=sn(F.extent)*I,O=Vr(F.extent)*I;T.drawImage(F.image,u,u,F.image.width-2*u,F.image.height-2*u,f?C:Math.round(C),f?P:Math.round(P),f?L:Math.round(C+L)-Math.round(C),f?O:Math.round(P+O)-Math.round(P)),F.clipExtent&&T.restore()}}));const N=id(a);return o.getTriangles().forEach(function(F,W,M){const C=F.source,P=F.target;let L=C[0][0],O=C[0][1],U=C[1][0],j=C[1][1],xe=C[2][0],Ce=C[2][1];const Ge=x((P[0][0]-N[0])/s),ke=x(-(P[0][1]-N[1])/s),ce=x((P[1][0]-N[0])/s),Ie=x(-(P[1][1]-N[1])/s),Te=x((P[2][0]-N[0])/s),ie=x(-(P[2][1]-N[1])/s),V=L,J=O;L=0,O=0,U-=V,j-=J,xe-=V,Ce-=J;const te=[[U,j,0,0,ce-Ge],[xe,Ce,0,0,Te-Ge],[0,0,U,j,Ie-ke],[0,0,xe,Ce,ie-ke]],X=$B(te);if(!X)return;if(v.save(),v.beginPath(),sW()||!f){v.moveTo(ce,Ie);const Me=4,Fe=Ge-ce,Le=ke-Ie;for(let je=0;je<Me;je++)v.lineTo(ce+x((je+1)*Fe/Me),Ie+x(je*Le/(Me-1))),je!=Me-1&&v.lineTo(ce+x((je+1)*Fe/Me),Ie+x((je+1)*Le/(Me-1)));v.lineTo(Te,ie)}else v.moveTo(ce,Ie),v.lineTo(Ge,ke),v.lineTo(Te,ie);v.clip(),v.transform(X[0],X[2],X[1],X[3],Ge,ke),v.translate(w[0]-V,w[3]-J);let ue;if(T)ue=T.canvas,v.scale(b,-b);else{const Me=l[0],Fe=Me.extent;ue=Me.image,v.scale(sn(Fe)/ue.width,-Vr(Fe)/ue.height)}v.drawImage(ue,0,0),v.restore()}),T&&(jv(T),Uf.push(T.canvas)),h&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,o.getTriangles().forEach(function(F,W,M){const C=F.target,P=(C[0][0]-N[0])/s,L=-(C[0][1]-N[1])/s,O=(C[1][0]-N[0])/s,U=-(C[1][1]-N[1])/s,j=(C[2][0]-N[0])/s,xe=-(C[2][1]-N[1])/s;v.beginPath(),v.moveTo(O,U),v.lineTo(P,L),v.lineTo(j,xe),v.closePath(),v.stroke()}),v.restore()),v.canvas}const oW=10,kk=.25;class iD{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let l={};const u=o?eT(b=>Qr(o,zp(b,this.targetProj_,this.sourceProj_))):Hm(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const N=b[0]+"/"+b[1];return l[N]||(l[N]=u(b)),l[N]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&sn(i)>=sn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?sn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?sn(this.targetProj_.getExtent()):null;const h=id(r),f=kv(r),g=Pv(r),y=Cv(r),v=this.transformInv_(h),x=this.transformInv_(f),w=this.transformInv_(g),T=this.transformInv_(y),I=oW+(a?Math.max(0,Math.ceil(Math.log2(XS(r)/(a*a*256*256)))):0);if(this.addQuad_(h,f,g,y,v,x,w,T,I),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(N,F,W){b=Math.min(b,N.source[0][0],N.source[1][0],N.source[2][0])}),this.triangles_.forEach(N=>{if(Math.max(N.source[0][0],N.source[1][0],N.source[2][0])-b>this.sourceWorldWidth_/2){const F=[[N.source[0][0],N.source[0][1]],[N.source[1][0],N.source[1][1]],[N.source[2][0],N.source[2][1]]];F[0][0]-b>this.sourceWorldWidth_/2&&(F[0][0]-=this.sourceWorldWidth_),F[1][0]-b>this.sourceWorldWidth_/2&&(F[1][0]-=this.sourceWorldWidth_),F[2][0]-b>this.sourceWorldWidth_/2&&(F[2][0]-=this.sourceWorldWidth_);const W=Math.min(F[0][0],F[1][0],F[2][0]);Math.max(F[0][0],F[1][0],F[2][0])-W<this.sourceWorldWidth_/2&&(N.source=F)}})}l={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,l,u){const h=D4([s,a,o,l]),f=this.sourceWorldWidth_?sn(h)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&f>.5&&f<1;let v=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const w=D4([e,t,r,i]);v=sn(w)/this.targetWorldWidth_>kk||v}!y&&this.sourceProj_.isGlobal()&&f&&(v=f>kk||v)}if(!v&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!ns(h,this.maxSourceExtent_))return;let x=0;if(!v&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)v=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(u>0){if(!v){const w=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(w);let I;y?I=(qc(s[0],g)+qc(o[0],g))/2-qc(T[0],g):I=(s[0]+o[0])/2-T[0];const b=(s[1]+o[1])/2-T[1];v=I*I+b*b>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const w=[(t[0]+r[0])/2,(t[1]+r[1])/2],T=this.transformInv_(w),I=[(i[0]+e[0])/2,(i[1]+e[1])/2],b=this.transformInv_(I);this.addQuad_(e,t,w,I,s,a,T,b,u-1),this.addQuad_(I,w,r,i,b,T,o,l,u-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],T=this.transformInv_(w),I=[(r[0]+i[0])/2,(r[1]+i[1])/2],b=this.transformInv_(I);this.addQuad_(e,w,I,i,s,T,b,l,u-1),this.addQuad_(w,t,r,I,T,a,o,b,u-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(e,r,i,s,o,l),(x&14)==0&&this.addTriangle_(e,r,t,s,o,a),x&&((x&13)==0&&this.addTriangle_(t,i,e,a,l,s),(x&7)==0&&this.addTriangle_(t,i,r,a,l,o))}calculateSourceExtent(){const e=Qs();return this.triangles_.forEach(function(t,r,i){const s=t.source;dm(e,s[0]),dm(e,s[1]),dm(e,s[2])}),e}getTriangles(){return this.triangles_}}const sD=.5;class aD extends wA{constructor(e,t,r,i,s,a,o,l,u,h,f,g){super(s,Mt.IDLE,g),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const y=i.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const w=v?Rl(y,v):y;if(XS(w)===0){this.state=Mt.EMPTY;return}const T=e.getExtent();T&&(x?x=Rl(x,T):x=T);const I=i.getResolution(this.wrappedTileCoord_[0]),b=aW(e,r,w,I);if(!isFinite(b)||b<=0){this.state=Mt.EMPTY;return}const N=h!==void 0?h:sD;if(this.triangulation_=new iD(e,r,w,x,b*N,I),this.triangulation_.getTriangles().length===0){this.state=Mt.EMPTY;return}this.sourceZ_=t.getZForResolution(b);let F=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(F[1]=Qn(F[1],x[1],x[3]),F[3]=Qn(F[3],x[1],x[3])):F=Rl(F,x)),!XS(F))this.state=Mt.EMPTY;else{let W=0,M=0;e.canWrapX()&&(W=sn(T),M=Math.floor((F[0]-T[0])/W)),qO(F.slice(),e,!0).forEach(P=>{const L=t.getTileRangeForExtentAndZ(P,this.sourceZ_);for(let O=L.minX;O<=L.maxX;O++)for(let U=L.minY;U<=L.maxY;U++){const j=u(this.sourceZ_,O,U,o);if(j){const xe=M*W;this.sourceTiles_.push({tile:j,offset:xe})}}++M}),this.sourceTiles_.length===0&&(this.state=Mt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==Mt.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Mt.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=rD(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Mt.LOADED}this.changed()}load(){if(this.state==Mt.IDLE){this.state=Mt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Mt.IDLE||r==Mt.LOADING){e++;const i=fn(t,Wt.CHANGE,s=>{const a=t.getState();(a==Mt.LOADED||a==Mt.ERROR||a==Mt.EMPTY)&&(Xn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Mt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(jv(this.canvas_.getContext("2d")),Uf.push(this.canvas_),this.canvas_=null),super.release()}}class SA{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function nf(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new SA(n,e,t,r)}class Mk{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Av&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return Nn(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return Nn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Nn(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function fx(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function lW(n,e,t){return n+"/"+e+"/"+t}function T_(n,e,t,r,i){return`${En(n)},${e},${lW(t,r,i)}`}function oD(n){return cW(n[0],n[1],n[2])}function cW(n,e,t){return(e<<n)+t}function uW(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class hW extends gA{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=Rl(l,ko(t.extent,i.projection))),!o[oi.ANIMATING]&&!o[oi.INTERACTING]&&!M0(l))if(a){const u=i.projection,h=a.getImage(l,s,r,u);h&&(this.loadImage(h)?this.image=h:h.getState()===xt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Qr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Lh(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),l=sn(a),u=Math.floor(o.width*((i[0]-a[0])/l));if(u<0||u>=o.width)return null;const h=Vr(a),f=Math.floor(o.height*((a[3]-i[1])/h));return f<0||f>=o.height?null:this.getImageData(o,u,f)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],h=e.pixelRatio,f=e.viewState,g=f.center,y=f.resolution,v=h*a/(y*l),x=h*o/(y*l);this.prepareContainer(e,t);const w=this.context.canvas.width,T=this.context.canvas.height,I=this.getRenderContext(e);let b=!1,N=!0;if(u.extent){const P=ko(u.extent,f.projection);N=ns(P,e.extent),b=N&&!Vc(P,e.extent),b&&this.clipUnrotated(I,e,P)}const F=r.getImage(),W=$o(this.tempTransform,w/2,T/2,v,x,0,l*(i[0]-g[0])/a,l*(g[1]-i[3])/o);this.renderedResolution=o*h/l;const M=F.width*W[0],C=F.height*W[3];if(this.getLayer().getSource().getInterpolate()||(I.imageSmoothingEnabled=!1),this.preRender(I,e),N&&M>=.5&&C>=.5){const P=W[4],L=W[5],O=u.opacity;O!==1&&(I.save(),I.globalAlpha=O),I.drawImage(F,0,0,+F.width,+F.height,P,L,M,C),O!==1&&I.restore()}return this.postRender(this.context,e),b&&I.restore(),I.imageSmoothingEnabled=!0,this.container}}class dW extends qp{constructor(e){e=e||{},super(e)}}class fW extends dW{constructor(e){super(e)}createRenderer(){return new hW(this)}getData(e){return super.getData(e)}}function U2(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function gW(n,e,t){const r=n[t];return r?r.delete(e):!1}function Nk(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Rl(e,ko(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Rl(e,i))}return e}class mW extends gA{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Qs(),this.tempTileRange_=new SA(0,0,0,0),this.tempTileCoord_=fx(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Mk(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new Mk(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),l=T_(o,o.getKey(),e,t,r);let u;if(s.containsKey(l))u=s.get(l);else{const h=i.viewState.projection,f=o.getProjection();if(u=o.getTile(e,t,r,i.pixelRatio,h,!f||Ah(f,h)?void 0:this.getSourceTileCache()),!u)return null;s.set(l,u)}return u}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Qr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Lh(s,i))return null;const a=t.viewState,o=r.getRenderSource(),l=o.getTileGridForProjection(a.projection),u=o.getTilePixelRatio(t.pixelRatio);for(let h=l.getZForResolution(a.resolution);h>=l.getMinZoom();--h){const f=l.getTileCoordForCoordAndZ(i,h),g=this.getTile(h,f[1],f[2],t);if(!g||g.getState()!==Mt.LOADED)continue;const y=l.getOrigin(h),v=Is(l.getTileSize(h)),x=l.getResolution(h);let w;if(g instanceof nD||g instanceof aD)w=g.getImage();else if(g instanceof Ck){if(w=hT(g.getData()),!w)continue}else continue;const T=Math.floor(u*((i[0]-y[0])/x-f[1]*v[0])),I=Math.floor(u*((y[1]-i[1])/x-f[2]*v[1])),b=Math.round(u*o.getGutterForProjection(a.projection));return this.getImageData(w,T+b,I+b)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),l=o.getRenderSource(),u=l.getTileGridForProjection(a.projection),h=En(l);h in e.wantedTiles||(e.wantedTiles[h]={});const f=e.wantedTiles[h],g=o.getMapInternal(),y=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(o.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):u.getResolution(0)),l.zDirection)),v=a.rotation,x=v?YO(a.center,a.resolution,v,e.size):void 0;for(let w=r;w>=y;--w){const T=u.getTileRangeForExtentAndZ(t,w,this.tempTileRange_),I=u.getResolution(w);for(let b=T.minX;b<=T.maxX;++b)for(let N=T.minY;N<=T.maxY;++N){if(v&&!u.tileCoordIntersectsViewport([w,b,N],x))continue;const F=this.getTile(w,b,N,e);if(!F||!U2(i,F,w))continue;const M=F.getKey();if(f[M]=!0,F.getState()===Mt.IDLE&&!e.tileQueue.isKeyQueued(M)){const C=fx(w,b,N,this.tempTileCoord_);e.tileQueue.enqueue([F,h,u.getTileCoordCenter(C),I])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const u=T_(this.getLayer().getSource(),o[l],i,s,a);if(r.containsKey(u)){const h=r.peek(u);if(h.getState()===Mt.LOADED)return h.endTransition(En(this)),U2(t,h,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,l=this.getLayer().getRenderSource(),u=l.getKey();for(let h=s.minX;h<=s.maxX;++h)for(let f=s.minY;f<=s.maxY;++f){const g=T_(l,u,r,h,f);let y=!1;if(o.containsKey(g)){const v=o.peek(g);v.getState()===Mt.LOADED&&(U2(i,v,r),y=!0)}y||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,a=i.resolution,o=i.center,l=e.pixelRatio,u=this.getLayer(),h=u.getSource(),f=h.getTileGridForProjection(s),g=f.getZForResolution(a,h.zDirection),y=f.getResolution(g),v=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==v&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=v):this.renderedSourceKey_=v;let x=e.extent;const w=h.getTilePixelRatio(l);this.prepareContainer(e,t);const T=this.context.canvas.width,I=this.context.canvas.height,b=r.extent&&ko(r.extent);b&&(x=Rl(x,ko(r.extent)));const N=y*T/2/w,F=y*I/2/w,W=[o[0]-N,o[1]-F,o[0]+N,o[1]+F],M={};this.renderedTiles.length=0;const C=u.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const ce=f.getZForResolution(i.nextResolution,h.zDirection),Ie=Nk(e,e.nextExtent);this.enqueueTiles(e,Ie,ce,M,C)}const P=Nk(e,x);if(this.enqueueTiles(e,P,g,M,0),C>0&&setTimeout(()=>{this.enqueueTiles(e,P,g-1,M,C-1)},0),!(g in M))return this.container;const L=En(this),O=e.time;for(const ce of M[g]){const Ie=ce.getState();if(Ie===Mt.EMPTY)continue;const Te=ce.tileCoord;if(Ie===Mt.LOADED&&ce.getAlpha(L,O)===1){ce.endTransition(L);continue}if(Ie!==Mt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Te,M)){gW(M,ce,g),e.animate=!0;continue}if(this.findAltTiles_(f,Te,g+1,M))continue;const J=f.getMinZoom();for(let te=g-1;te>=J&&!this.findAltTiles_(f,Te,te,M);--te);}const U=y/a*l/w,j=this.getRenderContext(e);$o(this.tempTransform,T/2,I/2,U,U,0,-T/2,-I/2),r.extent&&this.clipUnrotated(j,e,b),h.getInterpolate()||(j.imageSmoothingEnabled=!1),this.preRender(j,e);const xe=Object.keys(M).map(Number);xe.sort(bl);let Ce;const Ge=[],ke=[];for(let ce=xe.length-1;ce>=0;--ce){const Ie=xe[ce],Te=h.getTilePixelSize(Ie,l,s),V=f.getResolution(Ie)/y,J=Te[0]*V*U,te=Te[1]*V*U,X=f.getTileCoordForCoordAndZ(id(W),Ie),ue=f.getTileCoordExtent(X),Me=Qr(this.tempTransform,[w*(ue[0]-W[0])/y,w*(W[3]-ue[3])/y]),Fe=w*h.getGutterForProjection(s);for(const Le of M[Ie]){if(Le.getState()!==Mt.LOADED)continue;const je=Le.tileCoord,qt=X[1]-je[1],Ye=Math.round(Me[0]-(qt-1)*J),Zt=X[2]-je[2],Nt=Math.round(Me[1]-(Zt-1)*te),at=Math.round(Me[0]-qt*J),yt=Math.round(Me[1]-Zt*te),Oe=Ye-at,bn=Nt-yt,$t=xe.length===1;let Xt=!1;Ce=[at,yt,at+Oe,yt,at+Oe,yt+bn,at,yt+bn];for(let It=0,Rn=Ge.length;It<Rn;++It)if(!$t&&Ie<ke[It]){const Ae=Ge[It];ns([at,yt,at+Oe,yt+bn],[Ae[0],Ae[3],Ae[4],Ae[7]])&&(Xt||(j.save(),Xt=!0),j.beginPath(),j.moveTo(Ce[0],Ce[1]),j.lineTo(Ce[2],Ce[3]),j.lineTo(Ce[4],Ce[5]),j.lineTo(Ce[6],Ce[7]),j.moveTo(Ae[6],Ae[7]),j.lineTo(Ae[4],Ae[5]),j.lineTo(Ae[2],Ae[3]),j.lineTo(Ae[0],Ae[1]),j.clip())}Ge.push(Ce),ke.push(Ie),this.drawTile(Le,e,at,yt,Oe,bn,Fe,$t),Xt&&j.restore(),this.renderedTiles.unshift(Le),this.updateUsedTiles(e.usedTiles,h,Le)}}if(this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!s0(this.renderedExtent_,W),this.renderedExtent_=W,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&j.restore(),j.imageSmoothingEnabled=!0,this.renderComplete){const ce=(Ie,Te)=>{const ie=En(h),V=Te.wantedTiles[ie],J=V?Object.keys(V).length:0;this.updateCacheSize(J),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(ce)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,l){let u;if(e instanceof Ck){if(u=hT(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const h=this.getRenderContext(t),f=En(this),g=t.layerStatesArray[t.layerIndex],y=g.opacity*(l?e.getAlpha(f,t.time):1),v=y!==h.globalAlpha;v&&(h.save(),h.globalAlpha=y),h.drawImage(u,o,o,u.width-2*o,u.height-2*o,r,i,s,a),v&&h.restore(),y!==g.opacity?t.animate=!0:l&&e.endTransition(f)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=En(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const Hy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class pW extends qp{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Hy.PRELOAD)}setPreload(e){this.set(Hy.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Hy.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Hy.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class nh extends pW{constructor(e){super(e)}createRenderer(){return new mW(this,{cacheSize:this.getCacheSize()})}}function dT(n){return Array.isArray(n)?Math.min(...n):n}const rf=[0,0,0],Tc=5;class lD{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Nn(OB(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Nn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=id(r)),Nn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Nn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:vA,Nn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new SA(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,l=i.maxY;o<=l;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=nf(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return nf(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return nf(s,a,s,a,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(s*l),h=Math.floor(a*l);if(t<i)return nf(u,u,h,h,r);const f=Math.floor(l*(s+1))-1,g=Math.floor(l*(a+1))-1;return nf(u,f,h,g,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,rf);const i=rf[1],s=rf[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,rf);const a=rf[1],o=rf[2];return nf(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=Is(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Is(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,l=a+s[0]*i,u=o+s[1]*i;return su(a,o,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),l=this.getOrigin(a),u=Is(this.getTileSize(a),this.tmpSize_);let h=o*(e-l[0])/r/u[0],f=o*(l[1]-t)/r/u[1];return i?(h=Gc(h,Tc)-1,f=Gc(f,Tc)-1):(h=Fy(h,Tc),f=Fy(f,Tc)),fx(a,h,f,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),l=Is(this.getTileSize(r),this.tmpSize_);let u=(e-a[0])/o/l[0],h=(a[1]-t)/o/l[1];return i?(u=Gc(u,Tc)-1,h=Gc(h,Tc)-1):(u=Fy(u,Tc),h=Fy(h,Tc)),fx(r,u,h,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=bv(this.resolutions_,e,t||0);return Qn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return f5(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function cD(n){let e=n.getDefaultTileGrid();return e||(e=vW(n),n.setDefaultTileGrid(e)),e}function yW(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=TA(t);if(!Lh(s,i)){const a=sn(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function _W(n,e,t,r){r=r!==void 0?r:"top-left";const i=uD(n,e,t);return new lD({extent:n,origin:GB(n,r),resolutions:i,tileSize:t})}function xW(n){const e=n||{},t=e.extent||Wn("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:uD(t,e.maxZoom,e.tileSize,e.maxResolution)};return new lD(r)}function uD(n,e,t,r){e=e!==void 0?e:q$,t=Is(t!==void 0?t:vA);const i=Vr(n),s=sn(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=r/Math.pow(2,l);return o}function vW(n,e,t,r){const i=TA(n);return _W(i,e,t,r)}function TA(n){n=Wn(n);let e=n.getExtent();if(!e){const t=180*a0.degrees/n.getMetersPerUnit();e=su(-t,-t,t,t)}return e}function IA(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const EW=/\{z\}/g,wW=/\{x\}/g,SW=/\{y\}/g,TW=/\{-y\}/g;function IW(n,e,t,r,i){return n.replace(EW,e.toString()).replace(wW,t.toString()).replace(SW,r.toString()).replace(TW,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function AW(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function bW(n,e){return(function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return IW(n,a,t[1],t[2],s)})}function RW(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=bW(n[i],e);return CW(r)}function CW(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;const i=oD(e),s=qc(i,n.length);return n[s](e,t,r)})}class PW extends fA{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Is(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||En(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s,a){return Vt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:cD(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=Is(i.getTileSize(e),this.tmpSize);return s==1?a:Dz(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=yW(i,e,r)),uW(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class kW extends Qo{constructor(e,t){super(e),this.tile=t}}const z2={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class AA extends PW{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===AA.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=En(t),i=t.getState();let s;i==Mt.LOADING?(this.tileLoadingKeys_[r]=!0,s=z2.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Mt.ERROR?z2.TILELOADERROR:i==Mt.LOADED?z2.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new kW(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=AW(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(RW(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class hD extends AA{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dD,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:nD,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Ah(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Ah(t,e)))return this.tileGrid;const r=En(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=cD(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,i,s):void 0,h=new this.tileClass(o,u!==void 0?Mt.IDLE:Mt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener(Wt.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,r,i,s,a){const o=this.getProjection();if(!o||!s||Ah(o,s))return this.getTileInternal(e,t,r,i,o||s);const l=[e,t,r],u=this.getKey(),h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),y=new aD(o,h,s,f,l,g,this.getTilePixelRatio(i),this.getGutter(),(v,x,w,T)=>this.getTileInternal(v,x,w,T,o,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=u,y}getTileInternal(e,t,r,i,s,a){const o=this.getKey(),l=T_(this,o,e,t,r);if(a&&a.containsKey(l))return a.get(l);const u=this.createTile_(e,t,r,i,s,o);return a?.set(l,u),u}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Wn(e);if(r){const i=En(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function dD(n,e){if(Xs){const t=n.getCrossOrigin();let r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const a=n.getImage();a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),s.close?.(),a.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class xf extends hD{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:xW({extent:TA(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const MW="modulepreload",NW=function(n){return"/detectorapp-nl/"+n},Lk={},ft=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(t.map(u=>{if(u=NW(u),u in Lk)return;Lk[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":MW,h||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),h)return new Promise((y,v)=>{g.addEventListener("load",y),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};class LW extends w5{constructor(e,t,r,i,s,a,o){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const h=u?Rl(r,u):r,f=zo(h),g=dx(e,t,f,i),y=sD,v=new iD(e,t,h,l,g*y,i),x=v.calculateSourceExtent(),w=M0(x)?null:a(x,g,s),T=w?xt.IDLE:xt.EMPTY,I=w?w.getPixelRatio():1;super(r,i,I,T),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=v,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=w,this.sourcePixelRatio_=I,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==xt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==xt.LOADED){const t=sn(this.targetExtent_)/this.targetResolution_,r=Vr(this.targetExtent_)/this.targetResolution_;this.canvas_=rD(t,r,this.sourcePixelRatio_,dT(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==xt.IDLE){this.state=xt.LOADING,this.changed();const e=this.sourceImage_.getState();e==xt.LOADED||e==xt.ERROR?this.reproject_():(this.sourceListenerKey_=fn(this.sourceImage_,Wt.CHANGE,t=>{const r=this.sourceImage_.getState();(r==xt.LOADED||r==xt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Xn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const $c=4,$2={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class OW extends Qo{constructor(e,t){super(e),this.image=t}}class DW extends fA{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=bv(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Ah(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Ah(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&s0(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new LW(s,i,e,t,r,(a,o,l)=>this.getImageInternal(a,o,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=fD(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Vc(this.wantedExtent_,s)||Vc(this.image.getExtent(),s))&&(this.wantedResolution_&&dT(this.wantedResolution_)===a||dT(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new w5(s,a,r,this.loader),this.image.addEventListener(Wt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case xt.LOADING:this.loading=!0,r=$2.IMAGELOADSTART;break;case xt.LOADED:this.loading=!1,r=$2.IMAGELOADEND;break;case xt.ERROR:this.loading=!1,r=$2.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new OW(r,t))}}function FW(n,e){n.getImage().src=e}function fD(n,e,t,r){const i=e/t,s=zo(n),a=Gc(sn(n)/i,$c),o=Gc(Vr(n)/i,$c),l=Gc((r-1)*a/2,$c),u=a+2*l,h=Gc((r-1)*o/2,$c),f=o+2*h;return Z_(s,i,0,[u,f])}function jW(n,e,t,r,i,s){const a=i.getCode().split(/:(?=\d+$)/).pop(),o=t/r,l=[Q_(sn(e)/o,$c),Q_(Vr(e)/o,$c)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return IA(u,s)}function VW(n){const e=n.load?n.load:T5,t=Wn(n.projection||"EPSG:3857"),r=n.ratio??1.5,i=n.crossOrigin??null;return function(s,a,o){o=n.hidpi?o:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,n.params),s=fD(s,a,o,r);const u=jW(n.url,s,a,o,t,l),h=new Image;return h.crossOrigin=i,e(h,u).then(f=>{const g=sn(s)/f.width*o;return{image:f,extent:s,resolution:g,pixelRatio:o}})}}class GW extends DW{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:FW,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=VW({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),T5(s))})),super.getImageInternal(e,t,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const fT="1.3.0";function BW(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const s=r.getAxisOrientation(),a=ZO(i.VERSION,"1.3")>=0;i[a?"CRS":"SRS"]=r.getCode();const o=a&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=o.join(","),IA(n,i)}function UW(n,e,t,r,i,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=e/t,l=[Q_(sn(n)/o,$c),Q_(Vr(n)/o,$c)];if(t!=1)switch(a){case"geoserver":const h=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return BW(i,n,l,r,s)}function Ok(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:fT,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}const zW='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class $W extends xf{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[zW];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,a)=>{const o=s.getImage();!Xs&&o instanceof HTMLImageElement&&(o.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||dD)(s,a)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const gx=1/0;class WW{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Fp(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){Nn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=gx?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),h=u<i&&r[u]<r[l]?u:l;t[e]=t[h],r[e]=r[h],e=h}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==gx?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=l,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class HW extends WW{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Wt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Mt.LOADED||r===Mt.ERROR||r===Mt.EMPTY){r!==Mt.ERROR&&t.removeEventListener(Wt.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Mt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function KW(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return gx;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class YW extends hD{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Qs(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const s=Wn(r),a=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(a));const l=zp(e,s,a),u=dx(a,s,e,t),h=o.getZForResolution(u,this.zDirection),f=o.getResolution(h),g=o.getTileCoordForCoordAndZ(l,h);if(o.getResolutions().length<=g[0])return;let y=o.getTileCoordExtent(g,this.tmpExtent_);const v=this.gutter_;v!==0&&(y=Wm(y,f*v,y));const x={QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,Ok(this.params_,"GetFeatureInfo"),i);const w=Math.floor((l[0]-y[0])/f),T=Math.floor((y[3]-l[1])/f);return x[this.v13_?"I":"X"]=w,x[this.v13_?"J":"Y"]=T,this.getRequestUrl_(g,y,1,a||s,x)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:fT,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,t),IA(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,s){const a=this.urls;if(!a)return;let o;if(a.length==1)o=a[0];else{const l=qc(oD(e),a.length);o=a[l]}return UW(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,o,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||fT;this.v13_=ZO(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=i.getResolution(e[0]);let a=i.getTileCoordExtent(e,this.tmpExtent_);const o=this.gutter_;o!==0&&(a=Wm(a,s*o,a));const l=Object.assign({},Ok(this.params_,"GetMap"));return this.getRequestUrl_(e,a,t,r,l)}}class vf extends Qo{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class Pc extends vf{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const yr={SINGLECLICK:"singleclick",CLICK:Wt.CLICK,DBLCLICK:Wt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},gT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class XW extends jp{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=fn(r,gT.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=fn(r,gT.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Wt.TOUCHMOVE,this.boundHandleTouchMove_,x5?{passive:!1}:!1)}emulateClick_(e){let t=new Pc(yr.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Pc(yr.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Pc(yr.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==yr.POINTERUP||t.type==yr.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==yr.POINTERDOWN||t.type==yr.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Pc(yr.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Xn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Pc(yr.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(fn(r,yr.POINTERMOVE,this.handlePointerMove_,this),fn(r,yr.POINTERUP,this.handlePointerUp_,this),fn(this.element_,yr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(fn(this.element_.getRootNode(),yr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Pc(yr.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Pc(yr.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Xn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Wt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Xn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Xn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const kc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Di={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class $v extends Jo{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)Xn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==$m&&this.listenerKeys.push(fn(e,kc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class qW extends $v{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Wt.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Wp+" "+cA+(this.collapsed_&&this.collapsible_?" "+Q4:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>BO(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Su(t,this.renderedAttributions_)){zU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Q4),this.collapsed_?q4(this.collapseLabel_,this.label_):q4(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class ZW extends $v{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(Wt.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Wp+" "+cA,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Gy)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:L0}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Gy);!s&&r===0?this.element.classList.add(Gy):s&&r!==0&&this.element.classList.remove(Gy)}this.label_.style.transform=i}this.rotation_=r}}class QW extends $v{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=i,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(Wt.CLICK,this.handleClick_.bind(this,r),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=u,f.appendChild(typeof o=="string"?document.createTextNode(o):o),f.addEventListener(Wt.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+Wp+" "+cA,y=this.element;y.className=g,y.appendChild(h),y.appendChild(f),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:L0})):r.setZoom(s)}}}function JW(n){n=n||{};const e=new _a;return(n.zoom===void 0||n.zoom)&&e.push(new QW(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new ZW(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new qW(n.attributionOptions)),e}class eH{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Dk={ACTIVE:"active"};class Qp extends Jo{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Dk.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Dk.ACTIVE,e)}setMap(e){this.map_=e}}function tH(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:W$,center:n.getConstrainedCenter(i)})}}function bA(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:L0})}class nH extends Qp{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==yr.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();bA(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function mT(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const rH=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},iH=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},gD=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?iH(n):!0},sH=zm,mD=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(BU&&y5&&e.ctrlKey)},pD=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},aH=function(n){const e=n.originalEvent;return y5?e.metaKey:e.ctrlKey},oH=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},yD=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},W2=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},lH=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Jp extends Qp{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==yr.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==yr.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==yr.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==yr.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function RA(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class cH extends Jp{constructor(e){super({stopDown:Rv}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:mT(pD,lH);this.condition_=e.onFocusOnly?mT(gD,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(RA(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();HB(s,o.getResolution()),HI(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:L0})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class uH extends Jp{constructor(e){e=e||{},super({stopDown:Rv}),this.condition_=e.condition?e.condition:rH,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!W2(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===xA)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return W2(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return W2(e)&&mD(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class hH extends Av{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new ro([i])}getGeometry(){return this.geometry_}}const sf={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class jg extends Qo{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class dH extends Jp{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new hH(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??mD,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new jg(sf.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new jg(t?sf.BOXEND:sf.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new jg(sf.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new jg(sf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new jg(sf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class fH extends dH{constructor(e){e=e||{};const t=e.condition?e.condition:oH;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:L0})}}const Qu={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class gH extends Qp{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return pD(t)&&yD(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Wt.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Qu.DOWN||i==Qu.LEFT||i==Qu.RIGHT||i==Qu.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;i==Qu.DOWN?u=-o:i==Qu.LEFT?l=-o:i==Qu.RIGHT?l=o:u=o;const h=[l,u];HI(h,a.getRotation()),tH(a,h,this.duration_),r.preventDefault(),t=!0}}return!t}}class mH extends Qp{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!aH(t)&&yD(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Wt.KEYDOWN||e.type==Wt.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();bA(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const pH=40,yH=300;class _H extends Qp{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:sH;this.condition_=e.onFocusOnly?mT(gD,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Wt.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=pH;break;case WheelEvent.DOM_DELTA_PAGE:s*=yH;break}if(s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Qn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),bA(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class xH extends Jp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Rv),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==xA&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(RA(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class vH extends Jp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Rv),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(RA(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function EH(n){n=n||{};const e=new _a,t=new eH(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new uH),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new nH({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new cH({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new xH),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new vH({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new gH),e.push(new mH({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new _H({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new fH({duration:n.zoomDuration})),e}class wH extends Av{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Vt()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;$o(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),l5(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,l){let u;const h=t.viewState;function f(N,F,W,M){return s.call(a,F,N?W:null,M)}const g=h.projection,y=QO(e.slice(),g),v=[[0,0]];if(g.canWrapX()&&i){const N=g.getExtent(),F=sn(N);v.push([-F,0],[F,0])}const x=t.layerStatesArray,w=x.length,T=[],I=[];for(let N=0;N<v.length;N++)for(let F=w-1;F>=0;--F){const W=x[F],M=W.layer;if(M.hasRenderer()&&EA(W,h)&&o.call(l,M)){const C=M.getRenderer(),P=M.getSource();if(C&&P){const L=P.getWrapX()?y:e,O=f.bind(null,W.managed);I[0]=L[0]+v[N][0],I[1]=L[1]+v[N][1],u=C.forEachFeatureAtCoordinate(I,t,r,O,T)}if(u)return u}}if(T.length===0)return;const b=1/T.length;return T.forEach((N,F)=>N.distanceSq+=F*b),T.sort((N,F)=>N.distanceSq-F.distanceSq),T.some(N=>u=N.callback(N.feature,N.layer,N.geometry)),u}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,zm,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){Vt()}scheduleExpireIconCache(e){va.canExpireCache()&&e.postRenderFunctions.push(SH)}}function SH(n,e){va.expire()}class TH extends wH{constructor(e){super(e),this.fontChangeListenerKey_=fn(pf,i0.PROPERTYCHANGE,e.redrawText,e),this.element_=Xs?v5():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Wp+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new $5(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Xn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(xa.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,h)=>u.zIndex-h.zIndex);t.some(u=>u.layer instanceof eD&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let u=0,h=t.length;u<h;++u){const f=t[u];e.layerIndex=u;const g=f.layer,y=g.getSourceState();if(!EA(f,i)||y!="ready"&&y!="undefined"){g.unrender();continue}const v=g.render(e,a);v&&(v!==a&&(this.children_.push(v),a=v),s.push(f))}this.declutter(e,s),$U(this.element_,this.children_);const l=this.getMap().getTargetElement();if(Uc(l)){const u=l.getContext("2d");for(const h of this.children_){const f=h.firstElementChild||h,g=h.style.backgroundColor;if(g&&(!Uc(f)||f.width>0)&&(u.fillStyle=g,u.fillRect(0,0,l.width,l.height)),Uc(f)&&f.width>0){const y=h.style.opacity||f.style.opacity;u.globalAlpha=y===""?1:Number(y);const v=f.style.transform;if(v)u.setTransform(...nT(v));else{const x=parseFloat(f.style.width)/f.width,w=parseFloat(f.style.height)/f.height;u.setTransform(x,0,0,w,0,0)}u.drawImage(f,0,0)}}u.globalAlpha=1,u.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(xa.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function _D(n){if(n instanceof qp){n.setMapInternal(null);return}n instanceof zv&&n.getLayers().forEach(_D)}function xD(n,e){if(n instanceof qp){n.setMapInternal(e);return}if(n instanceof zv){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)xD(t[r],e)}}let IH=class extends Jo{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=AH(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:UU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Xa(),this.pixelToCoordinateTransform_=Xa(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Xs||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Xs||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Xs?new _a:JW()),this.interactions=t.interactions||(Xs?new _a:EH({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new HW(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Di.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Di.VIEW,this.handleViewChanged_),this.addChangeListener(Di.SIZE,this.handleSizeChanged_),this.addChangeListener(Di.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof Po)&&e.view.then(function(i){r.setView(new Po(i))}),this.controls.addEventListener(xs.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(xs.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(xs.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(xs.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(xs.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(xs.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){xD(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:zm,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof zv?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:zm,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(Di.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return tT(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Qr(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Di.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof _a){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=xl(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Qr(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Di.SIZE)}getView(){return this.get(Di.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return KW(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new Pc(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===gT.POINTERDOWN||r===Wt.WHEEL||r===Wt.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[oi.ANIMATING]||a[oi.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(xa.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xa.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new vf(kc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new vf(kc.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Xn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Wt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Wt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Uc(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Uc(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new TH(this)),!Uc(t)){this.mapBrowserEventHandler_=new XW(this,this.moveTolerance_);for(const i in yr)this.mapBrowserEventHandler_.addEventListener(yr[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Wt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Wt.WHEEL,this.boundHandleBrowserEvent_,x5?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[fn(r,Wt.KEYDOWN,this.handleBrowserEvent,this),fn(r,Wt.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Xn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Xn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=fn(e,i0.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=fn(e,Wt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Xn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Nc("addlayer",e)),this.layerGroupPropertyListenerKeys_=[fn(e,i0.PROPERTYCHANGE,this.render,this),fn(e,Wt.CHANGE,this.render,this),fn(e,"addlayer",this.handleLayerAdd_,this),fn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){_D(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&uk(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Z_(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:En(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=Z_(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!M0(this.previousExtent_)&&!s0(s.extent,this.previousExtent_))&&(this.dispatchEvent(new vf(kc.MOVESTART,this,i)),this.previousExtent_=Gp(this.previousExtent_)),this.previousExtent_&&!s.viewHints[oi.ANIMATING]&&!s.viewHints[oi.INTERACTING]&&!s0(s.extent,this.previousExtent_)&&(this.dispatchEvent(new vf(kc.MOVEEND,this,s)),zO(s.extent,this.previousExtent_))),this.dispatchEvent(new vf(kc.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(kc.LOADSTART)||this.hasListener(kc.LOADEND)||this.hasListener(xa.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Nc("removelayer",t)),this.set(Di.LAYERGROUP,e)}setSize(e){this.set(Di.SIZE,e)}setTarget(e){this.set(Di.TARGET,e)}setView(e){if(!e||e instanceof Po){this.set(Di.VIEW,e);return}this.set(Di.VIEW,new Po);const t=this;e.then(function(r){t.setView(new Po(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){let i,s;if(Uc(e))i=e.width,s=e.height;else{const a=getComputedStyle(e);i=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),s=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(t=[Math.max(0,i),Math.max(0,s)],!uk(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&e5("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!Su(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function AH(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new zv({layers:n.layers});t[Di.LAYERGROUP]=r,t[Di.TARGET]=n.target,t[Di.VIEW]=n.view instanceof Po?n.view:new Po;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new _a(n.controls.slice()):(Nn(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new _a(n.interactions.slice()):(Nn(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new _a(n.overlays.slice()):(Nn(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new _a,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const H2="units",bH=[1,2,5],Vg=25.4/.28;class RH extends $v{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Wp,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(H2,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(H2)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(H2,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let a=rx(r,e.resolution,t,s);const o=this.minWidth_*(this.dpi_||Vg)/Vg,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Vg)/Vg:void 0;let u=o*a,h="";if(i=="degrees"){const b=a0.degrees;u*=b,u<b/60?(h="",a*=3600):u<b?(h="",a*=60):h=""}else if(i=="imperial")u<.9144?(h="in",a/=.0254):u<1609.344?(h="ft",a/=.3048):(h="mi",a/=1609.344);else if(i=="nautical")a/=1852,h="NM";else if(i=="metric")u<1e-6?(h="nm",a*=1e9):u<.001?(h="m",a*=1e6):u<1?(h="mm",a*=1e3):u<1e3?h="m":(h="km",a/=1e3);else if(i=="us")u<.9144?(h="in",a*=39.37):u<1609.344?(h="ft",a/=.30480061):(h="mi",a/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(o*a)/Math.log(10)),g,y,v,x=0,w,T;for(;;){v=Math.floor(f/3);const b=Math.pow(10,v);if(g=bH[(f%3+3)%3]*b,y=Math.round(g/a),isNaN(y)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&y>=l){g=x,y=w,v=T;break}else if(y>=o)break;x=g,w=y,T=v,++f}const I=this.scaleBar_?this.createScaleBar(y,g,h):g.toFixed(v<0?-v:0)+" "+h;this.renderedHTML_!=I&&(this.innerElement_.innerHTML=I,this.renderedHTML_=I),this.renderedWidth_!=y&&(this.innerElement_.style.width=y+"px",this.renderedWidth_=y),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),a=this.scaleBarSteps_,o=e/a,l=[this.createMarker("absolute")];for(let h=0;h<a;++h){const f=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(h%2===0||a===2?this.createStepText(h,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(a,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,s){const o=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=rx(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Vg,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const CH={},Fk=n=>{let e;const t=new Set,r=(h,f)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const y=e;e=f??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,y))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(CH?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(r,i,l);return l},PH=n=>n?Fk(n):Fk;var K2={exports:{}},Y2={},X2={exports:{}},q2={};var jk;function kH(){if(jk)return q2;jk=1;var n=Dp();function e(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(f,g){var y=g(),v=r({inst:{value:y,getSnapshot:g}}),x=v[0].inst,w=v[1];return s(function(){x.value=y,x.getSnapshot=g,l(x)&&w({inst:x})},[f,y,g]),i(function(){return l(x)&&w({inst:x}),f(function(){l(x)&&w({inst:x})})},[f]),a(y),y}function l(f){var g=f.getSnapshot;f=f.value;try{var y=g();return!t(f,y)}catch{return!0}}function u(f,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return q2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,q2}var Vk;function MH(){return Vk||(Vk=1,X2.exports=kH()),X2.exports}var Gk;function NH(){if(Gk)return Y2;Gk=1;var n=Dp(),e=MH();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,l=n.useDebugValue;return Y2.useSyncExternalStoreWithSelector=function(u,h,f,g,y){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=o(function(){function T(W){if(!I){if(I=!0,b=W,W=g(W),y!==void 0&&x.hasValue){var M=x.value;if(y(M,W))return N=M}return N=W}if(M=N,r(b,W))return M;var C=g(W);return y!==void 0&&y(M,C)?(b=W,M):(b=W,N=C)}var I=!1,b,N,F=f===void 0?null:f;return[function(){return T(h())},F===null?void 0:function(){return T(F())}]},[h,f,g,y]);var w=i(u,v[0],v[1]);return a(function(){x.hasValue=!0,x.value=w},[w]),l(w),w},Y2}var Bk;function LH(){return Bk||(Bk=1,K2.exports=NH()),K2.exports}var OH=LH();const DH=zI(OH),vD={},{useDebugValue:FH}=kB,{useSyncExternalStoreWithSelector:jH}=DH;let Uk=!1;const VH=n=>n;function GH(n,e=VH,t){(vD?"production":void 0)!=="production"&&t&&!Uk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Uk=!0);const r=jH(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return FH(r),r}const BH=n=>{(vD?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?PH(n):n,t=(r,i)=>GH(e,r,i);return Object.assign(t,e),t},Aa=n=>BH;var ED=Symbol.for("immer-nothing"),zk=Symbol.for("immer-draftable"),Js=Symbol.for("immer-state");function za(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var tp=Object.getPrototypeOf;function h0(n){return!!n&&!!n[Js]}function Vh(n){return n?wD(n)||Array.isArray(n)||!!n[zk]||!!n.constructor?.[zk]||e1(n)||Hv(n):!1}var UH=Object.prototype.constructor.toString(),$k=new WeakMap;function wD(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=$k.get(t);return r===void 0&&(r=Function.toString.call(t),$k.set(t,r)),r===UH}function mx(n,e,t=!0){Wv(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function Wv(n){const e=n[Js];return e?e.type_:Array.isArray(n)?1:e1(n)?2:Hv(n)?3:0}function pT(n,e){return Wv(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function SD(n,e,t){const r=Wv(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function zH(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function e1(n){return n instanceof Map}function Hv(n){return n instanceof Set}function rh(n){return n.copy_||n.base_}function yT(n,e){if(e1(n))return new Map(n);if(Hv(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=wD(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Js];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create(tp(n),r)}else{const r=tp(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function CA(n,e=!1){return Kv(n)||h0(n)||!Vh(n)||(Wv(n)>1&&Object.defineProperties(n,{set:Ky,add:Ky,clear:Ky,delete:Ky}),Object.freeze(n),e&&Object.values(n).forEach(t=>CA(t,!0))),n}function $H(){za(2)}var Ky={value:$H};function Kv(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var WH={};function Gh(n){const e=WH[n];return e||za(0,n),e}var np;function TD(){return np}function HH(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Wk(n,e){e&&(Gh("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function _T(n){xT(n),n.drafts_.forEach(KH),n.drafts_=null}function xT(n){n===np&&(np=n.parent_)}function Hk(n){return np=HH(np,n)}function KH(n){const e=n[Js];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Kk(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Js].modified_&&(_T(e),za(4)),Vh(n)&&(n=px(e,n),e.parent_||yx(e,n)),e.patches_&&Gh("Patches").generateReplacementPatches_(t[Js].base_,n,e.patches_,e.inversePatches_)):n=px(e,t,[]),_T(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==ED?n:void 0}function px(n,e,t){if(Kv(e))return e;const r=n.immer_.shouldUseStrictIteration(),i=e[Js];if(!i)return mx(e,(s,a)=>Yk(n,i,e,s,a,t),r),e;if(i.scope_!==n)return e;if(!i.modified_)return yx(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),mx(a,(l,u)=>Yk(n,i,s,l,u,t,o),r),yx(n,s,!1),t&&n.patches_&&Gh("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function Yk(n,e,t,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=Kv(i);if(!(o&&!a)){if(h0(i)){const l=s&&e&&e.type_!==3&&!pT(e.assigned_,r)?s.concat(r):void 0,u=px(n,i,l);if(SD(t,r,u),h0(u))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Vh(i)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;px(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(e1(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&yx(n,i)}}}function yx(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&CA(e,t)}function YH(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:TD(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=PA;t&&(i=[r],s=rp);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var PA={get(n,e){if(e===Js)return n;const t=rh(n);if(!pT(t,e))return XH(n,t,e);const r=t[e];return n.finalized_||!Vh(r)?r:r===Z2(n.base_,e)?(Q2(n),n.copy_[e]=ET(r,n)):r},has(n,e){return e in rh(n)},ownKeys(n){return Reflect.ownKeys(rh(n))},set(n,e,t){const r=ID(rh(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=Z2(rh(n),e),s=i?.[Js];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(zH(t,i)&&(t!==void 0||pT(n.base_,e)))return!0;Q2(n),vT(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Z2(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Q2(n),vT(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=rh(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){za(11)},getPrototypeOf(n){return tp(n.base_)},setPrototypeOf(){za(12)}},rp={};mx(PA,(n,e)=>{rp[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});rp.deleteProperty=function(n,e){return rp.set.call(this,n,e,void 0)};rp.set=function(n,e,t){return PA.set.call(this,n[0],e,t,n[0])};function Z2(n,e){const t=n[Js];return(t?rh(t):n)[e]}function XH(n,e,t){const r=ID(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function ID(n,e){if(!(e in n))return;let t=tp(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=tp(t)}}function vT(n){n.modified_||(n.modified_=!0,n.parent_&&vT(n.parent_))}function Q2(n){n.copy_||(n.copy_=yT(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var qH=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...u){return a.produce(l,h=>t.call(this,h,...u))}}typeof t!="function"&&za(6),r!==void 0&&typeof r!="function"&&za(7);let i;if(Vh(e)){const s=Hk(this),a=ET(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?_T(s):xT(s)}return Wk(s,r),Kk(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===ED&&(i=void 0),this.autoFreeze_&&CA(i,!0),r){const s=[],a=[];Gh("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else za(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,t,(a,o)=>{r=a,i=o}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Vh(n)||za(8),h0(n)&&(n=ZH(n));const e=Hk(this),t=ET(n,void 0);return t[Js].isManual_=!0,xT(e),t}finishDraft(n,e){const t=n&&n[Js];(!t||!t.isManual_)&&za(9);const{scope_:r}=t;return Wk(r,e),Kk(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Gh("Patches").applyPatches_;return h0(n)?r(n,e):this.produce(n,i=>r(i,e))}};function ET(n,e){const t=e1(n)?Gh("MapSet").proxyMap_(n,e):Hv(n)?Gh("MapSet").proxySet_(n,e):YH(n,e);return(e?e.scope_:TD()).drafts_.push(t),t}function ZH(n){return h0(n)||za(10,n),AD(n)}function AD(n){if(!Vh(n)||Kv(n))return n;const e=n[Js];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=yT(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=yT(n,!0);return mx(t,(i,s)=>{SD(t,i,AD(s))},r),e&&(e.finalized_=!1),t}var QH=new qH,JH=QH.produce;const eK=n=>(e,t,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?JH(i):i;return e(o,s,...a)},n(r.setState,t,r)),O0=eK,es=Aa()(O0((n,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,config:{smoothingFactor:.2,minRotationSpeed:8,centerOnUser:!0,animationDuration:100},startTracking:()=>{n(t=>{t.tracking=!0})},stopTracking:()=>{n(t=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),t.tracking=!1,t.speed=null,t.headingSource=null,t.watchId=null})},updatePosition:t=>{n(r=>{r.position={lat:t.coords.latitude,lng:t.coords.longitude},r.accuracy=t.coords.accuracy,r.speed=t.coords.speed;const i=15,s=.5;if(!(t.coords.accuracy!==null&&t.coords.accuracy<i)){r.headingSource=null;return}if(t.coords.heading!==null&&t.coords.speed!==null&&t.coords.speed>s){r.headingSource="gps";const o=t.coords.heading;e().updateHeading(o,"gps")}else r.headingSource="compass"})},updateHeading:(t,r="compass")=>{n(i=>{const{smoothHeading:s,config:a}=e();if(s===null){i.smoothHeading=t,i.heading=t;return}let o=t-s;o>180&&(o-=360),o<-180&&(o+=360);const l=r==="compass"?5:3;if(Math.abs(o)<l)return;const h=s+o*(r==="gps"?.5:.35);i.smoothHeading=(h+360)%360,i.heading=t})},setSmoothedHeading:t=>{n(r=>{r.smoothHeading=t,r.heading=t})},setWatchId:t=>{n(r=>{r.watchId=t})},resetFirstFix:()=>{n(t=>{t.firstFix=!1})}}))),kA={"TMK 1850":{name:"TMK 1850",factory:async()=>null,immediateLoad:!0,tier:"premium"},"Bonnebladen 1900":{name:"Bonnebladen 1900",factory:async()=>null,immediateLoad:!0,tier:"premium"},"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:n}=await ft(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createAHNLayerOL:e}},[]);return n()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:n}=await ft(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createGeomorfologieLayerOL:e}},[]);return n()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:n}=await ft(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createBodemkaartLayerOL:e}},[]);return n()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:n}=await ft(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createIKAWLayerOL:e}},[]);return n()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:n}=await ft(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createFAMKESteentijdLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Landschappen":{name:"Archeo Landschappen",factory:async()=>{const{createArcheoLandschappenLayerOL:n}=await ft(async()=>{const{createArcheoLandschappenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createArcheoLandschappenLayerOL:e}},[]);return n()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:n}=await ft(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createEssenLayerOL:e}},[]);return n()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:n}=await ft(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createRijksmonumentenLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:n}=await ft(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return n()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:n}=await ft(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createWerelderfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:n}=await ft(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-ET_Zr6CL.js");return{createTerpenLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:n}=await ft(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-Dghlew6x.js");return{createLiniesLayerOL:e}},[]);return n()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:n}=await ft(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-Dghlew6x.js");return{createInundatiesLayerOL:e}},[]);return n()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:n}=await ft(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-Dghlew6x.js");return{createMilitaireObjectenLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:n}=await ft(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-DK0QCAxL.js");return{createPaleo800ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:n}=await ft(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-DK0QCAxL.js");return{createPaleo100ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:n}=await ft(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-DK0QCAxL.js");return{createPaleo500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:n}=await ft(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-DK0QCAxL.js");return{createPaleo1500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:n}=await ft(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-DK0QCAxL.js");return{createPaleo2750vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:n}=await ft(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-DK0QCAxL.js");return{createPaleo5500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:n}=await ft(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-DK0QCAxL.js");return{createPaleo9000vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:n}=await ft(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-BCRLTVr7.js");return{createReligieusErfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:n}=await ft(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-BQLnJo1w.js");return{createAHN4ColorElevationLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:n}=await ft(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-BQLnJo1w.js");return{createAHN4HillshadeLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:n}=await ft(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-BQLnJo1w.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:n}=await ft(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createGewaspercelenLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:n}=await ft(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createKadastraleKaartLayerOL:e}},[]);return n()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:n}=await ft(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createScheepswrakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:n}=await ft(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createWoonheuvelsLayerOL:e}},[]);return n()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:n}=await ft(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createRomeinseFortenLayerOL:e}},[]);return n()},immediateLoad:!0},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:n}=await ft(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createWindmolensLayerOL:e}},[]);return n()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:n}=await ft(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createErfgoedlijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:n}=await ft(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createOudeKernenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenkaartPuntenLayerOL:n}=await ft(async()=>{const{createRelictenkaartPuntenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createRelictenkaartPuntenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:n}=await ft(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:n}=await ft(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:n}=await ft(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-BopZxJTn.js");return{createVerdronkenDorpenLayerOL:e}},[]);return n()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:n}=await ft(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-D0oLSJik.js");return{createAMKLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:n}=await ft(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-D0oLSJik.js");return{createAMKRomeinsLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:n}=await ft(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-D0oLSJik.js");return{createAMKSteentijdLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:n}=await ft(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-D0oLSJik.js");return{createAMKVroegeMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:n}=await ft(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-D0oLSJik.js");return{createAMKLateMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:n}=await ft(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-D0oLSJik.js");return{createAMKOverigLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"Romeinse wegen (regio)":{name:"Romeinse wegen (regio)",factory:async()=>{const{createRomeinseWegenLayerOL:n}=await ft(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-0XzU27sm.js");return{createRomeinseWegenLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:n}=await ft(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-0XzU27sm.js");return{createRomeinseWegenWereldLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:n}=await ft(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-DF-eVXAj.js");return{createKastelenLayerOL:e}},__vite__mapDeps([3,4]));return n()},immediateLoad:!1},Runes:{name:"Runes",factory:async()=>{const{createRuinesLayerOL:n}=await ft(async()=>{const{createRuinesLayerOL:e}=await import("./ruinesOL-CuUbr-VD.js");return{createRuinesLayerOL:e}},__vite__mapDeps([5,4]));return n()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:n}=await ft(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-3LZABwLV.js");return{createVeengebiedenLayerOL:e}},[]);return n()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:n}=await ft(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-DGp1AaIg.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([6,4]));return n()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:n}=await ft(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-mdPWlkk3.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([7,1,4]));return n()},immediateLoad:!1,tier:"premium"},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:n}=await ft(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-DR3sXIF1.js");return{createUIKAVVlakkenLayerOL:e}},__vite__mapDeps([8,1]));return n()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:n}=await ft(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL--t4L98ZY.js");return{createUIKAVBufferlaagLayerOL:e}},__vite__mapDeps([9,1]));return n()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:n}=await ft(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-D8qKTbjw.js");return{createUIKAVExpertLayerOL:e}},__vite__mapDeps([10,1]));return n()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:n}=await ft(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-C-nnb2Gr.js");return{createUIKAVUiterwaardenLayerOL:e}},__vite__mapDeps([11,1]));return n()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:n}=await ft(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-DSf8A3J1.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([12,1,4]));return n()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:n}=await ft(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-DhoK7uY1.js");return{createMuseaLayerOL:e}},__vite__mapDeps([13,1,4]));return n()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:n}=await ft(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-CE-VFPzT.js");return{createStrandjesLayerOL:e}},__vite__mapDeps([14,1]));return n()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:n}=await ft(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-DuRPc-iY.js");return{createParkenLayerOL:e}},__vite__mapDeps([15,1]));return n()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:n}=await ft(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-BjFiUq9D.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([16,4]));return n()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:n}=await ft(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-BahoBjjY.js");return{createFossielenLayerOL:e}},__vite__mapDeps([17,18,4]));return n()},immediateLoad:!1,tier:"premium"},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:n}=await ft(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-YLGH2EU6.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([19,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["be"]},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:n}=await ft(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-WS5GNc4I.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([20,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["de"]},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:n}=await ft(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-CM8qtEz9.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([21,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["fr"]},"Fossiel Hotspots":{name:"Fossiel Hotspots",factory:async()=>{const{createFossielHotspotsLayerOL:n}=await ft(async()=>{const{createFossielHotspotsLayerOL:e}=await import("./fossielHotspotsOL-CeDubPpt.js");return{createFossielHotspotsLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"Mineralen Hotspots":{name:"Mineralen Hotspots",factory:async()=>{const{createMineralenHotspotsLayerOL:n}=await ft(async()=>{const{createMineralenHotspotsLayerOL:e}=await import("./mineralenHotspotsOL-CN3BcPr9.js");return{createMineralenHotspotsLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Goudrivieren:{name:"Goudrivieren",factory:async()=>{const{createGoudrivierenLayerOL:n}=await ft(async()=>{const{createGoudrivierenLayerOL:e}=await import("./goudrivierenOL-50lxaSTM.js");return{createGoudrivierenLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Wandelroutes:{name:"Wandelroutes",factory:async()=>{const{createWandelroutesLayer:n}=await ft(async()=>{const{createWandelroutesLayer:e}=await import("./wandelroutesOL-BNJqSCem.js");return{createWandelroutesLayer:e}},[]);return n()},immediateLoad:!1,tier:"free",regions:["nl","be"]},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:n}=await ft(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-_A6QurCs.js");return{createBunkersLayerOL:e}},__vite__mapDeps([22,4]));return n()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:n}=await ft(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-ZsPY_juc.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([23,4]));return n()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:n}=await ft(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-D8zRdlxx.js");return{createSlagveldenLayerOL:e}},__vite__mapDeps([24,4]));return n()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:n}=await ft(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-XlnBNMbJ.js");return{createVliegveldenLayerOL:e}},[]);return n()},immediateLoad:!1}};function tK(){return Object.values(kA).filter(n=>n.immediateLoad)}const os=Aa()(O0((n,e)=>({map:null,rotation:0,rotationEnabled:!0,setMap:t=>{n(r=>{r.map=t})},setRotation:t=>{n(r=>{if(r.rotation=t,r.map&&r.rotationEnabled){const i=t*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{n(t=>{t.rotationEnabled=!0})},disableRotation:()=>{n(t=>{t.rotationEnabled=!1,t.rotation=0,t.map&&t.map.getView().animate({rotation:0,duration:500})})}}))),li=Aa()(O0((n,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Archeo Onderzoeken":!1,"Romeinse wegen (regio)":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,"Archeo Landschappen":!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN 0.5m":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN 0.5m":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"Archeo Landschappen":.5,Essen:.6,Terpen:.7,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},toggleLayer:t=>{const r=e(),i=!r.visible[t];n(s=>{s.visible[t]=i}),i&&!r.layers[t]?e().loadLayer(t):r.layers[t]&&r.layers[t].setVisible(i)},setLayerVisibility:(t,r)=>{const i=e();n(s=>{s.visible[t]=r;const a=s.layers[t];a&&a.setVisible(r)}),r&&!i.layers[t]&&e().loadLayer(t)},setLayerOpacity:(t,r)=>{n(i=>{i.opacity[t]=r;const s=i.layers[t];s&&s.setOpacity(r)})},registerLayer:(t,r)=>{n(i=>{i.layers[t]=r,i.loadingState[t]="loaded",i.visible[t]!==void 0&&r.setVisible(i.visible[t]),i.opacity[t]!==void 0&&r.setOpacity(i.opacity[t])})},unregisterLayer:t=>{n(r=>{delete r.layers[t],delete r.loadingState[t]})},loadLayer:async t=>{const r=e();if(r.loadingState[t]==="loading"||r.layers[t])return;const i=kA[t];if(!i){console.warn(` Layer "${t}" not found in registry`);return}const s=os.getState().map;if(!s){console.warn(` Cannot load layer "${t}": map not initialized`);return}n(a=>{a.loadingState[t]="loading"}),console.log(` Loading layer: ${t}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const o=e();a.setVisible(o.visible[t]??!1),o.opacity[t]!==void 0&&a.setOpacity(o.opacity[t]),s.addLayer(a),n(l=>{l.layers[t]=a,l.loadingState[t]="loaded"}),console.log(` Layer loaded: ${t}`)}catch(a){console.error(` Failed to load layer "${t}":`,a),n(o=>{o.loadingState[t]="error"})}}}))),Cr=Aa()(O0((n,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstFormPhoto:null,vondstDashboardOpen:!1,createLayerModalOpen:!1,addPointModalOpen:!1,addPointModalLayerId:null,addPointModalLocation:null,layerManagerModalOpen:!1,layerDashboardOpen:!1,layerDashboardLayerId:null,collapsedCategories:new Set,closeAllPanels:()=>{n(t=>{t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1})},toggleLayerControl:()=>{n(t=>{t.layerControlOpen=!t.layerControlOpen})},toggleLegend:()=>{n(t=>{t.legendOpen=!t.legendOpen})},toggleBackgroundsPanel:()=>{n(t=>{const r=t.backgroundsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{n(t=>{const r=t.themesPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{n(t=>{const r=t.settingsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{n(t=>{const r=t.infoPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.infoPanelOpen=!0)})},togglePresetsPanel:()=>{n(t=>{const r=t.presetsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.presetsPanelOpen=!0)})},toggleCategory:t=>{n(r=>{r.collapsedCategories.has(t)?r.collapsedCategories.delete(t):r.collapsedCategories.add(t)})},setLayerControlOpen:t=>{n(r=>{r.layerControlOpen=t})},setLegendOpen:t=>{n(r=>{r.legendOpen=t})},openVondstForm:(t,r)=>{n(i=>{i.backgroundsPanelOpen=!1,i.themesPanelOpen=!1,i.settingsPanelOpen=!1,i.infoPanelOpen=!1,i.presetsPanelOpen=!1,i.vondstFormOpen=!0,i.vondstFormLocation=t||null,i.vondstFormPhoto=r||null})},closeVondstForm:()=>{n(t=>{t.vondstFormOpen=!1,t.vondstFormLocation=null,t.vondstFormPhoto=null})},toggleVondstDashboard:()=>{n(t=>{const r=t.vondstDashboardOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,t.vondstDashboardOpen=!r})},openCreateLayerModal:()=>{n(t=>{t.createLayerModalOpen=!0})},closeCreateLayerModal:()=>{n(t=>{t.createLayerModalOpen=!1})},openAddPointModal:(t,r)=>{n(i=>{i.addPointModalOpen=!0,i.addPointModalLayerId=t,i.addPointModalLocation=r})},closeAddPointModal:()=>{n(t=>{t.addPointModalOpen=!1,t.addPointModalLayerId=null,t.addPointModalLocation=null})},openLayerManagerModal:()=>{n(t=>{t.layerManagerModalOpen=!0})},closeLayerManagerModal:()=>{n(t=>{t.layerManagerModalOpen=!1})},openLayerDashboard:t=>{n(r=>{r.layerDashboardOpen=!0,r.layerDashboardLayerId=t,r.layerManagerModalOpen=!1})},closeLayerDashboard:()=>{n(t=>{t.layerDashboardOpen=!1,t.layerDashboardLayerId=null})}}))),nK=()=>{};var Xk={};const bD=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rK=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},RD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=s>>2,f=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,y=u&63;l||(y=64,a||(g=64)),r.push(t[h],t[f],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||f==null)throw new iK;const g=s<<2|o>>4;if(r.push(g),u!==64){const y=o<<4&240|u>>2;if(r.push(y),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sK=function(n){const e=bD(n);return RD.encodeByteArray(e,!0)},_x=function(n){return sK(n).replace(/\./g,"")},CD=function(n){try{return RD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function PD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const aK=()=>PD().__FIREBASE_DEFAULTS__,oK=()=>{if(typeof process>"u"||typeof Xk>"u")return;const n=Xk.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&CD(n[1]);return e&&JSON.parse(e)},Yv=()=>{try{return nK()||aK()||oK()||lK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kD=n=>Yv()?.emulatorHosts?.[n],MD=n=>{const e=kD(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ND=()=>Yv()?.config,LD=n=>Yv()?.[`_${n}`];class cK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function cd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MA(n){return(await fetch(n,{credentials:"include"})).ok}function OD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[_x(JSON.stringify(t)),_x(JSON.stringify(a)),""].join(".")}const gm={};function uK(){const n={prod:[],emulator:[]};for(const e of Object.keys(gm))gm[e]?n.emulator.push(e):n.prod.push(e);return n}function hK(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let qk=!1;function NA(n,e){if(typeof window>"u"||typeof document>"u"||!cd(window.location.host)||gm[n]===e||gm[n]||qk)return;gm[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=uK().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{qk=!0,a()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=hK(r),y=t("text"),v=document.getElementById(y)||document.createElement("span"),x=t("learnmore"),w=document.getElementById(x)||document.createElement("a"),T=t("preprendIcon"),I=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const b=g.element;o(b),h(w,x);const N=u();l(I,T),b.append(I,v,w,N),document.body.appendChild(b)}s?(v.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function ei(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ei())}function DD(){const n=Yv()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gK(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pK(){const n=ei();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FD(){return!DD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jD(){return!DD()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function VD(){try{return typeof indexedDB=="object"}catch{return!1}}function yK(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const _K="FirebaseError";class el extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_K,Object.setPrototypeOf(this,el.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t1.prototype.create)}}class t1{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?xK(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new el(i,o,r)}}function xK(n,e){return n.replace(vK,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vK=/\{\$([^}]+)}/g;function EK(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Zk(s)&&Zk(a)){if(!Bh(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Zk(n){return n!==null&&typeof n=="object"}function n1(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wK(n,e){const t=new SK(n,e);return t.subscribe.bind(t)}class SK{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=J2),i.error===void 0&&(i.error=J2),i.complete===void 0&&(i.complete=J2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TK(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function J2(){}function fi(n){return n&&n._delegate?n._delegate:n}class lu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ih="[DEFAULT]";class IK{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new cK;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bK(e))try{this.getOrInitializeService({instanceIdentifier:ih})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ih){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ih){return this.instances.has(e)}getOptions(e=ih){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AK(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ih){return this.component?this.component.multipleInstances?e:ih:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AK(n){return n===ih?void 0:n}function bK(n){return n.instantiationMode==="EAGER"}class RK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new IK(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var an;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(an||(an={}));const CK={debug:an.DEBUG,verbose:an.VERBOSE,info:an.INFO,warn:an.WARN,error:an.ERROR,silent:an.SILENT},PK=an.INFO,kK={[an.DEBUG]:"log",[an.VERBOSE]:"log",[an.INFO]:"info",[an.WARN]:"warn",[an.ERROR]:"error"},MK=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=kK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class LA{constructor(e){this.name=e,this._logLevel=PK,this._logHandler=MK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in an))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,an.DEBUG,...e),this._logHandler(this,an.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,an.VERBOSE,...e),this._logHandler(this,an.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,an.INFO,...e),this._logHandler(this,an.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,an.WARN,...e),this._logHandler(this,an.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,an.ERROR,...e),this._logHandler(this,an.ERROR,...e)}}const NK=(n,e)=>e.some(t=>n instanceof t);let Qk,Jk;function LK(){return Qk||(Qk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OK(){return Jk||(Jk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GD=new WeakMap,wT=new WeakMap,BD=new WeakMap,eS=new WeakMap,OA=new WeakMap;function DK(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Qc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&GD.set(t,n)}).catch(()=>{}),OA.set(e,n),e}function FK(n){if(wT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});wT.set(n,e)}let ST={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function jK(n){ST=n(ST)}function VK(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(tS(this),e,...t);return BD.set(r,e.sort?e.sort():[e]),Qc(r)}:OK().includes(n)?function(...e){return n.apply(tS(this),e),Qc(GD.get(this))}:function(...e){return Qc(n.apply(tS(this),e))}}function GK(n){return typeof n=="function"?VK(n):(n instanceof IDBTransaction&&FK(n),NK(n,LK())?new Proxy(n,ST):n)}function Qc(n){if(n instanceof IDBRequest)return DK(n);if(eS.has(n))return eS.get(n);const e=GK(n);return e!==n&&(eS.set(n,e),OA.set(e,n)),e}const tS=n=>OA.get(n);function BK(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Qc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Qc(a.result),l.oldVersion,l.newVersion,Qc(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const UK=["get","getKey","getAll","getAllKeys","count"],zK=["put","add","delete","clear"],nS=new Map;function eM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nS.get(e))return nS.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=zK.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UK.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return nS.set(e,s),s}jK(n=>({...n,get:(e,t,r)=>eM(e,t)||n.get(e,t,r),has:(e,t)=>!!eM(e,t)||n.has(e,t)}));class $K{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WK(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function WK(n){return n.getComponent()?.type==="VERSION"}const TT="@firebase/app",tM="0.14.6";const jl=new LA("@firebase/app"),HK="@firebase/app-compat",KK="@firebase/analytics-compat",YK="@firebase/analytics",XK="@firebase/app-check-compat",qK="@firebase/app-check",ZK="@firebase/auth",QK="@firebase/auth-compat",JK="@firebase/database",eY="@firebase/data-connect",tY="@firebase/database-compat",nY="@firebase/functions",rY="@firebase/functions-compat",iY="@firebase/installations",sY="@firebase/installations-compat",aY="@firebase/messaging",oY="@firebase/messaging-compat",lY="@firebase/performance",cY="@firebase/performance-compat",uY="@firebase/remote-config",hY="@firebase/remote-config-compat",dY="@firebase/storage",fY="@firebase/storage-compat",gY="@firebase/firestore",mY="@firebase/ai",pY="@firebase/firestore-compat",yY="firebase",_Y="12.6.0";const IT="[DEFAULT]",xY={[TT]:"fire-core",[HK]:"fire-core-compat",[YK]:"fire-analytics",[KK]:"fire-analytics-compat",[qK]:"fire-app-check",[XK]:"fire-app-check-compat",[ZK]:"fire-auth",[QK]:"fire-auth-compat",[JK]:"fire-rtdb",[eY]:"fire-data-connect",[tY]:"fire-rtdb-compat",[nY]:"fire-fn",[rY]:"fire-fn-compat",[iY]:"fire-iid",[sY]:"fire-iid-compat",[aY]:"fire-fcm",[oY]:"fire-fcm-compat",[lY]:"fire-perf",[cY]:"fire-perf-compat",[uY]:"fire-rc",[hY]:"fire-rc-compat",[dY]:"fire-gcs",[fY]:"fire-gcs-compat",[gY]:"fire-fst",[pY]:"fire-fst-compat",[mY]:"fire-vertex","fire-js":"fire-js",[yY]:"fire-js-all"};const xx=new Map,vY=new Map,AT=new Map;function nM(n,e){try{n.container.addComponent(e)}catch(t){jl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Uh(n){const e=n.name;if(AT.has(e))return jl.debug(`There were multiple attempts to register component ${e}.`),!1;AT.set(e,n);for(const t of xx.values())nM(t,n);for(const t of vY.values())nM(t,n);return!0}function Xv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ys(n){return n==null?!1:n.settings!==void 0}const EY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jc=new t1("app","Firebase",EY);class wY{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jc.create("app-deleted",{appName:this._name})}}const ud=_Y;function UD(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:IT,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Jc.create("bad-app-name",{appName:String(i)});if(t||(t=ND()),!t)throw Jc.create("no-options");const s=xx.get(i);if(s){if(Bh(t,s.options)&&Bh(r,s.config))return s;throw Jc.create("duplicate-app",{appName:i})}const a=new RK(i);for(const l of AT.values())a.addComponent(l);const o=new wY(t,r,a);return xx.set(i,o),o}function DA(n=IT){const e=xx.get(n);if(!e&&n===IT&&ND())return UD();if(!e)throw Jc.create("no-app",{appName:n});return e}function Oo(n,e,t){let r=xY[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jl.warn(a.join(" "));return}Uh(new lu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const SY="firebase-heartbeat-database",TY=1,ip="firebase-heartbeat-store";let rS=null;function zD(){return rS||(rS=BK(SY,TY,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ip)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jc.create("idb-open",{originalErrorMessage:n.message})})),rS}async function IY(n){try{const t=(await zD()).transaction(ip),r=await t.objectStore(ip).get($D(n));return await t.done,r}catch(e){if(e instanceof el)jl.warn(e.message);else{const t=Jc.create("idb-get",{originalErrorMessage:e?.message});jl.warn(t.message)}}}async function rM(n,e){try{const r=(await zD()).transaction(ip,"readwrite");await r.objectStore(ip).put(e,$D(n)),await r.done}catch(t){if(t instanceof el)jl.warn(t.message);else{const r=Jc.create("idb-set",{originalErrorMessage:t?.message});jl.warn(r.message)}}}function $D(n){return`${n.name}!${n.options.appId}`}const AY=1024,bY=30;class RY{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PY(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=iM();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>bY){const i=kY(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=iM(),{heartbeatsToSend:t,unsentEntries:r}=CY(this._heartbeatsCache.heartbeats),i=_x(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return jl.warn(e),""}}}function iM(){return new Date().toISOString().substring(0,10)}function CY(n,e=AY){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),sM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),sM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class PY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VD()?yK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IY(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sM(n){return _x(JSON.stringify({version:2,heartbeats:n})).length}function kY(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function MY(n){Uh(new lu("platform-logger",e=>new $K(e),"PRIVATE")),Uh(new lu("heartbeat",e=>new RY(e),"PRIVATE")),Oo(TT,tM,n),Oo(TT,tM,"esm2020"),Oo("fire-js","")}MY("");function WD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NY=WD,HD=new t1("auth","Firebase",WD());const vx=new LA("@firebase/auth");function LY(n,...e){vx.logLevel<=an.WARN&&vx.warn(`Auth (${ud}): ${n}`,...e)}function I_(n,...e){vx.logLevel<=an.ERROR&&vx.error(`Auth (${ud}): ${n}`,...e)}function Ho(n,...e){throw jA(n,...e)}function Za(n,...e){return jA(n,...e)}function FA(n,e,t){const r={...NY(),[e]:t};return new t1("auth","Firebase",r).create(e,{appName:n.name})}function eu(n){return FA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OY(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ho(n,"argument-error"),FA(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jA(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HD.create(n,...e)}function zt(n,e,...t){if(!n)throw jA(e,...t)}function wl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw I_(e),new Error(e)}function Vl(n,e){n||wl(e)}function bT(){return typeof self<"u"&&self.location?.href||""}function DY(){return aM()==="http:"||aM()==="https:"}function aM(){return typeof self<"u"&&self.location?.protocol||null}function FY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DY()||gK()||"connection"in navigator)?navigator.onLine:!0}function jY(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class r1{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vl(t>e,"Short delay should be less than long delay!"),this.isMobile=dK()||mK()}get(){return FY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function VA(n,e){Vl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class KD{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const VY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const GY=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BY=new r1(3e4,6e4);function qv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function D0(n,e,t,r,i={}){return YD(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=n1({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...s};return fK()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&cd(n.emulatorConfig.host)&&(u.credentials="include"),KD.fetch()(await qD(n,n.config.apiHost,t,o),u)})}async function YD(n,e,t){n._canInitEmulator=!1;const r={...VY,...e};try{const i=new UY(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Yy(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yy(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Yy(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Yy(n,"user-disabled",a);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw FA(n,h,u);Ho(n,h)}}catch(i){if(i instanceof el)throw i;Ho(n,"network-request-failed",{message:String(i)})}}async function XD(n,e,t,r,i={}){const s=await D0(n,e,t,r,i);return"mfaPendingCredential"in s&&Ho(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function qD(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?VA(n.config,i):`${n.config.apiScheme}://${i}`;return GY.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class UY{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Za(this.auth,"network-request-failed")),BY.get())})}}function Yy(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Za(n,e,r);return i.customData._tokenResponse=t,i}async function zY(n,e){return D0(n,"POST","/v1/accounts:delete",e)}async function Ex(n,e){return D0(n,"POST","/v1/accounts:lookup",e)}function mm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $Y(n,e=!1){const t=fi(n),r=await t.getIdToken(e),i=GA(r);zt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:mm(iS(i.auth_time)),issuedAtTime:mm(iS(i.iat)),expirationTime:mm(iS(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function iS(n){return Number(n)*1e3}function GA(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return I_("JWT malformed, contained fewer than 3 sections"),null;try{const i=CD(t);return i?JSON.parse(i):(I_("Failed to decode base64 JWT payload"),null)}catch(i){return I_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function oM(n){const e=GA(n);return zt(e,"internal-error"),zt(typeof e.exp<"u","internal-error"),zt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof el&&WY(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function WY({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class HY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class RT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mm(this.lastLoginAt),this.creationTime=mm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wx(n){const e=n.auth,t=await n.getIdToken(),r=await sp(n,Ex(e,{idToken:t}));zt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?ZD(i.providerUserInfo):[],a=YY(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!a?.length,u=o?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new RT(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function KY(n){const e=fi(n);await wx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZD(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function XY(n,e){const t=await YD(n,{},async()=>{const r=n1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await qD(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&cd(n.emulatorConfig.host)&&(l.credentials="include"),KD.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qY(n,e){return D0(n,"POST","/v2/accounts:revokeToken",qv(n,e))}class zf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){zt(e.idToken,"internal-error"),zt(typeof e.idToken<"u","internal-error"),zt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){zt(e.length!==0,"internal-error");const t=oM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(zt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await XY(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new zf;return r&&(zt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(zt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(zt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zf,this.toJSON())}_performRefresh(){return wl("not implemented")}}function Ic(n,e){zt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ha{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new HY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new RT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await sp(this,this.stsTokenManager.getToken(this.auth,e));return zt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $Y(this,e)}reload(){return KY(this)}_assign(e){this!==e&&(zt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ha({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await wx(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ys(this.auth.app))return Promise.reject(eu(this.auth));const e=await this.getIdToken();return await sp(this,zY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:f,emailVerified:g,isAnonymous:y,providerData:v,stsTokenManager:x}=t;zt(f&&x,e,"internal-error");const w=zf.fromJSON(this.name,x);zt(typeof f=="string",e,"internal-error"),Ic(r,e.name),Ic(i,e.name),zt(typeof g=="boolean",e,"internal-error"),zt(typeof y=="boolean",e,"internal-error"),Ic(s,e.name),Ic(a,e.name),Ic(o,e.name),Ic(l,e.name),Ic(u,e.name),Ic(h,e.name);const T=new Ha({uid:f,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:h});return v&&Array.isArray(v)&&(T.providerData=v.map(I=>({...I}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new zf;i.updateFromServerResponse(t);const s=new Ha({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await wx(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];zt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ZD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new zf;o.updateFromIdToken(r);const l=new Ha({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new RT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const lM=new Map;function Sl(n){Vl(n instanceof Function,"Expected a class definition");let e=lM.get(n);return e?(Vl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lM.set(n,e),e)}class QD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QD.type="NONE";const cM=QD;function A_(n,e,t){return`firebase:${n}:${e}:${t}`}class $f{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=A_(this.userKey,i.apiKey,s),this.fullPersistenceKey=A_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ex(this.auth,{idToken:e}).catch(()=>{});return t?Ha._fromGetAccountInfoResponse(this.auth,t,e):null}return Ha._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new $f(Sl(cM),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Sl(cM);const a=A_(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const g=await Ex(e,{idToken:h}).catch(()=>{});if(!g)break;f=await Ha._fromGetAccountInfoResponse(e,g,h)}else f=Ha._fromJSON(e,h);u!==s&&(o=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new $f(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new $f(s,e,r))}}function uM(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i6(e))return"Blackberry";if(s6(e))return"Webos";if(e6(e))return"Safari";if((e.includes("chrome/")||t6(e))&&!e.includes("edge/"))return"Chrome";if(r6(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function JD(n=ei()){return/firefox\//i.test(n)}function e6(n=ei()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t6(n=ei()){return/crios\//i.test(n)}function n6(n=ei()){return/iemobile/i.test(n)}function r6(n=ei()){return/android/i.test(n)}function i6(n=ei()){return/blackberry/i.test(n)}function s6(n=ei()){return/webos/i.test(n)}function BA(n=ei()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZY(n=ei()){return BA(n)&&!!window.navigator?.standalone}function QY(){return pK()&&document.documentMode===10}function a6(n=ei()){return BA(n)||r6(n)||s6(n)||i6(n)||/windows phone/i.test(n)||n6(n)}function o6(n,e=[]){let t;switch(n){case"Browser":t=uM(ei());break;case"Worker":t=`${uM(ei())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ud}/${r}`}class JY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function eX(n,e={}){return D0(n,"GET","/v2/passwordPolicy",qv(n,e))}const tX=6;class nX{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??tX,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class rX{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hM(this),this.idTokenSubscription=new hM(this),this.beforeStateQueue=new JY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sl(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $f.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ex(this,{idToken:e}),r=await Ha._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ys(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!s||s===a)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return zt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wx(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ys(this.app))return Promise.reject(eu(this));const t=e?fi(e):null;return t&&zt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&zt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ys(this.app)?Promise.reject(eu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ys(this.app)?Promise.reject(eu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eX(this),t=new nX(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new t1("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await qY(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sl(e)||this._popupRedirectResolver;zt(t,this,"argument-error"),this.redirectPersistenceManager=await $f.create(this,[Sl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(zt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LY(`Error while retrieving App Check token: ${e.error}`),e?.token}}function i1(n){return fi(n)}class hM{constructor(e){this.auth=e,this.observer=null,this.addObserver=wK(t=>this.observer=t)}get next(){return zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let UA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iX(n){UA=n}function sX(n){return UA.loadJS(n)}function aX(){return UA.gapiScript}function oX(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function lX(n,e){const t=Xv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Bh(s,e??{}))return i;Ho(i,"already-initialized")}return t.initialize({options:e})}function cX(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Sl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function uX(n,e,t){const r=i1(n);zt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=l6(e),{host:a,port:o}=hX(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){zt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),zt(Bh(u,r.config.emulator)&&Bh(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,cd(a)?(MA(`${s}//${a}${l}`),NA("Auth",!0)):dX()}function l6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function hX(n){const e=l6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:dM(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:dM(a)}}}function dM(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function dX(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class c6{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wl("not implemented")}_getIdTokenResponse(e){return wl("not implemented")}_linkToIdToken(e,t){return wl("not implemented")}_getReauthenticationResolver(e){return wl("not implemented")}}async function Wf(n,e){return XD(n,"POST","/v1/accounts:signInWithIdp",qv(n,e))}const fX="http://localhost";class zh extends c6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ho("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new zh(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Wf(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Wf(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wf(e,t)}buildRequest(){const e={requestUri:fX,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=n1(t)}return e}}class zA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class s1 extends zA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Oc extends s1{constructor(){super("facebook.com")}static credential(e){return zh._fromParams({providerId:Oc.PROVIDER_ID,signInMethod:Oc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oc.credentialFromTaggedObject(e)}static credentialFromError(e){return Oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oc.credential(e.oauthAccessToken)}catch{return null}}}Oc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oc.PROVIDER_ID="facebook.com";class El extends s1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zh._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return El.credential(t,r)}catch{return null}}}El.GOOGLE_SIGN_IN_METHOD="google.com";El.PROVIDER_ID="google.com";class Dc extends s1{constructor(){super("github.com")}static credential(e){return zh._fromParams({providerId:Dc.PROVIDER_ID,signInMethod:Dc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dc.credentialFromTaggedObject(e)}static credentialFromError(e){return Dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dc.credential(e.oauthAccessToken)}catch{return null}}}Dc.GITHUB_SIGN_IN_METHOD="github.com";Dc.PROVIDER_ID="github.com";class Fc extends s1{constructor(){super("twitter.com")}static credential(e,t){return zh._fromParams({providerId:Fc.PROVIDER_ID,signInMethod:Fc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fc.credentialFromTaggedObject(e)}static credentialFromError(e){return Fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fc.credential(t,r)}catch{return null}}}Fc.TWITTER_SIGN_IN_METHOD="twitter.com";Fc.PROVIDER_ID="twitter.com";async function gX(n,e){return XD(n,"POST","/v1/accounts:signUp",qv(n,e))}class cu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ha._fromIdTokenResponse(e,r,i),a=fM(r);return new cu({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=fM(r);return new cu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function fM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function mX(n){if(Ys(n.app))return Promise.reject(eu(n));const e=i1(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new cu({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await gX(e,{returnSecureToken:!0}),r=await cu._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Sx extends el{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sx.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Sx(e,t,r,i)}}function u6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Sx._fromErrorAndOperation(n,s,e,r):s})}async function pX(n,e,t=!1){const r=await sp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return cu._forOperation(n,"link",r)}async function yX(n,e,t=!1){const{auth:r}=n;if(Ys(r.app))return Promise.reject(eu(r));const i="reauthenticate";try{const s=await sp(n,u6(r,i,e,n),t);zt(s.idToken,r,"internal-error");const a=GA(s.idToken);zt(a,r,"internal-error");const{sub:o}=a;return zt(n.uid===o,r,"user-mismatch"),cu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ho(r,"user-mismatch"),s}}async function _X(n,e,t=!1){if(Ys(n.app))return Promise.reject(eu(n));const r="signIn",i=await u6(n,r,e),s=await cu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function xX(n,e,t,r){return fi(n).onIdTokenChanged(e,t,r)}function vX(n,e,t){return fi(n).beforeAuthStateChanged(e,t)}function h6(n,e,t,r){return fi(n).onAuthStateChanged(e,t,r)}function d6(n){return fi(n).signOut()}const Tx="__sak";class f6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tx,"1"),this.storage.removeItem(Tx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const EX=1e3,wX=10;class g6 extends f6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);QY()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,wX):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},EX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}g6.type="LOCAL";const SX=g6;class m6 extends f6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}m6.type="SESSION";const p6=m6;function TX(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Zv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Zv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await TX(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zv.receivers=[];function $A(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class IX{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=$A("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Do(){return window}function AX(n){Do().location.href=n}function y6(){return typeof Do().WorkerGlobalScope<"u"&&typeof Do().importScripts=="function"}async function bX(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RX(){return navigator?.serviceWorker?.controller||null}function CX(){return y6()?self:null}const _6="firebaseLocalStorageDb",PX=1,Ix="firebaseLocalStorage",x6="fbase_key";class a1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qv(n,e){return n.transaction([Ix],e?"readwrite":"readonly").objectStore(Ix)}function kX(){const n=indexedDB.deleteDatabase(_6);return new a1(n).toPromise()}function CT(){const n=indexedDB.open(_6,PX);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ix,{keyPath:x6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ix)?e(r):(r.close(),await kX(),e(await CT()))})})}async function gM(n,e,t){const r=Qv(n,!0).put({[x6]:e,value:t});return new a1(r).toPromise()}async function MX(n,e){const t=Qv(n,!1).get(e),r=await new a1(t).toPromise();return r===void 0?null:r.value}function mM(n,e){const t=Qv(n,!0).delete(e);return new a1(t).toPromise()}const NX=800,LX=3;class v6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await CT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>LX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return y6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zv._getInstance(CX()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await bX(),!this.activeServiceWorker)return;this.sender=new IX(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RX()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await CT();return await gM(e,Tx,"1"),await mM(e,Tx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gM(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>MX(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mM(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Qv(i,!1).getAll();return new a1(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v6.type="LOCAL";const OX=v6;new r1(3e4,6e4);function E6(n,e){return e?Sl(e):(zt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class WA extends c6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DX(n){return _X(n.auth,new WA(n),n.bypassAuthState)}function FX(n){const{auth:e,user:t}=n;return zt(t,e,"internal-error"),yX(t,new WA(n),n.bypassAuthState)}async function jX(n){const{auth:e,user:t}=n;return zt(t,e,"internal-error"),pX(t,new WA(n),n.bypassAuthState)}class w6{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DX;case"linkViaPopup":case"linkViaRedirect":return jX;case"reauthViaPopup":case"reauthViaRedirect":return FX;default:Ho(this.auth,"internal-error")}}resolve(e){Vl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const VX=new r1(2e3,1e4);async function GX(n,e,t){if(Ys(n.app))return Promise.reject(Za(n,"operation-not-supported-in-this-environment"));const r=i1(n);OY(n,e,zA);const i=E6(r,t);return new vh(r,"signInViaPopup",e,i).executeNotNull()}class vh extends w6{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,vh.currentPopupAction&&vh.currentPopupAction.cancel(),vh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return zt(e,this.auth,"internal-error"),e}async onExecution(){Vl(this.filter.length===1,"Popup operations only handle one event");const e=$A();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Za(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Za(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Za(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VX.get())};e()}}vh.currentPopupAction=null;const BX="pendingRedirect",b_=new Map;class UX extends w6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=b_.get(this.auth._key());if(!e){try{const r=await zX(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}b_.set(this.auth._key(),e)}return this.bypassAuthState||b_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zX(n,e){const t=HX(e),r=WX(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function $X(n,e){b_.set(n._key(),e)}function WX(n){return Sl(n._redirectPersistence)}function HX(n){return A_(BX,n.config.apiKey,n.name)}async function KX(n,e,t=!1){if(Ys(n.app))return Promise.reject(eu(n));const r=i1(n),i=E6(r,e),a=await new UX(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const YX=600*1e3;class XX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qX(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!S6(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Za(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YX&&this.cachedEventUids.clear(),this.cachedEventUids.has(pM(e))}saveEventToCache(e){this.cachedEventUids.add(pM(e)),this.lastProcessedEventTime=Date.now()}}function pM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function S6({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S6(n);default:return!1}}async function ZX(n,e={}){return D0(n,"GET","/v1/projects",e)}const QX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JX=/^https?/;async function eq(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ZX(n);for(const t of e)try{if(tq(t))return}catch{}Ho(n,"unauthorized-domain")}function tq(n){const e=bT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!JX.test(t))return!1;if(QX.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const nq=new r1(3e4,6e4);function yM(){const n=Do().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function rq(n){return new Promise((e,t)=>{function r(){yM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yM(),t(Za(n,"network-request-failed"))},timeout:nq.get()})}if(Do().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Do().gapi?.load)r();else{const i=oX("iframefcb");return Do()[i]=()=>{gapi.load?r():t(Za(n,"network-request-failed"))},sX(`${aX()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw R_=null,e})}let R_=null;function iq(n){return R_=R_||rq(n),R_}const sq=new r1(5e3,15e3),aq="__/auth/iframe",oq="emulator/auth/iframe",lq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uq(n){const e=n.config;zt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?VA(e,oq):`https://${n.config.authDomain}/${aq}`,r={apiKey:e.apiKey,appName:n.name,v:ud},i=cq.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${n1(r).slice(1)}`}async function hq(n){const e=await iq(n),t=Do().gapi;return zt(t,n,"internal-error"),e.open({where:document.body,url:uq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Za(n,"network-request-failed"),o=Do().setTimeout(()=>{s(a)},sq.get());function l(){Do().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}const dq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fq=500,gq=600,mq="_blank",pq="http://localhost";class _M{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yq(n,e,t,r=fq,i=gq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...dq,width:r.toString(),height:i.toString(),top:s,left:a},u=ei().toLowerCase();t&&(o=t6(u)?mq:t),JD(u)&&(e=e||pq,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[y,v])=>`${g}${y}=${v},`,"");if(ZY(u)&&o!=="_self")return _q(e||"",o),new _M(null);const f=window.open(e||"",o,h);zt(f,n,"popup-blocked");try{f.focus()}catch{}return new _M(f)}function _q(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const xq="__/auth/handler",vq="emulator/auth/handler",Eq=encodeURIComponent("fac");async function xM(n,e,t,r,i,s){zt(n.config.authDomain,n,"auth-domain-config-required"),zt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ud,eventId:i};if(e instanceof zA){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",EK(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof s1){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await n._getAppCheckToken(),u=l?`#${Eq}=${encodeURIComponent(l)}`:"";return`${wq(n)}?${n1(o).slice(1)}${u}`}function wq({config:n}){return n.emulator?VA(n,vq):`https://${n.authDomain}/${xq}`}const sS="webStorageSupport";class Sq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p6,this._completeRedirectFn=KX,this._overrideRedirectResult=$X}async _openPopup(e,t,r,i){Vl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await xM(e,t,r,bT(),i);return yq(e,s,$A())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await xM(e,t,r,bT(),i);return AX(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Vl(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await hq(e),r=new XX(e);return t.register("authEvent",i=>(zt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sS,{type:sS},i=>{const s=i?.[0]?.[sS];s!==void 0&&t(!!s),Ho(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=eq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return a6()||e6()||BA()}}const Tq=Sq;var vM="@firebase/auth",EM="1.12.0";class Iq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Aq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bq(n){Uh(new lu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;zt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o6(n)},u=new rX(r,i,s,l);return cX(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Uh(new lu("auth-internal",e=>{const t=i1(e.getProvider("auth").getImmediate());return(r=>new Iq(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oo(vM,EM,Aq(n)),Oo(vM,EM,"esm2020")}const Rq=300,Cq=LD("authIdTokenMaxAge")||Rq;let wM=null;const Pq=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Cq)return;const i=t?.token;wM!==i&&(wM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kq(n=DA()){const e=Xv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=lX(n,{popupRedirectResolver:Tq,persistence:[OX,SX,p6]}),r=LD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Pq(s.toString());vX(t,a,()=>a(t.currentUser)),xX(t,o=>a(o))}}const i=kD("auth");return i&&uX(t,`http://${i}`),t}function Mq(){return document.getElementsByTagName("head")?.[0]??document}iX({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Za("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Mq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bq("Browser");var Nq="firebase",Lq="12.7.0";Oo(Nq,Lq,"app");var SM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var tu,T6;(function(){var n;function e(M,C){function P(){}P.prototype=C.prototype,M.F=C.prototype,M.prototype=new P,M.prototype.constructor=M,M.D=function(L,O,U){for(var j=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)j[xe-2]=arguments[xe];return C.prototype[O].apply(L,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,C,P){P||(P=0);const L=Array(16);if(typeof C=="string")for(var O=0;O<16;++O)L[O]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(O=0;O<16;++O)L[O]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=M.g[0],P=M.g[1],O=M.g[2];let U=M.g[3],j;j=C+(U^P&(O^U))+L[0]+3614090360&4294967295,C=P+(j<<7&4294967295|j>>>25),j=U+(O^C&(P^O))+L[1]+3905402710&4294967295,U=C+(j<<12&4294967295|j>>>20),j=O+(P^U&(C^P))+L[2]+606105819&4294967295,O=U+(j<<17&4294967295|j>>>15),j=P+(C^O&(U^C))+L[3]+3250441966&4294967295,P=O+(j<<22&4294967295|j>>>10),j=C+(U^P&(O^U))+L[4]+4118548399&4294967295,C=P+(j<<7&4294967295|j>>>25),j=U+(O^C&(P^O))+L[5]+1200080426&4294967295,U=C+(j<<12&4294967295|j>>>20),j=O+(P^U&(C^P))+L[6]+2821735955&4294967295,O=U+(j<<17&4294967295|j>>>15),j=P+(C^O&(U^C))+L[7]+4249261313&4294967295,P=O+(j<<22&4294967295|j>>>10),j=C+(U^P&(O^U))+L[8]+1770035416&4294967295,C=P+(j<<7&4294967295|j>>>25),j=U+(O^C&(P^O))+L[9]+2336552879&4294967295,U=C+(j<<12&4294967295|j>>>20),j=O+(P^U&(C^P))+L[10]+4294925233&4294967295,O=U+(j<<17&4294967295|j>>>15),j=P+(C^O&(U^C))+L[11]+2304563134&4294967295,P=O+(j<<22&4294967295|j>>>10),j=C+(U^P&(O^U))+L[12]+1804603682&4294967295,C=P+(j<<7&4294967295|j>>>25),j=U+(O^C&(P^O))+L[13]+4254626195&4294967295,U=C+(j<<12&4294967295|j>>>20),j=O+(P^U&(C^P))+L[14]+2792965006&4294967295,O=U+(j<<17&4294967295|j>>>15),j=P+(C^O&(U^C))+L[15]+1236535329&4294967295,P=O+(j<<22&4294967295|j>>>10),j=C+(O^U&(P^O))+L[1]+4129170786&4294967295,C=P+(j<<5&4294967295|j>>>27),j=U+(P^O&(C^P))+L[6]+3225465664&4294967295,U=C+(j<<9&4294967295|j>>>23),j=O+(C^P&(U^C))+L[11]+643717713&4294967295,O=U+(j<<14&4294967295|j>>>18),j=P+(U^C&(O^U))+L[0]+3921069994&4294967295,P=O+(j<<20&4294967295|j>>>12),j=C+(O^U&(P^O))+L[5]+3593408605&4294967295,C=P+(j<<5&4294967295|j>>>27),j=U+(P^O&(C^P))+L[10]+38016083&4294967295,U=C+(j<<9&4294967295|j>>>23),j=O+(C^P&(U^C))+L[15]+3634488961&4294967295,O=U+(j<<14&4294967295|j>>>18),j=P+(U^C&(O^U))+L[4]+3889429448&4294967295,P=O+(j<<20&4294967295|j>>>12),j=C+(O^U&(P^O))+L[9]+568446438&4294967295,C=P+(j<<5&4294967295|j>>>27),j=U+(P^O&(C^P))+L[14]+3275163606&4294967295,U=C+(j<<9&4294967295|j>>>23),j=O+(C^P&(U^C))+L[3]+4107603335&4294967295,O=U+(j<<14&4294967295|j>>>18),j=P+(U^C&(O^U))+L[8]+1163531501&4294967295,P=O+(j<<20&4294967295|j>>>12),j=C+(O^U&(P^O))+L[13]+2850285829&4294967295,C=P+(j<<5&4294967295|j>>>27),j=U+(P^O&(C^P))+L[2]+4243563512&4294967295,U=C+(j<<9&4294967295|j>>>23),j=O+(C^P&(U^C))+L[7]+1735328473&4294967295,O=U+(j<<14&4294967295|j>>>18),j=P+(U^C&(O^U))+L[12]+2368359562&4294967295,P=O+(j<<20&4294967295|j>>>12),j=C+(P^O^U)+L[5]+4294588738&4294967295,C=P+(j<<4&4294967295|j>>>28),j=U+(C^P^O)+L[8]+2272392833&4294967295,U=C+(j<<11&4294967295|j>>>21),j=O+(U^C^P)+L[11]+1839030562&4294967295,O=U+(j<<16&4294967295|j>>>16),j=P+(O^U^C)+L[14]+4259657740&4294967295,P=O+(j<<23&4294967295|j>>>9),j=C+(P^O^U)+L[1]+2763975236&4294967295,C=P+(j<<4&4294967295|j>>>28),j=U+(C^P^O)+L[4]+1272893353&4294967295,U=C+(j<<11&4294967295|j>>>21),j=O+(U^C^P)+L[7]+4139469664&4294967295,O=U+(j<<16&4294967295|j>>>16),j=P+(O^U^C)+L[10]+3200236656&4294967295,P=O+(j<<23&4294967295|j>>>9),j=C+(P^O^U)+L[13]+681279174&4294967295,C=P+(j<<4&4294967295|j>>>28),j=U+(C^P^O)+L[0]+3936430074&4294967295,U=C+(j<<11&4294967295|j>>>21),j=O+(U^C^P)+L[3]+3572445317&4294967295,O=U+(j<<16&4294967295|j>>>16),j=P+(O^U^C)+L[6]+76029189&4294967295,P=O+(j<<23&4294967295|j>>>9),j=C+(P^O^U)+L[9]+3654602809&4294967295,C=P+(j<<4&4294967295|j>>>28),j=U+(C^P^O)+L[12]+3873151461&4294967295,U=C+(j<<11&4294967295|j>>>21),j=O+(U^C^P)+L[15]+530742520&4294967295,O=U+(j<<16&4294967295|j>>>16),j=P+(O^U^C)+L[2]+3299628645&4294967295,P=O+(j<<23&4294967295|j>>>9),j=C+(O^(P|~U))+L[0]+4096336452&4294967295,C=P+(j<<6&4294967295|j>>>26),j=U+(P^(C|~O))+L[7]+1126891415&4294967295,U=C+(j<<10&4294967295|j>>>22),j=O+(C^(U|~P))+L[14]+2878612391&4294967295,O=U+(j<<15&4294967295|j>>>17),j=P+(U^(O|~C))+L[5]+4237533241&4294967295,P=O+(j<<21&4294967295|j>>>11),j=C+(O^(P|~U))+L[12]+1700485571&4294967295,C=P+(j<<6&4294967295|j>>>26),j=U+(P^(C|~O))+L[3]+2399980690&4294967295,U=C+(j<<10&4294967295|j>>>22),j=O+(C^(U|~P))+L[10]+4293915773&4294967295,O=U+(j<<15&4294967295|j>>>17),j=P+(U^(O|~C))+L[1]+2240044497&4294967295,P=O+(j<<21&4294967295|j>>>11),j=C+(O^(P|~U))+L[8]+1873313359&4294967295,C=P+(j<<6&4294967295|j>>>26),j=U+(P^(C|~O))+L[15]+4264355552&4294967295,U=C+(j<<10&4294967295|j>>>22),j=O+(C^(U|~P))+L[6]+2734768916&4294967295,O=U+(j<<15&4294967295|j>>>17),j=P+(U^(O|~C))+L[13]+1309151649&4294967295,P=O+(j<<21&4294967295|j>>>11),j=C+(O^(P|~U))+L[4]+4149444226&4294967295,C=P+(j<<6&4294967295|j>>>26),j=U+(P^(C|~O))+L[11]+3174756917&4294967295,U=C+(j<<10&4294967295|j>>>22),j=O+(C^(U|~P))+L[2]+718787259&4294967295,O=U+(j<<15&4294967295|j>>>17),j=P+(U^(O|~C))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(O+(j<<21&4294967295|j>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+U&4294967295}r.prototype.v=function(M,C){C===void 0&&(C=M.length);const P=C-this.blockSize,L=this.C;let O=this.h,U=0;for(;U<C;){if(O==0)for(;U<=P;)i(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<C;)if(L[O++]=M.charCodeAt(U++),O==this.blockSize){i(this,L),O=0;break}}else for(;U<C;)if(L[O++]=M[U++],O==this.blockSize){i(this,L),O=0;break}}this.h=O,this.o+=C},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;C=this.o*8;for(var P=M.length-8;P<M.length;++P)M[P]=C&255,C/=256;for(this.v(M),M=Array(16),C=0,P=0;P<4;++P)for(let L=0;L<32;L+=8)M[C++]=this.g[P]>>>L&255;return M};function s(M,C){var P=o;return Object.prototype.hasOwnProperty.call(P,M)?P[M]:P[M]=C(M)}function a(M,C){this.h=C;const P=[];let L=!0;for(let O=M.length-1;O>=0;O--){const U=M[O]|0;L&&U==C||(P[O]=U,L=!1)}this.g=P}var o={};function l(M){return-128<=M&&M<128?s(M,function(C){return new a([C|0],C<0?-1:0)}):new a([M|0],M<0?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return f;if(M<0)return w(u(-M));const C=[];let P=1;for(let L=0;M>=P;L++)C[L]=M/P|0,P*=4294967296;return new a(C,0)}function h(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return w(h(M.substring(1),C));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=u(Math.pow(C,8));let L=f;for(let U=0;U<M.length;U+=8){var O=Math.min(8,M.length-U);const j=parseInt(M.substring(U,U+O),C);O<8?(O=u(Math.pow(C,O)),L=L.j(O).add(u(j))):(L=L.j(P),L=L.add(u(j)))}return L}var f=l(0),g=l(1),y=l(16777216);n=a.prototype,n.m=function(){if(x(this))return-w(this).m();let M=0,C=1;for(let P=0;P<this.g.length;P++){const L=this.i(P);M+=(L>=0?L:4294967296+L)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(v(this))return"0";if(x(this))return"-"+w(this).toString(M);const C=u(Math.pow(M,6));var P=this;let L="";for(;;){const O=N(P,C).g;P=T(P,O.j(C));let U=((P.g.length>0?P.g[0]:P.h)>>>0).toString(M);if(P=O,v(P))return U+L;for(;U.length<6;)U="0"+U;L=U+L}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function v(M){if(M.h!=0)return!1;for(let C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function x(M){return M.h==-1}n.l=function(M){return M=T(this,M),x(M)?-1:v(M)?0:1};function w(M){const C=M.g.length,P=[];for(let L=0;L<C;L++)P[L]=~M.g[L];return new a(P,~M.h).add(g)}n.abs=function(){return x(this)?w(this):this},n.add=function(M){const C=Math.max(this.g.length,M.g.length),P=[];let L=0;for(let O=0;O<=C;O++){let U=L+(this.i(O)&65535)+(M.i(O)&65535),j=(U>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);L=j>>>16,U&=65535,j&=65535,P[O]=j<<16|U}return new a(P,P[P.length-1]&-2147483648?-1:0)};function T(M,C){return M.add(w(C))}n.j=function(M){if(v(this)||v(M))return f;if(x(this))return x(M)?w(this).j(w(M)):w(w(this).j(M));if(x(M))return w(this.j(w(M)));if(this.l(y)<0&&M.l(y)<0)return u(this.m()*M.m());const C=this.g.length+M.g.length,P=[];for(var L=0;L<2*C;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<M.g.length;O++){const U=this.i(L)>>>16,j=this.i(L)&65535,xe=M.i(O)>>>16,Ce=M.i(O)&65535;P[2*L+2*O]+=j*Ce,I(P,2*L+2*O),P[2*L+2*O+1]+=U*Ce,I(P,2*L+2*O+1),P[2*L+2*O+1]+=j*xe,I(P,2*L+2*O+1),P[2*L+2*O+2]+=U*xe,I(P,2*L+2*O+2)}for(M=0;M<C;M++)P[M]=P[2*M+1]<<16|P[2*M];for(M=C;M<2*C;M++)P[M]=0;return new a(P,0)};function I(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function b(M,C){this.g=M,this.h=C}function N(M,C){if(v(C))throw Error("division by zero");if(v(M))return new b(f,f);if(x(M))return C=N(w(M),C),new b(w(C.g),w(C.h));if(x(C))return C=N(M,w(C)),new b(w(C.g),C.h);if(M.g.length>30){if(x(M)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var P=g,L=C;L.l(M)<=0;)P=F(P),L=F(L);var O=W(P,1),U=W(L,1);for(L=W(L,2),P=W(P,2);!v(L);){var j=U.add(L);j.l(M)<=0&&(O=O.add(P),U=j),L=W(L,1),P=W(P,1)}return C=T(M,O.j(C)),new b(O,C)}for(O=f;M.l(C)>=0;){for(P=Math.max(1,Math.floor(M.m()/C.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),U=u(P),j=U.j(C);x(j)||j.l(M)>0;)P-=L,U=u(P),j=U.j(C);v(U)&&(U=g),O=O.add(U),M=T(M,j)}return new b(O,M)}n.B=function(M){return N(this,M).h},n.and=function(M){const C=Math.max(this.g.length,M.g.length),P=[];for(let L=0;L<C;L++)P[L]=this.i(L)&M.i(L);return new a(P,this.h&M.h)},n.or=function(M){const C=Math.max(this.g.length,M.g.length),P=[];for(let L=0;L<C;L++)P[L]=this.i(L)|M.i(L);return new a(P,this.h|M.h)},n.xor=function(M){const C=Math.max(this.g.length,M.g.length),P=[];for(let L=0;L<C;L++)P[L]=this.i(L)^M.i(L);return new a(P,this.h^M.h)};function F(M){const C=M.g.length+1,P=[];for(let L=0;L<C;L++)P[L]=M.i(L)<<1|M.i(L-1)>>>31;return new a(P,M.h)}function W(M,C){const P=C>>5;C%=32;const L=M.g.length-P,O=[];for(let U=0;U<L;U++)O[U]=C>0?M.i(U+P)>>>C|M.i(U+P+1)<<32-C:M.i(U+P);return new a(O,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,T6=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,tu=a}).apply(typeof SM<"u"?SM:typeof self<"u"?self:typeof window<"u"?window:{});var Xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var I6,em,A6,C_,PT,b6,R6,C6;(function(){var n,e=Object.defineProperty;function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xy=="object"&&Xy];for(var R=0;R<_.length;++R){var D=_[R];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=t(this);function i(_,R){if(R)e:{var D=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var fe=_[H];if(!(fe in D))break e;D=D[fe]}_=_[_.length-1],H=D[_],R=R(H),R!=H&&R!=null&&e(D,_,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(R){var D=[],H;for(H in R)Object.prototype.hasOwnProperty.call(R,H)&&D.push([H,R[H]]);return D}});var s=s||{},a=this||self;function o(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function l(_,R,D){return _.call.apply(_.bind,arguments)}function u(_,R,D){return u=l,u.apply(null,arguments)}function h(_,R){var D=Array.prototype.slice.call(arguments,1);return function(){var H=D.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function f(_,R){function D(){}D.prototype=R.prototype,_.Z=R.prototype,_.prototype=new D,_.prototype.constructor=_,_.Ob=function(H,fe,Se){for(var rt=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)rt[Yt-2]=arguments[Yt];return R.prototype[fe].apply(H,rt)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function y(_){const R=_.length;if(R>0){const D=Array(R);for(let H=0;H<R;H++)D[H]=_[H];return D}return[]}function v(_,R){for(let H=1;H<arguments.length;H++){const fe=arguments[H];var D=typeof fe;if(D=D!="object"?D:fe?Array.isArray(fe)?"array":D:"null",D=="array"||D=="object"&&typeof fe.length=="number"){D=_.length||0;const Se=fe.length||0;_.length=D+Se;for(let rt=0;rt<Se;rt++)_[D+rt]=fe[rt]}else _.push(fe)}}class x{constructor(R,D){this.i=R,this.j=D,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function w(_){a.setTimeout(()=>{throw _},0)}function T(){var _=M;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class I{constructor(){this.h=this.g=null}add(R,D){const H=b.get();H.set(R,D),this.h?this.h.next=H:this.g=H,this.h=H}}var b=new x(()=>new N,_=>_.reset());class N{constructor(){this.next=this.g=this.h=null}set(R,D){this.h=R,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let F,W=!1,M=new I,C=()=>{const _=Promise.resolve(void 0);F=()=>{_.then(P)}};function P(){for(var _;_=T();){try{_.h.call(_.g)}catch(D){w(D)}var R=b;R.j(_),R.h<100&&(R.h++,_.next=R.g,R.g=_)}W=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const D=()=>{};a.addEventListener("test",D,R),a.removeEventListener("test",D,R)}catch{}return _})();function j(_){return/^[\s\xa0]*$/.test(_)}function xe(_,R){O.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,R)}f(xe,O),xe.prototype.init=function(_,R){const D=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget,R||(D=="mouseover"?R=_.fromElement:D=="mouseout"&&(R=_.toElement)),this.relatedTarget=R,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),Ge=0;function ke(_,R,D,H,fe){this.listener=_,this.proxy=null,this.src=R,this.type=D,this.capture=!!H,this.ha=fe,this.key=++Ge,this.da=this.fa=!1}function ce(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ie(_,R,D){for(const H in _)R.call(D,_[H],H,_)}function Te(_,R){for(const D in _)R.call(void 0,_[D],D,_)}function ie(_){const R={};for(const D in _)R[D]=_[D];return R}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(_,R){let D,H;for(let fe=1;fe<arguments.length;fe++){H=arguments[fe];for(D in H)_[D]=H[D];for(let Se=0;Se<V.length;Se++)D=V[Se],Object.prototype.hasOwnProperty.call(H,D)&&(_[D]=H[D])}}function te(_){this.src=_,this.g={},this.h=0}te.prototype.add=function(_,R,D,H,fe){const Se=_.toString();_=this.g[Se],_||(_=this.g[Se]=[],this.h++);const rt=ue(_,R,H,fe);return rt>-1?(R=_[rt],D||(R.fa=!1)):(R=new ke(R,this.src,Se,!!H,fe),R.fa=D,_.push(R)),R};function X(_,R){const D=R.type;if(D in _.g){var H=_.g[D],fe=Array.prototype.indexOf.call(H,R,void 0),Se;(Se=fe>=0)&&Array.prototype.splice.call(H,fe,1),Se&&(ce(R),_.g[D].length==0&&(delete _.g[D],_.h--))}}function ue(_,R,D,H){for(let fe=0;fe<_.length;++fe){const Se=_[fe];if(!Se.da&&Se.listener==R&&Se.capture==!!D&&Se.ha==H)return fe}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Fe={};function Le(_,R,D,H,fe){if(Array.isArray(R)){for(let Se=0;Se<R.length;Se++)Le(_,R[Se],D,H,fe);return null}return D=bn(D),_&&_[Ce]?_.J(R,D,o(H)?!!H.capture:!1,fe):je(_,R,D,!1,H,fe)}function je(_,R,D,H,fe,Se){if(!R)throw Error("Invalid event type");const rt=o(fe)?!!fe.capture:!!fe;let Yt=yt(_);if(Yt||(_[Me]=Yt=new te(_)),D=Yt.add(R,D,H,rt,Se),D.proxy)return D;if(H=qt(),D.proxy=H,H.src=_,H.listener=D,_.addEventListener)U||(fe=rt),fe===void 0&&(fe=!1),_.addEventListener(R.toString(),H,fe);else if(_.attachEvent)_.attachEvent(Nt(R.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return D}function qt(){function _(D){return R.call(_.src,_.listener,D)}const R=at;return _}function Ye(_,R,D,H,fe){if(Array.isArray(R))for(var Se=0;Se<R.length;Se++)Ye(_,R[Se],D,H,fe);else H=o(H)?!!H.capture:!!H,D=bn(D),_&&_[Ce]?(_=_.i,Se=String(R).toString(),Se in _.g&&(R=_.g[Se],D=ue(R,D,H,fe),D>-1&&(ce(R[D]),Array.prototype.splice.call(R,D,1),R.length==0&&(delete _.g[Se],_.h--)))):_&&(_=yt(_))&&(R=_.g[R.toString()],_=-1,R&&(_=ue(R,D,H,fe)),(D=_>-1?R[_]:null)&&Zt(D))}function Zt(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[Ce])X(R.i,_);else{var D=_.type,H=_.proxy;R.removeEventListener?R.removeEventListener(D,H,_.capture):R.detachEvent?R.detachEvent(Nt(D),H):R.addListener&&R.removeListener&&R.removeListener(H),(D=yt(R))?(X(D,_),D.h==0&&(D.src=null,R[Me]=null)):ce(_)}}}function Nt(_){return _ in Fe?Fe[_]:Fe[_]="on"+_}function at(_,R){if(_.da)_=!0;else{R=new xe(R,this);const D=_.listener,H=_.ha||_.src;_.fa&&Zt(_),_=D.call(H,R)}return _}function yt(_){return _=_[Me],_ instanceof te?_:null}var Oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function bn(_){return typeof _=="function"?_:(_[Oe]||(_[Oe]=function(R){return _.handleEvent(R)}),_[Oe])}function $t(){L.call(this),this.i=new te(this),this.M=this,this.G=null}f($t,L),$t.prototype[Ce]=!0,$t.prototype.removeEventListener=function(_,R,D,H){Ye(this,_,R,D,H)};function Xt(_,R){var D,H=_.G;if(H)for(D=[];H;H=H.G)D.push(H);if(_=_.M,H=R.type||R,typeof R=="string")R=new O(R,_);else if(R instanceof O)R.target=R.target||_;else{var fe=R;R=new O(H,_),J(R,fe)}fe=!0;let Se,rt;if(D)for(rt=D.length-1;rt>=0;rt--)Se=R.g=D[rt],fe=It(Se,H,!0,R)&&fe;if(Se=R.g=_,fe=It(Se,H,!0,R)&&fe,fe=It(Se,H,!1,R)&&fe,D)for(rt=0;rt<D.length;rt++)Se=R.g=D[rt],fe=It(Se,H,!1,R)&&fe}$t.prototype.N=function(){if($t.Z.N.call(this),this.i){var _=this.i;for(const R in _.g){const D=_.g[R];for(let H=0;H<D.length;H++)ce(D[H]);delete _.g[R],_.h--}}this.G=null},$t.prototype.J=function(_,R,D,H){return this.i.add(String(_),R,!1,D,H)},$t.prototype.K=function(_,R,D,H){return this.i.add(String(_),R,!0,D,H)};function It(_,R,D,H){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();let fe=!0;for(let Se=0;Se<R.length;++Se){const rt=R[Se];if(rt&&!rt.da&&rt.capture==D){const Yt=rt.listener,Ir=rt.ha||rt.src;rt.fa&&X(_.i,rt),fe=Yt.call(Ir,H)!==!1&&fe}}return fe&&!H.defaultPrevented}function Rn(_,R){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:a.setTimeout(_,R||0)}function Ae(_){_.g=Rn(()=>{_.g=null,_.i&&(_.i=!1,Ae(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class Ee extends L{constructor(R,D){super(),this.m=R,this.l=D,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Ae(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function k(_){L.call(this),this.h=_,this.g={}}f(k,L);var St=[];function Z(_){Ie(_.g,function(R,D){this.g.hasOwnProperty(D)&&Zt(R)},_),_.g={}}k.prototype.N=function(){k.Z.N.call(this),Z(this)},k.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=a.JSON.stringify,re=a.JSON.parse,z=class{stringify(_){return a.JSON.stringify(_,void 0)}parse(_){return a.JSON.parse(_,void 0)}};function ae(){}function qe(){}var we={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Je(){O.call(this,"d")}f(Je,O);function gt(){O.call(this,"c")}f(gt,O);var dt={},At=null;function Rt(){return At=At||new $t}dt.Ia="serverreachability";function tn(_){O.call(this,dt.Ia,_)}f(tn,O);function Nr(_){const R=Rt();Xt(R,new tn(R))}dt.STAT_EVENT="statevent";function $r(_,R){O.call(this,dt.STAT_EVENT,_),this.stat=R}f($r,O);function yn(_){const R=Rt();Xt(R,new $r(R,_))}dt.Ja="timingevent";function Yi(_,R){O.call(this,dt.Ja,_),this.size=R}f(Yi,O);function Xi(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){_()},R)}function ar(){this.g=!0}ar.prototype.ua=function(){this.g=!1};function cs(_,R,D,H,fe,Se){_.info(function(){if(_.g)if(Se){var rt="",Yt=Se.split("&");for(let On=0;On<Yt.length;On++){var Ir=Yt[On].split("=");if(Ir.length>1){const Or=Ir[0];Ir=Ir[1];const Fs=Or.split("_");rt=Fs.length>=2&&Fs[1]=="type"?rt+(Or+"="+Ir+"&"):rt+(Or+"=redacted&")}}}else rt=null;else rt=Se;return"XMLHTTP REQ ("+H+") [attempt "+fe+"]: "+R+`
`+D+`
`+rt})}function Wr(_,R,D,H,fe,Se,rt){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+fe+"]: "+R+`
`+D+`
`+Se+" "+rt})}function or(_,R,D,H){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+Kr(_,D)+(H?" "+H:"")})}function Hr(_,R){_.info(function(){return"TIMEOUT: "+R})}ar.prototype.info=function(){};function Kr(_,R){if(!_.g)return R;if(!R)return null;try{const Se=JSON.parse(R);if(Se){for(_=0;_<Se.length;_++)if(Array.isArray(Se[_])){var D=Se[_];if(!(D.length<2)){var H=D[1];if(Array.isArray(H)&&!(H.length<1)){var fe=H[0];if(fe!="noop"&&fe!="stop"&&fe!="close")for(let rt=1;rt<H.length;rt++)H[rt]=""}}}}return jt(Se)}catch{return R}}var Lr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mr;function Sr(){}f(Sr,ae),Sr.prototype.g=function(){return new XMLHttpRequest},mr=new Sr;function us(_){return encodeURIComponent(String(_))}function B(_){var R=1;_=_.split(":");const D=[];for(;R>0&&_.length;)D.push(_.shift()),R--;return _.length&&D.push(_.join(":")),D}function q(_,R,D,H){this.j=_,this.i=R,this.l=D,this.S=H||1,this.V=new k(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new K}function K(){this.i=null,this.g="",this.h=!1}var Y={},Q={};function ee(_,R,D){_.M=1,_.A=nl(ia(R)),_.u=D,_.R=!0,me(_,null)}function me(_,R){_.F=Date.now(),_e(_),_.B=ia(_.A);var D=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),ng(D.i,"t",H),_.C=0,D=_.j.L,_.h=new K,_.g=V1(_.j,D?R:null,!_.u),_.P>0&&(_.O=new Ee(u(_.Y,_,_.g),_.P)),R=_.V,D=_.g,H=_.ba;var fe="readystatechange";Array.isArray(fe)||(fe&&(St[0]=fe.toString()),fe=St);for(let Se=0;Se<fe.length;Se++){const rt=Le(D,fe[Se],H||R.handleEvent,!1,R.h||R);if(!rt)break;R.g[rt.key]=rt}R=_.J?ie(_.J):{},_.u?(_.v||(_.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,R)):(_.v="GET",_.g.ea(_.B,_.v,null,R)),Nr(),cs(_.i,_.v,_.B,_.l,_.S,_.u)}q.prototype.ba=function(_){_=_.target;const R=this.O;R&&mo(_)==3?R.j():this.Y(_)},q.prototype.Y=function(_){try{if(_==this.g)e:{const Yt=mo(this.g),Ir=this.g.ya(),On=this.g.ca();if(!(Yt<3)&&(Yt!=3||this.g&&(this.h.h||this.g.la()||F1(this.g)))){this.K||Yt!=4||Ir==7||(Ir==8||On<=0?Nr(3):Nr(2)),et(this);var R=this.g.ca();this.X=R;var D=Re(this);if(this.o=R==200,Wr(this.i,this.v,this.B,this.l,this.S,Yt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var H,fe=this.g;if((H=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(H)){var Se=H;break t}}Se=null}if(_=Se)or(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,_);else{this.o=!1,this.m=3,yn(12),We(this),ht(this);break e}}if(this.R){_=!0;let Or;for(;!this.K&&this.C<D.length;)if(Or=ye(this,D),Or==Q){Yt==4&&(this.m=4,yn(14),_=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Or==Y){this.m=4,yn(15),or(this.i,this.l,D,"[Invalid Chunk]"),_=!1;break}else or(this.i,this.l,Or,null),He(this,Or);if(ge(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||D.length!=0||this.h.h||(this.m=1,yn(16),_=!1),this.o=this.o&&_,!_)or(this.i,this.l,D,"[Invalid Chunked Response]"),We(this),ht(this);else if(D.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),Fu(rt),rt.P=!0,yn(11))}}else or(this.i,this.l,D,null),He(this,D);Yt==4&&We(this),this.o&&!this.K&&(Yt==4?Rd(this.j,this):(this.o=!1,_e(this)))}else ig(this.g),R==400&&D.indexOf("Unknown SID")>0?(this.m=3,yn(12)):(this.m=0,yn(13)),We(this),ht(this)}}}catch{}};function Re(_){if(!ge(_))return _.g.la();const R=F1(_.g);if(R==="")return"";let D="";const H=R.length,fe=mo(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return We(_),ht(_),"";_.h.i=new a.TextDecoder}for(let Se=0;Se<H;Se++)_.h.h=!0,D+=_.h.i.decode(R[Se],{stream:!(fe&&Se==H-1)});return R.length=0,_.h.g+=D,_.C=0,_.h.g}function ge(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function ye(_,R){var D=_.C,H=R.indexOf(`
`,D);return H==-1?Q:(D=Number(R.substring(D,H)),isNaN(D)?Y:(H+=1,H+D>R.length?Q:(R=R.slice(H,H+D),_.C=H+D,R)))}q.prototype.cancel=function(){this.K=!0,We(this)};function _e(_){_.T=Date.now()+_.H,$e(_,_.H)}function $e(_,R){if(_.D!=null)throw Error("WatchDog timer not null");_.D=Xi(u(_.aa,_),R)}function et(_){_.D&&(a.clearTimeout(_.D),_.D=null)}q.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(Hr(this.i,this.B),this.M!=2&&(Nr(),yn(17)),We(this),this.m=2,ht(this)):$e(this,this.T-_)};function ht(_){_.j.I==0||_.K||Rd(_.j,_)}function We(_){et(_);var R=_.O;R&&typeof R.dispose=="function"&&R.dispose(),_.O=null,Z(_.V),_.g&&(R=_.g,_.g=null,R.abort(),R.dispose())}function He(_,R){try{var D=_.j;if(D.I!=0&&(D.g==_||Ra(D.h,_))){if(!_.L&&Ra(D.h,_)&&D.I==3){try{var H=D.Ba.g.parse(R)}catch{H=null}if(Array.isArray(H)&&H.length==3){var fe=H;if(fe[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<_.F)bd(D),Os(D);else break e;_o(D),yn(18)}}else D.xa=fe[1],0<D.xa-D.K&&fe[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=Xi(u(D.Va,D),6e3));nr(D.h)<=1&&D.ta&&(D.ta=void 0)}else Ds(D,11)}else if((_.L||D.g==_)&&bd(D),!j(R))for(fe=D.Ba.g.parse(R),R=0;R<fe.length;R++){let On=fe[R];const Or=On[0];if(!(Or<=D.K))if(D.K=Or,On=On[1],D.I==2)if(On[0]=="c"){D.M=On[1],D.ba=On[2];const Fs=On[3];Fs!=null&&(D.ka=Fs,D.j.info("VER="+D.ka));const ol=On[4];ol!=null&&(D.za=ol,D.j.info("SVER="+D.za));const xo=On[5];xo!=null&&typeof xo=="number"&&xo>0&&(H=1.5*xo,D.O=H,D.j.info("backChannelRequestTimeoutMs_="+H)),H=D;const vo=_.g;if(vo){const kd=vo.g?vo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kd){var Se=H.h;Se.g||kd.indexOf("spdy")==-1&&kd.indexOf("quic")==-1&&kd.indexOf("h2")==-1||(Se.j=Se.l,Se.g=new Set,Se.h&&(ra(Se,Se.h),Se.h=null))}if(H.G){const og=vo.g?vo.g.getResponseHeader("X-HTTP-Session-Id"):null;og&&(H.wa=og,wn(H.J,H.G,og))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-_.F,D.j.info("Handshake RTT: "+D.T+"ms")),H=D;var rt=_;if(H.na=ag(H,H.L?H.ba:null,H.W),rt.L){Ns(H.h,rt);var Yt=rt,Ir=H.O;Ir&&(Yt.H=Ir),Yt.D&&(et(Yt),_e(Yt)),H.g=rt}else Ci(H);D.i.length>0&&al(D)}else On[0]!="stop"&&On[0]!="close"||Ds(D,7);else D.I==3&&(On[0]=="stop"||On[0]=="close"?On[0]=="stop"?Ds(D,7):Id(D):On[0]!="noop"&&D.l&&D.l.qa(On),D.A=0)}}Nr(4)}catch{}}var Gt=class{constructor(_,R){this.g=_,this.map=R}};function Cn(_){this.l=_||10,a.PerformanceNavigationTiming?(_=a.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ln(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function nr(_){return _.h?1:_.g?_.g.size:0}function Ra(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function ra(_,R){_.g?_.g.add(R):_.h=R}function Ns(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}Cn.prototype.cancel=function(){if(this.i=Tr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Tr(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const D of _.g.values())R=R.concat(D.G);return R}return y(_.i)}var Ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lr(_,R){if(_){_=_.split("&");for(let D=0;D<_.length;D++){const H=_[D].indexOf("=");let fe,Se=null;H>=0?(fe=_[D].substring(0,H),Se=_[D].substring(H+1)):fe=_[D],R(fe,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function lo(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;_ instanceof lo?(this.l=_.l,ku(this,_.j),this.o=_.o,this.g=_.g,co(this,_.u),this.h=_.h,Jl(this,rg(_.i)),this.m=_.m):_&&(R=String(_).match(Ql))?(this.l=!1,ku(this,R[1]||"",!0),this.o=Mu(R[2]||""),this.g=Mu(R[3]||"",!0),co(this,R[4]),this.h=Mu(R[5]||"",!0),Jl(this,R[6]||"",!0),this.m=Mu(R[7]||"")):(this.l=!1,this.i=new un(null,this.l))}lo.prototype.toString=function(){const _=[];var R=this.j;R&&_.push(Nu(R,Z0,!0),":");var D=this.g;return(D||R=="file")&&(_.push("//"),(R=this.o)&&_.push(Nu(R,Z0,!0),"@"),_.push(us(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&_.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&_.push("/"),_.push(Nu(D,D.charAt(0)=="/"?Lu:Q0,!0))),(D=this.i.toString())&&_.push("?",D),(D=this.m)&&_.push("#",Nu(D,J0)),_.join("")},lo.prototype.resolve=function(_){const R=ia(this);let D=!!_.j;D?ku(R,_.j):D=!!_.o,D?R.o=_.o:D=!!_.g,D?R.g=_.g:D=_.u!=null;var H=_.h;if(D)co(R,_.u);else if(D=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var fe=R.h.lastIndexOf("/");fe!=-1&&(H=R.h.slice(0,fe+1)+H)}if(fe=H,fe==".."||fe==".")H="";else if(fe.indexOf("./")!=-1||fe.indexOf("/.")!=-1){H=fe.lastIndexOf("/",0)==0,fe=fe.split("/");const Se=[];for(let rt=0;rt<fe.length;){const Yt=fe[rt++];Yt=="."?H&&rt==fe.length&&Se.push(""):Yt==".."?((Se.length>1||Se.length==1&&Se[0]!="")&&Se.pop(),H&&rt==fe.length&&Se.push("")):(Se.push(Yt),H=!0)}H=Se.join("/")}else H=fe}return D?R.h=H:D=_.i.toString()!=="",D?Jl(R,rg(_.i)):D=!!_.m,D&&(R.m=_.m),R};function ia(_){return new lo(_)}function ku(_,R,D){_.j=D?Mu(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function co(_,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);_.u=R}else _.u=null}function Jl(_,R,D){R instanceof un?(_.i=R,wd(_.i,_.l)):(D||(R=Nu(R,YE)),_.i=new un(R,_.l))}function wn(_,R,D){_.i.set(R,D)}function nl(_){return wn(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Mu(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Nu(_,R,D){return typeof _=="string"?(_=encodeURI(_).replace(R,q0),D&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function q0(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Z0=/[#\/\?@]/g,Q0=/[#\?:]/g,Lu=/[#\?]/g,YE=/[#\?@]/g,J0=/#/g;function un(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function uo(_){_.g||(_.g=new Map,_.h=0,_.i&&lr(_.i,function(R,D){_.add(decodeURIComponent(R.replace(/\+/g," ")),D)}))}n=un.prototype,n.add=function(_,R){uo(this),this.i=null,_=ho(this,_);let D=this.g.get(_);return D||this.g.set(_,D=[]),D.push(R),this.h+=1,this};function eg(_,R){uo(_),R=ho(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function Ed(_,R){return uo(_),R=ho(_,R),_.g.has(R)}n.forEach=function(_,R){uo(this),this.g.forEach(function(D,H){D.forEach(function(fe){_.call(R,fe,H,this)},this)},this)};function tg(_,R){uo(_);let D=[];if(typeof R=="string")Ed(_,R)&&(D=D.concat(_.g.get(ho(_,R))));else for(_=Array.from(_.g.values()),R=0;R<_.length;R++)D=D.concat(_[R]);return D}n.set=function(_,R){return uo(this),this.i=null,_=ho(this,_),Ed(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=tg(this,_),_.length>0?String(_[0]):R):R};function ng(_,R,D){eg(_,R),D.length>0&&(_.i=null,_.g.set(ho(_,R),y(D)),_.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(let H=0;H<R.length;H++){var D=R[H];const fe=us(D);D=tg(this,D);for(let Se=0;Se<D.length;Se++){let rt=fe;D[Se]!==""&&(rt+="="+us(D[Se])),_.push(rt)}}return this.i=_.join("&")};function rg(_){const R=new un;return R.i=_.i,_.g&&(R.g=new Map(_.g),R.h=_.h),R}function ho(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function wd(_,R){R&&!_.j&&(uo(_),_.i=null,_.g.forEach(function(D,H){const fe=H.toLowerCase();H!=fe&&(eg(this,H),ng(this,fe,D))},_)),_.j=R}function fo(_,R){const D=new ar;if(a.Image){const H=new Image;H.onload=h(gi,D,"TestLoadImage: loaded",!0,R,H),H.onerror=h(gi,D,"TestLoadImage: error",!1,R,H),H.onabort=h(gi,D,"TestLoadImage: abort",!1,R,H),H.ontimeout=h(gi,D,"TestLoadImage: timeout",!1,R,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else R(!1)}function go(_,R){const D=new ar,H=new AbortController,fe=setTimeout(()=>{H.abort(),gi(D,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:H.signal}).then(Se=>{clearTimeout(fe),Se.ok?gi(D,"TestPingServer: ok",!0,R):gi(D,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(fe),gi(D,"TestPingServer: error",!1,R)})}function gi(_,R,D,H,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),H(D)}catch{}}function Ou(){this.g=new z}function rl(_){this.i=_.Sb||null,this.h=_.ab||!1}f(rl,ae),rl.prototype.g=function(){return new Ls(this.i,this.h)};function Ls(_,R){$t.call(this),this.H=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ls,$t),n=Ls.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=R,this.readyState=1,Ca(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(R.body=_),(this.H||a).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ec(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Ca(this)),this.g&&(this.readyState=3,Ca(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;L1(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function L1(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?ec(this):Ca(this),this.readyState==3&&L1(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,ec(this))},n.Na=function(_){this.g&&(this.response=_,ec(this))},n.ga=function(){this.g&&ec(this)};function ec(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Ca(_)}n.setRequestHeader=function(_,R){this.A.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var D=R.next();!D.done;)D=D.value,_.push(D[0]+": "+D[1]),D=R.next();return _.join(`\r
`)};function Ca(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function O1(_){let R="";return Ie(_,function(D,H){R+=H,R+=":",R+=D,R+=`\r
`}),R}function Sd(_,R,D){e:{for(H in D){var H=!1;break e}H=!0}H||(D=O1(D),typeof _=="string"?D!=null&&us(D):wn(_,R,D))}function Hn(_){$t.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Hn,$t);var D1=/^https?$/i,XE=["POST","PUT"];n=Hn.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,R,D,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mr.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(Se){tc(this,Se);return}if(_=D||"",D=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var fe in H)D.set(fe,H[fe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const Se of H.keys())D.set(Se,H.get(Se));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(D.keys()).find(Se=>Se.toLowerCase()=="content-type"),fe=a.FormData&&_ instanceof a.FormData,!(Array.prototype.indexOf.call(XE,R,void 0)>=0)||H||fe||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Se,rt]of D)this.g.setRequestHeader(Se,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(Se){tc(this,Se)}};function tc(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.o=5,nc(_),sl(_)}function nc(_){_.A||(_.A=!0,Xt(_,"complete"),Xt(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,Xt(this,"complete"),Xt(this,"abort"),sl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sl(this,!0)),Hn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?il(this):this.Xa())},n.Xa=function(){il(this)};function il(_){if(_.h&&typeof s<"u"){if(_.v&&mo(_)==4)setTimeout(_.Ca.bind(_),0);else if(Xt(_,"readystatechange"),mo(_)==4){_.h=!1;try{const Se=_.ca();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var D;if(!(D=R)){var H;if(H=Se===0){let rt=String(_.D).match(Ql)[1]||null;!rt&&a.self&&a.self.location&&(rt=a.self.location.protocol.slice(0,-1)),H=!D1.test(rt?rt.toLowerCase():"")}D=H}if(D)Xt(_,"complete"),Xt(_,"success");else{_.o=6;try{var fe=mo(_)>2?_.g.statusText:""}catch{fe=""}_.l=fe+" ["+_.ca()+"]",nc(_)}}finally{sl(_)}}}}function sl(_,R){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const D=_.g;_.g=null,R||Xt(_,"ready");try{D.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function mo(_){return _.g?_.g.readyState:0}n.ca=function(){try{return mo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),re(R)}};function F1(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function ig(_){const R={};_=(_.g&&mo(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(j(_[H]))continue;var D=B(_[H]);const fe=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Se=R[fe]||[];R[fe]=Se,Se.push(D)}Te(R,function(H){return H.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function po(_,R,D){return D&&D.internalChannelParams&&D.internalChannelParams[_]||R}function Td(_){this.za=0,this.i=[],this.j=new ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=po("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=po("baseRetryDelayMs",5e3,_),this.Za=po("retryDelaySeedMs",1e4,_),this.Ta=po("forwardChannelMaxRetries",2,_),this.va=po("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new Cn(_&&_.concurrentRequestLimit),this.Ba=new Ou,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Td.prototype,n.ka=8,n.I=1,n.connect=function(_,R,D,H){yn(0),this.W=_,this.H=R||{},D&&H!==void 0&&(this.H.OSID=D,this.H.OAID=H),this.F=this.X,this.J=ag(this,null,this.W),al(this)};function Id(_){if(Ad(_),_.I==3){var R=_.V++,D=ia(_.J);if(wn(D,"SID",_.M),wn(D,"RID",R),wn(D,"TYPE","terminate"),yo(_,D),R=new q(_,_.j,R),R.M=2,R.A=nl(ia(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(R.A.toString(),"")}catch{}!D&&a.Image&&(new Image().src=R.A,D=!0),D||(R.g=V1(R.j,null),R.g.ea(R.A)),R.F=Date.now(),_e(R)}ju(_)}function Os(_){_.g&&(Fu(_),_.g.cancel(),_.g=null)}function Ad(_){Os(_),_.v&&(a.clearTimeout(_.v),_.v=null),bd(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&a.clearTimeout(_.m),_.m=null)}function al(_){if(!Ln(_.h)&&!_.m){_.m=!0;var R=_.Ea;F||C(),W||(F(),W=!0),M.add(R,_),_.D=0}}function j1(_,R){return nr(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=R.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=Xi(u(_.Ea,_,R),Cd(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const fe=new q(this,this.j,_);let Se=this.o;if(this.U&&(Se?(Se=ie(Se),J(Se,this.U)):Se=this.U),this.u!==null||this.R||(fe.J=Se,Se=null),this.S)e:{for(var R=0,D=0;D<this.i.length;D++){t:{var H=this.i[D];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(R+=H,R>4096){R=D;break e}if(R===4096||D===this.i.length-1){R=D+1;break e}}R=1e3}else R=1e3;R=sg(this,fe,R),D=ia(this.J),wn(D,"RID",_),wn(D,"CVER",22),this.G&&wn(D,"X-HTTP-Session-Id",this.G),yo(this,D),Se&&(this.R?R="headers="+us(O1(Se))+"&"+R:this.u&&Sd(D,this.u,Se)),ra(this.h,fe),this.Ra&&wn(D,"TYPE","init"),this.S?(wn(D,"$req",R),wn(D,"SID","null"),fe.U=!0,ee(fe,D,null)):ee(fe,D,R),this.I=2}}else this.I==3&&(_?Du(this,_):this.i.length==0||Ln(this.h)||Du(this))};function Du(_,R){var D;R?D=R.l:D=_.V++;const H=ia(_.J);wn(H,"SID",_.M),wn(H,"RID",D),wn(H,"AID",_.K),yo(_,H),_.u&&_.o&&Sd(H,_.u,_.o),D=new q(_,_.j,D,_.D+1),_.u===null&&(D.J=_.o),R&&(_.i=R.G.concat(_.i)),R=sg(_,D,1e3),D.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),ra(_.h,D),ee(D,H,R)}function yo(_,R){_.H&&Ie(_.H,function(D,H){wn(R,H,D)}),_.l&&Ie({},function(D,H){wn(R,H,D)})}function sg(_,R,D){D=Math.min(_.i.length,D);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var fe=_.i;let Yt=-1;for(;;){const Ir=["count="+D];Yt==-1?D>0?(Yt=fe[0].g,Ir.push("ofs="+Yt)):Yt=0:Ir.push("ofs="+Yt);let On=!0;for(let Or=0;Or<D;Or++){var Se=fe[Or].g;const Fs=fe[Or].map;if(Se-=Yt,Se<0)Yt=Math.max(0,fe[Or].g-100),On=!1;else try{Se="req"+Se+"_"||"";try{var rt=Fs instanceof Map?Fs:Object.entries(Fs);for(const[ol,xo]of rt){let vo=xo;o(xo)&&(vo=jt(xo)),Ir.push(Se+ol+"="+encodeURIComponent(vo))}}catch(ol){throw Ir.push(Se+"type="+encodeURIComponent("_badmap")),ol}}catch{H&&H(Fs)}}if(On){rt=Ir.join("&");break e}}rt=void 0}return _=_.i.splice(0,D),R.G=_,rt}function Ci(_){if(!_.g&&!_.v){_.Y=1;var R=_.Da;F||C(),W||(F(),W=!0),M.add(R,_),_.A=0}}function _o(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=Xi(u(_.Da,_),Cd(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,rc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=Xi(u(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yn(10),Os(this),rc(this))};function Fu(_){_.B!=null&&(a.clearTimeout(_.B),_.B=null)}function rc(_){_.g=new q(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var R=ia(_.na);wn(R,"RID","rpc"),wn(R,"SID",_.M),wn(R,"AID",_.K),wn(R,"CI",_.F?"0":"1"),!_.F&&_.ia&&wn(R,"TO",_.ia),wn(R,"TYPE","xmlhttp"),yo(_,R),_.u&&_.o&&Sd(R,_.u,_.o),_.O&&(_.g.H=_.O);var D=_.g;_=_.ba,D.M=1,D.A=nl(ia(R)),D.u=null,D.R=!0,me(D,_)}n.Va=function(){this.C!=null&&(this.C=null,Os(this),_o(this),yn(19))};function bd(_){_.C!=null&&(a.clearTimeout(_.C),_.C=null)}function Rd(_,R){var D=null;if(_.g==R){bd(_),Fu(_),_.g=null;var H=2}else if(Ra(_.h,R))D=R.G,Ns(_.h,R),H=1;else return;if(_.I!=0){if(R.o)if(H==1){D=R.u?R.u.length:0,R=Date.now()-R.F;var fe=_.D;H=Rt(),Xt(H,new Yi(H,D)),al(_)}else Ci(_);else if(fe=R.m,fe==3||fe==0&&R.X>0||!(H==1&&j1(_,R)||H==2&&_o(_)))switch(D&&D.length>0&&(R=_.h,R.i=R.i.concat(D)),fe){case 1:Ds(_,5);break;case 4:Ds(_,10);break;case 3:Ds(_,6);break;default:Ds(_,2)}}}function Cd(_,R){let D=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(D*=2),D*R}function Ds(_,R){if(_.j.info("Error code "+R),R==2){var D=u(_.bb,_),H=_.Ua;const fe=!H;H=new lo(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ku(H,"https"),nl(H),fe?fo(H.toString(),D):go(H.toString(),D)}else yn(2);_.I=0,_.l&&_.l.pa(R),ju(_),Ad(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),yn(2)):(this.j.info("Failed to ping google.com"),yn(1))};function ju(_){if(_.I=0,_.ja=[],_.l){const R=Tr(_.h);(R.length!=0||_.i.length!=0)&&(v(_.ja,R),v(_.ja,_.i),_.h.i.length=0,y(_.i),_.i.length=0),_.l.oa()}}function ag(_,R,D){var H=D instanceof lo?ia(D):new lo(D);if(H.g!="")R&&(H.g=R+"."+H.g),co(H,H.u);else{var fe=a.location;H=fe.protocol,R=R?R+"."+fe.hostname:fe.hostname,fe=+fe.port;const Se=new lo(null);H&&ku(Se,H),R&&(Se.g=R),fe&&co(Se,fe),D&&(Se.h=D),H=Se}return D=_.G,R=_.wa,D&&R&&wn(H,D,R),wn(H,"VER",_.ka),yo(_,H),H}function V1(_,R,D){if(R&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Aa&&!_.ma?new Hn(new rl({ab:D})):new Hn(_.ma),R.Fa(_.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function G1(){}n=G1.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Pd(){}Pd.prototype.g=function(_,R){return new mi(_,R)};function mi(_,R){$t.call(this),this.g=new Td(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(_?_["X-WebChannel-Client-Profile"]=R.sa:_={"X-WebChannel-Client-Profile":R.sa}),this.g.U=_,(_=R&&R.Qb)&&!j(_)&&(this.g.u=_),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!j(R)&&(this.g.G=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new ic(this)}f(mi,$t),mi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mi.prototype.close=function(){Id(this.g)},mi.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var D={};D.__data__=_,_=D}else this.v&&(D={},D.__data__=jt(_),_=D);R.i.push(new Gt(R.Ya++,_)),R.I==3&&al(R)},mi.prototype.N=function(){this.g.l=null,delete this.j,Id(this.g),delete this.g,mi.Z.N.call(this)};function B1(_){Je.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){e:{for(const D in R){_=D;break e}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}f(B1,Je);function U1(){gt.call(this),this.status=1}f(U1,gt);function ic(_){this.g=_}f(ic,G1),ic.prototype.ra=function(){Xt(this.g,"a")},ic.prototype.qa=function(_){Xt(this.g,new B1(_))},ic.prototype.pa=function(_){Xt(this.g,new U1)},ic.prototype.oa=function(){Xt(this.g,"b")},Pd.prototype.createWebChannel=Pd.prototype.g,mi.prototype.send=mi.prototype.o,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,C6=function(){return new Pd},R6=function(){return Rt()},b6=dt,PT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lr.NO_ERROR=0,Lr.TIMEOUT=8,Lr.HTTP_ERROR=6,C_=Lr,cn.COMPLETE="complete",A6=cn,qe.EventType=we,we.OPEN="a",we.CLOSE="b",we.ERROR="c",we.MESSAGE="d",$t.prototype.listen=$t.prototype.J,em=qe,Hn.prototype.listenOnce=Hn.prototype.K,Hn.prototype.getLastError=Hn.prototype.Ha,Hn.prototype.getLastErrorCode=Hn.prototype.ya,Hn.prototype.getStatus=Hn.prototype.ca,Hn.prototype.getResponseJson=Hn.prototype.La,Hn.prototype.getResponseText=Hn.prototype.la,Hn.prototype.send=Hn.prototype.ea,Hn.prototype.setWithCredentials=Hn.prototype.Fa,I6=Hn}).apply(typeof Xy<"u"?Xy:typeof self<"u"?self:typeof window<"u"?window:{});const TM="@firebase/firestore",IM="4.9.3";let wi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};wi.UNAUTHENTICATED=new wi(null),wi.GOOGLE_CREDENTIALS=new wi("google-credentials-uid"),wi.FIRST_PARTY=new wi("first-party-uid"),wi.MOCK_USER=new wi("mock-user");let F0="12.7.0";const $h=new LA("@firebase/firestore");function Ef(){return $h.logLevel}function Xe(n,...e){if($h.logLevel<=an.DEBUG){const t=e.map(HA);$h.debug(`Firestore (${F0}): ${n}`,...t)}}function rs(n,...e){if($h.logLevel<=an.ERROR){const t=e.map(HA);$h.error(`Firestore (${F0}): ${n}`,...t)}}function Wh(n,...e){if($h.logLevel<=an.WARN){const t=e.map(HA);$h.warn(`Firestore (${F0}): ${n}`,...t)}}function HA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Et(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,P6(n,r,t)}function P6(n,e,t){let r=`FIRESTORE (${F0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw rs(r),new Error(r)}function Ct(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||P6(e,i,r)}function Kt(n,e){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends el{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class k6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Oq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wi.UNAUTHENTICATED)))}shutdown(){}}class Dq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Fq{constructor(e){this.t=e,this.currentUser=wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ct(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Fo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fo,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fo)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct(typeof r.accessToken=="string",31837,{l:r}),new k6(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ct(e===null||typeof e=="string",2055,{h:e}),new wi(e)}}class jq{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=wi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vq{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new jq(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(wi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gq{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ys(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ct(this.o===void 0,3512);const r=s=>{s.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Xe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AM(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AM(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Bq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class KA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Bq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function kT(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return aS(i)===aS(s)?Ht(i,s):aS(i)?1:-1}return Ht(n.length,e.length)}const Uq=55296,zq=57343;function aS(n){const e=n.charCodeAt(0);return e>=Uq&&e<=zq}function d0(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function M6(n){return n+"\0"}const bM="__name__";class bo{constructor(e,t,r){t===void 0?t=0:t>e.length&&Et(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Et(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=bo.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ht(e.length,t.length)}static compareSegments(e,t){const r=bo.isNumericId(e),i=bo.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?bo.extractNumericId(e).compare(bo.extractNumericId(t)):kT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tu.fromString(e.substring(4,e.length-2))}}class An extends bo{construct(e,t,r){return new An(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new st(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new An(t)}static emptyPath(){return new An([])}}const $q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends bo{construct(e,t,r){return new dr(e,t,r)}static isValidIdentifier(e){return $q.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bM}static keyField(){return new dr([bM])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new st(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new st(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new st(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new st(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(An.fromString(e))}static fromName(e){return new ot(An.fromString(e).popFirst(5))}static empty(){return new ot(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&An.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return An.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new An(e.slice()))}}function N6(n,e,t){if(!t)throw new st(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Wq(n,e,t,r){if(e===!0&&r===!0)throw new st(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RM(n){if(!ot.isDocumentKey(n))throw new st(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CM(n){if(ot.isDocumentKey(n))throw new st(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function L6(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Et(12329,{type:typeof n})}function Ia(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new st(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jv(n);throw new st(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Gr(n,e){const t={typeString:n};return e&&(t.value=e),t}function o1(n,e){if(!L6(n))throw new st(Pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new st(Pe.INVALID_ARGUMENT,t);return!0}const PM=-62135596800,kM=1e6;class Vn{static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*kM);return new Vn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new st(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new st(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PM)throw new st(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kM}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(o1(e,Vn._jsonSchema))return new Vn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vn._jsonSchemaVersion="firestore/timestamp/1.0",Vn._jsonSchema={type:Gr("string",Vn._jsonSchemaVersion),seconds:Gr("number"),nanoseconds:Gr("number")};class Pt{static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Vn(0,0))}static max(){return new Pt(new Vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ap=-1;class Ax{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function MT(n){return n.fields.find((e=>e.kind===2))}function sh(n){return n.fields.filter((e=>e.kind!==2))}Ax.UNKNOWN_ID=-1;class P_{constructor(e,t){this.fieldPath=e,this.kind=t}}class op{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new op(0,ea.min())}}function Hq(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(r===1e9?new Vn(t+1,0):new Vn(t,r));return new ea(i,ot.empty(),e)}function O6(n){return new ea(n.readTime,n.key,ap)}class ea{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ea(Pt.min(),ot.empty(),ap)}static max(){return new ea(Pt.max(),ot.empty(),ap)}}function YA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(n.documentKey,e.documentKey),t!==0?t:Ht(n.largestBatchId,e.largestBatchId))}const D6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hd(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==D6)throw n;Xe("LocalStore","Unexpectedly lost primary lease")}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):he.reject(t)}static resolve(e){return new he(((t,r)=>{t(e)}))}static reject(e){return new he(((t,r)=>{r(e)}))}static waitFor(e){return new he(((t,r)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(l=>r(l)))})),a=!0,s===i&&t()}))}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next((i=>i?he.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new he(((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((h=>{a[u]=h,++o,o===s&&r(a)}),(h=>i(h)))}}))}static doWhile(e,t){return new he(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const Us="SimpleDb";class eE{static open(e,t,r,i){try{return new eE(t,e.transaction(i,r))}catch(s){throw new pm(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Fo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new pm(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=XA(r.target.error);this.S.reject(new pm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Xe(Us,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Yq(t)}}class nu{static delete(e){return Xe(Us,"Removing database:",e),hh(PD().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!VD())return!1;if(nu.F())return!0;const e=ei(),t=nu.M(e),r=0<t&&t<10,i=j6(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,nu.M(ei())===12.2&&rs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Xe(Us,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new pm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new st(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new st(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new pm(e,a))},i.onupgradeneeded=s=>{Xe(Us,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{Xe(Us,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=eE.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),he.reject(u)))).toPromise();return l.catch((()=>{})),await o.D,l}catch(o){const l=o,u=l.name!=="FirebaseError"&&a<3;if(Xe(Us,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function j6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Kq{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return hh(this.U.delete())}}class pm extends st{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Tu(n){return n.name==="IndexedDbTransactionError"}class Yq{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Xe(Us,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Xe(Us,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hh(r)}add(e){return Xe(Us,"ADD",this.store.name,e,e),hh(this.store.add(e))}get(e){return hh(this.store.get(e)).next((t=>(t===void 0&&(t=null),Xe(Us,"GET",this.store.name,e,t),t)))}delete(e){return Xe(Us,"DELETE",this.store.name,e),hh(this.store.delete(e))}count(){return Xe(Us,"COUNT",this.store.name),hh(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new he(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((o,l)=>{a.push(l)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new he(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){Xe(Us,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new he(((r,i)=>{t.onerror=s=>{const a=XA(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,t){const r=[];return new he(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new Kq(o),u=t(o.primaryKey,o.value,l);if(u instanceof he){const h=u.catch((f=>(l.done(),he.reject(f))));r.push(h)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}})).next((()=>he.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hh(n){return new he(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=XA(r.target.error);t(i)}}))}let MM=!1;function XA(n){const e=nu.M(ei());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return MM||(MM=!0,setTimeout((()=>{throw r}),0)),r}}return n}const ym="IndexBackfiller";class Xq{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Xe(ym,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Xe(ym,`Documents written: ${t}`)}catch(t){Tu(t)?Xe(ym,"Ignoring IndexedDB error during index backfill: ",t):await hd(t)}await this.re(6e4)}))}}class qq{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return he.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return Xe(ym,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>(Xe(ym,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=O6(s);YA(a,r)>0&&(r=a)})),new ea(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ea{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ea.ce=-1;const bh=-1;function tE(n){return n==null}function lp(n){return n===0&&1/n==-1/0}function Zq(n){return typeof n=="number"&&Number.isInteger(n)&&!lp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const bx="";function zi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NM(e)),e=Qq(n.get(t),e);return NM(e)}function Qq(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case bx:t+="";break;default:t+=s}}return t}function NM(n){return n+bx+""}function No(n){const e=n.length;if(Ct(e>=2,64408,{path:n}),e===2)return Ct(n.charAt(0)===bx&&n.charAt(1)==="",56145,{path:n}),An.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(bx,s);switch((a<0||a>t)&&Et(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Et(61167,{path:n})}s=a+2}return new An(r)}const ah="remoteDocuments",l1="owner",af="owner",cp="mutationQueues",Jq="userId",Ba="mutations",LM="batchId",Eh="userMutationsIndex",OM=["userId","batchId"];function k_(n,e){return[n,zi(e)]}function V6(n,e,t){return[n,zi(e),t]}const eZ={},f0="documentMutations",Rx="remoteDocumentsV14",tZ=["prefixPath","collectionGroup","readTime","documentId"],M_="documentKeyIndex",nZ=["prefixPath","collectionGroup","documentId"],G6="collectionGroupIndex",rZ=["collectionGroup","readTime","prefixPath","documentId"],up="remoteDocumentGlobal",NT="remoteDocumentGlobalKey",g0="targets",B6="queryTargetsIndex",iZ=["canonicalId","targetId"],m0="targetDocuments",sZ=["targetId","path"],qA="documentTargetsIndex",aZ=["path","targetId"],Cx="targetGlobalKey",Rh="targetGlobal",hp="collectionParents",oZ=["collectionId","parent"],p0="clientMetadata",lZ="clientId",nE="bundles",cZ="bundleId",rE="namedQueries",uZ="name",ZA="indexConfiguration",hZ="indexId",LT="collectionGroupIndex",dZ="collectionGroup",_m="indexState",fZ=["indexId","uid"],U6="sequenceNumberIndex",gZ=["uid","sequenceNumber"],xm="indexEntries",mZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],z6="documentKeyIndex",pZ=["indexId","uid","orderedDocumentKey"],iE="documentOverlays",yZ=["userId","collectionPath","documentId"],OT="collectionPathOverlayIndex",_Z=["userId","collectionPath","largestBatchId"],$6="collectionGroupOverlayIndex",xZ=["userId","collectionGroup","largestBatchId"],QA="globals",vZ="name",W6=[cp,Ba,f0,ah,g0,l1,Rh,m0,p0,up,hp,nE,rE],EZ=[...W6,iE],H6=[cp,Ba,f0,Rx,g0,l1,Rh,m0,p0,up,hp,nE,rE,iE],K6=H6,JA=[...K6,ZA,_m,xm],wZ=JA,Y6=[...JA,QA],SZ=Y6;class DT extends F6{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function ti(n,e){const t=Kt(n);return nu.O(t.le,e)}function DM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Iu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function X6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sr{constructor(e,t){this.comparator=e,this.root=t||Si.EMPTY}insert(e,t){return new sr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qy(this.root,e,this.comparator,!1)}getReverseIterator(){return new qy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qy(this.root,e,this.comparator,!0)}}class qy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Si{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Si.RED,this.left=i??Si.EMPTY,this.right=s??Si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Si(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}}Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1;Si.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Si(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FM(this.data.getIterator())}getIteratorFrom(e){return new FM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class FM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function of(n){return n.hasNext()?n.getNext():void 0}class As{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new As([])}unionWith(e){let t=new Un(dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new As(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return d0(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class q6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new q6("Invalid base64 string: "+s):s}})(e);return new Ur(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const TZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gl(n){if(Ct(!!n,39018),typeof n=="string"){let e=0;const t=TZ.exec(n);if(Ct(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bl(n){return typeof n=="string"?Ur.fromBase64String(n):Ur.fromUint8Array(n)}const Z6="server_timestamp",Q6="__type__",J6="__previous_value__",eF="__local_write_time__";function eb(n){return(n?.mapValue?.fields||{})[Q6]?.stringValue===Z6}function sE(n){const e=n.mapValue.fields[J6];return eb(e)?sE(e):e}function dp(n){const e=Gl(n.mapValue.fields[eF].timestampValue);return new Vn(e.seconds,e.nanos)}class IZ{constructor(e,t,r,i,s,a,o,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Px="(default)";class Hh{constructor(e,t){this.projectId=e,this.database=t||Px}static empty(){return new Hh("","")}get isDefaultDatabase(){return this.database===Px}isEqual(e){return e instanceof Hh&&e.projectId===this.projectId&&e.database===this.database}}const tb="__type__",tF="__max__",Wc={mapValue:{fields:{__type__:{stringValue:tF}}}},nb="__vector__",y0="value",N_={nullValue:"NULL_VALUE"};function uu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eb(n)?4:nF(n)?9007199254740991:aE(n)?10:11:Et(28295,{value:n})}function Ko(n,e){if(n===e)return!0;const t=uu(n);if(t!==uu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dp(n).isEqual(dp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Gl(i.timestampValue),o=Gl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Bl(i.bytesValue).isEqual(Bl(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return ir(i.geoPointValue.latitude)===ir(s.geoPointValue.latitude)&&ir(i.geoPointValue.longitude)===ir(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return ir(i.integerValue)===ir(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=ir(i.doubleValue),o=ir(s.doubleValue);return a===o?lp(a)===lp(o):isNaN(a)&&isNaN(o)}return!1})(n,e);case 9:return d0(n.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(DM(a)!==DM(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Ko(a[l],o[l])))return!1;return!0})(n,e);default:return Et(52216,{left:n})}}function fp(n,e){return(n.values||[]).find((t=>Ko(t,e)))!==void 0}function hu(n,e){if(n===e)return 0;const t=uu(n),r=uu(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=ir(s.integerValue||s.doubleValue),l=ir(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(n,e);case 3:return jM(n.timestampValue,e.timestampValue);case 4:return jM(dp(n),dp(e));case 5:return kT(n.stringValue,e.stringValue);case 6:return(function(s,a){const o=Bl(s),l=Bl(a);return o.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const h=Ht(o[u],l[u]);if(h!==0)return h}return Ht(o.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=Ht(ir(s.latitude),ir(a.latitude));return o!==0?o:Ht(ir(s.longitude),ir(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return VM(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const o=s.fields||{},l=a.fields||{},u=o[y0]?.arrayValue,h=l[y0]?.arrayValue,f=Ht(u?.values?.length||0,h?.values?.length||0);return f!==0?f:VM(u,h)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Wc.mapValue&&a===Wc.mapValue)return 0;if(s===Wc.mapValue)return 1;if(a===Wc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const g=kT(l[f],h[f]);if(g!==0)return g;const y=hu(o[l[f]],u[h[f]]);if(y!==0)return y}return Ht(l.length,h.length)})(n.mapValue,e.mapValue);default:throw Et(23264,{he:t})}}function jM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ht(n,e);const t=Gl(n),r=Gl(e),i=Ht(t.seconds,r.seconds);return i!==0?i:Ht(t.nanos,r.nanos)}function VM(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=hu(t[i],r[i]);if(s)return s}return Ht(t.length,r.length)}function _0(n){return FT(n)}function FT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Gl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ot.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=FT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${FT(t.fields[a])}`;return i+"}"})(n.mapValue):Et(61005,{value:n})}function L_(n){switch(uu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sE(n);return e?16+L_(e):16;case 5:return 2*n.stringValue.length;case 6:return Bl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+L_(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Iu(r.fields,((s,a)=>{i+=s.length+L_(a)})),i})(n.mapValue);default:throw Et(13486,{value:n})}}function gp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jT(n){return!!n&&"integerValue"in n}function mp(n){return!!n&&"arrayValue"in n}function GM(n){return!!n&&"nullValue"in n}function BM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function O_(n){return!!n&&"mapValue"in n}function aE(n){return(n?.mapValue?.fields||{})[tb]?.stringValue===nb}function vm(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Iu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=vm(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vm(n.arrayValue.values[t]);return e}return{...n}}function nF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tF}const rF={mapValue:{fields:{[tb]:{stringValue:nb},[y0]:{arrayValue:{}}}}};function AZ(n){return"nullValue"in n?N_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gp(Hh.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?aE(n)?rF:{mapValue:{}}:Et(35942,{value:n})}function bZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gp(Hh.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?rF:"mapValue"in n?aE(n)?{mapValue:{}}:Wc:Et(61959,{value:n})}function UM(n,e){const t=hu(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function zM(n,e){const t=hu(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!O_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vm(t)}setAll(e){let t=dr.emptyPath(),r={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=vm(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());O_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];O_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Iu(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Gi(vm(this.value))}}function iF(n){const e=[];return Iu(n.fields,((t,r)=>{const i=new dr([t]);if(O_(r)){const s=iF(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new As(e)}class Er{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Er(e,0,Pt.min(),Pt.min(),Pt.min(),Gi.empty(),0)}static newFoundDocument(e,t,r,i){return new Er(e,1,t,Pt.min(),r,i,0)}static newNoDocument(e,t){return new Er(e,2,t,Pt.min(),Pt.min(),Gi.empty(),0)}static newUnknownDocument(e,t){return new Er(e,3,t,Pt.min(),Pt.min(),Gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class x0{constructor(e,t){this.position=e,this.inclusive=t}}function $M(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ot.comparator(ot.fromName(a.referenceValue),t.key):r=hu(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function WM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ko(n.position[t],e.position[t]))return!1;return!0}class kx{constructor(e,t="asc"){this.field=e,this.dir=t}}function RZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class sF{}class on extends sF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CZ(e,t,r):t==="array-contains"?new MZ(e,r):t==="in"?new hF(e,r):t==="not-in"?new NZ(e,r):t==="array-contains-any"?new LZ(e,r):new on(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PZ(e,r):new kZ(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(hu(t,this.value)):t!==null&&uu(this.value)===uu(t)&&this.matchesComparison(hu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends sF{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Gn(e,t)}matches(e){return v0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function v0(n){return n.op==="and"}function VT(n){return n.op==="or"}function rb(n){return aF(n)&&v0(n)}function aF(n){for(const e of n.filters)if(e instanceof Gn)return!1;return!0}function GT(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+_0(n.value);if(rb(n))return n.filters.map((e=>GT(e))).join(",");{const e=n.filters.map((t=>GT(t))).join(",");return`${n.op}(${e})`}}function oF(n,e){return n instanceof on?(function(r,i){return i instanceof on&&r.op===i.op&&r.field.isEqual(i.field)&&Ko(r.value,i.value)})(n,e):n instanceof Gn?(function(r,i){return i instanceof Gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,o)=>s&&oF(a,i.filters[o])),!0):!1})(n,e):void Et(19439)}function lF(n,e){const t=n.filters.concat(e);return Gn.create(t,n.op)}function cF(n){return n instanceof on?(function(t){return`${t.field.canonicalString()} ${t.op} ${_0(t.value)}`})(n):n instanceof Gn?(function(t){return t.op.toString()+" {"+t.getFilters().map(cF).join(" ,")+"}"})(n):"Filter"}class CZ extends on{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class PZ extends on{constructor(e,t){super(e,"in",t),this.keys=uF("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kZ extends on{constructor(e,t){super(e,"not-in",t),this.keys=uF("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uF(n,e){return(e.arrayValue?.values||[]).map((t=>ot.fromName(t.referenceValue)))}class MZ extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mp(t)&&fp(t.arrayValue,this.value)}}class hF extends on{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fp(this.value.arrayValue,t)}}class NZ extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(fp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fp(this.value.arrayValue,t)}}class LZ extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>fp(this.value.arrayValue,r)))}}class OZ{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function BT(n,e=null,t=[],r=[],i=null,s=null,a=null){return new OZ(n,e,t,r,i,s,a)}function Kh(n){const e=Kt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>GT(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),tE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>_0(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>_0(r))).join(",")),e.Te=t}return e.Te}function c1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!WM(n.startAt,e.startAt)&&WM(n.endAt,e.endAt)}function Mx(n){return ot.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Nx(n,e){return n.filters.filter((t=>t instanceof on&&t.field.isEqual(e)))}function HM(n,e,t){let r=N_,i=!0;for(const s of Nx(n,e)){let a=N_,o=!0;switch(s.op){case"<":case"<=":a=AZ(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=N_}UM({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];UM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function KM(n,e,t){let r=Wc,i=!0;for(const s of Nx(n,e)){let a=Wc,o=!0;switch(s.op){case">=":case">":a=bZ(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Wc}zM({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];zM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class u1{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DZ(n,e,t,r,i,s,a,o){return new u1(n,e,t,r,i,s,a,o)}function oE(n){return new u1(n)}function YM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dF(n){return n.collectionGroup!==null}function Em(n){const e=Kt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Un(dr.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new kx(s,r))})),t.has(dr.keyField().canonicalString())||e.Ie.push(new kx(dr.keyField(),r))}return e.Ie}function Sa(n){const e=Kt(n);return e.Ee||(e.Ee=FZ(e,Em(n))),e.Ee}function FZ(n,e){if(n.limitType==="F")return BT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new kx(i.field,s)}));const t=n.endAt?new x0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new x0(n.startAt.position,n.startAt.inclusive):null;return BT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function UT(n,e){const t=n.filters.concat([e]);return new u1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zT(n,e,t){return new u1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lE(n,e){return c1(Sa(n),Sa(e))&&n.limitType===e.limitType}function fF(n){return`${Kh(Sa(n))}|lt:${n.limitType}`}function wf(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>cF(i))).join(", ")}]`),tE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>_0(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>_0(i))).join(",")),`Target(${r})`})(Sa(n))}; limitType=${n.limitType})`}function h1(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ot.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Em(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,o,l){const u=$M(a,o,l);return a.inclusive?u<=0:u<0})(r.startAt,Em(r),i)||r.endAt&&!(function(a,o,l){const u=$M(a,o,l);return a.inclusive?u>=0:u>0})(r.endAt,Em(r),i))})(n,e)}function jZ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gF(n){return(e,t)=>{let r=!1;for(const i of Em(n)){const s=VZ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function VZ(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):(function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?hu(l,u):Et(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:n.dir})}}class Kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Iu(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return X6(this.inner)}size(){return this.innerSize}}const GZ=new sr(ot.comparator);function qs(){return GZ}const mF=new sr(ot.comparator);function tm(...n){let e=mF;for(const t of n)e=e.insert(t.key,t);return e}function pF(n){let e=mF;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Lo(){return wm()}function yF(){return wm()}function wm(){return new Kl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const BZ=new sr(ot.comparator),UZ=new Un(ot.comparator);function nn(...n){let e=UZ;for(const t of n)e=e.add(t);return e}const zZ=new Un(Ht);function $Z(){return zZ}function ib(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lp(e)?"-0":e}}function _F(n){return{integerValue:""+n}}function WZ(n,e){return Zq(e)?_F(e):ib(n,e)}class cE{constructor(){this._=void 0}}function HZ(n,e,t){return n instanceof E0?(function(i,s){const a={fields:{[Q6]:{stringValue:Z6},[eF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eb(s)&&(s=sE(s)),s&&(a.fields[J6]=s),{mapValue:a}})(t,e):n instanceof w0?vF(n,e):n instanceof S0?EF(n,e):(function(i,s){const a=xF(i,s),o=XM(a)+XM(i.Ae);return jT(a)&&jT(i.Ae)?_F(o):ib(i.serializer,o)})(n,e)}function KZ(n,e,t){return n instanceof w0?vF(n,e):n instanceof S0?EF(n,e):t}function xF(n,e){return n instanceof pp?(function(r){return jT(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class E0 extends cE{}class w0 extends cE{constructor(e){super(),this.elements=e}}function vF(n,e){const t=wF(e);for(const r of n.elements)t.some((i=>Ko(i,r)))||t.push(r);return{arrayValue:{values:t}}}class S0 extends cE{constructor(e){super(),this.elements=e}}function EF(n,e){let t=wF(e);for(const r of n.elements)t=t.filter((i=>!Ko(i,r)));return{arrayValue:{values:t}}}class pp extends cE{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function XM(n){return ir(n.integerValue||n.doubleValue)}function wF(n){return mp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class SF{constructor(e,t){this.field=e,this.transform=t}}function YZ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof w0&&i instanceof w0||r instanceof S0&&i instanceof S0?d0(r.elements,i.elements,Ko):r instanceof pp&&i instanceof pp?Ko(r.Ae,i.Ae):r instanceof E0&&i instanceof E0})(n.transform,e.transform)}class XZ{constructor(e,t){this.version=e,this.transformResults=t}}class Bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function D_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class uE{}function TF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hE(n.key,Bi.none()):new j0(n.key,n.data,Bi.none());{const t=n.data,r=Gi.empty();let i=new Un(dr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Yl(n.key,r,new As(i.toArray()),Bi.none())}}function qZ(n,e,t){n instanceof j0?(function(i,s,a){const o=i.value.clone(),l=ZM(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Yl?(function(i,s,a){if(!D_(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=ZM(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(IF(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Sm(n,e,t,r){return n instanceof j0?(function(s,a,o,l){if(!D_(s.precondition,a))return o;const u=s.value.clone(),h=QM(s.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Yl?(function(s,a,o,l){if(!D_(s.precondition,a))return o;const u=QM(s.fieldTransforms,l,a),h=a.data;return h.setAll(IF(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((f=>f.field)))})(n,e,t,r):(function(s,a,o){return D_(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(n,e,t)}function ZZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=xF(r.transform,i||null);s!=null&&(t===null&&(t=Gi.empty()),t.set(r.field,s))}return t||null}function qM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&d0(r,i,((s,a)=>YZ(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class j0 extends uE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yl extends uE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IF(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function ZM(n,e,t){const r=new Map;Ct(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,KZ(a,o,t[i]))}return r}function QM(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,HZ(s,a,e))}return r}class hE extends uE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AF extends uE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Sm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yF();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=TF(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Pt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),nn())}isEqual(e){return this.batchId===e.batchId&&d0(this.mutations,e.mutations,((t,r)=>qM(t,r)))&&d0(this.baseMutations,e.baseMutations,((t,r)=>qM(t,r)))}}class ab{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return BZ})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new ab(e,t,r,i)}}class ob{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class QZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var jr,dn;function JZ(n){switch(n){case Pe.OK:return Et(64938);case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0;default:return Et(15467,{code:n})}}function bF(n){if(n===void 0)return rs("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case jr.OK:return Pe.OK;case jr.CANCELLED:return Pe.CANCELLED;case jr.UNKNOWN:return Pe.UNKNOWN;case jr.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case jr.INTERNAL:return Pe.INTERNAL;case jr.UNAVAILABLE:return Pe.UNAVAILABLE;case jr.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case jr.NOT_FOUND:return Pe.NOT_FOUND;case jr.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case jr.ABORTED:return Pe.ABORTED;case jr.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case jr.DATA_LOSS:return Pe.DATA_LOSS;default:return Et(39323,{code:n})}}(dn=jr||(jr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";function eQ(){return new TextEncoder}const tQ=new tu([4294967295,4294967295],0);function JM(n){const e=eQ().encode(n),t=new T6;return t.update(e),new Uint8Array(t.digest())}function eN(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tu([t,r],0),new tu([i,s],0)]}class lb{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nm(`Invalid padding: ${t}`);if(r<0)throw new nm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nm(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new nm(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=tu.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(tu.fromNumber(r)));return i.compare(tQ)===1&&(i=new tu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=JM(e),[r,i]=eN(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new lb(s,i,t);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=JM(e),[r,i]=eN(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,d1.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dE(Pt.min(),i,new sr(Ht),qs(),nn())}}class d1{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new d1(r,t,nn(),nn(),nn())}}class F_{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class RF{constructor(e,t){this.targetId=e,this.Ce=t}}class CF{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tN{constructor(){this.ve=0,this.Fe=nN(),this.Me=Ur.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nn(),t=nn(),r=nn();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Et(38017,{changeType:s})}})),new d1(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=nN()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nQ{constructor(e){this.Ge=e,this.ze=new Map,this.je=qs(),this.Je=Zy(),this.He=Zy(),this.Ye=new sr(Ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Et(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Mx(s))if(r===0){const a=new ot(s.path);this.et(t,a,Er.newNoDocument(a,Pt.min()))}else Ct(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=Bl(r).toUint8Array()}catch(l){if(l instanceof q6)return Wh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new lb(a,i,s)}catch(l){return Wh(l instanceof nm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Mx(o.target)){const l=new ot(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Er.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=nn();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new dE(e,t,this.Ye,this.je,r);return this.je=qs(),this.Je=Zy(),this.He=Zy(),this.Ye=new sr(Ht),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new tN,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Un(Ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Un(Ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tN),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zy(){return new sr(ot.comparator)}function nN(){return new sr(ot.comparator)}const rQ={asc:"ASCENDING",desc:"DESCENDING"},iQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sQ={and:"AND",or:"OR"};class aQ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $T(n,e){return n.useProto3Json||tE(e)?e:{value:e}}function T0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oQ(n,e){return T0(n,e.toTimestamp())}function ss(n){return Ct(!!n,49232),Pt.fromTimestamp((function(t){const r=Gl(t);return new Vn(r.seconds,r.nanos)})(n))}function cb(n,e){return WT(n,e).canonicalString()}function WT(n,e){const t=(function(i){return new An(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kF(n){const e=An.fromString(n);return Ct(GF(e),10190,{key:e.toString()}),e}function Lx(n,e){return cb(n.databaseId,e.path)}function Ch(n,e){const t=kF(e);if(t.get(1)!==n.databaseId.projectId)throw new st(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new st(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(LF(t))}function MF(n,e){return cb(n.databaseId,e)}function NF(n){const e=kF(n);return e.length===4?An.emptyPath():LF(e)}function HT(n){return new An(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LF(n){return Ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function rN(n,e,t){return{name:Lx(n,e),fields:t.value.mapValue.fields}}function lQ(n,e,t){const r=Ch(n,e.name),i=ss(e.updateTime),s=e.createTime?ss(e.createTime):Pt.min(),a=new Gi({mapValue:{fields:e.fields}}),o=Er.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function cQ(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Et(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,h){return u.useProto3Json?(Ct(h===void 0||typeof h=="string",58123),Ur.fromBase64String(h||"")):(Ct(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ur.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(u){const h=u.code===void 0?Pe.UNKNOWN:bF(u.code);return new st(h,u.message||"")})(a);t=new CF(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ch(n,r.document.name),s=ss(r.document.updateTime),a=r.document.createTime?ss(r.document.createTime):Pt.min(),o=new Gi({mapValue:{fields:r.document.fields}}),l=Er.newFoundDocument(i,s,a,o),u=r.targetIds||[],h=r.removedTargetIds||[];t=new F_(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ch(n,r.document),s=r.readTime?ss(r.readTime):Pt.min(),a=Er.newNoDocument(i,s),o=r.removedTargetIds||[];t=new F_([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ch(n,r.document),s=r.removedTargetIds||[];t=new F_([],s,i,null)}else{if(!("filter"in e))return Et(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new QZ(i,s),o=r.targetId;t=new RF(o,a)}}return t}function Ox(n,e){let t;if(e instanceof j0)t={update:rN(n,e.key,e.value)};else if(e instanceof hE)t={delete:Lx(n,e.key)};else if(e instanceof Yl)t={update:rN(n,e.key,e.data),updateMask:mQ(e.fieldMask)};else{if(!(e instanceof AF))return Et(16599,{Vt:e.type});t={verify:Lx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const o=a.transform;if(o instanceof E0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof w0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof S0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof pp)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw Et(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:oQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Et(27497)})(n,e.precondition)),t}function KT(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Bi.updateTime(ss(s.updateTime)):s.exists!==void 0?Bi.exists(s.exists):Bi.none()})(e.currentDocument):Bi.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)Ct(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new E0;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new w0(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new S0(h)}else"increment"in o?l=new pp(a,o.increment):Et(16584,{proto:o});const u=dr.fromServerFormat(o.fieldPath);return new SF(u,l)})(n,i))):[];if(e.update){e.update.name;const i=Ch(n,e.update.name),s=new Gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const u=l.fieldPaths||[];return new As(u.map((h=>dr.fromServerFormat(h))))})(e.updateMask);return new Yl(i,s,a,t,r)}return new j0(i,s,t,r)}if(e.delete){const i=Ch(n,e.delete);return new hE(i,t)}if(e.verify){const i=Ch(n,e.verify);return new AF(i,t)}return Et(1463,{proto:e})}function uQ(n,e){return n&&n.length>0?(Ct(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?ss(i.updateTime):ss(s);return a.isEqual(Pt.min())&&(a=ss(s)),new XZ(a,i.transformResults||[])})(t,e)))):[]}function OF(n,e){return{documents:[MF(n,e.path)]}}function DF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MF(n,i);const s=(function(u){if(u.length!==0)return VF(Gn.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((h=>(function(g){return{field:Sf(g.field),direction:dQ(g.dir)}})(h)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=$T(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function FF(n){let e=NF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(f){const g=jF(f);return g instanceof Gn&&rb(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(f){return f.map((g=>(function(v){return new kx(Tf(v.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(g)))})(t.orderBy));let o=null;t.limit&&(o=(function(f){let g;return g=typeof f=="object"?f.value:f,tE(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(f){const g=!!f.before,y=f.values||[];return new x0(y,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){const g=!f.before,y=f.values||[];return new x0(y,g)})(t.endAt)),DZ(e,i,a,s,o,"F",l,u)}function hQ(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Tf(t.unaryFilter.field);return on.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Tf(t.unaryFilter.field);return on.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Tf(t.unaryFilter.field);return on.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Tf(t.unaryFilter.field);return on.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(n):n.fieldFilter!==void 0?(function(t){return on.create(Tf(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Gn.create(t.compositeFilter.filters.map((r=>jF(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(t.compositeFilter.op))})(n):Et(30097,{filter:n})}function dQ(n){return rQ[n]}function fQ(n){return iQ[n]}function gQ(n){return sQ[n]}function Sf(n){return{fieldPath:n.canonicalString()}}function Tf(n){return dr.fromServerFormat(n.fieldPath)}function VF(n){return n instanceof on?(function(t){if(t.op==="=="){if(BM(t.value))return{unaryFilter:{field:Sf(t.field),op:"IS_NAN"}};if(GM(t.value))return{unaryFilter:{field:Sf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BM(t.value))return{unaryFilter:{field:Sf(t.field),op:"IS_NOT_NAN"}};if(GM(t.value))return{unaryFilter:{field:Sf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sf(t.field),op:fQ(t.op),value:t.value}}})(n):n instanceof Gn?(function(t){const r=t.getFilters().map((i=>VF(i)));return r.length===1?r[0]:{compositeFilter:{op:gQ(t.op),filters:r}}})(n):Et(54877,{filter:n})}function mQ(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function GF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Tl{constructor(e,t,r,i,s=Pt.min(),a=Pt.min(),o=Ur.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BF{constructor(e){this.yt=e}}function pQ(n,e){let t;if(e.document)t=lQ(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ot.fromSegments(e.noDocument.path),i=Xh(e.noDocument.readTime);t=Er.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et(56709);{const r=ot.fromSegments(e.unknownDocument.path),i=Xh(e.unknownDocument.version);t=Er.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new Vn(i[0],i[1]);return Pt.fromTimestamp(s)})(e.readTime)),t}function iN(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:Lx(s,a.key),fields:a.data.value.mapValue.fields,updateTime:T0(s,a.version.toTimestamp()),createTime:T0(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yh(e.version)};else{if(!e.isUnknownDocument())return Et(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Yh(e.version)}}return r}function Dx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xh(n){const e=new Vn(n.seconds,n.nanoseconds);return Pt.fromTimestamp(e)}function dh(n,e){const t=(e.baseMutations||[]).map((s=>KT(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>KT(n.yt,s))),i=Vn.fromMillis(e.localWriteTimeMs);return new sb(e.batchId,i,t,r)}function rm(n){const e=Xh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Xh(n.lastLimboFreeSnapshotVersion):Pt.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return Ct(a===1,1966,{count:a}),Sa(oE(NF(s.documents[0])))})(n.query):(function(s){return Sa(FF(s))})(n.query),new Tl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function UF(n,e){const t=Yh(e.snapshotVersion),r=Yh(e.lastLimboFreeSnapshotVersion);let i;i=Mx(e.target)?OF(n.yt,e.target):DF(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kh(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zF(n){const e=FF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zT(e,e.limit,"L"):e}function oS(n,e){return new ob(e.largestBatchId,KT(n.yt,e.overlayMutation))}function sN(n,e){const t=e.path.lastSegment();return[n,zi(e.path.popLast()),t]}function aN(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Yh(r.readTime),documentKey:zi(r.documentKey.path),largestBatchId:r.largestBatchId}}class yQ{getBundleMetadata(e,t){return oN(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Xh(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return oN(e).put((function(i){return{bundleId:i.id,createTime:Yh(ss(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return lN(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:zF(s.bundledQuery),readTime:Xh(s.readTime)}})(r)}))}saveNamedQuery(e,t){return lN(e).put((function(i){return{name:i.name,readTime:Yh(ss(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function oN(n){return ti(n,nE)}function lN(n){return ti(n,rE)}class fE{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new fE(e,r)}getOverlay(e,t){return Gg(e).get(sN(this.userId,t)).next((r=>r?oS(this.serializer,r):null))}getOverlays(e,t){const r=Lo();return he.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const o=new ob(t,a);i.push(this.St(e,o))})),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(zi(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Gg(e).Z(OT,o))})),he.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Lo(),s=zi(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Gg(e).J(OT,a).next((o=>{for(const l of o){const u=oS(this.serializer,l);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=Lo();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gg(e).ee({index:$6,range:o},((l,u,h)=>{const f=oS(this.serializer,u);s.size()<i||f.largestBatchId===a?(s.set(f.getKey(),f),a=f.largestBatchId):h.done()})).next((()=>s))}St(e,t){return Gg(e).put((function(i,s,a){const[o,l,u]=sN(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ox(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Gg(n){return ti(n,iE)}class _Q{bt(e){return ti(e,QA)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Ur.fromUint8Array(r):Ur.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fh{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),lp(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Gl(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Bl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?nF(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):aE(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Et(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=y0,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ir(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ot.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}fh.Kt=new fh;const lf=255;function xQ(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function cN(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=xQ(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class vQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=cN(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=cN(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(lf),this.sn(255)}_n(){this.an(lf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===lf?(this.sn(lf),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===lf?(this.an(lf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EQ{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class wQ{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Bg{constructor(){this.cn=new vQ,this.ln=new EQ(this.cn),this.hn=new wQ(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class gh{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new gh(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:j_(this.En),directionalValue:j_(this.dn),orderedDocumentKey:j_(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Ac(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=uN(n.En,e.En),t!==0?t:(t=uN(n.dn,e.dn),t!==0?t:ot.comparator(n.In,e.In)))}function uN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function j_(n){return jD()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function hN(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class dN{constructor(e){this.mn=new Un(((t,r)=>dr.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ct(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=MT(e);if(t!==void 0&&!this.wn(t))return!1;const r=sh(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Un(dr.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new P_(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new P_(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new P_(r.field,r.dir==="asc"?0:1)));return new Ax(Ax.UNKNOWN_ID,this.collectionId,t,op.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function $F(n){if(Ct(n instanceof on||n instanceof Gn,20012),n instanceof on){if(n instanceof hF){const t=n.value.arrayValue?.values?.map((r=>on.create(n.field,"==",r)))||[];return Gn.create(t,"or")}return n}const e=n.filters.map((t=>$F(t)));return Gn.create(e,n.op)}function SQ(n){if(n.getFilters().length===0)return[];const e=qT($F(n));return Ct(WF(e),7391),YT(e)||XT(e)?[e]:e.getFilters()}function YT(n){return n instanceof on}function XT(n){return n instanceof Gn&&rb(n)}function WF(n){return YT(n)||XT(n)||(function(t){if(t instanceof Gn&&VT(t)){for(const r of t.getFilters())if(!YT(r)&&!XT(r))return!1;return!0}return!1})(n)}function qT(n){if(Ct(n instanceof on||n instanceof Gn,34018),n instanceof on)return n;if(n.filters.length===1)return qT(n.filters[0]);const e=n.filters.map((r=>qT(r)));let t=Gn.create(e,n.op);return t=Fx(t),WF(t)?t:(Ct(t instanceof Gn,64498),Ct(v0(t),40251),Ct(t.filters.length>1,57927),t.filters.reduce(((r,i)=>ub(r,i))))}function ub(n,e){let t;return Ct(n instanceof on||n instanceof Gn,38388),Ct(e instanceof on||e instanceof Gn,25473),t=n instanceof on?e instanceof on?(function(i,s){return Gn.create([i,s],"and")})(n,e):fN(n,e):e instanceof on?fN(e,n):(function(i,s){if(Ct(i.filters.length>0&&s.filters.length>0,48005),v0(i)&&v0(s))return lF(i,s.getFilters());const a=VT(i)?i:s,o=VT(i)?s:i,l=a.filters.map((u=>ub(u,o)));return Gn.create(l,"or")})(n,e),Fx(t)}function fN(n,e){if(v0(e))return lF(e,n.getFilters());{const t=e.filters.map((r=>ub(n,r)));return Gn.create(t,"or")}}function Fx(n){if(Ct(n instanceof on||n instanceof Gn,11850),n instanceof on)return n;const e=n.getFilters();if(e.length===1)return Fx(e[0]);if(aF(n))return n;const t=e.map((i=>Fx(i))),r=[];return t.forEach((i=>{i instanceof on?r.push(i):i instanceof Gn&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Gn.create(r,n.op)}class TQ{constructor(){this.Cn=new hb}addToCollectionParentIndex(e,t){return this.Cn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(ea.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(ea.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class hb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Un(An.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(An.comparator)).toArray()}}const gN="IndexedDbIndexManager",Qy=new Uint8Array(0);class IQ{constructor(e,t){this.databaseId=t,this.vn=new hb,this.Fn=new Kl((r=>Kh(r)),((r,i)=>c1(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:zi(i)};return mN(e).put(s)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[M6(t),""],!1,!0);return mN(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(No(a.parent))}return r}))}addFieldIndex(e,t){const r=Ug(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=uf(e);return s.next((o=>{a.put(aN(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Ug(e),i=uf(e),s=cf(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ug(e),r=cf(e),i=uf(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return he.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new dN(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=cf(e);let i=!0;const s=new Map;return he.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=nn();const o=[];return he.forEach(s,((l,u)=>{Xe(gN,`Using index ${(function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(l)} to execute ${Kh(t)}`);const h=(function(b,N){const F=MT(N);if(F===void 0)return null;for(const W of Nx(b,F.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null})(u,l),f=(function(b,N){const F=new Map;for(const W of sh(N))for(const M of Nx(b,W.fieldPath))switch(M.op){case"==":case"in":F.set(W.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return F.set(W.fieldPath.canonicalString(),M.value),Array.from(F.values())}return null})(u,l),g=(function(b,N){const F=[];let W=!0;for(const M of sh(N)){const C=M.kind===0?HM(b,M.fieldPath,b.startAt):KM(b,M.fieldPath,b.startAt);F.push(C.value),W&&(W=C.inclusive)}return new x0(F,W)})(u,l),y=(function(b,N){const F=[];let W=!0;for(const M of sh(N)){const C=M.kind===0?KM(b,M.fieldPath,b.endAt):HM(b,M.fieldPath,b.endAt);F.push(C.value),W&&(W=C.inclusive)}return new x0(F,W)})(u,l),v=this.On(l,u,g),x=this.On(l,u,y),w=this.Nn(l,u,f),T=this.Bn(l.indexId,h,v,g.inclusive,x,y.inclusive,w);return he.forEach(T,(I=>r.Y(I,t.limit).next((b=>{b.forEach((N=>{const F=ot.fromSegments(N.documentKey);a.has(F)||(a=a.add(F),o.push(F))}))}))))})).next((()=>o))}return he.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=SQ(Gn.create(e.filters,"and")).map((r=>BT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),h=[];for(let f=0;f<l;++f){const g=t?this.Ln(t[f/u]):Qy,y=this.kn(e,g,r[f%u],i),v=this.qn(e,g,s[f%u],a),x=o.map((w=>this.kn(e,g,w,!0)));h.push(...this.createRange(y,v,x))}return h}kn(e,t,r,i){const s=new gh(e,ot.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new gh(e,ot.empty(),t,r);return i?s.An():s}xn(e,t){const r=new dN(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return he.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(l){let u=new Un(dr.comparator),h=!1;for(const f of l.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:u=u.add(g.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Bg;for(const i of sh(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);fh.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Bg;return fh.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Bg;return fh.Kt.Dt(gp(this.databaseId,t),r.Pn((function(s){const a=sh(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Bg);let s=0;for(const a of sh(e)){const o=r[s++];for(const l of i)if(this.Un(t,a.fieldPath)&&mp(o))i=this.Kn(i,a,o);else{const u=l.Pn(a.kind);fh.Kt.Dt(o,u)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Bg;l.seed(o.un()),fh.Kt.Dt(a,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof on&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Ug(e),i=uf(e);return(t?r.J(LT,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return he.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(h,f){const g=f?new op(f.sequenceNumber,new ea(Xh(f.readTime),new ot(No(f.documentKey)),f.largestBatchId)):op.empty(),y=h.fields.map((([v,x])=>new P_(dr.fromServerFormat(v),x)));return new Ax(h.indexId,h.collectionGroup,y,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ht(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Ug(e),s=uf(e);return this.Gn(e).next((a=>i.J(LT,IDBKeyRange.bound(t,t)).next((o=>he.forEach(o,(l=>s.put(aN(l.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?he.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),he.forEach(o,(l=>this.zn(e,i,l).next((u=>{const h=this.jn(s,l);return u.isEqual(h)?he.resolve():this.Jn(e,s,l,u,h)})))))))}))}Hn(e,t,r,i){return cf(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return cf(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=cf(e);let s=new Un(Ac);return i.ee({index:z6,range:IDBKeyRange.only([r.indexId,this.uid,j_(this.$n(r,t))])},((a,o)=>{s=s.add(new gh(r.indexId,t,hN(o.arrayValue),hN(o.directionalValue)))})).next((()=>s))}jn(e,t){let r=new Un(Ac);const i=this.Qn(t,e);if(i==null)return r;const s=MT(t);if(s!=null){const a=e.data.field(s.fieldPath);if(mp(a))for(const o of a.arrayValue.values||[])r=r.add(new gh(t.indexId,e.key,this.Ln(o),i))}else r=r.add(new gh(t.indexId,e.key,Qy,i));return r}Jn(e,t,r,i,s){Xe(gN,"Updating index entries for document '%s'",t.key);const a=[];return(function(l,u,h,f,g){const y=l.getIterator(),v=u.getIterator();let x=of(y),w=of(v);for(;x||w;){let T=!1,I=!1;if(x&&w){const b=h(x,w);b<0?I=!0:b>0&&(T=!0)}else x!=null?I=!0:T=!0;T?(f(w),w=of(v)):I?(g(x),x=of(y)):(x=of(y),w=of(v))}})(i,s,Ac,(o=>{a.push(this.Hn(e,t,r,o))}),(o=>{a.push(this.Yn(e,t,r,o))})),he.waitFor(a)}Gn(e){let t=1;return uf(e).ee({index:U6,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,o)=>Ac(a,o))).filter(((a,o,l)=>!o||Ac(a,l[o-1])!==0));const i=[];i.push(e);for(const a of r){const o=Ac(a,e),l=Ac(a,t);if(o===0)i[0]=e.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,Qy,ot.empty()),l=i[a+1].Vn(this.uid,Qy,ot.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,t){return Ac(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pN)}getMinOffset(e,t){return he.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Et(44426))))).next(pN)}}function mN(n){return ti(n,hp)}function cf(n){return ti(n,xm)}function Ug(n){return ti(n,ZA)}function uf(n){return ti(n,_m)}function pN(n){Ct(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;YA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ea(e.readTime,e.documentKey,t)}const yN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HF=41943040;class ji{static withCacheSize(e){return new ji(e,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function KF(n,e,t){const r=n.store(Ba),i=n.store(f0),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.ee({range:a},((h,f,g)=>(o++,g.delete())));s.push(l.next((()=>{Ct(o===1,47070,{batchId:t.batchId})})));const u=[];for(const h of t.mutations){const f=V6(e,h.key.path,t.batchId);s.push(i.delete(f)),u.push(h.key)}return he.waitFor(s).next((()=>u))}function jx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Et(14731);e=n.noDocument}return JSON.stringify(e).length}ji.DEFAULT_COLLECTION_PERCENTILE=10,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ji.DEFAULT=new ji(HF,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ji.DISABLED=new ji(-1,0,0);class gE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Ct(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new gE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bc(e).ee({index:Eh,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=If(e),a=bc(e);return a.add({}).next((o=>{Ct(typeof o=="number",49019);const l=new sb(o,t,r,i),u=(function(y,v,x){const w=x.baseMutations.map((I=>Ox(y.yt,I))),T=x.mutations.map((I=>Ox(y.yt,I)));return{userId:v,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:T}})(this.serializer,this.userId,l),h=[];let f=new Un(((g,y)=>Ht(g.canonicalString(),y.canonicalString())));for(const g of i){const y=V6(this.userId,g.key.path,o);f=f.add(g.key.path.popLast()),h.push(a.put(u)),h.push(s.put(y,eZ))}return f.forEach((g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=l.keys()})),he.waitFor(h).next((()=>l))}))}lookupMutationBatch(e,t){return bc(e).get(t).next((r=>r?(Ct(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),dh(this.serializer,r)):null))}er(e,t){return this.Xn[t]?he.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return bc(e).ee({index:Eh,range:i},((a,o,l)=>{o.userId===this.userId&&(Ct(o.batchId>=r,47524,{tr:r}),s=dh(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=bh;return bc(e).ee({index:Eh,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,bh],[this.userId,Number.POSITIVE_INFINITY]);return bc(e).J(Eh,t).next((r=>r.map((i=>dh(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=k_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return If(e).ee({range:i},((a,o,l)=>{const[u,h,f]=a,g=No(h);if(u===this.userId&&t.path.isEqual(g))return bc(e).get(f).next((y=>{if(!y)throw Et(61480,{nr:a,batchId:f});Ct(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:f}),s.push(dh(this.serializer,y))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(Ht);const i=[];return t.forEach((s=>{const a=k_(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=If(e).ee({range:o},((u,h,f)=>{const[g,y,v]=u,x=No(y);g===this.userId&&s.path.isEqual(x)?r=r.add(v):f.done()}));i.push(l)})),he.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=k_(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Un(Ht);return If(e).ee({range:a},((l,u,h)=>{const[f,g,y]=l,v=No(g);f===this.userId&&r.isPrefixOf(v)?v.length===i&&(o=o.add(y)):h.done()})).next((()=>this.rr(e,o)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(bc(e).get(s).next((a=>{if(a===null)throw Et(35274,{batchId:s});Ct(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(dh(this.serializer,a))})))})),he.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return KF(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),he.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return If(e).ee({range:r},((s,a,o)=>{if(s[0]===this.userId){const l=No(s[1]);i.push(l)}else o.done()})).next((()=>{Ct(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return YF(e,this.userId,t)}_r(e){return XF(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:bh,lastStreamToken:""}))}}function YF(n,e,t){const r=k_(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return If(n).ee({range:s,X:!0},((o,l,u)=>{const[h,f,g]=o;h===e&&f===i&&(a=!0),u.done()})).next((()=>a))}function bc(n){return ti(n,Ba)}function If(n){return ti(n,f0)}function XF(n){return ti(n,cp)}class qh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qh(0)}static cr(){return new qh(-1)}}class AQ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new qh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Pt.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>hf(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ct(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return hf(e).ee(((a,o)=>{const l=rm(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>he.waitFor(s))).next((()=>i))}forEachTarget(e,t){return hf(e).ee(((r,i)=>{const s=rm(i);t(s)}))}lr(e){return _N(e).get(Cx).next((t=>(Ct(t!==null,2888),t)))}hr(e,t){return _N(e).put(Cx,t)}Pr(e,t){return hf(e).put(UF(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Kh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return hf(e).ee({range:i,index:B6},((a,o,l)=>{const u=rm(o);c1(t,u.target)&&(s=u,l.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=jc(e);return t.forEach((a=>{const o=zi(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))})),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=jc(e);return he.forEach(t,(s=>{const a=zi(s.path);return he.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=jc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=jc(e);let s=nn();return i.ee({range:r,X:!0},((a,o,l)=>{const u=No(a[1]),h=new ot(u);s=s.add(h)})).next((()=>s))}containsKey(e,t){const r=zi(t.path),i=IDBKeyRange.bound([r],[M6(r)],!1,!0);let s=0;return jc(e).ee({index:qA,X:!0,range:i},(([a,o],l,u)=>{a!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return hf(e).get(t).next((r=>r?rm(r):null))}}function hf(n){return ti(n,g0)}function _N(n){return ti(n,Rh)}function jc(n){return ti(n,m0)}const xN="LruGarbageCollector",bQ=1048576;function vN([n,e],[t,r]){const i=Ht(n,t);return i===0?Ht(e,r):i}class RQ{constructor(e){this.Ir=e,this.buffer=new Un(vN),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Xe(xN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Tu(t)?Xe(xN,"Ignoring IndexedDB error during garbage collection: ",t):await hd(t)}await this.Vr(3e5)}))}}class CQ{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return he.resolve(Ea.ce);const r=new RQ(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(yN)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yN):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,o,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i)))).next((f=>(r=f,o=Date.now(),this.removeTargets(e,r,t)))).next((f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),Ef()<=an.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f}))))}}function ZF(n,e){return new CQ(n,e)}class PQ{constructor(e,t){this.db=e,this.garbageCollector=ZF(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return Jy(e,r)}removeReference(e,t,r){return Jy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Jy(e,t)}br(e,t){return(function(i,s){let a=!1;return XF(i).te((o=>YF(i,o,s).next((l=>(l&&(a=!0),he.resolve(!l)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const l=this.br(e,a).next((u=>{if(!u)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Pt.min()),jc(e).delete((function(f){return[0,zi(f.path)]})(a)))))}));i.push(l)}})).next((()=>he.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Jy(e,t)}Sr(e,t){const r=jc(e);let i,s=Ea.ce;return r.ee({index:qA},(([a,o],{path:l,sequenceNumber:u})=>{a===0?(s!==Ea.ce&&t(new ot(No(i)),s),s=u,i=l):s=Ea.ce})).next((()=>{s!==Ea.ce&&t(new ot(No(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jy(n,e){return jc(n).put((function(r,i){return{targetId:0,path:zi(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class QF{constructor(){this.changes=new Kl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ju(e).put(r)}removeEntry(e,t,r){return Ju(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Dx(a),o[o.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Er.newInvalidDocument(t);return Ju(e).ee({index:M_,range:IDBKeyRange.only(zg(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Er.newInvalidDocument(t)};return Ju(e).ee({index:M_,range:IDBKeyRange.only(zg(t))},((i,s)=>{r={document:this.Cr(t,s),size:jx(s)}})).next((()=>r))}getEntries(e,t){let r=qs();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=qs(),i=new sr(ot.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,jx(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return he.resolve();let i=new Un(SN);t.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(zg(i.first()),zg(i.last())),a=i.getIterator();let o=a.getNext();return Ju(e).ee({index:M_,range:s},((l,u,h)=>{const f=ot.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&SN(o,f)<0;)r(o,null),o=a.getNext();o&&o.isEqual(f)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?h.j(zg(o)):h.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Dx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ju(e).J(IDBKeyRange.bound(o,l,!0)).next((u=>{s?.incrementDocumentReadCount(u.length);let h=qs();for(const f of u){const g=this.Cr(ot.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(h1(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h}))}getAllFromCollectionGroup(e,t,r,i){let s=qs();const a=wN(t,r),o=wN(t,ea.max());return Ju(e).ee({index:G6,range:IDBKeyRange.bound(a,o,!0)},((l,u,h)=>{const f=this.Cr(ot.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()})).next((()=>s))}newChangeBuffer(e){return new MQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return EN(e).get(NT).next((t=>(Ct(!!t,20021),t)))}Dr(e,t){return EN(e).put(NT,t)}Cr(e,t){if(t){const r=pQ(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Pt.min())))return r}return Er.newInvalidDocument(e)}}function JF(n){return new kQ(n)}class MQ extends QF{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Kl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new Un(((s,a)=>Ht(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=iN(this.Nr.serializer,a);i=i.add(s.path.popLast());const u=jx(l);r+=u-o.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=iN(this.Nr.serializer,a.convertToNoDocument(Pt.min()));t.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function EN(n){return ti(n,up)}function Ju(n){return ti(n,Rx)}function zg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wN(n,e){const t=e.documentKey.path.toArray();return[n,Dx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SN(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ht(t[s],r[s]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}class NQ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class e8{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Sm(r.mutation,i,As.empty(),Vn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,nn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=nn()){const i=Lo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=tm();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=Lo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,nn())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,r,i){let s=qs();const a=wm(),o=(function(){return wm()})();return t.forEach(((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Yl)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Sm(h.mutation,u,h.mutation.getFieldMask(),Vn.now())):a.set(u.key,As.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,h)=>a.set(u,h))),t.forEach(((u,h)=>o.set(u,new NQ(h,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=wm();let i=new sr(((a,o)=>a-o)),s=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||As.empty();h=o.applyToLocalView(u,h),r.set(l,h);const f=(i.get(o.batchId)||nn()).add(l);i=i.insert(o.batchId,f)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,h=l.value,f=yF();h.forEach((g=>{if(!s.has(g)){const y=TF(t.get(g),r.get(g));y!==null&&f.set(g,y),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return he.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ot.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):he.resolve(Lo());let o=ap,l=s;return a.next((u=>he.forEach(u,((h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(h)?he.resolve():this.remoteDocumentCache.getEntry(e,h).next((g=>{l=l.insert(h,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,nn()))).next((h=>({batchId:o,changes:pF(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next((r=>{let i=tm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=tm();return this.indexManager.getCollectionParents(e,s).next((o=>he.forEach(o,(l=>{const u=(function(f,g){return new u1(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((h=>{h.forEach(((f,g)=>{a=a.insert(f,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,Er.newInvalidDocument(h)))}));let o=tm();return a.forEach(((l,u)=>{const h=s.get(l);h!==void 0&&Sm(h.mutation,u,As.empty(),Vn.now()),h1(t,u)&&(o=o.insert(l,u))})),o}))}}class LQ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return he.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ss(i.createTime)}})(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:zF(i.bundledQuery),readTime:ss(i.readTime)}})(t)),he.resolve()}}class OQ{constructor(){this.overlays=new sr(ot.comparator),this.qr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Lo();return he.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=Lo(),s=t.length+1,a=new ot(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new sr(((u,h)=>u-h));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Lo(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=Lo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>o.set(u,h))),!(o.size()>=i)););return he.resolve(o)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ob(t,r));let s=this.qr.get(t);s===void 0&&(s=nn(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class DQ{constructor(){this.sessionToken=Ur.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}class db{constructor(){this.Qr=new Un(ai.$r),this.Ur=new Un(ai.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ai(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ai(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ot(new An([])),r=new ai(t,e),i=new ai(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ot(new An([])),r=new ai(t,e),i=new ai(t,e+1);let s=nn();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new ai(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ai{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ot.comparator(e.key,t.key)||Ht(e.Yr,t.Yr)}static Kr(e,t){return Ht(e.Yr,t.Yr)||ot.comparator(e.key,t.key)}}class FQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Un(ai.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new sb(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new ai(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return he.resolve(a)}lookupMutationBatch(e,t){return he.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?bh:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ai(t,0),i=new ai(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(Ht);return t.forEach((i=>{const s=new ai(i,0),a=new ai(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{r=r.add(o.Yr)}))})),he.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ot.isDocumentKey(s)||(s=s.child(""));const a=new ai(new ot(s),0);let o=new Un(Ht);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)}),a),he.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ct(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return he.forEach(t.mutations,(i=>{const s=new ai(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new ai(t,0),i=this.Zr.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class jQ{constructor(e){this.ri=e,this.docs=(function(){return new sr(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Er.newInvalidDocument(t))}getEntries(e,t){let r=qs();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Er.newInvalidDocument(i))})),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=qs();const a=t.path,o=new ot(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||YA(O6(h),r)<=0||(i.has(h.key)||h1(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Et(9500)}ii(e,t){return he.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new VQ(this)}getSize(e){return he.resolve(this.size)}}class VQ extends QF{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),he.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class GQ{constructor(e){this.persistence=e,this.si=new Kl((t=>Kh(t)),c1),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.oi=0,this._i=new db,this.targetCount=0,this.ai=qh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),he.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Pr(t),he.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),he.waitFor(s).next((()=>i))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),he.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this._i.containsKey(t))}}class fb{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ea(0),this.li=!1,this.li=!0,this.hi=new DQ,this.referenceDelegate=e(this),this.Pi=new GQ(this),this.indexManager=new TQ,this.remoteDocumentCache=(function(i){return new jQ(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new BF(t),this.Ii=new LQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new FQ(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Xe("MemoryPersistence","Starting transaction:",e);const i=new BQ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return he.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class BQ extends F6{constructor(e){super(),this.currentSequenceNumber=e}}class mE{constructor(e){this.persistence=e,this.Ri=new db,this.Vi=null}static mi(e){return new mE(e)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(r=>{const i=ot.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Pt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return he.or([()=>he.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Vx{constructor(e,t){this.persistence=e,this.pi=new Kl((r=>zi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=ZF(this,t)}static mi(e,t){return new Vx(e,t)}Ei(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return he.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?he.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(r++,s.removeEntry(a,Pt.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=L_(e.data.value)),t}br(e,t,r){return he.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return he.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class UQ{constructor(e){this.serializer=e}k(e,t,r,i){const s=new eE("createOrUpgrade",t);r<1&&i>=1&&((function(l){l.createObjectStore(l1)})(e),(function(l){l.createObjectStore(cp,{keyPath:Jq}),l.createObjectStore(Ba,{keyPath:LM,autoIncrement:!0}).createIndex(Eh,OM,{unique:!0}),l.createObjectStore(f0)})(e),TN(e),(function(l){l.createObjectStore(ah)})(e));let a=he.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(m0),l.deleteObjectStore(g0),l.deleteObjectStore(Rh)})(e),TN(e)),a=a.next((()=>(function(l){const u=l.store(Rh),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return u.put(Cx,h)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(l,u){return u.store(Ba).J().next((f=>{l.deleteObjectStore(Ba),l.createObjectStore(Ba,{keyPath:LM,autoIncrement:!0}).createIndex(Eh,OM,{unique:!0});const g=u.store(Ba),y=f.map((v=>g.put(v)));return he.waitFor(y)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore(p0,{keyPath:lZ})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore(up)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore(nE,{keyPath:cZ})})(e),(function(l){l.createObjectStore(rE,{keyPath:uZ})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(l){const u=l.createObjectStore(iE,{keyPath:yZ});u.createIndex(OT,_Z,{unique:!1}),u.createIndex($6,xZ,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(l){const u=l.createObjectStore(Rx,{keyPath:tZ});u.createIndex(M_,nZ),u.createIndex(G6,rZ)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(ah)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore(ZA,{keyPath:hZ,autoIncrement:!0}).createIndex(LT,dZ,{unique:!1}),l.createObjectStore(_m,{keyPath:fZ}).createIndex(U6,gZ,{unique:!1}),l.createObjectStore(xm,{keyPath:mZ}).createIndex(z6,pZ,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(_m).clear()})).next((()=>{t.objectStore(xm).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore(QA,{keyPath:vZ})})(e)}))),r<18&&i>=18&&jD()&&(a=a.next((()=>{t.objectStore(_m).clear()})).next((()=>{t.objectStore(xm).clear()}))),a}wi(e){let t=0;return e.store(ah).ee(((r,i)=>{t+=jx(i)})).next((()=>{const r={byteSize:t};return e.store(up).put(NT,r)}))}yi(e){const t=e.store(cp),r=e.store(Ba);return t.J().next((i=>he.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,bh],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Eh,a).next((o=>he.forEach(o,(l=>{Ct(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=dh(this.serializer,l);return KF(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(m0),r=e.store(ah);return e.store(Rh).get(Cx).next((i=>{const s=[];return r.ee(((a,o)=>{const l=new An(a),u=(function(f){return[0,zi(f)]})(l);s.push(t.get(u).next((h=>h?he.resolve():(f=>t.put({targetId:0,path:zi(f),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>he.waitFor(s)))}))}bi(e,t){e.createObjectStore(hp,{keyPath:oZ});const r=t.store(hp),i=new hb,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:zi(l)})}};return t.store(ah).ee({X:!0},((a,o)=>{const l=new An(a);return s(l.popLast())})).next((()=>t.store(f0).ee({X:!0},(([a,o,l],u)=>{const h=No(o);return s(h.popLast())}))))}Di(e){const t=e.store(g0);return t.ee(((r,i)=>{const s=rm(i),a=UF(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(ah),i=[];return r.ee(((s,a)=>{const o=t.store(Rx),l=(function(f){return f.document?new ot(An.fromString(f.document.name).popFirst(5)):f.noDocument?ot.fromSegments(f.noDocument.path):f.unknownDocument?ot.fromSegments(f.unknownDocument.path):Et(36783)})(a).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))})).next((()=>he.waitFor(i)))}Fi(e,t){const r=t.store(Ba),i=JF(this.serializer),s=new fb(mE.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((l=>{let u=o.get(l.userId)??nn();dh(this.serializer,l).keys().forEach((h=>u=u.add(h))),o.set(l.userId,u)})),he.forEach(o,((l,u)=>{const h=new wi(u),f=fE.wt(this.serializer,h),g=s.getIndexManager(h),y=gE.wt(h,this.serializer,g,s.referenceDelegate);return new e8(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new DT(t,Ea.ce),l).next()}))}))}}function TN(n){n.createObjectStore(m0,{keyPath:sZ}).createIndex(qA,aZ,{unique:!0}),n.createObjectStore(g0,{keyPath:"targetId"}).createIndex(B6,iZ,{unique:!0}),n.createObjectStore(Rh)}const Rc="IndexedDbPersistence",lS=18e5,cS=5e3,uS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zQ="main";class gb{constructor(e,t,r,i,s,a,o,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!gb.v())throw new st(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PQ(this,i),this.$i=t+zQ,this.serializer=new BF(l),this.Ui=new nu(this.$i,this.Ni,new UQ(this.serializer)),this.hi=new _Q,this.Pi=new AQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=JF(this.serializer),this.Ii=new yQ,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&rs(Rc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(Pe.FAILED_PRECONDITION,uS);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ea(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>e_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Tu(e))return Xe(Rc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe(Rc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return $g(e).get(af).next((t=>he.resolve(this.es(t))))}ts(e){return e_(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,lS)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=ti(t,p0);return r.J().next((i=>{const s=this.ss(i,lS),a=i.filter((o=>s.indexOf(o)===-1));return he.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?he.resolve(!0):$g(e).get(af).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,cS)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new st(Pe.FAILED_PRECONDITION,uS);return!1}}return!(!this.networkEnabled||!this.inForeground)||e_(e).J().next((r=>this.ss(r,cS).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Xe(Rc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[l1,p0],(e=>{const t=new DT(e,Ea.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>e_(e).J().next((t=>this.ss(t,lS).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return gE.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IQ(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return fE.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Xe(Rc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?SZ:l===17?Y6:l===16?wZ:l===15?JA:l===14?K6:l===13?H6:l===12?EZ:l===11?W6:void Et(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new DT(o,this.ci?this.ci.next():Ea.ce),t==="readwrite-primary"?this.Hi(a).next((l=>!!l||this.Yi(a))).next((l=>{if(!l)throw rs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new st(Pe.FAILED_PRECONDITION,D6);return r(a)})).next((l=>this.Xi(a).next((()=>l)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return $g(e).get(af).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,cS)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new st(Pe.FAILED_PRECONDITION,uS)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $g(e).put(af,t)}static v(){return nu.v()}Zi(e){const t=$g(e);return t.get(af).next((r=>this.es(r)?(Xe(Rc,"Releasing primary lease."),t.delete(af)):he.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(rs(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;FD()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Xe(Rc,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return rs(Rc,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){rs("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $g(n){return ti(n,l1)}function e_(n){return ti(n,p0)}function $Q(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=nn(),i=nn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mb(e,t.fromCache,r,i)}}class WQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class t8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return FD()?8:j6(ei())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new WQ;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ef()<=an.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",wf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(Ef()<=an.DEBUG&&Xe("QueryEngine","Query:",wf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ef()<=an.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",wf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sa(t))):he.resolve())}ys(e,t){if(YM(t))return he.resolve(null);let r=Sa(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=zT(t,null,"F"),r=Sa(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=nn(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,zT(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,i){return YM(t)||i.isEqual(Pt.min())?he.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?he.resolve(null):(Ef()<=an.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wf(t)),this.vs(e,a,t,Hq(i,ap)).next((o=>o)))}))}Ds(e,t){let r=new Un(gF(e));return t.forEach(((i,s)=>{h1(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Ef()<=an.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",wf(t)),this.ps.getDocumentsMatchingQuery(e,t,ea.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const pb="LocalStore",HQ=3e8;class KQ{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new sr(Ht),this.xs=new Kl((s=>Kh(s)),c1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function n8(n,e,t,r){return new KQ(n,e,t,r)}async function r8(n,e){const t=Kt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],o=[];let l=nn();for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function YQ(n,e){const t=Kt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,l,u,h){const f=u.batch,g=f.keys();let y=he.resolve();return g.forEach((v=>{y=y.next((()=>h.getEntry(l,v))).next((x=>{const w=u.docVersions.get(v);Ct(w!==null,48541),x.version.compareTo(w)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))}))})),y.next((()=>o.mutationQueue.removeMutationBatch(l,f)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let l=nn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function i8(n){const e=Kt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function XQ(n,e){const t=Kt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((h,f)=>{const g=i.get(f);if(!g)return;o.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(s,h.addedDocuments,f))));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ur.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),(function(x,w,T){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=HQ?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(g,y,h)&&o.push(t.Pi.updateTargetData(s,y))}));let l=qs(),u=nn();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))})),o.push(qQ(s,a,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(Pt.min())){const h=t.Pi.getLastRemoteSnapshotVersion(s).next((f=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));o.push(h)}return he.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Ms=i,s)))}function qQ(n,e,t){let r=nn(),i=nn();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=qs();return t.forEach(((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Pt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Xe(pb,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)})),{ks:a,qs:i}}))}function ZQ(n,e){const t=Kt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bh),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function QQ(n,e){const t=Kt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,he.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new Tl(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function ZT(n,e,t){const r=Kt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Tu(a))throw a;Xe(pb,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function IN(n,e,t){const r=Kt(n);let i=Pt.min(),s=nn();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,u,h){const f=Kt(l),g=f.xs.get(h);return g!==void 0?he.resolve(f.Ms.get(g)):f.Pi.getTargetData(u,h)})(r,a,Sa(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Pt.min(),t?s:nn()))).next((o=>(JQ(r,jZ(e),o),{documents:o,Qs:s})))))}function JQ(n,e,t){let r=n.Os.get(e)||Pt.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class AN{constructor(){this.activeTargetIds=$Z()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s8{constructor(){this.Mo=new AN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new AN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eJ{Oo(e){}shutdown(){}}const bN="ConnectivityMonitor";class RN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Xe(bN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Xe(bN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let t_=null;function QT(){return t_===null?t_=(function(){return 268435456+Math.round(2147483648*Math.random())})():t_++,"0x"+t_.toString(16)}const hS="RestConnection",tJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nJ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Px?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=QT(),o=this.zo(e,t.toUriEncodedString());Xe(hS,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),h=cd(u);return this.Jo(e,o,l,r,h).then((f=>(Xe(hS,`Received RPC '${e}' ${a}: `,f),f)),(f=>{throw Wh(hS,`RPC '${e}' ${a} failed with error: `,f,"url: ",o,"request:",r),f}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+F0})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=tJ[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class rJ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Li="WebChannelConnection";class iJ extends nJ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=QT();return new Promise(((o,l)=>{const u=new I6;u.setWithCredentials(!0),u.listenOnce(A6.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case C_.NO_ERROR:const f=u.getResponseJson();Xe(Li,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case C_.TIMEOUT:Xe(Li,`RPC '${e}' ${a} timed out`),l(new st(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case C_.HTTP_ERROR:const g=u.getStatus();if(Xe(Li,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y?.error;if(v&&v.status&&v.message){const x=(function(T){const I=T.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(I)>=0?I:Pe.UNKNOWN})(v.status);l(new st(x,v.message))}else l(new st(Pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new st(Pe.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Xe(Li,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Xe(Li,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",h,r,15)}))}T_(e,t,r){const i=QT(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=C6(),o=R6(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Xe(Li,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=a.createWebChannel(h,l);this.I_(f);let g=!1,y=!1;const v=new rJ({Yo:w=>{y?Xe(Li,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(Xe(Li,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),Xe(Li,`RPC '${e}' stream ${i} sending:`,w),f.send(w))},Zo:()=>f.close()}),x=(w,T,I)=>{w.listen(T,(b=>{try{I(b)}catch(N){setTimeout((()=>{throw N}),0)}}))};return x(f,em.EventType.OPEN,(()=>{y||(Xe(Li,`RPC '${e}' stream ${i} transport opened.`),v.o_())})),x(f,em.EventType.CLOSE,(()=>{y||(y=!0,Xe(Li,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(f))})),x(f,em.EventType.ERROR,(w=>{y||(y=!0,Wh(Li,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),v.a_(new st(Pe.UNAVAILABLE,"The operation could not be completed")))})),x(f,em.EventType.MESSAGE,(w=>{if(!y){const T=w.data[0];Ct(!!T,16349);const I=T,b=I?.error||I[0]?.error;if(b){Xe(Li,`RPC '${e}' stream ${i} received error:`,b);const N=b.status;let F=(function(C){const P=jr[C];if(P!==void 0)return bF(P)})(N),W=b.message;F===void 0&&(F=Pe.INTERNAL,W="Unknown error status: "+N+" with message "+b.message),y=!0,v.a_(new st(F,W)),f.close()}else Xe(Li,`RPC '${e}' stream ${i} received:`,T),v.u_(T)}})),x(o,b6.STAT_EVENT,(w=>{w.stat===PT.PROXY?Xe(Li,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===PT.NOPROXY&&Xe(Li,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function sJ(){return typeof window<"u"?window:null}function V_(){return typeof document<"u"?document:null}function pE(n){return new aQ(n,!0)}class a8{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const CN="PersistentStream";class o8{constructor(e,t,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a8(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new st(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Xe(CN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Xe(CN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aJ extends o8{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=cQ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Pt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?ss(a.readTime):Pt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=HT(this.serializer),t.addTarget=(function(s,a){let o;const l=a.target;if(o=Mx(l)?{documents:OF(s,l)}:{query:DF(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=PF(s,a.resumeToken);const u=$T(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Pt.min())>0){o.readTime=T0(s,a.snapshotVersion.toTimestamp());const u=$T(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=hQ(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=HT(this.serializer),t.removeTarget=e,this.q_(t)}}class oJ extends o8{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uQ(e.writeResults,e.commitTime),r=ss(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=HT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Ox(this.serializer,r)))};this.q_(t)}}class lJ{}class cJ extends lJ{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new st(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,WT(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new st(Pe.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,WT(t,r),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(Pe.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class uJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rs(t),this.aa=!1):Xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zh="RemoteStore";class hJ{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{dd(this)&&(Xe(Zh,"Restarting streams for network reachability change."),await(async function(l){const u=Kt(l);u.Ea.add(4),await f1(u),u.Ra.set("Unknown"),u.Ea.delete(4),await yE(u)})(this))}))})),this.Ra=new uJ(r,i)}}async function yE(n){if(dd(n))for(const e of n.da)await e(!0)}async function f1(n){for(const e of n.da)await e(!1)}function l8(n,e){const t=Kt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),vb(t)?xb(t):V0(t).O_()&&_b(t,e))}function yb(n,e){const t=Kt(n),r=V0(t);t.Ia.delete(e),r.O_()&&c8(t,e),t.Ia.size===0&&(r.O_()?r.L_():dd(t)&&t.Ra.set("Unknown"))}function _b(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}V0(n).Y_(e)}function c8(n,e){n.Va.Ue(e),V0(n).Z_(e)}function xb(n){n.Va=new nQ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),V0(n).start(),n.Ra.ua()}function vb(n){return dd(n)&&!V0(n).x_()&&n.Ia.size>0}function dd(n){return Kt(n).Ea.size===0}function u8(n){n.Va=void 0}async function dJ(n){n.Ra.set("Online")}async function fJ(n){n.Ia.forEach(((e,t)=>{_b(n,e)}))}async function gJ(n,e){u8(n),vb(n)?(n.Ra.ha(e),xb(n)):n.Ra.set("Unknown")}async function mJ(n,e,t){if(n.Ra.set("Online"),e instanceof CF&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(n,e)}catch(r){Xe(Zh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gx(n,r)}else if(e instanceof F_?n.Va.Ze(e):e instanceof RF?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pt.min()))try{const r=await i8(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(Ur.EMPTY_BYTE_STRING,h.snapshotVersion)),c8(s,l);const f=new Tl(h.target,l,u,h.sequenceNumber);_b(s,f)})),s.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){Xe(Zh,"Failed to raise snapshot:",r),await Gx(n,r)}}async function Gx(n,e,t){if(!Tu(e))throw e;n.Ea.add(1),await f1(n),n.Ra.set("Offline"),t||(t=()=>i8(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Xe(Zh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await yE(n)}))}function h8(n,e){return e().catch((t=>Gx(n,t,e)))}async function g1(n){const e=Kt(n),t=du(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bh;for(;pJ(e);)try{const i=await ZQ(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,yJ(e,i)}catch(i){await Gx(e,i)}d8(e)&&f8(e)}function pJ(n){return dd(n)&&n.Ta.length<10}function yJ(n,e){n.Ta.push(e);const t=du(n);t.O_()&&t.X_&&t.ea(e.mutations)}function d8(n){return dd(n)&&!du(n).x_()&&n.Ta.length>0}function f8(n){du(n).start()}async function _J(n){du(n).ra()}async function xJ(n){const e=du(n);for(const t of n.Ta)e.ea(t.mutations)}async function vJ(n,e,t){const r=n.Ta.shift(),i=ab.from(r,e,t);await h8(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await g1(n)}async function EJ(n,e){e&&du(n).X_&&await(async function(r,i){if((function(a){return JZ(a)&&a!==Pe.ABORTED})(i.code)){const s=r.Ta.shift();du(r).B_(),await h8(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await g1(r)}})(n,e),d8(n)&&f8(n)}async function PN(n,e){const t=Kt(n);t.asyncQueue.verifyOperationInProgress(),Xe(Zh,"RemoteStore received new credentials");const r=dd(t);t.Ea.add(3),await f1(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await yE(t)}async function wJ(n,e){const t=Kt(n);e?(t.Ea.delete(2),await yE(t)):e||(t.Ea.add(2),await f1(t),t.Ra.set("Unknown"))}function V0(n){return n.ma||(n.ma=(function(t,r,i){const s=Kt(t);return s.sa(),new aJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:dJ.bind(null,n),t_:fJ.bind(null,n),r_:gJ.bind(null,n),H_:mJ.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),vb(n)?xb(n):n.Ra.set("Unknown")):(await n.ma.stop(),u8(n))}))),n.ma}function du(n){return n.fa||(n.fa=(function(t,r,i){const s=Kt(t);return s.sa(),new oJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:_J.bind(null,n),r_:EJ.bind(null,n),ta:xJ.bind(null,n),na:vJ.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await g1(n)):(await n.fa.stop(),n.Ta.length>0&&(Xe(Zh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Eb{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Fo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new Eb(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wb(n,e){if(rs("AsyncQueue",`${e}: ${n}`),Tu(n))return new st(Pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Hf{static emptySet(e){return new Hf(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=tm(),this.sortedSet=new sr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Hf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class kN{constructor(){this.ga=new sr(ot.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Et(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class I0{constructor(e,t,r,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new I0(e,t,Hf.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class SJ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class TJ{constructor(){this.queries=MN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Kt(t),s=i.queries;i.queries=MN(),s.forEach(((a,o)=>{for(const l of o.Sa)l.onError(r)}))})(this,new st(Pe.ABORTED,"Firestore shutting down"))}}function MN(){return new Kl((n=>fF(n)),lE)}async function g8(n,e){const t=Kt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new SJ,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=wb(a,`Initialization of query '${wf(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Sb(t)}async function m8(n,e){const t=Kt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function IJ(n,e){const t=Kt(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&Sb(t)}function AJ(n,e,t){const r=Kt(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function Sb(n){n.Ca.forEach((e=>{e.next()}))}var JT,NN;(NN=JT||(JT={})).Ma="default",NN.Cache="cache";class p8{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new I0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=I0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==JT.Cache}}class y8{constructor(e){this.key=e}}class _8{constructor(e){this.key=e}}class bJ{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nn(),this.mutatedKeys=nn(),this.eu=gF(e),this.tu=new Hf(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new kN,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,f)=>{const g=i.get(h),y=h1(this.query,f)?f:null,v=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;g&&y?g.data.isEqual(y.data)?v!==x&&(r.track({type:3,doc:y}),w=!0):this.su(g,y)||(r.track({type:2,doc:y}),w=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(o=!0)):!g&&y?(r.track({type:0,doc:y}),w=!0):g&&!y&&(r.track({type:1,doc:g}),w=!0,(l||u)&&(o=!0)),w&&(y?(a=a.add(y),s=x?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((h,f)=>(function(y,v){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:w})}};return x(y)-x(v)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new I0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new _8(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new y8(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=nn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return I0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tb="SyncEngine";class RJ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CJ{constructor(e){this.key=e,this.hu=!1}}class PJ{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Kl((o=>fF(o)),lE),this.Iu=new Map,this.Eu=new Set,this.du=new sr(ot.comparator),this.Au=new Map,this.Ru=new db,this.Vu={},this.mu=new Map,this.fu=qh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kJ(n,e,t=!0){const r=T8(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await x8(r,e,t,!0),i}async function MJ(n,e){const t=T8(n);await x8(t,e,!0,!1)}async function x8(n,e,t,r){const i=await QQ(n.localStore,Sa(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await NJ(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&l8(n.remoteStore,i),o}async function NJ(n,e,t,r,i){n.pu=(f,g,y)=>(async function(x,w,T,I){let b=w.view.ru(T);b.Cs&&(b=await IN(x.localStore,w.query,!1).then((({documents:M})=>w.view.ru(M,b))));const N=I&&I.targetChanges.get(w.targetId),F=I&&I.targetMismatches.get(w.targetId)!=null,W=w.view.applyChanges(b,x.isPrimaryClient,N,F);return ON(x,w.targetId,W.au),W.snapshot})(n,f,g,y);const s=await IN(n.localStore,e,!0),a=new bJ(e,s.Qs),o=a.ru(s.documents),l=d1.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,l);ON(n,t,u.au);const h=new RJ(e,t,a);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function LJ(n,e,t){const r=Kt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!lE(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ZT(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&yb(r.remoteStore,i.targetId),eI(r,i.targetId)})).catch(hd)):(eI(r,i.targetId),await ZT(r.localStore,i.targetId,!0))}async function OJ(n,e){const t=Kt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yb(t.remoteStore,r.targetId))}async function DJ(n,e,t){const r=I8(n);try{const i=await(function(a,o){const l=Kt(a),u=Vn.now(),h=o.reduce(((y,v)=>y.add(v.key)),nn());let f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let v=qs(),x=nn();return l.Ns.getEntries(y,h).next((w=>{v=w,v.forEach(((T,I)=>{I.isValidDocument()||(x=x.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(y,v))).next((w=>{f=w;const T=[];for(const I of o){const b=ZZ(I,f.get(I.key).overlayedDocument);b!=null&&T.push(new Yl(I.key,b,iF(b.value.mapValue),Bi.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,T,o)})).next((w=>{g=w;const T=w.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(y,w.batchId,T)}))})).then((()=>({batchId:g.batchId,changes:pF(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new sr(Ht)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u})(r,i.batchId,t),await m1(r,i.changes),await g1(r.remoteStore)}catch(i){const s=wb(i,"Failed to persist write");t.reject(s)}}async function v8(n,e){const t=Kt(n);try{const r=await XQ(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Ct(a.hu,14607):i.removedDocuments.size>0&&(Ct(a.hu,42227),a.hu=!1))})),await m1(t,r,e)}catch(r){await hd(r)}}function LN(n,e,t){const r=Kt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=Kt(a);l.onlineState=o;let u=!1;l.queries.forEach(((h,f)=>{for(const g of f.Sa)g.va(o)&&(u=!0)})),u&&Sb(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FJ(n,e,t){const r=Kt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new sr(ot.comparator);a=a.insert(s,Er.newNoDocument(s,Pt.min()));const o=nn().add(s),l=new dE(Pt.min(),new Map,new sr(Ht),a,o);await v8(r,l),r.du=r.du.remove(s),r.Au.delete(e),Ib(r)}else await ZT(r.localStore,e,!1).then((()=>eI(r,e,t))).catch(hd)}async function jJ(n,e){const t=Kt(n),r=e.batch.batchId;try{const i=await YQ(t.localStore,e);w8(t,r,null),E8(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await m1(t,i)}catch(i){await hd(i)}}async function VJ(n,e,t){const r=Kt(n);try{const i=await(function(a,o){const l=Kt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,o).next((f=>(Ct(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);w8(r,e,t),E8(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await m1(r,i)}catch(i){await hd(i)}}function E8(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function w8(n,e,t){const r=Kt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function eI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||S8(n,r)}))}function S8(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(yb(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ib(n))}function ON(n,e,t){for(const r of t)r instanceof y8?(n.Ru.addReference(r.key,e),GJ(n,r)):r instanceof _8?(Xe(Tb,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||S8(n,r.key)):Et(19791,{wu:r})}function GJ(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Xe(Tb,"New document in limbo: "+t),n.Eu.add(r),Ib(n))}function Ib(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ot(An.fromString(e)),r=n.fu.next();n.Au.set(r,new CJ(t)),n.du=n.du.insert(t,r),l8(n.remoteStore,new Tl(Sa(oE(t.path)),r,"TargetPurposeLimboResolution",Ea.ce))}}async function m1(n,e,t){const r=Kt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,l)=>{a.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const h=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=mb.As(l.targetId,u);s.push(h)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(l,u){const h=Kt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>he.forEach(u,(g=>he.forEach(g.Es,(y=>h.persistence.referenceDelegate.addReference(f,g.targetId,y))).next((()=>he.forEach(g.ds,(y=>h.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))))))}catch(f){if(!Tu(f))throw f;Xe(pb,"Failed to update sequence numbers: "+f)}for(const f of u){const g=f.targetId;if(!f.fromCache){const y=h.Ms.get(g),v=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(g,x)}}})(r.localStore,s))}async function BJ(n,e){const t=Kt(n);if(!t.currentUser.isEqual(e)){Xe(Tb,"User change. New user:",e.toKey());const r=await r8(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((l=>{l.reject(new st(Pe.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await m1(t,r.Ls)}}function UJ(n,e){const t=Kt(n),r=t.Au.get(e);if(r&&r.hu)return nn().add(r.key);{let i=nn();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function T8(n){const e=Kt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=v8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FJ.bind(null,e),e.Pu.H_=IJ.bind(null,e.eventManager),e.Pu.yu=AJ.bind(null,e.eventManager),e}function I8(n){const e=Kt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VJ.bind(null,e),e}class yp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pE(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return n8(this.persistence,new t8,e.initialUser,this.serializer)}Cu(e){return new fb(mE.mi,this.serializer)}Du(e){return new s8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yp.provider={build:()=>new yp};class zJ extends yp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ct(this.persistence.referenceDelegate instanceof Vx,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qF(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ji.withCacheSize(this.cacheSizeBytes):ji.DEFAULT;return new fb((r=>Vx.mi(r,t)),this.serializer)}}class $J extends yp{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await I8(this.xu.syncEngine),await g1(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return n8(this.persistence,new t8,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new qF(r,e.asyncQueue,t)}Mu(e,t){const r=new qq(t,this.persistence);return new Xq(e.asyncQueue,r)}Cu(e){const t=$Q(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ji.withCacheSize(this.cacheSizeBytes):ji.DEFAULT;return new gb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sJ(),V_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new s8}}class Bx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BJ.bind(null,this.syncEngine),await wJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new TJ})()}createDatastore(e){const t=pE(e.databaseInfo.databaseId),r=(function(s){return new iJ(s)})(e.databaseInfo);return(function(s,a,o,l){return new cJ(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,o){return new hJ(r,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>LN(this.syncEngine,t,0)),(function(){return RN.v()?new RN:new eJ})())}createSyncEngine(e,t){return(function(i,s,a,o,l,u,h){const f=new PJ(i,s,a,o,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Kt(t);Xe(Zh,"RemoteStore shutting down."),r.Ea.add(5),await f1(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bx.provider={build:()=>new Bx};class A8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const fu="FirestoreClient";class WJ{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=wi.UNAUTHENTICATED,this.clientId=KA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{Xe(fu,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(Xe(fu,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wb(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function dS(n,e){n.asyncQueue.verifyOperationInProgress(),Xe(fu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await r8(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function DN(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HJ(n);Xe(fu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>PN(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>PN(e.remoteStore,i))),n._onlineComponents=e}async function HJ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Xe(fu,"Using user provided OfflineComponentProvider");try{await dS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Wh("Error using user provided cache. Falling back to memory cache: "+t),await dS(n,new yp)}}else Xe(fu,"Using default OfflineComponentProvider"),await dS(n,new zJ(void 0));return n._offlineComponents}async function b8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Xe(fu,"Using user provided OnlineComponentProvider"),await DN(n,n._uninitializedComponentsProvider._online)):(Xe(fu,"Using default OnlineComponentProvider"),await DN(n,new Bx))),n._onlineComponents}function KJ(n){return b8(n).then((e=>e.syncEngine))}async function R8(n){const e=await b8(n),t=e.eventManager;return t.onListen=kJ.bind(null,e.syncEngine),t.onUnlisten=LJ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OJ.bind(null,e.syncEngine),t}function YJ(n,e,t={}){const r=new Fo;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const h=new A8({next:g=>{h.Nu(),a.enqueueAndForget((()=>m8(s,f)));const y=g.docs.has(o);!y&&g.fromCache?u.reject(new st(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?u.reject(new st(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new p8(oE(o.path),h,{includeMetadataChanges:!0,qa:!0});return g8(s,f)})(await R8(n),n.asyncQueue,e,t,r))),r.promise}function XJ(n,e,t={}){const r=new Fo;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const h=new A8({next:g=>{h.Nu(),a.enqueueAndForget((()=>m8(s,f))),g.fromCache&&l.source==="server"?u.reject(new st(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new p8(o,h,{includeMetadataChanges:!0,qa:!0});return g8(s,f)})(await R8(n),n.asyncQueue,e,t,r))),r.promise}function C8(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const FN=new Map;const P8="firestore.googleapis.com",jN=!0;class VN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new st(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=P8,this.ssl=jN}else this.host=e.host,this.ssl=e.ssl??jN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bQ)throw new st(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C8(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _E{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Oq;switch(r.type){case"firstParty":return new Vq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=FN.get(t);r&&(Xe("ComponentProvider","Removing Datastore"),FN.delete(t),r.terminate())})(this),Promise.resolve()}}function qJ(n,e,t,r={}){n=Ia(n,_E);const i=cd(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;i&&(MA(`https://${o}`),NA("Firestore",!0)),s.host!==P8&&s.host!==o&&Wh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!Bh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=wi.MOCK_USER;else{u=OD(r.mockUserToken,n._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new st(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new wi(f)}n._authCredentials=new Dq(new k6(u,h))}}class G0{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new G0(this.firestore,e,this._query)}}class Pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pr(this.firestore,e,this._key)}toJSON(){return{type:Pr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(o1(t,Pr._jsonSchema))return new Pr(e,r||null,new ot(An.fromString(t.referencePath)))}}Pr._jsonSchemaVersion="firestore/documentReference/1.0",Pr._jsonSchema={type:Gr("string",Pr._jsonSchemaVersion),referencePath:Gr("string")};class ru extends G0{constructor(e,t,r){super(e,t,oE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new ot(e))}withConverter(e){return new ru(this.firestore,e,this._path)}}function GN(n,e,...t){if(n=fi(n),N6("collection","path",e),n instanceof _E){const r=An.fromString(e,...t);return CM(r),new ru(n,null,r)}{if(!(n instanceof Pr||n instanceof ru))throw new st(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(An.fromString(e,...t));return CM(r),new ru(n.firestore,null,r)}}function Kf(n,e,...t){if(n=fi(n),arguments.length===1&&(e=KA.newId()),N6("doc","path",e),n instanceof _E){const r=An.fromString(e,...t);return RM(r),new Pr(n,null,new ot(r))}{if(!(n instanceof Pr||n instanceof ru))throw new st(Pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(An.fromString(e,...t));return RM(r),new Pr(n.firestore,n instanceof ru?n.converter:null,new ot(r))}}const BN="AsyncQueue";class UN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a8(this,"async_queue_retry"),this._c=()=>{const r=V_();r&&Xe(BN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=V_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=V_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Fo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Tu(e))throw e;Xe(BN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,rs("INTERNAL UNHANDLED ERROR: ",zN(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Eb.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Et(47125,{Pc:zN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function zN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Au extends _E{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new UN,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UN(e),this._firestoreClient=void 0,await e}}}function ZJ(n,e){const t=typeof n=="object"?n:DA(),r=typeof n=="string"?n:Px,i=Xv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=MD("firestore");s&&qJ(i,...s)}return i}function Ab(n){if(n._terminated)throw new st(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||k8(n),n._firestoreClient}function k8(n){const e=n._freezeSettings(),t=(function(i,s,a,o){return new IZ(i,s,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,C8(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new WJ(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function QJ(n,e){Wh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return JJ(n,Bx.provider,{build:r=>new $J(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function JJ(n,e,t){if((n=Ia(n,Au))._firestoreClient||n._terminated)throw new st(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new st(Pe.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},k8(n)}class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(Ur.fromBase64String(e))}catch(t){throw new st(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ya(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ya._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(o1(e,ya._jsonSchema))return ya.fromBase64String(e.bytes)}}ya._jsonSchemaVersion="firestore/bytes/1.0",ya._jsonSchema={type:Gr("string",ya._jsonSchemaVersion),bytes:Gr("string")};class xE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new st(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vE{constructor(e){this._methodName=e}}class jo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new st(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new st(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jo._jsonSchemaVersion}}static fromJSON(e){if(o1(e,jo._jsonSchema))return new jo(e.latitude,e.longitude)}}jo._jsonSchemaVersion="firestore/geoPoint/1.0",jo._jsonSchema={type:Gr("string",jo._jsonSchemaVersion),latitude:Gr("number"),longitude:Gr("number")};class Vo{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(o1(e,Vo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vo(e.vectorValues);throw new st(Pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vo._jsonSchemaVersion="firestore/vectorValue/1.0",Vo._jsonSchema={type:Gr("string",Vo._jsonSchemaVersion),vectorValues:Gr("object")};const eee=/^__.*__$/;class tee{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yl(e,this.data,this.fieldMask,t,this.fieldTransforms):new j0(e,this.data,t,this.fieldTransforms)}}class M8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function N8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:n})}}class bb{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ux(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(N8(this.Ac)&&eee.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nee{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pE(e)}Cc(e,t,r,i=!1){return new bb({Ac:e,methodName:t,Dc:r,path:dr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function EE(n){const e=n._freezeSettings(),t=pE(n._databaseId);return new nee(n._databaseId,!!e.ignoreUndefinedProperties,t)}function L8(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);Cb("Data must be an object, but it was:",a,r);const o=O8(r,a);let l,u;if(s.merge)l=new As(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const g=tI(e,f,t);if(!a.contains(g))throw new st(Pe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);F8(h,g)||h.push(g)}l=new As(h),u=a.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=a.fieldTransforms;return new tee(new Gi(o),l,u)}class wE extends vE{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wE}}class Rb extends vE{_toFieldTransform(e){return new SF(e.path,new E0)}isEqual(e){return e instanceof Rb}}function ree(n,e,t,r){const i=n.Cc(1,e,t);Cb("Data must be an object, but it was:",i,r);const s=[],a=Gi.empty();Iu(r,((l,u)=>{const h=Pb(e,l,t);u=fi(u);const f=i.yc(h);if(u instanceof wE)s.push(h);else{const g=p1(u,f);g!=null&&(s.push(h),a.set(h,g))}}));const o=new As(s);return new M8(a,o,i.fieldTransforms)}function iee(n,e,t,r,i,s){const a=n.Cc(1,e,t),o=[tI(e,r,t)],l=[i];if(s.length%2!=0)throw new st(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(tI(e,s[g])),l.push(s[g+1]);const u=[],h=Gi.empty();for(let g=o.length-1;g>=0;--g)if(!F8(u,o[g])){const y=o[g];let v=l[g];v=fi(v);const x=a.yc(y);if(v instanceof wE)u.push(y);else{const w=p1(v,x);w!=null&&(u.push(y),h.set(y,w))}}const f=new As(u);return new M8(h,f,a.fieldTransforms)}function see(n,e,t,r=!1){return p1(t,n.Cc(r?4:3,e))}function p1(n,e){if(D8(n=fi(n)))return Cb("Unsupported field value:",e,n),O8(n,e);if(n instanceof vE)return(function(r,i){if(!N8(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const o of r){let l=p1(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=fi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Vn.fromDate(r);return{timestampValue:T0(i.serializer,s)}}if(r instanceof Vn){const s=new Vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:T0(i.serializer,s)}}if(r instanceof jo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ya)return{bytesValue:PF(i.serializer,r._byteString)};if(r instanceof Pr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vo)return(function(a,o){return{mapValue:{fields:{[tb]:{stringValue:nb},[y0]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return ib(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Jv(r)}`)})(n,e)}function O8(n,e){const t={};return X6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Iu(n,((r,i)=>{const s=p1(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function D8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof jo||n instanceof ya||n instanceof Pr||n instanceof vE||n instanceof Vo)}function Cb(n,e,t){if(!D8(t)||!L6(t)){const r=Jv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function tI(n,e,t){if((e=fi(e))instanceof xE)return e._internalPath;if(typeof e=="string")return Pb(n,e);throw Ux("Field path arguments must be of type string or ",n,!1,void 0,t)}const aee=new RegExp("[~\\*/\\[\\]]");function Pb(n,e,t){if(e.search(aee)>=0)throw Ux(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xE(...e.split("."))._internalPath}catch{throw Ux(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ux(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new st(Pe.INVALID_ARGUMENT,o+n+l)}function F8(n,e){return n.some((t=>t.isEqual(e)))}class j8{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oee extends j8{data(){return super.data()}}function kb(n,e){return typeof e=="string"?Pb(n,e):e instanceof xE?e._internalPath:e._delegate._internalPath}function lee(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new st(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mb{}class cee extends Mb{}function uee(n,e,...t){let r=[];e instanceof Mb&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((l=>l instanceof Nb)).length,o=s.filter((l=>l instanceof SE)).length;if(a>1||a>0&&o>0)throw new st(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class SE extends cee{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new SE(e,t,r)}_apply(e){const t=this._parse(e);return V8(e._query,t),new G0(e.firestore,e.converter,UT(e._query,t))}_parse(e){const t=EE(e.firestore);return(function(s,a,o,l,u,h,f){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new st(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){WN(f,h);const v=[];for(const x of f)v.push($N(l,s,x));g={arrayValue:{values:v}}}else g=$N(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||WN(f,h),g=see(o,a,f,h==="in"||h==="not-in");return on.create(u,h,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hee(n,e,t){const r=e,i=kb("where",n);return SE._create(i,r,t)}class Nb extends Mb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Nb(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)V8(a,l),a=UT(a,l)})(e._query,t),new G0(e.firestore,e.converter,UT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function $N(n,e,t){if(typeof(t=fi(t))=="string"){if(t==="")throw new st(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dF(e)&&t.indexOf("/")!==-1)throw new st(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(An.fromString(t));if(!ot.isDocumentKey(r))throw new st(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gp(n,new ot(r))}if(t instanceof Pr)return gp(n,t._key);throw new st(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jv(t)}.`)}function WN(n,e){if(!Array.isArray(n)||n.length===0)throw new st(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V8(n,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new st(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dee{convertValue(e,t="none"){switch(uu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Iu(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[y0].arrayValue?.values?.map((r=>ir(r.doubleValue)));return new Vo(t)}convertGeoPoint(e){return new jo(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dp(e));default:return null}}convertTimestamp(e){const t=Gl(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=An.fromString(e);Ct(GF(r),9688,{name:e});const i=new Hh(r.get(1),r.get(3)),s=new ot(r.popFirst(5));return i.isEqual(t)||rs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function G8(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class im{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ph extends j8{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new G_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(Pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ph._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ph._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ph._jsonSchema={type:Gr("string",Ph._jsonSchemaVersion),bundleSource:Gr("string","DocumentSnapshot"),bundleName:Gr("string"),bundle:Gr("string")};class G_ extends Ph{data(e={}){return super.data(e)}}class Yf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new im(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new G_(this._firestore,this._userDataWriter,r.key,r,new im(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new st(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new G_(i._firestore,i._userDataWriter,o.doc.key,o.doc,new im(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new G_(i._firestore,i._userDataWriter,o.doc.key,o.doc,new im(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:fee(o.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(Pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=KA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:n})}}function gee(n){n=Ia(n,Pr);const e=Ia(n.firestore,Au);return YJ(Ab(e),n._key).then((t=>xee(e,n,t)))}Yf._jsonSchemaVersion="firestore/querySnapshot/1.0",Yf._jsonSchema={type:Gr("string",Yf._jsonSchemaVersion),bundleSource:Gr("string","QuerySnapshot"),bundleName:Gr("string"),bundle:Gr("string")};class B8 extends dee{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,t)}}function mee(n){n=Ia(n,G0);const e=Ia(n.firestore,Au),t=Ab(e),r=new B8(e);return lee(n._query),XJ(t,n._query).then((i=>new Yf(e,r,n,i)))}function HN(n,e,t){n=Ia(n,Pr);const r=Ia(n.firestore,Au),i=G8(n.converter,e,t);return TE(r,[L8(EE(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Bi.none())])}function pee(n,e,t,...r){n=Ia(n,Pr);const i=Ia(n.firestore,Au),s=EE(i);let a;return a=typeof(e=fi(e))=="string"||e instanceof xE?iee(s,"updateDoc",n._key,e,t,r):ree(s,"updateDoc",n._key,e),TE(i,[a.toMutation(n._key,Bi.exists(!0))])}function yee(n){return TE(Ia(n.firestore,Au),[new hE(n._key,Bi.none())])}function _ee(n,e){const t=Ia(n.firestore,Au),r=Kf(n),i=G8(n.converter,e);return TE(t,[L8(EE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Bi.exists(!1))]).then((()=>r))}function TE(n,e){return(function(r,i){const s=new Fo;return r.asyncQueue.enqueueAndForget((async()=>DJ(await KJ(r),i,s))),s.promise})(Ab(n),e)}function xee(n,e,t){const r=t.docs.get(e._key),i=new B8(n);return new Ph(n,i,e._key,r,new im(t.hasPendingWrites,t.fromCache),e.converter)}function KN(){return new Rb("serverTimestamp")}(function(e,t=!0){(function(i){F0=i})(ud),Uh(new lu("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Au(new Fq(r.getProvider("auth-internal")),new Gq(a,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new st(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hh(u.options.projectId,h)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),Oo(TM,IM,e),Oo(TM,IM,"esm2020")})();const U8="firebasestorage.googleapis.com",vee="storageBucket",Eee=120*1e3,wee=600*1e3;class tl extends el{constructor(e,t,r=0){super(fS(e),`Firebase Storage: ${t} (${fS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tl.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yo;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Yo||(Yo={}));function fS(n){return"storage/"+n}function See(){const n="An unknown error occurred, please check the error payload for server response.";return new tl(Yo.UNKNOWN,n)}function Tee(){return new tl(Yo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Iee(){return new tl(Yo.CANCELED,"User canceled the upload/download.")}function Aee(n){return new tl(Yo.INVALID_URL,"Invalid URL '"+n+"'.")}function bee(n){return new tl(Yo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function YN(n){return new tl(Yo.INVALID_ARGUMENT,n)}function z8(){return new tl(Yo.APP_DELETED,"The Firebase app was deleted.")}function Ree(n){return new tl(Yo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ka{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ka.makeFromUrl(e,t)}catch{return new Ka(e,"")}if(r.path==="")return r;throw bee(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${i}/o${g}`,"i"),v={bucket:1,path:3},x=t===U8?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",T=new RegExp(`^https?://${x}/${i}/${w}`,"i"),b=[{regex:o,indices:l,postModify:s},{regex:y,indices:v,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<b.length;N++){const F=b[N],W=F.regex.exec(e);if(W){const M=W[F.indices.bucket];let C=W[F.indices.path];C||(C=""),r=new Ka(M,C),F.postModify(r);break}}if(r==null)throw Aee(e);return r}}class Cee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Pee(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function h(...w){u||(u=!0,e.apply(null,w))}function f(w){i=setTimeout(()=>{i=null,n(y,l())},w)}function g(){s&&clearTimeout(s)}function y(w,...T){if(u){g();return}if(w){g(),h.call(null,w,...T);return}if(l()||a){g(),h.call(null,w,...T);return}r<64&&(r*=2);let b;o===1?(o=2,b=0):b=(r+Math.random())*1e3,f(b)}let v=!1;function x(w){v||(v=!0,g(),!u&&(i!==null?(w||(o=2),clearTimeout(i),f(0)):w||(o=1)))}return f(0),s=setTimeout(()=>{a=!0,x(!0)},t),x}function kee(n){n(!1)}function Mee(n){return n!==void 0}function XN(n,e,t,r){if(r<e)throw YN(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw YN(`Invalid value for '${n}'. Expected ${t} or less.`)}function Nee(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var zx;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(zx||(zx={}));function Lee(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class Oee{constructor(e,t,r,i,s,a,o,l,u,h,f,g=!0,y=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=g,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,x)=>{this.resolve_=v,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new n_(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===zx.NO_ERROR,l=s.getStatus();if(!o||Lee(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===zx.ABORT;r(!1,new n_(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new n_(u,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Mee(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=See();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?z8():Iee();a(l)}else{const l=Tee();a(l)}};this.canceled_?t(!1,new n_(!1,null,!0)):this.backoffId_=Pee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class n_{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Dee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Fee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Vee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Gee(n,e,t,r,i,s,a=!0,o=!1){const l=Nee(n.urlParams),u=n.url+l,h=Object.assign({},n.headers);return jee(h,e),Dee(h,t),Fee(h,s),Vee(h,r),new Oee(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,o)}function Bee(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Uee(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class $x{constructor(e,t){this._service=e,t instanceof Ka?this._location=t:this._location=Ka.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $x(e,t)}get root(){const e=new Ka(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Uee(this._location.path)}get storage(){return this._service}get parent(){const e=Bee(this._location.path);if(e===null)return null;const t=new Ka(this._location.bucket,e);return new $x(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Ree(e)}}function qN(n,e){const t=e?.[vee];return t==null?null:Ka.makeFromBucketSpec(t,n)}function zee(n,e,t,r={}){n.host=`${e}:${t}`;const i=cd(e);i&&(MA(`https://${n.host}/b`),NA("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:OD(s,n.app.options.projectId))}class $ee{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=U8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Eee,this._maxUploadRetryTime=wee,this._requests=new Set,i!=null?this._bucket=Ka.makeFromBucketSpec(i,this._host):this._bucket=qN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ka.makeFromBucketSpec(this._url,e):this._bucket=qN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $x(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Cee(z8());{const a=Gee(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const ZN="@firebase/storage",QN="0.14.0";const $8="storage";function Wee(n=DA(),e){n=fi(n);const r=Xv(n,$8).getImmediate({identifier:e}),i=MD("storage");return i&&Hee(r,...i),r}function Hee(n,e,t,r={}){zee(n,e,t,r)}function Kee(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new $ee(t,r,i,e,ud)}function Yee(){Uh(new lu($8,Kee,"PUBLIC").setMultipleInstances(!0)),Oo(ZN,QN,""),Oo(ZN,QN,"esm2020")}Yee();const Xee={apiKey:"AIzaSyBcLuKvUr5XqEJTwOf9I0hqJ1o9g3kOZ-g",authDomain:"detectorapp-nl.firebaseapp.com",projectId:"detectorapp-nl",storageBucket:"detectorapp-nl.firebasestorage.app",messagingSenderId:"110954177210",appId:"1:110954177210:web:d77c9ed262ad92bc431883"},Lb=UD(Xee),Xf=kq(Lb),Hc=ZJ(Lb);Wee(Lb);QJ(Hc).catch(n=>{n.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const qee={};function Zee(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=t.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const _p=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return _p(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return _p(r)(t)}}}},Qee=(n,e)=>(t,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,T)=>({...T,...w}),...e},a=!1;const o=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return n((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...w)},r,i);const h=_p(s.serialize),f=()=>{const w=s.partialize({...r()});let T;const I=h({state:w,version:s.version}).then(b=>u.setItem(s.name,b)).catch(b=>{T=b});if(T)throw T;return I},g=i.setState;i.setState=(w,T)=>{g(w,T),f()};const y=n((...w)=>{t(...w),f()},r,i);let v;const x=()=>{var w;if(!u)return;a=!1,o.forEach(I=>I(r()));const T=((w=s.onRehydrateStorage)==null?void 0:w.call(s,r()))||void 0;return _p(u.getItem.bind(u))(s.name).then(I=>{if(I)return s.deserialize(I)}).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==s.version){if(s.migrate)return s.migrate(I.state,I.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return I.state}).then(I=>{var b;return v=s.merge(I,(b=r())!=null?b:y),t(v,!0),f()}).then(()=>{T?.(v,void 0),a=!0,l.forEach(I=>I(v))}).catch(I=>{T?.(void 0,I)})};return i.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(u=w.getStorage())},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>a,onHydrate:w=>(o.add(w),()=>{o.delete(w)}),onFinishHydration:w=>(l.add(w),()=>{l.delete(w)})},x(),v||y},Jee=(n,e)=>(t,r,i)=>{let s={storage:Zee(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...x)},r,i);const h=()=>{const x=s.partialize({...r()});return u.setItem(s.name,{state:x,version:s.version})},f=i.setState;i.setState=(x,w)=>{f(x,w),h()};const g=n((...x)=>{t(...x),h()},r,i);i.getInitialState=()=>g;let y;const v=()=>{var x,w;if(!u)return;a=!1,o.forEach(I=>{var b;return I((b=r())!=null?b:g)});const T=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(x=r())!=null?x:g))||void 0;return _p(u.getItem.bind(u))(s.name).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==s.version){if(s.migrate)return[!0,s.migrate(I.state,I.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,I.state];return[!1,void 0]}).then(I=>{var b;const[N,F]=I;if(y=s.merge(F,(b=r())!=null?b:g),t(y,!0),N)return h()}).then(()=>{T?.(y,void 0),y=r(),a=!0,l.forEach(I=>I(y))}).catch(I=>{T?.(void 0,I)})};return i.persist={setOptions:x=>{s={...s,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},s.skipHydration||v(),y||g},ete=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((qee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Qee(n,e)):Jee(n,e),B0=ete,kr=Aa()(B0(n=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!1,showLocalVondsten:!0,showCustomPointLayers:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,menuFontScale:100,setDefaultBackground:e=>n({defaultBackground:e}),setShowScaleBar:e=>n({showScaleBar:e}),setGpsAutoStart:e=>n({gpsAutoStart:e}),setShowAccuracyCircle:e=>n({showAccuracyCircle:e}),setHapticFeedback:e=>n({hapticFeedback:e}),setVondstenLocalOnly:e=>n({vondstenLocalOnly:e}),setShowVondstButton:e=>n({showVondstButton:e}),setShowLocalVondsten:e=>n({showLocalVondsten:e}),setShowCustomPointLayers:e=>n({showCustomPointLayers:e}),setFontScale:e=>n({fontScale:e}),setLayerPanelFontScale:e=>n({layerPanelFontScale:e}),setPresetPanelFontScale:e=>n({presetPanelFontScale:e}),setMenuFontScale:e=>n({menuFontScale:e})}),{name:"detectorapp-settings",version:2,migrate:(n,e)=>e<2?{...n,showScaleBar:!0}:n})),IE=Aa()(O0((n,e)=>({user:null,loading:!1,error:null,initialized:!1,setUser:t=>{n(r=>{r.user=t,r.loading=!1})},setLoading:t=>{n(r=>{r.loading=t})},setError:t=>{n(r=>{r.error=t})},signInWithGoogle:async()=>{n(t=>{t.loading=!0,t.error=null});try{const t=new El;await GX(Xf,t)}catch(t){console.error("Google sign-in error:",t),n(r=>{r.error=t.message,r.loading=!1})}},logout:async()=>{n(t=>{t.loading=!0});try{await d6(Xf)}catch(t){console.error("Logout error:",t),n(r=>{r.error=t.message,r.loading=!1})}},initAuth:()=>{e().initialized||(n(t=>{t.initialized=!0}),h6(Xf,t=>{n(r=>{r.user=t,r.loading=!1}),t&&kr.getState().setVondstenLocalOnly(!1)}))}})));Aa()(O0((n,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async t=>{n(r=>{r.loading=!0});try{const r=uee(GN(Hc,"vondsten"),hee("userId","==",t)),s=(await mee(r)).docs.map(a=>({id:a.id,...a.data()}));n(a=>{a.vondsten=s,a.loading=!1})}catch(r){n(i=>{i.error=r.message,i.loading=!1})}},addVondst:async t=>{const r=new Date().toISOString(),i={...t,createdAt:r,updatedAt:r},s=await _ee(GN(Hc,"vondsten"),i);return n(a=>{a.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(t,r)=>{const i=Kf(Hc,"vondsten",t);await pee(i,{...r,updatedAt:new Date().toISOString()}),n(s=>{const a=s.vondsten.findIndex(o=>o.id===t);a!==-1&&(s.vondsten[a]={...s.vondsten[a],...r})})},deleteVondst:async t=>{await yee(Kf(Hc,"vondsten",t)),n(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==t)})}})));const gS=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen"],baseLayer:"CartoDB (licht)",isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Vroege ME",icon:"Layers",layers:["Romeinse wegen (regio)","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Late ME - Nieuw",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","Archeo Landschappen","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],JN=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],W8=Aa()(B0((n,e)=>({presets:[...gS],applyPreset:t=>{const r=e().presets.find(s=>s.id===t);if(!r)return;const i=li.getState();JN.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(a=>{i.setLayerVisibility(a,a===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(t,r)=>{const i=li.getState(),s=Object.entries(i.visible).filter(([o,l])=>l&&JN.includes(o)).map(([o])=>o),a={id:`custom-${Date.now()}`,name:t,icon:r,layers:s,isBuiltIn:!1};n(o=>({presets:[...o.presets,a]})),console.log(` Preset aangemaakt: ${t} met ${s.length} lagen`)},updatePreset:(t,r)=>{n(i=>({presets:i.presets.map(s=>s.id===t?{...s,...r}:s)}))},deletePreset:t=>{n(r=>({presets:r.presets.filter(i=>i.id!==t||i.isBuiltIn)}))},resetToDefaults:()=>{n({presets:[...gS]})}}),{name:"detectorapp-presets",version:7,migrate:(n,e)=>e<7?{presets:[...gS]}:n})),e3=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],AE=Aa()(B0((n,e)=>({layers:[],addLayer:t=>{const r=crypto.randomUUID(),i=e().layers.length,s=e3[i%e3.length];return n(a=>({layers:[...a.layers,{...t,id:r,createdAt:new Date().toISOString(),color:t.color||s,visible:t.visible??!0,opacity:t.opacity??1}]})),r},removeLayer:t=>n(r=>({layers:r.layers.filter(i=>i.id!==t)})),updateLayer:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)})),toggleVisibility:t=>n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)})),setOpacity:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,opacity:r}:s)})),setColor:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,color:r}:s)})),clearAll:()=>n({layers:[]})}),{name:"detectorapp-custom-layers",version:1})),tte=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Labels Overlay","Mijn Vondsten"],H8=Aa()(B0((n,e)=>({tier:"free",unlockedRegions:["nl"],devMode:!0,setTier:t=>n({tier:t}),unlockRegion:t=>n(r=>({unlockedRegions:r.unlockedRegions.includes(t)?r.unlockedRegions:[...r.unlockedRegions,t]})),lockRegion:t=>n(r=>({unlockedRegions:r.unlockedRegions.filter(i=>i!==t)})),setDevMode:t=>n({devMode:t}),isRegionUnlocked:t=>{const r=e();return r.devMode||r.tier==="pro"?!0:r.unlockedRegions.includes(t)},isLayerUnlocked:(t,r="free",i=["nl"])=>{const s=e();return s.devMode||tte.includes(t)||r==="free"||s.tier==="pro"?!0:s.tier==="premium"?i.some(a=>s.unlockedRegions.includes(a)):!1},canAccessPremiumFeatures:()=>{const t=e();return t.devMode||t.tier!=="free"}}),{name:"detectorapp-subscription",version:1}));function nte({target:n,viewOptions:e}){const t=se.useRef(null),r=se.useRef(null),i=os(a=>a.setMap),s=kr(a=>a.showScaleBar);return se.useEffect(()=>{if(!t.current){const a={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},o=new IH({target:n,controls:[],view:new Po({center:au(a.center),zoom:a.zoom,rotation:a.rotation,minZoom:a.minZoom,maxZoom:a.maxZoom})});t.current=o,i(o),window.__olMap=o}return()=>{t.current&&(t.current.setTarget(void 0),i(null),window.__olMap=null)}},[n,e,i]),se.useEffect(()=>{const a=t.current;a&&(s?r.current||(r.current=new RH({units:"metric",bar:!1,text:!0,minWidth:80}),a.addControl(r.current)):r.current&&(a.removeControl(r.current),r.current=null))},[s]),t.current}const t3=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function rte(){const n=se.useRef(null),e=se.useRef(!1);nte({target:"map"});const t=os(f=>f.map),r=li(f=>f.registerLayer),i=li(f=>f.setLayerVisibility),s=kr(f=>f.defaultBackground);se.useEffect(()=>{if(!t){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const f=new nh({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new $W}),g=new nh({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new xf({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),y=new nh({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new xf({url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_orthoHR/EPSG:3857/{z}/{x}/{y}.jpeg",attributions:" Kadaster / PDOK Luchtfoto",maxZoom:19})}),v=new nh({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new xf({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),x=new nh({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new xf({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),w=new nh({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new xf({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});t.addLayer(f),t.addLayer(g),t.addLayer(y),t.addLayer(v),t.addLayer(x),t.addLayer(w),console.log(" Base layers added:",{osm:f.getVisible(),cartodb:g.getVisible(),satellite:y.getVisible()}),r("OpenStreetMap",f),r("CartoDB (licht)",g),r("Luchtfoto",y),r("Labels Overlay",v),r("TMK 1850",x),r("Bonnebladen 1900",w),t.updateSize(),console.log(" Map size:",t.getSize()),console.log(" Map center:",t.getView().getCenter()),console.log(" Map zoom:",t.getView().getZoom()),a()},[t,r]);async function a(){if(!t){console.error(" Cannot load layers: map is null");return}const f=tK();console.log(` Loading ${f.length} immediate-load layers (WMS/Tile)...`);const g=await Promise.allSettled(f.map(async v=>{try{const x=await v.factory();return x?{name:v.name,layer:x}:null}catch(x){return console.warn(` Failed to create ${v.name}:`,x),null}}));let y=0;g.forEach(v=>{if(v.status==="fulfilled"&&v.value){const{name:x,layer:w}=v.value;t.addLayer(w),r(x,w),y++,console.log(`   ${x}`)}}),console.log(` Immediate layers loaded: ${y}/${f.length}`),console.log(` Total layers on map: ${t.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}se.useEffect(()=>{if(!t||e.current)return;const f=setTimeout(()=>{const g=s||"CartoDB (licht)";t3.forEach(y=>{i(y,!1)}),t3.includes(g)?i(g,!0):i("CartoDB (licht)",!0),e.current=!0,console.log(` Default background: ${g}`)},100);return()=>clearTimeout(f)},[t,s,i]);const o=kr(f=>f.gpsAutoStart),l=es(f=>f.startTracking),u=se.useRef(!1);se.useEffect(()=>{if(!(!t||u.current)&&o){const f=setTimeout(()=>{l(),u.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(f)}},[t,o,l]);const h={width:"100%",height:"100vh"};return p.jsx("div",{id:"map",ref:n,style:h})}const Ob=se.createContext({});function Db(n){const e=se.useRef(null);return e.current===null&&(e.current=n()),e.current}const bE=se.createContext(null),Fb=se.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class ite extends se.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ste({children:n,isPresent:e}){const t=se.useId(),r=se.useRef(null),i=se.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=se.useContext(Fb);return se.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=t;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),p.jsx(ite,{isPresent:e,childRef:r,sizeRef:i,children:se.cloneElement(n,{ref:r})})}const ate=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=Db(ote),l=se.useId(),u=se.useCallback(f=>{o.set(f,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),h=se.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),s?[Math.random(),u]:[t,u]);return se.useMemo(()=>{o.forEach((f,g)=>o.set(g,!1))},[t]),se.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),a==="popLayout"&&(n=p.jsx(ste,{isPresent:t,children:n})),p.jsx(bE.Provider,{value:h,children:n})};function ote(){return new Map}function K8(n=!0){const e=se.useContext(bE);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=se.useId();se.useEffect(()=>{n&&i(s)},[n]);const a=se.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const r_=n=>n.key||"";function n3(n){const e=[];return se.Children.forEach(n,t=>{se.isValidElement(t)&&e.push(t)}),e}const jb=typeof window<"u",Y8=jb?se.useLayoutEffect:se.useEffect,Mr=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=K8(a),u=se.useMemo(()=>n3(n),[n]),h=a&&!o?[]:u.map(r_),f=se.useRef(!0),g=se.useRef(u),y=Db(()=>new Map),[v,x]=se.useState(u),[w,T]=se.useState(u);Y8(()=>{f.current=!1,g.current=u;for(let N=0;N<w.length;N++){const F=r_(w[N]);h.includes(F)?y.delete(F):y.get(F)!==!0&&y.set(F,!1)}},[w,h.length,h.join("-")]);const I=[];if(u!==v){let N=[...u];for(let F=0;F<w.length;F++){const W=w[F],M=r_(W);h.includes(M)||(N.splice(F,0,W),I.push(W))}s==="wait"&&I.length&&(N=I),T(n3(N)),x(u);return}const{forceRender:b}=se.useContext(Ob);return p.jsx(p.Fragment,{children:w.map(N=>{const F=r_(N),W=a&&!o?!1:u===w||h.includes(F),M=()=>{if(y.has(F))y.set(F,!0);else return;let C=!0;y.forEach(P=>{P||(C=!1)}),C&&(b?.(),T(g.current),a&&l?.(),r&&r())};return p.jsx(ate,{isPresent:W,initial:!f.current||t?void 0:!1,custom:W?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:W?void 0:M,children:N},F)})})},Zs=n=>n;let X8=Zs;function Vb(n){let e;return()=>(e===void 0&&(e=n()),e)}const A0=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Ml=n=>n*1e3,Nl=n=>n/1e3,lte={useManualTiming:!1};function cte(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),n()),u(a)}const l={schedule:(u,h=!1,f=!1)=>{const y=f&&r?e:t;return h&&s.add(u),y.has(u)||y.add(u),u},cancel:u=>{t.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const i_=["read","resolveKeyframes","update","preRender","render","postRender"],ute=40;function q8(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=i_.reduce((T,I)=>(T[I]=cte(s),T),{}),{read:o,resolveKeyframes:l,update:u,preRender:h,render:f,postRender:g}=a,y=()=>{const T=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,ute),1),i.timestamp=T,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),h.process(i),f.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(y))},v=()=>{t=!0,r=!0,i.isProcessing||n(y)};return{schedule:i_.reduce((T,I)=>{const b=a[I];return T[I]=(N,F=!1,W=!1)=>(t||v(),b.schedule(N,F,W)),T},{}),cancel:T=>{for(let I=0;I<i_.length;I++)a[i_[I]].cancel(T)},state:i,steps:a}}const{schedule:er,cancel:gu,state:vi,steps:mS}=q8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zs,!0),Z8=se.createContext({strict:!1}),r3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},b0={};for(const n in r3)b0[n]={isEnabled:e=>r3[n].some(t=>!!e[t])};function hte(n){for(const e in n)b0[e]={...b0[e],...n[e]}}const dte=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wx(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||dte.has(n)}let Q8=n=>!Wx(n);function fte(n){n&&(Q8=e=>e.startsWith("on")?!Wx(e):n(e))}try{fte(require("@emotion/is-prop-valid").default)}catch{}function gte(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(Q8(i)||t===!0&&Wx(i)||!e&&!Wx(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function mte(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const RE=se.createContext({});function xp(n){return typeof n=="string"||Array.isArray(n)}function CE(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Gb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bb=["initial",...Gb];function PE(n){return CE(n.animate)||Bb.some(e=>xp(n[e]))}function J8(n){return!!(PE(n)||n.variants)}function pte(n,e){if(PE(n)){const{initial:t,animate:r}=n;return{initial:t===!1||xp(t)?t:void 0,animate:xp(r)?r:void 0}}return n.inherit!==!1?e:{}}function yte(n){const{initial:e,animate:t}=pte(n,se.useContext(RE));return se.useMemo(()=>({initial:e,animate:t}),[i3(e),i3(t)])}function i3(n){return Array.isArray(n)?n.join(" "):n}const _te=Symbol.for("motionComponentSymbol");function Pf(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function xte(n,e,t){return se.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Pf(t)&&(t.current=r))},[e])}const Ub=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vte="framerAppearId",ej="data-"+Ub(vte),{schedule:zb}=q8(queueMicrotask,!1),tj=se.createContext({});function Ete(n,e,t,r,i){var s,a;const{visualElement:o}=se.useContext(RE),l=se.useContext(Z8),u=se.useContext(bE),h=se.useContext(Fb).reducedMotion,f=se.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,y=se.useContext(tj);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&wte(f.current,t,i,y);const v=se.useRef(!1);se.useInsertionEffect(()=>{g&&v.current&&g.update(t,u)});const x=t[ej],w=se.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,x)));return Y8(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),zb.render(g.render),w.current&&g.animationState&&g.animationState.animateChanges())}),se.useEffect(()=>{g&&(!w.current&&g.animationState&&g.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,x)}),w.current=!1))}),g}function wte(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:nj(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Pf(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function nj(n){if(n)return n.options.allowProjection!==!1?n.projection:nj(n.parent)}function Ste({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,a;n&&hte(n);function o(u,h){let f;const g={...se.useContext(Fb),...u,layoutId:Tte(u)},{isStatic:y}=g,v=yte(u),x=r(u,y);if(!y&&jb){Ite();const w=Ate(g);f=w.MeasureLayout,v.visualElement=Ete(i,x,g,e,w.ProjectionNode)}return p.jsxs(RE.Provider,{value:v,children:[f&&v.visualElement?p.jsx(f,{visualElement:v.visualElement,...g}):null,t(i,u,xte(x,v.visualElement,h),x,y,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=se.forwardRef(o);return l[_te]=i,l}function Tte({layoutId:n}){const e=se.useContext(Ob).id;return e&&n!==void 0?e+"-"+n:n}function Ite(n,e){se.useContext(Z8).strict}function Ate(n){const{drag:e,layout:t}=b0;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const bte=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $b(n){return typeof n!="string"||n.includes("-")?!1:!!(bte.indexOf(n)>-1||/[A-Z]/u.test(n))}function s3(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Wb(n,e,t,r){if(typeof e=="function"){const[i,s]=s3(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=s3(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const nI=n=>Array.isArray(n),Rte=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Cte=n=>nI(n)?n[n.length-1]||0:n,Ui=n=>!!(n&&n.getVelocity);function B_(n){const e=Ui(n)?n.get():n;return Rte(e)?e.toValue():e}function Pte({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const a={latestValues:kte(r,i,s,n),renderState:e()};return t&&(a.onMount=o=>t({props:r,current:o,...a}),a.onUpdate=o=>t(o)),a}const rj=n=>(e,t)=>{const r=se.useContext(RE),i=se.useContext(bE),s=()=>Pte(n,e,r,i);return t?s():Db(s)};function kte(n,e,t,r){const i={},s=r(n,{});for(const g in s)i[g]=B_(s[g]);let{initial:a,animate:o}=n;const l=PE(n),u=J8(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=t?t.initial===!1:!1;h=h||a===!1;const f=h?o:a;if(f&&typeof f!="boolean"&&!CE(f)){const g=Array.isArray(f)?f:[f];for(let y=0;y<g.length;y++){const v=Wb(n,g[y]);if(v){const{transitionEnd:x,transition:w,...T}=v;for(const I in T){let b=T[I];if(Array.isArray(b)){const N=h?b.length-1:0;b=b[N]}b!==null&&(i[I]=b)}for(const I in x)i[I]=x[I]}}}return i}const U0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fd=new Set(U0),ij=n=>e=>typeof e=="string"&&e.startsWith(n),sj=ij("--"),Mte=ij("var(--"),Hb=n=>Mte(n)?Nte.test(n.split("/*")[0].trim()):!1,Nte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,aj=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ul=(n,e,t)=>t>e?e:t<n?n:t,z0={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},vp={...z0,transform:n=>Ul(0,1,n)},s_={...z0,default:1},y1=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Mc=y1("deg"),Go=y1("%"),Dt=y1("px"),Lte=y1("vh"),Ote=y1("vw"),a3={...Go,parse:n=>Go.parse(n)/100,transform:n=>Go.transform(n*100)},Dte={borderWidth:Dt,borderTopWidth:Dt,borderRightWidth:Dt,borderBottomWidth:Dt,borderLeftWidth:Dt,borderRadius:Dt,radius:Dt,borderTopLeftRadius:Dt,borderTopRightRadius:Dt,borderBottomRightRadius:Dt,borderBottomLeftRadius:Dt,width:Dt,maxWidth:Dt,height:Dt,maxHeight:Dt,top:Dt,right:Dt,bottom:Dt,left:Dt,padding:Dt,paddingTop:Dt,paddingRight:Dt,paddingBottom:Dt,paddingLeft:Dt,margin:Dt,marginTop:Dt,marginRight:Dt,marginBottom:Dt,marginLeft:Dt,backgroundPositionX:Dt,backgroundPositionY:Dt},Fte={rotate:Mc,rotateX:Mc,rotateY:Mc,rotateZ:Mc,scale:s_,scaleX:s_,scaleY:s_,scaleZ:s_,skew:Mc,skewX:Mc,skewY:Mc,distance:Dt,translateX:Dt,translateY:Dt,translateZ:Dt,x:Dt,y:Dt,z:Dt,perspective:Dt,transformPerspective:Dt,opacity:vp,originX:a3,originY:a3,originZ:Dt},o3={...z0,transform:Math.round},Kb={...Dte,...Fte,zIndex:o3,size:Dt,fillOpacity:vp,strokeOpacity:vp,numOctaves:o3},jte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Vte=U0.length;function Gte(n,e,t){let r="",i=!0;for(let s=0;s<Vte;s++){const a=U0[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=aj(o,Kb[a]);if(!l){i=!1;const h=jte[a]||a;r+=`${h}(${u}) `}t&&(e[a]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Yb(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(fd.has(l)){a=!0;continue}else if(sj(l)){i[l]=u;continue}else{const h=aj(u,Kb[l]);l.startsWith("origin")?(o=!0,s[l]=h):r[l]=h}}if(e.transform||(a||t?r.transform=Gte(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${u} ${h}`}}const Bte={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ute={offset:"strokeDashoffset",array:"strokeDasharray"};function zte(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Bte:Ute;n[s.offset]=Dt.transform(-r);const a=Dt.transform(e),o=Dt.transform(t);n[s.array]=`${a} ${o}`}function l3(n,e,t){return typeof n=="string"?n:Dt.transform(e+t*n)}function $te(n,e,t){const r=l3(e,n.x,n.width),i=l3(t,n.y,n.height);return`${r} ${i}`}function Xb(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},h,f){if(Yb(n,u,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:y,dimensions:v}=n;g.transform&&(v&&(y.transform=g.transform),delete g.transform),v&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=$te(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),a!==void 0&&zte(g,a,o,l,!1)}const qb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),oj=()=>({...qb(),attrs:{}}),Zb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function lj(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const cj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uj(n,e,t,r){lj(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(cj.has(i)?i:Ub(i),e.attrs[i])}const Hx={};function Wte(n){Object.assign(Hx,n)}function hj(n,{layout:e,layoutId:t}){return fd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Hx[n]||n==="opacity")}function Qb(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(Ui(i[a])||e.style&&Ui(e.style[a])||hj(a,n)||((r=t?.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function dj(n,e,t){const r=Qb(n,e,t);for(const i in n)if(Ui(n[i])||Ui(e[i])){const s=U0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function Hte(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const c3=["x","y","width","height","cx","cy","r"],Kte={useVisualState:rj({scrapeMotionValuesFromProps:dj,createRenderState:oj,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const o in i)if(fd.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<c3.length;o++){const l=c3[o];n[l]!==e[l]&&(a=!0)}a&&er.read(()=>{Hte(t,r),er.render(()=>{Xb(r,i,Zb(t.tagName),n.transformTemplate),uj(t,r)})})}})},Yte={useVisualState:rj({scrapeMotionValuesFromProps:Qb,createRenderState:qb})};function fj(n,e,t){for(const r in e)!Ui(e[r])&&!hj(r,t)&&(n[r]=e[r])}function Xte({transformTemplate:n},e){return se.useMemo(()=>{const t=qb();return Yb(t,e,n),Object.assign({},t.vars,t.style)},[e])}function qte(n,e){const t=n.style||{},r={};return fj(r,t,n),Object.assign(r,Xte(n,e)),r}function Zte(n,e){const t={},r=qte(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function Qte(n,e,t,r){const i=se.useMemo(()=>{const s=oj();return Xb(s,e,Zb(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};fj(s,n.style,n),i.style={...s,...i.style}}return i}function Jte(n=!1){return(t,r,i,{latestValues:s},a)=>{const l=($b(t)?Qte:Zte)(r,s,a,t),u=gte(r,typeof t=="string",n),h=t!==se.Fragment?{...u,...l,ref:i}:{},{children:f}=r,g=se.useMemo(()=>Ui(f)?f.get():f,[f]);return se.createElement(t,{...h,children:g})}}function ene(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...$b(r)?Kte:Yte,preloadedFeatures:n,useRender:Jte(i),createVisualElement:e,Component:r};return Ste(a)}}function gj(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function kE(n,e,t){const r=n.getProps();return Wb(r,e,t!==void 0?t:r.custom,n)}const tne=Vb(()=>window.ScrollTimeline!==void 0);class nne{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(tne()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class rne extends nne{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Jb(n,e){return n?n[e]||n.default||n:void 0}const rI=2e4;function mj(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<rI;)e+=t,r=n.next(e);return e>=rI?1/0:e}function eR(n){return typeof n=="function"}function u3(n,e){n.timeline=e,n.onfinish=null}const tR=n=>Array.isArray(n)&&typeof n[0]=="number",ine={linearEasing:void 0};function sne(n,e){const t=Vb(n);return()=>{var r;return(r=ine[e])!==null&&r!==void 0?r:t()}}const Kx=sne(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pj=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(A0(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function yj(n){return!!(typeof n=="function"&&Kx()||!n||typeof n=="string"&&(n in iI||Kx())||tR(n)||Array.isArray(n)&&n.every(yj))}const sm=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,iI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sm([0,.65,.55,1]),circOut:sm([.55,0,1,.45]),backIn:sm([.31,.01,.66,-.59]),backOut:sm([.33,1.53,.69,.99])};function _j(n,e){if(n)return typeof n=="function"&&Kx()?pj(n,e):tR(n)?sm(n):Array.isArray(n)?n.map(t=>_j(t,e)||iI.easeOut):iI[n]}const Va={x:!1,y:!1};function xj(){return Va.x||Va.y}function ane(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function vj(n,e){const t=ane(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function h3(n){return e=>{e.pointerType==="touch"||xj()||n(e)}}function one(n,e,t={}){const[r,i,s]=vj(n,t),a=h3(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const h=h3(f=>{u(f),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const Ej=(n,e)=>e?n===e?!0:Ej(n,e.parentElement):!1,nR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,lne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cne(n){return lne.has(n.tagName)||n.tabIndex!==-1}const am=new WeakSet;function d3(n){return e=>{e.key==="Enter"&&n(e)}}function pS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const une=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=d3(()=>{if(am.has(t))return;pS(t,"down");const i=d3(()=>{pS(t,"up")}),s=()=>pS(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function f3(n){return nR(n)&&!xj()}function hne(n,e,t={}){const[r,i,s]=vj(n,t),a=o=>{const l=o.currentTarget;if(!f3(o)||am.has(l))return;am.add(l);const u=e(o),h=(y,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),!(!f3(y)||!am.has(l))&&(am.delete(l),typeof u=="function"&&u(y,{success:v}))},f=y=>{h(y,t.useGlobalTarget||Ej(l,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!cne(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>une(u,i),i)}),s}function dne(n){return n==="x"||n==="y"?Va[n]?null:(Va[n]=!0,()=>{Va[n]=!1}):Va.x||Va.y?null:(Va.x=Va.y=!0,()=>{Va.x=Va.y=!1})}const wj=new Set(["width","height","top","left","right","bottom",...U0]);let U_;function fne(){U_=void 0}const Bo={now:()=>(U_===void 0&&Bo.set(vi.isProcessing||lte.useManualTiming?vi.timestamp:performance.now()),U_),set:n=>{U_=n,queueMicrotask(fne)}};function rR(n,e){n.indexOf(e)===-1&&n.push(e)}function iR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class sR{constructor(){this.subscriptions=[]}add(e){return rR(this.subscriptions,e),()=>iR(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Sj(n,e){return e?n*(1e3/e):0}const g3=30,gne=n=>!isNaN(parseFloat(n));class mne{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Bo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Bo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=gne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new sR);const r=this.events[e].add(t);return e==="change"?()=>{r(),er.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Bo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>g3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,g3);return Sj(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ep(n,e){return new mne(n,e)}function pne(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ep(t))}function yne(n,e){const t=kE(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const o=Cte(s[a]);pne(n,a,o)}}function _ne(n){return!!(Ui(n)&&n.add)}function sI(n,e){const t=n.getValue("willChange");if(_ne(t))return t.add(e)}function Tj(n){return n.props[ej]}const Ij=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,xne=1e-7,vne=12;function Ene(n,e,t,r,i){let s,a,o=0;do a=e+(t-e)/2,s=Ij(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>xne&&++o<vne);return a}function _1(n,e,t,r){if(n===e&&t===r)return Zs;const i=s=>Ene(s,0,1,n,t);return s=>s===0||s===1?s:Ij(i(s),e,r)}const Aj=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,bj=n=>e=>1-n(1-e),Rj=_1(.33,1.53,.69,.99),aR=bj(Rj),Cj=Aj(aR),Pj=n=>(n*=2)<1?.5*aR(n):.5*(2-Math.pow(2,-10*(n-1))),oR=n=>1-Math.sin(Math.acos(n)),kj=bj(oR),Mj=Aj(oR),Nj=n=>/^0[^.\s]+$/u.test(n);function wne(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Nj(n):!0}const Tm=n=>Math.round(n*1e5)/1e5,lR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Sne(n){return n==null}const Tne=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cR=(n,e)=>t=>!!(typeof t=="string"&&Tne.test(t)&&t.startsWith(n)||e&&!Sne(t)&&Object.prototype.hasOwnProperty.call(t,e)),Lj=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(lR);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Ine=n=>Ul(0,255,n),yS={...z0,transform:n=>Math.round(Ine(n))},wh={test:cR("rgb","red"),parse:Lj("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+yS.transform(n)+", "+yS.transform(e)+", "+yS.transform(t)+", "+Tm(vp.transform(r))+")"};function Ane(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const aI={test:cR("#"),parse:Ane,transform:wh.transform},kf={test:cR("hsl","hue"),parse:Lj("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Go.transform(Tm(e))+", "+Go.transform(Tm(t))+", "+Tm(vp.transform(r))+")"},Fi={test:n=>wh.test(n)||aI.test(n)||kf.test(n),parse:n=>wh.test(n)?wh.parse(n):kf.test(n)?kf.parse(n):aI.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?wh.transform(n):kf.transform(n)},bne=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Rne(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(lR))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(bne))===null||t===void 0?void 0:t.length)||0)>0}const Oj="number",Dj="color",Cne="var",Pne="var(",m3="${}",kne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wp(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(kne,l=>(Fi.test(l)?(r.color.push(s),i.push(Dj),t.push(Fi.parse(l))):l.startsWith(Pne)?(r.var.push(s),i.push(Cne),t.push(l)):(r.number.push(s),i.push(Oj),t.push(parseFloat(l))),++s,m3)).split(m3);return{values:t,split:o,indexes:r,types:i}}function Fj(n){return wp(n).values}function jj(n){const{split:e,types:t}=wp(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===Oj?s+=Tm(i[a]):o===Dj?s+=Fi.transform(i[a]):s+=i[a]}return s}}const Mne=n=>typeof n=="number"?0:n;function Nne(n){const e=Fj(n);return jj(n)(e.map(Mne))}const mu={test:Rne,parse:Fj,createTransformer:jj,getAnimatableNone:Nne},Lne=new Set(["brightness","contrast","saturate","opacity"]);function One(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(lR)||[];if(!r)return n;const i=t.replace(r,"");let s=Lne.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const Dne=/\b([a-z-]*)\(.*?\)/gu,oI={...mu,getAnimatableNone:n=>{const e=n.match(Dne);return e?e.map(One).join(" "):n}},Fne={...Kb,color:Fi,backgroundColor:Fi,outlineColor:Fi,fill:Fi,stroke:Fi,borderColor:Fi,borderTopColor:Fi,borderRightColor:Fi,borderBottomColor:Fi,borderLeftColor:Fi,filter:oI,WebkitFilter:oI},uR=n=>Fne[n];function Vj(n,e){let t=uR(n);return t!==oI&&(t=mu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const jne=new Set(["auto","none","0"]);function Vne(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!jne.has(s)&&wp(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=Vj(t,i)}const p3=n=>n===z0||n===Dt,y3=(n,e)=>parseFloat(n.split(", ")[e]),_3=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return y3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?y3(s[1],n):0}},Gne=new Set(["x","y","z"]),Bne=U0.filter(n=>!Gne.has(n));function Une(n){const e=[];return Bne.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const R0={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:_3(4,13),y:_3(5,14)};R0.translateX=R0.x;R0.translateY=R0.y;const kh=new Set;let lI=!1,cI=!1;function Gj(){if(cI){const n=Array.from(kh).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=Une(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}cI=!1,lI=!1,kh.forEach(n=>n.complete()),kh.clear()}function Bj(){kh.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(cI=!0)})}function zne(){Bj(),Gj()}class hR{constructor(e,t,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(kh.add(this),lI||(lI=!0,er.read(Bj),er.resolveKeyframes(Gj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const l=r.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),kh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,kh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Uj=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),$ne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Wne(n){const e=$ne.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function zj(n,e,t=1){const[r,i]=Wne(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return Uj(a)?parseFloat(a):a}return Hb(i)?zj(i,e,t+1):i}const $j=n=>e=>e.test(n),Hne={test:n=>n==="auto",parse:n=>n},Wj=[z0,Dt,Go,Mc,Ote,Lte,Hne],x3=n=>Wj.find($j(n));class Hj extends hR{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Hb(u))){const h=zj(u,t.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!wj.has(r)||e.length!==2)return;const[i,s]=e,a=x3(i),o=x3(s);if(a!==o)if(p3(a)&&p3(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)wne(e[i])&&r.push(i);r.length&&Vne(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=R0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=R0[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const v3=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(mu.test(n)||n==="0")&&!n.startsWith("url("));function Kne(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Yne(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=v3(i,e),o=v3(s,e);return!a||!o?!1:Kne(n)||(t==="spring"||eR(t))&&r}const Xne=n=>n!==null;function ME(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(Xne),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const qne=40;class Kj{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Bo.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>qne?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&zne(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Bo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!Yne(e,r,i,s))if(a)this.options.duration=0;else{l&&l(ME(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const fr=(n,e,t)=>n+(e-n)*t;function _S(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Zne({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=_S(l,o,n+1/3),s=_S(l,o,n),a=_S(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Yx(n,e){return t=>t>0?e:n}const xS=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Qne=[aI,wh,kf],Jne=n=>Qne.find(e=>e.test(n));function E3(n){const e=Jne(n);if(!e)return!1;let t=e.parse(n);return e===kf&&(t=Zne(t)),t}const w3=(n,e)=>{const t=E3(n),r=E3(e);if(!t||!r)return Yx(n,e);const i={...t};return s=>(i.red=xS(t.red,r.red,s),i.green=xS(t.green,r.green,s),i.blue=xS(t.blue,r.blue,s),i.alpha=fr(t.alpha,r.alpha,s),wh.transform(i))},ere=(n,e)=>t=>e(n(t)),x1=(...n)=>n.reduce(ere),uI=new Set(["none","hidden"]);function tre(n,e){return uI.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function nre(n,e){return t=>fr(n,e,t)}function dR(n){return typeof n=="number"?nre:typeof n=="string"?Hb(n)?Yx:Fi.test(n)?w3:sre:Array.isArray(n)?Yj:typeof n=="object"?Fi.test(n)?w3:rre:Yx}function Yj(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>dR(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function rre(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=dR(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function ire(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=n.indexes[a][i[a]],l=(t=n.values[o])!==null&&t!==void 0?t:0;r[s]=l,i[a]++}return r}const sre=(n,e)=>{const t=mu.createTransformer(e),r=wp(n),i=wp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?uI.has(n)&&!i.values.length||uI.has(e)&&!r.values.length?tre(n,e):x1(Yj(ire(r,i),i.values),t):Yx(n,e)};function Xj(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?fr(n,e,t):dR(n)(n,e)}const are=5;function qj(n,e,t){const r=Math.max(e-are,0);return Sj(t-n(r),e-r)}const xr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vS=.001;function ore({duration:n=xr.duration,bounce:e=xr.bounce,velocity:t=xr.velocity,mass:r=xr.mass}){let i,s,a=1-e;a=Ul(xr.minDamping,xr.maxDamping,a),n=Ul(xr.minDuration,xr.maxDuration,Nl(n)),a<1?(i=u=>{const h=u*a,f=h*n,g=h-t,y=hI(u,a),v=Math.exp(-f);return vS-g/y*v},s=u=>{const f=u*a*n,g=f*t+t,y=Math.pow(a,2)*Math.pow(u,2)*n,v=Math.exp(-f),x=hI(Math.pow(u,2),a);return(-i(u)+vS>0?-1:1)*((g-y)*v)/x}):(i=u=>{const h=Math.exp(-u*n),f=(u-t)*n+1;return-vS+h*f},s=u=>{const h=Math.exp(-u*n),f=(t-u)*(n*n);return h*f});const o=5/n,l=cre(i,s,o);if(n=Ml(n),isNaN(l))return{stiffness:xr.stiffness,damping:xr.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:n}}}const lre=12;function cre(n,e,t){let r=t;for(let i=1;i<lre;i++)r=r-n(r)/e(r);return r}function hI(n,e){return n*Math.sqrt(1-e*e)}const ure=["duration","bounce"],hre=["stiffness","damping","mass"];function S3(n,e){return e.some(t=>n[t]!==void 0)}function dre(n){let e={velocity:xr.velocity,stiffness:xr.stiffness,damping:xr.damping,mass:xr.mass,isResolvedFromDuration:!1,...n};if(!S3(n,hre)&&S3(n,ure))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Ul(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:xr.mass,stiffness:i,damping:s}}else{const t=ore(n);e={...e,...t,mass:xr.mass},e.isResolvedFromDuration=!0}return e}function Zj(n=xr.visualDuration,e=xr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:f,velocity:g,isResolvedFromDuration:y}=dre({...t,velocity:-Nl(t.velocity||0)}),v=g||0,x=u/(2*Math.sqrt(l*h)),w=a-s,T=Nl(Math.sqrt(l/h)),I=Math.abs(w)<5;r||(r=I?xr.restSpeed.granular:xr.restSpeed.default),i||(i=I?xr.restDelta.granular:xr.restDelta.default);let b;if(x<1){const F=hI(T,x);b=W=>{const M=Math.exp(-x*T*W);return a-M*((v+x*T*w)/F*Math.sin(F*W)+w*Math.cos(F*W))}}else if(x===1)b=F=>a-Math.exp(-T*F)*(w+(v+T*w)*F);else{const F=T*Math.sqrt(x*x-1);b=W=>{const M=Math.exp(-x*T*W),C=Math.min(F*W,300);return a-M*((v+x*T*w)*Math.sinh(C)+F*w*Math.cosh(C))/F}}const N={calculatedDuration:y&&f||null,next:F=>{const W=b(F);if(y)o.done=F>=f;else{let M=0;x<1&&(M=F===0?Ml(v):qj(b,F,W));const C=Math.abs(M)<=r,P=Math.abs(a-W)<=i;o.done=C&&P}return o.value=o.done?a:W,o},toString:()=>{const F=Math.min(mj(N),rI),W=pj(M=>N.next(F*M).value,F,30);return F+"ms "+W}};return N}function T3({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:h}){const f=n[0],g={done:!1,value:f},y=C=>o!==void 0&&C<o||l!==void 0&&C>l,v=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let x=t*e;const w=f+x,T=a===void 0?w:a(w);T!==w&&(x=T-f);const I=C=>-x*Math.exp(-C/r),b=C=>T+I(C),N=C=>{const P=I(C),L=b(C);g.done=Math.abs(P)<=u,g.value=g.done?T:L};let F,W;const M=C=>{y(g.value)&&(F=C,W=Zj({keyframes:[g.value,v(g.value)],velocity:qj(b,C,g.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return M(0),{calculatedDuration:null,next:C=>{let P=!1;return!W&&F===void 0&&(P=!0,N(C),M(C)),F!==void 0&&C>=F?W.next(C-F):(!P&&N(C),g)}}}const fre=_1(.42,0,1,1),gre=_1(0,0,.58,1),Qj=_1(.42,0,.58,1),mre=n=>Array.isArray(n)&&typeof n[0]!="number",pre={linear:Zs,easeIn:fre,easeInOut:Qj,easeOut:gre,circIn:oR,circInOut:Mj,circOut:kj,backIn:aR,backInOut:Cj,backOut:Rj,anticipate:Pj},I3=n=>{if(tR(n)){X8(n.length===4);const[e,t,r,i]=n;return _1(e,t,r,i)}else if(typeof n=="string")return pre[n];return n};function yre(n,e,t){const r=[],i=t||Xj,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||Zs:e;o=x1(l,o)}r.push(o)}return r}function _re(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(X8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=yre(e,r,i),l=o.length,u=h=>{if(a&&h<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const g=A0(n[f],n[f+1],h);return o[f](g)};return t?h=>u(Ul(n[0],n[s-1],h)):u}function xre(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=A0(0,e,r);n.push(fr(t,1,i))}}function vre(n){const e=[0];return xre(e,n.length-1),e}function Ere(n,e){return n.map(t=>t*e)}function wre(n,e){return n.map(()=>e||Qj).splice(0,n.length-1)}function Xx({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=mre(r)?r.map(I3):I3(r),s={done:!1,value:e[0]},a=Ere(t&&t.length===e.length?t:vre(e),n),o=_re(a,e,{ease:Array.isArray(i)?i:wre(e,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const Sre=n=>{const e=({timestamp:t})=>n(t);return{start:()=>er.update(e,!0),stop:()=>gu(e),now:()=>vi.isProcessing?vi.timestamp:Bo.now()}},Tre={decay:T3,inertia:T3,tween:Xx,keyframes:Xx,spring:Zj},Ire=n=>n/100;class fR extends Kj{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,a=i?.KeyframeResolver||hR,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=eR(t)?t:Tre[t]||Xx;let l,u;o!==Xx&&typeof e[0]!="number"&&(l=x1(Ire,Xj(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=mj(h));const{calculatedDuration:f}=h,g=f+i,y=g*(r+1)-i;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:g,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:y,repeatType:v,repeatDelay:x,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-g*(this.speed>=0?1:-1),I=this.speed>=0?T<0:T>h;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let b=this.currentTime,N=s;if(y){const C=Math.min(this.currentTime,h)/f;let P=Math.floor(C),L=C%1;!L&&C>=1&&(L=1),L===1&&P--,P=Math.min(P,y+1),P%2&&(v==="reverse"?(L=1-L,x&&(L-=x/f)):v==="mirror"&&(N=a)),b=Ul(0,1,L)*f}const F=I?{done:!1,value:l[0]}:N.next(b);o&&(F.value=o(F.value));let{done:W}=F;!I&&u!==null&&(W=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return M&&i!==void 0&&(F.value=ME(l,this.options,i)),w&&w(F.value),M&&this.finish(),F}get duration(){const{resolved:e}=this;return e?Nl(e.calculatedDuration):0}get time(){return Nl(this.currentTime)}set time(e){e=Ml(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Nl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Sre,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Are=new Set(["opacity","clipPath","filter","transform"]);function bre(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const h=_j(o,i);return Array.isArray(h)&&(u.easing=h),n.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const Rre=Vb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),qx=10,Cre=2e4;function Pre(n){return eR(n.type)||n.type==="spring"||!yj(n.ease)}function kre(n,e){const t=new fR({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<Cre;)r=t.sample(s),i.push(r.value),s+=qx;return{times:void 0,keyframes:i,duration:s-qx,ease:"linear"}}const Jj={anticipate:Pj,backInOut:Cj,circInOut:Mj};function Mre(n){return n in Jj}class A3 extends Kj{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new Hj(s,(a,o)=>this.onKeyframesResolved(a,o),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Kx()&&Mre(s)&&(s=Jj[s]),Pre(this.options)){const{onComplete:f,onUpdate:g,motionValue:y,element:v,...x}=this.options,w=kre(e,x);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,i=w.times,s=w.ease,a="keyframes"}const h=bre(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(u3(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;o.set(ME(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Nl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Nl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Ml(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Zs;const{animation:r}=t;u3(r,e)}return Zs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:f,element:g,...y}=this.options,v=new fR({...y,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),x=Ml(this.time);u.setWithVelocity(v.sample(x-qx).value,v.sample(x).value,qx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return Rre()&&r&&Are.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const Nre={type:"spring",stiffness:500,damping:25,restSpeed:10},Lre=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Ore={type:"keyframes",duration:.8},Dre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Fre=(n,{keyframes:e})=>e.length>2?Ore:fd.has(n)?n.startsWith("scale")?Lre(e[1]):Nre:Dre;function jre({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const gR=(n,e,t,r={},i,s)=>a=>{const o=Jb(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ml(l);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:i};jre(o)||(h={...h,...Fre(n,h)}),h.duration&&(h.duration=Ml(h.duration)),h.repeatDelay&&(h.repeatDelay=Ml(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const g=ME(h.keyframes,o);if(g!==void 0)return er.update(()=>{h.onUpdate(g),h.onComplete()}),new rne([])}return!s&&A3.supports(h)?new A3(h):new fR(h)};function Vre({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function e9(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:a=n.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const f in l){const g=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),y=l[f];if(y===void 0||h&&Vre(h,f))continue;const v={delay:t,...Jb(a||{},f)};let x=!1;if(window.MotionHandoffAnimation){const T=Tj(n);if(T){const I=window.MotionHandoffAnimation(T,f,er);I!==null&&(v.startTime=I,x=!0)}}sI(n,f),g.start(gR(f,g,y,n.shouldReduceMotion&&wj.has(f)?{type:!1}:v,n,x));const w=g.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{er.update(()=>{o&&yne(n,o)})}),u}function dI(n,e,t={}){var r;const i=kE(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(e9(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=s;return Gre(n,e,h+u,f,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>h())}else return Promise.all([a(),o(t.delay)])}function Gre(n,e,t=0,r=0,i=1,s){const a=[],o=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(n.variantChildren).sort(Bre).forEach((u,h)=>{u.notify("AnimationStart",e),a.push(dI(u,e,{...s,delay:t+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function Bre(n,e){return n.sortNodePosition(e)}function Ure(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>dI(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=dI(n,e,t);else{const i=typeof e=="function"?kE(n,e,t.custom):e;r=Promise.all(e9(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const zre=Bb.length;function t9(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?t9(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<zre;t++){const r=Bb[t],i=n.props[r];(xp(i)||i===!1)&&(e[r]=i)}return e}const $re=[...Gb].reverse(),Wre=Gb.length;function Hre(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Ure(n,t,r)))}function Kre(n){let e=Hre(n),t=b3(),r=!0;const i=l=>(u,h)=>{var f;const g=kE(n,h,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(g){const{transition:y,transitionEnd:v,...x}=g;u={...u,...x,...v}}return u};function s(l){e=l(n)}function a(l){const{props:u}=n,h=t9(n.parent)||{},f=[],g=new Set;let y={},v=1/0;for(let w=0;w<Wre;w++){const T=$re[w],I=t[T],b=u[T]!==void 0?u[T]:h[T],N=xp(b),F=T===l?I.isActive:null;F===!1&&(v=w);let W=b===h[T]&&b!==u[T]&&N;if(W&&r&&n.manuallyAnimateOnMount&&(W=!1),I.protectedKeys={...y},!I.isActive&&F===null||!b&&!I.prevProp||CE(b)||typeof b=="boolean")continue;const M=Yre(I.prevProp,b);let C=M||T===l&&I.isActive&&!W&&N||w>v&&N,P=!1;const L=Array.isArray(b)?b:[b];let O=L.reduce(i(T),{});F===!1&&(O={});const{prevResolvedValues:U={}}=I,j={...U,...O},xe=ke=>{C=!0,g.has(ke)&&(P=!0,g.delete(ke)),I.needsAnimating[ke]=!0;const ce=n.getValue(ke);ce&&(ce.liveStyle=!1)};for(const ke in j){const ce=O[ke],Ie=U[ke];if(y.hasOwnProperty(ke))continue;let Te=!1;nI(ce)&&nI(Ie)?Te=!gj(ce,Ie):Te=ce!==Ie,Te?ce!=null?xe(ke):g.add(ke):ce!==void 0&&g.has(ke)?xe(ke):I.protectedKeys[ke]=!0}I.prevProp=b,I.prevResolvedValues=O,I.isActive&&(y={...y,...O}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(W&&M)||P)&&f.push(...L.map(ke=>({animation:ke,options:{type:T}})))}if(g.size){const w={};g.forEach(T=>{const I=n.getBaseTarget(T),b=n.getValue(T);b&&(b.liveStyle=!0),w[T]=I??null}),f.push({animation:w})}let x=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(g=>{var y;return(y=g.animationState)===null||y===void 0?void 0:y.setActive(l,u)}),t[l].isActive=u;const f=a(l);for(const g in t)t[g].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=b3(),r=!0}}}function Yre(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!gj(e,n):!1}function eh(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function b3(){return{animate:eh(!0),whileInView:eh(),whileHover:eh(),whileTap:eh(),whileDrag:eh(),whileFocus:eh(),exit:eh()}}class bu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Xre extends bu{constructor(e){super(e),e.animationState||(e.animationState=Kre(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();CE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let qre=0;class Zre extends bu{constructor(){super(...arguments),this.id=qre++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Qre={animation:{Feature:Xre},exit:{Feature:Zre}};function Sp(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function v1(n){return{point:{x:n.pageX,y:n.pageY}}}const Jre=n=>e=>nR(e)&&n(e,v1(e));function Im(n,e,t,r){return Sp(n,e,Jre(t),r)}const R3=(n,e)=>Math.abs(n-e);function eie(n,e){const t=R3(n.x,e.x),r=R3(n.y,e.y);return Math.sqrt(t**2+r**2)}class n9{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=wS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=eie(f.offset,{x:0,y:0})>=3;if(!g&&!y)return;const{point:v}=f,{timestamp:x}=vi;this.history.push({...v,timestamp:x});const{onStart:w,onMove:T}=this.handlers;g||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,f)},this.handlePointerMove=(f,g)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ES(g,this.transformPagePoint),er.update(this.updatePoint,!0)},this.handlePointerUp=(f,g)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=wS(f.type==="pointercancel"?this.lastMoveEventInfo:ES(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,w),v&&v(f,w)},!nR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=v1(e),o=ES(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=vi;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,wS(o,this.history)),this.removeListeners=x1(Im(this.contextWindow,"pointermove",this.handlePointerMove),Im(this.contextWindow,"pointerup",this.handlePointerUp),Im(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gu(this.updatePoint)}}function ES(n,e){return e?{point:e(n.point)}:n}function C3(n,e){return{x:n.x-e.x,y:n.y-e.y}}function wS({point:n},e){return{point:n,delta:C3(n,r9(e)),offset:C3(n,tie(e)),velocity:nie(e,.1)}}function tie(n){return n[0]}function r9(n){return n[n.length-1]}function nie(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=r9(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ml(e)));)t--;if(!r)return{x:0,y:0};const s=Nl(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const i9=1e-4,rie=1-i9,iie=1+i9,s9=.01,sie=0-s9,aie=0+s9;function ta(n){return n.max-n.min}function oie(n,e,t){return Math.abs(n-e)<=t}function P3(n,e,t,r=.5){n.origin=r,n.originPoint=fr(e.min,e.max,n.origin),n.scale=ta(t)/ta(e),n.translate=fr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=rie&&n.scale<=iie||isNaN(n.scale))&&(n.scale=1),(n.translate>=sie&&n.translate<=aie||isNaN(n.translate))&&(n.translate=0)}function Am(n,e,t,r){P3(n.x,e.x,t.x,r?r.originX:void 0),P3(n.y,e.y,t.y,r?r.originY:void 0)}function k3(n,e,t){n.min=t.min+e.min,n.max=n.min+ta(e)}function lie(n,e,t){k3(n.x,e.x,t.x),k3(n.y,e.y,t.y)}function M3(n,e,t){n.min=e.min-t.min,n.max=n.min+ta(e)}function bm(n,e,t){M3(n.x,e.x,t.x),M3(n.y,e.y,t.y)}function cie(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?fr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?fr(t,n,r.max):Math.min(n,t)),n}function N3(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function uie(n,{top:e,left:t,bottom:r,right:i}){return{x:N3(n.x,t,i),y:N3(n.y,e,r)}}function L3(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function hie(n,e){return{x:L3(n.x,e.x),y:L3(n.y,e.y)}}function die(n,e){let t=.5;const r=ta(n),i=ta(e);return i>r?t=A0(e.min,e.max-r,n.min):r>i&&(t=A0(n.min,n.max-i,e.min)),Ul(0,1,t)}function fie(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const fI=.35;function gie(n=fI){return n===!1?n=0:n===!0&&(n=fI),{x:O3(n,"left","right"),y:O3(n,"top","bottom")}}function O3(n,e,t){return{min:D3(n,e),max:D3(n,t)}}function D3(n,e){return typeof n=="number"?n:n[e]||0}const F3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mf=()=>({x:F3(),y:F3()}),j3=()=>({min:0,max:0}),br=()=>({x:j3(),y:j3()});function ga(n){return[n("x"),n("y")]}function a9({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function mie({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function pie(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function SS(n){return n===void 0||n===1}function gI({scale:n,scaleX:e,scaleY:t}){return!SS(n)||!SS(e)||!SS(t)}function oh(n){return gI(n)||o9(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function o9(n){return V3(n.x)||V3(n.y)}function V3(n){return n&&n!=="0%"}function Zx(n,e,t){const r=n-t,i=e*r;return t+i}function G3(n,e,t,r,i){return i!==void 0&&(n=Zx(n,i,r)),Zx(n,t,r)+e}function mI(n,e=0,t=1,r,i){n.min=G3(n.min,e,t,r,i),n.max=G3(n.max,e,t,r,i)}function l9(n,{x:e,y:t}){mI(n.x,e.translate,e.scale,e.originPoint),mI(n.y,t.translate,t.scale,t.originPoint)}const B3=.999999999999,U3=1.0000000000001;function yie(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Lf(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,l9(n,a)),r&&oh(s.latestValues)&&Lf(n,s.latestValues))}e.x<U3&&e.x>B3&&(e.x=1),e.y<U3&&e.y>B3&&(e.y=1)}function Nf(n,e){n.min=n.min+e,n.max=n.max+e}function z3(n,e,t,r,i=.5){const s=fr(n.min,n.max,i);mI(n,e,t,s,r)}function Lf(n,e){z3(n.x,e.x,e.scaleX,e.scale,e.originX),z3(n.y,e.y,e.scaleY,e.scale,e.originY)}function c9(n,e){return a9(pie(n.getBoundingClientRect(),e))}function _ie(n,e,t){const r=c9(n,t),{scroll:i}=e;return i&&(Nf(r.x,i.offset.x),Nf(r.y,i.offset.y)),r}const u9=({current:n})=>n?n.ownerDocument.defaultView:null,xie=new WeakMap;class vie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=br(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(v1(h).point)},s=(h,f)=>{const{drag:g,dragPropagation:y,onDragStart:v}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dne(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ga(w=>{let T=this.getAxisMotionValue(w).get()||0;if(Go.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const b=I.layout.layoutBox[w];b&&(T=ta(b)*(parseFloat(T)/100))}}this.originPoint[w]=T}),v&&er.postRender(()=>v(h,f)),sI(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(h,f)=>{const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:v,onDrag:x}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=f;if(y&&this.currentDirection===null){this.currentDirection=Eie(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),x&&x(h,f)},o=(h,f)=>this.stop(h,f),l=()=>ga(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new n9(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:u9(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&er.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!a_(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=cie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Pf(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=uie(i.layoutBox,t):this.constraints=!1,this.elastic=gie(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ga(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=fie(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Pf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=_ie(r,i.root,this.visualElement.getTransformPagePoint());let a=hie(i.layout.layoutBox,s);if(t){const o=t(mie(a));this.hasMutatedConstraints=!!o,o&&(a=a9(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=ga(h=>{if(!a_(h,t,this.currentDirection))return;let f=l&&l[h]||{};a&&(f={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return sI(this.visualElement,e),r.start(gR(e,r,0,t,this.visualElement,!1))}stopAnimation(){ga(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ga(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ga(t=>{const{drag:r}=this.getProps();if(!a_(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-fr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Pf(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ga(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=die({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ga(a=>{if(!a_(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(fr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;xie.set(this.visualElement,this);const e=this.visualElement.current,t=Im(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Pf(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),er.read(r);const a=Sp(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ga(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=fI,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function a_(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Eie(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class wie extends bu{constructor(e){super(e),this.removeGroupControls=Zs,this.removeListeners=Zs,this.controls=new vie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zs}unmount(){this.removeGroupControls(),this.removeListeners()}}const $3=n=>(e,t)=>{n&&er.postRender(()=>n(e,t))};class Sie extends bu{constructor(){super(...arguments),this.removePointerDownListener=Zs}onPointerDown(e){this.session=new n9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:u9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:$3(e),onStart:$3(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&er.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Im(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const z_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function W3(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Wg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Dt.test(n))n=parseFloat(n);else return n;const t=W3(n,e.target.x),r=W3(n,e.target.y);return`${t}% ${r}%`}},Tie={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=mu.parse(n);if(i.length>5)return r;const s=mu.createTransformer(n),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=fr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class Iie extends se.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Wte(Aie),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),z_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||er.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function h9(n){const[e,t]=K8(),r=se.useContext(Ob);return p.jsx(Iie,{...n,layoutGroup:r,switchLayoutGroup:se.useContext(tj),isPresent:e,safeToRemove:t})}const Aie={borderRadius:{...Wg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wg,borderTopRightRadius:Wg,borderBottomLeftRadius:Wg,borderBottomRightRadius:Wg,boxShadow:Tie};function bie(n,e,t){const r=Ui(n)?n:Ep(n);return r.start(gR("",r,e,t)),r.animation}function Rie(n){return n instanceof SVGElement&&n.tagName!=="svg"}const Cie=(n,e)=>n.depth-e.depth;class Pie{constructor(){this.children=[],this.isDirty=!1}add(e){rR(this.children,e),this.isDirty=!0}remove(e){iR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Cie),this.isDirty=!1,this.children.forEach(e)}}function kie(n,e){const t=Bo.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(gu(r),n(s-e))};return er.read(r,!0),()=>gu(r)}const d9=["TopLeft","TopRight","BottomLeft","BottomRight"],Mie=d9.length,H3=n=>typeof n=="string"?parseFloat(n):n,K3=n=>typeof n=="number"||Dt.test(n);function Nie(n,e,t,r,i,s){i?(n.opacity=fr(0,t.opacity!==void 0?t.opacity:1,Lie(r)),n.opacityExit=fr(e.opacity!==void 0?e.opacity:1,0,Oie(r))):s&&(n.opacity=fr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<Mie;a++){const o=`border${d9[a]}Radius`;let l=Y3(e,o),u=Y3(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||K3(l)===K3(u)?(n[o]=Math.max(fr(H3(l),H3(u),r),0),(Go.test(u)||Go.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=fr(e.rotate||0,t.rotate||0,r))}function Y3(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Lie=f9(0,.5,kj),Oie=f9(.5,.95,Zs);function f9(n,e,t){return r=>r<n?0:r>e?1:t(A0(n,e,r))}function X3(n,e){n.min=e.min,n.max=e.max}function da(n,e){X3(n.x,e.x),X3(n.y,e.y)}function q3(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Z3(n,e,t,r,i){return n-=e,n=Zx(n,1/t,r),i!==void 0&&(n=Zx(n,1/i,r)),n}function Die(n,e=0,t=1,r=.5,i,s=n,a=n){if(Go.test(e)&&(e=parseFloat(e),e=fr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=fr(s.min,s.max,r);n===s&&(o-=e),n.min=Z3(n.min,e,t,o,i),n.max=Z3(n.max,e,t,o,i)}function Q3(n,e,[t,r,i],s,a){Die(n,e[t],e[r],e[i],e.scale,s,a)}const Fie=["x","scaleX","originX"],jie=["y","scaleY","originY"];function J3(n,e,t,r){Q3(n.x,e,Fie,t?t.x:void 0,r?r.x:void 0),Q3(n.y,e,jie,t?t.y:void 0,r?r.y:void 0)}function eL(n){return n.translate===0&&n.scale===1}function g9(n){return eL(n.x)&&eL(n.y)}function tL(n,e){return n.min===e.min&&n.max===e.max}function Vie(n,e){return tL(n.x,e.x)&&tL(n.y,e.y)}function nL(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function m9(n,e){return nL(n.x,e.x)&&nL(n.y,e.y)}function rL(n){return ta(n.x)/ta(n.y)}function iL(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class Gie{constructor(){this.members=[]}add(e){rR(this.members,e),e.scheduleRender()}remove(e){if(iR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bie(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:g,skewX:y,skewY:v}=t;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const lh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},om=typeof window<"u"&&window.MotionDebug!==void 0,TS=["","X","Y","Z"],Uie={visibility:"hidden"},sL=1e3;let zie=0;function IS(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function p9(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Tj(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",er,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&p9(r)}function y9({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=zie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,om&&(lh.totalNodes=lh.resolvedTargetDeltas=lh.recalculatedProjection=0),this.nodes.forEach(Hie),this.nodes.forEach(Zie),this.nodes.forEach(Qie),this.nodes.forEach(Kie),om&&window.MotionDebug.record(lh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Pie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new sR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Rie(a),this.instance=a;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),n){let f;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=kie(g,250),z_.hasAnimatedSinceResize&&(z_.hasAnimatedSinceResize=!1,this.nodes.forEach(oL))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:g,hasRelativeTargetChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||rse,{onLayoutAnimationStart:w,onLayoutAnimationComplete:T}=h.getProps(),I=!this.targetLayout||!m9(this.targetLayout,v)||y,b=!g&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||g&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const N={...Jb(x,"layout"),onPlay:w,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else g||oL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Jie),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&p9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aL);return}this.isUpdating||this.nodes.forEach(Xie),this.isUpdating=!1,this.nodes.forEach(qie),this.nodes.forEach($ie),this.nodes.forEach(Wie),this.clearAllSnapshots();const o=Bo.now();vi.delta=Ul(0,1e3/60,o-vi.timestamp),vi.timestamp=o,vi.isProcessing=!0,mS.update.process(vi),mS.preRender.process(vi),mS.render.process(vi),vi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Yie),this.sharedNodes.forEach(ese)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,er.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){er.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=br(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!g9(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&(o||oh(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),ise(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return br();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(sse))){const{scroll:h}=this.root;h&&(Nf(l.x,h.offset.x),Nf(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=br();if(da(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:g}=h;h!==this.root&&f&&g.layoutScroll&&(f.wasRoot&&da(l,a),Nf(l.x,f.offset.x),Nf(l.y,f.offset.y))}return l}applyTransform(a,o=!1){const l=br();da(l,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Lf(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),oh(h.latestValues)&&Lf(l,h.latestValues)}return oh(this.latestValues)&&Lf(l,this.latestValues),l}removeTransform(a){const o=br();da(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!oh(u.latestValues))continue;gI(u.latestValues)&&u.updateSnapshot();const h=br(),f=u.measurePageBox();da(h,f),J3(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return oh(this.latestValues)&&J3(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:g}=this.options;if(!(!this.layout||!(f||g))){if(this.resolvedRelativeTargetAt=vi.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=br(),this.relativeTargetOrigin=br(),bm(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),da(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=br(),this.targetWithTransforms=br()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):da(this.target,this.layout.layoutBox),l9(this.target,this.targetDelta)):da(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=br(),this.relativeTargetOrigin=br(),bm(this.relativeTargetOrigin,this.target,y.target),da(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}om&&lh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||gI(this.parent.latestValues)||o9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===vi.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;da(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;yie(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=br());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(q3(this.prevProjectionDelta.x,this.projectionDelta.x),q3(this.prevProjectionDelta.y,this.projectionDelta.y)),Am(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!iL(this.projectionDelta.x,this.prevProjectionDelta.x)||!iL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),om&&lh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mf(),this.projectionDelta=Mf(),this.projectionDeltaWithTransform=Mf()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=Mf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=br(),y=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=y!==v,w=this.getStack(),T=!w||w.members.length<=1,I=!!(x&&!T&&this.options.crossfade===!0&&!this.path.some(nse));this.animationProgress=0;let b;this.mixTargetDelta=N=>{const F=N/1e3;lL(f.x,a.x,F),lL(f.y,a.y,F),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tse(this.relativeTarget,this.relativeTargetOrigin,g,F),b&&Vie(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=br()),da(b,this.relativeTarget)),x&&(this.animationValues=h,Nie(h,u,this.latestValues,F,I,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=er.update(()=>{z_.hasAnimatedSinceResize=!0,this.currentAnimation=bie(0,sL,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:h}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&_9(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||br();const f=ta(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const g=ta(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}da(o,l),Lf(o,h),Am(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Gie),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&IS("z",a,u,this.animationValues);for(let h=0;h<TS.length;h++)IS(`rotate${TS[h]}`,a,u,this.animationValues),IS(`skew${TS[h]}`,a,u,this.animationValues);a.render();for(const h in u)a.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Uie;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=B_(a?.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=B_(a?.pointerEvents)||""),this.hasProjected&&!oh(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const g=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Bie(this.projectionDeltaWithTransform,this.treeScale,g),h&&(u.transform=h(g,u.transform));const{x:y,y:v}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in Hx){if(g[x]===void 0)continue;const{correct:w,applyTo:T}=Hx[x],I=u.transform==="none"?g[x]:w(g[x],f);if(T){const b=T.length;for(let N=0;N<b;N++)u[T[N]]=I}else u[x]=I}return this.options.layoutId&&(u.pointerEvents=f===this?B_(a?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(aL),this.root.sharedNodes.clear()}}}function $ie(n){n.updateLayout()}function Wie(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?ga(f=>{const g=a?t.measuredBox[f]:t.layoutBox[f],y=ta(g);g.min=r[f].min,g.max=g.min+y}):_9(s,t.layoutBox,r)&&ga(f=>{const g=a?t.measuredBox[f]:t.layoutBox[f],y=ta(r[f]);g.max=g.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+y)});const o=Mf();Am(o,r,t.layoutBox);const l=Mf();a?Am(l,n.applyTransform(i,!0),t.measuredBox):Am(l,r,t.layoutBox);const u=!g9(o);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:g,layout:y}=f;if(g&&y){const v=br();bm(v,t.layoutBox,g.layoutBox);const x=br();bm(x,r,y.layoutBox),m9(v,x)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=v,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Hie(n){om&&lh.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Kie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Yie(n){n.clearSnapshot()}function aL(n){n.clearMeasurements()}function Xie(n){n.isLayoutDirty=!1}function qie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function oL(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Zie(n){n.resolveTargetDelta()}function Qie(n){n.calcProjection()}function Jie(n){n.resetSkewAndRotation()}function ese(n){n.removeLeadSnapshot()}function lL(n,e,t){n.translate=fr(e.translate,0,t),n.scale=fr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function cL(n,e,t,r){n.min=fr(e.min,t.min,r),n.max=fr(e.max,t.max,r)}function tse(n,e,t,r){cL(n.x,e.x,t.x,r),cL(n.y,e.y,t.y,r)}function nse(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const rse={duration:.45,ease:[.4,0,.1,1]},uL=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),hL=uL("applewebkit/")&&!uL("chrome/")?Math.round:Zs;function dL(n){n.min=hL(n.min),n.max=hL(n.max)}function ise(n){dL(n.x),dL(n.y)}function _9(n,e,t){return n==="position"||n==="preserve-aspect"&&!oie(rL(e),rL(t),.2)}function sse(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const ase=y9({attachResizeListener:(n,e)=>Sp(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),AS={current:void 0},x9=y9({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!AS.current){const n=new ase({});n.mount(window),n.setOptions({layoutScroll:!0}),AS.current=n}return AS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),ose={pan:{Feature:Sie},drag:{Feature:wie,ProjectionNode:x9,MeasureLayout:h9}};function fL(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&er.postRender(()=>s(e,v1(e)))}class lse extends bu{mount(){const{current:e}=this.node;e&&(this.unmount=one(e,t=>(fL(this.node,t,"Start"),r=>fL(this.node,r,"End"))))}unmount(){}}class cse extends bu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=x1(Sp(this.node.current,"focus",()=>this.onFocus()),Sp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gL(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&er.postRender(()=>s(e,v1(e)))}class use extends bu{mount(){const{current:e}=this.node;e&&(this.unmount=hne(e,t=>(gL(this.node,t,"Start"),(r,{success:i})=>gL(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const pI=new WeakMap,bS=new WeakMap,hse=n=>{const e=pI.get(n.target);e&&e(n)},dse=n=>{n.forEach(hse)};function fse({root:n,...e}){const t=n||document;bS.has(t)||bS.set(t,{});const r=bS.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(dse,{root:n,...e})),r[i]}function gse(n,e,t){const r=fse(e);return pI.set(n,t),r.observe(n),()=>{pI.delete(n),r.unobserve(n)}}const mse={some:0,all:1};class pse extends bu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:mse[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),g=u?h:f;g&&g(l)};return gse(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(yse(e,t))&&this.startObserver()}unmount(){}}function yse({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const _se={inView:{Feature:pse},tap:{Feature:use},focus:{Feature:cse},hover:{Feature:lse}},xse={layout:{ProjectionNode:x9,MeasureLayout:h9}},yI={current:null},v9={current:!1};function vse(){if(v9.current=!0,!!jb)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>yI.current=n.matches;n.addListener(e),e()}else yI.current=!1}const Ese=[...Wj,Fi,mu],wse=n=>Ese.find($j(n)),mL=new WeakMap;function Sse(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Ui(i))n.addValue(r,i);else if(Ui(s))n.addValue(r,Ep(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,Ep(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const pL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Tse{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Bo.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,er.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:h}=a;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=PE(t),this.isVariantNode=J8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in g){const v=g[y];l[y]!==void 0&&Ui(v)&&v.set(l[y],!1)}}mount(e){this.current=e,mL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),v9.current||vse(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){mL.delete(this.current),this.projection&&this.projection.unmount(),gu(this.notifyUpdate),gu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=fd.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&er.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in b0){const t=b0[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):br()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<pL.length;r++){const i=pL[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Sse(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ep(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Uj(i)||Nj(i))?i=parseFloat(i):!wse(i)&&mu.test(t)&&(i=Vj(e,t)),this.setBaseTarget(e,Ui(i)?i.get():i)),Ui(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=Wb(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ui(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new sR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class E9 extends Tse{constructor(){super(...arguments),this.KeyframeResolver=Hj}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ui(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Ise(n){return window.getComputedStyle(n)}class Ase extends E9{constructor(){super(...arguments),this.type="html",this.renderInstance=lj}readValueFromInstance(e,t){if(fd.has(t)){const r=uR(t);return r&&r.default||0}else{const r=Ise(e),i=(sj(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return c9(e,t)}build(e,t,r){Yb(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Qb(e,t,r)}}class bse extends E9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=br}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fd.has(t)){const r=uR(t);return r&&r.default||0}return t=cj.has(t)?t:Ub(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return dj(e,t,r)}build(e,t,r){Xb(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){uj(e,t,r,i)}mount(e){this.isSVGTag=Zb(e.tagName),super.mount(e)}}const Rse=(n,e)=>$b(n)?new bse(e):new Ase(e,{allowProjection:n!==se.Fragment}),Cse=ene({...Qre,..._se,...ose,...xse},Rse),Ft=mte(Cse);const Pse=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kse=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),yL=n=>{const e=kse(n);return e.charAt(0).toUpperCase()+e.slice(1)},w9=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Mse=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Nse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Lse=se.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>se.createElement("svg",{ref:l,...Nse,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:w9("lucide",i),...!s&&!Mse(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,h])=>se.createElement(u,h)),...Array.isArray(s)?s:[s]]));const pt=(n,e)=>{const t=se.forwardRef(({className:r,...i},s)=>se.createElement(Lse,{ref:s,iconNode:e,className:w9(`lucide-${Pse(yL(n))}`,`lucide-${n}`,r),...i}));return t.displayName=yL(n),t};const Ose=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],Dse=pt("archive-restore",Ose);const Fse=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],S9=pt("archive",Fse);const jse=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vse=pt("ban",jse);const Gse=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Bse=pt("book-open",Gse);const Use=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],T9=pt("bug",Use);const zse=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$se=pt("calendar",zse);const Wse=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],mR=pt("camera",Wse);const Hse=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],I9=pt("chart-column",Hse);const Kse=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pu=pt("check",Kse);const Yse=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pR=pt("chevron-down",Yse);const Xse=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],qse=pt("chevron-left",Xse);const Zse=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],NE=pt("chevron-right",Zse);const Qse=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],A9=pt("chevron-up",Qse);const Jse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],b9=pt("circle-alert",Jse);const eae=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tae=pt("circle-check-big",eae);const nae=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],rae=pt("cloud-off",nae);const iae=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],_L=pt("cloud",iae);const sae=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],aae=pt("code",sae);const oae=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lae=pt("compass",oae);const cae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],_I=pt("crosshair",cae);const uae=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xI=pt("download",uae);const hae=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],E1=pt("external-link",hae);const dae=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yR=pt("eye-off",dae);const fae=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_R=pt("eye",fae);const gae=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xR=pt("file-text",gae);const mae=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],pae=pt("folder-open",mae);const yae=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],_ae=pt("folder",yae);const xae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],vae=pt("grid-3x3",xae);const Eae=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],wae=pt("image-plus",Eae);const Sae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],R9=pt("info",Sae);const Tae=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Qa=pt("layers",Tae);const Iae=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Aae=pt("list",Iae);const bae=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vR=pt("loader-circle",bae);const Rae=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cae=pt("locate-fixed",Rae);const Pae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vI=pt("lock",Pae);const kae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ER=pt("log-out",kae);const Mae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],zl=pt("map-pin",Mae);const Nae=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],wR=pt("map",Nae);const Lae=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Oae=pt("menu",Lae);const Dae=[["path",{d:"M5 12h14",key:"1ays0h"}]],Fae=pt("minus",Dae);const jae=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],EI=pt("mountain",jae);const Vae=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Gae=pt("mouse-pointer",Vae);const Bae=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],SR=pt("navigation",Bae);const Uae=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xL=pt("pen-line",Uae);const zae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$ae=pt("pen",zae);const Wae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Qx=pt("pencil",Wae);const Hae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xo=pt("plus",Hae);const Kae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Yae=pt("rotate-ccw",Kae);const Xae=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],qae=pt("rotate-cw",Xae);const Zae=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Qae=pt("ruler",Zae);const Jae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],eoe=pt("save",Jae);const toe=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],noe=pt("scale",toe);const roe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wI=pt("search",roe);const ioe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],SI=pt("settings",ioe);const soe=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],aoe=pt("settings-2",soe);const ooe=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],loe=pt("sliders-horizontal",ooe);const coe=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],uoe=pt("sliders-vertical",coe);const hoe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],doe=pt("smartphone",hoe);const foe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],goe=pt("tag",foe);const moe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],poe=pt("target",moe);const yoe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gd=pt("trash-2",yoe);const _oe=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],xoe=pt("tree-palm",_oe);const voe=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Eoe=pt("type",voe);const woe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],TR=pt("upload",woe);const Soe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],IR=pt("user",Soe);const Toe=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Ioe=pt("waves",Toe);const Aoe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ls=pt("x",Aoe);function boe(){const{tracking:n,startTracking:e,stopTracking:t,updatePosition:r,setWatchId:i,resetFirstFix:s}=es(),a=se.useCallback(l=>{r(l)},[r]),o=se.useCallback(l=>{console.error("GPS error:",l),alert(`GPS fout: ${l.message}`),t()},[t]);return se.useEffect(()=>{if(!n)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),t();return}const l=navigator.geolocation.watchPosition(a,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(l),()=>{navigator.geolocation.clearWatch(l)}},[n,a,o,i,t]),{tracking:n,start:e,stop:t,toggle:()=>n?t():e()}}function Roe(){const{tracking:n,toggle:e}=boe();return p.jsx(Ft.button,{className:`
        fixed bottom-2 right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},animate:n?{scale:[1,1.02,1]}:{},transition:n?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":n?"GPS tracking actief":"GPS tracking starten",title:n?"GPS tracking actief":"GPS tracking starten",children:p.jsx(Cae,{size:22,strokeWidth:2})})}const Coe="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`);function Poe(){const n=os(y=>y.map),e=es(y=>y.position),t=es(y=>y.accuracy),r=es(y=>y.tracking),i=es(y=>y.smoothHeading),s=kr(y=>y.showAccuracyCircle),a=es(y=>y.firstFix),o=es(y=>y.resetFirstFix),l=es(y=>y.config.centerOnUser),u=se.useRef(null),h=se.useRef(null),f=se.useRef(null),g=se.useMemo(()=>y=>new gr({image:new Yp({src:Coe,scale:.9,rotation:y,rotateWithView:!1,anchor:[.5,.5]})}),[]);return se.useEffect(()=>{if(!n||!r&&!e)return;const y=au([5.1214,52.0907]);return u.current=new to({geometry:new no(y)}),u.current.setStyle(g(0)),h.current=new to({geometry:new no(y)}),f.current=new Zp({source:new Hp({features:[h.current,u.current]}),zIndex:1e3}),n.addLayer(f.current),()=>{f.current&&n&&n.removeLayer(f.current)}},[n,r,e,g]),se.useEffect(()=>{if(!n||!e||!u.current||!h.current)return;const y=au([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(y),h.current.getGeometry()?.setCoordinates(y),s&&t){const v=n.getView().getResolution()||1,x=Math.min(t/v,80);h.current.setStyle(new gr({image:new Fl({radius:x,fill:new di({color:"rgba(66, 133, 244, 0.12)"})})}))}else h.current.setStyle(new gr({}));if(a&&r){n.getView().setCenter(y),n.getView().setZoom(17),o();return}r&&l&&!a&&n.getView().animate({center:y,duration:150})},[n,r,e,t,a,o,l,s]),se.useEffect(()=>{if(!u.current)return;const y=i!==null?i*Math.PI/180:0;u.current.setStyle(g(y))},[i,g]),null}function koe(){const n=Cr(t=>t.themesPanelOpen),e=Cr(t=>t.toggleThemesPanel);return p.jsx(Ft.button,{className:`
        fixed bottom-[60px] right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":n?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:p.jsx(wR,{size:22,strokeWidth:2})})}function Moe(){return p.jsx(koe,{})}const o_=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],Lc=["Mineraal","Fossiel","Erfgoed","Monument","Overig"],Ro="default-vondsten",C9={id:Ro,name:"Vondsten",color:"#f97316",categories:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()},Noe=n=>n.some(t=>t.id===Ro)?n:[{...C9,createdAt:new Date().toISOString()},...n],$i=Aa()(B0((n,e)=>({layers:[{...C9}],colorIndex:0,addLayer:(t,r=Lc)=>{const i=crypto.randomUUID(),s=o_[e().colorIndex%o_.length];return n(a=>({layers:[...a.layers,{id:i,name:t,color:s,categories:[...r],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:a.colorIndex+1})),i},removeLayer:t=>{n(r=>({layers:r.layers.filter(i=>i.id!==t)}))},updateLayer:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)}))},toggleVisibility:t=>{n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)}))},toggleArchived:t=>{n(r=>({layers:r.layers.map(i=>i.id===t?{...i,archived:!i.archived,visible:i.archived?i.visible:!1}:i)}))},addPoint:(t,r)=>{const i={...r,status:r.status||"todo",id:crypto.randomUUID(),createdAt:new Date().toISOString()};n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:[...a.points,i]}:a)}))},removePoint:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,points:s.points.filter(a=>a.id!==r)}:s)}))},updatePoint:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,...i}:o)}:a)}))},setPointStatus:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,status:i}:o)}:a)}))},addCategory:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t&&!s.categories.includes(r)?{...s,categories:[...s.categories,r]}:s)}))},removeCategory:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,categories:s.categories.filter(a=>a!==r)}:s)}))},addPhotoToPoint:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,photos:[...o.photos||[],i]}:o)}:a)}))},removePhotoFromPoint:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,photos:(o.photos||[]).filter(l=>l.id!==i)}:o)}:a)}))},updatePhotoInPoint:(t,r,i,s)=>{n(a=>({layers:a.layers.map(o=>o.id===t?{...o,points:o.points.map(l=>l.id===r?{...l,photos:(l.photos||[]).map(u=>u.id===i?{...u,...s}:u)}:l)}:o)}))},exportLayerAsGeoJSON:t=>{const r=e().layers.find(l=>l.id===t);if(!r)return;const i={type:"FeatureCollection",properties:{name:r.name,color:r.color,categories:r.categories,createdAt:r.createdAt,exportedAt:new Date().toISOString()},features:r.points.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:{id:l.id,name:l.name,category:l.category,notes:l.notes,url:l.url,status:l.status,sourceLayer:l.sourceLayer,sourceId:l.sourceId,photos:l.photos,createdAt:l.createdAt}}))},s=new Blob([JSON.stringify(i,null,2)],{type:"application/geo+json"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`${r.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},importLayerFromGeoJSON:t=>{try{const r=JSON.parse(t);if(r.type!=="FeatureCollection")return{success:!1,error:"Ongeldig GeoJSON formaat"};const i=r.properties||{},s=i.name||`Gemporteerd ${new Date().toLocaleDateString("nl-NL")}`,a=i.categories||Lc,o=i.color||o_[e().colorIndex%o_.length],l=(r.features||[]).filter(h=>h.geometry?.type==="Point").map(h=>({id:h.properties?.id||crypto.randomUUID(),name:h.properties?.name||"Naamloos",category:h.properties?.category||"Overig",notes:h.properties?.notes||"",url:h.properties?.url,status:h.properties?.status||"todo",sourceLayer:h.properties?.sourceLayer,sourceId:h.properties?.sourceId,photos:h.properties?.photos,coordinates:h.geometry.coordinates,createdAt:h.properties?.createdAt||new Date().toISOString()})),u=crypto.randomUUID();return n(h=>({layers:[...h.layers,{id:u,name:s,color:o,categories:a,points:l,visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:h.colorIndex+1})),{success:!0,layerId:u}}catch{return{success:!1,error:"Fout bij parsen van GeoJSON"}}},getLayer:t=>e().layers.find(r=>r.id===t),getActiveLayerCount:()=>e().layers.filter(t=>!t.archived).length,getArchivedLayerCount:()=>e().layers.filter(t=>t.archived).length,clearAll:()=>{n(t=>({layers:t.layers.map(r=>r.id===Ro?{...r,points:[]}:r).filter(r=>r.id===Ro),colorIndex:0}))}}),{name:"detectorapp-custom-point-layers",version:2,migrate:(n,e)=>{const t=n;return e<2?{...t,layers:Noe(t.layers||[])}:t}}));function Oi({title:n,children:e,defaultExpanded:t=!0,layerNames:r}){const[i,s]=se.useState(t),a=li(y=>y.visible),o=li(y=>y.setLayerVisibility),l=r?.filter(y=>a[y]).length||0,u=r?.length||0,h=u>0&&l===u,f=l>0&&l<u,g=y=>{if(y.stopPropagation(),!r)return;const v=!h;r.forEach(x=>{o(x,v)})};return p.jsxs("div",{className:"mb-0.5",children:[p.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[p.jsxs("button",{onClick:y=>{y.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[p.jsx(Ft.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:p.jsx(NE,{size:14})}),i?p.jsx(pae,{size:16,className:"text-blue-500"}):p.jsx(_ae,{size:16,className:"text-blue-500"}),p.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:n}),l>0&&p.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:l})]}),r&&r.length>0&&p.jsx("button",{onClick:g,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:h?"#3b82f6":f?"#93c5fd":"white",border:h?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(h||f)&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),p.jsx(Mr,{initial:!1,children:i&&p.jsx(Ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function ct({name:n,type:e,hasOverlay:t}){const r=li(b=>b.visible[n]),i=li(b=>b.visible["Labels Overlay"]),s=li(b=>b.loadingState[n]),a=li(b=>b.toggleLayer),o=li(b=>b.setLayerVisibility),l=H8(b=>b.isLayerUnlocked),u=s==="loading",h=s==="error",f=kA[n],g=f?.tier??"free",y=f?.regions??["nl"],x=!l(n,g,y),w=b=>{b.stopPropagation(),!(u||x)&&(e==="overlay"?a(n):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(F=>{o(F,F===n)}))},T=b=>{b.stopPropagation(),o("Labels Overlay",!i)},I=r??!1;return p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("button",{onClick:w,disabled:u||x,className:`flex-1 flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${x?"opacity-50 cursor-not-allowed bg-gray-50":u?"opacity-70 cursor-wait bg-transparent":I?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},title:x?"Premium laag - upgrade om te ontgrendelen":void 0,children:[p.jsxs("span",{className:`flex items-center gap-1 ${h?"text-red-500":x?"text-gray-400":"text-gray-600"}`,children:[n,h&&p.jsx(b9,{size:12,className:"text-red-500"}),x&&p.jsx(vI,{size:12,className:"text-amber-500"})]}),p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:x?"#e5e7eb":u?"#93c5fd":I?"#3b82f6":"white",border:x?"2px solid #d1d5db":u?"2px solid #93c5fd":I?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:x?p.jsx(vI,{size:10,strokeWidth:3,className:"text-gray-400"}):u?p.jsx(vR,{size:10,strokeWidth:3,className:"animate-spin"}):I?p.jsx(pu,{size:12,strokeWidth:3}):null})]}),t&&I&&p.jsx("button",{onClick:T,className:`p-1 rounded transition-colors border-0 outline-none ${i?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:i?"Labels verbergen":"Labels tonen",children:p.jsx(goe,{size:12})})]})}function Loe(){const{themesPanelOpen:n,toggleThemesPanel:e}=Cr(),{layers:t,toggleVisibility:r}=$i(),i=se.useRef(null),s=kr(l=>l.layerPanelFontScale),a=kr(l=>l.setLayerPanelFontScale),o=13*s/100;return se.useEffect(()=>{if(!n)return;const l=h=>{i.current&&!i.current.contains(h.target)&&e()},u=setTimeout(()=>{document.addEventListener("click",l)},100);return()=>{clearTimeout(u),document.removeEventListener("click",l)}},[n,e]),p.jsx(Mr,{children:n&&p.jsxs(Ft.div,{ref:i,className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-500",style:{fontSize:`${o}px`},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Qa,{size:14,className:"text-white"}),p.jsx("span",{className:"font-medium text-white",children:"Kaartlagen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:s,onInput:l=>{a(parseInt(l.target.value))},onChange:l=>a(parseInt(l.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s}%`}),p.jsx("span",{className:"text-xs text-blue-200",children:"T"}),p.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none bg-blue-400/50 hover:bg-blue-400 transition-colors ml-1",children:p.jsx(ls,{size:16,className:"text-white",strokeWidth:2.5})})]})]}),p.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${o}px`},children:[t.filter(l=>!l.archived).length>0&&p.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[p.jsx("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:p.jsx("span",{className:"text-orange-600 font-medium",style:{fontSize:"0.9em"},children:"Mijn Lagen"})}),t.filter(l=>!l.archived).map(l=>p.jsxs("button",{onClick:()=>r(l.id),className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${l.visible?"bg-orange-50 hover:bg-orange-100":"bg-transparent hover:bg-orange-50"}`,style:{fontSize:"inherit"},children:[p.jsxs("span",{className:"flex items-center gap-2 text-gray-600",children:[l.name,p.jsxs("span",{className:"text-xs text-gray-400",children:["(",l.points.length,")"]})]}),p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:l.visible?"#f97316":"white",border:l.visible?"2px solid #f97316":"2px solid #fb923c",color:"white"},children:l.visible&&p.jsx(pu,{size:12,strokeWidth:3})})]},l.id))]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1",children:p.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Basislaag"})}),p.jsxs("div",{className:"space-y-0",children:[p.jsx(ct,{name:"CartoDB (licht)",type:"base"}),p.jsx(ct,{name:"OpenStreetMap",type:"base"}),p.jsx(ct,{name:"Luchtfoto",type:"base",hasOverlay:!0}),p.jsx(ct,{name:"TMK 1850",type:"base",hasOverlay:!0}),p.jsx(ct,{name:"Bonnebladen 1900",type:"base",hasOverlay:!0})]})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1 border-t border-gray-100 pt-2",children:p.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Thema's"})}),p.jsxs(Oi,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[p.jsx(ct,{name:"Hunebedden",type:"overlay"}),p.jsx(ct,{name:"FAMKE Steentijd",type:"overlay"}),p.jsx(ct,{name:"Grafheuvels",type:"overlay"}),p.jsx(ct,{name:"Terpen",type:"overlay"}),p.jsxs(Oi,{title:"Paleokaarten (tijdreizen)",defaultExpanded:!1,layerNames:["Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[p.jsx(ct,{name:"Paleokaart 9000 v.Chr.",type:"overlay"}),p.jsx(ct,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),p.jsx(ct,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),p.jsx(ct,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),p.jsx(ct,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),p.jsx(ct,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),p.jsx(ct,{name:"Paleokaart 800 n.Chr.",type:"overlay"})]})]}),p.jsxs(Oi,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Archeo Onderzoeken","Romeinse wegen (regio)","Romeinse wegen (Wereld)","IKAW","Archeo Landschappen","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[p.jsx(ct,{name:"AMK Monumenten",type:"overlay"}),p.jsxs(Oi,{title:"AMK per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[p.jsx(ct,{name:"AMK Romeins",type:"overlay"}),p.jsx(ct,{name:"AMK Steentijd",type:"overlay"}),p.jsx(ct,{name:"AMK Vroege ME",type:"overlay"}),p.jsx(ct,{name:"AMK Late ME",type:"overlay"}),p.jsx(ct,{name:"AMK Overig",type:"overlay"})]}),p.jsx(ct,{name:"Archeo Onderzoeken",type:"overlay"}),p.jsx(ct,{name:"Romeinse wegen (regio)",type:"overlay"}),p.jsx(ct,{name:"Romeinse wegen (Wereld)",type:"overlay"}),p.jsx(ct,{name:"IKAW",type:"overlay"}),p.jsx(ct,{name:"Archeo Landschappen",type:"overlay"}),p.jsxs(Oi,{title:"Verwachtingen uiterwaarden",defaultExpanded:!1,layerNames:["UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[p.jsx(ct,{name:"UIKAV Punten",type:"overlay"}),p.jsx(ct,{name:"UIKAV Vlakken",type:"overlay"}),p.jsx(ct,{name:"UIKAV Expert",type:"overlay"}),p.jsx(ct,{name:"UIKAV Buffer",type:"overlay"}),p.jsx(ct,{name:"UIKAV Indeling",type:"overlay"})]})]}),p.jsxs(Oi,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Runes"],children:[p.jsx(ct,{name:"Rijksmonumenten",type:"overlay"}),p.jsx(ct,{name:"Werelderfgoed",type:"overlay"}),p.jsx(ct,{name:"Religieus Erfgoed",type:"overlay"}),p.jsx(ct,{name:"Kastelen",type:"overlay"}),p.jsx(ct,{name:"Runes",type:"overlay"})]}),p.jsxs(Oi,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[p.jsx(ct,{name:"WWII Bunkers",type:"overlay"}),p.jsx(ct,{name:"Slagvelden",type:"overlay"}),p.jsx(ct,{name:"Militaire Vliegvelden",type:"overlay"}),p.jsx(ct,{name:"Verdedigingslinies",type:"overlay"}),p.jsx(ct,{name:"Militaire Objecten",type:"overlay"}),p.jsx(ct,{name:"Inundatiegebieden",type:"overlay"})]}),p.jsxs(Oi,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m"],children:[p.jsx(ct,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),p.jsx(ct,{name:"AHN4 Hillshade NL",type:"overlay"}),p.jsx(ct,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),p.jsx(ct,{name:"AHN 0.5m",type:"overlay"})]}),p.jsxs(Oi,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Veengebieden","Geomorfologie","Bodemkaart","Essen"],children:[p.jsx(ct,{name:"Veengebieden",type:"overlay"}),p.jsx(ct,{name:"Geomorfologie",type:"overlay"}),p.jsx(ct,{name:"Bodemkaart",type:"overlay"}),p.jsx(ct,{name:"Essen",type:"overlay"})]}),p.jsxs(Oi,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[p.jsx(ct,{name:"Gewaspercelen",type:"overlay"}),p.jsx(ct,{name:"Kadastrale Grenzen",type:"overlay"})]}),p.jsxs(Oi,{title:"Provinciale Thema's",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[p.jsxs(Oi,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[p.jsx(ct,{name:"Scheepswrakken",type:"overlay"}),p.jsx(ct,{name:"Woonheuvels ZH",type:"overlay"}),p.jsx(ct,{name:"Romeinse Forten",type:"overlay"}),p.jsx(ct,{name:"Windmolens",type:"overlay"}),p.jsx(ct,{name:"Erfgoedlijnen",type:"overlay"}),p.jsx(ct,{name:"Oude Kernen",type:"overlay"})]}),p.jsxs(Oi,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[p.jsx(ct,{name:"Relictenkaart Punten",type:"overlay"}),p.jsx(ct,{name:"Relictenkaart Lijnen",type:"overlay"}),p.jsx(ct,{name:"Relictenkaart Vlakken",type:"overlay"})]}),p.jsx(Oi,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:p.jsx(ct,{name:"Verdronken Dorpen",type:"overlay"})})]}),p.jsxs(Oi,{title:"Fossielen, Mineralen & Goud",defaultExpanded:!1,layerNames:["Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[p.jsx(ct,{name:"Fossiel Hotspots",type:"overlay"}),p.jsx(ct,{name:"Mineralen Hotspots",type:"overlay"}),p.jsx(ct,{name:"Goudrivieren",type:"overlay"}),p.jsx(ct,{name:"Fossielen Nederland",type:"overlay"}),p.jsx(ct,{name:"Fossielen Belgi",type:"overlay"}),p.jsx(ct,{name:"Fossielen Duitsland",type:"overlay"}),p.jsx(ct,{name:"Fossielen Frankrijk",type:"overlay"})]}),p.jsxs(Oi,{title:"Recreatie",defaultExpanded:!1,layerNames:["Wandelroutes","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[p.jsx(ct,{name:"Wandelroutes",type:"overlay"}),p.jsx(ct,{name:"Parken",type:"overlay"}),p.jsx(ct,{name:"Speeltuinen",type:"overlay"}),p.jsx(ct,{name:"Musea",type:"overlay"}),p.jsx(ct,{name:"Strandjes",type:"overlay"}),p.jsx(ct,{name:"Kringloopwinkels",type:"overlay"})]})]})]})]})})}function Ooe(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var Qh=1,Jh=2,qf=3,Doe=4,TI=5,vL=6378137,Foe=6356752314e-3,EL=.0066943799901413165,Rm=484813681109536e-20,Ue=Math.PI/2,joe=.16666666666666666,Voe=.04722222222222222,Goe=.022156084656084655,it=1e-10,_r=.017453292519943295,bs=57.29577951308232,kn=Math.PI/4,Tp=Math.PI*2,Rr=3.14159265359,Ms={};Ms.greenwich=0;Ms.lisbon=-9.131906111111;Ms.paris=2.337229166667;Ms.bogota=-74.080916666667;Ms.madrid=-3.687938888889;Ms.rome=12.452333333333;Ms.bern=7.439583333333;Ms.jakarta=106.807719444444;Ms.ferro=-17.666666666667;Ms.brussels=4.367975;Ms.stockholm=18.058277777778;Ms.athens=23.7163375;Ms.oslo=10.722916666667;const Boe={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var wL=/[\s_\-\/\(\)]/g;function yu(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(wL,""),i=-1,s,a;++i<t.length;)if(s=t[i],a=s.toLowerCase().replace(wL,""),a===r)return n[s]}function II(n){var e={},t=n.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var u=l.split("=");return u.push(!0),o[u[0].toLowerCase()]=u[1],o},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*_r},lat_1:function(o){e.lat1=o*_r},lat_2:function(o){e.lat2=o*_r},lat_ts:function(o){e.lat_ts=o*_r},lon_0:function(o){e.long0=o*_r},lon_1:function(o){e.long1=o*_r},lon_2:function(o){e.long2=o*_r},alpha:function(o){e.alpha=parseFloat(o)*_r},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*_r},lonc:function(o){e.longc=o*_r},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=yu(Boe,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*_r},pm:function(o){var l=yu(Ms,o);e.from_greenwich=(l||parseFloat(o))*_r},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}class P9{static getId(e){const t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:a}}static convertAxis(e){const t=e[1]||"Unknown";let r;const i=t.match(/^\((.)\)$/);if(i){const u=i[1].toUpperCase();if(u==="E")r="east";else if(u==="N")r="north";else if(u==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${u}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(u=>Array.isArray(u)&&u[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=e.find(u=>Array.isArray(u)&&(u[0]==="LENGTHUNIT"||u[0]==="ANGLEUNIT"||u[0]==="SCALEUNIT")),l=this.convertUnit(o);return{name:t,direction:r,unit:l,order:a}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,t.conversion=e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const r=e.find(g=>Array.isArray(g)&&g[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(i){const g=this.convertUnit(i);t.coordinate_system.unit=g}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const s=e.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(s){const g=this.convert(s);s[0]==="ENSEMBLE"?t.datum_ensemble=g:t.datum=g;const y=e.find(v=>Array.isArray(v)&&v[0]==="PRIMEM");y&&y[1]!=="Greenwich"&&(g.prime_meridian={name:y[1],longitude:parseFloat(y[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const a=e.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");a&&(t.accuracy=parseFloat(a[1]));const o=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");o&&(t.ellipsoid=this.convert(o)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const l=e.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(l){const g=l.find(y=>Array.isArray(y));t.source_crs=g?this.convert(g):null}const u=e.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(u){const g=u.find(y=>Array.isArray(y));t.target_crs=g?this.convert(g):null}const h=e.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");h?t.transformation=this.convert(h):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const g=t.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const f=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=f)}),f.conversion_factor&&f.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:f});break;default:t.keyword=e[0];break}return t}}class Uoe extends P9{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class zoe extends P9{static convert(e,t={}){super.convert(e,t);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),a=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),o=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},s&&(t.usage.scope=s[1]),a&&(t.usage.area=a[1]),o&&(t.usage.bbox=o.slice(1))}return t}}function $oe(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function Woe(n){return($oe(n)==="2019"?zoe:Uoe).convert(n)}function Hoe(n){const e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var Ip=1,k9=2,M9=3,Jx=4,N9=5,AR=-1,Koe=/\s/,Yoe=/[A-Za-z]/,Xoe=/[A-Za-z84_]/,LE=/[,\]]/,L9=/[\d\.E\-\+]/;function Xl(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ip}Xl.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Jx)for(;Koe.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case Ip:return this.neutral(n);case k9:return this.keyword(n);case Jx:return this.quoted(n);case N9:return this.afterquote(n);case M9:return this.number(n);case AR:return}};Xl.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Jx;return}if(LE.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Xl.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Ip;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Ip,this.currentObject=this.stack.pop(),this.currentObject||(this.state=AR);return}};Xl.prototype.number=function(n){if(L9.test(n)){this.word+=n;return}if(LE.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Xl.prototype.quoted=function(n){if(n==='"'){this.state=N9;return}this.word+=n};Xl.prototype.keyword=function(n){if(Xoe.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Ip;return}if(LE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Xl.prototype.neutral=function(n){if(Yoe.test(n)){this.word=n,this.state=k9;return}if(n==='"'){this.word="",this.state=Jx;return}if(L9.test(n)){this.word=n,this.state=M9;return}if(LE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Xl.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===AR)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function qoe(n){var e=new Xl(n);return e.output()}function RS(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(s,a){return Of(a,s),s},r);e&&(n[e]=i)}function Of(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},Of(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&Of(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&Of(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],RS(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],RS(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return Of(n,e[t]);return RS(e,t,n)}}var Zoe=.017453292519943295;function Ga(n){return n*Zoe}function O9(n){const e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=Ga(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=Ga(n.lat0>0?90:-90),delete n.lat1)}function SL(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function TL(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function IL(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=TL(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-TL(n.ellipsoid.semi_minor_axis))))}function ev(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?(ev(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{const r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,IL(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,IL(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=SL(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=SL(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),a=i.value;i.unit&&i.unit.conversion_factor?e[s]=a*i.unit.conversion_factor:i.unit==="degree"?e[s]=a*Math.PI/180:e[s]=a});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":ev(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),O9(e),e)}var Qoe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Joe(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function D9(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];Qoe.indexOf(i)!==-1&&ele(n[i]),typeof n[i]=="object"&&D9(n[i])}}function ele(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var s=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=Ga(n.rectified_grid_angle));function o(h){var f=n.to_meter||1;return h*f}var l=function(h){return Joe(n,h)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ga],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ga],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Ga],["lat0","latitude_of_origin",Ga],["lat0","standard_parallel_1",Ga],["lat1","standard_parallel_1",Ga],["lat2","standard_parallel_2",Ga],["azimuth","Azimuth"],["alpha","azimuth",Ga],["srsCode","name"]];u.forEach(l),O9(n)}function tv(n){if(typeof n=="object")return ev(n);const e=Hoe(n);var t=qoe(n);if(e==="WKT2"){const s=Woe(t);return ev(s)}var r=t[0],i={};return Of(t,i),D9(i),i[r]}function xi(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?xi[n]=II(arguments[1]):xi[n]=tv(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?xi[n]=tv(arguments[1]):(xi[n]=t,t||delete xi[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?xi.apply(e,r):xi(r)});if(typeof n=="string"){if(n in xi)return xi[n]}else"EPSG"in n?xi["EPSG:"+n.EPSG]=n:"ESRI"in n?xi["ESRI:"+n.ESRI]=n:"IAU2000"in n?xi["IAU2000:"+n.IAU2000]=n:console.log(n);return}}Ooe(xi);function tle(n){return typeof n=="string"}function nle(n){return n in xi}function rle(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var ile=["3857","900913","3785","102113"];function sle(n){var e=yu(n,"authority");if(e){var t=yu(e,"epsg");return t&&ile.indexOf(t)>-1}}function ale(n){var e=yu(n,"extension");if(e)return yu(e,"proj4")}function ole(n){return n[0]==="+"}function lle(n){if(tle(n)){if(nle(n))return xi[n];if(rle(n)){var e=tv(n);if(sle(e))return xi["EPSG:3857"];var t=ale(e);return t?II(t):e}if(ole(n))return II(n)}else return"projName"in n?n:tv(n)}function AL(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function qo(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function w1(n){return n<0?-1:1}function ut(n,e){return e||Math.abs(n)<=Rr?n:n-w1(n)*Tp}function Ja(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Ue-e))/r}function Ap(n,e){for(var t=.5*n,r,i,s=Ue-2*Math.atan(e),a=0;a<=15;a++)if(r=n*Math.sin(s),i=Ue-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function cle(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=qo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function ule(n){var e=n.x,t=n.y;if(t*bs>90&&t*bs<-90&&e*bs>180&&e*bs<-180)return null;var r,i;if(Math.abs(Math.abs(t)-Ue)<=it)return null;if(this.sphere)r=this.x0+this.a*this.k0*ut(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(kn+.5*t));else{var s=Math.sin(t),a=Ja(this.e,t,s);r=this.x0+this.a*this.k0*ut(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(a)}return n.x=r,n.y=i,n}function hle(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=Ue-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(i=Ap(this.e,s),i===-9999)return null}return r=ut(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var dle=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const fle={init:cle,forward:ule,inverse:hle,names:dle};function gle(){}function bL(n){return n}var F9=["longlat","identity"];const mle={init:gle,forward:bL,inverse:bL,names:F9};var ple=[fle,mle],ch={},Df=[];function j9(n,e){var t=Df.length;return n.names?(Df[t]=n,n.names.forEach(function(r){ch[r.toLowerCase()]=t}),this):(console.log(e),!0)}function V9(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function yle(n){if(!n)return!1;var e=n.toLowerCase();if(typeof ch[e]<"u"&&Df[ch[e]]||(e=V9(e),e in ch&&Df[ch[e]]))return Df[ch[e]]}function _le(){ple.forEach(j9)}const xle={start:_le,add:j9,get:yle};var G9={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const vle=G9.WGS84;function Ele(n,e,t,r){var i=n*n,s=e*e,a=(i-s)/i,o=0;r?(n*=1-a*(joe+a*(Voe+a*Goe)),i=n*n,a=0):o=Math.sqrt(a);var l=(i-s)/s;return{es:a,e:o,ep2:l}}function wle(n,e,t,r,i){if(!n){var s=yu(G9,r);s||(s=vle),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<it)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var $_={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Sle in $_){var CS=$_[Sle];CS.datumName&&($_[CS.datumName]=CS)}function Tle(n,e,t,r,i,s,a){var o={};return n===void 0||n==="none"?o.datum_type=TI:o.datum_type=Doe,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Qh),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Jh,o.datum_params[3]*=Rm,o.datum_params[4]*=Rm,o.datum_params[5]*=Rm,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=qf,o.grids=a),o.a=t,o.b=r,o.es=i,o.ep2=s,o}var bR={};function Ile(n,e,t){return e instanceof ArrayBuffer?Ale(n,e,t):{ready:ble(n,e)}}function Ale(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=Ple(i),a=kle(i,s),o=Mle(i,a,s,r),l={header:a,subgrids:o};return bR[n]=l,l}async function ble(n,e){for(var t=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),a=await s.readRasters(),o=a,l=[s.getWidth(),s.getHeight()],u=s.getBoundingBox().map(RL),h=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(RL),f=u[0]+(l[0]-1)*h[0],g=u[3]-(l[1]-1)*h[1],y=o[0],v=o[1],x=[];for(let I=l[1]-1;I>=0;I--)for(let b=l[0]-1;b>=0;b--){var w=I*l[0]+b;x.push([-Kc(v[w]),Kc(y[w])])}t.push({del:h,lim:l,ll:[-f,g],cvs:x})}var T={header:{nSubgrids:r},subgrids:t};return bR[n]=T,T}function Rle(n){if(n===void 0)return null;var e=n.split(",");return e.map(Cle)}function Cle(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:bR[n]||null,isNull:!1}}function RL(n){return n*Math.PI/180}function Kc(n){return n/3600*Math.PI/180}function Ple(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function kle(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:AI(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function AI(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Mle(n,e,t,r){for(var i=176,s=[],a=0;a<e.nSubgrids;a++){var o=Lle(n,i,t),l=Ole(n,i,o,t,r),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[Kc(o.lowerLongitude),Kc(o.lowerLatitude)],del:[Kc(o.longitudeInterval),Kc(o.latitudeInterval)],lim:[u,h],count:o.gridNodeCount,cvs:Nle(l)});var f=16;r===!1&&(f=8),i+=176+o.gridNodeCount*f}return s}function Nle(n){return n.map(function(e){return[Kc(e.longitudeShift),Kc(e.latitudeShift)]})}function Lle(n,e,t){return{name:AI(n,e+8,e+16).trim(),parent:AI(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function Ole(n,e,t,r,i){var s=e+176,a=16;i===!1&&(a=8);for(var o=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:n.getFloat32(s+l*a,r),longitudeShift:n.getFloat32(s+l*a+4,r)};i!==!1&&(u.latitudeAccuracy=n.getFloat32(s+l*a+8,r),u.longitudeAccuracy=n.getFloat32(s+l*a+12,r)),o.push(u)}return o}function Ta(n,e){if(!(this instanceof Ta))return new Ta(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(u){if(u)throw u};var t=lle(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=Ta.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=yu($_,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=wle(t.a,t.b,t.rf,t.ellps,t.sphere),a=Ele(s.a,s.b,s.rf,t.R_A),o=Rle(t.nadgrids),l=t.datum||Tle(t.datumCode,t.datum_params,s.a,s.b,a.es,a.ep2,o);AL(this,t),AL(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}Ta.projections=xle;Ta.projections.start();function Dle(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===Qh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===Jh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function B9(n,e,t){var r=n.x,i=n.y,s=n.z?n.z:0,a,o,l,u;if(i<-Ue&&i>-1.001*Ue)i=-Ue;else if(i>Ue&&i<1.001*Ue)i=Ue;else{if(i<-Ue)return{x:-1/0,y:-1/0,z:n.z};if(i>Ue)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),o=Math.sin(i),u=Math.cos(i),l=o*o,a=t/Math.sqrt(1-e*l),{x:(a+s)*u*Math.cos(r),y:(a+s)*u*Math.sin(r),z:(a*(1-e)+s)*o}}function U9(n,e,t,r){var i=1e-12,s=i*i,a=30,o,l,u,h,f,g,y,v,x,w,T,I,b,N=n.x,F=n.y,W=n.z?n.z:0,M,C,P;if(o=Math.sqrt(N*N+F*F),l=Math.sqrt(N*N+F*F+W*W),o/t<i){if(M=0,l/t<i)return C=Ue,P=-r,{x:n.x,y:n.y,z:n.z}}else M=Math.atan2(F,N);u=W/l,h=o/l,f=1/Math.sqrt(1-e*(2-e)*h*h),v=h*(1-e)*f,x=u*f,b=0;do b++,y=t/Math.sqrt(1-e*x*x),P=o*v+W*x-y*(1-e*x*x),g=e*y/(y+P),f=1/Math.sqrt(1-g*(2-g)*h*h),w=h*(1-g)*f,T=u*f,I=T*v-w*x,v=w,x=T;while(I*I>s&&b<a);return C=Math.atan(T/Math.abs(w)),{x:M,y:C,z:P}}function Fle(n,e,t){if(e===Qh)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===Jh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6];return{x:u*(n.x-l*n.y+o*n.z)+r,y:u*(l*n.x+n.y-a*n.z)+i,z:u*(-o*n.x+a*n.y+n.z)+s}}}function jle(n,e,t){if(e===Qh)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===Jh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],h=(n.x-r)/u,f=(n.y-i)/u,g=(n.z-s)/u;return{x:h+l*f-o*g,y:-l*h+f+a*g,z:o*h-a*f+g}}}function l_(n){return n===Qh||n===Jh}function Vle(n,e,t){if(Dle(n,e)||n.datum_type===TI||e.datum_type===TI)return t;var r=n.a,i=n.es;if(n.datum_type===qf){var s=CL(n,!1,t);if(s!==0)return;r=vL,i=EL}var a=e.a,o=e.b,l=e.es;if(e.datum_type===qf&&(a=vL,o=Foe,l=EL),i===l&&r===a&&!l_(n.datum_type)&&!l_(e.datum_type))return t;if(t=B9(t,i,r),l_(n.datum_type)&&(t=Fle(t,n.datum_type,n.datum_params)),l_(e.datum_type)&&(t=jle(t,e.datum_type,e.datum_params)),t=U9(t,l,a,o),e.datum_type===qf){var u=CL(e,!0,t);if(u!==0)return}return t}function CL(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<n.grids.length;a++){var o=n.grids[a];if(s.push(o.name),o.isNull){i=r;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,u=0,h=l.length;u<h;u++){var f=l[u],g=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,y=f.ll[0]-g,v=f.ll[1]-g,x=f.ll[0]+(f.lim[0]-1)*f.del[0]+g,w=f.ll[1]+(f.lim[1]-1)*f.del[1]+g;if(!(v>r.y||y>r.x||w<r.y||x<r.x)&&(i=Gle(r,e,f),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*bs+" "+r.y*bs+" tried: '"+s+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function Gle(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=ut(i.x-Math.PI)+Math.PI;var s=PL(i,t);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,o=1e-12,l,u;do{if(u=PL(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+s.x),y:i.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=ut(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=n.x+s.x,r.y=n.y+s.y);return r}function PL(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var u={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var h={x:e.cvs[a][0],y:e.cvs[a][1]},f=i.x*i.y,g=i.x*(1-i.y),y=(1-i.x)*(1-i.y),v=(1-i.x)*i.y;return s.x=y*o.x+g*l.x+v*h.x+f*u.x,s.y=y*o.y+g*l.y+v*h.y+f*u.y,s}function kL(n,e,t){var r=t.x,i=t.y,s=t.z||0,a,o,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(a=r,"ew".indexOf(n.axis[l])!==-1?o="x":o="y"):l===1?(a=i,"ns".indexOf(n.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),n.axis[l]){case"e":u[o]=a;break;case"w":u[o]=-a;break;case"n":u[o]=a;break;case"s":u[o]=-a;break;case"u":t[o]!==void 0&&(u.z=a);break;case"d":t[o]!==void 0&&(u.z=-a);break;default:return null}return u}function z9(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function Ble(n){ML(n.x),ML(n.y)}function ML(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function Ule(n,e){return(n.datum.datum_type===Qh||n.datum.datum_type===Jh||n.datum.datum_type===qf)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Qh||e.datum.datum_type===Jh||e.datum.datum_type===qf)&&n.datumCode!=="WGS84"}function nv(n,e,t,r){var i;Array.isArray(t)?t=z9(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(Ble(t),n.datum&&e.datum&&Ule(n,e)&&(i=new Ta("WGS84"),t=nv(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=kL(n,!1,t)),n.projName==="longlat")t={x:t.x*_r,y:t.y*_r,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=Vle(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*bs,y:t.y*bs,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?kL(e,!0,t):(t&&!s&&delete t.z,t)}var NL=Ta("WGS84");function PS(n,e,t,r){var i,s,a;return Array.isArray(t)?(i=nv(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(s=nv(n,e,t,r),a=Object.keys(t),a.length===2||a.forEach(function(o){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=t[o]}),s)}function c_(n){return n instanceof Ta?n:typeof n=="object"&&"oProj"in n?n.oProj:Ta(n)}function zle(n,e,t){var r,i,s=!1,a;return typeof e>"u"?(i=c_(n),r=NL,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=c_(n),r=NL,s=!0),r||(r=c_(n)),i||(i=c_(e)),t?PS(r,i,t):(a={forward:function(o,l){return PS(r,i,o,l)},inverse:function(o,l){return PS(i,r,o,l)}},s&&(a.oProj=i),a)}var LL=6,$9="AJSAJS",W9="AFAFAF",Ff=65,ys=73,ma=79,lm=86,cm=90;const $le={forward:H9,inverse:Wle,toPoint:K9};function H9(n,e){return e=e||5,Yle(Hle({lat:n[1],lon:n[0]}),e)}function Wle(n){var e=RR(X9(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function K9(n){var e=RR(X9(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function kS(n){return n*(Math.PI/180)}function OL(n){return 180*(n/Math.PI)}function Hle(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,s=.9996,a,o,l,u,h,f,g,y=kS(e),v=kS(t),x,w;w=Math.floor((t+180)/6)+1,t===180&&(w=60),e>=56&&e<64&&t>=3&&t<12&&(w=32),e>=72&&e<84&&(t>=0&&t<9?w=31:t>=9&&t<21?w=33:t>=21&&t<33?w=35:t>=33&&t<42&&(w=37)),a=(w-1)*6-180+3,x=kS(a),o=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(y)*Math.sin(y)),u=Math.tan(y)*Math.tan(y),h=o*Math.cos(y)*Math.cos(y),f=Math.cos(y)*(v-x),g=r*((1-i/4-3*i*i/64-5*i*i*i/256)*y-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*y)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*y)-35*i*i*i/3072*Math.sin(6*y));var T=s*l*(f+(1-u+h)*f*f*f/6+(5-18*u+u*u+72*h-58*o)*f*f*f*f*f/120)+5e5,I=s*(g+l*Math.tan(y)*(f*f/2+(5-u+9*h+4*h*h)*f*f*f*f/24+(61-58*u+u*u+600*h-330*o)*f*f*f*f*f*f/720));return e<0&&(I+=1e7),{northing:Math.round(I),easting:Math.round(T),zoneNumber:w,zoneLetter:Kle(e)}}function RR(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,o=.00669438,l,u=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),h,f,g,y,v,x,w,T,I,b=t-5e5,N=e;r<"N"&&(N-=1e7),w=(i-1)*6-180+3,l=o/(1-o),x=N/s,T=x/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),I=T+(3*u/2-27*u*u*u/32)*Math.sin(2*T)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*T)+151*u*u*u/96*Math.sin(6*T),h=a/Math.sqrt(1-o*Math.sin(I)*Math.sin(I)),f=Math.tan(I)*Math.tan(I),g=l*Math.cos(I)*Math.cos(I),y=a*(1-o)/Math.pow(1-o*Math.sin(I)*Math.sin(I),1.5),v=b/(h*s);var F=I-h*Math.tan(I)/y*(v*v/2-(5+3*f+10*g-4*g*g-9*l)*v*v*v*v/24+(61+90*f+298*g+45*f*f-252*l-3*g*g)*v*v*v*v*v*v/720);F=OL(F);var W=(v-(1+2*f+g)*v*v*v/6+(5-2*g+28*f-3*g*g+8*l+24*f*f)*v*v*v*v*v/120)/Math.cos(I);W=w+OL(W);var M;if(n.accuracy){var C=RR({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});M={top:C.lat,right:C.lon,bottom:F,left:W}}else M={lat:F,lon:W};return M}function Kle(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function Yle(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+Xle(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function Xle(n,e,t){var r=Y9(t),i=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return qle(i,s,r)}function Y9(n){var e=n%LL;return e===0&&(e=LL),e}function qle(n,e,t){var r=t-1,i=$9.charCodeAt(r),s=W9.charCodeAt(r),a=i+n-1,o=s+e,l=!1;a>cm&&(a=a-cm+Ff-1,l=!0),(a===ys||i<ys&&a>ys||(a>ys||i<ys)&&l)&&a++,(a===ma||i<ma&&a>ma||(a>ma||i<ma)&&l)&&(a++,a===ys&&a++),a>cm&&(a=a-cm+Ff-1),o>lm?(o=o-lm+Ff-1,l=!0):l=!1,(o===ys||s<ys&&o>ys||(o>ys||s<ys)&&l)&&o++,(o===ma||s<ma&&o>ma||(o>ma||s<ma)&&l)&&(o++,o===ys&&o++),o>lm&&(o=o-lm+Ff-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function X9(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var o=n.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+n;t=n.substring(s,s+=2);for(var l=Y9(a),u=Zle(t.charAt(0),l),h=Qle(t.charAt(1),l);h<Jle(o);)h+=2e6;var f=e-s;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var g=f/2,y=0,v=0,x,w,T,I,b;return g>0&&(x=1e5/Math.pow(10,g),w=n.substring(s,s+g),y=parseFloat(w)*x,T=n.substring(s+g),v=parseFloat(T)*x),I=y+u,b=v+h,{easting:I,northing:b,zoneLetter:o,zoneNumber:a,accuracy:x}}function Zle(n,e){for(var t=$9.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===ys&&t++,t===ma&&t++,t>cm){if(i)throw"Bad character: "+n;t=Ff,i=!0}r+=1e5}return r}function Qle(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=W9.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===ys&&t++,t===ma&&t++,t>lm){if(i)throw"Bad character: "+n;t=Ff,i=!0}r+=1e5}return r}function Jle(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function C0(n,e,t){if(!(this instanceof C0))return new C0(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}C0.fromMGRS=function(n){return new C0(K9(n))};C0.prototype.toMGRS=function(n){return H9([this.x,this.y],n)};var ece=1,tce=.25,DL=.046875,FL=.01953125,jL=.01068115234375,nce=.75,rce=.46875,ice=.013020833333333334,sce=.007120768229166667,ace=.3645833333333333,oce=.005696614583333333,lce=.3076171875;function CR(n){var e=[];e[0]=ece-n*(tce+n*(DL+n*(FL+n*jL))),e[1]=n*(nce-n*(DL+n*(FL+n*jL)));var t=n*n;return e[2]=t*(rce-n*(ice+n*sce)),t*=n,e[3]=t*(ace-n*oce),e[4]=t*n*lce,e}function $0(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var cce=20;function PR(n,e,t){for(var r=1/(1-e),i=n,s=cce;s;--s){var a=Math.sin(i),o=1-e*a*a;if(o=($0(i,a,Math.cos(i),t)-n)*(o*Math.sqrt(o))*r,i-=o,Math.abs(o)<it)return i}return i}function uce(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=CR(this.es),this.ml0=$0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function hce(n){var e=n.x,t=n.y,r=ut(e-this.long0,this.over),i,s,a,o=Math.sin(t),l=Math.cos(t);if(this.es){var h=l*r,f=Math.pow(h,2),g=this.ep2*Math.pow(l,2),y=Math.pow(g,2),v=Math.abs(l)>it?Math.tan(t):0,x=Math.pow(v,2),w=Math.pow(x,2);i=1-this.es*Math.pow(o,2),h=h/Math.sqrt(i);var T=$0(t,o,l,this.en);s=this.a*(this.k0*h*(1+f/6*(1-x+g+f/20*(5-18*x+w+14*g-58*x*g+f/42*(61+179*w-w*x-479*x)))))+this.x0,a=this.a*(this.k0*(T-this.ml0+o*r*h/2*(1+f/12*(5-x+9*g+4*y+f/30*(61+w-58*x+270*g-330*x*g+f/56*(1385+543*w-w*x-3111*x))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<it)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,a=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(a),u>=1){if(u-1>it)return 93;a=0}else a=Math.acos(a);t<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return n.x=s,n.y=a,n}function dce(n){var e,t,r,i,s=(n.x-this.x0)*(1/this.a),a=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,t=PR(e,this.es,this.en),Math.abs(t)<Ue){var f=Math.sin(t),g=Math.cos(t),y=Math.abs(g)>it?Math.tan(t):0,v=this.ep2*Math.pow(g,2),x=Math.pow(v,2),w=Math.pow(y,2),T=Math.pow(w,2);e=1-this.es*Math.pow(f,2);var I=s*Math.sqrt(e)/this.k0,b=Math.pow(I,2);e=e*y,r=t-e*b/(1-this.es)*.5*(1-b/12*(5+3*w-9*v*w+v-4*x-b/30*(61+90*w-252*v*w+45*T+46*v-b/56*(1385+3633*w+4095*T+1574*T*w)))),i=ut(this.long0+I*(1-b/6*(1+2*w+v-b/20*(5+28*w+24*T+8*v*w+6*v-b/42*(61+662*w+1320*T+720*T*w))))/g,this.over)}else r=Ue*w1(a),i=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),u=this.lat0+a/this.k0,h=Math.cos(u);e=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),r=Math.asin(e),a<0&&(r=-r),l===0&&h===0?i=0:i=ut(Math.atan2(l,h)+this.long0,this.over)}return n.x=i,n.y=r,n}var fce=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const W_={init:uce,forward:hce,inverse:dce,names:fce};function q9(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function Ss(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function gce(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function mce(n){var e=Math.abs(n);return e=gce(e*(1+e/(Ss(1,e)+1))),n<0?-e:e}function kR(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return e+a*Math.sin(2*e)}function pce(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return Math.sin(e)*a}function yce(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function Z9(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),s=q9(t),a=yce(t),o=2*i*a,l=-2*r*s,u=n.length-1,h=n[u],f=0,g=0,y=0,v,x;--u>=0;)v=g,x=f,g=h,f=y,h=-v+o*g-l*f+n[u],y=-x+l*g+o*f;return o=r*a,l=i*s,[o*h-l*y,o*y+l*h]}function _ce(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(W_.init.apply(this),this.forward=W_.forward,this.inverse=W_.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=kR(this.cbg,this.lat0);this.Zb=-this.Qn*(r+pce(this.gtu,2*r))}function xce(n){var e=ut(n.x-this.long0,this.over),t=n.y;t=kR(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),s=Math.sin(e),a=Math.cos(e);t=Math.atan2(r,a*i),e=Math.atan2(s*i,Ss(r,i*a)),e=mce(Math.tan(e));var o=Z9(this.gtu,2*t,2*e);t=t+o[0],e=e+o[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),n.x=l,n.y=u,n}function vce(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=Z9(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(q9(e));var a=Math.sin(t),o=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(a*u,Ss(l,u*o)),e=Math.atan2(l,u*o),r=ut(e+this.long0,this.over),i=kR(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var Ece=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const H_={init:_ce,forward:xce,inverse:vce,names:Ece};function wce(n,e){if(n===void 0){if(n=Math.floor((ut(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var Sce="etmerc";function Tce(){var n=wce(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*_r,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,H_.init.apply(this),this.forward=H_.forward,this.inverse=H_.inverse}var Ice=["Universal Transverse Mercator System","utm"];const Ace={init:Tce,names:Ice,dependsOn:Sce};function MR(n,e){return Math.pow((1-n)/(1+n),e)}var bce=20;function Rce(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+kn)/(Math.pow(Math.tan(.5*this.lat0+kn),this.C)*MR(this.e*n,this.ratexp))}function Cce(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+kn),this.C)*MR(this.e*Math.sin(t),this.ratexp))-Ue,n.x=this.C*e,n}function Pce(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+kn)/this.K,1/this.C),s=bce;s>0&&(r=2*Math.atan(i*MR(this.e*Math.sin(n.y),-.5*this.e))-Ue,!(Math.abs(r-n.y)<e));--s)n.y=r;return s?(n.x=t,n.y=r,n):null}const NR={init:Rce,forward:Cce,inverse:Pce};function kce(){NR.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Mce(n){var e,t,r,i;return n.x=ut(n.x-this.long0,this.over),NR.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Nce(n){var e,t,r,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=Ss(n.x,n.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),t=Math.cos(a),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),r=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,NR.inverse.apply(this,[n]),n.x=ut(n.x+this.long0,this.over),n}var Lce=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Oce={init:kce,forward:Mce,inverse:Nce,names:Lce};function LR(n,e,t){return e*=t,Math.tan(.5*(Ue+n))*Math.pow((1-e)/(1+e),.5*t)}function Dce(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&(this.k0=.5*(1+w1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=it&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&Math.abs(Math.cos(this.lat_ts))>it&&(this.k0=.5*this.cons*qo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ja(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=qo(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(LR(this.lat0,this.sinlat0,this.e))-Ue,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Fce(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),s,a,o,l,u,h,f=ut(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=it&&Math.abs(t+this.lat0)<=it?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(f)),n.x=this.a*s*i*Math.sin(f)+this.x0,n.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(f))+this.y0,n):(a=2*Math.atan(LR(t,r,this.e))-Ue,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=it?(u=Ja(this.e,t*this.con,this.con*r),h=2*this.a*this.k0*u/this.cons,n.x=this.x0+h*Math.sin(e-this.long0),n.y=this.y0-this.con*h*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<it?(s=2*this.a*this.k0/(1+l*Math.cos(f)),n.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(f))),n.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(f))+this.y0),n.x=s*l*Math.sin(f)+this.x0,n))}function jce(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,t=this.lat0,a<=it?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(o)*this.sinlat0+n.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<it?this.lat0>0?e=ut(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=ut(this.long0+Math.atan2(n.x,n.y),this.over):e=ut(this.long0+Math.atan2(n.x*Math.sin(o),a*this.coslat0*Math.cos(o)-n.y*this.sinlat0*Math.sin(o)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=it){if(a<=it)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=a*this.cons/(2*this.a*this.k0),t=this.con*Ap(this.e,r),e=this.con*ut(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=it?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/a),e=ut(this.long0+Math.atan2(n.x*Math.sin(i),a*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*Ap(this.e,Math.tan(.5*(Ue+s)));return n.x=e,n.y=t,n}var Vce=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Gce={init:Dce,forward:Fce,inverse:jce,names:Vce,ssfn_:LR};function Bce(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*u}function Uce(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,n.x=this.R*a+this.x0,n}function zce(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+a/this.alpha,l=0,u=s,h=-1e3,f=0;Math.abs(u-h)>1e-7;){if(++f>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=o,n.y=u,n}var $ce=["somerc"];const Wce={init:Bce,forward:Uce,inverse:zce,names:$ce};var Af=1e-7;function Hce(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(V9(t))!==-1}function Kce(){var n,e,t,r,i,s,a,o,l,u,h=0,f,g=0,y=0,v=0,x=0,w=0,T=0;this.no_off=Hce(this),this.no_rot="no_rot"in this;var I=!1;"alpha"in this&&(I=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),I&&(T=this.alpha),b&&(h=this.rectified_grid_angle),I||b)g=this.longc;else if(y=this.long1,x=this.lat1,v=this.long2,w=this.lat2,Math.abs(x-w)<=Af||(n=Math.abs(x))<=Af||Math.abs(n-Ue)<=Af||Math.abs(Math.abs(this.lat0)-Ue)<=Af||Math.abs(Math.abs(w)-Ue)<=Af)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>it?(o=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*o*o,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Ja(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),I||b?(I?(f=Math.asin(Math.sin(T)/r),b||(h=T)):(f=h,T=Math.asin(r*Math.sin(f))),this.lam0=g-Math.asin(.5*(i-1/i)*Math.tan(f))/this.B):(s=Math.pow(Ja(this.e,x,Math.sin(x)),this.B),a=Math.pow(Ja(this.e,w,Math.sin(w)),this.B),i=this.E/s,l=(a-s)/(a+s),u=this.E*this.E,u=(u-a*s)/(u+a*s),n=y-v,n<-Math.PI?v-=Tp:n>Math.PI&&(v+=Tp),this.lam0=ut(.5*(y+v)-Math.atan(u*Math.tan(.5*this.B*(y-v))/l)/this.B,this.over),f=Math.atan(2*Math.sin(this.B*ut(y-this.lam0,this.over))/(i-1/i)),h=T=Math.asin(r*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(kn-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(kn+i))}function Yce(n){var e={},t,r,i,s,a,o,l,u;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-Ue)>it){if(a=this.E/Math.pow(Ja(this.e,n.y,Math.sin(n.y)),this.B),o=1/a,t=.5*(a-o),r=.5*(a+o),s=Math.sin(this.B*n.x),i=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<it)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*n.x),Math.abs(o)<Af?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,o)}else u=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Xce(n){var e,t,r,i,s,a,o,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),o=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<it)l.x=0,l.y=o<0?-Ue:Ue;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=Ap(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var qce=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Zce={init:Kce,forward:Yce,inverse:Xce,names:qce};function Qce(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<it)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=qo(this.e,e,t),i=Ja(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=qo(this.e,s,a),l=Ja(this.e,this.lat2,s),u=Math.abs(Math.abs(this.lat0)-Ue)<it?0:Ja(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>it?this.ns=Math.log(r/o)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Jce(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=it&&(t=w1(t)*(Ue-2*it));var r=Math.abs(Math.abs(t)-Ue),i,s;if(r>it)i=Ja(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var a=this.ns*ut(e-this.long0,this.over);return n.x=this.k0*(s*Math.sin(a))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,n}function eue(n){var e,t,r,i,s,a=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),t=1):(e=-Math.sqrt(a*a+o*o),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*a,t*o)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=Ap(this.e,r),i===-9999)return null}else i=-Ue;return s=ut(l/this.ns+this.long0,this.over),n.x=s,n.y=i,n}var tue=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const nue={init:Qce,forward:Jce,inverse:eue,names:tue};function rue(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function iue(n){var e,t,r,i,s,a,o,l=n.x,u=n.y,h=ut(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-h*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=o*Math.cos(a)/1,n.x=o*Math.sin(a)/1,this.czech||(n.y*=-1,n.x*=-1),n}function sue(n){var e,t,r,i,s,a,o,l,u=n.x;n.x=n.y,n.y=u,this.czech||(n.y*=-1,n.x*=-1),a=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,o=e,l=0;var h=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-n.y)<1e-10&&(l=1),o=n.y,h+=1;while(l===0&&h<15);return h>=15?null:n}var aue=["Krovak","krovak"];const oue={init:rue,forward:iue,inverse:sue,names:aue};function is(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function S1(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function T1(n){return .375*n*(1+.25*n*(1+.46875*n))}function I1(n){return .05859375*n*n*(1+.75*n)}function A1(n){return n*n*n*(35/3072)}function OR(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function Ru(n){return Math.abs(n)<Ue?n:n-w1(n)*Math.PI}function rv(n,e,t,r,i){var s,a;s=n/e;for(var o=0;o<15;o++)if(a=(n-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function lue(){this.sphere||(this.e0=S1(this.es),this.e1=T1(this.es),this.e2=I1(this.es),this.e3=A1(this.es),this.ml0=this.a*is(this.e0,this.e1,this.e2,this.e3,this.lat0))}function cue(n){var e,t,r=n.x,i=n.y;if(r=ut(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),o=OR(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),h=u*u,f=this.es*a*a/(1-this.es),g=this.a*is(this.e0,this.e1,this.e2,this.e3,i);e=o*u*(1-h*l*(1/6-(8-l+8*f)*h/120)),t=g-this.ml0+o*s/a*h*(.5+(5-l+6*f)*h/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function uue(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+t,o=rv(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Ue)<=it)return n.x=this.long0,n.y=Ue,t<0&&(n.y*=-1),n;var l=OR(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(o),2),f=e*this.a/l,g=f*f;r=o-l*Math.tan(o)/u*f*f*(.5-(1+3*h)*f*f/24),i=f*(1-g*(h/3+(1+3*h)*h*g/15))/Math.cos(o)}return n.x=ut(i+this.long0,this.over),n.y=Ru(r),n}var hue=["Cassini","Cassini_Soldner","cass"];const due={init:lue,forward:cue,inverse:uue,names:hue};function iu(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var bI=1,RI=2,CI=3,K_=4;function fue(){var n=Math.abs(this.lat0);if(Math.abs(n-Ue)<it?this.mode=this.lat0<0?bI:RI:Math.abs(n)<it?this.mode=CI:this.mode=K_,this.es>0){var e;switch(this.qp=iu(this.e,1),this.mmf=.5/(1-this.es),this.apa=wue(this.es),this.mode){case RI:this.dd=1;break;case bI:this.dd=1;break;case CI:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case K_:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=iu(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===K_&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function gue(n){var e,t,r,i,s,a,o,l,u,h,f=n.x,g=n.y;if(f=ut(f-this.long0,this.over),this.sphere){if(s=Math.sin(g),h=Math.cos(g),r=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+h*r:1+this.sinph0*s+this.cosph0*h*r,t<=it)return null;t=Math.sqrt(2/t),e=t*h*Math.sin(f),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(g+this.lat0)<it)return null;t=kn-g*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(f),t*=r}}else{switch(o=0,l=0,u=0,r=Math.cos(f),i=Math.sin(f),s=Math.sin(g),a=iu(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=Ue+g,a=this.qp-a;break;case this.S_POLE:u=g-Ue,a=this.qp+a;break}if(Math.abs(u)<it)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*o-this.sinb1*l*r):t=(u=Math.sqrt(2/(1+l*r)))*o*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,t=r*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function mue(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,s,a,o,l,u;if(this.sphere){var h=0,f,g=0;if(f=Math.sqrt(e*e+t*t),i=f*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(i),h=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(f)<=it?0:Math.asin(t*g/f),e*=g,t=h*f;break;case this.OBLIQ:i=Math.abs(f)<=it?this.lat0:Math.asin(h*this.sinph0+t*g*this.cosph0/f),e*=g*this.cosph0,t=(h-Math.sin(i)*this.sinph0)*f;break;case this.N_POLE:t=-t,i=Ue-i;break;case this.S_POLE:i-=Ue;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<it)return n.x=this.long0,n.y=this.lat0,n;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(u=s*this.sinb1+t*a*this.cosb1/l,o=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*a):(u=t*a/l,o=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=e*e+t*t,!o)return n.x=this.long0,n.y=this.lat0,n;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,t),i=Sue(Math.asin(u),this.apa)}return n.x=ut(this.long0+r,this.over),n.y=i,n}var pue=.3333333333333333,yue=.17222222222222222,_ue=.10257936507936508,xue=.06388888888888888,vue=.0664021164021164,Eue=.016415012942191543;function wue(n){var e,t=[];return t[0]=n*pue,e=n*n,t[0]+=e*yue,t[1]=e*xue,e*=n,t[0]+=e*_ue,t[1]+=e*vue,t[2]=e*Eue,t}function Sue(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var Tue=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Iue={init:fue,forward:gue,inverse:mue,names:Tue,S_POLE:bI,N_POLE:RI,EQUIT:CI,OBLIQ:K_};function _u(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function Aue(){Math.abs(this.lat1+this.lat2)<it||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=qo(this.e3,this.sin_po,this.cos_po),this.qs1=iu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=qo(this.e3,this.sin_po,this.cos_po),this.qs2=iu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=iu(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>it?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function bue(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=iu(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*ut(e-this.long0,this.over),a=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return n.x=a,n.y=o,n}function Rue(n){var e,t,r,i,s,a;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,t)),s=ut(i/this.ns0+this.long0,this.over),n.x=s,n.y=a,n}function Cue(n,e){var t,r,i,s,a,o=_u(.5*e);if(n<it)return o;for(var l=n*n,u=1;u<=25;u++)if(t=Math.sin(o),r=Math.cos(o),i=n*t,s=1-i*i,a=.5*s*s/r*(e/(1-l)-t/s+.5/n*Math.log((1-i)/(1+i))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var Pue=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const kue={init:Aue,forward:bue,inverse:Rue,names:Pue,phi1z:Cue};function Mue(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Nue(n){var e,t,r,i,s,a,o,l,u=n.x,h=n.y;return r=ut(u-this.long0,this.over),e=Math.sin(h),t=Math.cos(h),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,a>0||Math.abs(a)<=it?(o=this.x0+this.a*s*t*Math.sin(r)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)/a):(o=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function Lue(n){var e,t,r,i,s,a;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),a=_u(r*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),s=ut(this.long0+s,this.over)):(a=this.phic0,s=0),n.x=s,n.y=a,n}var Oue=["gnom"];const Due={init:Mue,forward:Nue,inverse:Lue,names:Oue};function Fue(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Ue:Ue;for(var r=Math.asin(.5*e),i,s,a,o,l=0;l<30;l++)if(s=Math.sin(r),a=Math.cos(r),o=n*s,i=Math.pow(1-o*o,2)/(2*a)*(e/(1-n*n)-s/(1-o*o)+.5/n*Math.log((1-o)/(1+o))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function jue(){this.sphere||(this.k0=qo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Vue(n){var e=n.x,t=n.y,r,i,s=ut(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var a=iu(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return n.x=r,n.y=i,n}function Gue(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=ut(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=Fue(this.e,2*n.y*this.k0/this.a),e=ut(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var Bue=["cea"];const Uue={init:jue,forward:Vue,inverse:Gue,names:Bue};function zue(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function $ue(n){var e=n.x,t=n.y,r=ut(e-this.long0,this.over),i=Ru(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function Wue(n){var e=n.x,t=n.y;return n.x=ut(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=Ru(this.lat0+(t-this.y0)/this.a),n}var Hue=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Kue={init:zue,forward:$ue,inverse:Wue,names:Hue};var VL=20;function Yue(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=S1(this.es),this.e1=T1(this.es),this.e2=I1(this.es),this.e3=A1(this.es),this.ml0=this.a*is(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Xue(n){var e=n.x,t=n.y,r,i,s,a=ut(e-this.long0,this.over);if(s=a*Math.sin(t),this.sphere)Math.abs(t)<=it?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),i=this.a*(Ru(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=it)r=this.a*a,i=-1*this.ml0;else{var o=OR(this.a,this.e,Math.sin(t))/Math.tan(t);r=o*Math.sin(s),i=this.a*is(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(s))}return n.x=r+this.x0,n.y=i+this.y0,n}function que(n){var e,t,r,i,s,a,o,l,u;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=it)e=ut(r/this.a+this.long0,this.over),t=0;else{a=this.lat0+i/this.a,o=r*r/this.a/this.a+a*a,l=a;var h;for(s=VL;s;--s)if(h=Math.tan(l),u=-1*(a*(l*h+1)-l-.5*(l*l+o)*h)/((l-a)/h-1),l+=u,Math.abs(u)<=it){t=l;break}e=ut(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=it)t=0,e=ut(this.long0+r/this.a,this.over);else{a=(this.ml0+i)/this.a,o=r*r/this.a/this.a+a*a,l=a;var f,g,y,v,x;for(s=VL;s;--s)if(x=this.e*Math.sin(l),f=Math.sqrt(1-x*x)*Math.tan(l),g=this.a*is(this.e0,this.e1,this.e2,this.e3,l),y=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),v=g/this.a,u=(a*(f*v+1)-v-.5*f*(v*v+o))/(this.es*Math.sin(2*l)*(v*v+o-2*a*v)/(4*f)+(a-v)*(f*y-2/Math.sin(2*l))-y),l-=u,Math.abs(u)<=it){t=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=ut(this.long0+Math.asin(r*f/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var Zue=["Polyconic","American_Polyconic","poly"];const Que={init:Yue,forward:Xue,inverse:que,names:Zue};function Jue(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function ehe(n){var e,t=n.x,r=n.y,i=r-this.lat0,s=t-this.long0,a=i/Rm*1e-5,o=s,l=1,u=0;for(e=1;e<=10;e++)l=l*a,u=u+this.A[e]*l;var h=u,f=o,g=1,y=0,v,x,w=0,T=0;for(e=1;e<=6;e++)v=g*h-y*f,x=y*h+g*f,g=v,y=x,w=w+this.B_re[e]*g-this.B_im[e]*y,T=T+this.B_im[e]*g+this.B_re[e]*y;return n.x=T*this.a+this.x0,n.y=w*this.a+this.y0,n}function the(n){var e,t=n.x,r=n.y,i=t-this.x0,s=r-this.y0,a=s/this.a,o=i/this.a,l=1,u=0,h,f,g=0,y=0;for(e=1;e<=6;e++)h=l*a-u*o,f=u*a+l*o,l=h,u=f,g=g+this.C_re[e]*l-this.C_im[e]*u,y=y+this.C_im[e]*l+this.C_re[e]*u;for(var v=0;v<this.iterations;v++){var x=g,w=y,T,I,b=a,N=o;for(e=2;e<=6;e++)T=x*g-w*y,I=w*g+x*y,x=T,w=I,b=b+(e-1)*(this.B_re[e]*x-this.B_im[e]*w),N=N+(e-1)*(this.B_im[e]*x+this.B_re[e]*w);x=1,w=0;var F=this.B_re[1],W=this.B_im[1];for(e=2;e<=6;e++)T=x*g-w*y,I=w*g+x*y,x=T,w=I,F=F+e*(this.B_re[e]*x-this.B_im[e]*w),W=W+e*(this.B_im[e]*x+this.B_re[e]*w);var M=F*F+W*W;g=(b*F+N*W)/M,y=(N*F-b*W)/M}var C=g,P=y,L=1,O=0;for(e=1;e<=9;e++)L=L*C,O=O+this.D[e]*L;var U=this.lat0+O*Rm*1e5,j=this.long0+P;return n.x=j,n.y=U,n}var nhe=["New_Zealand_Map_Grid","nzmg"];const rhe={init:Jue,forward:ehe,inverse:the,names:nhe};function ihe(){}function she(n){var e=n.x,t=n.y,r=ut(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=s,n}function ahe(n){n.x-=this.x0,n.y-=this.y0;var e=ut(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var ohe=["Miller_Cylindrical","mill"];const lhe={init:ihe,forward:she,inverse:ahe,names:ohe};var che=20;function uhe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=CR(this.es)}function hhe(n){var e,t,r=n.x,i=n.y;if(r=ut(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=che;a;--a){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<it)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);t=this.a*$0(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function dhe(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=_u((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=_u(Math.sin(e)/this.n)),r=ut(r+this.long0,this.over),e=Ru(e)):(e=PR(n.y/this.a,this.es,this.en),i=Math.abs(e),i<Ue?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=ut(t,this.over)):i-it<Ue&&(r=this.long0)),n.x=r,n.y=e,n}var fhe=["Sinusoidal","sinu"];const ghe={init:uhe,forward:hhe,inverse:dhe,names:fhe};function mhe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function phe(n){for(var e=n.x,t=n.y,r=ut(e-this.long0,this.over),i=t,s=Math.PI*Math.sin(t);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<it)break}i/=2,Math.PI/2-Math.abs(t)<it&&(r=0);var o=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=o,n.y=l,n}function yhe(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=ut(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var _he=["Mollweide","moll"];const xhe={init:mhe,forward:phe,inverse:yhe,names:_he};function vhe(){Math.abs(this.lat1+this.lat2)<it||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=S1(this.es),this.e1=T1(this.es),this.e2=I1(this.es),this.e3=A1(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=qo(this.e,this.sin_phi,this.cos_phi),this.ml1=is(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<it?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=qo(this.e,this.sin_phi,this.cos_phi),this.ml2=is(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=is(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Ehe(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=is(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var s=this.ns*ut(e-this.long0,this.over),a=this.x0+r*Math.sin(s),o=this.y0+this.rh-r*Math.cos(s);return n.x=a,n.y=o,n}function whe(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=ut(this.long0+s/this.ns,this.over),r=Ru(this.g-t/this.a),n.x=i,n.y=r,n;var a=this.g-t/this.a;return r=rv(a,this.e0,this.e1,this.e2,this.e3),i=ut(this.long0+s/this.ns,this.over),n.x=i,n.y=r,n}var She=["Equidistant_Conic","eqdc"];const The={init:vhe,forward:Ehe,inverse:whe,names:She};function Ihe(){this.R=this.a}function Ahe(n){var e=n.x,t=n.y,r=ut(e-this.long0,this.over),i,s;Math.abs(t)<=it&&(i=this.x0+this.R*r,s=this.y0);var a=_u(2*Math.abs(t/Math.PI));(Math.abs(r)<=it||Math.abs(Math.abs(t)-Ue)<=it)&&(i=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/r-r/Math.PI),l=o*o,u=Math.sin(a),h=Math.cos(a),f=h/(u+h-1),g=f*f,y=f*(2/u-1),v=y*y,x=Math.PI*this.R*(o*(f-v)+Math.sqrt(l*(f-v)*(f-v)-(v+l)*(g-v)))/(v+l);r<0&&(x=-x),i=this.x0+x;var w=l+f;return x=Math.PI*this.R*(y*w-o*Math.sqrt((v+l)*(l+1)-w*w))/(v+l),t>=0?s=this.y0+x:s=this.y0-x,n.x=i,n.y=s,n}function bhe(n){var e,t,r,i,s,a,o,l,u,h,f,g,y;return n.x-=this.x0,n.y-=this.y0,f=Math.PI*this.R,r=n.x/f,i=n.y/f,s=r*r+i*i,a=-Math.abs(i)*(1+s),o=a-2*i*i+r*r,l=-2*a+1+2*i*i+s*s,y=i*i/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,u=(a-o*o/3/l)/l,h=2*Math.sqrt(-u/3),f=3*y/u/h,Math.abs(f)>1&&(f>=0?f=1:f=-1),g=Math.acos(f)/3,n.y>=0?t=(-h*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI:t=-(-h*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI,Math.abs(r)<it?e=this.long0:e=ut(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),n.x=e,n.y=t,n}var Rhe=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const Che={init:Ihe,forward:Ahe,inverse:bhe,names:Rhe};function Phe(n,e,t,r,i,s){const a=r-e,o=Math.atan((1-s)*Math.tan(n)),l=Math.atan((1-s)*Math.tan(t)),u=Math.sin(o),h=Math.cos(o),f=Math.sin(l),g=Math.cos(l);let y=a,v,x=100,w,T,I,b,N,F,W,M,C,P,L,O,U,j;do{if(w=Math.sin(y),T=Math.cos(y),I=Math.sqrt(g*w*(g*w)+(h*f-u*g*T)*(h*f-u*g*T)),I===0)return{azi1:0,s12:0};b=u*f+h*g*T,N=Math.atan2(I,b),F=h*g*w/I,W=1-F*F,M=W!==0?b-2*u*f/W:0,C=s/16*W*(4+s*(4-3*W)),v=y,y=a+(1-C)*s*F*(N+C*I*(M+C*b*(-1+2*M*M)))}while(Math.abs(y-v)>1e-12&&--x>0);return x===0?{azi1:NaN,s12:NaN}:(P=W*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),L=1+P/16384*(4096+P*(-768+P*(320-175*P))),O=P/1024*(256+P*(-128+P*(74-47*P))),U=O*I*(M+O/4*(b*(-1+2*M*M)-O/6*M*(-3+4*I*I)*(-3+4*M*M))),j=i*(1-s)*L*(N-U),{azi1:Math.atan2(g*w,h*f-u*g*T),s12:j})}function khe(n,e,t,r,i,s){const a=Math.atan((1-s)*Math.tan(n)),o=Math.sin(a),l=Math.cos(a),u=Math.sin(t),h=Math.cos(t),f=Math.atan2(o,l*h),g=l*u,y=1-g*g,v=y*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),x=1+v/16384*(4096+v*(-768+v*(320-175*v))),w=v/1024*(256+v*(-128+v*(74-47*v)));let T=r/(i*(1-s)*x),I,b=100,N,F,W,M;do N=Math.cos(2*f+T),F=Math.sin(T),W=Math.cos(T),M=w*F*(N+w/4*(W*(-1+2*N*N)-w/6*N*(-3+4*F*F)*(-3+4*N*N))),I=T,T=r/(i*(1-s)*x)+M;while(Math.abs(T-I)>1e-12&&--b>0);if(b===0)return{lat2:NaN,lon2:NaN};const C=o*F-l*W*h,P=Math.atan2(o*W+l*F*h,(1-s)*Math.sqrt(g*g+C*C)),L=Math.atan2(F*u,l*W-o*F*h),O=s/16*y*(4+s*(4-3*y)),U=L-(1-O)*s*g*(T+O*F*(N+O*W*(-1+2*N*N))),j=e+U;return{lat2:P,lon2:j}}function Mhe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Nhe(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),s=ut(e-this.long0,this.over),a,o,l,u,h,f,g,y,v,x,w;return this.sphere?Math.abs(this.sin_p12-1)<=it?(n.x=this.x0+this.a*(Ue-t)*Math.sin(s),n.y=this.y0-this.a*(Ue-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=it?(n.x=this.x0+this.a*(Ue+t)*Math.sin(s),n.y=this.y0+this.a*(Ue+t)*Math.cos(s),n):(v=this.sin_p12*r+this.cos_p12*i*Math.cos(s),g=Math.acos(v),y=g?g/Math.sin(g):1,n.x=this.x0+this.a*y*i*Math.sin(s),n.y=this.y0+this.a*y*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),n):(a=S1(this.es),o=T1(this.es),l=I1(this.es),u=A1(this.es),Math.abs(this.sin_p12-1)<=it?(h=this.a*is(a,o,l,u,Ue),f=this.a*is(a,o,l,u,t),n.x=this.x0+(h-f)*Math.sin(s),n.y=this.y0-(h-f)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=it?(h=this.a*is(a,o,l,u,Ue),f=this.a*is(a,o,l,u,t),n.x=this.x0+(h+f)*Math.sin(s),n.y=this.y0+(h+f)*Math.cos(s),n):Math.abs(e)<it&&Math.abs(t-this.lat0)<it?(n.x=n.y=0,n):(x=Phe(this.lat0,this.long0,t,e,this.a,this.f),w=x.azi1,n.x=x.s12*Math.sin(w),n.y=x.s12*Math.cos(w),n))}function Lhe(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a,o,l,u,h,f,g,y,v,x,w;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*Ue*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=it?a=this.lat0:(a=_u(i*this.sin_p12+n.y*r*this.cos_p12/e),o=Math.abs(this.lat0)-Ue,Math.abs(o)<=it?this.lat0>=0?s=ut(this.long0+Math.atan2(n.x,-n.y),this.over):s=ut(this.long0-Math.atan2(-n.x,n.y),this.over):s=ut(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=s,n.y=a,n)):(l=S1(this.es),u=T1(this.es),h=I1(this.es),f=A1(this.es),Math.abs(this.sin_p12-1)<=it?(g=this.a*is(l,u,h,f,Ue),e=Math.sqrt(n.x*n.x+n.y*n.y),y=g-e,a=rv(y/this.a,l,u,h,f),s=ut(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=s,n.y=a,n):Math.abs(this.sin_p12+1)<=it?(g=this.a*is(l,u,h,f,Ue),e=Math.sqrt(n.x*n.x+n.y*n.y),y=e-g,a=rv(y/this.a,l,u,h,f),s=ut(this.long0+Math.atan2(n.x,n.y),this.over),n.x=s,n.y=a,n):(v=Math.atan2(n.x,n.y),x=Math.sqrt(n.x*n.x+n.y*n.y),w=khe(this.lat0,this.long0,v,x,this.a,this.f),n.x=w.lon2,n.y=w.lat2,n))}var Ohe=["Azimuthal_Equidistant","aeqd"];const Dhe={init:Mhe,forward:Nhe,inverse:Lhe,names:Ohe};function Fhe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function jhe(n){var e,t,r,i,s,a,o,l,u=n.x,h=n.y;return r=ut(u-this.long0,this.over),e=Math.sin(h),t=Math.cos(h),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,(a>0||Math.abs(a)<=it)&&(o=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function Vhe(n){var e,t,r,i,s,a,o;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=_u(e/this.a),r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=it?(o=this.lat0,n.x=a,n.y=o,n):(o=_u(i*this.sin_p14+n.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-Ue,Math.abs(s)<=it?(this.lat0>=0?a=ut(this.long0+Math.atan2(n.x,-n.y),this.over):a=ut(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=a,n.y=o,n):(a=ut(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=a,n.y=o,n))}var Ghe=["ortho"];const Bhe={init:Fhe,forward:jhe,inverse:Vhe,names:Ghe};var hr={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Mn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Uhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ue-kn/2?this.face=hr.TOP:this.lat0<=-(Ue-kn/2)?this.face=hr.BOTTOM:Math.abs(this.long0)<=kn?this.face=hr.FRONT:Math.abs(this.long0)<=Ue+kn?this.face=this.long0>0?hr.RIGHT:hr.LEFT:this.face=hr.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function zhe(n){var e={x:0,y:0},t,r,i,s,a,o,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===hr.TOP)s=Ue-t,r>=kn&&r<=Ue+kn?(l.value=Mn.AREA_0,i=r-Ue):r>Ue+kn||r<=-(Ue+kn)?(l.value=Mn.AREA_1,i=r>0?r-Rr:r+Rr):r>-(Ue+kn)&&r<=-kn?(l.value=Mn.AREA_2,i=r+Ue):(l.value=Mn.AREA_3,i=r);else if(this.face===hr.BOTTOM)s=Ue+t,r>=kn&&r<=Ue+kn?(l.value=Mn.AREA_0,i=-r+Ue):r<kn&&r>=-kn?(l.value=Mn.AREA_1,i=-r):r<-kn&&r>=-(Ue+kn)?(l.value=Mn.AREA_2,i=-r-Ue):(l.value=Mn.AREA_3,i=r>0?-r+Rr:-r-Rr);else{var u,h,f,g,y,v,x;this.face===hr.RIGHT?r=Zf(r,+Ue):this.face===hr.BACK?r=Zf(r,+Rr):this.face===hr.LEFT&&(r=Zf(r,-Ue)),g=Math.sin(t),y=Math.cos(t),v=Math.sin(r),x=Math.cos(r),u=y*x,h=y*v,f=g,this.face===hr.FRONT?(s=Math.acos(u),i=u_(s,f,h,l)):this.face===hr.RIGHT?(s=Math.acos(h),i=u_(s,f,-u,l)):this.face===hr.BACK?(s=Math.acos(-u),i=u_(s,f,-h,l)):this.face===hr.LEFT?(s=Math.acos(-h),i=u_(s,f,u,l)):(s=i=0,l.value=Mn.AREA_0)}return o=Math.atan(12/Rr*(i+Math.acos(Math.sin(i)*Math.cos(kn))-Ue)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Mn.AREA_1?o+=Ue:l.value===Mn.AREA_2?o+=Rr:l.value===Mn.AREA_3&&(o+=1.5*Rr),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function $he(n){var e={lam:0,phi:0},t,r,i,s,a,o,l,u,h,f={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?f.value=Mn.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(f.value=Mn.AREA_1,t-=Ue):n.x<0&&-n.x>=Math.abs(n.y)?(f.value=Mn.AREA_2,t=t<0?t+Rr:t-Rr):(f.value=Mn.AREA_3,t+=Ue),h=Rr/12*Math.tan(t),a=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),o=Math.atan(a),i=Math.cos(t),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===hr.TOP)u=Math.acos(l),e.phi=Ue-u,f.value===Mn.AREA_0?e.lam=o+Ue:f.value===Mn.AREA_1?e.lam=o<0?o+Rr:o-Rr:f.value===Mn.AREA_2?e.lam=o-Ue:e.lam=o;else if(this.face===hr.BOTTOM)u=Math.acos(l),e.phi=u-Ue,f.value===Mn.AREA_0?e.lam=-o+Ue:f.value===Mn.AREA_1?e.lam=-o:f.value===Mn.AREA_2?e.lam=-o-Ue:e.lam=o<0?-o-Rr:-o+Rr;else{var g,y,v;g=l,h=g*g,h>=1?v=0:v=Math.sqrt(1-h)*Math.sin(o),h+=v*v,h>=1?y=0:y=Math.sqrt(1-h),f.value===Mn.AREA_1?(h=y,y=-v,v=h):f.value===Mn.AREA_2?(y=-y,v=-v):f.value===Mn.AREA_3&&(h=y,y=v,v=-h),this.face===hr.RIGHT?(h=g,g=-y,y=h):this.face===hr.BACK?(g=-g,y=-y):this.face===hr.LEFT&&(h=g,g=y,y=-h),e.phi=Math.acos(-v)-Ue,e.lam=Math.atan2(y,g),this.face===hr.RIGHT?e.lam=Zf(e.lam,-Ue):this.face===hr.BACK?e.lam=Zf(e.lam,-Rr):this.face===hr.LEFT&&(e.lam=Zf(e.lam,+Ue))}if(this.es!==0){var x,w,T;x=e.phi<0?1:0,w=Math.tan(e.phi),T=this.b/Math.sqrt(w*w+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function u_(n,e,t,r){var i;return n<it?(r.value=Mn.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=kn?r.value=Mn.AREA_0:i>kn&&i<=Ue+kn?(r.value=Mn.AREA_1,i-=Ue):i>Ue+kn||i<=-(Ue+kn)?(r.value=Mn.AREA_2,i=i>=0?i-Rr:i+Rr):(r.value=Mn.AREA_3,i+=Ue)),i}function Zf(n,e){var t=n+e;return t<-Rr?t+=Tp:t>+Rr&&(t-=Tp),t}var Whe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Hhe={init:Uhe,forward:zhe,inverse:$he,names:Whe};var PI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],um=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Q9=.8487,J9=1.3523,e7=bs/5,Khe=1/e7,jf=18,iv=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},Yhe=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function Xhe(n,e,t,r){for(var i=e;r;--r){var s=n(i);if(i-=s,Math.abs(s)<t)break}return i}function qhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Zhe(n){var e=ut(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*e7);r<0?r=0:r>=jf&&(r=jf-1),t=bs*(t-Khe*r);var i={x:iv(PI[r],t)*e,y:iv(um[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*Q9+this.x0,i.y=i.y*this.a*J9+this.y0,i}function Qhe(n){var e={x:(n.x-this.x0)/(this.a*Q9),y:Math.abs(n.y-this.y0)/(this.a*J9)};if(e.y>=1)e.x/=PI[jf][0],e.y=n.y<0?-Ue:Ue;else{var t=Math.floor(e.y*jf);for(t<0?t=0:t>=jf&&(t=jf-1);;)if(um[t][0]>e.y)--t;else if(um[t+1][0]<=e.y)++t;else break;var r=um[t],i=5*(e.y-r[0])/(um[t+1][0]-r[0]);i=Xhe(function(s){return(iv(r,s)-e.y)/Yhe(r,s)},i,it,100),e.x/=iv(PI[t],i),e.y=(5*t+i)*_r,n.y<0&&(e.y=-e.y)}return e.x=ut(e.x+this.long0,this.over),e}var Jhe=["Robinson","robin"];const ede={init:qhe,forward:Zhe,inverse:Qhe,names:Jhe};function tde(){this.name="geocent"}function nde(n){var e=B9(n,this.es,this.a);return e}function rde(n){var e=U9(n,this.es,this.a,this.b);return e}var ide=["Geocentric","geocentric","geocent","Geocent"];const sde={init:tde,forward:nde,inverse:rde,names:ide};var Vi={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Hg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function ade(){if(Object.keys(Hg).forEach((function(t){if(typeof this[t]>"u")this[t]=Hg[t].def;else{if(Hg[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Hg[t].num&&(this[t]=parseFloat(this[t]))}Hg[t].degrees&&(this[t]=this[t]*_r)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ue)<it?this.mode=this.lat0<0?Vi.S_POLE:Vi.N_POLE:Math.abs(this.lat0)<it?this.mode=Vi.EQUIT:(this.mode=Vi.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function ode(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,s;switch(this.mode){case Vi.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case Vi.EQUIT:s=t*r;break;case Vi.S_POLE:s=-e;break;case Vi.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*t*Math.sin(n.x),this.mode){case Vi.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case Vi.EQUIT:s*=e;break;case Vi.N_POLE:s*=-(t*r);break;case Vi.S_POLE:s*=t*r;break}var a,o;return a=s*this.cg+i*this.sg,o=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=a*o,n.x=i*this.a,n.y=s*this.a,n}function lde(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var s=Ss(n.x,n.y);if(Math.abs(s)<it)e.x=0,e.y=n.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Vi.OBLIQ:e.y=Math.asin(a*this.sinph0+n.y*o*this.cosph0/s),n.y=(a-this.sinph0*Math.sin(e.y))*s,n.x*=o*this.cosph0;break;case Vi.EQUIT:e.y=Math.asin(n.y*o/s),n.y=a*s,n.x*=o;break;case Vi.N_POLE:e.y=Math.asin(a),n.y=-n.y;break;case Vi.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var cde=["Tilted_Perspective","tpers"];const ude={init:ade,forward:ode,inverse:lde,names:cde};function hde(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function dde(n){var e=n.x,t=n.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var o=this.radius_p/Ss(this.radius_p*Math.cos(t),Math.sin(t));if(i=o*Math.cos(e)*Math.cos(t),s=o*Math.sin(e)*Math.cos(t),a=o*Math.sin(t),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/Ss(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/Ss(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/Ss(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/Ss(s,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function fde(n){var e=-1,t=0,r=0,i,s,a,o;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Ss(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Ss(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var gde=["Geostationary Satellite View","Geostationary_Satellite","geos"];const mde={init:hde,forward:dde,inverse:fde,names:gde};var Cm=1.340264,Pm=-.081106,km=893e-6,Mm=.003796,sv=Math.sqrt(3)/2;function pde(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function yde(n){var e=ut(n.x-this.long0,this.over),t=n.y,r=Math.asin(sv*Math.sin(t)),i=r*r,s=i*i*i;return n.x=e*Math.cos(r)/(sv*(Cm+3*Pm*i+s*(7*km+9*Mm*i))),n.y=r*(Cm+Pm*i+s*(km+Mm*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function _de(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,s,a,o,l,u;for(u=0;u<t&&(i=r*r,s=i*i*i,a=r*(Cm+Pm*i+s*(km+Mm*i))-n.y,o=Cm+3*Pm*i+s*(7*km+9*Mm*i),r-=l=a/o,!(Math.abs(l)<e));++u);return i=r*r,s=i*i*i,n.x=sv*n.x*(Cm+3*Pm*i+s*(7*km+9*Mm*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/sv),n.x=ut(n.x+this.long0,this.over),n}var xde=["eqearth","Equal Earth","Equal_Earth"];const vde={init:pde,forward:yde,inverse:_de,names:xde};var bp=1e-10;function Ede(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<bp)throw new Error;this.es?(this.en=CR(this.es),this.m1=$0(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Sde,this.forward=wde):(Math.abs(this.phi1)+bp>=Ue?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Ide,this.forward=Tde)}function wde(n){var e=ut(n.x-(this.long0||0),this.over),t=n.y,r,i,s;return r=this.am1+this.m1-$0(t,i=Math.sin(t),s=Math.cos(t),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Sde(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=Ss(n.x,n.y=this.am1-n.y),i=PR(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<Ue)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-Ue)<=bp)r=0;else throw new Error;return n.x=ut(r+(this.long0||0),this.over),n.y=Ru(i),n}function Tde(n){var e=ut(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>bp?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Ide(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=Ss(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Ue)throw new Error;return Math.abs(Math.abs(t)-Ue)<=bp?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=ut(e+(this.long0||0),this.over),n.y=Ru(t),n}var Ade=["bonne","Bonne (Werner lat_1=90)"];const bde={init:Ede,names:Ade},GL={OBLIQUE:{forward:Mde,inverse:Lde},TRANSVERSE:{forward:Nde,inverse:Ode}},av={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Rde(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=F9.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=Ta(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const r=Object.keys(av),i=o=>{if(typeof this[o]>"u")return;const l=parseFloat(this[o])*_r;if(isNaN(l))throw new Error("Invalid value for "+o+": "+this[o]);return l};for(let o=0;o<r.length;o++){const l=r[o],u=av[l],h=Object.entries(u);if(h.some(([g])=>typeof this[g]<"u")){t=u;for(let g=0;g<h.length;g++){const[y,v]=h[g],x=i(y);if(typeof x>"u")throw new Error("Missing parameter: "+y+".");this[v]=x}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:a}=kde(this,t);this.lamp=s,Math.abs(a)>it?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=GL.OBLIQUE):this.projectionType=GL.TRANSVERSE}function Cde(n){return this.projectionType.forward(this,n)}function Pde(n){return this.projectionType.inverse(this,n)}function kde(n,e){let t,r;if(e===av.ROTATE){let i=n.oLongC,s=n.oLatC,a=n.oAlpha;if(Math.abs(Math.abs(s)-Ue)<=it)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(s)),t=Math.asin(Math.cos(s)*Math.sin(a))}else if(e===av.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,s=n.oLat1,a=n.oLong2,o=n.oLat2,l=Math.abs(s);if(Math.abs(s)>Ue-it)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90");if(Math.abs(o)>Ue-it)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90");if(Math.abs(s-o)<it)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<it)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(o)*Math.cos(i)-Math.sin(s)*Math.cos(o)*Math.cos(a),Math.sin(s)*Math.cos(o)*Math.sin(a)-Math.cos(s)*Math.sin(o)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:t}}function Mde(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(t),s=Math.sin(r),a=Math.cos(r);e.x=ut(Math.atan2(a*Math.sin(t),n.sphip*a*i+n.cphip*s)+n.lamp),e.y=Math.asin(n.sphip*s-n.cphip*a*i);const o=n.obliqueProjection.forward(e);return n.isIdentity&&(o.x*=bs,o.y*=bs),o}function Nde(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(r),s=Math.cos(t);e.x=ut(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*s);const a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=bs,a.y*=bs),a}function Lde(n,e){n.isIdentity&&(e.x*=_r,e.y*=_r);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(r),n.sphip*o*s-n.cphip*a),e.y=Math.asin(n.sphip*a+n.cphip*o*s)}return e.x=ut(e.x+n.long0),e}function Ode(n,e){n.isIdentity&&(e.x*=_r,e.y*=_r);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=n.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=ut(e.x+n.long0),e}var Dde=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Fde={init:Rde,forward:Cde,inverse:Pde,names:Dde};function jde(n){n.Proj.projections.add(W_),n.Proj.projections.add(H_),n.Proj.projections.add(Ace),n.Proj.projections.add(Oce),n.Proj.projections.add(Gce),n.Proj.projections.add(Wce),n.Proj.projections.add(Zce),n.Proj.projections.add(nue),n.Proj.projections.add(oue),n.Proj.projections.add(due),n.Proj.projections.add(Iue),n.Proj.projections.add(kue),n.Proj.projections.add(Due),n.Proj.projections.add(Uue),n.Proj.projections.add(Kue),n.Proj.projections.add(Que),n.Proj.projections.add(rhe),n.Proj.projections.add(lhe),n.Proj.projections.add(ghe),n.Proj.projections.add(xhe),n.Proj.projections.add(The),n.Proj.projections.add(Che),n.Proj.projections.add(Dhe),n.Proj.projections.add(Bhe),n.Proj.projections.add(Hhe),n.Proj.projections.add(ede),n.Proj.projections.add(sde),n.Proj.projections.add(ude),n.Proj.projections.add(mde),n.Proj.projections.add(vde),n.Proj.projections.add(bde),n.Proj.projections.add(Fde)}const pn=Object.assign(zle,{defaultDatum:"WGS84",Proj:Ta,WGS84:new Ta("WGS84"),Point:C0,toPoint:z9,defs:xi,nadgrid:Ile,transform:nv,mgrs:$le,version:"__VERSION__"});jde(pn);class t7{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=to,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Wn(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Wn(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Vt()}readFeature(e,t){return Vt()}readFeatures(e,t){return Vt()}readGeometry(e,t){return Vt()}readProjection(e){return Vt()}writeFeature(e,t){return Vt()}writeFeatures(e,t){return Vt()}writeGeometry(e,t){return Vt()}}function so(n,e,t){const r=t?Wn(t.featureProjection):null,i=t?Wn(t.dataProjection):null;let s=n;if(r&&i&&!Ah(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(Hm(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(l){for(let u=0,h=l.length;u<h;++u)l[u]=Math.round(l[u]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Vde={Point:no,LineString:Wo,Polygon:ro,MultiPoint:N0,MultiLineString:ou,MultiPolygon:u0};function Gde(n,e,t){return Array.isArray(e[0])?(O5(n,0,e,t)||(n=n.slice(),lT(n,0,e,t)),n):(dA(n,0,e,t)||(n=n.slice(),lx(n,0,e,t)),n)}function n7(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>n7({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return so(new Ws(r,r==="Polygon"?Gde(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function DR(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>DR(i,e));return new qa(r)}const t=Vde[n.type];return so(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Bde extends t7{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(h_(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(h_(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Vt()}readFeaturesFromObject(e,t){return Vt()}readGeometry(e,t){return this.readGeometryFromObject(h_(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Vt()}readProjection(e){return this.readProjectionFromObject(h_(e))}readProjectionFromObject(e){return Vt()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Vt()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Vt()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Vt()}}function h_(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class FR extends Bde{constructor(e){e=e||{},super(),this.dataProjection=Wn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Wn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=jR(r.geometry);if(this.featureClass===Ws)return n7({geometry:i,id:r.id,properties:r.properties},t);const s=new to;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(DR(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,l=a.length;o<l;++o){const u=this.readFeatureFromObject(a[o],t);u&&i.push(u)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Ude(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Wn(t.properties.name);else if(t.type==="EPSG")r=Wn("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=kI(a,t),delete s[e.getGeometryName()]),Nh(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return kI(e,this.adaptOptions(t))}}function jR(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=$de(n);break}case"LineString":{t=Wde(n);break}case"Polygon":{t=Xde(n);break}case"MultiPoint":{t=Kde(n);break}case"MultiLineString":{t=Hde(n);break}case"MultiPolygon":{t=Yde(n);break}case"GeometryCollection":{t=zde(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Ude(n,e){const t=jR(n);return DR(t,e)}function zde(n,e){return n.geometries.map(function(r){return jR(r)})}function $de(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:ad(e.length)}}function Wde(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:ad(e[0]?.length||2)}}function Hde(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=$p(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:ad(t)}}function Kde(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:ad(e[0]?.length||2)}}function Yde(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=h5(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:ad(r)}}function Xde(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=$p(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:ad(r)}}function kI(n,e){n=so(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=tfe(n);break}case"LineString":{r=Zde(n);break}case"Polygon":{r=nfe(n,e);break}case"MultiPoint":{r=Jde(n);break}case"MultiLineString":{r=Qde(n);break}case"MultiPolygon":{r=efe(n,e);break}case"GeometryCollection":{r=qde(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function qde(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return kI(r,e)})}}function Zde(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Qde(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Jde(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function efe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function tfe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function nfe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const ov="http://www.w3.org/2001/XMLSchema-instance";function md(n,e){return W0().createElementNS(n,e)}function ao(n,e){return r7(n,e,[]).join("")}function r7(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)r7(r,e,t)}return t}function Il(n){return"documentElement"in n}function Al(n){return new DOMParser().parseFromString(n,"application/xml")}function BL(n,e){return(function(t,r){const i=n.call(e??this,t,r);if(i!==void 0){const s=r[r.length-1];Pn(s,i)}})}function $a(n,e){return(function(t,r){const i=n.call(e??this,t,r);i!==void 0&&r[r.length-1].push(i)})}function VR(n,e){return(function(t,r){const i=n.call(this,t,r);i!==void 0&&(r[r.length-1]=i)})}function De(n,e,t){return(function(r,i){const s=n.call(this,r,i);if(s!==void 0){const a=i[i.length-1],o=e!==void 0?e:r.localName;a[o]=s}})}function Ze(n,e){return(function(t,r,i){n.call(this,t,r,i),i[i.length-1].node.appendChild(t)})}function i7(n,e){let t,r;return function(i,s,a){if(t===void 0){t={};const o={};o[i.localName]=n,t[i.namespaceURI]=o,r=oo(i.localName)}s7(t,r,s,a)}}function oo(n,e){return(function(t,r,i){const a=r[r.length-1].node;let o=n;o===void 0&&(o=i);const l=a.namespaceURI;return md(l,o)})}const Wi=oo();function Cs(n,e){const t=e.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=n[e[i]];return r}function lt(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function Cu(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=n[i.namespaceURI];if(s!==void 0){const a=s[i.localName];a!==void 0&&a.call(r,i,t)}}}function ln(n,e,t,r,i){return r.push(n),Cu(e,t,r,i),r.pop()}function s7(n,e,t,r,i,s){const a=(i!==void 0?i:t).length;let o,l;for(let u=0;u<a;++u)o=t[u],o!==void 0&&(l=e.call(s,o,r,i!==void 0?i[u]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(s,l,o,r))}function Kn(n,e,t,r,i,s,a){return i.push(n),s7(e,t,r,i,s,a),i.pop()}let MS;function rfe(){return MS===void 0&&typeof XMLSerializer<"u"&&(MS=new XMLSerializer),MS}let NS;function W0(){return NS===void 0&&typeof document<"u"&&(NS=document.implementation.createDocument("","",null)),NS}class a7 extends t7{constructor(){super(),this.xmlSerializer_=rfe()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const r=Al(e);return this.readFeatureFromDocument(r,t)}return Il(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const r=Al(e);return this.readFeaturesFromDocument(r,t)}return Il(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Pn(r,this.readFeaturesFromNode(i,t));return r}readFeaturesFromNode(e,t){return Vt()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const r=Al(e);return this.readGeometryFromDocument(r,t)}return Il(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=Al(e);return this.readProjectionFromDocument(t)}return Il(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}function xu(n){const e=ao(n,!1);return ife(e)}function ife(n){const e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function OE(n){const e=ao(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function vn(n){const e=ao(n,!1);return sfe(e)}function sfe(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function Rp(n){const e=ao(n,!1);return afe(e)}function afe(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function en(n){return ao(n,!1).trim()}function P0(n,e){In(n,e?"1":"0")}function ofe(n,e){n.appendChild(W0().createCDATASection(e))}function lfe(n,e){const t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+Ng(t.getUTCMonth()+1,2)+"-"+Ng(t.getUTCDate(),2)+"T"+Ng(t.getUTCHours(),2)+":"+Ng(t.getUTCMinutes(),2)+":"+Ng(t.getUTCSeconds(),2)+"Z";n.appendChild(W0().createTextNode(r))}function _s(n,e){const t=e.toPrecision();n.appendChild(W0().createTextNode(t))}function lv(n,e){const t=e.toString();n.appendChild(W0().createTextNode(t))}const cfe=/^\s/,ufe=/\s$/,hfe=/(\n|\t|\r|<|&| {2})/;function In(n,e){typeof e=="string"&&(cfe.test(e)||ufe.test(e)||hfe.test(e))?e.split("]]>").forEach((t,r,i)=>{r<i.length-1&&(t+="]]"),r>0&&(t=">"+t),ofe(n,t)}):n.appendChild(W0().createTextNode(e))}const Jn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],dfe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",ffe={rte:o7,trk:l7,wpt:c7},gfe=lt(Jn,{rte:$a(o7),trk:$a(l7),wpt:$a(c7)}),mfe=lt(Jn,{text:De(en,"linkText"),type:De(en,"linkType")}),pfe=lt(Jn,{name:De(en),email:zfe,link:b1}),yfe=lt(Jn,{name:De(en),desc:De(en),author:De(Gfe),copyright:De(Bfe),link:b1,time:De(OE),keywords:De(en),bounds:Ufe,extensions:DE}),_fe=lt(Jn,{year:De(Rp),license:De(en)}),xfe=lt(Jn,{rte:Ze(Kfe),trk:Ze(Yfe),wpt:Ze(qfe)});class vfe extends a7{constructor(e){super(),e=e||{},this.dataProjection=Wn("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const i=e[t];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Al(e)):Il(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!Jn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Jn.includes(t.namespaceURI)&&t.localName==="metadata")return ln({},yfe,t,[]);return null}readFeatureFromNode(e,t){if(!Jn.includes(e.namespaceURI))return null;const r=ffe[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!Jn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=ln([],gfe,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=md("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",ov),r.setAttributeNS(ov,"xsi:schemaLocation",dfe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Kn({node:r},xfe,Vfe,e,[t]),r}}const Efe=lt(Jn,{name:De(en),cmt:De(en),desc:De(en),src:De(en),link:b1,number:De(Rp),extensions:DE,type:De(en),rtept:$fe}),wfe=lt(Jn,{ele:De(vn),time:De(OE)}),Sfe=lt(Jn,{name:De(en),cmt:De(en),desc:De(en),src:De(en),link:b1,number:De(Rp),type:De(en),extensions:DE,trkseg:Hfe}),Tfe=lt(Jn,{trkpt:Wfe}),Ife=lt(Jn,{ele:De(vn),time:De(OE)}),Afe=lt(Jn,{ele:De(vn),time:De(OE),magvar:De(vn),geoidheight:De(vn),name:De(en),cmt:De(en),desc:De(en),src:De(en),link:b1,sym:De(en),type:De(en),fix:De(en),sat:De(Rp),hdop:De(vn),vdop:De(vn),pdop:De(vn),ageofdgpsdata:De(vn),dgpsid:De(Rp),extensions:DE}),bfe=["text","type"],Rfe=lt(Jn,{text:Ze(In),type:Ze(In)}),Cfe=lt(Jn,["name","cmt","desc","src","link","number","type","rtept"]),Pfe=lt(Jn,{name:Ze(In),cmt:Ze(In),desc:Ze(In),src:Ze(In),link:Ze(UR),number:Ze(lv),type:Ze(In),rtept:i7(Ze(zR))}),kfe=lt(Jn,["ele","time"]),Mfe=lt(Jn,["name","cmt","desc","src","link","number","type","trkseg"]),Nfe=lt(Jn,{name:Ze(In),cmt:Ze(In),desc:Ze(In),src:Ze(In),link:Ze(UR),number:Ze(lv),type:Ze(In),trkseg:i7(Ze(Xfe))}),Lfe=oo("trkpt"),Ofe=lt(Jn,{trkpt:Ze(zR)}),Dfe=lt(Jn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Ffe=lt(Jn,{ele:Ze(_s),time:Ze(lfe),magvar:Ze(_s),geoidheight:Ze(_s),name:Ze(In),cmt:Ze(In),desc:Ze(In),src:Ze(In),link:Ze(UR),sym:Ze(In),type:Ze(In),fix:Ze(In),sat:Ze(lv),hdop:Ze(_s),vdop:Ze(_s),pdop:Ze(_s),ageofdgpsdata:Ze(_s),dgpsid:Ze(lv)}),jfe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Vfe(n,e,t){const r=n.getGeometry();if(r){const i=jfe[r.getType()];if(i){const s=e[e.length-1].node;return md(s.namespaceURI,i)}}}function GR(n,e,t,r){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,e.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,e.hasM=!0):n.push(0),n}function BR(n,e,t){let r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),i!==4){for(let s=0,a=e.length/4;s<a;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],n.hasZ&&(e[s*i+2]=e[s*4+2]),n.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,t)for(let s=0,a=t.length;s<a;s++)t[s]=t[s]/4*i}return r}function Gfe(n,e){const t=ln({},pfe,n,e);if(t)return t}function Bfe(n,e){const t=ln({},_fe,n,e);if(t){const r=n.getAttribute("author");return r!==null&&(t.author=r),t}}function Ufe(n,e){const t=e[e.length-1],r=n.getAttribute("minlat"),i=n.getAttribute("minlon"),s=n.getAttribute("maxlat"),a=n.getAttribute("maxlon");i!==null&&r!==null&&a!==null&&s!==null&&(t.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(a),parseFloat(s)]])}function zfe(n,e){const t=e[e.length-1],r=n.getAttribute("id"),i=n.getAttribute("domain");r!==null&&i!==null&&(t.email=`${r}@${i}`)}function b1(n,e){const t=e[e.length-1],r=n.getAttribute("href");r!==null&&(t.link=r),Cu(mfe,n,e)}function DE(n,e){const t=e[e.length-1];t.extensionsNode_=n}function $fe(n,e){const t=ln({},wfe,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;GR(i,s,n,t)}}function Wfe(n,e){const t=ln({},Ife,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;GR(i,s,n,t)}}function Hfe(n,e){const t=e[e.length-1];Cu(Tfe,n,e);const r=t.flatCoordinates;t.ends.push(r.length)}function o7(n,e){const t=e[0],r=ln({flatCoordinates:[],layoutOptions:{}},Efe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const a=BR(s,i),o=new Wo(i,a);so(o,!1,t);const l=new to(o);return l.setProperties(r,!0),l}function l7(n,e){const t=e[0],r=ln({flatCoordinates:[],ends:[],layoutOptions:{}},Sfe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const a=r.layoutOptions;delete r.layoutOptions;const o=BR(a,i,s),l=new ou(i,o,s);so(l,!1,t);const u=new to(l);return u.setProperties(r,!0),u}function c7(n,e){const t=e[0],r=ln({},Afe,n,e);if(!r)return;const i={},s=GR([],i,n,r),a=BR(i,s),o=new no(s,a);so(o,!1,t);const l=new to(o);return l.setProperties(r,!0),l}function UR(n,e,t){n.setAttribute("href",e);const i=t[t.length-1].properties,s=[i.linkText,i.linkType];Kn({node:n},Rfe,Wi,s,t,bfe)}function zR(n,e,t){const r=t[t.length-1],s=r.node.namespaceURI,a=r.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(a.time=e[3]);case"XYZ":e[2]!==0&&(a.ele=e[2]);break;case"XYM":e[2]!==0&&(a.time=e[2]);break}const l=n.nodeName=="rtept"?kfe[s]:Dfe[s],u=Cs(a,l);Kn({node:n,properties:a},Ffe,Wi,u,t,l)}function Kfe(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="LineString"){const h=so(a,!0,r);s.geometryLayout=h.getLayout(),i.rtept=h.getCoordinates()}const o=t[t.length-1].node,l=Cfe[o.namespaceURI],u=Cs(i,l);Kn(s,Pfe,Wi,u,t,l)}function Yfe(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="MultiLineString"){const h=so(a,!0,r);i.trkseg=h.getLineStrings()}const o=t[t.length-1].node,l=Mfe[o.namespaceURI],u=Cs(i,l);Kn(s,Nfe,Wi,u,t,l)}function Xfe(n,e,t){const r={node:n};r.geometryLayout=e.getLayout(),r.properties={},Kn(r,Ofe,Lfe,e.getCoordinates(),t)}function qfe(n,e,t){const r=t[0],i=t[t.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const a=so(s,!0,r);i.geometryLayout=a.getLayout(),zR(n,a.getCoordinates(),t)}}const ql=["http://www.google.com/kml/ext/2.2"],Tt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Zfe="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",UL={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Qfe=lt(Tt,{ExtendedData:T7,Region:I7,MultiGeometry:De(E7,"geometry"),LineString:De(x7,"geometry"),LinearRing:De(v7,"geometry"),Point:De(w7,"geometry"),Polygon:De(S7,"geometry"),Style:De(HR),StyleMap:O0e,address:De(en),description:De(en),name:De(en),open:De(xu),phoneNumber:De(en),styleUrl:De(g7),visibility:De(xu)},lt(ql,{MultiTrack:De(w0e,"geometry"),Track:De(_7,"geometry")})),Jfe=lt(Tt,{ExtendedData:T7,Region:I7,Link:K0e,address:De(en),description:De(en),name:De(en),open:De(xu),phoneNumber:De(en),visibility:De(xu)}),e0e=lt(Tt,{href:De(f7)}),t0e=lt(Tt,{Altitude:De(vn),Longitude:De(vn),Latitude:De(vn),Tilt:De(vn),AltitudeMode:De(en),Heading:De(vn),Roll:De(vn)}),u7=lt(Tt,{LatLonAltBox:G0e,Lod:U0e}),n0e=lt(Tt,["Document","Placemark"]),r0e=lt(Tt,{Document:Ze(tge),Placemark:Ze(R7)});let Qf,Y_=null,MI,Nm,Lm,Om,cv,NI=null,$R,LI=null,OI,Sh=null,zL=null,DI=null;function uv(n){return 32/Math.min(n[0],n[1])}function i0e(){Qf=[255,255,255,1],Y_=new di({color:Qf}),MI=[20,2],Nm="pixels",Lm="pixels",Om=[64,64],cv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",NI=new Yp({anchor:MI,anchorOrigin:"bottom-left",anchorXUnits:Nm,anchorYUnits:Lm,crossOrigin:"anonymous",rotation:0,scale:uv(Om),size:Om,src:cv}),$R="NO_IMAGE",LI=new Ts({color:Qf,width:1}),OI=new Ts({color:[51,51,51,1],width:2}),Sh=new od({font:"bold 16px Helvetica",fill:Y_,stroke:OI,scale:.8}),zL=new gr({fill:Y_,image:NI,text:Sh,stroke:LI,zIndex:0}),DI=[zL]}let d_;function s0e(n){return n}class a0e extends a7{constructor(e){super(),e=e||{},DI||i0e(),this.dataProjection=Wn("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:DI,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:s0e,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const r=lt(Tt,{Document:BL(this.readDocumentOrFolder_,this),Folder:BL(this.readDocumentOrFolder_,this),Placemark:$a(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=ln([],r,e,t,this);if(i)return i}readPlacemark_(e,t){const r=ln({geometry:null},Qfe,e,t,this);if(!r)return;const i=new to,s=e.getAttribute("id");s!==null&&i.setId(s);const a=t[0],o=r.geometry;if(o&&so(o,!1,a),i.setGeometry(o),delete r.geometry,this.extractStyles_){const l=r.Style,u=r.styleUrl,h=l0e(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(h)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,t){const r=e.getAttribute("id");if(r!==null){const i=HR.call(this,e,t);if(i){let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,t){const r=e.getAttribute("id");if(r===null)return;const i=p7.call(this,e,t);if(!i)return;let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,t){if(!Tt.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!Tt.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const a=this.readFeaturesFromNode(s,t);a&&Pn(r,a)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const t=Al(e);return this.readNameFromDocument(t)}return Il(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Tt.includes(t.namespaceURI)&&t.localName=="name")return en(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const r=t.localName;if(Tt.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const r=Al(e);Pn(t,this.readNetworkLinksFromDocument(r))}else Il(e)?Pn(t,this.readNetworkLinksFromDocument(e)):Pn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Pn(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Tt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=ln({},Jfe,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Tt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Pn(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){const t=[];if(typeof e=="string"){const r=Al(e);Pn(t,this.readRegionFromDocument(r))}else Il(e)?Pn(t,this.readRegionFromDocument(e)):Pn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Pn(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Tt.includes(r.namespaceURI)&&r.localName=="Region"){const i=ln({},u7,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Tt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Pn(t,this.readRegionFromNode(r))}return t}readCamera(e){const t=[];if(typeof e=="string"){const r=Al(e);Pn(t,this.readCameraFromDocument(r))}else Il(e)?Pn(t,this.readCameraFromDocument(e)):Pn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&Pn(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Tt.includes(r.namespaceURI)&&r.localName==="Camera"){const i=ln({},t0e,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Tt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&Pn(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=md(Tt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",ql[0]),r.setAttributeNS(i,"xmlns:xsi",ov),r.setAttributeNS(ov,"xsi:schemaLocation",Zfe);const s={node:r},a={};e.length>1?a.Document=e:e.length==1&&(a.Placemark=e[0]);const o=n0e[r.namespaceURI],l=Cs(a,o);return Kn(s,r0e,Wi,l,[t],o,this),r}}function o0e(n,e){const t=[0,0];let r="start";const i=n.getImage();if(i){const o=i.getSize();if(o&&o.length==2){const l=i.getScaleArray(),u=i.getAnchor();t[0]=l[0]*(o[0]-u[0]),t[1]=l[1]*(o[1]/2-u[1]),r="left"}}let s=n.getText();return s?(s=s.clone(),s.setFont(s.getFont()||Sh.getFont()),s.setScale(s.getScale()||Sh.getScale()),s.setFill(s.getFill()||Sh.getFill()),s.setStroke(s.getStroke()||OI)):s=Sh.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(r),new gr({image:i,text:s})}function l0e(n,e,t,r,i){return(function(s,a){let o=i,l="",u=[];if(o){const f=s.getGeometry();if(f)if(f instanceof qa)u=f.getGeometriesArrayRecursive().filter(function(g){const y=g.getType();return y==="Point"||y==="MultiPoint"}),o=u.length>0;else{const g=f.getType();o=g==="Point"||g==="MultiPoint"}}o&&(l=s.get("name"),o=o&&!!l,o&&/&[^&]+;/.test(l)&&(d_||(d_=document.createElement("textarea")),d_.innerHTML=l,l=d_.value));let h=t;if(n?h=n:e&&(h=h7(e,t,r)),o){const f=o0e(h[0],l);if(u.length>0){f.setGeometry(new qa(u));const g=new gr({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[f,g].concat(h.slice(1))}return f}return h})}function h7(n,e,t){return Array.isArray(n)?n:typeof n=="string"?h7(t[n],e,t):e}function FE(n){const e=ao(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function d7(n){let e=ao(n,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),a=parseFloat(i[2]),o=i[3]?parseFloat(i[3]):0;t.push(s,a,o),e=e.substr(i[0].length)}if(e==="")return t}function f7(n){const e=ao(n,!1).trim();let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function g7(n){const e=ao(n,!1).trim().replace(/^(?!.*#)/,"#");let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function c0e(n){const e=n.getAttribute("xunits"),t=n.getAttribute("yunits");let r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(n.getAttribute("x")),xunits:UL[e],y:parseFloat(n.getAttribute("y")),yunits:UL[t],origin:r}}function m7(n){return vn(n)}const u0e=lt(Tt,{Pair:L0e});function p7(n,e){return ln(void 0,u0e,n,e,this)}const h0e=lt(Tt,{Icon:De(I0e),color:De(FE),heading:De(vn),hotSpot:De(c0e),scale:De(m7)});function d0e(n,e){const t=ln({},h0e,n,e);if(!t)return;const r=e[e.length-1],i="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(i).length>0;let a;const o=i.href;o?a=o:s&&(a=cv);let l,u,h,f="bottom-left";const g=t.hotSpot;g?(l=[g.x,g.y],u=g.xunits,h=g.yunits,f=g.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(a.includes("pushpin")?(l=MI,u=Nm,h=Lm):a.includes("arrow-reverse")?(l=[54,42],u=Nm,h=Lm):a.includes("paddle")&&(l=[32,1],u=Nm,h=Lm));let y;const v=i.x,x=i.y;v!==void 0&&x!==void 0&&(y=[v,x]);let w;const T=i.w,I=i.h;T!==void 0&&I!==void 0&&(w=[T,I]);let b;const N=t.heading;N!==void 0&&(b=Cl(N));const F=t.scale,W=t.color;if(s){a==cv&&(w=Om);const M=new Yp({anchor:l,anchorOrigin:f,anchorXUnits:u,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:y,offsetOrigin:"bottom-left",rotation:b,scale:F,size:w,src:this.iconUrlFunction_(a),color:W}),C=M.getScaleArray()[0],P=M.getSize();if(P===null){const L=M.getImageState();if(L===xt.IDLE||L===xt.LOADING){const O=function(){const U=M.getImageState();if(!(U===xt.IDLE||U===xt.LOADING)){const j=M.getSize();if(j&&j.length==2){const xe=uv(j);M.setScale(C*xe)}M.unlistenImageChange(O)}};M.listenImageChange(O),L===xt.IDLE&&M.load()}}else if(P.length==2){const L=uv(P);M.setScale(C*L)}r.imageStyle=M}else r.imageStyle=$R}const f0e=lt(Tt,{color:De(FE),scale:De(m7)});function g0e(n,e){const t=ln({},f0e,n,e);if(!t)return;const r=e[e.length-1],i=new od({fill:new di({color:"color"in t?t.color:Qf}),scale:t.scale});r.textStyle=i}const m0e=lt(Tt,{color:De(FE),width:De(vn)});function p0e(n,e){const t=ln({},m0e,n,e);if(!t)return;const r=e[e.length-1],i=new Ts({color:"color"in t?t.color:Qf,width:"width"in t?t.width:1});r.strokeStyle=i}const y0e=lt(Tt,{color:De(FE),fill:De(xu),outline:De(xu)});function _0e(n,e){const t=ln({},y0e,n,e);if(!t)return;const r=e[e.length-1],i=new di({color:"color"in t?t.color:Qf});r.fillStyle=i;const s=t.fill;s!==void 0&&(r.fill=s);const a=t.outline;a!==void 0&&(r.outline=a)}const x0e=lt(Tt,{coordinates:VR(d7)});function y7(n,e){return ln(null,x0e,n,e)}function v0e(n,e){const r=e[e.length-1].coordinates,i=ao(n,!1),a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(a){const o=parseFloat(a[1]),l=parseFloat(a[2]),u=parseFloat(a[3]);r.push([o,l,u])}else r.push([])}const E0e=lt(ql,{Track:$a(_7)});function w0e(n,e){const t=ln([],E0e,n,e);if(t)return new ou(t)}const S0e=lt(Tt,{when:Y0e},lt(ql,{coord:v0e}));function _7(n,e){const t=ln({coordinates:[],whens:[]},S0e,n,e);if(!t)return;const r=[],i=t.coordinates,s=t.whens;for(let a=0,o=Math.min(i.length,s.length);a<o;++a)i[a].length==3&&r.push(i[a][0],i[a][1],i[a][2],s[a]);return new Wo(r,"XYZM")}const T0e=lt(Tt,{href:De(f7)},lt(ql,{x:De(vn),y:De(vn),w:De(vn),h:De(vn)}));function I0e(n,e){const t=ln({},T0e,n,e);return t||null}const A0e=lt(Tt,{coordinates:VR(d7)});function WR(n,e){return ln(null,A0e,n,e)}const jE=lt(Tt,{extrude:De(xu),tessellate:De(xu),altitudeMode:De(en)});function x7(n,e){const t=ln({},jE,n,e),r=WR(n,e);if(r){const i=new Wo(r,"XYZ");return i.setProperties(t,!0),i}}function v7(n,e){const t=ln({},jE,n,e),r=WR(n,e);if(r){const i=new ro(r,"XYZ",[r.length]);return i.setProperties(t,!0),i}}const b0e=lt(Tt,{LineString:$a(x7),LinearRing:$a(v7),MultiGeometry:$a(E7),Point:$a(w7),Polygon:$a(S7)});function E7(n,e){const t=ln([],b0e,n,e);if(!t)return null;if(t.length===0)return new qa(t);let r,i=!0;const s=t[0].getType();let a;for(let o=1,l=t.length;o<l;++o)if(a=t[o],a.getType()!=s){i=!1;break}if(i){let o,l;if(s=="Point"){const u=t[0];o=u.getLayout(),l=u.getFlatCoordinates();for(let h=1,f=t.length;h<f;++h)a=t[h],Pn(l,a.getFlatCoordinates());r=new N0(l,o),LS(r,t)}else if(s=="LineString")r=new ou(t),LS(r,t);else if(s=="Polygon")r=new u0(t),LS(r,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new qa(t);else throw new Error("Unknown geometry type found")}else r=new qa(t);return r}function w7(n,e){const t=ln({},jE,n,e),r=WR(n,e);if(r){const i=new no(r,"XYZ");return i.setProperties(t,!0),i}}const R0e=lt(Tt,{innerBoundaryIs:$0e,outerBoundaryIs:H0e});function S7(n,e){const t=ln({},jE,n,e),r=ln([null],R0e,n,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let o=1,l=r.length;o<l;++o)Pn(i,r[o]),s.push(i.length);const a=new ro(i,"XYZ",s);return a.setProperties(t,!0),a}}const C0e=lt(Tt,{IconStyle:d0e,LabelStyle:g0e,LineStyle:p0e,PolyStyle:_0e});function HR(n,e){const t=ln({},C0e,n,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:Y_;const i=t.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in t?t.imageStyle!=$R&&(s=t.imageStyle):s=NI;const a="textStyle"in t?t.textStyle:Sh,o="strokeStyle"in t?t.strokeStyle:LI,l=t.outline;return l!==void 0&&!l?[new gr({geometry:function(u){const h=u.getGeometry(),f=h.getType();if(f==="GeometryCollection"){const g=h;return new qa(g.getGeometriesArrayRecursive().filter(function(y){const v=y.getType();return v!=="Polygon"&&v!=="MultiPolygon"}))}if(f!=="Polygon"&&f!=="MultiPolygon")return h},fill:r,image:s,stroke:o,text:a,zIndex:void 0}),new gr({geometry:function(u){const h=u.getGeometry(),f=h.getType();if(f==="GeometryCollection"){const g=h;return new qa(g.getGeometriesArrayRecursive().filter(function(y){const v=y.getType();return v==="Polygon"||v==="MultiPolygon"}))}if(f==="Polygon"||f==="MultiPolygon")return h},fill:r,stroke:null,zIndex:void 0})]:[new gr({fill:r,image:s,stroke:o,text:a,zIndex:void 0})]}function LS(n,e){const t=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let a,o,l;a=!1,o=!1,l=!1;for(let u=0;u<t;++u){const h=e[u];r[u]=h.get("extrude"),i[u]=h.get("tessellate"),s[u]=h.get("altitudeMode"),a=a||r[u]!==void 0,o=o||i[u]!==void 0,l=l||s[u]}a&&n.set("extrude",r),o&&n.set("tessellate",i),l&&n.set("altitudeMode",s)}const P0e=lt(Tt,{displayName:De(en),value:De(en)});function k0e(n,e){const t=n.getAttribute("name");Cu(P0e,n,e);const r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const M0e=lt(Tt,{Data:k0e,SchemaData:F0e});function T7(n,e){Cu(M0e,n,e)}function I7(n,e){Cu(u7,n,e)}const N0e=lt(Tt,{Style:De(HR),key:De(en),styleUrl:De(g7)});function L0e(n,e){const t=ln({},N0e,n,e,this);if(!t)return;const r=t.key;if(r&&r=="normal"){const i=t.styleUrl;i&&(e[e.length-1]=i);const s=t.Style;s&&(e[e.length-1]=s)}}function O0e(n,e){const t=p7.call(this,n,e);if(!t)return;const r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const D0e=lt(Tt,{SimpleData:j0e});function F0e(n,e){Cu(D0e,n,e)}function j0e(n,e){const t=n.getAttribute("name");if(t!==null){const r=en(n),i=e[e.length-1];i[t]=r}}const V0e=lt(Tt,{altitudeMode:De(en),minAltitude:De(vn),maxAltitude:De(vn),north:De(vn),south:De(vn),east:De(vn),west:De(vn)});function G0e(n,e){const t=ln({},V0e,n,e);if(!t)return;const r=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=i,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}const B0e=lt(Tt,{minLodPixels:De(vn),maxLodPixels:De(vn),minFadeExtent:De(vn),maxFadeExtent:De(vn)});function U0e(n,e){const t=ln({},B0e,n,e);if(!t)return;const r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}const z0e=lt(Tt,{LinearRing:$a(y7)});function $0e(n,e){const t=ln([],z0e,n,e);t.length>0&&e[e.length-1].push(...t)}const W0e=lt(Tt,{LinearRing:VR(y7)});function H0e(n,e){const t=ln(void 0,W0e,n,e);if(t){const r=e[e.length-1];r[0]=t}}function K0e(n,e){Cu(e0e,n,e)}function Y0e(n,e){const r=e[e.length-1].whens,i=ao(n,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function VE(n,e){const t=Fh(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const a=Math.floor(i[s]).toString(16);i[s]=a.length==1?"0"+a:a}In(n,i.join(""))}function X0e(n,e,t){const r=t[t.length-1],i=r.layout,s=r.stride;let a;if(i=="XY"||i=="XYM")a=2;else if(i=="XYZ"||i=="XYZM")a=3;else throw new Error("Invalid geometry layout");const o=e.length;let l="";if(o>0){l+=e[0];for(let u=1;u<a;++u)l+=","+e[u];for(let u=s;u<o;u+=s){l+=" "+e[u];for(let h=1;h<a;++h)l+=","+e[u+h]}}In(n,l)}const X_=lt(Tt,{Data:Ze(q0e),value:Ze(Q0e),displayName:Ze(Z0e)});function q0e(n,e,t){n.setAttribute("name",e.name);const r={node:n},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&Kn(r,X_,Wi,[i.displayName],t,["displayName"]),i!==null&&i.value&&Kn(r,X_,Wi,[i.value],t,["value"])):Kn(r,X_,Wi,[i],t,["value"])}function Z0e(n,e){In(n,e)}function Q0e(n,e){In(n,e)}const J0e=lt(Tt,{Placemark:Ze(R7)}),ege=function(n,e,t){const r=e[e.length-1].node;return md(r.namespaceURI,"Placemark")};function tge(n,e,t){Kn({node:n},J0e,ege,e,t,void 0,this)}const nge=oo("Data");function rge(n,e,t){const r={node:n},i=e.names,s=e.values,a=i.length;for(let o=0;o<a;o++)Kn(r,X_,nge,[{name:i[o],value:s[o]}],t)}const $L=lt(Tt,["href"],lt(ql,["x","y","w","h"])),WL=lt(Tt,{href:Ze(In)},lt(ql,{x:Ze(_s),y:Ze(_s),w:Ze(_s),h:Ze(_s)})),ige=function(n,e,t){return md(ql[0],"gx:"+t)};function sge(n,e,t){const r={node:n},i=t[t.length-1].node;let s=$L[i.namespaceURI],a=Cs(e,s);Kn(r,WL,Wi,a,t,s),s=$L[ql[0]],a=Cs(e,s),Kn(r,WL,ige,a,t,s)}const age=lt(Tt,["scale","heading","Icon","color","hotSpot"]),oge=lt(Tt,{Icon:Ze(sge),color:Ze(VE),heading:Ze(_s),hotSpot:Ze(Lge),scale:Ze(P7)});function lge(n,e,t){const r={node:n},i={},s=e.getSrc(),a=e.getSize(),o=e.getImageSize(),l={href:s};if(a){l.w=a[0],l.h=a[1];const w=e.getAnchor(),T=e.getOrigin();if(T&&o&&T[0]!==0&&T[1]!==a[1]&&(l.x=T[0],l.y=o[1]-(T[1]+a[1])),w&&(w[0]!==a[0]/2||w[1]!==a[1]/2)){const I={x:w[0],xunits:"pixels",y:a[1]-w[1],yunits:"pixels"};i.hotSpot=I}}i.Icon=l;let u=e.getScaleArray()[0],h=a;if(h===null&&(h=Om),h.length==2){const w=uv(h);u=u/w}u!==1&&(i.scale=u);const f=e.getRotation();f!==0&&(i.heading=f);const g=e.getColor();g&&(i.color=g);const y=t[t.length-1].node,v=age[y.namespaceURI],x=Cs(i,v);Kn(r,oge,Wi,x,t,v)}const cge=lt(Tt,["color","scale"]),uge=lt(Tt,{color:Ze(VE),scale:Ze(P7)});function hge(n,e,t){const r={node:n},i={},s=e.getFill();s&&(i.color=s.getColor());const a=e.getScale();a&&a!==1&&(i.scale=a);const o=t[t.length-1].node,l=cge[o.namespaceURI],u=Cs(i,l);Kn(r,uge,Wi,u,t,l)}const dge=lt(Tt,["color","width"]),fge=lt(Tt,{color:Ze(VE),width:Ze(_s)});function gge(n,e,t){const r={node:n},i={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,a=dge[s.namespaceURI],o=Cs(i,a);Kn(r,fge,Wi,o,t,a)}const mge={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},A7=function(n,e,t){if(n){const r=e[e.length-1].node;return md(r.namespaceURI,mge[n.getType()])}},pge=oo("Point"),yge=oo("LineString"),_ge=oo("LinearRing"),xge=oo("Polygon"),vge=lt(Tt,{LineString:Ze(Jf),Point:Ze(Jf),Polygon:Ze(C7),GeometryCollection:Ze(b7)});function b7(n,e,t){const r={node:n},i=e.getType();let s=[],a;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(o){const l=o.getType();if(l==="MultiPoint")s=s.concat(o.getPoints());else if(l==="MultiLineString")s=s.concat(o.getLineStrings());else if(l==="MultiPolygon")s=s.concat(o.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(o);else throw new Error("Unknown geometry type")}),a=A7;else if(i==="MultiPoint")s=e.getPoints(),a=pge;else if(i==="MultiLineString")s=e.getLineStrings(),a=yge;else if(i==="MultiPolygon")s=e.getPolygons(),a=xge;else throw new Error("Unknown geometry type");Kn(r,vge,a,s,t)}const Ege=lt(Tt,{LinearRing:Ze(Jf)});function HL(n,e,t){Kn({node:n},Ege,_ge,[e],t)}const OS=lt(Tt,{ExtendedData:Ze(rge),MultiGeometry:Ze(b7),LineString:Ze(Jf),LinearRing:Ze(Jf),Point:Ze(Jf),Polygon:Ze(C7),Style:Ze(Nge),address:Ze(In),description:Ze(In),name:Ze(In),open:Ze(P0),phoneNumber:Ze(In),styleUrl:Ze(In),visibility:Ze(P0)}),wge=lt(Tt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Sge=oo("ExtendedData");function R7(n,e,t){const r={node:n};e.getId()&&n.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const a=Object.keys(i||{}).sort().filter(function(y){return!s[y]}),o=e.getStyleFunction();if(o){const y=o(e,0);if(y){const v=Array.isArray(y)?y:[y];let x=v;if(e.getGeometry()&&(x=v.filter(function(w){const T=w.getGeometryFunction()(e);if(T){const I=T.getType();return I==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(b){const N=b.getType();return N==="Point"||N==="MultiPoint"}).length:I==="Point"||I==="MultiPoint"}})),this.writeStyles_){let w=v,T=v;e.getGeometry()&&(w=v.filter(function(I){const b=I.getGeometryFunction()(e);if(b){const N=b.getType();return N==="GeometryCollection"?b.getGeometriesArrayRecursive().filter(function(F){const W=F.getType();return W==="LineString"||W==="MultiLineString"}).length:N==="LineString"||N==="MultiLineString"}}),T=v.filter(function(I){const b=I.getGeometryFunction()(e);if(b){const N=b.getType();return N==="GeometryCollection"?b.getGeometriesArrayRecursive().filter(function(F){const W=F.getType();return W==="Polygon"||W==="MultiPolygon"}).length:N==="Polygon"||N==="MultiPolygon"}})),i.Style={pointStyles:x,lineStyles:w,polyStyles:T}}if(x.length&&i.name===void 0){const w=x[0].getText();w&&(i.name=w.getText())}}}const l=t[t.length-1].node,u=wge[l.namespaceURI],h=Cs(i,u);if(Kn(r,OS,Wi,h,t,u),a.length>0){const y=Cs(i,a);Kn(r,OS,Sge,[{names:a,values:y}],t)}const f=t[0];let g=e.getGeometry();g&&(g=so(g,!0,f)),Kn(r,OS,A7,[g],t)}const Tge=lt(Tt,["extrude","tessellate","altitudeMode","coordinates"]),Ige=lt(Tt,{extrude:Ze(P0),tessellate:Ze(P0),altitudeMode:Ze(In),coordinates:Ze(X0e)});function Jf(n,e,t){const r=e.getFlatCoordinates(),i={node:n};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const a=t[t.length-1].node,o=Tge[a.namespaceURI],l=Cs(s,o);Kn(i,Ige,Wi,l,t,o)}const Age=lt(Tt,["color","fill","outline"]),KL=lt(Tt,{outerBoundaryIs:Ze(HL),innerBoundaryIs:Ze(HL)}),bge=oo("innerBoundaryIs"),Rge=oo("outerBoundaryIs");function C7(n,e,t){const r=e.getLinearRings(),i=r.shift(),s={node:n};Kn(s,KL,bge,r,t),Kn(s,KL,Rge,[i],t)}const Cge=lt(Tt,{color:Ze(VE),fill:Ze(P0),outline:Ze(P0)});function Pge(n,e,t){const r={node:n},i=e.getFill(),s=e.getStroke(),a={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},o=t[t.length-1].node,l=Age[o.namespaceURI],u=Cs(a,l);Kn(r,Cge,Wi,u,t,l)}function P7(n,e){_s(n,Math.round(e*1e6)/1e6)}const kge=lt(Tt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Mge=lt(Tt,{IconStyle:Ze(lge),LabelStyle:Ze(hge),LineStyle:Ze(gge),PolyStyle:Ze(Pge)});function Nge(n,e,t){const r={node:n},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(i.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,a=kge[s.namespaceURI],o=Cs(i,a);Kn(r,Mge,Wi,o,t,a)}function Lge(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}function k7(n){const e=Object.keys(n.defs),t=e.length;let r,i;for(r=0;r<t;++r){const s=e[r];if(!w_(s)){const a=n.defs(s);let o=a.units;!o&&a.projName==="longlat"&&(o="degrees"),nx(new Mv({code:s,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:o}))}}for(r=0;r<t;++r){const s=e[r],a=w_(s);for(i=0;i<t;++i){const o=e[i],l=w_(o);if(!S_(s,o))if(n.defs[s]===n.defs[o])JS([a,l]);else{const u=n(s,o);xU(a,l,H4(a,l,u.forward),H4(l,a,u.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");pn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");k7(pn);let Th=null,Dm=null,bf=null;function FI(n){Th&&(n.removeLayer(Th),Th=null),Dm&&(n.removeLayer(Dm),Dm=null),bf=null}async function Oge(n,e){try{const t=mn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${t[0].toFixed(5)}, ${t[1].toFixed(5)}`);const r=pn("EPSG:4326","EPSG:28992",t);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;FI(n);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,a=Date.now(),o=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${a}`;console.log(" WFS URL:",o);const l=new AbortController,u=setTimeout(()=>l.abort(),1e4),h=await fetch(o,{signal:l.signal});if(clearTimeout(u),!h.ok)return console.error("WFS request failed:",h.status),!1;const f=await h.json();if(console.log(" WFS RESPONSE:",JSON.stringify(f).substring(0,500)),!f.features||f.features.length===0)return console.log("No parcel found at location"),!1;const g=f.features[0];console.log(" PARCEL ID:",g.id||g.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(g.bbox||"geen bbox"));const v=new FR().readFeature(g,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),x=v.getGeometry();if(!x)return console.log("No geometry in parcel feature"),!1;const w=g.properties||{};console.log(` Parcel: ${w.category||"unknown"} - ${w.gewasnaam||w.gewas||"geen gewas"}`),console.log(` Geometry type: ${x.getType()}, extent: ${x.getExtent().map(P=>P.toFixed(0)).join(", ")}`);const T=x.getExtent(),I=T[2]-T[0],b=T[3]-T[1],N=Math.max(I,b)*.05,F=[T[0]-N,T[1]-N,T[2]+N,T[3]+N],W=Math.max(I,b)*.3,M=[T[0]-W,T[1]-W,T[2]+W,T[3]+W];bf=x,Th=new fW({source:new GW({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:F,zIndex:998}),Th.on("prerender",P=>{if(!bf)return;const L=P.context;if(!L)return;const O=P.frameState;if(!O)return;L.save(),L.beginPath(),(bf.getType()==="Polygon"?bf.getCoordinates()[0]:bf.getCoordinates()[0][0]).forEach((j,xe)=>{const Ce=n.getPixelFromCoordinate(j);if(!Ce)return;const Ge=O.pixelRatio,ke=Ce[0]*Ge,ce=Ce[1]*Ge;xe===0?L.moveTo(ke,ce):L.lineTo(ke,ce)}),L.closePath(),L.clip()}),Th.on("postrender",P=>{const L=P.context;L&&L.restore()}),n.addLayer(Th);const C=new Hp({features:[v]});return Dm=new Zp({source:C,style:new gr({fill:new di({color:"rgba(0, 0, 0, 0)"}),stroke:new Ts({color:"#dc2626",width:3})}),zIndex:999}),n.addLayer(Dm),console.log(" Parcel height map displayed"),!0}catch(t){return console.error("Failed to show parcel height map:",t),!1}}var hv={};hv.version="0.18.5";var M7=1252,Dge=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],N7=function(n){Dge.indexOf(n)!=-1&&(M7=n)};function Fge(){N7(1252)}var Cp=function(n){N7(n)};function jge(){Cp(1200),Fge()}var f_=function(e){return String.fromCharCode(e)},YL=function(e){return String.fromCharCode(e)},dv,Yc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Pp(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),e+=Yc.charAt(s)+Yc.charAt(a)+Yc.charAt(o)+Yc.charAt(l);return e}function $l(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Yc.indexOf(n.charAt(u++)),a=Yc.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Yc.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Yc.indexOf(n.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Tn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Zl=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function ed(n){return Tn?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function XL(n){return Tn?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Wa=function(e){return Tn?Zl(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function GE(n){if(typeof ArrayBuffer>"u")return Wa(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function R1(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function Vge(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var Ti=Tn?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:Zl(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Gge(n){for(var e=[],t=0,r=n.length+250,i=ed(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=ed(65535),r=65530)}return e.push(i.slice(0,t)),Ti(e)}var Fm=/\u0000/g,g_=/[\u0001-\u0006]/g;function e0(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Ya(n,e){var t=""+n;return t.length>=e?t:vr("0",e-t.length)+t}function KR(n,e){var t=""+n;return t.length>=e?t:vr(" ",e-t.length)+t}function fv(n,e){var t=""+n;return t.length>=e?t:t+vr(" ",e-t.length)}function Bge(n,e){var t=""+Math.round(n);return t.length>=e?t:vr("0",e-t.length)+t}function Uge(n,e){var t=""+n;return t.length>=e?t:vr("0",e-t.length)+t}var qL=Math.pow(2,32);function df(n,e){if(n>qL||n<-qL)return Bge(n,e);var t=Math.round(n);return Uge(t,e)}function gv(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var ZL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],DS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function zge(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var wr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},QL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},$ge={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function mv(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,l=1,u=0,h=0,f=Math.floor(i);u<e&&(f=Math.floor(i),o=f*a+s,h=f*u+l,!(i-f<5e-8));)i=1/(i-f),s=a,a=o,l=u,u=h;if(h>e&&(u>e?(h=l,o=s):(h=u,o=a)),!t)return[0,r*o,h];var g=Math.floor(r*o/h);return[g,r*o-g*h,h]}function m_(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),t&&(s=Zge(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var L7=new Date(1899,11,31,0,0,0),Wge=L7.getTime(),Hge=new Date(1900,2,1,0,0,0);function O7(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=Hge&&(t+=1440*60*1e3),(t-(Wge+(n.getTimezoneOffset()-L7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function YR(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Kge(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Yge(n){var e=n<0?12:11,t=YR(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function Xge(n){var e=YR(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function qge(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=Yge(n):e===10?t=n.toFixed(10).substr(0,12):t=Xge(n),YR(Kge(t.toUpperCase()))}function jI(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):qge(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return vu(14,O7(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function Zge(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function Qge(n,e,t,r){var i="",s=0,a=0,o=t.y,l,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,u=e.length;break;case 3:return DS[t.m-1][1];case 5:return DS[t.m-1][0];default:return DS[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,u=e.length;break;case 3:return ZL[t.q][0];default:return ZL[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Ya(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Ya(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var h=u>0?Ya(l,u):"";return h}function Xc(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var D7=/%/g;function Jge(n,e,t){var r=e.replace(D7,""),i=e.length-r.length;return Ll(n,r,t*Math.pow(10,2*i))+vr("%",i)}function eme(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Ll(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function F7(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+F7(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var j7=/# (\?+)( ?)\/( ?)(\d+)/;function tme(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?vr(" ",n[1].length+1+n[4].length):KR(a,n[1].length)+n[2]+"/"+n[3]+Ya(o,n[4].length))}function nme(n,e,t){return t+(e===0?"":""+e)+vr(" ",n[1].length+2+n[4].length)}var V7=/^#*0*\.([0#]+)/,G7=/\).*[0#]/,B7=/\(###\) ###\\?-####/;function Qi(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function JL(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function eO(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function rme(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function ime(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function fa(n,e,t){if(n.charCodeAt(0)===40&&!e.match(G7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?fa("n",r,t):"("+fa("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return eme(n,e,t);if(e.indexOf("%")!==-1)return Jge(n,e,t);if(e.indexOf("E")!==-1)return F7(e,t);if(e.charCodeAt(0)===36)return"$"+fa(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+df(l,e.length);if(e.match(/^[#?]+$/))return i=df(t,0),i==="0"&&(i=""),i.length>e.length?i:Qi(e.substr(0,e.length-i.length))+i;if(s=e.match(j7))return tme(s,l,u);if(e.match(/^#+0+$/))return u+df(l,e.length-e.indexOf("0"));if(s=e.match(V7))return i=JL(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Qi(s[1])).replace(/\.$/,"."+Qi(s[1])).replace(/\.(\d*)$/,function(v,x){return"."+x+vr("0",Qi(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+JL(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Xc(df(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+fa(n,e,-t):Xc(""+(Math.floor(t)+rme(t,s[1].length)))+"."+Ya(eO(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return fa(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=e0(fa(n,e.replace(/[\\-]/g,""),t)),a=0,e0(e0(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(B7))return i=fa(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=mv(l,Math.pow(10,a)-1,!1),i=""+u,h=Ll("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=fv(o[2],a),h.length<s[4].length&&(h=Qi(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=mv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?KR(o[1],a)+s[2]+"/"+s[3]+fv(o[2],a):vr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=df(t,0),e.length<=i.length?i:Qi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,g=e.length-i.length-f;return Qi(e.substr(0,f)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=eO(t,s[1].length),t<0?"-"+fa(n,e,-t):Xc(ime(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ya(0,3-v.length):"")+v})+"."+Ya(a,s[1].length);switch(e){case"###,##0.00":return fa(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var y=Xc(df(l,0));return y!=="0"?u+y:"";case"###,###.00":return fa(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return fa(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function sme(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Ll(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function ame(n,e,t){var r=e.replace(D7,""),i=e.length-r.length;return Ll(n,r,t*Math.pow(10,2*i))+vr("%",i)}function U7(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+U7(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Io(n,e,t){if(n.charCodeAt(0)===40&&!e.match(G7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Io("n",r,t):"("+Io("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return sme(n,e,t);if(e.indexOf("%")!==-1)return ame(n,e,t);if(e.indexOf("E")!==-1)return U7(e,t);if(e.charCodeAt(0)===36)return"$"+Io(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Ya(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Qi(e.substr(0,e.length-i.length))+i;if(s=e.match(j7))return nme(s,l,u);if(e.match(/^#+0+$/))return u+Ya(l,e.length-e.indexOf("0"));if(s=e.match(V7))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Qi(s[1])).replace(/\.$/,"."+Qi(s[1])),i=i.replace(/\.(\d*)$/,function(v,x){return"."+x+vr("0",Qi(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Xc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Io(n,e,-t):Xc(""+t)+"."+vr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Io(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=e0(Io(n,e.replace(/[\\-]/g,""),t)),a=0,e0(e0(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(B7))return i=Io(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=mv(l,Math.pow(10,a)-1,!1),i=""+u,h=Ll("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=fv(o[2],a),h.length<s[4].length&&(h=Qi(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=mv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?KR(o[1],a)+s[2]+"/"+s[3]+fv(o[2],a):vr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Qi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,g=e.length-i.length-f;return Qi(e.substr(0,f)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Io(n,e,-t):Xc(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ya(0,3-v.length):"")+v})+"."+Ya(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var y=Xc(""+l);return y!=="0"?u+y:"";default:if(e.match(/\.[0#?]*$/))return Io(n,e.slice(0,e.lastIndexOf(".")),t)+Qi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ll(n,e,t){return(t|0)===t?Io(n,e,t):fa(n,e,t)}function ome(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var z7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function $7(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":gv(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(z7))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function lme(n,e,t,r){for(var i=[],s="",a=0,o="",l="t",u,h,f,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!gv(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(f=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(f);i[i.length]={t:"t",v:s},++a;break;case"\\":var y=n.charAt(++a),v=y==="("||y===")"?y:"t";i[i.length]={t:v,v:y},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=m_(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=m_(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var x={t:o,v:o};if(u==null&&(u=m_(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",a+=5,g="h"):(x.t="t",++a),u==null&&x.t==="T")return"";i[i.length]=x,l=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(z7)){if(u==null&&(u=m_(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",$7(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var w=0,T=0,I;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",w<1&&(w=1);break;case"s":(I=i[a].v.match(/\.0+$/))&&(T=Math.max(T,I[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&i[a].v.match(/[Hh]/)&&(w=1),w<2&&i[a].v.match(/[Mm]/)&&(w=2),w<3&&i[a].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",N;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=Qge(i[a].t.charCodeAt(0),i[a].v,u,T),i[a].t="t";break;case"n":case"?":for(N=a+1;i[N]!=null&&((o=i[N].t)==="?"||o==="D"||(o===" "||o==="t")&&i[N+1]!=null&&(i[N+1].t==="?"||i[N+1].t==="t"&&i[N+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[N].v==="/"||i[N].v===" "&&i[N+1]!=null&&i[N+1].t=="?"));)i[a].v+=i[N].v,i[N]={v:"",t:";"},++N;b+=i[a].v,a=N-1;break;case"G":i[a].t="t",i[a].v=jI(e,t);break}var F="",W,M;if(b.length>0){b.charCodeAt(0)==40?(W=e<0&&b.charCodeAt(0)===45?-e:e,M=Ll("n",b,W)):(W=e<0&&r>1?-e:e,M=Ll("n",b,W),W<0&&i[0]&&i[0].t=="t"&&(M=M.substr(1),i[0].v="-"+i[0].v)),N=M.length-1;var C=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){C=a;break}var P=i.length;if(C===i.length&&M.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(N>=i[a].v.length-1?(N-=i[a].v.length,i[a].v=M.substr(N+1,i[a].v.length)):N<0?i[a].v="":(i[a].v=M.substr(0,N+1),N=-1),i[a].t="t",P=a);N>=0&&P<i.length&&(i[P].v=M.substr(0,N+1)+i[P].v)}else if(C!==i.length&&M.indexOf("E")===-1){for(N=M.indexOf(".")-1,a=C;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(h=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")-1:i[a].v.length-1,F=i[a].v.substr(h+1);h>=0;--h)N>=0&&(i[a].v.charAt(h)==="0"||i[a].v.charAt(h)==="#")&&(F=M.charAt(N--)+F);i[a].v=F,i[a].t="t",P=a}for(N>=0&&P<i.length&&(i[P].v=M.substr(0,N+1)+i[P].v),N=M.indexOf(".")+1,a=C;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==C)){for(h=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")+1:0,F=i[a].v.substr(0,h);h<i[a].v.length;++h)N<M.length&&(F+=M.charAt(N++));i[a].v=F,i[a].t="t",P=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(W=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Ll(i[a].t,i[a].v,W),i[a].t="t");var L="";for(a=0;a!==i.length;++a)i[a]!=null&&(L+=i[a].v);return L}var tO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nO(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function cme(n,e){var t=ome(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(tO),o=t[1].match(tO);return nO(e,a)?[r,t[0]]:nO(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function vu(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:wr)[n],r==null&&(r=t.table&&t.table[QL[n]]||wr[QL[n]]),r==null&&(r=$ge[n]||"General");break}if(gv(r,0))return jI(e,t);e instanceof Date&&(e=O7(e,t.date1904));var i=cme(r,e);if(gv(i[1]))return jI(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return lme(i[1],e,t,i[0])}function W7(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(wr[t]==null){e<0&&(e=t);continue}if(wr[t]==n){e=t;break}}e<0&&(e=391)}return wr[e]=n,e}function BE(n){for(var e=0;e!=392;++e)n[e]!==void 0&&W7(n[e],e)}function UE(){wr=zge()}var H7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function ume(n){var e=typeof n=="number"?wr[n]:n;return e=e.replace(H7,"(\\d+)"),new RegExp("^"+e+"$")}function hme(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(H7)||[]).forEach(function(f,g){var y=parseInt(t[g+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=y;break;case"d":s=y;break;case"h":a=y;break;case"s":l=y;break;case"m":a>=0?o=y:i=y;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:r==-1&&i==-1&&s==-1?h:u+"T"+h}var dme=(function(){var n={};n.version="1.2.0";function e(){for(var M=0,C=new Array(256),P=0;P!=256;++P)M=P,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,C[P]=M;return typeof Int32Array<"u"?new Int32Array(C):C}var t=e();function r(M){var C=0,P=0,L=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)O[L]=M[L];for(L=0;L!=256;++L)for(P=M[L],C=256+L;C<4096;C+=256)P=O[C]=P>>>8^M[P&255];var U=[];for(L=1;L!=16;++L)U[L-1]=typeof Int32Array<"u"?O.subarray(L*256,L*256+256):O.slice(L*256,L*256+256);return U}var i=r(t),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],h=i[5],f=i[6],g=i[7],y=i[8],v=i[9],x=i[10],w=i[11],T=i[12],I=i[13],b=i[14];function N(M,C){for(var P=C^-1,L=0,O=M.length;L<O;)P=P>>>8^t[(P^M.charCodeAt(L++))&255];return~P}function F(M,C){for(var P=C^-1,L=M.length-15,O=0;O<L;)P=b[M[O++]^P&255]^I[M[O++]^P>>8&255]^T[M[O++]^P>>16&255]^w[M[O++]^P>>>24]^x[M[O++]]^v[M[O++]]^y[M[O++]]^g[M[O++]]^f[M[O++]]^h[M[O++]]^u[M[O++]]^l[M[O++]]^o[M[O++]]^a[M[O++]]^s[M[O++]]^t[M[O++]];for(L+=15;O<L;)P=P>>>8^t[(P^M[O++])&255];return~P}function W(M,C){for(var P=C^-1,L=0,O=M.length,U=0,j=0;L<O;)U=M.charCodeAt(L++),U<128?P=P>>>8^t[(P^U)&255]:U<2048?(P=P>>>8^t[(P^(192|U>>6&31))&255],P=P>>>8^t[(P^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,j=M.charCodeAt(L++)&1023,P=P>>>8^t[(P^(240|U>>8&7))&255],P=P>>>8^t[(P^(128|U>>2&63))&255],P=P>>>8^t[(P^(128|j>>6&15|(U&3)<<4))&255],P=P>>>8^t[(P^(128|j&63))&255]):(P=P>>>8^t[(P^(224|U>>12&15))&255],P=P>>>8^t[(P^(128|U>>6&63))&255],P=P>>>8^t[(P^(128|U&63))&255]);return~P}return n.table=t,n.bstr=N,n.buf=F,n.str=W,n})(),$n=(function(){var e={};e.version="1.2.1";function t(B,q){for(var K=B.split("/"),Y=q.split("/"),Q=0,ee=0,me=Math.min(K.length,Y.length);Q<me;++Q){if(ee=K[Q].length-Y[Q].length)return ee;if(K[Q]!=Y[Q])return K[Q]<Y[Q]?-1:1}return K.length-Y.length}function r(B){if(B.charAt(B.length-1)=="/")return B.slice(0,-1).indexOf("/")===-1?B:r(B.slice(0,-1));var q=B.lastIndexOf("/");return q===-1?B:B.slice(0,q+1)}function i(B){if(B.charAt(B.length-1)=="/")return i(B.slice(0,-1));var q=B.lastIndexOf("/");return q===-1?B:B.slice(q+1)}function s(B,q){typeof q=="string"&&(q=new Date(q));var K=q.getHours();K=K<<6|q.getMinutes(),K=K<<5|q.getSeconds()>>>1,B.write_shift(2,K);var Y=q.getFullYear()-1980;Y=Y<<4|q.getMonth()+1,Y=Y<<5|q.getDate(),B.write_shift(2,Y)}function a(B){var q=B.read_shift(2)&65535,K=B.read_shift(2)&65535,Y=new Date,Q=K&31;K>>>=5;var ee=K&15;K>>>=4,Y.setMilliseconds(0),Y.setFullYear(K+1980),Y.setMonth(ee-1),Y.setDate(Q);var me=q&31;q>>>=5;var Re=q&63;return q>>>=6,Y.setHours(q),Y.setMinutes(Re),Y.setSeconds(me<<1),Y}function o(B){zs(B,0);for(var q={},K=0;B.l<=B.length-4;){var Y=B.read_shift(2),Q=B.read_shift(2),ee=B.l+Q,me={};switch(Y){case 21589:K=B.read_shift(1),K&1&&(me.mtime=B.read_shift(4)),Q>5&&(K&2&&(me.atime=B.read_shift(4)),K&4&&(me.ctime=B.read_shift(4))),me.mtime&&(me.mt=new Date(me.mtime*1e3));break}B.l=ee,q[Y]=me}return q}var l;function u(){return l||(l={})}function h(B,q){if(B[0]==80&&B[1]==75)return Nr(B,q);if((B[0]|32)==109&&(B[1]|32)==105)return Hr(B,q);if(B.length<512)throw new Error("CFB file size "+B.length+" < 512");var K=3,Y=512,Q=0,ee=0,me=0,Re=0,ge=0,ye=[],_e=B.slice(0,512);zs(_e,0);var $e=f(_e);switch(K=$e[0],K){case 3:Y=512;break;case 4:Y=4096;break;case 0:if($e[1]==0)return Nr(B,q);default:throw new Error("Major Version: Expected 3 or 4 saw "+K)}Y!==512&&(_e=B.slice(0,Y),zs(_e,28));var et=B.slice(0,Y);g(_e,K);var ht=_e.read_shift(4,"i");if(K===3&&ht!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ht);_e.l+=4,me=_e.read_shift(4,"i"),_e.l+=4,_e.chk("00100000","Mini Stream Cutoff Size: "),Re=_e.read_shift(4,"i"),Q=_e.read_shift(4,"i"),ge=_e.read_shift(4,"i"),ee=_e.read_shift(4,"i");for(var We=-1,He=0;He<109&&(We=_e.read_shift(4,"i"),!(We<0));++He)ye[He]=We;var Gt=y(B,Y);w(ge,ee,Gt,Y,ye);var Cn=I(Gt,me,ye,Y);Cn[me].name="!Directory",Q>0&&Re!==j&&(Cn[Re].name="!MiniFAT"),Cn[ye[0]].name="!FAT",Cn.fat_addrs=ye,Cn.ssz=Y;var Ln={},nr=[],Ra=[],ra=[];b(me,Cn,Gt,nr,Q,Ln,Ra,Re),v(Ra,ra,nr),nr.shift();var Ns={FileIndex:Ra,FullPaths:ra};return q&&q.raw&&(Ns.raw={header:et,sectors:Gt}),Ns}function f(B){if(B[B.l]==80&&B[B.l+1]==75)return[0,0];B.chk(xe,"Header Signature: "),B.l+=16;var q=B.read_shift(2,"u");return[B.read_shift(2,"u"),q]}function g(B,q){var K=9;switch(B.l+=2,K=B.read_shift(2)){case 9:if(q!=3)throw new Error("Sector Shift: Expected 9 saw "+K);break;case 12:if(q!=4)throw new Error("Sector Shift: Expected 12 saw "+K);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+K)}B.chk("0600","Mini Sector Shift: "),B.chk("000000000000","Reserved: ")}function y(B,q){for(var K=Math.ceil(B.length/q)-1,Y=[],Q=1;Q<K;++Q)Y[Q-1]=B.slice(Q*q,(Q+1)*q);return Y[K-1]=B.slice(K*q),Y}function v(B,q,K){for(var Y=0,Q=0,ee=0,me=0,Re=0,ge=K.length,ye=[],_e=[];Y<ge;++Y)ye[Y]=_e[Y]=Y,q[Y]=K[Y];for(;Re<_e.length;++Re)Y=_e[Re],Q=B[Y].L,ee=B[Y].R,me=B[Y].C,ye[Y]===Y&&(Q!==-1&&ye[Q]!==Q&&(ye[Y]=ye[Q]),ee!==-1&&ye[ee]!==ee&&(ye[Y]=ye[ee])),me!==-1&&(ye[me]=Y),Q!==-1&&Y!=ye[Y]&&(ye[Q]=ye[Y],_e.lastIndexOf(Q)<Re&&_e.push(Q)),ee!==-1&&Y!=ye[Y]&&(ye[ee]=ye[Y],_e.lastIndexOf(ee)<Re&&_e.push(ee));for(Y=1;Y<ge;++Y)ye[Y]===Y&&(ee!==-1&&ye[ee]!==ee?ye[Y]=ye[ee]:Q!==-1&&ye[Q]!==Q&&(ye[Y]=ye[Q]));for(Y=1;Y<ge;++Y)if(B[Y].type!==0){if(Re=Y,Re!=ye[Re])do Re=ye[Re],q[Y]=q[Re]+"/"+q[Y];while(Re!==0&&ye[Re]!==-1&&Re!=ye[Re]);ye[Y]=-1}for(q[0]+="/",Y=1;Y<ge;++Y)B[Y].type!==2&&(q[Y]+="/")}function x(B,q,K){for(var Y=B.start,Q=B.size,ee=[],me=Y;K&&Q>0&&me>=0;)ee.push(q.slice(me*U,me*U+U)),Q-=U,me=mh(K,me*4);return ee.length===0?be(0):Ti(ee).slice(0,B.size)}function w(B,q,K,Y,Q){var ee=j;if(B===j){if(q!==0)throw new Error("DIFAT chain shorter than expected")}else if(B!==-1){var me=K[B],Re=(Y>>>2)-1;if(!me)return;for(var ge=0;ge<Re&&(ee=mh(me,ge*4))!==j;++ge)Q.push(ee);w(mh(me,Y-4),q-1,K,Y,Q)}}function T(B,q,K,Y,Q){var ee=[],me=[];Q||(Q=[]);var Re=Y-1,ge=0,ye=0;for(ge=q;ge>=0;){Q[ge]=!0,ee[ee.length]=ge,me.push(B[ge]);var _e=K[Math.floor(ge*4/Y)];if(ye=ge*4&Re,Y<4+ye)throw new Error("FAT boundary crossed: "+ge+" 4 "+Y);if(!B[_e])break;ge=mh(B[_e],ye)}return{nodes:ee,data:uO([me])}}function I(B,q,K,Y){var Q=B.length,ee=[],me=[],Re=[],ge=[],ye=Y-1,_e=0,$e=0,et=0,ht=0;for(_e=0;_e<Q;++_e)if(Re=[],et=_e+q,et>=Q&&(et-=Q),!me[et]){ge=[];var We=[];for($e=et;$e>=0;){We[$e]=!0,me[$e]=!0,Re[Re.length]=$e,ge.push(B[$e]);var He=K[Math.floor($e*4/Y)];if(ht=$e*4&ye,Y<4+ht)throw new Error("FAT boundary crossed: "+$e+" 4 "+Y);if(!B[He]||($e=mh(B[He],ht),We[$e]))break}ee[et]={nodes:Re,data:uO([ge])}}return ee}function b(B,q,K,Y,Q,ee,me,Re){for(var ge=0,ye=Y.length?2:0,_e=q[B].data,$e=0,et=0,ht;$e<_e.length;$e+=128){var We=_e.slice($e,$e+128);zs(We,64),et=We.read_shift(2),ht=JR(We,0,et-ye),Y.push(ht);var He={name:ht,type:We.read_shift(1),color:We.read_shift(1),L:We.read_shift(4,"i"),R:We.read_shift(4,"i"),C:We.read_shift(4,"i"),clsid:We.read_shift(16),state:We.read_shift(4,"i"),start:0,size:0},Gt=We.read_shift(2)+We.read_shift(2)+We.read_shift(2)+We.read_shift(2);Gt!==0&&(He.ct=N(We,We.l-8));var Cn=We.read_shift(2)+We.read_shift(2)+We.read_shift(2)+We.read_shift(2);Cn!==0&&(He.mt=N(We,We.l-8)),He.start=We.read_shift(4,"i"),He.size=We.read_shift(4,"i"),He.size<0&&He.start<0&&(He.size=He.type=0,He.start=j,He.name=""),He.type===5?(ge=He.start,Q>0&&ge!==j&&(q[ge].name="!StreamData")):He.size>=4096?(He.storage="fat",q[He.start]===void 0&&(q[He.start]=T(K,He.start,q.fat_addrs,q.ssz)),q[He.start].name=He.name,He.content=q[He.start].data.slice(0,He.size)):(He.storage="minifat",He.size<0?He.size=0:ge!==j&&He.start!==j&&q[ge]&&(He.content=x(He,q[ge].data,(q[Re]||{}).data))),He.content&&zs(He.content,0),ee[ht]=He,me.push(He)}}function N(B,q){return new Date((Ks(B,q+4)/1e7*Math.pow(2,32)+Ks(B,q)/1e7-11644473600)*1e3)}function F(B,q){return u(),h(l.readFileSync(B),q)}function W(B,q){var K=q&&q.type;switch(K||Tn&&Buffer.isBuffer(B)&&(K="buffer"),K||"base64"){case"file":return F(B,q);case"base64":return h(Wa($l(B)),q);case"binary":return h(Wa(B),q)}return h(B,q)}function M(B,q){var K=q||{},Y=K.root||"Root Entry";if(B.FullPaths||(B.FullPaths=[]),B.FileIndex||(B.FileIndex=[]),B.FullPaths.length!==B.FileIndex.length)throw new Error("inconsistent CFB structure");B.FullPaths.length===0&&(B.FullPaths[0]=Y+"/",B.FileIndex[0]={name:Y,type:5}),K.CLSID&&(B.FileIndex[0].clsid=K.CLSID),C(B)}function C(B){var q="Sh33tJ5";if(!$n.find(B,"/"+q)){var K=be(4);K[0]=55,K[1]=K[3]=50,K[2]=54,B.FileIndex.push({name:q,type:2,content:K,size:4,L:69,R:69,C:69}),B.FullPaths.push(B.FullPaths[0]+q),P(B)}}function P(B,q){M(B);for(var K=!1,Y=!1,Q=B.FullPaths.length-1;Q>=0;--Q){var ee=B.FileIndex[Q];switch(ee.type){case 0:Y?K=!0:(B.FileIndex.pop(),B.FullPaths.pop());break;case 1:case 2:case 5:Y=!0,isNaN(ee.R*ee.L*ee.C)&&(K=!0),ee.R>-1&&ee.L>-1&&ee.R==ee.L&&(K=!0);break;default:K=!0;break}}if(!(!K&&!q)){var me=new Date(1987,1,19),Re=0,ge=Object.create?Object.create(null):{},ye=[];for(Q=0;Q<B.FullPaths.length;++Q)ge[B.FullPaths[Q]]=!0,B.FileIndex[Q].type!==0&&ye.push([B.FullPaths[Q],B.FileIndex[Q]]);for(Q=0;Q<ye.length;++Q){var _e=r(ye[Q][0]);Y=ge[_e],Y||(ye.push([_e,{name:i(_e).replace("/",""),type:1,clsid:Ge,ct:me,mt:me,content:null}]),ge[_e]=!0)}for(ye.sort(function(ht,We){return t(ht[0],We[0])}),B.FullPaths=[],B.FileIndex=[],Q=0;Q<ye.length;++Q)B.FullPaths[Q]=ye[Q][0],B.FileIndex[Q]=ye[Q][1];for(Q=0;Q<ye.length;++Q){var $e=B.FileIndex[Q],et=B.FullPaths[Q];if($e.name=i(et).replace("/",""),$e.L=$e.R=$e.C=-($e.color=1),$e.size=$e.content?$e.content.length:0,$e.start=0,$e.clsid=$e.clsid||Ge,Q===0)$e.C=ye.length>1?1:-1,$e.size=0,$e.type=5;else if(et.slice(-1)=="/"){for(Re=Q+1;Re<ye.length&&r(B.FullPaths[Re])!=et;++Re);for($e.C=Re>=ye.length?-1:Re,Re=Q+1;Re<ye.length&&r(B.FullPaths[Re])!=r(et);++Re);$e.R=Re>=ye.length?-1:Re,$e.type=1}else r(B.FullPaths[Q+1]||"")==r(et)&&($e.R=Q+1),$e.type=2}}}function L(B,q){var K=q||{};if(K.fileType=="mad")return Kr(B,K);switch(P(B),K.fileType){case"zip":return yn(B,K)}var Y=(function(ht){for(var We=0,He=0,Gt=0;Gt<ht.FileIndex.length;++Gt){var Cn=ht.FileIndex[Gt];if(Cn.content){var Ln=Cn.content.length;Ln>0&&(Ln<4096?We+=Ln+63>>6:He+=Ln+511>>9)}}for(var nr=ht.FullPaths.length+3>>2,Ra=We+7>>3,ra=We+127>>7,Ns=Ra+He+nr+ra,Tr=Ns+127>>7,Ql=Tr<=109?0:Math.ceil((Tr-109)/127);Ns+Tr+Ql+127>>7>Tr;)Ql=++Tr<=109?0:Math.ceil((Tr-109)/127);var lr=[1,Ql,Tr,ra,nr,He,We,0];return ht.FileIndex[0].size=We<<6,lr[7]=(ht.FileIndex[0].start=lr[0]+lr[1]+lr[2]+lr[3]+lr[4]+lr[5])+(lr[6]+7>>3),lr})(B),Q=be(Y[7]<<9),ee=0,me=0;{for(ee=0;ee<8;++ee)Q.write_shift(1,Ce[ee]);for(ee=0;ee<8;++ee)Q.write_shift(2,0);for(Q.write_shift(2,62),Q.write_shift(2,3),Q.write_shift(2,65534),Q.write_shift(2,9),Q.write_shift(2,6),ee=0;ee<3;++ee)Q.write_shift(2,0);for(Q.write_shift(4,0),Q.write_shift(4,Y[2]),Q.write_shift(4,Y[0]+Y[1]+Y[2]+Y[3]-1),Q.write_shift(4,0),Q.write_shift(4,4096),Q.write_shift(4,Y[3]?Y[0]+Y[1]+Y[2]-1:j),Q.write_shift(4,Y[3]),Q.write_shift(-4,Y[1]?Y[0]-1:j),Q.write_shift(4,Y[1]),ee=0;ee<109;++ee)Q.write_shift(-4,ee<Y[2]?Y[1]+ee:-1)}if(Y[1])for(me=0;me<Y[1];++me){for(;ee<236+me*127;++ee)Q.write_shift(-4,ee<Y[2]?Y[1]+ee:-1);Q.write_shift(-4,me===Y[1]-1?j:me+1)}var Re=function(ht){for(me+=ht;ee<me-1;++ee)Q.write_shift(-4,ee+1);ht&&(++ee,Q.write_shift(-4,j))};for(me=ee=0,me+=Y[1];ee<me;++ee)Q.write_shift(-4,ke.DIFSECT);for(me+=Y[2];ee<me;++ee)Q.write_shift(-4,ke.FATSECT);Re(Y[3]),Re(Y[4]);for(var ge=0,ye=0,_e=B.FileIndex[0];ge<B.FileIndex.length;++ge)_e=B.FileIndex[ge],_e.content&&(ye=_e.content.length,!(ye<4096)&&(_e.start=me,Re(ye+511>>9)));for(Re(Y[6]+7>>3);Q.l&511;)Q.write_shift(-4,ke.ENDOFCHAIN);for(me=ee=0,ge=0;ge<B.FileIndex.length;++ge)_e=B.FileIndex[ge],_e.content&&(ye=_e.content.length,!(!ye||ye>=4096)&&(_e.start=me,Re(ye+63>>6)));for(;Q.l&511;)Q.write_shift(-4,ke.ENDOFCHAIN);for(ee=0;ee<Y[4]<<2;++ee){var $e=B.FullPaths[ee];if(!$e||$e.length===0){for(ge=0;ge<17;++ge)Q.write_shift(4,0);for(ge=0;ge<3;++ge)Q.write_shift(4,-1);for(ge=0;ge<12;++ge)Q.write_shift(4,0);continue}_e=B.FileIndex[ee],ee===0&&(_e.start=_e.size?_e.start-1:j);var et=ee===0&&K.root||_e.name;if(ye=2*(et.length+1),Q.write_shift(64,et,"utf16le"),Q.write_shift(2,ye),Q.write_shift(1,_e.type),Q.write_shift(1,_e.color),Q.write_shift(-4,_e.L),Q.write_shift(-4,_e.R),Q.write_shift(-4,_e.C),_e.clsid)Q.write_shift(16,_e.clsid,"hex");else for(ge=0;ge<4;++ge)Q.write_shift(4,0);Q.write_shift(4,_e.state||0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,_e.start),Q.write_shift(4,_e.size),Q.write_shift(4,0)}for(ee=1;ee<B.FileIndex.length;++ee)if(_e=B.FileIndex[ee],_e.size>=4096)if(Q.l=_e.start+1<<9,Tn&&Buffer.isBuffer(_e.content))_e.content.copy(Q,Q.l,0,_e.size),Q.l+=_e.size+511&-512;else{for(ge=0;ge<_e.size;++ge)Q.write_shift(1,_e.content[ge]);for(;ge&511;++ge)Q.write_shift(1,0)}for(ee=1;ee<B.FileIndex.length;++ee)if(_e=B.FileIndex[ee],_e.size>0&&_e.size<4096)if(Tn&&Buffer.isBuffer(_e.content))_e.content.copy(Q,Q.l,0,_e.size),Q.l+=_e.size+63&-64;else{for(ge=0;ge<_e.size;++ge)Q.write_shift(1,_e.content[ge]);for(;ge&63;++ge)Q.write_shift(1,0)}if(Tn)Q.l=Q.length;else for(;Q.l<Q.length;)Q.write_shift(1,0);return Q}function O(B,q){var K=B.FullPaths.map(function(ge){return ge.toUpperCase()}),Y=K.map(function(ge){var ye=ge.split("/");return ye[ye.length-(ge.slice(-1)=="/"?2:1)]}),Q=!1;q.charCodeAt(0)===47?(Q=!0,q=K[0].slice(0,-1)+q):Q=q.indexOf("/")!==-1;var ee=q.toUpperCase(),me=Q===!0?K.indexOf(ee):Y.indexOf(ee);if(me!==-1)return B.FileIndex[me];var Re=!ee.match(g_);for(ee=ee.replace(Fm,""),Re&&(ee=ee.replace(g_,"!")),me=0;me<K.length;++me)if((Re?K[me].replace(g_,"!"):K[me]).replace(Fm,"")==ee||(Re?Y[me].replace(g_,"!"):Y[me]).replace(Fm,"")==ee)return B.FileIndex[me];return null}var U=64,j=-2,xe="d0cf11e0a1b11ae1",Ce=[208,207,17,224,161,177,26,225],Ge="00000000000000000000000000000000",ke={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:j,FREESECT:-1,HEADER_SIGNATURE:xe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ge,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(B,q,K){u();var Y=L(B,K);l.writeFileSync(q,Y)}function Ie(B){for(var q=new Array(B.length),K=0;K<B.length;++K)q[K]=String.fromCharCode(B[K]);return q.join("")}function Te(B,q){var K=L(B,q);switch(q&&q.type||"buffer"){case"file":return u(),l.writeFileSync(q.filename,K),K;case"binary":return typeof K=="string"?K:Ie(K);case"base64":return Pp(typeof K=="string"?K:Ie(K));case"buffer":if(Tn)return Buffer.isBuffer(K)?K:Zl(K);case"array":return typeof K=="string"?Wa(K):K}return K}var ie;function V(B){try{var q=B.InflateRaw,K=new q;if(K._processChunk(new Uint8Array([3,0]),K._finishFlushFlag),K.bytesRead)ie=B;else throw new Error("zlib does not expose bytesRead")}catch(Y){console.error("cannot use native zlib: "+(Y.message||Y))}}function J(B,q){if(!ie)return Rt(B,q);var K=ie.InflateRaw,Y=new K,Q=Y._processChunk(B.slice(B.l),Y._finishFlushFlag);return B.l+=Y.bytesRead,Q}function te(B){return ie?ie.deflateRawSync(B):z(B)}var X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Me=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Fe(B){var q=(B<<1|B<<11)&139536|(B<<5|B<<15)&558144;return(q>>16|q>>8|q)&255}for(var Le=typeof Uint8Array<"u",je=Le?new Uint8Array(256):[],qt=0;qt<256;++qt)je[qt]=Fe(qt);function Ye(B,q){var K=je[B&255];return q<=8?K>>>8-q:(K=K<<8|je[B>>8&255],q<=16?K>>>16-q:(K=K<<8|je[B>>16&255],K>>>24-q))}function Zt(B,q){var K=q&7,Y=q>>>3;return(B[Y]|(K<=6?0:B[Y+1]<<8))>>>K&3}function Nt(B,q){var K=q&7,Y=q>>>3;return(B[Y]|(K<=5?0:B[Y+1]<<8))>>>K&7}function at(B,q){var K=q&7,Y=q>>>3;return(B[Y]|(K<=4?0:B[Y+1]<<8))>>>K&15}function yt(B,q){var K=q&7,Y=q>>>3;return(B[Y]|(K<=3?0:B[Y+1]<<8))>>>K&31}function Oe(B,q){var K=q&7,Y=q>>>3;return(B[Y]|(K<=1?0:B[Y+1]<<8))>>>K&127}function bn(B,q,K){var Y=q&7,Q=q>>>3,ee=(1<<K)-1,me=B[Q]>>>Y;return K<8-Y||(me|=B[Q+1]<<8-Y,K<16-Y)||(me|=B[Q+2]<<16-Y,K<24-Y)||(me|=B[Q+3]<<24-Y),me&ee}function $t(B,q,K){var Y=q&7,Q=q>>>3;return Y<=5?B[Q]|=(K&7)<<Y:(B[Q]|=K<<Y&255,B[Q+1]=(K&7)>>8-Y),q+3}function Xt(B,q,K){var Y=q&7,Q=q>>>3;return K=(K&1)<<Y,B[Q]|=K,q+1}function It(B,q,K){var Y=q&7,Q=q>>>3;return K<<=Y,B[Q]|=K&255,K>>>=8,B[Q+1]=K,q+8}function Rn(B,q,K){var Y=q&7,Q=q>>>3;return K<<=Y,B[Q]|=K&255,K>>>=8,B[Q+1]=K&255,B[Q+2]=K>>>8,q+16}function Ae(B,q){var K=B.length,Y=2*K>q?2*K:q+5,Q=0;if(K>=q)return B;if(Tn){var ee=XL(Y);if(B.copy)B.copy(ee);else for(;Q<B.length;++Q)ee[Q]=B[Q];return ee}else if(Le){var me=new Uint8Array(Y);if(me.set)me.set(B);else for(;Q<K;++Q)me[Q]=B[Q];return me}return B.length=Y,B}function Ee(B){for(var q=new Array(B),K=0;K<B;++K)q[K]=0;return q}function k(B,q,K){var Y=1,Q=0,ee=0,me=0,Re=0,ge=B.length,ye=Le?new Uint16Array(32):Ee(32);for(ee=0;ee<32;++ee)ye[ee]=0;for(ee=ge;ee<K;++ee)B[ee]=0;ge=B.length;var _e=Le?new Uint16Array(ge):Ee(ge);for(ee=0;ee<ge;++ee)ye[Q=B[ee]]++,Y<Q&&(Y=Q),_e[ee]=0;for(ye[0]=0,ee=1;ee<=Y;++ee)ye[ee+16]=Re=Re+ye[ee-1]<<1;for(ee=0;ee<ge;++ee)Re=B[ee],Re!=0&&(_e[ee]=ye[Re+16]++);var $e=0;for(ee=0;ee<ge;++ee)if($e=B[ee],$e!=0)for(Re=Ye(_e[ee],Y)>>Y-$e,me=(1<<Y+4-$e)-1;me>=0;--me)q[Re|me<<$e]=$e&15|ee<<4;return Y}var St=Le?new Uint16Array(512):Ee(512),Z=Le?new Uint16Array(32):Ee(32);if(!Le){for(var jt=0;jt<512;++jt)St[jt]=0;for(jt=0;jt<32;++jt)Z[jt]=0}(function(){for(var B=[],q=0;q<32;q++)B.push(5);k(B,Z,32);var K=[];for(q=0;q<=143;q++)K.push(8);for(;q<=255;q++)K.push(9);for(;q<=279;q++)K.push(7);for(;q<=287;q++)K.push(8);k(K,St,288)})();var re=(function(){for(var q=Le?new Uint8Array(32768):[],K=0,Y=0;K<Me.length-1;++K)for(;Y<Me[K+1];++Y)q[Y]=K;for(;Y<32768;++Y)q[Y]=29;var Q=Le?new Uint8Array(259):[];for(K=0,Y=0;K<ue.length-1;++K)for(;Y<ue[K+1];++Y)Q[Y]=K;function ee(Re,ge){for(var ye=0;ye<Re.length;){var _e=Math.min(65535,Re.length-ye),$e=ye+_e==Re.length;for(ge.write_shift(1,+$e),ge.write_shift(2,_e),ge.write_shift(2,~_e&65535);_e-- >0;)ge[ge.l++]=Re[ye++]}return ge.l}function me(Re,ge){for(var ye=0,_e=0,$e=Le?new Uint16Array(32768):[];_e<Re.length;){var et=Math.min(65535,Re.length-_e);if(et<10){for(ye=$t(ge,ye,+(_e+et==Re.length)),ye&7&&(ye+=8-(ye&7)),ge.l=ye/8|0,ge.write_shift(2,et),ge.write_shift(2,~et&65535);et-- >0;)ge[ge.l++]=Re[_e++];ye=ge.l*8;continue}ye=$t(ge,ye,+(_e+et==Re.length)+2);for(var ht=0;et-- >0;){var We=Re[_e];ht=(ht<<5^We)&32767;var He=-1,Gt=0;if((He=$e[ht])&&(He|=_e&-32768,He>_e&&(He-=32768),He<_e))for(;Re[He+Gt]==Re[_e+Gt]&&Gt<250;)++Gt;if(Gt>2){We=Q[Gt],We<=22?ye=It(ge,ye,je[We+1]>>1)-1:(It(ge,ye,3),ye+=5,It(ge,ye,je[We-23]>>5),ye+=3);var Cn=We<8?0:We-4>>2;Cn>0&&(Rn(ge,ye,Gt-ue[We]),ye+=Cn),We=q[_e-He],ye=It(ge,ye,je[We]>>3),ye-=3;var Ln=We<4?0:We-2>>1;Ln>0&&(Rn(ge,ye,_e-He-Me[We]),ye+=Ln);for(var nr=0;nr<Gt;++nr)$e[ht]=_e&32767,ht=(ht<<5^Re[_e])&32767,++_e;et-=Gt-1}else We<=143?We=We+48:ye=Xt(ge,ye,1),ye=It(ge,ye,je[We]),$e[ht]=_e&32767,++_e}ye=It(ge,ye,0)-1}return ge.l=(ye+7)/8|0,ge.l}return function(ge,ye){return ge.length<8?ee(ge,ye):me(ge,ye)}})();function z(B){var q=be(50+Math.floor(B.length*1.1)),K=re(B,q);return q.slice(0,K)}var ae=Le?new Uint16Array(32768):Ee(32768),qe=Le?new Uint16Array(32768):Ee(32768),we=Le?new Uint16Array(128):Ee(128),Je=1,gt=1;function dt(B,q){var K=yt(B,q)+257;q+=5;var Y=yt(B,q)+1;q+=5;var Q=at(B,q)+4;q+=4;for(var ee=0,me=Le?new Uint8Array(19):Ee(19),Re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ge=1,ye=Le?new Uint8Array(8):Ee(8),_e=Le?new Uint8Array(8):Ee(8),$e=me.length,et=0;et<Q;++et)me[X[et]]=ee=Nt(B,q),ge<ee&&(ge=ee),ye[ee]++,q+=3;var ht=0;for(ye[0]=0,et=1;et<=ge;++et)_e[et]=ht=ht+ye[et-1]<<1;for(et=0;et<$e;++et)(ht=me[et])!=0&&(Re[et]=_e[ht]++);var We=0;for(et=0;et<$e;++et)if(We=me[et],We!=0){ht=je[Re[et]]>>8-We;for(var He=(1<<7-We)-1;He>=0;--He)we[ht|He<<We]=We&7|et<<3}var Gt=[];for(ge=1;Gt.length<K+Y;)switch(ht=we[Oe(B,q)],q+=ht&7,ht>>>=3){case 16:for(ee=3+Zt(B,q),q+=2,ht=Gt[Gt.length-1];ee-- >0;)Gt.push(ht);break;case 17:for(ee=3+Nt(B,q),q+=3;ee-- >0;)Gt.push(0);break;case 18:for(ee=11+Oe(B,q),q+=7;ee-- >0;)Gt.push(0);break;default:Gt.push(ht),ge<ht&&(ge=ht);break}var Cn=Gt.slice(0,K),Ln=Gt.slice(K);for(et=K;et<286;++et)Cn[et]=0;for(et=Y;et<30;++et)Ln[et]=0;return Je=k(Cn,ae,286),gt=k(Ln,qe,30),q}function At(B,q){if(B[0]==3&&!(B[1]&3))return[ed(q),2];for(var K=0,Y=0,Q=XL(q||1<<18),ee=0,me=Q.length>>>0,Re=0,ge=0;(Y&1)==0;){if(Y=Nt(B,K),K+=3,Y>>>1)Y>>1==1?(Re=9,ge=5):(K=dt(B,K),Re=Je,ge=gt);else{K&7&&(K+=8-(K&7));var ye=B[K>>>3]|B[(K>>>3)+1]<<8;if(K+=32,ye>0)for(!q&&me<ee+ye&&(Q=Ae(Q,ee+ye),me=Q.length);ye-- >0;)Q[ee++]=B[K>>>3],K+=8;continue}for(;;){!q&&me<ee+32767&&(Q=Ae(Q,ee+32767),me=Q.length);var _e=bn(B,K,Re),$e=Y>>>1==1?St[_e]:ae[_e];if(K+=$e&15,$e>>>=4,($e>>>8&255)===0)Q[ee++]=$e;else{if($e==256)break;$e-=257;var et=$e<8?0:$e-4>>2;et>5&&(et=0);var ht=ee+ue[$e];et>0&&(ht+=bn(B,K,et),K+=et),_e=bn(B,K,ge),$e=Y>>>1==1?Z[_e]:qe[_e],K+=$e&15,$e>>>=4;var We=$e<4?0:$e-2>>1,He=Me[$e];for(We>0&&(He+=bn(B,K,We),K+=We),!q&&me<ht&&(Q=Ae(Q,ht+100),me=Q.length);ee<ht;)Q[ee]=Q[ee-He],++ee}}}return q?[Q,K+7>>>3]:[Q.slice(0,ee),K+7>>>3]}function Rt(B,q){var K=B.slice(B.l||0),Y=At(K,q);return B.l+=Y[1],Y[0]}function tn(B,q){if(B)typeof console<"u"&&console.error(q);else throw new Error(q)}function Nr(B,q){var K=B;zs(K,0);var Y=[],Q=[],ee={FileIndex:Y,FullPaths:Q};M(ee,{root:q.root});for(var me=K.length-4;(K[me]!=80||K[me+1]!=75||K[me+2]!=5||K[me+3]!=6)&&me>=0;)--me;K.l=me+4,K.l+=4;var Re=K.read_shift(2);K.l+=6;var ge=K.read_shift(4);for(K.l=ge,me=0;me<Re;++me){K.l+=20;var ye=K.read_shift(4),_e=K.read_shift(4),$e=K.read_shift(2),et=K.read_shift(2),ht=K.read_shift(2);K.l+=8;var We=K.read_shift(4),He=o(K.slice(K.l+$e,K.l+$e+et));K.l+=$e+et+ht;var Gt=K.l;K.l=We+4,$r(K,ye,_e,ee,He),K.l=Gt}return ee}function $r(B,q,K,Y,Q){B.l+=2;var ee=B.read_shift(2),me=B.read_shift(2),Re=a(B);if(ee&8257)throw new Error("Unsupported ZIP encryption");for(var ge=B.read_shift(4),ye=B.read_shift(4),_e=B.read_shift(4),$e=B.read_shift(2),et=B.read_shift(2),ht="",We=0;We<$e;++We)ht+=String.fromCharCode(B[B.l++]);if(et){var He=o(B.slice(B.l,B.l+et));(He[21589]||{}).mt&&(Re=He[21589].mt),((Q||{})[21589]||{}).mt&&(Re=Q[21589].mt)}B.l+=et;var Gt=B.slice(B.l,B.l+ye);switch(me){case 8:Gt=J(B,_e);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+me)}var Cn=!1;ee&8&&(ge=B.read_shift(4),ge==134695760&&(ge=B.read_shift(4),Cn=!0),ye=B.read_shift(4),_e=B.read_shift(4)),ye!=q&&tn(Cn,"Bad compressed size: "+q+" != "+ye),_e!=K&&tn(Cn,"Bad uncompressed size: "+K+" != "+_e),cn(Y,ht,Gt,{unsafe:!0,mt:Re})}function yn(B,q){var K=q||{},Y=[],Q=[],ee=be(1),me=K.compression?8:0,Re=0,ge=0,ye=0,_e=0,$e=0,et=B.FullPaths[0],ht=et,We=B.FileIndex[0],He=[],Gt=0;for(ge=1;ge<B.FullPaths.length;++ge)if(ht=B.FullPaths[ge].slice(et.length),We=B.FileIndex[ge],!(!We.size||!We.content||ht=="Sh33tJ5")){var Cn=_e,Ln=be(ht.length);for(ye=0;ye<ht.length;++ye)Ln.write_shift(1,ht.charCodeAt(ye)&127);Ln=Ln.slice(0,Ln.l),He[$e]=dme.buf(We.content,0);var nr=We.content;me==8&&(nr=te(nr)),ee=be(30),ee.write_shift(4,67324752),ee.write_shift(2,20),ee.write_shift(2,Re),ee.write_shift(2,me),We.mt?s(ee,We.mt):ee.write_shift(4,0),ee.write_shift(-4,He[$e]),ee.write_shift(4,nr.length),ee.write_shift(4,We.content.length),ee.write_shift(2,Ln.length),ee.write_shift(2,0),_e+=ee.length,Y.push(ee),_e+=Ln.length,Y.push(Ln),_e+=nr.length,Y.push(nr),ee=be(46),ee.write_shift(4,33639248),ee.write_shift(2,0),ee.write_shift(2,20),ee.write_shift(2,Re),ee.write_shift(2,me),ee.write_shift(4,0),ee.write_shift(-4,He[$e]),ee.write_shift(4,nr.length),ee.write_shift(4,We.content.length),ee.write_shift(2,Ln.length),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(4,0),ee.write_shift(4,Cn),Gt+=ee.l,Q.push(ee),Gt+=Ln.length,Q.push(Ln),++$e}return ee=be(22),ee.write_shift(4,101010256),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,$e),ee.write_shift(2,$e),ee.write_shift(4,Gt),ee.write_shift(4,_e),ee.write_shift(2,0),Ti([Ti(Y),Ti(Q),ee])}var Yi={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Xi(B,q){if(B.ctype)return B.ctype;var K=B.name||"",Y=K.match(/\.([^\.]+)$/);return Y&&Yi[Y[1]]||q&&(Y=(K=q).match(/[\.\\]([^\.\\])+$/),Y&&Yi[Y[1]])?Yi[Y[1]]:"application/octet-stream"}function ar(B){for(var q=Pp(B),K=[],Y=0;Y<q.length;Y+=76)K.push(q.slice(Y,Y+76));return K.join(`\r
`)+`\r
`}function cs(B){var q=B.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ye){var _e=ye.charCodeAt(0).toString(16).toUpperCase();return"="+(_e.length==1?"0"+_e:_e)});q=q.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),q.charAt(0)==`
`&&(q="=0D"+q.slice(1)),q=q.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var K=[],Y=q.split(`\r
`),Q=0;Q<Y.length;++Q){var ee=Y[Q];if(ee.length==0){K.push("");continue}for(var me=0;me<ee.length;){var Re=76,ge=ee.slice(me,me+Re);ge.charAt(Re-1)=="="?Re--:ge.charAt(Re-2)=="="?Re-=2:ge.charAt(Re-3)=="="&&(Re-=3),ge=ee.slice(me,me+Re),me+=Re,me<ee.length&&(ge+="="),K.push(ge)}}return K.join(`\r
`)}function Wr(B){for(var q=[],K=0;K<B.length;++K){for(var Y=B[K];K<=B.length&&Y.charAt(Y.length-1)=="=";)Y=Y.slice(0,Y.length-1)+B[++K];q.push(Y)}for(var Q=0;Q<q.length;++Q)q[Q]=q[Q].replace(/[=][0-9A-Fa-f]{2}/g,function(ee){return String.fromCharCode(parseInt(ee.slice(1),16))});return Wa(q.join(`\r
`))}function or(B,q,K){for(var Y="",Q="",ee="",me,Re=0;Re<10;++Re){var ge=q[Re];if(!ge||ge.match(/^\s*$/))break;var ye=ge.match(/^(.*?):\s*([^\s].*)$/);if(ye)switch(ye[1].toLowerCase()){case"content-location":Y=ye[2].trim();break;case"content-type":ee=ye[2].trim();break;case"content-transfer-encoding":Q=ye[2].trim();break}}switch(++Re,Q.toLowerCase()){case"base64":me=Wa($l(q.slice(Re).join("")));break;case"quoted-printable":me=Wr(q.slice(Re));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Q)}var _e=cn(B,Y.slice(K.length),me,{unsafe:!0});ee&&(_e.ctype=ee)}function Hr(B,q){if(Ie(B.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var K=q&&q.root||"",Y=(Tn&&Buffer.isBuffer(B)?B.toString("binary"):Ie(B)).split(`\r
`),Q=0,ee="";for(Q=0;Q<Y.length;++Q)if(ee=Y[Q],!!/^Content-Location:/i.test(ee)&&(ee=ee.slice(ee.indexOf("file")),K||(K=ee.slice(0,ee.lastIndexOf("/")+1)),ee.slice(0,K.length)!=K))for(;K.length>0&&(K=K.slice(0,K.length-1),K=K.slice(0,K.lastIndexOf("/")+1),ee.slice(0,K.length)!=K););var me=(Y[1]||"").match(/boundary="(.*?)"/);if(!me)throw new Error("MAD cannot find boundary");var Re="--"+(me[1]||""),ge=[],ye=[],_e={FileIndex:ge,FullPaths:ye};M(_e);var $e,et=0;for(Q=0;Q<Y.length;++Q){var ht=Y[Q];ht!==Re&&ht!==Re+"--"||(et++&&or(_e,Y.slice($e,Q),K),$e=Q)}return _e}function Kr(B,q){var K=q||{},Y=K.boundary||"SheetJS";Y="------="+Y;for(var Q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Y.slice(2)+'"',"","",""],ee=B.FullPaths[0],me=ee,Re=B.FileIndex[0],ge=1;ge<B.FullPaths.length;++ge)if(me=B.FullPaths[ge].slice(ee.length),Re=B.FileIndex[ge],!(!Re.size||!Re.content||me=="Sh33tJ5")){me=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Gt){return"_x"+Gt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Gt){return"_u"+Gt.charCodeAt(0).toString(16)+"_"});for(var ye=Re.content,_e=Tn&&Buffer.isBuffer(ye)?ye.toString("binary"):Ie(ye),$e=0,et=Math.min(1024,_e.length),ht=0,We=0;We<=et;++We)(ht=_e.charCodeAt(We))>=32&&ht<128&&++$e;var He=$e>=et*4/5;Q.push(Y),Q.push("Content-Location: "+(K.root||"file:///C:/SheetJS/")+me),Q.push("Content-Transfer-Encoding: "+(He?"quoted-printable":"base64")),Q.push("Content-Type: "+Xi(Re,me)),Q.push(""),Q.push(He?cs(_e):ar(_e))}return Q.push(Y+`--\r
`),Q.join(`\r
`)}function Lr(B){var q={};return M(q,B),q}function cn(B,q,K,Y){var Q=Y&&Y.unsafe;Q||M(B);var ee=!Q&&$n.find(B,q);if(!ee){var me=B.FullPaths[0];q.slice(0,me.length)==me?me=q:(me.slice(-1)!="/"&&(me+="/"),me=(me+q).replace("//","/")),ee={name:i(q),type:2},B.FileIndex.push(ee),B.FullPaths.push(me),Q||$n.utils.cfb_gc(B)}return ee.content=K,ee.size=K?K.length:0,Y&&(Y.CLSID&&(ee.clsid=Y.CLSID),Y.mt&&(ee.mt=Y.mt),Y.ct&&(ee.ct=Y.ct)),ee}function mr(B,q){M(B);var K=$n.find(B,q);if(K){for(var Y=0;Y<B.FileIndex.length;++Y)if(B.FileIndex[Y]==K)return B.FileIndex.splice(Y,1),B.FullPaths.splice(Y,1),!0}return!1}function Sr(B,q,K){M(B);var Y=$n.find(B,q);if(Y){for(var Q=0;Q<B.FileIndex.length;++Q)if(B.FileIndex[Q]==Y)return B.FileIndex[Q].name=i(K),B.FullPaths[Q]=K,!0}return!1}function us(B){P(B,!0)}return e.find=O,e.read=W,e.parse=h,e.write=Te,e.writeFile=ce,e.utils={cfb_new:Lr,cfb_add:cn,cfb_del:mr,cfb_mov:Sr,cfb_gc:us,ReadShift:Vm,CheckField:uV,prep_blob:zs,bconcat:Ti,use_zlib:V,_deflateRaw:z,_inflateRaw:Rt,consts:ke},e})();function fme(n){return typeof n=="string"?GE(n):Array.isArray(n)?Vge(n):n}function C1(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=GE(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Mp(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([fme(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=R1(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function Ri(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function rO(n,e){for(var t=[],r=Ri(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function XR(n){for(var e=[],t=Ri(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function zE(n){for(var e=[],t=Ri(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function gme(n){for(var e=[],t=Ri(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var pv=new Date(1899,11,30,0,0,0);function Ps(n,e){var t=n.getTime(),r=pv.getTime()+(n.getTimezoneOffset()-pv.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var K7=new Date,mme=pv.getTime()+(K7.getTimezoneOffset()-pv.getTimezoneOffset())*6e4,iO=K7.getTimezoneOffset();function Y7(n){var e=new Date;return e.setTime(n*24*60*60*1e3+mme),e.getTimezoneOffset()!==iO&&e.setTime(e.getTime()+(e.getTimezoneOffset()-iO)*6e4),e}var sO=new Date("2017-02-19T19:06:09.000Z"),X7=isNaN(sO.getFullYear())?new Date("2/19/17"):sO,pme=X7.getFullYear()==2017;function as(n,e){var t=new Date(n);if(pme)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(X7.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function $E(n,e){if(Tn&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function ks(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=ks(n[t]));return e}function vr(n,e){for(var t="";t.length<e;)t+=n;return t}function Ol(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var yme=["january","february","march","april","may","june","july","august","september","october","november","december"];function kp(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&yme.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function Jt(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return Tn?r=Zl(t):r=Gge(t),$n.utils.cfb_add(n,e,r)}$n.utils.cfb_add(n,e,t)}else n.file(e,t)}function qR(){return $n.utils.cfb_new()}var zr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,_me={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},ZR=XR(_me),QR=/[&<>'"]/g,xme=/[\u0000-\u0008\u000b-\u001f]/g;function Bn(n){var e=n+"";return e.replace(QR,function(t){return ZR[t]}).replace(xme,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function aO(n){return Bn(n).replace(/ /g,"_x0020_")}var q7=/[\u0000-\u001f]/g;function vme(n){var e=n+"";return e.replace(QR,function(t){return ZR[t]}).replace(/\n/g,"<br/>").replace(q7,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function Eme(n){var e=n+"";return e.replace(QR,function(t){return ZR[t]}).replace(q7,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function wme(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function Sme(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function FS(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function oO(n){var e=ed(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function lO(n){return Zl(n,"binary").toString("utf8")}var p_="foo bar baz",jm=Tn&&(lO(p_)==FS(p_)&&lO||oO(p_)==FS(p_)&&oO)||FS,Mp=Tn?function(n){return Zl(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Tme=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}})(),Z7=/(^\s|\s$|\n)/;function Ii(n,e){return"<"+n+(e.match(Z7)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function Np(n){return Ri(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function tt(n,e,t){return"<"+n+(t!=null?Np(t):"")+(e!=null?(e.match(Z7)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function VI(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function Ime(n,e){switch(typeof n){case"string":var t=tt("vt:lpwstr",Bn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return tt((n|0)==n?"vt:i4":"vt:r8",Bn(String(n)));case"boolean":return tt("vt:bool",n?"true":"false")}if(n instanceof Date)return tt("vt:filetime",VI(n));throw new Error("Unable to serialize "+n)}var ci={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},H0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Hs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Ame(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function bme(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var cO=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},uO=Tn?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:Zl(e)})):cO(n)}:cO,hO=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(hm(n,i)));return r.join("").replace(Fm,"")},JR=Tn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(Fm,""):hO(n,e,t)}:hO,dO=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},Q7=Tn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):dO(n,e,t)}:dO,fO=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(Rf(n,i)));return r.join("")},P1=Tn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):fO(e,t,r)}:fO,J7=function(n,e){var t=Ks(n,e);return t>0?P1(n,e+4,e+4+t-1):""},eV=J7,tV=function(n,e){var t=Ks(n,e);return t>0?P1(n,e+4,e+4+t-1):""},nV=tV,rV=function(n,e){var t=2*Ks(n,e);return t>0?P1(n,e+4,e+4+t-1):""},iV=rV,sV=function(e,t){var r=Ks(e,t);return r>0?JR(e,t+4,t+4+r):""},aV=sV,oV=function(n,e){var t=Ks(n,e);return t>0?P1(n,e+4,e+4+t):""},lV=oV,cV=function(n,e){return Ame(n,e)},yv=cV,eC=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Tn&&(eV=function(e,t){if(!Buffer.isBuffer(e))return J7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},nV=function(e,t){if(!Buffer.isBuffer(e))return tV(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},iV=function(e,t){if(!Buffer.isBuffer(e))return rV(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},aV=function(e,t){if(!Buffer.isBuffer(e))return sV(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},lV=function(e,t){if(!Buffer.isBuffer(e))return oV(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},yv=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):cV(e,t)},eC=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Rf=function(n,e){return n[e]},hm=function(n,e){return n[e+1]*256+n[e]},Rme=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},Ks=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},mh=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},Cme=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Vm(n,e){var t="",r,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,Tn&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(hm(this,u)),u+=2;n*=2;break;case"utf8":t=P1(this,this.l,this.l+n);break;case"utf16le":n*=2,t=JR(this,this.l,this.l+n);break;case"wstr":return Vm.call(this,n,"dbcs");case"lpstr-ansi":t=eV(this,this.l),n=4+Ks(this,this.l);break;case"lpstr-cp":t=nV(this,this.l),n=4+Ks(this,this.l);break;case"lpwstr":t=iV(this,this.l),n=4+2*Ks(this,this.l);break;case"lpp4":n=4+Ks(this,this.l),t=aV(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+Ks(this,this.l),t=lV(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=Rf(this,this.l+n++))!==0;)s.push(f_(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=hm(this,this.l+n))!==0;)s.push(f_(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Rf(this,u),this.l=u+1,o=Vm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(f_(hm(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Rf(this,u),this.l=u+1,o=Vm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(f_(Rf(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=Rf(this,this.l),this.l++,r;case 2:return r=(e==="i"?Rme:hm)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?mh:Cme)(this,this.l),this.l+=4,r):(i=Ks(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=yv(this,this.l):i=yv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=Q7(this,this.l,n);break}}return this.l+=n,t}var Pme=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},kme=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},Mme=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function Nme(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)Mme(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,Pme(this,e,this.l);break;case 8:if(r=8,t==="f"){bme(this,e,this.l);break}case 16:break;case-4:r=4,kme(this,e,this.l);break}return this.l+=r,this}function uV(n,e){var t=Q7(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function zs(n,e){n.l=e,n.read_shift=Vm,n.chk=uV,n.write_shift=Nme}function Zo(n,e){n.l+=e}function be(n){var e=ed(n);return zs(e,0),e}function Rs(){var n=[],e=Tn?256:2048,t=function(u){var h=be(u);return zs(h,0),h},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),Ti(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function Ve(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=Ave[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&eC(t)&&n.push(t)}}function Gm(n,e,t){var r=ks(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function gO(n,e,t){var r=ks(n);return r.s=Gm(r.s,e.s,t),r.e=Gm(r.e,e.s,t),r}function Bm(n,e){if(n.cRel&&n.c<0)for(n=ks(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=ks(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=zn(n);return!n.cRel&&n.cRel!=null&&(t=Dme(t)),!n.rRel&&n.rRel!=null&&(t=Lme(t)),t}function jS(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Hi(n.s.c)+":"+(n.e.cRel?"":"$")+Hi(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+bi(n.s.r)+":"+(n.e.rRel?"":"$")+bi(n.e.r):Bm(n.s,e.biff)+":"+Bm(n.e,e.biff)}function tC(n){return parseInt(Ome(n),10)-1}function bi(n){return""+(n+1)}function Lme(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Ome(n){return n.replace(/\$(\d+)$/,"$1")}function nC(n){for(var e=Fme(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Hi(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function Dme(n){return n.replace(/^([A-Z])/,"$$$1")}function Fme(n){return n.replace(/^\$([A-Z])/,"$1")}function jme(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ui(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function zn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function na(n){var e=n.indexOf(":");return e==-1?{s:ui(n),e:ui(n)}:{s:ui(n.slice(0,e)),e:ui(n.slice(e+1))}}function Br(n,e){return typeof e>"u"||typeof e=="number"?Br(n.s,n.e):(typeof n!="string"&&(n=zn(n)),typeof e!="string"&&(e=zn(e)),n==e?n:n+":"+e)}function tr(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function mO(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=vu(n.z,t?Ps(e):e)}catch{}try{return n.w=vu((n.XF||{}).numFmtId||(t?14:0),t?Ps(e):e)}catch{return""+e}}function Wl(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?k1[n.v]||n.v:e==null?mO(n,n.v):mO(n,e))}function pd(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function hV(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?ui(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var h=tr(s["!ref"]);u.s.c=h.s.c,u.s.r=h.s.r,u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),a==-1&&(u.e.r=a=h.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[f].length;++g)if(!(typeof e[f][g]>"u")){var y={v:e[f][g]},v=a+f,x=o+g;if(u.s.r>v&&(u.s.r=v),u.s.c>x&&(u.s.c=x),u.e.r<v&&(u.e.r=v),u.e.c<x&&(u.e.c=x),e[f][g]&&typeof e[f][g]=="object"&&!Array.isArray(e[f][g])&&!(e[f][g]instanceof Date))y=e[f][g];else if(Array.isArray(y.v)&&(y.f=e[f][g][1],y.v=y.v[0]),y.v===null)if(y.f)y.t="n";else if(r.nullError)y.t="e",y.v=0;else if(r.sheetStubs)y.t="z";else continue;else typeof y.v=="number"?y.t="n":typeof y.v=="boolean"?y.t="b":y.v instanceof Date?(y.z=r.dateNF||wr[14],r.cellDates?(y.t="d",y.w=vu(y.z,Ps(y.v))):(y.t="n",y.v=Ps(y.v),y.w=vu(y.z,y.v))):y.t="s";if(i)s[v]||(s[v]=[]),s[v][x]&&s[v][x].z&&(y.z=s[v][x].z),s[v][x]=y;else{var w=zn({c:x,r:v});s[w]&&s[w].z&&(y.z=s[w].z),s[w]=y}}}return u.s.c<1e7&&(s["!ref"]=Br(u)),s}function K0(n,e){return hV(null,n,e)}function Vme(n){return n.read_shift(4,"i")}function eo(n,e){return e||(e=be(4)),e.write_shift(4,n),e}function Ki(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function hi(n,e){var t=!1;return e==null&&(t=!0,e=be(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function Gme(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function Bme(n,e){return e||(e=be(4)),e.write_shift(2,0),e.write_shift(2,0),e}function rC(n,e){var t=n.l,r=n.read_shift(1),i=Ki(n),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=n.read_shift(4),l=0;l!=o;++l)s.push(Gme(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function Ume(n,e){var t=!1;return e==null&&(t=!0,e=be(15+4*n.t.length)),e.write_shift(1,0),hi(n.t,e),t?e.slice(0,e.l):e}var zme=rC;function $me(n,e){var t=!1;return e==null&&(t=!0,e=be(23+4*n.t.length)),e.write_shift(1,1),hi(n.t,e),e.write_shift(4,1),Bme({},e),t?e.slice(0,e.l):e}function ba(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function yd(n,e){return e==null&&(e=be(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function _d(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function xd(n,e){return e==null&&(e=be(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var Wme=Ki,dV=hi;function iC(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function _v(n,e){var t=!1;return e==null&&(t=!0,e=be(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var Hme=Ki,GI=iC,sC=_v;function fV(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?yv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):mh(e,0)>>2;return t?i/100:i}function gV(n,e){e==null&&(e=be(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function mV(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function Kme(n,e){return e||(e=be(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var vd=mV,Y0=Kme;function X0(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function td(n,e){return(e||be(8)).write_shift(8,n,"f")}function Yme(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=rpe[i];u&&(e.rgb=AO(u));break;case 2:e.rgb=AO([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function xv(n,e){if(e||(e=be(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Xme(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function qme(n,e){e||(e=be(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var pV=2,Bs=3,y_=11,vv=19,__=64,Zme=65,Qme=71,Jme=4108,epe=4126,Ei=80,pO={1:{n:"CodePage",t:pV},2:{n:"Category",t:Ei},3:{n:"PresentationFormat",t:Ei},4:{n:"ByteCount",t:Bs},5:{n:"LineCount",t:Bs},6:{n:"ParagraphCount",t:Bs},7:{n:"SlideCount",t:Bs},8:{n:"NoteCount",t:Bs},9:{n:"HiddenCount",t:Bs},10:{n:"MultimediaClipCount",t:Bs},11:{n:"ScaleCrop",t:y_},12:{n:"HeadingPairs",t:Jme},13:{n:"TitlesOfParts",t:epe},14:{n:"Manager",t:Ei},15:{n:"Company",t:Ei},16:{n:"LinksUpToDate",t:y_},17:{n:"CharacterCount",t:Bs},19:{n:"SharedDoc",t:y_},22:{n:"HyperlinksChanged",t:y_},23:{n:"AppVersion",t:Bs,p:"version"},24:{n:"DigSig",t:Zme},26:{n:"ContentType",t:Ei},27:{n:"ContentStatus",t:Ei},28:{n:"Language",t:Ei},29:{n:"Version",t:Ei},255:{},2147483648:{n:"Locale",t:vv},2147483651:{n:"Behavior",t:vv},1919054434:{}},yO={1:{n:"CodePage",t:pV},2:{n:"Title",t:Ei},3:{n:"Subject",t:Ei},4:{n:"Author",t:Ei},5:{n:"Keywords",t:Ei},6:{n:"Comments",t:Ei},7:{n:"Template",t:Ei},8:{n:"LastAuthor",t:Ei},9:{n:"RevNumber",t:Ei},10:{n:"EditTime",t:__},11:{n:"LastPrinted",t:__},12:{n:"CreatedDate",t:__},13:{n:"ModifiedDate",t:__},14:{n:"PageCount",t:Bs},15:{n:"WordCount",t:Bs},16:{n:"CharCount",t:Bs},17:{n:"Thumbnail",t:Qme},18:{n:"Application",t:Ei},19:{n:"DocSecurity",t:Bs},255:{},2147483648:{n:"Locale",t:vv},2147483651:{n:"Behavior",t:vv},1919054434:{}};function tpe(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var npe=tpe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rpe=ks(npe),k1={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ipe={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},x_={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function yV(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function _V(n,e){var t=gme(ipe),r=[],i;r[r.length]=zr,r[r.length]=tt("Types",null,{xmlns:ci.CT,"xmlns:xsd":ci.xsd,"xmlns:xsi":ci.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return tt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){n[l]&&n[l].length>0&&(i=n[l][0],r[r.length]=tt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:x_[l][e.bookType]||x_[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=tt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:x_[l][e.bookType]||x_[l].xlsx})})},o=function(l){(n[l]||[]).forEach(function(u){r[r.length]=tt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var xn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function xV(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function t0(n){var e=[zr,tt("Relationships",null,{xmlns:ci.RELS})];return Ri(n["!id"]).forEach(function(t){e[e.length]=tt("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function jn(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[xn.HLINK,xn.XPATH,xn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function spe(n){var e=[zr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function _O(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function ape(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function ope(n){var e=[zr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(_O(n[t][0],n[t][1])),e.push(ape("",n[t][0]));return e.push(_O("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function vV(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hv.version+"</meta:generator></office:meta></office:document-meta>"}var Mh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function VS(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=Bn(e),r[r.length]=t?tt(n,e,t):Ii(n,e))}function EV(n,e){var t=e||{},r=[zr,tt("cp:coreProperties",null,{"xmlns:cp":ci.CORE_PROPS,"xmlns:dc":ci.dc,"xmlns:dcterms":ci.dcterms,"xmlns:dcmitype":ci.dcmitype,"xmlns:xsi":ci.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&VS("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:VI(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&VS("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:VI(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=Mh.length;++s){var a=Mh[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&VS(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var n0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],wV=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function SV(n){var e=[],t=tt;return n||(n={}),n.Application="SheetJS",e[e.length]=zr,e[e.length]=tt("Properties",null,{xmlns:ci.EXT_PROPS,"xmlns:vt":ci.vt}),n0.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Bn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Bn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function TV(n){var e=[zr,tt("Properties",null,{xmlns:ci.CUST_PROPS,"xmlns:vt":ci.vt})];if(!n)return e.join("");var t=1;return Ri(n).forEach(function(i){++t,e[e.length]=tt("property",Ime(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Bn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var xO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function lpe(n,e){var t=[];return Ri(xO).map(function(r){for(var i=0;i<Mh.length;++i)if(Mh[i][1]==r)return Mh[i];for(i=0;i<n0.length;++i)if(n0[i][1]==r)return n0[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(Ii(xO[r[1]]||r[1],i))}}),tt("DocumentProperties",t.join(""),{xmlns:Hs.o})}function cpe(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&Ri(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<Mh.length;++a)if(s==Mh[a][1])return;for(a=0;a<n0.length;++a)if(s==n0[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(tt(aO(s),o,{"dt:dt":l}))}}),e&&Ri(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(tt(aO(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Hs.o+'">'+i.join("")+"</"+r+">"}function upe(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=be(8);return a.write_shift(4,r),a.write_shift(4,i),a}function vO(n,e){var t=be(4),r=be(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=be(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=upe(e);break;case 31:case 80:for(r=be(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return Ti([t,r])}var IV=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function hpe(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function EO(n,e,t){var r=be(8),i=[],s=[],a=8,o=0,l=be(8),u=be(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=be(8),u.write_shift(4,0),i.unshift(u);var h=[be(4)];for(h[0].write_shift(4,n.length),o=0;o<n.length;++o){var f=n[o][0];for(l=be(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);h.push(l)}l=Ti(h),s.unshift(l),a+=8+l.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(IV.indexOf(n[o][0])>-1||wV.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],y=0;if(e){y=+e[n[o][0]];var v=t[y];if(v.p=="version"&&typeof g=="string"){var x=g.split(".");g=(+x[0]<<16)+(+x[1]||0)}l=vO(v.t,g)}else{var w=hpe(g);w==-1&&(w=31,g=String(g)),l=vO(w,g)}s.push(l),u=be(8),u.write_shift(4,e?y:2+o),i.push(u),a+=8+l.length}var T=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,T),T+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),Ti([r].concat(i).concat(s))}function wO(n,e,t,r,i,s){var a=be(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,$n.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=EO(n,t,r);if(o.push(l),i){var u=EO(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return Ti(o)}function dpe(n,e){e||(e=be(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function fpe(n,e){return n.read_shift(e)===1}function Ji(n,e){return e||(e=be(2)),e.write_shift(2,+!!n),e}function AV(n){return n.read_shift(2,"u")}function pa(n,e){return e||(e=be(2)),e.write_shift(2,n),e}function bV(n,e,t){return t||(t=be(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function RV(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function gpe(n){var e=n.t||"",t=be(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=be(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return Ti(i)}function mpe(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function ppe(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):mpe(n,r,t)}function ype(n,e,t){if(t.biff>5)return ppe(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function CV(n,e,t){return t||(t=be(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function SO(n,e){e||(e=be(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function _pe(n){var e=be(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),SO(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&SO(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),t=0;t<r.length-3*l;++t)e.write_shift(1,r.charCodeAt(t+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function nd(n,e,t,r){return r||(r=be(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function xpe(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function vpe(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function PV(n,e){return e||(e=be(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function aC(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=be(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Epe(n,e){var t=!e||e.biff==8,r=be(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function wpe(n,e){var t=!e||e.biff>=8?2:1,r=be(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Spe(n,e){var t=be(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=gpe(n[i]);var s=Ti([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function Tpe(){var n=be(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function Ipe(n){var e=be(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Ape(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=be(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function bpe(n,e,t,r){var i=be(10);return nd(n,e,r,i),i.write_shift(4,t),i}function Rpe(n,e,t,r,i){var s=!i||i.biff==8,a=be(8+ +s+(1+s)*t.length);return nd(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function Cpe(n,e,t,r){var i=t&&t.biff==5;r||(r=be(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function Ppe(n,e){var t=e.biff==8||!e.biff?4:2,r=be(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function TO(n,e,t,r){var i=t&&t.biff==5;r||(r=be(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function kpe(n){var e=be(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Mpe(n,e,t,r,i,s){var a=be(8);return nd(n,e,r,a),bV(t,s,a),a}function Npe(n,e,t,r){var i=be(14);return nd(n,e,r,i),td(t,i),i}function Lpe(n,e,t){if(t.biff<8)return Ope(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(xpe(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function Ope(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=RV(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function Dpe(n){var e=be(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)PV(n[t],e);return e}function Fpe(n){var e=be(24),t=ui(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Ti([e,_pe(n[1])])}function jpe(n){var e=n[1].Tooltip,t=be(10+2*(e.length+1));t.write_shift(2,2048);var r=ui(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function Vpe(n){return n||(n=be(4)),n.write_shift(2,1),n.write_shift(2,1),n}function Gpe(n,e,t){if(!t.cellStyles)return Zo(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(u.level=l>>8&7),u}function Bpe(n,e){var t=be(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function Upe(n){for(var e=be(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function zpe(n,e,t){var r=be(15);return N1(r,n,e),r.write_shift(8,t,"f"),r}function $pe(n,e,t){var r=be(9);return N1(r,n,e),r.write_shift(2,t),r}var Wpe=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=XR({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var u=[],h=ed(1);switch(l.type){case"base64":h=Wa($l(o));break;case"binary":h=Wa(o);break;case"buffer":case"array":h=o;break}zs(h,0);var f=h.read_shift(1),g=!!(f&136),y=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:y=!0,g=!0;break;case 49:y=!0,g=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,w=521;f==2&&(x=h.read_shift(2)),h.l+=3,f!=2&&(x=h.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(w=h.read_shift(2));var T=h.read_shift(2),I=l.codepage||1252;f!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(I=n[h[h.l]]),h.l+=1,h.l+=2),v&&(h.l+=36);for(var b=[],N={},F=Math.min(h.length,f==2?521:w-10-(y?264:0)),W=v?32:11;h.l<F&&h[h.l]!=13;)switch(N={},N.name=dv.utils.decode(I,h.slice(h.l,h.l+W)).replace(/[\u0000\r\n].*$/g,""),h.l+=W,N.type=String.fromCharCode(h.read_shift(1)),f!=2&&!v&&(N.offset=h.read_shift(4)),N.len=h.read_shift(1),f==2&&(N.offset=h.read_shift(2)),N.dec=h.read_shift(1),N.name.length&&b.push(N),f!=2&&(h.l+=v?13:14),N.type){case"B":(!y||N.len!=8)&&l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(h[h.l]!==13&&(h.l=w-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=w;var M=0,C=0;for(u[0]=[],C=0;C!=b.length;++C)u[0][C]=b[C].name;for(;x-- >0;){if(h[h.l]===42){h.l+=T;continue}for(++h.l,u[++M]=[],C=0,C=0;C!=b.length;++C){var P=h.slice(h.l,h.l+b[C].len);h.l+=b[C].len,zs(P,0);var L=dv.utils.decode(I,P);switch(b[C].type){case"C":L.trim().length&&(u[M][C]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[M][C]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[M][C]=L;break;case"F":u[M][C]=parseFloat(L.trim());break;case"+":case"I":u[M][C]=v?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[M][C]=!0;break;case"N":case"F":u[M][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[M][C]="##MEMO##"+(v?parseInt(L.trim(),10):P.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[M][C]=+L||0);break;case"@":u[M][C]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":u[M][C]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":u[M][C]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[M][C]=-P.read_shift(-8,"f");break;case"B":if(y&&b[C].len==8){u[M][C]=P.read_shift(8,"f");break}case"G":case"P":P.l+=b[C].len;break;case"0":if(b[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[C].type)}}}if(f!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=b,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var h=K0(t(o,u),u);return h["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,h}function i(o,l){try{return pd(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&Cp(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var h=Rs(),f=Iv(o,{header:1,raw:!0,cellDates:!0}),g=f[0],y=f.slice(1),v=o["!cols"]||[],x=0,w=0,T=0,I=1;for(x=0;x<g.length;++x){if(((v[x]||{}).DBF||{}).name){g[x]=v[x].DBF.name,++T;continue}if(g[x]!=null){if(++T,typeof g[x]=="number"&&(g[x]=g[x].toString(10)),typeof g[x]!="string")throw new Error("DBF Invalid column name "+g[x]+" |"+typeof g[x]+"|");if(g.indexOf(g[x])!==x){for(w=0;w<1024;++w)if(g.indexOf(g[x]+"_"+w)==-1){g[x]+="_"+w;break}}}}var b=tr(o["!ref"]),N=[],F=[],W=[];for(x=0;x<=b.e.c-b.s.c;++x){var M="",C="",P=0,L=[];for(w=0;w<y.length;++w)y[w][x]!=null&&L.push(y[w][x]);if(L.length==0||g[x]==null){N[x]="?";continue}for(w=0;w<L.length;++w){switch(typeof L[w]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=L[w]instanceof Date?"D":"C";break;default:C="C"}P=Math.max(P,String(L[w]).length),M=M&&M!=C?"C":C}P>250&&(P=250),C=((v[x]||{}).DBF||{}).type,C=="C"&&v[x].DBF.len>P&&(P=v[x].DBF.len),M=="B"&&C=="N"&&(M="N",W[x]=v[x].DBF.dec,P=v[x].DBF.len),F[x]=M=="C"||C=="N"?P:s[M]||0,I+=F[x],N[x]=M}var O=h.next(32);for(O.write_shift(4,318902576),O.write_shift(4,y.length),O.write_shift(2,296+32*T),O.write_shift(2,I),x=0;x<4;++x)O.write_shift(4,0);for(O.write_shift(4,0|(+e[M7]||3)<<8),x=0,w=0;x<g.length;++x)if(g[x]!=null){var U=h.next(32),j=(g[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);U.write_shift(1,j,"sbcs"),U.write_shift(1,N[x]=="?"?"C":N[x],"sbcs"),U.write_shift(4,w),U.write_shift(1,F[x]||s[N[x]]||0),U.write_shift(1,W[x]||0),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(1,0),U.write_shift(4,0),U.write_shift(4,0),w+=F[x]||s[N[x]]||0}var xe=h.next(264);for(xe.write_shift(4,13),x=0;x<65;++x)xe.write_shift(4,0);for(x=0;x<y.length;++x){var Ce=h.next(I);for(Ce.write_shift(1,0),w=0;w<g.length;++w)if(g[w]!=null)switch(N[w]){case"L":Ce.write_shift(1,y[x][w]==null?63:y[x][w]?84:70);break;case"B":Ce.write_shift(8,y[x][w]||0,"f");break;case"N":var Ge="0";for(typeof y[x][w]=="number"&&(Ge=y[x][w].toFixed(W[w]||0)),T=0;T<F[w]-Ge.length;++T)Ce.write_shift(1,32);Ce.write_shift(1,Ge,"sbcs");break;case"D":y[x][w]?(Ce.write_shift(4,("0000"+y[x][w].getFullYear()).slice(-4),"sbcs"),Ce.write_shift(2,("00"+(y[x][w].getMonth()+1)).slice(-2),"sbcs"),Ce.write_shift(2,("00"+y[x][w].getDate()).slice(-2),"sbcs")):Ce.write_shift(8,"00000000","sbcs");break;case"C":var ke=String(y[x][w]!=null?y[x][w]:"").slice(0,F[w]);for(Ce.write_shift(1,ke,"sbcs"),T=0;T<F[w]-ke.length;++T)Ce.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}})(),Hpe=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ri(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,y){var v=n[y];return typeof v=="number"?YL(v):v},r=function(g,y,v){var x=y.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return x==59?g:YL(x)};n["|"]=254;function i(g,y){switch(y.type){case"base64":return s($l(g),y);case"binary":return s(g,y);case"buffer":return s(Tn&&Buffer.isBuffer(g)?g.toString("binary"):R1(g),y);case"array":return s($E(g),y)}throw new Error("Unrecognized type "+y.type)}function s(g,y){var v=g.split(/[\n\r]+/),x=-1,w=-1,T=0,I=0,b=[],N=[],F=null,W={},M=[],C=[],P=[],L=0,O;for(+y.codepage>=0&&Cp(+y.codepage);T!==v.length;++T){L=0;var U=v[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),j=U.replace(/;;/g,"\0").split(";").map(function(X){return X.replace(/\u0000/g,";")}),xe=j[0],Ce;if(U.length>0)switch(xe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":j[1].charAt(0)=="P"&&N.push(U.slice(3).replace(/;;/g,";"));break;case"C":var Ge=!1,ke=!1,ce=!1,Ie=!1,Te=-1,ie=-1;for(I=1;I<j.length;++I)switch(j[I].charAt(0)){case"A":break;case"X":w=parseInt(j[I].slice(1))-1,ke=!0;break;case"Y":for(x=parseInt(j[I].slice(1))-1,ke||(w=0),O=b.length;O<=x;++O)b[O]=[];break;case"K":Ce=j[I].slice(1),Ce.charAt(0)==='"'?Ce=Ce.slice(1,Ce.length-1):Ce==="TRUE"?Ce=!0:Ce==="FALSE"?Ce=!1:isNaN(Ol(Ce))?isNaN(kp(Ce).getDate())||(Ce=as(Ce)):(Ce=Ol(Ce),F!==null&&$7(F)&&(Ce=Y7(Ce))),Ge=!0;break;case"E":Ie=!0;var V=$1e(j[I].slice(1),{r:x,c:w});b[x][w]=[b[x][w],V];break;case"S":ce=!0,b[x][w]=[b[x][w],"S5S"];break;case"G":break;case"R":Te=parseInt(j[I].slice(1))-1;break;case"C":ie=parseInt(j[I].slice(1))-1;break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+U)}if(Ge&&(b[x][w]&&b[x][w].length==2?b[x][w][0]=Ce:b[x][w]=Ce,F=null),ce){if(Ie)throw new Error("SYLK shared formula cannot have own formula");var J=Te>-1&&b[Te][ie];if(!J||!J[1])throw new Error("SYLK shared formula cannot find base");b[x][w][1]=W1e(J[1],{r:x-Te,c:w-ie})}break;case"F":var te=0;for(I=1;I<j.length;++I)switch(j[I].charAt(0)){case"X":w=parseInt(j[I].slice(1))-1,++te;break;case"Y":for(x=parseInt(j[I].slice(1))-1,O=b.length;O<=x;++O)b[O]=[];break;case"M":L=parseInt(j[I].slice(1))/20;break;case"F":break;case"G":break;case"P":F=N[parseInt(j[I].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=j[I].slice(1).split(" "),O=parseInt(P[0],10);O<=parseInt(P[1],10);++O)L=parseInt(P[2],10),C[O-1]=L===0?{hidden:!0}:{wch:L},oC(C[O-1]);break;case"C":w=parseInt(j[I].slice(1))-1,C[w]||(C[w]={});break;case"R":x=parseInt(j[I].slice(1))-1,M[x]||(M[x]={}),L>0?(M[x].hpt=L,M[x].hpx=OV(L)):L===0&&(M[x].hidden=!0);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+U)}te<1&&(F=null);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+U)}}return M.length>0&&(W["!rows"]=M),C.length>0&&(W["!cols"]=C),y&&y.sheetRows&&(b=b.slice(0,y.sheetRows)),[b,W]}function a(g,y){var v=i(g,y),x=v[0],w=v[1],T=K0(x,y);return Ri(w).forEach(function(I){T[I]=w[I]}),T}function o(g,y){return pd(a(g,y),y)}function l(g,y,v,x){var w="C;Y"+(v+1)+";X"+(x+1)+";K";switch(g.t){case"n":w+=g.v||0,g.f&&!g.F&&(w+=";E"+cC(g.f,{r:v,c:x}));break;case"b":w+=g.v?"TRUE":"FALSE";break;case"e":w+=g.w||g.v;break;case"d":w+='"'+(g.w||g.v)+'"';break;case"s":w+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function u(g,y){y.forEach(function(v,x){var w="F;W"+(x+1)+" "+(x+1)+" ";v.hidden?w+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Ev(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=wv(v.wpx)),typeof v.wch=="number"&&(w+=Math.round(v.wch))),w.charAt(w.length-1)!=" "&&g.push(w)})}function h(g,y){y.forEach(function(v,x){var w="F;";v.hidden?w+="M0;":v.hpt?w+="M"+20*v.hpt+";":v.hpx&&(w+="M"+20*Sv(v.hpx)+";"),w.length>2&&g.push(w+"R"+(x+1))})}function f(g,y){var v=["ID;PWXL;N;E"],x=[],w=tr(g["!ref"]),T,I=Array.isArray(g),b=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),g["!cols"]&&u(v,g["!cols"]),g["!rows"]&&h(v,g["!rows"]),v.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var N=w.s.r;N<=w.e.r;++N)for(var F=w.s.c;F<=w.e.c;++F){var W=zn({r:N,c:F});T=I?(g[N]||[])[F]:g[W],!(!T||T.v==null&&(!T.f||T.F))&&x.push(l(T,g,N,F))}return v.join(b)+b+x.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:a,from_sheet:f}})(),Kpe=(function(){function n(s,a){switch(a.type){case"base64":return e($l(s),a);case"binary":return e(s,a);case"buffer":return e(Tn&&Buffer.isBuffer(s)?s.toString("binary"):R1(s),a);case"array":return e($E(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,h=0,f=[];h!==o.length;++h){if(o[h].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var g=o[h].trim().split(","),y=g[0],v=g[1];++h;for(var x=o[h]||"";(x.match(/["]/g)||[]).length&1&&h<o.length-1;)x+=`
`+o[++h];switch(x=x.trim(),+y){case-1:if(x==="BOT"){f[++l]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[l][u]=!0:x==="FALSE"?f[l][u]=!1:isNaN(Ol(v))?isNaN(kp(v).getDate())?f[l][u]=v:f[l][u]=as(v):f[l][u]=Ol(v),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[l][u++]=x!==""?x:null;break}if(x==="EOD")break}}return a&&a.sheetRows&&(f=f.slice(0,a.sheetRows)),f}function t(s,a){return K0(n(s,a),a)}function r(s,a){return pd(t(s,a),a)}var i=(function(){var s=function(l,u,h,f,g){l.push(u),l.push(h+","+f),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,u,h,f){l.push(u+","+h),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],h=tr(l["!ref"]),f,g=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,h.e.r-h.s.r+1,""),s(u,"TUPLES",0,h.e.c-h.s.c+1,""),s(u,"DATA",0,0,"");for(var y=h.s.r;y<=h.e.r;++y){a(u,-1,0,"BOT");for(var v=h.s.c;v<=h.e.c;++v){var x=zn({r:y,c:v});if(f=g?(l[y]||[])[v]:l[x],!f){a(u,1,0,"");continue}switch(f.t){case"n":var w=f.w;!w&&f.v!=null&&(w=f.v),w==null?f.f&&!f.F?a(u,1,0,"="+f.f):a(u,1,0,""):a(u,0,w,"V");break;case"b":a(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=vu(f.z||wr[14],Ps(as(f.v)))),a(u,0,f.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var T=`\r
`,I=u.join(T);return I}})();return{to_workbook:r,to_sheet:t,from_sheet:i}})(),kV=(function(){function n(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(f,g){for(var y=f.split(`
`),v=-1,x=-1,w=0,T=[];w!==y.length;++w){var I=y[w].trim().split(":");if(I[0]==="cell"){var b=ui(I[1]);if(T.length<=b.r)for(v=T.length;v<=b.r;++v)T[v]||(T[v]=[]);switch(v=b.r,x=b.c,I[2]){case"t":T[v][x]=n(I[3]);break;case"v":T[v][x]=+I[3];break;case"vtf":var N=I[I.length-1];case"vtc":switch(I[3]){case"nl":T[v][x]=!!+I[4];break;default:T[v][x]=+I[4];break}I[2]=="vtf"&&(T[v][x]=[T[v][x],N])}}}return g&&g.sheetRows&&(T=T.slice(0,g.sheetRows)),T}function r(f,g){return K0(t(f,g),g)}function i(f,g){return pd(r(f,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var g=[],y=[],v,x="",w=na(f["!ref"]),T=Array.isArray(f),I=w.s.r;I<=w.e.r;++I)for(var b=w.s.c;b<=w.e.c;++b)if(x=zn({r:I,c:b}),v=T?(f[I]||[])[b]:f[x],!(!v||v.v==null||v.t==="z")){switch(y=["cell",x,"t"],v.t){case"s":case"str":y.push(e(v.v));break;case"n":v.f?(y[2]="vtf",y[3]="n",y[4]=v.v,y[5]=e(v.f)):(y[2]="v",y[3]=v.v);break;case"b":y[2]="vt"+(v.f?"f":"c"),y[3]="nl",y[4]=v.v?"1":"0",y[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var N=Ps(as(v.v));y[2]="vtc",y[3]="nd",y[4]=""+N,y[5]=v.w||vu(v.z||wr[14],N);break;case"e":continue}g.push(y.join(":"))}return g.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function h(f){return[s,a,o,a,u(f),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:h}})(),Ype=(function(){function n(h,f,g,y,v){v.raw?f[g][y]=h:h===""||(h==="TRUE"?f[g][y]=!0:h==="FALSE"?f[g][y]=!1:isNaN(Ol(h))?isNaN(kp(h).getDate())?f[g][y]=h:f[g][y]=as(h):f[g][y]=Ol(h))}function e(h,f){var g=f||{},y=[];if(!h||h.length===0)return y;for(var v=h.split(/[\r\n]/),x=v.length-1;x>=0&&v[x].length===0;)--x;for(var w=10,T=0,I=0;I<=x;++I)T=v[I].indexOf(" "),T==-1?T=v[I].length:T++,w=Math.max(w,T);for(I=0;I<=x;++I){y[I]=[];var b=0;for(n(v[I].slice(0,w).trim(),y,I,b,g),b=1;b<=(v[I].length-w)/10+1;++b)n(v[I].slice(w+(b-1)*10,w+b*10).trim(),y,I,b,g)}return g.sheetRows&&(y=y.slice(0,g.sheetRows)),y}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(h){for(var f={},g=!1,y=0,v=0;y<h.length;++y)(v=h.charCodeAt(y))==34?g=!g:!g&&v in t&&(f[v]=(f[v]||0)+1);v=[];for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&v.push([f[y],y]);if(!v.length){f=r;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&v.push([f[y],y])}return v.sort(function(x,w){return x[0]-w[0]||r[x[1]]-r[w[1]]}),t[v.pop()[1]]||44}function s(h,f){var g=f||{},y="",v=g.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(y=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(y=h.charAt(4),h=h.slice(6)):y=i(h.slice(0,1024)):g&&g.FS?y=g.FS:y=i(h.slice(0,1024));var w=0,T=0,I=0,b=0,N=0,F=y.charCodeAt(0),W=!1,M=0,C=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var P=g.dateNF!=null?ume(g.dateNF):null;function L(){var O=h.slice(b,N),U={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)U.t="z";else if(g.raw)U.t="s",U.v=O;else if(O.trim().length===0)U.t="s",U.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(U.t="s",U.v=O.slice(2,-1).replace(/""/g,'"')):H1e(O)?(U.t="n",U.f=O.slice(1)):(U.t="s",U.v=O);else if(O=="TRUE")U.t="b",U.v=!0;else if(O=="FALSE")U.t="b",U.v=!1;else if(!isNaN(I=Ol(O)))U.t="n",g.cellText!==!1&&(U.w=O),U.v=I;else if(!isNaN(kp(O).getDate())||P&&O.match(P)){U.z=g.dateNF||wr[14];var j=0;P&&O.match(P)&&(O=hme(O,g.dateNF,O.match(P)||[]),j=1),g.cellDates?(U.t="d",U.v=as(O,j)):(U.t="n",U.v=Ps(as(O,j))),g.cellText!==!1&&(U.w=vu(U.z,U.v instanceof Date?Ps(U.v):U.v)),g.cellNF||delete U.z}else U.t="s",U.v=O;if(U.t=="z"||(g.dense?(v[w]||(v[w]=[]),v[w][T]=U):v[zn({c:T,r:w})]=U),b=N+1,C=h.charCodeAt(b),x.e.c<T&&(x.e.c=T),x.e.r<w&&(x.e.r=w),M==F)++T;else if(T=0,++w,g.sheetRows&&g.sheetRows<=w)return!0}e:for(;N<h.length;++N)switch(M=h.charCodeAt(N)){case 34:C===34&&(W=!W);break;case F:case 10:case 13:if(!W&&L())break e;break}return N-b>0&&L(),v["!ref"]=Br(x),v}function a(h,f){return!(f&&f.PRN)||f.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?s(h,f):K0(e(h,f),f)}function o(h,f){var g="",y=f.type=="string"?[0,0,0,0]:aEe(h,f);switch(f.type){case"base64":g=$l(h);break;case"binary":g=h;break;case"buffer":f.codepage==65001?g=h.toString("utf8"):f.codepage&&typeof dv<"u"||(g=Tn&&Buffer.isBuffer(h)?h.toString("binary"):R1(h));break;case"array":g=$E(h);break;case"string":g=h;break;default:throw new Error("Unrecognized type "+f.type)}return y[0]==239&&y[1]==187&&y[2]==191?g=jm(g.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?g=jm(g):f.type=="binary"&&typeof dv<"u",g.slice(0,19)=="socialcalc:version:"?kV.to_sheet(f.type=="string"?g:jm(g),f):a(g,f)}function l(h,f){return pd(o(h,f),f)}function u(h){for(var f=[],g=tr(h["!ref"]),y,v=Array.isArray(h),x=g.s.r;x<=g.e.r;++x){for(var w=[],T=g.s.c;T<=g.e.c;++T){var I=zn({r:x,c:T});if(y=v?(h[x]||[])[T]:h[I],!y||y.v==null){w.push("          ");continue}for(var b=(y.w||(Wl(y),y.w)||"").slice(0,10);b.length<10;)b+=" ";w.push(b+(T===0?" ":""))}f.push(w.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})(),IO=(function(){function n(V,J,te){if(V){zs(V,V.l||0);for(var X=te.Enum||Te;V.l<V.length;){var ue=V.read_shift(2),Me=X[ue]||X[65535],Fe=V.read_shift(2),Le=V.l+Fe,je=Me.f&&Me.f(V,Fe,te);if(V.l=Le,J(je,Me,ue))return}}}function e(V,J){switch(J.type){case"base64":return t(Wa($l(V)),J);case"binary":return t(Wa(V),J);case"buffer":case"array":return t(V,J)}throw"Unsupported type "+J.type}function t(V,J){if(!V)return V;var te=J||{},X=te.dense?[]:{},ue="Sheet1",Me="",Fe=0,Le={},je=[],qt=[],Ye={s:{r:0,c:0},e:{r:0,c:0}},Zt=te.sheetRows||0;if(V[2]==0&&(V[3]==8||V[3]==9)&&V.length>=16&&V[14]==5&&V[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(V[2]==2)te.Enum=Te,n(V,function(Oe,bn,$t){switch($t){case 0:te.vers=Oe,Oe>=4096&&(te.qpro=!0);break;case 6:Ye=Oe;break;case 204:Oe&&(Me=Oe);break;case 222:Me=Oe;break;case 15:case 51:te.qpro||(Oe[1].v=Oe[1].v.slice(1));case 13:case 14:case 16:$t==14&&(Oe[2]&112)==112&&(Oe[2]&15)>1&&(Oe[2]&15)<15&&(Oe[1].z=te.dateNF||wr[14],te.cellDates&&(Oe[1].t="d",Oe[1].v=Y7(Oe[1].v))),te.qpro&&Oe[3]>Fe&&(X["!ref"]=Br(Ye),Le[ue]=X,je.push(ue),X=te.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Fe=Oe[3],ue=Me||"Sheet"+(Fe+1),Me="");var Xt=te.dense?(X[Oe[0].r]||[])[Oe[0].c]:X[zn(Oe[0])];if(Xt){Xt.t=Oe[1].t,Xt.v=Oe[1].v,Oe[1].z!=null&&(Xt.z=Oe[1].z),Oe[1].f!=null&&(Xt.f=Oe[1].f);break}te.dense?(X[Oe[0].r]||(X[Oe[0].r]=[]),X[Oe[0].r][Oe[0].c]=Oe[1]):X[zn(Oe[0])]=Oe[1];break}},te);else if(V[2]==26||V[2]==14)te.Enum=ie,V[2]==14&&(te.qpro=!0,V.l=0),n(V,function(Oe,bn,$t){switch($t){case 204:ue=Oe;break;case 22:Oe[1].v=Oe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Oe[3]>Fe&&(X["!ref"]=Br(Ye),Le[ue]=X,je.push(ue),X=te.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Fe=Oe[3],ue="Sheet"+(Fe+1)),Zt>0&&Oe[0].r>=Zt)break;te.dense?(X[Oe[0].r]||(X[Oe[0].r]=[]),X[Oe[0].r][Oe[0].c]=Oe[1]):X[zn(Oe[0])]=Oe[1],Ye.e.c<Oe[0].c&&(Ye.e.c=Oe[0].c),Ye.e.r<Oe[0].r&&(Ye.e.r=Oe[0].r);break;case 27:Oe[14e3]&&(qt[Oe[14e3][0]]=Oe[14e3][1]);break;case 1537:qt[Oe[0]]=Oe[1],Oe[0]==Fe&&(ue=Oe[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+V[2]);if(X["!ref"]=Br(Ye),Le[Me||ue]=X,je.push(Me||ue),!qt.length)return{SheetNames:je,Sheets:Le};for(var Nt={},at=[],yt=0;yt<qt.length;++yt)Le[je[yt]]?(at.push(qt[yt]||je[yt]),Nt[qt[yt]]=Le[qt[yt]]||Le[je[yt]]):(at.push(qt[yt]),Nt[qt[yt]]={"!ref":"A1"});return{SheetNames:at,Sheets:Nt}}function r(V,J){var te=J||{};if(+te.codepage>=0&&Cp(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var X=Rs(),ue=tr(V["!ref"]),Me=Array.isArray(V),Fe=[];nt(X,0,s(1030)),nt(X,6,l(ue));for(var Le=Math.min(ue.e.r,8191),je=ue.s.r;je<=Le;++je)for(var qt=bi(je),Ye=ue.s.c;Ye<=ue.e.c;++Ye){je===ue.s.r&&(Fe[Ye]=Hi(Ye));var Zt=Fe[Ye]+qt,Nt=Me?(V[je]||[])[Ye]:V[Zt];if(!(!Nt||Nt.t=="z"))if(Nt.t=="n")(Nt.v|0)==Nt.v&&Nt.v>=-32768&&Nt.v<=32767?nt(X,13,y(je,Ye,Nt.v)):nt(X,14,x(je,Ye,Nt.v));else{var at=Wl(Nt);nt(X,15,f(je,Ye,at.slice(0,239)))}}return nt(X,1),X.end()}function i(V,J){var te=J||{};if(+te.codepage>=0&&Cp(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var X=Rs();nt(X,0,a(V));for(var ue=0,Me=0;ue<V.SheetNames.length;++ue)(V.Sheets[V.SheetNames[ue]]||{})["!ref"]&&nt(X,27,Ie(V.SheetNames[ue],Me++));var Fe=0;for(ue=0;ue<V.SheetNames.length;++ue){var Le=V.Sheets[V.SheetNames[ue]];if(!(!Le||!Le["!ref"])){for(var je=tr(Le["!ref"]),qt=Array.isArray(Le),Ye=[],Zt=Math.min(je.e.r,8191),Nt=je.s.r;Nt<=Zt;++Nt)for(var at=bi(Nt),yt=je.s.c;yt<=je.e.c;++yt){Nt===je.s.r&&(Ye[yt]=Hi(yt));var Oe=Ye[yt]+at,bn=qt?(Le[Nt]||[])[yt]:Le[Oe];if(!(!bn||bn.t=="z"))if(bn.t=="n")nt(X,23,L(Nt,yt,Fe,bn.v));else{var $t=Wl(bn);nt(X,22,M(Nt,yt,Fe,$t.slice(0,239)))}}++Fe}}return nt(X,1),X.end()}function s(V){var J=be(2);return J.write_shift(2,V),J}function a(V){var J=be(26);J.write_shift(2,4096),J.write_shift(2,4),J.write_shift(4,0);for(var te=0,X=0,ue=0,Me=0;Me<V.SheetNames.length;++Me){var Fe=V.SheetNames[Me],Le=V.Sheets[Fe];if(!(!Le||!Le["!ref"])){++ue;var je=na(Le["!ref"]);te<je.e.r&&(te=je.e.r),X<je.e.c&&(X=je.e.c)}}return te>8191&&(te=8191),J.write_shift(2,te),J.write_shift(1,ue),J.write_shift(1,X),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(1,1),J.write_shift(1,2),J.write_shift(4,0),J.write_shift(4,0),J}function o(V,J,te){var X={s:{c:0,r:0},e:{c:0,r:0}};return J==8&&te.qpro?(X.s.c=V.read_shift(1),V.l++,X.s.r=V.read_shift(2),X.e.c=V.read_shift(1),V.l++,X.e.r=V.read_shift(2),X):(X.s.c=V.read_shift(2),X.s.r=V.read_shift(2),J==12&&te.qpro&&(V.l+=2),X.e.c=V.read_shift(2),X.e.r=V.read_shift(2),J==12&&te.qpro&&(V.l+=2),X.s.c==65535&&(X.s.c=X.e.c=X.s.r=X.e.r=0),X)}function l(V){var J=be(8);return J.write_shift(2,V.s.c),J.write_shift(2,V.s.r),J.write_shift(2,V.e.c),J.write_shift(2,V.e.r),J}function u(V,J,te){var X=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(X[0].c=V.read_shift(1),X[3]=V.read_shift(1),X[0].r=V.read_shift(2),V.l+=2):(X[2]=V.read_shift(1),X[0].c=V.read_shift(2),X[0].r=V.read_shift(2)),X}function h(V,J,te){var X=V.l+J,ue=u(V,J,te);if(ue[1].t="s",te.vers==20768){V.l++;var Me=V.read_shift(1);return ue[1].v=V.read_shift(Me,"utf8"),ue}return te.qpro&&V.l++,ue[1].v=V.read_shift(X-V.l,"cstr"),ue}function f(V,J,te){var X=be(7+te.length);X.write_shift(1,255),X.write_shift(2,J),X.write_shift(2,V),X.write_shift(1,39);for(var ue=0;ue<X.length;++ue){var Me=te.charCodeAt(ue);X.write_shift(1,Me>=128?95:Me)}return X.write_shift(1,0),X}function g(V,J,te){var X=u(V,J,te);return X[1].v=V.read_shift(2,"i"),X}function y(V,J,te){var X=be(7);return X.write_shift(1,255),X.write_shift(2,J),X.write_shift(2,V),X.write_shift(2,te,"i"),X}function v(V,J,te){var X=u(V,J,te);return X[1].v=V.read_shift(8,"f"),X}function x(V,J,te){var X=be(13);return X.write_shift(1,255),X.write_shift(2,J),X.write_shift(2,V),X.write_shift(8,te,"f"),X}function w(V,J,te){var X=V.l+J,ue=u(V,J,te);if(ue[1].v=V.read_shift(8,"f"),te.qpro)V.l=X;else{var Me=V.read_shift(2);N(V.slice(V.l,V.l+Me),ue),V.l+=Me}return ue}function T(V,J,te){var X=J&32768;return J&=-32769,J=(X?V:0)+(J>=8192?J-16384:J),(X?"":"$")+(te?Hi(J):bi(J))}var I={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(V,J){zs(V,0);for(var te=[],X=0,ue="",Me="",Fe="",Le="";V.l<V.length;){var je=V[V.l++];switch(je){case 0:te.push(V.read_shift(8,"f"));break;case 1:Me=T(J[0].c,V.read_shift(2),!0),ue=T(J[0].r,V.read_shift(2),!1),te.push(Me+ue);break;case 2:{var qt=T(J[0].c,V.read_shift(2),!0),Ye=T(J[0].r,V.read_shift(2),!1);Me=T(J[0].c,V.read_shift(2),!0),ue=T(J[0].r,V.read_shift(2),!1),te.push(qt+Ye+":"+Me+ue)}break;case 3:if(V.l<V.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(V.read_shift(2));break;case 6:{for(var Zt="";je=V[V.l++];)Zt+=String.fromCharCode(je);te.push('"'+Zt.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:Le=te.pop(),Fe=te.pop(),te.push(["AND","OR"][je-20]+"("+Fe+","+Le+")");break;default:if(je<32&&b[je])Le=te.pop(),Fe=te.pop(),te.push(Fe+b[je]+Le);else if(I[je]){if(X=I[je][1],X==69&&(X=V[V.l++]),X>te.length){console.error("WK1 bad formula parse 0x"+je.toString(16)+":|"+te.join("|")+"|");return}var Nt=te.slice(-X);te.length-=X,te.push(I[je][0]+"("+Nt.join(",")+")")}else return je<=7?console.error("WK1 invalid opcode "+je.toString(16)):je<=24?console.error("WK1 unsupported op "+je.toString(16)):je<=30?console.error("WK1 invalid opcode "+je.toString(16)):je<=115?console.error("WK1 unsupported function opcode "+je.toString(16)):console.error("WK1 unrecognized opcode "+je.toString(16))}}te.length==1?J[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function F(V){var J=[{c:0,r:0},{t:"n",v:0},0];return J[0].r=V.read_shift(2),J[3]=V[V.l++],J[0].c=V[V.l++],J}function W(V,J){var te=F(V);return te[1].t="s",te[1].v=V.read_shift(J-4,"cstr"),te}function M(V,J,te,X){var ue=be(6+X.length);ue.write_shift(2,V),ue.write_shift(1,te),ue.write_shift(1,J),ue.write_shift(1,39);for(var Me=0;Me<X.length;++Me){var Fe=X.charCodeAt(Me);ue.write_shift(1,Fe>=128?95:Fe)}return ue.write_shift(1,0),ue}function C(V,J){var te=F(V);te[1].v=V.read_shift(2);var X=te[1].v>>1;if(te[1].v&1)switch(X&7){case 0:X=(X>>3)*5e3;break;case 1:X=(X>>3)*500;break;case 2:X=(X>>3)/20;break;case 3:X=(X>>3)/200;break;case 4:X=(X>>3)/2e3;break;case 5:X=(X>>3)/2e4;break;case 6:X=(X>>3)/16;break;case 7:X=(X>>3)/64;break}return te[1].v=X,te}function P(V,J){var te=F(V),X=V.read_shift(4),ue=V.read_shift(4),Me=V.read_shift(2);if(Me==65535)return X===0&&ue===3221225472?(te[1].t="e",te[1].v=15):X===0&&ue===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var Fe=Me&32768;return Me=(Me&32767)-16446,te[1].v=(1-Fe*2)*(ue*Math.pow(2,Me+32)+X*Math.pow(2,Me)),te}function L(V,J,te,X){var ue=be(14);if(ue.write_shift(2,V),ue.write_shift(1,te),ue.write_shift(1,J),X==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var Me=0,Fe=0,Le=0,je=0;return X<0&&(Me=1,X=-X),Fe=Math.log2(X)|0,X/=Math.pow(2,Fe-31),je=X>>>0,(je&2147483648)==0&&(X/=2,++Fe,je=X>>>0),X-=je,je|=2147483648,je>>>=0,X*=Math.pow(2,32),Le=X>>>0,ue.write_shift(4,Le),ue.write_shift(4,je),Fe+=16383+(Me?32768:0),ue.write_shift(2,Fe),ue}function O(V,J){var te=P(V);return V.l+=J-14,te}function U(V,J){var te=F(V),X=V.read_shift(4);return te[1].v=X>>6,te}function j(V,J){var te=F(V),X=V.read_shift(8,"f");return te[1].v=X,te}function xe(V,J){var te=j(V);return V.l+=J-10,te}function Ce(V,J){return V[V.l+J-1]==0?V.read_shift(J,"cstr"):""}function Ge(V,J){var te=V[V.l++];te>J-1&&(te=J-1);for(var X="";X.length<te;)X+=String.fromCharCode(V[V.l++]);return X}function ke(V,J,te){if(!(!te.qpro||J<21)){var X=V.read_shift(1);V.l+=17,V.l+=1,V.l+=2;var ue=V.read_shift(J-21,"cstr");return[X,ue]}}function ce(V,J){for(var te={},X=V.l+J;V.l<X;){var ue=V.read_shift(2);if(ue==14e3){for(te[ue]=[0,""],te[ue][0]=V.read_shift(2);V[V.l];)te[ue][1]+=String.fromCharCode(V[V.l]),V.l++;V.l++}}return te}function Ie(V,J){var te=be(5+V.length);te.write_shift(2,14e3),te.write_shift(2,J);for(var X=0;X<V.length;++X){var ue=V.charCodeAt(X);te[te.l++]=ue>127?95:ue}return te[te.l++]=0,te}var Te={0:{n:"BOF",f:AV},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ce},222:{n:"SHEETNAMELP",f:Ge},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:W},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:U},38:{n:"??"},39:{n:"NUMBER27",f:j},40:{n:"FORMULA28",f:xe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ce},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ke},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),Xpe=/^\s|\s$|[\t\n\r]/;function MV(n,e){if(!e.bookSST)return"";var t=[zr];t[t.length]=tt("sst",null,{xmlns:H0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Xpe)&&(s+=' xml:space="preserve"'),s+=">"+Bn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function qpe(n){return[n.read_shift(4),n.read_shift(4)]}function Zpe(n,e){return e||(e=be(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var Qpe=Ume;function Jpe(n){var e=Rs();Ve(e,159,Zpe(n));for(var t=0;t<n.length;++t)Ve(e,19,Qpe(n[t]));return Ve(e,160),e.end()}function e1e(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function NV(n){var e=0,t,r=e1e(n),i=r.length+1,s,a,o,l,u;for(t=ed(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var t1e=(function(){function n(i,s){switch(s.type){case"base64":return e($l(i),s);case"binary":return e(i,s);case"buffer":return e(Tn&&Buffer.isBuffer(i)?i.toString("binary"):R1(i),s);case"array":return e($E(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(h,f){Array.isArray(o)&&(o[f]=[]);for(var g=/\\\w+\b/g,y=0,v,x=-1;v=g.exec(h);){switch(v[0]){case"\\cell":var w=h.slice(y,g.lastIndex-v[0].length);if(w[0]==" "&&(w=w.slice(1)),++x,w.length){var T={v:w,t:"s"};Array.isArray(o)?o[f][x]=T:o[zn({r:f,c:x})]=T}break}y=g.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=Br(u),o}function t(i,s){return pd(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=tr(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var h=a.s.c;h<=a.e.c;++h)s.push("\\cellx"+(h+1));for(s.push("\\pard\\intbl"),h=a.s.c;h<=a.e.c;++h){var f=zn({r:u,c:h});o=l?(i[u]||[])[h]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Wl(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function AO(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var n1e=6,Dl=n1e;function Ev(n){return Math.floor((n+Math.round(128/Dl)/256)*Dl)}function wv(n){return Math.floor((n-5)/Dl*100+.5)/100}function BI(n){return Math.round((n*Dl+5)/Dl*256)/256}function oC(n){n.width?(n.wpx=Ev(n.width),n.wch=wv(n.wpx),n.MDW=Dl):n.wpx?(n.wch=wv(n.wpx),n.width=BI(n.wch),n.MDW=Dl):typeof n.wch=="number"&&(n.width=BI(n.wch),n.wpx=Ev(n.width),n.MDW=Dl),n.customWidth&&delete n.customWidth}var r1e=96,LV=r1e;function Sv(n){return n*96/LV}function OV(n){return n*LV/96}function i1e(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=tt("numFmt",null,{numFmtId:r,formatCode:Bn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=tt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function s1e(n){var e=[];return e[e.length]=tt("cellXfs",null),n.forEach(function(t){e[e.length]=tt("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=tt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function DV(n,e){var t=[zr,tt("styleSheet",null,{xmlns:H0[0],"xmlns:vt":ci.vt})],r;return n.SSF&&(r=i1e(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=s1e(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function a1e(n,e){var t=n.read_shift(2),r=Ki(n);return[t,r]}function o1e(n,e,t){t||(t=be(6+4*e.length)),t.write_shift(2,n),hi(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function l1e(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=Xme(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=Yme(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Ki(n),r}function c1e(n,e){e||(e=be(153)),e.write_shift(2,n.sz*20),qme(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),xv(n.color,e);var r=0;return r=2,e.write_shift(1,r),hi(n.name,e),e.length>e.l?e.slice(0,e.l):e}var u1e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],GS,h1e=Zo;function bO(n,e){e||(e=be(84)),GS||(GS=XR(u1e));var t=GS[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(xv({auto:1},e),xv({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function d1e(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function FV(n,e,t){t||(t=be(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Kg(n,e){return e||(e=be(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var f1e=Zo;function g1e(n,e){return e||(e=be(51)),e.write_shift(1,0),Kg(null,e),Kg(null,e),Kg(null,e),Kg(null,e),Kg(null,e),e.length>e.l?e.slice(0,e.l):e}function m1e(n,e){return e||(e=be(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),_v(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function p1e(n,e,t){var r=be(2052);return r.write_shift(4,n),_v(e,r),_v(t,r),r.length>r.l?r.slice(0,r.l):r}function y1e(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Ve(n,615,eo(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Ve(n,44,o1e(i,e[i]))}),Ve(n,616))}}function _1e(n){var e=1;Ve(n,611,eo(e)),Ve(n,43,c1e({sz:12,color:{theme:1},name:"Calibri",family:2})),Ve(n,612)}function x1e(n){var e=2;Ve(n,603,eo(e)),Ve(n,45,bO({patternType:"none"})),Ve(n,45,bO({patternType:"gray125"})),Ve(n,604)}function v1e(n){var e=1;Ve(n,613,eo(e)),Ve(n,46,g1e()),Ve(n,614)}function E1e(n){var e=1;Ve(n,626,eo(e)),Ve(n,47,FV({numFmtId:0},65535)),Ve(n,627)}function w1e(n,e){Ve(n,617,eo(e.length)),e.forEach(function(t){Ve(n,47,FV(t,0))}),Ve(n,618)}function S1e(n){var e=1;Ve(n,619,eo(e)),Ve(n,48,m1e({xfId:0,name:"Normal"})),Ve(n,620)}function T1e(n){var e=0;Ve(n,505,eo(e)),Ve(n,506)}function I1e(n){var e=0;Ve(n,508,p1e(e,"TableStyleMedium9","PivotStyleMedium4")),Ve(n,509)}function A1e(n,e){var t=Rs();return Ve(t,278),y1e(t,n.SSF),_1e(t),x1e(t),v1e(t),E1e(t),w1e(t,e.cellXfs),S1e(t),T1e(t),I1e(t),Ve(t,279),t.end()}function jV(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[zr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function b1e(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:Ki(n)}}function R1e(n){var e=be(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),hi(n.name,e),e.slice(0,e.l)}function C1e(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function P1e(n){var e=be(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function k1e(n,e){var t=be(8+2*e.length);return t.write_shift(4,n),hi(e,t),t.slice(0,t.l)}function M1e(n){return n.l+=4,n.read_shift(4)!=0}function N1e(n,e){var t=be(8);return t.write_shift(4,n),t.write_shift(4,1),t}function L1e(){var n=Rs();return Ve(n,332),Ve(n,334,eo(1)),Ve(n,335,R1e({name:"XLDAPR",version:12e4,flags:3496657072})),Ve(n,336),Ve(n,339,k1e(1,"XLDAPR")),Ve(n,52),Ve(n,35,eo(514)),Ve(n,4096,eo(0)),Ve(n,4097,pa(1)),Ve(n,36),Ve(n,53),Ve(n,340),Ve(n,337,N1e(1)),Ve(n,51,P1e([[1,0]])),Ve(n,338),Ve(n,333),n.end()}function VV(){var n=[zr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function O1e(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=zn(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Vf=1024;function GV(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[tt("xml",null,{"xmlns:v":Hs.v,"xmlns:o":Hs.o,"xmlns:x":Hs.x,"xmlns:mv":Hs.mv}).replace(/\/>/,">"),tt("o:shapelayout",tt("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),tt("v:shapetype",[tt("v:stroke",null,{joinstyle:"miter"}),tt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];Vf<n*1e3;)Vf+=1e3;return e.forEach(function(s){var a=ui(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?tt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=tt("v:fill",l,o),h={on:"t",obscured:"t"};++Vf,i=i.concat(["<v:shape"+Np({id:"_x0000_s"+Vf,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,tt("v:shadow",null,h),tt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ii("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Ii("x:AutoFill","False"),Ii("x:Row",String(a.r)),Ii("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function BV(n){var e=[zr,tt("comments",null,{xmlns:H0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=Bn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=t.indexOf(Bn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Ii("t",Bn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(Ii("t",Bn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function D1e(n,e,t){var r=[zr,tt("ThreadedComments",null,{xmlns:ci.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(tt("threadedComment",Ii("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function F1e(n){var e=[zr,tt("personList",null,{xmlns:ci.TCMNT,"xmlns:x":H0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(tt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function j1e(n){var e={};e.iauthor=n.read_shift(4);var t=vd(n);return e.rfx=t.s,e.ref=zn(t.s),n.l+=16,e}function V1e(n,e){return e==null&&(e=be(36)),e.write_shift(4,n[1].iauthor),Y0(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var G1e=Ki;function B1e(n){return hi(n.slice(0,54))}function U1e(n){var e=Rs(),t=[];return Ve(e,628),Ve(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Ve(e,632,B1e(i.a)))})}),Ve(e,631),Ve(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:ui(r[0]),e:ui(r[0])};Ve(e,635,V1e([s,i])),i.t&&i.t.length>0&&Ve(e,637,$me(i)),Ve(e,636),delete i.iauthor})}),Ve(e,634),Ve(e,629),e.end()}function z1e(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&$n.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var UV=["xlsb","xlsm","xlam","biff8","xla"],$1e=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,h=a.length>0?parseInt(a,10)|0:0;return o?h+=e.c:--h,l?u+=e.r:--u,i+(o?"":"$")+Hi(h)+(l?"":"$")+bi(u)}return function(i,s){return e=s,i.replace(n,t)}})(),lC=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,cC=(function(){return function(e,t){return e.replace(lC,function(r,i,s,a,o,l){var u=nC(a)-(s?0:t.c),h=tC(l)-(o?0:t.r),f=h==0?"":o?h+1:"["+h+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+f+"C"+g})}})();function W1e(n,e){return n.replace(lC,function(t,r,i,s,a,o){return r+(i=="$"?i+s:Hi(nC(s)+e.c))+(a=="$"?a+o:bi(tC(o)+e.r))})}function H1e(n){return n.length!=1}function Fr(n){n.l+=1}function Eu(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function zV(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return $V(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=Eu(n),o=Eu(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function $V(n){var e=Eu(n),t=Eu(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function K1e(n,e,t){if(t.biff<8)return $V(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=Eu(n),a=Eu(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function WV(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return Y1e(n);var r=n.read_shift(t&&t.biff==12?4:2),i=Eu(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function Y1e(n){var e=Eu(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function X1e(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function q1e(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return Z1e(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function Z1e(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function Q1e(n,e,t){var r=(n[n.l++]&96)>>5,i=zV(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function J1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=zV(n,s,t);return[r,i,a]}function eye(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function tye(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function nye(n,e,t){var r=(n[n.l++]&96)>>5,i=K1e(n,e-1,t);return[r,i]}function rye(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function RO(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function iye(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function sye(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function aye(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function oye(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function lye(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function HV(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function cye(n){return n.read_shift(2),HV(n)}function uye(n){return n.read_shift(2),HV(n)}function hye(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=WV(n,0,t);return[r,i]}function dye(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=q1e(n,0,t);return[r,i]}function fye(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=WV(n,0,t);return[r,i,s]}function gye(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[g_e[i],XV[i],r]}function mye(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:pye(n);return[i,(s[0]===0?XV:f_e)[s[1]]]}function pye(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function yye(n,e,t){n.l+=t&&t.biff==2?3:4}function _ye(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function xye(n){return n.l++,k1[n.read_shift(1)]}function vye(n){return n.l++,n.read_shift(2)}function Eye(n){return n.l++,n.read_shift(1)!==0}function wye(n){return n.l++,X0(n)}function Sye(n,e,t){return n.l++,RV(n,e-1,t)}function Tye(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=fpe(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=k1[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=X0(n);break;case 2:t[1]=ype(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function Iye(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?vd:vpe)(n));return i}function Aye(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=Tye(n,t.biff);return a}function bye(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function Rye(n,e,t){if(t.biff==5)return Cye(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function Cye(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function Pye(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function kye(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Mye(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function Nye(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var Lye=Zo,Oye=Zo,Dye=Zo;function M1(n,e,t){return n.l+=2,[X1e(n)]}function uC(n){return n.l+=6,[]}var Fye=M1,jye=uC,Vye=uC,Gye=M1;function KV(n){return n.l+=2,[AV(n),n.read_shift(2)&1]}var Bye=M1,Uye=KV,zye=uC,$ye=M1,Wye=M1,Hye=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Kye(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=Hye[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function Yye(n){return n.l+=2,[n.read_shift(4)]}function Xye(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function qye(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function Zye(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function Qye(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function Jye(n){return n.l+=4,[0,0]}var CO={1:{n:"PtgExp",f:_ye},2:{n:"PtgTbl",f:Dye},3:{n:"PtgAdd",f:Fr},4:{n:"PtgSub",f:Fr},5:{n:"PtgMul",f:Fr},6:{n:"PtgDiv",f:Fr},7:{n:"PtgPower",f:Fr},8:{n:"PtgConcat",f:Fr},9:{n:"PtgLt",f:Fr},10:{n:"PtgLe",f:Fr},11:{n:"PtgEq",f:Fr},12:{n:"PtgGe",f:Fr},13:{n:"PtgGt",f:Fr},14:{n:"PtgNe",f:Fr},15:{n:"PtgIsect",f:Fr},16:{n:"PtgUnion",f:Fr},17:{n:"PtgRange",f:Fr},18:{n:"PtgUplus",f:Fr},19:{n:"PtgUminus",f:Fr},20:{n:"PtgPercent",f:Fr},21:{n:"PtgParen",f:Fr},22:{n:"PtgMissArg",f:Fr},23:{n:"PtgStr",f:Sye},26:{n:"PtgSheet",f:Xye},27:{n:"PtgEndSheet",f:qye},28:{n:"PtgErr",f:xye},29:{n:"PtgBool",f:Eye},30:{n:"PtgInt",f:vye},31:{n:"PtgNum",f:wye},32:{n:"PtgArray",f:rye},33:{n:"PtgFunc",f:gye},34:{n:"PtgFuncVar",f:mye},35:{n:"PtgName",f:bye},36:{n:"PtgRef",f:hye},37:{n:"PtgArea",f:Q1e},38:{n:"PtgMemArea",f:Pye},39:{n:"PtgMemErr",f:Lye},40:{n:"PtgMemNoMem",f:Oye},41:{n:"PtgMemFunc",f:kye},42:{n:"PtgRefErr",f:Mye},43:{n:"PtgAreaErr",f:eye},44:{n:"PtgRefN",f:dye},45:{n:"PtgAreaN",f:nye},46:{n:"PtgMemAreaN",f:Zye},47:{n:"PtgMemNoMemN",f:Qye},57:{n:"PtgNameX",f:Rye},58:{n:"PtgRef3d",f:fye},59:{n:"PtgArea3d",f:J1e},60:{n:"PtgRefErr3d",f:Nye},61:{n:"PtgAreaErr3d",f:tye},255:{}},e_e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},t_e={1:{n:"PtgElfLel",f:KV},2:{n:"PtgElfRw",f:$ye},3:{n:"PtgElfCol",f:Fye},6:{n:"PtgElfRwV",f:Wye},7:{n:"PtgElfColV",f:Gye},10:{n:"PtgElfRadical",f:Bye},11:{n:"PtgElfRadicalS",f:zye},13:{n:"PtgElfColS",f:jye},15:{n:"PtgElfColSV",f:Vye},16:{n:"PtgElfRadicalLel",f:Uye},25:{n:"PtgList",f:Kye},29:{n:"PtgSxName",f:Yye},255:{}},n_e={0:{n:"PtgAttrNoop",f:Jye},1:{n:"PtgAttrSemi",f:lye},2:{n:"PtgAttrIf",f:aye},4:{n:"PtgAttrChoose",f:iye},8:{n:"PtgAttrGoto",f:sye},16:{n:"PtgAttrSum",f:yye},32:{n:"PtgAttrBaxcel",f:RO},33:{n:"PtgAttrBaxcel",f:RO},64:{n:"PtgAttrSpace",f:cye},65:{n:"PtgAttrSpaceSemi",f:uye},128:{n:"PtgAttrIfError",f:oye},255:{}};function r_e(n,e,t,r){if(r.biff<8)return Zo(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=Aye(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=Iye(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(Zo(n,e)),s}function i_e(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=CO[s]||CO[e_e[s]],(s===24||s===25)&&(i=(s===24?t_e:n_e)[n[n.l+1]]),!i||!i.f?Zo(n,e):a.push([i.n,i.f(n,e,t)]);return a}function s_e(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var a_e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function o_e(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function YV(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function PO(n,e,t){var r=YV(n,e,t);return r=="#REF"?r:o_e(r,t)}function k0(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,h,f=0,g=0,y,v="";if(!n[0]||!n[0][0])return"";for(var x=-1,w="",T=0,I=n[0].length;T<I;++T){var b=n[0][T];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),x>=0){switch(n[0][x][1][0]){case 0:w=vr(" ",n[0][x][1][1]);break;case 1:w=vr("\r",n[0][x][1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][x][1][0])}u=u+w,x=-1}o.push(u+a_e[b[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=Gm(b[1][1],a,i),o.push(Bm(h,s));break;case"PtgRefN":h=t?Gm(b[1][1],t,i):b[1][1],o.push(Bm(h,s));break;case"PtgRef3d":f=b[1][1],h=Gm(b[1][2],a,i),v=PO(r,f,i),o.push(v+"!"+Bm(h,s));break;case"PtgFunc":case"PtgFuncVar":var N=b[1][0],F=b[1][1];N||(N=0),N&=127;var W=N==0?[]:o.slice(-N);o.length-=N,F==="User"&&(F=W.shift()),o.push(F+"("+W.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":y=gO(b[1][1],t?{s:t}:a,i),o.push(jS(y,i));break;case"PtgArea":y=gO(b[1][1],a,i),o.push(jS(y,i));break;case"PtgArea3d":f=b[1][1],y=b[1][2],v=PO(r,f,i),o.push(v+"!"+jS(y,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=b[1][2];var M=(r.names||[])[g-1]||(r[0]||[])[g],C=M?M.Name:"SH33TJSNAME"+String(g);C&&C.slice(0,6)=="_xlfn."&&!i.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var P=b[1][1];g=b[1][2];var L;if(i.biff<=5)P<0&&(P=-P),r[P]&&(L=r[P][g]);else{var O="";if(((r[P]||[])[0]||[])[0]==14849||(((r[P]||[])[0]||[])[0]==1025?r[P][g]&&r[P][g].itab>0&&(O=r.SheetNames[r[P][g].itab-1]+"!"):O=r.SheetNames[g-1]+"!"),r[P]&&r[P][g])O+=r[P][g].Name;else if(r[0]&&r[0][g])O+=r[0][g].Name;else{var U=(YV(r,P,i)||"").split(";;");U[g-1]?O=U[g-1]:O+="SH33TJSERRX"}o.push(O);break}L||(L={Name:"SH33TJSERRY"}),o.push(L.Name);break;case"PtgParen":var j="(",xe=")";if(x>=0){switch(w="",n[0][x][1][0]){case 2:j=vr(" ",n[0][x][1][1])+j;break;case 3:j=vr("\r",n[0][x][1][1])+j;break;case 4:xe=vr(" ",n[0][x][1][1])+xe;break;case 5:xe=vr("\r",n[0][x][1][1])+xe;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][x][1][0])}x=-1}o.push(j+o.pop()+xe);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:b[1][1],r:b[1][0]};var Ce={c:t.c,r:t.r};if(r.sharedf[zn(h)]){var Ge=r.sharedf[zn(h)];o.push(k0(Ge,a,Ce,r,i))}else{var ke=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(h.c<u[0].s.c||h.c>u[0].e.c)&&!(h.r<u[0].s.r||h.r>u[0].e.r)){o.push(k0(u[1],a,Ce,r,i)),ke=!0;break}ke||o.push(b[1])}break;case"PtgArray":o.push("{"+s_e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&x>=0&&ce.indexOf(n[0][T][0])==-1){b=n[0][x];var Ie=!0;switch(b[1][0]){case 4:Ie=!1;case 0:w=vr(" ",b[1][1]);break;case 5:Ie=!1;case 1:w=vr("\r",b[1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((Ie?w:"")+o.pop()+(Ie?"":w)),x=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function l_e(n){if(n==null){var e=be(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return td(n);return td(0)}function c_e(n,e,t,r,i){var s=nd(e,t,i),a=l_e(n.v),o=be(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=be(n.bf.length),h=0;h<n.bf.length;++h)u[h]=n.bf[h];var f=Ti([s,a,o,u]);return f}function WE(n,e,t){var r=n.read_shift(4),i=i_e(n,r,t),s=n.read_shift(4),a=s>0?r_e(n,s,i,t):null;return[i,a]}var u_e=WE,HE=WE,h_e=WE,d_e=WE,f_e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},XV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},g_e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function m_e(n){var e="of:="+n.replace(lC,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function p_e(n){return n.replace(/\./,"!")}var Um=typeof Map<"u";function hC(n,e,t){var r=0,i=n.length;if(t){if(Um?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Um?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(Um?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function KE(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Dl=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=wv(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=BI(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function qV(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function Pu(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){W7(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function y_e(n,e,t){if(n&&n["!ref"]){var r=tr(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function __e(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+Br(n[t])+'"/>';return e+"</mergeCells>"}function x_e(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}s=!0,a.codeName=Mp(Bn(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+tt("outlinePr",null,u)}!s&&!o||(i[i.length]=tt("sheetPr",o,a))}var v_e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],E_e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function w_e(n){var e={sheet:1};return v_e.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),E_e.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=NV(n.password).toString(16).toUpperCase()),tt("sheetProtection",null,e)}function S_e(n){return qV(n),tt("pageMargins",null,n)}function T_e(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=tt("col",null,KE(i,r)));return t[t.length]="</cols>",t.join("")}function I_e(n,e,t,r){var i=typeof n.ref=="string"?n.ref:Br(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=na(i);a.s.r==a.e.r&&(a.e.r=na(e["!ref"]).e.r,i=Br(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),tt("autoFilter",null,{ref:i})}function A_e(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),tt("sheetViews",tt("sheetView",null,i),{})}function b_e(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=k1[n.v];break;case"d":r&&r.cellDates?i=as(n.v,-1).toISOString():(n=ks(n),n.t="n",i=""+(n.v=Ps(as(n.v)))),typeof n.z>"u"&&(n.z=wr[14]);break;default:i=n.v;break}var o=Ii("v",Bn(i)),l={r:e},u=Pu(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Ii("v",""+hC(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var h=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=tt("f",Bn(n.f),h)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(l.cm=1),tt("c",o,l)}function R_e(n,e,t,r){var i=[],s=[],a=tr(n["!ref"]),o="",l,u="",h=[],f=0,g=0,y=n["!rows"],v=Array.isArray(n),x={r:u},w,T=-1;for(g=a.s.c;g<=a.e.c;++g)h[g]=Hi(g);for(f=a.s.r;f<=a.e.r;++f){for(s=[],u=bi(f),g=a.s.c;g<=a.e.c;++g){l=h[g]+u;var I=v?(n[f]||[])[g]:n[l];I!==void 0&&(o=b_e(I,l,n,e))!=null&&s.push(o)}(s.length>0||y&&y[f])&&(x={r:u},y&&y[f]&&(w=y[f],w.hidden&&(x.hidden=1),T=-1,w.hpx?T=Sv(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(x.ht=T,x.customHeight=1),w.level&&(x.outlineLevel=w.level)),i[i.length]=tt("row",s.join(""),x))}if(y)for(;f<y.length;++f)y&&y[f]&&(x={r:f+1},w=y[f],w.hidden&&(x.hidden=1),T=-1,w.hpx?T=Sv(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(x.ht=T,x.customHeight=1),w.level&&(x.outlineLevel=w.level),i[i.length]=tt("row","",x));return i.join("")}function ZV(n,e,t,r){var i=[zr,tt("worksheet",null,{xmlns:H0[0],"xmlns:r":ci.r})],s=t.SheetNames[n],a=0,o="",l=t.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",h=tr(u);if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),u=Br(h)}r||(r={}),l["!comments"]=[];var f=[];x_e(l,t,n,e,i),i[i.length]=tt("dimension",null,{ref:u}),i[i.length]=A_e(l,e,n,t),e.sheetFormat&&(i[i.length]=tt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=T_e(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=R_e(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=w_e(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=I_e(l["!autofilter"],l,t,n)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=__e(l["!merges"]));var g=-1,y,v=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(y={ref:x[0]},x[1].Target.charAt(0)!="#"&&(v=jn(r,-1,Bn(x[1].Target).replace(/#.*$/,""),xn.HLINK),y["r:id"]="rId"+v),(g=x[1].Target.indexOf("#"))>-1&&(y.location=Bn(x[1].Target.slice(g+1))),x[1].Tooltip&&(y.tooltip=Bn(x[1].Tooltip)),i[i.length]=tt("hyperlink",null,y))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=S_e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Ii("ignoredErrors",tt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(v=jn(r,-1,"../drawings/drawing"+(n+1)+".xml",xn.DRAW),i[i.length]=tt("drawing",null,{"r:id":"rId"+v}),l["!drawing"]=f),l["!comments"].length>0&&(v=jn(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",xn.VML),i[i.length]=tt("legacyDrawing",null,{"r:id":"rId"+v}),l["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function C_e(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function P_e(n,e,t){var r=be(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=Sv(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:n,c:0},h=0;h<16;++h)if(!(e.s.c>h+1<<10||e.e.c<h<<10)){for(var f=-1,g=-1,y=h<<10;y<h+1<<10;++y){u.c=y;var v=Array.isArray(t)?(t[u.r]||[])[u.c]:t[zn(u)];v&&(f<0&&(f=y),g=y)}f<0||(++o,r.write_shift(4,f),r.write_shift(4,g))}var x=r.l;return r.l=l,r.write_shift(4,o),r.l=x,r.length>r.l?r.slice(0,r.l):r}function k_e(n,e,t,r){var i=P_e(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Ve(n,0,i)}var M_e=vd,N_e=Y0;function L_e(){}function O_e(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=Wme(n),t}function D_e(n,e,t){t==null&&(t=be(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return xv({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),dV(n,t),t.slice(0,t.l)}function F_e(n){var e=ba(n);return[e]}function j_e(n,e,t){return t==null&&(t=be(8)),yd(e,t)}function V_e(n){var e=_d(n);return[e]}function G_e(n,e,t){return t==null&&(t=be(4)),xd(e,t)}function B_e(n){var e=ba(n),t=n.read_shift(1);return[e,t,"b"]}function U_e(n,e,t){return t==null&&(t=be(9)),yd(e,t),t.write_shift(1,n.v?1:0),t}function z_e(n){var e=_d(n),t=n.read_shift(1);return[e,t,"b"]}function $_e(n,e,t){return t==null&&(t=be(5)),xd(e,t),t.write_shift(1,n.v?1:0),t}function W_e(n){var e=ba(n),t=n.read_shift(1);return[e,t,"e"]}function H_e(n,e,t){return t==null&&(t=be(9)),yd(e,t),t.write_shift(1,n.v),t}function K_e(n){var e=_d(n),t=n.read_shift(1);return[e,t,"e"]}function Y_e(n,e,t){return t==null&&(t=be(8)),xd(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function X_e(n){var e=ba(n),t=n.read_shift(4);return[e,t,"s"]}function q_e(n,e,t){return t==null&&(t=be(12)),yd(e,t),t.write_shift(4,e.v),t}function Z_e(n){var e=_d(n),t=n.read_shift(4);return[e,t,"s"]}function Q_e(n,e,t){return t==null&&(t=be(8)),xd(e,t),t.write_shift(4,e.v),t}function J_e(n){var e=ba(n),t=X0(n);return[e,t,"n"]}function exe(n,e,t){return t==null&&(t=be(16)),yd(e,t),td(n.v,t),t}function txe(n){var e=_d(n),t=X0(n);return[e,t,"n"]}function nxe(n,e,t){return t==null&&(t=be(12)),xd(e,t),td(n.v,t),t}function rxe(n){var e=ba(n),t=fV(n);return[e,t,"n"]}function ixe(n,e,t){return t==null&&(t=be(12)),yd(e,t),gV(n.v,t),t}function sxe(n){var e=_d(n),t=fV(n);return[e,t,"n"]}function axe(n,e,t){return t==null&&(t=be(8)),xd(e,t),gV(n.v,t),t}function oxe(n){var e=ba(n),t=rC(n);return[e,t,"is"]}function lxe(n){var e=ba(n),t=Ki(n);return[e,t,"str"]}function cxe(n,e,t){return t==null&&(t=be(12+4*n.v.length)),yd(e,t),hi(n.v,t),t.length>t.l?t.slice(0,t.l):t}function uxe(n){var e=_d(n),t=Ki(n);return[e,t,"str"]}function hxe(n,e,t){return t==null&&(t=be(8+4*n.v.length)),xd(e,t),hi(n.v,t),t.length>t.l?t.slice(0,t.l):t}function dxe(n,e,t){var r=n.l+e,i=ba(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=HE(n,r-n.l,t);a[3]=k0(o,null,i,t.supbooks,t)}else n.l=r;return a}function fxe(n,e,t){var r=n.l+e,i=ba(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=HE(n,r-n.l,t);a[3]=k0(o,null,i,t.supbooks,t)}else n.l=r;return a}function gxe(n,e,t){var r=n.l+e,i=ba(n);i.r=t["!row"];var s=X0(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=HE(n,r-n.l,t);a[3]=k0(o,null,i,t.supbooks,t)}else n.l=r;return a}function mxe(n,e,t){var r=n.l+e,i=ba(n);i.r=t["!row"];var s=Ki(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=HE(n,r-n.l,t);a[3]=k0(o,null,i,t.supbooks,t)}else n.l=r;return a}var pxe=vd,yxe=Y0;function _xe(n,e){return e==null&&(e=be(4)),e.write_shift(4,n),e}function xxe(n,e){var t=n.l+e,r=vd(n),i=iC(n),s=Ki(n),a=Ki(n),o=Ki(n);n.l=t;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function vxe(n,e){var t=be(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));Y0({s:ui(n[0]),e:ui(n[0])},t),sC("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return hi(i||"",t),hi(n[1].Tooltip||"",t),hi("",t),t.slice(0,t.l)}function Exe(){}function wxe(n,e,t){var r=n.l+e,i=mV(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=u_e(n,r-n.l,t);a[1]=o}else n.l=r;return a}function Sxe(n,e,t){var r=n.l+e,i=vd(n),s=[i];if(t.cellFormula){var a=d_e(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function Txe(n,e,t){t==null&&(t=be(18));var r=KE(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var QV=["left","right","top","bottom","header","footer"];function Ixe(n){var e={};return QV.forEach(function(t){e[t]=X0(n)}),e}function Axe(n,e){return e==null&&(e=be(48)),qV(n),QV.forEach(function(t){td(n[t],e)}),e}function bxe(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function Rxe(n,e,t){t==null&&(t=be(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function Cxe(n){var e=be(24);return e.write_shift(4,4),e.write_shift(4,1),Y0(n,e),e}function Pxe(n,e){return e==null&&(e=be(66)),e.write_shift(2,n.password?NV(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function kxe(){}function Mxe(){}function Nxe(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ks(e),e.z=e.z||wr[14],e.v=Ps(as(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:t,c:r};switch(l.s=Pu(i.cellXfs,e,i),e.l&&s["!links"].push([zn(l),e.l]),e.c&&s["!comments"].push([zn(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=hC(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?Ve(n,18,Q_e(e,l)):Ve(n,7,q_e(e,l))):(l.t="str",a?Ve(n,17,hxe(e,l)):Ve(n,6,cxe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Ve(n,13,axe(e,l)):Ve(n,2,ixe(e,l)):a?Ve(n,16,nxe(e,l)):Ve(n,5,exe(e,l)),!0;case"b":return l.t="b",a?Ve(n,15,$_e(e,l)):Ve(n,4,U_e(e,l)),!0;case"e":return l.t="e",a?Ve(n,14,Y_e(e,l)):Ve(n,3,H_e(e,l)),!0}return a?Ve(n,12,G_e(e,l)):Ve(n,1,j_e(e,l)),!0}function Lxe(n,e,t,r){var i=tr(e["!ref"]||"A1"),s,a="",o=[];Ve(n,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var h=i.s.r;h<=u;++h){a=bi(h),k_e(n,e,i,h);var f=!1;if(h<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){h===i.s.r&&(o[g]=Hi(g)),s=o[g]+a;var y=l?(e[h]||[])[g]:e[s];if(!y){f=!1;continue}f=Nxe(n,y,h,g,r,e,f)}}Ve(n,146)}function Oxe(n,e){!e||!e["!merges"]||(Ve(n,177,_xe(e["!merges"].length)),e["!merges"].forEach(function(t){Ve(n,176,yxe(t))}),Ve(n,178))}function Dxe(n,e){!e||!e["!cols"]||(Ve(n,390),e["!cols"].forEach(function(t,r){t&&Ve(n,60,Txe(r,t))}),Ve(n,391))}function Fxe(n,e){!e||!e["!ref"]||(Ve(n,648),Ve(n,649,Cxe(tr(e["!ref"]))),Ve(n,650))}function jxe(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=jn(t,-1,r[1].Target.replace(/#.*$/,""),xn.HLINK);Ve(n,494,vxe(r,i))}}),delete e["!links"]}function Vxe(n,e,t,r){if(e["!comments"].length>0){var i=jn(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",xn.VML);Ve(n,551,sC("rId"+i)),e["!legacy"]=i}}function Gxe(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Br(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=na(s);o.s.r==o.e.r&&(o.e.r=na(e["!ref"]).e.r,s=Br(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Ve(n,161,Y0(tr(s))),Ve(n,162)}}function Bxe(n,e,t){Ve(n,133),Ve(n,137,Rxe(e,t)),Ve(n,138),Ve(n,134)}function Uxe(n,e){e["!protect"]&&Ve(n,535,Pxe(e["!protect"]))}function zxe(n,e,t,r){var i=Rs(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var l=tr(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Ve(i,129),(t.vbaraw||a["!outline"])&&Ve(i,147,D_e(o,a["!outline"])),Ve(i,148,N_e(l)),Bxe(i,a,t.Workbook),Dxe(i,a),Lxe(i,a,n,e),Uxe(i,a),Gxe(i,a,t,n),Oxe(i,a),jxe(i,a,r),a["!margins"]&&Ve(i,476,Axe(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Fxe(i,a),Vxe(i,a,n,r),Ve(i,130),i.end()}function $xe(n,e){n.l+=10;var t=Ki(n);return{name:t}}var Wxe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Hxe(n){return!n.Workbook||!n.Workbook.WBProps?"false":Sme(n.Workbook.WBProps.date1904)?"true":"false"}var Kxe="][*?/\\".split("");function JV(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return Kxe.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function Yxe(n,e,t){n.forEach(function(r,i){JV(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Xxe(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];Yxe(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)y_e(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function eG(n){var e=[zr];e[e.length]=tt("workbook",null,{xmlns:H0[0],"xmlns:r":ci.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(Wxe.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=tt("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:Bn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=tt("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=tt("definedName",Bn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function qxe(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=GI(n),t.name=Ki(n),t}function Zxe(n,e){return e||(e=be(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),sC(n.strRelID,e),hi(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Qxe(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?Ki(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Jxe(n,e){e||(e=be(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),dV(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function eve(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=Hme(n),a=h_e(n,0,t),o=iC(n);n.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function tve(n,e){Ve(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Ve(n,156,Zxe(i))}Ve(n,144)}function nve(n,e){e||(e=be(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return hi("SheetJS",e),hi(hv.version,e),hi(hv.version,e),hi("7262",e),e.length>e.l?e.slice(0,e.l):e}function rve(n,e){e||(e=be(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function ive(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Ve(n,135),Ve(n,158,rve(i)),Ve(n,136))}}function sve(n,e){var t=Rs();return Ve(t,131),Ve(t,128,nve()),Ve(t,153,Jxe(n.Workbook&&n.Workbook.WBProps||null)),ive(t,n),tve(t,n),Ve(t,132),t.end()}function ave(n,e,t){return(e.slice(-4)===".bin"?sve:eG)(n)}function ove(n,e,t,r,i){return(e.slice(-4)===".bin"?zxe:ZV)(n,t,r,i)}function lve(n,e,t){return(e.slice(-4)===".bin"?A1e:DV)(n,t)}function cve(n,e,t){return(e.slice(-4)===".bin"?Jpe:MV)(n,t)}function uve(n,e,t){return(e.slice(-4)===".bin"?U1e:BV)(n)}function hve(n){return(n.slice(-4)===".bin"?L1e:VV)()}function dve(n,e){var t=[];return n.Props&&t.push(lpe(n.Props,e)),n.Custprops&&t.push(cpe(n.Props,n.Custprops)),t.join("")}function fve(){return""}function gve(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(tt("NumberFormat",null,{"ss:Format":Bn(wr[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(tt("Style",s.join(""),a))}),tt("Styles",t.join(""))}function tG(n){return tt("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+cC(n.Ref,{r:0,c:0})})}function mve(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(tG(i)))}return tt("Names",t.join(""))}function pve(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(tG(o)))}return s.join("")}function yve(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(tt("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(tt("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(tt("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(tt("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(Ii("ProtectContents","True")),n["!protect"].objects&&i.push(Ii("ProtectObjects","True")),n["!protect"].scenarios&&i.push(Ii("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(Ii("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(Ii("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":tt("WorksheetOptions",i.join(""),{xmlns:Hs.x})}function _ve(n){return n.map(function(e){var t=wme(e.t||""),r=tt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return tt("Comment",r,{"ss:Author":e.a})}).join("")}function xve(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+Bn(cC(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var l=ui(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=Bn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=Bn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],h=0;h!=u.length;++h)u[h].s.c!=a.c||u[h].s.r!=a.r||(u[h].e.c>u[h].s.c&&(o["ss:MergeAcross"]=u[h].e.c-u[h].s.c),u[h].e.r>u[h].s.r&&(o["ss:MergeDown"]=u[h].e.r-u[h].s.r));var f="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":f="Number",g=String(n.v);break;case"b":f="Boolean",g=n.v?"1":"0";break;case"e":f="Error",g=k1[n.v];break;case"d":f="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||wr[14]);break;case"s":f="String",g=Eme(n.v||"");break}var y=Pu(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+y),o["ss:Index"]=a.c+1;var v=n.v!=null?g:"",x=n.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(n.c||[]).length>0&&(x+=_ve(n.c)),tt("Cell",x,o)}function vve(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=OV(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Eve(n,e,t,r){if(!n["!ref"])return"";var i=tr(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(w,T){oC(w);var I=!!w.width,b=KE(T,w),N={"ss:Index":T+1};I&&(N["ss:Width"]=Ev(b.width)),w.hidden&&(N["ss:Hidden"]="1"),o.push(tt("Column",null,N))});for(var l=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var h=[vve(u,(n["!rows"]||[])[u])],f=i.s.c;f<=i.e.c;++f){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>f)&&!(s[a].s.r>u)&&!(s[a].e.c<f)&&!(s[a].e.r<u)){(s[a].s.c!=f||s[a].s.r!=u)&&(g=!0);break}if(!g){var y={r:u,c:f},v=zn(y),x=l?(n[u]||[])[f]:n[v];h.push(xve(x,v,n,e,t,r,y))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function wve(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?pve(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?Eve(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(yve(s,e,n,t)),r.join("")}function Sve(n,e){e||(e={}),n.SSF||(n.SSF=ks(wr)),n.SSF&&(UE(),BE(n.SSF),e.revssf=zE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Pu(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(dve(n,e)),t.push(fve()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(tt("Worksheet",wve(r,e,n),{"ss:Name":Bn(n.SheetNames[r])}));return t[2]=gve(n,e),t[3]=mve(n),zr+tt("Workbook",t.join(""),{xmlns:Hs.ss,"xmlns:o":Hs.o,"xmlns:x":Hs.x,"xmlns:ss":Hs.ss,"xmlns:dt":Hs.dt,"xmlns:html":Hs.html})}var BS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Tve(n,e){var t=[],r=[],i=[],s=0,a,o=rO(pO,"n"),l=rO(yO,"n");if(n.Props)for(a=Ri(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=Ri(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)IV.indexOf(i[s][0])>-1||wV.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&$n.utils.cfb_add(e,"/SummaryInformation",wO(r,BS.SI,l,yO)),(t.length||u.length)&&$n.utils.cfb_add(e,"/DocumentSummaryInformation",wO(t,BS.DSI,o,pO,u.length?u:null,BS.UDI))}function Ive(n,e){var t=e||{},r=$n.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return $n.utils.cfb_add(r,i,nG(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Tve(n,r),t.biff==8&&n.vbaraw&&z1e(r,$n.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Ave={0:{f:C_e},1:{f:F_e},2:{f:rxe},3:{f:W_e},4:{f:B_e},5:{f:J_e},6:{f:lxe},7:{f:X_e},8:{f:mxe},9:{f:gxe},10:{f:dxe},11:{f:fxe},12:{f:V_e},13:{f:sxe},14:{f:K_e},15:{f:z_e},16:{f:txe},17:{f:uxe},18:{f:Z_e},19:{f:rC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:eve},40:{},42:{},43:{f:l1e},44:{f:a1e},45:{f:h1e},46:{f:f1e},47:{f:d1e},48:{},49:{f:Vme},50:{},51:{f:C1e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Gpe},62:{f:oxe},63:{f:O1e},64:{f:kxe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Zo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:bxe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:O_e},148:{f:M_e,p:16},151:{f:Exe},152:{},153:{f:Qxe},154:{},155:{},156:{f:qxe},157:{},158:{},159:{T:1,f:qpe},160:{T:-1},161:{T:1,f:vd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:pxe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:b1e},336:{T:-1},337:{f:M1e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:GI},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Lpe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:wxe},427:{f:Sxe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Ixe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:L_e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:xxe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:GI},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:G1e},633:{T:1},634:{T:-1},635:{T:1,f:j1e},636:{T:-1},637:{f:zme},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:$xe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Mxe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function nt(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&eC(t)&&n.push(t)}}function bve(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return nt(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var h=n.next(4);for(h.write_shift(2,s),h.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u;l<i;){for(h=n.next(4),h.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;h.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u}}}function N1(n,e,t){return n||(n=be(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function Rve(n,e,t,r){var i=be(9);return N1(i,n,e),bV(t,r||"b",i),i}function Cve(n,e,t){var r=be(8+2*t.length);return N1(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Pve(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Ps(as(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?nt(n,2,$pe(t,r,i)):nt(n,3,zpe(t,r,i));return;case"b":case"e":nt(n,5,Rve(t,r,e.v,e.t));return;case"s":case"str":nt(n,4,Cve(t,r,(e.v||"").slice(0,255)));return}nt(n,1,N1(null,t,r))}function kve(n,e,t,r){var i=Array.isArray(e),s=tr(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Br(s)}for(var u=s.s.r;u<=s.e.r;++u){o=bi(u);for(var h=s.s.c;h<=s.e.c;++h){u===s.s.r&&(l[h]=Hi(h)),a=l[h]+o;var f=i?(e[u]||[])[h]:e[a];f&&Pve(n,f,u,h)}}}function Mve(n,e){for(var t=e||{},r=Rs(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return nt(r,t.biff==4?1033:t.biff==3?521:9,aC(n,16,t)),kve(r,n.Sheets[n.SheetNames[i]],i,t),nt(r,10),r.end()}function Nve(n,e,t){nt(n,49,Ape({sz:12,name:"Arial"},t))}function Lve(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&nt(n,1054,Cpe(i,e[i],t))})}function Ove(n,e){var t=be(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),nt(n,2151,t),t=be(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),PV(tr(e["!ref"]||"A1"),t),t.write_shift(4,4),nt(n,2152,t)}function Dve(n,e){for(var t=0;t<16;++t)nt(n,224,TO({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){nt(n,224,TO(r,0,e))})}function Fve(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];nt(n,440,Fpe(r)),r[1].Tooltip&&nt(n,2048,jpe(r))}delete e["!links"]}function jve(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&nt(n,125,Bpe(KE(i,r),i))})}}function Vve(n,e,t,r,i){var s=16+Pu(i.cellXfs,e,i);if(e.v==null&&!e.bf){nt(n,513,nd(t,r,s));return}if(e.bf)nt(n,6,c_e(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Ps(as(e.v)):e.v;nt(n,515,Npe(t,r,a,s));break;case"b":case"e":nt(n,517,Mpe(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=hC(i.Strings,e.v,i.revStrings);nt(n,253,bpe(t,r,o,s))}else nt(n,516,Rpe(t,r,(e.v||"").slice(0,255),s,i));break;default:nt(n,513,nd(t,r,s))}}function Gve(n,e,t){var r=Rs(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},l=Array.isArray(s),u=e.biff==8,h,f="",g=[],y=tr(s["!ref"]||"A1"),v=u?65536:16384;if(y.e.c>255||y.e.r>=v){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");y.e.c=Math.min(y.e.c,255),y.e.r=Math.min(y.e.c,v-1)}nt(r,2057,aC(t,16,e)),nt(r,13,pa(1)),nt(r,12,pa(100)),nt(r,15,Ji(!0)),nt(r,17,Ji(!1)),nt(r,16,td(.001)),nt(r,95,Ji(!0)),nt(r,42,Ji(!1)),nt(r,43,Ji(!1)),nt(r,130,pa(1)),nt(r,128,kpe()),nt(r,131,Ji(!1)),nt(r,132,Ji(!1)),u&&jve(r,s["!cols"]),nt(r,512,Ppe(y,e)),u&&(s["!links"]=[]);for(var x=y.s.r;x<=y.e.r;++x){f=bi(x);for(var w=y.s.c;w<=y.e.c;++w){x===y.s.r&&(g[w]=Hi(w)),h=g[w]+f;var T=l?(s[x]||[])[w]:s[h];T&&(Vve(r,T,x,w,e),u&&T.l&&s["!links"].push([h,T.l]))}}var I=o.CodeName||o.name||i;return u&&nt(r,574,Ipe((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&nt(r,229,Dpe(s["!merges"])),u&&Fve(r,s),nt(r,442,CV(I)),u&&Ove(r,s),nt(r,10),r.end()}function Bve(n,e,t){var r=Rs(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,l=t.biff==5;if(nt(r,2057,aC(n,5,t)),t.bookType=="xla"&&nt(r,135),nt(r,225,o?pa(1200):null),nt(r,193,dpe(2)),l&&nt(r,191),l&&nt(r,192),nt(r,226),nt(r,92,Epe("SheetJS",t)),nt(r,66,pa(o?1200:1252)),o&&nt(r,353,pa(0)),o&&nt(r,448),nt(r,317,Upe(n.SheetNames.length)),o&&n.vbaraw&&nt(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";nt(r,442,CV(u))}nt(r,156,pa(17)),nt(r,25,Ji(!1)),nt(r,18,Ji(!1)),nt(r,19,pa(0)),o&&nt(r,431,Ji(!1)),o&&nt(r,444,pa(0)),nt(r,61,Tpe()),nt(r,64,Ji(!1)),nt(r,141,pa(0)),nt(r,34,Ji(Hxe(n)=="true")),nt(r,14,Ji(!0)),o&&nt(r,439,Ji(!1)),nt(r,218,pa(0)),Nve(r,n,t),Lve(r,n.SSF,t),Dve(r,t),o&&nt(r,352,Ji(!1));var h=r.end(),f=Rs();o&&nt(f,140,Vpe()),o&&t.Strings&&bve(f,252,Spe(t.Strings)),nt(f,10);var g=f.end(),y=Rs(),v=0,x=0;for(x=0;x<n.SheetNames.length;++x)v+=(o?12:11)+(o?2:1)*n.SheetNames[x].length;var w=h.length+v+g.length;for(x=0;x<n.SheetNames.length;++x){var T=s[x]||{};nt(y,133,wpe({pos:w,hs:T.Hidden||0,dt:0,name:n.SheetNames[x]},t)),w+=e[x].length}var I=y.end();if(v!=I.length)throw new Error("BS8 "+v+" != "+I.length);var b=[];return h.length&&b.push(h),I.length&&b.push(I),g.length&&b.push(g),Ti(b)}function Uve(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=ks(wr)),n&&n.SSF&&(UE(),BE(n.SSF),t.revssf=zE(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,dC(t),t.cellXfs=[],Pu(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=Gve(i,t,n);return r.unshift(Bve(n,r,t)),Ti(r)}function nG(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=na(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Uve(n,e);case 4:case 3:case 2:return Mve(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function zve(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var h=zn({r:t,c:a}),f=r.dense?(n[t]||[])[a]:n[h],g=f&&f.v!=null&&(f.h||vme(f.w||(Wl(f),f.w)||""))||"",y={};o>1&&(y.rowspan=o),l>1&&(y.colspan=l),r.editable?g='<span contenteditable="true">'+g+"</span>":f&&(y["data-t"]=f&&f.t||"z",f.v!=null&&(y["data-v"]=f.v),f.z!=null&&(y["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+f.l.Target+'">'+g+"</a>")),y.id=(r.id||"sjs")+"-"+h,s.push(tt("td",g,y))}}var v="<tr>";return v+s.join("")+"</tr>"}var $ve='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Wve="</body></html>";function Hve(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function rG(n,e){var t=e||{},r=t.header!=null?t.header:$ve,i=t.footer!=null?t.footer:Wve,s=[r],a=na(n["!ref"]);t.dense=Array.isArray(n),s.push(Hve(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(zve(n,a,o,t));return s.push("</table>"+i),s.join("")}function iG(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?ui(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var h=na(n["!ref"]);u.s.r=Math.min(u.s.r,h.s.r),u.s.c=Math.min(u.s.c,h.s.c),u.e.r=Math.max(u.e.r,h.e.r),u.e.c=Math.max(u.e.c,h.e.c),i==-1&&(u.e.r=i=h.e.r+1)}var f=[],g=0,y=n["!rows"]||(n["!rows"]=[]),v=0,x=0,w=0,T=0,I=0,b=0;for(n["!cols"]||(n["!cols"]=[]);v<o.length&&x<l;++v){var N=o[v];if(kO(N)){if(r.display)continue;y[x]={hidden:!0}}var F=N.children;for(w=T=0;w<F.length;++w){var W=F[w];if(!(r.display&&kO(W))){var M=W.hasAttribute("data-v")?W.getAttribute("data-v"):W.hasAttribute("v")?W.getAttribute("v"):Tme(W.innerHTML),C=W.getAttribute("data-z")||W.getAttribute("z");for(g=0;g<f.length;++g){var P=f[g];P.s.c==T+s&&P.s.r<x+i&&x+i<=P.e.r&&(T=P.e.c+1-s,g=-1)}b=+W.getAttribute("colspan")||1,((I=+W.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:x+i,c:T+s},e:{r:x+i+(I||1)-1,c:T+s+(b||1)-1}});var L={t:"s",v:M},O=W.getAttribute("data-t")||W.getAttribute("t")||"";M!=null&&(M.length==0?L.t=O||"z":r.raw||M.trim().length==0||O=="s"||(M==="TRUE"?L={t:"b",v:!0}:M==="FALSE"?L={t:"b",v:!1}:isNaN(Ol(M))?isNaN(kp(M).getDate())||(L={t:"d",v:as(M)},r.cellDates||(L={t:"n",v:Ps(L.v)}),L.z=r.dateNF||wr[14]):L={t:"n",v:Ol(M)})),L.z===void 0&&C!=null&&(L.z=C);var U="",j=W.getElementsByTagName("A");if(j&&j.length)for(var xe=0;xe<j.length&&!(j[xe].hasAttribute("href")&&(U=j[xe].getAttribute("href"),U.charAt(0)!="#"));++xe);U&&U.charAt(0)!="#"&&(L.l={Target:U}),r.dense?(n[x+i]||(n[x+i]=[]),n[x+i][T+s]=L):n[zn({c:T+s,r:x+i})]=L,u.e.c<T+s&&(u.e.c=T+s),T+=b}}++x}return f.length&&(n["!merges"]=(n["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+i),n["!ref"]=Br(u),x>=l&&(n["!fullref"]=Br((u.e.r=o.length-v+x-1+i,u))),n}function sG(n,e){var t=e||{},r=t.dense?[]:{};return iG(r,n,e)}function Kve(n,e){return pd(sG(n,e),e)}function kO(n){var e="",t=Yve(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function Yve(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Xve=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Np({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return zr+e}})(),MO=(function(){var n=function(s){return Bn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var l=[];l.push('      <table:table table:name="'+Bn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,h=0,f=na(s["!ref"]||"A1"),g=s["!merges"]||[],y=0,v=Array.isArray(s);if(s["!cols"])for(h=0;h<=f.e.c;++h)l.push("        <table:table-column"+(s["!cols"][h]?' table:style-name="co'+s["!cols"][h].ods+'"':"")+`></table:table-column>
`);var x="",w=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=w[u]?' table:style-name="ro'+w[u].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=w[u]?' table:style-name="ro'+w[u].ods+'"':"",l.push("        <table:table-row"+x+`>
`),h=0;h<f.s.c;++h)l.push(e);for(;h<=f.e.c;++h){var T=!1,I={},b="";for(y=0;y!=g.length;++y)if(!(g[y].s.c>h)&&!(g[y].s.r>u)&&!(g[y].e.c<h)&&!(g[y].e.r<u)){(g[y].s.c!=h||g[y].s.r!=u)&&(T=!0),I["table:number-columns-spanned"]=g[y].e.c-g[y].s.c+1,I["table:number-rows-spanned"]=g[y].e.r-g[y].s.r+1;break}if(T){l.push(t);continue}var N=zn({r:u,c:h}),F=v?(s[u]||[])[h]:s[N];if(F&&F.f&&(I["table:formula"]=Bn(m_e(F.f)),F.F&&F.F.slice(0,N.length)==N)){var W=na(F.F);I["table:number-matrix-columns-spanned"]=W.e.c-W.s.c+1,I["table:number-matrix-rows-spanned"]=W.e.r-W.s.r+1}if(!F){l.push(e);continue}switch(F.t){case"b":b=F.v?"TRUE":"FALSE",I["office:value-type"]="boolean",I["office:boolean-value"]=F.v?"true":"false";break;case"n":b=F.w||String(F.v||0),I["office:value-type"]="float",I["office:value"]=F.v||0;break;case"s":case"str":b=F.v==null?"":F.v,I["office:value-type"]="string";break;case"d":b=F.w||as(F.v).toISOString(),I["office:value-type"]="date",I["office:date-value"]=as(F.v).toISOString(),I["table:style-name"]="ce1";break;default:l.push(e);continue}var M=n(b);if(F.l&&F.l.Target){var C=F.l.Target;C=C.charAt(0)=="#"?"#"+p_e(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),M=tt("text:a",M,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+tt("table:table-cell",tt("text:p",M,{}),I)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var h=0;h<u["!cols"].length;++h)if(u["!cols"][h]){var f=u["!cols"][h];if(f.width==null&&f.wpx==null&&f.wch==null)continue;oC(f),f.ods=o;var g=u["!cols"][h].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var h=0;h<u["!rows"].length;++h)if(u["!rows"][h]){u["!rows"][h].ods=l;var f=u["!rows"][h].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[zr],u=Np({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=Np({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+h+`>
`),l.push(vV().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=a.SheetNames.length;++f)l.push(r(a.Sheets[a.SheetNames[f]],a,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function aG(n,e){if(e.bookType=="fods")return MO(n,e);var t=qR(),r="",i=[],s=[];return r="mimetype",Jt(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Jt(t,r,MO(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Jt(t,r,Xve(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Jt(t,r,zr+vV()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Jt(t,r,ope(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Jt(t,r,spe(i)),t}function Tv(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function qve(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Wa(Mp(n))}function Zve(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function wu(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function Qve(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Lp(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function Fn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function r0(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function qr(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Lp(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Lp(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function _i(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(Fn(r*8+i.type)),i.type==2&&e.push(Fn(i.data.length)),e.push(i.data))})}),wu(e)}function Fa(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Lp(n,r),s=qr(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:r0(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=qr(o.data),u=r0(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=r0(s[3][0].data)>>>0>0),t.push(a)}return t}function ff(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:Fn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:Fn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Fn(a.data.length)}],r[2].push({data:_i(a.meta),type:2})});var s=_i(r);e.push(Fn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),wu(e)}function Jve(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Lp(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[wu(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var h=wu(i);if(h.length!=r)throw new Error("Unexpected length: ".concat(h.length," != ").concat(r));return h}function ja(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(Jve(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return wu(e)}function gf(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=Fn(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return wu(e)}function US(n,e){var t=new Uint8Array(32),r=Tv(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,Qve(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function zS(n,e){var t=new Uint8Array(32),r=Tv(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function Cc(n){var e=qr(n);return Lp(e[1][0].data)}function eEe(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&r0(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Tv(n[7][0].data),h=0,f=[],g=Tv(n[4][0].data),y=0,v=[],x=0;x<e.length;++x){if(e[x]==null){u.setUint16(x*2,65535,!0),g.setUint16(x*2,65535);continue}u.setUint16(x*2,h,!0),g.setUint16(x*2,y,!0);var w,T;switch(typeof e[x]){case"string":w=US({t:"s",v:e[x]},t),T=zS({t:"s",v:e[x]},t);break;case"number":w=US({t:"n",v:e[x]},t),T=zS({t:"n",v:e[x]},t);break;case"boolean":w=US({t:"b",v:e[x]},t),T=zS({t:"b",v:e[x]},t);break;default:throw new Error("Unsupported value "+e[x])}f.push(w),h+=w.length,v.push(T),y+=T.length,++l}for(n[2][0].data=Fn(l);x<n[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),g.setUint16(x*2,65535,!0);return n[6][0].data=wu(f),n[3][0].data=wu(v),l}function tEe(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=na(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Br(r)));var s=Iv(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(J){return J.forEach(function(te){typeof te=="string"&&a.push(te)})});var o={},l=[],u=$n.read(e.numbers,{type:"base64"});u.FileIndex.map(function(J,te){return[J,u.FullPaths[te]]}).forEach(function(J){var te=J[0],X=J[1];if(te.type==2&&te.name.match(/\.iwa/)){var ue=te.content,Me=ja(ue),Fe=Fa(Me);Fe.forEach(function(Le){l.push(Le.id),o[Le.id]={deps:[],location:X,type:r0(Le.messages[0].meta[1][0].data)}})}}),l.sort(function(J,te){return J-te});var h=l.filter(function(J){return J>1}).map(function(J){return[J,Fn(J)]});u.FileIndex.map(function(J,te){return[J,u.FullPaths[te]]}).forEach(function(J){var te=J[0];if(J[1],!!te.name.match(/\.iwa/)){var X=Fa(ja(te.content));X.forEach(function(ue){ue.messages.forEach(function(Me){h.forEach(function(Fe){ue.messages.some(function(Le){return r0(Le.meta[1][0].data)!=11006&&Zve(Le.data,Fe[1])})&&o[Fe[0]].deps.push(ue.id)})})})}});for(var f=$n.find(u,o[1].location),g=Fa(ja(f.content)),y,v=0;v<g.length;++v){var x=g[v];x.id==1&&(y=x)}var w=Cc(qr(y.messages[0].data)[1][0].data);for(f=$n.find(u,o[w].location),g=Fa(ja(f.content)),v=0;v<g.length;++v)x=g[v],x.id==w&&(y=x);for(w=Cc(qr(y.messages[0].data)[2][0].data),f=$n.find(u,o[w].location),g=Fa(ja(f.content)),v=0;v<g.length;++v)x=g[v],x.id==w&&(y=x);for(w=Cc(qr(y.messages[0].data)[2][0].data),f=$n.find(u,o[w].location),g=Fa(ja(f.content)),v=0;v<g.length;++v)x=g[v],x.id==w&&(y=x);var T=qr(y.messages[0].data);{T[6][0].data=Fn(r.e.r+1),T[7][0].data=Fn(r.e.c+1);var I=Cc(T[46][0].data),b=$n.find(u,o[I].location),N=Fa(ja(b.content));{for(var F=0;F<N.length&&N[F].id!=I;++F);if(N[F].id!=I)throw"Bad ColumnRowUIDMapArchive";var W=qr(N[F].messages[0].data);W[1]=[],W[2]=[],W[3]=[];for(var M=0;M<=r.e.c;++M){var C=[];C[1]=C[2]=[{type:0,data:Fn(M+420690)}],W[1].push({type:2,data:_i(C)}),W[2].push({type:0,data:Fn(M)}),W[3].push({type:0,data:Fn(M)})}W[4]=[],W[5]=[],W[6]=[];for(var P=0;P<=r.e.r;++P)C=[],C[1]=C[2]=[{type:0,data:Fn(P+726270)}],W[4].push({type:2,data:_i(C)}),W[5].push({type:0,data:Fn(P)}),W[6].push({type:0,data:Fn(P)});N[F].messages[0].data=_i(W)}b.content=gf(ff(N)),b.size=b.content.length,delete T[46];var L=qr(T[4][0].data);{L[7][0].data=Fn(r.e.r+1);var O=qr(L[1][0].data),U=Cc(O[2][0].data);b=$n.find(u,o[U].location),N=Fa(ja(b.content));{if(N[0].id!=U)throw"Bad HeaderStorageBucket";var j=qr(N[0].messages[0].data);for(P=0;P<s.length;++P){var xe=qr(j[2][0].data);xe[1][0].data=Fn(P),xe[4][0].data=Fn(s[P].length),j[2][P]={type:j[2][0].type,data:_i(xe)}}N[0].messages[0].data=_i(j)}b.content=gf(ff(N)),b.size=b.content.length;var Ce=Cc(L[2][0].data);b=$n.find(u,o[Ce].location),N=Fa(ja(b.content));{if(N[0].id!=Ce)throw"Bad HeaderStorageBucket";for(j=qr(N[0].messages[0].data),M=0;M<=r.e.c;++M)xe=qr(j[2][0].data),xe[1][0].data=Fn(M),xe[4][0].data=Fn(r.e.r+1),j[2][M]={type:j[2][0].type,data:_i(xe)};N[0].messages[0].data=_i(j)}b.content=gf(ff(N)),b.size=b.content.length;var Ge=Cc(L[4][0].data);(function(){for(var J=$n.find(u,o[Ge].location),te=Fa(ja(J.content)),X,ue=0;ue<te.length;++ue){var Me=te[ue];Me.id==Ge&&(X=Me)}var Fe=qr(X.messages[0].data);{Fe[3]=[];var Le=[];a.forEach(function(Ye,Zt){Le[1]=[{type:0,data:Fn(Zt)}],Le[2]=[{type:0,data:Fn(1)}],Le[3]=[{type:2,data:qve(Ye)}],Fe[3].push({type:2,data:_i(Le)})})}X.messages[0].data=_i(Fe);var je=ff(te),qt=gf(je);J.content=qt,J.size=J.content.length})();var ke=qr(L[3][0].data);{var ce=ke[1][0];delete ke[2];var Ie=qr(ce.data);{var Te=Cc(Ie[2][0].data);(function(){for(var J=$n.find(u,o[Te].location),te=Fa(ja(J.content)),X,ue=0;ue<te.length;++ue){var Me=te[ue];Me.id==Te&&(X=Me)}var Fe=qr(X.messages[0].data);{delete Fe[6],delete ke[7];var Le=new Uint8Array(Fe[5][0].data);Fe[5]=[];for(var je=0,qt=0;qt<=r.e.r;++qt){var Ye=qr(Le);je+=eEe(Ye,s[qt],a),Ye[1][0].data=Fn(qt),Fe[5].push({data:_i(Ye),type:2})}Fe[1]=[{type:0,data:Fn(r.e.c+1)}],Fe[2]=[{type:0,data:Fn(r.e.r+1)}],Fe[3]=[{type:0,data:Fn(je)}],Fe[4]=[{type:0,data:Fn(r.e.r+1)}]}X.messages[0].data=_i(Fe);var Zt=ff(te),Nt=gf(Zt);J.content=Nt,J.size=J.content.length})()}ce.data=_i(Ie)}L[3][0].data=_i(ke)}T[4][0].data=_i(L)}y.messages[0].data=_i(T);var ie=ff(g),V=gf(ie);return f.content=V,f.size=f.content.length,u}function nEe(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function dC(n){nEe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function rEe(n,e){return e.bookType=="ods"?aG(n,e):e.bookType=="numbers"?tEe(n,e):e.bookType=="xlsb"?iEe(n,e):sEe(n,e)}function iEe(n,e){Vf=1024,n&&!n.SSF&&(n.SSF=ks(wr)),n&&n.SSF&&(UE(),BE(n.SSF),e.revssf=zE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Um?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=UV.indexOf(e.bookType)>-1,i=yV();dC(e=e||{});var s=qR(),a="",o=0;if(e.cellXfs=[],Pu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",Jt(s,a,EV(n.Props,e)),i.coreprops.push(a),jn(e.rels,2,a,xn.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,Jt(s,a,SV(n.Props)),i.extprops.push(a),jn(e.rels,3,a,xn.EXT_PROPS),n.Custprops!==n.Props&&Ri(n.Custprops||{}).length>0&&(a="docProps/custom.xml",Jt(s,a,TV(n.Custprops)),i.custprops.push(a),jn(e.rels,4,a,xn.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var h={"!id":{}},f=n.Sheets[n.SheetNames[o-1]],g=(f||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,Jt(s,a,ove(o-1,a,e,n,h)),i.sheets.push(a),jn(e.wbrels,-1,"worksheets/sheet"+o+"."+t,xn.WS[0])}if(f){var y=f["!comments"],v=!1,x="";y&&y.length>0&&(x="xl/comments"+o+"."+t,Jt(s,x,uve(y,x)),i.comments.push(x),jn(h,-1,"../comments"+o+"."+t,xn.CMNT),v=!0),f["!legacy"]&&v&&Jt(s,"xl/drawings/vmlDrawing"+o+".vml",GV(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&Jt(s,xV(a),t0(h))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Jt(s,a,cve(e.Strings,a,e)),i.strs.push(a),jn(e.wbrels,-1,"sharedStrings."+t,xn.SST)),a="xl/workbook."+t,Jt(s,a,ave(n,a)),i.workbooks.push(a),jn(e.rels,1,a,xn.WB),a="xl/theme/theme1.xml",Jt(s,a,jV(n.Themes,e)),i.themes.push(a),jn(e.wbrels,-1,"theme/theme1.xml",xn.THEME),a="xl/styles."+t,Jt(s,a,lve(n,a,e)),i.styles.push(a),jn(e.wbrels,-1,"styles."+t,xn.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",Jt(s,a,n.vbaraw),i.vba.push(a),jn(e.wbrels,-1,"vbaProject.bin",xn.VBA)),a="xl/metadata."+t,Jt(s,a,hve(a)),i.metadata.push(a),jn(e.wbrels,-1,"metadata."+t,xn.XLMETA),Jt(s,"[Content_Types].xml",_V(i,e)),Jt(s,"_rels/.rels",t0(e.rels)),Jt(s,"xl/_rels/workbook."+t+".rels",t0(e.wbrels)),delete e.revssf,delete e.ssf,s}function sEe(n,e){Vf=1024,n&&!n.SSF&&(n.SSF=ks(wr)),n&&n.SSF&&(UE(),BE(n.SSF),e.revssf=zE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Um?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=UV.indexOf(e.bookType)>-1,i=yV();dC(e=e||{});var s=qR(),a="",o=0;if(e.cellXfs=[],Pu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",Jt(s,a,EV(n.Props,e)),i.coreprops.push(a),jn(e.rels,2,a,xn.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,Jt(s,a,SV(n.Props)),i.extprops.push(a),jn(e.rels,3,a,xn.EXT_PROPS),n.Custprops!==n.Props&&Ri(n.Custprops||{}).length>0&&(a="docProps/custom.xml",Jt(s,a,TV(n.Custprops)),i.custprops.push(a),jn(e.rels,4,a,xn.CUST_PROPS));var h=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var f={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],y=(g||{})["!type"]||"sheet";switch(y){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,Jt(s,a,ZV(o-1,e,n,f)),i.sheets.push(a),jn(e.wbrels,-1,"worksheets/sheet"+o+"."+t,xn.WS[0])}if(g){var v=g["!comments"],x=!1,w="";if(v&&v.length>0){var T=!1;v.forEach(function(I){I[1].forEach(function(b){b.T==!0&&(T=!0)})}),T&&(w="xl/threadedComments/threadedComment"+o+"."+t,Jt(s,w,D1e(v,h,e)),i.threadedcomments.push(w),jn(f,-1,"../threadedComments/threadedComment"+o+"."+t,xn.TCMNT)),w="xl/comments"+o+"."+t,Jt(s,w,BV(v)),i.comments.push(w),jn(f,-1,"../comments"+o+"."+t,xn.CMNT),x=!0}g["!legacy"]&&x&&Jt(s,"xl/drawings/vmlDrawing"+o+".vml",GV(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}f["!id"].rId1&&Jt(s,xV(a),t0(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Jt(s,a,MV(e.Strings,e)),i.strs.push(a),jn(e.wbrels,-1,"sharedStrings."+t,xn.SST)),a="xl/workbook."+t,Jt(s,a,eG(n)),i.workbooks.push(a),jn(e.rels,1,a,xn.WB),a="xl/theme/theme1.xml",Jt(s,a,jV(n.Themes,e)),i.themes.push(a),jn(e.wbrels,-1,"theme/theme1.xml",xn.THEME),a="xl/styles."+t,Jt(s,a,DV(n,e)),i.styles.push(a),jn(e.wbrels,-1,"styles."+t,xn.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",Jt(s,a,n.vbaraw),i.vba.push(a),jn(e.wbrels,-1,"vbaProject.bin",xn.VBA)),a="xl/metadata."+t,Jt(s,a,VV()),i.metadata.push(a),jn(e.wbrels,-1,"metadata."+t,xn.XLMETA),h.length>1&&(a="xl/persons/person.xml",Jt(s,a,F1e(h)),i.people.push(a),jn(e.wbrels,-1,"persons/person.xml",xn.PEOPLE)),Jt(s,"[Content_Types].xml",_V(i,e)),Jt(s,"_rels/.rels",t0(e.rels)),Jt(s,"xl/_rels/workbook."+t+".rels",t0(e.wbrels)),delete e.revssf,delete e.ssf,s}function aEe(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=$l(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function oG(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return C1(e.file,$n.write(n,{type:Tn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return $n.write(n,e)}function oEe(n,e){var t=ks(e||{}),r=rEe(n,t);return lEe(r,t)}function lEe(n,e){var t={},r=Tn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?$n.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(GE(i))}return e.password&&typeof encrypt_agile<"u"?oG(encrypt_agile(i,e.password),e):e.type==="file"?C1(e.file,i):e.type=="string"?jm(i):i}function cEe(n,e){var t=e||{},r=Ive(n,t);return oG(r,t)}function Ao(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Pp(Mp(r));case"binary":return Mp(r);case"string":return n;case"file":return C1(e.file,r,"utf8");case"buffer":return Tn?Zl(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Ao(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function uEe(n,e){switch(e.type){case"base64":return Pp(n);case"binary":return n;case"string":return n;case"file":return C1(e.file,n,"binary");case"buffer":return Tn?Zl(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function v_(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Pp(t):e.type=="string"?jm(t):t;case"file":return C1(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function lG(n,e){jge(),Xxe(n);var t=ks(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=lG(n,t);return t.type="array",GE(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return Ao(Sve(n,t),t);case"slk":case"sylk":return Ao(Hpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return Ao(rG(n.Sheets[n.SheetNames[i]],t),t);case"txt":return uEe(cG(n.Sheets[n.SheetNames[i]],t),t);case"csv":return Ao(fC(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return Ao(Kpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return v_(Wpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return Ao(Ype.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return Ao(t1e.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return Ao(kV.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return Ao(aG(n,t),t);case"wk1":return v_(IO.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return v_(IO.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),v_(nG(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),cEe(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return oEe(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function hEe(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function dEe(n,e,t){var r={};return r.type="file",r.file=e,hEe(r),lG(n,r)}function fEe(n,e,t,r,i,s,a,o){var l=bi(t),u=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var y=e.s.c;y<=e.e.c;++y){var v=a?n[t][y]:n[r[y]+l];if(v===void 0||v.t===void 0){if(u===void 0)continue;s[y]!=null&&(g[s[y]]=u);continue}var x=v.v;switch(v.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[y]!=null){if(x==null)if(v.t=="e"&&x===null)g[s[y]]=null;else if(u!==void 0)g[s[y]]=u;else if(h&&x===null)g[s[y]]=null;else continue;else g[s[y]]=h&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?x:Wl(v,x,o);x!=null&&(f=!1)}}return{row:g,isempty:f}}function Iv(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},h=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof h){case"string":l=tr(h);break;case"number":l=tr(n["!ref"]),l.s.r=h;break;default:l=h}r>0&&(i=0);var f=bi(l.s.r),g=[],y=[],v=0,x=0,w=Array.isArray(n),T=l.s.r,I=0,b={};w&&!n[T]&&(n[T]=[]);var N=u.skipHidden&&n["!cols"]||[],F=u.skipHidden&&n["!rows"]||[];for(I=l.s.c;I<=l.e.c;++I)if(!(N[I]||{}).hidden)switch(g[I]=Hi(I),t=w?n[T][I]:n[g[I]+f],r){case 1:s[I]=I-l.s.c;break;case 2:s[I]=g[I];break;case 3:s[I]=u.header[I-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=Wl(t,null,u),x=b[a]||0,!x)b[a]=1;else{do o=a+"_"+x++;while(b[o]);b[a]=x,b[o]=1}s[I]=o}for(T=l.s.r+i;T<=l.e.r;++T)if(!(F[T]||{}).hidden){var W=fEe(n,l,T,g,r,s,w,u);(W.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(y[v++]=W.row)}return y.length=v,y}var NO=/"/g;function gEe(n,e,t,r,i,s,a,o){for(var l=!0,u=[],h="",f=bi(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var y=o.dense?(n[t]||[])[g]:n[r[g]+f];if(y==null)h="";else if(y.v!=null){l=!1,h=""+(o.rawNumbers&&y.t=="n"?y.v:Wl(y,null,o));for(var v=0,x=0;v!==h.length;++v)if((x=h.charCodeAt(v))===i||x===s||x===34||o.forceQuotes){h='"'+h.replace(NO,'""')+'"';break}h=="ID"&&(h='"ID"')}else y.f!=null&&!y.F?(l=!1,h="="+y.f,h.indexOf(",")>=0&&(h='"'+h.replace(NO,'""')+'"')):h="";u.push(h)}return o.blankrows===!1&&l?null:u.join(a)}function fC(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=tr(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),h="",f=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],y=r.skipHidden&&n["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(g[v]||{}).hidden||(f[v]=Hi(v));for(var x=0,w=i.s.r;w<=i.e.r;++w)(y[w]||{}).hidden||(h=gEe(n,i,w,f,a,l,s,r),h!=null&&(r.strip&&(h=h.replace(u,"")),(h||r.blankrows!==!1)&&t.push((x++?o:"")+h)));return delete r.dense,t.join("")}function cG(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=fC(n,e);return t}function mEe(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=tr(n["!ref"]),s="",a=[],o,l=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=Hi(o);for(var h=i.s.r;h<=i.e.r;++h)for(s=bi(h),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[h]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function uG(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?ui(r.origin):r.origin;a=l.r,o=l.c}var u,h={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var f=tr(s["!ref"]);h.e.c=Math.max(h.e.c,f.e.c),h.e.r=Math.max(h.e.r,f.e.r),a==-1&&(a=f.e.r+1,h.e.r=a+e.length-1+i)}else a==-1&&(a=0,h.e.r=e.length-1+i);var g=r.header||[],y=0;e.forEach(function(x,w){Ri(x).forEach(function(T){(y=g.indexOf(T))==-1&&(g[y=g.length]=T);var I=x[T],b="z",N="",F=zn({c:o+y,r:a+w+i});u=Op(s,F),I&&typeof I=="object"&&!(I instanceof Date)?s[F]=I:(typeof I=="number"?b="n":typeof I=="boolean"?b="b":typeof I=="string"?b="s":I instanceof Date?(b="d",r.cellDates||(b="n",I=Ps(I)),N=r.dateNF||wr[14]):I===null&&r.nullError&&(b="e",I=0),u?(u.t=b,u.v=I,delete u.w,delete u.R,N&&(u.z=N)):s[F]=u={t:b,v:I},N&&(u.z=N))})}),h.e.c=Math.max(h.e.c,o+g.length-1);var v=bi(a);if(i)for(y=0;y<g.length;++y)s[Hi(y+o)+v]={t:"s",v:g[y]};return s["!ref"]=Br(h),s}function pEe(n,e){return uG(null,n,e)}function Op(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=ui(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?Op(n,zn(e)):Op(n,zn({r:e,c:t||0}))}function yEe(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function _Ee(){return{SheetNames:[],Sheets:{}}}function xEe(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(JV(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function vEe(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=yEe(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function EEe(n,e){return n.z=e,n}function hG(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function wEe(n,e,t){return hG(n,"#"+e,t)}function SEe(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function TEe(n,e,t,r){for(var i=typeof e!="string"?e:tr(e),s=typeof e=="string"?e:Br(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=Op(n,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=t,r&&(l.D=!0))}return n}var $S={encode_col:Hi,encode_row:bi,encode_cell:zn,encode_range:Br,decode_col:nC,decode_row:tC,split_cell:jme,decode_cell:ui,decode_range:na,format_cell:Wl,sheet_add_aoa:hV,sheet_add_json:uG,sheet_add_dom:iG,aoa_to_sheet:K0,json_to_sheet:pEe,table_to_sheet:sG,table_to_book:Kve,sheet_to_csv:fC,sheet_to_txt:cG,sheet_to_json:Iv,sheet_to_html:rG,sheet_to_formulae:mEe,sheet_to_row_object_array:Iv,sheet_get_cell:Op,book_new:_Ee,book_append_sheet:xEe,book_set_sheet_visibility:vEe,cell_set_number_format:EEe,cell_set_hyperlink:hG,cell_set_internal_link:wEe,cell_add_comment:SEe,sheet_set_array_formula:TEe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Uo=Aa()(B0((n,e)=>({vondsten:[],addVondst:t=>n(r=>({vondsten:[...r.vondsten,{...t,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:t=>n(r=>({vondsten:r.vondsten.filter(i=>i.id!==t)})),updateVondst:(t,r)=>n(i=>({vondsten:i.vondsten.map(s=>s.id===t?{...s,...r}:s)})),clearAll:()=>n({vondsten:[]}),exportAsGeoJSON:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:t.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:[o.location.lng,o.location.lat]},properties:{id:o.id,objectType:o.objectType,material:o.material,period:o.period,depth:o.depth,notes:o.notes,timestamp:o.timestamp,photoUrl:o.photoUrl,condition:o.condition,weight:o.weight,length:o.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},exportAsCSV:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=t.map(u=>{const h=new Date(u.timestamp).toLocaleDateString("nl-NL"),f=u.notes?`"${u.notes.replace(/"/g,'""')}"`:"";return`${u.id},${u.location.lat},${u.location.lng},${h},${u.objectType},${u.material},${u.period},${u.depth||""},${u.condition||""},${u.weight||""},${u.length||""},${f},${u.photoUrl||""}`}).join(`
`),s=r+i,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},exportAsExcel:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(o=>({ID:o.id,Latitude:o.location.lat,Longitude:o.location.lng,Datum:new Date(o.timestamp).toLocaleDateString("nl-NL"),Type:o.objectType,Materiaal:o.material,Periode:o.period,"Diepte (cm)":o.depth||"",Conditie:o.condition||"","Gewicht (g)":o.weight||"","Lengte (mm)":o.length||"",Notities:o.notes||"","Foto URL":o.photoUrl||""})),i=$S.json_to_sheet(r),s=$S.book_new();$S.book_append_sheet(s,i,"Vondsten");const a=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=a,dEe(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(l=>{const u=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${u}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},exportAsKML:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${t.map(l=>{const u=new Date(l.timestamp).toLocaleDateString("nl-NL"),h=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${u}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${h}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}}),{name:"detectorapp-local-vondsten"}));pn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function IEe(n){if(!n)return n;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let t=n;return Object.entries(e).forEach(([r,i])=>{t=t.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),t=t.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),t}async function AEe(n){try{const e=mn(n),t=pn("EPSG:4326","EPSG:28992",e);if(t[0]<7e3||t[0]>3e5||t[1]<289e3||t[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${t[0]-r},${t[1]-r},${t[0]+r},${t[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,o=await(await fetch(s)).json();if(o.features&&o.features.length>0){const l=o.features[0].properties,u=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(u!=null){const h=typeof u=="number"?u:parseFloat(u);if(!isNaN(h))return h}}}catch(e){console.warn("AHN height query failed:",e)}return null}const bEe={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},REe={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function LO(n,e){const t=[],r=n.toLowerCase(),i=(e||"").toLowerCase();return r.includes("kalkhoudend")||i.endsWith("a")?t.push("Kalkhoudend = goede metaalconservering"):(r.includes("kalkarm")||r.includes("kalkloos"))&&t.push("Kalkarm = meer corrosie op metalen"),r.includes("poldervaag")?t.push("Poldervaaggrond = jonge rivierklei, ingepolderd gebied"):r.includes("enkeerdgrond")||r.includes("enk")?t.push("Enkeerdgrond = oude akkers met plaggenbemesting - archeologisch interessant!"):r.includes("podzol")?t.push("Podzolgrond = uitgeloogde zandgrond, vaak zuur"):(r.includes("veengrond")||r.includes("veen"))&&t.push("Veengrond = zuur, slechte metaalconservering (tenzij waterverzadigd)"),r.includes("zware klei")?t.push("Zware klei = moeilijk graven, goede conservering"):r.includes("lichte klei")||r.includes("zavel")?t.push("Zavel/lichte klei = redelijk te graven"):r.includes("zand")&&!r.includes("zavel")&&t.push("Zandgrond = makkelijk graven"),r.includes("rivierklei")||i.startsWith("r")?t.push("Rivierafzetting"):(r.includes("zeeklei")||i.startsWith("m"))&&t.push("Zeekleiafzetting"),t}function CEe(){const n=os(Ye=>Ye.map),e=Uo(Ye=>Ye.removeVondst),t=Uo(Ye=>Ye.updateVondst),r=Uo(Ye=>Ye.vondsten),{layers:i,addPoint:s}=$i(),[a,o]=se.useState([]),[l,u]=se.useState(0),[h,f]=se.useState(!1),[g,y]=se.useState(null),[v,x]=se.useState(!1),[w,T]=se.useState(!1),[I,b]=se.useState(null),[N,F]=se.useState(null),[W,M]=se.useState(null),[C,P]=se.useState(!1),[L,O]=se.useState(null),[U,j]=se.useState(null),[xe,Ce]=se.useState(()=>{const Ye=localStorage.getItem("popupTextScale");return Ye?parseInt(Ye):100}),Ge=Ye=>{Ce(Ye),localStorage.setItem("popupTextScale",Ye.toString())},ke=a[l]||"",ce=a.length>1,Ie=Ye=>{const Zt=Ye.match(/<strong[^>]*>(.*?)<\/strong>/);if(Zt){const Nt=Zt[1].replace(/<[^>]+>/g,""),at=Ye.replace(Zt[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:Nt,contentWithoutTitle:at}}return{title:"",contentWithoutTitle:Ye}},Te=Ye=>Ye.replace(/class="([^"]*)"/g,(Nt,at)=>{if(at.includes("text-xs")){const yt=at.replace(/\btext-xs\b/g,"").trim();return yt?`style="font-size:0.857em" class="${yt}"`:'style="font-size:0.857em"'}if(at.includes("text-sm")){const yt=at.replace(/\btext-sm\b/g,"").trim();return yt?`class="${yt}"`:""}return Nt}).replace(/class=""/g,""),{title:ie,contentWithoutTitle:V}=Ie(ke),J=Te(V),te=ke.includes("Landbouwperceel"),X=ke.includes("data-vondst-id="),ue=()=>{u(Ye=>(Ye-1+a.length)%a.length)},Me=()=>{u(Ye=>(Ye+1)%a.length)},Fe=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",g),!n||!g||w){console.log(" STOP - map:",!!n,"coord:",g,"loading:",w);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${g[0]}, ${g[1]}]`),T(!0);try{await Oge(n,g)&&x(!0)}catch(Ye){console.error("Failed to load height map:",Ye)}finally{T(!1)}},Le=()=>{n&&(FI(n),x(!1))};se.useEffect(()=>{if(!n)return;const Ye=at=>{let yt='<strong class="text-purple-800">AMK Monument</strong>';if(at.toponiem&&(yt+=`<br/><span class="text-sm font-semibold">${at.toponiem}</span>`),at.kwaliteitswaarde&&(yt+=`<br/><span class="text-sm text-purple-700">${at.kwaliteitswaarde}</span>`),at.omschrijving&&(yt+=`<br/><span class="text-xs text-gray-600 mt-1 block">${at.omschrijving}</span>`),at.txt_label){const Oe=at.txt_label.split(", ").slice(0,3).join(", ");yt+=`<br/><span class="text-xs text-gray-500 italic">${Oe}${at.txt_label.split(", ").length>3?"...":""}</span>`}return yt},Zt=async(at,yt)=>{const Oe=[],bn=n.getLayers().getArray().filter($t=>$t instanceof nh&&$t.getVisible()?$t.getSource()instanceof YW:!1);for(const $t of bn){const Xt=$t.getSource();if(!Xt)continue;const It=$t.get("title")||"";if(It.startsWith("Paleokaart"))continue;if(It==="Archeo Landschappen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,ae=z.landschapsnaam||z.naam||"Archeologisch Landschap",qe=z.omschrijving||"";let we=`<strong class="text-green-800">${ae}</strong>`;qe&&(we+=`<br/><span class="text-sm text-gray-600">${qe}</span>`),we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Een archeologisch landschap is een gebied waar het landschap nog sporen draagt van menselijke activiteit uit het verleden. Denk aan oude akkers, nederzettingen of verdedigingswerken.</div>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Aardewerk, munten, gereedschap en andere voorwerpen van vroegere bewoners. De kans op vondsten hangt af van het type landschap.</div>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',we+='<div class="text-sm text-gray-700 mt-1"><a href="https://www.cultureelerfgoed.nl/onderwerpen/bronnen-en-kaarten/overzicht/landschappenkaart" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Landschappenkaart</a></div>',we+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Landschapstypen_van_Nederland" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Landschapstypen</a></div>',Oe.push(we)}}catch(Ae){console.warn("Archeo Landschappen WMS query failed:",Ae)}continue}if(It==="Essen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(z.naam||z.Naam||z.NAME)&&(ae+=`<br/><span class="text-sm font-semibold text-amber-700">${z.naam||z.Naam||z.NAME}</span>`),(z.type||z.Type||z.TYPE)&&(ae+=`<br/><span class="text-xs text-gray-600">${z.type||z.Type||z.TYPE}</span>`),(z.omschrijving||z.Omschrijving)&&(ae+=`<br/><span class="text-xs text-gray-500">${z.omschrijving||z.Omschrijving}</span>`),ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is een es?</span></div>',ae+='<div class="text-sm text-gray-700 mt-1">Een es is een oud akkercomplex op hogere zandgronden. Eeuwenlang werden hier gewassen verbouwd. De bodem werd bemest met plaggen en mest, waardoor de grond donker en vruchtbaar werd.</div>',ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ae+='<div class="text-sm text-gray-700 mt-1">Munten, gespen, knopen, aardewerk en soms bijzondere voorwerpen die door bemesting op het land terechtkwamen. Essen behoren tot de beste vindplaatsen voor metaaldetectie.</div>',ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Conservering</span></div>',ae+='<div class="text-sm text-gray-700 mt-1 italic">De zure zandgrond tast metaal aan. IJzer en koper zijn vaak slecht bewaard. Zilver en brons houden zich beter.</div>',ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',ae+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Es_(landbouw)" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Es (landbouw)</a></div>',Oe.push(ae)}}catch(Ae){console.warn("Essen WMS query failed:",Ae)}continue}if(It==="FAMKE Steentijd"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=FAMKE_Advies_steentijd-bronstijd3339&QUERY_LAYERS=FAMKE_Advies_steentijd-bronstijd3339&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';ae+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart voor oude vondsten</span>';const qe=z.advies||z.Advies||"";if(qe){ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',ae+=`<div class="text-sm text-amber-700 mt-1">${qe}</div>`;const we=qe.toLowerCase();let Je="",gt="text-gray-600",dt="";we.includes("karterend")?(Je="Op deze plek verwachten archeologen vondsten uit de steentijd of bronstijd. Bij graafwerk moet er eerst onderzoek komen.",dt="Goede kans op oude vondsten (vuursteen, bijlen, aardewerk)",gt="text-amber-600"):we.includes("waarderend")?(Je="Hier zijn mogelijk belangrijke vindplaatsen. Proefsleuven zijn nodig om te kijken wat er precies zit.",dt="Mogelijk interessante vondsten uit de prehistorie",gt="text-orange-600"):we.includes("geen")?(Je="De kans op prehistorische vondsten is hier klein. De grond is waarschijnlijk te jong of te veel verstoord.",dt="Weinig kans op steentijd-vondsten",gt="text-green-600"):we.includes("quickscan")&&(Je="Hier is eerst bureau-onderzoek nodig. Er kunnen vondsten zitten, maar dat is nog niet zeker.",dt="Onbekend, nader onderzoek nodig",gt="text-blue-600"),Je&&(ae+=`<div class="text-sm ${gt} mt-1">${Je}</div>`),dt&&(ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ae+=`<div class="text-sm text-gray-700 mt-1">${dt}</div>`),ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',ae+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de steentijd en bronstijd te verwachten zijn.</div>'}Oe.push(ae)}}catch(Ae){console.warn("FAMKE WMS query failed:",Ae)}continue}if(It==="Archeo Onderzoeken"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-blue-800">Archeologisch Onderzoek</strong>';const qe=z.type_onderzoek||"";if(qe&&(ae+=`<br/><span class="text-sm font-semibold text-blue-700">${qe}</span>`),z.onderzoeksmeldingnummer&&(ae+=`<br/><span class="text-xs text-gray-500">Melding: ${z.onderzoeksmeldingnummer}</span>`),z.uitvoerder&&(ae+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${z.uitvoerder}</span>`),z.startdatum||z.einddatum){const we=[z.startdatum,z.einddatum].filter(Boolean).join(" - ");ae+=`<br/><span class="text-xs text-gray-600">Periode: ${we}</span>`}z.gemeente&&(ae+=`<br/><span class="text-xs text-gray-500">${z.gemeente}</span>`),ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',qe.toLowerCase().includes("opgraving")?ae+='<div class="text-sm text-gray-700 mt-1">Hier is een archeologische opgraving gedaan. Professionele archeologen hebben vondsten en sporen gedocumenteerd en geborgen.</div>':qe.toLowerCase().includes("bureauonderzoek")?ae+='<div class="text-sm text-gray-700 mt-1">Een bureauonderzoek naar de archeologische verwachting op basis van historische bronnen en kaarten.</div>':qe.toLowerCase().includes("booronderzoek")?ae+='<div class="text-sm text-gray-700 mt-1">Met boringen is onderzocht wat er in de grond zit. Vaak de eerste stap om te bepalen of er verder onderzoek nodig is.</div>':qe.toLowerCase().includes("proefsleuven")?ae+='<div class="text-sm text-gray-700 mt-1">Proefsleuven zijn gegraven om te kijken of er archeologische sporen in de grond zitten.</div>':ae+='<div class="text-sm text-gray-700 mt-1">Op deze locatie is archeologisch onderzoek uitgevoerd. De resultaten zijn opgeslagen in het landelijke archief.</div>',ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Interessant voor detectie?</span></div>',ae+='<div class="text-sm text-gray-700 mt-1 italic">Onderzoekslocaties kunnen interessant zijn: archeologen vinden vaak niet alles. Maar check altijd eerst of je daar mag zoeken.</div>',ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',z.onderzoeksmeldingnummer&&(ae+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archis.cultureelerfgoed.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek in ARCHIS</a> <span class="text-gray-400">(melding ${z.onderzoeksmeldingnummer})</span></div>`),ae+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Archeologisch_onderzoek" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Archeologisch onderzoek</a></div>',Oe.push(ae)}}catch(Ae){console.warn("Archeo Onderzoeken WMS query failed:",Ae)}continue}if(It==="IKAW"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=500,Z=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,ae=Math.round(z.PALETTE_INDEX||z.palette_index||0),qe=REe[ae]||`Trefkans onbekend (${ae})`;let we='<strong class="text-orange-800">IKAW Verwachtingskaart</strong>';we+='<br/><span class="text-sm text-gray-500">Kaart met kansen op archeologische vondsten</span>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',we+=`<div class="text-sm text-orange-700 mt-1">${qe}</div>`;const gt={1:{tekst:"De kans op archeologische vondsten is hier zeer klein. De grond is waarschijnlijk verstoord of te jong.",vondsten:"Niet veel te verwachten, maar verrassingen zijn altijd mogelijk.",kleur:"text-gray-600"},2:{tekst:"De kans op vondsten is laag, maar niet uitgesloten. Soms worden hier toch interessante objecten gevonden.",vondsten:"Af en toe losse vondsten uit verschillende periodes.",kleur:"text-yellow-600"},3:{tekst:"Dit is een interessant gebied met een redelijke kans op vondsten. Hier woonden of werkten mensen in het verleden.",vondsten:"Aardewerk, munten, metalen voorwerpen uit verschillende tijdperken.",kleur:"text-amber-600"},4:{tekst:"Dit is een zeer kansrijk gebied! Hier zijn waarschijnlijk resten van oude bewoning of activiteit. Let op: bij graafwerk kan een vergunning nodig zijn.",vondsten:"Grote kans op interessante vondsten: aardewerk, munten, sieraden, gereedschap.",kleur:"text-orange-600"},5:{tekst:"Dit is een waterbodem. Vondsten zijn hier moeilijker te bereiken maar kunnen goed bewaard zijn gebleven.",vondsten:"Scheepswrakken, verloren lading, gedumpte voorwerpen.",kleur:"text-blue-600"},6:{tekst:"Waterbodem met archeologische potentie. Hier kunnen interessante vondsten liggen die door het water goed bewaard zijn.",vondsten:"Scheepsresten, ankers, aardewerk, metalen voorwerpen.",kleur:"text-blue-600"},7:{tekst:"Waterbodem met hoge archeologische waarde. Hier zijn bekende vindplaatsen of scheepswrakken.",vondsten:"Belangrijke maritieme vondsten, beschermd gebied.",kleur:"text-blue-700"}}[ae];gt&&(we+=`<div class="text-sm ${gt.kleur} mt-1">${gt.tekst}</div>`,we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',we+=`<div class="text-sm text-gray-700 mt-1">${gt.vondsten}</div>`),we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de IKAW?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">De IKAW (Indicatieve Kaart Archeologische Waarden) toont de kans op archeologische vondsten in heel Nederland. De kaart is gemaakt door de Rijksdienst voor het Cultureel Erfgoed.</div>',Oe.push(we)}}catch(Ae){console.warn("IKAW WMS query failed:",Ae)}continue}if(It==="Inundatiegebieden"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-blue-800">Inundatiegebied</strong>';(z["linie-naam"]||z.linie_naam)&&(ae+=`<br/><span class="text-sm font-semibold text-blue-700">${z["linie-naam"]||z.linie_naam}</span>`),z.naam&&(ae+=`<br/><span class="text-sm text-gray-700">${z.naam}</span>`),z.periode&&(ae+=`<br/><span class="text-xs text-gray-500">${z.periode}</span>`),z.lin_period&&(ae+=`<br/><span class="text-xs text-gray-400">${z.lin_period}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Inundatiegebieden WMS query failed:",Ae)}continue}if(It==="Militaire Objecten"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=50,Z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,ae=z.obj_soort||"",qe=z.obj_naam||"",we=z.lin_period||"",Je=z["linie-naam"]||z.linie_naam||"";let gt=ae||"Militair Object",dt="Dit is een historisch militair object uit de Nederlandse verdedigingsgeschiedenis.",At="";const Rt=ae.toLowerCase();Rt.includes("fort")?(dt="Een fort is een versterkte verdedigingspost, vaak met dikke muren en geschutsopstellingen. Forten maakten deel uit van grotere verdedigingslinies.",At="Rond forten worden soms kogels, knopen van uniformen, muntjes of andere militaire voorwerpen gevonden."):Rt.includes("schans")?(dt="Een schans is een kleinere versterking, vaak gemaakt van aarde en palissaden. Schansen werden gebruikt om strategische punten te verdedigen.",At="Bij schansen kun je musketkogels, knopen en soms munten uit de 17e-18e eeuw tegenkomen."):Rt.includes("batterij")||Rt.includes("battery")?(dt="Een batterij is een geschutsopstelling, vaak op een strategische plek om vijanden onder vuur te nemen.",At="Bij batterijen worden soms kanonkogels of onderdelen van geschut gevonden."):Rt.includes("bunker")||Rt.includes("kazemat")?(dt="Een bunker of kazemat is een versterkte betonnen schuilplaats. Veel werden gebouwd rond 1940 als onderdeel van verdedigingslinies.",At="Bij bunkers worden soms militaire voorwerpen uit WOII gevonden, zoals knopen, gespen of munitieresten."):Rt.includes("sluis")||Rt.includes("inlaatwerk")?(dt="Militaire sluizen en inlaatwerken werden gebruikt om land onder water te zetten (inunderen). Dit was een belangrijke verdedigingstactiek.",At="Bij historische sluizen worden soms voorwerpen gevonden van soldaten die deze bewaakten."):Rt.includes("toren")||Rt.includes("wachttoren")?(dt="Wachttorens werden gebruikt om de omgeving in de gaten te houden en vijandelijke bewegingen te signaleren.",At="Bij torens worden soms persoonlijke voorwerpen van soldaten gevonden."):Rt.includes("kazerne")&&(dt="Een kazerne is een gebouw waar soldaten gelegerd waren. Hier woonden, aten en oefenden de troepen.",At="Rond kazernes worden regelmatig knopen, gespen en andere persoonlijke voorwerpen gevonden.");let tn=`<strong class="text-stone-800">${gt}</strong>`;qe&&(tn+=`<br/><span class="text-sm font-semibold text-stone-700">${qe}</span>`),Je&&(tn+=`<br/><span class="text-sm text-blue-600">${Je}</span>`),we&&(tn+=`<br/><span class="text-xs text-gray-500">${we}</span>`),tn+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',tn+=`<div class="text-sm text-gray-700 mt-1">${dt}</div>`,At&&(tn+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',tn+=`<div class="text-sm text-gray-700 mt-1">${At}</div>`),tn+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',tn+='<div class="text-sm text-gray-700 mt-1">',tn+='<a href="https://erfgoedenlocatie.nl/linies-en-stellingen" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Linies en Stellingen</a>',tn+="</div>",Oe.push(tn)}}catch(Ae){console.warn("Militaire Objecten WMS query failed:",Ae)}continue}if(It==="Verdedigingslinies"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-amber-800">Verdedigingslinie</strong>';const qe={"Hollandse Waterlinie":"Verdedigingsstelsel (1815-1940) dat gebruik maakte van inundaties om Holland te beschermen. UNESCO Werelderfgoed.","Nieuwe Hollandse Waterlinie":"Uitgebreide versie (1815-1940) met forten en inundatiegebieden van Muiden tot Gorinchem.","Stelling van Amsterdam":"Ringverdediging rond Amsterdam (1880-1920) met 42 forten. UNESCO Werelderfgoed.",Grebbelinie:"Verdedigingslinie langs de Grebbe (17e-20e eeuw). Zware gevechten in mei 1940.",IJssellinie:"Koude Oorlog verdediging (1950-1968) langs de IJssel tegen Sovjet-invasie.",Atlantikwall:"Duitse kustverdediging WOII (1942-1945) van Noorwegen tot Spanje.","Peel-Raamstelling":"Verdedigingslinie in Brabant/Limburg. Gevechten mei 1940.","Maas-Waalstelling":"Linie tussen Maas en Waal, onderdeel landsverdediging.",Zuiderwaterlinie:"Waterlinie in West-Brabant en Zeeland (17e-19e eeuw).","Staats-Spaanse Linies":"Vestingwerken uit de 80-jarige oorlog (1568-1648)."},we=z.naam||z.lin_naam||"";if(we){ae+=`<br/><span class="text-sm font-semibold text-amber-700">${we}</span>`;const Je=Object.entries(qe).find(([gt])=>we.toLowerCase().includes(gt.toLowerCase())||gt.toLowerCase().includes(we.toLowerCase()));Je&&(ae+=`<br/><span class="text-sm text-gray-700">${Je[1]}</span>`)}z.lin_period&&(ae+=`<br/><span class="text-xs text-purple-600">${z.lin_period}</span>`),z.status&&(ae+=`<br/><span class="text-xs text-gray-400">${z.status}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Verdedigingslinies WMS query failed:",Ae)}continue}if(It==="Rijksmonumenten"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=50,Z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-red-800">Rijksmonument</strong>';(z.cbsNaam||z.cbs_naam)&&(ae+=`<br/><span class="text-sm font-semibold">${z.cbsNaam||z.cbs_naam}</span>`),z.hoofdcategorie&&(ae+=`<br/><span class="text-sm text-red-700">${z.hoofdcategorie}</span>`),z.subcategorie&&(ae+=`<br/><span class="text-xs text-gray-600">${z.subcategorie}</span>`),z.rijksmonumentnummer&&(ae+=`<br/><span class="text-xs text-gray-500">Nr: ${z.rijksmonumentnummer}</span>`),(z.bouwjaar||z.oorspronkelijkebouwjaar)&&(ae+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.bouwjaar||z.oorspronkelijkebouwjaar}</span>`),ae+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',z.rijksmonumentnummer&&(ae+=`<div class="text-sm text-gray-700 mt-1"><a href="https://monumentenregister.cultureelerfgoed.nl/monumenten/${z.rijksmonumentnummer}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk in Monumentenregister</a></div>`),ae+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Rijksmonument" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Rijksmonument</a></div>',Oe.push(ae)}}catch(Ae){console.warn("Rijksmonumenten WMS query failed:",Ae)}continue}if(It==="Werelderfgoed"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=500,Z=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(z.siteName||z.naam)&&(ae+=`<br/><span class="text-sm font-semibold text-cyan-700">${z.siteName||z.naam}</span>`),z.siteDesignation&&(ae+=`<br/><span class="text-xs text-gray-600">${z.siteDesignation}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Werelderfgoed WMS query failed:",Ae)}continue}if(It==="Terpen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=terpen3335&QUERY_LAYERS=terpen3335&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,ae=z.naam||z.NAAM||z.Naam||"Terp",qe=z.plaats||z.PLAATS||z.Plaats||"";let we=`<strong class="text-orange-800">${ae}</strong>`;qe&&(we+=`<br/><span class="text-sm text-gray-500">${qe}</span>`),we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Een terp is een kunstmatige heuvel. Mensen bouwden deze heuvels om droog te wonen in het vlakke, natte land. Terpen zijn vaak meer dan 2000 jaar oud.</div>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Op en rond terpen worden vaak vondsten gedaan:</div>',we+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',we+="<li>Middeleeuws aardewerk en botten</li>",we+="<li>Munten uit verschillende periodes</li>",we+="<li>Metalen voorwerpen (gespen, fibulae, sieraden)</li>",we+="<li>Soms Romeinse of zelfs prehistorische vondsten</li>",we+="</ul>",we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waarom zijn terpen interessant?</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Terpen waren vaak dorpskernen waar mensen eeuwenlang woonden. Door de ophoging bleven veel voorwerpen goed bewaard. Let op: sommige terpen zijn beschermd monument!</div>',we+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',we+='<div class="text-sm text-gray-700 mt-1">Veel terpen zijn nog zichtbaar in het landschap. Vraag altijd toestemming aan de grondeigenaar voordat je gaat detecteren.</div>',Oe.push(we)}}catch(Ae){console.warn("Terpen WMS query failed:",Ae)}continue}if(It==="Religieus Erfgoed"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=50,Z=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,ae=z.naam||z.NAAM||z.name||z.NAME||"Onbekend",qe=z.denominatie||z.DENOMINATIE||z.religie||"",we=z.type||z.TYPE||z.functie||"",Je=z.bouwjaar||z.BOUWJAAR||z.jaar||"",gt=z.gemeente||z.GEMEENTE||z.plaats||"";let dt=`<strong class="text-purple-800">${ae}</strong>`;const At=we.toLowerCase();let Rt="Een religieus gebouw of heilige plek.",tn="Munten van kerkgangers, knopen, gespen, religieuze voorwerpen";At.includes("kerk")||At.includes("church")?(Rt="Een kerk was het hart van de gemeenschap. Hier kwamen mensen samen voor diensten, maar ook voor belangrijke gebeurtenissen.",tn="Munten uit de collecte, knopen, gespen, pelgrimsinsignes, loden zegels"):At.includes("kapel")||At.includes("chapel")?(Rt="Een kapel is een klein gebedshuis, vaak bij een landgoed, langs een weg, of op een bijzondere plek.",tn="Devotionalia, munten, kruisjes, rozenkransen"):At.includes("synagoge")?(Rt="Een synagoge is een Joods gebedshuis. Veel synagogen in Nederland zijn verwoest of herbestemd na de Tweede Wereldoorlog.",tn="Munten, knopen, kleine religieuze voorwerpen"):At.includes("klooster")||At.includes("monastery")?(Rt="Een klooster was een woon- en werkplek voor monniken of nonnen. Veel kloosters hadden eigen werkplaatsen en landerijen.",tn="Religieuze voorwerpen, zegels, gereedschap, aardewerk, middeleeuwse munten"):At.includes("toren")||At.includes("tower")?(Rt="Een kerktoren of klokkentoren. Soms is alleen de toren nog over van een verdwenen kerk.",tn="Munten, knopen, bouwmateriaal"):(At.includes("begraafplaats")||At.includes("cemetery"))&&(Rt="Een historische begraafplaats. Detecteren op begraafplaatsen is niet toegestaan zonder toestemming.",tn="Detecteren hier niet toegestaan"),qe&&(dt+=`<br/><span class="text-sm text-purple-600">${qe}</span>`),we&&(dt+=`<br/><span class="text-sm text-gray-600">${we}</span>`),Je&&(dt+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${Je}</span>`),gt&&(dt+=`<br/><span class="text-xs text-gray-400">${gt}</span>`),dt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',dt+=`<div class="text-sm text-gray-700 mt-1">${Rt}</div>`,dt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',dt+=`<div class="text-sm text-gray-700 mt-1">${tn}</div>`,dt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',At.includes("begraafplaats")?dt+='<div class="text-sm text-red-600 mt-1">Detecteren op begraafplaatsen is niet toegestaan. Respecteer de rust van de overledenen.</div>':dt+='<div class="text-sm text-gray-700 mt-1">Veel kerken en religieuze gebouwen zijn beschermd monument. Vraag altijd toestemming voordat je gaat detecteren op het terrein.</div>',Oe.push(dt)}}catch(Ae){console.warn("Religieus Erfgoed WMS query failed:",Ae)}continue}if(It==="Gewaspercelen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=50,St=`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`,Z=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${St}`,jt=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${St}`,[re,z]=await Promise.all([fetch(Z),fetch(jt).catch(()=>null)]),ae=await re.json();if(ae.features&&ae.features.length>0){const qe=ae.features[0].properties;let we='<strong class="text-green-800">Landbouwperceel</strong>';if((qe.gewas||qe.gewasnaam)&&(we+=`<br/><span class="text-sm font-semibold text-green-700">${qe.gewas||qe.gewasnaam}</span>`),(qe.categorie||qe.category)&&(we+=`<br/><span class="text-xs text-gray-600">${qe.categorie||qe.category}</span>`),qe.oppervlakte&&(we+=`<br/><span class="text-xs text-gray-500">${qe.oppervlakte} ha</span>`),z)try{const Je=await z.json();if(Je.features&&Je.features.length>0){const gt=Je.features[0].properties,dt=gt.first_soilname||gt.soilname||gt.bodemtype,At=gt.first_soilcode||gt.soilcode||gt.maparea_soilcode;if(dt){we+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${dt}</span>`;const Rt=LO(dt,At);Rt.length>0&&(we+=`<br/><span class="text-xs text-gray-500 italic">${Rt.join("  ")}</span>`)}}}catch{}Oe.push(we)}}catch(Ae){console.warn("BRP Gewaspercelen WMS query failed:",Ae)}continue}if(It==="Kadastrale Grenzen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=20,Z=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,ae=z.kadastraleGemeenteWaarde||z.kadastrale_gemeente_waarde||z.kadastraleGemeente||bEe[String(z.kadastraleGemeenteCode)]||z.kadastraleGemeenteCode,qe=z.sectie||z.Sectie||"",we=z.perceelnummer||z.perceelNummer||z.Perceelnummer||"",Je=z.kadastraleGrootteWaarde||z.kadastrale_grootte_waarde||z.kadastraleGrootte||z.oppervlakte,gt=z.AKRKadastraleGemeenteCodeWaarde||z.akrKadastraleGemeenteCodeWaarde||"",dt=[ae,qe,we].filter(Boolean).join(" "),At=gt&&qe&&we?`${gt}-${qe}-${we}`:"";let Rt='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(dt&&(Rt+=`<br/><span class="text-sm text-indigo-700">${dt}</span>`),At&&(Rt+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${At}</span>`),Je){const tn=typeof Je=="number"?Je:parseFloat(Je);isNaN(tn)||(Rt+=`<br/><span class="text-xs text-gray-600">${tn.toLocaleString("nl-NL")} m</span>`)}Rt+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code, ga naar </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-600"> en klik "Zoek op aanduiding"</span><span class="text-xs text-gray-400"> (betaalde dienst)</span>',Oe.push(Rt)}}catch(Ae){console.warn("Kadastrale Grenzen WMS query failed:",Ae)}continue}if(It==="Scheepswrakken"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-cyan-800">Scheepswrak</strong>';(z.naam||z.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-cyan-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.datering||z.DATERING)&&(ae+=`<br/><span class="text-xs text-gray-500">Datering: ${z.datering||z.DATERING}</span>`),(z.bron||z.BRON)&&(ae+=`<br/><span class="text-xs text-gray-400">${z.bron||z.BRON}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Scheepswrakken WMS query failed:",Ae)}continue}if(It==="Woonheuvels ZH"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-orange-800">Woonheuvel</strong>';(z.naam||z.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-orange-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Woonheuvels WMS query failed:",Ae)}continue}if(It==="Romeinse Forten"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=200,Z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-red-800">Romeins Fort</strong>';(z.naam||z.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-red-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.periode||z.PERIODE)&&(ae+=`<br/><span class="text-xs text-gray-500">${z.periode||z.PERIODE}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Romeinse Forten WMS query failed:",Ae)}continue}if(It==="Windmolens"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=50,Z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-amber-800">Windmolen</strong>';(z.naam||z.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-amber-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE||z.functie||z.FUNCTIE)&&(ae+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE||z.functie||z.FUNCTIE}</span>`),(z.bouwjaar||z.BOUWJAAR)&&(ae+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.bouwjaar||z.BOUWJAAR}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Windmolens WMS query failed:",Ae)}continue}if(It==="Erfgoedlijnen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=200,Z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-purple-800">Erfgoedlijn</strong>';(z.naam||z.NAAM||z.erfgoedlijn)&&(ae+=`<br/><span class="text-sm font-semibold text-purple-700">${z.naam||z.NAAM||z.erfgoedlijn}</span>`),(z.type||z.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.omschrijving||z.OMSCHRIJVING)&&(ae+=`<br/><span class="text-xs text-gray-500">${z.omschrijving||z.OMSCHRIJVING}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Erfgoedlijnen WMS query failed:",Ae)}continue}if(It==="Oude Kernen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=200,Z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-stone-800">Historische Kern</strong>';(z.naam||z.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-stone-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.periode||z.PERIODE)&&(ae+=`<br/><span class="text-xs text-gray-500">${z.periode||z.PERIODE}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Oude Kernen WMS query failed:",Ae)}continue}if(It==="Relictenkaart Punten"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=50,Z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,ae={KV:"Kasteel/Vesting",K:"Kapel",KE:"Kerkhof",B:"Buitenhuis",OB:"Oud Bebouwingsrelict",OV:"Oude Verkaveling",NR:"Nijverheidsrelict",GH:"Grafheuvel",BP:"Begraafplaats",HH:"Havezate",RM:"Rosmolen",WM:"Windmolen",PM:"Poldermolen",EK:"Eendenkooi",SH:"Scholtenhoeve"},qe=z.type?.replace(/[0-9]/g,"")||"",we=ae[qe]||z.type||"Cultuurhistorisch object";let Je='<strong class="text-emerald-800">Relict</strong>';Je+=`<br/><span class="text-sm font-semibold text-emerald-700">${we}</span>`,z.type&&qe!==z.type&&(Je+=`<br/><span class="text-xs text-gray-500">Code: ${z.type}</span>`),z.streek&&(Je+=`<br/><span class="text-xs text-gray-400">Streek: ${z.streek}</span>`),Oe.push(Je)}}catch(Ae){console.warn("Relictenkaart Punten WMS query failed:",Ae)}continue}if(It==="Relictenkaart Lijnen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=50,Z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,qe={1:"Sprengenbeek",2:"Oude waterloop",3:"Doorgaande weg",4:"Hessenweg",5:"Oude weg",6:"Historische grens",7:"Trekpad",8:"Jaagpad"}[z.klasse]||`Historisch lijnrelict (${z.klasse})`;let we='<strong class="text-teal-800">Lijnrelict</strong>';we+=`<br/><span class="text-sm font-semibold text-teal-700">${qe}</span>`,Oe.push(we)}}catch(Ae){console.warn("Relictenkaart Lijnen WMS query failed:",Ae)}continue}if(It==="Relictenkaart Vlakken"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=100,Z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties,qe={1:"Onveranderd agrarisch (voor 1850)",2:"Jonge heideontginning (1850-1950)",3:"Open essencomplex",4:"Kampenlandschap",5:"Heiderelict (1850)",6:"Bosrelict (1850)",7:"Stuifzandrelict",8:"Oud bouwland",9:"Historisch grasland",10:"Beekdal"}[z.klasse]||`Historisch landschap (${z.klasse})`;let we='<strong class="text-lime-800">Landschapsrelict</strong>';if(we+=`<br/><span class="text-sm font-semibold text-lime-700">${qe}</span>`,z.st_area_shape_){const Je=(z.st_area_shape_/1e4).toFixed(1);we+=`<br/><span class="text-xs text-gray-500">${Je} ha</span>`}Oe.push(we)}}catch(Ae){console.warn("Relictenkaart Vlakken WMS query failed:",Ae)}continue}if(It==="Verdronken Dorpen"){try{const Ae=mn(at),Ee=pn("EPSG:4326","EPSG:28992",Ae),k=200,Z=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ee[0]-k},${Ee[1]-k},${Ee[0]+k},${Ee[1]+k}`}`,re=await(await fetch(Z)).json();if(re.features&&re.features.length>0){const z=re.features[0].properties;let ae='<strong class="text-blue-800">Verdronken Dorp</strong>';(z.naam||z.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-blue-700">${z.naam||z.NAAM}</span>`),(z.verdronken||z.VERDRONKEN||z.jaar||z.JAAR)&&(ae+=`<br/><span class="text-xs text-gray-600">Verdronken: ${z.verdronken||z.VERDRONKEN||z.jaar||z.JAAR}</span>`),(z.gemeente||z.GEMEENTE)&&(ae+=`<br/><span class="text-xs text-gray-500">${z.gemeente||z.GEMEENTE}</span>`),(z.bron||z.BRON)&&(ae+=`<br/><span class="text-xs text-gray-400">${z.bron||z.BRON}</span>`),Oe.push(ae)}}catch(Ae){console.warn("Verdronken Dorpen WMS query failed:",Ae)}continue}const Rn=Xt.getFeatureInfoUrl(at,yt,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Rn)try{const Ee=await(await fetch(Rn)).json();if(Ee.features&&Ee.features.length>0){const k=Ee.features[0].properties;if(It==="AHN 0.5m"){let re='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const z=k.value_list??k.GRAY_INDEX??k.value??k.gray_index??k.dtm_05m??k.DTM_05M??k.hoogte??k.HOOGTE??k.elevation??k.ELEVATION;if(z!=null&&!isNaN(Number(z))){const ae=typeof z=="number"?z.toFixed(2):Number(z).toFixed(2);re+=`<br/><span class="text-sm text-blue-700">Hoogte: ${ae} m NAP</span>`,Oe.push(re)}else{let ae=!1;const qe=["geometry","id","fid","gml_id","bbox"];for(const[we,Je]of Object.entries(k))!qe.includes(we.toLowerCase())&&Je!==null&&Je!==""&&(re+=`<br/><span class="text-xs text-gray-600">${we}: ${Je}</span>`,ae=!0);ae&&Oe.push(re)}continue}if(It==="Geomorfologie"){let re='<strong class="text-green-800">Geomorfologie</strong>',z=!1;const ae=k.landform_subgroup_description,qe=k.relief_klasse,we=k.relief_subklasse,Je=k.genese_description,gt=k.active_process;if(ae&&(re+=`<br/><span class="text-sm text-green-700">${ae}</span>`,z=!0),qe){const dt=we&&we!==qe?`${qe} (${we})`:qe;re+=`<br/><span class="text-xs text-gray-600">Relief: ${dt}</span>`,z=!0}if(Je&&(re+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${Je}</span>`,z=!0),gt&&gt!=="onbekend"&&(re+=`<br/><span class="text-xs text-gray-500">Actief proces: ${gt}</span>`,z=!0),!z){const dt=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[At,Rt]of Object.entries(k))!dt.includes(At.toLowerCase())&&Rt!==null&&Rt!==""&&!At.includes("validfrom")&&!At.includes("validto")&&(re+=`<br/><span class="text-xs text-gray-600">${At}: ${Rt}</span>`)}re+='<br/><a href="https://legendageomorfologie.wur.nl/" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">Meer over geomorfologie</a>',Oe.push(re);continue}let St=`<strong>${It}</strong>`;const Z=k.first_soilname||k.soilname,jt=k.soilcode||k.first_soilcode;if(Z&&(St+=`<br/><span class="text-sm text-amber-700">${Z}</span>`,It==="Bodemkaart")){const re=LO(Z,jt);re.length>0&&(St+=`<br/><span class="text-xs text-gray-500 italic">${re.join("  ")}</span>`)}if(k.soilslope&&k.soilslope!=="Niet opgenomen"&&(St+=`<br/><span class="text-xs text-gray-500">Helling: ${k.soilslope}</span>`),!Z){const re=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[z,ae]of Object.entries(k))!re.includes(z)&&ae&&ae!=="Niet opgenomen"&&(St+=`<br/><span class="text-xs text-gray-600">${z}: ${ae}</span>`)}Oe.push(St)}}catch(Ae){console.warn("WMS GetFeatureInfo failed:",Ae)}}return Oe},Nt=async at=>{const yt=[],Oe=AEe(at.coordinate),bn=[];n.forEachFeatureAtPixel(at.pixel,Rn=>{bn.push(Rn)});for(const Rn of bn){const Ae=Rn.getProperties(),{geometry:Ee,...k}=Ae;if(k.vondst){const re=k.vondst,z=`<strong>${re.objectType}</strong>
            <div data-vondst-id="${re.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${re.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${re.period}</span>
            ${re.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${re.depth} cm</span>`:""}
            ${re.condition&&re.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${re.condition}</span>`:""}
            ${re.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${re.weight} gram</span>`:""}
            ${re.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${re.notes}</span>`:""}
            ${re.photoUrl?`<br/><a href="${re.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(re.timestamp).toLocaleDateString("nl-NL")}</span>`;yt.push(z),b(re.id);continue}if(k.layerType==="customPoint"&&k.customPoint){const re=k.customPoint,z=k.customLayerName||"Mijn Laag";let ae=`<strong>${re.name}</strong>`;if(ae+=`<br/><span class="text-xs text-gray-500">${z}</span>`,re.category&&(ae+=`<br/><span class="text-sm text-gray-600"><strong>Categorie:</strong> ${re.category}</span>`),re.photos&&re.photos.length>0){ae+='<div class="flex flex-wrap gap-1 my-2">';for(const qe of re.photos.slice(0,3)){const we=qe.thumbnailUrl||qe.thumbnailBase64;we&&(ae+=`<img src="${we}" alt="Foto" class="w-16 h-16 object-cover rounded border border-gray-200" />`)}re.photos.length>3&&(ae+=`<span class="text-xs text-gray-400 self-end">+${re.photos.length-3} meer</span>`),ae+="</div>"}re.notes&&(ae+=`<br/><span class="text-sm text-gray-600 mt-1">${re.notes}</span>`),re.url&&(ae+=`<br/><a href="${re.url}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Meer info</a>`),ae+=`<br/><span class="text-xs text-gray-400">${new Date(re.createdAt).toLocaleDateString("nl-NL")}</span>`,yt.push(ae);continue}if(k.kwaliteitswaarde&&k.kwaliteitswaarde.includes("archeologische waarde")){const re=Ye(k);yt.push(re);continue}let St=k.name||k.naam||k.title||k.NAAM||k.NAME||k.label||k.route_name||k.road_name;St||(k.leisure==="playground"?St="Speeltuin":k.leisure==="park"?St="Park":k.leisure==="swimming_area"||k.sport==="swimming"?St="Zwemplek":k.tourism==="museum"?St="Museum":k.amenity==="cafe"||k.amenity==="restaurant"?St=k.amenity==="cafe"?"Caf":"Restaurant":k.historic==="castle"?St="Kasteel":St="Info"),(k.bunker_type||k.name&&(k.name.toLowerCase().includes("bunker")||k.name.toLowerCase().includes("kazemat")||k.name.toLowerCase().includes("schuilplaats")))&&(St="Bunker"),k.historic==="battlefield"&&(St="Historisch slagveld");let Z=`<strong>${St}</strong>`;if(k.category&&(Z+=`<br/><span class="text-sm text-gray-600">Categorie: ${k.category}</span>`),k.from_to&&k.from_to!==St&&(Z+=`<br/><span class="text-sm text-gray-600">${k.from_to}</span>`),k.route&&k.route!==St&&(Z+=`<br/><span class="text-sm text-gray-600">${k.route}</span>`),k.TOPONIEM&&(Z+=`<br/><span class="text-sm font-semibold text-gray-800">${k.TOPONIEM}</span>`,k.PLAATS&&(Z+=`<br/><span class="text-xs text-gray-500">${k.PLAATS}</span>`)),(k.AARD_VINDP||k.Aard_vindp)&&(Z+=`<br/><span class="text-sm text-gray-700">Aard: ${k.AARD_VINDP||k.Aard_vindp}</span>`),k.BEGIN_PER&&k.EIND_PER&&(Z+=`<br/><span class="text-sm text-purple-700">Periode: ${k.BEGIN_PER} - ${k.EIND_PER}</span>`),(k.AARD_OPM||k.Aard_opmer)&&(Z+=`<br/><span class="text-xs text-gray-600 italic">${k.AARD_OPM||k.Aard_opmer}</span>`),k.Gemeente&&(Z+=`<br/><span class="text-sm text-gray-600">Gemeente: ${k.Gemeente}</span>`),k.Bron&&(Z+=`<br/><span class="text-xs text-gray-500">Bron: ${k.Bron}</span>`),k.Bron_besch&&(Z+=`<br/><span class="text-xs text-gray-500">${k.Bron_besch}</span>`),k.Dat_st_z&&k.Dat_ei_z&&(Z+=`<br/><span class="text-sm text-purple-700">Datering: ${k.Dat_st_z} - ${k.Dat_ei_z}</span>`),k.Begin&&k.Einde&&(Z+=`<br/><span class="text-sm text-purple-700">Periode: ${k.Begin} - ${k.Einde}</span>`),k.Uiterwaard&&(Z+=`<br/><span class="text-sm font-semibold">${k.Uiterwaard}</span>`),k.rivier&&(Z+=`<br/><span class="text-sm text-blue-600">Rivier: ${k.rivier}</span>`),k.Beschrijvi&&(Z+=`<br/><span class="text-sm text-gray-700">${k.Beschrijvi}</span>`),k.leisure&&k.name){const re=k.leisure==="playground"?"Speeltuin":k.leisure==="park"?"Park":k.leisure==="swimming_area"?"Zwemplek":null;re&&(Z+=`<br/><span class="text-xs text-green-600">${re}</span>`)}if((k.tourism==="museum"||k.museum)&&k.name&&(Z+='<br/><span class="text-xs text-purple-600">Museum</span>'),(k.leisure==="swimming_area"||k.sport==="swimming")&&k.name&&(Z+='<br/><span class="text-xs text-cyan-600">Zwemplek</span>'),k.osm_id&&k.address!==void 0&&(Z+='<br/><span class="text-xs text-lime-600">Kringloopwinkel</span>',k.address&&(Z+=`<br/><span class="text-xs text-gray-500">${k.address}</span>`),k.phone&&(Z+=`<br/><span class="text-xs text-gray-600">${k.phone}</span>`)),k.site_type==="tumulus"){const re=Rn.getGeometry()?.getCoordinates();let z="",ae="";if(re){const qe=mn(re),we=qe[0],Je=qe[1];we>5.5&&we<6.3&&Je>52&&Je<52.5?(z="Veluwe",ae="De Veluwe heeft de grootste concentratie grafheuvels van Nederland. Veel heuvels liggen in grafvelden met tientallen heuvels bij elkaar."):we>6.2&&we<7.1&&Je>52.6&&Je<53.3?(z="Drenthe",ae="Drenthe is beroemd om zijn prehistorische monumenten. Naast hunebedden liggen hier honderden grafheuvels uit de Bronstijd."):we>4.5&&we<6&&Je>51.3&&Je<51.9?(z="Noord-Brabant",ae="Op de Brabantse zandgronden liggen veel grafheuvels, vaak in kleine groepjes op hogere gronden."):we>5.5&&we<6.3&&Je>50.7&&Je<51.6?(z="Limburg",ae="De Limburgse heuvels en plateaus herbergen grafheuvels uit verschillende periodes, van Bronstijd tot Romeinse tijd."):we>5&&we<5.6&&Je>52&&Je<52.4&&(z="Utrechtse Heuvelrug",ae="De stuwwallen van de Utrechtse Heuvelrug en het Gooi waren al in de prehistorie bewoond. Grafheuvels markeren de laatste rustplaats van de vroege bewoners.")}Z+='<br/><span class="text-sm text-amber-700">Grafheuvel uit de Bronstijd of IJzertijd</span>',z&&(Z+=`<br/><span class="text-sm text-gray-500">${z}</span>`),Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Z+='<div class="text-sm text-gray-700 mt-1">Een grafheuvel is een kunstmatige heuvel over een of meerdere graven. De meeste Nederlandse grafheuvels zijn 3000 tot 4000 jaar oud, uit de Bronstijd (2000-800 v.Chr.) of vroege IJzertijd.</div>',ae&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Over deze regio</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${ae}</div>`),Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe herken je een grafheuvel?</span></div>',Z+='<div class="text-sm text-gray-700 mt-1">Grafheuvels zijn vaak ronde, lage heuvels van 10-30 meter doorsnee en 1-3 meter hoog. Ze liggen meestal op zandgronden, vaak in groepjes (grafvelden). Let op de kenmerkende ronde vorm in het landschap.</div>',k.wikidata?(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1"><a href="https://www.wikidata.org/wiki/${k.wikidata}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk op Wikidata</a></div>`):(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',Z+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Grafheuvel" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Lees meer over grafheuvels op Wikipedia</a></div>')}if(k.historic==="castle"||k.castle_type){const re={manor:{label:"Landhuis",uitleg:"Een landhuis of havezate was het woonhuis van een adellijke familie. Vaak met een landgoed eromheen.",vondsten:"Sieraden, gespen, munten, aardewerk van rijke bewoners"},stately:{label:"Statig huis",uitleg:"Een groot en deftig woonhuis, vaak van welgestelde families. Soms met kasteelachtige kenmerken.",vondsten:"Huishoudelijke voorwerpen, munten, knopen, aardewerk"},fortress:{label:"Fort/Vesting",uitleg:"Een versterkte militaire bouwwerk, gebouwd om een gebied te verdedigen.",vondsten:"Militaire voorwerpen, kogels, gespen, uniformonderdelen"},defensive:{label:"Verdedigingskasteel",uitleg:"Een kasteel gebouwd voor verdediging, met dikke muren, een gracht en torens.",vondsten:"Wapens, harnasonderdelen, pijlpunten, middeleeuwse munten"},palace:{label:"Paleis",uitleg:"Een groot en luxueus gebouw voor koningen, prinsen of zeer rijke families.",vondsten:"Luxe voorwerpen, sieraden, zegels, zeldzame munten"},castrum:{label:"Romeins fort",uitleg:"Een Romeins legerkamp of fort. Deze zijn bijna 2000 jaar oud!",vondsten:"Romeinse munten, fibulae, militaria, aardewerk"},citadel:{label:"Citadel",uitleg:"Een sterk versterkte kern binnen een stad, als laatste verdedigingslinie.",vondsten:"Militaire voorwerpen uit verschillende periodes"}},z=k.castle_type?re[k.castle_type]:null,ae=z?.label||"Kasteel";if(Z+=`<br/><span class="text-sm text-purple-600">${ae}</span>`,k.start_date&&(Z+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${k.start_date}</span>`),k.heritage&&(Z+='<br/><span class="text-sm text-amber-600">Rijksmonument</span>'),Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',z?Z+=`<div class="text-sm text-gray-700 mt-1">${z.uitleg}</div>`:Z+='<div class="text-sm text-gray-700 mt-1">Een historisch kasteel of adellijk huis. Kastelen waren vaak het middelpunt van macht en rijkdom in een gebied.</div>',Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',z?Z+=`<div class="text-sm text-gray-700 mt-1">${z.vondsten}</div>`:Z+='<div class="text-sm text-gray-700 mt-1">Munten, sieraden, gespen, aardewerk en andere voorwerpen van de vroegere bewoners.</div>',k.wikipedia||k.website){if(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',k.wikipedia){const qe=k.wikipedia.startsWith("http")?k.wikipedia:`https://nl.wikipedia.org/wiki/${k.wikipedia.replace(/^nl:/,"")}`;Z+=`<div class="text-sm text-gray-700 mt-1"><a href="${qe}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}k.website&&(Z+=`<div class="text-sm text-gray-700 mt-1"><a href="${k.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Website bezoeken</a></div>`)}}if(k.historic==="ruins"){const re=k.ruins_type||"";let z="Rune",ae="Een rune is wat overblijft van een oud gebouw. Het kan een kerk, kasteel, molen of ander bouwwerk zijn geweest.",qe="Baksteenfragmenten, aardewerk, metalen voorwerpen van vroegere bewoners of gebruikers";if(re.toLowerCase().includes("church")||re.toLowerCase().includes("kerk")?(z="Kerkrune",ae="De overblijfselen van een oude kerk. Vaak nog te herkennen aan de fundering of een paar muren.",qe="Religieuze voorwerpen, munten van kerkgangers, knopen, gespen"):re.toLowerCase().includes("castle")||re.toLowerCase().includes("kasteel")?(z="Kasteelrune",ae="De resten van een middeleeuws kasteel. Soms is alleen de gracht of fundering nog zichtbaar.",qe="Middeleeuwse munten, sieraden, harnasonderdelen, pijlpunten"):re.toLowerCase().includes("mill")||re.toLowerCase().includes("molen")?(z="Molenrune",ae="Wat rest van een oude molen. Vaak nog te zien aan de stenen fundering of de molenberg.",qe="Gereedschap, munten, huishoudelijke voorwerpen"):re.toLowerCase().includes("fort")&&(z="Fortrune",ae="De overblijfselen van een militair fort of verdedigingswerk.",qe="Militaire voorwerpen, kogels, gespen, uniformonderdelen"),Z+=`<br/><span class="text-sm text-gray-600">${z}</span>`,Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${ae}</div>`,Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${qe}</div>`,k.description&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Beschrijving</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${k.description}</div>`),k.wikipedia){const we=k.wikipedia.startsWith("http")?k.wikipedia:`https://${k.wikipedia.split(":")[0]||"nl"}.wikipedia.org/wiki/${k.wikipedia.replace(/^[a-z]{2}:/,"")}`;Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${we}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(k.bunker_type||k.name&&(k.name.toLowerCase().includes("bunker")||k.name.toLowerCase().includes("kazemat")||k.name.toLowerCase().includes("schuilplaats"))){const re={munitions:"Munitiebunker",personnel_shelter:"Personeelsschuilplaats",personell_shelter:"Personeelsschuilplaats",command:"Commandobunker",gun_emplacement:"Geschutsbunker",mg_nest:"Mitrailleursnest",technical:"Technische bunker",storage:"Opslagbunker",tobruk:"Tobruk",kazemat:"Kazemat",Flak:"Luchtafweerstelling",hardened_aircraft_shelter:"Vliegtuigshelter",shelter:"Schuilkelder",observation:"Observatiebunker",anti_aircraft:"Luchtafweerstelling"},z=k.name||"",ae=k.bunker_type?re[k.bunker_type]||k.bunker_type:"";z&&z!=="Bunker"&&(Z+=`<br/><span class="text-sm font-semibold text-gray-700">${z}</span>`),ae&&ae!==z&&(Z+=`<br/><span class="text-xs text-gray-500">${ae}</span>`);const qe=Rn.getGeometry()?.getCoordinates();let we="",Je="",gt="";if(qe){const dt=mn(qe),At=dt[0],Rt=dt[1],tn=At<4.8||At<5.2&&Rt>51.8&&Rt<53.5,Nr=At>4.2&&At<4.4&&Rt>52&&Rt<52.15,$r=At>4.5&&At<4.7&&Rt>52.4&&Rt<52.5,yn=At>4&&At<4.2&&Rt>51.95&&Rt<52.05,Yi=At<4.2&&Rt<51.6,Xi=At>5.2&&At<5.8&&Rt>51.9&&Rt<52.3;Nr?(we="Deze bunker maakt deel uit van de Atlantikwall bij Scheveningen. De Duitsers bouwden hier tijdens WOII zo'n 80 bunkers in de duinen. De muren zijn soms 3 meter dik beton. Voor deze bunkers moesten 138.000 mensen uit Den Haag en Scheveningen hun huis verlaten.",Je="https://nl.wikipedia.org/wiki/Atlantikwall_Museum_Scheveningen",gt="Atlantikwall Museum Scheveningen"):$r?(we="Deze bunker hoort bij Festung IJmuiden, een van de zwaarst verdedigde punten van de Atlantikwall. De Duitsers bouwden hier bunkers om de haventoegang te beschermen. Er zijn nu rondleidingen door het Bunkermuseum.",Je="https://www.bunkermuseum.nl/",gt="Bunkermuseum IJmuiden"):yn?(we="Deze bunker maakt deel uit van de Atlantikwall bij Hoek van Holland. Dit was een strategisch punt voor de Duitsers vanwege de Nieuwe Waterweg. Veel bunkers zijn nog te bezoeken.",Je="https://www.atlantikwallhoekvanholland.nl/",gt="Atlantikwall Hoek van Holland"):Yi?(we="Deze bunker hoort bij de Atlantikwall in Zeeland. De Duitsers verdedigden hier de Westerschelde en de kust. Bij Zoutelande en Westkapelle zijn veel bunkers bewaard gebleven.",Je="https://www.bunkermuseumzoutelande.nl/",gt="Bunkermuseum Zoutelande"):tn?(we="Deze bunker maakt deel uit van de Atlantikwall: de Duitse verdedigingslinie langs de hele kust van Europa. In Nederland bouwden de Duitsers duizenden bunkers tussen 1942 en 1944.",Je="https://nl.wikipedia.org/wiki/Atlantikwall",gt="Atlantikwall (Wikipedia)"):Xi?(we="Deze bunker hoort mogelijk bij de Grebbelinie of de Nieuwe Hollandse Waterlinie. Dit waren Nederlandse verdedigingslinies die de Duitsers na 1940 versterkten met bunkers.",Je="https://nl.wikipedia.org/wiki/Grebbelinie",gt="Grebbelinie (Wikipedia)"):(we="Een bunker uit de Tweede Wereldoorlog. De meeste bunkers in Nederland zijn gebouwd tussen 1940 en 1944, als onderdeel van de Duitse verdediging of langs bestaande Nederlandse linies.",Je="https://nl.wikipedia.org/wiki/Atlantikwall",gt="WOII bunkers (Wikipedia)")}else we="Een bunker uit de Tweede Wereldoorlog.",Je="https://nl.wikipedia.org/wiki/Atlantikwall",gt="WOII bunkers (Wikipedia)";Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${we}</div>`,Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je vinden?</span></div>',Z+='<div class="text-sm text-gray-700 mt-1">Bij bunkers worden soms voorwerpen gevonden zoals patronen, uniformknopen, gespen en persoonlijke spullen van soldaten.</div>',Z+='<div class="mt-2 text-xs text-gray-500 italic">Let op: betreed nooit een bunker zonder toestemming. Raak munitieresten niet aan.</div>',Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',Z+='<div class="text-sm text-gray-700 mt-1">',Z+=`<a href="${Je}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${gt}</a>`,k.website?Z+=`<br/><a href="${k.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>`:Z+='<br/><a href="https://www.tracesofwar.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>',Z+="</div>"}if(k.historic==="battlefield"){const re=k.name||"Onbekend slagveld",ae={"Slag om Arnhem":{periode:"September 1944",samenvatting:"De Slag om Arnhem was onderdeel van Operatie Market Garden. Geallieerde parachutisten probeerden de brug over de Rijn te veroveren. Na negen dagen hevige gevechten moesten ze zich terugtrekken. Van de 10.000 Britse soldaten werden er 1.500 gedood en 6.500 krijgsgevangen gemaakt.",watZieJe:"Er zijn veel monumenten en infoborden. Het Airborne Museum in Oosterbeek vertelt het hele verhaal. Elk jaar in september is er een herdenking.",uitkomst:"De geallieerden verloren de slag. Nederland bleef nog tot mei 1945 bezet.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Arnhem"},"Slag om de Sloedam":{periode:"1-2 november 1944",samenvatting:"Canadese soldaten vielen de Sloedam aan om Walcheren te bevrijden. De dam was smal en de Duitsers verdedigden fel. Veel soldaten sneuvelden bij deze bloedige aanval.",watZieJe:"Bij de dam staat een monument voor de gevallen Canadezen. Er zijn infoborden die de slag uitleggen.",uitkomst:"De Canadezen wonnen na zware verliezen. Dit opende de weg naar de bevrijding van Walcheren.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_de_Sloedam"},"Slag bij Heiligerlee (1568)":{periode:"23 mei 1568",samenvatting:"De eerste veldslag van de Tachtigjarige Oorlog. Lodewijk van Nassau versloeg het Spaanse leger. Zijn broer Adolf sneuvelde tijdens de strijd.",watZieJe:"In Heiligerlee staat het Slag bij Heiligerlee monument. Het klooster waar Adolf van Nassau begraven ligt is nog te bezoeken.",uitkomst:"De opstandelingen wonnen, maar dit was pas het begin van 80 jaar oorlog.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_bij_Heiligerlee_(1568)"},Overloon:{periode:"Oktober 1944",samenvatting:"Bij Overloon vochten Britten en Amerikanen tegen de Duitsers. Het was een van de zwaarste tankgevechten op Nederlandse bodem. Het dorp werd volledig verwoest.",watZieJe:"Het Oorlogsmuseum Overloon staat op het voormalige slagveld. Je kunt tanks, vliegtuigen en andere voertuigen zien.",uitkomst:"De geallieerden wonnen na wekenlange gevechten.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Overloon"},"Slagveld Lanakerveld":{periode:"1568",samenvatting:"Onderdeel van de Nederlandse opstand tegen Spanje. Hier vonden gevechten plaats tijdens de beginjaren van de Tachtigjarige Oorlog.",watZieJe:"Het gebied is nu grotendeels landbouwgrond. Lokaal zijn er soms infoborden.",uitkomst:"Onderdeel van de lange strijd tegen de Spaanse overheersing.",wikiUrl:"https://nl.wikipedia.org/wiki/Tachtigjarige_Oorlog"},Blessebrugschans:{periode:"Diverse periodes",samenvatting:"Een historische schans die meerdere keren werd gebruikt in militaire conflicten.",watZieJe:"De resten van de schans zijn nog zichtbaar in het landschap.",uitkomst:"De schans speelde een rol in verschillende conflicten.",wikiUrl:"https://nl.wikipedia.org/wiki/Schans_(vestingwerk)"}}[re];if(re!=="Onbekend slagveld"&&re!=="Historisch slagveld"&&(Z+=`<br/><span class="text-sm font-semibold text-red-700">${re}</span>`),ae)Z+=`<br/><span class="text-xs text-gray-500">${ae.periode}</span>`,Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${ae.samenvatting}</div>`,Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe liep het af?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${ae.uitkomst}</div>`,Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je zien?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${ae.watZieJe}</div>`,Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',Z+='<div class="text-sm text-gray-700 mt-1">',Z+=`<a href="${ae.wikiUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a>`,re.includes("Arnhem")&&(Z+='<br/><a href="https://www.airbornemuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Airborne Museum Oosterbeek</a>'),re.includes("Overloon")&&(Z+='<br/><a href="https://www.oorlogsmuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Oorlogsmuseum Overloon</a>'),Z+="</div>";else if(k.date&&(Z+=`<br/><span class="text-xs text-gray-500">${k.date}</span>`),k.description?(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${k.description}</div>`):(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',Z+='<div class="text-sm text-gray-700 mt-1">Op deze plek vonden historische gevechten plaats. Zoek lokaal naar infoborden of monumenten.</div>'),k.wikipedia){const qe=k.wikipedia.startsWith("http")?k.wikipedia:`https://nl.wikipedia.org/wiki/${k.wikipedia.replace("nl:","")}`;Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1"><a href="${qe}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(k.bron==="Paleobiology Database"){const re=we=>{const Je={Mollusca:"weekdieren zoals schelpen en slakken",Brachiopoda:"armpotigen, schelp-achtige dieren",Echinodermata:"stekelhuidigen zoals zee-egels en zeesterren",Chordata:"gewervelde dieren",Arthropoda:"geleedpotigen zoals kreeften en trilobieten",Cnidaria:"neteldieren zoals koralen en kwallen",Bryozoa:"mosdiertjes",Foraminifera:"eencellige schelpdieren",Plantae:"planten",Crinoidea:"zeelelies",Gastropoda:"slakken",Bivalvia:"tweekleppigen zoals mossels en oesters",Cephalopoda:"koppotigen zoals inktvissen en ammonieten",Trilobita:"trilobieten, uitgestorven kreeftachtigen",Mammalia:"zoogdieren",Reptilia:"reptielen",Pisces:"vissen",Amphibia:"amfibien"};for(const[gt,dt]of Object.entries(Je))if(we.toLowerCase().includes(gt.toLowerCase()))return dt;return""},z=we=>{const Je={Cambrium:"541-485 miljoen jaar geleden",Ordovicium:"485-444 miljoen jaar geleden",Siluur:"444-419 miljoen jaar geleden",Devoon:"419-359 miljoen jaar geleden",Carboon:"359-299 miljoen jaar geleden",Perm:"299-252 miljoen jaar geleden",Trias:"252-201 miljoen jaar geleden",Jura:"201-145 miljoen jaar geleden",Krijt:"145-66 miljoen jaar geleden",Paleogeen:"66-23 miljoen jaar geleden",Neogeen:"23-2,6 miljoen jaar geleden",Kwartair:"2,6 miljoen jaar - nu",Pleistoceen:"2,6 miljoen - 11.700 jaar geleden",Holoceen:"11.700 jaar geleden - nu"};for(const[gt,dt]of Object.entries(Je))if(we.toLowerCase().includes(gt.toLowerCase()))return dt;return""},ae=we=>{const Je={limestone:"kalksteen",sandstone:"zandsteen",shale:"schalie",clay:"klei",sand:"zand",gravel:"grind",marl:"mergel",chalk:"krijt",mudstone:"moddersteen",siltstone:"siltsteen"};let gt=we;for(const[dt,At]of Object.entries(Je))gt=gt.replace(new RegExp(dt,"gi"),At);return gt},qe=we=>{const Je={marine:"zee",coastal:"kust",terrestrial:"land",fluvial:"rivier",lacustrine:"meer",reef:"rif",deltaic:"delta",shallow:"ondiep water",deep:"diep water"};let gt=we;for(const[dt,At]of Object.entries(Je))gt=gt.replace(new RegExp(dt,"gi"),At);return gt};if(k.vindplaats&&(Z+=`<br/><span class="text-xs text-gray-600">${k.vindplaats}</span>`),Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',k.taxonomie&&k.taxonomie!=="Onbekend"){const we=re(k.taxonomie);we?(Z+=`<div class="text-sm text-gray-700 mt-1">${we}</div>`,Z+=`<div class="text-xs text-gray-500 italic">(${k.taxonomie})</div>`):Z+=`<div class="text-sm text-gray-700 mt-1">${k.taxonomie}</div>`}if(k.aantal_fossielen){const we=parseInt(k.aantal_fossielen),Je=we>100?"Veel fossielen gevonden op deze locatie.":we>10?"Meerdere fossielen gevonden op deze locatie.":`${k.aantal_fossielen} fossiel${we>1?"en":""} gevonden op deze locatie.`;Z+=`<div class="text-sm text-gray-600 mt-1">${Je}</div>`}if(k.periode&&k.periode!=="Onbekend"){Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wanneer leefden deze dieren?</span></div>';const we=z(k.periode);Z+=`<div class="text-sm text-gray-700 mt-1">${k.periode}</div>`,we&&(Z+=`<div class="text-sm text-gray-600">${we}</div>`),k.ouderdom&&k.ouderdom!=="Onbekend"&&(Z+=`<div class="text-sm text-gray-600">Ouderdom: ${k.ouderdom}</div>`)}(k.gesteente||k.formatie||k.milieu)&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">In wat voor gesteente?</span></div>',k.gesteente&&(Z+=`<div class="text-sm text-gray-700 mt-1">${ae(k.gesteente)}</div>`),k.formatie&&(Z+=`<div class="text-sm text-gray-600">Formatie: ${k.formatie}</div>`,k.lid&&(Z+=`<div class="text-sm text-gray-600 ml-3">Lid: ${k.lid}</div>`)),k.milieu&&(Z+=`<div class="text-sm text-gray-600">Leefomgeving: ${qe(k.milieu)}</div>`))}if(k.layerType==="fossielHotspot"){const re=[];if(k.type&&re.push(k.type),k.region&&re.push(k.region),k.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};re.push(z[k.country]||k.country)}if(re.length>0&&(Z+=`<br/><span class="text-xs text-gray-600">${re.join("  ")}</span>`),(k.finds||k.period)&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',k.finds&&(Z+=`<div class="text-sm text-gray-700 mt-1">${k.finds}</div>`),k.period&&(Z+=`<div class="text-sm text-gray-600 mt-1">Periode: ${k.period}</div>`),k.geology&&(Z+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${k.geology}</div>`)),k.access||k.tips){if(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',k.access){const ae=k.access.toLowerCase().includes("verboden")||k.access.toLowerCase().includes("niet toegankelijk")?"text-red-600":"text-gray-700";Z+=`<div class="text-sm ${ae} mt-1">${k.access}</div>`}k.tips&&(Z+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${k.tips}</div>`)}}if(k.layerType==="mineralenHotspot"){const re=[];if(k.region&&re.push(k.region),k.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};re.push(z[k.country]||k.country)}if(re.length>0&&(Z+=`<br/><span class="text-xs text-gray-600">${re.join("  ")}</span>`),k.minerals&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${k.minerals}</div>`,k.geology&&(Z+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${k.geology}</div>`)),k.access||k.tips){if(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',k.access){const ae=k.access.toLowerCase().includes("verboden")||k.access.toLowerCase().includes("niet toegankelijk")||k.access.toLowerCase().includes("gesloten")?"text-red-600":"text-gray-700";Z+=`<div class="text-sm ${ae} mt-1">${k.access}</div>`}k.tips&&(Z+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${k.tips}</div>`)}}if(k.layerType==="goudrivier"){const re=[];if(k.river&&re.push(k.river),k.region&&re.push(k.region),k.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};re.push(z[k.country]||k.country)}if(re.length>0&&(Z+=`<br/><span class="text-xs text-gray-600">${re.join("  ")}</span>`),(k.goldType||k.origin)&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',k.goldType&&(Z+=`<div class="text-sm text-gray-700 mt-1">${k.goldType}</div>`),k.origin&&(Z+=`<div class="text-sm text-gray-600 mt-1">Herkomst: ${k.origin}</div>`)),k.legal||k.tips){if(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Mag ik hier zoeken?</span></div>',k.legal){const ae=k.legal.includes("VERBODEN")?"text-red-600 font-semibold":"text-gray-700";Z+=`<div class="text-sm ${ae} mt-1">${k.legal}</div>`}k.tips&&(Z+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${k.tips}</div>`)}}if(k.layerType==="wandelroute"){const re=[];if(k.region&&re.push(k.region),k.country){const z={NL:"Nederland",BE:"Belgi"};re.push(z[k.country]||k.country)}if(re.length>0&&(Z+=`<br/><span class="text-xs text-gray-600">${re.join("  ")}</span>`),k.distance||k.duration){const z=k.distance?`${k.distance} km`:"",ae=k.duration?`${k.duration}`:"",qe=[z,ae].filter(Boolean).join("  ");qe&&(Z+=`<br/><span class="text-sm text-green-700 font-medium">${qe}</span>`)}(k.description||k.highlights)&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat ga je zien?</span></div>',k.description&&(Z+=`<div class="text-sm text-gray-700 mt-1">${k.description}</div>`),k.highlights&&(Z+=`<div class="text-sm text-gray-600 mt-1">Hoogtepunten: ${k.highlights}</div>`)),k.startAddress&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waar begin ik?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${k.startAddress}</div>`),k.url&&(Z+=`<div class="mt-3"><a href="${k.url}" target="_blank" class="text-sm text-blue-600 hover:underline">Bekijk route en download GPX</a></div>`)}if(k.layerType==="hunebed"){k.period&&(Z+=`<br/><span class="text-sm text-purple-700">Periode: ${k.period}</span>`),Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',k.description&&(Z+=`<div class="text-sm text-gray-700 mt-1">${k.description}</div>`);const re=[];if(k.stones){const z=k.stones.toLowerCase(),ae=z.match(/(\d+)\s*dekst[^\s,]*/i),qe=z.match(/(\d+)\s*draagst[^\s,]*/i),we=z.match(/(\d+)\s*sluitst[^\s,]*/i),Je=z.match(/(\d+)\s*poortst[^\s,]*/i),gt=z.match(/(\d+)\s*gangdekst[^\s,]*/i),dt=z.match(/(\d+)\s*gangzijst[^\s,]*/i);ae&&re.push(`${ae[1]} deksteen${parseInt(ae[1])>1?"en":""} (de grote steen${parseInt(ae[1])>1?"en":""} bovenop)`),qe&&re.push(`${qe[1]} draagstenen (de stenen die de dekstenen dragen)`),we&&re.push(`${we[1]} sluitsteen${parseInt(we[1])>1?"en":""} (afsluiting aan de korte zijden)`),Je&&re.push(`${Je[1]} poortsteen${parseInt(Je[1])>1?"en":""} (bij de ingang)`),gt&&re.push(`${gt[1]} gangdeksteen${parseInt(gt[1])>1?"en":""} (boven de toegangsgang)`),dt&&re.push(`${dt[1]} gangzijstenen (langs de toegangsgang)`)}if(k.length&&re.push(`Een grafkamer van ${k.length} lang`),k.width&&re.push(`${k.width}`),re.length>0&&(Z+='<div class="text-sm text-gray-700 mt-1">Het hunebed heeft:</div>',Z+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',re.forEach(z=>{Z+=`<li>${z}</li>`}),Z+="</ul>"),k.notable){const z=k.notable.toLowerCase();let ae="Wat is hier bijzonder?";z.includes("grootste")?ae="Waarom is dit het grootste hunebed?":z.includes("klein")||z.includes("kindhunebed")?ae="Waarom is dit hunebed zo klein?":z.includes("cluster")||z.includes("naast elkaar")?ae="Waarom liggen hier meerdere hunebedden?":(z.includes("enige")||z.includes("westelijk")||z.includes("noordelijk"))&&(ae="Wat maakt deze locatie bijzonder?"),Z+=`<div class="mt-3"><span class="text-sm font-semibold text-gray-800">${ae}</span></div>`,Z+=`<div class="text-sm text-gray-700 mt-1">${k.notable}</div>`}Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de Trechterbeker cultuur?</span></div>',Z+='<div class="text-sm text-gray-700 mt-1">De Trechterbeker cultuur is de naam voor de mensen die 5.000 jaar geleden in Nederland woonden. Ze maakten potten met een trechter-vorm. Daarom heten ze zo. Deze mensen bouwden de hunebedden als graven voor hun doden.</div>',k.finds&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${k.finds}</div>`),k.museum&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Museum in de buurt</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">${k.museum}</div>`),Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',k.access?Z+=`<div class="text-sm text-gray-700 mt-1">${k.access}</div>`:Z+='<div class="text-sm text-gray-700 mt-1">Je kunt dit hunebed gratis bezoeken.</div>',k.wikipedia&&(Z+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Z+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${k.wikipedia}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`)}if((k.inventarisnummer||k.locatie_naam)&&(k.locatie_naam&&(Z+=`<br/><span class="text-sm font-semibold">${k.locatie_naam}</span>`),k.inventarisnummer&&(Z+=`<br/><span class="text-xs text-gray-500">CAI: ${k.inventarisnummer}</span>`),k.datering_tekst&&(Z+=`<br/><span class="text-sm text-purple-700">${k.datering_tekst}</span>`)),(k.veensoort||k.dikte)&&(k.veensoort&&(Z+=`<br/><span class="text-sm text-amber-700">${k.veensoort}</span>`),k.dikte&&(Z+=`<br/><span class="text-xs text-gray-600">Dikte: ${k.dikte}</span>`)),k.nature&&k.debut){Z+=`<br/><span class="text-sm text-purple-700">${k.nature}</span>`;const re=k.debut===k.fin?k.debut:`${k.debut} - ${k.fin}`;re&&(Z+=`<br/><span class="text-sm text-gray-700">Periode: ${re}</span>`),k.structure&&(Z+=`<br/><span class="text-xs text-gray-600">${k.structure}</span>`),k.commune&&(Z+=`<br/><span class="text-xs text-gray-500">${k.commune}</span>`),k.decouvert&&(Z+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${k.decouvert}</span>`),k.numero&&(Z+=`<br/><span class="text-xs text-gray-400">${k.numero}</span>`)}if((k.NATURE_OPE||k.CODE_OPERA)&&(k.TITRE&&(Z+=`<br/><span class="text-sm font-semibold">${k.TITRE}</span>`),k.NATURE_OPE&&(Z+=`<br/><span class="text-sm text-amber-700">${k.NATURE_OPE}</span>`),k.AUTEUR&&(Z+=`<br/><span class="text-xs text-gray-600">Auteur: ${k.AUTEUR}</span>`),k.DATE&&(Z+=`<br/><span class="text-xs text-gray-500">Datum: ${k.DATE}</span>`),k.COMMUNE&&(Z+=`<br/><span class="text-xs text-gray-500">${k.COMMUNE}</span>`)),k.type_protection&&(k.n_site||k.t_site)){const re=k.type_protection==="Classe"?"text-red-700":"text-amber-700";Z+=`<br/><span class="text-sm ${re}">${k.type_protection}</span>`,k.n_site&&(Z+=`<br/><span class="text-sm font-semibold">${k.n_site}</span>`),k.t_site&&(Z+=`<br/><span class="text-xs text-gray-600">${k.t_site}</span>`),k.c_site&&(Z+=`<br/><span class="text-xs text-gray-500">Code: ${k.c_site}</span>`),k.d_creation&&(Z+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${k.d_creation}</span>`)}if(k.type_protection&&k.cod_diren){const re=k.type_protection==="Classe"?"text-red-700":"text-amber-700";if(Z+=`<br/><span class="text-sm ${re}">${k.type_protection}</span>`,k.proced&&(Z+=`<br/><span class="text-xs text-gray-600">${k.proced}</span>`),k.d_proced&&(Z+=`<br/><span class="text-xs text-gray-500">Date: ${k.d_proced}</span>`),k.comment){const z=String(k.comment).slice(0,150);Z+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(k.comment).length>150?"...":""}</span>`}}if(k.type_protection&&k.nomsite){const re=k.type_protection==="Classe"?"text-red-700":"text-amber-700";if(Z+=`<br/><span class="text-sm ${re}">${k.type_protection}</span>`,k.caractere&&(Z+=`<br/><span class="text-xs text-gray-600">${k.caractere}</span>`),k.datedecis&&(Z+=`<br/><span class="text-xs text-gray-500">Date: ${k.datedecis}</span>`),k.descriptio){const z=String(k.descriptio).slice(0,150);Z+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(k.descriptio).length>150?"...":""}</span>`}}if(k.secteur&&k.style){if(Z+=`<br/><span class="text-sm text-gray-700">${k.secteur}</span>`,k["sous-secteur"]&&(Z+=`<br/><span class="text-xs text-gray-600">${k["sous-secteur"]}</span>`),k.description){const re=String(k.description).slice(0,150);Z+=`<br/><span class="text-xs text-gray-600 italic">${re}${String(k.description).length>150?"...":""}</span>`}k.url&&(Z+=`<br/><a href="${k.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(k.nature_operation||k.synthese){k.nature_operation&&(Z+=`<br/><span class="text-sm text-red-700">${k.nature_operation}</span>`),k.responsable_operation&&(Z+=`<br/><span class="text-xs text-gray-600">Responsable: ${k.responsable_operation}</span>`),k.date_operation&&(Z+=`<br/><span class="text-xs text-gray-500">Datum: ${k.date_operation}</span>`);const re=[];if(k.prehistoire==="Oui"&&re.push("Prehistorie"),k.protohistoire==="Oui"&&re.push("Protohistorie"),k.antiquite==="Oui"&&re.push("Romeins"),k.moyen_age==="Oui"&&re.push("Middeleeuwen"),k.temps_modernes==="Oui"&&re.push("Moderne tijd"),re.length>0&&(Z+=`<br/><span class="text-sm text-purple-700">${re.join(", ")}</span>`),k.adresse&&(Z+=`<br/><span class="text-xs text-gray-500">${k.adresse}</span>`),k.synthese){const z=String(k.synthese).slice(0,200);Z+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(k.synthese).length>200?"...":""}</span>`}}if(k.operator&&(Z+=`<br/><span class="text-sm text-gray-600">${k.operator}</span>`),k.opening_hours){const re=IEe(String(k.opening_hours));Z+=`<br/><span class="text-xs text-green-600">Open: ${re}</span>`}if(k.website&&(Z+=`<br/><a href="${k.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`),k.addr_street){const re=[k.addr_street,k.addr_housenumber,k.addr_postcode].filter(Boolean).join(" ");Z+=`<br/><span class="text-xs text-gray-500">${re}</span>`}const jt=k.description||k.omschrijving||k.descr||k.info;jt&&jt!==St&&(Z+=`<br/><span class="text-sm text-gray-600">${jt}</span>`),yt.push(Z)}const $t=n.getView().getResolution()||1,Xt=await Zt(at.coordinate,$t);yt.push(...Xt);const It=await Oe;if(yt.length===0&&It!==null){const Rn=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${It.toFixed(2)} m NAP</span>
          </div>`;yt.push(Rn)}if(yt.length>0&&It!==null&&(yt[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${It.toFixed(2)} m NAP</span>
        </div>`),yt.length>0){o(yt),u(0),console.log(` KLIK OPGESLAGEN: [${at.coordinate[0].toFixed(0)}, ${at.coordinate[1].toFixed(0)}]`),y(at.coordinate),x(!1),P(!1),O(null);const Rn=mn(at.coordinate);j(Rn),M(`https://www.google.com/maps/dir/?api=1&destination=${Rn[1]},${Rn[0]}`),f(!0)}};return n.on("click",Nt),()=>{n.un("click",Nt)}},[n]);const je=()=>{f(!1),n&&v&&(FI(n),x(!1))},qt=(Ye,Zt)=>{Zt.offset.y>100&&je()};return p.jsx(Mr,{children:h&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:je}),p.jsxs(Ft.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl",style:{fontSize:`${14*xe/100}px`},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:qt,children:[p.jsx("div",{className:"flex justify-center pt-2 pb-1",children:p.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),p.jsxs("div",{className:"flex items-center gap-2 px-3 pb-2 border-b border-gray-100",children:[ce&&p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx("button",{onClick:ue,className:"p-1 text-blue-500 hover:text-blue-600 transition-colors border-0 outline-none bg-transparent","aria-label":"Vorige laag",children:p.jsx(qse,{size:18})}),p.jsxs("span",{className:"text-gray-500 font-medium min-w-[32px] text-center",style:{fontSize:"0.857em"},children:[l+1,"/",a.length]}),p.jsx("button",{onClick:Me,className:"p-1 text-blue-500 hover:text-blue-600 transition-colors border-0 outline-none bg-transparent","aria-label":"Volgende laag",children:p.jsx(NE,{size:18})})]}),p.jsx("span",{className:"flex-1 font-semibold text-gray-800 truncate",style:{fontSize:"1em"},children:ie||"Info"}),U&&i.filter(Ye=>!Ye.archived).length>0&&p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>P(!C),className:`p-1.5 transition-colors flex-shrink-0 border-0 outline-none bg-transparent ${L?"text-green-500":"text-orange-500 hover:text-orange-600"}`,title:"Toevoegen aan mijn laag","aria-label":"Toevoegen aan mijn laag",children:L?p.jsx(pu,{size:18}):p.jsx(Xo,{size:18})}),C&&p.jsxs("div",{className:"absolute right-0 top-8 z-50 bg-white rounded-lg shadow-md py-1 min-w-[160px] max-w-[200px]",children:[p.jsx("div",{className:"px-3 py-1 text-xs text-gray-400 font-medium",children:"Toevoegen aan:"}),i.filter(Ye=>!Ye.archived).map(Ye=>p.jsx("button",{onClick:()=>{s(Ye.id,{name:ie||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[U[0],U[1]],sourceLayer:ie}),P(!1),O(Ye.name),setTimeout(()=>O(null),2e3)},className:"w-full px-3 py-1.5 text-left text-sm text-gray-700 hover:bg-blue-50 border-0 outline-none bg-transparent",children:p.jsx("span",{className:"truncate",children:Ye.name})},Ye.id))]})]}),W&&p.jsx("a",{href:W,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-blue-500 hover:text-blue-600 transition-colors flex-shrink-0",title:"Open in Google Maps","aria-label":"Open in Google Maps",children:p.jsx(E1,{size:18})}),p.jsx("button",{onClick:je,className:"p-1.5 text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0 border-0 outline-none bg-transparent","aria-label":"Sluiten",children:p.jsx(ls,{size:18})})]}),p.jsx("div",{className:"px-4 py-3 max-h-[45vh] overflow-y-auto select-text",style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:J}}),p.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2",children:[p.jsx(Eoe,{size:14,className:"text-gray-400 flex-shrink-0"}),p.jsx("input",{type:"range",min:"80",max:"150",value:xe,onChange:Ye=>Ge(parseInt(Ye.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[xe,"%"]})]}),X&&I&&!N&&p.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[p.jsxs("button",{onClick:()=>{const Ye=r.find(Zt=>Zt.id===I);Ye&&F(Ye)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Qx,{size:16}),p.jsx("span",{children:"Bewerken"})]}),p.jsxs("button",{onClick:()=>{e(I),f(!1),b(null)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(gd,{size:16}),p.jsx("span",{children:"Verwijderen"})]})]}),N&&p.jsxs("div",{className:"px-4 pb-4 space-y-3 border-t border-gray-100 pt-3",children:[p.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Vondst bewerken"}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Objecttype"}),p.jsx("input",{type:"text",value:N.objectType,onChange:Ye=>F({...N,objectType:Ye.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Materiaal"}),p.jsx("input",{type:"text",value:N.material,onChange:Ye=>F({...N,material:Ye.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Periode"}),p.jsx("input",{type:"text",value:N.period,onChange:Ye=>F({...N,period:Ye.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Notities"}),p.jsx("textarea",{value:N.notes,onChange:Ye=>F({...N,notes:Ye.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50 resize-none h-16"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>F(null),className:"flex-1 px-3 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none text-sm",children:"Annuleren"}),p.jsx("button",{onClick:()=>{t(N.id,{objectType:N.objectType,material:N.material,period:N.period,notes:N.notes}),F(null),f(!1)},className:"flex-1 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none text-sm",children:"Opslaan"})]})]}),te&&g&&p.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:v?p.jsxs("button",{onClick:Le,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(EI,{size:16}),p.jsx("span",{children:"Hoogtekaart verbergen"})]}):p.jsx("button",{onClick:Fe,disabled:w,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${w?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:w?p.jsxs(p.Fragment,{children:[p.jsx(vR,{size:16,className:"animate-spin"}),p.jsx("span",{children:"Laden..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(EI,{size:16}),p.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}const OO=1e-4;function PEe(n,e){return n.points.some(t=>{const r=Math.abs(t.coordinates[0]-e[0]),i=Math.abs(t.coordinates[1]-e[1]);return r<OO&&i<OO})}function kEe(){const n=os(P=>P.map),e=Cr(P=>P.openVondstForm),{openAddPointModal:t,openCreateLayerModal:r,openLayerManagerModal:i}=Cr(),s=$i(P=>P.layers),[a,o]=se.useState(null),[l,u]=se.useState(!1),[h,f]=se.useState(!1),[g,y]=se.useState(!1),v=se.useRef(null),x=se.useRef(null);se.useEffect(()=>{if(!n){console.log(" LongPressMenu: map not ready");return}const P=n.getViewport();if(!P){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",P);const L=600,O=15,U=Ie=>{if(console.log(" Touch start, touches:",Ie.touches.length),Ie.touches.length!==1)return;const Te=Ie.touches[0];x.current={x:Te.clientX,y:Te.clientY},console.log(" Starting long press timer at:",x.current),v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",x.current),!x.current)return;const ie=window.__olMap;if(!ie){console.log(" Map not available (global)");return}const V=P.getBoundingClientRect(),J=[x.current.x-V.left,x.current.y-V.top],te=ie.getCoordinateFromPixel(J);if(te){const X=mn(te);Ie.preventDefault(),o({pixel:[x.current.x,x.current.y],coordinate:X}),u(!0),f(!1),setTimeout(()=>f(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",X)}},L)},j=Ie=>{if(!v.current||!x.current)return;const Te=Ie.touches[0],ie=Te.clientX-x.current.x,V=Te.clientY-x.current.y,J=Math.sqrt(ie*ie+V*V);J>O&&(console.log(" Touch moved too much, cancelling. Distance:",J),clearTimeout(v.current),v.current=null)},xe=()=>{console.log(" Touch end, timer active:",!!v.current),v.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(v.current),v.current=null),x.current=null},Ce=Ie=>{l&&Ie.preventDefault()},Ge=Ie=>{Ie.button===0&&(console.log(" Mouse down"),x.current={x:Ie.clientX,y:Ie.clientY},v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!x.current)return;const Te=window.__olMap;if(console.log(" __olMap:",Te),console.log(" __olMap constructor:",Te?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof Te?.getCoordinateAtPixel),!Te){console.log(" Map not available (global)");return}const ie=P.getBoundingClientRect(),V=[x.current.x-ie.left,x.current.y-ie.top];console.log(" Pixel:",V);const J=Te.getCoordinateFromPixel(V);if(console.log(" Coordinate:",J),J){const te=mn(J);o({pixel:[x.current.x,x.current.y],coordinate:te}),u(!0),f(!1),setTimeout(()=>f(!0),300),console.log(" Long press (mouse) detected at:",te)}},L))},ke=Ie=>{if(!v.current||!x.current)return;const Te=Ie.clientX-x.current.x,ie=Ie.clientY-x.current.y;Math.sqrt(Te*Te+ie*ie)>O&&(console.log(" Mouse moved, cancelling"),clearTimeout(v.current),v.current=null)},ce=()=>{console.log(" Mouse up"),v.current&&(clearTimeout(v.current),v.current=null),x.current=null};return P.addEventListener("touchstart",U,{passive:!1}),P.addEventListener("touchmove",j,{passive:!0}),P.addEventListener("touchend",xe),P.addEventListener("touchcancel",xe),P.addEventListener("contextmenu",Ce),P.addEventListener("mousedown",Ge),P.addEventListener("mousemove",ke),P.addEventListener("mouseup",ce),P.addEventListener("mouseleave",ce),()=>{P.removeEventListener("touchstart",U),P.removeEventListener("touchmove",j),P.removeEventListener("touchend",xe),P.removeEventListener("touchcancel",xe),P.removeEventListener("contextmenu",Ce),P.removeEventListener("mousedown",Ge),P.removeEventListener("mousemove",ke),P.removeEventListener("mouseup",ce),P.removeEventListener("mouseleave",ce),v.current&&clearTimeout(v.current)}},[n,l]);const w=()=>{h&&(u(!1),o(null),f(!1),y(!1))},T=()=>{u(!1),o(null),f(!1),y(!1)},I=P=>{if(!a)return;const[L,O]=a.coordinate;t(P,{lat:O,lng:L}),T()},b=()=>{r(),T()},N=()=>{if(!a)return;const[P,L]=a.coordinate;e({lat:L,lng:P}),u(!1),o(null),f(!1)},F=()=>{if(!a)return;const[P,L]=a.coordinate,O=`https://www.google.com/maps?q=${L},${P}`;window.open(O,"_blank"),u(!1),o(null),f(!1)},W=()=>{if(!a)return;const P=document.createElement("input");P.type="file",P.accept="image/*",P.capture="environment",P.onchange=async L=>{const O=L.target.files?.[0];if(!O)return;const[U,j]=a.coordinate;e({lat:j,lng:U},O)},P.click(),T()},M=()=>{i(),T()},C=P=>{const[L,O]=P;return`${O.toFixed(5)}N, ${L.toFixed(5)}E`};return p.jsx(Mr,{children:l&&a&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:w}),p.jsxs(Ft.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(a.pixel[0],window.innerWidth-220),top:Math.min(a.pixel[1],window.innerHeight-240)},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[p.jsx("div",{className:"px-4 py-3 bg-white border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[p.jsx(zl,{size:16}),p.jsx("span",{className:"text-xs font-mono",children:C(a.coordinate)})]})}),p.jsxs("div",{className:"bg-white",children:[p.jsxs("button",{onClick:N,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-orange-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(_I,{size:20,className:"text-orange-500"}),p.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),p.jsxs("button",{onClick:W,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-green-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(mR,{size:20,className:"text-green-500"}),p.jsx("span",{className:"font-medium",children:"Foto maken"})]}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>y(!g),className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(Qa,{size:20,className:"text-purple-500"}),p.jsx("span",{className:"font-medium flex-1 text-left",children:"Voeg toe aan laag..."}),p.jsx(NE,{size:16,className:`text-gray-400 transition-transform ${g?"rotate-90":""}`})]}),p.jsx(Mr,{children:g&&p.jsx(Ft.div,{className:"bg-gray-50 border-t border-gray-100",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:s.length===0?p.jsxs("button",{onClick:b,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none",children:[p.jsx(Xo,{size:14}),p.jsx("span",{children:"Maak eerst een laag aan"})]}):p.jsxs(p.Fragment,{children:[s.map(P=>{const L=a?PEe(P,a.coordinate):!1;return p.jsxs("button",{onClick:()=>!L&&I(P.id),className:`w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm bg-transparent border-0 outline-none ${L?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,title:L?"Al toegevoegd aan deze laag":void 0,disabled:L,children:[L&&p.jsx(pu,{size:14,className:"text-green-500 flex-shrink-0"}),p.jsx("span",{className:"truncate",children:P.name}),p.jsx("span",{className:"text-xs text-gray-400 ml-auto",children:L?"al toegevoegd":`(${P.points.length})`})]},P.id)}),p.jsxs("button",{onClick:b,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none border-t border-gray-200",children:[p.jsx(Xo,{size:14}),p.jsx("span",{children:"Nieuwe laag..."})]})]})})})]}),p.jsxs("button",{onClick:M,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-purple-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(aoe,{size:20,className:"text-purple-500"}),p.jsx("span",{className:"font-medium",children:"Lagen beheren"})]}),p.jsxs("button",{onClick:F,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(E1,{size:20,className:"text-blue-600"}),p.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]})]}),p.jsx("div",{className:"bg-white",children:p.jsxs("button",{onClick:T,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[p.jsx(ls,{size:18}),p.jsx("span",{children:"Annuleren"})]})})]})]})})}const MEe={Compass:lae,TreePalm:xoe,Mountain:EI,Waves:Ioe,Search:wI,Target:poe,Layers:Qa,Grid:vae},NEe={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},LEe={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},DO=["Mijn Vondsten","Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","Runes","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Wandelroutes","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],OEe=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"],DEe=[5.2913,52.1326],FEe=8;function jEe(){const n=li(L=>L.setLayerVisibility),e=es(L=>L.stopTracking),t=os(L=>L.map),{presetsPanelOpen:r,togglePresetsPanel:i,closeAllPanels:s}=Cr(),{presets:a,applyPreset:o,updatePreset:l,createPreset:u,resetToDefaults:h}=W8(),f=li(L=>L.visible),g=kr(L=>L.presetPanelFontScale),y=kr(L=>L.setPresetPanelFontScale),v=12*g/100,[x,w]=se.useState(null),[T,I]=se.useState(!1),[b,N]=se.useState(""),F=()=>{s(),DO.forEach(L=>n(L,!1)),OEe.forEach(L=>{n(L,L==="CartoDB (licht)")}),e(),t&&t.getView().animate({center:au(DEe),zoom:FEe,duration:500}),console.log(" Reset: CartoDB, alle lagen uit, GPS uit, zoom naar Nederland")},W=L=>{o(L),s()},M=(L,O)=>{L.stopPropagation();const U=Object.entries(f).filter(([j,xe])=>xe&&DO.includes(j)).map(([j])=>j);l(O,{layers:U}),w(O),setTimeout(()=>w(null),2e3),console.log(" Lagen opgeslagen naar preset")},C=()=>{b.trim()&&(u(b.trim(),"Layers"),N(""),I(!1))},P=()=>{confirm("Alle presets terugzetten naar standaard? Dit verwijdert aangepaste presets.")&&h()};return p.jsxs(p.Fragment,{children:[p.jsx(Ft.button,{onClick:F,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Reset - CartoDB, alle lagen uit, GPS uit",children:p.jsx(Yae,{size:20,className:"text-gray-600"})}),p.jsx(Ft.button,{onClick:i,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Presets",children:r?p.jsx(A9,{size:20,className:"text-blue-600"}):p.jsx(Qa,{size:20,className:"text-blue-600"})}),p.jsx(Mr,{children:r&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i}),p.jsxs(Ft.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[60px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[240px] backdrop-blur-sm z-[801]",children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",style:{fontSize:`${v}px`},children:[p.jsx("span",{className:"font-medium text-white",children:"Presets"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:g,onInput:L=>{y(parseInt(L.target.value))},onChange:L=>y(parseInt(L.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${g}%`}),p.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),p.jsx("div",{className:"p-2 max-h-[300px] overflow-y-auto",children:a.map(L=>{const O=MEe[L.icon]||Qa,U=NEe[L.icon]||"text-blue-600",j=LEe[L.icon]||"hover:bg-blue-50",xe=x===L.id;return p.jsxs("button",{onClick:()=>W(L.id),className:`w-full h-8 flex items-center gap-2 px-2 ${j} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden ${xe?"bg-green-50":""}`,style:{fontSize:`${v}px`},children:[p.jsx(O,{size:14,className:`${U} flex-shrink-0`}),p.jsx("span",{className:"text-gray-700 truncate flex-1",children:L.name}),xe?p.jsx("span",{className:"ml-auto p-1 flex-shrink-0",children:p.jsx(pu,{size:14,className:"text-green-500"})}):p.jsx("span",{onClick:Ce=>M(Ce,L.id),className:"ml-auto p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:p.jsx(eoe,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},L.id)})}),p.jsx("div",{className:"border-t border-gray-200 p-2",children:T?p.jsxs("div",{className:"flex gap-1",children:[p.jsx("input",{type:"text",value:b,onChange:L=>N(L.target.value),onKeyDown:L=>{L.key==="Enter"&&C(),L.key==="Escape"&&I(!1)},placeholder:"Naam preset...",autoFocus:!0,className:"flex-1 px-2 py-1 text-sm rounded bg-gray-50 border-0 outline-none focus:ring-1 focus:ring-blue-400",style:{fontSize:`${v}px`}}),p.jsx("button",{onClick:C,disabled:!b.trim(),className:"px-2 py-1 bg-blue-500 text-white rounded text-sm disabled:opacity-50 border-0 outline-none",children:p.jsx(pu,{size:14})})]}):p.jsxs("div",{className:"flex gap-1",children:[p.jsxs("button",{onClick:()=>I(!0),className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",style:{fontSize:`${v}px`},children:[p.jsx(Xo,{size:14}),p.jsx("span",{children:"Nieuwe preset"})]}),p.jsx("button",{onClick:P,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors border-0 outline-none",title:"Presets terugzetten naar standaard",children:p.jsx(qae,{size:14})})]})})]})]})})]})}function VEe(){const n=os(a=>a.map),[e,t]=se.useState(0),[r,i]=se.useState(!1);se.useEffect(()=>{if(!n)return;const a=n.getView(),o=()=>{const l=a.getRotation(),u=l*180/Math.PI;t(u),i(Math.abs(l)>.087)};return o(),a.on("change:rotation",o),()=>{a.un("change:rotation",o)}},[n]);const s=()=>{n&&n.getView().animate({rotation:0,duration:300})};return p.jsx(Mr,{children:r&&p.jsx(Ft.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:p.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[p.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),p.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),p.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const GEe=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],BEe={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function UEe(){const[n,e]=se.useState(!1),[t,r]=se.useState(!1),i=li(h=>h.visible),s=li(h=>h.opacity),a=li(h=>h.setLayerOpacity),o=GEe.filter(h=>i[h.name]);if(o.length===0)return null;const l=t?o:o.slice(0,3),u=o.length>3;return p.jsxs("div",{className:"fixed bottom-[112px] right-2 z-[900]",children:[p.jsxs(Ft.button,{onClick:()=>e(!n),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:n?"Sluit opacity sliders":"Open opacity sliders",children:[p.jsx(loe,{size:22,strokeWidth:2,className:"text-gray-500"}),o.length>0&&p.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:o.length})]}),p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),p.jsxs(Ft.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-lg shadow-lg p-3 min-w-[220px] max-h-[60vh] overflow-y-auto",children:[p.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide",children:"Transparantie"}),p.jsx("div",{className:"space-y-3",children:l.map(h=>{const f=s[h.name]??h.default;return p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:h.name,children:h.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"range",min:"0",max:"100",value:f*100,onChange:g=>a(h.name,parseInt(g.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${BEe[h.color]}`}),p.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(f*100),"%"]})]})]},h.name)})}),u&&p.jsx("button",{onClick:()=>r(!t),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:t?p.jsxs(p.Fragment,{children:[p.jsx(A9,{size:14}),"Minder tonen"]}):p.jsxs(p.Fragment,{children:[p.jsx(pR,{size:14}),o.length-3," meer..."]})})]})]})})]})}function zEe(){const n=os(b=>b.map),[e,t]=se.useState(!1),[r,i]=se.useState(""),[s,a]=se.useState([]),[o,l]=se.useState(!1),[u,h]=se.useState(!1),f=se.useRef(null),g=se.useRef(null),y=se.useRef();se.useEffect(()=>{e&&f.current&&f.current.focus()},[e]),se.useEffect(()=>{if(!e)return;const b=N=>{g.current&&!g.current.contains(N.target)&&v()};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[e]),se.useEffect(()=>{if(!e)return;const b=N=>{N.key==="Escape"&&v()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[e]),se.useEffect(()=>{if(y.current&&clearTimeout(y.current),r.length<2){a([]);return}return y.current=window.setTimeout(async()=>{h(!0);try{const N=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(r)}&rows=7`)).json();N.response?.docs&&a(N.response.docs)}catch(b){console.error("Search error:",b),a([])}finally{h(!1)}},300),()=>{y.current&&clearTimeout(y.current)}},[r]);const v=()=>{t(!1),i(""),a([]),l(!1)},x=async b=>{try{const F=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(b)}`)).json();if(F.response?.docs?.[0]?.centroide_ll){const M=F.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(M)return{lng:parseFloat(M[1]),lat:parseFloat(M[2])}}}catch(N){console.error("Lookup error:",N)}return null},w=async b=>{if(!n)return;const N=await x(b.id);N&&n.getView().animate({center:au([N.lng,N.lat]),zoom:16,duration:1e3}),v()},T=async(b,N)=>{N.stopPropagation();const F=await x(b.id);if(F){const W=`https://www.google.com/maps?q=${F.lat},${F.lng}`;window.open(W,"_blank")}v()},I={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"};return e?p.jsxs("div",{ref:g,className:"fixed left-[52px] right-14 z-[850]",style:I,children:[p.jsxs(Ft.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"search-input-wrapper",children:[p.jsx(wI,{size:18,className:"search-icon"}),p.jsx("input",{ref:f,type:"text",value:r,onChange:b=>{i(b.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),p.jsx("button",{onClick:v,className:"search-clear",title:"Sluiten",children:p.jsx(ls,{size:18})})]}),p.jsx(Mr,{children:o&&s.length>0&&p.jsx(Ft.ul,{className:"search-results",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:s.map(b=>p.jsxs("li",{className:"search-result-item",children:[p.jsx("div",{className:"search-result-content",onClick:()=>w(b),children:p.jsx("span",{className:"search-result-text",children:b.weergavenaam})}),p.jsx("button",{className:"search-navigate-btn",onClick:N=>T(b,N),title:"Open in Google Maps",children:p.jsx(E1,{size:20})})]},b.id))})}),o&&u&&p.jsx("div",{className:"search-loading",children:"Zoeken..."})]}):p.jsx(Ft.button,{className:"fixed right-14 z-[800] w-11 h-11 flex items-center justify-center bg-white/90 hover:bg-white rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",style:I,onClick:()=>t(!0),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Zoeken",children:p.jsx(wI,{size:22,className:"text-gray-600"})})}function $Ee(){const n=os(r=>r.map),e=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},t=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return p.jsxs("div",{className:"fixed top-2 left-2 z-[800] flex flex-col gap-1",children:[p.jsx(Ft.button,{className:"w-9 h-9 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:p.jsx(Xo,{size:18,className:"text-gray-600"})}),p.jsx(Ft.button,{className:"w-9 h-9 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:p.jsx(Fae,{size:18,className:"text-gray-600"})})]})}const WEe="detector2024",UI="detectorapp-auth";function HEe({children:n}){const[e,t]=se.useState(!1),[r,i]=se.useState(""),[s,a]=se.useState(!1),[o,l]=se.useState(""),[u,h]=se.useState(!0);se.useEffect(()=>{localStorage.getItem(UI)==="authenticated"&&t(!0),h(!1)},[]);const f=g=>{g.preventDefault(),l(""),r===WEe?(localStorage.setItem(UI,"authenticated"),t(!0)):(l("Onjuist wachtwoord"),i(""))};return u?p.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:p.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?p.jsx(p.Fragment,{children:n}):p.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:p.jsxs(Ft.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(vI,{size:32,className:"text-blue-600"})}),p.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),p.jsxs("form",{onSubmit:f,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:s?"text":"password",value:r,onChange:g=>i(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),p.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?p.jsx(yR,{size:20}):p.jsx(_R,{size:20})})]})]}),o&&p.jsx(Ft.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:o}),p.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),p.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function KEe(){localStorage.removeItem(UI),window.location.reload()}function YEe({isOpen:n,onClose:e}){const t=Uo(l=>l.vondsten),r={total:t.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:t.slice(-5).reverse()};let i=0,s=0;t.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const a=l=>Object.entries(l).sort((u,h)=>h[1]-u[1]),o=l=>Math.max(...Object.values(l),1);return p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(Ft.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(I9,{size:18}),p.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(ls,{size:18})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:t.length===0?p.jsxs("div",{className:"text-center py-8 text-gray-500",children:[p.jsx(zl,{size:48,className:"mx-auto mb-3 opacity-30"}),p.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),p.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsx(WS,{icon:p.jsx(zl,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),p.jsx(WS,{icon:p.jsx(Qae,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),p.jsx(WS,{icon:p.jsx(noe,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),p.jsx(E_,{title:"Per Type",data:a(r.byType),max:o(r.byType),color:"bg-orange-500"}),p.jsx(E_,{title:"Per Periode",data:a(r.byPeriod),max:o(r.byPeriod),color:"bg-amber-500"}),p.jsx(E_,{title:"Per Materiaal",data:a(r.byMaterial),max:o(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&p.jsx(E_,{title:"Per Conditie",data:a(r.byCondition),max:o(r.byCondition),color:"bg-green-500"}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[p.jsx($se,{size:14}),"Recente Vondsten"]}),p.jsx("div",{className:"space-y-2",children:r.recent.map(l=>p.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),p.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),p.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),p.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function WS({icon:n,value:e,label:t,color:r}){return p.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[p.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:n}),p.jsx("div",{className:"text-xl font-bold",children:e}),p.jsx("div",{className:"text-xs opacity-70",children:t})]})}function E_({title:n,data:e,max:t,color:r}){return e.length===0?null:p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:n}),p.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),p.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:p.jsx(Ft.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/t*100}%`},transition:{duration:.5,ease:"easeOut"}})}),p.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function XEe(n){const{type:e,coordinates:t}=n,r=o=>au(o),i=o=>o.map(r),s=o=>o.map(i),a=o=>o.map(s);switch(e){case"Point":return new no(r(t));case"LineString":return new Wo(i(t));case"Polygon":return new ro(s(t));case"MultiPoint":return new N0(i(t));case"MultiLineString":return new ou(s(t));case"MultiPolygon":return new u0(a(t));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function qEe(n,e,t){const r=n.color,i=10,s=5,a=14;let o=i;if(t>50?o=s:t>10?o=Math.max(s,i-(t-10)/10):t<2&&(o=a),e==="Point"||e==="MultiPoint")return new gr({image:new Fl({radius:o,fill:new di({color:r}),stroke:new Ts({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new gr({stroke:new Ts({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=ZEe(r,.3);return new gr({fill:new di({color:l}),stroke:new Ts({color:r,width:2})})}return new gr({image:new Fl({radius:o,fill:new di({color:r}),stroke:new Ts({color:"#ffffff",width:2})})})}function ZEe(n,e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(t){const r=parseInt(t[1],16),i=parseInt(t[2],16),s=parseInt(t[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return n}function QEe(){const n=os(r=>r.map),e=AE(r=>r.layers),t=se.useRef(new Map);return se.useEffect(()=>{if(!n)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new Hp;i.features.features.forEach((o,l)=>{if(!o.geometry)return;const u=XEe(o.geometry);if(!u)return;const h=new to({geometry:u,properties:o.properties,layerId:i.id,featureIndex:l});h.setStyle((f,g)=>qEe(i,o.geometry.type,g)),s.addFeature(h)});const a=t.current.get(i.id);if(a)a.setSource(s),a.setVisible(i.visible),a.setOpacity(i.opacity);else{const o=new Zp({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});n.addLayer(o),t.current.set(i.id,o)}}),t.current.forEach((i,s)=>{r.has(s)||(n.removeLayer(i),t.current.delete(s))})},[n,e]),se.useEffect(()=>()=>{n&&(t.current.forEach(r=>{n.removeLayer(r)}),t.current.clear())},[n]),null}pn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");k7(pn);function JEe(n){if(!n||n.length<2)return"unknown";const[e,t]=n;return e>=7e3&&e<=3e5&&t>=289e3&&t<=629e3?"RD":Math.abs(e)<=180&&Math.abs(t)<=90?"WGS84":"unknown"}function ewe(n){const[e,t]=n;return pn("EPSG:28992","EPSG:4326",[e,t])}function dG(n,e){return typeof n[0]=="number"?e(n):n.map(t=>dG(t,e))}function twe(n){const e=n.coordinates;return!e||Array.isArray(e)&&e.length===0?null:n.type==="Point"?e:n.type==="LineString"||n.type==="MultiPoint"?e[0]:n.type==="Polygon"||n.type==="MultiLineString"?e[0]?.[0]:n.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function nwe(n){const e=[],t=[];try{const r=await n.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((u,h)=>({type:"Feature",geometry:u,properties:{id:h}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&t.push("Geen features gevonden in bestand");let a="unknown",o=!1;if(s.length>0&&s[0].geometry){const u=twe(s[0].geometry);u&&(a=JEe(u))}a==="RD"&&(t.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),o=!0,s=s.map(u=>{if(!u.geometry)return u;const h=dG(u.geometry.coordinates,ewe);return{...u,geometry:{...u.geometry,coordinates:h}}}),a="WGS84");const l=[...new Set(s.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:t,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:a,transformed:o}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function rwe(n){const e=[],t=[];try{const r=await n.text(),s=new a0e({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in KML bestand");const l=new FR().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((h,f)=>{const g={...h.properties},y=g.name||g.Name||`Feature ${f+1}`,v=g.description||g.Description||"";return{type:"Feature",geometry:h.geometry,properties:{...g,name:y,description:v}}}),u=[...new Set(l.filter(h=>h.geometry).map(h=>h.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function iwe(n){const e=[],t=[];try{const r=await n.text(),s=new vfe().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in GPX bestand");const l=new FR().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((h,f)=>{const g={...h.properties},y=g.name||g.Name||`Waypoint ${f+1}`,v=g.desc||g.description||"",x=g.time||null,w=g.ele||null;return{type:"Feature",geometry:h.geometry,properties:{...g,name:y,description:v,time:x,elevation:w}}}),u=[...new Set(l.filter(h=>h.geometry).map(h=>h.geometry.type))];return u.includes("LineString")&&t.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function gC(n){switch(n.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function swe(){return".geojson,.json,.kml,.gpx"}function mC(){return"GeoJSON, KML (Google My Maps), GPX"}async function awe(n){switch(gC(n.name)){case"geojson":return nwe(n);case"kml":return rwe(n);case"gpx":return iwe(n);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${n.name}. Ondersteunde formaten: ${mC()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function owe(n){return n.size>10485760?{valid:!1,error:`Bestand te groot (${(n.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:gC(n.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${mC()}`}:n.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function lwe({isOpen:n,onClose:e}){const t=AE(C=>C.addLayer),r=se.useRef(null),[i,s]=se.useState("idle"),[a,o]=se.useState(null),[l,u]=se.useState(null),[h,f]=se.useState(""),[g,y]=se.useState(null),[v,x]=se.useState(!1),w=se.useCallback(()=>{s("idle"),o(null),u(null),f(""),y(null),r.current&&(r.current.value="")},[]),T=se.useCallback(()=>{w(),e()},[w,e]),I=se.useCallback(async C=>{const P=owe(C);if(!P.valid){y(P.error||"Ongeldig bestand"),s("error");return}o(C),s("parsing"),y(null);const L=C.name.replace(/\.[^/.]+$/,"");f(L);try{const O=await awe(C);if(!O.success){y(O.errors.join(`
`)),s("error");return}if(O.features.features.length===0){y("Geen features gevonden in het bestand"),s("error");return}u(O),s("preview")}catch(O){y(O instanceof Error?O.message:"Onbekende fout bij parsen"),s("error")}},[]),b=se.useCallback(C=>{const P=C.target.files?.[0];P&&I(P)},[I]),N=se.useCallback(C=>{C.preventDefault(),x(!0)},[]),F=se.useCallback(C=>{C.preventDefault(),x(!1)},[]),W=se.useCallback(C=>{C.preventDefault(),x(!1);const P=C.dataTransfer.files?.[0];P&&I(P)},[I]),M=se.useCallback(()=>{if(!l||!h.trim())return;const C=a?gC(a.name):"geojson";t({name:h.trim(),type:C==="unsupported"?"geojson":C,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:a?.name||"unknown"}),T()},[l,h,a,t,T]);return p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),p.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(TR,{size:18}),p.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),p.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(ls,{size:18})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${v?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:N,onDragLeave:F,onDrop:W,children:[p.jsx(xR,{size:40,className:"mx-auto text-gray-400 mb-3"}),p.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),p.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),p.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),p.jsx("input",{ref:r,type:"file",accept:swe(),onChange:b,className:"hidden"})]}),p.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[p.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),p.jsx("p",{children:mC()})]})]}),i==="parsing"&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[p.jsx(vR,{size:40,className:"text-purple-500 animate-spin mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),p.jsx("p",{className:"text-gray-400 text-sm",children:a?.name})]}),i==="error"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[p.jsx(b9,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),p.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:g})]})]}),p.jsx("button",{onClick:w,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[p.jsx(tae,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),p.jsx("p",{className:"text-sm text-green-600",children:a?.name})]})]}),l.warnings.length>0&&p.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[p.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),p.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((C,P)=>p.jsx("li",{children:C},P))})]}),p.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500",children:"Features:"}),p.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500",children:"Types:"}),p.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),p.jsx("input",{type:"text",value:h,onChange:C=>f(C.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[p.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),p.jsx("button",{onClick:M,disabled:!h.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function cwe({layer:n}){const{toggleVisibility:e,removeLayer:t}=AE(),[r,i]=se.useState(!1),s=n.features.features.length,a=[...new Set(n.features.features.map(l=>l.geometry?.type).filter(Boolean))],o=()=>{r?t(n.id):(i(!0),setTimeout(()=>i(!1),3e3))};return p.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[p.jsx("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"flex items-center gap-1",children:p.jsx("span",{className:"text-sm text-gray-700 truncate",children:n.name})}),p.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[p.jsx(xR,{size:10}),p.jsxs("span",{children:[s," ",s===1?"feature":"features"]}),a.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"mx-0.5",children:""}),p.jsx("span",{children:a.join(", ")})]})]})]})}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>e(n.id),className:`p-1 rounded transition-colors border-0 outline-none ${n.visible?"text-purple-500 hover:bg-purple-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?p.jsx(_R,{size:14}):p.jsx(yR,{size:14})}),p.jsx("button",{onClick:o,className:`p-1 rounded transition-colors border-0 outline-none ${r?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:r?"Klik nogmaals om te verwijderen":"Verwijderen",children:p.jsx(gd,{size:14})})]})]})}function uwe(){const{user:n,loading:e,error:t,signInWithGoogle:r,logout:i,initAuth:s}=IE();return se.useEffect(()=>{s()},[s]),e?p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg text-gray-500",children:[p.jsx(_L,{size:16,className:"animate-pulse"}),p.jsx("span",{className:"text-sm",children:"Laden..."})]}):n?p.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-green-50 rounded-lg",children:[n.photoURL?p.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-8 h-8 rounded-full border-2 border-green-200",referrerPolicy:"no-referrer"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-green-200 flex items-center justify-center",children:p.jsx(IR,{size:16,className:"text-green-600"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"text-sm font-medium text-green-800 truncate",children:n.displayName||n.email}),p.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[p.jsx(_L,{size:12}),"Cloud sync actief"]})]}),p.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:p.jsx(ER,{size:16})})]}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg text-gray-500",children:[p.jsx(rae,{size:16}),p.jsx("span",{className:"text-sm",children:"Alleen lokale opslag"})]}),p.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none",children:[p.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),p.jsx("span",{className:"text-sm text-gray-700",children:"Inloggen met Google"})]}),t&&p.jsx("div",{className:"px-3 py-2 bg-red-50 text-red-700 text-xs rounded-lg",children:t})]})}const hwe="https://forms.gle/R5LCk11Bzu5XrkBj8";function dwe(){const{settingsPanelOpen:n,toggleSettingsPanel:e,vondstDashboardOpen:t,toggleVondstDashboard:r,openLayerManagerModal:i}=Cr(),s=kr(),{presets:a,createPreset:o,deletePreset:l,updatePreset:u}=W8(),h=Uo(J=>J.vondsten),f=AE(J=>J.layers),{layers:g,updateLayer:y}=$i(),{devMode:v,setDevMode:x,tier:w}=H8(),[T,I]=se.useState(""),[b,N]=se.useState(!1),[F,W]=se.useState(!1),[M,C]=se.useState(null),[P,L]=se.useState(""),[O,U]=se.useState(null),[j,xe]=se.useState(""),[Ce,Ge]=se.useState("algemeen"),ke=14*s.fontScale/100,ce=()=>{T.trim()&&(o(T.trim(),"Layers"),I(""),N(!1))},Ie=(J,te)=>{C(J),L(te)},Te=J=>{P.trim()&&(u(J,{name:P.trim()}),console.log(` Preset hernoemd naar "${P.trim()}"`)),C(null),L("")},ie=()=>{C(null),L("")},V=[{id:"algemeen",label:"Algemeen",icon:p.jsx(uoe,{size:14})},{id:"lagen",label:"Lagen",icon:p.jsx(Qa,{size:14})},{id:"vondsten",label:"Vondsten",icon:p.jsx(zl,{size:14})}];return p.jsxs(p.Fragment,{children:[p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(Ft.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",style:{fontSize:`${ke}px`},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(SI,{size:18,className:"text-white"}),p.jsx("span",{className:"font-medium text-white",children:"Instellingen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:s.fontScale,onInput:J=>{s.setFontScale(parseInt(J.target.value))},onChange:J=>s.setFontScale(parseInt(J.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s.fontScale}%`}),p.jsx("span",{className:"text-xs text-blue-200",children:"T"}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none ml-1",children:p.jsx(ls,{size:18,className:"text-white",strokeWidth:2.5})})]})]}),p.jsx("div",{className:"flex border-b border-gray-200",children:V.map(J=>p.jsxs("button",{onClick:()=>Ge(J.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${Ce===J.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[J.icon,J.label]},J.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${ke}px`},children:[Ce==="algemeen"&&p.jsxs(p.Fragment,{children:[p.jsx(_l,{title:"Account",icon:p.jsx(IR,{size:16}),children:p.jsx(uwe,{})}),p.jsxs(_l,{title:"Kaart",icon:p.jsx(wR,{size:16}),children:[p.jsx(fwe,{label:"Standaard achtergrond",children:p.jsxs("select",{value:s.defaultBackground,onChange:J=>s.setDefaultBackground(J.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),p.jsx("option",{value:"OpenStreetMap",children:"OSM"}),p.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),p.jsx(mf,{label:"Schaalbalk tonen",checked:s.showScaleBar,onChange:s.setShowScaleBar})]}),p.jsxs(_l,{title:"GPS",icon:p.jsx(SR,{size:16}),children:[p.jsx(mf,{label:"GPS aan bij start",checked:s.gpsAutoStart,onChange:s.setGpsAutoStart}),p.jsx(mf,{label:"Nauwkeurigheidscirkel",checked:s.showAccuracyCircle,onChange:s.setShowAccuracyCircle})]}),p.jsx(_l,{title:"Feedback",icon:p.jsx(doe,{size:16}),children:p.jsx(mf,{label:"Trillen bij acties",checked:s.hapticFeedback,onChange:s.setHapticFeedback})}),p.jsxs(_l,{title:"Development",icon:p.jsx(aae,{size:16}),children:[p.jsx(mf,{label:"Dev Mode (alles ontgrendeld)",checked:v,onChange:x}),p.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:["Huidige tier: ",p.jsx("span",{className:"font-medium text-blue-600",children:w}),v&&p.jsx("span",{className:"text-green-600",children:" (alle lagen ontgrendeld)"})]})]})]}),Ce==="lagen"&&p.jsxs(p.Fragment,{children:[p.jsx(_l,{title:"Mijn Lagen",icon:p.jsx(Qa,{size:16}),isOwn:!0,children:p.jsxs("div",{className:"space-y-1",children:[g.filter(J=>!J.archived).length===0?p.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen aangemaakt."}):g.filter(J=>!J.archived).map(J=>p.jsx("div",{className:"flex items-center gap-2 py-1.5 px-2 hover:bg-gray-50 rounded",children:O===J.id?p.jsx("input",{type:"text",value:j,onChange:te=>xe(te.target.value),onKeyDown:te=>{te.key==="Enter"?(j.trim()&&y(J.id,{name:j.trim()}),U(null)):te.key==="Escape"&&U(null)},onBlur:()=>{j.trim()&&y(J.id,{name:j.trim()}),U(null)},autoFocus:!0,className:"flex-1 px-1.5 py-0.5 text-sm bg-orange-50 rounded outline-none focus:ring-1 focus:ring-orange-400"}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"flex-1 text-sm text-gray-700 truncate",children:J.name}),p.jsxs("span",{className:"text-xs text-gray-400",children:[J.points.length," punten"]}),p.jsx("button",{onClick:()=>{U(J.id),xe(J.name)},className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none bg-transparent",title:"Naam bewerken",children:p.jsx(Qx,{size:12})})]})},J.id)),p.jsxs("button",{onClick:()=>{i(),e()},className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(SI,{size:14}),p.jsx("span",{children:"Lagen beheren"})]})]})}),p.jsx(_l,{title:"Eigen Lagen",icon:p.jsx(TR,{size:16}),children:p.jsxs("div",{className:"space-y-1",children:[f.length===0?p.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen gemporteerd."}):f.map(J=>p.jsx(cwe,{layer:J},J.id)),p.jsxs("button",{onClick:()=>W(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-purple-600 hover:bg-purple-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(Xo,{size:14}),p.jsx("span",{children:"Laag importeren"})]}),p.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),p.jsx(_l,{title:"Presets",icon:p.jsx(Qa,{size:16}),children:p.jsxs("div",{className:"space-y-2",children:[a.map(J=>p.jsx("div",{className:"flex items-center justify-between py-1",children:M===J.id?p.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[p.jsx("input",{type:"text",value:P,onChange:te=>L(te.target.value),onKeyDown:te=>{te.key==="Enter"&&Te(J.id),te.key==="Escape"&&ie()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),p.jsx("button",{onClick:()=>Te(J.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),p.jsx("button",{onClick:ie,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[J.name,J.isBuiltIn&&p.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),p.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",J.layers.length," lagen)"]})]}),!J.isBuiltIn&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>Ie(J.id,J.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:p.jsx(Qx,{size:14})}),p.jsx("button",{onClick:()=>l(J.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:p.jsx(gd,{size:14})})]})]})},J.id)),b?p.jsxs("div",{className:"flex gap-2 mt-2",children:[p.jsx("input",{type:"text",value:T,onChange:J=>I(J.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:J=>J.key==="Enter"&&ce(),autoFocus:!0}),p.jsx("button",{onClick:ce,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),p.jsx("button",{onClick:()=>N(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):p.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(Xo,{size:14}),p.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),Ce==="vondsten"&&p.jsx(p.Fragment,{children:p.jsxs(_l,{title:"Vondsten",icon:p.jsx(zl,{size:16}),isOwn:!0,children:[p.jsx(mf,{label:"Vondsten knop tonen",checked:s.showVondstButton,onChange:s.setShowVondstButton}),p.jsx("p",{className:"text-gray-500 mt-1 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),p.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(I9,{size:14}),p.jsxs("span",{children:["Dashboard (",h.length," vondsten)"]})]}),p.jsx(gwe,{})]})})]}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${ke}px`},children:[p.jsxs("a",{href:hwe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx(T9,{size:16}),p.jsx("span",{children:"Meld een bug"})]}),p.jsxs("button",{onClick:KEe,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx(ER,{size:16}),p.jsx("span",{children:"Uitloggen"})]}),p.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),p.jsx(YEe,{isOpen:t,onClose:r}),p.jsx(lwe,{isOpen:F,onClose:()=>W(!1)})]})}function _l({title:n,icon:e,children:t,isOwn:r}){return p.jsxs("section",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[p.jsx("span",{className:r?"text-orange-600":"text-blue-600",children:e}),p.jsx("span",{className:`font-medium ${r?"text-orange-600":"text-gray-800"}`,style:{fontSize:"1em"},children:n})]}),p.jsx("div",{className:"space-y-2",children:t})]})}function fwe({label:n,children:e}){return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),e]})}function mf({label:n,checked:e,onChange:t}){return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),p.jsx("button",{onClick:()=>t(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function gwe(){const[n,e]=se.useState(!1),{vondsten:t,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:a,exportAsKML:o}=Uo(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:a,desc:"GPS apparaten"},{label:"KML",action:o,desc:"Google Earth"}],u=h=>{h(),e(!1)};return t.length===0?p.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[p.jsx(xI,{size:14}),p.jsx("span",{children:"Geen vondsten om te exporteren"})]}):p.jsxs("div",{className:"relative mt-2",children:[p.jsxs("button",{onClick:()=>e(!n),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(xI,{size:14}),p.jsxs("span",{children:["Exporteer vondsten (",t.length,")"]})]}),p.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),n&&p.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((h,f)=>p.jsxs("button",{onClick:()=>u(h.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[p.jsx("span",{className:"text-gray-700",children:h.label}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:h.desc})]},f))})]})}const pC="2.26.9";function mwe({size:n=18}){return p.jsxs("svg",{viewBox:"0 0 24 24",width:n,height:n,children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function pwe(){const[n,e]=se.useState(!1),{user:t,loading:r,signInWithGoogle:i,logout:s}=IE(),{toggleInfoPanel:a,toggleSettingsPanel:o}=Cr(),l=kr(T=>T.menuFontScale),u=kr(T=>T.setMenuFontScale),h={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"},f=()=>e(!1),g=()=>{f(),a()},y=()=>{f(),o()},v=()=>{f(),i()},x=()=>{f(),s()},w=13*l/100;return p.jsxs(p.Fragment,{children:[p.jsx(Ft.button,{className:`fixed right-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${n?"bg-blue-500 hover:bg-blue-600":"bg-white/90 hover:bg-white"}`,style:h,onClick:()=>e(!n),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Menu",children:n?p.jsx(ls,{size:22,className:"text-white"}):p.jsx(Oae,{size:22,className:"text-gray-600"})}),p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[799]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f}),p.jsxs(Ft.div,{initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15},className:"fixed right-2 z-[801] w-64 bg-white rounded-xl shadow-lg overflow-hidden flex flex-col",style:{top:"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)",fontSize:`${w}px`},children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",children:[p.jsx("span",{className:"font-medium text-white",style:{fontSize:`${w}px`},children:"Menu"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:l,onInput:T=>u(parseInt(T.target.value)),onChange:T=>u(parseInt(T.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${l}%`}),p.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),r?p.jsx("div",{className:"px-3 py-4 flex items-center justify-center",children:p.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}):t?p.jsx("div",{className:"px-3 py-3 border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-3",children:[t.photoURL?p.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-8 h-8 rounded-full",referrerPolicy:"no-referrer"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:p.jsx(IR,{size:16,className:"text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-gray-800 truncate",style:{fontSize:"0.85em"},children:t.displayName||"Gebruiker"}),p.jsx("div",{className:"text-green-600",style:{fontSize:"0.7em"},children:"Cloud sync actief"})]}),p.jsx("button",{onClick:x,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:p.jsx(ER,{size:16})})]})}):p.jsxs("button",{onClick:v,className:"w-full px-3 py-3 flex items-center gap-3 hover:bg-blue-50 transition-colors border-0 outline-none bg-transparent",children:[p.jsx(mwe,{size:18}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Inloggen met Google"})]}),p.jsx("div",{className:"py-1",children:p.jsxs("button",{onClick:g,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-blue-50",style:{fontSize:"0.95em"},children:[p.jsx(R9,{size:18,className:"text-blue-500"}),p.jsx("span",{children:"Info & handleiding"})]})}),p.jsx("div",{className:"mt-auto border-t border-gray-100",children:p.jsxs("button",{onClick:y,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-gray-50",style:{fontSize:"0.95em"},children:[p.jsx(SI,{size:18,className:"text-gray-500"}),p.jsx("span",{children:"Instellingen"})]})}),p.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-center text-gray-400",style:{fontSize:"0.65em"},children:["DetectorApp NL v",pC]})]})]})})]})}const ywe="https://forms.gle/R5LCk11Bzu5XrkBj8";function _we(){const{infoPanelOpen:n,toggleInfoPanel:e}=Cr(),[t,r]=se.useState("info"),i=[{id:"info",label:"Info",icon:p.jsx(R9,{size:14})},{id:"functies",label:"Functies",icon:p.jsx(xR,{size:14})},{id:"handleiding",label:"Handleiding",icon:p.jsx(Bse,{size:14})}];return p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(Ft.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",children:[p.jsx("span",{className:"font-medium text-white",children:"DetectorApp NL"}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none",children:p.jsx(ls,{size:18,className:"text-white",strokeWidth:2.5})})]}),p.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>p.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${t===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[t==="info"&&p.jsx(xwe,{}),t==="functies"&&p.jsx(vwe,{}),t==="handleiding"&&p.jsx(Ewe,{}),p.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[p.jsxs("a",{href:ywe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[p.jsx(T9,{size:14}),p.jsx("span",{className:"text-sm",children:"Meld een bug"})]}),p.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["DetectorApp NL v",pC]})]})]})]})]})})}function xwe(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),p.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d kaartapplicatie voor metaaldetectie en archeologische verkenning in Nederland. Met 60+ kaartlagen, GPS tracking met richtingspijl en vondstenbeheer."})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),p.jsxs("ul",{className:"space-y-2 text-gray-600",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"AMK, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Parken, Kringloopwinkels, Musea"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Itiner-E"})," (CC BY 4.0)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"CARTO"})," (CC BY 3.0)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"CartoDB basiskaart"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Map5.nl / Kadaster"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Provinciale data"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data"})]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Locatiegegevens:"})," Alleen voor navigatie, niet opgeslagen of gedeeld."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Geen tracking:"})," Geen analytics of gebruiksstatistieken."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Lokale opslag:"})," Alle data blijft op je apparaat."]})]})]})]})}function vwe(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(wR,{size:16,className:"text-blue-600"}),"Kaartlagen (60+)"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Romeinse wegen, Kastelen, IKAW"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Percelen:"})," Gewaspercelen, Kadastrale Grenzen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(SR,{size:16,className:"text-green-600"}),"GPS Tracking"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),p.jsx("li",{children:"Richtingspijl draait mee met je telefoon (zoals Google Maps)"}),p.jsx("li",{children:"Kaart handmatig draaien + kompasknop om terug te draaien naar noorden"}),p.jsx("li",{children:"Schaalbalk onderaan (instelbaar in Instellingen)"}),p.jsx("li",{children:'Open locatie in Google Maps (long-press  "Open in Google Maps")'})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(zl,{size:16,className:"text-orange-600"}),"Vondsten"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Toevoegen via GPS, long-press of handmatig"}),p.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht, foto-link"}),p.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),p.jsx("li",{children:"Dashboard met statistieken"}),p.jsx("li",{children:"Lokale opslag (geen account nodig)"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Qa,{size:16,className:"text-purple-600"}),"Presets"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen"}),p.jsx("li",{children:"Alle presets zijn aanpasbaar - klik op het diskette-icoon om huidige lagen op te slaan"}),p.jsx("li",{children:"Eigen presets aanmaken via Instellingen"}),p.jsx("li",{children:"Tekstgrootte per panel instelbaar via slider in header"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Gae,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:'Zet "Kadastrale Grenzen" aan en tik op een perceel'}),p.jsx("li",{children:"Toont: kadastrale aanduiding (gemeente, sectie, nummer) + oppervlakte"}),p.jsx("li",{children:"Link naar eigenaar opzoeken (betaalde dienst)"}),p.jsx("li",{children:"Hoogtekaart per perceel (AHN4)"})]})]})]})}function Ewe(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),p.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[p.jsxs("li",{children:["Tik op de ",p.jsx("strong",{children:"GPS knop"})," (rechtsonder) om je locatie te zien"]}),p.jsxs("li",{children:["Kies een ",p.jsx("strong",{children:"preset"})," (links, laagjes-icoon) of selecteer kaartlagen handmatig"]}),p.jsxs("li",{children:["Tik op de ",p.jsx("strong",{children:"Kaartlagen knop"})," voor alle beschikbare lagen"]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS knop"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Uit (grijs icoon):"})," GPS tracking uit, geen locatie zichtbaar."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Aan (blauw icoon):"})," GPS tracking aan, je locatie en richting worden getoond."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Richtingspijl:"})," De blauwe pijl draait vloeiend mee met de richting van je telefoon."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als de kaart gedraaid is. Tik om terug naar noorden te draaien."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst toevoegen"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Methode 1 - GPS:"})," Tik op de oranje + knop rechtsonder. Je huidige locatie wordt automatisch ingevuld."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Methode 2 - Long-press:"}),' Houd je vinger lang op de kaart. Kies "Vondst toevoegen" in het menu.']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Methode 3 - Handmatig:"}),' In het vondstenformulier, tik "Kies op kaart" en selecteer de exacte locatie.']})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Toepassen:"})," Tik op het laagjes-icoon links en kies een preset."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Snel opslaan:"})," Zet de gewenste lagen aan en tik op het diskette-icoon naast een preset om die te overschrijven."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Nieuw aanmaken:"}),' Ga naar Instellingen  Presets  "Huidige lagen als preset opslaan".']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Tekstgrootte:"})," Gebruik de slider in de header van het Presets/Kaartlagen panel."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zoeken & Navigatie"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Zoeken:"})," Gebruik de zoekbalk bovenaan om een adres te vinden."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Google Maps:"}),' Long-press op een locatie en kies "Open in Google Maps" om te navigeren.']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Schaalbalk:"})," Onderaan de kaart - aan/uit in Instellingen."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor in het veld"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Gebruik ",p.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),p.jsxs("li",{children:["Combineer ",p.jsx("strong",{children:"AMK"})," met ",p.jsx("strong",{children:"Gewaspercelen"})," voor detectie"]}),p.jsxs("li",{children:["Check de ",p.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),p.jsxs("li",{children:["Gebruik ",p.jsx("strong",{children:"historische kaarten"})," om oude structuren te vinden"]}),p.jsxs("li",{children:["Zet ",p.jsx("strong",{children:"GPS tracking"})," aan om je route te volgen"]}),p.jsx("li",{children:"Tik op objecten (bunkers, musea, etc.) voor openingstijden en info"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(E1,{size:16,className:"text-blue-600"}),"Meer informatie"]}),p.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Uitleg over grondsoorten wordt direct in de popup getoond bij Bodemkaart en Gewaspercelen."}),p.jsxs("ul",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("li",{children:[p.jsx("a",{href:"https://legendageomorfologie.wur.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Geomorfologie legenda (WUR)"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Uitgebreide uitleg over landvormen"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://legenda-bodemkaart.bodemdata.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Bodemkaart legenda (BRO)"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Volledige bodemclassificatie"})]})]})]})]})}function HS({label:n,value:e,onChange:t,options:r,required:i=!1,placeholder:s="Typ hier..."}){const[a,o]=se.useState(!1),[l,u]=se.useState(!1),[h,f]=se.useState(""),g=e&&!r.includes(e),y=()=>{u(!0),f(g?e:""),o(!1)},v=()=>{h.trim()&&t(h.trim()),u(!1)};return l?p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[n,i&&p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsx("input",{type:"text",value:h,onChange:x=>f(x.target.value),onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),v()),x.key==="Escape"&&u(!1)},onBlur:v,placeholder:s,autoFocus:!0,className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}):p.jsxs("div",{className:"relative",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[n,i&&p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsxs("button",{type:"button",onClick:()=>o(!a),className:"w-full flex items-center justify-between px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-left",style:{border:"none",outline:"none"},children:[p.jsxs("span",{className:e?"":"text-gray-400",children:[e||"Selecteer...",g&&p.jsx(xL,{size:12,className:"inline ml-1 text-orange-500"})]}),p.jsx(pR,{size:16,className:`text-gray-400 transition-transform ${a?"rotate-180":""}`})]}),a&&p.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[p.jsxs("button",{type:"button",onClick:y,className:"w-full px-3 py-2 text-left text-sm text-orange-600 hover:bg-orange-50 transition-colors flex items-center gap-2",style:{border:"none",outline:"none"},children:[p.jsx(xL,{size:12}),"Eigen invoer..."]}),p.jsx("div",{className:"border-t border-gray-100"}),r.map(x=>p.jsx("button",{type:"button",onClick:()=>{t(x),o(!1)},className:`w-full px-3 py-2 text-left text-sm transition-colors ${x===e?"bg-orange-50 text-orange-600":"text-gray-600 hover:bg-gray-50"}`,style:{border:"none",outline:"none"},children:x},x))]})]})}function fG({onClose:n,initialLocation:e}){const t=es(X=>X.position),r=os(X=>X.map),i=Cr(X=>X.vondstFormPhoto),s=$i(X=>X.layers),a=$i(X=>X.addPoint),[o,l]=se.useState(""),[u,h]=se.useState(""),[f,g]=se.useState(""),[y,v]=se.useState(""),[x,w]=se.useState(!1),[T,I]=se.useState(void 0),[b,N]=se.useState(void 0),[F,W]=se.useState(Ro),[M,C]=se.useState(i),[P,L]=se.useState(null);se.useEffect(()=>{if(M){const X=URL.createObjectURL(M);return L(X),()=>URL.revokeObjectURL(X)}else L(null)},[M]);const[O,U]=se.useState(e?"map-pick":t?"gps":"map-center"),[j,xe]=se.useState(e||null),[Ce,Ge]=se.useState(!1),ke=()=>{if(O==="gps"&&t)return{lat:t.lat,lng:t.lng};if(O==="map-pick"&&j)return j;if(r){const X=r.getView().getCenter();if(X){const[ue,Me]=mn(X);return{lat:Me,lng:ue}}}return null},ce=ke();se.useEffect(()=>{if(!Ce||!r)return;const X=ue=>{const[Me,Fe]=mn(ue.coordinate);xe({lat:Fe,lng:Me}),U("map-pick"),Ge(!1)};return r.on("click",X),()=>r.un("click",X)},[Ce,r]);const Ie=()=>Ge(!0),Te=()=>{t&&(U("gps"),xe(null))},ie=()=>{const X=document.createElement("input");X.type="file",X.accept="image/*",X.capture="environment",X.onchange=ue=>{const Me=ue.target.files?.[0];Me&&C(Me)},X.click()},V=()=>C(null),J=async X=>{X.preventDefault();const ue=ke();if(!ue){alert("Geen locatie beschikbaar");return}if(!u){alert("Vul een naam/type in");return}w(!0);try{let Me=o||"";if(F===Ro){const Le=[];f&&Le.push(`Materiaal: ${f}`),y&&Le.push(`Periode: ${y}`),T&&Le.push(`Gewicht: ${T}g`),b&&Le.push(`Lengte: ${b}mm`),Le.length>0&&(Me=Le.join(" | ")+(o?` | ${o}`:""))}a(F,{coordinates:[ue.lng,ue.lat],name:u,category:F===Ro?u:"Overig",notes:Me||""});const Fe=s.find(Le=>Le.id===F)?.name||"Vondsten";alert(`Toegevoegd aan ${Fe}! `),n()}catch(Me){alert("Fout bij opslaan: "+Me.message)}finally{w(!1)}},te=se.useMemo(()=>s.map(X=>({id:X.id,name:X.name,color:X.color})),[s]);return Ce?p.jsx(Ft.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:p.jsxs("div",{className:"bg-orange-500 text-white rounded-xl shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(_I,{size:24,className:"animate-pulse"}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),p.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),p.jsx("button",{onClick:()=>Ge(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"})]})}):p.jsx(Ft.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(Ft.div,{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[p.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-5 py-4 flex justify-between items-center flex-shrink-0",children:[p.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),p.jsx("button",{onClick:n,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(ls,{size:20})})]}),p.jsxs("form",{onSubmit:J,className:"flex-1 overflow-y-auto",children:[p.jsxs("div",{className:"p-5 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto"}),P?p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:P,alt:"Vondst",className:"w-full h-40 object-cover rounded-xl"}),p.jsx("button",{type:"button",onClick:V,className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors border-0 outline-none shadow-lg",children:p.jsx(gd,{size:16})})]}):p.jsxs("button",{type:"button",onClick:ie,className:"w-full h-32 bg-gray-50 rounded-xl flex flex-col items-center justify-center gap-2 hover:bg-gray-100 transition-colors text-gray-500 border-2 border-dashed border-gray-200",style:{outline:"none"},children:[p.jsx(mR,{size:32}),p.jsx("span",{className:"text-sm",children:"Maak een foto"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Locatie"}),ce&&p.jsxs("div",{className:"bg-orange-50 rounded-xl px-4 py-3 mb-2",children:[p.jsxs("div",{className:"text-sm text-orange-800 font-mono",children:[ce.lat.toFixed(6),"N, ",ce.lng.toFixed(6),"E"]}),p.jsx("div",{className:"text-xs text-orange-600 mt-1",children:O==="gps"?" GPS locatie":O==="map-pick"?" Gekozen op kaart":" Kaart midden"})]}),!ce&&p.jsx("div",{className:"bg-red-50 rounded-xl px-4 py-3 mb-2",children:p.jsx("div",{className:"text-sm text-red-600",children:"Geen locatie beschikbaar"})}),p.jsxs("div",{className:"flex gap-2",children:[t&&O!=="gps"&&p.jsxs("button",{type:"button",onClick:Te,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors border-0 outline-none",children:[p.jsx(SR,{size:16}),"GPS"]}),p.jsxs("button",{type:"button",onClick:Ie,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors border-0 outline-none",children:[p.jsx(_I,{size:16}),"Kies op kaart"]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opslaan naar"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:te.map(X=>p.jsx("button",{type:"button",onClick:()=>W(X.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-0 outline-none ${F===X.id?"bg-gray-800 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X.name},X.id))})]}),F===Ro&&p.jsx(HS,{label:"Type vondst",value:u,onChange:h,options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],required:!0,placeholder:"Typ type vondst..."}),F!==Ro&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Naam",p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsx("input",{type:"text",value:u,onChange:X=>h(X.target.value),placeholder:"Naam van het punt...",className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}),F===Ro&&p.jsxs(p.Fragment,{children:[p.jsx(HS,{label:"Materiaal",value:f,onChange:g,options:["Brons","IJzer","Zilver","Goud","Koper","Lood","Tin","Keramiek","Steen","Glas","Bot","Hout","Leer","Onbekend"],placeholder:"Typ materiaal..."}),p.jsx(HS,{label:"Periode",value:y,onChange:v,options:["Steentijd","Bronstijd","IJzertijd","Romeins","Middeleeuws","Nieuwetijd","Modern","Onbekend"],placeholder:"Typ periode..."}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Gewicht (g)"}),p.jsx("input",{type:"number",value:T??"",onChange:X=>I(X.target.value?parseFloat(X.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Lengte (mm)"}),p.jsx("input",{type:"number",value:b??"",onChange:X=>N(X.target.value?parseFloat(X.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notities"}),p.jsx("textarea",{value:o,onChange:X=>l(X.target.value),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all resize-none h-20",style:{border:"none",outline:"none"},placeholder:"Beschrijving, context, vindplaats details..."})]}),p.jsx("div",{className:"rounded-xl px-4 py-3 bg-orange-50",children:p.jsx("p",{className:"text-sm text-orange-700",children:' Opgeslagen in "Mijn Lagen" op dit apparaat'})})]}),p.jsxs("div",{className:"p-5 pt-0 flex gap-3",children:[p.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-medium border-0 outline-none",children:"Annuleren"}),p.jsx("button",{type:"submit",disabled:x||!ce||Ce||!u,className:"flex-1 px-4 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium border-0 outline-none",children:x?"Opslaan...":"Opslaan"})]})]})]})})}function wwe(){const{user:n,setUser:e,setLoading:t}=IE();return se.useEffect(()=>{const s=h6(Xf,a=>{e(a),t(!1)});return()=>s()},[e,t]),{user:n,loginAnonymous:async()=>{try{await mX(Xf)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await d6(Xf)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!n}}function Swe(){const{isAuthenticated:n,loginAnonymous:e}=wwe(),t=kr(u=>u.vondstenLocalOnly),r=kr(u=>u.showVondstButton),i=Cr(u=>u.vondstFormOpen),s=Cr(u=>u.vondstFormLocation),a=Cr(u=>u.openVondstForm),o=Cr(u=>u.closeVondstForm);if(!r)return null;const l=()=>{if(t){a();return}if(!n){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}a()};return p.jsxs(p.Fragment,{children:[p.jsx(Ft.button,{className:"fixed bottom-2 right-[60px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:p.jsx(zl,{size:22,strokeWidth:2})}),p.jsx(Mr,{children:i&&p.jsx(fG,{onClose:o,initialLocation:s||void 0})})]})}const FO={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},Twe={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function Iwe(){const n=os(i=>i.map),e=Uo(i=>i.vondsten),t=kr(i=>i.showLocalVondsten),r=se.useRef(null);return se.useEffect(()=>{if(!n)return;const i=new Hp;return e.forEach(s=>{const a=new to({geometry:new no(au([s.location.lng,s.location.lat])),vondst:s}),o=FO[s.objectType]||FO.Anders,l=Twe[s.objectType]||"?";a.setStyle((u,h)=>{let v=12;h>50?v=6:h>10?v=Math.max(6,12-(h-10)/10):h<2&&(v=14);const x=Math.max(8,Math.min(12,v-2));return new gr({image:new Fl({radius:v,fill:new di({color:o}),stroke:new Ts({color:"#ffffff",width:v>8?2:1})}),text:v>=8?new od({text:l,font:`bold ${x}px sans-serif`,fill:new di({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(a)}),r.current?r.current.setSource(i):(r.current=new Zp({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(t),n.addLayer(r.current)),()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null)}},[n,e]),se.useEffect(()=>{r.current&&r.current.setVisible(t)},[t]),null}const Awe={Mineraal:"M",Fossiel:"F",Erfgoed:"E",Monument:"Mo",Overig:""};function bwe(){const n=os(i=>i.map),e=$i(i=>i.layers),t=kr(i=>i.showCustomPointLayers),r=se.useRef(new Map);return se.useEffect(()=>{if(!n)return;const i=new Set(e.map(s=>s.id));return r.current.forEach((s,a)=>{i.has(a)||(n.removeLayer(s),r.current.delete(a))}),e.forEach(s=>{const a=new Hp;s.points.forEach(l=>{const u=new to({geometry:new no(au(l.coordinates)),layerType:"customPoint",customPoint:l,customLayerId:s.id,customLayerName:s.name,customLayerColor:s.color}),h=Awe[l.category]||l.category.charAt(0).toUpperCase();u.setStyle((f,g)=>{let w=12;g>50?w=6:g>10?w=Math.max(6,12-(g-10)/10):g<2&&(w=14);const T=Math.max(8,Math.min(12,w-2));return new gr({image:new Fl({radius:w,fill:new di({color:s.color}),stroke:new Ts({color:"#ffffff",width:w>8?2:1})}),text:w>=8?new od({text:h,font:`bold ${T}px sans-serif`,fill:new di({color:"#ffffff"}),offsetY:1}):void 0})}),a.addFeature(u)});const o=r.current.get(s.id);if(o)o.setSource(a),o.setVisible(t&&s.visible);else{const l=new Zp({source:a,zIndex:950,properties:{title:s.name,customPointLayerId:s.id},visible:t&&s.visible});n.addLayer(l),r.current.set(s.id,l)}}),()=>{r.current.forEach(s=>{n&&n.removeLayer(s)}),r.current.clear()}},[n,e,t]),null}function Rwe(){const{createLayerModalOpen:n,closeCreateLayerModal:e}=Cr(),{addLayer:t}=$i(),r=kr(),[i,s]=se.useState(""),[a,o]=se.useState([...Lc]),[l,u]=se.useState(""),h=14*r.fontScale/100,f=()=>{const w=l.trim();w&&!a.includes(w)&&(o([...a,w]),u(""))},g=w=>{o(a.filter(T=>T!==w))},y=w=>{a.includes(w)?o(a.filter(T=>T!==w)):o([...a,w])},v=()=>{i.trim()&&(t(i.trim(),a),s(""),o([...Lc]),u(""),e())},x=()=>{s(""),o([...Lc]),u(""),e()};return p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x}),p.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Qa,{size:18}),p.jsx("span",{className:"font-medium",children:"Nieuwe laag"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:r.fontScale,onChange:w=>r.setFontScale(parseInt(w.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:x,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(ls,{size:18})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${h}px`},children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam van de laag"}),p.jsx("input",{type:"text",value:i,onChange:w=>s(w.target.value),placeholder:"bijv. Vakantie Frankrijk 2026",className:"w-full px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Categorien"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Lc.map(w=>p.jsx("button",{onClick:()=>y(w),className:`px-3 py-1 rounded-full transition-colors border-0 outline-none ${a.includes(w)?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-blue-50"}`,style:{fontSize:"0.9em"},children:w},w))})]}),a.filter(w=>!Lc.includes(w)).length>0&&p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Eigen categorien"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:a.filter(w=>!Lc.includes(w)).map(w=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("button",{onClick:()=>y(w),className:"px-3 py-1 rounded-l-full bg-orange-500 text-white hover:bg-orange-600 transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:w}),p.jsx("button",{onClick:()=>g(w),className:"px-2 py-1 rounded-r-full bg-orange-600 text-white hover:bg-orange-700 transition-colors border-0 outline-none",title:"Verwijder categorie",children:p.jsx(gd,{size:12})})]},w))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Eigen categorie toevoegen"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:l,onChange:w=>u(w.target.value),placeholder:"bijv. Grot, Bron, ...",className:"flex-1 px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},onKeyDown:w=>w.key==="Enter"&&f()}),p.jsx("button",{onClick:f,disabled:!l.trim(),className:"px-3 py-2 bg-white hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors border-0 outline-none text-gray-600",children:p.jsx(Xo,{size:20})})]})]})]}),p.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${h}px`},children:[p.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),p.jsx("button",{onClick:v,disabled:!i.trim(),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Aanmaken"})]})]})]})})}const gG=200,Cwe=.7;async function Pwe(n,e=gG){return new Promise((t,r)=>{const i=new Image,s=document.createElement("canvas"),a=s.getContext("2d");i.onload=()=>{let o=i.width,l=i.height;o>l?o>e&&(l=Math.round(l*e/o),o=e):l>e&&(o=Math.round(o*e/l),l=e),s.width=o,s.height=l,a?.drawImage(i,0,0,o,l),s.toBlob(u=>{u?t(u):r(new Error("Failed to create blob from canvas"))},"image/jpeg",Cwe)},i.onerror=()=>r(new Error("Failed to load image")),i.src=URL.createObjectURL(n)})}function kwe(n){return new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?e(r.result):t(new Error("Failed to convert blob to base64"))},r.onerror=()=>t(new Error("Failed to read blob")),r.readAsDataURL(n)})}async function Mwe(n){const e=await Pwe(n,gG),t=await kwe(e);return{thumbnailBlob:e,thumbnailBase64:t}}function Nwe(){return`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const KS=5;function Lwe({photos:n,onAddPhoto:e,onRemovePhoto:t,disabled:r}){const i=se.useRef(null),s=se.useRef(null),a=async l=>{const u=l.target.files;if(!u||u.length===0)return;const h=KS-n.length,f=Array.from(u).slice(0,h);for(const g of f)try{const{thumbnailBase64:y}=await Mwe(g),v={id:Nwe(),thumbnailBase64:y,createdAt:new Date().toISOString(),pendingUpload:!0};e(v)}catch(y){console.error("Failed to process image:",y)}l.target.value=""},o=n.length<KS;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"block font-medium text-gray-700",style:{fontSize:"0.9em"},children:["Foto's (",n.length,"/",KS,")"]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.map(l=>p.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:[p.jsx("img",{src:l.thumbnailUrl||l.thumbnailBase64,alt:"Foto",className:"w-full h-full object-cover"}),!r&&p.jsx("button",{type:"button",onClick:()=>t(l.id),className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-0 outline-none",children:p.jsx(ls,{size:12,className:"text-white"})}),l.pendingUpload&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-orange-500/80 text-white text-center py-0.5",style:{fontSize:"0.6em"},children:"Wacht..."})]},l.id)),o&&!r&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{type:"button",onClick:()=>s.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Maak foto",children:[p.jsx(mR,{size:20,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Camera"})]}),p.jsxs("button",{type:"button",onClick:()=>i.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Kies foto",children:[p.jsx(wae,{size:20,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Gallerij"})]})]})]}),p.jsx("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:a,className:"hidden"}),p.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden"})]})}function Owe(){const{addPointModalOpen:n,addPointModalLayerId:e,addPointModalLocation:t,closeAddPointModal:r}=Cr(),{addPoint:i,getLayer:s}=$i(),a=kr(),[o,l]=se.useState(""),[u,h]=se.useState(""),[f,g]=se.useState(""),[y,v]=se.useState([]),x=e?s(e):null,w=14*a.fontScale/100,T=()=>{!o.trim()||!e||!t||(i(e,{name:o.trim(),category:"Overig",notes:u.trim(),url:f.trim()||void 0,coordinates:[t.lng,t.lat],photos:y.length>0?y:void 0}),l(""),h(""),g(""),v([]),r())},I=()=>{l(""),h(""),g(""),v([]),r()};return x?p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:I}),p.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(zl,{size:18}),p.jsx("span",{className:"font-medium",children:"Punt toevoegen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:a.fontScale,onChange:b=>a.setFontScale(parseInt(b.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:I,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(ls,{size:18})})]})]}),p.jsx("div",{className:"px-4 py-1.5",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:x.color}}),p.jsx("span",{className:"text-sm text-gray-600",children:x.name})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{fontSize:`${w}px`},children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam *"}),p.jsx("input",{type:"text",value:o,onChange:b=>l(b.target.value),className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),p.jsx(Lwe,{photos:y,onAddPhoto:b=>v([...y,b]),onRemovePhoto:b=>v(y.filter(N=>N.id!==b))}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Notities"}),p.jsx("textarea",{value:u,onChange:b=>h(b.target.value),placeholder:"Beschrijving, tips, opmerkingen...",rows:2,className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors resize-none",style:{fontSize:"1em"}})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Link"}),p.jsx("input",{type:"url",value:f,onChange:b=>g(b.target.value),placeholder:"https://...",className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"}})]})]}),p.jsxs("div",{className:"p-3 flex gap-3",style:{fontSize:`${w}px`},children:[p.jsx("button",{onClick:I,className:"flex-1 px-4 py-1.5 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),p.jsx("button",{onClick:T,disabled:!o.trim(),className:"flex-1 px-4 py-1.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Toevoegen"})]})]})]})}):null}function Dwe(){const{layerManagerModalOpen:n,closeLayerManagerModal:e,openCreateLayerModal:t,openLayerDashboard:r}=Cr(),{layers:i,removeLayer:s,toggleVisibility:a,toggleArchived:o,exportLayerAsGeoJSON:l,importLayerFromGeoJSON:u}=$i(),h=kr(),f=14*h.fontScale/100,[g,y]=se.useState(null),[v,x]=se.useState(null),[w,T]=se.useState(null),[I,b]=se.useState(!1),N=i.filter(j=>!j.archived),F=i.filter(j=>j.archived),W=I?F:N,M=j=>{v===j?(s(j),x(null)):(x(j),setTimeout(()=>x(null),3e3))},C=j=>{l(j)},P=async j=>{const xe=j.target.files?.[0];if(xe){try{const Ce=await xe.text(),Ge=u(Ce);Ge.success||(T(Ge.error||"Import mislukt"),setTimeout(()=>T(null),3e3))}catch{T("Kon bestand niet lezen"),setTimeout(()=>T(null),3e3)}j.target.value=""}},L=()=>{y(null),x(null),T(null),b(!1),e()},O=j=>{r(j)},U=()=>{L(),t()};return p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L}),p.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Qa,{size:18}),p.jsx("span",{className:"font-medium",children:"Mijn Lagen beheren"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:h.fontScale,onChange:j=>h.setFontScale(parseInt(j.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${h.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:L,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(ls,{size:18})})]})]}),p.jsxs("div",{className:"flex border-b border-gray-100",children:[p.jsxs("button",{onClick:()=>b(!1),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${I?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50"}`,children:["Actief (",N.length,")"]}),p.jsxs("button",{onClick:()=>b(!0),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none flex items-center justify-center gap-1 ${I?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[p.jsx(S9,{size:14}),"Archief (",F.length,")"]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${f}px`},children:[W.length===0?p.jsx("div",{className:"p-8 text-center text-gray-500",children:I?p.jsx("p",{style:{fontSize:"1em"},children:"Geen gearchiveerde lagen."}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"mb-4",style:{fontSize:"1em"},children:"Je hebt nog geen eigen lagen."}),p.jsxs("button",{onClick:U,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:[p.jsx(Xo,{size:16,className:"inline mr-2"}),"Nieuwe laag aanmaken"]})]})}):p.jsx("div",{className:"divide-y divide-gray-100",children:W.map(j=>p.jsx(jwe,{layer:j,isExpanded:g===j.id,onToggleExpand:()=>y(g===j.id?null:j.id),onToggleVisibility:()=>a(j.id),onToggleArchived:()=>o(j.id),onOpenDashboard:()=>O(j.id),onExport:()=>C(j.id),onDelete:()=>M(j.id),confirmDelete:v===j.id,onRename:xe=>$i.getState().updateLayer(j.id,{name:xe}),onChangeColor:xe=>$i.getState().updateLayer(j.id,{color:xe})},j.id))}),w&&p.jsx("div",{className:"mx-4 my-2 p-3 bg-red-50 text-red-700 text-sm rounded-lg",children:w})]}),p.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${f}px`},children:[p.jsxs("label",{className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-2 border-0 outline-none text-gray-600",children:[p.jsx(TR,{size:16}),p.jsx("span",{style:{fontSize:"1em"},children:"Importeren"}),p.jsx("input",{type:"file",accept:".geojson,.json",onChange:P,className:"hidden"})]}),p.jsxs("button",{onClick:U,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",style:{fontSize:"1em"},children:[p.jsx(Xo,{size:16}),p.jsx("span",{children:"Nieuwe laag"})]})]})]})]})})}const Fwe=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"];function jwe({layer:n,isExpanded:e,onToggleExpand:t,onToggleVisibility:r,onToggleArchived:i,onOpenDashboard:s,onExport:a,onDelete:o,confirmDelete:l,onRename:u,onChangeColor:h}){const[f,g]=se.useState(!1),[y,v]=se.useState(n.name),[x,w]=se.useState(!1),T=se.useRef(null);se.useEffect(()=>{f&&T.current&&(T.current.focus(),T.current.select())},[f]);const I=()=>{v(n.name),g(!0)},b=()=>{const C=y.trim();C&&C!==n.name&&u(C),g(!1)},N=()=>{v(n.name),g(!1)},F=C=>{C.key==="Enter"?b():C.key==="Escape"&&N()},W=n.points.filter(C=>C.status==="completed").length,M=n.points.length;return p.jsxs("div",{className:"bg-white",children:[p.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[p.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors border-0 outline-none bg-transparent",children:e?p.jsx(pR,{size:16}):p.jsx(NE,{size:16})}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>w(!x),className:"w-5 h-5 rounded-full flex-shrink-0 border-2 border-white shadow-sm hover:scale-110 transition-transform cursor-pointer",style:{backgroundColor:n.color},title:"Kleur wijzigen"}),x&&p.jsx("div",{className:"absolute top-7 left-0 z-50 bg-white rounded-lg shadow-lg p-2 flex flex-wrap gap-1 w-24",children:Fwe.map(C=>p.jsx("button",{onClick:()=>{h(C),w(!1)},className:`w-5 h-5 rounded-full border-2 hover:scale-110 transition-transform ${C===n.color?"border-gray-800":"border-white"}`,style:{backgroundColor:C}},C))})]}),f?p.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[p.jsx("input",{ref:T,type:"text",value:y,onChange:C=>v(C.target.value),onKeyDown:F,onBlur:b,className:"flex-1 px-2 py-1 text-gray-800 font-medium bg-orange-50 rounded outline-none focus:ring-2 focus:ring-orange-400"}),p.jsx("button",{onClick:b,className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Opslaan",children:p.jsx(pu,{size:16})})]}):p.jsxs("button",{onClick:s,className:"flex-1 min-w-0 text-left border-0 outline-none bg-transparent hover:bg-orange-50 rounded px-2 py-1 -ml-2 transition-colors",title:"Bekijk dashboard",children:[p.jsx("div",{className:"font-medium text-gray-800 truncate hover:text-orange-600",children:n.name}),p.jsx("div",{className:"text-xs text-gray-500",children:M>0?p.jsxs("span",{className:W===M?"text-green-600":"",children:[W,"/",M," voltooid"]}):"Geen punten"})]}),!f&&p.jsx("button",{onClick:I,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam bewerken",children:p.jsx(Qx,{size:16})}),p.jsx("button",{onClick:s,className:"p-2 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Open dashboard",children:p.jsx(Aae,{size:18})}),!n.archived&&p.jsx("button",{onClick:r,className:`p-2 rounded transition-colors border-0 outline-none ${n.visible?"text-blue-500 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?p.jsx(_R,{size:18}):p.jsx(yR,{size:18})}),p.jsx("button",{onClick:i,className:`p-2 rounded transition-colors border-0 outline-none ${n.archived?"text-green-500 hover:text-green-600 hover:bg-green-50":"text-gray-400 hover:text-amber-600 hover:bg-amber-50"}`,title:n.archived?"Herstellen":"Archiveren",children:n.archived?p.jsx(Dse,{size:18}):p.jsx(S9,{size:18})}),p.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteren als GeoJSON",children:p.jsx(xI,{size:18})}),p.jsx("button",{onClick:o,className:`p-2 rounded transition-colors border-0 outline-none ${l?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:l?"Klik nogmaals om te verwijderen":"Verwijderen",children:p.jsx(gd,{size:18})})]}),p.jsx(Mr,{children:e&&p.jsx(Ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:p.jsxs("div",{className:"px-4 pb-3 pl-12 space-y-2",children:[n.categories.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1",children:n.categories.map(C=>p.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:C},C))}),n.points.length>0&&p.jsxs("div",{className:"text-xs text-gray-500 space-y-1 max-h-32 overflow-y-auto",children:[n.points.slice(0,5).map(C=>p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:`font-medium ${C.status==="completed"?"text-green-600 line-through":C.status==="skipped"?"text-gray-400 line-through":"text-gray-700"}`,children:C.name})},C.id)),n.points.length>5&&p.jsxs("div",{className:"text-gray-400",children:["...en ",n.points.length-5," meer"]})]}),p.jsxs("div",{className:"text-xs text-gray-400",children:["Aangemaakt: ",new Date(n.createdAt).toLocaleDateString("nl-NL")]})]})})})]})}function Vwe(){const{layerDashboardOpen:n,layerDashboardLayerId:e,closeLayerDashboard:t}=Cr(),{getLayer:r,setPointStatus:i,updatePoint:s,removePoint:a}=$i(),o=kr(),[l,u]=se.useState("all"),[h,f]=se.useState(null),[g,y]=se.useState(""),[v,x]=se.useState(null),w=e?r(e):null,T=14*o.fontScale/100;if(!w)return null;const I=w.points.filter(O=>l==="all"?!0:O.status===l),b=w.points.length,N=w.points.filter(O=>O.status==="completed").length,F=w.points.filter(O=>O.status==="todo").length,W=w.points.filter(O=>O.status==="skipped").length,M=(O,U)=>{i(w.id,O,U)},C=O=>{s(w.id,O,{notes:g}),f(null),y("")},P=O=>{v===O?(a(w.id,O),x(null)):(x(O),setTimeout(()=>x(null),3e3))},L=()=>{f(null),x(null),t()};return p.jsx(Mr,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(Ft.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L}),p.jsxs(Ft.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/50",style:{backgroundColor:w.color}}),p.jsx("span",{className:"font-medium truncate",children:w.name})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:o.fontScale,onChange:O=>o.setFontScale(parseInt(O.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${o.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:L,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(ls,{size:18})})]})]}),p.jsxs("div",{className:"px-4 py-2 bg-orange-50 flex items-center justify-between text-sm",children:[p.jsxs("span",{className:"text-orange-800 font-medium",children:[N,"/",b," voltooid"]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[p.jsxs("span",{className:"text-orange-600",children:[F," te doen"]}),W>0&&p.jsxs("span",{className:"text-gray-500",children:[W," overgeslagen"]})]})]}),p.jsx("div",{className:"flex border-b border-gray-100",children:["all","todo","completed","skipped"].map(O=>p.jsxs("button",{onClick:()=>u(O),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${l===O?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[O==="all"&&"Alles",O==="todo"&&"Te doen",O==="completed"&&"Voltooid",O==="skipped"&&"Overgeslagen"]},O))}),p.jsx("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${T}px`},children:I.length===0?p.jsx("div",{className:"p-8 text-center text-gray-500",children:p.jsx("p",{children:"Geen punten gevonden"})}):p.jsx("div",{className:"divide-y divide-gray-100",children:I.map(O=>p.jsx("div",{className:"p-3",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsxs("div",{className:"flex flex-col gap-1 pt-0.5",children:[p.jsx("button",{onClick:()=>M(O.id,O.status==="completed"?"todo":"completed"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${O.status==="completed"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-green-100"}`,title:O.status==="completed"?"Markeer als te doen":"Markeer als voltooid",children:p.jsx(pu,{size:14,className:O.status==="completed"?"text-green-600":"text-gray-400"})}),p.jsx("button",{onClick:()=>M(O.id,O.status==="skipped"?"todo":"skipped"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${O.status==="skipped"?"bg-gray-200 hover:bg-gray-300":"bg-gray-100 hover:bg-gray-200"}`,title:O.status==="skipped"?"Markeer als te doen":"Overslaan",children:p.jsx(Vse,{size:14,className:O.status==="skipped"?"text-gray-600":"text-gray-400"})})]}),O.photos&&O.photos.length>0&&p.jsxs("div",{className:"relative flex-shrink-0",children:[p.jsx("img",{src:O.photos[0].thumbnailUrl||O.photos[0].thumbnailBase64,alt:"Foto",className:"w-12 h-12 object-cover rounded border border-gray-200"}),O.photos.length>1&&p.jsxs("span",{className:"absolute -bottom-1 -right-1 bg-orange-500 text-white text-[9px] px-1 rounded-full",children:["+",O.photos.length-1]})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`font-medium truncate ${O.status==="completed"?"text-green-700 line-through":O.status==="skipped"?"text-gray-400 line-through":"text-gray-800"}`,children:O.name}),O.sourceLayer&&p.jsxs("span",{className:"text-xs text-gray-400 truncate",children:["via ",O.sourceLayer]})]}),h===O.id?p.jsxs("div",{className:"mt-2",children:[p.jsx("textarea",{value:g,onChange:U=>y(U.target.value),placeholder:"Notities...",rows:2,className:"w-full px-2 py-1 bg-white rounded border-0 outline-none hover:bg-blue-50 transition-colors resize-none text-sm",autoFocus:!0}),p.jsxs("div",{className:"flex gap-2 mt-1",children:[p.jsx("button",{onClick:()=>C(O.id),className:"px-2 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 border-0 outline-none",children:"Opslaan"}),p.jsx("button",{onClick:()=>{f(null),y("")},className:"px-2 py-1 text-xs bg-white text-gray-600 rounded hover:bg-blue-50 border-0 outline-none",children:"Annuleren"})]})]}):O.notes?p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.notes}):null,O.url&&p.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 mt-1",children:[p.jsx(E1,{size:12}),"Link"]})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("button",{onClick:()=>{f(O.id),y(O.notes)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded border-0 outline-none",title:"Notities bewerken",children:p.jsx($ae,{size:14})}),p.jsx("button",{onClick:()=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${O.coordinates[1]},${O.coordinates[0]}`,"_blank")},className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded border-0 outline-none",title:"Navigeer naar",children:p.jsx(zl,{size:14})}),p.jsx("button",{onClick:()=>P(O.id),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none ${v===O.id?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:v===O.id?"Klik nogmaals":"Verwijderen",children:p.jsx(gd,{size:14})})]})]})},O.id))})})]})]})})}class jO{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const t=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/t)}add(e){if(this.buffer.length>0){const t=this.buffer[this.buffer.length-1];let r=e-t;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalizeHeading(this.buffer[0]);let e=0,t=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,t+=s}return this.normalizeHeading(e/t)}normalizeHeading(e){return(e%360+360)%360}clear(){this.buffer=[]}}function Gwe(){const n=es(u=>u.tracking),e=es(u=>u.headingSource);es(u=>u.speed);const t=es(u=>u.setSmoothedHeading),r=se.useRef(new jO(6)),i=se.useRef(new jO(10)),s=se.useRef(0),a=se.useRef(null),o=33,l=se.useCallback((u,h)=>{const f=performance.now();if(f-s.current<o)return;const g=h==="gps"?r.current:i.current;g.add(u);const y=g.getSmoothed();y!==null&&(s.current=f,t(y))},[t]);se.useEffect(()=>{if(!n)return;const u=f=>{f.coords.heading!==null&&f.coords.speed!==null&&f.coords.speed>.8&&f.coords.accuracy<20&&l(f.coords.heading,"gps")},h=navigator.geolocation.watchPosition(u,()=>{},{enableHighAccuracy:!0,maximumAge:500,timeout:1e4});return()=>navigator.geolocation.clearWatch(h)},[n,l]),se.useEffect(()=>{if(!n||e!=="compass")return;let u=0;const h=50,f=y=>{const v=performance.now();if(!(v-u<h)&&(u=v,y.alpha!==null)){const x=(360-y.alpha)%360;l(x,"compass")}},g=y=>{const v=performance.now();v-u<h||(u=v,y.webkitCompassHeading!==void 0&&l(y.webkitCompassHeading,"compass"))};return window.addEventListener("deviceorientationabsolute",f),window.addEventListener("deviceorientation",g),()=>{window.removeEventListener("deviceorientationabsolute",f),window.removeEventListener("deviceorientation",g)}},[n,e,l]),se.useEffect(()=>{n||(r.current.clear(),i.current.clear())},[n]),se.useEffect(()=>()=>{a.current&&cancelAnimationFrame(a.current)},[])}function Bwe(){const n=os(i=>i.map),e=li(i=>i.setLayerOpacity),t=li(i=>i.visible),r=se.useRef(null);se.useEffect(()=>{if(!n)return;const i=()=>{const s=n.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const a=t["AHN 0.5m"],o=t["AHN4 Multi-Hillshade NL"];!a&&!o||(a&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),o&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return n.on("moveend",i),i(),()=>{n.un("moveend",i)}},[n,t,e])}const VO=2e3;function Uwe(){const n=IE(g=>g.user),{layers:e,clearAll:t}=$i(),{vondsten:r,clearAll:i}=Uo(),s=se.useRef(null),a=se.useRef(!0),o=se.useRef(""),l=se.useRef(""),u=se.useCallback(async g=>{if(n)try{const y=Kf(Hc,"users",n.uid);await HN(y,{layers:g,layersUpdatedAt:KN()},{merge:!0}),console.log(" Lagen gesynchroniseerd naar cloud")}catch(y){console.error(" Fout bij synchroniseren lagen:",y)}},[n]),h=se.useCallback(async g=>{if(n)try{const y=Kf(Hc,"users",n.uid);await HN(y,{vondsten:g,vondstenUpdatedAt:KN()},{merge:!0}),console.log(" Vondsten gesynchroniseerd naar cloud")}catch(y){console.error(" Fout bij synchroniseren vondsten:",y)}},[n]),f=se.useCallback(async()=>{if(n)try{const g=Kf(Hc,"users",n.uid),y=await gee(g);if(y.exists()){const v=y.data();if(v.layers&&Array.isArray(v.layers)){const x=v.layers,w=$i.getState().layers,T=[...x],I=new Set(x.map(b=>b.id));w.forEach(b=>{I.has(b.id)||T.push(b)}),$i.setState({layers:T}),o.current=JSON.stringify(T),console.log(` ${x.length} lagen geladen uit cloud`)}if(v.vondsten&&Array.isArray(v.vondsten)){const x=v.vondsten,w=Uo.getState().vondsten,T=[...x],I=new Set(x.map(b=>b.id));w.forEach(b=>{I.has(b.id)||T.push(b)}),Uo.setState({vondsten:T}),l.current=JSON.stringify(T),console.log(` ${x.length} vondsten geladen uit cloud`)}}else console.log(" Geen cloud data gevonden, lokale data wordt gesynchroniseerd..."),await u(e),await h(r);a.current=!1}catch(g){console.error(" Fout bij laden uit cloud:",g),a.current=!1}},[n,e,r,u,h]);return se.useEffect(()=>{n?(a.current=!0,f()):(a.current=!0,o.current="",l.current="")},[n?.uid]),se.useEffect(()=>{if(!n||a.current)return;const g=JSON.stringify(e);if(g!==o.current)return s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{o.current=g,u(e)},VO),()=>{s.current&&clearTimeout(s.current)}},[n,e,u]),se.useEffect(()=>{if(!n||a.current)return;const g=JSON.stringify(r);if(g!==l.current)return s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{l.current=g,h(r)},VO),()=>{s.current&&clearTimeout(s.current)}},[n,r,h]),{isLoggedIn:!!n,syncLayersToCloud:u,syncVondstenToCloud:h}}function zwe(){Gwe(),Bwe(),Uwe();const e=14*kr(s=>s.fontScale)/100,t=Cr(s=>s.vondstFormOpen),r=Cr(s=>s.vondstFormLocation),i=Cr(s=>s.closeVondstForm);return p.jsx(HEe,{children:p.jsxs("div",{style:{fontSize:`${e}px`},children:[p.jsx(rte,{}),p.jsx(Poe,{}),p.jsx(Iwe,{}),p.jsx(QEe,{}),p.jsx(bwe,{}),p.jsx(CEe,{}),p.jsx(kEe,{}),p.jsx(zEe,{}),p.jsx(Roe,{}),p.jsx(Swe,{}),p.jsx($Ee,{}),p.jsx(Moe,{}),p.jsx(Loe,{}),p.jsx(UEe,{}),p.jsx(pwe,{}),p.jsx(jEe,{}),p.jsx(_we,{}),p.jsx(VEe,{}),p.jsx(dwe,{}),p.jsx(Rwe,{}),p.jsx(Owe,{}),p.jsx(Dwe,{}),p.jsx(Vwe,{}),p.jsx(Mr,{children:t&&p.jsx(fG,{onClose:i,initialLocation:r||void 0})})]})})}console.log(`%c DetectorApp v${pC}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");PB.createRoot(document.getElementById("root")).render(p.jsx(zwe,{}));export{Fl as C,di as F,FR as G,fW as I,Wo as L,no as P,gr as S,nh as T,Zp as V,YW as a,GW as b,Ts as c,Hp as d,od as e,to as f,au as g,Yp as h,pn as p,k7 as r};
//# sourceMappingURL=index-DzhbaLqx.js.map
