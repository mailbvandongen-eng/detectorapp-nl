{"version":3,"file":"romeinsOL-BR_Y_BwK.js","sources":["../../src/layers/romeinsOL.ts"],"sourcesContent":["/**\n * Romeinse wegen Layer for OpenLayers\n * Itiner-E Roman road network dataset\n * Zoom-responsive line width\n */\n\nimport { Vector as VectorLayer } from 'ol/layer'\nimport { Vector as VectorSource } from 'ol/source'\nimport { Style, Stroke } from 'ol/style'\nimport { loadGeoJSON, parseGeoJSON } from '../utils/layerLoaderOL.js'\n\n// Cache styles per resolution to avoid recreating\nconst styleCache = new Map<string, Style>()\n\nfunction getLineWidth(resolution: number): number {\n  // Thinner when zoomed out, thicker when zoomed in\n  if (resolution > 300) return 0.5    // Very zoomed out\n  if (resolution > 150) return 0.75   // Zoomed out\n  if (resolution > 75) return 1       // Medium-far\n  if (resolution > 40) return 1.5     // Medium\n  if (resolution > 20) return 2       // Medium-close\n  if (resolution > 10) return 2.5     // Close\n  return 3                            // Very close\n}\n\nexport async function createRomeinseWegenLayerOL() {\n  try {\n    const geojson = await loadGeoJSON('/detectorapp-nl/data/romeinse_wegen_itiner_e.geojson')\n    const features = parseGeoJSON(geojson)\n\n    const layer = new VectorLayer({\n      properties: { title: 'Romeinse wegen (Itiner-E)' },\n      source: new VectorSource({ features }),\n      style: (feature, resolution) => {\n        const width = getLineWidth(resolution)\n        const cacheKey = `roman-${width}`\n\n        let style = styleCache.get(cacheKey)\n        if (!style) {\n          style = new Style({\n            stroke: new Stroke({\n              color: '#dc2626',\n              width: width\n            })\n          })\n          styleCache.set(cacheKey, style)\n        }\n        return style\n      },\n      opacity: 0.8,\n      zIndex: 20\n    })\n\n    console.log(`âœ“ Romeinse wegen loaded (${features.length} features)`)\n    return layer\n\n  } catch (error) {\n    console.error('Failed to load Romeinse wegen layer:', error)\n    return null\n  }\n}\n"],"names":["styleCache","getLineWidth","resolution","createRomeinseWegenLayerOL","geojson","loadGeoJSON","features","parseGeoJSON","layer","VectorLayer","VectorSource","feature","width","cacheKey","style","Style","Stroke","error"],"mappings":"oHAYA,MAAMA,MAAiB,IAEvB,SAASC,EAAaC,EAA4B,CAEhD,OAAIA,EAAa,IAAY,GACzBA,EAAa,IAAY,IACzBA,EAAa,GAAW,EACxBA,EAAa,GAAW,IACxBA,EAAa,GAAW,EACxBA,EAAa,GAAW,IACrB,CACT,CAEA,eAAsBC,GAA6B,CACjD,GAAI,CACF,MAAMC,EAAU,MAAMC,EAAY,sDAAsD,EAClFC,EAAWC,EAAaH,CAAO,EAE/BI,EAAQ,IAAIC,EAAY,CAC5B,WAAY,CAAE,MAAO,2BAAA,EACrB,OAAQ,IAAIC,EAAa,CAAE,SAAAJ,EAAU,EACrC,MAAO,CAACK,EAAST,IAAe,CAC9B,MAAMU,EAAQX,EAAaC,CAAU,EAC/BW,EAAW,SAASD,CAAK,GAE/B,IAAIE,EAAQd,EAAW,IAAIa,CAAQ,EACnC,OAAKC,IACHA,EAAQ,IAAIC,EAAM,CAChB,OAAQ,IAAIC,EAAO,CACjB,MAAO,UACP,MAAAJ,CAAA,CACD,CAAA,CACF,EACDZ,EAAW,IAAIa,EAAUC,CAAK,GAEzBA,CACT,EACA,QAAS,GACT,OAAQ,EAAA,CACT,EAED,eAAQ,IAAI,4BAA4BR,EAAS,MAAM,YAAY,EAC5DE,CAET,OAASS,EAAO,CACd,eAAQ,MAAM,uCAAwCA,CAAK,EACpD,IACT,CACF"}