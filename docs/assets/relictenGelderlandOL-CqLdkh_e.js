import{V as u,c as g,p as l,F as v,f as m,S as f,h as p,r as w}from"./index-Coaq9BTF.js";l.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");w(l);const s="relicten_gelderland_cache_v2",y=336*60*60*1e3,S={KV:{icon:"castle",color:"#7c3aed",name:"Kasteel/Vesting"},K:{icon:"church",color:"#9333ea",name:"Kapel"},M:{icon:"windmill",color:"#b45309",name:"Molen"},EK:{icon:"duck",color:"#0891b2",name:"Eendenkooi"},H:{icon:"estate",color:"#4f46e5",name:"Havezate"},B:{icon:"farm",color:"#65a30d",name:"Boerderij"},OB:{icon:"ruins",color:"#6b7280",name:"Oude Bebouwing"},WM:{icon:"watermill",color:"#0284c7",name:"Watermolen"},BR:{icon:"bridge",color:"#64748b",name:"Brug"},S:{icon:"landmark",color:"#0f766e",name:"Spoor/Relict"},G:{icon:"tumulus",color:"#854d0e",name:"Graf/Heuvel"},T:{icon:"terp",color:"#0d9488",name:"Terp"},P:{icon:"well",color:"#0d9488",name:"Put/Bron"},V:{icon:"bunker",color:"#57534e",name:"Verdediging"}},k={icon:"mapPin",color:"#dc2626"},i={castle:"M22 20v-9H2v9M2 14h20M12 11V2M10 2h4M6 11V5M4 5h4M18 11V5M16 5h4M7 14v6M12 14v6M17 14v6",church:"M12 2v4M10 4h4M4 22V12l8-6 8 6v10M4 22h16M9 22v-6h6v6",windmill:"M12 2v20M12 12l8-4M12 12l-8-4M12 12l4 8M12 12l-4 8",duck:"M4 16c0-4 4-8 8-8s8 4 8 8H4zM12 8V4M10 4h4M8 12h8",estate:"M3 21h18M6 21V12l6-5 6 5v9M10 21v-4h4v4M6 12V9M18 12V9M4 9l8-6 8 6",watermill:"M2 16h20M6 16v5M18 16v5M12 2v6M12 8a6 6 0 1 0 0 12M8 14h8",well:"M8 21v-6M16 21v-6M6 15h12M9 15V9a3 3 0 0 1 6 0v6M12 3v2",farm:"M3 21h18M5 21V10l7-7 7 7v11M10 21v-4h4v4",bridge:"M2 18h20M4 18v-4c0-2 3.5-4 8-4s8 2 8 4v4M8 10v8M16 10v8",ruins:"M3 22h4V14h2v8h6v-8h2v8h4M5 14l7-10l7 10M9 10h6",landmark:"M3 22h18M6 18v4M10 18v4M14 18v4M18 18v4M12 2l10 8H2l10-8z",tumulus:"M2 20h20M4 20c0-6 3.5-12 8-12s8 6 8 12",terp:"M2 20h20M4 20c0-5 3-10 8-10s8 5 8 10M10 10v-3h4v3",bunker:"M3 21h18M5 21V7l7-4 7 4v14M9 21V11h6v10M9 11h6M5 7h14",mapPin:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0ZM12 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"};function V(r,e,o=28){const t=`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${o}" viewBox="0 0 32 32">
    <circle cx="16" cy="16" r="14" fill="${e}" stroke="white" stroke-width="2"/>
    <g transform="translate(4, 4) scale(1)">
      <path d="${r}" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
  </svg>`;return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t)}function d(r){if(!r)return"";const e=r.match(/^([A-Z]{1,2})/);return e?e[1]:""}function R(r,e){const o=d(r),t=S[o]||k,n=i[t.icon]||i.mapPin;let a=1;e>100?a=.5:e>50?a=.6:e>20?a=.8:e>10&&(a=.9);const c=V(n,t.color);return new f({image:new p({src:c,scale:a,anchor:[.5,.5]})})}const h=new Map;function P(r,e){const o=Math.round(e/10)*10,t=`${d(r)}-${o}`;let n=h.get(t);return n||(n=R(r,e),h.set(t,n)),n}async function _(){try{const e=localStorage.getItem(s);if(e){const{timestamp:o,data:t}=JSON.parse(e);if(Date.now()-o<y)return console.log(`âœ“ Relicten Gelderland loaded from cache (${t.length} features)`),t}}catch{}const r="https://geoserver.gelderland.nl/geoserver/ngr_a/wfs?service=WFS&version=2.0.0&request=GetFeature&typeName=ChAr_Relictenkaart_p&outputFormat=application/json";try{console.log("ðŸ”„ Relicten Gelderland: laden van WFS...");const e=await fetch(r);if(!e.ok)throw new Error(`WFS error: ${e.status}`);const t=(await e.json()).features.filter(n=>n.geometry&&n.geometry.coordinates).map(n=>{const a=n.geometry.coordinates;return{coords:l("EPSG:28992","EPSG:4326",a),type:n.properties.type||"",klasse:n.properties.klasse||0}});try{const n={timestamp:Date.now(),data:t};localStorage.setItem(s,JSON.stringify(n)),console.log(`âœ“ Relicten Gelderland cached (${t.length} features)`)}catch{console.warn("âš  Could not cache Relicten Gelderland (too large)")}return console.log(`âœ“ Relicten Gelderland fetched from WFS (${t.length} features)`),t}catch(e){console.warn("âš  Failed to fetch Relicten Gelderland:",e);try{const o=localStorage.getItem(s);if(o){const{data:t}=JSON.parse(o);return console.log(`âœ“ Using stale cache (${t.length} features)`),t}}catch{}return[]}}async function b(){const r=new u;let e=!1,o=!1;const t=new g({source:r,properties:{title:"Relictenkaart Punten",type:"overlay"},visible:!1,style:(n,a)=>{const c=n.get("type")||"";return P(c,a)},zIndex:20,maxResolution:150});return t.on("change:visible",async()=>{if(t.getVisible()&&!e&&!o){o=!0;const a=(await _()).map(c=>{const M=l("EPSG:4326","EPSG:3857",c.coords);return new v({geometry:new m(M),type:c.type,klasse:c.klasse})});r.addFeatures(a),e=!0,o=!1,console.log(`âœ“ Relictenkaart Punten geladen (${a.length} punten)`)}}),t}export{b as createRelictenPuntenLayerOL};
//# sourceMappingURL=relictenGelderlandOL-CqLdkh_e.js.map
