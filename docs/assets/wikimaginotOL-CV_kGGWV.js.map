{"version":3,"file":"wikimaginotOL-CV_kGGWV.js","sources":["../../src/layers/wikimaginotOL.ts"],"sourcesContent":["import { Vector as VectorLayer } from 'ol/layer'\nimport { Vector as VectorSource } from 'ol/source'\nimport GeoJSON from 'ol/format/GeoJSON'\nimport { Style, Circle, Fill, Stroke } from 'ol/style'\n\n// Wikimaginot - Maginot Line Fortifications\n// Data from DataGrandEst WFS - wikimaginot.eu\n// 16,371 military constructions (1925-1940)\n\nexport async function createWikimaginotLayerOL() {\n  try {\n    const response = await fetch('/detectorapp-nl/data/wikimaginot_fr.geojson')\n\n    if (!response.ok) {\n      throw new Error(`Wikimaginot fetch error: ${response.status}`)\n    }\n\n    const geojson = await response.json()\n    console.log(`üè∞ Wikimaginot: loaded ${geojson.features?.length || 0} Maginot Line constructions`)\n\n    const source = new VectorSource({\n      features: new GeoJSON().readFeatures(geojson, {\n        dataProjection: 'EPSG:4326',\n        featureProjection: 'EPSG:3857'\n      })\n    })\n\n    const layer = new VectorLayer({\n      source: source,\n      properties: { title: 'Maginotlinie' },\n      visible: false,\n      zIndex: 28,\n      style: (feature) => {\n        const style = feature.get('style') || ''\n\n        // Color by construction type\n        let color = '#6b7280' // gray default\n        if (style.includes('gros_ouvrage')) color = '#dc2626' // red - major fortification\n        else if (style.includes('petit_ouvrage')) color = '#ea580c' // orange - small fortification\n        else if (style.includes('casemate')) color = '#ca8a04' // yellow - bunker\n        else if (style.includes('blockhaus')) color = '#65a30d' // green - blockhouse\n        else if (style.includes('abri')) color = '#0891b2' // cyan - shelter\n        else if (style.includes('observatoire')) color = '#7c3aed' // purple - observation post\n\n        return new Style({\n          image: new Circle({\n            radius: 5,\n            fill: new Fill({ color }),\n            stroke: new Stroke({ color: '#1f2937', width: 1 })\n          })\n        })\n      }\n    })\n\n    return layer\n  } catch (error) {\n    console.error('‚ùå Failed to load Wikimaginot:', error)\n    return new VectorLayer({\n      source: new VectorSource(),\n      properties: { title: 'Maginotlinie' },\n      visible: false\n    })\n  }\n}\n"],"names":["createWikimaginotLayerOL","response","geojson","source","VectorSource","GeoJSON","VectorLayer","feature","style","color","Style","Circle","Fill","Stroke","error"],"mappings":"qHASA,eAAsBA,GAA2B,CAC/C,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,6CAA6C,EAE1E,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,4BAA4BA,EAAS,MAAM,EAAE,EAG/D,MAAMC,EAAU,MAAMD,EAAS,KAAA,EAC/B,QAAQ,IAAI,0BAA0BC,EAAQ,UAAU,QAAU,CAAC,6BAA6B,EAEhG,MAAMC,EAAS,IAAIC,EAAa,CAC9B,SAAU,IAAIC,IAAU,aAAaH,EAAS,CAC5C,eAAgB,YAChB,kBAAmB,WAAA,CACpB,CAAA,CACF,EA6BD,OA3Bc,IAAII,EAAY,CAC5B,OAAAH,EACA,WAAY,CAAE,MAAO,cAAA,EACrB,QAAS,GACT,OAAQ,GACR,MAAQI,GAAY,CAClB,MAAMC,EAAQD,EAAQ,IAAI,OAAO,GAAK,GAGtC,IAAIE,EAAQ,UACZ,OAAID,EAAM,SAAS,cAAc,EAAGC,EAAQ,UACnCD,EAAM,SAAS,eAAe,EAAGC,EAAQ,UACzCD,EAAM,SAAS,UAAU,EAAGC,EAAQ,UACpCD,EAAM,SAAS,WAAW,EAAGC,EAAQ,UACrCD,EAAM,SAAS,MAAM,EAAGC,EAAQ,UAChCD,EAAM,SAAS,cAAc,IAAGC,EAAQ,WAE1C,IAAIC,EAAM,CACf,MAAO,IAAIC,EAAO,CAChB,OAAQ,EACR,KAAM,IAAIC,EAAK,CAAE,MAAAH,EAAO,EACxB,OAAQ,IAAII,EAAO,CAAE,MAAO,UAAW,MAAO,EAAG,CAAA,CAClD,CAAA,CACF,CACH,CAAA,CACD,CAGH,OAASC,EAAO,CACd,eAAQ,MAAM,gCAAiCA,CAAK,EAC7C,IAAIR,EAAY,CACrB,OAAQ,IAAIF,EACZ,WAAY,CAAE,MAAO,cAAA,EACrB,QAAS,EAAA,CACV,CACH,CACF"}