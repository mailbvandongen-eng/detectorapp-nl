const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/amkOL-yARK7kED.js","assets/layerLoaderOL-Duo44tHU.js","assets/romeinsOL-C-Vf3Uqd.js","assets/kastelenOL-BiDTclAF.js","assets/iconStyles-CwpauT_U.js","assets/hunebeddenOL-CxWQXyFL.js","assets/uikavArcheoPuntenOL-BIDlkGgP.js","assets/uikavVlakkenOL-DyyaIIMm.js","assets/uikavBufferlaagOL-CDj4isC3.js","assets/uikavExpertOL-DyZYjEvs.js","assets/uikavUiterwaardenOL-ClTUgJo3.js","assets/speeltuinenOL-MqkQ_lZE.js","assets/museaOL-DU4qxr-t.js","assets/strandjesOL-DVmbxzge.js","assets/parkenOL-Dy1RU0x3.js","assets/fossielenOL-Bv8aeT_5.js","assets/fossielUtils-DQ1ympiH.js","assets/fossielenBelgieOL-CP4sqgKY.js","assets/fossielenDuitslandOL-CeaWmo-d.js","assets/fossielenFrankrijkOL-68RUIOZm.js","assets/bunkersOL-B9SgHqgA.js","assets/grafheuvelsOL-CAlg0_Iv.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function AI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var n2={exports:{}},Tg={},r2={exports:{}},Gt={};var J4;function jG(){if(J4)return Gt;J4=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function g(Y){return Y===null||typeof Y!="object"?null:(Y=d&&Y[d]||Y["@@iterator"],typeof Y=="function"?Y:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function E(Y,O,te){this.props=Y,this.context=O,this.refs=x,this.updater=te||p}E.prototype.isReactComponent={},E.prototype.setState=function(Y,O){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,O,"setState")},E.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function I(){}I.prototype=E.prototype;function T(Y,O,te){this.props=Y,this.context=O,this.refs=x,this.updater=te||p}var M=T.prototype=new I;M.constructor=T,v(M,E.prototype),M.isPureReactComponent=!0;var k=Array.isArray,L=Object.prototype.hasOwnProperty,z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(Y,O,te){var ne,ee={},me=null,Se=null;if(O!=null)for(ne in O.ref!==void 0&&(Se=O.ref),O.key!==void 0&&(me=""+O.key),O)L.call(O,ne)&&!P.hasOwnProperty(ne)&&(ee[ne]=O[ne]);var Ne=arguments.length-2;if(Ne===1)ee.children=te;else if(1<Ne){for(var se=Array(Ne),re=0;re<Ne;re++)se[re]=arguments[re+2];ee.children=se}if(Y&&Y.defaultProps)for(ne in Ne=Y.defaultProps,Ne)ee[ne]===void 0&&(ee[ne]=Ne[ne]);return{$$typeof:n,type:Y,key:me,ref:Se,props:ee,_owner:z.current}}function b(Y,O){return{$$typeof:n,type:Y.type,key:O,ref:Y.ref,props:Y.props,_owner:Y._owner}}function F(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function j(Y){var O={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(te){return O[te]})}var U=/\/+/g;function V(Y,O){return typeof Y=="object"&&Y!==null&&Y.key!=null?j(""+Y.key):O.toString(36)}function Te(Y,O,te,ne,ee){var me=typeof Y;(me==="undefined"||me==="boolean")&&(Y=null);var Se=!1;if(Y===null)Se=!0;else switch(me){case"string":case"number":Se=!0;break;case"object":switch(Y.$$typeof){case n:case e:Se=!0}}if(Se)return Se=Y,ee=ee(Se),Y=ne===""?"."+V(Se,0):ne,k(ee)?(te="",Y!=null&&(te=Y.replace(U,"$&/")+"/"),Te(ee,O,te,"",function(re){return re})):ee!=null&&(F(ee)&&(ee=b(ee,te+(!ee.key||Se&&Se.key===ee.key?"":(""+ee.key).replace(U,"$&/")+"/")+Y)),O.push(ee)),1;if(Se=0,ne=ne===""?".":ne+":",k(Y))for(var Ne=0;Ne<Y.length;Ne++){me=Y[Ne];var se=ne+V(me,Ne);Se+=Te(me,O,te,se,ee)}else if(se=g(Y),typeof se=="function")for(Y=se.call(Y),Ne=0;!(me=Y.next()).done;)me=me.value,se=ne+V(me,Ne++),Se+=Te(me,O,te,se,ee);else if(me==="object")throw O=String(Y),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return Se}function Me(Y,O,te){if(Y==null)return Y;var ne=[],ee=0;return Te(Y,ne,"","",function(me){return O.call(te,me,ee++)}),ne}function De(Y){if(Y._status===-1){var O=Y._result;O=O(),O.then(function(te){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=te)},function(te){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=te)}),Y._status===-1&&(Y._status=0,Y._result=O)}if(Y._status===1)return Y._result.default;throw Y._result}var be={current:null},le={transition:null},Ae={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:le,ReactCurrentOwner:z};function Ie(){throw Error("act(...) is not supported in production builds of React.")}return Gt.Children={map:Me,forEach:function(Y,O,te){Me(Y,function(){O.apply(this,arguments)},te)},count:function(Y){var O=0;return Me(Y,function(){O++}),O},toArray:function(Y){return Me(Y,function(O){return O})||[]},only:function(Y){if(!F(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Gt.Component=E,Gt.Fragment=t,Gt.Profiler=i,Gt.PureComponent=T,Gt.StrictMode=r,Gt.Suspense=l,Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ae,Gt.act=Ie,Gt.cloneElement=function(Y,O,te){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var ne=v({},Y.props),ee=Y.key,me=Y.ref,Se=Y._owner;if(O!=null){if(O.ref!==void 0&&(me=O.ref,Se=z.current),O.key!==void 0&&(ee=""+O.key),Y.type&&Y.type.defaultProps)var Ne=Y.type.defaultProps;for(se in O)L.call(O,se)&&!P.hasOwnProperty(se)&&(ne[se]=O[se]===void 0&&Ne!==void 0?Ne[se]:O[se])}var se=arguments.length-2;if(se===1)ne.children=te;else if(1<se){Ne=Array(se);for(var re=0;re<se;re++)Ne[re]=arguments[re+2];ne.children=Ne}return{$$typeof:n,type:Y.type,key:ee,ref:me,props:ne,_owner:Se}},Gt.createContext=function(Y){return Y={$$typeof:a,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:s,_context:Y},Y.Consumer=Y},Gt.createElement=C,Gt.createFactory=function(Y){var O=C.bind(null,Y);return O.type=Y,O},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(Y){return{$$typeof:o,render:Y}},Gt.isValidElement=F,Gt.lazy=function(Y){return{$$typeof:f,_payload:{_status:-1,_result:Y},_init:De}},Gt.memo=function(Y,O){return{$$typeof:u,type:Y,compare:O===void 0?null:O}},Gt.startTransition=function(Y){var O=le.transition;le.transition={};try{Y()}finally{le.transition=O}},Gt.unstable_act=Ie,Gt.useCallback=function(Y,O){return be.current.useCallback(Y,O)},Gt.useContext=function(Y){return be.current.useContext(Y)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(Y){return be.current.useDeferredValue(Y)},Gt.useEffect=function(Y,O){return be.current.useEffect(Y,O)},Gt.useId=function(){return be.current.useId()},Gt.useImperativeHandle=function(Y,O,te){return be.current.useImperativeHandle(Y,O,te)},Gt.useInsertionEffect=function(Y,O){return be.current.useInsertionEffect(Y,O)},Gt.useLayoutEffect=function(Y,O){return be.current.useLayoutEffect(Y,O)},Gt.useMemo=function(Y,O){return be.current.useMemo(Y,O)},Gt.useReducer=function(Y,O,te){return be.current.useReducer(Y,O,te)},Gt.useRef=function(Y){return be.current.useRef(Y)},Gt.useState=function(Y){return be.current.useState(Y)},Gt.useSyncExternalStore=function(Y,O,te){return be.current.useSyncExternalStore(Y,O,te)},Gt.useTransition=function(){return be.current.useTransition()},Gt.version="18.3.1",Gt}var eM;function Pp(){return eM||(eM=1,r2.exports=jG()),r2.exports}var tM;function GG(){if(tM)return Tg;tM=1;var n=Pp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var f,d={},g=null,p=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(p=l.ref);for(f in l)r.call(l,f)&&!s.hasOwnProperty(f)&&(d[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)d[f]===void 0&&(d[f]=l[f]);return{$$typeof:e,type:o,key:g,ref:p,props:d,_owner:i.current}}return Tg.Fragment=t,Tg.jsx=a,Tg.jsxs=a,Tg}var nM;function BG(){return nM||(nM=1,n2.exports=GG()),n2.exports}var w=BG(),I1={},i2={exports:{}},ns={},s2={exports:{}},a2={};var rM;function UG(){return rM||(rM=1,(function(n){function e(le,Ae){var Ie=le.length;le.push(Ae);e:for(;0<Ie;){var Y=Ie-1>>>1,O=le[Y];if(0<i(O,Ae))le[Y]=Ae,le[Ie]=O,Ie=Y;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var Ae=le[0],Ie=le.pop();if(Ie!==Ae){le[0]=Ie;e:for(var Y=0,O=le.length,te=O>>>1;Y<te;){var ne=2*(Y+1)-1,ee=le[ne],me=ne+1,Se=le[me];if(0>i(ee,Ie))me<O&&0>i(Se,ee)?(le[Y]=Se,le[me]=Ie,Y=me):(le[Y]=ee,le[ne]=Ie,Y=ne);else if(me<O&&0>i(Se,Ie))le[Y]=Se,le[me]=Ie,Y=me;else break e}}return Ae}function i(le,Ae){var Ie=le.sortIndex-Ae.sortIndex;return Ie!==0?Ie:le.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],f=1,d=null,g=3,p=!1,v=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(le){for(var Ae=t(u);Ae!==null;){if(Ae.callback===null)r(u);else if(Ae.startTime<=le)r(u),Ae.sortIndex=Ae.expirationTime,e(l,Ae);else break;Ae=t(u)}}function k(le){if(x=!1,M(le),!v)if(t(l)!==null)v=!0,De(L);else{var Ae=t(u);Ae!==null&&be(k,Ae.startTime-le)}}function L(le,Ae){v=!1,x&&(x=!1,I(C),C=-1),p=!0;var Ie=g;try{for(M(Ae),d=t(l);d!==null&&(!(d.expirationTime>Ae)||le&&!j());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,g=d.priorityLevel;var O=Y(d.expirationTime<=Ae);Ae=n.unstable_now(),typeof O=="function"?d.callback=O:d===t(l)&&r(l),M(Ae)}else r(l);d=t(l)}if(d!==null)var te=!0;else{var ne=t(u);ne!==null&&be(k,ne.startTime-Ae),te=!1}return te}finally{d=null,g=Ie,p=!1}}var z=!1,P=null,C=-1,b=5,F=-1;function j(){return!(n.unstable_now()-F<b)}function U(){if(P!==null){var le=n.unstable_now();F=le;var Ae=!0;try{Ae=P(!0,le)}finally{Ae?V():(z=!1,P=null)}}else z=!1}var V;if(typeof T=="function")V=function(){T(U)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Me=Te.port2;Te.port1.onmessage=U,V=function(){Me.postMessage(null)}}else V=function(){E(U,0)};function De(le){P=le,z||(z=!0,V())}function be(le,Ae){C=E(function(){le(n.unstable_now())},Ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,De(L))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(le){switch(g){case 1:case 2:case 3:var Ae=3;break;default:Ae=g}var Ie=g;g=Ae;try{return le()}finally{g=Ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,Ae){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Ie=g;g=le;try{return Ae()}finally{g=Ie}},n.unstable_scheduleCallback=function(le,Ae,Ie){var Y=n.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Y+Ie:Y):Ie=Y,le){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Ie+O,le={id:f++,callback:Ae,priorityLevel:le,startTime:Ie,expirationTime:O,sortIndex:-1},Ie>Y?(le.sortIndex=Ie,e(u,le),t(l)===null&&le===t(u)&&(x?(I(C),C=-1):x=!0,be(k,Ie-Y))):(le.sortIndex=O,e(l,le),v||p||(v=!0,De(L))),le},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(le){var Ae=g;return function(){var Ie=g;g=Ae;try{return le.apply(this,arguments)}finally{g=Ie}}}})(a2)),a2}var iM;function zG(){return iM||(iM=1,s2.exports=UG()),s2.exports}var sM;function $G(){if(sM)return ns;sM=1;var n=Pp(),e=zG();function t(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(c,h){a(c,h),a(c+"Capture",h)}function a(c,h){for(i[c]=h,c=0;c<h.length;c++)r.add(h[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function g(c){return l.call(d,c)?!0:l.call(f,c)?!1:u.test(c)?d[c]=!0:(f[c]=!0,!1)}function p(c,h,m,y){if(m!==null&&m.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return y?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function v(c,h,m,y){if(h===null||typeof h>"u"||p(c,h,m,y))return!0;if(y)return!1;if(m!==null)switch(m.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function x(c,h,m,y,S,A,G){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=m,this.propertyName=c,this.type=h,this.sanitizeURL=A,this.removeEmptyString=G}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){E[c]=new x(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];E[h]=new x(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){E[c]=new x(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){E[c]=new x(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){E[c]=new x(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){E[c]=new x(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){E[c]=new x(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){E[c]=new x(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){E[c]=new x(c,5,!1,c.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function T(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(I,T);E[h]=new x(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(I,T);E[h]=new x(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(I,T);E[h]=new x(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){E[c]=new x(c,1,!1,c.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){E[c]=new x(c,1,!1,c.toLowerCase(),null,!0,!0)});function M(c,h,m,y){var S=E.hasOwnProperty(h)?E[h]:null;(S!==null?S.type!==0:y||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(v(h,m,S,y)&&(m=null),y||S===null?g(h)&&(m===null?c.removeAttribute(h):c.setAttribute(h,""+m)):S.mustUseProperty?c[S.propertyName]=m===null?S.type===3?!1:"":m:(h=S.attributeName,y=S.attributeNamespace,m===null?c.removeAttribute(h):(S=S.type,m=S===3||S===4&&m===!0?"":""+m,y?c.setAttributeNS(y,h,m):c.setAttribute(h,m))))}var k=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),j=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),le=Symbol.iterator;function Ae(c){return c===null||typeof c!="object"?null:(c=le&&c[le]||c["@@iterator"],typeof c=="function"?c:null)}var Ie=Object.assign,Y;function O(c){if(Y===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);Y=h&&h[1]||""}return`
`+Y+c}var te=!1;function ne(c,h){if(!c||te)return"";te=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ee){var y=Ee}Reflect.construct(c,[],h)}else{try{h.call()}catch(Ee){y=Ee}c.call(h.prototype)}else{try{throw Error()}catch(Ee){y=Ee}c()}}catch(Ee){if(Ee&&y&&typeof Ee.stack=="string"){for(var S=Ee.stack.split(`
`),A=y.stack.split(`
`),G=S.length-1,J=A.length-1;1<=G&&0<=J&&S[G]!==A[J];)J--;for(;1<=G&&0<=J;G--,J--)if(S[G]!==A[J]){if(G!==1||J!==1)do if(G--,J--,0>J||S[G]!==A[J]){var ie=`
`+S[G].replace(" at new "," at ");return c.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",c.displayName)),ie}while(1<=G&&0<=J);break}}}finally{te=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?O(c):""}function ee(c){switch(c.tag){case 5:return O(c.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return c=ne(c.type,!1),c;case 11:return c=ne(c.type.render,!1),c;case 1:return c=ne(c.type,!0),c;default:return""}}function me(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case P:return"Fragment";case z:return"Portal";case b:return"Profiler";case C:return"StrictMode";case V:return"Suspense";case Te:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case j:return(c.displayName||"Context")+".Consumer";case F:return(c._context.displayName||"Context")+".Provider";case U:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Me:return h=c.displayName||null,h!==null?h:me(c.type)||"Memo";case De:h=c._payload,c=c._init;try{return me(c(h))}catch{}}return null}function Se(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(h);case 8:return h===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Ne(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function se(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function re(c){var h=se(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),y=""+c[h];if(!c.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,A=m.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return S.call(this)},set:function(G){y=""+G,A.call(this,G)}}),Object.defineProperty(c,h,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(G){y=""+G},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function D(c){c._valueTracker||(c._valueTracker=re(c))}function Ye(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var m=h.getValue(),y="";return c&&(y=se(c)?c.checked?"true":"false":c.value),c=y,c!==m?(h.setValue(c),!0):!1}function he(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function He(c,h){var m=h.checked;return Ie({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function ue(c,h){var m=h.defaultValue==null?"":h.defaultValue,y=h.checked!=null?h.checked:h.defaultChecked;m=Ne(h.value!=null?h.value:m),c._wrapperState={initialChecked:y,initialValue:m,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function W(c,h){h=h.checked,h!=null&&M(c,"checked",h,!1)}function ae(c,h){W(c,h);var m=Ne(h.value),y=h.type;if(m!=null)y==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(y==="submit"||y==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?lt(c,h.type,m):h.hasOwnProperty("defaultValue")&&lt(c,h.type,Ne(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function ot(c,h,m){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var y=h.type;if(!(y!=="submit"&&y!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,m||h===c.value||(c.value=h),c.defaultValue=h}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function lt(c,h,m){(h!=="number"||he(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var _t=Array.isArray;function Dt(c,h,m,y){if(c=c.options,h){h={};for(var S=0;S<m.length;S++)h["$"+m[S]]=!0;for(m=0;m<c.length;m++)S=h.hasOwnProperty("$"+c[m].value),c[m].selected!==S&&(c[m].selected=S),S&&y&&(c[m].defaultSelected=!0)}else{for(m=""+Ne(m),h=null,S=0;S<c.length;S++){if(c[S].value===m){c[S].selected=!0,y&&(c[S].defaultSelected=!0);return}h!==null||c[S].disabled||(h=c[S])}h!==null&&(h.selected=!0)}}function Nn(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ie({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function rn(c,h){var m=h.value;if(m==null){if(m=h.children,h=h.defaultValue,m!=null){if(h!=null)throw Error(t(92));if(_t(m)){if(1<m.length)throw Error(t(93));m=m[0]}h=m}h==null&&(h=""),m=h}c._wrapperState={initialValue:Ne(m)}}function Ir(c,h){var m=Ne(h.value),y=Ne(h.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),h.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),y!=null&&(c.defaultValue=""+y)}function Jr(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function Yi(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oi(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?Yi(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var jr,Ho=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,m,y,S){MSApp.execUnsafeLocalFunction(function(){return c(h,m,y,S)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(jr=jr||document.createElement("div"),jr.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=jr.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function ys(c,h){if(h){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=h;return}}c.textContent=h}var Di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ko=["Webkit","ms","Moz","O"];Object.keys(Di).forEach(function(c){Ko.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),Di[h]=Di[c]})});function xs(c,h,m){return h==null||typeof h=="boolean"||h===""?"":m||typeof h!="number"||h===0||Di.hasOwnProperty(c)&&Di[c]?(""+h).trim():h+"px"}function Ys(c,h){c=c.style;for(var m in h)if(h.hasOwnProperty(m)){var y=m.indexOf("--")===0,S=xs(m,h[m],y);m==="float"&&(m="cssFloat"),y?c.setProperty(m,S):c[m]=S}}var Ea=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ei(c,h){if(h){if(Ea[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function wa(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vs=null;function Es(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Gr=null,ti=null,un=null;function ws(c){if(c=cg(c)){if(typeof Gr!="function")throw Error(t(280));var h=c.stateNode;h&&(h=G_(h),Gr(c.stateNode,c.type,h))}}function Ss(c){ti?un?un.push(c):un=[c]:ti=c}function Hn(){if(ti){var c=ti,h=un;if(un=ti=null,ws(c),h)for(c=0;c<h.length;c++)ws(h[c])}}function Xi(c,h){return c(h)}function Ar(){}var Kn=!1;function Rr(c,h,m){if(Kn)return c(h,m);Kn=!0;try{return Xi(c,h,m)}finally{Kn=!1,(ti!==null||un!==null)&&(Ar(),Hn())}}function Cr(c,h){var m=c.stateNode;if(m===null)return null;var y=G_(m);if(y===null)return null;m=y[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(c=c.type,y=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!y;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(t(231,h,typeof m));return m}var gr=!1;if(o)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){gr=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{gr=!1}function er(c,h,m,y,S,A,G,J,ie){var Ee=Array.prototype.slice.call(arguments,3);try{h.apply(m,Ee)}catch(je){this.onError(je)}}var lr=!1,qi=null,B=!1,q=null,K={onError:function(c){lr=!0,qi=c}};function X(c,h,m,y,S,A,G,J,ie){lr=!1,qi=null,er.apply(K,arguments)}function Z(c,h,m,y,S,A,G,J,ie){if(X.apply(this,arguments),lr){if(lr){var Ee=qi;lr=!1,qi=null}else throw Error(t(198));B||(B=!0,q=Ee)}}function Q(c){var h=c,m=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(m=h.return),c=h.return;while(c)}return h.tag===3?m:null}function _e(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Ce(c){if(Q(c)!==c)throw Error(t(188))}function pe(c){var h=c.alternate;if(!h){if(h=Q(c),h===null)throw Error(t(188));return h!==c?null:c}for(var m=c,y=h;;){var S=m.return;if(S===null)break;var A=S.alternate;if(A===null){if(y=S.return,y!==null){m=y;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===m)return Ce(S),c;if(A===y)return Ce(S),h;A=A.sibling}throw Error(t(188))}if(m.return!==y.return)m=S,y=A;else{for(var G=!1,J=S.child;J;){if(J===m){G=!0,m=S,y=A;break}if(J===y){G=!0,y=S,m=A;break}J=J.sibling}if(!G){for(J=A.child;J;){if(J===m){G=!0,m=A,y=S;break}if(J===y){G=!0,y=A,m=S;break}J=J.sibling}if(!G)throw Error(t(189))}}if(m.alternate!==y)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?c:h}function xe(c){return c=pe(c),c!==null?ve(c):null}function ve(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=ve(c);if(h!==null)return h;c=c.sibling}return null}var Ge=e.unstable_scheduleCallback,Xe=e.unstable_cancelCallback,it=e.unstable_shouldYield,Be=e.unstable_requestPaint,Ue=e.unstable_now,Rt=e.unstable_getCurrentPriorityLevel,hn=e.unstable_ImmediatePriority,_n=e.unstable_UserBlockingPriority,Bn=e.unstable_NormalPriority,Sa=e.unstable_LowPriority,Xs=e.unstable_IdlePriority,Ts=null,cr=null;function Wl(c){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Ts,c,void 0,(c.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:wu,ro=Math.log,qs=Math.LN2;function wu(c){return c>>>=0,c===0?32:31-(ro(c)/qs|0)|0}var io=64,Hl=4194304;function sn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Yo(c,h){var m=c.pendingLanes;if(m===0)return 0;var y=0,S=c.suspendedLanes,A=c.pingedLanes,G=m&268435455;if(G!==0){var J=G&~S;J!==0?y=sn(J):(A&=G,A!==0&&(y=sn(A)))}else G=m&~S,G!==0?y=sn(G):A!==0&&(y=sn(A));if(y===0)return 0;if(h!==0&&h!==y&&(h&S)===0&&(S=y&-y,A=h&-h,S>=A||S===16&&(A&4194240)!==0))return h;if((y&4)!==0&&(y|=m&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=y;0<h;)m=31-Yn(h),S=1<<m,y|=c[m],h&=~S;return y}function Su(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tu(c,h){for(var m=c.suspendedLanes,y=c.pingedLanes,S=c.expirationTimes,A=c.pendingLanes;0<A;){var G=31-Yn(A),J=1<<G,ie=S[G];ie===-1?((J&m)===0||(J&y)!==0)&&(S[G]=Su(J,h)):ie<=h&&(c.expiredLanes|=J),A&=~J}}function U0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function z0(){var c=io;return io<<=1,(io&4194240)===0&&(io=64),c}function $0(c){for(var h=[],m=0;31>m;m++)h.push(c);return h}function Iu(c,h,m){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Yn(h),c[h]=m}function LE(c,h){var m=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var y=c.eventTimes;for(c=c.expirationTimes;0<m;){var S=31-Yn(m),A=1<<S;h[S]=0,y[S]=-1,c[S]=-1,m&=~A}}function W0(c,h){var m=c.entangledLanes|=h;for(c=c.entanglements;m;){var y=31-Yn(m),S=1<<y;S&h|c[y]&h&&(c[y]|=h),m&=~S}}var Ht=0;function so(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var H0,ff,K0,Y0,X0,ao=!1,df=[],oo=null,lo=null,ni=null,Au=new Map,Xo=new Map,Is=[],T_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kl(c,h){switch(c){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":Au.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(h.pointerId)}}function Ta(c,h,m,y,S,A){return c===null||c.nativeEvent!==A?(c={blockedOn:h,domEventName:m,eventSystemFlags:y,nativeEvent:A,targetContainers:[S]},h!==null&&(h=cg(h),h!==null&&ff(h)),c):(c.eventSystemFlags|=y,h=c.targetContainers,S!==null&&h.indexOf(S)===-1&&h.push(S),c)}function I_(c,h,m,y,S){switch(h){case"focusin":return oo=Ta(oo,c,h,m,y,S),!0;case"dragenter":return lo=Ta(lo,c,h,m,y,S),!0;case"mouseover":return ni=Ta(ni,c,h,m,y,S),!0;case"pointerover":var A=S.pointerId;return Au.set(A,Ta(Au.get(A)||null,c,h,m,y,S)),!0;case"gotpointercapture":return A=S.pointerId,Xo.set(A,Ta(Xo.get(A)||null,c,h,m,y,S)),!0}return!1}function gf(c){var h=Mu(c.target);if(h!==null){var m=Q(h);if(m!==null){if(h=m.tag,h===13){if(h=_e(m),h!==null){c.blockedOn=h,X0(c.priority,function(){K0(m)});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Pn(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var m=mf(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var y=new m.constructor(m.type,m);vs=y,m.target.dispatchEvent(y),vs=null}else return h=cg(m),h!==null&&ff(h),c.blockedOn=m,!1;h.shift()}return!0}function A_(c,h,m){Pn(c)&&m.delete(h)}function OE(){ao=!1,oo!==null&&Pn(oo)&&(oo=null),lo!==null&&Pn(lo)&&(lo=null),ni!==null&&Pn(ni)&&(ni=null),Au.forEach(A_),Xo.forEach(A_)}function Yl(c,h){c.blockedOn===h&&(c.blockedOn=null,ao||(ao=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,OE)))}function Xl(c){function h(S){return Yl(S,c)}if(0<df.length){Yl(df[0],c);for(var m=1;m<df.length;m++){var y=df[m];y.blockedOn===c&&(y.blockedOn=null)}}for(oo!==null&&Yl(oo,c),lo!==null&&Yl(lo,c),ni!==null&&Yl(ni,c),Au.forEach(h),Xo.forEach(h),m=0;m<Is.length;m++)y=Is[m],y.blockedOn===c&&(y.blockedOn=null);for(;0<Is.length&&(m=Is[0],m.blockedOn===null);)gf(m),m.blockedOn===null&&Is.shift()}var qo=k.ReactCurrentBatchConfig,Zo=!0;function co(c,h,m,y){var S=Ht,A=qo.transition;qo.transition=null;try{Ht=1,q0(c,h,m,y)}finally{Ht=S,qo.transition=A}}function R_(c,h,m,y){var S=Ht,A=qo.transition;qo.transition=null;try{Ht=4,q0(c,h,m,y)}finally{Ht=S,qo.transition=A}}function q0(c,h,m,y){if(Zo){var S=mf(c,h,m,y);if(S===null)HE(c,h,y,uo,m),Kl(c,y);else if(I_(S,c,h,m,y))y.stopPropagation();else if(Kl(c,y),h&4&&-1<T_.indexOf(c)){for(;S!==null;){var A=cg(S);if(A!==null&&H0(A),A=mf(c,h,m,y),A===null&&HE(c,h,y,uo,m),A===S)break;S=A}S!==null&&y.stopPropagation()}else HE(c,h,y,null,m)}}var uo=null;function mf(c,h,m,y){if(uo=null,c=Es(y),c=Mu(c),c!==null)if(h=Q(c),h===null)c=null;else if(m=h.tag,m===13){if(c=_e(h),c!==null)return c;c=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return uo=c,null}function pf(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rt()){case hn:return 1;case _n:return 4;case Bn:case Sa:return 16;case Xs:return 536870912;default:return 16}default:return 16}}var As=null,_f=null,Qo=null;function C_(){if(Qo)return Qo;var c,h=_f,m=h.length,y,S="value"in As?As.value:As.textContent,A=S.length;for(c=0;c<m&&h[c]===S[c];c++);var G=m-c;for(y=1;y<=G&&h[m-y]===S[A-y];y++);return Qo=S.slice(c,1<y?1-y:void 0)}function Ru(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function ho(){return!0}function Z0(){return!1}function yi(c){function h(m,y,S,A,G){this._reactName=m,this._targetInst=S,this.type=y,this.nativeEvent=A,this.target=G,this.currentTarget=null;for(var J in c)c.hasOwnProperty(J)&&(m=c[J],this[J]=m?m(A):A[J]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ho:Z0,this.isPropagationStopped=Z0,this}return Ie(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),h}var fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cu=yi(fo),ql=Ie({},fo,{view:0,detail:0}),yf=yi(ql),xf,vf,Rs,Pu=Ie({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lt,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Rs&&(Rs&&c.type==="mousemove"?(xf=c.screenX-Rs.screenX,vf=c.screenY-Rs.screenY):vf=xf=0,Rs=c),xf)},movementY:function(c){return"movementY"in c?c.movementY:vf}}),Q0=yi(Pu),P_=Ie({},Pu,{dataTransfer:0}),M_=yi(P_),Ef=Ie({},ql,{relatedTarget:0}),ri=yi(Ef),b_=Ie({},fo,{animationName:0,elapsedTime:0,pseudoElement:0}),k_=yi(b_),Zl=Ie({},fo,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_=yi(Zl),R=Ie({},fo,{data:0}),N=yi(R),H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},we={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qe(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=we[c])?!!h[c]:!1}function Lt(){return Qe}var ur=Ie({},ql,{key:function(c){if(c.key){var h=H[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Ru(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ge[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lt,charCode:function(c){return c.type==="keypress"?Ru(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ru(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),yn=yi(ur),mr=Ie({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cs=yi(mr),Jo=Ie({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lt}),go=yi(Jo),mo=Ie({},fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),wf=yi(mo),J0=Ie({},Pu,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Nj=yi(J0),Lj=[9,13,27,32],DE=o&&"CompositionEvent"in window,eg=null;o&&"documentMode"in document&&(eg=document.documentMode);var Oj=o&&"TextEvent"in window&&!eg,WC=o&&(!DE||eg&&8<eg&&11>=eg),HC=" ",KC=!1;function YC(c,h){switch(c){case"keyup":return Lj.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Sf=!1;function Dj(c,h){switch(c){case"compositionend":return XC(h);case"keypress":return h.which!==32?null:(KC=!0,HC);case"textInput":return c=h.data,c===HC&&KC?null:c;default:return null}}function Fj(c,h){if(Sf)return c==="compositionend"||!DE&&YC(c,h)?(c=C_(),Qo=_f=As=null,Sf=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return WC&&h.locale!=="ko"?null:h.data;default:return null}}var Vj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qC(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!Vj[c.type]:h==="textarea"}function ZC(c,h,m,y){Ss(y),h=F_(h,"onChange"),0<h.length&&(m=new Cu("onChange","change",null,m,y),c.push({event:m,listeners:h}))}var tg=null,ng=null;function jj(c){mP(c,0)}function N_(c){var h=Cf(c);if(Ye(h))return c}function Gj(c,h){if(c==="change")return h}var QC=!1;if(o){var FE;if(o){var VE="oninput"in document;if(!VE){var JC=document.createElement("div");JC.setAttribute("oninput","return;"),VE=typeof JC.oninput=="function"}FE=VE}else FE=!1;QC=FE&&(!document.documentMode||9<document.documentMode)}function eP(){tg&&(tg.detachEvent("onpropertychange",tP),ng=tg=null)}function tP(c){if(c.propertyName==="value"&&N_(ng)){var h=[];ZC(h,ng,c,Es(c)),Rr(jj,h)}}function Bj(c,h,m){c==="focusin"?(eP(),tg=h,ng=m,tg.attachEvent("onpropertychange",tP)):c==="focusout"&&eP()}function Uj(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return N_(ng)}function zj(c,h){if(c==="click")return N_(h)}function $j(c,h){if(c==="input"||c==="change")return N_(h)}function Wj(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Ia=typeof Object.is=="function"?Object.is:Wj;function rg(c,h){if(Ia(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var m=Object.keys(c),y=Object.keys(h);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var S=m[y];if(!l.call(h,S)||!Ia(c[S],h[S]))return!1}return!0}function nP(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function rP(c,h){var m=nP(c);c=0;for(var y;m;){if(m.nodeType===3){if(y=c+m.textContent.length,c<=h&&y>=h)return{node:m,offset:h-c};c=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=nP(m)}}function iP(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?iP(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function sP(){for(var c=window,h=he();h instanceof c.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)c=h.contentWindow;else break;h=he(c.document)}return h}function jE(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function Hj(c){var h=sP(),m=c.focusedElem,y=c.selectionRange;if(h!==m&&m&&m.ownerDocument&&iP(m.ownerDocument.documentElement,m)){if(y!==null&&jE(m)){if(h=y.start,c=y.end,c===void 0&&(c=h),"selectionStart"in m)m.selectionStart=h,m.selectionEnd=Math.min(c,m.value.length);else if(c=(h=m.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var S=m.textContent.length,A=Math.min(y.start,S);y=y.end===void 0?A:Math.min(y.end,S),!c.extend&&A>y&&(S=y,y=A,A=S),S=rP(m,A);var G=rP(m,y);S&&G&&(c.rangeCount!==1||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==G.node||c.focusOffset!==G.offset)&&(h=h.createRange(),h.setStart(S.node,S.offset),c.removeAllRanges(),A>y?(c.addRange(h),c.extend(G.node,G.offset)):(h.setEnd(G.node,G.offset),c.addRange(h)))}}for(h=[],c=m;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<h.length;m++)c=h[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var Kj=o&&"documentMode"in document&&11>=document.documentMode,Tf=null,GE=null,ig=null,BE=!1;function aP(c,h,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;BE||Tf==null||Tf!==he(y)||(y=Tf,"selectionStart"in y&&jE(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),ig&&rg(ig,y)||(ig=y,y=F_(GE,"onSelect"),0<y.length&&(h=new Cu("onSelect","select",null,h,m),c.push({event:h,listeners:y}),h.target=Tf)))}function L_(c,h){var m={};return m[c.toLowerCase()]=h.toLowerCase(),m["Webkit"+c]="webkit"+h,m["Moz"+c]="moz"+h,m}var If={animationend:L_("Animation","AnimationEnd"),animationiteration:L_("Animation","AnimationIteration"),animationstart:L_("Animation","AnimationStart"),transitionend:L_("Transition","TransitionEnd")},UE={},oP={};o&&(oP=document.createElement("div").style,"AnimationEvent"in window||(delete If.animationend.animation,delete If.animationiteration.animation,delete If.animationstart.animation),"TransitionEvent"in window||delete If.transitionend.transition);function O_(c){if(UE[c])return UE[c];if(!If[c])return c;var h=If[c],m;for(m in h)if(h.hasOwnProperty(m)&&m in oP)return UE[c]=h[m];return c}var lP=O_("animationend"),cP=O_("animationiteration"),uP=O_("animationstart"),hP=O_("transitionend"),fP=new Map,dP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ql(c,h){fP.set(c,h),s(h,[c])}for(var zE=0;zE<dP.length;zE++){var $E=dP[zE],Yj=$E.toLowerCase(),Xj=$E[0].toUpperCase()+$E.slice(1);Ql(Yj,"on"+Xj)}Ql(lP,"onAnimationEnd"),Ql(cP,"onAnimationIteration"),Ql(uP,"onAnimationStart"),Ql("dblclick","onDoubleClick"),Ql("focusin","onFocus"),Ql("focusout","onBlur"),Ql(hP,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qj=new Set("cancel close invalid load scroll toggle".split(" ").concat(sg));function gP(c,h,m){var y=c.type||"unknown-event";c.currentTarget=m,Z(y,h,void 0,c),c.currentTarget=null}function mP(c,h){h=(h&4)!==0;for(var m=0;m<c.length;m++){var y=c[m],S=y.event;y=y.listeners;e:{var A=void 0;if(h)for(var G=y.length-1;0<=G;G--){var J=y[G],ie=J.instance,Ee=J.currentTarget;if(J=J.listener,ie!==A&&S.isPropagationStopped())break e;gP(S,J,Ee),A=ie}else for(G=0;G<y.length;G++){if(J=y[G],ie=J.instance,Ee=J.currentTarget,J=J.listener,ie!==A&&S.isPropagationStopped())break e;gP(S,J,Ee),A=ie}}}if(B)throw c=q,B=!1,q=null,c}function Ln(c,h){var m=h[QE];m===void 0&&(m=h[QE]=new Set);var y=c+"__bubble";m.has(y)||(pP(h,c,2,!1),m.add(y))}function WE(c,h,m){var y=0;h&&(y|=4),pP(m,c,y,h)}var D_="_reactListening"+Math.random().toString(36).slice(2);function ag(c){if(!c[D_]){c[D_]=!0,r.forEach(function(m){m!=="selectionchange"&&(qj.has(m)||WE(m,!1,c),WE(m,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[D_]||(h[D_]=!0,WE("selectionchange",!1,h))}}function pP(c,h,m,y){switch(pf(h)){case 1:var S=co;break;case 4:S=R_;break;default:S=q0}m=S.bind(null,h,m,c),S=void 0,!gr||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(S=!0),y?S!==void 0?c.addEventListener(h,m,{capture:!0,passive:S}):c.addEventListener(h,m,!0):S!==void 0?c.addEventListener(h,m,{passive:S}):c.addEventListener(h,m,!1)}function HE(c,h,m,y,S){var A=y;if((h&1)===0&&(h&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var J=y.stateNode.containerInfo;if(J===S||J.nodeType===8&&J.parentNode===S)break;if(G===4)for(G=y.return;G!==null;){var ie=G.tag;if((ie===3||ie===4)&&(ie=G.stateNode.containerInfo,ie===S||ie.nodeType===8&&ie.parentNode===S))return;G=G.return}for(;J!==null;){if(G=Mu(J),G===null)return;if(ie=G.tag,ie===5||ie===6){y=A=G;continue e}J=J.parentNode}}y=y.return}Rr(function(){var Ee=A,je=Es(m),ze=[];e:{var Fe=fP.get(c);if(Fe!==void 0){var at=Cu,ft=c;switch(c){case"keypress":if(Ru(m)===0)break e;case"keydown":case"keyup":at=yn;break;case"focusin":ft="focus",at=ri;break;case"focusout":ft="blur",at=ri;break;case"beforeblur":case"afterblur":at=ri;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Q0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=M_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=go;break;case lP:case cP:case uP:at=k_;break;case hP:at=wf;break;case"scroll":at=yf;break;case"wheel":at=Nj;break;case"copy":case"cut":case"paste":at=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Cs}var gt=(h&4)!==0,hr=!gt&&c==="scroll",de=gt?Fe!==null?Fe+"Capture":null:Fe;gt=[];for(var oe=Ee,ye;oe!==null;){ye=oe;var Ke=ye.stateNode;if(ye.tag===5&&Ke!==null&&(ye=Ke,de!==null&&(Ke=Cr(oe,de),Ke!=null&&gt.push(og(oe,Ke,ye)))),hr)break;oe=oe.return}0<gt.length&&(Fe=new at(Fe,ft,null,m,je),ze.push({event:Fe,listeners:gt}))}}if((h&7)===0){e:{if(Fe=c==="mouseover"||c==="pointerover",at=c==="mouseout"||c==="pointerout",Fe&&m!==vs&&(ft=m.relatedTarget||m.fromElement)&&(Mu(ft)||ft[el]))break e;if((at||Fe)&&(Fe=je.window===je?je:(Fe=je.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,at?(ft=m.relatedTarget||m.toElement,at=Ee,ft=ft?Mu(ft):null,ft!==null&&(hr=Q(ft),ft!==hr||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(at=null,ft=Ee),at!==ft)){if(gt=Q0,Ke="onMouseLeave",de="onMouseEnter",oe="mouse",(c==="pointerout"||c==="pointerover")&&(gt=Cs,Ke="onPointerLeave",de="onPointerEnter",oe="pointer"),hr=at==null?Fe:Cf(at),ye=ft==null?Fe:Cf(ft),Fe=new gt(Ke,oe+"leave",at,m,je),Fe.target=hr,Fe.relatedTarget=ye,Ke=null,Mu(je)===Ee&&(gt=new gt(de,oe+"enter",ft,m,je),gt.target=ye,gt.relatedTarget=hr,Ke=gt),hr=Ke,at&&ft)t:{for(gt=at,de=ft,oe=0,ye=gt;ye;ye=Af(ye))oe++;for(ye=0,Ke=de;Ke;Ke=Af(Ke))ye++;for(;0<oe-ye;)gt=Af(gt),oe--;for(;0<ye-oe;)de=Af(de),ye--;for(;oe--;){if(gt===de||de!==null&&gt===de.alternate)break t;gt=Af(gt),de=Af(de)}gt=null}else gt=null;at!==null&&_P(ze,Fe,at,gt,!1),ft!==null&&hr!==null&&_P(ze,hr,ft,gt,!0)}}e:{if(Fe=Ee?Cf(Ee):window,at=Fe.nodeName&&Fe.nodeName.toLowerCase(),at==="select"||at==="input"&&Fe.type==="file")var pt=Gj;else if(qC(Fe))if(QC)pt=$j;else{pt=Uj;var St=Bj}else(at=Fe.nodeName)&&at.toLowerCase()==="input"&&(Fe.type==="checkbox"||Fe.type==="radio")&&(pt=zj);if(pt&&(pt=pt(c,Ee))){ZC(ze,pt,m,je);break e}St&&St(c,Fe,Ee),c==="focusout"&&(St=Fe._wrapperState)&&St.controlled&&Fe.type==="number"&&lt(Fe,"number",Fe.value)}switch(St=Ee?Cf(Ee):window,c){case"focusin":(qC(St)||St.contentEditable==="true")&&(Tf=St,GE=Ee,ig=null);break;case"focusout":ig=GE=Tf=null;break;case"mousedown":BE=!0;break;case"contextmenu":case"mouseup":case"dragend":BE=!1,aP(ze,m,je);break;case"selectionchange":if(Kj)break;case"keydown":case"keyup":aP(ze,m,je)}var Tt;if(DE)e:{switch(c){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else Sf?YC(c,m)&&(Ct="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Ct="onCompositionStart");Ct&&(WC&&m.locale!=="ko"&&(Sf||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Sf&&(Tt=C_()):(As=je,_f="value"in As?As.value:As.textContent,Sf=!0)),St=F_(Ee,Ct),0<St.length&&(Ct=new N(Ct,c,null,m,je),ze.push({event:Ct,listeners:St}),Tt?Ct.data=Tt:(Tt=XC(m),Tt!==null&&(Ct.data=Tt)))),(Tt=Oj?Dj(c,m):Fj(c,m))&&(Ee=F_(Ee,"onBeforeInput"),0<Ee.length&&(je=new N("onBeforeInput","beforeinput",null,m,je),ze.push({event:je,listeners:Ee}),je.data=Tt))}mP(ze,h)})}function og(c,h,m){return{instance:c,listener:h,currentTarget:m}}function F_(c,h){for(var m=h+"Capture",y=[];c!==null;){var S=c,A=S.stateNode;S.tag===5&&A!==null&&(S=A,A=Cr(c,m),A!=null&&y.unshift(og(c,A,S)),A=Cr(c,h),A!=null&&y.push(og(c,A,S))),c=c.return}return y}function Af(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function _P(c,h,m,y,S){for(var A=h._reactName,G=[];m!==null&&m!==y;){var J=m,ie=J.alternate,Ee=J.stateNode;if(ie!==null&&ie===y)break;J.tag===5&&Ee!==null&&(J=Ee,S?(ie=Cr(m,A),ie!=null&&G.unshift(og(m,ie,J))):S||(ie=Cr(m,A),ie!=null&&G.push(og(m,ie,J)))),m=m.return}G.length!==0&&c.push({event:h,listeners:G})}var Zj=/\r\n?/g,Qj=/\u0000|\uFFFD/g;function yP(c){return(typeof c=="string"?c:""+c).replace(Zj,`
`).replace(Qj,"")}function V_(c,h,m){if(h=yP(h),yP(c)!==h&&m)throw Error(t(425))}function j_(){}var KE=null,YE=null;function XE(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var qE=typeof setTimeout=="function"?setTimeout:void 0,Jj=typeof clearTimeout=="function"?clearTimeout:void 0,xP=typeof Promise=="function"?Promise:void 0,eG=typeof queueMicrotask=="function"?queueMicrotask:typeof xP<"u"?function(c){return xP.resolve(null).then(c).catch(tG)}:qE;function tG(c){setTimeout(function(){throw c})}function ZE(c,h){var m=h,y=0;do{var S=m.nextSibling;if(c.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(y===0){c.removeChild(S),Xl(h);return}y--}else m!=="$"&&m!=="$?"&&m!=="$!"||y++;m=S}while(m);Xl(h)}function Jl(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function vP(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return c;h--}else m==="/$"&&h++}c=c.previousSibling}return null}var Rf=Math.random().toString(36).slice(2),po="__reactFiber$"+Rf,lg="__reactProps$"+Rf,el="__reactContainer$"+Rf,QE="__reactEvents$"+Rf,nG="__reactListeners$"+Rf,rG="__reactHandles$"+Rf;function Mu(c){var h=c[po];if(h)return h;for(var m=c.parentNode;m;){if(h=m[el]||m[po]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(c=vP(c);c!==null;){if(m=c[po])return m;c=vP(c)}return h}c=m,m=c.parentNode}return null}function cg(c){return c=c[po]||c[el],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Cf(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function G_(c){return c[lg]||null}var JE=[],Pf=-1;function ec(c){return{current:c}}function On(c){0>Pf||(c.current=JE[Pf],JE[Pf]=null,Pf--)}function bn(c,h){Pf++,JE[Pf]=c.current,c.current=h}var tc={},xi=ec(tc),Zi=ec(!1),bu=tc;function Mf(c,h){var m=c.type.contextTypes;if(!m)return tc;var y=c.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===h)return y.__reactInternalMemoizedMaskedChildContext;var S={},A;for(A in m)S[A]=h[A];return y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=S),S}function Qi(c){return c=c.childContextTypes,c!=null}function B_(){On(Zi),On(xi)}function EP(c,h,m){if(xi.current!==tc)throw Error(t(168));bn(xi,h),bn(Zi,m)}function wP(c,h,m){var y=c.stateNode;if(h=h.childContextTypes,typeof y.getChildContext!="function")return m;y=y.getChildContext();for(var S in y)if(!(S in h))throw Error(t(108,Se(c)||"Unknown",S));return Ie({},m,y)}function U_(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||tc,bu=xi.current,bn(xi,c),bn(Zi,Zi.current),!0}function SP(c,h,m){var y=c.stateNode;if(!y)throw Error(t(169));m?(c=wP(c,h,bu),y.__reactInternalMemoizedMergedChildContext=c,On(Zi),On(xi),bn(xi,c)):On(Zi),bn(Zi,m)}var tl=null,z_=!1,ew=!1;function TP(c){tl===null?tl=[c]:tl.push(c)}function iG(c){z_=!0,TP(c)}function nc(){if(!ew&&tl!==null){ew=!0;var c=0,h=Ht;try{var m=tl;for(Ht=1;c<m.length;c++){var y=m[c];do y=y(!0);while(y!==null)}tl=null,z_=!1}catch(S){throw tl!==null&&(tl=tl.slice(c+1)),Ge(hn,nc),S}finally{Ht=h,ew=!1}}return null}var bf=[],kf=0,$_=null,W_=0,Zs=[],Qs=0,ku=null,nl=1,rl="";function Nu(c,h){bf[kf++]=W_,bf[kf++]=$_,$_=c,W_=h}function IP(c,h,m){Zs[Qs++]=nl,Zs[Qs++]=rl,Zs[Qs++]=ku,ku=c;var y=nl;c=rl;var S=32-Yn(y)-1;y&=~(1<<S),m+=1;var A=32-Yn(h)+S;if(30<A){var G=S-S%5;A=(y&(1<<G)-1).toString(32),y>>=G,S-=G,nl=1<<32-Yn(h)+S|m<<S|y,rl=A+c}else nl=1<<A|m<<S|y,rl=c}function tw(c){c.return!==null&&(Nu(c,1),IP(c,1,0))}function nw(c){for(;c===$_;)$_=bf[--kf],bf[kf]=null,W_=bf[--kf],bf[kf]=null;for(;c===ku;)ku=Zs[--Qs],Zs[Qs]=null,rl=Zs[--Qs],Zs[Qs]=null,nl=Zs[--Qs],Zs[Qs]=null}var Ps=null,Ms=null,Un=!1,Aa=null;function AP(c,h){var m=na(5,null,null,0);m.elementType="DELETED",m.stateNode=h,m.return=c,h=c.deletions,h===null?(c.deletions=[m],c.flags|=16):h.push(m)}function RP(c,h){switch(c.tag){case 5:var m=c.type;return h=h.nodeType!==1||m.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,Ps=c,Ms=Jl(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,Ps=c,Ms=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(m=ku!==null?{id:nl,overflow:rl}:null,c.memoizedState={dehydrated:h,treeContext:m,retryLane:1073741824},m=na(18,null,null,0),m.stateNode=h,m.return=c,c.child=m,Ps=c,Ms=null,!0):!1;default:return!1}}function rw(c){return(c.mode&1)!==0&&(c.flags&128)===0}function iw(c){if(Un){var h=Ms;if(h){var m=h;if(!RP(c,h)){if(rw(c))throw Error(t(418));h=Jl(m.nextSibling);var y=Ps;h&&RP(c,h)?AP(y,m):(c.flags=c.flags&-4097|2,Un=!1,Ps=c)}}else{if(rw(c))throw Error(t(418));c.flags=c.flags&-4097|2,Un=!1,Ps=c}}}function CP(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ps=c}function H_(c){if(c!==Ps)return!1;if(!Un)return CP(c),Un=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!XE(c.type,c.memoizedProps)),h&&(h=Ms)){if(rw(c))throw PP(),Error(t(418));for(;h;)AP(c,h),h=Jl(h.nextSibling)}if(CP(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(h===0){Ms=Jl(c.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++}c=c.nextSibling}Ms=null}}else Ms=Ps?Jl(c.stateNode.nextSibling):null;return!0}function PP(){for(var c=Ms;c;)c=Jl(c.nextSibling)}function Nf(){Ms=Ps=null,Un=!1}function sw(c){Aa===null?Aa=[c]:Aa.push(c)}var sG=k.ReactCurrentBatchConfig;function ug(c,h,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var y=m.stateNode}if(!y)throw Error(t(147,c));var S=y,A=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===A?h.ref:(h=function(G){var J=S.refs;G===null?delete J[A]:J[A]=G},h._stringRef=A,h)}if(typeof c!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,c))}return c}function K_(c,h){throw c=Object.prototype.toString.call(h),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function MP(c){var h=c._init;return h(c._payload)}function bP(c){function h(de,oe){if(c){var ye=de.deletions;ye===null?(de.deletions=[oe],de.flags|=16):ye.push(oe)}}function m(de,oe){if(!c)return null;for(;oe!==null;)h(de,oe),oe=oe.sibling;return null}function y(de,oe){for(de=new Map;oe!==null;)oe.key!==null?de.set(oe.key,oe):de.set(oe.index,oe),oe=oe.sibling;return de}function S(de,oe){return de=uc(de,oe),de.index=0,de.sibling=null,de}function A(de,oe,ye){return de.index=ye,c?(ye=de.alternate,ye!==null?(ye=ye.index,ye<oe?(de.flags|=2,oe):ye):(de.flags|=2,oe)):(de.flags|=1048576,oe)}function G(de){return c&&de.alternate===null&&(de.flags|=2),de}function J(de,oe,ye,Ke){return oe===null||oe.tag!==6?(oe=qw(ye,de.mode,Ke),oe.return=de,oe):(oe=S(oe,ye),oe.return=de,oe)}function ie(de,oe,ye,Ke){var pt=ye.type;return pt===P?je(de,oe,ye.props.children,Ke,ye.key):oe!==null&&(oe.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===De&&MP(pt)===oe.type)?(Ke=S(oe,ye.props),Ke.ref=ug(de,oe,ye),Ke.return=de,Ke):(Ke=_1(ye.type,ye.key,ye.props,null,de.mode,Ke),Ke.ref=ug(de,oe,ye),Ke.return=de,Ke)}function Ee(de,oe,ye,Ke){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ye.containerInfo||oe.stateNode.implementation!==ye.implementation?(oe=Zw(ye,de.mode,Ke),oe.return=de,oe):(oe=S(oe,ye.children||[]),oe.return=de,oe)}function je(de,oe,ye,Ke,pt){return oe===null||oe.tag!==7?(oe=Bu(ye,de.mode,Ke,pt),oe.return=de,oe):(oe=S(oe,ye),oe.return=de,oe)}function ze(de,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=qw(""+oe,de.mode,ye),oe.return=de,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case L:return ye=_1(oe.type,oe.key,oe.props,null,de.mode,ye),ye.ref=ug(de,null,oe),ye.return=de,ye;case z:return oe=Zw(oe,de.mode,ye),oe.return=de,oe;case De:var Ke=oe._init;return ze(de,Ke(oe._payload),ye)}if(_t(oe)||Ae(oe))return oe=Bu(oe,de.mode,ye,null),oe.return=de,oe;K_(de,oe)}return null}function Fe(de,oe,ye,Ke){var pt=oe!==null?oe.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return pt!==null?null:J(de,oe,""+ye,Ke);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case L:return ye.key===pt?ie(de,oe,ye,Ke):null;case z:return ye.key===pt?Ee(de,oe,ye,Ke):null;case De:return pt=ye._init,Fe(de,oe,pt(ye._payload),Ke)}if(_t(ye)||Ae(ye))return pt!==null?null:je(de,oe,ye,Ke,null);K_(de,ye)}return null}function at(de,oe,ye,Ke,pt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return de=de.get(ye)||null,J(oe,de,""+Ke,pt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case L:return de=de.get(Ke.key===null?ye:Ke.key)||null,ie(oe,de,Ke,pt);case z:return de=de.get(Ke.key===null?ye:Ke.key)||null,Ee(oe,de,Ke,pt);case De:var St=Ke._init;return at(de,oe,ye,St(Ke._payload),pt)}if(_t(Ke)||Ae(Ke))return de=de.get(ye)||null,je(oe,de,Ke,pt,null);K_(oe,Ke)}return null}function ft(de,oe,ye,Ke){for(var pt=null,St=null,Tt=oe,Ct=oe=0,zr=null;Tt!==null&&Ct<ye.length;Ct++){Tt.index>Ct?(zr=Tt,Tt=null):zr=Tt.sibling;var Qt=Fe(de,Tt,ye[Ct],Ke);if(Qt===null){Tt===null&&(Tt=zr);break}c&&Tt&&Qt.alternate===null&&h(de,Tt),oe=A(Qt,oe,Ct),St===null?pt=Qt:St.sibling=Qt,St=Qt,Tt=zr}if(Ct===ye.length)return m(de,Tt),Un&&Nu(de,Ct),pt;if(Tt===null){for(;Ct<ye.length;Ct++)Tt=ze(de,ye[Ct],Ke),Tt!==null&&(oe=A(Tt,oe,Ct),St===null?pt=Tt:St.sibling=Tt,St=Tt);return Un&&Nu(de,Ct),pt}for(Tt=y(de,Tt);Ct<ye.length;Ct++)zr=at(Tt,de,Ct,ye[Ct],Ke),zr!==null&&(c&&zr.alternate!==null&&Tt.delete(zr.key===null?Ct:zr.key),oe=A(zr,oe,Ct),St===null?pt=zr:St.sibling=zr,St=zr);return c&&Tt.forEach(function(hc){return h(de,hc)}),Un&&Nu(de,Ct),pt}function gt(de,oe,ye,Ke){var pt=Ae(ye);if(typeof pt!="function")throw Error(t(150));if(ye=pt.call(ye),ye==null)throw Error(t(151));for(var St=pt=null,Tt=oe,Ct=oe=0,zr=null,Qt=ye.next();Tt!==null&&!Qt.done;Ct++,Qt=ye.next()){Tt.index>Ct?(zr=Tt,Tt=null):zr=Tt.sibling;var hc=Fe(de,Tt,Qt.value,Ke);if(hc===null){Tt===null&&(Tt=zr);break}c&&Tt&&hc.alternate===null&&h(de,Tt),oe=A(hc,oe,Ct),St===null?pt=hc:St.sibling=hc,St=hc,Tt=zr}if(Qt.done)return m(de,Tt),Un&&Nu(de,Ct),pt;if(Tt===null){for(;!Qt.done;Ct++,Qt=ye.next())Qt=ze(de,Qt.value,Ke),Qt!==null&&(oe=A(Qt,oe,Ct),St===null?pt=Qt:St.sibling=Qt,St=Qt);return Un&&Nu(de,Ct),pt}for(Tt=y(de,Tt);!Qt.done;Ct++,Qt=ye.next())Qt=at(Tt,de,Ct,Qt.value,Ke),Qt!==null&&(c&&Qt.alternate!==null&&Tt.delete(Qt.key===null?Ct:Qt.key),oe=A(Qt,oe,Ct),St===null?pt=Qt:St.sibling=Qt,St=Qt);return c&&Tt.forEach(function(VG){return h(de,VG)}),Un&&Nu(de,Ct),pt}function hr(de,oe,ye,Ke){if(typeof ye=="object"&&ye!==null&&ye.type===P&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case L:e:{for(var pt=ye.key,St=oe;St!==null;){if(St.key===pt){if(pt=ye.type,pt===P){if(St.tag===7){m(de,St.sibling),oe=S(St,ye.props.children),oe.return=de,de=oe;break e}}else if(St.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===De&&MP(pt)===St.type){m(de,St.sibling),oe=S(St,ye.props),oe.ref=ug(de,St,ye),oe.return=de,de=oe;break e}m(de,St);break}else h(de,St);St=St.sibling}ye.type===P?(oe=Bu(ye.props.children,de.mode,Ke,ye.key),oe.return=de,de=oe):(Ke=_1(ye.type,ye.key,ye.props,null,de.mode,Ke),Ke.ref=ug(de,oe,ye),Ke.return=de,de=Ke)}return G(de);case z:e:{for(St=ye.key;oe!==null;){if(oe.key===St)if(oe.tag===4&&oe.stateNode.containerInfo===ye.containerInfo&&oe.stateNode.implementation===ye.implementation){m(de,oe.sibling),oe=S(oe,ye.children||[]),oe.return=de,de=oe;break e}else{m(de,oe);break}else h(de,oe);oe=oe.sibling}oe=Zw(ye,de.mode,Ke),oe.return=de,de=oe}return G(de);case De:return St=ye._init,hr(de,oe,St(ye._payload),Ke)}if(_t(ye))return ft(de,oe,ye,Ke);if(Ae(ye))return gt(de,oe,ye,Ke);K_(de,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,oe!==null&&oe.tag===6?(m(de,oe.sibling),oe=S(oe,ye),oe.return=de,de=oe):(m(de,oe),oe=qw(ye,de.mode,Ke),oe.return=de,de=oe),G(de)):m(de,oe)}return hr}var Lf=bP(!0),kP=bP(!1),Y_=ec(null),X_=null,Of=null,aw=null;function ow(){aw=Of=X_=null}function lw(c){var h=Y_.current;On(Y_),c._currentValue=h}function cw(c,h,m){for(;c!==null;){var y=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,y!==null&&(y.childLanes|=h)):y!==null&&(y.childLanes&h)!==h&&(y.childLanes|=h),c===m)break;c=c.return}}function Df(c,h){X_=c,aw=Of=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(Ji=!0),c.firstContext=null)}function Js(c){var h=c._currentValue;if(aw!==c)if(c={context:c,memoizedValue:h,next:null},Of===null){if(X_===null)throw Error(t(308));Of=c,X_.dependencies={lanes:0,firstContext:c}}else Of=Of.next=c;return h}var Lu=null;function uw(c){Lu===null?Lu=[c]:Lu.push(c)}function NP(c,h,m,y){var S=h.interleaved;return S===null?(m.next=m,uw(h)):(m.next=S.next,S.next=m),h.interleaved=m,il(c,y)}function il(c,h){c.lanes|=h;var m=c.alternate;for(m!==null&&(m.lanes|=h),m=c,c=c.return;c!==null;)c.childLanes|=h,m=c.alternate,m!==null&&(m.childLanes|=h),m=c,c=c.return;return m.tag===3?m.stateNode:null}var rc=!1;function hw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LP(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function sl(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function ic(c,h,m){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,(qt&2)!==0){var S=y.pending;return S===null?h.next=h:(h.next=S.next,S.next=h),y.pending=h,il(c,m)}return S=y.interleaved,S===null?(h.next=h,uw(y)):(h.next=S.next,S.next=h),y.interleaved=h,il(c,m)}function q_(c,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194240)!==0)){var y=h.lanes;y&=c.pendingLanes,m|=y,h.lanes=m,W0(c,m)}}function OP(c,h){var m=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var S=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var G={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?S=A=G:A=A.next=G,m=m.next}while(m!==null);A===null?S=A=h:A=A.next=h}else S=A=h;m={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:y.shared,effects:y.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=h}function Z_(c,h,m,y){var S=c.updateQueue;rc=!1;var A=S.firstBaseUpdate,G=S.lastBaseUpdate,J=S.shared.pending;if(J!==null){S.shared.pending=null;var ie=J,Ee=ie.next;ie.next=null,G===null?A=Ee:G.next=Ee,G=ie;var je=c.alternate;je!==null&&(je=je.updateQueue,J=je.lastBaseUpdate,J!==G&&(J===null?je.firstBaseUpdate=Ee:J.next=Ee,je.lastBaseUpdate=ie))}if(A!==null){var ze=S.baseState;G=0,je=Ee=ie=null,J=A;do{var Fe=J.lane,at=J.eventTime;if((y&Fe)===Fe){je!==null&&(je=je.next={eventTime:at,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var ft=c,gt=J;switch(Fe=h,at=m,gt.tag){case 1:if(ft=gt.payload,typeof ft=="function"){ze=ft.call(at,ze,Fe);break e}ze=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=gt.payload,Fe=typeof ft=="function"?ft.call(at,ze,Fe):ft,Fe==null)break e;ze=Ie({},ze,Fe);break e;case 2:rc=!0}}J.callback!==null&&J.lane!==0&&(c.flags|=64,Fe=S.effects,Fe===null?S.effects=[J]:Fe.push(J))}else at={eventTime:at,lane:Fe,tag:J.tag,payload:J.payload,callback:J.callback,next:null},je===null?(Ee=je=at,ie=ze):je=je.next=at,G|=Fe;if(J=J.next,J===null){if(J=S.shared.pending,J===null)break;Fe=J,J=Fe.next,Fe.next=null,S.lastBaseUpdate=Fe,S.shared.pending=null}}while(!0);if(je===null&&(ie=ze),S.baseState=ie,S.firstBaseUpdate=Ee,S.lastBaseUpdate=je,h=S.shared.interleaved,h!==null){S=h;do G|=S.lane,S=S.next;while(S!==h)}else A===null&&(S.shared.lanes=0);Fu|=G,c.lanes=G,c.memoizedState=ze}}function DP(c,h,m){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var y=c[h],S=y.callback;if(S!==null){if(y.callback=null,y=m,typeof S!="function")throw Error(t(191,S));S.call(y)}}}var hg={},_o=ec(hg),fg=ec(hg),dg=ec(hg);function Ou(c){if(c===hg)throw Error(t(174));return c}function fw(c,h){switch(bn(dg,h),bn(fg,c),bn(_o,hg),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Oi(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Oi(h,c)}On(_o),bn(_o,h)}function Ff(){On(_o),On(fg),On(dg)}function FP(c){Ou(dg.current);var h=Ou(_o.current),m=Oi(h,c.type);h!==m&&(bn(fg,c),bn(_o,m))}function dw(c){fg.current===c&&(On(_o),On(fg))}var Xn=ec(0);function Q_(c){for(var h=c;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var gw=[];function mw(){for(var c=0;c<gw.length;c++)gw[c]._workInProgressVersionPrimary=null;gw.length=0}var J_=k.ReactCurrentDispatcher,pw=k.ReactCurrentBatchConfig,Du=0,qn=null,Pr=null,Br=null,e1=!1,gg=!1,mg=0,aG=0;function vi(){throw Error(t(321))}function _w(c,h){if(h===null)return!1;for(var m=0;m<h.length&&m<c.length;m++)if(!Ia(c[m],h[m]))return!1;return!0}function yw(c,h,m,y,S,A){if(Du=A,qn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,J_.current=c===null||c.memoizedState===null?uG:hG,c=m(y,S),gg){A=0;do{if(gg=!1,mg=0,25<=A)throw Error(t(301));A+=1,Br=Pr=null,h.updateQueue=null,J_.current=fG,c=m(y,S)}while(gg)}if(J_.current=r1,h=Pr!==null&&Pr.next!==null,Du=0,Br=Pr=qn=null,e1=!1,h)throw Error(t(300));return c}function xw(){var c=mg!==0;return mg=0,c}function yo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?qn.memoizedState=Br=c:Br=Br.next=c,Br}function ea(){if(Pr===null){var c=qn.alternate;c=c!==null?c.memoizedState:null}else c=Pr.next;var h=Br===null?qn.memoizedState:Br.next;if(h!==null)Br=h,Pr=c;else{if(c===null)throw Error(t(310));Pr=c,c={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Br===null?qn.memoizedState=Br=c:Br=Br.next=c}return Br}function pg(c,h){return typeof h=="function"?h(c):h}function vw(c){var h=ea(),m=h.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var y=Pr,S=y.baseQueue,A=m.pending;if(A!==null){if(S!==null){var G=S.next;S.next=A.next,A.next=G}y.baseQueue=S=A,m.pending=null}if(S!==null){A=S.next,y=y.baseState;var J=G=null,ie=null,Ee=A;do{var je=Ee.lane;if((Du&je)===je)ie!==null&&(ie=ie.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),y=Ee.hasEagerState?Ee.eagerState:c(y,Ee.action);else{var ze={lane:je,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};ie===null?(J=ie=ze,G=y):ie=ie.next=ze,qn.lanes|=je,Fu|=je}Ee=Ee.next}while(Ee!==null&&Ee!==A);ie===null?G=y:ie.next=J,Ia(y,h.memoizedState)||(Ji=!0),h.memoizedState=y,h.baseState=G,h.baseQueue=ie,m.lastRenderedState=y}if(c=m.interleaved,c!==null){S=c;do A=S.lane,qn.lanes|=A,Fu|=A,S=S.next;while(S!==c)}else S===null&&(m.lanes=0);return[h.memoizedState,m.dispatch]}function Ew(c){var h=ea(),m=h.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var y=m.dispatch,S=m.pending,A=h.memoizedState;if(S!==null){m.pending=null;var G=S=S.next;do A=c(A,G.action),G=G.next;while(G!==S);Ia(A,h.memoizedState)||(Ji=!0),h.memoizedState=A,h.baseQueue===null&&(h.baseState=A),m.lastRenderedState=A}return[A,y]}function VP(){}function jP(c,h){var m=qn,y=ea(),S=h(),A=!Ia(y.memoizedState,S);if(A&&(y.memoizedState=S,Ji=!0),y=y.queue,ww(UP.bind(null,m,y,c),[c]),y.getSnapshot!==h||A||Br!==null&&Br.memoizedState.tag&1){if(m.flags|=2048,_g(9,BP.bind(null,m,y,S,h),void 0,null),Ur===null)throw Error(t(349));(Du&30)!==0||GP(m,h,S)}return S}function GP(c,h,m){c.flags|=16384,c={getSnapshot:h,value:m},h=qn.updateQueue,h===null?(h={lastEffect:null,stores:null},qn.updateQueue=h,h.stores=[c]):(m=h.stores,m===null?h.stores=[c]:m.push(c))}function BP(c,h,m,y){h.value=m,h.getSnapshot=y,zP(h)&&$P(c)}function UP(c,h,m){return m(function(){zP(h)&&$P(c)})}function zP(c){var h=c.getSnapshot;c=c.value;try{var m=h();return!Ia(c,m)}catch{return!0}}function $P(c){var h=il(c,1);h!==null&&Ma(h,c,1,-1)}function WP(c){var h=yo();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pg,lastRenderedState:c},h.queue=c,c=c.dispatch=cG.bind(null,qn,c),[h.memoizedState,c]}function _g(c,h,m,y){return c={tag:c,create:h,destroy:m,deps:y,next:null},h=qn.updateQueue,h===null?(h={lastEffect:null,stores:null},qn.updateQueue=h,h.lastEffect=c.next=c):(m=h.lastEffect,m===null?h.lastEffect=c.next=c:(y=m.next,m.next=c,c.next=y,h.lastEffect=c)),c}function HP(){return ea().memoizedState}function t1(c,h,m,y){var S=yo();qn.flags|=c,S.memoizedState=_g(1|h,m,void 0,y===void 0?null:y)}function n1(c,h,m,y){var S=ea();y=y===void 0?null:y;var A=void 0;if(Pr!==null){var G=Pr.memoizedState;if(A=G.destroy,y!==null&&_w(y,G.deps)){S.memoizedState=_g(h,m,A,y);return}}qn.flags|=c,S.memoizedState=_g(1|h,m,A,y)}function KP(c,h){return t1(8390656,8,c,h)}function ww(c,h){return n1(2048,8,c,h)}function YP(c,h){return n1(4,2,c,h)}function XP(c,h){return n1(4,4,c,h)}function qP(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function ZP(c,h,m){return m=m!=null?m.concat([c]):null,n1(4,4,qP.bind(null,h,c),m)}function Sw(){}function QP(c,h){var m=ea();h=h===void 0?null:h;var y=m.memoizedState;return y!==null&&h!==null&&_w(h,y[1])?y[0]:(m.memoizedState=[c,h],c)}function JP(c,h){var m=ea();h=h===void 0?null:h;var y=m.memoizedState;return y!==null&&h!==null&&_w(h,y[1])?y[0]:(c=c(),m.memoizedState=[c,h],c)}function e4(c,h,m){return(Du&21)===0?(c.baseState&&(c.baseState=!1,Ji=!0),c.memoizedState=m):(Ia(m,h)||(m=z0(),qn.lanes|=m,Fu|=m,c.baseState=!0),h)}function oG(c,h){var m=Ht;Ht=m!==0&&4>m?m:4,c(!0);var y=pw.transition;pw.transition={};try{c(!1),h()}finally{Ht=m,pw.transition=y}}function t4(){return ea().memoizedState}function lG(c,h,m){var y=lc(c);if(m={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null},n4(c))r4(h,m);else if(m=NP(c,h,m,y),m!==null){var S=Vi();Ma(m,c,y,S),i4(m,h,y)}}function cG(c,h,m){var y=lc(c),S={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null};if(n4(c))r4(h,S);else{var A=c.alternate;if(c.lanes===0&&(A===null||A.lanes===0)&&(A=h.lastRenderedReducer,A!==null))try{var G=h.lastRenderedState,J=A(G,m);if(S.hasEagerState=!0,S.eagerState=J,Ia(J,G)){var ie=h.interleaved;ie===null?(S.next=S,uw(h)):(S.next=ie.next,ie.next=S),h.interleaved=S;return}}catch{}m=NP(c,h,S,y),m!==null&&(S=Vi(),Ma(m,c,y,S),i4(m,h,y))}}function n4(c){var h=c.alternate;return c===qn||h!==null&&h===qn}function r4(c,h){gg=e1=!0;var m=c.pending;m===null?h.next=h:(h.next=m.next,m.next=h),c.pending=h}function i4(c,h,m){if((m&4194240)!==0){var y=h.lanes;y&=c.pendingLanes,m|=y,h.lanes=m,W0(c,m)}}var r1={readContext:Js,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},uG={readContext:Js,useCallback:function(c,h){return yo().memoizedState=[c,h===void 0?null:h],c},useContext:Js,useEffect:KP,useImperativeHandle:function(c,h,m){return m=m!=null?m.concat([c]):null,t1(4194308,4,qP.bind(null,h,c),m)},useLayoutEffect:function(c,h){return t1(4194308,4,c,h)},useInsertionEffect:function(c,h){return t1(4,2,c,h)},useMemo:function(c,h){var m=yo();return h=h===void 0?null:h,c=c(),m.memoizedState=[c,h],c},useReducer:function(c,h,m){var y=yo();return h=m!==void 0?m(h):h,y.memoizedState=y.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},y.queue=c,c=c.dispatch=lG.bind(null,qn,c),[y.memoizedState,c]},useRef:function(c){var h=yo();return c={current:c},h.memoizedState=c},useState:WP,useDebugValue:Sw,useDeferredValue:function(c){return yo().memoizedState=c},useTransition:function(){var c=WP(!1),h=c[0];return c=oG.bind(null,c[1]),yo().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,m){var y=qn,S=yo();if(Un){if(m===void 0)throw Error(t(407));m=m()}else{if(m=h(),Ur===null)throw Error(t(349));(Du&30)!==0||GP(y,h,m)}S.memoizedState=m;var A={value:m,getSnapshot:h};return S.queue=A,KP(UP.bind(null,y,A,c),[c]),y.flags|=2048,_g(9,BP.bind(null,y,A,m,h),void 0,null),m},useId:function(){var c=yo(),h=Ur.identifierPrefix;if(Un){var m=rl,y=nl;m=(y&~(1<<32-Yn(y)-1)).toString(32)+m,h=":"+h+"R"+m,m=mg++,0<m&&(h+="H"+m.toString(32)),h+=":"}else m=aG++,h=":"+h+"r"+m.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},hG={readContext:Js,useCallback:QP,useContext:Js,useEffect:ww,useImperativeHandle:ZP,useInsertionEffect:YP,useLayoutEffect:XP,useMemo:JP,useReducer:vw,useRef:HP,useState:function(){return vw(pg)},useDebugValue:Sw,useDeferredValue:function(c){var h=ea();return e4(h,Pr.memoizedState,c)},useTransition:function(){var c=vw(pg)[0],h=ea().memoizedState;return[c,h]},useMutableSource:VP,useSyncExternalStore:jP,useId:t4,unstable_isNewReconciler:!1},fG={readContext:Js,useCallback:QP,useContext:Js,useEffect:ww,useImperativeHandle:ZP,useInsertionEffect:YP,useLayoutEffect:XP,useMemo:JP,useReducer:Ew,useRef:HP,useState:function(){return Ew(pg)},useDebugValue:Sw,useDeferredValue:function(c){var h=ea();return Pr===null?h.memoizedState=c:e4(h,Pr.memoizedState,c)},useTransition:function(){var c=Ew(pg)[0],h=ea().memoizedState;return[c,h]},useMutableSource:VP,useSyncExternalStore:jP,useId:t4,unstable_isNewReconciler:!1};function Ra(c,h){if(c&&c.defaultProps){h=Ie({},h),c=c.defaultProps;for(var m in c)h[m]===void 0&&(h[m]=c[m]);return h}return h}function Tw(c,h,m,y){h=c.memoizedState,m=m(y,h),m=m==null?h:Ie({},h,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var i1={isMounted:function(c){return(c=c._reactInternals)?Q(c)===c:!1},enqueueSetState:function(c,h,m){c=c._reactInternals;var y=Vi(),S=lc(c),A=sl(y,S);A.payload=h,m!=null&&(A.callback=m),h=ic(c,A,S),h!==null&&(Ma(h,c,S,y),q_(h,c,S))},enqueueReplaceState:function(c,h,m){c=c._reactInternals;var y=Vi(),S=lc(c),A=sl(y,S);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=ic(c,A,S),h!==null&&(Ma(h,c,S,y),q_(h,c,S))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var m=Vi(),y=lc(c),S=sl(m,y);S.tag=2,h!=null&&(S.callback=h),h=ic(c,S,y),h!==null&&(Ma(h,c,y,m),q_(h,c,y))}};function s4(c,h,m,y,S,A,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,A,G):h.prototype&&h.prototype.isPureReactComponent?!rg(m,y)||!rg(S,A):!0}function a4(c,h,m){var y=!1,S=tc,A=h.contextType;return typeof A=="object"&&A!==null?A=Js(A):(S=Qi(h)?bu:xi.current,y=h.contextTypes,A=(y=y!=null)?Mf(c,S):tc),h=new h(m,A),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=i1,c.stateNode=h,h._reactInternals=c,y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=A),h}function o4(c,h,m,y){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,y),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,y),h.state!==c&&i1.enqueueReplaceState(h,h.state,null)}function Iw(c,h,m,y){var S=c.stateNode;S.props=m,S.state=c.memoizedState,S.refs={},hw(c);var A=h.contextType;typeof A=="object"&&A!==null?S.context=Js(A):(A=Qi(h)?bu:xi.current,S.context=Mf(c,A)),S.state=c.memoizedState,A=h.getDerivedStateFromProps,typeof A=="function"&&(Tw(c,h,A,m),S.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(h=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),h!==S.state&&i1.enqueueReplaceState(S,S.state,null),Z_(c,m,S,y),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308)}function Vf(c,h){try{var m="",y=h;do m+=ee(y),y=y.return;while(y);var S=m}catch(A){S=`
Error generating stack: `+A.message+`
`+A.stack}return{value:c,source:h,stack:S,digest:null}}function Aw(c,h,m){return{value:c,source:null,stack:m??null,digest:h??null}}function Rw(c,h){try{console.error(h.value)}catch(m){setTimeout(function(){throw m})}}var dG=typeof WeakMap=="function"?WeakMap:Map;function l4(c,h,m){m=sl(-1,m),m.tag=3,m.payload={element:null};var y=h.value;return m.callback=function(){h1||(h1=!0,Uw=y),Rw(c,h)},m}function c4(c,h,m){m=sl(-1,m),m.tag=3;var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var S=h.value;m.payload=function(){return y(S)},m.callback=function(){Rw(c,h)}}var A=c.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){Rw(c,h),typeof y!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var G=h.stack;this.componentDidCatch(h.value,{componentStack:G!==null?G:""})}),m}function u4(c,h,m){var y=c.pingCache;if(y===null){y=c.pingCache=new dG;var S=new Set;y.set(h,S)}else S=y.get(h),S===void 0&&(S=new Set,y.set(h,S));S.has(m)||(S.add(m),c=RG.bind(null,c,h,m),h.then(c,c))}function h4(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function f4(c,h,m,y,S){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(h=sl(-1,1),h.tag=2,ic(m,h,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=S,c)}var gG=k.ReactCurrentOwner,Ji=!1;function Fi(c,h,m,y){h.child=c===null?kP(h,null,m,y):Lf(h,c.child,m,y)}function d4(c,h,m,y,S){m=m.render;var A=h.ref;return Df(h,S),y=yw(c,h,m,y,A,S),m=xw(),c!==null&&!Ji?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~S,al(c,h,S)):(Un&&m&&tw(h),h.flags|=1,Fi(c,h,y,S),h.child)}function g4(c,h,m,y,S){if(c===null){var A=m.type;return typeof A=="function"&&!Xw(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(h.tag=15,h.type=A,m4(c,h,A,y,S)):(c=_1(m.type,null,y,h,h.mode,S),c.ref=h.ref,c.return=h,h.child=c)}if(A=c.child,(c.lanes&S)===0){var G=A.memoizedProps;if(m=m.compare,m=m!==null?m:rg,m(G,y)&&c.ref===h.ref)return al(c,h,S)}return h.flags|=1,c=uc(A,y),c.ref=h.ref,c.return=h,h.child=c}function m4(c,h,m,y,S){if(c!==null){var A=c.memoizedProps;if(rg(A,y)&&c.ref===h.ref)if(Ji=!1,h.pendingProps=y=A,(c.lanes&S)!==0)(c.flags&131072)!==0&&(Ji=!0);else return h.lanes=c.lanes,al(c,h,S)}return Cw(c,h,m,y,S)}function p4(c,h,m){var y=h.pendingProps,S=y.children,A=c!==null?c.memoizedState:null;if(y.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(Gf,bs),bs|=m;else{if((m&1073741824)===0)return c=A!==null?A.baseLanes|m:m,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,bn(Gf,bs),bs|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=A!==null?A.baseLanes:m,bn(Gf,bs),bs|=y}else A!==null?(y=A.baseLanes|m,h.memoizedState=null):y=m,bn(Gf,bs),bs|=y;return Fi(c,h,S,m),h.child}function _4(c,h){var m=h.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(h.flags|=512,h.flags|=2097152)}function Cw(c,h,m,y,S){var A=Qi(m)?bu:xi.current;return A=Mf(h,A),Df(h,S),m=yw(c,h,m,y,A,S),y=xw(),c!==null&&!Ji?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~S,al(c,h,S)):(Un&&y&&tw(h),h.flags|=1,Fi(c,h,m,S),h.child)}function y4(c,h,m,y,S){if(Qi(m)){var A=!0;U_(h)}else A=!1;if(Df(h,S),h.stateNode===null)a1(c,h),a4(h,m,y),Iw(h,m,y,S),y=!0;else if(c===null){var G=h.stateNode,J=h.memoizedProps;G.props=J;var ie=G.context,Ee=m.contextType;typeof Ee=="object"&&Ee!==null?Ee=Js(Ee):(Ee=Qi(m)?bu:xi.current,Ee=Mf(h,Ee));var je=m.getDerivedStateFromProps,ze=typeof je=="function"||typeof G.getSnapshotBeforeUpdate=="function";ze||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==y||ie!==Ee)&&o4(h,G,y,Ee),rc=!1;var Fe=h.memoizedState;G.state=Fe,Z_(h,y,G,S),ie=h.memoizedState,J!==y||Fe!==ie||Zi.current||rc?(typeof je=="function"&&(Tw(h,m,je,y),ie=h.memoizedState),(J=rc||s4(h,m,J,y,Fe,ie,Ee))?(ze||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(h.flags|=4194308)):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=y,h.memoizedState=ie),G.props=y,G.state=ie,G.context=Ee,y=J):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),y=!1)}else{G=h.stateNode,LP(c,h),J=h.memoizedProps,Ee=h.type===h.elementType?J:Ra(h.type,J),G.props=Ee,ze=h.pendingProps,Fe=G.context,ie=m.contextType,typeof ie=="object"&&ie!==null?ie=Js(ie):(ie=Qi(m)?bu:xi.current,ie=Mf(h,ie));var at=m.getDerivedStateFromProps;(je=typeof at=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==ze||Fe!==ie)&&o4(h,G,y,ie),rc=!1,Fe=h.memoizedState,G.state=Fe,Z_(h,y,G,S);var ft=h.memoizedState;J!==ze||Fe!==ft||Zi.current||rc?(typeof at=="function"&&(Tw(h,m,at,y),ft=h.memoizedState),(Ee=rc||s4(h,m,Ee,y,Fe,ft,ie)||!1)?(je||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(y,ft,ie),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(y,ft,ie)),typeof G.componentDidUpdate=="function"&&(h.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof G.componentDidUpdate!="function"||J===c.memoizedProps&&Fe===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&Fe===c.memoizedState||(h.flags|=1024),h.memoizedProps=y,h.memoizedState=ft),G.props=y,G.state=ft,G.context=ie,y=Ee):(typeof G.componentDidUpdate!="function"||J===c.memoizedProps&&Fe===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&Fe===c.memoizedState||(h.flags|=1024),y=!1)}return Pw(c,h,m,y,A,S)}function Pw(c,h,m,y,S,A){_4(c,h);var G=(h.flags&128)!==0;if(!y&&!G)return S&&SP(h,m,!1),al(c,h,A);y=h.stateNode,gG.current=h;var J=G&&typeof m.getDerivedStateFromError!="function"?null:y.render();return h.flags|=1,c!==null&&G?(h.child=Lf(h,c.child,null,A),h.child=Lf(h,null,J,A)):Fi(c,h,J,A),h.memoizedState=y.state,S&&SP(h,m,!0),h.child}function x4(c){var h=c.stateNode;h.pendingContext?EP(c,h.pendingContext,h.pendingContext!==h.context):h.context&&EP(c,h.context,!1),fw(c,h.containerInfo)}function v4(c,h,m,y,S){return Nf(),sw(S),h.flags|=256,Fi(c,h,m,y),h.child}var Mw={dehydrated:null,treeContext:null,retryLane:0};function bw(c){return{baseLanes:c,cachePool:null,transitions:null}}function E4(c,h,m){var y=h.pendingProps,S=Xn.current,A=!1,G=(h.flags&128)!==0,J;if((J=G)||(J=c!==null&&c.memoizedState===null?!1:(S&2)!==0),J?(A=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(S|=1),bn(Xn,S&1),c===null)return iw(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(G=y.children,c=y.fallback,A?(y=h.mode,A=h.child,G={mode:"hidden",children:G},(y&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=G):A=y1(G,y,0,null),c=Bu(c,y,m,null),A.return=h,c.return=h,A.sibling=c,h.child=A,h.child.memoizedState=bw(m),h.memoizedState=Mw,c):kw(h,G));if(S=c.memoizedState,S!==null&&(J=S.dehydrated,J!==null))return mG(c,h,G,y,J,S,m);if(A){A=y.fallback,G=h.mode,S=c.child,J=S.sibling;var ie={mode:"hidden",children:y.children};return(G&1)===0&&h.child!==S?(y=h.child,y.childLanes=0,y.pendingProps=ie,h.deletions=null):(y=uc(S,ie),y.subtreeFlags=S.subtreeFlags&14680064),J!==null?A=uc(J,A):(A=Bu(A,G,m,null),A.flags|=2),A.return=h,y.return=h,y.sibling=A,h.child=y,y=A,A=h.child,G=c.child.memoizedState,G=G===null?bw(m):{baseLanes:G.baseLanes|m,cachePool:null,transitions:G.transitions},A.memoizedState=G,A.childLanes=c.childLanes&~m,h.memoizedState=Mw,y}return A=c.child,c=A.sibling,y=uc(A,{mode:"visible",children:y.children}),(h.mode&1)===0&&(y.lanes=m),y.return=h,y.sibling=null,c!==null&&(m=h.deletions,m===null?(h.deletions=[c],h.flags|=16):m.push(c)),h.child=y,h.memoizedState=null,y}function kw(c,h){return h=y1({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function s1(c,h,m,y){return y!==null&&sw(y),Lf(h,c.child,null,m),c=kw(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function mG(c,h,m,y,S,A,G){if(m)return h.flags&256?(h.flags&=-257,y=Aw(Error(t(422))),s1(c,h,G,y)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(A=y.fallback,S=h.mode,y=y1({mode:"visible",children:y.children},S,0,null),A=Bu(A,S,G,null),A.flags|=2,y.return=h,A.return=h,y.sibling=A,h.child=y,(h.mode&1)!==0&&Lf(h,c.child,null,G),h.child.memoizedState=bw(G),h.memoizedState=Mw,A);if((h.mode&1)===0)return s1(c,h,G,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var J=y.dgst;return y=J,A=Error(t(419)),y=Aw(A,y,void 0),s1(c,h,G,y)}if(J=(G&c.childLanes)!==0,Ji||J){if(y=Ur,y!==null){switch(G&-G){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|G))!==0?0:S,S!==0&&S!==A.retryLane&&(A.retryLane=S,il(c,S),Ma(y,c,S,-1))}return Yw(),y=Aw(Error(t(421))),s1(c,h,G,y)}return S.data==="$?"?(h.flags|=128,h.child=c.child,h=CG.bind(null,c),S._reactRetry=h,null):(c=A.treeContext,Ms=Jl(S.nextSibling),Ps=h,Un=!0,Aa=null,c!==null&&(Zs[Qs++]=nl,Zs[Qs++]=rl,Zs[Qs++]=ku,nl=c.id,rl=c.overflow,ku=h),h=kw(h,y.children),h.flags|=4096,h)}function w4(c,h,m){c.lanes|=h;var y=c.alternate;y!==null&&(y.lanes|=h),cw(c.return,h,m)}function Nw(c,h,m,y,S){var A=c.memoizedState;A===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:S}:(A.isBackwards=h,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=m,A.tailMode=S)}function S4(c,h,m){var y=h.pendingProps,S=y.revealOrder,A=y.tail;if(Fi(c,h,y.children,m),y=Xn.current,(y&2)!==0)y=y&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&w4(c,m,h);else if(c.tag===19)w4(c,m,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}if(bn(Xn,y),(h.mode&1)===0)h.memoizedState=null;else switch(S){case"forwards":for(m=h.child,S=null;m!==null;)c=m.alternate,c!==null&&Q_(c)===null&&(S=m),m=m.sibling;m=S,m===null?(S=h.child,h.child=null):(S=m.sibling,m.sibling=null),Nw(h,!1,S,m,A);break;case"backwards":for(m=null,S=h.child,h.child=null;S!==null;){if(c=S.alternate,c!==null&&Q_(c)===null){h.child=S;break}c=S.sibling,S.sibling=m,m=S,S=c}Nw(h,!0,m,null,A);break;case"together":Nw(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function a1(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function al(c,h,m){if(c!==null&&(h.dependencies=c.dependencies),Fu|=h.lanes,(m&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(t(153));if(h.child!==null){for(c=h.child,m=uc(c,c.pendingProps),h.child=m,m.return=h;c.sibling!==null;)c=c.sibling,m=m.sibling=uc(c,c.pendingProps),m.return=h;m.sibling=null}return h.child}function pG(c,h,m){switch(h.tag){case 3:x4(h),Nf();break;case 5:FP(h);break;case 1:Qi(h.type)&&U_(h);break;case 4:fw(h,h.stateNode.containerInfo);break;case 10:var y=h.type._context,S=h.memoizedProps.value;bn(Y_,y._currentValue),y._currentValue=S;break;case 13:if(y=h.memoizedState,y!==null)return y.dehydrated!==null?(bn(Xn,Xn.current&1),h.flags|=128,null):(m&h.child.childLanes)!==0?E4(c,h,m):(bn(Xn,Xn.current&1),c=al(c,h,m),c!==null?c.sibling:null);bn(Xn,Xn.current&1);break;case 19:if(y=(m&h.childLanes)!==0,(c.flags&128)!==0){if(y)return S4(c,h,m);h.flags|=128}if(S=h.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),bn(Xn,Xn.current),y)break;return null;case 22:case 23:return h.lanes=0,p4(c,h,m)}return al(c,h,m)}var T4,Lw,I4,A4;T4=function(c,h){for(var m=h.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Lw=function(){},I4=function(c,h,m,y){var S=c.memoizedProps;if(S!==y){c=h.stateNode,Ou(_o.current);var A=null;switch(m){case"input":S=He(c,S),y=He(c,y),A=[];break;case"select":S=Ie({},S,{value:void 0}),y=Ie({},y,{value:void 0}),A=[];break;case"textarea":S=Nn(c,S),y=Nn(c,y),A=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(c.onclick=j_)}ei(m,y);var G;m=null;for(Ee in S)if(!y.hasOwnProperty(Ee)&&S.hasOwnProperty(Ee)&&S[Ee]!=null)if(Ee==="style"){var J=S[Ee];for(G in J)J.hasOwnProperty(G)&&(m||(m={}),m[G]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(i.hasOwnProperty(Ee)?A||(A=[]):(A=A||[]).push(Ee,null));for(Ee in y){var ie=y[Ee];if(J=S?.[Ee],y.hasOwnProperty(Ee)&&ie!==J&&(ie!=null||J!=null))if(Ee==="style")if(J){for(G in J)!J.hasOwnProperty(G)||ie&&ie.hasOwnProperty(G)||(m||(m={}),m[G]="");for(G in ie)ie.hasOwnProperty(G)&&J[G]!==ie[G]&&(m||(m={}),m[G]=ie[G])}else m||(A||(A=[]),A.push(Ee,m)),m=ie;else Ee==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,J=J?J.__html:void 0,ie!=null&&J!==ie&&(A=A||[]).push(Ee,ie)):Ee==="children"?typeof ie!="string"&&typeof ie!="number"||(A=A||[]).push(Ee,""+ie):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ee)?(ie!=null&&Ee==="onScroll"&&Ln("scroll",c),A||J===ie||(A=[])):(A=A||[]).push(Ee,ie))}m&&(A=A||[]).push("style",m);var Ee=A;(h.updateQueue=Ee)&&(h.flags|=4)}},A4=function(c,h,m,y){m!==y&&(h.flags|=4)};function yg(c,h){if(!Un)switch(c.tailMode){case"hidden":h=c.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function Ei(c){var h=c.alternate!==null&&c.alternate.child===c.child,m=0,y=0;if(h)for(var S=c.child;S!==null;)m|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)m|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=y,c.childLanes=m,h}function _G(c,h,m){var y=h.pendingProps;switch(nw(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ei(h),null;case 1:return Qi(h.type)&&B_(),Ei(h),null;case 3:return y=h.stateNode,Ff(),On(Zi),On(xi),mw(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(H_(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Aa!==null&&(Ww(Aa),Aa=null))),Lw(c,h),Ei(h),null;case 5:dw(h);var S=Ou(dg.current);if(m=h.type,c!==null&&h.stateNode!=null)I4(c,h,m,y,S),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!y){if(h.stateNode===null)throw Error(t(166));return Ei(h),null}if(c=Ou(_o.current),H_(h)){y=h.stateNode,m=h.type;var A=h.memoizedProps;switch(y[po]=h,y[lg]=A,c=(h.mode&1)!==0,m){case"dialog":Ln("cancel",y),Ln("close",y);break;case"iframe":case"object":case"embed":Ln("load",y);break;case"video":case"audio":for(S=0;S<sg.length;S++)Ln(sg[S],y);break;case"source":Ln("error",y);break;case"img":case"image":case"link":Ln("error",y),Ln("load",y);break;case"details":Ln("toggle",y);break;case"input":ue(y,A),Ln("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!A.multiple},Ln("invalid",y);break;case"textarea":rn(y,A),Ln("invalid",y)}ei(m,A),S=null;for(var G in A)if(A.hasOwnProperty(G)){var J=A[G];G==="children"?typeof J=="string"?y.textContent!==J&&(A.suppressHydrationWarning!==!0&&V_(y.textContent,J,c),S=["children",J]):typeof J=="number"&&y.textContent!==""+J&&(A.suppressHydrationWarning!==!0&&V_(y.textContent,J,c),S=["children",""+J]):i.hasOwnProperty(G)&&J!=null&&G==="onScroll"&&Ln("scroll",y)}switch(m){case"input":D(y),ot(y,A,!0);break;case"textarea":D(y),Jr(y);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(y.onclick=j_)}y=S,h.updateQueue=y,y!==null&&(h.flags|=4)}else{G=S.nodeType===9?S:S.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Yi(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof y.is=="string"?c=G.createElement(m,{is:y.is}):(c=G.createElement(m),m==="select"&&(G=c,y.multiple?G.multiple=!0:y.size&&(G.size=y.size))):c=G.createElementNS(c,m),c[po]=h,c[lg]=y,T4(c,h,!1,!1),h.stateNode=c;e:{switch(G=wa(m,y),m){case"dialog":Ln("cancel",c),Ln("close",c),S=y;break;case"iframe":case"object":case"embed":Ln("load",c),S=y;break;case"video":case"audio":for(S=0;S<sg.length;S++)Ln(sg[S],c);S=y;break;case"source":Ln("error",c),S=y;break;case"img":case"image":case"link":Ln("error",c),Ln("load",c),S=y;break;case"details":Ln("toggle",c),S=y;break;case"input":ue(c,y),S=He(c,y),Ln("invalid",c);break;case"option":S=y;break;case"select":c._wrapperState={wasMultiple:!!y.multiple},S=Ie({},y,{value:void 0}),Ln("invalid",c);break;case"textarea":rn(c,y),S=Nn(c,y),Ln("invalid",c);break;default:S=y}ei(m,S),J=S;for(A in J)if(J.hasOwnProperty(A)){var ie=J[A];A==="style"?Ys(c,ie):A==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&Ho(c,ie)):A==="children"?typeof ie=="string"?(m!=="textarea"||ie!=="")&&ys(c,ie):typeof ie=="number"&&ys(c,""+ie):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?ie!=null&&A==="onScroll"&&Ln("scroll",c):ie!=null&&M(c,A,ie,G))}switch(m){case"input":D(c),ot(c,y,!1);break;case"textarea":D(c),Jr(c);break;case"option":y.value!=null&&c.setAttribute("value",""+Ne(y.value));break;case"select":c.multiple=!!y.multiple,A=y.value,A!=null?Dt(c,!!y.multiple,A,!1):y.defaultValue!=null&&Dt(c,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(c.onclick=j_)}switch(m){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ei(h),null;case 6:if(c&&h.stateNode!=null)A4(c,h,c.memoizedProps,y);else{if(typeof y!="string"&&h.stateNode===null)throw Error(t(166));if(m=Ou(dg.current),Ou(_o.current),H_(h)){if(y=h.stateNode,m=h.memoizedProps,y[po]=h,(A=y.nodeValue!==m)&&(c=Ps,c!==null))switch(c.tag){case 3:V_(y.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&V_(y.nodeValue,m,(c.mode&1)!==0)}A&&(h.flags|=4)}else y=(m.nodeType===9?m:m.ownerDocument).createTextNode(y),y[po]=h,h.stateNode=y}return Ei(h),null;case 13:if(On(Xn),y=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Un&&Ms!==null&&(h.mode&1)!==0&&(h.flags&128)===0)PP(),Nf(),h.flags|=98560,A=!1;else if(A=H_(h),y!==null&&y.dehydrated!==null){if(c===null){if(!A)throw Error(t(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(t(317));A[po]=h}else Nf(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ei(h),A=!1}else Aa!==null&&(Ww(Aa),Aa=null),A=!0;if(!A)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=m,h):(y=y!==null,y!==(c!==null&&c.memoizedState!==null)&&y&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(Xn.current&1)!==0?Mr===0&&(Mr=3):Yw())),h.updateQueue!==null&&(h.flags|=4),Ei(h),null);case 4:return Ff(),Lw(c,h),c===null&&ag(h.stateNode.containerInfo),Ei(h),null;case 10:return lw(h.type._context),Ei(h),null;case 17:return Qi(h.type)&&B_(),Ei(h),null;case 19:if(On(Xn),A=h.memoizedState,A===null)return Ei(h),null;if(y=(h.flags&128)!==0,G=A.rendering,G===null)if(y)yg(A,!1);else{if(Mr!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(G=Q_(c),G!==null){for(h.flags|=128,yg(A,!1),y=G.updateQueue,y!==null&&(h.updateQueue=y,h.flags|=4),h.subtreeFlags=0,y=m,m=h.child;m!==null;)A=m,c=y,A.flags&=14680066,G=A.alternate,G===null?(A.childLanes=0,A.lanes=c,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=G.childLanes,A.lanes=G.lanes,A.child=G.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=G.memoizedProps,A.memoizedState=G.memoizedState,A.updateQueue=G.updateQueue,A.type=G.type,c=G.dependencies,A.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return bn(Xn,Xn.current&1|2),h.child}c=c.sibling}A.tail!==null&&Ue()>Bf&&(h.flags|=128,y=!0,yg(A,!1),h.lanes=4194304)}else{if(!y)if(c=Q_(G),c!==null){if(h.flags|=128,y=!0,m=c.updateQueue,m!==null&&(h.updateQueue=m,h.flags|=4),yg(A,!0),A.tail===null&&A.tailMode==="hidden"&&!G.alternate&&!Un)return Ei(h),null}else 2*Ue()-A.renderingStartTime>Bf&&m!==1073741824&&(h.flags|=128,y=!0,yg(A,!1),h.lanes=4194304);A.isBackwards?(G.sibling=h.child,h.child=G):(m=A.last,m!==null?m.sibling=G:h.child=G,A.last=G)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=Ue(),h.sibling=null,m=Xn.current,bn(Xn,y?m&1|2:m&1),h):(Ei(h),null);case 22:case 23:return Kw(),y=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==y&&(h.flags|=8192),y&&(h.mode&1)!==0?(bs&1073741824)!==0&&(Ei(h),h.subtreeFlags&6&&(h.flags|=8192)):Ei(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function yG(c,h){switch(nw(h),h.tag){case 1:return Qi(h.type)&&B_(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Ff(),On(Zi),On(xi),mw(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return dw(h),null;case 13:if(On(Xn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(t(340));Nf()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return On(Xn),null;case 4:return Ff(),null;case 10:return lw(h.type._context),null;case 22:case 23:return Kw(),null;case 24:return null;default:return null}}var o1=!1,wi=!1,xG=typeof WeakSet=="function"?WeakSet:Set,ct=null;function jf(c,h){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(y){tr(c,h,y)}else m.current=null}function Ow(c,h,m){try{m()}catch(y){tr(c,h,y)}}var R4=!1;function vG(c,h){if(KE=Zo,c=sP(),jE(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var S=y.anchorOffset,A=y.focusNode;y=y.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var G=0,J=-1,ie=-1,Ee=0,je=0,ze=c,Fe=null;t:for(;;){for(var at;ze!==m||S!==0&&ze.nodeType!==3||(J=G+S),ze!==A||y!==0&&ze.nodeType!==3||(ie=G+y),ze.nodeType===3&&(G+=ze.nodeValue.length),(at=ze.firstChild)!==null;)Fe=ze,ze=at;for(;;){if(ze===c)break t;if(Fe===m&&++Ee===S&&(J=G),Fe===A&&++je===y&&(ie=G),(at=ze.nextSibling)!==null)break;ze=Fe,Fe=ze.parentNode}ze=at}m=J===-1||ie===-1?null:{start:J,end:ie}}else m=null}m=m||{start:0,end:0}}else m=null;for(YE={focusedElem:c,selectionRange:m},Zo=!1,ct=h;ct!==null;)if(h=ct,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,ct=c;else for(;ct!==null;){h=ct;try{var ft=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var gt=ft.memoizedProps,hr=ft.memoizedState,de=h.stateNode,oe=de.getSnapshotBeforeUpdate(h.elementType===h.type?gt:Ra(h.type,gt),hr);de.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ye=h.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ke){tr(h,h.return,Ke)}if(c=h.sibling,c!==null){c.return=h.return,ct=c;break}ct=h.return}return ft=R4,R4=!1,ft}function xg(c,h,m){var y=h.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&c)===c){var A=S.destroy;S.destroy=void 0,A!==void 0&&Ow(h,m,A)}S=S.next}while(S!==y)}}function l1(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&c)===c){var y=m.create;m.destroy=y()}m=m.next}while(m!==h)}}function Dw(c){var h=c.ref;if(h!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof h=="function"?h(c):h.current=c}}function C4(c){var h=c.alternate;h!==null&&(c.alternate=null,C4(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[po],delete h[lg],delete h[QE],delete h[nG],delete h[rG])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function P4(c){return c.tag===5||c.tag===3||c.tag===4}function M4(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||P4(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Fw(c,h,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,h?m.nodeType===8?m.parentNode.insertBefore(c,h):m.insertBefore(c,h):(m.nodeType===8?(h=m.parentNode,h.insertBefore(c,m)):(h=m,h.appendChild(c)),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=j_));else if(y!==4&&(c=c.child,c!==null))for(Fw(c,h,m),c=c.sibling;c!==null;)Fw(c,h,m),c=c.sibling}function Vw(c,h,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,h?m.insertBefore(c,h):m.appendChild(c);else if(y!==4&&(c=c.child,c!==null))for(Vw(c,h,m),c=c.sibling;c!==null;)Vw(c,h,m),c=c.sibling}var ii=null,Ca=!1;function sc(c,h,m){for(m=m.child;m!==null;)b4(c,h,m),m=m.sibling}function b4(c,h,m){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Ts,m)}catch{}switch(m.tag){case 5:wi||jf(m,h);case 6:var y=ii,S=Ca;ii=null,sc(c,h,m),ii=y,Ca=S,ii!==null&&(Ca?(c=ii,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):ii.removeChild(m.stateNode));break;case 18:ii!==null&&(Ca?(c=ii,m=m.stateNode,c.nodeType===8?ZE(c.parentNode,m):c.nodeType===1&&ZE(c,m),Xl(c)):ZE(ii,m.stateNode));break;case 4:y=ii,S=Ca,ii=m.stateNode.containerInfo,Ca=!0,sc(c,h,m),ii=y,Ca=S;break;case 0:case 11:case 14:case 15:if(!wi&&(y=m.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var A=S,G=A.destroy;A=A.tag,G!==void 0&&((A&2)!==0||(A&4)!==0)&&Ow(m,h,G),S=S.next}while(S!==y)}sc(c,h,m);break;case 1:if(!wi&&(jf(m,h),y=m.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=m.memoizedProps,y.state=m.memoizedState,y.componentWillUnmount()}catch(J){tr(m,h,J)}sc(c,h,m);break;case 21:sc(c,h,m);break;case 22:m.mode&1?(wi=(y=wi)||m.memoizedState!==null,sc(c,h,m),wi=y):sc(c,h,m);break;default:sc(c,h,m)}}function k4(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new xG),h.forEach(function(y){var S=PG.bind(null,c,y);m.has(y)||(m.add(y),y.then(S,S))})}}function Pa(c,h){var m=h.deletions;if(m!==null)for(var y=0;y<m.length;y++){var S=m[y];try{var A=c,G=h,J=G;e:for(;J!==null;){switch(J.tag){case 5:ii=J.stateNode,Ca=!1;break e;case 3:ii=J.stateNode.containerInfo,Ca=!0;break e;case 4:ii=J.stateNode.containerInfo,Ca=!0;break e}J=J.return}if(ii===null)throw Error(t(160));b4(A,G,S),ii=null,Ca=!1;var ie=S.alternate;ie!==null&&(ie.return=null),S.return=null}catch(Ee){tr(S,h,Ee)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)N4(h,c),h=h.sibling}function N4(c,h){var m=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Pa(h,c),xo(c),y&4){try{xg(3,c,c.return),l1(3,c)}catch(gt){tr(c,c.return,gt)}try{xg(5,c,c.return)}catch(gt){tr(c,c.return,gt)}}break;case 1:Pa(h,c),xo(c),y&512&&m!==null&&jf(m,m.return);break;case 5:if(Pa(h,c),xo(c),y&512&&m!==null&&jf(m,m.return),c.flags&32){var S=c.stateNode;try{ys(S,"")}catch(gt){tr(c,c.return,gt)}}if(y&4&&(S=c.stateNode,S!=null)){var A=c.memoizedProps,G=m!==null?m.memoizedProps:A,J=c.type,ie=c.updateQueue;if(c.updateQueue=null,ie!==null)try{J==="input"&&A.type==="radio"&&A.name!=null&&W(S,A),wa(J,G);var Ee=wa(J,A);for(G=0;G<ie.length;G+=2){var je=ie[G],ze=ie[G+1];je==="style"?Ys(S,ze):je==="dangerouslySetInnerHTML"?Ho(S,ze):je==="children"?ys(S,ze):M(S,je,ze,Ee)}switch(J){case"input":ae(S,A);break;case"textarea":Ir(S,A);break;case"select":var Fe=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!A.multiple;var at=A.value;at!=null?Dt(S,!!A.multiple,at,!1):Fe!==!!A.multiple&&(A.defaultValue!=null?Dt(S,!!A.multiple,A.defaultValue,!0):Dt(S,!!A.multiple,A.multiple?[]:"",!1))}S[lg]=A}catch(gt){tr(c,c.return,gt)}}break;case 6:if(Pa(h,c),xo(c),y&4){if(c.stateNode===null)throw Error(t(162));S=c.stateNode,A=c.memoizedProps;try{S.nodeValue=A}catch(gt){tr(c,c.return,gt)}}break;case 3:if(Pa(h,c),xo(c),y&4&&m!==null&&m.memoizedState.isDehydrated)try{Xl(h.containerInfo)}catch(gt){tr(c,c.return,gt)}break;case 4:Pa(h,c),xo(c);break;case 13:Pa(h,c),xo(c),S=c.child,S.flags&8192&&(A=S.memoizedState!==null,S.stateNode.isHidden=A,!A||S.alternate!==null&&S.alternate.memoizedState!==null||(Bw=Ue())),y&4&&k4(c);break;case 22:if(je=m!==null&&m.memoizedState!==null,c.mode&1?(wi=(Ee=wi)||je,Pa(h,c),wi=Ee):Pa(h,c),xo(c),y&8192){if(Ee=c.memoizedState!==null,(c.stateNode.isHidden=Ee)&&!je&&(c.mode&1)!==0)for(ct=c,je=c.child;je!==null;){for(ze=ct=je;ct!==null;){switch(Fe=ct,at=Fe.child,Fe.tag){case 0:case 11:case 14:case 15:xg(4,Fe,Fe.return);break;case 1:jf(Fe,Fe.return);var ft=Fe.stateNode;if(typeof ft.componentWillUnmount=="function"){y=Fe,m=Fe.return;try{h=y,ft.props=h.memoizedProps,ft.state=h.memoizedState,ft.componentWillUnmount()}catch(gt){tr(y,m,gt)}}break;case 5:jf(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){D4(ze);continue}}at!==null?(at.return=Fe,ct=at):D4(ze)}je=je.sibling}e:for(je=null,ze=c;;){if(ze.tag===5){if(je===null){je=ze;try{S=ze.stateNode,Ee?(A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(J=ze.stateNode,ie=ze.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,J.style.display=xs("display",G))}catch(gt){tr(c,c.return,gt)}}}else if(ze.tag===6){if(je===null)try{ze.stateNode.nodeValue=Ee?"":ze.memoizedProps}catch(gt){tr(c,c.return,gt)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===c)&&ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===c)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===c)break e;je===ze&&(je=null),ze=ze.return}je===ze&&(je=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:Pa(h,c),xo(c),y&4&&k4(c);break;case 21:break;default:Pa(h,c),xo(c)}}function xo(c){var h=c.flags;if(h&2){try{e:{for(var m=c.return;m!==null;){if(P4(m)){var y=m;break e}m=m.return}throw Error(t(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(ys(S,""),y.flags&=-33);var A=M4(c);Vw(c,A,S);break;case 3:case 4:var G=y.stateNode.containerInfo,J=M4(c);Fw(c,J,G);break;default:throw Error(t(161))}}catch(ie){tr(c,c.return,ie)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function EG(c,h,m){ct=c,L4(c)}function L4(c,h,m){for(var y=(c.mode&1)!==0;ct!==null;){var S=ct,A=S.child;if(S.tag===22&&y){var G=S.memoizedState!==null||o1;if(!G){var J=S.alternate,ie=J!==null&&J.memoizedState!==null||wi;J=o1;var Ee=wi;if(o1=G,(wi=ie)&&!Ee)for(ct=S;ct!==null;)G=ct,ie=G.child,G.tag===22&&G.memoizedState!==null?F4(S):ie!==null?(ie.return=G,ct=ie):F4(S);for(;A!==null;)ct=A,L4(A),A=A.sibling;ct=S,o1=J,wi=Ee}O4(c)}else(S.subtreeFlags&8772)!==0&&A!==null?(A.return=S,ct=A):O4(c)}}function O4(c){for(;ct!==null;){var h=ct;if((h.flags&8772)!==0){var m=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:wi||l1(5,h);break;case 1:var y=h.stateNode;if(h.flags&4&&!wi)if(m===null)y.componentDidMount();else{var S=h.elementType===h.type?m.memoizedProps:Ra(h.type,m.memoizedProps);y.componentDidUpdate(S,m.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var A=h.updateQueue;A!==null&&DP(h,A,y);break;case 3:var G=h.updateQueue;if(G!==null){if(m=null,h.child!==null)switch(h.child.tag){case 5:m=h.child.stateNode;break;case 1:m=h.child.stateNode}DP(h,G,m)}break;case 5:var J=h.stateNode;if(m===null&&h.flags&4){m=J;var ie=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&m.focus();break;case"img":ie.src&&(m.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Ee=h.alternate;if(Ee!==null){var je=Ee.memoizedState;if(je!==null){var ze=je.dehydrated;ze!==null&&Xl(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wi||h.flags&512&&Dw(h)}catch(Fe){tr(h,h.return,Fe)}}if(h===c){ct=null;break}if(m=h.sibling,m!==null){m.return=h.return,ct=m;break}ct=h.return}}function D4(c){for(;ct!==null;){var h=ct;if(h===c){ct=null;break}var m=h.sibling;if(m!==null){m.return=h.return,ct=m;break}ct=h.return}}function F4(c){for(;ct!==null;){var h=ct;try{switch(h.tag){case 0:case 11:case 15:var m=h.return;try{l1(4,h)}catch(ie){tr(h,m,ie)}break;case 1:var y=h.stateNode;if(typeof y.componentDidMount=="function"){var S=h.return;try{y.componentDidMount()}catch(ie){tr(h,S,ie)}}var A=h.return;try{Dw(h)}catch(ie){tr(h,A,ie)}break;case 5:var G=h.return;try{Dw(h)}catch(ie){tr(h,G,ie)}}}catch(ie){tr(h,h.return,ie)}if(h===c){ct=null;break}var J=h.sibling;if(J!==null){J.return=h.return,ct=J;break}ct=h.return}}var wG=Math.ceil,c1=k.ReactCurrentDispatcher,jw=k.ReactCurrentOwner,ta=k.ReactCurrentBatchConfig,qt=0,Ur=null,pr=null,si=0,bs=0,Gf=ec(0),Mr=0,vg=null,Fu=0,u1=0,Gw=0,Eg=null,es=null,Bw=0,Bf=1/0,ol=null,h1=!1,Uw=null,ac=null,f1=!1,oc=null,d1=0,wg=0,zw=null,g1=-1,m1=0;function Vi(){return(qt&6)!==0?Ue():g1!==-1?g1:g1=Ue()}function lc(c){return(c.mode&1)===0?1:(qt&2)!==0&&si!==0?si&-si:sG.transition!==null?(m1===0&&(m1=z0()),m1):(c=Ht,c!==0||(c=window.event,c=c===void 0?16:pf(c.type)),c)}function Ma(c,h,m,y){if(50<wg)throw wg=0,zw=null,Error(t(185));Iu(c,m,y),((qt&2)===0||c!==Ur)&&(c===Ur&&((qt&2)===0&&(u1|=m),Mr===4&&cc(c,si)),ts(c,y),m===1&&qt===0&&(h.mode&1)===0&&(Bf=Ue()+500,z_&&nc()))}function ts(c,h){var m=c.callbackNode;Tu(c,h);var y=Yo(c,c===Ur?si:0);if(y===0)m!==null&&Xe(m),c.callbackNode=null,c.callbackPriority=0;else if(h=y&-y,c.callbackPriority!==h){if(m!=null&&Xe(m),h===1)c.tag===0?iG(j4.bind(null,c)):TP(j4.bind(null,c)),eG(function(){(qt&6)===0&&nc()}),m=null;else{switch(so(y)){case 1:m=hn;break;case 4:m=_n;break;case 16:m=Bn;break;case 536870912:m=Xs;break;default:m=Bn}m=K4(m,V4.bind(null,c))}c.callbackPriority=h,c.callbackNode=m}}function V4(c,h){if(g1=-1,m1=0,(qt&6)!==0)throw Error(t(327));var m=c.callbackNode;if(Uf()&&c.callbackNode!==m)return null;var y=Yo(c,c===Ur?si:0);if(y===0)return null;if((y&30)!==0||(y&c.expiredLanes)!==0||h)h=p1(c,y);else{h=y;var S=qt;qt|=2;var A=B4();(Ur!==c||si!==h)&&(ol=null,Bf=Ue()+500,ju(c,h));do try{IG();break}catch(J){G4(c,J)}while(!0);ow(),c1.current=A,qt=S,pr!==null?h=0:(Ur=null,si=0,h=Mr)}if(h!==0){if(h===2&&(S=U0(c),S!==0&&(y=S,h=$w(c,S))),h===1)throw m=vg,ju(c,0),cc(c,y),ts(c,Ue()),m;if(h===6)cc(c,y);else{if(S=c.current.alternate,(y&30)===0&&!SG(S)&&(h=p1(c,y),h===2&&(A=U0(c),A!==0&&(y=A,h=$w(c,A))),h===1))throw m=vg,ju(c,0),cc(c,y),ts(c,Ue()),m;switch(c.finishedWork=S,c.finishedLanes=y,h){case 0:case 1:throw Error(t(345));case 2:Gu(c,es,ol);break;case 3:if(cc(c,y),(y&130023424)===y&&(h=Bw+500-Ue(),10<h)){if(Yo(c,0)!==0)break;if(S=c.suspendedLanes,(S&y)!==y){Vi(),c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=qE(Gu.bind(null,c,es,ol),h);break}Gu(c,es,ol);break;case 4:if(cc(c,y),(y&4194240)===y)break;for(h=c.eventTimes,S=-1;0<y;){var G=31-Yn(y);A=1<<G,G=h[G],G>S&&(S=G),y&=~A}if(y=S,y=Ue()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*wG(y/1960))-y,10<y){c.timeoutHandle=qE(Gu.bind(null,c,es,ol),y);break}Gu(c,es,ol);break;case 5:Gu(c,es,ol);break;default:throw Error(t(329))}}}return ts(c,Ue()),c.callbackNode===m?V4.bind(null,c):null}function $w(c,h){var m=Eg;return c.current.memoizedState.isDehydrated&&(ju(c,h).flags|=256),c=p1(c,h),c!==2&&(h=es,es=m,h!==null&&Ww(h)),c}function Ww(c){es===null?es=c:es.push.apply(es,c)}function SG(c){for(var h=c;;){if(h.flags&16384){var m=h.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var y=0;y<m.length;y++){var S=m[y],A=S.getSnapshot;S=S.value;try{if(!Ia(A(),S))return!1}catch{return!1}}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function cc(c,h){for(h&=~Gw,h&=~u1,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var m=31-Yn(h),y=1<<m;c[m]=-1,h&=~y}}function j4(c){if((qt&6)!==0)throw Error(t(327));Uf();var h=Yo(c,0);if((h&1)===0)return ts(c,Ue()),null;var m=p1(c,h);if(c.tag!==0&&m===2){var y=U0(c);y!==0&&(h=y,m=$w(c,y))}if(m===1)throw m=vg,ju(c,0),cc(c,h),ts(c,Ue()),m;if(m===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Gu(c,es,ol),ts(c,Ue()),null}function Hw(c,h){var m=qt;qt|=1;try{return c(h)}finally{qt=m,qt===0&&(Bf=Ue()+500,z_&&nc())}}function Vu(c){oc!==null&&oc.tag===0&&(qt&6)===0&&Uf();var h=qt;qt|=1;var m=ta.transition,y=Ht;try{if(ta.transition=null,Ht=1,c)return c()}finally{Ht=y,ta.transition=m,qt=h,(qt&6)===0&&nc()}}function Kw(){bs=Gf.current,On(Gf)}function ju(c,h){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,Jj(m)),pr!==null)for(m=pr.return;m!==null;){var y=m;switch(nw(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&B_();break;case 3:Ff(),On(Zi),On(xi),mw();break;case 5:dw(y);break;case 4:Ff();break;case 13:On(Xn);break;case 19:On(Xn);break;case 10:lw(y.type._context);break;case 22:case 23:Kw()}m=m.return}if(Ur=c,pr=c=uc(c.current,null),si=bs=h,Mr=0,vg=null,Gw=u1=Fu=0,es=Eg=null,Lu!==null){for(h=0;h<Lu.length;h++)if(m=Lu[h],y=m.interleaved,y!==null){m.interleaved=null;var S=y.next,A=m.pending;if(A!==null){var G=A.next;A.next=S,y.next=G}m.pending=y}Lu=null}return c}function G4(c,h){do{var m=pr;try{if(ow(),J_.current=r1,e1){for(var y=qn.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}e1=!1}if(Du=0,Br=Pr=qn=null,gg=!1,mg=0,jw.current=null,m===null||m.return===null){Mr=1,vg=h,pr=null;break}e:{var A=c,G=m.return,J=m,ie=h;if(h=si,J.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Ee=ie,je=J,ze=je.tag;if((je.mode&1)===0&&(ze===0||ze===11||ze===15)){var Fe=je.alternate;Fe?(je.updateQueue=Fe.updateQueue,je.memoizedState=Fe.memoizedState,je.lanes=Fe.lanes):(je.updateQueue=null,je.memoizedState=null)}var at=h4(G);if(at!==null){at.flags&=-257,f4(at,G,J,A,h),at.mode&1&&u4(A,Ee,h),h=at,ie=Ee;var ft=h.updateQueue;if(ft===null){var gt=new Set;gt.add(ie),h.updateQueue=gt}else ft.add(ie);break e}else{if((h&1)===0){u4(A,Ee,h),Yw();break e}ie=Error(t(426))}}else if(Un&&J.mode&1){var hr=h4(G);if(hr!==null){(hr.flags&65536)===0&&(hr.flags|=256),f4(hr,G,J,A,h),sw(Vf(ie,J));break e}}A=ie=Vf(ie,J),Mr!==4&&(Mr=2),Eg===null?Eg=[A]:Eg.push(A),A=G;do{switch(A.tag){case 3:A.flags|=65536,h&=-h,A.lanes|=h;var de=l4(A,ie,h);OP(A,de);break e;case 1:J=ie;var oe=A.type,ye=A.stateNode;if((A.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(ac===null||!ac.has(ye)))){A.flags|=65536,h&=-h,A.lanes|=h;var Ke=c4(A,J,h);OP(A,Ke);break e}}A=A.return}while(A!==null)}z4(m)}catch(pt){h=pt,pr===m&&m!==null&&(pr=m=m.return);continue}break}while(!0)}function B4(){var c=c1.current;return c1.current=r1,c===null?r1:c}function Yw(){(Mr===0||Mr===3||Mr===2)&&(Mr=4),Ur===null||(Fu&268435455)===0&&(u1&268435455)===0||cc(Ur,si)}function p1(c,h){var m=qt;qt|=2;var y=B4();(Ur!==c||si!==h)&&(ol=null,ju(c,h));do try{TG();break}catch(S){G4(c,S)}while(!0);if(ow(),qt=m,c1.current=y,pr!==null)throw Error(t(261));return Ur=null,si=0,Mr}function TG(){for(;pr!==null;)U4(pr)}function IG(){for(;pr!==null&&!it();)U4(pr)}function U4(c){var h=H4(c.alternate,c,bs);c.memoizedProps=c.pendingProps,h===null?z4(c):pr=h,jw.current=null}function z4(c){var h=c;do{var m=h.alternate;if(c=h.return,(h.flags&32768)===0){if(m=_G(m,h,bs),m!==null){pr=m;return}}else{if(m=yG(m,h),m!==null){m.flags&=32767,pr=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Mr=6,pr=null;return}}if(h=h.sibling,h!==null){pr=h;return}pr=h=c}while(h!==null);Mr===0&&(Mr=5)}function Gu(c,h,m){var y=Ht,S=ta.transition;try{ta.transition=null,Ht=1,AG(c,h,m,y)}finally{ta.transition=S,Ht=y}return null}function AG(c,h,m,y){do Uf();while(oc!==null);if((qt&6)!==0)throw Error(t(327));m=c.finishedWork;var S=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var A=m.lanes|m.childLanes;if(LE(c,A),c===Ur&&(pr=Ur=null,si=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||f1||(f1=!0,K4(Bn,function(){return Uf(),null})),A=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||A){A=ta.transition,ta.transition=null;var G=Ht;Ht=1;var J=qt;qt|=4,jw.current=null,vG(c,m),N4(m,c),Hj(YE),Zo=!!KE,YE=KE=null,c.current=m,EG(m),Be(),qt=J,Ht=G,ta.transition=A}else c.current=m;if(f1&&(f1=!1,oc=c,d1=S),A=c.pendingLanes,A===0&&(ac=null),Wl(m.stateNode),ts(c,Ue()),h!==null)for(y=c.onRecoverableError,m=0;m<h.length;m++)S=h[m],y(S.value,{componentStack:S.stack,digest:S.digest});if(h1)throw h1=!1,c=Uw,Uw=null,c;return(d1&1)!==0&&c.tag!==0&&Uf(),A=c.pendingLanes,(A&1)!==0?c===zw?wg++:(wg=0,zw=c):wg=0,nc(),null}function Uf(){if(oc!==null){var c=so(d1),h=ta.transition,m=Ht;try{if(ta.transition=null,Ht=16>c?16:c,oc===null)var y=!1;else{if(c=oc,oc=null,d1=0,(qt&6)!==0)throw Error(t(331));var S=qt;for(qt|=4,ct=c.current;ct!==null;){var A=ct,G=A.child;if((ct.flags&16)!==0){var J=A.deletions;if(J!==null){for(var ie=0;ie<J.length;ie++){var Ee=J[ie];for(ct=Ee;ct!==null;){var je=ct;switch(je.tag){case 0:case 11:case 15:xg(8,je,A)}var ze=je.child;if(ze!==null)ze.return=je,ct=ze;else for(;ct!==null;){je=ct;var Fe=je.sibling,at=je.return;if(C4(je),je===Ee){ct=null;break}if(Fe!==null){Fe.return=at,ct=Fe;break}ct=at}}}var ft=A.alternate;if(ft!==null){var gt=ft.child;if(gt!==null){ft.child=null;do{var hr=gt.sibling;gt.sibling=null,gt=hr}while(gt!==null)}}ct=A}}if((A.subtreeFlags&2064)!==0&&G!==null)G.return=A,ct=G;else e:for(;ct!==null;){if(A=ct,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:xg(9,A,A.return)}var de=A.sibling;if(de!==null){de.return=A.return,ct=de;break e}ct=A.return}}var oe=c.current;for(ct=oe;ct!==null;){G=ct;var ye=G.child;if((G.subtreeFlags&2064)!==0&&ye!==null)ye.return=G,ct=ye;else e:for(G=oe;ct!==null;){if(J=ct,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:l1(9,J)}}catch(pt){tr(J,J.return,pt)}if(J===G){ct=null;break e}var Ke=J.sibling;if(Ke!==null){Ke.return=J.return,ct=Ke;break e}ct=J.return}}if(qt=S,nc(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Ts,c)}catch{}y=!0}return y}finally{Ht=m,ta.transition=h}}return!1}function $4(c,h,m){h=Vf(m,h),h=l4(c,h,1),c=ic(c,h,1),h=Vi(),c!==null&&(Iu(c,1,h),ts(c,h))}function tr(c,h,m){if(c.tag===3)$4(c,c,m);else for(;h!==null;){if(h.tag===3){$4(h,c,m);break}else if(h.tag===1){var y=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ac===null||!ac.has(y))){c=Vf(m,c),c=c4(h,c,1),h=ic(h,c,1),c=Vi(),h!==null&&(Iu(h,1,c),ts(h,c));break}}h=h.return}}function RG(c,h,m){var y=c.pingCache;y!==null&&y.delete(h),h=Vi(),c.pingedLanes|=c.suspendedLanes&m,Ur===c&&(si&m)===m&&(Mr===4||Mr===3&&(si&130023424)===si&&500>Ue()-Bw?ju(c,0):Gw|=m),ts(c,h)}function W4(c,h){h===0&&((c.mode&1)===0?h=1:(h=Hl,Hl<<=1,(Hl&130023424)===0&&(Hl=4194304)));var m=Vi();c=il(c,h),c!==null&&(Iu(c,h,m),ts(c,m))}function CG(c){var h=c.memoizedState,m=0;h!==null&&(m=h.retryLane),W4(c,m)}function PG(c,h){var m=0;switch(c.tag){case 13:var y=c.stateNode,S=c.memoizedState;S!==null&&(m=S.retryLane);break;case 19:y=c.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(h),W4(c,m)}var H4;H4=function(c,h,m){if(c!==null)if(c.memoizedProps!==h.pendingProps||Zi.current)Ji=!0;else{if((c.lanes&m)===0&&(h.flags&128)===0)return Ji=!1,pG(c,h,m);Ji=(c.flags&131072)!==0}else Ji=!1,Un&&(h.flags&1048576)!==0&&IP(h,W_,h.index);switch(h.lanes=0,h.tag){case 2:var y=h.type;a1(c,h),c=h.pendingProps;var S=Mf(h,xi.current);Df(h,m),S=yw(null,h,y,c,S,m);var A=xw();return h.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Qi(y)?(A=!0,U_(h)):A=!1,h.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,hw(h),S.updater=i1,h.stateNode=S,S._reactInternals=h,Iw(h,y,c,m),h=Pw(null,h,y,!0,A,m)):(h.tag=0,Un&&A&&tw(h),Fi(null,h,S,m),h=h.child),h;case 16:y=h.elementType;e:{switch(a1(c,h),c=h.pendingProps,S=y._init,y=S(y._payload),h.type=y,S=h.tag=bG(y),c=Ra(y,c),S){case 0:h=Cw(null,h,y,c,m);break e;case 1:h=y4(null,h,y,c,m);break e;case 11:h=d4(null,h,y,c,m);break e;case 14:h=g4(null,h,y,Ra(y.type,c),m);break e}throw Error(t(306,y,""))}return h;case 0:return y=h.type,S=h.pendingProps,S=h.elementType===y?S:Ra(y,S),Cw(c,h,y,S,m);case 1:return y=h.type,S=h.pendingProps,S=h.elementType===y?S:Ra(y,S),y4(c,h,y,S,m);case 3:e:{if(x4(h),c===null)throw Error(t(387));y=h.pendingProps,A=h.memoizedState,S=A.element,LP(c,h),Z_(h,y,null,m);var G=h.memoizedState;if(y=G.element,A.isDehydrated)if(A={element:y,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},h.updateQueue.baseState=A,h.memoizedState=A,h.flags&256){S=Vf(Error(t(423)),h),h=v4(c,h,y,m,S);break e}else if(y!==S){S=Vf(Error(t(424)),h),h=v4(c,h,y,m,S);break e}else for(Ms=Jl(h.stateNode.containerInfo.firstChild),Ps=h,Un=!0,Aa=null,m=kP(h,null,y,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Nf(),y===S){h=al(c,h,m);break e}Fi(c,h,y,m)}h=h.child}return h;case 5:return FP(h),c===null&&iw(h),y=h.type,S=h.pendingProps,A=c!==null?c.memoizedProps:null,G=S.children,XE(y,S)?G=null:A!==null&&XE(y,A)&&(h.flags|=32),_4(c,h),Fi(c,h,G,m),h.child;case 6:return c===null&&iw(h),null;case 13:return E4(c,h,m);case 4:return fw(h,h.stateNode.containerInfo),y=h.pendingProps,c===null?h.child=Lf(h,null,y,m):Fi(c,h,y,m),h.child;case 11:return y=h.type,S=h.pendingProps,S=h.elementType===y?S:Ra(y,S),d4(c,h,y,S,m);case 7:return Fi(c,h,h.pendingProps,m),h.child;case 8:return Fi(c,h,h.pendingProps.children,m),h.child;case 12:return Fi(c,h,h.pendingProps.children,m),h.child;case 10:e:{if(y=h.type._context,S=h.pendingProps,A=h.memoizedProps,G=S.value,bn(Y_,y._currentValue),y._currentValue=G,A!==null)if(Ia(A.value,G)){if(A.children===S.children&&!Zi.current){h=al(c,h,m);break e}}else for(A=h.child,A!==null&&(A.return=h);A!==null;){var J=A.dependencies;if(J!==null){G=A.child;for(var ie=J.firstContext;ie!==null;){if(ie.context===y){if(A.tag===1){ie=sl(-1,m&-m),ie.tag=2;var Ee=A.updateQueue;if(Ee!==null){Ee=Ee.shared;var je=Ee.pending;je===null?ie.next=ie:(ie.next=je.next,je.next=ie),Ee.pending=ie}}A.lanes|=m,ie=A.alternate,ie!==null&&(ie.lanes|=m),cw(A.return,m,h),J.lanes|=m;break}ie=ie.next}}else if(A.tag===10)G=A.type===h.type?null:A.child;else if(A.tag===18){if(G=A.return,G===null)throw Error(t(341));G.lanes|=m,J=G.alternate,J!==null&&(J.lanes|=m),cw(G,m,h),G=A.sibling}else G=A.child;if(G!==null)G.return=A;else for(G=A;G!==null;){if(G===h){G=null;break}if(A=G.sibling,A!==null){A.return=G.return,G=A;break}G=G.return}A=G}Fi(c,h,S.children,m),h=h.child}return h;case 9:return S=h.type,y=h.pendingProps.children,Df(h,m),S=Js(S),y=y(S),h.flags|=1,Fi(c,h,y,m),h.child;case 14:return y=h.type,S=Ra(y,h.pendingProps),S=Ra(y.type,S),g4(c,h,y,S,m);case 15:return m4(c,h,h.type,h.pendingProps,m);case 17:return y=h.type,S=h.pendingProps,S=h.elementType===y?S:Ra(y,S),a1(c,h),h.tag=1,Qi(y)?(c=!0,U_(h)):c=!1,Df(h,m),a4(h,y,S),Iw(h,y,S,m),Pw(null,h,y,!0,c,m);case 19:return S4(c,h,m);case 22:return p4(c,h,m)}throw Error(t(156,h.tag))};function K4(c,h){return Ge(c,h)}function MG(c,h,m,y){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(c,h,m,y){return new MG(c,h,m,y)}function Xw(c){return c=c.prototype,!(!c||!c.isReactComponent)}function bG(c){if(typeof c=="function")return Xw(c)?1:0;if(c!=null){if(c=c.$$typeof,c===U)return 11;if(c===Me)return 14}return 2}function uc(c,h){var m=c.alternate;return m===null?(m=na(c.tag,h,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=h,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,h=c.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function _1(c,h,m,y,S,A){var G=2;if(y=c,typeof c=="function")Xw(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case P:return Bu(m.children,S,A,h);case C:G=8,S|=8;break;case b:return c=na(12,m,h,S|2),c.elementType=b,c.lanes=A,c;case V:return c=na(13,m,h,S),c.elementType=V,c.lanes=A,c;case Te:return c=na(19,m,h,S),c.elementType=Te,c.lanes=A,c;case be:return y1(m,S,A,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case F:G=10;break e;case j:G=9;break e;case U:G=11;break e;case Me:G=14;break e;case De:G=16,y=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return h=na(G,m,h,S),h.elementType=c,h.type=y,h.lanes=A,h}function Bu(c,h,m,y){return c=na(7,c,y,h),c.lanes=m,c}function y1(c,h,m,y){return c=na(22,c,y,h),c.elementType=be,c.lanes=m,c.stateNode={isHidden:!1},c}function qw(c,h,m){return c=na(6,c,null,h),c.lanes=m,c}function Zw(c,h,m){return h=na(4,c.children!==null?c.children:[],c.key,h),h.lanes=m,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function kG(c,h,m,y,S){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$0(0),this.expirationTimes=$0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$0(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Qw(c,h,m,y,S,A,G,J,ie){return c=new kG(c,h,m,J,ie),h===1?(h=1,A===!0&&(h|=8)):h=0,A=na(3,null,null,h),c.current=A,A.stateNode=c,A.memoizedState={element:y,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},hw(A),c}function NG(c,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:y==null?null:""+y,children:c,containerInfo:h,implementation:m}}function Y4(c){if(!c)return tc;c=c._reactInternals;e:{if(Q(c)!==c||c.tag!==1)throw Error(t(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Qi(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(c.tag===1){var m=c.type;if(Qi(m))return wP(c,m,h)}return h}function X4(c,h,m,y,S,A,G,J,ie){return c=Qw(m,y,!0,c,S,A,G,J,ie),c.context=Y4(null),m=c.current,y=Vi(),S=lc(m),A=sl(y,S),A.callback=h??null,ic(m,A,S),c.current.lanes=S,Iu(c,S,y),ts(c,y),c}function x1(c,h,m,y){var S=h.current,A=Vi(),G=lc(S);return m=Y4(m),h.context===null?h.context=m:h.pendingContext=m,h=sl(A,G),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=ic(S,h,G),c!==null&&(Ma(c,S,G,A),q_(c,S,G)),G}function v1(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function q4(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<h?m:h}}function Jw(c,h){q4(c,h),(c=c.alternate)&&q4(c,h)}function LG(){return null}var Z4=typeof reportError=="function"?reportError:function(c){console.error(c)};function e2(c){this._internalRoot=c}E1.prototype.render=e2.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(t(409));x1(c,h,null,null)},E1.prototype.unmount=e2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Vu(function(){x1(null,c,null,null)}),h[el]=null}};function E1(c){this._internalRoot=c}E1.prototype.unstable_scheduleHydration=function(c){if(c){var h=Y0();c={blockedOn:null,target:c,priority:h};for(var m=0;m<Is.length&&h!==0&&h<Is[m].priority;m++);Is.splice(m,0,c),m===0&&gf(c)}};function t2(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function w1(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Q4(){}function OG(c,h,m,y,S){if(S){if(typeof y=="function"){var A=y;y=function(){var Ee=v1(G);A.call(Ee)}}var G=X4(h,y,c,0,null,!1,!1,"",Q4);return c._reactRootContainer=G,c[el]=G.current,ag(c.nodeType===8?c.parentNode:c),Vu(),G}for(;S=c.lastChild;)c.removeChild(S);if(typeof y=="function"){var J=y;y=function(){var Ee=v1(ie);J.call(Ee)}}var ie=Qw(c,0,!1,null,null,!1,!1,"",Q4);return c._reactRootContainer=ie,c[el]=ie.current,ag(c.nodeType===8?c.parentNode:c),Vu(function(){x1(h,ie,m,y)}),ie}function S1(c,h,m,y,S){var A=m._reactRootContainer;if(A){var G=A;if(typeof S=="function"){var J=S;S=function(){var ie=v1(G);J.call(ie)}}x1(h,G,c,S)}else G=OG(m,h,c,S,y);return v1(G)}H0=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var m=sn(h.pendingLanes);m!==0&&(W0(h,m|1),ts(h,Ue()),(qt&6)===0&&(Bf=Ue()+500,nc()))}break;case 13:Vu(function(){var y=il(c,1);if(y!==null){var S=Vi();Ma(y,c,1,S)}}),Jw(c,1)}},ff=function(c){if(c.tag===13){var h=il(c,134217728);if(h!==null){var m=Vi();Ma(h,c,134217728,m)}Jw(c,134217728)}},K0=function(c){if(c.tag===13){var h=lc(c),m=il(c,h);if(m!==null){var y=Vi();Ma(m,c,h,y)}Jw(c,h)}},Y0=function(){return Ht},X0=function(c,h){var m=Ht;try{return Ht=c,h()}finally{Ht=m}},Gr=function(c,h,m){switch(h){case"input":if(ae(c,m),h=m.name,m.type==="radio"&&h!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<m.length;h++){var y=m[h];if(y!==c&&y.form===c.form){var S=G_(y);if(!S)throw Error(t(90));Ye(y),ae(y,S)}}}break;case"textarea":Ir(c,m);break;case"select":h=m.value,h!=null&&Dt(c,!!m.multiple,h,!1)}},Xi=Hw,Ar=Vu;var DG={usingClientEntryPoint:!1,Events:[cg,Cf,G_,Ss,Hn,Hw]},Sg={findFiberByHostInstance:Mu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FG={bundleType:Sg.bundleType,version:Sg.version,rendererPackageName:Sg.rendererPackageName,rendererConfig:Sg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=xe(c),c===null?null:c.stateNode},findFiberByHostInstance:Sg.findFiberByHostInstance||LG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T1.isDisabled&&T1.supportsFiber)try{Ts=T1.inject(FG),cr=T1}catch{}}return ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DG,ns.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t2(h))throw Error(t(200));return NG(c,h,null,m)},ns.createRoot=function(c,h){if(!t2(c))throw Error(t(299));var m=!1,y="",S=Z4;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(y=h.identifierPrefix),h.onRecoverableError!==void 0&&(S=h.onRecoverableError)),h=Qw(c,1,!1,null,null,m,!1,y,S),c[el]=h.current,ag(c.nodeType===8?c.parentNode:c),new e2(h)},ns.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=xe(h),c=c===null?null:c.stateNode,c},ns.flushSync=function(c){return Vu(c)},ns.hydrate=function(c,h,m){if(!w1(h))throw Error(t(200));return S1(null,c,h,!0,m)},ns.hydrateRoot=function(c,h,m){if(!t2(c))throw Error(t(405));var y=m!=null&&m.hydratedSources||null,S=!1,A="",G=Z4;if(m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(G=m.onRecoverableError)),h=X4(h,null,c,1,m??null,S,!1,A,G),c[el]=h.current,ag(c),y)for(c=0;c<y.length;c++)m=y[c],S=m._getVersion,S=S(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,S]:h.mutableSourceEagerHydrationData.push(m,S);return new E1(h)},ns.render=function(c,h,m){if(!w1(h))throw Error(t(200));return S1(null,c,h,!1,m)},ns.unmountComponentAtNode=function(c){if(!w1(c))throw Error(t(40));return c._reactRootContainer?(Vu(function(){S1(null,null,c,!1,function(){c._reactRootContainer=null,c[el]=null})}),!0):!1},ns.unstable_batchedUpdates=Hw,ns.unstable_renderSubtreeIntoContainer=function(c,h,m,y){if(!w1(m))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return S1(c,h,m,!1,y)},ns.version="18.3.1-next-f1338f8080-20240426",ns}var aM;function WG(){if(aM)return i2.exports;aM=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),i2.exports=$G(),i2.exports}var oM;function HG(){if(oM)return I1;oM=1;var n=WG();return I1.createRoot=n.createRoot,I1.hydrateRoot=n.hydrateRoot,I1}var KG=HG();const YG=AI(KG);var ce=Pp();const XG=AI(ce),ss={ADD:"add",REMOVE:"remove"},Yd={PROPERTYCHANGE:"propertychange"},bt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class pv{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function qG(n,e,t){let r,i;t=t||_l;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function _l(n,e){return n>e?1:n<e?-1:0}function ZG(n,e){return n<e?1:n>e?-1:0}function _v(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function QG(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function dn(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function mu(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function JG(n,e,t){const r=e||_l;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function Om(){return!0}function yv(){return!1}function Dm(){}function uO(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!mu(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function hO(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Mp(n){for(const e in n)delete n[e]}function Sh(n){let e;for(e in n)return!1;return!e}class Uo{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let bp=class extends pv{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new Uo(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let l;for(let u=0,f=i.length;u<f;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(s):l=i[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[r]===0){let u=o[r];for(delete o[r];u--;)this.removeEventListener(r,Dm);delete a[r]}return l}disposeInternal(){this.listeners_&&Mp(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Dm,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function Xt(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function Gy(n,e,t,r){return Xt(n,e,t,r,!0)}function kn(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Mp(n))}class kp extends bp{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(bt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Xt(this,e[s],t);return i}return Xt(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=Gy(this,e[s],t)}else r=Gy(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)eB(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}kp.prototype.on;kp.prototype.once;kp.prototype.un;function eB(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)kn(n[e]);else kn(n)}function At(){throw new Error("Unimplemented abstract method.")}let tB=0;function tn(n){return n.ol_uid||(n.ol_uid=String(++tB))}class lM extends Uo{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class zo extends kp{constructor(e){super(),this.on,this.once,this.un,tn(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new lM(r,e,t)),r=Yd.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new lM(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Sh(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const cM={LENGTH:"length"};class A1 extends Uo{constructor(e,t,r){super(e),this.element=t,this.index=r}}class ha extends zo{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(cM.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new A1(ss.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new A1(ss.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new A1(ss.REMOVE,i,e)),this.dispatchEvent(new A1(ss.ADD,t,e))}updateLength_(){this.set(cM.LENGTH,this.array_.length)}assertUnique_(e,t){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function pn(n,e){if(!n)throw new Error(e)}let ya=class fO extends zo{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new fO(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(kn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Xt(e,bt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?nB(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function nB(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(pn(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const Wr={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function uM(n){const e=Us();for(let t=0,r=n.length;t<r;++t)im(e,n[t]);return e}function Fm(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function dO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Yh(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Th(n,e){return RI(n,e[0],e[1])}function kc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function RI(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function LS(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let l=Wr.UNKNOWN;return a<t?l=l|Wr.LEFT:a>i&&(l=l|Wr.RIGHT),o<r?l=l|Wr.BELOW:o>s&&(l=l|Wr.ABOVE),l===Wr.UNKNOWN&&(l=Wr.INTERSECTING),l}function Us(){return[1/0,1/0,-1/0,-1/0]}function Zc(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Np(n){return Zc(1/0,1/0,-1/0,-1/0,n)}function gO(n,e){const t=n[0],r=n[1];return Zc(t,r,t,r,e)}function CI(n,e,t,r,i){const s=Np(i);return pO(s,n,e,t,r)}function Xd(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function mO(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function im(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function pO(n,e,t,r,i){for(;t<r;t+=i)rB(n,e[t],e[t+1]);return n}function rB(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function _O(n,e){let t;return t=e(xv(n)),t||(t=e(vv(n)),t)||(t=e(Ev(n)),t)||(t=e(Xh(n)),t)?t:!1}function OS(n){let e=0;return S0(n)||(e=Bt(n)*vr(n)),e}function xv(n){return[n[0],n[1]]}function vv(n){return[n[2],n[1]]}function Do(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function iB(n,e){let t;if(e==="bottom-left")t=xv(n);else if(e==="bottom-right")t=vv(n);else if(e==="top-left")t=Xh(n);else if(e==="top-right")t=Ev(n);else throw new Error("Invalid corner");return t}function By(n,e,t,r,i){const[s,a,o,l,u,f,d,g]=yO(n,e,t,r);return Zc(Math.min(s,o,u,d),Math.min(a,l,f,g),Math.max(s,o,u,d),Math.max(a,l,f,g),i)}function yO(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),l=i*a,u=i*o,f=s*a,d=s*o,g=n[0],p=n[1];return[g-l+d,p-u-f,g-l-d,p-u+f,g+l-d,p+u+f,g+l+d,p+u-f,g-l+d,p-u-f]}function vr(n){return n[3]-n[1]}function yl(n,e,t){const r=t||Us();return Ui(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Np(r),r}function Xh(n){return[n[0],n[3]]}function Ev(n){return[n[2],n[3]]}function Bt(n){return n[2]-n[0]}function Ui(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function S0(n){return n[2]<n[0]||n[3]<n[1]}function sB(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function aB(n,e,t){let r=!1;const i=LS(n,e),s=LS(n,t);if(i===Wr.INTERSECTING||s===Wr.INTERSECTING)r=!0;else{const a=n[0],o=n[1],l=n[2],u=n[3],f=e[0],d=e[1],g=t[0],p=t[1],v=(p-d)/(g-f);let x,E;s&Wr.ABOVE&&!(i&Wr.ABOVE)&&(x=g-(p-u)/v,r=x>=a&&x<=l),!r&&s&Wr.RIGHT&&!(i&Wr.RIGHT)&&(E=p-(g-l)*v,r=E>=o&&E<=u),!r&&s&Wr.BELOW&&!(i&Wr.BELOW)&&(x=g-(p-o)/v,r=x>=a&&x<=l),!r&&s&Wr.LEFT&&!(i&Wr.LEFT)&&(E=p-(g-a)*v,r=E>=o&&E<=u)}return r}function xO(n,e){const t=e.getExtent(),r=Do(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Bt(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function vO(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];xO(n,e);const i=Bt(r);if(Bt(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function Dn(n,e,t){return Math.min(Math.max(n,e),t)}function oB(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const l=((n-t)*a+(e-r)*o)/(a*a+o*o);l>1?(t=i,r=s):l>0&&(t+=a*l,r+=o*l)}return ph(n,e,t,r)}function ph(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function lB(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const l=Math.abs(n[o][r]);l>s&&(s=l,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const l=-n[o][r]/n[r][r];for(let u=r;u<e+1;u++)r==u?n[o][u]=0:n[o][u]+=l*n[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function hM(n){return n*180/Math.PI}function xl(n){return n*Math.PI/180}function Uc(n,e){const t=n%e;return t*e<0?t+e:t}function Os(n,e,t){return n+t*(e-n)}function Lp(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Uy(n,e){return Math.round(Lp(n,e))}function R1(n,e){return Math.floor(Lp(n,e))}function Nc(n,e){return Math.ceil(Lp(n,e))}function DS(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function Ig(n,e,t){const r=""+n;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function EO(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const s=parseInt(t[i]||"0",10),a=parseInt(r[i]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function cB(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function zy(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function PI(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function uB(n,e){return n[0]*=e,n[1]*=e,n}function wO(n,e){if(e.canWrapX()){const t=Bt(e.getExtent()),r=SO(n,e,t);r&&(n[0]-=r*t)}return n}function SO(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Bt(r),i=Math.floor((n[0]-r[0])/t)),i}function TO(...n){console.warn(...n)}const qd={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let wv=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||qd[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Op=6378137,xd=Math.PI*Op,hB=[-xd,-xd,xd,xd],fB=[-180,-85,180,85],C1=Op*Math.log(Math.tan(Math.PI/2));class zf extends wv{constructor(e){super({code:e,units:"m",extent:hB,global:!0,worldExtent:fB,getPointResolution:function(t,r){return t/Math.cosh(r[1]/Op)}})}}const fM=[new zf("EPSG:3857"),new zf("EPSG:102100"),new zf("EPSG:102113"),new zf("EPSG:900913"),new zf("http://www.opengis.net/def/crs/EPSG/0/3857"),new zf("http://www.opengis.net/gml/srs/epsg.xml#3857")];function dB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=xd*n[s]/180;let a=Op*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>C1?a=C1:a<-C1&&(a=-C1),e[s+1]=a}return e}function gB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/xd,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Op))/Math.PI-90;return e}const mB=6378137,dM=[-180,-90,180,90],pB=Math.PI*mB/180;class Uu extends wv{constructor(e,t){super({code:e,units:"degrees",extent:dM,axisOrientation:t,global:!0,metersPerUnit:pB,worldExtent:dM})}}const gM=[new Uu("CRS:84"),new Uu("EPSG:4326","neu"),new Uu("urn:ogc:def:crs:OGC:1.3:CRS84"),new Uu("urn:ogc:def:crs:OGC:2:84"),new Uu("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Uu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Uu("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let FS={};function fy(n){return FS[n]||FS[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function _B(n,e){FS[n]=e}let bd={};function Ih(n,e,t){const r=n.getCode(),i=e.getCode();r in bd||(bd[r]={}),bd[r][i]=t}function dy(n,e){return n in bd&&e in bd[n]?bd[n][e]:null}const $y=.9996,ma=.00669438,Sv=ma*ma,Tv=Sv*ma,lh=ma/(1-ma),mM=Math.sqrt(1-ma),Zd=(1-mM)/(1+mM),IO=Zd*Zd,MI=IO*Zd,bI=MI*Zd,AO=bI*Zd,RO=1-ma/4-3*Sv/64-5*Tv/256,yB=3*ma/8+3*Sv/32+45*Tv/1024,xB=15*Sv/256+45*Tv/1024,vB=35*Tv/3072,EB=3/2*Zd-27/32*MI+269/512*AO,wB=21/16*IO-55/32*bI,SB=151/96*MI-417/128*AO,TB=1097/512*bI,Wy=6378137;function IB(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/$y/(Wy*RO),o=a+EB*Math.sin(2*a)+wB*Math.sin(4*a)+SB*Math.sin(6*a)+TB*Math.sin(8*a),l=Math.sin(o),u=l*l,f=Math.cos(o),d=l/f,g=d*d,p=g*g,v=1-ma*u,x=Math.sqrt(1-ma*u),E=Wy/x,I=(1-ma)/v,T=lh*f**2,M=T*T,k=r/(E*$y),L=k*k,z=L*k,P=z*k,C=P*k,b=C*k,F=o-d/I*(L/2-P/24*(5+3*g+10*T-4*M-9*lh))+b/720*(61+90*g+298*T+45*p-252*lh-3*M);let j=(k-z/6*(1+2*g+T)+C/120*(5-2*T+28*g-3*M+8*lh+24*p))/f;return j=DS(j+xl(CO(t.number)),-Math.PI,Math.PI),[hM(j),hM(F)]}const pM=-80,_M=84,AB=-180,RB=180;function CB(n,e,t){n=DS(n,AB,RB),e<pM?e=pM:e>_M&&(e=_M);const r=xl(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,l=o*o,u=xl(n),f=CO(t.number),d=xl(f),g=Wy/Math.sqrt(1-ma*i**2),p=lh*s**2,v=s*DS(u-d,-Math.PI,Math.PI),x=v*v,E=x*v,I=E*v,T=I*v,M=T*v,k=Wy*(RO*r-yB*Math.sin(2*r)+xB*Math.sin(4*r)-vB*Math.sin(6*r)),L=$y*g*(v+E/6*(1-o+p)+T/120*(5-18*o+l+72*p-58*lh))+5e5;let z=$y*(k+g*a*(x/2+I/24*(5-o+9*p+4*p**2)+M/720*(61-58*o+l+600*p-330*lh)));return t.north||(z+=1e7),[L,z]}function CO(n){return(n-1)*6-180+3}const PB=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function PO(n){let e=0;for(const i of PB){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function yM(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],u=t[o+1],f=n(l,u,e);r[o]=f[0],r[o+1]=f[1]}return r}}function MB(n){return PO(n)?new wv({code:n,units:"m"}):null}function bB(n){const e=PO(n.getCode());return e?{forward:yM(CB,e),inverse:yM(IB,e)}:null}const kB=63710088e-1;function xM(n,e,t){t=t||kB;const r=xl(n[1]),i=xl(e[1]),s=(i-r)/2,a=xl(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const NB=[bB],LB=[MB];let VS=!0;function MO(n){VS=!1}function kI(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function Hy(n){_B(n.getCode(),n),Ih(n,n,kI)}function OB(n){n.forEach(Hy)}function Cn(n){if(typeof n!="string")return n;const e=fy(n);if(e)return e;for(const t of LB){const r=t(n);if(r)return r}return null}function Ky(n,e,t,r){n=Cn(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/qd[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=LI(n,Cn("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=o(u,u,2);const f=xM(u.slice(0,2),u.slice(2,4)),d=xM(u.slice(4,6),u.slice(6,8));i=(f+d)/2}const l=r?qd[r]:n.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function jS(n){OB(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Ih(e,t,kI)})})}function DB(n,e,t,r){n.forEach(function(i){e.forEach(function(s){Ih(i,s,t),Ih(s,i,r)})})}function NI(n,e){return n?typeof n=="string"?Cn(n):n:Cn(e)}function GS(n){return(function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),l=o.length;for(let u=0,f=i;u<f;++u)t[a+u]=u>=l?e[a+u]:o[u]}return t})}function FB(n,e,t,r){const i=Cn(n),s=Cn(e);Ih(i,s,GS(t)),Ih(s,i,GS(r))}function Cl(n,e){return MO(),Dp(n,"EPSG:4326","EPSG:3857")}function fn(n,e){const t=Dp(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Uc(r+180,360)-180),t}function _h(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||LI(n,e)===kI)&&t}function LI(n,e){const t=n.getCode(),r=e.getCode();let i=dy(t,r);if(i)return i;let s=null,a=null;for(const l of NB)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=o2(s.inverse,a.forward);else{const l=dy(t,o);l&&(i=o2(l,a.forward))}else{const l=dy(o,r);l&&(i=o2(s.inverse,l))}return i&&(Hy(n),Hy(e),Ih(n,e,i)),i}function o2(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function Vm(n,e){const t=Cn(n),r=Cn(e);return LI(t,r)}function Dp(n,e,t){const r=Vm(e,t);if(!r){const i=Cn(e).getCode(),s=Cn(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}function BS(n,e){return n}function ul(n,e){return VS&&!zy(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(VS=!1,TO("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function bO(n,e){return n}function Io(n,e){return n}function vM(n,e,t){return function(r){let i,s;if(n.canWrapX()){const a=n.getExtent(),o=Bt(a);r=r.slice(0),s=SO(r,n,o),s&&(r[0]=r[0]-s*o),r[0]=Dn(r[0],a[0],a[2]),r[1]=Dn(r[1],a[1],a[3]),i=t(r)}else i=t(r);return s&&e.canWrapX()&&(i[0]+=s*Bt(e.getExtent())),i}}function VB(){jS(fM),jS(gM),DB(gM,fM,dB,gB)}VB();new Array(6);function Wa(){return[1,0,0,1,0,0]}function jB(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Nr(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function Fo(n,e,t,r,i,s,a,o){const l=Math.sin(s),u=Math.cos(s);return n[0]=r*u,n[1]=i*l,n[2]=-r*l,n[3]=i*u,n[4]=a*r*u-o*r*l+e,n[5]=a*i*l+o*i*u+t,n}function kO(n,e){const t=GB(e);pn(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*l-a*o)/t,n[5]=-(r*l-i*o)/t,n}function GB(n){return n[0]*n[3]-n[1]*n[2]}const BB=[1e5,1e5,1e5,1e5,2,2];function UB(n){return"matrix("+n.join(", ")+")"}function US(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function zB(n,e){const t=US(n),r=US(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*BB[i])!==0)return!1;return!0}function zc(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=r){const u=n[l],f=n[l+1];s[o++]=i[0]*u+i[2]*f+i[4],s[o++]=i[1]*u+i[3]*f+i[5];for(let d=2;d<a;d++)s[o++]=n[l+d]}return s&&s.length!=o&&(s.length=o),s}function NO(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),l=Math.sin(i),u=s[0],f=s[1];let d=0;for(let g=e;g<t;g+=r){const p=n[g]-u,v=n[g+1]-f;a[d++]=u+p*o-v*l,a[d++]=f+p*l+v*o;for(let x=g+2;x<g+r;++x)a[d++]=n[x]}return a&&a.length!=d&&(a.length=d),a}function $B(n,e,t,r,i,s,a,o){o=o||[];const l=a[0],u=a[1];let f=0;for(let d=e;d<t;d+=r){const g=n[d]-l,p=n[d+1]-u;o[f++]=l+i*g,o[f++]=u+s*p;for(let v=d+2;v<d+r;++v)o[f++]=n[v]}return o&&o.length!=f&&(o.length=f),o}function WB(n,e,t,r,i,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=r){a[o++]=n[l]+i,a[o++]=n[l+1]+s;for(let u=l+2;u<l+r;++u)a[o++]=n[u]}return a&&a.length!=o&&(a.length=o),a}const EM=Wa(),HB=[NaN,NaN];class LO extends zo{constructor(){super(),this.extent_=Us(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=uO((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return At()}closestPointXY(e,t,r,i){return At()}containsXY(e,t){return this.closestPointXY(e,t,HB,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return At()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Np(t),this.extentRevision_=this.getRevision()}return sB(this.extent_,e)}rotate(e,t){At()}scale(e,t,r){At()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return At()}getType(){return At()}applyTransform(e){At()}intersectsExtent(e){return At()}translate(e,t){At()}transform(e,t){const r=Cn(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const l=r.getExtent(),u=r.getWorldExtent(),f=vr(u)/vr(l);Fo(EM,u[0],u[3],f,-f,0,0,0);const d=zc(s,0,s.length,o,EM,a),g=Vm(r,t);return g?g(d,d,o):d}:Vm(r,t);return this.applyTransform(i),this}}class qh extends LO{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return CI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return At()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=wM(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){At()}setLayout(e,t,r){let i;if(e)i=wM(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Zh(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();NO(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Do(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();$B(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();WB(r,0,r.length,i,e,t,r),this.changed()}}}function Zh(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function wM(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function KB(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return zc(r,0,r.length,i,e,t)}function SM(n,e,t,r,i,s,a){const o=n[e],l=n[e+1],u=n[t]-o,f=n[t+1]-l;let d;if(u===0&&f===0)d=e;else{const g=((i-o)*u+(s-l)*f)/(u*u+f*f);if(g>1)d=t;else if(g>0){for(let p=0;p<r;++p)a[p]=Os(n[e+p],n[t+p],g);a.length=r;return}else d=e}for(let g=0;g<r;++g)a[g]=n[d+g];a.length=r}function OI(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],l=n[e+1],u=ph(s,a,o,l);u>i&&(i=u),s=o,a=l}return i}function DI(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=OI(n,e,o,r,i),e=o}return i}function YB(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=DI(n,e,o,r,i),e=o[o.length-1]}return i}function FI(n,e,t,r,i,s,a,o,l,u,f){if(e==t)return u;let d,g;if(i===0){if(g=ph(a,o,n[e],n[e+1]),g<u){for(d=0;d<r;++d)l[d]=n[e+d];return l.length=r,g}return u}f=f||[NaN,NaN];let p=e+r;for(;p<t;)if(SM(n,p-r,p,r,a,o,f),g=ph(a,o,f[0],f[1]),g<u){for(u=g,d=0;d<r;++d)l[d]=f[d];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(g)-Math.sqrt(u))/i|0,1);if(s&&(SM(n,t-r,e,r,a,o,f),g=ph(a,o,f[0],f[1]),g<u)){for(u=g,d=0;d<r;++d)l[d]=f[d];l.length=r}return u}function VI(n,e,t,r,i,s,a,o,l,u,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const p=t[d];u=FI(n,e,p,r,i,s,a,o,l,u,f),e=p}return u}function XB(n,e,t,r,i,s,a,o,l,u,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const p=t[d];u=VI(n,e,p,r,i,s,a,o,l,u,f),e=p[p.length-1]}return u}function qB(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Iv(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function Fp(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Iv(n,e,t[a],r);i[s++]=l,e=l}return i.length=s,i}function OO(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Fp(n,e,t[a],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function Lc(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function jm(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=Lc(n,e,l,r,i[s]),e=l}return i.length=s,i}function zS(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=l.length===1&&l[0]===e?[]:jm(n,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function Yy(n,e,t,r,i,s,a){let o,l;const u=(t-e)/r;if(u===1)o=e;else if(u===2)o=e,l=i;else if(u!==0){let f=n[e],d=n[e+1],g=0;const p=[0];for(let E=e+r;E<t;E+=r){const I=n[E],T=n[E+1];g+=Math.sqrt((I-f)*(I-f)+(T-d)*(T-d)),p.push(g),f=I,d=T}const v=i*g,x=qG(p,v);x<0?(l=(v-p[-x-2])/(p[-x-1]-p[-x-2]),o=e+(-x-2)*r):o=e+x*r}a=a>1?a:2,s=s||new Array(a);for(let f=0;f<a;++f)s[f]=o===void 0?NaN:l===void 0?n[o+f]:Os(n[o+f],n[o+r+f],l);return s}function $S(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,l=t/r;for(;o<l;){const g=o+l>>1;i<n[(g+1)*r-1]?l=g:o=g+1}const u=n[o*r-1];if(i==u)return n.slice((o-1)*r,(o-1)*r+r);const f=n[(o+1)*r-1],d=(i-u)/(f-u);a=[];for(let g=0;g<r-1;++g)a.push(Os(n[(o-1)*r+g],n[o*r+g],d));return a.push(i),a}function ZB(n,e,t,r,i,s,a){if(a)return $S(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let l=0,u=t.length;l<u;++l){const f=t[l];if(e!=f){if(i<n[e+r-1])return null;if(i<=n[f-1])return $S(n,e,f,r,i,!1);e=f}}return null}function QB(n,e,t,r,i){return!_O(i,function(a){return!ch(n,e,t,r,a[0],a[1])})}function ch(n,e,t,r,i,s){let a=0,o=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const u=n[e],f=n[e+1];l<=s?f>s&&(u-o)*(s-l)-(i-o)*(f-l)>0&&a++:f<=s&&(u-o)*(s-l)-(i-o)*(f-l)<0&&a--,o=u,l=f}return a!==0}function jI(n,e,t,r,i,s){if(t.length===0||!ch(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(ch(n,t[a-1],t[a],r,i,s))return!1;return!0}function JB(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const l=t[a];if(jI(n,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function DO(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Av(n,e,t,r,i,s){return s=s??pO(Us(),n,e,t,r),Ui(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:DO(n,e,t,r,function(a,o){return aB(i,a,o)}):!1}function eU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(Av(n,e,t[s],r,i))return!0;e=t[s]}return!1}function FO(n,e,t,r,i){return!!(Av(n,e,t,r,i)||ch(n,e,t,r,i[0],i[1])||ch(n,e,t,r,i[0],i[3])||ch(n,e,t,r,i[2],i[1])||ch(n,e,t,r,i[2],i[3]))}function VO(n,e,t,r,i){if(!FO(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(QB(n,t[s-1],t[s],r,i)&&!Av(n,t[s-1],t[s],r,i))return!1;return!0}function tU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(VO(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function GI(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const l=n[o],u=n[o+1];a+=Math.sqrt((l-i)*(l-i)+(u-s)*(u-s)),i=l,s=u}return a}function Rv(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[e,t-r];let f=0;for(;u.length>0;){const d=u.pop(),g=u.pop();let p=0;const v=n[g],x=n[g+1],E=n[d],I=n[d+1];for(let T=g+r;T<d;T+=r){const M=n[T],k=n[T+1],L=oB(M,k,v,x,E,I);L>p&&(f=T,p=L)}p>i&&(l[(f-e)/r]=1,g+r<f&&u.push(g,f),f+r<d&&u.push(f,d))}for(let d=0;d<o;++d)l[d]&&(s[a++]=n[e+d*r],s[a++]=n[e+d*r+1]);return a}function jO(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l];a=Rv(n,e,f,r,i,s,a),o.push(a),e=f}return a}function Ku(n,e){return e*Math.round(n/e)}function nU(n,e,t,r,i,s,a){if(e==t)return a;let o=Ku(n[e],i),l=Ku(n[e+1],i);e+=r,s[a++]=o,s[a++]=l;let u,f;do if(u=Ku(n[e],i),f=Ku(n[e+1],i),e+=r,e==t)return s[a++]=u,s[a++]=f,a;while(u==o&&f==l);for(;e<t;){const d=Ku(n[e],i),g=Ku(n[e+1],i);if(e+=r,d==u&&g==f)continue;const p=u-o,v=f-l,x=d-o,E=g-l;if(p*E==v*x&&(p<0&&x<p||p==x||p>0&&x>p)&&(v<0&&E<v||v==E||v>0&&E>v)){u=d,f=g;continue}s[a++]=u,s[a++]=f,o=u,l=f,u=d,f=g}return s[a++]=u,s[a++]=f,a}function BI(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l];a=nU(n,e,f,r,i,s,a),o.push(a),e=f}return a}function rU(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l],d=[];a=BI(n,e,f,r,i,s,a,d),o.push(d),e=f[f.length-1]}return a}class Xa extends qh{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){dn(this.flatCoordinates,e),this.changed()}clone(){const e=new Xa(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Yh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(OI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),FI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return DO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,$S(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Lc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Yy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return GI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Rv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Xa(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Av(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Iv(this.flatCoordinates,0,e,this.stride),this.changed()}}let qa=class GO extends qh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new GO(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=ph(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let l=0;l<o;++l)r[l]=s[l];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return gO(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return RI(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qB(this.flatCoordinates,0,e,this.stride),this.changed()}};const fa={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ah=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",iU=Ah.includes("safari")&&!Ah.includes("chrom");iU&&(Ah.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ah));const sU=Ah.includes("webkit")&&!Ah.includes("edge"),BO=Ah.includes("macintosh"),aU=typeof devicePixelRatio<"u"?devicePixelRatio:1,js=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,UI=typeof Image<"u"&&Image.prototype.decode,UO=typeof createImageBitmap=="function",zO=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Or(n,e,t,r){let i;return t&&t.length?i=t.shift():js?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let l2;function Xy(){return l2||(l2=Or(1,1)),l2}function Cv(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function TM(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function oU(n){for(;n.lastChild;)n.lastChild.remove()}function lU(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function $O(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function Oc(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}const zI=[NaN,NaN,NaN,0];let c2;function cU(){return c2||(c2=Or(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),c2}const uU=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,hU=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,fU=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,dU=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function P1(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function sm(n){throw new Error('failed to parse "'+n+'" as color')}function WO(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(hU)||n.match(uU)||n.match(fU);if(s){const a=s[4],o=100/255;return[Dn(P1(s[1],o)+.5|0,0,255),Dn(P1(s[2],o)+.5|0,0,255),Dn(P1(s[3],o)+.5|0,0,255),a!==void 0?Dn(P1(a,100),0,1):1]}sm(n)}if(n.startsWith("#")){if(dU.test(n)){const s=n.substring(1),a=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,u=s.length;l<u;l+=a){let f=parseInt(s.substring(l,l+a),16);a===1&&(f+=f<<4),o[l/a]=f}return o[3]=o[3]/255,o}sm(n)}const e=cU();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&sm(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return WO(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Lp(i[3]/255,3),i}function gU(n){return typeof n=="string"?n:WI(n)}const mU=1024,Ag={};let u2=0;function pU(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function h2(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function f2(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function d2(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function g2(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function IM(n){const e=d2(n[0]),t=d2(n[1]),r=d2(n[2]),i=g2(e*.222488403+t*.716873169+r*.06060791),s=500*(g2(e*.452247074+t*.399439023+r*.148375274)-i),a=200*(i-g2(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(a,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+a*a),o<0?o+360:o,n[3]]}function _U(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=f2(e),s=f2(e+t/500*Math.cos(r)),a=f2(e-t/200*Math.sin(r)),o=h2(s*3.021973625-i*1.617392459-a*.404875592),l=h2(s*-.943766287+i*1.916279586+a*.027607165),u=h2(s*.069407491-i*.22898585+a*1.159737864);return[Dn(o+.5|0,0,255),Dn(l+.5|0,0,255),Dn(u+.5|0,0,255),n[3]]}function $I(n){if(n==="none")return zI;if(Ag.hasOwnProperty(n))return Ag[n];if(u2>=mU){let t=0;for(const r in Ag)(t++&3)===0&&(delete Ag[r],--u2)}const e=WO(n);e.length!==4&&sm(n);for(const t of e)isNaN(t)&&sm(n);return Ag[n]=e,++u2,e}function Rh(n){return Array.isArray(n)?n:$I(n)}function WI(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class HO extends bp{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?ht.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(bt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ht.IDLE&&this.loader){this.state=ht.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;hO(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||UO&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=ht.LOADED}).catch(r=>{this.state=ht.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function yU(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[Gy(r,bt.LOAD,function(){a=!0,s||e()})];return r.src&&UI?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(a?e():t())})):o.push(Gy(r,bt.ERROR,t)),function(){i=!1,o.forEach(kn)}}function xU(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function KO(n,e){return e&&(n.src=e),n.src&&UI?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):xU(n)}function YO(n,e){return e&&(n.src=e),n.src&&UI&&UO?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):KO(n)}class vU{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=m2(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=m2(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=m2(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===ht.IDLE&&i.load(),i.getImageState()===ht.LOADING?i.ready().then(()=>{this.patternCache_[a]=Xy().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=Xy().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function m2(n,e,t){const r=t?Rh(t):"null";return e+":"+n+":"+r}const da=new vU;let Rg=null;class XO extends bp{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?ht.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ht.LOADED){Rg||(Rg=Or(1,1,void 0,{willReadFrequently:!0})),Rg.drawImage(this.image_,0,0);try{Rg.getImageData(0,0,1,1),this.tainted_=!1}catch{Rg=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(bt.CHANGE)}handleImageError_(){this.imageState_=ht.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ht.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Or(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ht.IDLE){this.image_||this.initializeImage_(),this.imageState_=ht.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&KO(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ht.LOADED)return;const t=this.image_,r=Or(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=gU(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ht.LOADED||this.imageState_===ht.ERROR)e();else{const t=()=>{(this.imageState_===ht.LOADED||this.imageState_===ht.ERROR)&&(this.removeEventListener(bt.CHANGE,t),e())};this.addEventListener(bt.CHANGE,t)}})),this.ready_}}function qy(n,e,t,r,i,s){let a=e===void 0?void 0:da.get(e,t,i);return a||(a=new XO(n,n&&"src"in n?n.src||void 0:e,t,r,i),da.set(e,t,i,a,s)),s&&a&&!da.getPattern(e,t,i)&&da.set(e,t,i,a,s),a}function Ao(n){return n?Array.isArray(n)?WI(n):typeof n=="object"&&"src"in n?EU(n):n:null}function EU(n){if(!n.offset||!n.size)return da.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=da.getPattern(e,void 0,n.color);if(t)return t;const r=da.get(n.src,"anonymous",null);if(r.getImageState()!==ht.LOADED)return null;const i=Or(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),qy(i.canvas,e,void 0,ht.LOADED,n.color,!0),da.getPattern(e,void 0,n.color)}class qO{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const M1="ol-hidden",Vp="ol-unselectable",HI="ol-control",AM="ol-collapsed",wU=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),RM=["style","variant","weight","size","lineHeight","family"],WS={normal:400,bold:700},HS=function(n){const e=n.match(wU);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=RM.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[RM[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in WS&&(t.weight=WS[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t},ZO="10px sans-serif",as="#000",Qd="round",vl=[],El=0,Jd="round",Gm=10,Bm="#000",Um="center",Zy="middle",uh=[0,0,0,0],zm=1,ad=new zo;let Cg=null,CM;const KS={},SU=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function TU(n,e,t){return`${n} ${e} 16px "${t}"`}const IU=(function(){let e,t;async function r(s){await t.ready;const a=await t.load(s);if(a.length===0)return!1;const o=HS(s),l=o.families[0].toLowerCase(),u=o.weight;return a.some(f=>{const d=f.family.replace(/^['"]|['"]$/g,"").toLowerCase(),g=WS[f.weight]||f.weight;return d===l&&f.style===o.style&&g==u})}async function i(){await t.ready;let s=!0;const a=ad.getProperties(),o=Object.keys(a).filter(l=>a[l]<100);for(let l=o.length-1;l>=0;--l){const u=o[l];let f=a[u];f<100&&(await r(u)?(Mp(KS),ad.set(u,100)):(f+=10,ad.set(u,f,!0),f<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=js?self.fonts:document.fonts);const a=HS(s);if(!a)return;const o=a.families;let l=!1;for(const u of o){if(SU.has(u))continue;const f=TU(a.style,a.weight,u);ad.get(f)===void 0&&(ad.set(f,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),AU=(function(){let n;return function(e){let t=KS[e];if(t==null){if(js){const r=HS(e),i=QO(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);KS[e]=t}return t}})();function QO(n,e){return Cg||(Cg=Or(1,1)),n!=CM&&(Cg.font=n,CM=Cg.font),Cg.measureText(e)}function JO(n,e){return QO(n,e).width}function PM(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,JO(n,s)),0);return t[e]=r,r}function RU(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,l=0;for(let u=0,f=e.length;u<=f;u+=2){const d=e[u];if(d===`
`||u===f){s=Math.max(s,a),i.push(a),a=0,o+=l,l=0;continue}const g=e[u+1]||n.font,p=JO(g,d);t.push(p),a+=p;const v=AU(g);r.push(v),l=Math.max(l,v)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function CU(n,e,t,r,i,s,a,o,l,u,f){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=d=>d.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,u),n.scale(f[0],f[1]),PU(r,n)):f[0]<0||f[1]<0?(n.translate(l,u),n.scale(f[0],f[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,l,u,a*f[0],o*f[1]),n.restore()}function PU(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class MU extends qO{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Lp(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Wa()}drawImages_(e,t,r,i){if(!this.image_)return;const s=zc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let f=0,d=s.length;f<d;f+=2){const g=s[f]-this.imageAnchorX_,p=s[f+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=g+this.imageAnchorX_,x=p+this.imageAnchorY_;Fo(o,v,x,1,1,u,-v,-x),a.save(),a.transform.apply(a,o),a.translate(v,x),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=zc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=zc(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ui(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=KB(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ui(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Ui(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(i,s,a[l],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ui(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ui(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];i=this.drawRings_(r,i,u,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),mu(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:Um;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Ao(r||as)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),f=s||vl;this.strokeState_={lineCap:i!==void 0?i:Qd,lineDash:this.pixelRatio_===1?f:f.map(d=>d*this.pixelRatio_),lineDashOffset:(a||El)*this.pixelRatio_,lineJoin:o!==void 0?o:Jd,lineWidth:(l!==void 0?l:zm)*this.pixelRatio_,miterLimit:u!==void 0?u:Gm,strokeStyle:Ao(r||Bm)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const p=t.getColor();this.textFillState_={fillStyle:Ao(p||as)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),v=r.getLineCap(),x=r.getLineDash(),E=r.getLineDashOffset(),I=r.getLineJoin(),T=r.getWidth(),M=r.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:Qd,lineDash:x||vl,lineDashOffset:E||El,lineJoin:I!==void 0?I:Jd,lineWidth:T!==void 0?T:zm,miterLimit:M!==void 0?M:Gm,strokeStyle:Ao(p||Bm)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),f=e.getText(),d=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:ZO,textAlign:d!==void 0?d:Um,textBaseline:g!==void 0?g:Zy},this.text_=f!==void 0?Array.isArray(f)?f.reduce((p,v,x)=>p+=x%2?" ":v,""):f:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const bU=.5,eD={Point:jU,LineString:DU,Polygon:BU,MultiPoint:GU,MultiLineString:FU,MultiPolygon:VU,GeometryCollection:OU,Circle:NU};function kU(n,e){return parseInt(tn(n),10)-parseInt(tn(e),10)}function MM(n,e){const t=tD(n,e);return t*t}function tD(n,e){return bU*n/e}function NU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r)}}function bM(n,e,t,r,i,s,a,o){const l=[],u=t.getImage();if(u){let g=!0;const p=u.getImageState();p==ht.LOADED||p==ht.ERROR?g=!1:p==ht.IDLE&&u.load(),g&&l.push(u.ready())}const f=t.getFill();f&&f.loading()&&l.push(f.ready());const d=l.length>0;return d&&Promise.all(l).then(()=>i(null)),LU(n,e,t,r,s,a,o),d}function LU(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(r,i);if(t.getRenderer())nD(n,l,t,e,a);else{const f=eD[l.getType()];f(n,l,t,e,a,s)}}function nD(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,l=a.length;o<l;++o)nD(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function OU(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const u=eD[a[o].getType()];u(n,a[o],t,r,i,s)}}function DU(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function FU(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function VU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function jU(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),l=o&&o.getText(),u=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=ht.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(a,u),f.drawPoint(e,r,i)}if(l){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o,u),f.drawText(e,r,i)}}function GU(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),f=s&&o&&u?{}:void 0;if(o){if(a.getImageState()!=ht.LOADED)return;const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(a,f),d.drawMultiPoint(e,r,i)}if(u){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(l,f),d.drawText(e,r,i)}}function BU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}let UU=!1;function zU(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=UU,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=e.getType();try{let f;u=="text"||u=="json"?f=o.responseText:u=="xml"?f=o.responseXML||o.responseText:u=="arraybuffer"&&(f=o.response),f?s(e.readFeatures(f,{extent:t,featureProjection:i}),e.readProjection(f)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function kM(n,e){return function(t,r,i,s,a){zU(n,e,t,r,i,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),a!==void 0&&a()})}}function $U(n,e){return[[-1/0,-1/0,1/0,1/0]]}function rD(n,e,t,r){const i=[];let s=Us();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=CI(n,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function KI(n,e,t,r,i,s,a){let o,l,u,f,d,g,p;const v=i[s+1],x=[];for(let T=0,M=t.length;T<M;++T){const k=t[T];for(f=n[k-r],g=n[k-r+1],o=e;o<k;o+=r)d=n[o],p=n[o+1],(v<=g&&p<=v||g<=v&&v<=p)&&(u=(v-g)/(p-g)*(d-f)+f,x.push(u)),f=d,g=p}let E=NaN,I=-1/0;for(x.sort(_l),f=x[0],o=1,l=x.length;o<l;++o){d=x[o];const T=Math.abs(d-f);T>I&&(u=(f+d)/2,jI(n,e,t,r,u,v)&&(E=u,I=T)),f=d}return isNaN(E)&&(E=i[s]),a?(a.push(E,v,I),a):[E,v,I]}function iD(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=KI(n,e,l,r,i,2*a,s),e=l[l.length-1]}return s}function WU(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function YI(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],l=n[e+1];i+=(o-s)*(l+a),s=o,a=l}return i===0?void 0:i>0}function XI(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=YI(n,e,o,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=o}return!0}function sD(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!XI(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function Qy(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=YI(n,e,o,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&WU(n,e,o,r),e=o}return e}function YS(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=Qy(n,e,t[s],r,i);return e}function HU(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=YI(n,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=l}return t}class Ha extends LO{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(kn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Xt(e[t],bt.CHANGE,this.changed,this))}clone(){const e=new Ha(p2(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Yh(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Np(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)mO(e,t[r].getExtent());return e}getGeometries(){return p2(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(i=!0)}return i?new Ha(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Do(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(p2(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function p2(n){return n.map(e=>e.clone())}function aD(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,l=0;for(;e<t;e+=r){const u=n[e]-s,f=n[e+1]-a;i+=l*u-o*f,o=u,l=f}return i/2}function oD(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=aD(n,e,o,r),e=o}return i}function KU(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=oD(n,e,o,r),e=o[o.length-1]}return i}class $m extends qh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new $m(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Yh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(OI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),FI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return aD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Lc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Rv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new $m(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Iv(this.flatCoordinates,0,e,this.stride),this.changed()}}class Qc extends qh{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let l=0,u=i.length;l<u;++l){const f=i[l];dn(s,f.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){dn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Qc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Yh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(DI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),VI(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,ZB(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return jm(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Xa(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a],u=new Xa(e.slice(s,l),r);i.push(u),s=l}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=GI(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const l=i[a],u=Yy(t,r,l,s,.5);dn(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=jO(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new Qc(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return eU(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Fp(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class T0 extends qh{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){dn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new T0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Yh(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=ph(e,t,s[o],s[o+1]);if(u<i){i=u;for(let f=0;f<a;++f)r[f]=s[o+f];r.length=a}}return i}getCoordinates(){return Lc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new qa(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new qa(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(RI(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Iv(this.flatCoordinates,0,e,this.stride),this.changed()}}class Za extends qh{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?dn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Za(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Yh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(DI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),VI(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return jI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return oD(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Qy(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,jm(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Do(this.getExtent());this.flatInteriorPoint_=KI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new qa(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new $m(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=new $m(t.slice(s,l),e);i.push(u),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;XI(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Qy(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=BI(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Za(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return VO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Fp(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function NM(n){if(S0(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Za(s,"XY",[s.length])}class e0 extends qh{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,l=i.length;o<l;++o){const u=i[o],f=s.length,d=u.getEnds();for(let g=0,p=d.length;g<p;++g)d[g]+=f;dn(s,u.getFlatCoordinates()),a.push(d)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;dn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new e0(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Yh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(YB(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),XB(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return JB(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return KU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),YS(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,zS(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=rD(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=iD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new T0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;sD(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=YS(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=rU(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new e0(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Za(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a].slice(),u=l[l.length-1];if(s!==0)for(let d=0,g=l.length;d<g;++d)l[d]-=s;const f=new Za(t.slice(s,u),e,l);i.push(f),s=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return tU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=OO(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const LM=Wa();class Ds{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?gO(this.flatCoordinates_):CI(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Do(this.getExtent());this.flatInteriorPoints_=KI(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=HU(this.flatCoordinates_,this.ends_),t=rD(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=iD(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Yy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=Yy(e,t,a,2,.5);dn(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Cn(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=vr(r)/vr(t);Fo(LM,r[0],r[3],i,-i,0,0,0),zc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,LM,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Ds(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=uO((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Rv(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=jO(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=BI(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new Ds(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Ds.prototype.getFlatCoordinates=Ds.prototype.getOrientedFlatCoordinates;function lD(n,e,t=0,r=n.length-1,i=YU){for(;r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,f=Math.log(l),d=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(t,Math.floor(e-u*d/l+g)),v=Math.min(r,Math.floor(e+(l-u)*d/l+g));lD(n,e,p,v,i)}const s=n[e];let a=t,o=r;for(Pg(n,t,e),i(n[r],s)>0&&Pg(n,t,r);a<o;){for(Pg(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Pg(n,t,o):(o++,Pg(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Pg(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function YU(n,e){return n<e?-1:n>e?1:0}let cD=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!k1(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?i(o):o;k1(e,l)&&(t.leaf?r.push(o):y2(e,l)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!k1(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(k1(e,a)){if(t.leaf||y2(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=od([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),r.leaf){const f=XU(e,r.children,t);if(f!==-1)return r.children.splice(f,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&y2(r,i)?(s.push(r),a.push(o),o=0,l=r,r=r.children[0]):l?(o++,r=l.children[o],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=od(e.slice(t,r+1)),$f(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=od([]),o.leaf=!1,o.height=i;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));OM(e,t,r,u,this.compareMinX);for(let f=t;f<=r;f+=u){const d=Math.min(f+u-1,r);OM(e,f,d,l,this.compareMinY);for(let g=f;g<=d;g+=l){const p=Math.min(g+l-1,d);o.children.push(this._build(e,g,p,i-1))}}return $f(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const u=t.children[l],f=_2(u),d=QU(e,u)-f;d<a?(a=d,s=f<s?f:s,o=u):d===a&&f<s&&(s=f,o=u)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Bg(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=od(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,$f(r,this.toBBox),$f(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=od([e,t]),this.data.height=e.height+1,this.data.leaf=!1,$f(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const l=Gg(e,0,o,this.toBBox),u=Gg(e,o,r,this.toBBox),f=JU(l,u),d=_2(l)+_2(u);f<s?(s=f,i=o,a=d<a?d:a):f===s&&d<a&&(a=d,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:qU,s=e.leaf?this.compareMinY:ZU,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=Gg(e,0,t,s),o=Gg(e,r-t,r,s);let l=b1(a)+b1(o);for(let u=t;u<r-t;u++){const f=e.children[u];Bg(a,e.leaf?s(f):f),l+=b1(a)}for(let u=r-t-1;u>=t;u--){const f=e.children[u];Bg(o,e.leaf?s(f):f),l+=b1(o)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Bg(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():$f(e[t],this.toBBox)}};function XU(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function $f(n,e){Gg(n,0,n.children.length,e,n)}function Gg(n,e,t,r,i){i||(i=od(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Bg(i,n.leaf?r(a):a)}return i}function Bg(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function qU(n,e){return n.minX-e.minX}function ZU(n,e){return n.minY-e.minY}function _2(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function b1(n){return n.maxX-n.minX+(n.maxY-n.minY)}function QU(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function JU(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function y2(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function k1(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function od(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function OM(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;lD(n,a,e,t,i),s.push(e,a,a,t)}}class DM{constructor(e){this.rbush_=new cD(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[tn(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=l,this.items_[tn(o)]=l}this.rbush_.load(r)}remove(e){const t=tn(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[tn(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Xd(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return Sh(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Zc(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class qI extends zo{constructor(e){super(),this.projection=Cn(e.projection),this.attributions_=FM(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=FM(e),this.changed()}setState(e){this.state_=e,this.changed()}}function FM(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const ra={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class fc extends Uo{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class jp extends qI{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Dm,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(pn(this.format_,"`format` must be set when `url` is set"),this.loader_=kM(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:$U;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new DM:null,this.loadedExtentsRtree_=new DM,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new ha(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=tn(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new fc(ra.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Ds||(this.featureChangeKeys_[e]=[Xt(t,bt.CHANGE,this.handleFeatureChange_,this),Xt(t,Yd.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof Ds){const s=this.idIndex_[i];s instanceof Ds?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(pn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=tn(o);this.addToIndex_(l,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],l=tn(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const f=u.getExtent();t.push(f),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(ra.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new fc(ra.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ra.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(ra.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(ss.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(ss.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(kn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new fc(ra.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof Ds||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof Ds||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Sh(this.nullGeometryFeatures_)||dn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=vO(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Om,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const f=u.getGeometry(),d=o;if(o=f instanceof Ds?0:f.closestPointXY(r,i,a,o),o<d){s=u;const g=Math.sqrt(o);l[0]=r-g,l[1]=i-g,l[2]=r+g,l[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=tn(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new fc(ra.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:tn(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Sh(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const l=s[a];i.forEachInExtent(l,function(f){return kc(f.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new fc(ra.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new fc(ra.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new fc(ra.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Xd(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=tn(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(kn),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(ra.REMOVEFEATURE)&&this.dispatchEvent(new fc(ra.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){pn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(kM(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class mi{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new mi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=qy(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ht.IDLE&&t.load(),t.getImageState()===ht.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?tn(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Rh(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Pi{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Pi({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function VM(n){return n[0]>0&&n[1]>0}function ez(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function us(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Pv{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=us(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Pv({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return At()}getImage(e){return At()}getHitDetectionImage(){return At()}getPixelRatio(e){return 1}getImageState(){return At()}getImageSize(){return At()}getOrigin(){return At()}getSize(){return At()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=us(e)}listenImageChange(e){At()}load(){At()}unlistenImageChange(e){At()}ready(){return Promise.resolve()}}class Mv extends Pv{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ht.LOADING:ht.LOADED,this.imageState_===ht.LOADING&&this.ready().then(()=>this.imageState_=ht.LOADED),this.render()}clone(){const e=this.getScale(),t=new Mv({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=da.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,a=Math.ceil(s.size*e),o=Or(a,a);this.draw_(s,o,e),i=o.canvas,da.set(r,null,null,new XO(i,void 0,null,ht.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const z=i;i=s,s=z}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),f=i-u,d=Math.sqrt(l*l+f*f),g=d/l;if(e==="miter"&&g<=r)return g*t;const p=t/2/g,v=t/2*(f/d),E=Math.sqrt((i+p)*(i+p)+v*v)-i;if(this.radius2_===void 0||e==="bevel")return E*2;const I=i*Math.sin(o),T=Math.sqrt(i*i-I*I),M=s-T,L=Math.sqrt(I*I+M*M)/I;if(L<=r){const z=L*t/2-s-i;return 2*Math.max(E,z)}return E*2}createRenderOptions(){let e=Qd,t=Jd,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=Ao(this.stroke_.getColor()??Bm),o=this.stroke_.getWidth()??zm,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Jd,e=this.stroke_.getLineCap()??Qd,r=this.stroke_.getMiterLimit()??Gm);const l=this.calculateLineJoinSize_(t,o,r),u=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:o,size:f,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=as),t.fillStyle=Ao(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Rh(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Or(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,u=o%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=as,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Pl extends Mv{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Pl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Fn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=jM,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Fn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=jM,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function tz(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(pn(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let x2=null;function uD(n,e){if(!x2){const t=new mi({color:"rgba(255,255,255,0.4)"}),r=new Pi({color:"#3399CC",width:1.25});x2=[new Fn({image:new Pl({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return x2}function jM(n){return n.getGeometry()}const nz="#333";class I0{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=us(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new mi({color:nz}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new I0({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof mi?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=us(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Kr={ANIMATING:0,INTERACTING:1},Et={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},N1=[Et.FILL],Dc=[Et.STROKE],hh=[Et.BEGIN_PATH],GM=[Et.CLOSE_PATH];class Gp extends qO{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)i[0]=e[o],i[1]=e[o+1],Th(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(t+=i);let f=e[t],d=e[t+1];const g=this.tmpCoordinate_;let p=!0,v,x,E;for(v=t+i;v<r;v+=i)g[0]=e[v],g[1]=e[v+1],E=LS(u,g),E!==x?(p&&(o[l++]=f,o[l++]=d,p=!1),o[l++]=g[0],o[l++]=g[1]):E===Wr.INTERSECTING?(o[l++]=g[0],o[l++]=g[1],p=!1):p=!0,f=g[0],d=g[1],x=E;return(s&&p||v===t+i)&&(o[l++]=f,o[l++]=d),l}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const l=r[a],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,f,d,g,p;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),g=[];const v=e.getEndss();p=0;for(let x=0,E=v.length;x<E;++x){const I=[];p=this.drawCustomCoordinates_(u,p,v[x],o,I),g.push(I)}this.instructions.push([Et.CUSTOM,l,g,e,r,zS,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,g,e,i||r,zS,s]);break;case"Polygon":case"MultiLineString":d=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),o,d),this.instructions.push([Et.CUSTOM,l,d,e,r,jm,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,d,e,i||r,jm,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([Et.CUSTOM,l,f,e,r,Lc,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,f,e,i||r,Lc,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(u,o),f>l&&(this.instructions.push([Et.CUSTOM,l,f,e,r,Lc,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,f,e,i||r,Lc,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),f=this.coordinates.length,this.instructions.push([Et.CUSTOM,l,f,e,r,void 0,s]),this.hitDetectionInstructions.push([Et.CUSTOM,l,f,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Et.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Et.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Et.END_GEOMETRY?a=t:s==Et.BEGIN_GEOMETRY&&(i[2]=t,QG(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Ao(r||as)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Ao(r||Bm);const i=e.getLineCap();t.lineCap=i!==void 0?i:Qd;const s=e.getLineDash();t.lineDash=s?s.slice():vl;const a=e.getLineDashOffset();t.lineDashOffset=a||El;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Jd;const l=e.getWidth();t.lineWidth=l!==void 0?l:zm;const u=e.getMiterLimit();t.miterLimit=u!==void 0?u:Gm,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[Et.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Et.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!mu(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Et.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=dO(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Fm(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class rz extends Gp{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Th(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Et.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Et.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||Th(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Et.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Et.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class iz extends Gp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[Et.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,vl,El],hh);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(Dc),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,vl,El],hh);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let f=0;for(let d=0,g=o.length;d<g;++d)f=this.drawFlatCoordinates_(l,f,o[d],u);this.hitDetectionInstructions.push(Dc),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Dc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Dc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(hh)}}class BM extends Gp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=r.length;this.instructions.push(hh),this.hitDetectionInstructions.push(hh);for(let u=0;u<l;++u){const f=r[u],d=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,f,i,!0,!o),p=[Et.MOVE_TO_LINE_TO,d,g];this.instructions.push(p),this.hitDetectionInstructions.push(p),o&&(this.instructions.push(GM),this.hitDetectionInstructions.push(GM)),t=f}return a&&(this.instructions.push(N1),this.hitDetectionInstructions.push(N1)),o&&(this.instructions.push(Dc),this.hitDetectionInstructions.push(Dc)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_FILL_STYLE,as]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,vl,El]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const f=[Et.CIRCLE,u];this.instructions.push(hh,f),this.hitDetectionInstructions.push(hh,f),i.fillStyle!==void 0&&(this.instructions.push(N1),this.hitDetectionInstructions.push(N1)),i.strokeStyle!==void 0&&(this.instructions.push(Dc),this.hitDetectionInstructions.push(Dc)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_FILL_STYLE,as]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,vl,El]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_FILL_STYLE,as]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,vl,El]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let f=0;for(let d=0,g=o.length;d<g;++d)f=this.drawFlatCoordinatess_(l,f,o[d],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=Ku(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function sz(n,e,t,r,i){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+i<r;){const[u,f]=l.slice(-2),d=e[a+i],g=e[a+i+1],p=Math.sqrt((d-u)*(d-u)+(g-f)*(g-f));if(o+=p,o>=n){const v=(n-o+p)/p,x=Os(u,d,v),E=Os(f,g,v);l.push(x,E),s.push(l),l=[x,E],o==n&&(a+=i),o=0}else if(o<n)l.push(e[a+i],e[a+i+1]),a+=i;else{const v=p-o,x=Os(u,d,v/p),E=Os(f,g,v/p);l.push(x,E),s.push(l),l=[x,E],o=0,a+=i}}return o>0&&s.push(l),s}function az(n,e,t,r,i){let s=t,a=t,o=0,l=0,u=t,f,d,g,p,v,x,E,I,T,M;for(d=t;d<r;d+=i){const k=e[d],L=e[d+1];v!==void 0&&(T=k-v,M=L-x,p=Math.sqrt(T*T+M*M),E!==void 0&&(l+=g,f=Math.acos((E*T+I*M)/(g*p)),f>n&&(l>o&&(o=l,s=u,a=d),l=0,u=d-i)),g=p,E=T,I=M),v=k,x=L}return l+=p,l>o?[u,d]:[s,a]}const Jy={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class oz extends Gp{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[as]={fillStyle:as},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let l=o.length;const u=e.getType();let f=null,d=e.getStride();if(a.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Ui(this.maxExtent,e.getExtent()))return;let g;if(f=e.getFlatCoordinates(),u=="LineString")g=[f.length];else if(u=="MultiLineString")g=e.getEnds();else if(u=="Polygon")g=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const E=e.getEndss();g=[];for(let I=0,T=E.length;I<T;++I)g.push(E[I][0])}this.beginGeometry(e,t,r);const p=a.repeat,v=p?void 0:a.textAlign;let x=0;for(let E=0,I=g.length;E<I;++E){let T;p?T=sz(p*this.resolution,f,x,g[E],d):T=[f.slice(x,g[E])];for(let M=0,k=T.length;M<k;++M){const L=T[M];let z=0,P=L.length;if(v==null){const b=az(a.maxAngle,L,0,L.length,2);z=b[0],P=b[1]}for(let b=z;b<P;b+=d)o.push(L[b],L[b+1]);const C=o.length;x=g[E],this.drawChars_(l,C),l=C}}this.endGeometry(t)}else{let g=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),d=2;break;case"Polygon":f=e.getFlatInteriorPoint(),a.overflow||g.push(f[2]/this.resolution),d=3;break;case"MultiPolygon":const k=e.getFlatInteriorPoints();f=[];for(let L=0,z=k.length;L<z;L+=3)a.overflow||g.push(k[L+2]/this.resolution),f.push(k[L],k[L+1]);if(f.length===0)return;d=2;break}const p=this.appendFlatPointCoordinates(f,d);if(p===l)return;if(g&&(p-l)/2!==f.length/d){let k=l/2;g=g.filter((L,z)=>{const P=o[(k+z)*2]===f[z*d]&&o[(k+z)*2+1]===f[z*d+1];return P||--k,P})}this.saveTextStates_();const v=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,x=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let E=a.padding;if(E!=uh&&(a.scale[0]<0||a.scale[1]<0)){let k=a.padding[0],L=a.padding[1],z=a.padding[2],P=a.padding[3];a.scale[0]<0&&(L=-L,P=-P),a.scale[1]<0&&(k=-k,z=-z),E=[k,L,z,P]}const I=this.pixelRatio;this.instructions.push([Et.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,E==uh?uh:E.map(function(k){return k*I}),v,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const T=1/I,M=v?v.slice(0):null;M&&(M[1]=as),this.hitDetectionInstructions.push([Et.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[T,T],NaN,this.declutterMode_,this.declutterImageWithText_,E,M,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?as:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||Um,justify:t.justify,textBaseline:t.textBaseline||Zy,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Jy[i.textBaseline],f=this.textOffsetY_*l,d=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Et.DRAW_CHARS,e,t,u,i.overflow,o,i.maxAngle,l,f,s,g*l,d,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Et.DRAW_CHARS,e,t,u,i.overflow,o&&as,i.maxAngle,l,f,s,g*l,d,a,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Ao(a.getColor()||as)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const x=o.getLineDash(),E=o.getLineDashOffset(),I=o.getWidth(),T=o.getMiterLimit();s.lineCap=o.getLineCap()||Qd,s.lineDash=x?x.slice():vl,s.lineDashOffset=E===void 0?El:E,s.lineJoin=o.getLineJoin()||Jd,s.lineWidth=I===void 0?zm:I,s.miterLimit=T===void 0?Gm:T,s.strokeStyle=Ao(o.getColor()||Bm)}r=this.textState_;const l=e.getFont()||ZO;IU(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||Zy,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||uh,r.scale=u===void 0?[1,1]:u;const f=e.getOffsetX(),d=e.getOffsetY(),g=e.getRotateWithView(),p=e.getKeepUpright(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=g===void 0?!1:g,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=v===void 0?0:v,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:tn(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+tn(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const lz={Circle:BM,Default:Gp,Image:rz,LineString:iz,Polygon:BM,Text:oz};class cz{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=lz[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function uz(n,e,t,r,i,s,a,o,l,u,f,d,g=!0){let p=n[e],v=n[e+1],x=0,E=0,I=0,T=0;function M(){x=p,E=v,e+=r,p=n[e],v=n[e+1],T+=I,I=Math.sqrt((p-x)*(p-x)+(v-E)*(v-E))}do M();while(e<t-r&&T+I<s);let k=I===0?0:(s-T)/I;const L=Os(x,p,k),z=Os(E,v,k),P=e-r,C=T,b=s+o*l(u,i,f);for(;e<t-r&&T+I<b;)M();k=I===0?0:(b-T)/I;const F=Os(x,p,k),j=Os(E,v,k);let U=!1;if(g)if(d){const be=[L,z,F,j];NO(be,0,4,2,d,be,be),U=be[0]>be[2]}else U=L>F;const V=Math.PI,Te=[],Me=P+r===e;e=P,I=0,T=C,p=n[e],v=n[e+1];let De;if(Me){M(),De=Math.atan2(v-E,p-x),U&&(De+=De>0?-V:V);const be=(F+L)/2,le=(j+z)/2;return Te[0]=[be,le,(b-s)/2,De,i],Te}i=i.replace(/\n/g," ");for(let be=0,le=i.length;be<le;){M();let Ae=Math.atan2(v-E,p-x);if(U&&(Ae+=Ae>0?-V:V),De!==void 0){let ee=Ae-De;if(ee+=ee>V?-2*V:ee<-V?2*V:0,Math.abs(ee)>a)return null}De=Ae;const Ie=be;let Y=0;for(;be<le;++be){const ee=U?le-be-1:be,me=o*l(u,i[ee],f);if(e+r<t&&T+I<s+Y+me/2)break;Y+=me}if(be===Ie)continue;const O=U?i.substring(le-Ie,le-be):i.substring(Ie,be);k=I===0?0:(s+Y/2-T)/I;const te=Os(x,p,k),ne=Os(E,v,k);Te.push([te,ne,Y/2,Ae,O]),s+=Y}return Te}class hD{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Xy(),{get:(e,t)=>{if(typeof Xy()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Wf=Us(),dc=[],ll=[],cl=[],gc=[];function UM(n){return n[3].declutterBox}const zM=new RegExp("[-----]");function v2(n,e){return e==="start"?e=zM.test(n)?"right":"left":e==="end"&&(e=zM.test(n)?"left":"right"),Jy[e]}function hz(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function fz(n,e,t){return t%2===0&&(n+=e),n}class dz{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Wa(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new hD:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,f=[l.scale[0]*u,l.scale[1]*u],d=l.justify?Jy[l.justify]:v2(Array.isArray(e)?e[0]:e,l.textAlign||Um),g=i&&a.lineWidth?a.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(hz,[]),{width:v,height:x,widths:E,heights:I,lineWidths:T}=RU(l,p),M=v+g,k=[],L=(M+2)*f[0],z=(x+g)*f[1],P={width:L<0?Math.floor(L):Math.ceil(L),height:z<0?Math.floor(z):Math.ceil(z),contextInstructions:k};(f[0]!=1||f[1]!=1)&&k.push("scale",f),i&&(k.push("strokeStyle",a.strokeStyle),k.push("lineWidth",g),k.push("lineCap",a.lineCap),k.push("lineJoin",a.lineJoin),k.push("miterLimit",a.miterLimit),k.push("setLineDash",[a.lineDash]),k.push("lineDashOffset",a.lineDashOffset)),r&&k.push("fillStyle",o.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const C=.5-d;let b=d*M+C*g;const F=[],j=[];let U=0,V=0,Te=0,Me=0,De;for(let be=0,le=p.length;be<le;be+=2){const Ae=p[be];if(Ae===`
`){V+=U,U=0,b=d*M+C*g,++Me;continue}const Ie=p[be+1]||l.font;Ie!==De&&(i&&F.push("font",Ie),r&&j.push("font",Ie),De=Ie),U=Math.max(U,I[Te]);const Y=[Ae,b+C*E[Te]+d*(E[Te]-T[Me]),.5*(g+U)+V];b+=E[Te],i&&F.push("strokeText",Y),r&&j.push("fillText",Y),++Te}return Array.prototype.push.apply(k,F),Array.prototype.push.apply(k,j),this.labels_[s]=P,P}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,l,u,f,d,g,p,v,x,E){o*=g[0],l*=g[1];let I=r-o,T=i-l;const M=s+u>e?e-u:s,k=a+f>t?t-f:a,L=v[3]+M*g[0]+v[1],z=v[0]+k*g[1]+v[2],P=I-v[3],C=T-v[0];(x||d!==0)&&(dc[0]=P,gc[0]=P,dc[1]=C,ll[1]=C,ll[0]=P+L,cl[0]=ll[0],cl[1]=C+z,gc[1]=cl[1]);let b;return d!==0?(b=Fo(Wa(),r,i,1,1,d,-r,-i),Nr(b,dc),Nr(b,ll),Nr(b,cl),Nr(b,gc),Zc(Math.min(dc[0],ll[0],cl[0],gc[0]),Math.min(dc[1],ll[1],cl[1],gc[1]),Math.max(dc[0],ll[0],cl[0],gc[0]),Math.max(dc[1],ll[1],cl[1],gc[1]),Wf)):Zc(Math.min(P,P+L),Math.min(C,C+z),Math.max(P,P+L),Math.max(C,C+z),Wf),p&&(I=Math.round(I),T=Math.round(T)),{drawImageX:I,drawImageY:T,drawImageW:M,drawImageH:k,originX:u,originY:f,declutterBox:{minX:Wf[0],minY:Wf[1],maxX:Wf[2],maxY:Wf[3],value:E},canvasTransform:b,scale:g}}replayImageOrLabel_(e,t,r,i,s,a,o){const l=!!(a||o),u=i.declutterBox,f=o?o[2]*i.scale[0]/2:0;return u.minX-f<=t[0]&&u.maxX+f>=0&&u.minY-f<=t[1]&&u.maxY+f>=0&&(l&&this.replayTextBackground_(e,dc,ll,cl,gc,a,o),CU(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Nr(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],l=this.pixelRatio,u=v2(Array.isArray(e)?e[0]:e,s.textAlign||Um),f=Jy[s.textBaseline||Zy],d=o&&o.lineWidth?o.lineWidth:0,g=a.width/l-2*s.scale[0],p=u*g+2*(.5-u)*d,v=f*a.height/l+2*(.5-f)*d;return{label:a,anchorX:p,anchorY:v}}execute_(e,t,r,i,s,a,o,l){const u=this.zIndexContext_;let f;this.pixelCoordinates_&&mu(r,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=zc(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),jB(this.renderedTransform_,r));let d=0;const g=i.length;let p=0,v,x,E,I,T,M,k,L,z,P,C,b,F,j=0,U=0;const V=this.coordinateCache_,Te=this.viewRotation_,Me=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,De={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Te},be=this.instructions!=i||this.overlaps?0:200;let le,Ae,Ie,Y;for(;d<g;){const O=i[d];switch(O[0]){case Et.BEGIN_GEOMETRY:le=O[1],Y=O[3],le.getGeometry()?o!==void 0&&!Ui(o,Y.getExtent())?d=O[2]+1:++d:d=O[2],u&&(u.zIndex=O[4]);break;case Et.BEGIN_PATH:j>be&&(this.fill_(e),j=0),U>be&&(e.stroke(),U=0),!j&&!U&&(e.beginPath(),T=NaN,M=NaN),++d;break;case Et.CIRCLE:p=O[1];const ne=f[p],ee=f[p+1],me=f[p+2],Se=f[p+3],Ne=me-ne,se=Se-ee,re=Math.sqrt(Ne*Ne+se*se);e.moveTo(ne+re,ee),e.arc(ne,ee,re,0,2*Math.PI,!0),++d;break;case Et.CLOSE_PATH:e.closePath(),++d;break;case Et.CUSTOM:p=O[1],v=O[2];const D=O[3],Ye=O[4],he=O[5];De.geometry=D,De.feature=le,d in V||(V[d]=[]);const He=V[d];he?he(f,p,v,2,He):(He[0]=f[p],He[1]=f[p+1],He.length=2),u&&(u.zIndex=O[6]),Ye(He,De),++d;break;case Et.DRAW_IMAGE:p=O[1],v=O[2],z=O[3],x=O[4],E=O[5];let ue=O[6];const W=O[7],ae=O[8],ot=O[9],lt=O[10];let _t=O[11];const Dt=O[12];let Nn=O[13];I=O[14]||"declutter";const rn=O[15];if(!z&&O.length>=20){P=O[19],C=O[20],b=O[21],F=O[22];const Hn=this.drawLabelWithPointPlacement_(P,C,b,F);z=Hn.label,O[3]=z;const Xi=O[23];x=(Hn.anchorX-Xi)*this.pixelRatio,O[4]=x;const Ar=O[24];E=(Hn.anchorY-Ar)*this.pixelRatio,O[5]=E,ue=z.height,O[6]=ue,Nn=z.width,O[13]=Nn}let Ir;O.length>25&&(Ir=O[25]);let Jr,Yi,Oi;O.length>17?(Jr=O[16],Yi=O[17],Oi=O[18]):(Jr=uh,Yi=null,Oi=null),lt&&Me?_t+=Te:!lt&&!Me&&(_t-=Te);let jr=0;for(;p<v;p+=2){if(Ir&&Ir[jr++]<Nn/this.pixelRatio)continue;const Hn=this.calculateImageOrLabelDimensions_(z.width,z.height,f[p],f[p+1],Nn,ue,x,E,ae,ot,_t,Dt,s,Jr,!!Yi||!!Oi,le),Xi=[e,t,z,Hn,W,Yi,Oi];if(l){let Ar,Kn,Rr;if(rn){const Wt=v-p;if(!rn[Wt]){rn[Wt]={args:Xi,declutterMode:I};continue}const er=rn[Wt];Ar=er.args,Kn=er.declutterMode,delete rn[Wt],Rr=UM(Ar)}let Cr,gr;if(Ar&&(Kn!=="declutter"||!l.collides(Rr))&&(Cr=!0),(I!=="declutter"||!l.collides(Hn.declutterBox))&&(gr=!0),Kn==="declutter"&&I==="declutter"){const Wt=Cr&&gr;Cr=Wt,gr=Wt}Cr&&(Kn!=="none"&&l.insert(Rr),this.replayImageOrLabel_.apply(this,Ar)),gr&&(I!=="none"&&l.insert(Hn.declutterBox),this.replayImageOrLabel_.apply(this,Xi))}else this.replayImageOrLabel_.apply(this,Xi)}++d;break;case Et.DRAW_CHARS:const Ho=O[1],ys=O[2],Di=O[3],Ko=O[4];F=O[5];const xs=O[6],Ys=O[7],Ea=O[8];b=O[9];const ei=O[10];P=O[11],Array.isArray(P)&&(P=P.reduce(fz,"")),C=O[12];const wa=[O[13],O[13]];I=O[14]||"declutter";const vs=O[15],Es=this.textStates[C],Gr=Es.font,ti=[Es.scale[0]*Ys,Es.scale[1]*Ys];let un;Gr in this.widths_?un=this.widths_[Gr]:(un={},this.widths_[Gr]=un);const ws=GI(f,Ho,ys,2),Ss=Math.abs(ti[0])*PM(Gr,P,un);if(Ko||Ss<=ws){const Hn=this.textStates[C].textAlign,Xi=(ws-Ss)*v2(P,Hn),Ar=uz(f,Ho,ys,2,P,Xi,xs,Math.abs(ti[0]),PM,Gr,un,Me?0:this.viewRotation_,vs);e:if(Ar){const Kn=[];let Rr,Cr,gr,Wt,er;if(b)for(Rr=0,Cr=Ar.length;Rr<Cr;++Rr){er=Ar[Rr],gr=er[4],Wt=this.createLabel(gr,C,"",b),x=er[2]+(ti[0]<0?-ei:ei),E=Di*Wt.height+(.5-Di)*2*ei*ti[1]/ti[0]-Ea;const lr=this.calculateImageOrLabelDimensions_(Wt.width,Wt.height,er[0],er[1],Wt.width,Wt.height,x,E,0,0,er[3],wa,!1,uh,!1,le);if(l&&I==="declutter"&&l.collides(lr.declutterBox))break e;Kn.push([e,t,Wt,lr,1,null,null])}if(F)for(Rr=0,Cr=Ar.length;Rr<Cr;++Rr){er=Ar[Rr],gr=er[4],Wt=this.createLabel(gr,C,F,""),x=er[2],E=Di*Wt.height-Ea;const lr=this.calculateImageOrLabelDimensions_(Wt.width,Wt.height,er[0],er[1],Wt.width,Wt.height,x,E,0,0,er[3],wa,!1,uh,!1,le);if(l&&I==="declutter"&&l.collides(lr.declutterBox))break e;Kn.push([e,t,Wt,lr,1,null,null])}l&&I!=="none"&&l.load(Kn.map(UM));for(let lr=0,qi=Kn.length;lr<qi;++lr)this.replayImageOrLabel_.apply(this,Kn[lr])}}++d;break;case Et.END_GEOMETRY:if(a!==void 0){le=O[1];const Hn=a(le,Y,I);if(Hn)return Hn}++d;break;case Et.FILL:be?j++:this.fill_(e),++d;break;case Et.MOVE_TO_LINE_TO:for(p=O[1],v=O[2],Ae=f[p],Ie=f[p+1],e.moveTo(Ae,Ie),T=Ae+.5|0,M=Ie+.5|0,p+=2;p<v;p+=2)Ae=f[p],Ie=f[p+1],k=Ae+.5|0,L=Ie+.5|0,(p==v-2||k!==T||L!==M)&&(e.lineTo(Ae,Ie),T=k,M=L);++d;break;case Et.SET_FILL_STYLE:this.alignAndScaleFill_=O[2],j&&(this.fill_(e),j=0,U&&(e.stroke(),U=0)),e.fillStyle=O[1],++d;break;case Et.SET_STROKE_STYLE:U&&(e.stroke(),U=0),this.setStrokeStyle_(e,O),++d;break;case Et.STROKE:be?U++:e.stroke(),++d;break;default:++d;break}}j&&this.fill_(e),U&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const nh=["Polygon","Circle","LineString","Image","Text","Default"],fD=["Image","Text"],gz=nh.filter(n=>!fD.includes(n));class mz{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Wa(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new dz(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,l=Fo(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Or(o,o));const f=this.hitDetectionContext_;f.canvas.width!==o||f.canvas.height!==o?(f.canvas.width=o,f.canvas.height=o):u||f.clearRect(0,0,o,o);let d;this.renderBuffer_!==void 0&&(d=Us(),im(d,e),Fm(d,t*(this.renderBuffer_+i),d));const g=pz(i);let p;function v(L,z,P){const C=f.getImageData(0,0,o,o).data;for(let b=0,F=g.length;b<F;b++)if(C[g[b]]>0){if(!a||P==="none"||p!=="Image"&&p!=="Text"||a.includes(L)){const j=(g[b]-3)/4,U=i-j%o,V=i-(j/o|0),Te=s(L,z,U*U+V*V);if(Te)return Te}f.clearRect(0,0,o,o);break}}const x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(_l);let E,I,T,M,k;for(E=x.length-1;E>=0;--E){const L=x[E].toString();for(T=this.executorsByZIndex_[L],I=nh.length-1;I>=0;--I)if(p=nh[I],M=T[p],M!==void 0&&(k=M.executeHitDetection(f,l,r,v,d),k))return k}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return zc(o,0,8,2,e,o),o}isEmpty(){return Sh(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?ZG:_l),a=a||nh;const u=nh.length;for(let f=0,d=l.length;f<d;++f){const g=l[f].toString(),p=this.executorsByZIndex_[g];for(let v=0,x=a.length;v<x;++v){const E=a[v],I=p[E];if(I!==void 0){const T=o===null?void 0:I.getZIndexContext(),M=T?T.getContext():e,k=this.maxExtent_&&E!=="Image"&&E!=="Text";if(k&&(M.save(),this.clip(M,r)),!T||E==="Text"||E==="Image"?I.execute(M,t,r,i,s,o):T.pushFunction(L=>I.execute(L,t,r,i,s,o)),k&&M.restore(),T){T.offset();const L=l[f]*u+nh.indexOf(E);this.deferredZIndexContexts_[L]||(this.deferredZIndexContexts_[L]=[]),this.deferredZIndexContexts_[L].push(T)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(_l);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const E2={};function pz(n){if(E2[n]!==void 0)return E2[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=r[o];l||(l=[],r[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return E2[n]=i,i}function $M(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let t0=class dD extends Pv{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;pn(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||tn(a)),pn(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),pn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=ht.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?ht.LOADED:ht.IDLE:l=ht.LOADING:l=ht.LOADED),this.color_=e.color!==void 0?Rh(e.color):null,this.iconImage_=qy(a,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,f;if(e.size)[u,f]=e.size;else{const d=this.getImage(1);if(d.width&&d.height)u=d.width,f=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale($M(p[0],p[1],e.width,e.height))};this.listenImageChange(g);return}}u!==void 0&&this.setScale($M(u,f,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new dD({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=qy(null,e,this.crossOrigin_,ht.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ht.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ht.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(bt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(bt.CHANGE,e)}ready(){return this.iconImage_.ready()}};const So=.5;function _z(n,e,t,r,i,s,a,o,l){const u=i,f=n[0]*So,d=n[1]*So,g=Or(f,d);g.imageSmoothingEnabled=!1;const p=g.canvas,v=new MU(g,So,i,null,a,o,null),x=t.length,E=Math.floor((256*256*256-1)/x),I={};for(let M=1;M<=x;++M){const k=t[M-1],L=k.getStyleFunction()||r;if(!L)continue;let z=L(k,s);if(!z)continue;Array.isArray(z)||(z=[z]);const C=(M*E).toString(16).padStart(7,"#00000");for(let b=0,F=z.length;b<F;++b){const j=z[b],U=j.getGeometryFunction()(k);if(!U||!Ui(u,U.getExtent()))continue;const V=j.clone(),Te=V.getFill();Te&&Te.setColor(C);const Me=V.getStroke();Me&&(Me.setColor(C),Me.setLineDash(null)),V.setText(void 0);const De=j.getImage();if(De){const Ie=De.getImageSize();if(!Ie)continue;const Y=Or(Ie[0],Ie[1],void 0,{alpha:!1}),O=Y.canvas;Y.fillStyle=C,Y.fillRect(0,0,O.width,O.height),V.setImage(new t0({img:O,anchor:De.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:De.getOrigin(),opacity:1,size:De.getSize(),scale:De.getScale(),rotation:De.getRotation(),rotateWithView:De.getRotateWithView()}))}const be=V.getZIndex()||0;let le=I[be];le||(le={},I[be]=le,le.Polygon=[],le.Circle=[],le.LineString=[],le.Point=[]);const Ae=U.getType();if(Ae==="GeometryCollection"){const Ie=U.getGeometriesArrayRecursive();for(let Y=0,O=Ie.length;Y<O;++Y){const te=Ie[Y];le[te.getType().replace("Multi","")].push(te,V)}}else le[Ae.replace("Multi","")].push(U,V)}}const T=Object.keys(I).map(Number).sort(_l);for(let M=0,k=T.length;M<k;++M){const L=I[T[M]];for(const z in L){const P=L[z];for(let C=0,b=P.length;C<b;C+=2){v.setStyle(P[C+1]);for(let F=0,j=e.length;F<j;++F)v.setTransform(e[F]),v.drawGeometry(P[C])}}}return g.getImageData(0,0,p.width,p.height)}function yz(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*So),s=Math.floor(Math.round(n[1])*So),a=(Dn(i,0,t.width-1)+Dn(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],f=t.data[a+2]+256*(l+256*o),d=Math.floor((256*256*256-1)/e.length);f&&f%d===0&&r.push(e[f/d-1])}return r}class gD extends Uo{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const xz=5;class vz extends kp{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=xz}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return At()}getData(e){return null}prepareFrame(e){return At()}renderFrame(e,t){return At()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ht.LOADED||t.getState()===ht.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ht.LOADED&&t!=ht.ERROR&&e.addEventListener(bt.CHANGE,this.boundHandleImageChange_),t==ht.IDLE&&(e.load(),t=e.getState()),t==ht.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const WM=[];let ld=null;function Ez(){ld=Or(1,1,void 0,{willReadFrequently:!0})}class ZI extends vz{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Wa(),this.pixelTransform=Wa(),this.inversePixelTransform=Wa(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){ld||Ez(),ld.clearRect(0,0,1,1);let i;try{ld.drawImage(e,t,r,1,1,0,0,1,1),i=ld.getImageData(0,0,1,1).data}catch{return ld=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&mu(Rh(e.style.backgroundColor),Rh(r)))){const o=e.firstElementChild;Oc(o)&&(a=o.getContext("2d"))}if(a&&zB(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=js?$O():document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Or();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Xh(r),s=Ev(r),a=vv(r),o=xv(r);Nr(t.coordinateToPixelTransform,i),Nr(t.coordinateToPixelTransform,s),Nr(t.coordinateToPixelTransform,a),Nr(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;Nr(l,i),Nr(l,s),Nr(l,a),Nr(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(Bt(r)/i*a),l=Math.round(vr(r)/i*a);Fo(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-l/2),kO(this.inversePixelTransform,this.pixelTransform);const u=UB(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const f=this.context.canvas;f.width!=o||f.height!=l?(f.width=o,f.height=l):this.context.clearRect(0,0,o,l),u!==f.style.transform&&(f.style.transform=u)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new gD(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(fa.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(fa.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new hD),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(fa.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(fa.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const l=s/2,u=a/2,f=i/t,d=-f,g=-e[0]+o,p=-e[1];return Fo(this.tempTransform,l,u,f,d,-r,g,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class wz extends ZI{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Us(),this.wrappedRenderedExtent_=Us(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,f=l.getExtent(),d=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),p=t.pixelRatio,v=t.viewHints,x=!(v[Kr.ANIMATING]||v[Kr.INTERACTING]),E=this.context,I=Math.round(Bt(i)/o*p),T=Math.round(vr(i)/o*p),M=d.getWrapX()&&l.canWrapX(),k=M?Bt(f):null,L=M?Math.ceil((i[2]-f[2])/k)+1:1;let z=M?Math.floor((i[0]-f[0])/k):0;do{let P=this.getRenderTransform(a,o,0,p,I,T,z*k);t.declutter&&(P=P.slice(0)),e.execute(E,[E.canvas.width,E.canvas.height],P,u,x,r===void 0?nh:r?fD:gz,r?g&&t.declutter[g]:void 0)}while(++z<L)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Or(this.context.canvas.width,this.context.canvas.height,WM))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Cv(this.context),WM.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(fa.PRERENDER)||this.getLayer().hasListener(fa.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const l=Io(r.extent);o=Ui(l,e.extent),this.clipped_=o&&!kc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),f=[],d=r[0]*So,g=r[1]*So;f.push(this.getRenderTransform(i,s,a,So,d,g,0).slice());const p=u.getSource(),v=o.getExtent();if(p.getWrapX()&&o.canWrapX()&&!kc(v,l)){let x=l[0];const E=Bt(v);let I=0,T;for(;x<v[0];)--I,T=E*I,f.push(this.getRenderTransform(i,s,a,So,d,g,T).slice()),x+=E;for(I=0,x=l[2];x>v[2];)++I,T=E*I,f.push(this.getRenderTransform(i,s,a,So,d,g,T).slice()),x-=E}this.hitDetectionImageData_=_z(r,f,this.renderedFeatures_,u.getStyleFunction(),l,s,a,MM(s,this.renderedPixelRatio_))}t(yz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),u={},f=function(g,p,v){const x=tn(g),E=u[x];if(E){if(E!==!0&&v<E.distanceSq){if(v===0)return u[x]=!0,s.splice(s.lastIndexOf(E),1),i(g,l,p);E.geometry=p,E.distanceSq=v}}else{if(v===0)return u[x]=!0,i(g,l,p);s.push(u[x]={feature:g,layer:l,geometry:p,distanceSq:v,callback:i})}},d=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,f,d?t.declutter?.[d]?.all().map(g=>g.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Kr.ANIMATING],s=e.viewHints[Kr.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,f=u.projection,d=u.resolution,g=e.pixelRatio,p=t.getRevision(),v=t.getRenderBuffer();let x=t.getRenderOrder();x===void 0&&(x=kU);const E=u.center.slice(),I=Fm(l,v*d),T=I.slice(),M=[I.slice()],k=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!kc(k,e.extent)){const Te=Bt(k),Me=Math.max(Bt(I)/2,Te);I[0]=k[0]-Me,I[2]=k[2]+Me,wO(E,f);const De=xO(M[0],f);De[0]<k[0]&&De[2]<k[2]?M.push([De[0]+Te,De[1],De[2]+Te,De[3]]):De[0]>k[0]&&De[2]>k[2]&&M.push([De[0]-Te,De[1],De[2]-Te,De[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==p&&this.renderedRenderOrder_==x&&this.renderedFrameDeclutter_===!!e.declutter&&kc(this.wrappedRenderedExtent_,I))return mu(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=E,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const L=new cz(tD(d,g),I,d,g);let z;for(let Te=0,Me=M.length;Te<Me;++Te)r.loadFeatures(M[Te],d,f);const P=MM(d,g);let C=!0;const b=(Te,Me)=>{let De;const be=Te.getStyleFunction()||t.getStyleFunction();if(be&&(De=be(Te,d)),De){const le=this.renderFeature(Te,P,De,L,z,this.getLayer().getDeclutter(),Me);C=C&&!le}},F=bO(I),j=r.getFeaturesInExtent(F);x&&j.sort(x);for(let Te=0,Me=j.length;Te<Me;++Te)b(j[Te],Te);this.renderedFeatures_=j,this.ready=C;const U=L.finish(),V=new mz(I,d,g,r.getOverlaps(),U,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=p,this.renderedRenderOrder_=x,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=I,this.renderedCenter_=E,this.renderedProjection_=f,this.renderedPixelRatio_=g,this.replayGroup_=V,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,f=r.length;u<f;++u)l=bM(i,e,r[u],t,this.boundHandleStyleImageChange_,s,a,o)||l;else l=bM(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return l}}let Qh=0;const Bi=1<<Qh++,Kt=1<<Qh++,os=1<<Qh++,Fa=1<<Qh++,Ch=1<<Qh++,Ug=1<<Qh++,L1=Math.pow(2,Qh)-1,QI={[Bi]:"boolean",[Kt]:"number",[os]:"string",[Fa]:"color",[Ch]:"number[]",[Ug]:"size"},Sz=Object.keys(QI).map(Number).sort(_l);function Tz(n){return n in QI}function zg(n){const e=[];for(const t of Sz)$g(n,t)&&e.push(QI[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function $g(n,e){return(n&e)===e}function mc(n,e){return n===e}class kr{constructor(e,t){if(!Tz(e))throw new Error(`literal expressions must have a specific type, got ${zg(e)}`);this.type=e,this.value=t}}class Iz{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function mD(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function gi(n,e,t){switch(typeof n){case"boolean":{if(mc(e,os))return new kr(os,n?"true":"false");if(!$g(e,Bi))throw new Error(`got a boolean, but expected ${zg(e)}`);return new kr(Bi,n)}case"number":{if(mc(e,Ug))return new kr(Ug,us(n));if(mc(e,Bi))return new kr(Bi,!!n);if(mc(e,os))return new kr(os,n.toString());if(!$g(e,Kt))throw new Error(`got a number, but expected ${zg(e)}`);return new kr(Kt,n)}case"string":{if(mc(e,Fa))return new kr(Fa,$I(n));if(mc(e,Bi))return new kr(Bi,!!n);if(!$g(e,os))throw new Error(`got a string, but expected ${zg(e)}`);return new kr(os,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Dz(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(mc(e,Ug)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new kr(Ug,n)}if(mc(e,Fa)){if(n.length===3)return new kr(Fa,[...n,1]);if(n.length===4)return new kr(Fa,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!$g(e,Ch))throw new Error(`got an array of numbers, but expected ${zg(e)}`);return new kr(Ch,n)}const ke={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Az={[ke.Get]:Pt(Ot(1,1/0),HM),[ke.Var]:Pt(Ot(1,1),Rz),[ke.Has]:Pt(Ot(1,1/0),HM),[ke.Id]:Pt(Cz,Hf),[ke.Concat]:Pt(Ot(2,1/0),an(os)),[ke.GeometryType]:Pt(Pz,Hf),[ke.LineMetric]:Pt(Hf),[ke.Resolution]:Pt(w2,Hf),[ke.Zoom]:Pt(w2,Hf),[ke.Time]:Pt(w2,Hf),[ke.Any]:Pt(Ot(2,1/0),an(Bi)),[ke.All]:Pt(Ot(2,1/0),an(Bi)),[ke.Not]:Pt(Ot(1,1),an(Bi)),[ke.Equal]:Pt(Ot(2,2),an(L1)),[ke.NotEqual]:Pt(Ot(2,2),an(L1)),[ke.GreaterThan]:Pt(Ot(2,2),an(Kt)),[ke.GreaterThanOrEqualTo]:Pt(Ot(2,2),an(Kt)),[ke.LessThan]:Pt(Ot(2,2),an(Kt)),[ke.LessThanOrEqualTo]:Pt(Ot(2,2),an(Kt)),[ke.Multiply]:Pt(Ot(2,1/0),KM),[ke.Coalesce]:Pt(Ot(2,1/0),KM),[ke.Divide]:Pt(Ot(2,2),an(Kt)),[ke.Add]:Pt(Ot(2,1/0),an(Kt)),[ke.Subtract]:Pt(Ot(2,2),an(Kt)),[ke.Clamp]:Pt(Ot(3,3),an(Kt)),[ke.Mod]:Pt(Ot(2,2),an(Kt)),[ke.Pow]:Pt(Ot(2,2),an(Kt)),[ke.Abs]:Pt(Ot(1,1),an(Kt)),[ke.Floor]:Pt(Ot(1,1),an(Kt)),[ke.Ceil]:Pt(Ot(1,1),an(Kt)),[ke.Round]:Pt(Ot(1,1),an(Kt)),[ke.Sin]:Pt(Ot(1,1),an(Kt)),[ke.Cos]:Pt(Ot(1,1),an(Kt)),[ke.Atan]:Pt(Ot(1,2),an(Kt)),[ke.Sqrt]:Pt(Ot(1,1),an(Kt)),[ke.Match]:Pt(Ot(4,1/0),YM,bz),[ke.Between]:Pt(Ot(3,3),an(Kt)),[ke.Interpolate]:Pt(Ot(6,1/0),YM,kz),[ke.Case]:Pt(Ot(3,1/0),Mz,Nz),[ke.In]:Pt(Ot(2,2),Lz),[ke.Number]:Pt(Ot(1,1/0),an(L1)),[ke.String]:Pt(Ot(1,1/0),an(L1)),[ke.Array]:Pt(Ot(1,1/0),an(Kt)),[ke.Color]:Pt(Ot(1,4),an(Kt)),[ke.Band]:Pt(Ot(1,3),an(Kt)),[ke.Palette]:Pt(Ot(2,2),Oz),[ke.ToString]:Pt(Ot(1,1),an(Bi|Kt|os|Fa))};function HM(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new kr(Kt,a);break}case"string":{i[s]=new kr(os,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function Rz(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new kr(os,r)]}function Cz(n,e,t){t.featureId=!0}function Pz(n,e,t){t.geometryType=!0}function w2(n,e,t){t.mapState=!0}function Hf(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Ot(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function KM(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=gi(n[s+1],e,t);i[s]=a}return i}function an(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=gi(e[a+1],n,r);s[a]=o}return s}}function Mz(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function YM(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function bz(n,e,t){const r=n.length-1,i=os|Kt|Bi,s=gi(n[1],i,t),a=gi(n[n.length-1],e,t),o=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const u=gi(n[l+2],s.type,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=gi(n[l+3],a.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...o,a]}function kz(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new kr(Kt,i);let a;try{a=gi(n[2],Kt,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const u=gi(n[l+3],Kt,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=gi(n[l+4],e,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,a,...o]}function Nz(n,e,t){const r=gi(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=gi(n[s+1],Bi,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=gi(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function Lz(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=os}else i=Kt;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const l=gi(r[o],i,t);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[gi(n[1],i,t),...s]}function Oz(n,e,t){let r;try{r=gi(n[1],Kt,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=gi(i[a],Fa,t)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof kr))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function Pt(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new Iz(t,i,...s)}}function Dz(n,e,t){const r=n[0],i=Az[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function pD(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return pD(n.getGeometries()[0]);default:return""}}function _D(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Vl(n,e,t){const r=gi(n,e,t);return Qa(r)}function Qa(n,e){if(n instanceof kr){if(n.type===Fa&&typeof n.value=="string"){const r=$I(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case ke.Number:case ke.String:case ke.Coalesce:return Fz(n);case ke.Get:case ke.Var:case ke.Has:return Vz(n);case ke.Id:return r=>r.featureId;case ke.GeometryType:return r=>r.geometryType;case ke.Concat:{const r=n.args.map(i=>Qa(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case ke.Resolution:return r=>r.resolution;case ke.Any:case ke.All:case ke.Between:case ke.In:case ke.Not:return Gz(n);case ke.Equal:case ke.NotEqual:case ke.LessThan:case ke.LessThanOrEqualTo:case ke.GreaterThan:case ke.GreaterThanOrEqualTo:return jz(n);case ke.Multiply:case ke.Divide:case ke.Add:case ke.Subtract:case ke.Clamp:case ke.Mod:case ke.Pow:case ke.Abs:case ke.Floor:case ke.Ceil:case ke.Round:case ke.Sin:case ke.Cos:case ke.Atan:case ke.Sqrt:return Bz(n);case ke.Case:return Uz(n);case ke.Match:return zz(n);case ke.Interpolate:return $z(n);case ke.ToString:return Wz(n);default:throw new Error(`Unsupported operator ${t}`)}}function Fz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Qa(n.args[s]);switch(t){case ke.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case ke.Number:case ke.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Vz(n,e){const r=n.args[0].value;switch(n.operator){case ke.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const f=s[o].value;a=a[f]}return a};case ke.Var:return i=>i.variables[r];case ke.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const f=s[o].value;if(!a||!Object.hasOwn(a,f))return!1;a=a[f]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function jz(n,e){const t=n.operator,r=Qa(n.args[0]),i=Qa(n.args[1]);switch(t){case ke.Equal:return s=>r(s)===i(s);case ke.NotEqual:return s=>r(s)!==i(s);case ke.LessThan:return s=>r(s)<i(s);case ke.LessThanOrEqualTo:return s=>r(s)<=i(s);case ke.GreaterThan:return s=>r(s)>i(s);case ke.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Gz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Qa(n.args[s]);switch(t){case ke.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case ke.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case ke.Between:return s=>{const a=i[0](s),o=i[1](s),l=i[2](s);return a>=o&&a<=l};case ke.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case ke.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Bz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Qa(n.args[s]);switch(t){case ke.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case ke.Divide:return s=>i[0](s)/i[1](s);case ke.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case ke.Subtract:return s=>i[0](s)-i[1](s);case ke.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const l=i[2](s);return a>l?l:a};case ke.Mod:return s=>i[0](s)%i[1](s);case ke.Pow:return s=>Math.pow(i[0](s),i[1](s));case ke.Abs:return s=>Math.abs(i[0](s));case ke.Floor:return s=>Math.floor(i[0](s));case ke.Ceil:return s=>Math.ceil(i[0](s));case ke.Round:return s=>Math.round(i[0](s));case ke.Sin:return s=>Math.sin(i[0](s));case ke.Cos:return s=>Math.cos(i[0](s));case ke.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case ke.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Uz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qa(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function zz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qa(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t-1;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function $z(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qa(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,l;for(let u=2;u<t;u+=2){const f=r[u](i);let d=r[u+1](i);const g=Array.isArray(d);if(g&&(d=pU(d)),f>=a)return u===2?d:g?Hz(s,a,o,l,f,d):Wg(s,a,o,l,f,d);o=f,l=d}return l}}function Wz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Qa(n.args[s]);switch(t){case ke.ToString:return s=>{const a=i[0](s);return n.args[0].type===Fa?WI(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Wg(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+l*(s-r)}function Hz(n,e,t,r,i,s){if(i-t===0)return r;const o=IM(r),l=IM(s);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const f=[Wg(n,e,t,o[0],i,l[0]),Wg(n,e,t,o[1],i,l[1]),o[2]+Wg(n,e,t,0,i,u),Wg(n,e,t,r[3],i,s[3])];return _U(f)}function Kz(n){return!0}function Yz(n){const e=mD(),t=Xz(n,e),r=_D();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=pD(i.getGeometry())),t(r)}}function XM(n){const e=mD(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=XS(n[a],e);const i=_D(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const u=a.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const f=r[u](i);f&&(s[l]=f,l+=1)}return s.length=l,s}}function Xz(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?Vl(s.filter,Bi,e):Kz;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=XS(s.style[u],e)}else o=[XS(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const l=r[o].filter;if(l(i)&&!(n[o].else&&a)){a=!0;for(const u of r[o].styles){const f=u(i);f&&s.push(f)}}}return s}}function XS(n,e){const t=Wm(n,"",e),r=Hm(n,"",e),i=qz(n,e),s=Zz(n,e),a=ls(n,"z-index",e);if(!t&&!r&&!i&&!s&&!Sh(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Fn;return function(l){let u=!0;if(t){const f=t(l);f&&(u=!1),o.setFill(f)}if(r){const f=r(l);f&&(u=!1),o.setStroke(f)}if(i){const f=i(l);f&&(u=!1),o.setText(f)}if(s){const f=s(l);f&&(u=!1),o.setImage(f)}return a&&o.setZIndex(a(l)),u?null:o}}function Wm(n,e,t){let r;if(e+"fill-pattern-src"in n)r=t$(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=JI(n,e+"fill-color",t)}if(!r)return null;const i=new mi;return function(s){const a=r(s);return a===zI?null:(i.setColor(a),i)}}function Hm(n,e,t){const r=ls(n,e+"stroke-width",t),i=JI(n,e+"stroke-color",t);if(!r&&!i)return null;const s=hl(n,e+"stroke-line-cap",t),a=hl(n,e+"stroke-line-join",t),o=yD(n,e+"stroke-line-dash",t),l=ls(n,e+"stroke-line-dash-offset",t),u=ls(n,e+"stroke-miter-limit",t),f=new Pi;return function(d){if(i){const g=i(d);if(g===zI)return null;f.setColor(g)}if(r&&f.setWidth(r(d)),s){const g=s(d);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(g)}if(a){const g=a(d);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(g)}return o&&f.setLineDash(o(d)),l&&f.setLineDashOffset(l(d)),u&&f.setMiterLimit(u(d)),f}}function qz(n,e){const t="text-",r=hl(n,t+"value",e);if(!r)return null;const i=Wm(n,t,e),s=Wm(n,t+"background-",e),a=Hm(n,t,e),o=Hm(n,t+"background-",e),l=hl(n,t+"font",e),u=ls(n,t+"max-angle",e),f=ls(n,t+"offset-x",e),d=ls(n,t+"offset-y",e),g=kd(n,t+"overflow",e),p=hl(n,t+"placement",e),v=ls(n,t+"repeat",e),x=bv(n,t+"scale",e),E=kd(n,t+"rotate-with-view",e),I=ls(n,t+"rotation",e),T=hl(n,t+"align",e),M=hl(n,t+"justify",e),k=hl(n,t+"baseline",e),L=kd(n,t+"keep-upright",e),z=yD(n,t+"padding",e),P=kv(n,t+"declutter-mode"),C=new I0({declutterMode:P});return function(b){if(C.setText(r(b)),i&&C.setFill(i(b)),s&&C.setBackgroundFill(s(b)),a&&C.setStroke(a(b)),o&&C.setBackgroundStroke(o(b)),l&&C.setFont(l(b)),u&&C.setMaxAngle(u(b)),f&&C.setOffsetX(f(b)),d&&C.setOffsetY(d(b)),g&&C.setOverflow(g(b)),p){const F=p(b);if(F!=="point"&&F!=="line")throw new Error("Expected point or line for text-placement");C.setPlacement(F)}if(v&&C.setRepeat(v(b)),x&&C.setScale(x(b)),E&&C.setRotateWithView(E(b)),I&&C.setRotation(I(b)),T){const F=T(b);if(F!=="left"&&F!=="center"&&F!=="right"&&F!=="end"&&F!=="start")throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(F)}if(M){const F=M(b);if(F!=="left"&&F!=="right"&&F!=="center")throw new Error("Expected left, right, or center for text-justify");C.setJustify(F)}if(k){const F=k(b);if(F!=="bottom"&&F!=="top"&&F!=="middle"&&F!=="alphabetic"&&F!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(F)}return z&&C.setPadding(z(b)),L&&C.setKeepUpright(L(b)),C}}function Zz(n,e){return"icon-src"in n?Qz(n,e):"shape-points"in n?Jz(n,e):"circle-radius"in n?e$(n,e):null}function Qz(n,e){const t="icon-",r=t+"src",i=xD(n[r],r),s=ex(n,t+"anchor",e),a=bv(n,t+"scale",e),o=ls(n,t+"opacity",e),l=ex(n,t+"displacement",e),u=ls(n,t+"rotation",e),f=kd(n,t+"rotate-with-view",e),d=ZM(n,t+"anchor-origin"),g=QM(n,t+"anchor-x-units"),p=QM(n,t+"anchor-y-units"),v=s$(n,t+"color"),x=r$(n,t+"cross-origin"),E=i$(n,t+"offset"),I=ZM(n,t+"offset-origin"),T=tx(n,t+"width"),M=tx(n,t+"height"),k=n$(n,t+"size"),L=kv(n,t+"declutter-mode"),z=new t0({src:i,anchorOrigin:d,anchorXUnits:g,anchorYUnits:p,color:v,crossOrigin:x,offset:E,offsetOrigin:I,height:M,width:T,size:k,declutterMode:L});return function(P){return o&&z.setOpacity(o(P)),l&&z.setDisplacement(l(P)),u&&z.setRotation(u(P)),f&&z.setRotateWithView(f(P)),a&&z.setScale(a(P)),s&&z.setAnchor(s(P)),z}}function Jz(n,e){const t="shape-",r=t+"points",i=t+"radius",s=qS(n[r],r),a=qS(n[i],i),o=Wm(n,t,e),l=Hm(n,t,e),u=bv(n,t+"scale",e),f=ex(n,t+"displacement",e),d=ls(n,t+"rotation",e),g=kd(n,t+"rotate-with-view",e),p=tx(n,t+"radius2"),v=tx(n,t+"angle"),x=kv(n,t+"declutter-mode"),E=new Mv({points:s,radius:a,radius2:p,angle:v,declutterMode:x});return function(I){return o&&E.setFill(o(I)),l&&E.setStroke(l(I)),f&&E.setDisplacement(f(I)),d&&E.setRotation(d(I)),g&&E.setRotateWithView(g(I)),u&&E.setScale(u(I)),E}}function e$(n,e){const t="circle-",r=Wm(n,t,e),i=Hm(n,t,e),s=ls(n,t+"radius",e),a=bv(n,t+"scale",e),o=ex(n,t+"displacement",e),l=ls(n,t+"rotation",e),u=kd(n,t+"rotate-with-view",e),f=kv(n,t+"declutter-mode"),d=new Pl({radius:5,declutterMode:f});return function(g){return s&&d.setRadius(s(g)),r&&d.setFill(r(g)),i&&d.setStroke(i(g)),o&&d.setDisplacement(o(g)),l&&d.setRotation(l(g)),u&&d.setRotateWithView(u(g)),a&&d.setScale(a(g)),d}}function ls(n,e,t){if(!(e in n))return;const r=Vl(n[e],Kt,t);return function(i){return qS(r(i),e)}}function hl(n,e,t){if(!(e in n))return null;const r=Vl(n[e],os,t);return function(i){return xD(r(i),e)}}function t$(n,e,t){const r=hl(n,e+"pattern-src",t),i=qM(n,e+"pattern-offset",t),s=qM(n,e+"pattern-size",t),a=JI(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function kd(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Bi,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function JI(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Fa,t);return function(i){return vD(r(i),e)}}function yD(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ch,t);return function(i){return Bp(r(i),e)}}function ex(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ch,t);return function(i){const s=Bp(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function qM(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ch,t);return function(i){return ED(r(i),e)}}function bv(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ch|Kt,t);return function(i){return a$(r(i),e)}}function tx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function n$(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return us(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function r$(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function ZM(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function QM(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function i$(n,e){const t=n[e];if(t!==void 0)return Bp(t,e)}function kv(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function s$(n,e){const t=n[e];if(t!==void 0)return vD(t,e)}function Bp(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function xD(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function qS(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function vD(n,e){if(typeof n=="string")return n;const t=Bp(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function ED(n,e){const t=Bp(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function a$(n,e){return typeof n=="number"?n:ED(n,e)}const ba={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function JM(n,e,t){return(function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,u=e?0:s[1]*i,f=o?o[0]:0,d=o?o[1]:0;let g=n[0]+l/2+f,p=n[2]-l/2+f,v=n[1]+u/2+d,x=n[3]-u/2+d;g>p&&(g=(p+g)/2,p=g),v>x&&(v=(x+v)/2,x=v);let E=Dn(r[0],g,p),I=Dn(r[1],v,x);if(a&&t&&i){const T=30*i;E+=-T*Math.log(1+Math.max(0,g-r[0])/T)+T*Math.log(1+Math.max(0,r[0]-p)/T),I+=-T*Math.log(1+Math.max(0,v-r[1])/T)+T*Math.log(1+Math.max(0,r[1]-x)/T)}return[E,I]})}function o$(n){return n}function wD(n){return Math.pow(n,3)}function A0(n){return 1-wD(1-n)}function l$(n){return 3*n*n-2*n*n*n}function c$(n){return n}function eA(n,e,t,r){const i=Bt(e)/t[0],s=vr(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function tA(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Dn(r,t/2,e*2)}function u$(n,e,t,r){return e=e!==void 0?e:!0,(function(i,s,a,o){if(i!==void 0){const l=n[0],u=n[n.length-1],f=t?eA(l,t,a,r):l;if(o)return e?tA(i,f,u):Dn(i,u,f);const d=Math.min(f,i),g=Math.floor(_v(n,d,s));return n[g]>f&&g<n.length-1?n[g+1]:n[g]}})}function h$(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(a,o,l,u){if(a!==void 0){const f=i?eA(e,i,l,s):e;if(u)return r?tA(a,f,t):Dn(a,t,f);const d=1e-9,g=Math.ceil(Math.log(e/f)/Math.log(n)-d),p=-o*(.5-d)+.5,v=Math.min(f,a),x=Math.floor(Math.log(e/v)/Math.log(n)+p),E=Math.max(g,x),I=e/Math.pow(n,E);return Dn(I,t,f)}})}function eb(n,e,t,r,i){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const u=r?eA(n,r,o,i):n;return!t||!l?Dn(s,e,u):tA(s,u,e)}})}function nA(n){if(n!==void 0)return 0}function tb(n){if(n!==void 0)return n}function f$(n){const e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function d$(n){const e=xl(5);return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}const g$=42,rA=256,S2=0;class To extends zo{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=NI(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&MO(),e.center&&(e.center=ul(e.center,this.projection_)),e.extent&&(e.extent=Io(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in ba)delete t[o];this.setProperties(t,!0);const r=p$(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=m$(e),s=r.constraint,a=_$(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=ul(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ul(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===t){r&&O1(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const f=arguments[i],d={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||l$,callback:r};if(f.center&&(d.sourceCenter=a,d.targetCenter=f.center.slice(),a=d.targetCenter),f.zoom!==void 0?(d.sourceResolution=o,d.targetResolution=this.getResolutionForZoom(f.zoom),o=d.targetResolution):f.resolution&&(d.sourceResolution=o,d.targetResolution=f.resolution,o=d.targetResolution),f.rotation!==void 0){d.sourceRotation=l;const g=Uc(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+g,l=d.targetRotation}y$(d)?d.complete=!0:s+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(Kr.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Kr.ANIMATING]>0}getInteracting(){return this.hints_[Kr.INTERACTING]>0}cancelAnimations(){this.setHint(Kr.ANIMATING,-this.hints_[Kr.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&O1(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l.complete)continue;const u=e-l.start;let f=l.duration>0?u/l.duration:1;f>=1?(l.complete=!0,f=1):s=!1;const d=l.easing(f);if(l.sourceCenter){const g=l.sourceCenter[0],p=l.sourceCenter[1],v=l.targetCenter[0],x=l.targetCenter[1];this.nextCenter_=l.targetCenter;const E=g+d*(v-g),I=p+d*(x-p);this.targetCenter_=[E,I]}if(l.sourceResolution&&l.targetResolution){const g=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(g,0,p,!0);this.targetCenter_=this.calculateCenterZoom(v,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const g=d===1?Uc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(Kr.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&O1(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],PI(r,e-this.getRotation()),cB(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&BS(e,this.getProjection())}getCenterInternal(){return this.get(ba.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return bO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();pn(t,"The view center is not defined");const r=this.getResolution();pn(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return pn(i!==void 0,"The view rotation is not defined"),By(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ba.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Io(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Bt(e)/t[0],i=vr(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(s){return t/Math.pow(e,s*i)})}getRotation(){return this.get(ba.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return(function(a){return Math.log(r/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=T2(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=_v(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Dn(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Dn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(pn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){pn(!S0(e),"Cannot fit empty extent provided as `geometry`");const i=Io(e,this.getProjection());r=NM(i)}else if(e.getType()==="Circle"){const i=Io(e.getExtent(),this.getProjection());r=NM(i),r.rotate(this.getRotation(),Do(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,u=-1/0,f=-1/0;for(let d=0,g=s.length;d<g;d+=a){const p=s[d]*r-s[d+1]*i,v=s[d]*i+s[d+1]*r;o=Math.min(o,p),l=Math.min(l,v),u=Math.max(u,p),f=Math.max(f,v)}return[o,l,u,f]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),f=Math.sin(u),d=Math.cos(u),g=Do(o);g[0]+=(i[1]-i[3])/2*l,g[1]+=(i[0]-i[2])/2*l;const p=g[0]*d-g[1]*f,v=g[1]*d+g[0]*f,x=this.getConstrainedCenter([p,v],l),E=t.callback?t.callback:Dm;t.duration!==void 0?this.animateInternal({resolution:l,center:x,duration:t.duration,easing:t.easing},E):(this.targetResolution_=l,this.targetCenter_=x,this.applyTargetState_(!1,!0),O1(E,!0))}centerOn(e,t,r){this.centerOnInternal(ul(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(T2(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),l=T2(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=BS(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ul(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ul(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ul(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(ba.ROTATION)!==i&&this.set(ba.ROTATION,i),this.get(ba.RESOLUTION)!==a&&(this.set(ba.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(ba.CENTER)||!zy(this.get(ba.CENTER),o))&&this.set(ba.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!zy(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:A0,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Kr.INTERACTING,1)}endInteraction(e,t,r){r=r&&ul(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Kr.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function O1(n,e){setTimeout(function(){n(e)},0)}function m$(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return JM(n.extent,n.constrainOnlyCenter,t)}const e=NI(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,JM(t,!1,!1)}return o$}function p$(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:S2,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,g=NI(n.projection,"EPSG:3857"),p=g.getExtent();let v=n.constrainOnlyCenter,x=n.extent;if(!u&&!x&&g.isGlobal()&&(v=!1,x=p),n.resolutions!==void 0){const E=n.resolutions;t=E[a],r=E[o]!==void 0?E[o]:E[E.length-1],n.constrainResolution?e=u$(E,f,!v&&x,d):e=eb(t,r,f,!v&&x,d)}else{const I=(p?Math.max(Bt(p),vr(p)):360*qd.degrees/g.getMetersPerUnit())/rA/Math.pow(2,S2),T=I/Math.pow(2,28-S2);t=n.maxResolution,t!==void 0?a=0:t=I/Math.pow(l,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,o):r=I/Math.pow(l,o):r=T),o=a+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,o-a),n.constrainResolution?e=h$(l,t,r,f,!v&&x,d):e=eb(t,r,f,!v&&x,d)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:l}}function _$(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?d$():t===!1?tb:typeof t=="number"?f$(t):tb}return nA}function y$(n){return!(n.sourceCenter&&n.targetCenter&&!zy(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function T2(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,a=-a;const u=o*s-l*a,f=l*s+o*a;return[u,f]}const xn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class SD extends zo{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[xn.OPACITY]=e.opacity!==void 0?e.opacity:1,pn(typeof t[xn.OPACITY]=="number","Layer opacity must be a number"),t[xn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[xn.Z_INDEX]=e.zIndex,t[xn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[xn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[xn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[xn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Dn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return At()}getLayerStatesArray(e){return At()}getExtent(){return this.get(xn.EXTENT)}getMaxResolution(){return this.get(xn.MAX_RESOLUTION)}getMinResolution(){return this.get(xn.MIN_RESOLUTION)}getMinZoom(){return this.get(xn.MIN_ZOOM)}getMaxZoom(){return this.get(xn.MAX_ZOOM)}getOpacity(){return this.get(xn.OPACITY)}getSourceState(){return At()}getVisible(){return this.get(xn.VISIBLE)}getZIndex(){return this.get(xn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(xn.EXTENT,e)}setMaxResolution(e){this.set(xn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(xn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(xn.MAX_ZOOM,e)}setMinZoom(e){this.set(xn.MIN_ZOOM,e)}setOpacity(e){pn(typeof e=="number","Layer opacity must be a number"),this.set(xn.OPACITY,e)}setVisible(e){this.set(xn.VISIBLE,e)}setZIndex(e){this.set(xn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Up extends SD{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(xn.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(xn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(kn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Xt(e,bt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof To?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return iA(i,t.viewState)&&(!s||Ui(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof To?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(xn.MAP,e)}getMapInternal(){return this.get(xn.MAP)}setMap(e){this.mapPrecomposeKey_&&(kn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(kn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Xt(e,fa.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Xt(this,bt.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);pn(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(xn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function iA(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const nb={RENDER_ORDER:"renderOrder"};class TD extends Up{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(nb.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new cD(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(nb.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?uD:e;const t=x$(e);this.styleFunction_=e===null?void 0:tz(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function x$(n){if(n===void 0)return uD;if(!n)return null;if(typeof n=="function"||n instanceof Fn)return n;if(!Array.isArray(n))return XM([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Fn){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof Fn))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return Yz(i)}return XM(n)}class zp extends TD{constructor(e){super(e)}createRenderer(){return new wz(this)}}const pc={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Ac extends Uo{constructor(e,t){super(e),this.layer=t}}const I2={LAYERS:"layers"};let Nv=class ID extends SD{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(I2.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new ha(r.slice(),{unique:!0}):pn(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new ha(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(kn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Xt(e,ss.ADD,this.handleLayersAdd_,this),Xt(e,ss.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(kn);Mp(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new Ac(pc.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[Xt(e,Yd.PROPERTYCHANGE,this.handleLayerChange_,this),Xt(e,bt.CHANGE,this.handleLayerChange_,this)];e instanceof ID&&t.push(Xt(e,pc.ADDLAYER,this.handleLayerGroupAdd_,this),Xt(e,pc.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[tn(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Ac(pc.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Ac(pc.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Ac(pc.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=tn(t);this.listenerKeys_[r].forEach(kn),delete this.listenerKeys_[r],this.dispatchEvent(new Ac(pc.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(I2.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new Ac(pc.REMOVELAYER,r[i]))}this.set(I2.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const l=t[a];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=yl(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}};const wt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class sA extends bp{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(bt.CHANGE)}release(){this.setState(wt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==wt.EMPTY){if(this.state!==wt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){At()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:wD(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function ZS(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const v$=new Error("disposed"),E$=[256,256];class rb extends sA{constructor(e){const t=wt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=ZS(this.data_);return e?[e.width,e.height]:E$}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==wt.IDLE&&this.state!==wt.ERROR)return;this.state=wt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=wt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=wt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(v$),this.controller_=null),super.disposeInternal()}}class AD extends sA{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,js?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=wt.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=wt.ERROR,this.unlistenImage_(),this.image_=w$(),this.changed()}handleImageLoad_(){if(js)this.state=wt.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=wt.LOADED:this.state=wt.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==wt.ERROR&&(this.state=wt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==wt.IDLE&&(this.state=wt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=yU(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function w$(){const n=Or(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let A2;const Nd=[];function ib(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function R2(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function S$(){if(A2===void 0){const n=Or(6,6,Nd);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",ib(n,4,5,4,0),ib(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;A2=R2(e,0)||R2(e,4)||R2(e,8),Cv(n),Nd.push(n.canvas)}return A2}function nx(n,e,t,r){const i=Dp(t,e,n);let s=Ky(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||Th(l,i)){const u=Ky(n,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function T$(n,e,t,r){const i=Do(t);let s=nx(n,e,i,r);return(!isFinite(s)||s<=0)&&_O(t,function(a){return s=nx(n,e,a,r),isFinite(s)&&s>0}),s}function RD(n,e,t,r,i,s,a,o,l,u,f,d,g,p){const v=Or(Math.round(t*n),Math.round(t*e),Nd);if(d||(v.imageSmoothingEnabled=!1),l.length===0)return v.canvas;v.scale(t,t);function x(L){return Math.round(L*t)/t}v.globalCompositeOperation="lighter";const E=Us();l.forEach(function(L,z,P){mO(E,L.extent)});let I;const T=t/r,M=(d?1:1+Math.pow(2,-24))/T;(!g||l.length!==1||u!==0)&&(I=Or(Math.round(Bt(E)*T),Math.round(vr(E)*T),Nd),d||(I.imageSmoothingEnabled=!1),l.forEach(function(L,z,P){if(L.image.width>0&&L.image.height>0){if(L.clipExtent){I.save();const U=(L.clipExtent[0]-E[0])*T,V=-(L.clipExtent[3]-E[3])*T,Te=Bt(L.clipExtent)*T,Me=vr(L.clipExtent)*T;I.rect(d?U:Math.round(U),d?V:Math.round(V),d?Te:Math.round(U+Te)-Math.round(U),d?Me:Math.round(V+Me)-Math.round(V)),I.clip()}const C=(L.extent[0]-E[0])*T,b=-(L.extent[3]-E[3])*T,F=Bt(L.extent)*T,j=vr(L.extent)*T;I.drawImage(L.image,u,u,L.image.width-2*u,L.image.height-2*u,d?C:Math.round(C),d?b:Math.round(b),d?F:Math.round(C+F)-Math.round(C),d?j:Math.round(b+j)-Math.round(b)),L.clipExtent&&I.restore()}}));const k=Xh(a);return o.getTriangles().forEach(function(L,z,P){const C=L.source,b=L.target;let F=C[0][0],j=C[0][1],U=C[1][0],V=C[1][1],Te=C[2][0],Me=C[2][1];const De=x((b[0][0]-k[0])/s),be=x(-(b[0][1]-k[1])/s),le=x((b[1][0]-k[0])/s),Ae=x(-(b[1][1]-k[1])/s),Ie=x((b[2][0]-k[0])/s),Y=x(-(b[2][1]-k[1])/s),O=F,te=j;F=0,j=0,U-=O,V-=te,Te-=O,Me-=te;const ne=[[U,V,0,0,le-De],[Te,Me,0,0,Ie-De],[0,0,U,V,Ae-be],[0,0,Te,Me,Y-be]],ee=lB(ne);if(!ee)return;if(v.save(),v.beginPath(),S$()||!d){v.moveTo(le,Ae);const Se=4,Ne=De-le,se=be-Ae;for(let re=0;re<Se;re++)v.lineTo(le+x((re+1)*Ne/Se),Ae+x(re*se/(Se-1))),re!=Se-1&&v.lineTo(le+x((re+1)*Ne/Se),Ae+x((re+1)*se/(Se-1)));v.lineTo(Ie,Y)}else v.moveTo(le,Ae),v.lineTo(De,be),v.lineTo(Ie,Y);v.clip(),v.transform(ee[0],ee[2],ee[1],ee[3],De,be),v.translate(E[0]-O,E[3]-te);let me;if(I)me=I.canvas,v.scale(M,-M);else{const Se=l[0],Ne=Se.extent;me=Se.image,v.scale(Bt(Ne)/me.width,-vr(Ne)/me.height)}v.drawImage(me,0,0),v.restore()}),I&&(Cv(I),Nd.push(I.canvas)),f&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,o.getTriangles().forEach(function(L,z,P){const C=L.target,b=(C[0][0]-k[0])/s,F=-(C[0][1]-k[1])/s,j=(C[1][0]-k[0])/s,U=-(C[1][1]-k[1])/s,V=(C[2][0]-k[0])/s,Te=-(C[2][1]-k[1])/s;v.beginPath(),v.moveTo(j,U),v.lineTo(b,F),v.lineTo(V,Te),v.closePath(),v.stroke()}),v.restore()),v.canvas}const I$=10,sb=.25;class CD{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let l={};const u=o?GS(M=>Nr(o,Dp(M,this.targetProj_,this.sourceProj_))):Vm(this.targetProj_,this.sourceProj_);this.transformInv_=function(M){const k=M[0]+"/"+M[1];return l[k]||(l[k]=u(M)),l[k]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Bt(i)>=Bt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Bt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Bt(this.targetProj_.getExtent()):null;const f=Xh(r),d=Ev(r),g=vv(r),p=xv(r),v=this.transformInv_(f),x=this.transformInv_(d),E=this.transformInv_(g),I=this.transformInv_(p),T=I$+(a?Math.max(0,Math.ceil(Math.log2(OS(r)/(a*a*256*256)))):0);if(this.addQuad_(f,d,g,p,v,x,E,I,T),this.wrapsXInSource_){let M=1/0;this.triangles_.forEach(function(k,L,z){M=Math.min(M,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-M>this.sourceWorldWidth_/2){const L=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];L[0][0]-M>this.sourceWorldWidth_/2&&(L[0][0]-=this.sourceWorldWidth_),L[1][0]-M>this.sourceWorldWidth_/2&&(L[1][0]-=this.sourceWorldWidth_),L[2][0]-M>this.sourceWorldWidth_/2&&(L[2][0]-=this.sourceWorldWidth_);const z=Math.min(L[0][0],L[1][0],L[2][0]);Math.max(L[0][0],L[1][0],L[2][0])-z<this.sourceWorldWidth_/2&&(k.source=L)}})}l={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,l,u){const f=uM([s,a,o,l]),d=this.sourceWorldWidth_?Bt(f)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1;let v=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const E=uM([e,t,r,i]);v=Bt(E)/this.targetWorldWidth_>sb||v}!p&&this.sourceProj_.isGlobal()&&d&&(v=d>sb||v)}if(!v&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!Ui(f,this.maxSourceExtent_))return;let x=0;if(!v&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)v=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(u>0){if(!v){const E=[(e[0]+r[0])/2,(e[1]+r[1])/2],I=this.transformInv_(E);let T;p?T=(Uc(s[0],g)+Uc(o[0],g))/2-Uc(I[0],g):T=(s[0]+o[0])/2-I[0];const M=(s[1]+o[1])/2-I[1];v=T*T+M*M>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const E=[(t[0]+r[0])/2,(t[1]+r[1])/2],I=this.transformInv_(E),T=[(i[0]+e[0])/2,(i[1]+e[1])/2],M=this.transformInv_(T);this.addQuad_(e,t,E,T,s,a,I,M,u-1),this.addQuad_(T,E,r,i,M,I,o,l,u-1)}else{const E=[(e[0]+t[0])/2,(e[1]+t[1])/2],I=this.transformInv_(E),T=[(r[0]+i[0])/2,(r[1]+i[1])/2],M=this.transformInv_(T);this.addQuad_(e,E,T,i,s,I,M,l,u-1),this.addQuad_(E,t,r,T,I,a,o,M,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(e,r,i,s,o,l),(x&14)==0&&this.addTriangle_(e,r,t,s,o,a),x&&((x&13)==0&&this.addTriangle_(t,i,e,a,l,s),(x&7)==0&&this.addTriangle_(t,i,r,a,l,o))}calculateSourceExtent(){const e=Us();return this.triangles_.forEach(function(t,r,i){const s=t.source;im(e,s[0]),im(e,s[1]),im(e,s[2])}),e}getTriangles(){return this.triangles_}}const PD=.5;class MD extends sA{constructor(e,t,r,i,s,a,o,l,u,f,d,g){super(s,wt.IDLE,g),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=i.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const E=v?yl(p,v):p;if(OS(E)===0){this.state=wt.EMPTY;return}const I=e.getExtent();I&&(x?x=yl(x,I):x=I);const T=i.getResolution(this.wrappedTileCoord_[0]),M=T$(e,r,E,T);if(!isFinite(M)||M<=0){this.state=wt.EMPTY;return}const k=f!==void 0?f:PD;if(this.triangulation_=new CD(e,r,E,x,M*k,T),this.triangulation_.getTriangles().length===0){this.state=wt.EMPTY;return}this.sourceZ_=t.getZForResolution(M);let L=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(L[1]=Dn(L[1],x[1],x[3]),L[3]=Dn(L[3],x[1],x[3])):L=yl(L,x)),!OS(L))this.state=wt.EMPTY;else{let z=0,P=0;e.canWrapX()&&(z=Bt(I),P=Math.floor((L[0]-I[0])/z)),vO(L.slice(),e,!0).forEach(b=>{const F=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let j=F.minX;j<=F.maxX;j++)for(let U=F.minY;U<=F.maxY;U++){const V=u(this.sourceZ_,j,U,o);if(V){const Te=P*z;this.sourceTiles_.push({tile:V,offset:Te})}}++P}),this.sourceTiles_.length===0&&(this.state=wt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==wt.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=wt.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=RD(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=wt.LOADED}this.changed()}load(){if(this.state==wt.IDLE){this.state=wt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==wt.IDLE||r==wt.LOADING){e++;const i=Xt(t,bt.CHANGE,s=>{const a=t.getState();(a==wt.LOADED||a==wt.ERROR||a==wt.EMPTY)&&(kn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==wt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(kn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Cv(this.canvas_.getContext("2d")),Nd.push(this.canvas_),this.canvas_=null),super.release()}}class aA{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Kf(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new aA(n,e,t,r)}class ab{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof pv&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return pn(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return pn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){pn(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function rx(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function A$(n,e,t){return n+"/"+e+"/"+t}function gy(n,e,t,r,i){return`${tn(n)},${e},${A$(t,r,i)}`}function bD(n){return R$(n[0],n[1],n[2])}function R$(n,e,t){return(e<<n)+t}function C$(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class P$ extends ZI{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=yl(l,Io(t.extent,i.projection))),!o[Kr.ANIMATING]&&!o[Kr.INTERACTING]&&!S0(l))if(a){const u=i.projection,f=a.getImage(l,s,r,u);f&&(this.loadImage(f)?this.image=f:f.getState()===ht.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Nr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Th(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),l=Bt(a),u=Math.floor(o.width*((i[0]-a[0])/l));if(u<0||u>=o.width)return null;const f=vr(a),d=Math.floor(o.height*((a[3]-i[1])/f));return d<0||d>=o.height?null:this.getImageData(o,u,d)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,d=e.viewState,g=d.center,p=d.resolution,v=f*a/(p*l),x=f*o/(p*l);this.prepareContainer(e,t);const E=this.context.canvas.width,I=this.context.canvas.height,T=this.getRenderContext(e);let M=!1,k=!0;if(u.extent){const b=Io(u.extent,d.projection);k=Ui(b,e.extent),M=k&&!kc(b,e.extent),M&&this.clipUnrotated(T,e,b)}const L=r.getImage(),z=Fo(this.tempTransform,E/2,I/2,v,x,0,l*(i[0]-g[0])/a,l*(g[1]-i[3])/o);this.renderedResolution=o*f/l;const P=L.width*z[0],C=L.height*z[3];if(this.getLayer().getSource().getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,e),k&&P>=.5&&C>=.5){const b=z[4],F=z[5],j=u.opacity;j!==1&&(T.save(),T.globalAlpha=j),T.drawImage(L,0,0,+L.width,+L.height,b,F,P,C),j!==1&&T.restore()}return this.postRender(this.context,e),M&&T.restore(),T.imageSmoothingEnabled=!0,this.container}}class M$ extends Up{constructor(e){e=e||{},super(e)}}class b$ extends M${constructor(e){super(e)}createRenderer(){return new P$(this)}getData(e){return super.getData(e)}}function C2(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function k$(n,e,t){const r=n[t];return r?r.delete(e):!1}function ob(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=yl(e,Io(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=yl(e,i))}return e}class N$ extends ZI{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Us(),this.tempTileRange_=new aA(0,0,0,0),this.tempTileCoord_=rx(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new ab(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new ab(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),l=gy(o,o.getKey(),e,t,r);let u;if(s.containsKey(l))u=s.get(l);else{const f=i.viewState.projection,d=o.getProjection();if(u=o.getTile(e,t,r,i.pixelRatio,f,!d||_h(d,f)?void 0:this.getSourceTileCache()),!u)return null;s.set(l,u)}return u}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Nr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Th(s,i))return null;const a=t.viewState,o=r.getRenderSource(),l=o.getTileGridForProjection(a.projection),u=o.getTilePixelRatio(t.pixelRatio);for(let f=l.getZForResolution(a.resolution);f>=l.getMinZoom();--f){const d=l.getTileCoordForCoordAndZ(i,f),g=this.getTile(f,d[1],d[2],t);if(!g||g.getState()!==wt.LOADED)continue;const p=l.getOrigin(f),v=us(l.getTileSize(f)),x=l.getResolution(f);let E;if(g instanceof AD||g instanceof MD)E=g.getImage();else if(g instanceof rb){if(E=ZS(g.getData()),!E)continue}else continue;const I=Math.floor(u*((i[0]-p[0])/x-d[1]*v[0])),T=Math.floor(u*((p[1]-i[1])/x-d[2]*v[1])),M=Math.round(u*o.getGutterForProjection(a.projection));return this.getImageData(E,I+M,T+M)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),l=o.getRenderSource(),u=l.getTileGridForProjection(a.projection),f=tn(l);f in e.wantedTiles||(e.wantedTiles[f]={});const d=e.wantedTiles[f],g=o.getMapInternal(),p=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(o.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):u.getResolution(0)),l.zDirection)),v=a.rotation,x=v?yO(a.center,a.resolution,v,e.size):void 0;for(let E=r;E>=p;--E){const I=u.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),T=u.getResolution(E);for(let M=I.minX;M<=I.maxX;++M)for(let k=I.minY;k<=I.maxY;++k){if(v&&!u.tileCoordIntersectsViewport([E,M,k],x))continue;const L=this.getTile(E,M,k,e);if(!L||!C2(i,L,E))continue;const P=L.getKey();if(d[P]=!0,L.getState()===wt.IDLE&&!e.tileQueue.isKeyQueued(P)){const C=rx(E,M,k,this.tempTileCoord_);e.tileQueue.enqueue([L,f,u.getTileCoordCenter(C),T])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const u=gy(this.getLayer().getSource(),o[l],i,s,a);if(r.containsKey(u)){const f=r.peek(u);if(f.getState()===wt.LOADED)return f.endTransition(tn(this)),C2(t,f,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,l=this.getLayer().getRenderSource(),u=l.getKey();for(let f=s.minX;f<=s.maxX;++f)for(let d=s.minY;d<=s.maxY;++d){const g=gy(l,u,r,f,d);let p=!1;if(o.containsKey(g)){const v=o.peek(g);v.getState()===wt.LOADED&&(C2(i,v,r),p=!0)}p||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,a=i.resolution,o=i.center,l=e.pixelRatio,u=this.getLayer(),f=u.getSource(),d=f.getTileGridForProjection(s),g=d.getZForResolution(a,f.zDirection),p=d.getResolution(g),v=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==v&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=v):this.renderedSourceKey_=v;let x=e.extent;const E=f.getTilePixelRatio(l);this.prepareContainer(e,t);const I=this.context.canvas.width,T=this.context.canvas.height,M=r.extent&&Io(r.extent);M&&(x=yl(x,Io(r.extent)));const k=p*I/2/E,L=p*T/2/E,z=[o[0]-k,o[1]-L,o[0]+k,o[1]+L],P={};this.renderedTiles.length=0;const C=u.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const le=d.getZForResolution(i.nextResolution,f.zDirection),Ae=ob(e,e.nextExtent);this.enqueueTiles(e,Ae,le,P,C)}const b=ob(e,x);if(this.enqueueTiles(e,b,g,P,0),C>0&&setTimeout(()=>{this.enqueueTiles(e,b,g-1,P,C-1)},0),!(g in P))return this.container;const F=tn(this),j=e.time;for(const le of P[g]){const Ae=le.getState();if(Ae===wt.EMPTY)continue;const Ie=le.tileCoord;if(Ae===wt.LOADED&&le.getAlpha(F,j)===1){le.endTransition(F);continue}if(Ae!==wt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ie,P)){k$(P,le,g),e.animate=!0;continue}if(this.findAltTiles_(d,Ie,g+1,P))continue;const te=d.getMinZoom();for(let ne=g-1;ne>=te&&!this.findAltTiles_(d,Ie,ne,P);--ne);}const U=p/a*l/E,V=this.getRenderContext(e);Fo(this.tempTransform,I/2,T/2,U,U,0,-I/2,-T/2),r.extent&&this.clipUnrotated(V,e,M),f.getInterpolate()||(V.imageSmoothingEnabled=!1),this.preRender(V,e);const Te=Object.keys(P).map(Number);Te.sort(_l);let Me;const De=[],be=[];for(let le=Te.length-1;le>=0;--le){const Ae=Te[le],Ie=f.getTilePixelSize(Ae,l,s),O=d.getResolution(Ae)/p,te=Ie[0]*O*U,ne=Ie[1]*O*U,ee=d.getTileCoordForCoordAndZ(Xh(z),Ae),me=d.getTileCoordExtent(ee),Se=Nr(this.tempTransform,[E*(me[0]-z[0])/p,E*(z[3]-me[3])/p]),Ne=E*f.getGutterForProjection(s);for(const se of P[Ae]){if(se.getState()!==wt.LOADED)continue;const re=se.tileCoord,D=ee[1]-re[1],Ye=Math.round(Se[0]-(D-1)*te),he=ee[2]-re[2],He=Math.round(Se[1]-(he-1)*ne),ue=Math.round(Se[0]-D*te),W=Math.round(Se[1]-he*ne),ae=Ye-ue,ot=He-W,lt=Te.length===1;let _t=!1;Me=[ue,W,ue+ae,W,ue+ae,W+ot,ue,W+ot];for(let Dt=0,Nn=De.length;Dt<Nn;++Dt)if(!lt&&Ae<be[Dt]){const rn=De[Dt];Ui([ue,W,ue+ae,W+ot],[rn[0],rn[3],rn[4],rn[7]])&&(_t||(V.save(),_t=!0),V.beginPath(),V.moveTo(Me[0],Me[1]),V.lineTo(Me[2],Me[3]),V.lineTo(Me[4],Me[5]),V.lineTo(Me[6],Me[7]),V.moveTo(rn[6],rn[7]),V.lineTo(rn[4],rn[5]),V.lineTo(rn[2],rn[3]),V.lineTo(rn[0],rn[1]),V.clip())}De.push(Me),be.push(Ae),this.drawTile(se,e,ue,W,ae,ot,Ne,lt),_t&&V.restore(),this.renderedTiles.unshift(se),this.updateUsedTiles(e.usedTiles,f,se)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Xd(this.renderedExtent_,z),this.renderedExtent_=z,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&V.restore(),V.imageSmoothingEnabled=!0,this.renderComplete){const le=(Ae,Ie)=>{const Y=tn(f),O=Ie.wantedTiles[Y],te=O?Object.keys(O).length:0;this.updateCacheSize(te),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(le)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,l){let u;if(e instanceof rb){if(u=ZS(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const f=this.getRenderContext(t),d=tn(this),g=t.layerStatesArray[t.layerIndex],p=g.opacity*(l?e.getAlpha(d,t.time):1),v=p!==f.globalAlpha;v&&(f.save(),f.globalAlpha=p),f.drawImage(u,o,o,u.width-2*o,u.height-2*o,r,i,s,a),v&&f.restore(),p!==g.opacity?t.animate=!0:l&&e.endTransition(d)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=tn(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const D1={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class L$ extends Up{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(D1.PRELOAD)}setPreload(e){this.set(D1.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(D1.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(D1.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Yu extends L${constructor(e){super(e)}createRenderer(){return new N$(this,{cacheSize:this.getCacheSize()})}}function QS(n){return Array.isArray(n)?Math.min(...n):n}const Yf=[0,0,0],_c=5;class kD{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,pn(JG(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,pn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Xh(r)),pn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,pn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:rA,pn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new aA(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,l=i.maxY;o<=l;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=Kf(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return Kf(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return Kf(s,a,s,a,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(s*l),f=Math.floor(a*l);if(t<i)return Kf(u,u,f,f,r);const d=Math.floor(l*(s+1))-1,g=Math.floor(l*(a+1))-1;return Kf(u,d,f,g,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Yf);const i=Yf[1],s=Yf[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Yf);const a=Yf[1],o=Yf[2];return Kf(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=us(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=us(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,l=a+s[0]*i,u=o+s[1]*i;return Zc(a,o,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),l=this.getOrigin(a),u=us(this.getTileSize(a),this.tmpSize_);let f=o*(e-l[0])/r/u[0],d=o*(l[1]-t)/r/u[1];return i?(f=Nc(f,_c)-1,d=Nc(d,_c)-1):(f=R1(f,_c),d=R1(d,_c)),rx(a,f,d,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),l=us(this.getTileSize(r),this.tmpSize_);let u=(e-a[0])/o/l[0],f=(a[1]-t)/o/l[1];return i?(u=Nc(u,_c)-1,f=Nc(f,_c)-1):(u=R1(u,_c),f=R1(f,_c)),rx(r,u,f,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=_v(this.resolutions_,e,t||0);return Dn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return FO(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function ND(n){let e=n.getDefaultTileGrid();return e||(e=V$(n),n.setDefaultTileGrid(e)),e}function O$(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=oA(t);if(!Th(s,i)){const a=Bt(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function D$(n,e,t,r){r=r!==void 0?r:"top-left";const i=LD(n,e,t);return new kD({extent:n,origin:iB(n,r),resolutions:i,tileSize:t})}function F$(n){const e=n||{},t=e.extent||Cn("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:LD(t,e.maxZoom,e.tileSize,e.maxResolution)};return new kD(r)}function LD(n,e,t,r){e=e!==void 0?e:g$,t=us(t!==void 0?t:rA);const i=vr(n),s=Bt(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=r/Math.pow(2,l);return o}function V$(n,e,t,r){const i=oA(n);return D$(i,e,t,r)}function oA(n){n=Cn(n);let e=n.getExtent();if(!e){const t=180*qd.degrees/n.getMetersPerUnit();e=Zc(-t,-t,t,t)}return e}function lA(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const j$=/\{z\}/g,G$=/\{x\}/g,B$=/\{y\}/g,U$=/\{-y\}/g;function z$(n,e,t,r,i){return n.replace(j$,e.toString()).replace(G$,t.toString()).replace(B$,r.toString()).replace(U$,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function $$(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function W$(n,e){return(function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return z$(n,a,t[1],t[2],s)})}function H$(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=W$(n[i],e);return K$(r)}function K$(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;const i=bD(e),s=Uc(i,n.length);return n[s](e,t,r)})}class Y$ extends qI{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&us(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||tn(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s,a){return At()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:ND(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=us(i.getTileSize(e),this.tmpSize);return s==1?a:ez(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=O$(i,e,r)),C$(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class X$ extends Uo{constructor(e,t){super(e),this.tile=t}}const P2={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class cA extends Y${constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===cA.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=tn(t),i=t.getState();let s;i==wt.LOADING?(this.tileLoadingKeys_[r]=!0,s=P2.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==wt.ERROR?P2.TILELOADERROR:i==wt.LOADED?P2.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new X$(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=$$(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(H$(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class OD extends cA{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:DD,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:AD,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!_h(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||_h(t,e)))return this.tileGrid;const r=tn(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=ND(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,i,s):void 0,f=new this.tileClass(o,u!==void 0?wt.IDLE:wt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,f.addEventListener(bt.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,r,i,s,a){const o=this.getProjection();if(!o||!s||_h(o,s))return this.getTileInternal(e,t,r,i,o||s);const l=[e,t,r],u=this.getKey(),f=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new MD(o,f,s,d,l,g,this.getTilePixelRatio(i),this.getGutter(),(v,x,E,I)=>this.getTileInternal(v,x,E,I,o,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=u,p}getTileInternal(e,t,r,i,s,a){const o=this.getKey(),l=gy(this,o,e,t,r);if(a&&a.containsKey(l))return a.get(l);const u=this.createTile_(e,t,r,i,s,o);return a?.set(l,u),u}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Cn(e);if(r){const i=tn(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function DD(n,e){if(js){const t=n.getCrossOrigin();let r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const a=n.getImage();a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),s.close?.(),a.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class cd extends OD{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:F$({extent:oA(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const q$="modulepreload",Z$=function(n){return"/detectorapp-nl/"+n},lb={},ut=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(t.map(u=>{if(u=Z$(u),u in lb)return;lb[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":q$,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((p,v)=>{g.addEventListener("load",p),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};class Q$ extends HO{constructor(e,t,r,i,s,a,o){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const f=u?yl(r,u):r,d=Do(f),g=nx(e,t,d,i),p=PD,v=new CD(e,t,f,l,g*p,i),x=v.calculateSourceExtent(),E=S0(x)?null:a(x,g,s),I=E?ht.IDLE:ht.EMPTY,T=E?E.getPixelRatio():1;super(r,i,T,I),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=v,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=E,this.sourcePixelRatio_=T,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ht.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ht.LOADED){const t=Bt(this.targetExtent_)/this.targetResolution_,r=vr(this.targetExtent_)/this.targetResolution_;this.canvas_=RD(t,r,this.sourcePixelRatio_,QS(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ht.IDLE){this.state=ht.LOADING,this.changed();const e=this.sourceImage_.getState();e==ht.LOADED||e==ht.ERROR?this.reproject_():(this.sourceListenerKey_=Xt(this.sourceImage_,bt.CHANGE,t=>{const r=this.sourceImage_.getState();(r==ht.LOADED||r==ht.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){kn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Fc=4,M2={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class J$ extends Uo{constructor(e,t){super(e),this.image=t}}class eW extends qI{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=_v(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||_h(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&_h(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Xd(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Q$(s,i,e,t,r,(a,o,l)=>this.getImageInternal(a,o,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=FD(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&kc(this.wantedExtent_,s)||kc(this.image.getExtent(),s))&&(this.wantedResolution_&&QS(this.wantedResolution_)===a||QS(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new HO(s,a,r,this.loader),this.image.addEventListener(bt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case ht.LOADING:this.loading=!0,r=M2.IMAGELOADSTART;break;case ht.LOADED:this.loading=!1,r=M2.IMAGELOADEND;break;case ht.ERROR:this.loading=!1,r=M2.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new J$(r,t))}}function tW(n,e){n.getImage().src=e}function FD(n,e,t,r){const i=e/t,s=Do(n),a=Nc(Bt(n)/i,Fc),o=Nc(vr(n)/i,Fc),l=Nc((r-1)*a/2,Fc),u=a+2*l,f=Nc((r-1)*o/2,Fc),d=o+2*f;return By(s,i,0,[u,d])}function nW(n,e,t,r,i,s){const a=i.getCode().split(/:(?=\d+$)/).pop(),o=t/r,l=[Uy(Bt(e)/o,Fc),Uy(vr(e)/o,Fc)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return lA(u,s)}function rW(n){const e=n.load?n.load:YO,t=Cn(n.projection||"EPSG:3857"),r=n.ratio??1.5,i=n.crossOrigin??null;return function(s,a,o){o=n.hidpi?o:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,n.params),s=FD(s,a,o,r);const u=nW(n.url,s,a,o,t,l),f=new Image;return f.crossOrigin=i,e(f,u).then(d=>{const g=Bt(s)/d.width*o;return{image:d,extent:s,resolution:g,pixelRatio:o}})}}class iW extends eW{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:tW,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=rW({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),YO(s))})),super.getImageInternal(e,t,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const JS="1.3.0";function sW(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const s=r.getAxisOrientation(),a=EO(i.VERSION,"1.3")>=0;i[a?"CRS":"SRS"]=r.getCode();const o=a&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=o.join(","),lA(n,i)}function aW(n,e,t,r,i,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=e/t,l=[Uy(Bt(n)/o,Fc),Uy(vr(n)/o,Fc)];if(t!=1)switch(a){case"geoserver":const f=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+f:s.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return sW(i,n,l,r,s)}function cb(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:JS,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}const oW='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class lW extends cd{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[oW];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,a)=>{const o=s.getImage();!js&&o instanceof HTMLImageElement&&(o.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||DD)(s,a)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const ix=1/0;class cW{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Mp(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){pn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=ix?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),f=u<i&&r[u]<r[l]?u:l;t[e]=t[f],r[e]=r[f],e=f}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==ix?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=l,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class uW extends cW{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(bt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===wt.LOADED||r===wt.ERROR||r===wt.EMPTY){r!==wt.ERROR&&t.removeEventListener(bt.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===wt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function hW(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return ix;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class fW extends OD{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Us(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const s=Cn(r),a=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(a));const l=Dp(e,s,a),u=nx(a,s,e,t),f=o.getZForResolution(u,this.zDirection),d=o.getResolution(f),g=o.getTileCoordForCoordAndZ(l,f);if(o.getResolutions().length<=g[0])return;let p=o.getTileCoordExtent(g,this.tmpExtent_);const v=this.gutter_;v!==0&&(p=Fm(p,d*v,p));const x={QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,cb(this.params_,"GetFeatureInfo"),i);const E=Math.floor((l[0]-p[0])/d),I=Math.floor((p[3]-l[1])/d);return x[this.v13_?"I":"X"]=E,x[this.v13_?"J":"Y"]=I,this.getRequestUrl_(g,p,1,a||s,x)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:JS,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,t),lA(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,s){const a=this.urls;if(!a)return;let o;if(a.length==1)o=a[0];else{const l=Uc(bD(e),a.length);o=a[l]}return aW(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,o,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||JS;this.v13_=EO(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=i.getResolution(e[0]);let a=i.getTileCoordExtent(e,this.tmpExtent_);const o=this.gutter_;o!==0&&(a=Fm(a,s*o,a));const l=Object.assign({},cb(this.params_,"GetMap"));return this.getRequestUrl_(e,a,t,r,l)}}class ud extends Uo{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class Sc extends ud{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const nr={SINGLECLICK:"singleclick",CLICK:bt.CLICK,DBLCLICK:bt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},eT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class dW extends bp{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Xt(r,eT.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Xt(r,eT.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(bt.TOUCHMOVE,this.boundHandleTouchMove_,zO?{passive:!1}:!1)}emulateClick_(e){let t=new Sc(nr.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Sc(nr.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Sc(nr.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==nr.POINTERUP||t.type==nr.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==nr.POINTERDOWN||t.type==nr.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Sc(nr.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(kn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Sc(nr.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Xt(r,nr.POINTERMOVE,this.handlePointerMove_,this),Xt(r,nr.POINTERUP,this.handlePointerUp_,this),Xt(this.element_,nr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Xt(this.element_.getRootNode(),nr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Sc(nr.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Sc(nr.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(kn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(bt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(kn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(kn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Tc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ti={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class Lv extends zo{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)kn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Dm&&this.listenerKeys.push(Xt(e,Tc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class gW extends Lv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(bt.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Vp+" "+HI+(this.collapsed_&&this.collapsible_?" "+AM:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=u,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>hO(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!mu(t,this.renderedAttributions_)){oU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(AM),this.collapsed_?TM(this.collapseLabel_,this.label_):TM(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class mW extends Lv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(bt.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Vp+" "+HI,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(M1)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:A0}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(M1);!s&&r===0?this.element.classList.add(M1):s&&r!==0&&this.element.classList.remove(M1)}this.label_.style.transform=i}this.rotation_=r}}class pW extends Lv{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=l,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(bt.CLICK,this.handleClick_.bind(this,r),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=u,d.appendChild(typeof o=="string"?document.createTextNode(o):o),d.addEventListener(bt.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+Vp+" "+HI,p=this.element;p.className=g,p.appendChild(f),p.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:A0})):r.setZoom(s)}}}function _W(n){n=n||{};const e=new ha;return(n.zoom===void 0||n.zoom)&&e.push(new pW(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new mW(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new gW(n.attributionOptions)),e}class yW{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const ub={ACTIVE:"active"};class $p extends zo{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ub.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(ub.ACTIVE,e)}setMap(e){this.map_=e}}function xW(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:c$,center:n.getConstrainedCenter(i)})}}function uA(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:A0})}class vW extends $p{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==nr.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();uA(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function tT(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const EW=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},wW=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},VD=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?wW(n):!0},SW=Om,jD=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(sU&&BO&&e.ctrlKey)},GD=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},TW=function(n){const e=n.originalEvent;return BO?e.metaKey:e.ctrlKey},IW=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},BD=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},b2=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},AW=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Wp extends $p{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==nr.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==nr.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==nr.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==nr.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function hA(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class RW extends Wp{constructor(e){super({stopDown:yv}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:tT(GD,AW);this.condition_=e.onFocusOnly?tT(VD,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(hA(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();uB(s,o.getResolution()),PI(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:A0})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class CW extends Wp{constructor(e){e=e||{},super({stopDown:yv}),this.condition_=e.condition?e.condition:EW,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!b2(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===nA)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return b2(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return b2(e)&&jD(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class PW extends pv{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Za([i])}getGeometry(){return this.geometry_}}const Xf={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Mg extends Uo{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class MW extends Wp{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new PW(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??jD,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Mg(Xf.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Mg(t?Xf.BOXEND:Xf.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Mg(Xf.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Mg(Xf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Mg(Xf.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class bW extends MW{constructor(e){e=e||{};const t=e.condition?e.condition:IW;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:A0})}}const zu={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class kW extends $p{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return GD(t)&&BD(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==bt.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==zu.DOWN||i==zu.LEFT||i==zu.RIGHT||i==zu.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;i==zu.DOWN?u=-o:i==zu.LEFT?l=-o:i==zu.RIGHT?l=o:u=o;const f=[l,u];PI(f,a.getRotation()),xW(a,f,this.duration_),r.preventDefault(),t=!0}}return!t}}class NW extends $p{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!TW(t)&&BD(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==bt.KEYDOWN||e.type==bt.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();uA(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const LW=40,OW=300;class DW extends $p{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:SW;this.condition_=e.onFocusOnly?tT(VD,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==bt.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=LW;break;case WheelEvent.DOM_DELTA_PAGE:s*=OW;break}if(s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Dn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),uA(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class FW extends Wp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=yv),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==nA&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(hA(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class VW extends Wp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=yv),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(hA(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function jW(n){n=n||{};const e=new ha,t=new yW(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new CW),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new vW({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new RW({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new FW),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new VW({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new kW),e.push(new NW({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new DW({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new bW({duration:n.zoomDuration})),e}class GW extends pv{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){At()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Fo(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),kO(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,l){let u;const f=t.viewState;function d(k,L,z,P){return s.call(a,L,k?z:null,P)}const g=f.projection,p=wO(e.slice(),g),v=[[0,0]];if(g.canWrapX()&&i){const k=g.getExtent(),L=Bt(k);v.push([-L,0],[L,0])}const x=t.layerStatesArray,E=x.length,I=[],T=[];for(let k=0;k<v.length;k++)for(let L=E-1;L>=0;--L){const z=x[L],P=z.layer;if(P.hasRenderer()&&iA(z,f)&&o.call(l,P)){const C=P.getRenderer(),b=P.getSource();if(C&&b){const F=b.getWrapX()?p:e,j=d.bind(null,z.managed);T[0]=F[0]+v[k][0],T[1]=F[1]+v[k][1],u=C.forEachFeatureAtCoordinate(T,t,r,j,I)}if(u)return u}}if(I.length===0)return;const M=1/I.length;return I.forEach((k,L)=>k.distanceSq+=L*M),I.sort((k,L)=>k.distanceSq-L.distanceSq),I.some(k=>u=k.callback(k.feature,k.layer,k.geometry)),u}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,Om,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){At()}scheduleExpireIconCache(e){da.canExpireCache()&&e.postRenderFunctions.push(BW)}}function BW(n,e){da.expire()}class UW extends GW{constructor(e){super(e),this.fontChangeListenerKey_=Xt(ad,Yd.PROPERTYCHANGE,e.redrawText,e),this.element_=js?$O():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Vp+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new gD(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){kn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(fa.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,f)=>u.zIndex-f.zIndex);t.some(u=>u.layer instanceof TD&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let u=0,f=t.length;u<f;++u){const d=t[u];e.layerIndex=u;const g=d.layer,p=g.getSourceState();if(!iA(d,i)||p!="ready"&&p!="undefined"){g.unrender();continue}const v=g.render(e,a);v&&(v!==a&&(this.children_.push(v),a=v),s.push(d))}this.declutter(e,s),lU(this.element_,this.children_);const l=this.getMap().getTargetElement();if(Oc(l)){const u=l.getContext("2d");for(const f of this.children_){const d=f.firstElementChild||f,g=f.style.backgroundColor;if(g&&(!Oc(d)||d.width>0)&&(u.fillStyle=g,u.fillRect(0,0,l.width,l.height)),Oc(d)&&d.width>0){const p=f.style.opacity||d.style.opacity;u.globalAlpha=p===""?1:Number(p);const v=d.style.transform;if(v)u.setTransform(...US(v));else{const x=parseFloat(d.style.width)/d.width,E=parseFloat(d.style.height)/d.height;u.setTransform(x,0,0,E,0,0)}u.drawImage(d,0,0)}}u.globalAlpha=1,u.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(fa.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function UD(n){if(n instanceof Up){n.setMapInternal(null);return}n instanceof Nv&&n.getLayers().forEach(UD)}function zD(n,e){if(n instanceof Up){n.setMapInternal(e);return}if(n instanceof Nv){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)zD(t[r],e)}}let zW=class extends zo{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=$W(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:aU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Wa(),this.pixelToCoordinateTransform_=Wa(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,js||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,js||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(js?new ha:_W()),this.interactions=t.interactions||(js?new ha:jW({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new uW(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ti.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ti.VIEW,this.handleViewChanged_),this.addChangeListener(Ti.SIZE,this.handleSizeChanged_),this.addChangeListener(Ti.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof To)&&e.view.then(function(i){r.setView(new To(i))}),this.controls.addEventListener(ss.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(ss.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(ss.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(ss.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(ss.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(ss.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){zD(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:Om,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Nv?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:Om,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(Ti.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return BS(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Nr(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ti.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof ha){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ul(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Nr(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ti.SIZE)}getView(){return this.get(Ti.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return hW(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new Sc(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===eT.POINTERDOWN||r===bt.WHEEL||r===bt.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[Kr.ANIMATING]||a[Kr.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(fa.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(fa.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ud(Tc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ud(Tc.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)kn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(bt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(bt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Oc(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Oc(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new UW(this)),!Oc(t)){this.mapBrowserEventHandler_=new dW(this,this.moveTolerance_);for(const i in nr)this.mapBrowserEventHandler_.addEventListener(nr[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(bt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(bt.WHEEL,this.boundHandleBrowserEvent_,zO?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[Xt(r,bt.KEYDOWN,this.handleBrowserEvent,this),Xt(r,bt.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(kn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(kn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Xt(e,Yd.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Xt(e,bt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(kn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Ac("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Xt(e,Yd.PROPERTYCHANGE,this.render,this),Xt(e,bt.CHANGE,this.render,this),Xt(e,"addlayer",this.handleLayerAdd_,this),Xt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){UD(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&VM(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:By(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:tn(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=By(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!S0(this.previousExtent_)&&!Xd(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ud(Tc.MOVESTART,this,i)),this.previousExtent_=Np(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Kr.ANIMATING]&&!s.viewHints[Kr.INTERACTING]&&!Xd(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ud(Tc.MOVEEND,this,s)),dO(s.extent,this.previousExtent_))),this.dispatchEvent(new ud(Tc.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Tc.LOADSTART)||this.hasListener(Tc.LOADEND)||this.hasListener(fa.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Ac("removelayer",t)),this.set(Ti.LAYERGROUP,e)}setSize(e){this.set(Ti.SIZE,e)}setTarget(e){this.set(Ti.TARGET,e)}setView(e){if(!e||e instanceof To){this.set(Ti.VIEW,e);return}this.set(Ti.VIEW,new To);const t=this;e.then(function(r){t.setView(new To(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){let i,s;if(Oc(e))i=e.width,s=e.height;else{const a=getComputedStyle(e);i=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),s=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(t=[Math.max(0,i),Math.max(0,s)],!VM(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&TO("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!mu(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function $W(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Nv({layers:n.layers});t[Ti.LAYERGROUP]=r,t[Ti.TARGET]=n.target,t[Ti.VIEW]=n.view instanceof To?n.view:new To;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new ha(n.controls.slice()):(pn(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new ha(n.interactions.slice()):(pn(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new ha(n.overlays.slice()):(pn(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new ha,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const k2="units",WW=[1,2,5],bg=25.4/.28;class HW extends Lv{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Vp,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(k2,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(k2)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(k2,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let a=Ky(r,e.resolution,t,s);const o=this.minWidth_*(this.dpi_||bg)/bg,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||bg)/bg:void 0;let u=o*a,f="";if(i=="degrees"){const M=qd.degrees;u*=M,u<M/60?(f="",a*=3600):u<M?(f="",a*=60):f=""}else if(i=="imperial")u<.9144?(f="in",a/=.0254):u<1609.344?(f="ft",a/=.3048):(f="mi",a/=1609.344);else if(i=="nautical")a/=1852,f="NM";else if(i=="metric")u<1e-6?(f="nm",a*=1e9):u<.001?(f="m",a*=1e6):u<1?(f="mm",a*=1e3):u<1e3?f="m":(f="km",a/=1e3);else if(i=="us")u<.9144?(f="in",a*=39.37):u<1609.344?(f="ft",a/=.30480061):(f="mi",a/=1609.3472);else throw new Error("Invalid units");let d=3*Math.floor(Math.log(o*a)/Math.log(10)),g,p,v,x=0,E,I;for(;;){v=Math.floor(d/3);const M=Math.pow(10,v);if(g=WW[(d%3+3)%3]*M,p=Math.round(g/a),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){g=x,p=E,v=I;break}else if(p>=o)break;x=g,E=p,I=v,++d}const T=this.scaleBar_?this.createScaleBar(p,g,f):g.toFixed(v<0?-v:0)+" "+f;this.renderedHTML_!=T&&(this.innerElement_.innerHTML=T,this.renderedHTML_=T),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),a=this.scaleBarSteps_,o=e/a,l=[this.createMarker("absolute")];for(let f=0;f<a;++f){const d=f%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${d}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(f%2===0||a===2?this.createStepText(f,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(a,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,s){const o=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=Ky(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||bg,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const KW={},hb=n=>{let e;const t=new Set,r=(f,d)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const p=e;e=d??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(t.add(f),()=>t.delete(f)),destroy:()=>{(KW?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(r,i,l);return l},YW=n=>n?hb(n):hb;var N2={exports:{}},L2={},O2={exports:{}},D2={};var fb;function XW(){if(fb)return D2;fb=1;var n=Pp();function e(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(d,g){var p=g(),v=r({inst:{value:p,getSnapshot:g}}),x=v[0].inst,E=v[1];return s(function(){x.value=p,x.getSnapshot=g,l(x)&&E({inst:x})},[d,p,g]),i(function(){return l(x)&&E({inst:x}),d(function(){l(x)&&E({inst:x})})},[d]),a(p),p}function l(d){var g=d.getSnapshot;d=d.value;try{var p=g();return!t(d,p)}catch{return!0}}function u(d,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return D2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,D2}var db;function qW(){return db||(db=1,O2.exports=XW()),O2.exports}var gb;function ZW(){if(gb)return L2;gb=1;var n=Pp(),e=qW();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,l=n.useDebugValue;return L2.useSyncExternalStoreWithSelector=function(u,f,d,g,p){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=o(function(){function I(z){if(!T){if(T=!0,M=z,z=g(z),p!==void 0&&x.hasValue){var P=x.value;if(p(P,z))return k=P}return k=z}if(P=k,r(M,z))return P;var C=g(z);return p!==void 0&&p(P,C)?(M=z,P):(M=z,k=C)}var T=!1,M,k,L=d===void 0?null:d;return[function(){return I(f())},L===null?void 0:function(){return I(L())}]},[f,d,g,p]);var E=i(u,v[0],v[1]);return a(function(){x.hasValue=!0,x.value=E},[E]),l(E),E},L2}var mb;function QW(){return mb||(mb=1,N2.exports=ZW()),N2.exports}var JW=QW();const eH=AI(JW),$D={},{useDebugValue:tH}=XG,{useSyncExternalStoreWithSelector:nH}=eH;let pb=!1;const rH=n=>n;function iH(n,e=rH,t){($D?"production":void 0)!=="production"&&t&&!pb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),pb=!0);const r=nH(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return tH(r),r}const sH=n=>{($D?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?YW(n):n,t=(r,i)=>iH(e,r,i);return Object.assign(t,e),t},Ja=n=>sH;var WD=Symbol.for("immer-nothing"),_b=Symbol.for("immer-draftable"),zs=Symbol.for("immer-state");function Va(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Km=Object.getPrototypeOf;function n0(n){return!!n&&!!n[zs]}function Ph(n){return n?HD(n)||Array.isArray(n)||!!n[_b]||!!n.constructor?.[_b]||Hp(n)||Dv(n):!1}var aH=Object.prototype.constructor.toString(),yb=new WeakMap;function HD(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=yb.get(t);return r===void 0&&(r=Function.toString.call(t),yb.set(t,r)),r===aH}function sx(n,e,t=!0){Ov(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function Ov(n){const e=n[zs];return e?e.type_:Array.isArray(n)?1:Hp(n)?2:Dv(n)?3:0}function nT(n,e){return Ov(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function KD(n,e,t){const r=Ov(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function oH(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Hp(n){return n instanceof Map}function Dv(n){return n instanceof Set}function Xu(n){return n.copy_||n.base_}function rT(n,e){if(Hp(n))return new Map(n);if(Dv(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=HD(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[zs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create(Km(n),r)}else{const r=Km(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function fA(n,e=!1){return Fv(n)||n0(n)||!Ph(n)||(Ov(n)>1&&Object.defineProperties(n,{set:F1,add:F1,clear:F1,delete:F1}),Object.freeze(n),e&&Object.values(n).forEach(t=>fA(t,!0))),n}function lH(){Va(2)}var F1={value:lH};function Fv(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var cH={};function Mh(n){const e=cH[n];return e||Va(0,n),e}var Ym;function YD(){return Ym}function uH(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xb(n,e){e&&(Mh("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function iT(n){sT(n),n.drafts_.forEach(hH),n.drafts_=null}function sT(n){n===Ym&&(Ym=n.parent_)}function vb(n){return Ym=uH(Ym,n)}function hH(n){const e=n[zs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Eb(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[zs].modified_&&(iT(e),Va(4)),Ph(n)&&(n=ax(e,n),e.parent_||ox(e,n)),e.patches_&&Mh("Patches").generateReplacementPatches_(t[zs].base_,n,e.patches_,e.inversePatches_)):n=ax(e,t,[]),iT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==WD?n:void 0}function ax(n,e,t){if(Fv(e))return e;const r=n.immer_.shouldUseStrictIteration(),i=e[zs];if(!i)return sx(e,(s,a)=>wb(n,i,e,s,a,t),r),e;if(i.scope_!==n)return e;if(!i.modified_)return ox(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),sx(a,(l,u)=>wb(n,i,s,l,u,t,o),r),ox(n,s,!1),t&&n.patches_&&Mh("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function wb(n,e,t,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=Fv(i);if(!(o&&!a)){if(n0(i)){const l=s&&e&&e.type_!==3&&!nT(e.assigned_,r)?s.concat(r):void 0,u=ax(n,i,l);if(KD(t,r,u),n0(u))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Ph(i)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;ax(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Hp(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&ox(n,i)}}}function ox(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&fA(e,t)}function fH(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:YD(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=dA;t&&(i=[r],s=Xm);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var dA={get(n,e){if(e===zs)return n;const t=Xu(n);if(!nT(t,e))return dH(n,t,e);const r=t[e];return n.finalized_||!Ph(r)?r:r===F2(n.base_,e)?(V2(n),n.copy_[e]=oT(r,n)):r},has(n,e){return e in Xu(n)},ownKeys(n){return Reflect.ownKeys(Xu(n))},set(n,e,t){const r=XD(Xu(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=F2(Xu(n),e),s=i?.[zs];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(oH(t,i)&&(t!==void 0||nT(n.base_,e)))return!0;V2(n),aT(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return F2(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,V2(n),aT(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Xu(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){Va(11)},getPrototypeOf(n){return Km(n.base_)},setPrototypeOf(){Va(12)}},Xm={};sx(dA,(n,e)=>{Xm[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Xm.deleteProperty=function(n,e){return Xm.set.call(this,n,e,void 0)};Xm.set=function(n,e,t){return dA.set.call(this,n[0],e,t,n[0])};function F2(n,e){const t=n[zs];return(t?Xu(t):n)[e]}function dH(n,e,t){const r=XD(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function XD(n,e){if(!(e in n))return;let t=Km(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Km(t)}}function aT(n){n.modified_||(n.modified_=!0,n.parent_&&aT(n.parent_))}function V2(n){n.copy_||(n.copy_=rT(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var gH=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...u){return a.produce(l,f=>t.call(this,f,...u))}}typeof t!="function"&&Va(6),r!==void 0&&typeof r!="function"&&Va(7);let i;if(Ph(e)){const s=vb(this),a=oT(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?iT(s):sT(s)}return xb(s,r),Eb(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===WD&&(i=void 0),this.autoFreeze_&&fA(i,!0),r){const s=[],a=[];Mh("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else Va(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,t,(a,o)=>{r=a,i=o}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Ph(n)||Va(8),n0(n)&&(n=mH(n));const e=vb(this),t=oT(n,void 0);return t[zs].isManual_=!0,sT(e),t}finishDraft(n,e){const t=n&&n[zs];(!t||!t.isManual_)&&Va(9);const{scope_:r}=t;return xb(r,e),Eb(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Mh("Patches").applyPatches_;return n0(n)?r(n,e):this.produce(n,i=>r(i,e))}};function oT(n,e){const t=Hp(n)?Mh("MapSet").proxyMap_(n,e):Dv(n)?Mh("MapSet").proxySet_(n,e):fH(n,e);return(e?e.scope_:YD()).drafts_.push(t),t}function mH(n){return n0(n)||Va(10,n),qD(n)}function qD(n){if(!Ph(n)||Fv(n))return n;const e=n[zs];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=rT(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=rT(n,!0);return sx(t,(i,s)=>{KD(t,i,qD(s))},r),e&&(e.finalized_=!1),t}var pH=new gH,_H=pH.produce;const yH=n=>(e,t,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?_H(i):i;return e(o,s,...a)},n(r.setState,t,r)),Jh=yH,zn=Ja()(Jh((n,e)=>({tracking:!1,navigationMode:"free",position:null,heading:null,smoothHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,config:{smoothingFactor:.2,minRotationSpeed:8,centerOnUser:!0,animationDuration:100},startTracking:()=>{n(t=>{t.tracking=!0})},stopTracking:()=>{n(t=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),t.tracking=!1,t.speed=null,t.headingSource=null,t.watchId=null})},toggleMode:()=>{n(t=>{t.navigationMode=t.navigationMode==="free"?"drive":"free",console.log(` Navigation mode: ${t.navigationMode}`)})},updatePosition:t=>{n(r=>{r.position={lat:t.coords.latitude,lng:t.coords.longitude},r.accuracy=t.coords.accuracy,r.speed=t.coords.speed;const i=15,s=.5;if(!(t.coords.accuracy!==null&&t.coords.accuracy<i)){r.headingSource=null;return}if(t.coords.heading!==null&&t.coords.speed!==null&&t.coords.speed>s){r.headingSource="gps";const o=t.coords.heading;e().updateHeading(o,"gps")}else r.headingSource="compass"})},updateHeading:(t,r="compass")=>{n(i=>{const{smoothHeading:s,config:a}=e();if(s===null){i.smoothHeading=t,i.heading=t;return}let o=t-s;o>180&&(o-=360),o<-180&&(o+=360);const l=r==="compass"?8:a.minRotationSpeed;if(Math.abs(o)<l)return;const u=s+o*a.smoothingFactor;i.smoothHeading=(u+360)%360,i.heading=t})},setWatchId:t=>{n(r=>{r.watchId=t})},resetFirstFix:()=>{n(t=>{t.firstFix=!1})}}))),ZD={"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:n}=await ut(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createAHNLayerOL:e}},[]);return n()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:n}=await ut(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createGeomorfologieLayerOL:e}},[]);return n()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:n}=await ut(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createBodemkaartLayerOL:e}},[]);return n()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:n}=await ut(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createIKAWLayerOL:e}},[]);return n()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:n}=await ut(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createFAMKESteentijdLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Landschappen":{name:"Archeo Landschappen",factory:async()=>{const{createArcheoLandschappenLayerOL:n}=await ut(async()=>{const{createArcheoLandschappenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createArcheoLandschappenLayerOL:e}},[]);return n()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:n}=await ut(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createEssenLayerOL:e}},[]);return n()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:n}=await ut(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createRijksmonumentenLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:n}=await ut(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return n()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:n}=await ut(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createWerelderfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:n}=await ut(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-CSitzSA-.js");return{createTerpenLayerOL:e}},[]);return n()},immediateLoad:!0},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:n}=await ut(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-BMzBoiBy.js");return{createLiniesLayerOL:e}},[]);return n()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:n}=await ut(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-BMzBoiBy.js");return{createInundatiesLayerOL:e}},[]);return n()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:n}=await ut(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-BMzBoiBy.js");return{createMilitaireObjectenLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:n}=await ut(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-CXDg1KZo.js");return{createPaleo800ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:n}=await ut(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-CXDg1KZo.js");return{createPaleo100ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:n}=await ut(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-CXDg1KZo.js");return{createPaleo500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:n}=await ut(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-CXDg1KZo.js");return{createPaleo1500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:n}=await ut(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-CXDg1KZo.js");return{createPaleo2750vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:n}=await ut(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-CXDg1KZo.js");return{createPaleo5500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:n}=await ut(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-CXDg1KZo.js");return{createPaleo9000vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:n}=await ut(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-KatN92aT.js");return{createReligieusErfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:n}=await ut(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-BW3rmJNp.js");return{createAHN4ColorElevationLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:n}=await ut(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-BW3rmJNp.js");return{createAHN4HillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:n}=await ut(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-BW3rmJNp.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},"World Hillshade":{name:"World Hillshade",factory:async()=>{const{createWorldHillshadeLayerOL:n}=await ut(async()=>{const{createWorldHillshadeLayerOL:e}=await import("./hillshadeLayers-BW3rmJNp.js");return{createWorldHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:n}=await ut(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createGewaspercelenLayerOL:e}},[]);return n()},immediateLoad:!0},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:n}=await ut(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createKadastraleKaartLayerOL:e}},[]);return n()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:n}=await ut(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createScheepswrakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:n}=await ut(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createWoonheuvelsLayerOL:e}},[]);return n()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:n}=await ut(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createRomeinseFortenLayerOL:e}},[]);return n()},immediateLoad:!0},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:n}=await ut(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createWindmolensLayerOL:e}},[]);return n()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:n}=await ut(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createErfgoedlijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:n}=await ut(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createOudeKernenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenkaartPuntenLayerOL:n}=await ut(async()=>{const{createRelictenkaartPuntenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createRelictenkaartPuntenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:n}=await ut(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:n}=await ut(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:n}=await ut(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-rZI03Bdj.js");return{createVerdronkenDorpenLayerOL:e}},[]);return n()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:n}=await ut(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-yARK7kED.js");return{createAMKLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:n}=await ut(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-yARK7kED.js");return{createAMKRomeinsLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:n}=await ut(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-yARK7kED.js");return{createAMKSteentijdLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:n}=await ut(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-yARK7kED.js");return{createAMKVroegeMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:n}=await ut(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-yARK7kED.js");return{createAMKLateMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:n}=await ut(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-yARK7kED.js");return{createAMKOverigLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"Romeinse wegen":{name:"Romeinse wegen",factory:async()=>{const{createRomeinseWegenLayerOL:n}=await ut(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-C-Vf3Uqd.js");return{createRomeinseWegenLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:n}=await ut(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-C-Vf3Uqd.js");return{createRomeinseWegenWereldLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:n}=await ut(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-BiDTclAF.js");return{createKastelenLayerOL:e}},__vite__mapDeps([3,4]));return n()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:n}=await ut(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-Cgh6AqOT.js");return{createVeengebiedenLayerOL:e}},[]);return n()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:n}=await ut(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-CxWQXyFL.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([5,4]));return n()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:n}=await ut(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-BIDlkGgP.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([6,1,4]));return n()},immediateLoad:!1},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:n}=await ut(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-DyyaIIMm.js");return{createUIKAVVlakkenLayerOL:e}},__vite__mapDeps([7,1]));return n()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:n}=await ut(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-CDj4isC3.js");return{createUIKAVBufferlaagLayerOL:e}},__vite__mapDeps([8,1]));return n()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:n}=await ut(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-DyZYjEvs.js");return{createUIKAVExpertLayerOL:e}},__vite__mapDeps([9,1]));return n()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:n}=await ut(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-ClTUgJo3.js");return{createUIKAVUiterwaardenLayerOL:e}},__vite__mapDeps([10,1]));return n()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:n}=await ut(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-MqkQ_lZE.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([11,1,4]));return n()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:n}=await ut(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-DU4qxr-t.js");return{createMuseaLayerOL:e}},__vite__mapDeps([12,1,4]));return n()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:n}=await ut(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-DVmbxzge.js");return{createStrandjesLayerOL:e}},__vite__mapDeps([13,1]));return n()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:n}=await ut(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-Dy1RU0x3.js");return{createParkenLayerOL:e}},__vite__mapDeps([14,1]));return n()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:n}=await ut(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-Bv8aeT_5.js");return{createFossielenLayerOL:e}},__vite__mapDeps([15,16,4]));return n()},immediateLoad:!1},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:n}=await ut(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-CP4sqgKY.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([17,16,4]));return n()},immediateLoad:!1},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:n}=await ut(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-CeaWmo-d.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([18,16,4]));return n()},immediateLoad:!1},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:n}=await ut(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-68RUIOZm.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([19,16,4]));return n()},immediateLoad:!1},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:n}=await ut(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-B9SgHqgA.js");return{createBunkersLayerOL:e}},__vite__mapDeps([20,4]));return n()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:n}=await ut(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-CAlg0_Iv.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([21,4]));return n()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:n}=await ut(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-DHbae3y9.js");return{createSlagveldenLayerOL:e}},[]);return n()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:n}=await ut(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-yCI2zY6U.js");return{createVliegveldenLayerOL:e}},[]);return n()},immediateLoad:!1}};function xH(){return Object.values(ZD).filter(n=>n.immediateLoad)}const Dr=Ja()(Jh((n,e)=>({map:null,rotation:0,rotationEnabled:!0,setMap:t=>{n(r=>{r.map=t})},setRotation:t=>{n(r=>{if(r.rotation=t,r.map&&r.rotationEnabled){const i=t*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{n(t=>{t.rotationEnabled=!0})},disableRotation:()=>{n(t=>{t.rotationEnabled=!1,t.rotation=0,t.map&&t.map.getView().animate({rotation:0,duration:500})})}}))),Xr=Ja()(Jh((n,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Romeinse wegen":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,"Archeo Landschappen":!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN 0.5m":!1,"World Hillshade":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN 0.5m":.7,"World Hillshade":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"Archeo Landschappen":.5,Essen:.6,Terpen:.7,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},toggleLayer:t=>{const r=e(),i=!r.visible[t];n(s=>{s.visible[t]=i}),i&&!r.layers[t]?e().loadLayer(t):r.layers[t]&&r.layers[t].setVisible(i)},setLayerVisibility:(t,r)=>{const i=e();n(s=>{s.visible[t]=r;const a=s.layers[t];a&&a.setVisible(r)}),r&&!i.layers[t]&&e().loadLayer(t)},setLayerOpacity:(t,r)=>{n(i=>{i.opacity[t]=r;const s=i.layers[t];s&&s.setOpacity(r)})},registerLayer:(t,r)=>{n(i=>{i.layers[t]=r,i.loadingState[t]="loaded",i.visible[t]!==void 0&&r.setVisible(i.visible[t]),i.opacity[t]!==void 0&&r.setOpacity(i.opacity[t])})},unregisterLayer:t=>{n(r=>{delete r.layers[t],delete r.loadingState[t]})},loadLayer:async t=>{const r=e();if(r.loadingState[t]==="loading"||r.layers[t])return;const i=ZD[t];if(!i){console.warn(` Layer "${t}" not found in registry`);return}const s=Dr.getState().map;if(!s){console.warn(` Cannot load layer "${t}": map not initialized`);return}n(a=>{a.loadingState[t]="loading"}),console.log(` Loading layer: ${t}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const o=e();a.setVisible(o.visible[t]??!1),o.opacity[t]!==void 0&&a.setOpacity(o.opacity[t]),s.addLayer(a),n(l=>{l.layers[t]=a,l.loadingState[t]="loaded"}),console.log(` Layer loaded: ${t}`)}catch(a){console.error(` Failed to load layer "${t}":`,a),n(o=>{o.loadingState[t]="error"})}}}))),Ba=Ja()(Jh((n,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstDashboardOpen:!1,collapsedCategories:new Set,closeAllPanels:()=>{n(t=>{t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1})},toggleLayerControl:()=>{n(t=>{t.layerControlOpen=!t.layerControlOpen})},toggleLegend:()=>{n(t=>{t.legendOpen=!t.legendOpen})},toggleBackgroundsPanel:()=>{n(t=>{const r=t.backgroundsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{n(t=>{const r=t.themesPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{n(t=>{const r=t.settingsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{n(t=>{const r=t.infoPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.infoPanelOpen=!0)})},togglePresetsPanel:()=>{n(t=>{const r=t.presetsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.presetsPanelOpen=!0)})},toggleCategory:t=>{n(r=>{r.collapsedCategories.has(t)?r.collapsedCategories.delete(t):r.collapsedCategories.add(t)})},setLayerControlOpen:t=>{n(r=>{r.layerControlOpen=t})},setLegendOpen:t=>{n(r=>{r.legendOpen=t})},openVondstForm:t=>{n(r=>{r.backgroundsPanelOpen=!1,r.themesPanelOpen=!1,r.settingsPanelOpen=!1,r.infoPanelOpen=!1,r.presetsPanelOpen=!1,r.vondstFormOpen=!0,r.vondstFormLocation=t||null})},closeVondstForm:()=>{n(t=>{t.vondstFormOpen=!1,t.vondstFormLocation=null})},toggleVondstDashboard:()=>{n(t=>{const r=t.vondstDashboardOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,t.vondstDashboardOpen=!r})}}))),QD=Ja()(Jh(n=>({user:null,loading:!0,error:null,setUser:e=>{n(t=>{t.user=e,t.loading=!1})},setLoading:e=>{n(t=>{t.loading=e})},setError:e=>{n(t=>{t.error=e})}}))),vH=()=>{};var Sb={};const JD=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},EH=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},e5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=s>>2,d=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;l||(p=64,a||(g=64)),r.push(t[f],t[d],t[g],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):EH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new wH;const g=s<<2|o>>4;if(r.push(g),u!==64){const p=o<<4&240|u>>2;if(r.push(p),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SH=function(n){const e=JD(n);return e5.encodeByteArray(e,!0)},lx=function(n){return SH(n).replace(/\./g,"")},t5=function(n){try{return e5.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function n5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const TH=()=>n5().__FIREBASE_DEFAULTS__,IH=()=>{if(typeof process>"u"||typeof Sb>"u")return;const n=Sb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&t5(n[1]);return e&&JSON.parse(e)},Vv=()=>{try{return vH()||TH()||IH()||AH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},r5=n=>Vv()?.emulatorHosts?.[n],i5=n=>{const e=r5(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},s5=()=>Vv()?.config,a5=n=>Vv()?.[`_${n}`];class RH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ef(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gA(n){return(await fetch(n,{credentials:"include"})).ok}function o5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[lx(JSON.stringify(t)),lx(JSON.stringify(a)),""].join(".")}const am={};function CH(){const n={prod:[],emulator:[]};for(const e of Object.keys(am))am[e]?n.emulator.push(e):n.prod.push(e);return n}function PH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Tb=!1;function mA(n,e){if(typeof window>"u"||typeof document>"u"||!ef(window.location.host)||am[n]===e||am[n]||Tb)return;am[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=CH().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Tb=!0,a()},g}function f(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function d(){const g=PH(r),p=t("text"),v=document.getElementById(p)||document.createElement("span"),x=t("learnmore"),E=document.getElementById(x)||document.createElement("a"),I=t("preprendIcon"),T=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const M=g.element;o(M),f(E,x);const k=u();l(T,I),M.append(T,v,E,k),document.body.appendChild(M)}s?(v.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fr())}function l5(){const n=Vv()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kH(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LH(){const n=Fr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function c5(){return!l5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u5(){return!l5()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function h5(){try{return typeof indexedDB=="object"}catch{return!1}}function OH(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const DH="FirebaseError";class $o extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=DH,Object.setPrototypeOf(this,$o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kp.prototype.create)}}class Kp{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?FH(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new $o(i,o,r)}}function FH(n,e){return n.replace(VH,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VH=/\{\$([^}]+)}/g;function jH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Ib(s)&&Ib(a)){if(!bh(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Ib(n){return n!==null&&typeof n=="object"}function Yp(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function GH(n,e){const t=new BH(n,e);return t.subscribe.bind(t)}class BH{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");UH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=j2),i.error===void 0&&(i.error=j2),i.complete===void 0&&(i.complete=j2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UH(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function j2(){}function Qr(n){return n&&n._delegate?n._delegate:n}class Jc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qu="[DEFAULT]";class zH{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new RH;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WH(e))try{this.getOrInitializeService({instanceIdentifier:qu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qu){return this.instances.has(e)}getOptions(e=qu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$H(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qu){return this.component?this.component.multipleInstances?e:qu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $H(n){return n===qu?void 0:n}function WH(n){return n.instantiationMode==="EAGER"}class HH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ut||(Ut={}));const KH={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},YH=Ut.INFO,XH={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},qH=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=XH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pA{constructor(e){this.name=e,this._logLevel=YH,this._logHandler=qH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...e),this._logHandler(this,Ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...e),this._logHandler(this,Ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...e),this._logHandler(this,Ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...e),this._logHandler(this,Ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...e),this._logHandler(this,Ut.ERROR,...e)}}const ZH=(n,e)=>e.some(t=>n instanceof t);let Ab,Rb;function QH(){return Ab||(Ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JH(){return Rb||(Rb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f5=new WeakMap,lT=new WeakMap,d5=new WeakMap,G2=new WeakMap,_A=new WeakMap;function eK(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t($c(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&f5.set(t,n)}).catch(()=>{}),_A.set(e,n),e}function tK(n){if(lT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});lT.set(n,e)}let cT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||d5.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $c(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nK(n){cT=n(cT)}function rK(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(B2(this),e,...t);return d5.set(r,e.sort?e.sort():[e]),$c(r)}:JH().includes(n)?function(...e){return n.apply(B2(this),e),$c(f5.get(this))}:function(...e){return $c(n.apply(B2(this),e))}}function iK(n){return typeof n=="function"?rK(n):(n instanceof IDBTransaction&&tK(n),ZH(n,QH())?new Proxy(n,cT):n)}function $c(n){if(n instanceof IDBRequest)return eK(n);if(G2.has(n))return G2.get(n);const e=iK(n);return e!==n&&(G2.set(n,e),_A.set(e,n)),e}const B2=n=>_A.get(n);function sK(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=$c(a);return r&&a.addEventListener("upgradeneeded",l=>{r($c(a.result),l.oldVersion,l.newVersion,$c(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const aK=["get","getKey","getAll","getAllKeys","count"],oK=["put","add","delete","clear"],U2=new Map;function Cb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(U2.get(e))return U2.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=oK.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aK.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return U2.set(e,s),s}nK(n=>({...n,get:(e,t,r)=>Cb(e,t)||n.get(e,t,r),has:(e,t)=>!!Cb(e,t)||n.has(e,t)}));class lK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cK(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function cK(n){return n.getComponent()?.type==="VERSION"}const uT="@firebase/app",Pb="0.14.6";const Ml=new pA("@firebase/app"),uK="@firebase/app-compat",hK="@firebase/analytics-compat",fK="@firebase/analytics",dK="@firebase/app-check-compat",gK="@firebase/app-check",mK="@firebase/auth",pK="@firebase/auth-compat",_K="@firebase/database",yK="@firebase/data-connect",xK="@firebase/database-compat",vK="@firebase/functions",EK="@firebase/functions-compat",wK="@firebase/installations",SK="@firebase/installations-compat",TK="@firebase/messaging",IK="@firebase/messaging-compat",AK="@firebase/performance",RK="@firebase/performance-compat",CK="@firebase/remote-config",PK="@firebase/remote-config-compat",MK="@firebase/storage",bK="@firebase/storage-compat",kK="@firebase/firestore",NK="@firebase/ai",LK="@firebase/firestore-compat",OK="firebase",DK="12.6.0";const hT="[DEFAULT]",FK={[uT]:"fire-core",[uK]:"fire-core-compat",[fK]:"fire-analytics",[hK]:"fire-analytics-compat",[gK]:"fire-app-check",[dK]:"fire-app-check-compat",[mK]:"fire-auth",[pK]:"fire-auth-compat",[_K]:"fire-rtdb",[yK]:"fire-data-connect",[xK]:"fire-rtdb-compat",[vK]:"fire-fn",[EK]:"fire-fn-compat",[wK]:"fire-iid",[SK]:"fire-iid-compat",[TK]:"fire-fcm",[IK]:"fire-fcm-compat",[AK]:"fire-perf",[RK]:"fire-perf-compat",[CK]:"fire-rc",[PK]:"fire-rc-compat",[MK]:"fire-gcs",[bK]:"fire-gcs-compat",[kK]:"fire-fst",[LK]:"fire-fst-compat",[NK]:"fire-vertex","fire-js":"fire-js",[OK]:"fire-js-all"};const cx=new Map,VK=new Map,fT=new Map;function Mb(n,e){try{n.container.addComponent(e)}catch(t){Ml.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function kh(n){const e=n.name;if(fT.has(e))return Ml.debug(`There were multiple attempts to register component ${e}.`),!1;fT.set(e,n);for(const t of cx.values())Mb(t,n);for(const t of VK.values())Mb(t,n);return!0}function jv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ca(n){return n==null?!1:n.settings!==void 0}const jK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wc=new Kp("app","Firebase",jK);class GK{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wc.create("app-deleted",{appName:this._name})}}const tf=DK;function g5(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:hT,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Wc.create("bad-app-name",{appName:String(i)});if(t||(t=s5()),!t)throw Wc.create("no-options");const s=cx.get(i);if(s){if(bh(t,s.options)&&bh(r,s.config))return s;throw Wc.create("duplicate-app",{appName:i})}const a=new HH(i);for(const l of fT.values())a.addComponent(l);const o=new GK(t,r,a);return cx.set(i,o),o}function yA(n=hT){const e=cx.get(n);if(!e&&n===hT&&s5())return g5();if(!e)throw Wc.create("no-app",{appName:n});return e}function Po(n,e,t){let r=FK[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ml.warn(a.join(" "));return}kh(new Jc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const BK="firebase-heartbeat-database",UK=1,qm="firebase-heartbeat-store";let z2=null;function m5(){return z2||(z2=sK(BK,UK,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qm)}catch(t){console.warn(t)}}}}).catch(n=>{throw Wc.create("idb-open",{originalErrorMessage:n.message})})),z2}async function zK(n){try{const t=(await m5()).transaction(qm),r=await t.objectStore(qm).get(p5(n));return await t.done,r}catch(e){if(e instanceof $o)Ml.warn(e.message);else{const t=Wc.create("idb-get",{originalErrorMessage:e?.message});Ml.warn(t.message)}}}async function bb(n,e){try{const r=(await m5()).transaction(qm,"readwrite");await r.objectStore(qm).put(e,p5(n)),await r.done}catch(t){if(t instanceof $o)Ml.warn(t.message);else{const r=Wc.create("idb-set",{originalErrorMessage:t?.message});Ml.warn(r.message)}}}function p5(n){return`${n.name}!${n.options.appId}`}const $K=1024,WK=30;class HK{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YK(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=kb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>WK){const i=XK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ml.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kb(),{heartbeatsToSend:t,unsentEntries:r}=KK(this._heartbeatsCache.heartbeats),i=lx(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ml.warn(e),""}}}function kb(){return new Date().toISOString().substring(0,10)}function KK(n,e=$K){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Nb(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Nb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class YK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h5()?OH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zK(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Nb(n){return lx(JSON.stringify({version:2,heartbeats:n})).length}function XK(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function qK(n){kh(new Jc("platform-logger",e=>new lK(e),"PRIVATE")),kh(new Jc("heartbeat",e=>new HK(e),"PRIVATE")),Po(uT,Pb,n),Po(uT,Pb,"esm2020"),Po("fire-js","")}qK("");var Lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hc,_5;(function(){var n;function e(P,C){function b(){}b.prototype=C.prototype,P.F=C.prototype,P.prototype=new b,P.prototype.constructor=P,P.D=function(F,j,U){for(var V=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)V[Te-2]=arguments[Te];return C.prototype[j].apply(F,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,C,b){b||(b=0);const F=Array(16);if(typeof C=="string")for(var j=0;j<16;++j)F[j]=C.charCodeAt(b++)|C.charCodeAt(b++)<<8|C.charCodeAt(b++)<<16|C.charCodeAt(b++)<<24;else for(j=0;j<16;++j)F[j]=C[b++]|C[b++]<<8|C[b++]<<16|C[b++]<<24;C=P.g[0],b=P.g[1],j=P.g[2];let U=P.g[3],V;V=C+(U^b&(j^U))+F[0]+3614090360&4294967295,C=b+(V<<7&4294967295|V>>>25),V=U+(j^C&(b^j))+F[1]+3905402710&4294967295,U=C+(V<<12&4294967295|V>>>20),V=j+(b^U&(C^b))+F[2]+606105819&4294967295,j=U+(V<<17&4294967295|V>>>15),V=b+(C^j&(U^C))+F[3]+3250441966&4294967295,b=j+(V<<22&4294967295|V>>>10),V=C+(U^b&(j^U))+F[4]+4118548399&4294967295,C=b+(V<<7&4294967295|V>>>25),V=U+(j^C&(b^j))+F[5]+1200080426&4294967295,U=C+(V<<12&4294967295|V>>>20),V=j+(b^U&(C^b))+F[6]+2821735955&4294967295,j=U+(V<<17&4294967295|V>>>15),V=b+(C^j&(U^C))+F[7]+4249261313&4294967295,b=j+(V<<22&4294967295|V>>>10),V=C+(U^b&(j^U))+F[8]+1770035416&4294967295,C=b+(V<<7&4294967295|V>>>25),V=U+(j^C&(b^j))+F[9]+2336552879&4294967295,U=C+(V<<12&4294967295|V>>>20),V=j+(b^U&(C^b))+F[10]+4294925233&4294967295,j=U+(V<<17&4294967295|V>>>15),V=b+(C^j&(U^C))+F[11]+2304563134&4294967295,b=j+(V<<22&4294967295|V>>>10),V=C+(U^b&(j^U))+F[12]+1804603682&4294967295,C=b+(V<<7&4294967295|V>>>25),V=U+(j^C&(b^j))+F[13]+4254626195&4294967295,U=C+(V<<12&4294967295|V>>>20),V=j+(b^U&(C^b))+F[14]+2792965006&4294967295,j=U+(V<<17&4294967295|V>>>15),V=b+(C^j&(U^C))+F[15]+1236535329&4294967295,b=j+(V<<22&4294967295|V>>>10),V=C+(j^U&(b^j))+F[1]+4129170786&4294967295,C=b+(V<<5&4294967295|V>>>27),V=U+(b^j&(C^b))+F[6]+3225465664&4294967295,U=C+(V<<9&4294967295|V>>>23),V=j+(C^b&(U^C))+F[11]+643717713&4294967295,j=U+(V<<14&4294967295|V>>>18),V=b+(U^C&(j^U))+F[0]+3921069994&4294967295,b=j+(V<<20&4294967295|V>>>12),V=C+(j^U&(b^j))+F[5]+3593408605&4294967295,C=b+(V<<5&4294967295|V>>>27),V=U+(b^j&(C^b))+F[10]+38016083&4294967295,U=C+(V<<9&4294967295|V>>>23),V=j+(C^b&(U^C))+F[15]+3634488961&4294967295,j=U+(V<<14&4294967295|V>>>18),V=b+(U^C&(j^U))+F[4]+3889429448&4294967295,b=j+(V<<20&4294967295|V>>>12),V=C+(j^U&(b^j))+F[9]+568446438&4294967295,C=b+(V<<5&4294967295|V>>>27),V=U+(b^j&(C^b))+F[14]+3275163606&4294967295,U=C+(V<<9&4294967295|V>>>23),V=j+(C^b&(U^C))+F[3]+4107603335&4294967295,j=U+(V<<14&4294967295|V>>>18),V=b+(U^C&(j^U))+F[8]+1163531501&4294967295,b=j+(V<<20&4294967295|V>>>12),V=C+(j^U&(b^j))+F[13]+2850285829&4294967295,C=b+(V<<5&4294967295|V>>>27),V=U+(b^j&(C^b))+F[2]+4243563512&4294967295,U=C+(V<<9&4294967295|V>>>23),V=j+(C^b&(U^C))+F[7]+1735328473&4294967295,j=U+(V<<14&4294967295|V>>>18),V=b+(U^C&(j^U))+F[12]+2368359562&4294967295,b=j+(V<<20&4294967295|V>>>12),V=C+(b^j^U)+F[5]+4294588738&4294967295,C=b+(V<<4&4294967295|V>>>28),V=U+(C^b^j)+F[8]+2272392833&4294967295,U=C+(V<<11&4294967295|V>>>21),V=j+(U^C^b)+F[11]+1839030562&4294967295,j=U+(V<<16&4294967295|V>>>16),V=b+(j^U^C)+F[14]+4259657740&4294967295,b=j+(V<<23&4294967295|V>>>9),V=C+(b^j^U)+F[1]+2763975236&4294967295,C=b+(V<<4&4294967295|V>>>28),V=U+(C^b^j)+F[4]+1272893353&4294967295,U=C+(V<<11&4294967295|V>>>21),V=j+(U^C^b)+F[7]+4139469664&4294967295,j=U+(V<<16&4294967295|V>>>16),V=b+(j^U^C)+F[10]+3200236656&4294967295,b=j+(V<<23&4294967295|V>>>9),V=C+(b^j^U)+F[13]+681279174&4294967295,C=b+(V<<4&4294967295|V>>>28),V=U+(C^b^j)+F[0]+3936430074&4294967295,U=C+(V<<11&4294967295|V>>>21),V=j+(U^C^b)+F[3]+3572445317&4294967295,j=U+(V<<16&4294967295|V>>>16),V=b+(j^U^C)+F[6]+76029189&4294967295,b=j+(V<<23&4294967295|V>>>9),V=C+(b^j^U)+F[9]+3654602809&4294967295,C=b+(V<<4&4294967295|V>>>28),V=U+(C^b^j)+F[12]+3873151461&4294967295,U=C+(V<<11&4294967295|V>>>21),V=j+(U^C^b)+F[15]+530742520&4294967295,j=U+(V<<16&4294967295|V>>>16),V=b+(j^U^C)+F[2]+3299628645&4294967295,b=j+(V<<23&4294967295|V>>>9),V=C+(j^(b|~U))+F[0]+4096336452&4294967295,C=b+(V<<6&4294967295|V>>>26),V=U+(b^(C|~j))+F[7]+1126891415&4294967295,U=C+(V<<10&4294967295|V>>>22),V=j+(C^(U|~b))+F[14]+2878612391&4294967295,j=U+(V<<15&4294967295|V>>>17),V=b+(U^(j|~C))+F[5]+4237533241&4294967295,b=j+(V<<21&4294967295|V>>>11),V=C+(j^(b|~U))+F[12]+1700485571&4294967295,C=b+(V<<6&4294967295|V>>>26),V=U+(b^(C|~j))+F[3]+2399980690&4294967295,U=C+(V<<10&4294967295|V>>>22),V=j+(C^(U|~b))+F[10]+4293915773&4294967295,j=U+(V<<15&4294967295|V>>>17),V=b+(U^(j|~C))+F[1]+2240044497&4294967295,b=j+(V<<21&4294967295|V>>>11),V=C+(j^(b|~U))+F[8]+1873313359&4294967295,C=b+(V<<6&4294967295|V>>>26),V=U+(b^(C|~j))+F[15]+4264355552&4294967295,U=C+(V<<10&4294967295|V>>>22),V=j+(C^(U|~b))+F[6]+2734768916&4294967295,j=U+(V<<15&4294967295|V>>>17),V=b+(U^(j|~C))+F[13]+1309151649&4294967295,b=j+(V<<21&4294967295|V>>>11),V=C+(j^(b|~U))+F[4]+4149444226&4294967295,C=b+(V<<6&4294967295|V>>>26),V=U+(b^(C|~j))+F[11]+3174756917&4294967295,U=C+(V<<10&4294967295|V>>>22),V=j+(C^(U|~b))+F[2]+718787259&4294967295,j=U+(V<<15&4294967295|V>>>17),V=b+(U^(j|~C))+F[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(j+(V<<21&4294967295|V>>>11))&4294967295,P.g[2]=P.g[2]+j&4294967295,P.g[3]=P.g[3]+U&4294967295}r.prototype.v=function(P,C){C===void 0&&(C=P.length);const b=C-this.blockSize,F=this.C;let j=this.h,U=0;for(;U<C;){if(j==0)for(;U<=b;)i(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<C;)if(F[j++]=P.charCodeAt(U++),j==this.blockSize){i(this,F),j=0;break}}else for(;U<C;)if(F[j++]=P[U++],j==this.blockSize){i(this,F),j=0;break}}this.h=j,this.o+=C},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;C=this.o*8;for(var b=P.length-8;b<P.length;++b)P[b]=C&255,C/=256;for(this.v(P),P=Array(16),C=0,b=0;b<4;++b)for(let F=0;F<32;F+=8)P[C++]=this.g[b]>>>F&255;return P};function s(P,C){var b=o;return Object.prototype.hasOwnProperty.call(b,P)?b[P]:b[P]=C(P)}function a(P,C){this.h=C;const b=[];let F=!0;for(let j=P.length-1;j>=0;j--){const U=P[j]|0;F&&U==C||(b[j]=U,F=!1)}this.g=b}var o={};function l(P){return-128<=P&&P<128?s(P,function(C){return new a([C|0],C<0?-1:0)}):new a([P|0],P<0?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return d;if(P<0)return E(u(-P));const C=[];let b=1;for(let F=0;P>=b;F++)C[F]=P/b|0,b*=4294967296;return new a(C,0)}function f(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return E(f(P.substring(1),C));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=u(Math.pow(C,8));let F=d;for(let U=0;U<P.length;U+=8){var j=Math.min(8,P.length-U);const V=parseInt(P.substring(U,U+j),C);j<8?(j=u(Math.pow(C,j)),F=F.j(j).add(u(V))):(F=F.j(b),F=F.add(u(V)))}return F}var d=l(0),g=l(1),p=l(16777216);n=a.prototype,n.m=function(){if(x(this))return-E(this).m();let P=0,C=1;for(let b=0;b<this.g.length;b++){const F=this.i(b);P+=(F>=0?F:4294967296+F)*C,C*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(v(this))return"0";if(x(this))return"-"+E(this).toString(P);const C=u(Math.pow(P,6));var b=this;let F="";for(;;){const j=k(b,C).g;b=I(b,j.j(C));let U=((b.g.length>0?b.g[0]:b.h)>>>0).toString(P);if(b=j,v(b))return U+F;for(;U.length<6;)U="0"+U;F=U+F}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function v(P){if(P.h!=0)return!1;for(let C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function x(P){return P.h==-1}n.l=function(P){return P=I(this,P),x(P)?-1:v(P)?0:1};function E(P){const C=P.g.length,b=[];for(let F=0;F<C;F++)b[F]=~P.g[F];return new a(b,~P.h).add(g)}n.abs=function(){return x(this)?E(this):this},n.add=function(P){const C=Math.max(this.g.length,P.g.length),b=[];let F=0;for(let j=0;j<=C;j++){let U=F+(this.i(j)&65535)+(P.i(j)&65535),V=(U>>>16)+(this.i(j)>>>16)+(P.i(j)>>>16);F=V>>>16,U&=65535,V&=65535,b[j]=V<<16|U}return new a(b,b[b.length-1]&-2147483648?-1:0)};function I(P,C){return P.add(E(C))}n.j=function(P){if(v(this)||v(P))return d;if(x(this))return x(P)?E(this).j(E(P)):E(E(this).j(P));if(x(P))return E(this.j(E(P)));if(this.l(p)<0&&P.l(p)<0)return u(this.m()*P.m());const C=this.g.length+P.g.length,b=[];for(var F=0;F<2*C;F++)b[F]=0;for(F=0;F<this.g.length;F++)for(let j=0;j<P.g.length;j++){const U=this.i(F)>>>16,V=this.i(F)&65535,Te=P.i(j)>>>16,Me=P.i(j)&65535;b[2*F+2*j]+=V*Me,T(b,2*F+2*j),b[2*F+2*j+1]+=U*Me,T(b,2*F+2*j+1),b[2*F+2*j+1]+=V*Te,T(b,2*F+2*j+1),b[2*F+2*j+2]+=U*Te,T(b,2*F+2*j+2)}for(P=0;P<C;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=C;P<2*C;P++)b[P]=0;return new a(b,0)};function T(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function M(P,C){this.g=P,this.h=C}function k(P,C){if(v(C))throw Error("division by zero");if(v(P))return new M(d,d);if(x(P))return C=k(E(P),C),new M(E(C.g),E(C.h));if(x(C))return C=k(P,E(C)),new M(E(C.g),C.h);if(P.g.length>30){if(x(P)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var b=g,F=C;F.l(P)<=0;)b=L(b),F=L(F);var j=z(b,1),U=z(F,1);for(F=z(F,2),b=z(b,2);!v(F);){var V=U.add(F);V.l(P)<=0&&(j=j.add(b),U=V),F=z(F,1),b=z(b,1)}return C=I(P,j.j(C)),new M(j,C)}for(j=d;P.l(C)>=0;){for(b=Math.max(1,Math.floor(P.m()/C.m())),F=Math.ceil(Math.log(b)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),U=u(b),V=U.j(C);x(V)||V.l(P)>0;)b-=F,U=u(b),V=U.j(C);v(U)&&(U=g),j=j.add(U),P=I(P,V)}return new M(j,P)}n.B=function(P){return k(this,P).h},n.and=function(P){const C=Math.max(this.g.length,P.g.length),b=[];for(let F=0;F<C;F++)b[F]=this.i(F)&P.i(F);return new a(b,this.h&P.h)},n.or=function(P){const C=Math.max(this.g.length,P.g.length),b=[];for(let F=0;F<C;F++)b[F]=this.i(F)|P.i(F);return new a(b,this.h|P.h)},n.xor=function(P){const C=Math.max(this.g.length,P.g.length),b=[];for(let F=0;F<C;F++)b[F]=this.i(F)^P.i(F);return new a(b,this.h^P.h)};function L(P){const C=P.g.length+1,b=[];for(let F=0;F<C;F++)b[F]=P.i(F)<<1|P.i(F-1)>>>31;return new a(b,P.h)}function z(P,C){const b=C>>5;C%=32;const F=P.g.length-b,j=[];for(let U=0;U<F;U++)j[U]=C>0?P.i(U+b)>>>C|P.i(U+b+1)<<32-C:P.i(U+b);return new a(j,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=f,Hc=a}).apply(typeof Lb<"u"?Lb:typeof self<"u"?self:typeof window<"u"?window:{});var V1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var y5,Hg,x5,my,dT,v5,E5,w5;(function(){var n,e=Object.defineProperty;function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof V1=="object"&&V1];for(var R=0;R<_.length;++R){var N=_[R];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=t(this);function i(_,R){if(R)e:{var N=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var ge=_[H];if(!(ge in N))break e;N=N[ge]}_=_[_.length-1],H=N[_],R=R(H),R!=H&&R!=null&&e(N,_,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(R){var N=[],H;for(H in R)Object.prototype.hasOwnProperty.call(R,H)&&N.push([H,R[H]]);return N}});var s=s||{},a=this||self;function o(_){var R=typeof _;return R=="object"&&_!=null||R=="function"}function l(_,R,N){return _.call.apply(_.bind,arguments)}function u(_,R,N){return u=l,u.apply(null,arguments)}function f(_,R){var N=Array.prototype.slice.call(arguments,1);return function(){var H=N.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function d(_,R){function N(){}N.prototype=R.prototype,_.Z=R.prototype,_.prototype=new N,_.prototype.constructor=_,_.Ob=function(H,ge,we){for(var Qe=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)Qe[Lt-2]=arguments[Lt];return R.prototype[ge].apply(H,Qe)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function p(_){const R=_.length;if(R>0){const N=Array(R);for(let H=0;H<R;H++)N[H]=_[H];return N}return[]}function v(_,R){for(let H=1;H<arguments.length;H++){const ge=arguments[H];var N=typeof ge;if(N=N!="object"?N:ge?Array.isArray(ge)?"array":N:"null",N=="array"||N=="object"&&typeof ge.length=="number"){N=_.length||0;const we=ge.length||0;_.length=N+we;for(let Qe=0;Qe<we;Qe++)_[N+Qe]=ge[Qe]}else _.push(ge)}}class x{constructor(R,N){this.i=R,this.j=N,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function E(_){a.setTimeout(()=>{throw _},0)}function I(){var _=P;let R=null;return _.g&&(R=_.g,_.g=_.g.next,_.g||(_.h=null),R.next=null),R}class T{constructor(){this.h=this.g=null}add(R,N){const H=M.get();H.set(R,N),this.h?this.h.next=H:this.g=H,this.h=H}}var M=new x(()=>new k,_=>_.reset());class k{constructor(){this.next=this.g=this.h=null}set(R,N){this.h=R,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let L,z=!1,P=new T,C=()=>{const _=Promise.resolve(void 0);L=()=>{_.then(b)}};function b(){for(var _;_=I();){try{_.h.call(_.g)}catch(N){E(N)}var R=M;R.j(_),R.h<100&&(R.h++,_.next=R.g,R.g=_)}z=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(_,R){this.type=_,this.g=this.target=R,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var _=!1,R=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const N=()=>{};a.addEventListener("test",N,R),a.removeEventListener("test",N,R)}catch{}return _})();function V(_){return/^[\s\xa0]*$/.test(_)}function Te(_,R){j.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,R)}d(Te,j),Te.prototype.init=function(_,R){const N=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=R,R=_.relatedTarget,R||(N=="mouseover"?R=_.fromElement:N=="mouseout"&&(R=_.toElement)),this.relatedTarget=R,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),De=0;function be(_,R,N,H,ge){this.listener=_,this.proxy=null,this.src=R,this.type=N,this.capture=!!H,this.ha=ge,this.key=++De,this.da=this.fa=!1}function le(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ae(_,R,N){for(const H in _)R.call(N,_[H],H,_)}function Ie(_,R){for(const N in _)R.call(void 0,_[N],N,_)}function Y(_){const R={};for(const N in _)R[N]=_[N];return R}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(_,R){let N,H;for(let ge=1;ge<arguments.length;ge++){H=arguments[ge];for(N in H)_[N]=H[N];for(let we=0;we<O.length;we++)N=O[we],Object.prototype.hasOwnProperty.call(H,N)&&(_[N]=H[N])}}function ne(_){this.src=_,this.g={},this.h=0}ne.prototype.add=function(_,R,N,H,ge){const we=_.toString();_=this.g[we],_||(_=this.g[we]=[],this.h++);const Qe=me(_,R,H,ge);return Qe>-1?(R=_[Qe],N||(R.fa=!1)):(R=new be(R,this.src,we,!!H,ge),R.fa=N,_.push(R)),R};function ee(_,R){const N=R.type;if(N in _.g){var H=_.g[N],ge=Array.prototype.indexOf.call(H,R,void 0),we;(we=ge>=0)&&Array.prototype.splice.call(H,ge,1),we&&(le(R),_.g[N].length==0&&(delete _.g[N],_.h--))}}function me(_,R,N,H){for(let ge=0;ge<_.length;++ge){const we=_[ge];if(!we.da&&we.listener==R&&we.capture==!!N&&we.ha==H)return ge}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Ne={};function se(_,R,N,H,ge){if(Array.isArray(R)){for(let we=0;we<R.length;we++)se(_,R[we],N,H,ge);return null}return N=ot(N),_&&_[Me]?_.J(R,N,o(H)?!!H.capture:!1,ge):re(_,R,N,!1,H,ge)}function re(_,R,N,H,ge,we){if(!R)throw Error("Invalid event type");const Qe=o(ge)?!!ge.capture:!!ge;let Lt=W(_);if(Lt||(_[Se]=Lt=new ne(_)),N=Lt.add(R,N,H,Qe,we),N.proxy)return N;if(H=D(),N.proxy=H,H.src=_,H.listener=N,_.addEventListener)U||(ge=Qe),ge===void 0&&(ge=!1),_.addEventListener(R.toString(),H,ge);else if(_.attachEvent)_.attachEvent(He(R.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return N}function D(){function _(N){return R.call(_.src,_.listener,N)}const R=ue;return _}function Ye(_,R,N,H,ge){if(Array.isArray(R))for(var we=0;we<R.length;we++)Ye(_,R[we],N,H,ge);else H=o(H)?!!H.capture:!!H,N=ot(N),_&&_[Me]?(_=_.i,we=String(R).toString(),we in _.g&&(R=_.g[we],N=me(R,N,H,ge),N>-1&&(le(R[N]),Array.prototype.splice.call(R,N,1),R.length==0&&(delete _.g[we],_.h--)))):_&&(_=W(_))&&(R=_.g[R.toString()],_=-1,R&&(_=me(R,N,H,ge)),(N=_>-1?R[_]:null)&&he(N))}function he(_){if(typeof _!="number"&&_&&!_.da){var R=_.src;if(R&&R[Me])ee(R.i,_);else{var N=_.type,H=_.proxy;R.removeEventListener?R.removeEventListener(N,H,_.capture):R.detachEvent?R.detachEvent(He(N),H):R.addListener&&R.removeListener&&R.removeListener(H),(N=W(R))?(ee(N,_),N.h==0&&(N.src=null,R[Se]=null)):le(_)}}}function He(_){return _ in Ne?Ne[_]:Ne[_]="on"+_}function ue(_,R){if(_.da)_=!0;else{R=new Te(R,this);const N=_.listener,H=_.ha||_.src;_.fa&&he(_),_=N.call(H,R)}return _}function W(_){return _=_[Se],_ instanceof ne?_:null}var ae="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(_){return typeof _=="function"?_:(_[ae]||(_[ae]=function(R){return _.handleEvent(R)}),_[ae])}function lt(){F.call(this),this.i=new ne(this),this.M=this,this.G=null}d(lt,F),lt.prototype[Me]=!0,lt.prototype.removeEventListener=function(_,R,N,H){Ye(this,_,R,N,H)};function _t(_,R){var N,H=_.G;if(H)for(N=[];H;H=H.G)N.push(H);if(_=_.M,H=R.type||R,typeof R=="string")R=new j(R,_);else if(R instanceof j)R.target=R.target||_;else{var ge=R;R=new j(H,_),te(R,ge)}ge=!0;let we,Qe;if(N)for(Qe=N.length-1;Qe>=0;Qe--)we=R.g=N[Qe],ge=Dt(we,H,!0,R)&&ge;if(we=R.g=_,ge=Dt(we,H,!0,R)&&ge,ge=Dt(we,H,!1,R)&&ge,N)for(Qe=0;Qe<N.length;Qe++)we=R.g=N[Qe],ge=Dt(we,H,!1,R)&&ge}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var _=this.i;for(const R in _.g){const N=_.g[R];for(let H=0;H<N.length;H++)le(N[H]);delete _.g[R],_.h--}}this.G=null},lt.prototype.J=function(_,R,N,H){return this.i.add(String(_),R,!1,N,H)},lt.prototype.K=function(_,R,N,H){return this.i.add(String(_),R,!0,N,H)};function Dt(_,R,N,H){if(R=_.i.g[String(R)],!R)return!0;R=R.concat();let ge=!0;for(let we=0;we<R.length;++we){const Qe=R[we];if(Qe&&!Qe.da&&Qe.capture==N){const Lt=Qe.listener,ur=Qe.ha||Qe.src;Qe.fa&&ee(_.i,Qe),ge=Lt.call(ur,H)!==!1&&ge}}return ge&&!H.defaultPrevented}function Nn(_,R){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:a.setTimeout(_,R||0)}function rn(_){_.g=Nn(()=>{_.g=null,_.i&&(_.i=!1,rn(_))},_.l);const R=_.h;_.h=null,_.m.apply(null,R)}class Ir extends F{constructor(R,N){super(),this.m=R,this.l=N,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(_){F.call(this),this.h=_,this.g={}}d(Jr,F);var Yi=[];function Oi(_){Ae(_.g,function(R,N){this.g.hasOwnProperty(N)&&he(R)},_),_.g={}}Jr.prototype.N=function(){Jr.Z.N.call(this),Oi(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jr=a.JSON.stringify,Ho=a.JSON.parse,ys=class{stringify(_){return a.JSON.stringify(_,void 0)}parse(_){return a.JSON.parse(_,void 0)}};function Di(){}function Ko(){}var xs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ys(){j.call(this,"d")}d(Ys,j);function Ea(){j.call(this,"c")}d(Ea,j);var ei={},wa=null;function vs(){return wa=wa||new lt}ei.Ia="serverreachability";function Es(_){j.call(this,ei.Ia,_)}d(Es,j);function Gr(_){const R=vs();_t(R,new Es(R))}ei.STAT_EVENT="statevent";function ti(_,R){j.call(this,ei.STAT_EVENT,_),this.stat=R}d(ti,j);function un(_){const R=vs();_t(R,new ti(R,_))}ei.Ja="timingevent";function ws(_,R){j.call(this,ei.Ja,_),this.size=R}d(ws,j);function Ss(_,R){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){_()},R)}function Hn(){this.g=!0}Hn.prototype.ua=function(){this.g=!1};function Xi(_,R,N,H,ge,we){_.info(function(){if(_.g)if(we){var Qe="",Lt=we.split("&");for(let yn=0;yn<Lt.length;yn++){var ur=Lt[yn].split("=");if(ur.length>1){const mr=ur[0];ur=ur[1];const Cs=mr.split("_");Qe=Cs.length>=2&&Cs[1]=="type"?Qe+(mr+"="+ur+"&"):Qe+(mr+"=redacted&")}}}else Qe=null;else Qe=we;return"XMLHTTP REQ ("+H+") [attempt "+ge+"]: "+R+`
`+N+`
`+Qe})}function Ar(_,R,N,H,ge,we,Qe){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ge+"]: "+R+`
`+N+`
`+we+" "+Qe})}function Kn(_,R,N,H){_.info(function(){return"XMLHTTP TEXT ("+R+"): "+Cr(_,N)+(H?" "+H:"")})}function Rr(_,R){_.info(function(){return"TIMEOUT: "+R})}Hn.prototype.info=function(){};function Cr(_,R){if(!_.g)return R;if(!R)return null;try{const we=JSON.parse(R);if(we){for(_=0;_<we.length;_++)if(Array.isArray(we[_])){var N=we[_];if(!(N.length<2)){var H=N[1];if(Array.isArray(H)&&!(H.length<1)){var ge=H[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(let Qe=1;Qe<H.length;Qe++)H[Qe]=""}}}}return jr(we)}catch{return R}}var gr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},er;function lr(){}d(lr,Di),lr.prototype.g=function(){return new XMLHttpRequest},er=new lr;function qi(_){return encodeURIComponent(String(_))}function B(_){var R=1;_=_.split(":");const N=[];for(;R>0&&_.length;)N.push(_.shift()),R--;return _.length&&N.push(_.join(":")),N}function q(_,R,N,H){this.j=_,this.i=R,this.l=N,this.S=H||1,this.V=new Jr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new K}function K(){this.i=null,this.g="",this.h=!1}var X={},Z={};function Q(_,R,N){_.M=1,_.A=Yo(qs(R)),_.u=N,_.R=!0,_e(_,null)}function _e(_,R){_.F=Date.now(),ve(_),_.B=qs(_.A);var N=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),Y0(N.i,"t",H),_.C=0,N=_.j.L,_.h=new K,_.g=P_(_.j,N?R:null,!_.u),_.P>0&&(_.O=new Ir(u(_.Y,_,_.g),_.P)),R=_.V,N=_.g,H=_.ba;var ge="readystatechange";Array.isArray(ge)||(ge&&(Yi[0]=ge.toString()),ge=Yi);for(let we=0;we<ge.length;we++){const Qe=se(N,ge[we],H||R.handleEvent,!1,R.h||R);if(!Qe)break;R.g[Qe.key]=Qe}R=_.J?Y(_.J):{},_.u?(_.v||(_.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,R)):(_.v="GET",_.g.ea(_.B,_.v,null,R)),Gr(),Xi(_.i,_.v,_.B,_.l,_.S,_.u)}q.prototype.ba=function(_){_=_.target;const R=this.O;R&&co(_)==3?R.j():this.Y(_)},q.prototype.Y=function(_){try{if(_==this.g)e:{const Lt=co(this.g),ur=this.g.ya(),yn=this.g.ca();if(!(Lt<3)&&(Lt!=3||this.g&&(this.h.h||this.g.la()||R_(this.g)))){this.K||Lt!=4||ur==7||(ur==8||yn<=0?Gr(3):Gr(2)),Xe(this);var R=this.g.ca();this.X=R;var N=Ce(this);if(this.o=R==200,Ar(this.i,this.v,this.B,this.l,this.S,Lt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var H,ge=this.g;if((H=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(H)){var we=H;break t}}we=null}if(_=we)Kn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ue(this,_);else{this.o=!1,this.m=3,un(12),Be(this),it(this);break e}}if(this.R){_=!0;let mr;for(;!this.K&&this.C<N.length;)if(mr=xe(this,N),mr==Z){Lt==4&&(this.m=4,un(14),_=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==X){this.m=4,un(15),Kn(this.i,this.l,N,"[Invalid Chunk]"),_=!1;break}else Kn(this.i,this.l,mr,null),Ue(this,mr);if(pe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||N.length!=0||this.h.h||(this.m=1,un(16),_=!1),this.o=this.o&&_,!_)Kn(this.i,this.l,N,"[Invalid Chunked Response]"),Be(this),it(this);else if(N.length>0&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.aa&&!Qe.P&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Cu(Qe),Qe.P=!0,un(11))}}else Kn(this.i,this.l,N,null),Ue(this,N);Lt==4&&Be(this),this.o&&!this.K&&(Lt==4?xf(this.j,this):(this.o=!1,ve(this)))}else q0(this.g),R==400&&N.indexOf("Unknown SID")>0?(this.m=3,un(12)):(this.m=0,un(13)),Be(this),it(this)}}}catch{}};function Ce(_){if(!pe(_))return _.g.la();const R=R_(_.g);if(R==="")return"";let N="";const H=R.length,ge=co(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Be(_),it(_),"";_.h.i=new a.TextDecoder}for(let we=0;we<H;we++)_.h.h=!0,N+=_.h.i.decode(R[we],{stream:!(ge&&we==H-1)});return R.length=0,_.h.g+=N,_.C=0,_.h.g}function pe(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function xe(_,R){var N=_.C,H=R.indexOf(`
`,N);return H==-1?Z:(N=Number(R.substring(N,H)),isNaN(N)?X:(H+=1,H+N>R.length?Z:(R=R.slice(H,H+N),_.C=H+N,R)))}q.prototype.cancel=function(){this.K=!0,Be(this)};function ve(_){_.T=Date.now()+_.H,Ge(_,_.H)}function Ge(_,R){if(_.D!=null)throw Error("WatchDog timer not null");_.D=Ss(u(_.aa,_),R)}function Xe(_){_.D&&(a.clearTimeout(_.D),_.D=null)}q.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(Rr(this.i,this.B),this.M!=2&&(Gr(),un(17)),Be(this),this.m=2,it(this)):Ge(this,this.T-_)};function it(_){_.j.I==0||_.K||xf(_.j,_)}function Be(_){Xe(_);var R=_.O;R&&typeof R.dispose=="function"&&R.dispose(),_.O=null,Oi(_.V),_.g&&(R=_.g,_.g=null,R.abort(),R.dispose())}function Ue(_,R){try{var N=_.j;if(N.I!=0&&(N.g==_||Sa(N.h,_))){if(!_.L&&Sa(N.h,_)&&N.I==3){try{var H=N.Ba.g.parse(R)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ge=H;if(ge[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<_.F)yf(N),As(N);else break e;fo(N),un(18)}}else N.xa=ge[1],0<N.xa-N.K&&ge[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=Ss(u(N.Va,N),6e3));Bn(N.h)<=1&&N.ta&&(N.ta=void 0)}else Rs(N,11)}else if((_.L||N.g==_)&&yf(N),!V(R))for(ge=N.Ba.g.parse(R),R=0;R<ge.length;R++){let yn=ge[R];const mr=yn[0];if(!(mr<=N.K))if(N.K=mr,yn=yn[1],N.I==2)if(yn[0]=="c"){N.M=yn[1],N.ba=yn[2];const Cs=yn[3];Cs!=null&&(N.ka=Cs,N.j.info("VER="+N.ka));const Jo=yn[4];Jo!=null&&(N.za=Jo,N.j.info("SVER="+N.za));const go=yn[5];go!=null&&typeof go=="number"&&go>0&&(H=1.5*go,N.O=H,N.j.info("backChannelRequestTimeoutMs_="+H)),H=N;const mo=_.g;if(mo){const wf=mo.g?mo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wf){var we=H.h;we.g||wf.indexOf("spdy")==-1&&wf.indexOf("quic")==-1&&wf.indexOf("h2")==-1||(we.j=we.l,we.g=new Set,we.h&&(Xs(we,we.h),we.h=null))}if(H.G){const J0=mo.g?mo.g.getResponseHeader("X-HTTP-Session-Id"):null;J0&&(H.wa=J0,sn(H.J,H.G,J0))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-_.F,N.j.info("Handshake RTT: "+N.T+"ms")),H=N;var Qe=_;if(H.na=Q0(H,H.L?H.ba:null,H.W),Qe.L){Ts(H.h,Qe);var Lt=Qe,ur=H.O;ur&&(Lt.H=ur),Lt.D&&(Xe(Lt),ve(Lt)),H.g=Qe}else yi(H);N.i.length>0&&Qo(N)}else yn[0]!="stop"&&yn[0]!="close"||Rs(N,7);else N.I==3&&(yn[0]=="stop"||yn[0]=="close"?yn[0]=="stop"?Rs(N,7):pf(N):yn[0]!="noop"&&N.l&&N.l.qa(yn),N.A=0)}}Gr(4)}catch{}}var Rt=class{constructor(_,R){this.g=_,this.map=R}};function hn(_){this.l=_||10,a.PerformanceNavigationTiming?(_=a.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _n(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Bn(_){return _.h?1:_.g?_.g.size:0}function Sa(_,R){return _.h?_.h==R:_.g?_.g.has(R):!1}function Xs(_,R){_.g?_.g.add(R):_.h=R}function Ts(_,R){_.h&&_.h==R?_.h=null:_.g&&_.g.has(R)&&_.g.delete(R)}hn.prototype.cancel=function(){if(this.i=cr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function cr(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let R=_.i;for(const N of _.g.values())R=R.concat(N.G);return R}return p(_.i)}var Wl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yn(_,R){if(_){_=_.split("&");for(let N=0;N<_.length;N++){const H=_[N].indexOf("=");let ge,we=null;H>=0?(ge=_[N].substring(0,H),we=_[N].substring(H+1)):ge=_[N],R(ge,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function ro(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;_ instanceof ro?(this.l=_.l,wu(this,_.j),this.o=_.o,this.g=_.g,io(this,_.u),this.h=_.h,Hl(this,X0(_.i)),this.m=_.m):_&&(R=String(_).match(Wl))?(this.l=!1,wu(this,R[1]||"",!0),this.o=Su(R[2]||""),this.g=Su(R[3]||"",!0),io(this,R[4]),this.h=Su(R[5]||"",!0),Hl(this,R[6]||"",!0),this.m=Su(R[7]||"")):(this.l=!1,this.i=new Ht(null,this.l))}ro.prototype.toString=function(){const _=[];var R=this.j;R&&_.push(Tu(R,z0,!0),":");var N=this.g;return(N||R=="file")&&(_.push("//"),(R=this.o)&&_.push(Tu(R,z0,!0),"@"),_.push(qi(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&_.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&_.push("/"),_.push(Tu(N,N.charAt(0)=="/"?Iu:$0,!0))),(N=this.i.toString())&&_.push("?",N),(N=this.m)&&_.push("#",Tu(N,W0)),_.join("")},ro.prototype.resolve=function(_){const R=qs(this);let N=!!_.j;N?wu(R,_.j):N=!!_.o,N?R.o=_.o:N=!!_.g,N?R.g=_.g:N=_.u!=null;var H=_.h;if(N)io(R,_.u);else if(N=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var ge=R.h.lastIndexOf("/");ge!=-1&&(H=R.h.slice(0,ge+1)+H)}if(ge=H,ge==".."||ge==".")H="";else if(ge.indexOf("./")!=-1||ge.indexOf("/.")!=-1){H=ge.lastIndexOf("/",0)==0,ge=ge.split("/");const we=[];for(let Qe=0;Qe<ge.length;){const Lt=ge[Qe++];Lt=="."?H&&Qe==ge.length&&we.push(""):Lt==".."?((we.length>1||we.length==1&&we[0]!="")&&we.pop(),H&&Qe==ge.length&&we.push("")):(we.push(Lt),H=!0)}H=we.join("/")}else H=ge}return N?R.h=H:N=_.i.toString()!=="",N?Hl(R,X0(_.i)):N=!!_.m,N&&(R.m=_.m),R};function qs(_){return new ro(_)}function wu(_,R,N){_.j=N?Su(R,!0):R,_.j&&(_.j=_.j.replace(/:$/,""))}function io(_,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);_.u=R}else _.u=null}function Hl(_,R,N){R instanceof Ht?(_.i=R,df(_.i,_.l)):(N||(R=Tu(R,LE)),_.i=new Ht(R,_.l))}function sn(_,R,N){_.i.set(R,N)}function Yo(_){return sn(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Su(_,R){return _?R?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Tu(_,R,N){return typeof _=="string"?(_=encodeURI(_).replace(R,U0),N&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function U0(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var z0=/[#\/\?@]/g,$0=/[#\?:]/g,Iu=/[#\?]/g,LE=/[#\?@]/g,W0=/#/g;function Ht(_,R){this.h=this.g=null,this.i=_||null,this.j=!!R}function so(_){_.g||(_.g=new Map,_.h=0,_.i&&Yn(_.i,function(R,N){_.add(decodeURIComponent(R.replace(/\+/g," ")),N)}))}n=Ht.prototype,n.add=function(_,R){so(this),this.i=null,_=ao(this,_);let N=this.g.get(_);return N||this.g.set(_,N=[]),N.push(R),this.h+=1,this};function H0(_,R){so(_),R=ao(_,R),_.g.has(R)&&(_.i=null,_.h-=_.g.get(R).length,_.g.delete(R))}function ff(_,R){return so(_),R=ao(_,R),_.g.has(R)}n.forEach=function(_,R){so(this),this.g.forEach(function(N,H){N.forEach(function(ge){_.call(R,ge,H,this)},this)},this)};function K0(_,R){so(_);let N=[];if(typeof R=="string")ff(_,R)&&(N=N.concat(_.g.get(ao(_,R))));else for(_=Array.from(_.g.values()),R=0;R<_.length;R++)N=N.concat(_[R]);return N}n.set=function(_,R){return so(this),this.i=null,_=ao(this,_),ff(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[R]),this.h+=1,this},n.get=function(_,R){return _?(_=K0(this,_),_.length>0?String(_[0]):R):R};function Y0(_,R,N){H0(_,R),N.length>0&&(_.i=null,_.g.set(ao(_,R),p(N)),_.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],R=Array.from(this.g.keys());for(let H=0;H<R.length;H++){var N=R[H];const ge=qi(N);N=K0(this,N);for(let we=0;we<N.length;we++){let Qe=ge;N[we]!==""&&(Qe+="="+qi(N[we])),_.push(Qe)}}return this.i=_.join("&")};function X0(_){const R=new Ht;return R.i=_.i,_.g&&(R.g=new Map(_.g),R.h=_.h),R}function ao(_,R){return R=String(R),_.j&&(R=R.toLowerCase()),R}function df(_,R){R&&!_.j&&(so(_),_.i=null,_.g.forEach(function(N,H){const ge=H.toLowerCase();H!=ge&&(H0(this,H),Y0(this,ge,N))},_)),_.j=R}function oo(_,R){const N=new Hn;if(a.Image){const H=new Image;H.onload=f(ni,N,"TestLoadImage: loaded",!0,R,H),H.onerror=f(ni,N,"TestLoadImage: error",!1,R,H),H.onabort=f(ni,N,"TestLoadImage: abort",!1,R,H),H.ontimeout=f(ni,N,"TestLoadImage: timeout",!1,R,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else R(!1)}function lo(_,R){const N=new Hn,H=new AbortController,ge=setTimeout(()=>{H.abort(),ni(N,"TestPingServer: timeout",!1,R)},1e4);fetch(_,{signal:H.signal}).then(we=>{clearTimeout(ge),we.ok?ni(N,"TestPingServer: ok",!0,R):ni(N,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(ge),ni(N,"TestPingServer: error",!1,R)})}function ni(_,R,N,H,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),H(N)}catch{}}function Au(){this.g=new ys}function Xo(_){this.i=_.Sb||null,this.h=_.ab||!1}d(Xo,Di),Xo.prototype.g=function(){return new Is(this.i,this.h)};function Is(_,R){lt.call(this),this.H=_,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Is,lt),n=Is.prototype,n.open=function(_,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=R,this.readyState=1,Ta(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(R.body=_),(this.H||a).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kl(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;T_(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function T_(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var R=_.value?_.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!_.done}))&&(this.response=this.responseText+=R)}_.done?Kl(this):Ta(this),this.readyState==3&&T_(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,Kl(this))},n.Na=function(_){this.g&&(this.response=_,Kl(this))},n.ga=function(){this.g&&Kl(this)};function Kl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Ta(_)}n.setRequestHeader=function(_,R){this.A.append(_,R)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],R=this.h.entries();for(var N=R.next();!N.done;)N=N.value,_.push(N[0]+": "+N[1]),N=R.next();return _.join(`\r
`)};function Ta(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function I_(_){let R="";return Ae(_,function(N,H){R+=H,R+=":",R+=N,R+=`\r
`}),R}function gf(_,R,N){e:{for(H in N){var H=!1;break e}H=!0}H||(N=I_(N),typeof _=="string"?N!=null&&qi(N):sn(_,R,N))}function Pn(_){lt.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Pn,lt);var A_=/^https?$/i,OE=["POST","PUT"];n=Pn.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,R,N,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);R=R?R.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():er.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(R,String(_),!0),this.B=!1}catch(we){Yl(this,we);return}if(_=N||"",N=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ge in H)N.set(ge,H[ge]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const we of H.keys())N.set(we,H.get(we));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(N.keys()).find(we=>we.toLowerCase()=="content-type"),ge=a.FormData&&_ instanceof a.FormData,!(Array.prototype.indexOf.call(OE,R,void 0)>=0)||H||ge||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[we,Qe]of N)this.g.setRequestHeader(we,Qe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(we){Yl(this,we)}};function Yl(_,R){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=R,_.o=5,Xl(_),Zo(_)}function Xl(_){_.A||(_.A=!0,_t(_,"complete"),_t(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,_t(this,"complete"),_t(this,"abort"),Zo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zo(this,!0)),Pn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qo(this):this.Xa())},n.Xa=function(){qo(this)};function qo(_){if(_.h&&typeof s<"u"){if(_.v&&co(_)==4)setTimeout(_.Ca.bind(_),0);else if(_t(_,"readystatechange"),co(_)==4){_.h=!1;try{const we=_.ca();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var N;if(!(N=R)){var H;if(H=we===0){let Qe=String(_.D).match(Wl)[1]||null;!Qe&&a.self&&a.self.location&&(Qe=a.self.location.protocol.slice(0,-1)),H=!A_.test(Qe?Qe.toLowerCase():"")}N=H}if(N)_t(_,"complete"),_t(_,"success");else{_.o=6;try{var ge=co(_)>2?_.g.statusText:""}catch{ge=""}_.l=ge+" ["+_.ca()+"]",Xl(_)}}finally{Zo(_)}}}}function Zo(_,R){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const N=_.g;_.g=null,R||_t(_,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function co(_){return _.g?_.g.readyState:0}n.ca=function(){try{return co(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var R=this.g.responseText;return _&&R.indexOf(_)==0&&(R=R.substring(_.length)),Ho(R)}};function R_(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function q0(_){const R={};_=(_.g&&co(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(V(_[H]))continue;var N=B(_[H]);const ge=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const we=R[ge]||[];R[ge]=we,we.push(N)}Ie(R,function(H){return H.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(_,R,N){return N&&N.internalChannelParams&&N.internalChannelParams[_]||R}function mf(_){this.za=0,this.i=[],this.j=new Hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=uo("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=uo("baseRetryDelayMs",5e3,_),this.Za=uo("retryDelaySeedMs",1e4,_),this.Ta=uo("forwardChannelMaxRetries",2,_),this.va=uo("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new hn(_&&_.concurrentRequestLimit),this.Ba=new Au,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=mf.prototype,n.ka=8,n.I=1,n.connect=function(_,R,N,H){un(0),this.W=_,this.H=R||{},N&&H!==void 0&&(this.H.OSID=N,this.H.OAID=H),this.F=this.X,this.J=Q0(this,null,this.W),Qo(this)};function pf(_){if(_f(_),_.I==3){var R=_.V++,N=qs(_.J);if(sn(N,"SID",_.M),sn(N,"RID",R),sn(N,"TYPE","terminate"),ho(_,N),R=new q(_,_.j,R),R.M=2,R.A=Yo(qs(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(R.A.toString(),"")}catch{}!N&&a.Image&&(new Image().src=R.A,N=!0),N||(R.g=P_(R.j,null),R.g.ea(R.A)),R.F=Date.now(),ve(R)}Pu(_)}function As(_){_.g&&(Cu(_),_.g.cancel(),_.g=null)}function _f(_){As(_),_.v&&(a.clearTimeout(_.v),_.v=null),yf(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&a.clearTimeout(_.m),_.m=null)}function Qo(_){if(!_n(_.h)&&!_.m){_.m=!0;var R=_.Ea;L||C(),z||(L(),z=!0),P.add(R,_),_.D=0}}function C_(_,R){return Bn(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=R.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=Ss(u(_.Ea,_,R),vf(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const ge=new q(this,this.j,_);let we=this.o;if(this.U&&(we?(we=Y(we),te(we,this.U)):we=this.U),this.u!==null||this.R||(ge.J=we,we=null),this.S)e:{for(var R=0,N=0;N<this.i.length;N++){t:{var H=this.i[N];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(R+=H,R>4096){R=N;break e}if(R===4096||N===this.i.length-1){R=N+1;break e}}R=1e3}else R=1e3;R=Z0(this,ge,R),N=qs(this.J),sn(N,"RID",_),sn(N,"CVER",22),this.G&&sn(N,"X-HTTP-Session-Id",this.G),ho(this,N),we&&(this.R?R="headers="+qi(I_(we))+"&"+R:this.u&&gf(N,this.u,we)),Xs(this.h,ge),this.Ra&&sn(N,"TYPE","init"),this.S?(sn(N,"$req",R),sn(N,"SID","null"),ge.U=!0,Q(ge,N,null)):Q(ge,N,R),this.I=2}}else this.I==3&&(_?Ru(this,_):this.i.length==0||_n(this.h)||Ru(this))};function Ru(_,R){var N;R?N=R.l:N=_.V++;const H=qs(_.J);sn(H,"SID",_.M),sn(H,"RID",N),sn(H,"AID",_.K),ho(_,H),_.u&&_.o&&gf(H,_.u,_.o),N=new q(_,_.j,N,_.D+1),_.u===null&&(N.J=_.o),R&&(_.i=R.G.concat(_.i)),R=Z0(_,N,1e3),N.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),Xs(_.h,N),Q(N,H,R)}function ho(_,R){_.H&&Ae(_.H,function(N,H){sn(R,H,N)}),_.l&&Ae({},function(N,H){sn(R,H,N)})}function Z0(_,R,N){N=Math.min(_.i.length,N);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var ge=_.i;let Lt=-1;for(;;){const ur=["count="+N];Lt==-1?N>0?(Lt=ge[0].g,ur.push("ofs="+Lt)):Lt=0:ur.push("ofs="+Lt);let yn=!0;for(let mr=0;mr<N;mr++){var we=ge[mr].g;const Cs=ge[mr].map;if(we-=Lt,we<0)Lt=Math.max(0,ge[mr].g-100),yn=!1;else try{we="req"+we+"_"||"";try{var Qe=Cs instanceof Map?Cs:Object.entries(Cs);for(const[Jo,go]of Qe){let mo=go;o(go)&&(mo=jr(go)),ur.push(we+Jo+"="+encodeURIComponent(mo))}}catch(Jo){throw ur.push(we+"type="+encodeURIComponent("_badmap")),Jo}}catch{H&&H(Cs)}}if(yn){Qe=ur.join("&");break e}}Qe=void 0}return _=_.i.splice(0,N),R.G=_,Qe}function yi(_){if(!_.g&&!_.v){_.Y=1;var R=_.Da;L||C(),z||(L(),z=!0),P.add(R,_),_.A=0}}function fo(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=Ss(u(_.Da,_),vf(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,ql(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=Ss(u(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,un(10),As(this),ql(this))};function Cu(_){_.B!=null&&(a.clearTimeout(_.B),_.B=null)}function ql(_){_.g=new q(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var R=qs(_.na);sn(R,"RID","rpc"),sn(R,"SID",_.M),sn(R,"AID",_.K),sn(R,"CI",_.F?"0":"1"),!_.F&&_.ia&&sn(R,"TO",_.ia),sn(R,"TYPE","xmlhttp"),ho(_,R),_.u&&_.o&&gf(R,_.u,_.o),_.O&&(_.g.H=_.O);var N=_.g;_=_.ba,N.M=1,N.A=Yo(qs(R)),N.u=null,N.R=!0,_e(N,_)}n.Va=function(){this.C!=null&&(this.C=null,As(this),fo(this),un(19))};function yf(_){_.C!=null&&(a.clearTimeout(_.C),_.C=null)}function xf(_,R){var N=null;if(_.g==R){yf(_),Cu(_),_.g=null;var H=2}else if(Sa(_.h,R))N=R.G,Ts(_.h,R),H=1;else return;if(_.I!=0){if(R.o)if(H==1){N=R.u?R.u.length:0,R=Date.now()-R.F;var ge=_.D;H=vs(),_t(H,new ws(H,N)),Qo(_)}else yi(_);else if(ge=R.m,ge==3||ge==0&&R.X>0||!(H==1&&C_(_,R)||H==2&&fo(_)))switch(N&&N.length>0&&(R=_.h,R.i=R.i.concat(N)),ge){case 1:Rs(_,5);break;case 4:Rs(_,10);break;case 3:Rs(_,6);break;default:Rs(_,2)}}}function vf(_,R){let N=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(N*=2),N*R}function Rs(_,R){if(_.j.info("Error code "+R),R==2){var N=u(_.bb,_),H=_.Ua;const ge=!H;H=new ro(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wu(H,"https"),Yo(H),ge?oo(H.toString(),N):lo(H.toString(),N)}else un(2);_.I=0,_.l&&_.l.pa(R),Pu(_),_f(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function Pu(_){if(_.I=0,_.ja=[],_.l){const R=cr(_.h);(R.length!=0||_.i.length!=0)&&(v(_.ja,R),v(_.ja,_.i),_.h.i.length=0,p(_.i),_.i.length=0),_.l.oa()}}function Q0(_,R,N){var H=N instanceof ro?qs(N):new ro(N);if(H.g!="")R&&(H.g=R+"."+H.g),io(H,H.u);else{var ge=a.location;H=ge.protocol,R=R?R+"."+ge.hostname:ge.hostname,ge=+ge.port;const we=new ro(null);H&&wu(we,H),R&&(we.g=R),ge&&io(we,ge),N&&(we.h=N),H=we}return N=_.G,R=_.wa,N&&R&&sn(H,N,R),sn(H,"VER",_.ka),ho(_,H),H}function P_(_,R,N){if(R&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=_.Aa&&!_.ma?new Pn(new Xo({ab:N})):new Pn(_.ma),R.Fa(_.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function M_(){}n=M_.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ef(){}Ef.prototype.g=function(_,R){return new ri(_,R)};function ri(_,R){lt.call(this),this.g=new mf(R),this.l=_,this.h=R&&R.messageUrlParams||null,_=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(_?_["X-WebChannel-Content-Type"]=R.messageContentType:_={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(_?_["X-WebChannel-Client-Profile"]=R.sa:_={"X-WebChannel-Client-Profile":R.sa}),this.g.U=_,(_=R&&R.Qb)&&!V(_)&&(this.g.u=_),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!V(R)&&(this.g.G=R,_=this.h,_!==null&&R in _&&(_=this.h,R in _&&delete _[R])),this.j=new Zl(this)}d(ri,lt),ri.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ri.prototype.close=function(){pf(this.g)},ri.prototype.o=function(_){var R=this.g;if(typeof _=="string"){var N={};N.__data__=_,_=N}else this.v&&(N={},N.__data__=jr(_),_=N);R.i.push(new Rt(R.Ya++,_)),R.I==3&&Qo(R)},ri.prototype.N=function(){this.g.l=null,delete this.j,pf(this.g),delete this.g,ri.Z.N.call(this)};function b_(_){Ys.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var R=_.__sm__;if(R){e:{for(const N in R){_=N;break e}_=void 0}(this.i=_)&&(_=this.i,R=R!==null&&_ in R?R[_]:void 0),this.data=R}else this.data=_}d(b_,Ys);function k_(){Ea.call(this),this.status=1}d(k_,Ea);function Zl(_){this.g=_}d(Zl,M_),Zl.prototype.ra=function(){_t(this.g,"a")},Zl.prototype.qa=function(_){_t(this.g,new b_(_))},Zl.prototype.pa=function(_){_t(this.g,new k_)},Zl.prototype.oa=function(){_t(this.g,"b")},Ef.prototype.createWebChannel=Ef.prototype.g,ri.prototype.send=ri.prototype.o,ri.prototype.open=ri.prototype.m,ri.prototype.close=ri.prototype.close,w5=function(){return new Ef},E5=function(){return vs()},v5=ei,dT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gr.NO_ERROR=0,gr.TIMEOUT=8,gr.HTTP_ERROR=6,my=gr,Wt.COMPLETE="complete",x5=Wt,Ko.EventType=xs,xs.OPEN="a",xs.CLOSE="b",xs.ERROR="c",xs.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Hg=Ko,Pn.prototype.listenOnce=Pn.prototype.K,Pn.prototype.getLastError=Pn.prototype.Ha,Pn.prototype.getLastErrorCode=Pn.prototype.ya,Pn.prototype.getStatus=Pn.prototype.ca,Pn.prototype.getResponseJson=Pn.prototype.La,Pn.prototype.getResponseText=Pn.prototype.la,Pn.prototype.send=Pn.prototype.ea,Pn.prototype.setWithCredentials=Pn.prototype.Fa,y5=Pn}).apply(typeof V1<"u"?V1:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore",Db="4.9.3";class ui{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");let R0="12.7.0";const Nh=new pA("@firebase/firestore");function hd(){return Nh.logLevel}function $e(n,...e){if(Nh.logLevel<=Ut.DEBUG){const t=e.map(xA);Nh.debug(`Firestore (${R0}): ${n}`,...t)}}function zi(n,...e){if(Nh.logLevel<=Ut.ERROR){const t=e.map(xA);Nh.error(`Firestore (${R0}): ${n}`,...t)}}function Lh(n,...e){if(Nh.logLevel<=Ut.WARN){const t=e.map(xA);Nh.warn(`Firestore (${R0}): ${n}`,...t)}}function xA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function dt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,S5(n,r,t)}function S5(n,e,t){let r=`FIRESTORE (${R0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw zi(r),new Error(r)}function yt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||S5(e,i,r)}function Nt(n,e){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends $o{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class T5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ui.UNAUTHENTICATED)))}shutdown(){}}class QK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class JK{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new wl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wl,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wl)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new T5(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new ui(e)}}class eY{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ui.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tY{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new eY(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ui.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nY{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ca(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const r=s=>{s.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Fb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rY(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=rY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function gT(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return $2(i)===$2(s)?kt(i,s):$2(i)?1:-1}return kt(n.length,e.length)}const iY=55296,sY=57343;function $2(n){const e=n.charCodeAt(0);return e>=iY&&e<=sY}function r0(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function I5(n){return n+"\0"}const Vb="__name__";class wo{constructor(e,t,r){t===void 0?t=0:t>e.length&&dt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&dt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wo?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=wo.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return kt(e.length,t.length)}static compareSegments(e,t){const r=wo.isNumericId(e),i=wo.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?wo.extractNumericId(e).compare(wo.extractNumericId(t)):gT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hc.fromString(e.substring(4,e.length-2))}}class cn extends wo{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new cn(t)}static emptyPath(){return new cn([])}}const aY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends wo{construct(e,t,r){return new Qn(e,t,r)}static isValidIdentifier(e){return aY.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vb}static keyField(){return new Qn([Vb])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new et(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new et(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new et(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(cn.fromString(e))}static fromName(e){return new tt(cn.fromString(e).popFirst(5))}static empty(){return new tt(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new cn(e.slice()))}}function A5(n,e,t){if(!t)throw new et(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oY(n,e,t,r){if(e===!0&&r===!0)throw new et(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jb(n){if(!tt.isDocumentKey(n))throw new et(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Gb(n){if(tt.isDocumentKey(n))throw new et(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function R5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":dt(12329,{type:typeof n})}function eu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new et(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gv(n);throw new et(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Er(n,e){const t={typeString:n};return e&&(t.value=e),t}function Xp(n,e){if(!R5(n))throw new et(Pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new et(Pe.INVALID_ARGUMENT,t);return!0}const Bb=-62135596800,Ub=1e6;class wn{static now(){return wn.fromMillis(Date.now())}static fromDate(e){return wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ub);return new wn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new et(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new et(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Bb)throw new et(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ub}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xp(e,wn._jsonSchema))return new wn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Bb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wn._jsonSchemaVersion="firestore/timestamp/1.0",wn._jsonSchema={type:Er("string",wn._jsonSchemaVersion),seconds:Er("number"),nanoseconds:Er("number")};class vt{static fromTimestamp(e){return new vt(e)}static min(){return new vt(new wn(0,0))}static max(){return new vt(new wn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zm=-1;class ux{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function mT(n){return n.fields.find((e=>e.kind===2))}function Zu(n){return n.fields.filter((e=>e.kind!==2))}ux.UNKNOWN_ID=-1;class py{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qm(0,$s.min())}}function lY(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(r===1e9?new wn(t+1,0):new wn(t,r));return new $s(i,tt.empty(),e)}function C5(n){return new $s(n.readTime,n.key,Zm)}class $s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $s(vt.min(),tt.empty(),Zm)}static max(){return new $s(vt.max(),tt.empty(),Zm)}}function EA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=tt.comparator(n.documentKey,e.documentKey),t!==0?t:kt(n.largestBatchId,e.largestBatchId))}const P5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function nf(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==P5)throw n;$e("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,r)=>{t(e)}))}static reject(e){return new fe(((t,r)=>{r(e)}))}static waitFor(e){return new fe(((t,r)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(l=>r(l)))})),a=!0,s===i&&t()}))}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next((i=>i?fe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new fe(((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((f=>{a[u]=f,++o,o===s&&r(a)}),(f=>i(f)))}}))}static doWhile(e,t){return new fe(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const Ns="SimpleDb";class Bv{static open(e,t,r,i){try{return new Bv(t,e.transaction(i,r))}catch(s){throw new om(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new wl,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new om(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=wA(r.target.error);this.S.reject(new om(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($e(Ns,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uY(t)}}class Kc{static delete(e){return $e(Ns,"Removing database:",e),rh(n5().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!h5())return!1;if(Kc.F())return!0;const e=Fr(),t=Kc.M(e),r=0<t&&t<10,i=b5(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Kc.M(Fr())===12.2&&zi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($e(Ns,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new om(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new et(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new et(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new om(e,a))},i.onupgradeneeded=s=>{$e(Ns,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{$e(Ns,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Bv.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),fe.reject(u)))).toPromise();return l.catch((()=>{})),await o.D,l}catch(o){const l=o,u=l.name!=="FirebaseError"&&a<3;if($e(Ns,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function b5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class cY{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return rh(this.U.delete())}}class om extends et{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pu(n){return n.name==="IndexedDbTransactionError"}class uY{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?($e(Ns,"PUT",this.store.name,e,t),r=this.store.put(t,e)):($e(Ns,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rh(r)}add(e){return $e(Ns,"ADD",this.store.name,e,e),rh(this.store.add(e))}get(e){return rh(this.store.get(e)).next((t=>(t===void 0&&(t=null),$e(Ns,"GET",this.store.name,e,t),t)))}delete(e){return $e(Ns,"DELETE",this.store.name,e),rh(this.store.delete(e))}count(){return $e(Ns,"COUNT",this.store.name),rh(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new fe(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((o,l)=>{a.push(l)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new fe(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){$e(Ns,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new fe(((r,i)=>{t.onerror=s=>{const a=wA(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,t){const r=[];return new fe(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new cY(o),u=t(o.primaryKey,o.value,l);if(u instanceof fe){const f=u.catch((d=>(l.done(),fe.reject(d))));r.push(f)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}})).next((()=>fe.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rh(n){return new fe(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=wA(r.target.error);t(i)}}))}let zb=!1;function wA(n){const e=Kc.M(Fr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zb||(zb=!0,setTimeout((()=>{throw r}),0)),r}}return n}const lm="IndexBackfiller";class hY{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$e(lm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();$e(lm,`Documents written: ${t}`)}catch(t){pu(t)?$e(lm,"Ignoring IndexedDB error during index backfill: ",t):await nf(t)}await this.re(6e4)}))}}class fY{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return fe.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return $e(lm,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>($e(lm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=C5(s);EA(a,r)>0&&(r=a)})),new $s(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ga{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ga.ce=-1;const yh=-1;function Uv(n){return n==null}function Jm(n){return n===0&&1/n==-1/0}function dY(n){return typeof n=="number"&&Number.isInteger(n)&&!Jm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const hx="";function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$b(e)),e=gY(n.get(t),e);return $b(e)}function gY(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case hx:t+="";break;default:t+=s}}return t}function $b(n){return n+hx+""}function Ro(n){const e=n.length;if(yt(e>=2,64408,{path:n}),e===2)return yt(n.charAt(0)===hx&&n.charAt(1)==="",56145,{path:n}),cn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(hx,s);switch((a<0||a>t)&&dt(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:dt(61167,{path:n})}s=a+2}return new cn(r)}const Qu="remoteDocuments",qp="owner",qf="owner",ep="mutationQueues",mY="userId",Da="mutations",Wb="batchId",fh="userMutationsIndex",Hb=["userId","batchId"];function _y(n,e){return[n,bi(e)]}function k5(n,e,t){return[n,bi(e),t]}const pY={},i0="documentMutations",fx="remoteDocumentsV14",_Y=["prefixPath","collectionGroup","readTime","documentId"],yy="documentKeyIndex",yY=["prefixPath","collectionGroup","documentId"],N5="collectionGroupIndex",xY=["collectionGroup","readTime","prefixPath","documentId"],tp="remoteDocumentGlobal",pT="remoteDocumentGlobalKey",s0="targets",L5="queryTargetsIndex",vY=["canonicalId","targetId"],a0="targetDocuments",EY=["targetId","path"],SA="documentTargetsIndex",wY=["path","targetId"],dx="targetGlobalKey",xh="targetGlobal",np="collectionParents",SY=["collectionId","parent"],o0="clientMetadata",TY="clientId",zv="bundles",IY="bundleId",$v="namedQueries",AY="name",TA="indexConfiguration",RY="indexId",_T="collectionGroupIndex",CY="collectionGroup",cm="indexState",PY=["indexId","uid"],O5="sequenceNumberIndex",MY=["uid","sequenceNumber"],um="indexEntries",bY=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D5="documentKeyIndex",kY=["indexId","uid","orderedDocumentKey"],Wv="documentOverlays",NY=["userId","collectionPath","documentId"],yT="collectionPathOverlayIndex",LY=["userId","collectionPath","largestBatchId"],F5="collectionGroupOverlayIndex",OY=["userId","collectionGroup","largestBatchId"],IA="globals",DY="name",V5=[ep,Da,i0,Qu,s0,qp,xh,a0,o0,tp,np,zv,$v],FY=[...V5,Wv],j5=[ep,Da,i0,fx,s0,qp,xh,a0,o0,tp,np,zv,$v,Wv],G5=j5,AA=[...G5,TA,cm,um],VY=AA,B5=[...AA,IA],jY=B5;class xT extends M5{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Vr(n,e){const t=Nt(n);return Kc.O(t.le,e)}function Kb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _u(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function U5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Wn{constructor(e,t){this.comparator=e,this.root=t||hi.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new j1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new j1(this.root,e,this.comparator,!1)}getReverseIterator(){return new j1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new j1(this.root,e,this.comparator,!0)}}class j1{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??hi.RED,this.left=i??hi.EMPTY,this.right=s??hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new hi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return hi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw dt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw dt(27949);return e+(this.isRed()?0:1)}}hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1;hi.EMPTY=new class{constructor(){this.size=0}get key(){throw dt(57766)}get value(){throw dt(16141)}get color(){throw dt(16727)}get left(){throw dt(29726)}get right(){throw dt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new hi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yb(this.data.getIterator())}getIteratorFrom(e){return new Yb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class Yb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zf(n){return n.hasNext()?n.getNext():void 0}class hs{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new hs([])}unionWith(e){let t=new In(Qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return r0(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class z5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new z5("Invalid base64 string: "+s):s}})(e);return new Sr(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const GY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bl(n){if(yt(!!n,39018),typeof n=="string"){let e=0;const t=GY.exec(n);if(yt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$n(n.seconds),nanos:$n(n.nanos)}}function $n(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function kl(n){return typeof n=="string"?Sr.fromBase64String(n):Sr.fromUint8Array(n)}const $5="server_timestamp",W5="__type__",H5="__previous_value__",K5="__local_write_time__";function RA(n){return(n?.mapValue?.fields||{})[W5]?.stringValue===$5}function Hv(n){const e=n.mapValue.fields[H5];return RA(e)?Hv(e):e}function rp(n){const e=bl(n.mapValue.fields[K5].timestampValue);return new wn(e.seconds,e.nanos)}class BY{constructor(e,t,r,i,s,a,o,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const gx="(default)";class Oh{constructor(e,t){this.projectId=e,this.database=t||gx}static empty(){return new Oh("","")}get isDefaultDatabase(){return this.database===gx}isEqual(e){return e instanceof Oh&&e.projectId===this.projectId&&e.database===this.database}}const CA="__type__",Y5="__max__",Vc={mapValue:{fields:{__type__:{stringValue:Y5}}}},PA="__vector__",l0="value",xy={nullValue:"NULL_VALUE"};function tu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?RA(n)?4:X5(n)?9007199254740991:Kv(n)?10:11:dt(28295,{value:n})}function Vo(n,e){if(n===e)return!0;const t=tu(n);if(t!==tu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rp(n).isEqual(rp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=bl(i.timestampValue),o=bl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return kl(i.bytesValue).isEqual(kl(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return $n(i.geoPointValue.latitude)===$n(s.geoPointValue.latitude)&&$n(i.geoPointValue.longitude)===$n(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return $n(i.integerValue)===$n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=$n(i.doubleValue),o=$n(s.doubleValue);return a===o?Jm(a)===Jm(o):isNaN(a)&&isNaN(o)}return!1})(n,e);case 9:return r0(n.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(Kb(a)!==Kb(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Vo(a[l],o[l])))return!1;return!0})(n,e);default:return dt(52216,{left:n})}}function ip(n,e){return(n.values||[]).find((t=>Vo(t,e)))!==void 0}function nu(n,e){if(n===e)return 0;const t=tu(n),r=tu(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=$n(s.integerValue||s.doubleValue),l=$n(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(n,e);case 3:return Xb(n.timestampValue,e.timestampValue);case 4:return Xb(rp(n),rp(e));case 5:return gT(n.stringValue,e.stringValue);case 6:return(function(s,a){const o=kl(s),l=kl(a);return o.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const f=kt(o[u],l[u]);if(f!==0)return f}return kt(o.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=kt($n(s.latitude),$n(a.latitude));return o!==0?o:kt($n(s.longitude),$n(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return qb(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const o=s.fields||{},l=a.fields||{},u=o[l0]?.arrayValue,f=l[l0]?.arrayValue,d=kt(u?.values?.length||0,f?.values?.length||0);return d!==0?d:qb(u,f)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Vc.mapValue&&a===Vc.mapValue)return 0;if(s===Vc.mapValue)return 1;if(a===Vc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const g=gT(l[d],f[d]);if(g!==0)return g;const p=nu(o[l[d]],u[f[d]]);if(p!==0)return p}return kt(l.length,f.length)})(n.mapValue,e.mapValue);default:throw dt(23264,{he:t})}}function Xb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return kt(n,e);const t=bl(n),r=bl(e),i=kt(t.seconds,r.seconds);return i!==0?i:kt(t.nanos,r.nanos)}function qb(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=nu(t[i],r[i]);if(s)return s}return kt(t.length,r.length)}function c0(n){return vT(n)}function vT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=bl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return kl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return tt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=vT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${vT(t.fields[a])}`;return i+"}"})(n.mapValue):dt(61005,{value:n})}function vy(n){switch(tu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hv(n);return e?16+vy(e):16;case 5:return 2*n.stringValue.length;case 6:return kl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+vy(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return _u(r.fields,((s,a)=>{i+=s.length+vy(a)})),i})(n.mapValue);default:throw dt(13486,{value:n})}}function sp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ET(n){return!!n&&"integerValue"in n}function ap(n){return!!n&&"arrayValue"in n}function Zb(n){return!!n&&"nullValue"in n}function Qb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ey(n){return!!n&&"mapValue"in n}function Kv(n){return(n?.mapValue?.fields||{})[CA]?.stringValue===PA}function hm(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return _u(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=hm(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hm(n.arrayValue.values[t]);return e}return{...n}}function X5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Y5}const q5={mapValue:{fields:{[CA]:{stringValue:PA},[l0]:{arrayValue:{}}}}};function UY(n){return"nullValue"in n?xy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sp(Oh.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Kv(n)?q5:{mapValue:{}}:dt(35942,{value:n})}function zY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sp(Oh.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?q5:"mapValue"in n?Kv(n)?{mapValue:{}}:Vc:dt(61959,{value:n})}function Jb(n,e){const t=nu(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ek(n,e){const t=nu(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ey(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hm(t)}setAll(e){let t=Qn.emptyPath(),r={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=hm(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Ey(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ey(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_u(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Ci(hm(this.value))}}function Z5(n){const e=[];return _u(n.fields,((t,r)=>{const i=new Qn([t]);if(Ey(r)){const s=Z5(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new hs(e)}class ar{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new ar(e,0,vt.min(),vt.min(),vt.min(),Ci.empty(),0)}static newFoundDocument(e,t,r,i){return new ar(e,1,t,vt.min(),r,i,0)}static newNoDocument(e,t){return new ar(e,2,t,vt.min(),vt.min(),Ci.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,vt.min(),vt.min(),Ci.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class u0{constructor(e,t){this.position=e,this.inclusive=t}}function tk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=tt.comparator(tt.fromName(a.referenceValue),t.key):r=nu(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vo(n.position[t],e.position[t]))return!1;return!0}class mx{constructor(e,t="asc"){this.field=e,this.dir=t}}function $Y(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Q5{}class zt extends Q5{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new WY(e,t,r):t==="array-contains"?new YY(e,r):t==="in"?new iF(e,r):t==="not-in"?new XY(e,r):t==="array-contains-any"?new qY(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new HY(e,r):new KY(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nu(t,this.value)):t!==null&&tu(this.value)===tu(t)&&this.matchesComparison(nu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends Q5{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Sn(e,t)}matches(e){return h0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function h0(n){return n.op==="and"}function wT(n){return n.op==="or"}function MA(n){return J5(n)&&h0(n)}function J5(n){for(const e of n.filters)if(e instanceof Sn)return!1;return!0}function ST(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+c0(n.value);if(MA(n))return n.filters.map((e=>ST(e))).join(",");{const e=n.filters.map((t=>ST(t))).join(",");return`${n.op}(${e})`}}function eF(n,e){return n instanceof zt?(function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&Vo(r.value,i.value)})(n,e):n instanceof Sn?(function(r,i){return i instanceof Sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,o)=>s&&eF(a,i.filters[o])),!0):!1})(n,e):void dt(19439)}function tF(n,e){const t=n.filters.concat(e);return Sn.create(t,n.op)}function nF(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${c0(t.value)}`})(n):n instanceof Sn?(function(t){return t.op.toString()+" {"+t.getFilters().map(nF).join(" ,")+"}"})(n):"Filter"}class WY extends zt{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class HY extends zt{constructor(e,t){super(e,"in",t),this.keys=rF("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class KY extends zt{constructor(e,t){super(e,"not-in",t),this.keys=rF("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rF(n,e){return(e.arrayValue?.values||[]).map((t=>tt.fromName(t.referenceValue)))}class YY extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ap(t)&&ip(t.arrayValue,this.value)}}class iF extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ip(this.value.arrayValue,t)}}class XY extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ip(this.value.arrayValue,t)}}class qY extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ip(this.value.arrayValue,r)))}}class ZY{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function TT(n,e=null,t=[],r=[],i=null,s=null,a=null){return new ZY(n,e,t,r,i,s,a)}function Dh(n){const e=Nt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ST(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Uv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>c0(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>c0(r))).join(",")),e.Te=t}return e.Te}function Zp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$Y(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nk(n.startAt,e.startAt)&&nk(n.endAt,e.endAt)}function px(n){return tt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function _x(n,e){return n.filters.filter((t=>t instanceof zt&&t.field.isEqual(e)))}function rk(n,e,t){let r=xy,i=!0;for(const s of _x(n,e)){let a=xy,o=!0;switch(s.op){case"<":case"<=":a=UY(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=xy}Jb({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];Jb({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function ik(n,e,t){let r=Vc,i=!0;for(const s of _x(n,e)){let a=Vc,o=!0;switch(s.op){case">=":case">":a=zY(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Vc}ek({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];ek({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class Qp{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QY(n,e,t,r,i,s,a,o){return new Qp(n,e,t,r,i,s,a,o)}function bA(n){return new Qp(n)}function sk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sF(n){return n.collectionGroup!==null}function fm(n){const e=Nt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new In(Qn.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new mx(s,r))})),t.has(Qn.keyField().canonicalString())||e.Ie.push(new mx(Qn.keyField(),r))}return e.Ie}function pa(n){const e=Nt(n);return e.Ee||(e.Ee=JY(e,fm(n))),e.Ee}function JY(n,e){if(n.limitType==="F")return TT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new mx(i.field,s)}));const t=n.endAt?new u0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new u0(n.startAt.position,n.startAt.inclusive):null;return TT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function IT(n,e){const t=n.filters.concat([e]);return new Qp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function AT(n,e,t){return new Qp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Yv(n,e){return Zp(pa(n),pa(e))&&n.limitType===e.limitType}function aF(n){return`${Dh(pa(n))}|lt:${n.limitType}`}function fd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>nF(i))).join(", ")}]`),Uv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>c0(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>c0(i))).join(",")),`Target(${r})`})(pa(n))}; limitType=${n.limitType})`}function Jp(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):tt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of fm(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,o,l){const u=tk(a,o,l);return a.inclusive?u<=0:u<0})(r.startAt,fm(r),i)||r.endAt&&!(function(a,o,l){const u=tk(a,o,l);return a.inclusive?u>=0:u>0})(r.endAt,fm(r),i))})(n,e)}function eX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oF(n){return(e,t)=>{let r=!1;for(const i of fm(n)){const s=tX(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tX(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):(function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?nu(l,u):dt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt(19790,{direction:n.dir})}}class jl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_u(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return U5(this.inner)}size(){return this.innerSize}}const nX=new Wn(tt.comparator);function Gs(){return nX}const lF=new Wn(tt.comparator);function Kg(...n){let e=lF;for(const t of n)e=e.insert(t.key,t);return e}function cF(n){let e=lF;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Co(){return dm()}function uF(){return dm()}function dm(){return new jl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const rX=new Wn(tt.comparator),iX=new In(tt.comparator);function jt(...n){let e=iX;for(const t of n)e=e.add(t);return e}const sX=new In(kt);function aX(){return sX}function kA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jm(e)?"-0":e}}function hF(n){return{integerValue:""+n}}function oX(n,e){return dY(e)?hF(e):kA(n,e)}class Xv{constructor(){this._=void 0}}function lX(n,e,t){return n instanceof op?(function(i,s){const a={fields:{[W5]:{stringValue:$5},[K5]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&RA(s)&&(s=Hv(s)),s&&(a.fields[H5]=s),{mapValue:a}})(t,e):n instanceof f0?dF(n,e):n instanceof d0?gF(n,e):(function(i,s){const a=fF(i,s),o=ak(a)+ak(i.Ae);return ET(a)&&ET(i.Ae)?hF(o):kA(i.serializer,o)})(n,e)}function cX(n,e,t){return n instanceof f0?dF(n,e):n instanceof d0?gF(n,e):t}function fF(n,e){return n instanceof lp?(function(r){return ET(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class op extends Xv{}class f0 extends Xv{constructor(e){super(),this.elements=e}}function dF(n,e){const t=mF(e);for(const r of n.elements)t.some((i=>Vo(i,r)))||t.push(r);return{arrayValue:{values:t}}}class d0 extends Xv{constructor(e){super(),this.elements=e}}function gF(n,e){let t=mF(e);for(const r of n.elements)t=t.filter((i=>!Vo(i,r)));return{arrayValue:{values:t}}}class lp extends Xv{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ak(n){return $n(n.integerValue||n.doubleValue)}function mF(n){return ap(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uX{constructor(e,t){this.field=e,this.transform=t}}function hX(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof f0&&i instanceof f0||r instanceof d0&&i instanceof d0?r0(r.elements,i.elements,Vo):r instanceof lp&&i instanceof lp?Vo(r.Ae,i.Ae):r instanceof op&&i instanceof op})(n.transform,e.transform)}class fX{constructor(e,t){this.version=e,this.transformResults=t}}class $i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qv{}function pF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zv(n.key,$i.none()):new C0(n.key,n.data,$i.none());{const t=n.data,r=Ci.empty();let i=new In(Qn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Gl(n.key,r,new hs(i.toArray()),$i.none())}}function dX(n,e,t){n instanceof C0?(function(i,s,a){const o=i.value.clone(),l=lk(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Gl?(function(i,s,a){if(!wy(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=lk(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(_F(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function gm(n,e,t,r){return n instanceof C0?(function(s,a,o,l){if(!wy(s.precondition,a))return o;const u=s.value.clone(),f=ck(s.fieldTransforms,l,a);return u.setAll(f),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Gl?(function(s,a,o,l){if(!wy(s.precondition,a))return o;const u=ck(s.fieldTransforms,l,a),f=a.data;return f.setAll(_F(s)),f.setAll(u),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(n,e,t,r):(function(s,a,o){return wy(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(n,e,t)}function gX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=fF(r.transform,i||null);s!=null&&(t===null&&(t=Ci.empty()),t.set(r.field,s))}return t||null}function ok(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&r0(r,i,((s,a)=>hX(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class C0 extends qv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gl extends qv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _F(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function lk(n,e,t){const r=new Map;yt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,cX(a,o,t[i]))}return r}function ck(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,lX(s,a,e))}return r}class Zv extends qv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yF extends qv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&dX(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=uF();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=pF(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(vt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),jt())}isEqual(e){return this.batchId===e.batchId&&r0(this.mutations,e.mutations,((t,r)=>ok(t,r)))&&r0(this.baseMutations,e.baseMutations,((t,r)=>ok(t,r)))}}class LA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return rX})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new LA(e,t,r,i)}}class OA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class mX{constructor(e,t){this.count=e,this.unchangedNames=t}}var yr,Yt;function pX(n){switch(n){case Pe.OK:return dt(64938);case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0;default:return dt(15467,{code:n})}}function xF(n){if(n===void 0)return zi("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case yr.OK:return Pe.OK;case yr.CANCELLED:return Pe.CANCELLED;case yr.UNKNOWN:return Pe.UNKNOWN;case yr.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case yr.INTERNAL:return Pe.INTERNAL;case yr.UNAVAILABLE:return Pe.UNAVAILABLE;case yr.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case yr.NOT_FOUND:return Pe.NOT_FOUND;case yr.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case yr.ABORTED:return Pe.ABORTED;case yr.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case yr.DATA_LOSS:return Pe.DATA_LOSS;default:return dt(39323,{code:n})}}(Yt=yr||(yr={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";function _X(){return new TextEncoder}const yX=new Hc([4294967295,4294967295],0);function uk(n){const e=_X().encode(n),t=new _5;return t.update(e),new Uint8Array(t.digest())}function hk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hc([t,r],0),new Hc([i,s],0)]}class DA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yg(`Invalid padding: ${t}`);if(r<0)throw new Yg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Yg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Hc.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Hc.fromNumber(r)));return i.compare(yX)===1&&(i=new Hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uk(e),[r,i]=hk(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new DA(s,i,t);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=uk(e),[r,i]=hk(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Yg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qv{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,e_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qv(vt.min(),i,new Wn(kt),Gs(),jt())}}class e_{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new e_(r,t,jt(),jt(),jt())}}class Sy{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class vF{constructor(e,t){this.targetId=e,this.Ce=t}}class EF{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class fk{constructor(){this.ve=0,this.Fe=dk(),this.Me=Sr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=jt(),t=jt(),r=jt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt(38017,{changeType:s})}})),new e_(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=dk()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xX{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gs(),this.Je=G1(),this.He=G1(),this.Ye=new Wn(kt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:dt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(px(s))if(r===0){const a=new tt(s.path);this.et(t,a,ar.newNoDocument(a,vt.min()))}else yt(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=kl(r).toUint8Array()}catch(l){if(l instanceof z5)return Lh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new DA(a,i,s)}catch(l){return Lh(l instanceof Yg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&px(o.target)){const l=new tt(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,ar.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=jt();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Qv(e,t,this.Ye,this.je,r);return this.je=Gs(),this.Je=G1(),this.He=G1(),this.Ye=new Wn(kt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fk,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new In(kt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new In(kt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fk),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function G1(){return new Wn(tt.comparator)}function dk(){return new Wn(tt.comparator)}const vX={asc:"ASCENDING",desc:"DESCENDING"},EX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wX={and:"AND",or:"OR"};class SX{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function RT(n,e){return n.useProto3Json||Uv(e)?e:{value:e}}function g0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TX(n,e){return g0(n,e.toTimestamp())}function Hi(n){return yt(!!n,49232),vt.fromTimestamp((function(t){const r=bl(t);return new wn(r.seconds,r.nanos)})(n))}function FA(n,e){return CT(n,e).canonicalString()}function CT(n,e){const t=(function(i){return new cn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function SF(n){const e=cn.fromString(n);return yt(kF(e),10190,{key:e.toString()}),e}function yx(n,e){return FA(n.databaseId,e.path)}function vh(n,e){const t=SF(e);if(t.get(1)!==n.databaseId.projectId)throw new et(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new et(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(AF(t))}function TF(n,e){return FA(n.databaseId,e)}function IF(n){const e=SF(n);return e.length===4?cn.emptyPath():AF(e)}function PT(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AF(n){return yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function gk(n,e,t){return{name:yx(n,e),fields:t.value.mapValue.fields}}function IX(n,e,t){const r=vh(n,e.name),i=Hi(e.updateTime),s=e.createTime?Hi(e.createTime):vt.min(),a=new Ci({mapValue:{fields:e.fields}}),o=ar.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function AX(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:dt(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,f){return u.useProto3Json?(yt(f===void 0||typeof f=="string",58123),Sr.fromBase64String(f||"")):(yt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Sr.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(u){const f=u.code===void 0?Pe.UNKNOWN:xF(u.code);return new et(f,u.message||"")})(a);t=new EF(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=vh(n,r.document.name),s=Hi(r.document.updateTime),a=r.document.createTime?Hi(r.document.createTime):vt.min(),o=new Ci({mapValue:{fields:r.document.fields}}),l=ar.newFoundDocument(i,s,a,o),u=r.targetIds||[],f=r.removedTargetIds||[];t=new Sy(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=vh(n,r.document),s=r.readTime?Hi(r.readTime):vt.min(),a=ar.newNoDocument(i,s),o=r.removedTargetIds||[];t=new Sy([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=vh(n,r.document),s=r.removedTargetIds||[];t=new Sy([],s,i,null)}else{if(!("filter"in e))return dt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new mX(i,s),o=r.targetId;t=new vF(o,a)}}return t}function xx(n,e){let t;if(e instanceof C0)t={update:gk(n,e.key,e.value)};else if(e instanceof Zv)t={delete:yx(n,e.key)};else if(e instanceof Gl)t={update:gk(n,e.key,e.data),updateMask:kX(e.fieldMask)};else{if(!(e instanceof yF))return dt(16599,{Vt:e.type});t={verify:yx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const o=a.transform;if(o instanceof op)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof f0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof d0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof lp)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw dt(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:TX(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:dt(27497)})(n,e.precondition)),t}function MT(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?$i.updateTime(Hi(s.updateTime)):s.exists!==void 0?$i.exists(s.exists):$i.none()})(e.currentDocument):$i.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)yt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new op;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];l=new f0(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];l=new d0(f)}else"increment"in o?l=new lp(a,o.increment):dt(16584,{proto:o});const u=Qn.fromServerFormat(o.fieldPath);return new uX(u,l)})(n,i))):[];if(e.update){e.update.name;const i=vh(n,e.update.name),s=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const u=l.fieldPaths||[];return new hs(u.map((f=>Qn.fromServerFormat(f))))})(e.updateMask);return new Gl(i,s,a,t,r)}return new C0(i,s,t,r)}if(e.delete){const i=vh(n,e.delete);return new Zv(i,t)}if(e.verify){const i=vh(n,e.verify);return new yF(i,t)}return dt(1463,{proto:e})}function RX(n,e){return n&&n.length>0?(yt(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Hi(i.updateTime):Hi(s);return a.isEqual(vt.min())&&(a=Hi(s)),new fX(a,i.transformResults||[])})(t,e)))):[]}function RF(n,e){return{documents:[TF(n,e.path)]}}function CF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=TF(n,i);const s=(function(u){if(u.length!==0)return bF(Sn.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:dd(g.field),direction:PX(g.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=RT(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function PF(n){let e=IF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){yt(r===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=(function(d){const g=MF(d);return g instanceof Sn&&MA(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(d){return d.map((g=>(function(v){return new mx(gd(v.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(g)))})(t.orderBy));let o=null;t.limit&&(o=(function(d){let g;return g=typeof d=="object"?d.value:d,Uv(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(d){const g=!!d.before,p=d.values||[];return new u0(p,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(d){const g=!d.before,p=d.values||[];return new u0(p,g)})(t.endAt)),QY(e,i,a,s,o,"F",l,u)}function CX(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=gd(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gd(t.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gd(t.unaryFilter.field);return zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=gd(t.unaryFilter.field);return zt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return dt(61313);default:return dt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(gd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return dt(58110);default:return dt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Sn.create(t.compositeFilter.filters.map((r=>MF(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return dt(1026)}})(t.compositeFilter.op))})(n):dt(30097,{filter:n})}function PX(n){return vX[n]}function MX(n){return EX[n]}function bX(n){return wX[n]}function dd(n){return{fieldPath:n.canonicalString()}}function gd(n){return Qn.fromServerFormat(n.fieldPath)}function bF(n){return n instanceof zt?(function(t){if(t.op==="=="){if(Qb(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NAN"}};if(Zb(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qb(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NAN"}};if(Zb(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dd(t.field),op:MX(t.op),value:t.value}}})(n):n instanceof Sn?(function(t){const r=t.getFilters().map((i=>bF(i)));return r.length===1?r[0]:{compositeFilter:{op:bX(t.op),filters:r}}})(n):dt(54877,{filter:n})}function kX(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function kF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class fl{constructor(e,t,r,i,s=vt.min(),a=vt.min(),o=Sr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class NF{constructor(e){this.yt=e}}function NX(n,e){let t;if(e.document)t=IX(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=Vh(e.noDocument.readTime);t=ar.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt(56709);{const r=tt.fromSegments(e.unknownDocument.path),i=Vh(e.unknownDocument.version);t=ar.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new wn(i[0],i[1]);return vt.fromTimestamp(s)})(e.readTime)),t}function mk(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:yx(s,a.key),fields:a.data.value.mapValue.fields,updateTime:g0(s,a.version.toTimestamp()),createTime:g0(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fh(e.version)};else{if(!e.isUnknownDocument())return dt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Fh(e.version)}}return r}function vx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vh(n){const e=new wn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function ih(n,e){const t=(e.baseMutations||[]).map((s=>MT(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>MT(n.yt,s))),i=wn.fromMillis(e.localWriteTimeMs);return new NA(e.batchId,i,t,r)}function Xg(n){const e=Vh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Vh(n.lastLimboFreeSnapshotVersion):vt.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return yt(a===1,1966,{count:a}),pa(bA(IF(s.documents[0])))})(n.query):(function(s){return pa(PF(s))})(n.query),new fl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function LF(n,e){const t=Fh(e.snapshotVersion),r=Fh(e.lastLimboFreeSnapshotVersion);let i;i=px(e.target)?RF(n.yt,e.target):CF(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dh(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function OF(n){const e=PF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?AT(e,e.limit,"L"):e}function W2(n,e){return new OA(e.largestBatchId,MT(n.yt,e.overlayMutation))}function pk(n,e){const t=e.path.lastSegment();return[n,bi(e.path.popLast()),t]}function _k(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Fh(r.readTime),documentKey:bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class LX{getBundleMetadata(e,t){return yk(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Vh(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return yk(e).put((function(i){return{bundleId:i.id,createTime:Fh(Hi(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return xk(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:OF(s.bundledQuery),readTime:Vh(s.readTime)}})(r)}))}saveNamedQuery(e,t){return xk(e).put((function(i){return{name:i.name,readTime:Fh(Hi(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function yk(n){return Vr(n,zv)}function xk(n){return Vr(n,$v)}class Jv{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Jv(e,r)}getOverlay(e,t){return kg(e).get(pk(this.userId,t)).next((r=>r?W2(this.serializer,r):null))}getOverlays(e,t){const r=Co();return fe.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const o=new OA(t,a);i.push(this.St(e,o))})),fe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(bi(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(kg(e).Z(yT,o))})),fe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Co(),s=bi(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return kg(e).J(yT,a).next((o=>{for(const l of o){const u=W2(this.serializer,l);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=Co();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kg(e).ee({index:F5,range:o},((l,u,f)=>{const d=W2(this.serializer,u);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):f.done()})).next((()=>s))}St(e,t){return kg(e).put((function(i,s,a){const[o,l,u]=pk(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:xx(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function kg(n){return Vr(n,Wv)}class OX{bt(e){return Vr(e,IA)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Sr.fromUint8Array(r):Sr.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class sh{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt($n(e.integerValue));else if("doubleValue"in e){const r=$n(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Jm(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=bl(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(kl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?X5(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Kv(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):dt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=l0,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt($n(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),tt.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}sh.Kt=new sh;const Qf=255;function DX(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function vk(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=DX(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class FX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=vk(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=vk(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Qf),this.sn(255)}_n(){this.an(Qf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Qf?(this.sn(Qf),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Qf?(this.an(Qf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class VX{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class jX{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ng{constructor(){this.cn=new FX,this.ln=new VX(this.cn),this.hn=new jX(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ah{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ah(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Ty(this.En),directionalValue:Ty(this.dn),orderedDocumentKey:Ty(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function yc(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=Ek(n.En,e.En),t!==0?t:(t=Ek(n.dn,e.dn),t!==0?t:tt.comparator(n.In,e.In)))}function Ek(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Ty(n){return u5()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function wk(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class Sk{constructor(e){this.mn=new In(((t,r)=>Qn.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(yt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=mT(e);if(t!==void 0&&!this.wn(t))return!1;const r=Zu(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new In(Qn.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new py(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new py(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new py(r.field,r.dir==="asc"?0:1)));return new ux(ux.UNKNOWN_ID,this.collectionId,t,Qm.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function DF(n){if(yt(n instanceof zt||n instanceof Sn,20012),n instanceof zt){if(n instanceof iF){const t=n.value.arrayValue?.values?.map((r=>zt.create(n.field,"==",r)))||[];return Sn.create(t,"or")}return n}const e=n.filters.map((t=>DF(t)));return Sn.create(e,n.op)}function GX(n){if(n.getFilters().length===0)return[];const e=NT(DF(n));return yt(FF(e),7391),bT(e)||kT(e)?[e]:e.getFilters()}function bT(n){return n instanceof zt}function kT(n){return n instanceof Sn&&MA(n)}function FF(n){return bT(n)||kT(n)||(function(t){if(t instanceof Sn&&wT(t)){for(const r of t.getFilters())if(!bT(r)&&!kT(r))return!1;return!0}return!1})(n)}function NT(n){if(yt(n instanceof zt||n instanceof Sn,34018),n instanceof zt)return n;if(n.filters.length===1)return NT(n.filters[0]);const e=n.filters.map((r=>NT(r)));let t=Sn.create(e,n.op);return t=Ex(t),FF(t)?t:(yt(t instanceof Sn,64498),yt(h0(t),40251),yt(t.filters.length>1,57927),t.filters.reduce(((r,i)=>VA(r,i))))}function VA(n,e){let t;return yt(n instanceof zt||n instanceof Sn,38388),yt(e instanceof zt||e instanceof Sn,25473),t=n instanceof zt?e instanceof zt?(function(i,s){return Sn.create([i,s],"and")})(n,e):Tk(n,e):e instanceof zt?Tk(e,n):(function(i,s){if(yt(i.filters.length>0&&s.filters.length>0,48005),h0(i)&&h0(s))return tF(i,s.getFilters());const a=wT(i)?i:s,o=wT(i)?s:i,l=a.filters.map((u=>VA(u,o)));return Sn.create(l,"or")})(n,e),Ex(t)}function Tk(n,e){if(h0(e))return tF(e,n.getFilters());{const t=e.filters.map((r=>VA(n,r)));return Sn.create(t,"or")}}function Ex(n){if(yt(n instanceof zt||n instanceof Sn,11850),n instanceof zt)return n;const e=n.getFilters();if(e.length===1)return Ex(e[0]);if(J5(n))return n;const t=e.map((i=>Ex(i))),r=[];return t.forEach((i=>{i instanceof zt?r.push(i):i instanceof Sn&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Sn.create(r,n.op)}class BX{constructor(){this.Cn=new jA}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve($s.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve($s.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class jA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(cn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(cn.comparator)).toArray()}}const Ik="IndexedDbIndexManager",B1=new Uint8Array(0);class UX{constructor(e,t){this.databaseId=t,this.vn=new jA,this.Fn=new jl((r=>Dh(r)),((r,i)=>Zp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:bi(i)};return Ak(e).put(s)}return fe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[I5(t),""],!1,!0);return Ak(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Ro(a.parent))}return r}))}addFieldIndex(e,t){const r=Lg(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=ed(e);return s.next((o=>{a.put(_k(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Lg(e),i=ed(e),s=Jf(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Lg(e),r=Jf(e),i=ed(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return fe.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new Sk(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Jf(e);let i=!0;const s=new Map;return fe.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=jt();const o=[];return fe.forEach(s,((l,u)=>{$e(Ik,`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map((k=>`${k.fieldPath}:${k.kind}`)).join(",")}`})(l)} to execute ${Dh(t)}`);const f=(function(M,k){const L=mT(k);if(L===void 0)return null;for(const z of _x(M,L.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(u,l),d=(function(M,k){const L=new Map;for(const z of Zu(k))for(const P of _x(M,z.fieldPath))switch(P.op){case"==":case"in":L.set(z.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return L.set(z.fieldPath.canonicalString(),P.value),Array.from(L.values())}return null})(u,l),g=(function(M,k){const L=[];let z=!0;for(const P of Zu(k)){const C=P.kind===0?rk(M,P.fieldPath,M.startAt):ik(M,P.fieldPath,M.startAt);L.push(C.value),z&&(z=C.inclusive)}return new u0(L,z)})(u,l),p=(function(M,k){const L=[];let z=!0;for(const P of Zu(k)){const C=P.kind===0?ik(M,P.fieldPath,M.endAt):rk(M,P.fieldPath,M.endAt);L.push(C.value),z&&(z=C.inclusive)}return new u0(L,z)})(u,l),v=this.On(l,u,g),x=this.On(l,u,p),E=this.Nn(l,u,d),I=this.Bn(l.indexId,f,v,g.inclusive,x,p.inclusive,E);return fe.forEach(I,(T=>r.Y(T,t.limit).next((M=>{M.forEach((k=>{const L=tt.fromSegments(k.documentKey);a.has(L)||(a=a.add(L),o.push(L))}))}))))})).next((()=>o))}return fe.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=GX(Sn.create(e.filters,"and")).map((r=>TT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),f=[];for(let d=0;d<l;++d){const g=t?this.Ln(t[d/u]):B1,p=this.kn(e,g,r[d%u],i),v=this.qn(e,g,s[d%u],a),x=o.map((E=>this.kn(e,g,E,!0)));f.push(...this.createRange(p,v,x))}return f}kn(e,t,r,i){const s=new ah(e,tt.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new ah(e,tt.empty(),t,r);return i?s.An():s}xn(e,t){const r=new Sk(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return fe.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(l){let u=new In(Qn.comparator),f=!1;for(const d of l.filters)for(const g of d.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(f?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Ng;for(const i of Zu(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);sh.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Ng;return sh.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Ng;return sh.Kt.Dt(sp(this.databaseId,t),r.Pn((function(s){const a=Zu(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Ng);let s=0;for(const a of Zu(e)){const o=r[s++];for(const l of i)if(this.Un(t,a.fieldPath)&&ap(o))i=this.Kn(i,a,o);else{const u=l.Pn(a.kind);sh.Kt.Dt(o,u)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Ng;l.seed(o.un()),sh.Kt.Dt(a,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof zt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Lg(e),i=ed(e);return(t?r.J(_T,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return fe.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(f,d){const g=d?new Qm(d.sequenceNumber,new $s(Vh(d.readTime),new tt(Ro(d.documentKey)),d.largestBatchId)):Qm.empty(),p=f.fields.map((([v,x])=>new py(Qn.fromServerFormat(v),x)));return new ux(f.indexId,f.collectionGroup,p,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:kt(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Lg(e),s=ed(e);return this.Gn(e).next((a=>i.J(_T,IDBKeyRange.bound(t,t)).next((o=>fe.forEach(o,(l=>s.put(_k(l.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?fe.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),fe.forEach(o,(l=>this.zn(e,i,l).next((u=>{const f=this.jn(s,l);return u.isEqual(f)?fe.resolve():this.Jn(e,s,l,u,f)})))))))}))}Hn(e,t,r,i){return Jf(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Jf(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Jf(e);let s=new In(yc);return i.ee({index:D5,range:IDBKeyRange.only([r.indexId,this.uid,Ty(this.$n(r,t))])},((a,o)=>{s=s.add(new ah(r.indexId,t,wk(o.arrayValue),wk(o.directionalValue)))})).next((()=>s))}jn(e,t){let r=new In(yc);const i=this.Qn(t,e);if(i==null)return r;const s=mT(t);if(s!=null){const a=e.data.field(s.fieldPath);if(ap(a))for(const o of a.arrayValue.values||[])r=r.add(new ah(t.indexId,e.key,this.Ln(o),i))}else r=r.add(new ah(t.indexId,e.key,B1,i));return r}Jn(e,t,r,i,s){$e(Ik,"Updating index entries for document '%s'",t.key);const a=[];return(function(l,u,f,d,g){const p=l.getIterator(),v=u.getIterator();let x=Zf(p),E=Zf(v);for(;x||E;){let I=!1,T=!1;if(x&&E){const M=f(x,E);M<0?T=!0:M>0&&(I=!0)}else x!=null?T=!0:I=!0;I?(d(E),E=Zf(v)):T?(g(x),x=Zf(p)):(x=Zf(p),E=Zf(v))}})(i,s,yc,(o=>{a.push(this.Hn(e,t,r,o))}),(o=>{a.push(this.Yn(e,t,r,o))})),fe.waitFor(a)}Gn(e){let t=1;return ed(e).ee({index:O5,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,o)=>yc(a,o))).filter(((a,o,l)=>!o||yc(a,l[o-1])!==0));const i=[];i.push(e);for(const a of r){const o=yc(a,e),l=yc(a,t);if(o===0)i[0]=e.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,B1,tt.empty()),l=i[a+1].Vn(this.uid,B1,tt.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,t){return yc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Rk)}getMinOffset(e,t){return fe.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||dt(44426))))).next(Rk)}}function Ak(n){return Vr(n,np)}function Jf(n){return Vr(n,um)}function Lg(n){return Vr(n,TA)}function ed(n){return Vr(n,cm)}function Rk(n){yt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;EA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new $s(e.readTime,e.documentKey,t)}const Ck={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VF=41943040;class Ai{static withCacheSize(e){return new Ai(e,Ai.DEFAULT_COLLECTION_PERCENTILE,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function jF(n,e,t){const r=n.store(Da),i=n.store(i0),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.ee({range:a},((f,d,g)=>(o++,g.delete())));s.push(l.next((()=>{yt(o===1,47070,{batchId:t.batchId})})));const u=[];for(const f of t.mutations){const d=k5(e,f.key.path,t.batchId);s.push(i.delete(d)),u.push(f.key)}return fe.waitFor(s).next((()=>u))}function wx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt(14731);e=n.noDocument}return JSON.stringify(e).length}Ai.DEFAULT_COLLECTION_PERCENTILE=10,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ai.DEFAULT=new Ai(VF,Ai.DEFAULT_COLLECTION_PERCENTILE,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ai.DISABLED=new Ai(-1,0,0);class eE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){yt(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new eE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).ee({index:fh,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=md(e),a=xc(e);return a.add({}).next((o=>{yt(typeof o=="number",49019);const l=new NA(o,t,r,i),u=(function(p,v,x){const E=x.baseMutations.map((T=>xx(p.yt,T))),I=x.mutations.map((T=>xx(p.yt,T)));return{userId:v,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:E,mutations:I}})(this.serializer,this.userId,l),f=[];let d=new In(((g,p)=>kt(g.canonicalString(),p.canonicalString())));for(const g of i){const p=k5(this.userId,g.key.path,o);d=d.add(g.key.path.popLast()),f.push(a.put(u)),f.push(s.put(p,pY))}return d.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=l.keys()})),fe.waitFor(f).next((()=>l))}))}lookupMutationBatch(e,t){return xc(e).get(t).next((r=>r?(yt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ih(this.serializer,r)):null))}er(e,t){return this.Xn[t]?fe.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return xc(e).ee({index:fh,range:i},((a,o,l)=>{o.userId===this.userId&&(yt(o.batchId>=r,47524,{tr:r}),s=ih(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=yh;return xc(e).ee({index:fh,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,yh],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).J(fh,t).next((r=>r.map((i=>ih(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_y(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return md(e).ee({range:i},((a,o,l)=>{const[u,f,d]=a,g=Ro(f);if(u===this.userId&&t.path.isEqual(g))return xc(e).get(d).next((p=>{if(!p)throw dt(61480,{nr:a,batchId:d});yt(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(ih(this.serializer,p))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(kt);const i=[];return t.forEach((s=>{const a=_y(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=md(e).ee({range:o},((u,f,d)=>{const[g,p,v]=u,x=Ro(p);g===this.userId&&s.path.isEqual(x)?r=r.add(v):d.done()}));i.push(l)})),fe.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=_y(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new In(kt);return md(e).ee({range:a},((l,u,f)=>{const[d,g,p]=l,v=Ro(g);d===this.userId&&r.isPrefixOf(v)?v.length===i&&(o=o.add(p)):f.done()})).next((()=>this.rr(e,o)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(xc(e).get(s).next((a=>{if(a===null)throw dt(35274,{batchId:s});yt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(ih(this.serializer,a))})))})),fe.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return jF(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),fe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return md(e).ee({range:r},((s,a,o)=>{if(s[0]===this.userId){const l=Ro(s[1]);i.push(l)}else o.done()})).next((()=>{yt(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return GF(e,this.userId,t)}_r(e){return BF(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:yh,lastStreamToken:""}))}}function GF(n,e,t){const r=_y(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return md(n).ee({range:s,X:!0},((o,l,u)=>{const[f,d,g]=o;f===e&&d===i&&(a=!0),u.done()})).next((()=>a))}function xc(n){return Vr(n,Da)}function md(n){return Vr(n,i0)}function BF(n){return Vr(n,ep)}class jh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jh(0)}static cr(){return new jh(-1)}}class zX{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new jh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>vt.fromTimestamp(new wn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>td(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(yt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return td(e).ee(((a,o)=>{const l=Xg(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>fe.waitFor(s))).next((()=>i))}forEachTarget(e,t){return td(e).ee(((r,i)=>{const s=Xg(i);t(s)}))}lr(e){return Pk(e).get(dx).next((t=>(yt(t!==null,2888),t)))}hr(e,t){return Pk(e).put(dx,t)}Pr(e,t){return td(e).put(LF(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Dh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return td(e).ee({range:i,index:L5},((a,o,l)=>{const u=Xg(o);Zp(t,u.target)&&(s=u,l.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Rc(e);return t.forEach((a=>{const o=bi(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))})),fe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Rc(e);return fe.forEach(t,(s=>{const a=bi(s.path);return fe.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Rc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Rc(e);let s=jt();return i.ee({range:r,X:!0},((a,o,l)=>{const u=Ro(a[1]),f=new tt(u);s=s.add(f)})).next((()=>s))}containsKey(e,t){const r=bi(t.path),i=IDBKeyRange.bound([r],[I5(r)],!1,!0);let s=0;return Rc(e).ee({index:SA,X:!0,range:i},(([a,o],l,u)=>{a!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return td(e).get(t).next((r=>r?Xg(r):null))}}function td(n){return Vr(n,s0)}function Pk(n){return Vr(n,xh)}function Rc(n){return Vr(n,a0)}const Mk="LruGarbageCollector",$X=1048576;function bk([n,e],[t,r]){const i=kt(n,t);return i===0?kt(e,r):i}class WX{constructor(e){this.Ir=e,this.buffer=new In(bk),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$e(Mk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pu(t)?$e(Mk,"Ignoring IndexedDB error during garbage collection: ",t):await nf(t)}await this.Vr(3e5)}))}}class HX{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(ga.ce);const r=new WX(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Ck)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ck):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,o,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i)))).next((d=>(r=d,o=Date.now(),this.removeTargets(e,r,t)))).next((d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),hd()<=Ut.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function zF(n,e){return new HX(n,e)}class KX{constructor(e,t){this.db=e,this.garbageCollector=zF(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return U1(e,r)}removeReference(e,t,r){return U1(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return U1(e,t)}br(e,t){return(function(i,s){let a=!1;return BF(i).te((o=>GF(i,o,s).next((l=>(l&&(a=!0),fe.resolve(!l)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const l=this.br(e,a).next((u=>{if(!u)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,vt.min()),Rc(e).delete((function(d){return[0,bi(d.path)]})(a)))))}));i.push(l)}})).next((()=>fe.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return U1(e,t)}Sr(e,t){const r=Rc(e);let i,s=ga.ce;return r.ee({index:SA},(([a,o],{path:l,sequenceNumber:u})=>{a===0?(s!==ga.ce&&t(new tt(Ro(i)),s),s=u,i=l):s=ga.ce})).next((()=>{s!==ga.ce&&t(new tt(Ro(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function U1(n,e){return Rc(n).put((function(r,i){return{targetId:0,path:bi(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class $F{constructor(){this.changes=new jl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return $u(e).put(r)}removeEntry(e,t,r){return $u(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],vx(a),o[o.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=ar.newInvalidDocument(t);return $u(e).ee({index:yy,range:IDBKeyRange.only(Og(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:ar.newInvalidDocument(t)};return $u(e).ee({index:yy,range:IDBKeyRange.only(Og(t))},((i,s)=>{r={document:this.Cr(t,s),size:wx(s)}})).next((()=>r))}getEntries(e,t){let r=Gs();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=Gs(),i=new Wn(tt.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,wx(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return fe.resolve();let i=new In(Lk);t.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(Og(i.first()),Og(i.last())),a=i.getIterator();let o=a.getNext();return $u(e).ee({index:yy,range:s},((l,u,f)=>{const d=tt.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&Lk(o,d)<0;)r(o,null),o=a.getNext();o&&o.isEqual(d)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?f.j(Og(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),vx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $u(e).J(IDBKeyRange.bound(o,l,!0)).next((u=>{s?.incrementDocumentReadCount(u.length);let f=Gs();for(const d of u){const g=this.Cr(tt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);g.isFoundDocument()&&(Jp(t,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,t,r,i){let s=Gs();const a=Nk(t,r),o=Nk(t,$s.max());return $u(e).ee({index:N5,range:IDBKeyRange.bound(a,o,!0)},((l,u,f)=>{const d=this.Cr(tt.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&f.done()})).next((()=>s))}newChangeBuffer(e){return new XX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return kk(e).get(pT).next((t=>(yt(!!t,20021),t)))}Dr(e,t){return kk(e).put(pT,t)}Cr(e,t){if(t){const r=NX(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(vt.min())))return r}return ar.newInvalidDocument(e)}}function WF(n){return new YX(n)}class XX extends $F{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new jl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new In(((s,a)=>kt(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=mk(this.Nr.serializer,a);i=i.add(s.path.popLast());const u=wx(l);r+=u-o.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=mk(this.Nr.serializer,a.convertToNoDocument(vt.min()));t.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function kk(n){return Vr(n,tp)}function $u(n){return Vr(n,fx)}function Og(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nk(n,e){const t=e.documentKey.path.toArray();return[n,vx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Lk(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=kt(t[s],r[s]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}class qX{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class HF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&gm(r.mutation,i,hs.empty(),wn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,jt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=jt()){const i=Co();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Kg();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=Co();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,jt())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,r,i){let s=Gs();const a=dm(),o=(function(){return dm()})();return t.forEach(((l,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Gl)?s=s.insert(u.key,u):f!==void 0?(a.set(u.key,f.mutation.getFieldMask()),gm(f.mutation,u,f.mutation.getFieldMask(),wn.now())):a.set(u.key,hs.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,f)=>a.set(u,f))),t.forEach(((u,f)=>o.set(u,new qX(f,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=dm();let i=new Wn(((a,o)=>a-o)),s=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let f=r.get(l)||hs.empty();f=o.applyToLocalView(u,f),r.set(l,f);const d=(i.get(o.batchId)||jt()).add(l);i=i.insert(o.batchId,d)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,f=l.value,d=uF();f.forEach((g=>{if(!s.has(g)){const p=pF(t.get(g),r.get(g));p!==null&&d.set(g,p),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return fe.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return tt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):fe.resolve(Co());let o=Zm,l=s;return a.next((u=>fe.forEach(u,((f,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,jt()))).next((f=>({batchId:o,changes:cF(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next((r=>{let i=Kg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Kg();return this.indexManager.getCollectionParents(e,s).next((o=>fe.forEach(o,(l=>{const u=(function(d,g){return new Qp(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((d,g)=>{a=a.insert(d,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((l,u)=>{const f=u.getKey();a.get(f)===null&&(a=a.insert(f,ar.newInvalidDocument(f)))}));let o=Kg();return a.forEach(((l,u)=>{const f=s.get(l);f!==void 0&&gm(f.mutation,u,hs.empty(),wn.now()),Jp(t,u)&&(o=o.insert(l,u))})),o}))}}class ZX{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Hi(i.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:OF(i.bundledQuery),readTime:Hi(i.readTime)}})(t)),fe.resolve()}}class QX{constructor(){this.overlays=new Wn(tt.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Co();return fe.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=Co(),s=t.length+1,a=new tt(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Wn(((u,f)=>u-f));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);f===null&&(f=Co(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=Co(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return fe.resolve(o)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new OA(t,r));let s=this.qr.get(t);s===void 0&&(s=jt(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class JX{constructor(){this.sessionToken=Sr.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class GA{constructor(){this.Qr=new In(Hr.$r),this.Ur=new In(Hr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Hr(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Hr(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new tt(new cn([])),r=new Hr(t,e),i=new Hr(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new tt(new cn([])),r=new Hr(t,e),i=new Hr(t,e+1);let s=jt();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new Hr(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Hr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return tt.comparator(e.key,t.key)||kt(e.Yr,t.Yr)}static Kr(e,t){return kt(e.Yr,t.Yr)||tt.comparator(e.key,t.key)}}class eq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new In(Hr.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new NA(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Hr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fe.resolve(a)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return fe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?yh:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Hr(t,0),i=new Hr(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),fe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(kt);return t.forEach((i=>{const s=new Hr(i,0),a=new Hr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{r=r.add(o.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;tt.isDocumentKey(s)||(s=s.child(""));const a=new Hr(new tt(s),0);let o=new In(kt);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)}),a),fe.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){yt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(t.mutations,(i=>{const s=new Hr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Hr(t,0),i=this.Zr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tq{constructor(e){this.ri=e,this.docs=(function(){return new Wn(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ar.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Gs();const a=t.path,o=new tt(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||EA(C5(f),r)<=0||(i.has(f.key)||Jp(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return fe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){dt(9500)}ii(e,t){return fe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new nq(this)}getSize(e){return fe.resolve(this.size)}}class nq extends $F{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class rq{constructor(e){this.persistence=e,this.si=new jl((t=>Dh(t)),Zp),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new GA,this.targetCount=0,this.ai=jh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),fe.waitFor(s).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),fe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}class BA{constructor(e,t){this.ui={},this.overlays={},this.ci=new ga(0),this.li=!1,this.li=!0,this.hi=new JX,this.referenceDelegate=e(this),this.Pi=new rq(this),this.indexManager=new BX,this.remoteDocumentCache=(function(i){return new tq(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new NF(t),this.Ii=new ZX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QX,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new eq(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new iq(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class iq extends M5{constructor(e){super(),this.currentSequenceNumber=e}}class tE{constructor(e){this.persistence=e,this.Ri=new GA,this.Vi=null}static mi(e){return new tE(e)}get fi(){if(this.Vi)return this.Vi;throw dt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const i=tt.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,vt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Sx{constructor(e,t){this.persistence=e,this.pi=new jl((r=>bi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=zF(this,t)}static mi(e,t){return new Sx(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return fe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?fe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(r++,s.removeEntry(a,vt.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vy(e.data.value)),t}br(e,t,r){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sq{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Bv("createOrUpgrade",t);r<1&&i>=1&&((function(l){l.createObjectStore(qp)})(e),(function(l){l.createObjectStore(ep,{keyPath:mY}),l.createObjectStore(Da,{keyPath:Wb,autoIncrement:!0}).createIndex(fh,Hb,{unique:!0}),l.createObjectStore(i0)})(e),Ok(e),(function(l){l.createObjectStore(Qu)})(e));let a=fe.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(a0),l.deleteObjectStore(s0),l.deleteObjectStore(xh)})(e),Ok(e)),a=a.next((()=>(function(l){const u=l.store(xh),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return u.put(dx,f)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(l,u){return u.store(Da).J().next((d=>{l.deleteObjectStore(Da),l.createObjectStore(Da,{keyPath:Wb,autoIncrement:!0}).createIndex(fh,Hb,{unique:!0});const g=u.store(Da),p=d.map((v=>g.put(v)));return fe.waitFor(p)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore(o0,{keyPath:TY})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore(tp)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore(zv,{keyPath:IY})})(e),(function(l){l.createObjectStore($v,{keyPath:AY})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(l){const u=l.createObjectStore(Wv,{keyPath:NY});u.createIndex(yT,LY,{unique:!1}),u.createIndex(F5,OY,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(l){const u=l.createObjectStore(fx,{keyPath:_Y});u.createIndex(yy,yY),u.createIndex(N5,xY)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Qu)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore(TA,{keyPath:RY,autoIncrement:!0}).createIndex(_T,CY,{unique:!1}),l.createObjectStore(cm,{keyPath:PY}).createIndex(O5,MY,{unique:!1}),l.createObjectStore(um,{keyPath:bY}).createIndex(D5,kY,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(cm).clear()})).next((()=>{t.objectStore(um).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore(IA,{keyPath:DY})})(e)}))),r<18&&i>=18&&u5()&&(a=a.next((()=>{t.objectStore(cm).clear()})).next((()=>{t.objectStore(um).clear()}))),a}wi(e){let t=0;return e.store(Qu).ee(((r,i)=>{t+=wx(i)})).next((()=>{const r={byteSize:t};return e.store(tp).put(pT,r)}))}yi(e){const t=e.store(ep),r=e.store(Da);return t.J().next((i=>fe.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,yh],[s.userId,s.lastAcknowledgedBatchId]);return r.J(fh,a).next((o=>fe.forEach(o,(l=>{yt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=ih(this.serializer,l);return jF(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(a0),r=e.store(Qu);return e.store(xh).get(dx).next((i=>{const s=[];return r.ee(((a,o)=>{const l=new cn(a),u=(function(d){return[0,bi(d)]})(l);s.push(t.get(u).next((f=>f?fe.resolve():(d=>t.put({targetId:0,path:bi(d),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>fe.waitFor(s)))}))}bi(e,t){e.createObjectStore(np,{keyPath:SY});const r=t.store(np),i=new jA,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:bi(l)})}};return t.store(Qu).ee({X:!0},((a,o)=>{const l=new cn(a);return s(l.popLast())})).next((()=>t.store(i0).ee({X:!0},(([a,o,l],u)=>{const f=Ro(o);return s(f.popLast())}))))}Di(e){const t=e.store(s0);return t.ee(((r,i)=>{const s=Xg(i),a=LF(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(Qu),i=[];return r.ee(((s,a)=>{const o=t.store(fx),l=(function(d){return d.document?new tt(cn.fromString(d.document.name).popFirst(5)):d.noDocument?tt.fromSegments(d.noDocument.path):d.unknownDocument?tt.fromSegments(d.unknownDocument.path):dt(36783)})(a).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))})).next((()=>fe.waitFor(i)))}Fi(e,t){const r=t.store(Da),i=WF(this.serializer),s=new BA(tE.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((l=>{let u=o.get(l.userId)??jt();ih(this.serializer,l).keys().forEach((f=>u=u.add(f))),o.set(l.userId,u)})),fe.forEach(o,((l,u)=>{const f=new ui(u),d=Jv.wt(this.serializer,f),g=s.getIndexManager(f),p=eE.wt(f,this.serializer,g,s.referenceDelegate);return new HF(i,p,d,g).recalculateAndSaveOverlaysForDocumentKeys(new xT(t,ga.ce),l).next()}))}))}}function Ok(n){n.createObjectStore(a0,{keyPath:EY}).createIndex(SA,wY,{unique:!0}),n.createObjectStore(s0,{keyPath:"targetId"}).createIndex(L5,vY,{unique:!0}),n.createObjectStore(xh)}const vc="IndexedDbPersistence",H2=18e5,K2=5e3,Y2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",aq="main";class UA{constructor(e,t,r,i,s,a,o,l,u,f,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=u,this.Oi=f,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!UA.v())throw new et(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KX(this,i),this.$i=t+aq,this.serializer=new NF(l),this.Ui=new Kc(this.$i,this.Ni,new sq(this.serializer)),this.hi=new OX,this.Pi=new zX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=WF(this.serializer),this.Ii=new LX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&zi(vc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new et(Pe.FAILED_PRECONDITION,Y2);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ga(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>z1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(pu(e))return $e(vc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e(vc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Dg(e).get(qf).next((t=>fe.resolve(this.es(t))))}ts(e){return z1(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,H2)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Vr(t,o0);return r.J().next((i=>{const s=this.ss(i,H2),a=i.filter((o=>s.indexOf(o)===-1));return fe.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?fe.resolve(!0):Dg(e).get(qf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,K2)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new et(Pe.FAILED_PRECONDITION,Y2);return!1}}return!(!this.networkEnabled||!this.inForeground)||z1(e).J().next((r=>this.ss(r,K2).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&$e(vc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[qp,o0],(e=>{const t=new xT(e,ga.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>z1(e).J().next((t=>this.ss(t,H2).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return eE.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UX(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Jv.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){$e(vc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?jY:l===17?B5:l===16?VY:l===15?AA:l===14?G5:l===13?j5:l===12?FY:l===11?V5:void dt(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new xT(o,this.ci?this.ci.next():ga.ce),t==="readwrite-primary"?this.Hi(a).next((l=>!!l||this.Yi(a))).next((l=>{if(!l)throw zi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new et(Pe.FAILED_PRECONDITION,P5);return r(a)})).next((l=>this.Xi(a).next((()=>l)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return Dg(e).get(qf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,K2)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new et(Pe.FAILED_PRECONDITION,Y2)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dg(e).put(qf,t)}static v(){return Kc.v()}Zi(e){const t=Dg(e);return t.get(qf).next((r=>this.es(r)?($e(vc,"Releasing primary lease."),t.delete(qf)):fe.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(zi(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;c5()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return $e(vc,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return zi(vc,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){zi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dg(n){return Vr(n,qp)}function z1(n){return Vr(n,o0)}function oq(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=jt(),i=jt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zA(e,t.fromCache,r,i)}}class lq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class KF{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return c5()?8:b5(Fr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new lq;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(hd()<=Ut.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",fd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(hd()<=Ut.DEBUG&&$e("QueryEngine","Query:",fd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(hd()<=Ut.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",fd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pa(t))):fe.resolve())}ys(e,t){if(sk(t))return fe.resolve(null);let r=pa(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=AT(t,null,"F"),r=pa(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=jt(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,AT(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,i){return sk(t)||i.isEqual(vt.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?fe.resolve(null):(hd()<=Ut.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fd(t)),this.vs(e,a,t,lY(i,Zm)).next((o=>o)))}))}Ds(e,t){let r=new In(oF(e));return t.forEach(((i,s)=>{Jp(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return hd()<=Ut.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",fd(t)),this.ps.getDocumentsMatchingQuery(e,t,$s.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const $A="LocalStore",cq=3e8;class uq{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Wn(kt),this.xs=new jl((s=>Dh(s)),Zp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HF(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function YF(n,e,t,r){return new uq(n,e,t,r)}async function XF(n,e){const t=Nt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],o=[];let l=jt();for(const u of i){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function hq(n,e){const t=Nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,l,u,f){const d=u.batch,g=d.keys();let p=fe.resolve();return g.forEach((v=>{p=p.next((()=>f.getEntry(l,v))).next((x=>{const E=u.docVersions.get(v);yt(E!==null,48541),x.version.compareTo(E)<0&&(d.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),p.next((()=>o.mutationQueue.removeMutationBatch(l,d)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let l=jt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function qF(n){const e=Nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function fq(n,e){const t=Nt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((f,d)=>{const g=i.get(d);if(!g)return;o.push(t.Pi.removeMatchingKeys(s,f.removedDocuments,d).next((()=>t.Pi.addMatchingKeys(s,f.addedDocuments,d))));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Sr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),i=i.insert(d,p),(function(x,E,I){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=cq?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(g,p,f)&&o.push(t.Pi.updateTargetData(s,p))}));let l=Gs(),u=jt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))})),o.push(dq(s,a,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(vt.min())){const f=t.Pi.getLastRemoteSnapshotVersion(s).next((d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));o.push(f)}return fe.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Ms=i,s)))}function dq(n,e,t){let r=jt(),i=jt();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Gs();return t.forEach(((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(vt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):$e($A,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)})),{ks:a,qs:i}}))}function gq(n,e){const t=Nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=yh),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function mq(n,e){const t=Nt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,fe.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new fl(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function LT(n,e,t){const r=Nt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!pu(a))throw a;$e($A,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Dk(n,e,t){const r=Nt(n);let i=vt.min(),s=jt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,u,f){const d=Nt(l),g=d.xs.get(f);return g!==void 0?fe.resolve(d.Ms.get(g)):d.Pi.getTargetData(u,f)})(r,a,pa(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:vt.min(),t?s:jt()))).next((o=>(pq(r,eX(e),o),{documents:o,Qs:s})))))}function pq(n,e,t){let r=n.Os.get(e)||vt.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class Fk{constructor(){this.activeTargetIds=aX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZF{constructor(){this.Mo=new Fk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fk,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _q{Oo(e){}shutdown(){}}const Vk="ConnectivityMonitor";class jk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$e(Vk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$e(Vk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $1=null;function OT(){return $1===null?$1=(function(){return 268435456+Math.round(2147483648*Math.random())})():$1++,"0x"+$1.toString(16)}const X2="RestConnection",yq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===gx?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=OT(),o=this.zo(e,t.toUriEncodedString());$e(X2,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),f=ef(u);return this.Jo(e,o,l,r,f).then((d=>($e(X2,`Received RPC '${e}' ${a}: `,d),d)),(d=>{throw Lh(X2,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",r),d}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+R0})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=yq[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class vq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Si="WebChannelConnection";class Eq extends xq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=OT();return new Promise(((o,l)=>{const u=new y5;u.setWithCredentials(!0),u.listenOnce(x5.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case my.NO_ERROR:const d=u.getResponseJson();$e(Si,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case my.TIMEOUT:$e(Si,`RPC '${e}' ${a} timed out`),l(new et(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case my.HTTP_ERROR:const g=u.getStatus();if($e(Si,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p?.error;if(v&&v.status&&v.message){const x=(function(I){const T=I.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(T)>=0?T:Pe.UNKNOWN})(v.status);l(new et(x,v.message))}else l(new et(Pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new et(Pe.UNAVAILABLE,"Connection failed."));break;default:dt(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$e(Si,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(i);$e(Si,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",f,r,15)}))}T_(e,t,r){const i=OT(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=w5(),o=E5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const f=s.join("");$e(Si,`Creating RPC '${e}' stream ${i}: ${f}`,l);const d=a.createWebChannel(f,l);this.I_(d);let g=!1,p=!1;const v=new vq({Yo:E=>{p?$e(Si,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||($e(Si,`Opening RPC '${e}' stream ${i} transport.`),d.open(),g=!0),$e(Si,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},Zo:()=>d.close()}),x=(E,I,T)=>{E.listen(I,(M=>{try{T(M)}catch(k){setTimeout((()=>{throw k}),0)}}))};return x(d,Hg.EventType.OPEN,(()=>{p||($e(Si,`RPC '${e}' stream ${i} transport opened.`),v.o_())})),x(d,Hg.EventType.CLOSE,(()=>{p||(p=!0,$e(Si,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(d))})),x(d,Hg.EventType.ERROR,(E=>{p||(p=!0,Lh(Si,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),v.a_(new et(Pe.UNAVAILABLE,"The operation could not be completed")))})),x(d,Hg.EventType.MESSAGE,(E=>{if(!p){const I=E.data[0];yt(!!I,16349);const T=I,M=T?.error||T[0]?.error;if(M){$e(Si,`RPC '${e}' stream ${i} received error:`,M);const k=M.status;let L=(function(C){const b=yr[C];if(b!==void 0)return xF(b)})(k),z=M.message;L===void 0&&(L=Pe.INTERNAL,z="Unknown error status: "+k+" with message "+M.message),p=!0,v.a_(new et(L,z)),d.close()}else $e(Si,`RPC '${e}' stream ${i} received:`,I),v.u_(I)}})),x(o,v5.STAT_EVENT,(E=>{E.stat===dT.PROXY?$e(Si,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===dT.NOPROXY&&$e(Si,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function wq(){return typeof window<"u"?window:null}function Iy(){return typeof document<"u"?document:null}function nE(n){return new SX(n,!0)}class QF{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Gk="PersistentStream";class JF{constructor(e,t,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new QF(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(zi(t.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new et(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return $e(Gk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():($e(Gk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sq extends JF{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=AX(this.serializer,e),r=(function(s){if(!("targetChange"in s))return vt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?vt.min():a.readTime?Hi(a.readTime):vt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=PT(this.serializer),t.addTarget=(function(s,a){let o;const l=a.target;if(o=px(l)?{documents:RF(s,l)}:{query:CF(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=wF(s,a.resumeToken);const u=RT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(vt.min())>0){o.readTime=g0(s,a.snapshotVersion.toTimestamp());const u=RT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=CX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=PT(this.serializer),t.removeTarget=e,this.q_(t)}}class Tq extends JF{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=RX(e.writeResults,e.commitTime),r=Hi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=PT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>xx(this.serializer,r)))};this.q_(t)}}class Iq{}class Aq extends Iq{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new et(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,CT(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Pe.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,CT(t,r),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et(Pe.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Rq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zi(t),this.aa=!1):$e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Gh="RemoteStore";class Cq{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{rf(this)&&($e(Gh,"Restarting streams for network reachability change."),await(async function(l){const u=Nt(l);u.Ea.add(4),await t_(u),u.Ra.set("Unknown"),u.Ea.delete(4),await rE(u)})(this))}))})),this.Ra=new Rq(r,i)}}async function rE(n){if(rf(n))for(const e of n.da)await e(!0)}async function t_(n){for(const e of n.da)await e(!1)}function e6(n,e){const t=Nt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),YA(t)?KA(t):P0(t).O_()&&HA(t,e))}function WA(n,e){const t=Nt(n),r=P0(t);t.Ia.delete(e),r.O_()&&t6(t,e),t.Ia.size===0&&(r.O_()?r.L_():rf(t)&&t.Ra.set("Unknown"))}function HA(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}P0(n).Y_(e)}function t6(n,e){n.Va.Ue(e),P0(n).Z_(e)}function KA(n){n.Va=new xX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),P0(n).start(),n.Ra.ua()}function YA(n){return rf(n)&&!P0(n).x_()&&n.Ia.size>0}function rf(n){return Nt(n).Ea.size===0}function n6(n){n.Va=void 0}async function Pq(n){n.Ra.set("Online")}async function Mq(n){n.Ia.forEach(((e,t)=>{HA(n,e)}))}async function bq(n,e){n6(n),YA(n)?(n.Ra.ha(e),KA(n)):n.Ra.set("Unknown")}async function kq(n,e,t){if(n.Ra.set("Online"),e instanceof EF&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(n,e)}catch(r){$e(Gh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tx(n,r)}else if(e instanceof Sy?n.Va.Ze(e):e instanceof vF?n.Va.st(e):n.Va.tt(e),!t.isEqual(vt.min()))try{const r=await qF(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.Ia.get(u);f&&s.Ia.set(u,f.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,u)=>{const f=s.Ia.get(l);if(!f)return;s.Ia.set(l,f.withResumeToken(Sr.EMPTY_BYTE_STRING,f.snapshotVersion)),t6(s,l);const d=new fl(f.target,l,u,f.sequenceNumber);HA(s,d)})),s.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){$e(Gh,"Failed to raise snapshot:",r),await Tx(n,r)}}async function Tx(n,e,t){if(!pu(e))throw e;n.Ea.add(1),await t_(n),n.Ra.set("Offline"),t||(t=()=>qF(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{$e(Gh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await rE(n)}))}function r6(n,e){return e().catch((t=>Tx(n,t,e)))}async function n_(n){const e=Nt(n),t=ru(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yh;for(;Nq(e);)try{const i=await gq(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Lq(e,i)}catch(i){await Tx(e,i)}i6(e)&&s6(e)}function Nq(n){return rf(n)&&n.Ta.length<10}function Lq(n,e){n.Ta.push(e);const t=ru(n);t.O_()&&t.X_&&t.ea(e.mutations)}function i6(n){return rf(n)&&!ru(n).x_()&&n.Ta.length>0}function s6(n){ru(n).start()}async function Oq(n){ru(n).ra()}async function Dq(n){const e=ru(n);for(const t of n.Ta)e.ea(t.mutations)}async function Fq(n,e,t){const r=n.Ta.shift(),i=LA.from(r,e,t);await r6(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await n_(n)}async function Vq(n,e){e&&ru(n).X_&&await(async function(r,i){if((function(a){return pX(a)&&a!==Pe.ABORTED})(i.code)){const s=r.Ta.shift();ru(r).B_(),await r6(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await n_(r)}})(n,e),i6(n)&&s6(n)}async function Bk(n,e){const t=Nt(n);t.asyncQueue.verifyOperationInProgress(),$e(Gh,"RemoteStore received new credentials");const r=rf(t);t.Ea.add(3),await t_(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rE(t)}async function jq(n,e){const t=Nt(n);e?(t.Ea.delete(2),await rE(t)):e||(t.Ea.add(2),await t_(t),t.Ra.set("Unknown"))}function P0(n){return n.ma||(n.ma=(function(t,r,i){const s=Nt(t);return s.sa(),new Sq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Pq.bind(null,n),t_:Mq.bind(null,n),r_:bq.bind(null,n),H_:kq.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),YA(n)?KA(n):n.Ra.set("Unknown")):(await n.ma.stop(),n6(n))}))),n.ma}function ru(n){return n.fa||(n.fa=(function(t,r,i){const s=Nt(t);return s.sa(),new Tq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Oq.bind(null,n),r_:Vq.bind(null,n),ta:Dq.bind(null,n),na:Fq.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await n_(n)):(await n.fa.stop(),n.Ta.length>0&&($e(Gh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class XA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new XA(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qA(n,e){if(zi("AsyncQueue",`${e}: ${n}`),pu(n))return new et(Pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ld{static emptySet(e){return new Ld(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Kg(),this.sortedSet=new Wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ld)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ld;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Uk{constructor(){this.ga=new Wn(tt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):dt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class m0{constructor(e,t,r,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new m0(e,t,Ld.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Gq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Bq{constructor(){this.queries=zk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Nt(t),s=i.queries;i.queries=zk(),s.forEach(((a,o)=>{for(const l of o.Sa)l.onError(r)}))})(this,new et(Pe.ABORTED,"Firestore shutting down"))}}function zk(){return new jl((n=>aF(n)),Yv)}async function Uq(n,e){const t=Nt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Gq,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=qA(a,`Initialization of query '${fd(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&ZA(t)}async function zq(n,e){const t=Nt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $q(n,e){const t=Nt(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&ZA(t)}function Wq(n,e,t){const r=Nt(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function ZA(n){n.Ca.forEach((e=>{e.next()}))}var DT,$k;($k=DT||(DT={})).Ma="default",$k.Cache="cache";class Hq{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new m0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=m0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==DT.Cache}}class a6{constructor(e){this.key=e}}class o6{constructor(e){this.key=e}}class Kq{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jt(),this.mutatedKeys=jt(),this.eu=oF(e),this.tu=new Ld(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Uk,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,d)=>{const g=i.get(f),p=Jp(this.query,d)?d:null,v=!!g&&this.mutatedKeys.has(g.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;g&&p?g.data.isEqual(p.data)?v!==x&&(r.track({type:3,doc:p}),E=!0):this.su(g,p)||(r.track({type:2,doc:p}),E=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!g&&p?(r.track({type:0,doc:p}),E=!0):g&&!p&&(r.track({type:1,doc:g}),E=!0,(l||u)&&(o=!0)),E&&(p?(a=a.add(p),s=x?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,d)=>(function(p,v){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt(20277,{Rt:E})}};return x(p)-x(v)})(f.type,d.type)||this.eu(f.doc,d.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new m0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Uk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=jt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new o6(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new a6(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=jt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return m0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const QA="SyncEngine";class Yq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Xq{constructor(e){this.key=e,this.hu=!1}}class qq{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new jl((o=>aF(o)),Yv),this.Iu=new Map,this.Eu=new Set,this.du=new Wn(tt.comparator),this.Au=new Map,this.Ru=new GA,this.Vu={},this.mu=new Map,this.fu=jh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Zq(n,e,t=!0){const r=d6(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await l6(r,e,t,!0),i}async function Qq(n,e){const t=d6(n);await l6(t,e,!0,!1)}async function l6(n,e,t,r){const i=await mq(n.localStore,pa(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await Jq(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&e6(n.remoteStore,i),o}async function Jq(n,e,t,r,i){n.pu=(d,g,p)=>(async function(x,E,I,T){let M=E.view.ru(I);M.Cs&&(M=await Dk(x.localStore,E.query,!1).then((({documents:P})=>E.view.ru(P,M))));const k=T&&T.targetChanges.get(E.targetId),L=T&&T.targetMismatches.get(E.targetId)!=null,z=E.view.applyChanges(M,x.isPrimaryClient,k,L);return Hk(x,E.targetId,z.au),z.snapshot})(n,d,g,p);const s=await Dk(n.localStore,e,!0),a=new Kq(e,s.Qs),o=a.ru(s.documents),l=e_.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,l);Hk(n,t,u.au);const f=new Yq(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function eZ(n,e,t){const r=Nt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Yv(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await LT(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&WA(r.remoteStore,i.targetId),FT(r,i.targetId)})).catch(nf)):(FT(r,i.targetId),await LT(r.localStore,i.targetId,!0))}async function tZ(n,e){const t=Nt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),WA(t.remoteStore,r.targetId))}async function nZ(n,e,t){const r=g6(n);try{const i=await(function(a,o){const l=Nt(a),u=wn.now(),f=o.reduce(((p,v)=>p.add(v.key)),jt());let d,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let v=Gs(),x=jt();return l.Ns.getEntries(p,f).next((E=>{v=E,v.forEach(((I,T)=>{T.isValidDocument()||(x=x.add(I))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,v))).next((E=>{d=E;const I=[];for(const T of o){const M=gX(T,d.get(T.key).overlayedDocument);M!=null&&I.push(new Gl(T.key,M,Z5(M.value.mapValue),$i.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,I,o)})).next((E=>{g=E;const I=E.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(p,E.batchId,I)}))})).then((()=>({batchId:g.batchId,changes:cF(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new Wn(kt)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u})(r,i.batchId,t),await r_(r,i.changes),await n_(r.remoteStore)}catch(i){const s=qA(i,"Failed to persist write");t.reject(s)}}async function c6(n,e){const t=Nt(n);try{const r=await fq(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?yt(a.hu,14607):i.removedDocuments.size>0&&(yt(a.hu,42227),a.hu=!1))})),await r_(t,r,e)}catch(r){await nf(r)}}function Wk(n,e,t){const r=Nt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=Nt(a);l.onlineState=o;let u=!1;l.queries.forEach(((f,d)=>{for(const g of d.Sa)g.va(o)&&(u=!0)})),u&&ZA(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rZ(n,e,t){const r=Nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Wn(tt.comparator);a=a.insert(s,ar.newNoDocument(s,vt.min()));const o=jt().add(s),l=new Qv(vt.min(),new Map,new Wn(kt),a,o);await c6(r,l),r.du=r.du.remove(s),r.Au.delete(e),JA(r)}else await LT(r.localStore,e,!1).then((()=>FT(r,e,t))).catch(nf)}async function iZ(n,e){const t=Nt(n),r=e.batch.batchId;try{const i=await hq(t.localStore,e);h6(t,r,null),u6(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await r_(t,i)}catch(i){await nf(i)}}async function sZ(n,e,t){const r=Nt(n);try{const i=await(function(a,o){const l=Nt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,o).next((d=>(yt(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);h6(r,e,t),u6(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await r_(r,i)}catch(i){await nf(i)}}function u6(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function h6(n,e,t){const r=Nt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function FT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||f6(n,r)}))}function f6(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(WA(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),JA(n))}function Hk(n,e,t){for(const r of t)r instanceof a6?(n.Ru.addReference(r.key,e),aZ(n,r)):r instanceof o6?($e(QA,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||f6(n,r.key)):dt(19791,{wu:r})}function aZ(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||($e(QA,"New document in limbo: "+t),n.Eu.add(r),JA(n))}function JA(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new tt(cn.fromString(e)),r=n.fu.next();n.Au.set(r,new Xq(t)),n.du=n.du.insert(t,r),e6(n.remoteStore,new fl(pa(bA(t.path)),r,"TargetPurposeLimboResolution",ga.ce))}}async function r_(n,e,t){const r=Nt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,l)=>{a.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=zA.As(l.targetId,u);s.push(f)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(l,u){const f=Nt(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>fe.forEach(u,(g=>fe.forEach(g.Es,(p=>f.persistence.referenceDelegate.addReference(d,g.targetId,p))).next((()=>fe.forEach(g.ds,(p=>f.persistence.referenceDelegate.removeReference(d,g.targetId,p)))))))))}catch(d){if(!pu(d))throw d;$e($A,"Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const p=f.Ms.get(g),v=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(v);f.Ms=f.Ms.insert(g,x)}}})(r.localStore,s))}async function oZ(n,e){const t=Nt(n);if(!t.currentUser.isEqual(e)){$e(QA,"User change. New user:",e.toKey());const r=await XF(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((l=>{l.reject(new et(Pe.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await r_(t,r.Ls)}}function lZ(n,e){const t=Nt(n),r=t.Au.get(e);if(r&&r.hu)return jt().add(r.key);{let i=jt();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function d6(n){const e=Nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=c6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rZ.bind(null,e),e.Pu.H_=$q.bind(null,e.eventManager),e.Pu.yu=Wq.bind(null,e.eventManager),e}function g6(n){const e=Nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sZ.bind(null,e),e}class cp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nE(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return YF(this.persistence,new KF,e.initialUser,this.serializer)}Cu(e){return new BA(tE.mi,this.serializer)}Du(e){return new ZF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cp.provider={build:()=>new cp};class cZ extends cp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yt(this.persistence.referenceDelegate instanceof Sx,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new UF(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ai.withCacheSize(this.cacheSizeBytes):Ai.DEFAULT;return new BA((r=>Sx.mi(r,t)),this.serializer)}}class uZ extends cp{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await g6(this.xu.syncEngine),await n_(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return YF(this.persistence,new KF,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new UF(r,e.asyncQueue,t)}Mu(e,t){const r=new fY(t,this.persistence);return new hY(e.asyncQueue,r)}Cu(e){const t=oq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ai.withCacheSize(this.cacheSizeBytes):Ai.DEFAULT;return new UA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wq(),Iy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ZF}}class Ix{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oZ.bind(null,this.syncEngine),await jq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Bq})()}createDatastore(e){const t=nE(e.databaseInfo.databaseId),r=(function(s){return new Eq(s)})(e.databaseInfo);return(function(s,a,o,l){return new Aq(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,o){return new Cq(r,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>Wk(this.syncEngine,t,0)),(function(){return jk.v()?new jk:new _q})())}createSyncEngine(e,t){return(function(i,s,a,o,l,u,f){const d=new qq(i,s,a,o,l,u);return f&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Nt(t);$e(Gh,"RemoteStore shutting down."),r.Ea.add(5),await t_(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ix.provider={build:()=>new Ix};class hZ{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const iu="FirestoreClient";class fZ{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ui.UNAUTHENTICATED,this.clientId=vA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{$e(iu,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>($e(iu,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=qA(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function q2(n,e){n.asyncQueue.verifyOperationInProgress(),$e(iu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await XF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Kk(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dZ(n);$e(iu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Bk(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Bk(e.remoteStore,i))),n._onlineComponents=e}async function dZ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e(iu,"Using user provided OfflineComponentProvider");try{await q2(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Lh("Error using user provided cache. Falling back to memory cache: "+t),await q2(n,new cp)}}else $e(iu,"Using default OfflineComponentProvider"),await q2(n,new cZ(void 0));return n._offlineComponents}async function m6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($e(iu,"Using user provided OnlineComponentProvider"),await Kk(n,n._uninitializedComponentsProvider._online)):($e(iu,"Using default OnlineComponentProvider"),await Kk(n,new Ix))),n._onlineComponents}function gZ(n){return m6(n).then((e=>e.syncEngine))}async function mZ(n){const e=await m6(n),t=e.eventManager;return t.onListen=Zq.bind(null,e.syncEngine),t.onUnlisten=eZ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Qq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tZ.bind(null,e.syncEngine),t}function pZ(n,e,t={}){const r=new wl;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const f=new hZ({next:g=>{f.Nu(),a.enqueueAndForget((()=>zq(s,d))),g.fromCache&&l.source==="server"?u.reject(new et(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new Hq(o,f,{includeMetadataChanges:!0,qa:!0});return Uq(s,d)})(await mZ(n),n.asyncQueue,e,t,r))),r.promise}function p6(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Yk=new Map;const _6="firestore.googleapis.com",Xk=!0;class qk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new et(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_6,this.ssl=Xk}else this.host=e.host,this.ssl=e.ssl??Xk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$X)throw new et(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p6(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new et(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new et(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new et(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ZK;switch(r.type){case"firstParty":return new tY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Yk.get(t);r&&($e("ComponentProvider","Removing Datastore"),Yk.delete(t),r.terminate())})(this),Promise.resolve()}}function _Z(n,e,t,r={}){n=eu(n,iE);const i=ef(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;i&&(gA(`https://${o}`),mA("Firestore",!0)),s.host!==_6&&s.host!==o&&Lh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!bh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=ui.MOCK_USER;else{u=o5(r.mockUserToken,n._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new et(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ui(d)}n._authCredentials=new QK(new T5(u,f))}}class M0{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new M0(this.firestore,e,this._query)}}class Lr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lr(this.firestore,e,this._key)}toJSON(){return{type:Lr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Xp(t,Lr._jsonSchema))return new Lr(e,r||null,new tt(cn.fromString(t.referencePath)))}}Lr._jsonSchemaVersion="firestore/documentReference/1.0",Lr._jsonSchema={type:Er("string",Lr._jsonSchemaVersion),referencePath:Er("string")};class Yc extends M0{constructor(e,t,r){super(e,t,bA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lr(this.firestore,null,new tt(e))}withConverter(e){return new Yc(this.firestore,e,this._path)}}function Zk(n,e,...t){if(n=Qr(n),A5("collection","path",e),n instanceof iE){const r=cn.fromString(e,...t);return Gb(r),new Yc(n,null,r)}{if(!(n instanceof Lr||n instanceof Yc))throw new et(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return Gb(r),new Yc(n.firestore,null,r)}}function VT(n,e,...t){if(n=Qr(n),arguments.length===1&&(e=vA.newId()),A5("doc","path",e),n instanceof iE){const r=cn.fromString(e,...t);return jb(r),new Lr(n,null,new tt(r))}{if(!(n instanceof Lr||n instanceof Yc))throw new et(Pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return jb(r),new Lr(n.firestore,n instanceof Yc?n.converter:null,new tt(r))}}const Qk="AsyncQueue";class Jk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new QF(this,"async_queue_retry"),this._c=()=>{const r=Iy();r&&$e(Qk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Iy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Iy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new wl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!pu(e))throw e;$e(Qk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,zi("INTERNAL UNHANDLED ERROR: ",e3(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=XA.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&dt(47125,{Pc:e3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function e3(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class b0 extends iE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jk,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jk(e),this._firestoreClient=void 0,await e}}}function yZ(n,e){const t=typeof n=="object"?n:yA(),r=typeof n=="string"?n:gx,i=jv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=i5("firestore");s&&_Z(i,...s)}return i}function y6(n){if(n._terminated)throw new et(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||x6(n),n._firestoreClient}function x6(n){const e=n._freezeSettings(),t=(function(i,s,a,o){return new BY(i,s,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,p6(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new fZ(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function xZ(n,e){Lh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return vZ(n,Ix.provider,{build:r=>new uZ(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function vZ(n,e,t){if((n=eu(n,b0))._firestoreClient||n._terminated)throw new et(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new et(Pe.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},x6(n)}class ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ua(Sr.fromBase64String(e))}catch(t){throw new et(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ua(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ua._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xp(e,ua._jsonSchema))return ua.fromBase64String(e.bytes)}}ua._jsonSchemaVersion="firestore/bytes/1.0",ua._jsonSchema={type:Er("string",ua._jsonSchemaVersion),bytes:Er("string")};class sE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new et(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class eR{constructor(e){this._methodName=e}}class Mo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new et(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new et(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mo._jsonSchemaVersion}}static fromJSON(e){if(Xp(e,Mo._jsonSchema))return new Mo(e.latitude,e.longitude)}}Mo._jsonSchemaVersion="firestore/geoPoint/1.0",Mo._jsonSchema={type:Er("string",Mo._jsonSchemaVersion),latitude:Er("number"),longitude:Er("number")};class bo{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xp(e,bo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bo(e.vectorValues);throw new et(Pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bo._jsonSchemaVersion="firestore/vectorValue/1.0",bo._jsonSchema={type:Er("string",bo._jsonSchemaVersion),vectorValues:Er("object")};const EZ=/^__.*__$/;class wZ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Gl(e,this.data,this.fieldMask,t,this.fieldTransforms):new C0(e,this.data,t,this.fieldTransforms)}}class v6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Gl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function E6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt(40011,{Ac:n})}}class tR{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tR({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ax(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(E6(this.Ac)&&EZ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SZ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nE(e)}Cc(e,t,r,i=!1){return new tR({Ac:e,methodName:t,Dc:r,path:Qn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nR(n){const e=n._freezeSettings(),t=nE(n._databaseId);return new SZ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TZ(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);rR("Data must be an object, but it was:",a,r);const o=w6(r,a);let l,u;if(s.merge)l=new hs(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const d of s.mergeFields){const g=jT(e,d,t);if(!a.contains(g))throw new et(Pe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);T6(f,g)||f.push(g)}l=new hs(f),u=a.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=a.fieldTransforms;return new wZ(new Ci(o),l,u)}class aE extends eR{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aE}}function IZ(n,e,t,r){const i=n.Cc(1,e,t);rR("Data must be an object, but it was:",i,r);const s=[],a=Ci.empty();_u(r,((l,u)=>{const f=iR(e,l,t);u=Qr(u);const d=i.yc(f);if(u instanceof aE)s.push(f);else{const g=i_(u,d);g!=null&&(s.push(f),a.set(f,g))}}));const o=new hs(s);return new v6(a,o,i.fieldTransforms)}function AZ(n,e,t,r,i,s){const a=n.Cc(1,e,t),o=[jT(e,r,t)],l=[i];if(s.length%2!=0)throw new et(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(jT(e,s[g])),l.push(s[g+1]);const u=[],f=Ci.empty();for(let g=o.length-1;g>=0;--g)if(!T6(u,o[g])){const p=o[g];let v=l[g];v=Qr(v);const x=a.yc(p);if(v instanceof aE)u.push(p);else{const E=i_(v,x);E!=null&&(u.push(p),f.set(p,E))}}const d=new hs(u);return new v6(f,d,a.fieldTransforms)}function RZ(n,e,t,r=!1){return i_(t,n.Cc(r?4:3,e))}function i_(n,e){if(S6(n=Qr(n)))return rR("Unsupported field value:",e,n),w6(n,e);if(n instanceof eR)return(function(r,i){if(!E6(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const o of r){let l=i_(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Qr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=wn.fromDate(r);return{timestampValue:g0(i.serializer,s)}}if(r instanceof wn){const s=new wn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:g0(i.serializer,s)}}if(r instanceof Mo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ua)return{bytesValue:wF(i.serializer,r._byteString)};if(r instanceof Lr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:FA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bo)return(function(a,o){return{mapValue:{fields:{[CA]:{stringValue:PA},[l0]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return kA(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Gv(r)}`)})(n,e)}function w6(n,e){const t={};return U5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_u(n,((r,i)=>{const s=i_(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function S6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wn||n instanceof Mo||n instanceof ua||n instanceof Lr||n instanceof eR||n instanceof bo)}function rR(n,e,t){if(!S6(t)||!R5(t)){const r=Gv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function jT(n,e,t){if((e=Qr(e))instanceof sE)return e._internalPath;if(typeof e=="string")return iR(n,e);throw Ax("Field path arguments must be of type string or ",n,!1,void 0,t)}const CZ=new RegExp("[~\\*/\\[\\]]");function iR(n,e,t){if(e.search(CZ)>=0)throw Ax(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sE(...e.split("."))._internalPath}catch{throw Ax(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ax(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new et(Pe.INVALID_ARGUMENT,o+n+l)}function T6(n,e){return n.some((t=>t.isEqual(e)))}class I6{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Lr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PZ extends I6{data(){return super.data()}}function sR(n,e){return typeof e=="string"?iR(n,e):e instanceof sE?e._internalPath:e._delegate._internalPath}function MZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new et(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aR{}class bZ extends aR{}function kZ(n,e,...t){let r=[];e instanceof aR&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((l=>l instanceof oR)).length,o=s.filter((l=>l instanceof oE)).length;if(a>1||a>0&&o>0)throw new et(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class oE extends bZ{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new oE(e,t,r)}_apply(e){const t=this._parse(e);return A6(e._query,t),new M0(e.firestore,e.converter,IT(e._query,t))}_parse(e){const t=nR(e.firestore);return(function(s,a,o,l,u,f,d){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new et(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){n3(d,f);const v=[];for(const x of d)v.push(t3(l,s,x));g={arrayValue:{values:v}}}else g=t3(l,s,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||n3(d,f),g=RZ(o,a,d,f==="in"||f==="not-in");return zt.create(u,f,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function NZ(n,e,t){const r=e,i=sR("where",n);return oE._create(i,r,t)}class oR extends aR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oR(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)A6(a,l),a=IT(a,l)})(e._query,t),new M0(e.firestore,e.converter,IT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function t3(n,e,t){if(typeof(t=Qr(t))=="string"){if(t==="")throw new et(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sF(e)&&t.indexOf("/")!==-1)throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!tt.isDocumentKey(r))throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sp(n,new tt(r))}if(t instanceof Lr)return sp(n,t._key);throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gv(t)}.`)}function n3(n,e){if(!Array.isArray(n)||n.length===0)throw new et(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A6(n,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new et(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class LZ{convertValue(e,t="none"){switch(tu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw dt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return _u(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[l0].arrayValue?.values?.map((r=>$n(r.doubleValue)));return new bo(t)}convertGeoPoint(e){return new Mo($n(e.latitude),$n(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Hv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){const t=bl(e);return new wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);yt(kF(r),9688,{name:e});const i=new Oh(r.get(1),r.get(3)),s=new tt(r.popFirst(5));return i.isEqual(t)||zi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function OZ(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class W1{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Od extends I6{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ay(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Od._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Od._jsonSchemaVersion="firestore/documentSnapshot/1.0",Od._jsonSchema={type:Er("string",Od._jsonSchemaVersion),bundleSource:Er("string","DocumentSnapshot"),bundleName:Er("string"),bundle:Er("string")};class Ay extends Od{data(e={}){return super.data(e)}}class Dd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new W1(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Ay(this._firestore,this._userDataWriter,r.key,r,new W1(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new et(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new Ay(i._firestore,i._userDataWriter,o.doc.key,o.doc,new W1(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new Ay(i._firestore,i._userDataWriter,o.doc.key,o.doc,new W1(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:DZ(o.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Dd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt(61501,{type:n})}}Dd._jsonSchemaVersion="firestore/querySnapshot/1.0",Dd._jsonSchema={type:Er("string",Dd._jsonSchemaVersion),bundleSource:Er("string","QuerySnapshot"),bundleName:Er("string"),bundle:Er("string")};class FZ extends LZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new ua(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lr(this.firestore,null,t)}}function VZ(n){n=eu(n,M0);const e=eu(n.firestore,b0),t=y6(e),r=new FZ(e);return MZ(n._query),pZ(t,n._query).then((i=>new Dd(e,r,n,i)))}function jZ(n,e,t,...r){n=eu(n,Lr);const i=eu(n.firestore,b0),s=nR(i);let a;return a=typeof(e=Qr(e))=="string"||e instanceof sE?AZ(s,"updateDoc",n._key,e,t,r):IZ(s,"updateDoc",n._key,e),lR(i,[a.toMutation(n._key,$i.exists(!0))])}function GZ(n){return lR(eu(n.firestore,b0),[new Zv(n._key,$i.none())])}function BZ(n,e){const t=eu(n.firestore,b0),r=VT(n),i=OZ(n.converter,e);return lR(t,[TZ(nR(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,$i.exists(!1))]).then((()=>r))}function lR(n,e){return(function(r,i){const s=new wl;return r.asyncQueue.enqueueAndForget((async()=>nZ(await gZ(r),i,s))),s.promise})(y6(n),e)}(function(e,t=!0){(function(i){R0=i})(tf),kh(new Jc("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new b0(new JK(r.getProvider("auth-internal")),new nY(a,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new et(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oh(u.options.projectId,f)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),Po(Ob,Db,e),Po(Ob,Db,"esm2020")})();var UZ="firebase",zZ="12.7.0";Po(UZ,zZ,"app");function R6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $Z=R6,C6=new Kp("auth","Firebase",R6());const Rx=new pA("@firebase/auth");function WZ(n,...e){Rx.logLevel<=Ut.WARN&&Rx.warn(`Auth (${tf}): ${n}`,...e)}function Ry(n,...e){Rx.logLevel<=Ut.ERROR&&Rx.error(`Auth (${tf}): ${n}`,...e)}function Nl(n,...e){throw cR(n,...e)}function ko(n,...e){return cR(n,...e)}function P6(n,e,t){const r={...$Z(),[e]:t};return new Kp("auth","Firebase",r).create(e,{appName:n.name})}function Xc(n){return P6(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cR(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return C6.create(n,...e)}function Mt(n,e,...t){if(!n)throw cR(e,...t)}function dl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ry(e),new Error(e)}function Ll(n,e){n||dl(e)}function GT(){return typeof self<"u"&&self.location?.href||""}function HZ(){return r3()==="http:"||r3()==="https:"}function r3(){return typeof self<"u"&&self.location?.protocol||null}function KZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HZ()||kH()||"connection"in navigator)?navigator.onLine:!0}function YZ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class s_{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ll(t>e,"Short delay should be less than long delay!"),this.isMobile=MH()||NH()}get(){return KZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function uR(n,e){Ll(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class M6{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const XZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const qZ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZZ=new s_(3e4,6e4);function lE(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function k0(n,e,t,r,i={}){return b6(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Yp({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...s};return bH()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&ef(n.emulatorConfig.host)&&(u.credentials="include"),M6.fetch()(await N6(n,n.config.apiHost,t,o),u)})}async function b6(n,e,t){n._canInitEmulator=!1;const r={...XZ,...e};try{const i=new QZ(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw H1(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw H1(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw H1(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw H1(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw P6(n,f,u);Nl(n,f)}}catch(i){if(i instanceof $o)throw i;Nl(n,"network-request-failed",{message:String(i)})}}async function k6(n,e,t,r,i={}){const s=await k0(n,e,t,r,i);return"mfaPendingCredential"in s&&Nl(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function N6(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?uR(n.config,i):`${n.config.apiScheme}://${i}`;return qZ.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class QZ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ko(this.auth,"network-request-failed")),ZZ.get())})}}function H1(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ko(n,e,r);return i.customData._tokenResponse=t,i}async function JZ(n,e){return k0(n,"POST","/v1/accounts:delete",e)}async function Cx(n,e){return k0(n,"POST","/v1/accounts:lookup",e)}function mm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eQ(n,e=!1){const t=Qr(n),r=await t.getIdToken(e),i=hR(r);Mt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:mm(Z2(i.auth_time)),issuedAtTime:mm(Z2(i.iat)),expirationTime:mm(Z2(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Z2(n){return Number(n)*1e3}function hR(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ry("JWT malformed, contained fewer than 3 sections"),null;try{const i=t5(t);return i?JSON.parse(i):(Ry("Failed to decode base64 JWT payload"),null)}catch(i){return Ry("Caught error parsing JWT payload as JSON",i?.toString()),null}}function i3(n){const e=hR(n);return Mt(e,"internal-error"),Mt(typeof e.exp<"u","internal-error"),Mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function up(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof $o&&tQ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function tQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class nQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class BT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mm(this.lastLoginAt),this.creationTime=mm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Px(n){const e=n.auth,t=await n.getIdToken(),r=await up(n,Cx(e,{idToken:t}));Mt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?L6(i.providerUserInfo):[],a=iQ(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!a?.length,u=o?l:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new BT(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,f)}async function rQ(n){const e=Qr(n);await Px(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function L6(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function sQ(n,e){const t=await b6(n,{},async()=>{const r=Yp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await N6(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&ef(n.emulatorConfig.host)&&(l.credentials="include"),M6.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aQ(n,e){return k0(n,"POST","/v2/accounts:revokeToken",lE(n,e))}class Fd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Mt(e.idToken,"internal-error"),Mt(typeof e.idToken<"u","internal-error"),Mt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Mt(e.length!==0,"internal-error");const t=i3(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await sQ(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Fd;return r&&(Mt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Mt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Mt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fd,this.toJSON())}_performRefresh(){return dl("not implemented")}}function Ec(n,e){Mt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ua{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new nQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new BT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await up(this,this.stsTokenManager.getToken(this.auth,e));return Mt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eQ(this,e)}reload(){return rQ(this)}_assign(e){this!==e&&(Mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ua({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Px(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ca(this.auth.app))return Promise.reject(Xc(this.auth));const e=await this.getIdToken();return await up(this,JZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:d,emailVerified:g,isAnonymous:p,providerData:v,stsTokenManager:x}=t;Mt(d&&x,e,"internal-error");const E=Fd.fromJSON(this.name,x);Mt(typeof d=="string",e,"internal-error"),Ec(r,e.name),Ec(i,e.name),Mt(typeof g=="boolean",e,"internal-error"),Mt(typeof p=="boolean",e,"internal-error"),Ec(s,e.name),Ec(a,e.name),Ec(o,e.name),Ec(l,e.name),Ec(u,e.name),Ec(f,e.name);const I=new Ua({uid:d,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:u,lastLoginAt:f});return v&&Array.isArray(v)&&(I.providerData=v.map(T=>({...T}))),l&&(I._redirectEventId=l),I}static async _fromIdTokenResponse(e,t,r=!1){const i=new Fd;i.updateFromServerResponse(t);const s=new Ua({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Px(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Mt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?L6(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new Fd;o.updateFromIdToken(r);const l=new Ua({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new BT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const s3=new Map;function gl(n){Ll(n instanceof Function,"Expected a class definition");let e=s3.get(n);return e?(Ll(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,s3.set(n,e),e)}class O6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}O6.type="NONE";const a3=O6;function Cy(n,e,t){return`firebase:${n}:${e}:${t}`}class Vd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Cy(this.userKey,i.apiKey,s),this.fullPersistenceKey=Cy("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Cx(this.auth,{idToken:e}).catch(()=>{});return t?Ua._fromGetAccountInfoResponse(this.auth,t,e):null}return Ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Vd(gl(a3),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||gl(a3);const a=Cy(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const f=await u._get(a);if(f){let d;if(typeof f=="string"){const g=await Cx(e,{idToken:f}).catch(()=>{});if(!g)break;d=await Ua._fromGetAccountInfoResponse(e,g,f)}else d=Ua._fromJSON(e,f);u!==s&&(o=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Vd(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Vd(s,e,r))}}function o3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(B6(e))return"Blackberry";if(U6(e))return"Webos";if(F6(e))return"Safari";if((e.includes("chrome/")||V6(e))&&!e.includes("edge/"))return"Chrome";if(G6(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function D6(n=Fr()){return/firefox\//i.test(n)}function F6(n=Fr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V6(n=Fr()){return/crios\//i.test(n)}function j6(n=Fr()){return/iemobile/i.test(n)}function G6(n=Fr()){return/android/i.test(n)}function B6(n=Fr()){return/blackberry/i.test(n)}function U6(n=Fr()){return/webos/i.test(n)}function fR(n=Fr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oQ(n=Fr()){return fR(n)&&!!window.navigator?.standalone}function lQ(){return LH()&&document.documentMode===10}function z6(n=Fr()){return fR(n)||G6(n)||U6(n)||B6(n)||/windows phone/i.test(n)||j6(n)}function $6(n,e=[]){let t;switch(n){case"Browser":t=o3(Fr());break;case"Worker":t=`${o3(Fr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tf}/${r}`}class cQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function uQ(n,e={}){return k0(n,"GET","/v2/passwordPolicy",lE(n,e))}const hQ=6;class fQ{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hQ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class dQ{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l3(this),this.idTokenSubscription=new l3(this),this.beforeStateQueue=new cQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gl(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Cx(this,{idToken:e}),r=await Ua._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ca(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!s||s===a)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Px(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YZ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ca(this.app))return Promise.reject(Xc(this));const t=e?Qr(e):null;return t&&Mt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ca(this.app)?Promise.reject(Xc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ca(this.app)?Promise.reject(Xc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uQ(this),t=new fQ(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kp("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await aQ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gl(e)||this._popupRedirectResolver;Mt(t,this,"argument-error"),this.redirectPersistenceManager=await Vd.create(this,[gl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Mt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ca(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&WZ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cE(n){return Qr(n)}class l3{constructor(e){this.auth=e,this.observer=null,this.addObserver=GH(t=>this.observer=t)}get next(){return Mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let dR={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gQ(n){dR=n}function mQ(n){return dR.loadJS(n)}function pQ(){return dR.gapiScript}function _Q(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function yQ(n,e){const t=jv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(bh(s,e??{}))return i;Nl(i,"already-initialized")}return t.initialize({options:e})}function xQ(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function vQ(n,e,t){const r=cE(n);Mt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=W6(e),{host:a,port:o}=EQ(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},f=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Mt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Mt(bh(u,r.config.emulator)&&bh(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,ef(a)?(gA(`${s}//${a}${l}`),mA("Auth",!0)):wQ()}function W6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function EQ(n){const e=W6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:c3(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:c3(a)}}}function c3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function wQ(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class H6{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dl("not implemented")}_getIdTokenResponse(e){return dl("not implemented")}_linkToIdToken(e,t){return dl("not implemented")}_getReauthenticationResolver(e){return dl("not implemented")}}async function jd(n,e){return k6(n,"POST","/v1/accounts:signInWithIdp",lE(n,e))}const SQ="http://localhost";class Bh extends H6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Bh(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return jd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,jd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jd(e,t)}buildRequest(){const e={requestUri:SQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yp(t)}return e}}class K6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class a_ extends K6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cc extends a_{constructor(){super("facebook.com")}static credential(e){return Bh._fromParams({providerId:Cc.PROVIDER_ID,signInMethod:Cc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cc.credentialFromTaggedObject(e)}static credentialFromError(e){return Cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cc.credential(e.oauthAccessToken)}catch{return null}}}Cc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cc.PROVIDER_ID="facebook.com";class Pc extends a_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bh._fromParams({providerId:Pc.PROVIDER_ID,signInMethod:Pc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pc.credentialFromTaggedObject(e)}static credentialFromError(e){return Pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Pc.credential(t,r)}catch{return null}}}Pc.GOOGLE_SIGN_IN_METHOD="google.com";Pc.PROVIDER_ID="google.com";class Mc extends a_{constructor(){super("github.com")}static credential(e){return Bh._fromParams({providerId:Mc.PROVIDER_ID,signInMethod:Mc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mc.credentialFromTaggedObject(e)}static credentialFromError(e){return Mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mc.credential(e.oauthAccessToken)}catch{return null}}}Mc.GITHUB_SIGN_IN_METHOD="github.com";Mc.PROVIDER_ID="github.com";class bc extends a_{constructor(){super("twitter.com")}static credential(e,t){return Bh._fromParams({providerId:bc.PROVIDER_ID,signInMethod:bc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bc.credentialFromTaggedObject(e)}static credentialFromError(e){return bc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bc.credential(t,r)}catch{return null}}}bc.TWITTER_SIGN_IN_METHOD="twitter.com";bc.PROVIDER_ID="twitter.com";async function TQ(n,e){return k6(n,"POST","/v1/accounts:signUp",lE(n,e))}class su{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ua._fromIdTokenResponse(e,r,i),a=u3(r);return new su({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=u3(r);return new su({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function u3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function IQ(n){if(ca(n.app))return Promise.reject(Xc(n));const e=cE(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new su({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await TQ(e,{returnSecureToken:!0}),r=await su._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Mx extends $o{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mx.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Mx(e,t,r,i)}}function Y6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Mx._fromErrorAndOperation(n,s,e,r):s})}async function AQ(n,e,t=!1){const r=await up(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return su._forOperation(n,"link",r)}async function RQ(n,e,t=!1){const{auth:r}=n;if(ca(r.app))return Promise.reject(Xc(r));const i="reauthenticate";try{const s=await up(n,Y6(r,i,e,n),t);Mt(s.idToken,r,"internal-error");const a=hR(s.idToken);Mt(a,r,"internal-error");const{sub:o}=a;return Mt(n.uid===o,r,"user-mismatch"),su._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Nl(r,"user-mismatch"),s}}async function CQ(n,e,t=!1){if(ca(n.app))return Promise.reject(Xc(n));const r="signIn",i=await Y6(n,r,e),s=await su._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function PQ(n,e,t,r){return Qr(n).onIdTokenChanged(e,t,r)}function MQ(n,e,t){return Qr(n).beforeAuthStateChanged(e,t)}function bQ(n,e,t,r){return Qr(n).onAuthStateChanged(e,t,r)}function kQ(n){return Qr(n).signOut()}const bx="__sak";class X6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bx,"1"),this.storage.removeItem(bx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const NQ=1e3,LQ=10;class q6 extends X6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);lQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,LQ):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},NQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}q6.type="LOCAL";const OQ=q6;class Z6 extends X6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Z6.type="SESSION";const Q6=Z6;function DQ(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class uE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new uE(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await DQ(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uE.receivers=[];function gR(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class FQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=gR("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function No(){return window}function VQ(n){No().location.href=n}function J6(){return typeof No().WorkerGlobalScope<"u"&&typeof No().importScripts=="function"}async function jQ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GQ(){return navigator?.serviceWorker?.controller||null}function BQ(){return J6()?self:null}const e8="firebaseLocalStorageDb",UQ=1,kx="firebaseLocalStorage",t8="fbase_key";class o_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hE(n,e){return n.transaction([kx],e?"readwrite":"readonly").objectStore(kx)}function zQ(){const n=indexedDB.deleteDatabase(e8);return new o_(n).toPromise()}function UT(){const n=indexedDB.open(e8,UQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(kx,{keyPath:t8})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(kx)?e(r):(r.close(),await zQ(),e(await UT()))})})}async function h3(n,e,t){const r=hE(n,!0).put({[t8]:e,value:t});return new o_(r).toPromise()}async function $Q(n,e){const t=hE(n,!1).get(e),r=await new o_(t).toPromise();return r===void 0?null:r.value}function f3(n,e){const t=hE(n,!0).delete(e);return new o_(t).toPromise()}const WQ=800,HQ=3;class n8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>HQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uE._getInstance(BQ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await jQ(),!this.activeServiceWorker)return;this.sender=new FQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await UT();return await h3(e,bx,"1"),await f3(e,bx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>h3(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>$Q(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>f3(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=hE(i,!1).getAll();return new o_(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n8.type="LOCAL";const KQ=n8;new s_(3e4,6e4);function YQ(n,e){return e?gl(e):(Mt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class mR extends H6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XQ(n){return CQ(n.auth,new mR(n),n.bypassAuthState)}function qQ(n){const{auth:e,user:t}=n;return Mt(t,e,"internal-error"),RQ(t,new mR(n),n.bypassAuthState)}async function ZQ(n){const{auth:e,user:t}=n;return Mt(t,e,"internal-error"),AQ(t,new mR(n),n.bypassAuthState)}class r8{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XQ;case"linkViaPopup":case"linkViaRedirect":return ZQ;case"reauthViaPopup":case"reauthViaRedirect":return qQ;default:Nl(this.auth,"internal-error")}}resolve(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QQ=new s_(2e3,1e4);class vd extends r8{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,vd.currentPopupAction&&vd.currentPopupAction.cancel(),vd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Mt(e,this.auth,"internal-error"),e}async onExecution(){Ll(this.filter.length===1,"Popup operations only handle one event");const e=gR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ko(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ko(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vd.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ko(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QQ.get())};e()}}vd.currentPopupAction=null;const JQ="pendingRedirect",Py=new Map;class eJ extends r8{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Py.get(this.auth._key());if(!e){try{const r=await tJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Py.set(this.auth._key(),e)}return this.bypassAuthState||Py.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tJ(n,e){const t=iJ(e),r=rJ(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function nJ(n,e){Py.set(n._key(),e)}function rJ(n){return gl(n._redirectPersistence)}function iJ(n){return Cy(JQ,n.config.apiKey,n.name)}async function sJ(n,e,t=!1){if(ca(n.app))return Promise.reject(Xc(n));const r=cE(n),i=YQ(r,e),a=await new eJ(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const aJ=600*1e3;class oJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!i8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ko(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(d3(e))}saveEventToCache(e){this.cachedEventUids.add(d3(e)),this.lastProcessedEventTime=Date.now()}}function d3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function i8({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function lJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i8(n);default:return!1}}async function cJ(n,e={}){return k0(n,"GET","/v1/projects",e)}const uJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hJ=/^https?/;async function fJ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cJ(n);for(const t of e)try{if(dJ(t))return}catch{}Nl(n,"unauthorized-domain")}function dJ(n){const e=GT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!hJ.test(t))return!1;if(uJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const gJ=new s_(3e4,6e4);function g3(){const n=No().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mJ(n){return new Promise((e,t)=>{function r(){g3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g3(),t(ko(n,"network-request-failed"))},timeout:gJ.get()})}if(No().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(No().gapi?.load)r();else{const i=_Q("iframefcb");return No()[i]=()=>{gapi.load?r():t(ko(n,"network-request-failed"))},mQ(`${pQ()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw My=null,e})}let My=null;function pJ(n){return My=My||mJ(n),My}const _J=new s_(5e3,15e3),yJ="__/auth/iframe",xJ="emulator/auth/iframe",vJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wJ(n){const e=n.config;Mt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?uR(e,xJ):`https://${n.config.authDomain}/${yJ}`,r={apiKey:e.apiKey,appName:n.name,v:tf},i=EJ.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Yp(r).slice(1)}`}async function SJ(n){const e=await pJ(n),t=No().gapi;return Mt(t,n,"internal-error"),e.open({where:document.body,url:wJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vJ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ko(n,"network-request-failed"),o=No().setTimeout(()=>{s(a)},_J.get());function l(){No().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}const TJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IJ=500,AJ=600,RJ="_blank",CJ="http://localhost";class m3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PJ(n,e,t,r=IJ,i=AJ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...TJ,width:r.toString(),height:i.toString(),top:s,left:a},u=Fr().toLowerCase();t&&(o=V6(u)?RJ:t),D6(u)&&(e=e||CJ,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[p,v])=>`${g}${p}=${v},`,"");if(oQ(u)&&o!=="_self")return MJ(e||"",o),new m3(null);const d=window.open(e||"",o,f);Mt(d,n,"popup-blocked");try{d.focus()}catch{}return new m3(d)}function MJ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const bJ="__/auth/handler",kJ="emulator/auth/handler",NJ=encodeURIComponent("fac");async function p3(n,e,t,r,i,s){Mt(n.config.authDomain,n,"auth-domain-config-required"),Mt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:tf,eventId:i};if(e instanceof K6){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",jH(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))a[f]=d}if(e instanceof a_){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await n._getAppCheckToken(),u=l?`#${NJ}=${encodeURIComponent(l)}`:"";return`${LJ(n)}?${Yp(o).slice(1)}${u}`}function LJ({config:n}){return n.emulator?uR(n,kJ):`https://${n.authDomain}/${bJ}`}const Q2="webStorageSupport";class OJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q6,this._completeRedirectFn=sJ,this._overrideRedirectResult=nJ}async _openPopup(e,t,r,i){Ll(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await p3(e,t,r,GT(),i);return PJ(e,s,gR())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await p3(e,t,r,GT(),i);return VQ(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ll(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await SJ(e),r=new oJ(e);return t.register("authEvent",i=>(Mt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Q2,{type:Q2},i=>{const s=i?.[0]?.[Q2];s!==void 0&&t(!!s),Nl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return z6()||F6()||fR()}}const DJ=OJ;var _3="@firebase/auth",y3="1.12.0";class FJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function VJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jJ(n){kh(new Jc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Mt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$6(n)},u=new dQ(r,i,s,l);return xQ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),kh(new Jc("auth-internal",e=>{const t=cE(e.getProvider("auth").getImmediate());return(r=>new FJ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Po(_3,y3,VJ(n)),Po(_3,y3,"esm2020")}const GJ=300,BJ=a5("authIdTokenMaxAge")||GJ;let x3=null;const UJ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>BJ)return;const i=t?.token;x3!==i&&(x3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zJ(n=yA()){const e=jv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=yQ(n,{popupRedirectResolver:DJ,persistence:[KQ,OQ,Q6]}),r=a5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=UJ(s.toString());MQ(t,a,()=>a(t.currentUser)),PQ(t,o=>a(o))}}const i=r5("auth");return i&&vQ(t,`http://${i}`),t}function $J(){return document.getElementsByTagName("head")?.[0]??document}gQ({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ko("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",$J().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jJ("Browser");const s8="firebasestorage.googleapis.com",WJ="storageBucket",HJ=120*1e3,KJ=600*1e3;class Wo extends $o{constructor(e,t,r=0){super(J2(e),`Firebase Storage: ${t} (${J2(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wo.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return J2(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jo;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jo||(jo={}));function J2(n){return"storage/"+n}function YJ(){const n="An unknown error occurred, please check the error payload for server response.";return new Wo(jo.UNKNOWN,n)}function XJ(){return new Wo(jo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qJ(){return new Wo(jo.CANCELED,"User canceled the upload/download.")}function ZJ(n){return new Wo(jo.INVALID_URL,"Invalid URL '"+n+"'.")}function QJ(n){return new Wo(jo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function v3(n){return new Wo(jo.INVALID_ARGUMENT,n)}function a8(){return new Wo(jo.APP_DELETED,"The Firebase app was deleted.")}function JJ(n){return new Wo(jo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class za{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=za.makeFromUrl(e,t)}catch{return new za(e,"")}if(r.path==="")return r;throw QJ(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(k){k.path_=decodeURIComponent(k.path)}const f="v[A-Za-z0-9_]+",d=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${f}/b/${i}/o${g}`,"i"),v={bucket:1,path:3},x=t===s8?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",I=new RegExp(`^https?://${x}/${i}/${E}`,"i"),M=[{regex:o,indices:l,postModify:s},{regex:p,indices:v,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let k=0;k<M.length;k++){const L=M[k],z=L.regex.exec(e);if(z){const P=z[L.indices.bucket];let C=z[L.indices.path];C||(C=""),r=new za(P,C),L.postModify(r);break}}if(r==null)throw ZJ(e);return r}}class eee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tee(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function f(...E){u||(u=!0,e.apply(null,E))}function d(E){i=setTimeout(()=>{i=null,n(p,l())},E)}function g(){s&&clearTimeout(s)}function p(E,...I){if(u){g();return}if(E){g(),f.call(null,E,...I);return}if(l()||a){g(),f.call(null,E,...I);return}r<64&&(r*=2);let M;o===1?(o=2,M=0):M=(r+Math.random())*1e3,d(M)}let v=!1;function x(E){v||(v=!0,g(),!u&&(i!==null?(E||(o=2),clearTimeout(i),d(0)):E||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,x(!0)},t),x}function nee(n){n(!1)}function ree(n){return n!==void 0}function E3(n,e,t,r){if(r<e)throw v3(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw v3(`Invalid value for '${n}'. Expected ${t} or less.`)}function iee(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Nx;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Nx||(Nx={}));function see(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class aee{constructor(e,t,r,i,s,a,o,l,u,f,d,g=!0,p=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=d,this.retry=g,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,x)=>{this.resolve_=v,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new K1(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Nx.NO_ERROR,l=s.getStatus();if(!o||see(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Nx.ABORT;r(!1,new K1(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new K1(u,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());ree(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=YJ();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?a8():qJ();a(l)}else{const l=XJ();a(l)}};this.canceled_?t(!1,new K1(!1,null,!0)):this.backoffId_=tee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class K1{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function oee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function lee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function uee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function hee(n,e,t,r,i,s,a=!0,o=!1){const l=iee(n.urlParams),u=n.url+l,f=Object.assign({},n.headers);return cee(f,e),oee(f,t),lee(f,s),uee(f,r),new aee(u,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,o)}function fee(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dee(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class Lx{constructor(e,t){this._service=e,t instanceof za?this._location=t:this._location=za.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lx(e,t)}get root(){const e=new za(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dee(this._location.path)}get storage(){return this._service}get parent(){const e=fee(this._location.path);if(e===null)return null;const t=new za(this._location.bucket,e);return new Lx(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw JJ(e)}}function w3(n,e){const t=e?.[WJ];return t==null?null:za.makeFromBucketSpec(t,n)}function gee(n,e,t,r={}){n.host=`${e}:${t}`;const i=ef(e);i&&(gA(`https://${n.host}/b`),mA("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:o5(s,n.app.options.projectId))}class mee{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=s8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HJ,this._maxUploadRetryTime=KJ,this._requests=new Set,i!=null?this._bucket=za.makeFromBucketSpec(i,this._host):this._bucket=w3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=za.makeFromBucketSpec(this._url,e):this._bucket=w3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ca(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lx(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new eee(a8());{const a=hee(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const S3="@firebase/storage",T3="0.14.0";const o8="storage";function pee(n=yA(),e){n=Qr(n);const r=jv(n,o8).getImmediate({identifier:e}),i=i5("storage");return i&&_ee(r,...i),r}function _ee(n,e,t,r={}){gee(n,e,t,r)}function yee(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new mee(t,r,i,e,tf)}function xee(){kh(new Jc(o8,yee,"PUBLIC").setMultipleInstances(!0)),Po(S3,T3,""),Po(S3,T3,"esm2020")}xee();const vee={apiKey:"REPLACE_WITH_YOUR_API_KEY",authDomain:"your-project.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"},pR=g5(vee),eS=zJ(pR),qg=yZ(pR);pee(pR);xZ(qg).catch(n=>{n.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const Eee=Ja()(Jh((n,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async t=>{n(r=>{r.loading=!0});try{const r=kZ(Zk(qg,"vondsten"),NZ("userId","==",t)),s=(await VZ(r)).docs.map(a=>({id:a.id,...a.data()}));n(a=>{a.vondsten=s,a.loading=!1})}catch(r){n(i=>{i.error=r.message,i.loading=!1})}},addVondst:async t=>{const r=new Date().toISOString(),i={...t,createdAt:r,updatedAt:r},s=await BZ(Zk(qg,"vondsten"),i);return n(a=>{a.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(t,r)=>{const i=VT(qg,"vondsten",t);await jZ(i,{...r,updatedAt:new Date().toISOString()}),n(s=>{const a=s.vondsten.findIndex(o=>o.id===t);a!==-1&&(s.vondsten[a]={...s.vondsten[a],...r})})},deleteVondst:async t=>{await GZ(VT(qg,"vondsten",t)),n(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==t)})}}))),wee={};function See(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=t.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const hp=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return hp(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return hp(r)(t)}}}},Tee=(n,e)=>(t,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,I)=>({...I,...E}),...e},a=!1;const o=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return n((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...E)},r,i);const f=hp(s.serialize),d=()=>{const E=s.partialize({...r()});let I;const T=f({state:E,version:s.version}).then(M=>u.setItem(s.name,M)).catch(M=>{I=M});if(I)throw I;return T},g=i.setState;i.setState=(E,I)=>{g(E,I),d()};const p=n((...E)=>{t(...E),d()},r,i);let v;const x=()=>{var E;if(!u)return;a=!1,o.forEach(T=>T(r()));const I=((E=s.onRehydrateStorage)==null?void 0:E.call(s,r()))||void 0;return hp(u.getItem.bind(u))(s.name).then(T=>{if(T)return s.deserialize(T)}).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==s.version){if(s.migrate)return s.migrate(T.state,T.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return T.state}).then(T=>{var M;return v=s.merge(T,(M=r())!=null?M:p),t(v,!0),d()}).then(()=>{I?.(v,void 0),a=!0,l.forEach(T=>T(v))}).catch(T=>{I?.(void 0,T)})};return i.persist={setOptions:E=>{s={...s,...E},E.getStorage&&(u=E.getStorage())},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>a,onHydrate:E=>(o.add(E),()=>{o.delete(E)}),onFinishHydration:E=>(l.add(E),()=>{l.delete(E)})},x(),v||p},Iee=(n,e)=>(t,r,i)=>{let s={storage:See(()=>localStorage),partialize:x=>x,version:0,merge:(x,E)=>({...E,...x}),...e},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...x)},r,i);const f=()=>{const x=s.partialize({...r()});return u.setItem(s.name,{state:x,version:s.version})},d=i.setState;i.setState=(x,E)=>{d(x,E),f()};const g=n((...x)=>{t(...x),f()},r,i);i.getInitialState=()=>g;let p;const v=()=>{var x,E;if(!u)return;a=!1,o.forEach(T=>{var M;return T((M=r())!=null?M:g)});const I=((E=s.onRehydrateStorage)==null?void 0:E.call(s,(x=r())!=null?x:g))||void 0;return hp(u.getItem.bind(u))(s.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==s.version){if(s.migrate)return[!0,s.migrate(T.state,T.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var M;const[k,L]=T;if(p=s.merge(L,(M=r())!=null?M:g),t(p,!0),k)return f()}).then(()=>{I?.(p,void 0),p=r(),a=!0,l.forEach(T=>T(p))}).catch(T=>{I?.(void 0,T)})};return i.persist={setOptions:x=>{s={...s,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},s.skipHydration||v(),p||g},Aee=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((wee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Tee(n,e)):Iee(n,e),fE=Aee,xa=Ja()(fE(n=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,headingUpMode:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,setDefaultBackground:e=>n({defaultBackground:e}),setShowScaleBar:e=>n({showScaleBar:e}),setGpsAutoStart:e=>n({gpsAutoStart:e}),setHeadingUpMode:e=>n({headingUpMode:e}),setShowAccuracyCircle:e=>n({showAccuracyCircle:e}),setHapticFeedback:e=>n({hapticFeedback:e}),setVondstenLocalOnly:e=>n({vondstenLocalOnly:e}),setShowVondstButton:e=>n({showVondstButton:e}),setFontScale:e=>n({fontScale:e}),setLayerPanelFontScale:e=>n({layerPanelFontScale:e}),setPresetPanelFontScale:e=>n({presetPanelFontScale:e})}),{name:"detectorapp-settings"})),tS=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen"],isBuiltIn:!0},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","AMK Steentijd"],isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Mid vroeg",icon:"Layers",layers:["Romeinse wegen","AMK Romeins","AMK Vroege ME"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Mid laat - Nieuwe tijd",icon:"Grid",layers:["Kadastrale Grenzen","AMK Late ME","Essen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII en Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur","AMK Monumenten"],isBuiltIn:!1}],I3=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],l8=Ja()(fE((n,e)=>({presets:[...tS].map(t=>({...t,isBuiltIn:t.id==="detectie"})),applyPreset:t=>{const r=e().presets.find(s=>s.id===t);if(!r)return;const i=Xr.getState();I3.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),console.log(` Preset toegepast: ${r.name}`)},createPreset:(t,r)=>{const i=Xr.getState(),s=Object.entries(i.visible).filter(([o,l])=>l&&I3.includes(o)).map(([o])=>o),a={id:`custom-${Date.now()}`,name:t,icon:r,layers:s,isBuiltIn:!1};n(o=>({presets:[...o.presets,a]})),console.log(` Preset aangemaakt: ${t} met ${s.length} lagen`)},updatePreset:(t,r)=>{n(i=>({presets:i.presets.map(s=>s.id===t&&!s.isBuiltIn?{...s,...r}:s)}))},deletePreset:t=>{n(r=>({presets:r.presets.filter(i=>i.id!==t||i.isBuiltIn)}))},resetToDefaults:()=>{n({presets:[...tS]})}}),{name:"detectorapp-presets",version:4,migrate:(n,e)=>e<4?{presets:[...tS]}:n})),A3=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],dE=Ja()(fE((n,e)=>({layers:[],addLayer:t=>{const r=crypto.randomUUID(),i=e().layers.length,s=A3[i%A3.length];return n(a=>({layers:[...a.layers,{...t,id:r,createdAt:new Date().toISOString(),color:t.color||s,visible:t.visible??!0,opacity:t.opacity??1}]})),r},removeLayer:t=>n(r=>({layers:r.layers.filter(i=>i.id!==t)})),updateLayer:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)})),toggleVisibility:t=>n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)})),setOpacity:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,opacity:r}:s)})),setColor:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,color:r}:s)})),clearAll:()=>n({layers:[]})}),{name:"detectorapp-custom-layers",version:1}));function Ree({target:n,viewOptions:e}){const t=ce.useRef(null),r=ce.useRef(null),i=Dr(a=>a.setMap),s=xa(a=>a.showScaleBar);return ce.useEffect(()=>{if(!t.current){const a={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},o=new zW({target:n,controls:[],view:new To({center:Cl(a.center),zoom:a.zoom,rotation:a.rotation,minZoom:a.minZoom,maxZoom:a.maxZoom})});t.current=o,i(o),window.__olMap=o}return()=>{t.current&&(t.current.setTarget(void 0),i(null),window.__olMap=null)}},[n,e,i]),ce.useEffect(()=>{const a=t.current;a&&(s?r.current||(r.current=new HW({units:"metric",bar:!1,text:!0,minWidth:80}),a.addControl(r.current)):r.current&&(a.removeControl(r.current),r.current=null))},[s]),t.current}const R3=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function Cee(){const n=ce.useRef(null),e=ce.useRef(!1);Ree({target:"map"});const t=Dr(d=>d.map),r=Xr(d=>d.registerLayer),i=Xr(d=>d.setLayerVisibility),s=xa(d=>d.defaultBackground);ce.useEffect(()=>{if(!t){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const d=new Yu({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new lW}),g=new Yu({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new cd({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),p=new Yu({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new cd({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:" Esri, Maxar, Earthstar Geographics",maxZoom:19})}),v=new Yu({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new cd({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),x=new Yu({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new cd({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),E=new Yu({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new cd({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});t.addLayer(d),t.addLayer(g),t.addLayer(p),t.addLayer(v),t.addLayer(x),t.addLayer(E),console.log(" Base layers added:",{osm:d.getVisible(),cartodb:g.getVisible(),satellite:p.getVisible()}),r("OpenStreetMap",d),r("CartoDB (licht)",g),r("Luchtfoto",p),r("Labels Overlay",v),r("TMK 1850",x),r("Bonnebladen 1900",E),t.updateSize(),console.log(" Map size:",t.getSize()),console.log(" Map center:",t.getView().getCenter()),console.log(" Map zoom:",t.getView().getZoom()),a()},[t,r]);async function a(){if(!t){console.error(" Cannot load layers: map is null");return}const d=xH();console.log(` Loading ${d.length} immediate-load layers (WMS/Tile)...`);const g=await Promise.allSettled(d.map(async v=>{try{const x=await v.factory();return x?{name:v.name,layer:x}:null}catch(x){return console.warn(` Failed to create ${v.name}:`,x),null}}));let p=0;g.forEach(v=>{if(v.status==="fulfilled"&&v.value){const{name:x,layer:E}=v.value;t.addLayer(E),r(x,E),p++,console.log(`   ${x}`)}}),console.log(` Immediate layers loaded: ${p}/${d.length}`),console.log(` Total layers on map: ${t.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}ce.useEffect(()=>{if(!t||e.current)return;const d=setTimeout(()=>{const g=s||"CartoDB (licht)";R3.forEach(p=>{i(p,!1)}),R3.includes(g)?i(g,!0):i("CartoDB (licht)",!0),e.current=!0,console.log(` Default background: ${g}`)},100);return()=>clearTimeout(d)},[t,s,i]);const o=xa(d=>d.gpsAutoStart),l=zn(d=>d.startTracking),u=ce.useRef(!1);ce.useEffect(()=>{if(!(!t||u.current)&&o){const d=setTimeout(()=>{l(),u.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(d)}},[t,o,l]);const f={width:"100%",height:"100vh"};return w.jsx("div",{id:"map",ref:n,style:f})}const _R=ce.createContext({});function yR(n){const e=ce.useRef(null);return e.current===null&&(e.current=n()),e.current}const gE=ce.createContext(null),xR=ce.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class Pee extends ce.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Mee({children:n,isPresent:e}){const t=ce.useId(),r=ce.useRef(null),i=ce.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=ce.useContext(xR);return ce.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=t;const f=document.createElement("style");return s&&(f.nonce=s),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),w.jsx(Pee,{isPresent:e,childRef:r,sizeRef:i,children:ce.cloneElement(n,{ref:r})})}const bee=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=yR(kee),l=ce.useId(),u=ce.useCallback(d=>{o.set(d,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),f=ce.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),u]:[t,u]);return ce.useMemo(()=>{o.forEach((d,g)=>o.set(g,!1))},[t]),ce.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),a==="popLayout"&&(n=w.jsx(Mee,{isPresent:t,children:n})),w.jsx(gE.Provider,{value:f,children:n})};function kee(){return new Map}function c8(n=!0){const e=ce.useContext(gE);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=ce.useId();ce.useEffect(()=>{n&&i(s)},[n]);const a=ce.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const Y1=n=>n.key||"";function C3(n){const e=[];return ce.Children.forEach(n,t=>{ce.isValidElement(t)&&e.push(t)}),e}const vR=typeof window<"u",u8=vR?ce.useLayoutEffect:ce.useEffect,Ks=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=c8(a),u=ce.useMemo(()=>C3(n),[n]),f=a&&!o?[]:u.map(Y1),d=ce.useRef(!0),g=ce.useRef(u),p=yR(()=>new Map),[v,x]=ce.useState(u),[E,I]=ce.useState(u);u8(()=>{d.current=!1,g.current=u;for(let k=0;k<E.length;k++){const L=Y1(E[k]);f.includes(L)?p.delete(L):p.get(L)!==!0&&p.set(L,!1)}},[E,f.length,f.join("-")]);const T=[];if(u!==v){let k=[...u];for(let L=0;L<E.length;L++){const z=E[L],P=Y1(z);f.includes(P)||(k.splice(L,0,z),T.push(z))}s==="wait"&&T.length&&(k=T),I(C3(k)),x(u);return}const{forceRender:M}=ce.useContext(_R);return w.jsx(w.Fragment,{children:E.map(k=>{const L=Y1(k),z=a&&!o?!1:u===E||f.includes(L),P=()=>{if(p.has(L))p.set(L,!0);else return;let C=!0;p.forEach(b=>{b||(C=!1)}),C&&(M?.(),I(g.current),a&&l?.(),r&&r())};return w.jsx(bee,{isPresent:z,initial:!d.current||t?void 0:!1,custom:z?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:z?void 0:P,children:k},L)})})},Bs=n=>n;let h8=Bs;function ER(n){let e;return()=>(e===void 0&&(e=n()),e)}const p0=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Sl=n=>n*1e3,Tl=n=>n/1e3,Nee={useManualTiming:!1};function Lee(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),n()),u(a)}const l={schedule:(u,f=!1,d=!1)=>{const p=d&&r?e:t;return f&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{t.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const X1=["read","resolveKeyframes","update","preRender","render","postRender"],Oee=40;function f8(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=X1.reduce((I,T)=>(I[T]=Lee(s),I),{}),{read:o,resolveKeyframes:l,update:u,preRender:f,render:d,postRender:g}=a,p=()=>{const I=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,Oee),1),i.timestamp=I,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),f.process(i),d.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(p))},v=()=>{t=!0,r=!0,i.isProcessing||n(p)};return{schedule:X1.reduce((I,T)=>{const M=a[T];return I[T]=(k,L=!1,z=!1)=>(t||v(),M.schedule(k,L,z)),I},{}),cancel:I=>{for(let T=0;T<X1.length;T++)a[X1[T]].cancel(I)},state:i,steps:a}}const{schedule:jn,cancel:au,state:li,steps:nS}=f8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bs,!0),d8=ce.createContext({strict:!1}),P3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_0={};for(const n in P3)_0[n]={isEnabled:e=>P3[n].some(t=>!!e[t])};function Dee(n){for(const e in n)_0[e]={..._0[e],...n[e]}}const Fee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ox(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Fee.has(n)}let g8=n=>!Ox(n);function Vee(n){n&&(g8=e=>e.startsWith("on")?!Ox(e):n(e))}try{Vee(require("@emotion/is-prop-valid").default)}catch{}function jee(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(g8(i)||t===!0&&Ox(i)||!e&&!Ox(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function Gee(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const mE=ce.createContext({});function fp(n){return typeof n=="string"||Array.isArray(n)}function pE(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const wR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SR=["initial",...wR];function _E(n){return pE(n.animate)||SR.some(e=>fp(n[e]))}function m8(n){return!!(_E(n)||n.variants)}function Bee(n,e){if(_E(n)){const{initial:t,animate:r}=n;return{initial:t===!1||fp(t)?t:void 0,animate:fp(r)?r:void 0}}return n.inherit!==!1?e:{}}function Uee(n){const{initial:e,animate:t}=Bee(n,ce.useContext(mE));return ce.useMemo(()=>({initial:e,animate:t}),[M3(e),M3(t)])}function M3(n){return Array.isArray(n)?n.join(" "):n}const zee=Symbol.for("motionComponentSymbol");function Ed(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function $ee(n,e,t){return ce.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ed(t)&&(t.current=r))},[e])}const TR=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Wee="framerAppearId",p8="data-"+TR(Wee),{schedule:IR}=f8(queueMicrotask,!1),_8=ce.createContext({});function Hee(n,e,t,r,i){var s,a;const{visualElement:o}=ce.useContext(mE),l=ce.useContext(d8),u=ce.useContext(gE),f=ce.useContext(xR).reducedMotion,d=ce.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,p=ce.useContext(_8);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&Kee(d.current,t,i,p);const v=ce.useRef(!1);ce.useInsertionEffect(()=>{g&&v.current&&g.update(t,u)});const x=t[p8],E=ce.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,x)));return u8(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),IR.render(g.render),E.current&&g.animationState&&g.animationState.animateChanges())}),ce.useEffect(()=>{g&&(!E.current&&g.animationState&&g.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var I;(I=window.MotionHandoffMarkAsComplete)===null||I===void 0||I.call(window,x)}),E.current=!1))}),g}function Kee(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:y8(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Ed(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function y8(n){if(n)return n.options.allowProjection!==!1?n.projection:y8(n.parent)}function Yee({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,a;n&&Dee(n);function o(u,f){let d;const g={...ce.useContext(xR),...u,layoutId:Xee(u)},{isStatic:p}=g,v=Uee(u),x=r(u,p);if(!p&&vR){qee();const E=Zee(g);d=E.MeasureLayout,v.visualElement=Hee(i,x,g,e,E.ProjectionNode)}return w.jsxs(mE.Provider,{value:v,children:[d&&v.visualElement?w.jsx(d,{visualElement:v.visualElement,...g}):null,t(i,u,$ee(x,v.visualElement,f),x,p,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=ce.forwardRef(o);return l[zee]=i,l}function Xee({layoutId:n}){const e=ce.useContext(_R).id;return e&&n!==void 0?e+"-"+n:n}function qee(n,e){ce.useContext(d8).strict}function Zee(n){const{drag:e,layout:t}=_0;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Qee=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function AR(n){return typeof n!="string"||n.includes("-")?!1:!!(Qee.indexOf(n)>-1||/[A-Z]/u.test(n))}function b3(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function RR(n,e,t,r){if(typeof e=="function"){const[i,s]=b3(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=b3(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const zT=n=>Array.isArray(n),Jee=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),ete=n=>zT(n)?n[n.length-1]||0:n,Mi=n=>!!(n&&n.getVelocity);function by(n){const e=Mi(n)?n.get():n;return Jee(e)?e.toValue():e}function tte({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const a={latestValues:nte(r,i,s,n),renderState:e()};return t&&(a.onMount=o=>t({props:r,current:o,...a}),a.onUpdate=o=>t(o)),a}const x8=n=>(e,t)=>{const r=ce.useContext(mE),i=ce.useContext(gE),s=()=>tte(n,e,r,i);return t?s():yR(s)};function nte(n,e,t,r){const i={},s=r(n,{});for(const g in s)i[g]=by(s[g]);let{initial:a,animate:o}=n;const l=_E(n),u=m8(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const d=f?o:a;if(d&&typeof d!="boolean"&&!pE(d)){const g=Array.isArray(d)?d:[d];for(let p=0;p<g.length;p++){const v=RR(n,g[p]);if(v){const{transitionEnd:x,transition:E,...I}=v;for(const T in I){let M=I[T];if(Array.isArray(M)){const k=f?M.length-1:0;M=M[k]}M!==null&&(i[T]=M)}for(const T in x)i[T]=x[T]}}}return i}const N0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sf=new Set(N0),v8=n=>e=>typeof e=="string"&&e.startsWith(n),E8=v8("--"),rte=v8("var(--"),CR=n=>rte(n)?ite.test(n.split("/*")[0].trim()):!1,ite=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,w8=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ol=(n,e,t)=>t>e?e:t<n?n:t,L0={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},dp={...L0,transform:n=>Ol(0,1,n)},q1={...L0,default:1},l_=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ic=l_("deg"),Lo=l_("%"),It=l_("px"),ste=l_("vh"),ate=l_("vw"),k3={...Lo,parse:n=>Lo.parse(n)/100,transform:n=>Lo.transform(n*100)},ote={borderWidth:It,borderTopWidth:It,borderRightWidth:It,borderBottomWidth:It,borderLeftWidth:It,borderRadius:It,radius:It,borderTopLeftRadius:It,borderTopRightRadius:It,borderBottomRightRadius:It,borderBottomLeftRadius:It,width:It,maxWidth:It,height:It,maxHeight:It,top:It,right:It,bottom:It,left:It,padding:It,paddingTop:It,paddingRight:It,paddingBottom:It,paddingLeft:It,margin:It,marginTop:It,marginRight:It,marginBottom:It,marginLeft:It,backgroundPositionX:It,backgroundPositionY:It},lte={rotate:Ic,rotateX:Ic,rotateY:Ic,rotateZ:Ic,scale:q1,scaleX:q1,scaleY:q1,scaleZ:q1,skew:Ic,skewX:Ic,skewY:Ic,distance:It,translateX:It,translateY:It,translateZ:It,x:It,y:It,z:It,perspective:It,transformPerspective:It,opacity:dp,originX:k3,originY:k3,originZ:It},N3={...L0,transform:Math.round},PR={...ote,...lte,zIndex:N3,size:It,fillOpacity:dp,strokeOpacity:dp,numOctaves:N3},cte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ute=N0.length;function hte(n,e,t){let r="",i=!0;for(let s=0;s<ute;s++){const a=N0[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=w8(o,PR[a]);if(!l){i=!1;const f=cte[a]||a;r+=`${f}(${u}) `}t&&(e[a]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function MR(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(sf.has(l)){a=!0;continue}else if(E8(l)){i[l]=u;continue}else{const f=w8(u,PR[l]);l.startsWith("origin")?(o=!0,s[l]=f):r[l]=f}}if(e.transform||(a||t?r.transform=hte(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:f=0}=s;r.transformOrigin=`${l} ${u} ${f}`}}const fte={offset:"stroke-dashoffset",array:"stroke-dasharray"},dte={offset:"strokeDashoffset",array:"strokeDasharray"};function gte(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?fte:dte;n[s.offset]=It.transform(-r);const a=It.transform(e),o=It.transform(t);n[s.array]=`${a} ${o}`}function L3(n,e,t){return typeof n=="string"?n:It.transform(e+t*n)}function mte(n,e,t){const r=L3(e,n.x,n.width),i=L3(t,n.y,n.height);return`${r} ${i}`}function bR(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},f,d){if(MR(n,u,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:p,dimensions:v}=n;g.transform&&(v&&(p.transform=g.transform),delete g.transform),v&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=mte(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),a!==void 0&&gte(g,a,o,l,!1)}const kR=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),S8=()=>({...kR(),attrs:{}}),NR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function T8(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const I8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function A8(n,e,t,r){T8(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(I8.has(i)?i:TR(i),e.attrs[i])}const Dx={};function pte(n){Object.assign(Dx,n)}function R8(n,{layout:e,layoutId:t}){return sf.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Dx[n]||n==="opacity")}function LR(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(Mi(i[a])||e.style&&Mi(e.style[a])||R8(a,n)||((r=t?.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function C8(n,e,t){const r=LR(n,e,t);for(const i in n)if(Mi(n[i])||Mi(e[i])){const s=N0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function _te(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const O3=["x","y","width","height","cx","cy","r"],yte={useVisualState:x8({scrapeMotionValuesFromProps:C8,createRenderState:S8,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const o in i)if(sf.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<O3.length;o++){const l=O3[o];n[l]!==e[l]&&(a=!0)}a&&jn.read(()=>{_te(t,r),jn.render(()=>{bR(r,i,NR(t.tagName),n.transformTemplate),A8(t,r)})})}})},xte={useVisualState:x8({scrapeMotionValuesFromProps:LR,createRenderState:kR})};function P8(n,e,t){for(const r in e)!Mi(e[r])&&!R8(r,t)&&(n[r]=e[r])}function vte({transformTemplate:n},e){return ce.useMemo(()=>{const t=kR();return MR(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Ete(n,e){const t=n.style||{},r={};return P8(r,t,n),Object.assign(r,vte(n,e)),r}function wte(n,e){const t={},r=Ete(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function Ste(n,e,t,r){const i=ce.useMemo(()=>{const s=S8();return bR(s,e,NR(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};P8(s,n.style,n),i.style={...s,...i.style}}return i}function Tte(n=!1){return(t,r,i,{latestValues:s},a)=>{const l=(AR(t)?Ste:wte)(r,s,a,t),u=jee(r,typeof t=="string",n),f=t!==ce.Fragment?{...u,...l,ref:i}:{},{children:d}=r,g=ce.useMemo(()=>Mi(d)?d.get():d,[d]);return ce.createElement(t,{...f,children:g})}}function Ite(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...AR(r)?yte:xte,preloadedFeatures:n,useRender:Tte(i),createVisualElement:e,Component:r};return Yee(a)}}function M8(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function yE(n,e,t){const r=n.getProps();return RR(r,e,t!==void 0?t:r.custom,n)}const Ate=ER(()=>window.ScrollTimeline!==void 0);class Rte{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(Ate()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Cte extends Rte{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function OR(n,e){return n?n[e]||n.default||n:void 0}const $T=2e4;function b8(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<$T;)e+=t,r=n.next(e);return e>=$T?1/0:e}function DR(n){return typeof n=="function"}function D3(n,e){n.timeline=e,n.onfinish=null}const FR=n=>Array.isArray(n)&&typeof n[0]=="number",Pte={linearEasing:void 0};function Mte(n,e){const t=ER(n);return()=>{var r;return(r=Pte[e])!==null&&r!==void 0?r:t()}}const Fx=Mte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),k8=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(p0(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function N8(n){return!!(typeof n=="function"&&Fx()||!n||typeof n=="string"&&(n in WT||Fx())||FR(n)||Array.isArray(n)&&n.every(N8))}const Zg=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,WT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zg([0,.65,.55,1]),circOut:Zg([.55,0,1,.45]),backIn:Zg([.31,.01,.66,-.59]),backOut:Zg([.33,1.53,.69,.99])};function L8(n,e){if(n)return typeof n=="function"&&Fx()?k8(n,e):FR(n)?Zg(n):Array.isArray(n)?n.map(t=>L8(t,e)||WT.easeOut):WT[n]}const La={x:!1,y:!1};function O8(){return La.x||La.y}function bte(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function D8(n,e){const t=bte(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function F3(n){return e=>{e.pointerType==="touch"||O8()||n(e)}}function kte(n,e,t={}){const[r,i,s]=D8(n,t),a=F3(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const f=F3(d=>{u(d),l.removeEventListener("pointerleave",f)});l.addEventListener("pointerleave",f,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const F8=(n,e)=>e?n===e?!0:F8(n,e.parentElement):!1,VR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Nte=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Lte(n){return Nte.has(n.tagName)||n.tabIndex!==-1}const Qg=new WeakSet;function V3(n){return e=>{e.key==="Enter"&&n(e)}}function rS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ote=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=V3(()=>{if(Qg.has(t))return;rS(t,"down");const i=V3(()=>{rS(t,"up")}),s=()=>rS(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function j3(n){return VR(n)&&!O8()}function Dte(n,e,t={}){const[r,i,s]=D8(n,t),a=o=>{const l=o.currentTarget;if(!j3(o)||Qg.has(l))return;Qg.add(l);const u=e(o),f=(p,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",g),!(!j3(p)||!Qg.has(l))&&(Qg.delete(l),typeof u=="function"&&u(p,{success:v}))},d=p=>{f(p,t.useGlobalTarget||F8(l,p.target))},g=p=>{f(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!Lte(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>Ote(u,i),i)}),s}function Fte(n){return n==="x"||n==="y"?La[n]?null:(La[n]=!0,()=>{La[n]=!1}):La.x||La.y?null:(La.x=La.y=!0,()=>{La.x=La.y=!1})}const V8=new Set(["width","height","top","left","right","bottom",...N0]);let ky;function Vte(){ky=void 0}const Oo={now:()=>(ky===void 0&&Oo.set(li.isProcessing||Nee.useManualTiming?li.timestamp:performance.now()),ky),set:n=>{ky=n,queueMicrotask(Vte)}};function jR(n,e){n.indexOf(e)===-1&&n.push(e)}function GR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class BR{constructor(){this.subscriptions=[]}add(e){return jR(this.subscriptions,e),()=>GR(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function j8(n,e){return e?n*(1e3/e):0}const G3=30,jte=n=>!isNaN(parseFloat(n));class Gte{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Oo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Oo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jte(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new BR);const r=this.events[e].add(t);return e==="change"?()=>{r(),jn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Oo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>G3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,G3);return j8(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gp(n,e){return new Gte(n,e)}function Bte(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,gp(t))}function Ute(n,e){const t=yE(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const o=ete(s[a]);Bte(n,a,o)}}function zte(n){return!!(Mi(n)&&n.add)}function HT(n,e){const t=n.getValue("willChange");if(zte(t))return t.add(e)}function G8(n){return n.props[p8]}const B8=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,$te=1e-7,Wte=12;function Hte(n,e,t,r,i){let s,a,o=0;do a=e+(t-e)/2,s=B8(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>$te&&++o<Wte);return a}function c_(n,e,t,r){if(n===e&&t===r)return Bs;const i=s=>Hte(s,0,1,n,t);return s=>s===0||s===1?s:B8(i(s),e,r)}const U8=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,z8=n=>e=>1-n(1-e),$8=c_(.33,1.53,.69,.99),UR=z8($8),W8=U8(UR),H8=n=>(n*=2)<1?.5*UR(n):.5*(2-Math.pow(2,-10*(n-1))),zR=n=>1-Math.sin(Math.acos(n)),K8=z8(zR),Y8=U8(zR),X8=n=>/^0[^.\s]+$/u.test(n);function Kte(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||X8(n):!0}const pm=n=>Math.round(n*1e5)/1e5,$R=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yte(n){return n==null}const Xte=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WR=(n,e)=>t=>!!(typeof t=="string"&&Xte.test(t)&&t.startsWith(n)||e&&!Yte(t)&&Object.prototype.hasOwnProperty.call(t,e)),q8=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match($R);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},qte=n=>Ol(0,255,n),iS={...L0,transform:n=>Math.round(qte(n))},dh={test:WR("rgb","red"),parse:q8("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+iS.transform(n)+", "+iS.transform(e)+", "+iS.transform(t)+", "+pm(dp.transform(r))+")"};function Zte(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const KT={test:WR("#"),parse:Zte,transform:dh.transform},wd={test:WR("hsl","hue"),parse:q8("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Lo.transform(pm(e))+", "+Lo.transform(pm(t))+", "+pm(dp.transform(r))+")"},Ii={test:n=>dh.test(n)||KT.test(n)||wd.test(n),parse:n=>dh.test(n)?dh.parse(n):wd.test(n)?wd.parse(n):KT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?dh.transform(n):wd.transform(n)},Qte=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Jte(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match($R))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Qte))===null||t===void 0?void 0:t.length)||0)>0}const Z8="number",Q8="color",ene="var",tne="var(",B3="${}",nne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mp(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(nne,l=>(Ii.test(l)?(r.color.push(s),i.push(Q8),t.push(Ii.parse(l))):l.startsWith(tne)?(r.var.push(s),i.push(ene),t.push(l)):(r.number.push(s),i.push(Z8),t.push(parseFloat(l))),++s,B3)).split(B3);return{values:t,split:o,indexes:r,types:i}}function J8(n){return mp(n).values}function e9(n){const{split:e,types:t}=mp(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===Z8?s+=pm(i[a]):o===Q8?s+=Ii.transform(i[a]):s+=i[a]}return s}}const rne=n=>typeof n=="number"?0:n;function ine(n){const e=J8(n);return e9(n)(e.map(rne))}const ou={test:Jte,parse:J8,createTransformer:e9,getAnimatableNone:ine},sne=new Set(["brightness","contrast","saturate","opacity"]);function ane(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match($R)||[];if(!r)return n;const i=t.replace(r,"");let s=sne.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const one=/\b([a-z-]*)\(.*?\)/gu,YT={...ou,getAnimatableNone:n=>{const e=n.match(one);return e?e.map(ane).join(" "):n}},lne={...PR,color:Ii,backgroundColor:Ii,outlineColor:Ii,fill:Ii,stroke:Ii,borderColor:Ii,borderTopColor:Ii,borderRightColor:Ii,borderBottomColor:Ii,borderLeftColor:Ii,filter:YT,WebkitFilter:YT},HR=n=>lne[n];function t9(n,e){let t=HR(n);return t!==YT&&(t=ou),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const cne=new Set(["auto","none","0"]);function une(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!cne.has(s)&&mp(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=t9(t,i)}const U3=n=>n===L0||n===It,z3=(n,e)=>parseFloat(n.split(", ")[e]),$3=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return z3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?z3(s[1],n):0}},hne=new Set(["x","y","z"]),fne=N0.filter(n=>!hne.has(n));function dne(n){const e=[];return fne.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const y0={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:$3(4,13),y:$3(5,14)};y0.translateX=y0.x;y0.translateY=y0.y;const Eh=new Set;let XT=!1,qT=!1;function n9(){if(qT){const n=Array.from(Eh).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=dne(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}qT=!1,XT=!1,Eh.forEach(n=>n.complete()),Eh.clear()}function r9(){Eh.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(qT=!0)})}function gne(){r9(),n9()}class KR{constructor(e,t,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Eh.add(this),XT||(XT=!0,jn.read(r9),jn.resolveKeyframes(n9))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const l=r.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Eh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Eh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const i9=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),mne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pne(n){const e=mne.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function s9(n,e,t=1){const[r,i]=pne(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return i9(a)?parseFloat(a):a}return CR(i)?s9(i,e,t+1):i}const a9=n=>e=>e.test(n),_ne={test:n=>n==="auto",parse:n=>n},o9=[L0,It,Lo,Ic,ate,ste,_ne],W3=n=>o9.find(a9(n));class l9 extends KR{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),CR(u))){const f=s9(u,t.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!V8.has(r)||e.length!==2)return;const[i,s]=e,a=W3(i),o=W3(s);if(a!==o)if(U3(a)&&U3(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)Kte(e[i])&&r.push(i);r.length&&une(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=y0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=y0[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const H3=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ou.test(n)||n==="0")&&!n.startsWith("url("));function yne(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function xne(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=H3(i,e),o=H3(s,e);return!a||!o?!1:yne(n)||(t==="spring"||DR(t))&&r}const vne=n=>n!==null;function xE(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(vne),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Ene=40;class c9{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Oo.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Ene?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&gne(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Oo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!xne(e,r,i,s))if(a)this.options.duration=0;else{l&&l(xE(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,t);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...f},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Jn=(n,e,t)=>n+(e-n)*t;function sS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function wne({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=sS(l,o,n+1/3),s=sS(l,o,n),a=sS(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Vx(n,e){return t=>t>0?e:n}const aS=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Sne=[KT,dh,wd],Tne=n=>Sne.find(e=>e.test(n));function K3(n){const e=Tne(n);if(!e)return!1;let t=e.parse(n);return e===wd&&(t=wne(t)),t}const Y3=(n,e)=>{const t=K3(n),r=K3(e);if(!t||!r)return Vx(n,e);const i={...t};return s=>(i.red=aS(t.red,r.red,s),i.green=aS(t.green,r.green,s),i.blue=aS(t.blue,r.blue,s),i.alpha=Jn(t.alpha,r.alpha,s),dh.transform(i))},Ine=(n,e)=>t=>e(n(t)),u_=(...n)=>n.reduce(Ine),ZT=new Set(["none","hidden"]);function Ane(n,e){return ZT.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Rne(n,e){return t=>Jn(n,e,t)}function YR(n){return typeof n=="number"?Rne:typeof n=="string"?CR(n)?Vx:Ii.test(n)?Y3:Mne:Array.isArray(n)?u9:typeof n=="object"?Ii.test(n)?Y3:Cne:Vx}function u9(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>YR(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function Cne(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=YR(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Pne(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=n.indexes[a][i[a]],l=(t=n.values[o])!==null&&t!==void 0?t:0;r[s]=l,i[a]++}return r}const Mne=(n,e)=>{const t=ou.createTransformer(e),r=mp(n),i=mp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ZT.has(n)&&!i.values.length||ZT.has(e)&&!r.values.length?Ane(n,e):u_(u9(Pne(r,i),i.values),t):Vx(n,e)};function h9(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Jn(n,e,t):YR(n)(n,e)}const bne=5;function f9(n,e,t){const r=Math.max(e-bne,0);return j8(t-n(r),e-r)}const ir={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oS=.001;function kne({duration:n=ir.duration,bounce:e=ir.bounce,velocity:t=ir.velocity,mass:r=ir.mass}){let i,s,a=1-e;a=Ol(ir.minDamping,ir.maxDamping,a),n=Ol(ir.minDuration,ir.maxDuration,Tl(n)),a<1?(i=u=>{const f=u*a,d=f*n,g=f-t,p=QT(u,a),v=Math.exp(-d);return oS-g/p*v},s=u=>{const d=u*a*n,g=d*t+t,p=Math.pow(a,2)*Math.pow(u,2)*n,v=Math.exp(-d),x=QT(Math.pow(u,2),a);return(-i(u)+oS>0?-1:1)*((g-p)*v)/x}):(i=u=>{const f=Math.exp(-u*n),d=(u-t)*n+1;return-oS+f*d},s=u=>{const f=Math.exp(-u*n),d=(t-u)*(n*n);return f*d});const o=5/n,l=Lne(i,s,o);if(n=Sl(n),isNaN(l))return{stiffness:ir.stiffness,damping:ir.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:n}}}const Nne=12;function Lne(n,e,t){let r=t;for(let i=1;i<Nne;i++)r=r-n(r)/e(r);return r}function QT(n,e){return n*Math.sqrt(1-e*e)}const One=["duration","bounce"],Dne=["stiffness","damping","mass"];function X3(n,e){return e.some(t=>n[t]!==void 0)}function Fne(n){let e={velocity:ir.velocity,stiffness:ir.stiffness,damping:ir.damping,mass:ir.mass,isResolvedFromDuration:!1,...n};if(!X3(n,Dne)&&X3(n,One))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Ol(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:ir.mass,stiffness:i,damping:s}}else{const t=kne(n);e={...e,...t,mass:ir.mass},e.isResolvedFromDuration=!0}return e}function d9(n=ir.visualDuration,e=ir.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:f,duration:d,velocity:g,isResolvedFromDuration:p}=Fne({...t,velocity:-Tl(t.velocity||0)}),v=g||0,x=u/(2*Math.sqrt(l*f)),E=a-s,I=Tl(Math.sqrt(l/f)),T=Math.abs(E)<5;r||(r=T?ir.restSpeed.granular:ir.restSpeed.default),i||(i=T?ir.restDelta.granular:ir.restDelta.default);let M;if(x<1){const L=QT(I,x);M=z=>{const P=Math.exp(-x*I*z);return a-P*((v+x*I*E)/L*Math.sin(L*z)+E*Math.cos(L*z))}}else if(x===1)M=L=>a-Math.exp(-I*L)*(E+(v+I*E)*L);else{const L=I*Math.sqrt(x*x-1);M=z=>{const P=Math.exp(-x*I*z),C=Math.min(L*z,300);return a-P*((v+x*I*E)*Math.sinh(C)+L*E*Math.cosh(C))/L}}const k={calculatedDuration:p&&d||null,next:L=>{const z=M(L);if(p)o.done=L>=d;else{let P=0;x<1&&(P=L===0?Sl(v):f9(M,L,z));const C=Math.abs(P)<=r,b=Math.abs(a-z)<=i;o.done=C&&b}return o.value=o.done?a:z,o},toString:()=>{const L=Math.min(b8(k),$T),z=k8(P=>k.next(L*P).value,L,30);return L+"ms "+z}};return k}function q3({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:f}){const d=n[0],g={done:!1,value:d},p=C=>o!==void 0&&C<o||l!==void 0&&C>l,v=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let x=t*e;const E=d+x,I=a===void 0?E:a(E);I!==E&&(x=I-d);const T=C=>-x*Math.exp(-C/r),M=C=>I+T(C),k=C=>{const b=T(C),F=M(C);g.done=Math.abs(b)<=u,g.value=g.done?I:F};let L,z;const P=C=>{p(g.value)&&(L=C,z=d9({keyframes:[g.value,v(g.value)],velocity:f9(M,C,g.value),damping:i,stiffness:s,restDelta:u,restSpeed:f}))};return P(0),{calculatedDuration:null,next:C=>{let b=!1;return!z&&L===void 0&&(b=!0,k(C),P(C)),L!==void 0&&C>=L?z.next(C-L):(!b&&k(C),g)}}}const Vne=c_(.42,0,1,1),jne=c_(0,0,.58,1),g9=c_(.42,0,.58,1),Gne=n=>Array.isArray(n)&&typeof n[0]!="number",Bne={linear:Bs,easeIn:Vne,easeInOut:g9,easeOut:jne,circIn:zR,circInOut:Y8,circOut:K8,backIn:UR,backInOut:W8,backOut:$8,anticipate:H8},Z3=n=>{if(FR(n)){h8(n.length===4);const[e,t,r,i]=n;return c_(e,t,r,i)}else if(typeof n=="string")return Bne[n];return n};function Une(n,e,t){const r=[],i=t||h9,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||Bs:e;o=u_(l,o)}r.push(o)}return r}function zne(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(h8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Une(e,r,i),l=o.length,u=f=>{if(a&&f<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(f<n[d+1]);d++);const g=p0(n[d],n[d+1],f);return o[d](g)};return t?f=>u(Ol(n[0],n[s-1],f)):u}function $ne(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=p0(0,e,r);n.push(Jn(t,1,i))}}function Wne(n){const e=[0];return $ne(e,n.length-1),e}function Hne(n,e){return n.map(t=>t*e)}function Kne(n,e){return n.map(()=>e||g9).splice(0,n.length-1)}function jx({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=Gne(r)?r.map(Z3):Z3(r),s={done:!1,value:e[0]},a=Hne(t&&t.length===e.length?t:Wne(e),n),o=zne(a,e,{ease:Array.isArray(i)?i:Kne(e,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const Yne=n=>{const e=({timestamp:t})=>n(t);return{start:()=>jn.update(e,!0),stop:()=>au(e),now:()=>li.isProcessing?li.timestamp:Oo.now()}},Xne={decay:q3,inertia:q3,tween:jx,keyframes:jx,spring:d9},qne=n=>n/100;class XR extends c9{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,a=i?.KeyframeResolver||KR,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=DR(t)?t:Xne[t]||jx;let l,u;o!==jx&&typeof e[0]!="number"&&(l=u_(qne,h9(e[0],e[1])),e=[0,100]);const f=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=b8(f));const{calculatedDuration:d}=f,g=d+i,p=g*(r+1)-i;return{generator:f,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:g,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:f,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:p,repeatType:v,repeatDelay:x,onUpdate:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const I=this.currentTime-g*(this.speed>=0?1:-1),T=this.speed>=0?I<0:I>f;this.currentTime=Math.max(I,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let M=this.currentTime,k=s;if(p){const C=Math.min(this.currentTime,f)/d;let b=Math.floor(C),F=C%1;!F&&C>=1&&(F=1),F===1&&b--,b=Math.min(b,p+1),b%2&&(v==="reverse"?(F=1-F,x&&(F-=x/d)):v==="mirror"&&(k=a)),M=Ol(0,1,F)*d}const L=T?{done:!1,value:l[0]}:k.next(M);o&&(L.value=o(L.value));let{done:z}=L;!T&&u!==null&&(z=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return P&&i!==void 0&&(L.value=xE(l,this.options,i)),E&&E(L.value),P&&this.finish(),L}get duration(){const{resolved:e}=this;return e?Tl(e.calculatedDuration):0}get time(){return Tl(this.currentTime)}set time(e){e=Sl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Tl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Yne,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Zne=new Set(["opacity","clipPath","filter","transform"]);function Qne(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const f=L8(o,i);return Array.isArray(f)&&(u.easing=f),n.animate(u,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const Jne=ER(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Gx=10,ere=2e4;function tre(n){return DR(n.type)||n.type==="spring"||!N8(n.ease)}function nre(n,e){const t=new XR({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<ere;)r=t.sample(s),i.push(r.value),s+=Gx;return{times:void 0,keyframes:i,duration:s-Gx,ease:"linear"}}const m9={anticipate:H8,backInOut:W8,circInOut:Y8};function rre(n){return n in m9}class Q3 extends c9{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new l9(s,(a,o)=>this.onKeyframesResolved(a,o),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Fx()&&rre(s)&&(s=m9[s]),tre(this.options)){const{onComplete:d,onUpdate:g,motionValue:p,element:v,...x}=this.options,E=nre(e,x);e=E.keyframes,e.length===1&&(e[1]=e[0]),r=E.duration,i=E.times,s=E.ease,a="keyframes"}const f=Qne(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(D3(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:d}=this.options;o.set(xE(e,this.options,t)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Tl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Tl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Sl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Bs;const{animation:r}=t;D3(r,e)}return Bs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:f,onComplete:d,element:g,...p}=this.options,v=new XR({...p,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),x=Sl(this.time);u.setWithVelocity(v.sample(x-Gx).value,v.sample(x).value,Gx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return Jne()&&r&&Zne.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const ire={type:"spring",stiffness:500,damping:25,restSpeed:10},sre=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),are={type:"keyframes",duration:.8},ore={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lre=(n,{keyframes:e})=>e.length>2?are:sf.has(n)?n.startsWith("scale")?sre(e[1]):ire:ore;function cre({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...f}){return!!Object.keys(f).length}const qR=(n,e,t,r={},i,s)=>a=>{const o=OR(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Sl(l);let f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:i};cre(o)||(f={...f,...lre(n,f)}),f.duration&&(f.duration=Sl(f.duration)),f.repeatDelay&&(f.repeatDelay=Sl(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const g=xE(f.keyframes,o);if(g!==void 0)return jn.update(()=>{f.onUpdate(g),f.onComplete()}),new Cte([])}return!s&&Q3.supports(f)?new Q3(f):new XR(f)};function ure({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function p9(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:a=n.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const u=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const d in l){const g=n.getValue(d,(s=n.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||f&&ure(f,d))continue;const v={delay:t,...OR(a||{},d)};let x=!1;if(window.MotionHandoffAnimation){const I=G8(n);if(I){const T=window.MotionHandoffAnimation(I,d,jn);T!==null&&(v.startTime=T,x=!0)}}HT(n,d),g.start(qR(d,g,p,n.shouldReduceMotion&&V8.has(d)?{type:!1}:v,n,x));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{jn.update(()=>{o&&Ute(n,o)})}),u}function JT(n,e,t={}){var r;const i=yE(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(p9(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:g}=s;return hre(n,e,f+u,d,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,f]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>f())}else return Promise.all([a(),o(t.delay)])}function hre(n,e,t=0,r=0,i=1,s){const a=[],o=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(n.variantChildren).sort(fre).forEach((u,f)=>{u.notify("AnimationStart",e),a.push(JT(u,e,{...s,delay:t+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function fre(n,e){return n.sortNodePosition(e)}function dre(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>JT(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=JT(n,e,t);else{const i=typeof e=="function"?yE(n,e,t.custom):e;r=Promise.all(p9(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const gre=SR.length;function _9(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?_9(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<gre;t++){const r=SR[t],i=n.props[r];(fp(i)||i===!1)&&(e[r]=i)}return e}const mre=[...wR].reverse(),pre=wR.length;function _re(n){return e=>Promise.all(e.map(({animation:t,options:r})=>dre(n,t,r)))}function yre(n){let e=_re(n),t=J3(),r=!0;const i=l=>(u,f)=>{var d;const g=yE(n,f,l==="exit"?(d=n.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(g){const{transition:p,transitionEnd:v,...x}=g;u={...u,...x,...v}}return u};function s(l){e=l(n)}function a(l){const{props:u}=n,f=_9(n.parent)||{},d=[],g=new Set;let p={},v=1/0;for(let E=0;E<pre;E++){const I=mre[E],T=t[I],M=u[I]!==void 0?u[I]:f[I],k=fp(M),L=I===l?T.isActive:null;L===!1&&(v=E);let z=M===f[I]&&M!==u[I]&&k;if(z&&r&&n.manuallyAnimateOnMount&&(z=!1),T.protectedKeys={...p},!T.isActive&&L===null||!M&&!T.prevProp||pE(M)||typeof M=="boolean")continue;const P=xre(T.prevProp,M);let C=P||I===l&&T.isActive&&!z&&k||E>v&&k,b=!1;const F=Array.isArray(M)?M:[M];let j=F.reduce(i(I),{});L===!1&&(j={});const{prevResolvedValues:U={}}=T,V={...U,...j},Te=be=>{C=!0,g.has(be)&&(b=!0,g.delete(be)),T.needsAnimating[be]=!0;const le=n.getValue(be);le&&(le.liveStyle=!1)};for(const be in V){const le=j[be],Ae=U[be];if(p.hasOwnProperty(be))continue;let Ie=!1;zT(le)&&zT(Ae)?Ie=!M8(le,Ae):Ie=le!==Ae,Ie?le!=null?Te(be):g.add(be):le!==void 0&&g.has(be)?Te(be):T.protectedKeys[be]=!0}T.prevProp=M,T.prevResolvedValues=j,T.isActive&&(p={...p,...j}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(z&&P)||b)&&d.push(...F.map(be=>({animation:be,options:{type:I}})))}if(g.size){const E={};g.forEach(I=>{const T=n.getBaseTarget(I),M=n.getValue(I);M&&(M.liveStyle=!0),E[I]=T??null}),d.push({animation:E})}let x=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(d):Promise.resolve()}function o(l,u){var f;if(t[l].isActive===u)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(g=>{var p;return(p=g.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),t[l].isActive=u;const d=a(l);for(const g in t)t[g].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=J3(),r=!0}}}function xre(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!M8(e,n):!1}function Wu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function J3(){return{animate:Wu(!0),whileInView:Wu(),whileHover:Wu(),whileTap:Wu(),whileDrag:Wu(),whileFocus:Wu(),exit:Wu()}}class yu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class vre extends yu{constructor(e){super(e),e.animationState||(e.animationState=yre(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Ere=0;class wre extends yu{constructor(){super(...arguments),this.id=Ere++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Sre={animation:{Feature:vre},exit:{Feature:wre}};function pp(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function h_(n){return{point:{x:n.pageX,y:n.pageY}}}const Tre=n=>e=>VR(e)&&n(e,h_(e));function _m(n,e,t,r){return pp(n,e,Tre(t),r)}const eN=(n,e)=>Math.abs(n-e);function Ire(n,e){const t=eN(n.x,e.x),r=eN(n.y,e.y);return Math.sqrt(t**2+r**2)}class y9{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=cS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=Ire(d.offset,{x:0,y:0})>=3;if(!g&&!p)return;const{point:v}=d,{timestamp:x}=li;this.history.push({...v,timestamp:x});const{onStart:E,onMove:I}=this.handlers;g||(E&&E(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,d)},this.handlePointerMove=(d,g)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=lS(g,this.transformPagePoint),jn.update(this.updatePoint,!0)},this.handlePointerUp=(d,g)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=cS(d.type==="pointercancel"?this.lastMoveEventInfo:lS(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,E),v&&v(d,E)},!VR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=h_(e),o=lS(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=li;this.history=[{...l,timestamp:u}];const{onSessionStart:f}=t;f&&f(e,cS(o,this.history)),this.removeListeners=u_(_m(this.contextWindow,"pointermove",this.handlePointerMove),_m(this.contextWindow,"pointerup",this.handlePointerUp),_m(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),au(this.updatePoint)}}function lS(n,e){return e?{point:e(n.point)}:n}function tN(n,e){return{x:n.x-e.x,y:n.y-e.y}}function cS({point:n},e){return{point:n,delta:tN(n,x9(e)),offset:tN(n,Are(e)),velocity:Rre(e,.1)}}function Are(n){return n[0]}function x9(n){return n[n.length-1]}function Rre(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=x9(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Sl(e)));)t--;if(!r)return{x:0,y:0};const s=Tl(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const v9=1e-4,Cre=1-v9,Pre=1+v9,E9=.01,Mre=0-E9,bre=0+E9;function Ws(n){return n.max-n.min}function kre(n,e,t){return Math.abs(n-e)<=t}function nN(n,e,t,r=.5){n.origin=r,n.originPoint=Jn(e.min,e.max,n.origin),n.scale=Ws(t)/Ws(e),n.translate=Jn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Cre&&n.scale<=Pre||isNaN(n.scale))&&(n.scale=1),(n.translate>=Mre&&n.translate<=bre||isNaN(n.translate))&&(n.translate=0)}function ym(n,e,t,r){nN(n.x,e.x,t.x,r?r.originX:void 0),nN(n.y,e.y,t.y,r?r.originY:void 0)}function rN(n,e,t){n.min=t.min+e.min,n.max=n.min+Ws(e)}function Nre(n,e,t){rN(n.x,e.x,t.x),rN(n.y,e.y,t.y)}function iN(n,e,t){n.min=e.min-t.min,n.max=n.min+Ws(e)}function xm(n,e,t){iN(n.x,e.x,t.x),iN(n.y,e.y,t.y)}function Lre(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Jn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Jn(t,n,r.max):Math.min(n,t)),n}function sN(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Ore(n,{top:e,left:t,bottom:r,right:i}){return{x:sN(n.x,t,i),y:sN(n.y,e,r)}}function aN(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Dre(n,e){return{x:aN(n.x,e.x),y:aN(n.y,e.y)}}function Fre(n,e){let t=.5;const r=Ws(n),i=Ws(e);return i>r?t=p0(e.min,e.max-r,n.min):r>i&&(t=p0(n.min,n.max-i,e.min)),Ol(0,1,t)}function Vre(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const eI=.35;function jre(n=eI){return n===!1?n=0:n===!0&&(n=eI),{x:oN(n,"left","right"),y:oN(n,"top","bottom")}}function oN(n,e,t){return{min:lN(n,e),max:lN(n,t)}}function lN(n,e){return typeof n=="number"?n:n[e]||0}const cN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sd=()=>({x:cN(),y:cN()}),uN=()=>({min:0,max:0}),fr=()=>({x:uN(),y:uN()});function aa(n){return[n("x"),n("y")]}function w9({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Gre({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Bre(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function uS(n){return n===void 0||n===1}function tI({scale:n,scaleX:e,scaleY:t}){return!uS(n)||!uS(e)||!uS(t)}function Ju(n){return tI(n)||S9(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function S9(n){return hN(n.x)||hN(n.y)}function hN(n){return n&&n!=="0%"}function Bx(n,e,t){const r=n-t,i=e*r;return t+i}function fN(n,e,t,r,i){return i!==void 0&&(n=Bx(n,i,r)),Bx(n,t,r)+e}function nI(n,e=0,t=1,r,i){n.min=fN(n.min,e,t,r,i),n.max=fN(n.max,e,t,r,i)}function T9(n,{x:e,y:t}){nI(n.x,e.translate,e.scale,e.originPoint),nI(n.y,t.translate,t.scale,t.originPoint)}const dN=.999999999999,gN=1.0000000000001;function Ure(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Id(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,T9(n,a)),r&&Ju(s.latestValues)&&Id(n,s.latestValues))}e.x<gN&&e.x>dN&&(e.x=1),e.y<gN&&e.y>dN&&(e.y=1)}function Td(n,e){n.min=n.min+e,n.max=n.max+e}function mN(n,e,t,r,i=.5){const s=Jn(n.min,n.max,i);nI(n,e,t,s,r)}function Id(n,e){mN(n.x,e.x,e.scaleX,e.scale,e.originX),mN(n.y,e.y,e.scaleY,e.scale,e.originY)}function I9(n,e){return w9(Bre(n.getBoundingClientRect(),e))}function zre(n,e,t){const r=I9(n,t),{scroll:i}=e;return i&&(Td(r.x,i.offset.x),Td(r.y,i.offset.y)),r}const A9=({current:n})=>n?n.ownerDocument.defaultView:null,$re=new WeakMap;class Wre{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(h_(f).point)},s=(f,d)=>{const{drag:g,dragPropagation:p,onDragStart:v}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fte(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),aa(E=>{let I=this.getAxisMotionValue(E).get()||0;if(Lo.test(I)){const{projection:T}=this.visualElement;if(T&&T.layout){const M=T.layout.layoutBox[E];M&&(I=Ws(M)*(parseFloat(I)/100))}}this.originPoint[E]=I}),v&&jn.postRender(()=>v(f,d)),HT(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:v,onDrag:x}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:E}=d;if(p&&this.currentDirection===null){this.currentDirection=Hre(E),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,E),this.updateAxis("y",d.point,E),this.visualElement.render(),x&&x(f,d)},o=(f,d)=>this.stop(f,d),l=()=>aa(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new y9(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:A9(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&jn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Z1(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Lre(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Ed(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Ore(i.layoutBox,t):this.constraints=!1,this.elastic=jre(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&aa(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Vre(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ed(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=zre(r,i.root,this.visualElement.getTransformPagePoint());let a=Dre(i.layout.layoutBox,s);if(t){const o=t(Gre(a));this.hasMutatedConstraints=!!o,o&&(a=w9(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=aa(f=>{if(!Z1(f,t,this.currentDirection))return;let d=l&&l[f]||{};a&&(d={min:0,max:0});const g=i?200:1e6,p=i?40:1e7,v={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,v)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return HT(this.visualElement,e),r.start(qR(e,r,0,t,this.visualElement,!1))}stopAnimation(){aa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){aa(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){aa(t=>{const{drag:r}=this.getProps();if(!Z1(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-Jn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ed(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};aa(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Fre({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),aa(a=>{if(!Z1(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Jn(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;$re.set(this.visualElement,this);const e=this.visualElement.current,t=_m(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ed(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),jn.read(r);const a=pp(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(aa(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=eI,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Z1(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Hre(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Kre extends yu{constructor(e){super(e),this.removeGroupControls=Bs,this.removeListeners=Bs,this.controls=new Wre(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bs}unmount(){this.removeGroupControls(),this.removeListeners()}}const pN=n=>(e,t)=>{n&&jn.postRender(()=>n(e,t))};class Yre extends yu{constructor(){super(...arguments),this.removePointerDownListener=Bs}onPointerDown(e){this.session=new y9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:A9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:pN(e),onStart:pN(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&jn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=_m(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ny={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _N(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Fg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(It.test(n))n=parseFloat(n);else return n;const t=_N(n,e.target.x),r=_N(n,e.target.y);return`${t}% ${r}%`}},Xre={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=ou.parse(n);if(i.length>5)return r;const s=ou.createTransformer(n),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=Jn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class qre extends ce.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;pte(Zre),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ny.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||jn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),IR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function R9(n){const[e,t]=c8(),r=ce.useContext(_R);return w.jsx(qre,{...n,layoutGroup:r,switchLayoutGroup:ce.useContext(_8),isPresent:e,safeToRemove:t})}const Zre={borderRadius:{...Fg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fg,borderTopRightRadius:Fg,borderBottomLeftRadius:Fg,borderBottomRightRadius:Fg,boxShadow:Xre};function Qre(n,e,t){const r=Mi(n)?n:gp(n);return r.start(qR("",r,e,t)),r.animation}function Jre(n){return n instanceof SVGElement&&n.tagName!=="svg"}const eie=(n,e)=>n.depth-e.depth;class tie{constructor(){this.children=[],this.isDirty=!1}add(e){jR(this.children,e),this.isDirty=!0}remove(e){GR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eie),this.isDirty=!1,this.children.forEach(e)}}function nie(n,e){const t=Oo.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(au(r),n(s-e))};return jn.read(r,!0),()=>au(r)}const C9=["TopLeft","TopRight","BottomLeft","BottomRight"],rie=C9.length,yN=n=>typeof n=="string"?parseFloat(n):n,xN=n=>typeof n=="number"||It.test(n);function iie(n,e,t,r,i,s){i?(n.opacity=Jn(0,t.opacity!==void 0?t.opacity:1,sie(r)),n.opacityExit=Jn(e.opacity!==void 0?e.opacity:1,0,aie(r))):s&&(n.opacity=Jn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<rie;a++){const o=`border${C9[a]}Radius`;let l=vN(e,o),u=vN(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||xN(l)===xN(u)?(n[o]=Math.max(Jn(yN(l),yN(u),r),0),(Lo.test(u)||Lo.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=Jn(e.rotate||0,t.rotate||0,r))}function vN(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const sie=P9(0,.5,K8),aie=P9(.5,.95,Bs);function P9(n,e,t){return r=>r<n?0:r>e?1:t(p0(n,e,r))}function EN(n,e){n.min=e.min,n.max=e.max}function ia(n,e){EN(n.x,e.x),EN(n.y,e.y)}function wN(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function SN(n,e,t,r,i){return n-=e,n=Bx(n,1/t,r),i!==void 0&&(n=Bx(n,1/i,r)),n}function oie(n,e=0,t=1,r=.5,i,s=n,a=n){if(Lo.test(e)&&(e=parseFloat(e),e=Jn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Jn(s.min,s.max,r);n===s&&(o-=e),n.min=SN(n.min,e,t,o,i),n.max=SN(n.max,e,t,o,i)}function TN(n,e,[t,r,i],s,a){oie(n,e[t],e[r],e[i],e.scale,s,a)}const lie=["x","scaleX","originX"],cie=["y","scaleY","originY"];function IN(n,e,t,r){TN(n.x,e,lie,t?t.x:void 0,r?r.x:void 0),TN(n.y,e,cie,t?t.y:void 0,r?r.y:void 0)}function AN(n){return n.translate===0&&n.scale===1}function M9(n){return AN(n.x)&&AN(n.y)}function RN(n,e){return n.min===e.min&&n.max===e.max}function uie(n,e){return RN(n.x,e.x)&&RN(n.y,e.y)}function CN(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function b9(n,e){return CN(n.x,e.x)&&CN(n.y,e.y)}function PN(n){return Ws(n.x)/Ws(n.y)}function MN(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class hie{constructor(){this.members=[]}add(e){jR(this.members,e),e.scheduleRender()}remove(e){if(GR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fie(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:f,rotateX:d,rotateY:g,skewX:p,skewY:v}=t;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),g&&(r+=`rotateY(${g}deg) `),p&&(r+=`skewX(${p}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const eh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Jg=typeof window<"u"&&window.MotionDebug!==void 0,hS=["","X","Y","Z"],die={visibility:"hidden"},bN=1e3;let gie=0;function fS(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function k9(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=G8(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",jn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&k9(r)}function N9({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=gie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jg&&(eh.totalNodes=eh.resolvedTargetDeltas=eh.recalculatedProjection=0),this.nodes.forEach(_ie),this.nodes.forEach(wie),this.nodes.forEach(Sie),this.nodes.forEach(yie),Jg&&window.MotionDebug.record(eh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new tie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new BR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Jre(a),this.instance=a;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=nie(g,250),Ny.hasAnimatedSinceResize&&(Ny.hasAnimatedSinceResize=!1,this.nodes.forEach(NN))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeTargetChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||Cie,{onLayoutAnimationStart:E,onLayoutAnimationComplete:I}=f.getProps(),T=!this.targetLayout||!b9(this.targetLayout,v)||p,M=!g&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,M);const k={...OR(x,"layout"),onPlay:E,onComplete:I};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else g||NN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,au(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Tie),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&k9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kN);return}this.isUpdating||this.nodes.forEach(vie),this.isUpdating=!1,this.nodes.forEach(Eie),this.nodes.forEach(mie),this.nodes.forEach(pie),this.clearAllSnapshots();const o=Oo.now();li.delta=Ol(0,1e3/60,o-li.timestamp),li.timestamp=o,li.isProcessing=!0,nS.update.process(li),nS.preRender.process(li),nS.render.process(li),li.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,IR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xie),this.sharedNodes.forEach(Iie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!M9(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;a&&(o||Ju(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Pie(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return fr();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Mie))){const{scroll:f}=this.root;f&&(Td(l.x,f.offset.x),Td(l.y,f.offset.y))}return l}removeElementScroll(a){var o;const l=fr();if(ia(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:d,options:g}=f;f!==this.root&&d&&g.layoutScroll&&(d.wasRoot&&ia(l,a),Td(l.x,d.offset.x),Td(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=fr();ia(l,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Id(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Ju(f.latestValues)&&Id(l,f.latestValues)}return Ju(this.latestValues)&&Id(l,this.latestValues),l}removeTransform(a){const o=fr();ia(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ju(u.latestValues))continue;tI(u.latestValues)&&u.updateSnapshot();const f=fr(),d=u.measurePageBox();ia(f,d),IN(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Ju(this.latestValues)&&IN(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==li.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=li.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fr(),this.relativeTargetOrigin=fr(),xm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ia(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fr(),this.targetWithTransforms=fr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Nre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ia(this.target,this.layout.layoutBox),T9(this.target,this.targetDelta)):ia(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fr(),this.relativeTargetOrigin=fr(),xm(this.relativeTargetOrigin,this.target,p.target),ia(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jg&&eh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tI(this.parent.latestValues)||S9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===li.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;ia(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,p=this.treeScale.y;Ure(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=fr());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wN(this.prevProjectionDelta.x,this.projectionDelta.x),wN(this.prevProjectionDelta.y,this.projectionDelta.y)),ym(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==p||!MN(this.projectionDelta.x,this.prevProjectionDelta.x)||!MN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Jg&&eh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Sd(),this.projectionDelta=Sd(),this.projectionDeltaWithTransform=Sd()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},d=Sd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=fr(),p=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=p!==v,E=this.getStack(),I=!E||E.members.length<=1,T=!!(x&&!I&&this.options.crossfade===!0&&!this.path.some(Rie));this.animationProgress=0;let M;this.mixTargetDelta=k=>{const L=k/1e3;LN(d.x,a.x,L),LN(d.y,a.y,L),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Aie(this.relativeTarget,this.relativeTargetOrigin,g,L),M&&uie(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=fr()),ia(M,this.relativeTarget)),x&&(this.animationValues=f,iie(f,u,this.latestValues,L,T,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(au(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jn.update(()=>{Ny.hasAnimatedSinceResize=!0,this.currentAnimation=Qre(0,bN,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:f}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&L9(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||fr();const d=Ws(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const g=Ws(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}ia(o,l),Id(o,f),ym(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new hie),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&fS("z",a,u,this.animationValues);for(let f=0;f<hS.length;f++)fS(`rotate${hS[f]}`,a,u,this.animationValues),fS(`skew${hS[f]}`,a,u,this.animationValues);a.render();for(const f in u)a.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return die;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=by(a?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=by(a?.pointerEvents)||""),this.hasProjected&&!Ju(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const g=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=fie(this.projectionDeltaWithTransform,this.treeScale,g),f&&(u.transform=f(g,u.transform));const{x:p,y:v}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in Dx){if(g[x]===void 0)continue;const{correct:E,applyTo:I}=Dx[x],T=u.transform==="none"?g[x]:E(g[x],d);if(I){const M=I.length;for(let k=0;k<M;k++)u[I[k]]=T}else u[x]=T}return this.options.layoutId&&(u.pointerEvents=d===this?by(a?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(kN),this.root.sharedNodes.clear()}}}function mie(n){n.updateLayout()}function pie(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?aa(d=>{const g=a?t.measuredBox[d]:t.layoutBox[d],p=Ws(g);g.min=r[d].min,g.max=g.min+p}):L9(s,t.layoutBox,r)&&aa(d=>{const g=a?t.measuredBox[d]:t.layoutBox[d],p=Ws(r[d]);g.max=g.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const o=Sd();ym(o,r,t.layoutBox);const l=Sd();a?ym(l,n.applyTransform(i,!0),t.measuredBox):ym(l,r,t.layoutBox);const u=!M9(o);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:g,layout:p}=d;if(g&&p){const v=fr();xm(v,t.layoutBox,g.layoutBox);const x=fr();xm(x,r,p.layoutBox),b9(v,x)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function _ie(n){Jg&&eh.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function yie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function xie(n){n.clearSnapshot()}function kN(n){n.clearMeasurements()}function vie(n){n.isLayoutDirty=!1}function Eie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function NN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function wie(n){n.resolveTargetDelta()}function Sie(n){n.calcProjection()}function Tie(n){n.resetSkewAndRotation()}function Iie(n){n.removeLeadSnapshot()}function LN(n,e,t){n.translate=Jn(e.translate,0,t),n.scale=Jn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function ON(n,e,t,r){n.min=Jn(e.min,t.min,r),n.max=Jn(e.max,t.max,r)}function Aie(n,e,t,r){ON(n.x,e.x,t.x,r),ON(n.y,e.y,t.y,r)}function Rie(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Cie={duration:.45,ease:[.4,0,.1,1]},DN=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),FN=DN("applewebkit/")&&!DN("chrome/")?Math.round:Bs;function VN(n){n.min=FN(n.min),n.max=FN(n.max)}function Pie(n){VN(n.x),VN(n.y)}function L9(n,e,t){return n==="position"||n==="preserve-aspect"&&!kre(PN(e),PN(t),.2)}function Mie(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const bie=N9({attachResizeListener:(n,e)=>pp(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),dS={current:void 0},O9=N9({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!dS.current){const n=new bie({});n.mount(window),n.setOptions({layoutScroll:!0}),dS.current=n}return dS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),kie={pan:{Feature:Yre},drag:{Feature:Kre,ProjectionNode:O9,MeasureLayout:R9}};function jN(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&jn.postRender(()=>s(e,h_(e)))}class Nie extends yu{mount(){const{current:e}=this.node;e&&(this.unmount=kte(e,t=>(jN(this.node,t,"Start"),r=>jN(this.node,r,"End"))))}unmount(){}}class Lie extends yu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=u_(pp(this.node.current,"focus",()=>this.onFocus()),pp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GN(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&jn.postRender(()=>s(e,h_(e)))}class Oie extends yu{mount(){const{current:e}=this.node;e&&(this.unmount=Dte(e,t=>(GN(this.node,t,"Start"),(r,{success:i})=>GN(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const rI=new WeakMap,gS=new WeakMap,Die=n=>{const e=rI.get(n.target);e&&e(n)},Fie=n=>{n.forEach(Die)};function Vie({root:n,...e}){const t=n||document;gS.has(t)||gS.set(t,{});const r=gS.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Fie,{root:n,...e})),r[i]}function jie(n,e,t){const r=Vie(e);return rI.set(n,t),r.observe(n),()=>{rI.delete(n),r.unobserve(n)}}const Gie={some:0,all:1};class Bie extends yu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Gie[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),g=u?f:d;g&&g(l)};return jie(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Uie(e,t))&&this.startObserver()}unmount(){}}function Uie({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const zie={inView:{Feature:Bie},tap:{Feature:Oie},focus:{Feature:Lie},hover:{Feature:Nie}},$ie={layout:{ProjectionNode:O9,MeasureLayout:R9}},iI={current:null},D9={current:!1};function Wie(){if(D9.current=!0,!!vR)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>iI.current=n.matches;n.addListener(e),e()}else iI.current=!1}const Hie=[...o9,Ii,ou],Kie=n=>Hie.find(a9(n)),BN=new WeakMap;function Yie(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Mi(i))n.addValue(r,i);else if(Mi(s))n.addValue(r,gp(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,gp(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const UN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Xie{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Oo.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,jn.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:f}=a;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=_E(t),this.isVariantNode=m8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in g){const v=g[p];l[p]!==void 0&&Mi(v)&&v.set(l[p],!1)}}mount(e){this.current=e,BN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),D9.current||Wie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:iI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){BN.delete(this.current),this.projection&&this.projection.unmount(),au(this.notifyUpdate),au(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=sf.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&jn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _0){const t=_0[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<UN.length;r++){const i=UN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Yie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=gp(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(i9(i)||X8(i))?i=parseFloat(i):!Kie(i)&&ou.test(t)&&(i=t9(e,t)),this.setBaseTarget(e,Mi(i)?i.get():i)),Mi(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=RR(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Mi(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new BR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class F9 extends Xie{constructor(){super(...arguments),this.KeyframeResolver=l9}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function qie(n){return window.getComputedStyle(n)}class Zie extends F9{constructor(){super(...arguments),this.type="html",this.renderInstance=T8}readValueFromInstance(e,t){if(sf.has(t)){const r=HR(t);return r&&r.default||0}else{const r=qie(e),i=(E8(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return I9(e,t)}build(e,t,r){MR(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return LR(e,t,r)}}class Qie extends F9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(sf.has(t)){const r=HR(t);return r&&r.default||0}return t=I8.has(t)?t:TR(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return C8(e,t,r)}build(e,t,r){bR(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){A8(e,t,r,i)}mount(e){this.isSVGTag=NR(e.tagName),super.mount(e)}}const Jie=(n,e)=>AR(n)?new Qie(e):new Zie(e,{allowProjection:n!==ce.Fragment}),ese=Ite({...Sre,...zie,...kie,...$ie},Jie),nn=Gee(ese);const tse=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nse=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),zN=n=>{const e=nse(n);return e.charAt(0).toUpperCase()+e.slice(1)},V9=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),rse=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var ise={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sse=ce.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>ce.createElement("svg",{ref:l,...ise,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:V9("lucide",i),...!s&&!rse(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,f])=>ce.createElement(u,f)),...Array.isArray(s)?s:[s]]));const xt=(n,e)=>{const t=ce.forwardRef(({className:r,...i},s)=>ce.createElement(sse,{ref:s,iconNode:e,className:V9(`lucide-${tse(zN(n))}`,`lucide-${n}`,r),...i}));return t.displayName=zN(n),t};const ase=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ose=xt("arrow-left",ase);const lse=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cse=xt("arrow-right",lse);const use=[["path",{d:"M7 17V7h10",key:"11bw93"}],["path",{d:"M17 17 7 7",key:"2786uv"}]],hse=xt("arrow-up-left",use);const fse=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],dse=xt("arrow-up-right",fse);const gse=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],mse=xt("arrow-up",gse);const pse=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],_se=xt("book-open",pse);const yse=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xse=xt("calendar",yse);const vse=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],j9=xt("chart-column",vse);const Ese=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wse=xt("check",Ese);const Sse=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],G9=xt("chevron-down",Sse);const Tse=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ise=xt("chevron-left",Tse);const Ase=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],B9=xt("chevron-right",Ase);const Rse=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],U9=xt("chevron-up",Rse);const Cse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],z9=xt("circle-alert",Cse);const Pse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mse=xt("circle-check-big",Pse);const bse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kse=xt("circle",bse);const Nse=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lse=xt("compass",Nse);const Ose=[["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}],["path",{d:"M9 14 4 9l5-5",key:"102s5s"}]],Dse=xt("corner-up-left",Ose);const Fse=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M4 20v-7a4 4 0 0 1 4-4h12",key:"1lu4f8"}]],Vse=xt("corner-up-right",Fse);const jse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],$N=xt("crosshair",jse);const Gse=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],WN=xt("download",Gse);const Bse=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$9=xt("eye-off",Bse);const Use=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],W9=xt("eye",Use);const zse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ZR=xt("file-text",zse);const $se=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Wse=xt("folder-open",$se);const Hse=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Kse=xt("folder",Hse);const Yse=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Xse=xt("grid-3x3",Yse);const qse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],HN=xt("info",qse);const Zse=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],x0=xt("layers",Zse);const Qse=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Jse=xt("link",Qse);const eae=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],QR=xt("loader-circle",eae);const tae=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nae=xt("locate-fixed",tae);const rae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],iae=xt("lock",rae);const sae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],aae=xt("log-out",sae);const oae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],lu=xt("map-pin",oae);const lae=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],JR=xt("map",lae);const cae=[["path",{d:"M5 12h14",key:"1ays0h"}]],uae=xt("minus",cae);const hae=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],sI=xt("mountain",hae);const fae=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],dae=xt("mouse-pointer",fae);const gae=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Uh=xt("navigation",gae);const mae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],pae=xt("pencil",mae);const _ae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ux=xt("plus",_ae);const yae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],aI=xt("rotate-ccw",yae);const xae=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],vae=xt("ruler",xae);const Eae=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],wae=xt("scale",Eae);const Sae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],H9=xt("search",Sae);const Tae=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],K9=xt("settings",Tae);const Iae=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Aae=xt("sliders-horizontal",Iae);const Rae=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Cae=xt("smartphone",Rae);const Pae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Mae=xt("target",Pae);const bae=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],eC=xt("trash-2",bae);const kae=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],Nae=xt("tree-palm",kae);const Lae=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Y9=xt("type",Lae);const Oae=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],X9=xt("upload",Oae);const Dae=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Fae=xt("volume-2",Dae);const Vae=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],jae=xt("volume-x",Vae);const Gae=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Bae=xt("waves",Gae);const Uae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bl=xt("x",Uae);function zae(){const{tracking:n,startTracking:e,stopTracking:t,updatePosition:r,setWatchId:i,resetFirstFix:s}=zn(),a=ce.useCallback(l=>{r(l)},[r]),o=ce.useCallback(l=>{console.error("GPS error:",l),alert(`GPS fout: ${l.message}`),t()},[t]);return ce.useEffect(()=>{if(!n)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),t();return}const l=navigator.geolocation.watchPosition(a,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(l),()=>{navigator.geolocation.clearWatch(l)}},[n,a,o,i,t]),{tracking:n,start:e,stop:t,toggle:()=>n?t():e()}}function $ae(){const{tracking:n,toggle:e}=zae();return w.jsx(nn.button,{className:`
        fixed bottom-2 right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},animate:n?{scale:[1,1.02,1]}:{},transition:n?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":n?"GPS tracking actief":"GPS tracking starten",title:n?"GPS tracking actief":"GPS tracking starten",children:w.jsx(nae,{size:22,strokeWidth:2})})}const KN="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">
    <polygon points="20,4 32,32 20,26 8,32" fill="#4285F4" stroke="white" stroke-width="2.5" stroke-linejoin="round"/>
  </svg>`);function Wae(){const n=Dr(E=>E.map),e=Dr(E=>E.rotation),t=zn(E=>E.position),r=zn(E=>E.accuracy),i=zn(E=>E.tracking),s=zn(E=>E.smoothHeading),a=xa(E=>E.headingUpMode),o=zn(E=>E.firstFix),l=zn(E=>E.resetFirstFix),u=zn(E=>E.config.centerOnUser),f=zn(E=>E.config.animationDuration),d=ce.useRef(null),g=ce.useRef(null),p=ce.useRef(null),v=ce.useRef(0),x=ce.useMemo(()=>new Fn({image:new t0({src:KN,scale:1,rotation:0,rotateWithView:!1,anchor:[.5,.5]})}),[]);return ce.useEffect(()=>{if(!n||!i&&!t)return;const E=Cl([5.1214,52.0907]);return d.current=new ya({geometry:new qa(E)}),d.current.setStyle(x),g.current=new ya({geometry:new qa(E)}),p.current=new zp({source:new jp({features:[g.current,d.current]}),zIndex:1e3}),n.addLayer(p.current),()=>{p.current&&n&&n.removeLayer(p.current)}},[n,i,t,x]),ce.useEffect(()=>{if(!n||!t||!d.current||!g.current)return;const E=Cl([t.lng,t.lat]);if(d.current.getGeometry()?.setCoordinates(E),g.current.getGeometry()?.setCoordinates(E),r){const I=n.getView().getResolution()||1,T=r/I;g.current.setStyle(new Fn({image:new Pl({radius:Math.min(T,100),fill:new mi({color:"rgba(66, 133, 244, 0.1)"})})}))}o&&i&&(n.getView().setCenter(E),n.getView().setZoom(17),l(),console.log(" GPS locked - jumped to position + street level")),i&&u&&!o&&n.getView().animate({center:E,duration:f})},[n,i,t,r,o,l,u,f]),ce.useEffect(()=>{if(!n||!d.current)return;const I=n.getView().getRotation();let T;a?T=-I:T=s!==null?s*Math.PI/180:0;const M=5*Math.PI/180;let k=T-v.current;k>Math.PI&&(k-=2*Math.PI),k<-Math.PI&&(k+=2*Math.PI),!(Math.abs(k)<M)&&(v.current=T,d.current.setStyle(new Fn({image:new t0({src:KN,scale:1,rotation:T,rotateWithView:!1,anchor:[.5,.5]})})))},[n,a,s,e]),null}function Hae(){const n=Ba(t=>t.themesPanelOpen),e=Ba(t=>t.toggleThemesPanel);return w.jsx(nn.button,{className:`
        fixed bottom-[60px] right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":n?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:w.jsx(JR,{size:22,strokeWidth:2})})}function Kae(){return w.jsx(Hae,{})}function $r({title:n,children:e,defaultExpanded:t=!0,layerNames:r}){const[i,s]=ce.useState(t),a=Xr(p=>p.visible),o=Xr(p=>p.setLayerVisibility),l=r?.filter(p=>a[p]).length||0,u=r?.length||0,f=u>0&&l===u,d=l>0&&l<u,g=p=>{if(p.stopPropagation(),!r)return;const v=!f;r.forEach(x=>{o(x,v)})};return w.jsxs("div",{className:"mb-0.5",children:[w.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[w.jsxs("button",{onClick:()=>s(!i),className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",children:[w.jsx(nn.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:w.jsx(B9,{size:14})}),i?w.jsx(Wse,{size:16,className:"text-blue-500"}):w.jsx(Kse,{size:16,className:"text-blue-500"}),w.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:n}),l>0&&w.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:l})]}),r&&r.length>0&&w.jsx("button",{onClick:g,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:f?"#3b82f6":d?"#93c5fd":"white",border:f?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(f||d)&&w.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:w.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),w.jsx(Ks,{initial:!1,children:i&&w.jsx(nn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function st({name:n,type:e}){const t=Xr(f=>f.visible[n]),r=Xr(f=>f.loadingState[n]),i=Xr(f=>f.toggleLayer),s=Xr(f=>f.setLayerVisibility),a=r==="loading",o=r==="error",l=()=>{a||(e==="overlay"?i(n):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(d=>{s(d,d===n)}))},u=t??!1;return w.jsxs("button",{onClick:l,disabled:a,className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${a?"opacity-70 cursor-wait bg-transparent":u?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,children:[w.jsxs("span",{className:o?"text-red-500":"text-gray-600",style:{fontSize:"1em"},children:[n,o&&w.jsx(z9,{size:12,className:"inline ml-1 text-red-500"})]}),w.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:a?"#93c5fd":u?"#3b82f6":"white",border:a?"2px solid #93c5fd":u?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:a?w.jsx(QR,{size:10,strokeWidth:3,className:"animate-spin"}):u?w.jsx(wse,{size:12,strokeWidth:3}):null})]})}function Yae(){const{themesPanelOpen:n,toggleThemesPanel:e}=Ba(),t=ce.useRef(null),{layerPanelFontScale:r,setLayerPanelFontScale:i}=xa(),s=13*r/100;return ce.useEffect(()=>{if(!n)return;const a=l=>{t.current&&!t.current.contains(l.target)&&e()},o=setTimeout(()=>{document.addEventListener("click",a)},100);return()=>{clearTimeout(o),document.removeEventListener("click",a)}},[n,e]),w.jsx(Ks,{children:n&&w.jsxs(nn.div,{ref:t,className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[w.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(x0,{size:14}),w.jsx("span",{className:"font-medium text-sm",children:"Kaartlagen"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:r,onChange:a=>i(parseInt(a.target.value)),className:"w-14 h-1 rounded-full cursor-pointer opacity-60 hover:opacity-100 transition-opacity",style:{WebkitAppearance:"none",appearance:"none",background:"rgba(255,255,255,0.4)"},title:`Tekstgrootte: ${r}%`}),w.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none hover:bg-white/20 transition-colors",children:w.jsx(Bl,{size:16})})]})]}),w.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${s}px`},children:[w.jsx("div",{className:"mb-2 pb-1 border-b border-gray-100",children:w.jsx(st,{name:"Mijn Vondsten",type:"overlay"})}),w.jsxs($r,{title:"Achtergronden",defaultExpanded:!0,children:[w.jsx(st,{name:"CartoDB (licht)",type:"base"}),w.jsx(st,{name:"OpenStreetMap",type:"base"}),w.jsx(st,{name:"Luchtfoto",type:"base"}),w.jsx(st,{name:"Labels Overlay",type:"overlay"}),w.jsx(st,{name:"TMK 1850",type:"base"}),w.jsx(st,{name:"Bonnebladen 1900",type:"base"})]}),w.jsxs($r,{title:"Thema's",defaultExpanded:!0,children:[w.jsxs($r,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen"],children:[w.jsx(st,{name:"Hunebedden",type:"overlay"}),w.jsx(st,{name:"FAMKE Steentijd",type:"overlay"}),w.jsx(st,{name:"Grafheuvels",type:"overlay"}),w.jsx(st,{name:"Terpen",type:"overlay"})]}),w.jsxs($r,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Romeinse wegen (Wereld)","IKAW","Archeo Landschappen"],children:[w.jsx(st,{name:"AMK Monumenten",type:"overlay"}),w.jsxs($r,{title:"AMK per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[w.jsx(st,{name:"AMK Romeins",type:"overlay"}),w.jsx(st,{name:"AMK Steentijd",type:"overlay"}),w.jsx(st,{name:"AMK Vroege ME",type:"overlay"}),w.jsx(st,{name:"AMK Late ME",type:"overlay"}),w.jsx(st,{name:"AMK Overig",type:"overlay"})]}),w.jsx(st,{name:"Romeinse wegen",type:"overlay"}),w.jsx(st,{name:"Romeinse wegen (Wereld)",type:"overlay"}),w.jsx(st,{name:"IKAW",type:"overlay"}),w.jsx(st,{name:"Archeo Landschappen",type:"overlay"})]}),w.jsxs($r,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Essen"],children:[w.jsx(st,{name:"Rijksmonumenten",type:"overlay"}),w.jsx(st,{name:"Werelderfgoed",type:"overlay"}),w.jsx(st,{name:"Religieus Erfgoed",type:"overlay"}),w.jsx(st,{name:"Kastelen",type:"overlay"}),w.jsx(st,{name:"Essen",type:"overlay"})]}),w.jsxs($r,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[w.jsx(st,{name:"WWII Bunkers",type:"overlay"}),w.jsx(st,{name:"Slagvelden",type:"overlay"}),w.jsx(st,{name:"Militaire Vliegvelden",type:"overlay"}),w.jsx(st,{name:"Verdedigingslinies",type:"overlay"}),w.jsx(st,{name:"Militaire Objecten",type:"overlay"}),w.jsx(st,{name:"Inundatiegebieden",type:"overlay"})]}),w.jsxs($r,{title:"Paleokaarten (tijdreizen)",defaultExpanded:!1,layerNames:["Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr."],children:[w.jsx(st,{name:"Paleokaart 800 n.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 9000 v.Chr.",type:"overlay"})]}),w.jsxs($r,{title:"Uiterwaarden (UIKAV)",defaultExpanded:!1,layerNames:["UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[w.jsx(st,{name:"UIKAV Punten",type:"overlay"}),w.jsx(st,{name:"UIKAV Vlakken",type:"overlay"}),w.jsx(st,{name:"UIKAV Expert",type:"overlay"}),w.jsx(st,{name:"UIKAV Buffer",type:"overlay"}),w.jsx(st,{name:"UIKAV Indeling",type:"overlay"})]}),w.jsxs($r,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade"],children:[w.jsx(st,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),w.jsx(st,{name:"AHN4 Hillshade NL",type:"overlay"}),w.jsx(st,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),w.jsx(st,{name:"AHN 0.5m",type:"overlay"}),w.jsx(st,{name:"World Hillshade",type:"overlay"})]}),w.jsxs($r,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Veengebieden","Geomorfologie","Bodemkaart"],children:[w.jsx(st,{name:"Veengebieden",type:"overlay"}),w.jsx(st,{name:"Geomorfologie",type:"overlay"}),w.jsx(st,{name:"Bodemkaart",type:"overlay"})]}),w.jsxs($r,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[w.jsx(st,{name:"Gewaspercelen",type:"overlay"}),w.jsx(st,{name:"Kadastrale Grenzen",type:"overlay"})]}),w.jsxs($r,{title:"Provinciale Kaarten",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[w.jsxs($r,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[w.jsx(st,{name:"Scheepswrakken",type:"overlay"}),w.jsx(st,{name:"Woonheuvels ZH",type:"overlay"}),w.jsx(st,{name:"Romeinse Forten",type:"overlay"}),w.jsx(st,{name:"Windmolens",type:"overlay"}),w.jsx(st,{name:"Erfgoedlijnen",type:"overlay"}),w.jsx(st,{name:"Oude Kernen",type:"overlay"})]}),w.jsxs($r,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[w.jsx(st,{name:"Relictenkaart Punten",type:"overlay"}),w.jsx(st,{name:"Relictenkaart Lijnen",type:"overlay"}),w.jsx(st,{name:"Relictenkaart Vlakken",type:"overlay"})]}),w.jsx($r,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:w.jsx(st,{name:"Verdronken Dorpen",type:"overlay"})})]}),w.jsxs($r,{title:"Fossielen (vondsten)",defaultExpanded:!1,layerNames:["Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[w.jsx(st,{name:"Fossielen Nederland",type:"overlay"}),w.jsx(st,{name:"Fossielen Belgi",type:"overlay"}),w.jsx(st,{name:"Fossielen Duitsland",type:"overlay"}),w.jsx(st,{name:"Fossielen Frankrijk",type:"overlay"})]}),w.jsxs($r,{title:"Recreatie",defaultExpanded:!1,layerNames:["Parken","Speeltuinen","Musea","Strandjes"],children:[w.jsx(st,{name:"Parken",type:"overlay"}),w.jsx(st,{name:"Speeltuinen",type:"overlay"}),w.jsx(st,{name:"Musea",type:"overlay"}),w.jsx(st,{name:"Strandjes",type:"overlay"})]})]})]})]})})}function Xae(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var zh=1,$h=2,Gd=3,qae=4,oI=5,YN=6378137,Zae=6356752314e-3,XN=.0066943799901413165,vm=484813681109536e-20,Ve=Math.PI/2,Qae=.16666666666666666,Jae=.04722222222222222,eoe=.022156084656084655,Je=1e-10,rr=.017453292519943295,fs=57.29577951308232,gn=Math.PI/4,_p=Math.PI*2,dr=3.14159265359,_s={};_s.greenwich=0;_s.lisbon=-9.131906111111;_s.paris=2.337229166667;_s.bogota=-74.080916666667;_s.madrid=-3.687938888889;_s.rome=12.452333333333;_s.bern=7.439583333333;_s.jakarta=106.807719444444;_s.ferro=-17.666666666667;_s.brussels=4.367975;_s.stockholm=18.058277777778;_s.athens=23.7163375;_s.oslo=10.722916666667;const toe={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var qN=/[\s_\-\/\(\)]/g;function cu(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(qN,""),i=-1,s,a;++i<t.length;)if(s=t[i],a=s.toLowerCase().replace(qN,""),a===r)return n[s]}function lI(n){var e={},t=n.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var u=l.split("=");return u.push(!0),o[u[0].toLowerCase()]=u[1],o},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*rr},lat_1:function(o){e.lat1=o*rr},lat_2:function(o){e.lat2=o*rr},lat_ts:function(o){e.lat_ts=o*rr},lon_0:function(o){e.long0=o*rr},lon_1:function(o){e.long1=o*rr},lon_2:function(o){e.long2=o*rr},alpha:function(o){e.alpha=parseFloat(o)*rr},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*rr},lonc:function(o){e.longc=o*rr},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=cu(toe,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*rr},pm:function(o){var l=cu(_s,o);e.from_greenwich=(l||parseFloat(o))*rr},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}class q9{static getId(e){const t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:a}}static convertAxis(e){const t=e[1]||"Unknown";let r;const i=t.match(/^\((.)\)$/);if(i){const u=i[1].toUpperCase();if(u==="E")r="east";else if(u==="N")r="north";else if(u==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${u}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(u=>Array.isArray(u)&&u[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=e.find(u=>Array.isArray(u)&&(u[0]==="LENGTHUNIT"||u[0]==="ANGLEUNIT"||u[0]==="SCALEUNIT")),l=this.convertUnit(o);return{name:t,direction:r,unit:l,order:a}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,t.conversion=e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const r=e.find(g=>Array.isArray(g)&&g[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(i){const g=this.convertUnit(i);t.coordinate_system.unit=g}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const s=e.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(s){const g=this.convert(s);s[0]==="ENSEMBLE"?t.datum_ensemble=g:t.datum=g;const p=e.find(v=>Array.isArray(v)&&v[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(g.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const a=e.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");a&&(t.accuracy=parseFloat(a[1]));const o=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");o&&(t.ellipsoid=this.convert(o)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const l=e.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(l){const g=l.find(p=>Array.isArray(p));t.source_crs=g?this.convert(g):null}const u=e.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(u){const g=u.find(p=>Array.isArray(p));t.target_crs=g?this.convert(g):null}const f=e.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");f?t.transformation=this.convert(f):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const g=t.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const d=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=d)}),d.conversion_factor&&d.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:d});break;default:t.keyword=e[0];break}return t}}class noe extends q9{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class roe extends q9{static convert(e,t={}){super.convert(e,t);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),a=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),o=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},s&&(t.usage.scope=s[1]),a&&(t.usage.area=a[1]),o&&(t.usage.bbox=o.slice(1))}return t}}function ioe(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function soe(n){return(ioe(n)==="2019"?roe:noe).convert(n)}function aoe(n){const e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var yp=1,Z9=2,Q9=3,zx=4,J9=5,tC=-1,ooe=/\s/,loe=/[A-Za-z]/,coe=/[A-Za-z84_]/,vE=/[,\]]/,e7=/[\d\.E\-\+]/;function Ul(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=yp}Ul.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==zx)for(;ooe.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case yp:return this.neutral(n);case Z9:return this.keyword(n);case zx:return this.quoted(n);case J9:return this.afterquote(n);case Q9:return this.number(n);case tC:return}};Ul.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=zx;return}if(vE.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Ul.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=yp;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=yp,this.currentObject=this.stack.pop(),this.currentObject||(this.state=tC);return}};Ul.prototype.number=function(n){if(e7.test(n)){this.word+=n;return}if(vE.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Ul.prototype.quoted=function(n){if(n==='"'){this.state=J9;return}this.word+=n};Ul.prototype.keyword=function(n){if(coe.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=yp;return}if(vE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Ul.prototype.neutral=function(n){if(loe.test(n)){this.word=n,this.state=Z9;return}if(n==='"'){this.word="",this.state=zx;return}if(e7.test(n)){this.word=n,this.state=Q9;return}if(vE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Ul.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===tC)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function uoe(n){var e=new Ul(n);return e.output()}function mS(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(s,a){return Ad(a,s),s},r);e&&(n[e]=i)}function Ad(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},Ad(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&Ad(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&Ad(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],mS(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],mS(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return Ad(n,e[t]);return mS(e,t,n)}}var hoe=.017453292519943295;function Oa(n){return n*hoe}function t7(n){const e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=Oa(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=Oa(n.lat0>0?90:-90),delete n.lat1)}function ZN(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function QN(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function JN(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=QN(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-QN(n.ellipsoid.semi_minor_axis))))}function $x(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?($x(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{const r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,JN(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,JN(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=ZN(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=ZN(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),a=i.value;i.unit&&i.unit.conversion_factor?e[s]=a*i.unit.conversion_factor:i.unit==="degree"?e[s]=a*Math.PI/180:e[s]=a});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":$x(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),t7(e),e)}var foe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function doe(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function n7(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];foe.indexOf(i)!==-1&&goe(n[i]),typeof n[i]=="object"&&n7(n[i])}}function goe(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var s=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=Oa(n.rectified_grid_angle));function o(f){var d=n.to_meter||1;return f*d}var l=function(f){return doe(n,f)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Oa],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Oa],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Oa],["lat0","latitude_of_origin",Oa],["lat0","standard_parallel_1",Oa],["lat1","standard_parallel_1",Oa],["lat2","standard_parallel_2",Oa],["azimuth","Azimuth"],["alpha","azimuth",Oa],["srsCode","name"]];u.forEach(l),t7(n)}function Wx(n){if(typeof n=="object")return $x(n);const e=aoe(n);var t=uoe(n);if(e==="WKT2"){const s=soe(t);return $x(s)}var r=t[0],i={};return Ad(t,i),n7(i),i[r]}function oi(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?oi[n]=lI(arguments[1]):oi[n]=Wx(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?oi[n]=Wx(arguments[1]):(oi[n]=t,t||delete oi[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?oi.apply(e,r):oi(r)});if(typeof n=="string"){if(n in oi)return oi[n]}else"EPSG"in n?oi["EPSG:"+n.EPSG]=n:"ESRI"in n?oi["ESRI:"+n.ESRI]=n:"IAU2000"in n?oi["IAU2000:"+n.IAU2000]=n:console.log(n);return}}Xae(oi);function moe(n){return typeof n=="string"}function poe(n){return n in oi}function _oe(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var yoe=["3857","900913","3785","102113"];function xoe(n){var e=cu(n,"authority");if(e){var t=cu(e,"epsg");return t&&yoe.indexOf(t)>-1}}function voe(n){var e=cu(n,"extension");if(e)return cu(e,"proj4")}function Eoe(n){return n[0]==="+"}function woe(n){if(moe(n)){if(poe(n))return oi[n];if(_oe(n)){var e=Wx(n);if(xoe(e))return oi["EPSG:3857"];var t=voe(e);return t?lI(t):e}if(Eoe(n))return lI(n)}else return"projName"in n?n:Wx(n)}function eL(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function Go(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function f_(n){return n<0?-1:1}function rt(n,e){return e||Math.abs(n)<=dr?n:n-f_(n)*_p}function Ka(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Ve-e))/r}function xp(n,e){for(var t=.5*n,r,i,s=Ve-2*Math.atan(e),a=0;a<=15;a++)if(r=n*Math.sin(s),i=Ve-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function Soe(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Go(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Toe(n){var e=n.x,t=n.y;if(t*fs>90&&t*fs<-90&&e*fs>180&&e*fs<-180)return null;var r,i;if(Math.abs(Math.abs(t)-Ve)<=Je)return null;if(this.sphere)r=this.x0+this.a*this.k0*rt(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(gn+.5*t));else{var s=Math.sin(t),a=Ka(this.e,t,s);r=this.x0+this.a*this.k0*rt(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(a)}return n.x=r,n.y=i,n}function Ioe(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=Ve-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(i=xp(this.e,s),i===-9999)return null}return r=rt(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var Aoe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Roe={init:Soe,forward:Toe,inverse:Ioe,names:Aoe};function Coe(){}function tL(n){return n}var r7=["longlat","identity"];const Poe={init:Coe,forward:tL,inverse:tL,names:r7};var Moe=[Roe,Poe],th={},Rd=[];function i7(n,e){var t=Rd.length;return n.names?(Rd[t]=n,n.names.forEach(function(r){th[r.toLowerCase()]=t}),this):(console.log(e),!0)}function s7(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function boe(n){if(!n)return!1;var e=n.toLowerCase();if(typeof th[e]<"u"&&Rd[th[e]]||(e=s7(e),e in th&&Rd[th[e]]))return Rd[th[e]]}function koe(){Moe.forEach(i7)}const Noe={start:koe,add:i7,get:boe};var a7={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Loe=a7.WGS84;function Ooe(n,e,t,r){var i=n*n,s=e*e,a=(i-s)/i,o=0;r?(n*=1-a*(Qae+a*(Jae+a*eoe)),i=n*n,a=0):o=Math.sqrt(a);var l=(i-s)/s;return{es:a,e:o,ep2:l}}function Doe(n,e,t,r,i){if(!n){var s=cu(a7,r);s||(s=Loe),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<Je)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var Ly={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Foe in Ly){var pS=Ly[Foe];pS.datumName&&(Ly[pS.datumName]=pS)}function Voe(n,e,t,r,i,s,a){var o={};return n===void 0||n==="none"?o.datum_type=oI:o.datum_type=qae,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=zh),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=$h,o.datum_params[3]*=vm,o.datum_params[4]*=vm,o.datum_params[5]*=vm,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=Gd,o.grids=a),o.a=t,o.b=r,o.es=i,o.ep2=s,o}var nC={};function joe(n,e,t){return e instanceof ArrayBuffer?Goe(n,e,t):{ready:Boe(n,e)}}function Goe(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=$oe(i),a=Woe(i,s),o=Hoe(i,a,s,r),l={header:a,subgrids:o};return nC[n]=l,l}async function Boe(n,e){for(var t=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),a=await s.readRasters(),o=a,l=[s.getWidth(),s.getHeight()],u=s.getBoundingBox().map(nL),f=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(nL),d=u[0]+(l[0]-1)*f[0],g=u[3]-(l[1]-1)*f[1],p=o[0],v=o[1],x=[];for(let T=l[1]-1;T>=0;T--)for(let M=l[0]-1;M>=0;M--){var E=T*l[0]+M;x.push([-jc(v[E]),jc(p[E])])}t.push({del:f,lim:l,ll:[-d,g],cvs:x})}var I={header:{nSubgrids:r},subgrids:t};return nC[n]=I,I}function Uoe(n){if(n===void 0)return null;var e=n.split(",");return e.map(zoe)}function zoe(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:nC[n]||null,isNull:!1}}function nL(n){return n*Math.PI/180}function jc(n){return n/3600*Math.PI/180}function $oe(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Woe(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:cI(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function cI(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Hoe(n,e,t,r){for(var i=176,s=[],a=0;a<e.nSubgrids;a++){var o=Yoe(n,i,t),l=Xoe(n,i,o,t,r),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),f=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[jc(o.lowerLongitude),jc(o.lowerLatitude)],del:[jc(o.longitudeInterval),jc(o.latitudeInterval)],lim:[u,f],count:o.gridNodeCount,cvs:Koe(l)});var d=16;r===!1&&(d=8),i+=176+o.gridNodeCount*d}return s}function Koe(n){return n.map(function(e){return[jc(e.longitudeShift),jc(e.latitudeShift)]})}function Yoe(n,e,t){return{name:cI(n,e+8,e+16).trim(),parent:cI(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function Xoe(n,e,t,r,i){var s=e+176,a=16;i===!1&&(a=8);for(var o=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:n.getFloat32(s+l*a,r),longitudeShift:n.getFloat32(s+l*a+4,r)};i!==!1&&(u.latitudeAccuracy=n.getFloat32(s+l*a+8,r),u.longitudeAccuracy=n.getFloat32(s+l*a+12,r)),o.push(u)}return o}function _a(n,e){if(!(this instanceof _a))return new _a(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(u){if(u)throw u};var t=woe(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=_a.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=cu(Ly,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=Doe(t.a,t.b,t.rf,t.ellps,t.sphere),a=Ooe(s.a,s.b,s.rf,t.R_A),o=Uoe(t.nadgrids),l=t.datum||Voe(t.datumCode,t.datum_params,s.a,s.b,a.es,a.ep2,o);eL(this,t),eL(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}_a.projections=Noe;_a.projections.start();function qoe(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===zh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===$h?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function o7(n,e,t){var r=n.x,i=n.y,s=n.z?n.z:0,a,o,l,u;if(i<-Ve&&i>-1.001*Ve)i=-Ve;else if(i>Ve&&i<1.001*Ve)i=Ve;else{if(i<-Ve)return{x:-1/0,y:-1/0,z:n.z};if(i>Ve)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),o=Math.sin(i),u=Math.cos(i),l=o*o,a=t/Math.sqrt(1-e*l),{x:(a+s)*u*Math.cos(r),y:(a+s)*u*Math.sin(r),z:(a*(1-e)+s)*o}}function l7(n,e,t,r){var i=1e-12,s=i*i,a=30,o,l,u,f,d,g,p,v,x,E,I,T,M,k=n.x,L=n.y,z=n.z?n.z:0,P,C,b;if(o=Math.sqrt(k*k+L*L),l=Math.sqrt(k*k+L*L+z*z),o/t<i){if(P=0,l/t<i)return C=Ve,b=-r,{x:n.x,y:n.y,z:n.z}}else P=Math.atan2(L,k);u=z/l,f=o/l,d=1/Math.sqrt(1-e*(2-e)*f*f),v=f*(1-e)*d,x=u*d,M=0;do M++,p=t/Math.sqrt(1-e*x*x),b=o*v+z*x-p*(1-e*x*x),g=e*p/(p+b),d=1/Math.sqrt(1-g*(2-g)*f*f),E=f*(1-g)*d,I=u*d,T=I*v-E*x,v=E,x=I;while(T*T>s&&M<a);return C=Math.atan(I/Math.abs(E)),{x:P,y:C,z:b}}function Zoe(n,e,t){if(e===zh)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===$h){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6];return{x:u*(n.x-l*n.y+o*n.z)+r,y:u*(l*n.x+n.y-a*n.z)+i,z:u*(-o*n.x+a*n.y+n.z)+s}}}function Qoe(n,e,t){if(e===zh)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===$h){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=(n.x-r)/u,d=(n.y-i)/u,g=(n.z-s)/u;return{x:f+l*d-o*g,y:-l*f+d+a*g,z:o*f-a*d+g}}}function Q1(n){return n===zh||n===$h}function Joe(n,e,t){if(qoe(n,e)||n.datum_type===oI||e.datum_type===oI)return t;var r=n.a,i=n.es;if(n.datum_type===Gd){var s=rL(n,!1,t);if(s!==0)return;r=YN,i=XN}var a=e.a,o=e.b,l=e.es;if(e.datum_type===Gd&&(a=YN,o=Zae,l=XN),i===l&&r===a&&!Q1(n.datum_type)&&!Q1(e.datum_type))return t;if(t=o7(t,i,r),Q1(n.datum_type)&&(t=Zoe(t,n.datum_type,n.datum_params)),Q1(e.datum_type)&&(t=Qoe(t,e.datum_type,e.datum_params)),t=l7(t,l,a,o),e.datum_type===Gd){var u=rL(e,!0,t);if(u!==0)return}return t}function rL(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<n.grids.length;a++){var o=n.grids[a];if(s.push(o.name),o.isNull){i=r;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,u=0,f=l.length;u<f;u++){var d=l[u],g=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-g,v=d.ll[1]-g,x=d.ll[0]+(d.lim[0]-1)*d.del[0]+g,E=d.ll[1]+(d.lim[1]-1)*d.del[1]+g;if(!(v>r.y||p>r.x||E<r.y||x<r.x)&&(i=ele(r,e,d),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*fs+" "+r.y*fs+" tried: '"+s+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function ele(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=rt(i.x-Math.PI)+Math.PI;var s=iL(i,t);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,o=1e-12,l,u;do{if(u=iL(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+s.x),y:i.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=rt(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=n.x+s.x,r.y=n.y+s.y);return r}function iL(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var u={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var f={x:e.cvs[a][0],y:e.cvs[a][1]},d=i.x*i.y,g=i.x*(1-i.y),p=(1-i.x)*(1-i.y),v=(1-i.x)*i.y;return s.x=p*o.x+g*l.x+v*f.x+d*u.x,s.y=p*o.y+g*l.y+v*f.y+d*u.y,s}function sL(n,e,t){var r=t.x,i=t.y,s=t.z||0,a,o,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(a=r,"ew".indexOf(n.axis[l])!==-1?o="x":o="y"):l===1?(a=i,"ns".indexOf(n.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),n.axis[l]){case"e":u[o]=a;break;case"w":u[o]=-a;break;case"n":u[o]=a;break;case"s":u[o]=-a;break;case"u":t[o]!==void 0&&(u.z=a);break;case"d":t[o]!==void 0&&(u.z=-a);break;default:return null}return u}function c7(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function tle(n){aL(n.x),aL(n.y)}function aL(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function nle(n,e){return(n.datum.datum_type===zh||n.datum.datum_type===$h||n.datum.datum_type===Gd)&&e.datumCode!=="WGS84"||(e.datum.datum_type===zh||e.datum.datum_type===$h||e.datum.datum_type===Gd)&&n.datumCode!=="WGS84"}function Hx(n,e,t,r){var i;Array.isArray(t)?t=c7(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(tle(t),n.datum&&e.datum&&nle(n,e)&&(i=new _a("WGS84"),t=Hx(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=sL(n,!1,t)),n.projName==="longlat")t={x:t.x*rr,y:t.y*rr,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=Joe(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*fs,y:t.y*fs,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?sL(e,!0,t):(t&&!s&&delete t.z,t)}var oL=_a("WGS84");function _S(n,e,t,r){var i,s,a;return Array.isArray(t)?(i=Hx(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(s=Hx(n,e,t,r),a=Object.keys(t),a.length===2||a.forEach(function(o){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=t[o]}),s)}function J1(n){return n instanceof _a?n:typeof n=="object"&&"oProj"in n?n.oProj:_a(n)}function rle(n,e,t){var r,i,s=!1,a;return typeof e>"u"?(i=J1(n),r=oL,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=J1(n),r=oL,s=!0),r||(r=J1(n)),i||(i=J1(e)),t?_S(r,i,t):(a={forward:function(o,l){return _S(r,i,o,l)},inverse:function(o,l){return _S(i,r,o,l)}},s&&(a.oProj=i),a)}var lL=6,u7="AJSAJS",h7="AFAFAF",Cd=65,rs=73,oa=79,em=86,tm=90;const ile={forward:f7,inverse:sle,toPoint:d7};function f7(n,e){return e=e||5,lle(ale({lat:n[1],lon:n[0]}),e)}function sle(n){var e=rC(m7(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function d7(n){var e=rC(m7(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function yS(n){return n*(Math.PI/180)}function cL(n){return 180*(n/Math.PI)}function ale(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,s=.9996,a,o,l,u,f,d,g,p=yS(e),v=yS(t),x,E;E=Math.floor((t+180)/6)+1,t===180&&(E=60),e>=56&&e<64&&t>=3&&t<12&&(E=32),e>=72&&e<84&&(t>=0&&t<9?E=31:t>=9&&t<21?E=33:t>=21&&t<33?E=35:t>=33&&t<42&&(E=37)),a=(E-1)*6-180+3,x=yS(a),o=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),f=o*Math.cos(p)*Math.cos(p),d=Math.cos(p)*(v-x),g=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var I=s*l*(d+(1-u+f)*d*d*d/6+(5-18*u+u*u+72*f-58*o)*d*d*d*d*d/120)+5e5,T=s*(g+l*Math.tan(p)*(d*d/2+(5-u+9*f+4*f*f)*d*d*d*d/24+(61-58*u+u*u+600*f-330*o)*d*d*d*d*d*d/720));return e<0&&(T+=1e7),{northing:Math.round(T),easting:Math.round(I),zoneNumber:E,zoneLetter:ole(e)}}function rC(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,o=.00669438,l,u=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),f,d,g,p,v,x,E,I,T,M=t-5e5,k=e;r<"N"&&(k-=1e7),E=(i-1)*6-180+3,l=o/(1-o),x=k/s,I=x/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),T=I+(3*u/2-27*u*u*u/32)*Math.sin(2*I)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*I)+151*u*u*u/96*Math.sin(6*I),f=a/Math.sqrt(1-o*Math.sin(T)*Math.sin(T)),d=Math.tan(T)*Math.tan(T),g=l*Math.cos(T)*Math.cos(T),p=a*(1-o)/Math.pow(1-o*Math.sin(T)*Math.sin(T),1.5),v=M/(f*s);var L=T-f*Math.tan(T)/p*(v*v/2-(5+3*d+10*g-4*g*g-9*l)*v*v*v*v/24+(61+90*d+298*g+45*d*d-252*l-3*g*g)*v*v*v*v*v*v/720);L=cL(L);var z=(v-(1+2*d+g)*v*v*v/6+(5-2*g+28*d-3*g*g+8*l+24*d*d)*v*v*v*v*v/120)/Math.cos(T);z=E+cL(z);var P;if(n.accuracy){var C=rC({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});P={top:C.lat,right:C.lon,bottom:L,left:z}}else P={lat:L,lon:z};return P}function ole(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function lle(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+cle(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function cle(n,e,t){var r=g7(t),i=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return ule(i,s,r)}function g7(n){var e=n%lL;return e===0&&(e=lL),e}function ule(n,e,t){var r=t-1,i=u7.charCodeAt(r),s=h7.charCodeAt(r),a=i+n-1,o=s+e,l=!1;a>tm&&(a=a-tm+Cd-1,l=!0),(a===rs||i<rs&&a>rs||(a>rs||i<rs)&&l)&&a++,(a===oa||i<oa&&a>oa||(a>oa||i<oa)&&l)&&(a++,a===rs&&a++),a>tm&&(a=a-tm+Cd-1),o>em?(o=o-em+Cd-1,l=!0):l=!1,(o===rs||s<rs&&o>rs||(o>rs||s<rs)&&l)&&o++,(o===oa||s<oa&&o>oa||(o>oa||s<oa)&&l)&&(o++,o===rs&&o++),o>em&&(o=o-em+Cd-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function m7(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var o=n.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+n;t=n.substring(s,s+=2);for(var l=g7(a),u=hle(t.charAt(0),l),f=fle(t.charAt(1),l);f<dle(o);)f+=2e6;var d=e-s;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var g=d/2,p=0,v=0,x,E,I,T,M;return g>0&&(x=1e5/Math.pow(10,g),E=n.substring(s,s+g),p=parseFloat(E)*x,I=n.substring(s+g),v=parseFloat(I)*x),T=p+u,M=v+f,{easting:T,northing:M,zoneLetter:o,zoneNumber:a,accuracy:x}}function hle(n,e){for(var t=u7.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===rs&&t++,t===oa&&t++,t>tm){if(i)throw"Bad character: "+n;t=Cd,i=!0}r+=1e5}return r}function fle(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=h7.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===rs&&t++,t===oa&&t++,t>em){if(i)throw"Bad character: "+n;t=Cd,i=!0}r+=1e5}return r}function dle(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function v0(n,e,t){if(!(this instanceof v0))return new v0(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}v0.fromMGRS=function(n){return new v0(d7(n))};v0.prototype.toMGRS=function(n){return f7([this.x,this.y],n)};var gle=1,mle=.25,uL=.046875,hL=.01953125,fL=.01068115234375,ple=.75,_le=.46875,yle=.013020833333333334,xle=.007120768229166667,vle=.3645833333333333,Ele=.005696614583333333,wle=.3076171875;function iC(n){var e=[];e[0]=gle-n*(mle+n*(uL+n*(hL+n*fL))),e[1]=n*(ple-n*(uL+n*(hL+n*fL)));var t=n*n;return e[2]=t*(_le-n*(yle+n*xle)),t*=n,e[3]=t*(vle-n*Ele),e[4]=t*n*wle,e}function O0(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var Sle=20;function sC(n,e,t){for(var r=1/(1-e),i=n,s=Sle;s;--s){var a=Math.sin(i),o=1-e*a*a;if(o=(O0(i,a,Math.cos(i),t)-n)*(o*Math.sqrt(o))*r,i-=o,Math.abs(o)<Je)return i}return i}function Tle(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=iC(this.es),this.ml0=O0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Ile(n){var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i,s,a,o=Math.sin(t),l=Math.cos(t);if(this.es){var f=l*r,d=Math.pow(f,2),g=this.ep2*Math.pow(l,2),p=Math.pow(g,2),v=Math.abs(l)>Je?Math.tan(t):0,x=Math.pow(v,2),E=Math.pow(x,2);i=1-this.es*Math.pow(o,2),f=f/Math.sqrt(i);var I=O0(t,o,l,this.en);s=this.a*(this.k0*f*(1+d/6*(1-x+g+d/20*(5-18*x+E+14*g-58*x*g+d/42*(61+179*E-E*x-479*x)))))+this.x0,a=this.a*(this.k0*(I-this.ml0+o*r*f/2*(1+d/12*(5-x+9*g+4*p+d/30*(61+E-58*x+270*g-330*x*g+d/56*(1385+543*E-E*x-3111*x))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<Je)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,a=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(a),u>=1){if(u-1>Je)return 93;a=0}else a=Math.acos(a);t<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return n.x=s,n.y=a,n}function Ale(n){var e,t,r,i,s=(n.x-this.x0)*(1/this.a),a=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,t=sC(e,this.es,this.en),Math.abs(t)<Ve){var d=Math.sin(t),g=Math.cos(t),p=Math.abs(g)>Je?Math.tan(t):0,v=this.ep2*Math.pow(g,2),x=Math.pow(v,2),E=Math.pow(p,2),I=Math.pow(E,2);e=1-this.es*Math.pow(d,2);var T=s*Math.sqrt(e)/this.k0,M=Math.pow(T,2);e=e*p,r=t-e*M/(1-this.es)*.5*(1-M/12*(5+3*E-9*v*E+v-4*x-M/30*(61+90*E-252*v*E+45*I+46*v-M/56*(1385+3633*E+4095*I+1574*I*E)))),i=rt(this.long0+T*(1-M/6*(1+2*E+v-M/20*(5+28*E+24*I+8*v*E+6*v-M/42*(61+662*E+1320*I+720*I*E))))/g,this.over)}else r=Ve*f_(a),i=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),u=this.lat0+a/this.k0,f=Math.cos(u);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2))),r=Math.asin(e),a<0&&(r=-r),l===0&&f===0?i=0:i=rt(Math.atan2(l,f)+this.long0,this.over)}return n.x=i,n.y=r,n}var Rle=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Oy={init:Tle,forward:Ile,inverse:Ale,names:Rle};function p7(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function cs(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function Cle(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function Ple(n){var e=Math.abs(n);return e=Cle(e*(1+e/(cs(1,e)+1))),n<0?-e:e}function aC(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return e+a*Math.sin(2*e)}function Mle(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return Math.sin(e)*a}function ble(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function _7(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),s=p7(t),a=ble(t),o=2*i*a,l=-2*r*s,u=n.length-1,f=n[u],d=0,g=0,p=0,v,x;--u>=0;)v=g,x=d,g=f,d=p,f=-v+o*g-l*d+n[u],p=-x+l*g+o*d;return o=r*a,l=i*s,[o*f-l*p,o*p+l*f]}function kle(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Oy.init.apply(this),this.forward=Oy.forward,this.inverse=Oy.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=aC(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Mle(this.gtu,2*r))}function Nle(n){var e=rt(n.x-this.long0,this.over),t=n.y;t=aC(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),s=Math.sin(e),a=Math.cos(e);t=Math.atan2(r,a*i),e=Math.atan2(s*i,cs(r,i*a)),e=Ple(Math.tan(e));var o=_7(this.gtu,2*t,2*e);t=t+o[0],e=e+o[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),n.x=l,n.y=u,n}function Lle(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=_7(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(p7(e));var a=Math.sin(t),o=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(a*u,cs(l,u*o)),e=Math.atan2(l,u*o),r=rt(e+this.long0,this.over),i=aC(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var Ole=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Dy={init:kle,forward:Nle,inverse:Lle,names:Ole};function Dle(n,e){if(n===void 0){if(n=Math.floor((rt(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var Fle="etmerc";function Vle(){var n=Dle(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*rr,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Dy.init.apply(this),this.forward=Dy.forward,this.inverse=Dy.inverse}var jle=["Universal Transverse Mercator System","utm"];const Gle={init:Vle,names:jle,dependsOn:Fle};function oC(n,e){return Math.pow((1-n)/(1+n),e)}var Ble=20;function Ule(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+gn)/(Math.pow(Math.tan(.5*this.lat0+gn),this.C)*oC(this.e*n,this.ratexp))}function zle(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+gn),this.C)*oC(this.e*Math.sin(t),this.ratexp))-Ve,n.x=this.C*e,n}function $le(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+gn)/this.K,1/this.C),s=Ble;s>0&&(r=2*Math.atan(i*oC(this.e*Math.sin(n.y),-.5*this.e))-Ve,!(Math.abs(r-n.y)<e));--s)n.y=r;return s?(n.x=t,n.y=r,n):null}const lC={init:Ule,forward:zle,inverse:$le};function Wle(){lC.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Hle(n){var e,t,r,i;return n.x=rt(n.x-this.long0,this.over),lC.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Kle(n){var e,t,r,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=cs(n.x,n.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),t=Math.cos(a),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),r=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,lC.inverse.apply(this,[n]),n.x=rt(n.x+this.long0,this.over),n}var Yle=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Xle={init:Wle,forward:Hle,inverse:Kle,names:Yle};function cC(n,e,t){return e*=t,Math.tan(.5*(Ve+n))*Math.pow((1-e)/(1+e),.5*t)}function qle(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Je&&(this.k0=.5*(1+f_(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Je&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Je&&Math.abs(Math.cos(this.lat_ts))>Je&&(this.k0=.5*this.cons*Go(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ka(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Go(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(cC(this.lat0,this.sinlat0,this.e))-Ve,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Zle(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),s,a,o,l,u,f,d=rt(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Je&&Math.abs(t+this.lat0)<=Je?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(d)),n.x=this.a*s*i*Math.sin(d)+this.x0,n.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(d))+this.y0,n):(a=2*Math.atan(cC(t,r,this.e))-Ve,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=Je?(u=Ka(this.e,t*this.con,this.con*r),f=2*this.a*this.k0*u/this.cons,n.x=this.x0+f*Math.sin(e-this.long0),n.y=this.y0-this.con*f*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<Je?(s=2*this.a*this.k0/(1+l*Math.cos(d)),n.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(d))),n.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(d))+this.y0),n.x=s*l*Math.sin(d)+this.x0,n))}function Qle(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,t=this.lat0,a<=Je?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(o)*this.sinlat0+n.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<Je?this.lat0>0?e=rt(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=rt(this.long0+Math.atan2(n.x,n.y),this.over):e=rt(this.long0+Math.atan2(n.x*Math.sin(o),a*this.coslat0*Math.cos(o)-n.y*this.sinlat0*Math.sin(o)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=Je){if(a<=Je)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=a*this.cons/(2*this.a*this.k0),t=this.con*xp(this.e,r),e=this.con*rt(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Je?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/a),e=rt(this.long0+Math.atan2(n.x*Math.sin(i),a*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*xp(this.e,Math.tan(.5*(Ve+s)));return n.x=e,n.y=t,n}var Jle=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const ece={init:qle,forward:Zle,inverse:Qle,names:Jle,ssfn_:cC};function tce(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*u}function nce(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,n.x=this.R*a+this.x0,n}function rce(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+a/this.alpha,l=0,u=s,f=-1e3,d=0;Math.abs(u-f)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),f=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=o,n.y=u,n}var ice=["somerc"];const sce={init:tce,forward:nce,inverse:rce,names:ice};var pd=1e-7;function ace(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(s7(t))!==-1}function oce(){var n,e,t,r,i,s,a,o,l,u,f=0,d,g=0,p=0,v=0,x=0,E=0,I=0;this.no_off=ace(this),this.no_rot="no_rot"in this;var T=!1;"alpha"in this&&(T=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),T&&(I=this.alpha),M&&(f=this.rectified_grid_angle),T||M)g=this.longc;else if(p=this.long1,x=this.lat1,v=this.long2,E=this.lat2,Math.abs(x-E)<=pd||(n=Math.abs(x))<=pd||Math.abs(n-Ve)<=pd||Math.abs(Math.abs(this.lat0)-Ve)<=pd||Math.abs(Math.abs(E)-Ve)<=pd)throw new Error;var k=1-this.es;e=Math.sqrt(k),Math.abs(this.lat0)>Je?(o=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*o*o,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Ka(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),T||M?(T?(d=Math.asin(Math.sin(I)/r),M||(f=I)):(d=f,I=Math.asin(r*Math.sin(d))),this.lam0=g-Math.asin(.5*(i-1/i)*Math.tan(d))/this.B):(s=Math.pow(Ka(this.e,x,Math.sin(x)),this.B),a=Math.pow(Ka(this.e,E,Math.sin(E)),this.B),i=this.E/s,l=(a-s)/(a+s),u=this.E*this.E,u=(u-a*s)/(u+a*s),n=p-v,n<-Math.PI?v-=_p:n>Math.PI&&(v+=_p),this.lam0=rt(.5*(p+v)-Math.atan(u*Math.tan(.5*this.B*(p-v))/l)/this.B,this.over),d=Math.atan(2*Math.sin(this.B*rt(p-this.lam0,this.over))/(i-1/i)),f=I=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(I))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(gn-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(gn+i))}function lce(n){var e={},t,r,i,s,a,o,l,u;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-Ve)>Je){if(a=this.E/Math.pow(Ka(this.e,n.y,Math.sin(n.y)),this.B),o=1/a,t=.5*(a-o),r=.5*(a+o),s=Math.sin(this.B*n.x),i=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<Je)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*n.x),Math.abs(o)<pd?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,o)}else u=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function cce(n){var e,t,r,i,s,a,o,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),o=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<Je)l.x=0,l.y=o<0?-Ve:Ve;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=xp(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var uce=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const hce={init:oce,forward:lce,inverse:cce,names:uce};function fce(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Je)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=Go(this.e,e,t),i=Ka(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=Go(this.e,s,a),l=Ka(this.e,this.lat2,s),u=Math.abs(Math.abs(this.lat0)-Ve)<Je?0:Ka(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Je?this.ns=Math.log(r/o)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function dce(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=Je&&(t=f_(t)*(Ve-2*Je));var r=Math.abs(Math.abs(t)-Ve),i,s;if(r>Je)i=Ka(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var a=this.ns*rt(e-this.long0,this.over);return n.x=this.k0*(s*Math.sin(a))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,n}function gce(n){var e,t,r,i,s,a=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),t=1):(e=-Math.sqrt(a*a+o*o),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*a,t*o)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=xp(this.e,r),i===-9999)return null}else i=-Ve;return s=rt(l/this.ns+this.long0,this.over),n.x=s,n.y=i,n}var mce=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const pce={init:fce,forward:dce,inverse:gce,names:mce};function _ce(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function yce(n){var e,t,r,i,s,a,o,l=n.x,u=n.y,f=rt(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=o*Math.cos(a)/1,n.x=o*Math.sin(a)/1,this.czech||(n.y*=-1,n.x*=-1),n}function xce(n){var e,t,r,i,s,a,o,l,u=n.x;n.x=n.y,n.y=u,this.czech||(n.y*=-1,n.x*=-1),a=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,o=e,l=0;var f=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-n.y)<1e-10&&(l=1),o=n.y,f+=1;while(l===0&&f<15);return f>=15?null:n}var vce=["Krovak","krovak"];const Ece={init:_ce,forward:yce,inverse:xce,names:vce};function Wi(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function d_(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function g_(n){return .375*n*(1+.25*n*(1+.46875*n))}function m_(n){return .05859375*n*n*(1+.75*n)}function p_(n){return n*n*n*(35/3072)}function uC(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function xu(n){return Math.abs(n)<Ve?n:n-f_(n)*Math.PI}function Kx(n,e,t,r,i){var s,a;s=n/e;for(var o=0;o<15;o++)if(a=(n-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function wce(){this.sphere||(this.e0=d_(this.es),this.e1=g_(this.es),this.e2=m_(this.es),this.e3=p_(this.es),this.ml0=this.a*Wi(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Sce(n){var e,t,r=n.x,i=n.y;if(r=rt(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),o=uC(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),f=u*u,d=this.es*a*a/(1-this.es),g=this.a*Wi(this.e0,this.e1,this.e2,this.e3,i);e=o*u*(1-f*l*(1/6-(8-l+8*d)*f/120)),t=g-this.ml0+o*s/a*f*(.5+(5-l+6*d)*f/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function Tce(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+t,o=Kx(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Ve)<=Je)return n.x=this.long0,n.y=Ve,t<0&&(n.y*=-1),n;var l=uC(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(o),2),d=e*this.a/l,g=d*d;r=o-l*Math.tan(o)/u*d*d*(.5-(1+3*f)*d*d/24),i=d*(1-g*(f/3+(1+3*f)*f*g/15))/Math.cos(o)}return n.x=rt(i+this.long0,this.over),n.y=xu(r),n}var Ice=["Cassini","Cassini_Soldner","cass"];const Ace={init:wce,forward:Sce,inverse:Tce,names:Ice};function qc(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var uI=1,hI=2,fI=3,Fy=4;function Rce(){var n=Math.abs(this.lat0);if(Math.abs(n-Ve)<Je?this.mode=this.lat0<0?uI:hI:Math.abs(n)<Je?this.mode=fI:this.mode=Fy,this.es>0){var e;switch(this.qp=qc(this.e,1),this.mmf=.5/(1-this.es),this.apa=Dce(this.es),this.mode){case hI:this.dd=1;break;case uI:this.dd=1;break;case fI:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Fy:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qc(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Fy&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Cce(n){var e,t,r,i,s,a,o,l,u,f,d=n.x,g=n.y;if(d=rt(d-this.long0,this.over),this.sphere){if(s=Math.sin(g),f=Math.cos(g),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+f*r:1+this.sinph0*s+this.cosph0*f*r,t<=Je)return null;t=Math.sqrt(2/t),e=t*f*Math.sin(d),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(g+this.lat0)<Je)return null;t=gn-g*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(d),t*=r}}else{switch(o=0,l=0,u=0,r=Math.cos(d),i=Math.sin(d),s=Math.sin(g),a=qc(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=Ve+g,a=this.qp-a;break;case this.S_POLE:u=g-Ve,a=this.qp+a;break}if(Math.abs(u)<Je)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*o-this.sinb1*l*r):t=(u=Math.sqrt(2/(1+l*r)))*o*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,t=r*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function Pce(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,s,a,o,l,u;if(this.sphere){var f=0,d,g=0;if(d=Math.sqrt(e*e+t*t),i=d*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=Je?0:Math.asin(t*g/d),e*=g,t=f*d;break;case this.OBLIQ:i=Math.abs(d)<=Je?this.lat0:Math.asin(f*this.sinph0+t*g*this.cosph0/d),e*=g*this.cosph0,t=(f-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:t=-t,i=Ve-i;break;case this.S_POLE:i-=Ve;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<Je)return n.x=this.long0,n.y=this.lat0,n;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(u=s*this.sinb1+t*a*this.cosb1/l,o=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*a):(u=t*a/l,o=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=e*e+t*t,!o)return n.x=this.long0,n.y=this.lat0,n;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,t),i=Fce(Math.asin(u),this.apa)}return n.x=rt(this.long0+r,this.over),n.y=i,n}var Mce=.3333333333333333,bce=.17222222222222222,kce=.10257936507936508,Nce=.06388888888888888,Lce=.0664021164021164,Oce=.016415012942191543;function Dce(n){var e,t=[];return t[0]=n*Mce,e=n*n,t[0]+=e*bce,t[1]=e*Nce,e*=n,t[0]+=e*kce,t[1]+=e*Lce,t[2]=e*Oce,t}function Fce(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var Vce=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const jce={init:Rce,forward:Cce,inverse:Pce,names:Vce,S_POLE:uI,N_POLE:hI,EQUIT:fI,OBLIQ:Fy};function uu(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function Gce(){Math.abs(this.lat1+this.lat2)<Je||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Go(this.e3,this.sin_po,this.cos_po),this.qs1=qc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Go(this.e3,this.sin_po,this.cos_po),this.qs2=qc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qc(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Je?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Bce(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=qc(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*rt(e-this.long0,this.over),a=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return n.x=a,n.y=o,n}function Uce(n){var e,t,r,i,s,a;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,t)),s=rt(i/this.ns0+this.long0,this.over),n.x=s,n.y=a,n}function zce(n,e){var t,r,i,s,a,o=uu(.5*e);if(n<Je)return o;for(var l=n*n,u=1;u<=25;u++)if(t=Math.sin(o),r=Math.cos(o),i=n*t,s=1-i*i,a=.5*s*s/r*(e/(1-l)-t/s+.5/n*Math.log((1-i)/(1+i))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var $ce=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Wce={init:Gce,forward:Bce,inverse:Uce,names:$ce,phi1z:zce};function Hce(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Kce(n){var e,t,r,i,s,a,o,l,u=n.x,f=n.y;return r=rt(u-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,a>0||Math.abs(a)<=Je?(o=this.x0+this.a*s*t*Math.sin(r)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)/a):(o=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function Yce(n){var e,t,r,i,s,a;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),a=uu(r*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),s=rt(this.long0+s,this.over)):(a=this.phic0,s=0),n.x=s,n.y=a,n}var Xce=["gnom"];const qce={init:Hce,forward:Kce,inverse:Yce,names:Xce};function Zce(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Ve:Ve;for(var r=Math.asin(.5*e),i,s,a,o,l=0;l<30;l++)if(s=Math.sin(r),a=Math.cos(r),o=n*s,i=Math.pow(1-o*o,2)/(2*a)*(e/(1-n*n)-s/(1-o*o)+.5/n*Math.log((1-o)/(1+o))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function Qce(){this.sphere||(this.k0=Go(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Jce(n){var e=n.x,t=n.y,r,i,s=rt(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var a=qc(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return n.x=r,n.y=i,n}function eue(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=rt(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=Zce(this.e,2*n.y*this.k0/this.a),e=rt(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var tue=["cea"];const nue={init:Qce,forward:Jce,inverse:eue,names:tue};function rue(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function iue(n){var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i=xu(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function sue(n){var e=n.x,t=n.y;return n.x=rt(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=xu(this.lat0+(t-this.y0)/this.a),n}var aue=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const oue={init:rue,forward:iue,inverse:sue,names:aue};var dL=20;function lue(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d_(this.es),this.e1=g_(this.es),this.e2=m_(this.es),this.e3=p_(this.es),this.ml0=this.a*Wi(this.e0,this.e1,this.e2,this.e3,this.lat0)}function cue(n){var e=n.x,t=n.y,r,i,s,a=rt(e-this.long0,this.over);if(s=a*Math.sin(t),this.sphere)Math.abs(t)<=Je?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),i=this.a*(xu(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=Je)r=this.a*a,i=-1*this.ml0;else{var o=uC(this.a,this.e,Math.sin(t))/Math.tan(t);r=o*Math.sin(s),i=this.a*Wi(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(s))}return n.x=r+this.x0,n.y=i+this.y0,n}function uue(n){var e,t,r,i,s,a,o,l,u;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Je)e=rt(r/this.a+this.long0,this.over),t=0;else{a=this.lat0+i/this.a,o=r*r/this.a/this.a+a*a,l=a;var f;for(s=dL;s;--s)if(f=Math.tan(l),u=-1*(a*(l*f+1)-l-.5*(l*l+o)*f)/((l-a)/f-1),l+=u,Math.abs(u)<=Je){t=l;break}e=rt(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=Je)t=0,e=rt(this.long0+r/this.a,this.over);else{a=(this.ml0+i)/this.a,o=r*r/this.a/this.a+a*a,l=a;var d,g,p,v,x;for(s=dL;s;--s)if(x=this.e*Math.sin(l),d=Math.sqrt(1-x*x)*Math.tan(l),g=this.a*Wi(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),v=g/this.a,u=(a*(d*v+1)-v-.5*d*(v*v+o))/(this.es*Math.sin(2*l)*(v*v+o-2*a*v)/(4*d)+(a-v)*(d*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=Je){t=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=rt(this.long0+Math.asin(r*d/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var hue=["Polyconic","American_Polyconic","poly"];const fue={init:lue,forward:cue,inverse:uue,names:hue};function due(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function gue(n){var e,t=n.x,r=n.y,i=r-this.lat0,s=t-this.long0,a=i/vm*1e-5,o=s,l=1,u=0;for(e=1;e<=10;e++)l=l*a,u=u+this.A[e]*l;var f=u,d=o,g=1,p=0,v,x,E=0,I=0;for(e=1;e<=6;e++)v=g*f-p*d,x=p*f+g*d,g=v,p=x,E=E+this.B_re[e]*g-this.B_im[e]*p,I=I+this.B_im[e]*g+this.B_re[e]*p;return n.x=I*this.a+this.x0,n.y=E*this.a+this.y0,n}function mue(n){var e,t=n.x,r=n.y,i=t-this.x0,s=r-this.y0,a=s/this.a,o=i/this.a,l=1,u=0,f,d,g=0,p=0;for(e=1;e<=6;e++)f=l*a-u*o,d=u*a+l*o,l=f,u=d,g=g+this.C_re[e]*l-this.C_im[e]*u,p=p+this.C_im[e]*l+this.C_re[e]*u;for(var v=0;v<this.iterations;v++){var x=g,E=p,I,T,M=a,k=o;for(e=2;e<=6;e++)I=x*g-E*p,T=E*g+x*p,x=I,E=T,M=M+(e-1)*(this.B_re[e]*x-this.B_im[e]*E),k=k+(e-1)*(this.B_im[e]*x+this.B_re[e]*E);x=1,E=0;var L=this.B_re[1],z=this.B_im[1];for(e=2;e<=6;e++)I=x*g-E*p,T=E*g+x*p,x=I,E=T,L=L+e*(this.B_re[e]*x-this.B_im[e]*E),z=z+e*(this.B_im[e]*x+this.B_re[e]*E);var P=L*L+z*z;g=(M*L+k*z)/P,p=(k*L-M*z)/P}var C=g,b=p,F=1,j=0;for(e=1;e<=9;e++)F=F*C,j=j+this.D[e]*F;var U=this.lat0+j*vm*1e5,V=this.long0+b;return n.x=V,n.y=U,n}var pue=["New_Zealand_Map_Grid","nzmg"];const _ue={init:due,forward:gue,inverse:mue,names:pue};function yue(){}function xue(n){var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=s,n}function vue(n){n.x-=this.x0,n.y-=this.y0;var e=rt(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var Eue=["Miller_Cylindrical","mill"];const wue={init:yue,forward:xue,inverse:vue,names:Eue};var Sue=20;function Tue(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=iC(this.es)}function Iue(n){var e,t,r=n.x,i=n.y;if(r=rt(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=Sue;a;--a){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<Je)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);t=this.a*O0(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function Aue(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=uu((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=uu(Math.sin(e)/this.n)),r=rt(r+this.long0,this.over),e=xu(e)):(e=sC(n.y/this.a,this.es,this.en),i=Math.abs(e),i<Ve?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=rt(t,this.over)):i-Je<Ve&&(r=this.long0)),n.x=r,n.y=e,n}var Rue=["Sinusoidal","sinu"];const Cue={init:Tue,forward:Iue,inverse:Aue,names:Rue};function Pue(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function Mue(n){for(var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i=t,s=Math.PI*Math.sin(t);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Je)break}i/=2,Math.PI/2-Math.abs(t)<Je&&(r=0);var o=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=o,n.y=l,n}function bue(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=rt(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var kue=["Mollweide","moll"];const Nue={init:Pue,forward:Mue,inverse:bue,names:kue};function Lue(){Math.abs(this.lat1+this.lat2)<Je||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d_(this.es),this.e1=g_(this.es),this.e2=m_(this.es),this.e3=p_(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Go(this.e,this.sin_phi,this.cos_phi),this.ml1=Wi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Je?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Go(this.e,this.sin_phi,this.cos_phi),this.ml2=Wi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Wi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Oue(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=Wi(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var s=this.ns*rt(e-this.long0,this.over),a=this.x0+r*Math.sin(s),o=this.y0+this.rh-r*Math.cos(s);return n.x=a,n.y=o,n}function Due(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=rt(this.long0+s/this.ns,this.over),r=xu(this.g-t/this.a),n.x=i,n.y=r,n;var a=this.g-t/this.a;return r=Kx(a,this.e0,this.e1,this.e2,this.e3),i=rt(this.long0+s/this.ns,this.over),n.x=i,n.y=r,n}var Fue=["Equidistant_Conic","eqdc"];const Vue={init:Lue,forward:Oue,inverse:Due,names:Fue};function jue(){this.R=this.a}function Gue(n){var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i,s;Math.abs(t)<=Je&&(i=this.x0+this.R*r,s=this.y0);var a=uu(2*Math.abs(t/Math.PI));(Math.abs(r)<=Je||Math.abs(Math.abs(t)-Ve)<=Je)&&(i=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/r-r/Math.PI),l=o*o,u=Math.sin(a),f=Math.cos(a),d=f/(u+f-1),g=d*d,p=d*(2/u-1),v=p*p,x=Math.PI*this.R*(o*(d-v)+Math.sqrt(l*(d-v)*(d-v)-(v+l)*(g-v)))/(v+l);r<0&&(x=-x),i=this.x0+x;var E=l+d;return x=Math.PI*this.R*(p*E-o*Math.sqrt((v+l)*(l+1)-E*E))/(v+l),t>=0?s=this.y0+x:s=this.y0-x,n.x=i,n.y=s,n}function Bue(n){var e,t,r,i,s,a,o,l,u,f,d,g,p;return n.x-=this.x0,n.y-=this.y0,d=Math.PI*this.R,r=n.x/d,i=n.y/d,s=r*r+i*i,a=-Math.abs(i)*(1+s),o=a-2*i*i+r*r,l=-2*a+1+2*i*i+s*s,p=i*i/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,u=(a-o*o/3/l)/l,f=2*Math.sqrt(-u/3),d=3*p/u/f,Math.abs(d)>1&&(d>=0?d=1:d=-1),g=Math.acos(d)/3,n.y>=0?t=(-f*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI:t=-(-f*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI,Math.abs(r)<Je?e=this.long0:e=rt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),n.x=e,n.y=t,n}var Uue=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const zue={init:jue,forward:Gue,inverse:Bue,names:Uue};function $ue(n,e,t,r,i,s){const a=r-e,o=Math.atan((1-s)*Math.tan(n)),l=Math.atan((1-s)*Math.tan(t)),u=Math.sin(o),f=Math.cos(o),d=Math.sin(l),g=Math.cos(l);let p=a,v,x=100,E,I,T,M,k,L,z,P,C,b,F,j,U,V;do{if(E=Math.sin(p),I=Math.cos(p),T=Math.sqrt(g*E*(g*E)+(f*d-u*g*I)*(f*d-u*g*I)),T===0)return{azi1:0,s12:0};M=u*d+f*g*I,k=Math.atan2(T,M),L=f*g*E/T,z=1-L*L,P=z!==0?M-2*u*d/z:0,C=s/16*z*(4+s*(4-3*z)),v=p,p=a+(1-C)*s*L*(k+C*T*(P+C*M*(-1+2*P*P)))}while(Math.abs(p-v)>1e-12&&--x>0);return x===0?{azi1:NaN,s12:NaN}:(b=z*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),F=1+b/16384*(4096+b*(-768+b*(320-175*b))),j=b/1024*(256+b*(-128+b*(74-47*b))),U=j*T*(P+j/4*(M*(-1+2*P*P)-j/6*P*(-3+4*T*T)*(-3+4*P*P))),V=i*(1-s)*F*(k-U),{azi1:Math.atan2(g*E,f*d-u*g*I),s12:V})}function Wue(n,e,t,r,i,s){const a=Math.atan((1-s)*Math.tan(n)),o=Math.sin(a),l=Math.cos(a),u=Math.sin(t),f=Math.cos(t),d=Math.atan2(o,l*f),g=l*u,p=1-g*g,v=p*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),x=1+v/16384*(4096+v*(-768+v*(320-175*v))),E=v/1024*(256+v*(-128+v*(74-47*v)));let I=r/(i*(1-s)*x),T,M=100,k,L,z,P;do k=Math.cos(2*d+I),L=Math.sin(I),z=Math.cos(I),P=E*L*(k+E/4*(z*(-1+2*k*k)-E/6*k*(-3+4*L*L)*(-3+4*k*k))),T=I,I=r/(i*(1-s)*x)+P;while(Math.abs(I-T)>1e-12&&--M>0);if(M===0)return{lat2:NaN,lon2:NaN};const C=o*L-l*z*f,b=Math.atan2(o*z+l*L*f,(1-s)*Math.sqrt(g*g+C*C)),F=Math.atan2(L*u,l*z-o*L*f),j=s/16*p*(4+s*(4-3*p)),U=F-(1-j)*s*g*(I+j*L*(k+j*z*(-1+2*k*k))),V=e+U;return{lat2:b,lon2:V}}function Hue(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Kue(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),s=rt(e-this.long0,this.over),a,o,l,u,f,d,g,p,v,x,E;return this.sphere?Math.abs(this.sin_p12-1)<=Je?(n.x=this.x0+this.a*(Ve-t)*Math.sin(s),n.y=this.y0-this.a*(Ve-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=Je?(n.x=this.x0+this.a*(Ve+t)*Math.sin(s),n.y=this.y0+this.a*(Ve+t)*Math.cos(s),n):(v=this.sin_p12*r+this.cos_p12*i*Math.cos(s),g=Math.acos(v),p=g?g/Math.sin(g):1,n.x=this.x0+this.a*p*i*Math.sin(s),n.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),n):(a=d_(this.es),o=g_(this.es),l=m_(this.es),u=p_(this.es),Math.abs(this.sin_p12-1)<=Je?(f=this.a*Wi(a,o,l,u,Ve),d=this.a*Wi(a,o,l,u,t),n.x=this.x0+(f-d)*Math.sin(s),n.y=this.y0-(f-d)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=Je?(f=this.a*Wi(a,o,l,u,Ve),d=this.a*Wi(a,o,l,u,t),n.x=this.x0+(f+d)*Math.sin(s),n.y=this.y0+(f+d)*Math.cos(s),n):Math.abs(e)<Je&&Math.abs(t-this.lat0)<Je?(n.x=n.y=0,n):(x=$ue(this.lat0,this.long0,t,e,this.a,this.f),E=x.azi1,n.x=x.s12*Math.sin(E),n.y=x.s12*Math.cos(E),n))}function Yue(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a,o,l,u,f,d,g,p,v,x,E;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*Ve*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=Je?a=this.lat0:(a=uu(i*this.sin_p12+n.y*r*this.cos_p12/e),o=Math.abs(this.lat0)-Ve,Math.abs(o)<=Je?this.lat0>=0?s=rt(this.long0+Math.atan2(n.x,-n.y),this.over):s=rt(this.long0-Math.atan2(-n.x,n.y),this.over):s=rt(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=s,n.y=a,n)):(l=d_(this.es),u=g_(this.es),f=m_(this.es),d=p_(this.es),Math.abs(this.sin_p12-1)<=Je?(g=this.a*Wi(l,u,f,d,Ve),e=Math.sqrt(n.x*n.x+n.y*n.y),p=g-e,a=Kx(p/this.a,l,u,f,d),s=rt(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=s,n.y=a,n):Math.abs(this.sin_p12+1)<=Je?(g=this.a*Wi(l,u,f,d,Ve),e=Math.sqrt(n.x*n.x+n.y*n.y),p=e-g,a=Kx(p/this.a,l,u,f,d),s=rt(this.long0+Math.atan2(n.x,n.y),this.over),n.x=s,n.y=a,n):(v=Math.atan2(n.x,n.y),x=Math.sqrt(n.x*n.x+n.y*n.y),E=Wue(this.lat0,this.long0,v,x,this.a,this.f),n.x=E.lon2,n.y=E.lat2,n))}var Xue=["Azimuthal_Equidistant","aeqd"];const que={init:Hue,forward:Kue,inverse:Yue,names:Xue};function Zue(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Que(n){var e,t,r,i,s,a,o,l,u=n.x,f=n.y;return r=rt(u-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,(a>0||Math.abs(a)<=Je)&&(o=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function Jue(n){var e,t,r,i,s,a,o;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=uu(e/this.a),r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=Je?(o=this.lat0,n.x=a,n.y=o,n):(o=uu(i*this.sin_p14+n.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-Ve,Math.abs(s)<=Je?(this.lat0>=0?a=rt(this.long0+Math.atan2(n.x,-n.y),this.over):a=rt(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=a,n.y=o,n):(a=rt(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=a,n.y=o,n))}var ehe=["ortho"];const the={init:Zue,forward:Que,inverse:Jue,names:ehe};var Zn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},mn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function nhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ve-gn/2?this.face=Zn.TOP:this.lat0<=-(Ve-gn/2)?this.face=Zn.BOTTOM:Math.abs(this.long0)<=gn?this.face=Zn.FRONT:Math.abs(this.long0)<=Ve+gn?this.face=this.long0>0?Zn.RIGHT:Zn.LEFT:this.face=Zn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function rhe(n){var e={x:0,y:0},t,r,i,s,a,o,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===Zn.TOP)s=Ve-t,r>=gn&&r<=Ve+gn?(l.value=mn.AREA_0,i=r-Ve):r>Ve+gn||r<=-(Ve+gn)?(l.value=mn.AREA_1,i=r>0?r-dr:r+dr):r>-(Ve+gn)&&r<=-gn?(l.value=mn.AREA_2,i=r+Ve):(l.value=mn.AREA_3,i=r);else if(this.face===Zn.BOTTOM)s=Ve+t,r>=gn&&r<=Ve+gn?(l.value=mn.AREA_0,i=-r+Ve):r<gn&&r>=-gn?(l.value=mn.AREA_1,i=-r):r<-gn&&r>=-(Ve+gn)?(l.value=mn.AREA_2,i=-r-Ve):(l.value=mn.AREA_3,i=r>0?-r+dr:-r-dr);else{var u,f,d,g,p,v,x;this.face===Zn.RIGHT?r=Bd(r,+Ve):this.face===Zn.BACK?r=Bd(r,+dr):this.face===Zn.LEFT&&(r=Bd(r,-Ve)),g=Math.sin(t),p=Math.cos(t),v=Math.sin(r),x=Math.cos(r),u=p*x,f=p*v,d=g,this.face===Zn.FRONT?(s=Math.acos(u),i=ey(s,d,f,l)):this.face===Zn.RIGHT?(s=Math.acos(f),i=ey(s,d,-u,l)):this.face===Zn.BACK?(s=Math.acos(-u),i=ey(s,d,-f,l)):this.face===Zn.LEFT?(s=Math.acos(-f),i=ey(s,d,u,l)):(s=i=0,l.value=mn.AREA_0)}return o=Math.atan(12/dr*(i+Math.acos(Math.sin(i)*Math.cos(gn))-Ve)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===mn.AREA_1?o+=Ve:l.value===mn.AREA_2?o+=dr:l.value===mn.AREA_3&&(o+=1.5*dr),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function ihe(n){var e={lam:0,phi:0},t,r,i,s,a,o,l,u,f,d={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?d.value=mn.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(d.value=mn.AREA_1,t-=Ve):n.x<0&&-n.x>=Math.abs(n.y)?(d.value=mn.AREA_2,t=t<0?t+dr:t-dr):(d.value=mn.AREA_3,t+=Ve),f=dr/12*Math.tan(t),a=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),o=Math.atan(a),i=Math.cos(t),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===Zn.TOP)u=Math.acos(l),e.phi=Ve-u,d.value===mn.AREA_0?e.lam=o+Ve:d.value===mn.AREA_1?e.lam=o<0?o+dr:o-dr:d.value===mn.AREA_2?e.lam=o-Ve:e.lam=o;else if(this.face===Zn.BOTTOM)u=Math.acos(l),e.phi=u-Ve,d.value===mn.AREA_0?e.lam=-o+Ve:d.value===mn.AREA_1?e.lam=-o:d.value===mn.AREA_2?e.lam=-o-Ve:e.lam=o<0?-o-dr:-o+dr;else{var g,p,v;g=l,f=g*g,f>=1?v=0:v=Math.sqrt(1-f)*Math.sin(o),f+=v*v,f>=1?p=0:p=Math.sqrt(1-f),d.value===mn.AREA_1?(f=p,p=-v,v=f):d.value===mn.AREA_2?(p=-p,v=-v):d.value===mn.AREA_3&&(f=p,p=v,v=-f),this.face===Zn.RIGHT?(f=g,g=-p,p=f):this.face===Zn.BACK?(g=-g,p=-p):this.face===Zn.LEFT&&(f=g,g=p,p=-f),e.phi=Math.acos(-v)-Ve,e.lam=Math.atan2(p,g),this.face===Zn.RIGHT?e.lam=Bd(e.lam,-Ve):this.face===Zn.BACK?e.lam=Bd(e.lam,-dr):this.face===Zn.LEFT&&(e.lam=Bd(e.lam,+Ve))}if(this.es!==0){var x,E,I;x=e.phi<0?1:0,E=Math.tan(e.phi),I=this.b/Math.sqrt(E*E+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-I*I)/(this.one_minus_f*I)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function ey(n,e,t,r){var i;return n<Je?(r.value=mn.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=gn?r.value=mn.AREA_0:i>gn&&i<=Ve+gn?(r.value=mn.AREA_1,i-=Ve):i>Ve+gn||i<=-(Ve+gn)?(r.value=mn.AREA_2,i=i>=0?i-dr:i+dr):(r.value=mn.AREA_3,i+=Ve)),i}function Bd(n,e){var t=n+e;return t<-dr?t+=_p:t>+dr&&(t-=_p),t}var she=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const ahe={init:nhe,forward:rhe,inverse:ihe,names:she};var dI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],nm=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],y7=.8487,x7=1.3523,v7=fs/5,ohe=1/v7,Pd=18,Yx=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},lhe=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function che(n,e,t,r){for(var i=e;r;--r){var s=n(i);if(i-=s,Math.abs(s)<t)break}return i}function uhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function hhe(n){var e=rt(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*v7);r<0?r=0:r>=Pd&&(r=Pd-1),t=fs*(t-ohe*r);var i={x:Yx(dI[r],t)*e,y:Yx(nm[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*y7+this.x0,i.y=i.y*this.a*x7+this.y0,i}function fhe(n){var e={x:(n.x-this.x0)/(this.a*y7),y:Math.abs(n.y-this.y0)/(this.a*x7)};if(e.y>=1)e.x/=dI[Pd][0],e.y=n.y<0?-Ve:Ve;else{var t=Math.floor(e.y*Pd);for(t<0?t=0:t>=Pd&&(t=Pd-1);;)if(nm[t][0]>e.y)--t;else if(nm[t+1][0]<=e.y)++t;else break;var r=nm[t],i=5*(e.y-r[0])/(nm[t+1][0]-r[0]);i=che(function(s){return(Yx(r,s)-e.y)/lhe(r,s)},i,Je,100),e.x/=Yx(dI[t],i),e.y=(5*t+i)*rr,n.y<0&&(e.y=-e.y)}return e.x=rt(e.x+this.long0,this.over),e}var dhe=["Robinson","robin"];const ghe={init:uhe,forward:hhe,inverse:fhe,names:dhe};function mhe(){this.name="geocent"}function phe(n){var e=o7(n,this.es,this.a);return e}function _he(n){var e=l7(n,this.es,this.a,this.b);return e}var yhe=["Geocentric","geocentric","geocent","Geocent"];const xhe={init:mhe,forward:phe,inverse:_he,names:yhe};var Ri={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Vg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function vhe(){if(Object.keys(Vg).forEach((function(t){if(typeof this[t]>"u")this[t]=Vg[t].def;else{if(Vg[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Vg[t].num&&(this[t]=parseFloat(this[t]))}Vg[t].degrees&&(this[t]=this[t]*rr)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ve)<Je?this.mode=this.lat0<0?Ri.S_POLE:Ri.N_POLE:Math.abs(this.lat0)<Je?this.mode=Ri.EQUIT:(this.mode=Ri.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function Ehe(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,s;switch(this.mode){case Ri.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case Ri.EQUIT:s=t*r;break;case Ri.S_POLE:s=-e;break;case Ri.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*t*Math.sin(n.x),this.mode){case Ri.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case Ri.EQUIT:s*=e;break;case Ri.N_POLE:s*=-(t*r);break;case Ri.S_POLE:s*=t*r;break}var a,o;return a=s*this.cg+i*this.sg,o=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=a*o,n.x=i*this.a,n.y=s*this.a,n}function whe(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var s=cs(n.x,n.y);if(Math.abs(s)<Je)e.x=0,e.y=n.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Ri.OBLIQ:e.y=Math.asin(a*this.sinph0+n.y*o*this.cosph0/s),n.y=(a-this.sinph0*Math.sin(e.y))*s,n.x*=o*this.cosph0;break;case Ri.EQUIT:e.y=Math.asin(n.y*o/s),n.y=a*s,n.x*=o;break;case Ri.N_POLE:e.y=Math.asin(a),n.y=-n.y;break;case Ri.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var She=["Tilted_Perspective","tpers"];const The={init:vhe,forward:Ehe,inverse:whe,names:She};function Ihe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Ahe(n){var e=n.x,t=n.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var o=this.radius_p/cs(this.radius_p*Math.cos(t),Math.sin(t));if(i=o*Math.cos(e)*Math.cos(t),s=o*Math.sin(e)*Math.cos(t),a=o*Math.sin(t),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/cs(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/cs(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/cs(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/cs(s,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function Rhe(n){var e=-1,t=0,r=0,i,s,a,o;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*cs(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*cs(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var Che=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Phe={init:Ihe,forward:Ahe,inverse:Rhe,names:Che};var Em=1.340264,wm=-.081106,Sm=893e-6,Tm=.003796,Xx=Math.sqrt(3)/2;function Mhe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function bhe(n){var e=rt(n.x-this.long0,this.over),t=n.y,r=Math.asin(Xx*Math.sin(t)),i=r*r,s=i*i*i;return n.x=e*Math.cos(r)/(Xx*(Em+3*wm*i+s*(7*Sm+9*Tm*i))),n.y=r*(Em+wm*i+s*(Sm+Tm*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function khe(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,s,a,o,l,u;for(u=0;u<t&&(i=r*r,s=i*i*i,a=r*(Em+wm*i+s*(Sm+Tm*i))-n.y,o=Em+3*wm*i+s*(7*Sm+9*Tm*i),r-=l=a/o,!(Math.abs(l)<e));++u);return i=r*r,s=i*i*i,n.x=Xx*n.x*(Em+3*wm*i+s*(7*Sm+9*Tm*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/Xx),n.x=rt(n.x+this.long0,this.over),n}var Nhe=["eqearth","Equal Earth","Equal_Earth"];const Lhe={init:Mhe,forward:bhe,inverse:khe,names:Nhe};var vp=1e-10;function Ohe(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<vp)throw new Error;this.es?(this.en=iC(this.es),this.m1=O0(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Fhe,this.forward=Dhe):(Math.abs(this.phi1)+vp>=Ve?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=jhe,this.forward=Vhe)}function Dhe(n){var e=rt(n.x-(this.long0||0),this.over),t=n.y,r,i,s;return r=this.am1+this.m1-O0(t,i=Math.sin(t),s=Math.cos(t),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Fhe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=cs(n.x,n.y=this.am1-n.y),i=sC(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<Ve)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-Ve)<=vp)r=0;else throw new Error;return n.x=rt(r+(this.long0||0),this.over),n.y=xu(i),n}function Vhe(n){var e=rt(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>vp?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function jhe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=cs(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Ve)throw new Error;return Math.abs(Math.abs(t)-Ve)<=vp?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=rt(e+(this.long0||0),this.over),n.y=xu(t),n}var Ghe=["bonne","Bonne (Werner lat_1=90)"];const Bhe={init:Ohe,names:Ghe},gL={OBLIQUE:{forward:Hhe,inverse:Yhe},TRANSVERSE:{forward:Khe,inverse:Xhe}},qx={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Uhe(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=r7.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=_a(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const r=Object.keys(qx),i=o=>{if(typeof this[o]>"u")return;const l=parseFloat(this[o])*rr;if(isNaN(l))throw new Error("Invalid value for "+o+": "+this[o]);return l};for(let o=0;o<r.length;o++){const l=r[o],u=qx[l],f=Object.entries(u);if(f.some(([g])=>typeof this[g]<"u")){t=u;for(let g=0;g<f.length;g++){const[p,v]=f[g],x=i(p);if(typeof x>"u")throw new Error("Missing parameter: "+p+".");this[v]=x}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:a}=Whe(this,t);this.lamp=s,Math.abs(a)>Je?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=gL.OBLIQUE):this.projectionType=gL.TRANSVERSE}function zhe(n){return this.projectionType.forward(this,n)}function $he(n){return this.projectionType.inverse(this,n)}function Whe(n,e){let t,r;if(e===qx.ROTATE){let i=n.oLongC,s=n.oLatC,a=n.oAlpha;if(Math.abs(Math.abs(s)-Ve)<=Je)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(s)),t=Math.asin(Math.cos(s)*Math.sin(a))}else if(e===qx.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,s=n.oLat1,a=n.oLong2,o=n.oLat2,l=Math.abs(s);if(Math.abs(s)>Ve-Je)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90");if(Math.abs(o)>Ve-Je)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90");if(Math.abs(s-o)<Je)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<Je)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(o)*Math.cos(i)-Math.sin(s)*Math.cos(o)*Math.cos(a),Math.sin(s)*Math.cos(o)*Math.sin(a)-Math.cos(s)*Math.sin(o)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:t}}function Hhe(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(t),s=Math.sin(r),a=Math.cos(r);e.x=rt(Math.atan2(a*Math.sin(t),n.sphip*a*i+n.cphip*s)+n.lamp),e.y=Math.asin(n.sphip*s-n.cphip*a*i);const o=n.obliqueProjection.forward(e);return n.isIdentity&&(o.x*=fs,o.y*=fs),o}function Khe(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(r),s=Math.cos(t);e.x=rt(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*s);const a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=fs,a.y*=fs),a}function Yhe(n,e){n.isIdentity&&(e.x*=rr,e.y*=rr);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(r),n.sphip*o*s-n.cphip*a),e.y=Math.asin(n.sphip*a+n.cphip*o*s)}return e.x=rt(e.x+n.long0),e}function Xhe(n,e){n.isIdentity&&(e.x*=rr,e.y*=rr);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=n.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=rt(e.x+n.long0),e}var qhe=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Zhe={init:Uhe,forward:zhe,inverse:$he,names:qhe};function Qhe(n){n.Proj.projections.add(Oy),n.Proj.projections.add(Dy),n.Proj.projections.add(Gle),n.Proj.projections.add(Xle),n.Proj.projections.add(ece),n.Proj.projections.add(sce),n.Proj.projections.add(hce),n.Proj.projections.add(pce),n.Proj.projections.add(Ece),n.Proj.projections.add(Ace),n.Proj.projections.add(jce),n.Proj.projections.add(Wce),n.Proj.projections.add(qce),n.Proj.projections.add(nue),n.Proj.projections.add(oue),n.Proj.projections.add(fue),n.Proj.projections.add(_ue),n.Proj.projections.add(wue),n.Proj.projections.add(Cue),n.Proj.projections.add(Nue),n.Proj.projections.add(Vue),n.Proj.projections.add(zue),n.Proj.projections.add(que),n.Proj.projections.add(the),n.Proj.projections.add(ahe),n.Proj.projections.add(ghe),n.Proj.projections.add(xhe),n.Proj.projections.add(The),n.Proj.projections.add(Phe),n.Proj.projections.add(Lhe),n.Proj.projections.add(Bhe),n.Proj.projections.add(Zhe)}const Zt=Object.assign(rle,{defaultDatum:"WGS84",Proj:_a,WGS84:new _a("WGS84"),Point:v0,toPoint:c7,defs:oi,nadgrid:joe,transform:Hx,mgrs:ile,version:"__VERSION__"});Qhe(Zt);class E7{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=ya,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Cn(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Cn(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return At()}readFeature(e,t){return At()}readFeatures(e,t){return At()}readGeometry(e,t){return At()}readProjection(e){return At()}writeFeature(e,t){return At()}writeFeatures(e,t){return At()}writeGeometry(e,t){return At()}}function eo(n,e,t){const r=t?Cn(t.featureProjection):null,i=t?Cn(t.dataProjection):null;let s=n;if(r&&i&&!_h(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(Vm(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(l){for(let u=0,f=l.length;u<f;++u)l[u]=Math.round(l[u]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Jhe={Point:qa,LineString:Xa,Polygon:Za,MultiPoint:T0,MultiLineString:Qc,MultiPolygon:e0};function efe(n,e,t){return Array.isArray(e[0])?(sD(n,0,e,t)||(n=n.slice(),YS(n,0,e,t)),n):(XI(n,0,e,t)||(n=n.slice(),Qy(n,0,e,t)),n)}function w7(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>w7({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return eo(new Ds(r,r==="Polygon"?efe(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function hC(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>hC(i,e));return new Ha(r)}const t=Jhe[n.type];return eo(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class tfe extends E7{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(ty(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(ty(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return At()}readFeaturesFromObject(e,t){return At()}readGeometry(e,t){return this.readGeometryFromObject(ty(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return At()}readProjection(e){return this.readProjectionFromObject(ty(e))}readProjectionFromObject(e){return At()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return At()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return At()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return At()}}function ty(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class fC extends tfe{constructor(e){e=e||{},super(),this.dataProjection=Cn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Cn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=dC(r.geometry);if(this.featureClass===Ds)return w7({geometry:i,id:r.id,properties:r.properties},t);const s=new ya;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(hC(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,l=a.length;o<l;++o){const u=this.readFeatureFromObject(a[o],t);u&&i.push(u)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return nfe(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Cn(t.properties.name);else if(t.type==="EPSG")r=Cn("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=gI(a,t),delete s[e.getGeometryName()]),Sh(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return gI(e,this.adaptOptions(t))}}function dC(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=ife(n);break}case"LineString":{t=sfe(n);break}case"Polygon":{t=cfe(n);break}case"MultiPoint":{t=ofe(n);break}case"MultiLineString":{t=afe(n);break}case"MultiPolygon":{t=lfe(n);break}case"GeometryCollection":{t=rfe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function nfe(n,e){const t=dC(n);return hC(t,e)}function rfe(n,e){return n.geometries.map(function(r){return dC(r)})}function ife(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Zh(e.length)}}function sfe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Zh(e[0]?.length||2)}}function afe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=Fp(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Zh(t)}}function ofe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Zh(e[0]?.length||2)}}function lfe(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=OO(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Zh(r)}}function cfe(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=Fp(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Zh(r)}}function gI(n,e){n=eo(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=mfe(n);break}case"LineString":{r=hfe(n);break}case"Polygon":{r=pfe(n,e);break}case"MultiPoint":{r=dfe(n);break}case"MultiLineString":{r=ffe(n);break}case"MultiPolygon":{r=gfe(n,e);break}case"GeometryCollection":{r=ufe(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function ufe(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return gI(r,e)})}}function hfe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function ffe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function dfe(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function gfe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function mfe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function pfe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const Zx="http://www.w3.org/2001/XMLSchema-instance";function af(n,e){return D0().createElementNS(n,e)}function to(n,e){return S7(n,e,[]).join("")}function S7(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)S7(r,e,t)}return t}function ml(n){return"documentElement"in n}function pl(n){return new DOMParser().parseFromString(n,"application/xml")}function mL(n,e){return(function(t,r){const i=n.call(e??this,t,r);if(i!==void 0){const s=r[r.length-1];dn(s,i)}})}function ja(n,e){return(function(t,r){const i=n.call(e??this,t,r);i!==void 0&&r[r.length-1].push(i)})}function gC(n,e){return(function(t,r){const i=n.call(this,t,r);i!==void 0&&(r[r.length-1]=i)})}function Le(n,e,t){return(function(r,i){const s=n.call(this,r,i);if(s!==void 0){const a=i[i.length-1],o=e!==void 0?e:r.localName;a[o]=s}})}function We(n,e){return(function(t,r,i){n.call(this,t,r,i),i[i.length-1].node.appendChild(t)})}function T7(n,e){let t,r;return function(i,s,a){if(t===void 0){t={};const o={};o[i.localName]=n,t[i.namespaceURI]=o,r=no(i.localName)}I7(t,r,s,a)}}function no(n,e){return(function(t,r,i){const a=r[r.length-1].node;let o=n;o===void 0&&(o=i);const l=a.namespaceURI;return af(l,o)})}const ki=no();function gs(n,e){const t=e.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=n[e[i]];return r}function nt(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function vu(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=n[i.namespaceURI];if(s!==void 0){const a=s[i.localName];a!==void 0&&a.call(r,i,t)}}}function $t(n,e,t,r,i){return r.push(n),vu(e,t,r,i),r.pop()}function I7(n,e,t,r,i,s){const a=(i!==void 0?i:t).length;let o,l;for(let u=0;u<a;++u)o=t[u],o!==void 0&&(l=e.call(s,o,r,i!==void 0?i[u]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(s,l,o,r))}function Mn(n,e,t,r,i,s,a){return i.push(n),I7(e,t,r,i,s,a),i.pop()}let xS;function _fe(){return xS===void 0&&typeof XMLSerializer<"u"&&(xS=new XMLSerializer),xS}let vS;function D0(){return vS===void 0&&typeof document<"u"&&(vS=document.implementation.createDocument("","",null)),vS}class A7 extends E7{constructor(){super(),this.xmlSerializer_=_fe()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const r=pl(e);return this.readFeatureFromDocument(r,t)}return ml(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const r=pl(e);return this.readFeaturesFromDocument(r,t)}return ml(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&dn(r,this.readFeaturesFromNode(i,t));return r}readFeaturesFromNode(e,t){return At()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const r=pl(e);return this.readGeometryFromDocument(r,t)}return ml(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=pl(e);return this.readProjectionFromDocument(t)}return ml(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}function hu(n){const e=to(n,!1);return yfe(e)}function yfe(n){const e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function EE(n){const e=to(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function en(n){const e=to(n,!1);return xfe(e)}function xfe(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function Ep(n){const e=to(n,!1);return vfe(e)}function vfe(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function Vt(n){return to(n,!1).trim()}function E0(n,e){ln(n,e?"1":"0")}function Efe(n,e){n.appendChild(D0().createCDATASection(e))}function wfe(n,e){const t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+Ig(t.getUTCMonth()+1,2)+"-"+Ig(t.getUTCDate(),2)+"T"+Ig(t.getUTCHours(),2)+":"+Ig(t.getUTCMinutes(),2)+":"+Ig(t.getUTCSeconds(),2)+"Z";n.appendChild(D0().createTextNode(r))}function is(n,e){const t=e.toPrecision();n.appendChild(D0().createTextNode(t))}function Qx(n,e){const t=e.toString();n.appendChild(D0().createTextNode(t))}const Sfe=/^\s/,Tfe=/\s$/,Ife=/(\n|\t|\r|<|&| {2})/;function ln(n,e){typeof e=="string"&&(Sfe.test(e)||Tfe.test(e)||Ife.test(e))?e.split("]]>").forEach((t,r,i)=>{r<i.length-1&&(t+="]]"),r>0&&(t=">"+t),Efe(n,t)}):n.appendChild(D0().createTextNode(e))}const Vn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Afe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",Rfe={rte:R7,trk:C7,wpt:P7},Cfe=nt(Vn,{rte:ja(R7),trk:ja(C7),wpt:ja(P7)}),Pfe=nt(Vn,{text:Le(Vt,"linkText"),type:Le(Vt,"linkType")}),Mfe=nt(Vn,{name:Le(Vt),email:rde,link:__}),bfe=nt(Vn,{name:Le(Vt),desc:Le(Vt),author:Le(ede),copyright:Le(tde),link:__,time:Le(EE),keywords:Le(Vt),bounds:nde,extensions:wE}),kfe=nt(Vn,{year:Le(Ep),license:Le(Vt)}),Nfe=nt(Vn,{rte:We(ode),trk:We(lde),wpt:We(ude)});class Lfe extends A7{constructor(e){super(),e=e||{},this.dataProjection=Cn("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const i=e[t];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(pl(e)):ml(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!Vn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Vn.includes(t.namespaceURI)&&t.localName==="metadata")return $t({},bfe,t,[]);return null}readFeatureFromNode(e,t){if(!Vn.includes(e.namespaceURI))return null;const r=Rfe[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!Vn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=$t([],Cfe,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=af("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Zx),r.setAttributeNS(Zx,"xsi:schemaLocation",Afe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Mn({node:r},Nfe,Jfe,e,[t]),r}}const Ofe=nt(Vn,{name:Le(Vt),cmt:Le(Vt),desc:Le(Vt),src:Le(Vt),link:__,number:Le(Ep),extensions:wE,type:Le(Vt),rtept:ide}),Dfe=nt(Vn,{ele:Le(en),time:Le(EE)}),Ffe=nt(Vn,{name:Le(Vt),cmt:Le(Vt),desc:Le(Vt),src:Le(Vt),link:__,number:Le(Ep),type:Le(Vt),extensions:wE,trkseg:ade}),Vfe=nt(Vn,{trkpt:sde}),jfe=nt(Vn,{ele:Le(en),time:Le(EE)}),Gfe=nt(Vn,{ele:Le(en),time:Le(EE),magvar:Le(en),geoidheight:Le(en),name:Le(Vt),cmt:Le(Vt),desc:Le(Vt),src:Le(Vt),link:__,sym:Le(Vt),type:Le(Vt),fix:Le(Vt),sat:Le(Ep),hdop:Le(en),vdop:Le(en),pdop:Le(en),ageofdgpsdata:Le(en),dgpsid:Le(Ep),extensions:wE}),Bfe=["text","type"],Ufe=nt(Vn,{text:We(ln),type:We(ln)}),zfe=nt(Vn,["name","cmt","desc","src","link","number","type","rtept"]),$fe=nt(Vn,{name:We(ln),cmt:We(ln),desc:We(ln),src:We(ln),link:We(_C),number:We(Qx),type:We(ln),rtept:T7(We(yC))}),Wfe=nt(Vn,["ele","time"]),Hfe=nt(Vn,["name","cmt","desc","src","link","number","type","trkseg"]),Kfe=nt(Vn,{name:We(ln),cmt:We(ln),desc:We(ln),src:We(ln),link:We(_C),number:We(Qx),type:We(ln),trkseg:T7(We(cde))}),Yfe=no("trkpt"),Xfe=nt(Vn,{trkpt:We(yC)}),qfe=nt(Vn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Zfe=nt(Vn,{ele:We(is),time:We(wfe),magvar:We(is),geoidheight:We(is),name:We(ln),cmt:We(ln),desc:We(ln),src:We(ln),link:We(_C),sym:We(ln),type:We(ln),fix:We(ln),sat:We(Qx),hdop:We(is),vdop:We(is),pdop:We(is),ageofdgpsdata:We(is),dgpsid:We(Qx)}),Qfe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Jfe(n,e,t){const r=n.getGeometry();if(r){const i=Qfe[r.getType()];if(i){const s=e[e.length-1].node;return af(s.namespaceURI,i)}}}function mC(n,e,t,r){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,e.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,e.hasM=!0):n.push(0),n}function pC(n,e,t){let r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),i!==4){for(let s=0,a=e.length/4;s<a;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],n.hasZ&&(e[s*i+2]=e[s*4+2]),n.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,t)for(let s=0,a=t.length;s<a;s++)t[s]=t[s]/4*i}return r}function ede(n,e){const t=$t({},Mfe,n,e);if(t)return t}function tde(n,e){const t=$t({},kfe,n,e);if(t){const r=n.getAttribute("author");return r!==null&&(t.author=r),t}}function nde(n,e){const t=e[e.length-1],r=n.getAttribute("minlat"),i=n.getAttribute("minlon"),s=n.getAttribute("maxlat"),a=n.getAttribute("maxlon");i!==null&&r!==null&&a!==null&&s!==null&&(t.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(a),parseFloat(s)]])}function rde(n,e){const t=e[e.length-1],r=n.getAttribute("id"),i=n.getAttribute("domain");r!==null&&i!==null&&(t.email=`${r}@${i}`)}function __(n,e){const t=e[e.length-1],r=n.getAttribute("href");r!==null&&(t.link=r),vu(Pfe,n,e)}function wE(n,e){const t=e[e.length-1];t.extensionsNode_=n}function ide(n,e){const t=$t({},Dfe,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;mC(i,s,n,t)}}function sde(n,e){const t=$t({},jfe,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;mC(i,s,n,t)}}function ade(n,e){const t=e[e.length-1];vu(Vfe,n,e);const r=t.flatCoordinates;t.ends.push(r.length)}function R7(n,e){const t=e[0],r=$t({flatCoordinates:[],layoutOptions:{}},Ofe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const a=pC(s,i),o=new Xa(i,a);eo(o,!1,t);const l=new ya(o);return l.setProperties(r,!0),l}function C7(n,e){const t=e[0],r=$t({flatCoordinates:[],ends:[],layoutOptions:{}},Ffe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const a=r.layoutOptions;delete r.layoutOptions;const o=pC(a,i,s),l=new Qc(i,o,s);eo(l,!1,t);const u=new ya(l);return u.setProperties(r,!0),u}function P7(n,e){const t=e[0],r=$t({},Gfe,n,e);if(!r)return;const i={},s=mC([],i,n,r),a=pC(i,s),o=new qa(s,a);eo(o,!1,t);const l=new ya(o);return l.setProperties(r,!0),l}function _C(n,e,t){n.setAttribute("href",e);const i=t[t.length-1].properties,s=[i.linkText,i.linkType];Mn({node:n},Ufe,ki,s,t,Bfe)}function yC(n,e,t){const r=t[t.length-1],s=r.node.namespaceURI,a=r.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(a.time=e[3]);case"XYZ":e[2]!==0&&(a.ele=e[2]);break;case"XYM":e[2]!==0&&(a.time=e[2]);break}const l=n.nodeName=="rtept"?Wfe[s]:qfe[s],u=gs(a,l);Mn({node:n,properties:a},Zfe,ki,u,t,l)}function ode(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="LineString"){const f=eo(a,!0,r);s.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}const o=t[t.length-1].node,l=zfe[o.namespaceURI],u=gs(i,l);Mn(s,$fe,ki,u,t,l)}function lde(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="MultiLineString"){const f=eo(a,!0,r);i.trkseg=f.getLineStrings()}const o=t[t.length-1].node,l=Hfe[o.namespaceURI],u=gs(i,l);Mn(s,Kfe,ki,u,t,l)}function cde(n,e,t){const r={node:n};r.geometryLayout=e.getLayout(),r.properties={},Mn(r,Xfe,Yfe,e.getCoordinates(),t)}function ude(n,e,t){const r=t[0],i=t[t.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const a=eo(s,!0,r);i.geometryLayout=a.getLayout(),yC(n,a.getCoordinates(),t)}}const zl=["http://www.google.com/kml/ext/2.2"],mt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],hde="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",pL={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},fde=nt(mt,{ExtendedData:$7,Region:W7,MultiGeometry:Le(B7,"geometry"),LineString:Le(j7,"geometry"),LinearRing:Le(G7,"geometry"),Point:Le(U7,"geometry"),Polygon:Le(z7,"geometry"),Style:Le(EC),StyleMap:Xde,address:Le(Vt),description:Le(Vt),name:Le(Vt),open:Le(hu),phoneNumber:Le(Vt),styleUrl:Le(L7),visibility:Le(hu)},nt(zl,{MultiTrack:Le(Dde,"geometry"),Track:Le(V7,"geometry")})),dde=nt(mt,{ExtendedData:$7,Region:W7,Link:o0e,address:Le(Vt),description:Le(Vt),name:Le(Vt),open:Le(hu),phoneNumber:Le(Vt),visibility:Le(hu)}),gde=nt(mt,{href:Le(N7)}),mde=nt(mt,{Altitude:Le(en),Longitude:Le(en),Latitude:Le(en),Tilt:Le(en),AltitudeMode:Le(Vt),Heading:Le(en),Roll:Le(en)}),M7=nt(mt,{LatLonAltBox:e0e,Lod:n0e}),pde=nt(mt,["Document","Placemark"]),_de=nt(mt,{Document:We(m0e),Placemark:We(Y7)});let Ud,Vy=null,mI,Im,Am,Rm,Jx,pI=null,xC,_I=null,yI,gh=null,_L=null,xI=null;function ev(n){return 32/Math.min(n[0],n[1])}function yde(){Ud=[255,255,255,1],Vy=new mi({color:Ud}),mI=[20,2],Im="pixels",Am="pixels",Rm=[64,64],Jx="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",pI=new t0({anchor:mI,anchorOrigin:"bottom-left",anchorXUnits:Im,anchorYUnits:Am,crossOrigin:"anonymous",rotation:0,scale:ev(Rm),size:Rm,src:Jx}),xC="NO_IMAGE",_I=new Pi({color:Ud,width:1}),yI=new Pi({color:[51,51,51,1],width:2}),gh=new I0({font:"bold 16px Helvetica",fill:Vy,stroke:yI,scale:.8}),_L=new Fn({fill:Vy,image:pI,text:gh,stroke:_I,zIndex:0}),xI=[_L]}let ny;function xde(n){return n}class vde extends A7{constructor(e){super(),e=e||{},xI||yde(),this.dataProjection=Cn("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:xI,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:xde,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const r=nt(mt,{Document:mL(this.readDocumentOrFolder_,this),Folder:mL(this.readDocumentOrFolder_,this),Placemark:ja(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=$t([],r,e,t,this);if(i)return i}readPlacemark_(e,t){const r=$t({geometry:null},fde,e,t,this);if(!r)return;const i=new ya,s=e.getAttribute("id");s!==null&&i.setId(s);const a=t[0],o=r.geometry;if(o&&eo(o,!1,a),i.setGeometry(o),delete r.geometry,this.extractStyles_){const l=r.Style,u=r.styleUrl,f=wde(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(f)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,t){const r=e.getAttribute("id");if(r!==null){const i=EC.call(this,e,t);if(i){let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,t){const r=e.getAttribute("id");if(r===null)return;const i=D7.call(this,e,t);if(!i)return;let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,t){if(!mt.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!mt.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const a=this.readFeaturesFromNode(s,t);a&&dn(r,a)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const t=pl(e);return this.readNameFromDocument(t)}return ml(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(mt.includes(t.namespaceURI)&&t.localName=="name")return Vt(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const r=t.localName;if(mt.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const r=pl(e);dn(t,this.readNetworkLinksFromDocument(r))}else ml(e)?dn(t,this.readNetworkLinksFromDocument(e)):dn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&dn(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(mt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=$t({},dde,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;mt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&dn(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){const t=[];if(typeof e=="string"){const r=pl(e);dn(t,this.readRegionFromDocument(r))}else ml(e)?dn(t,this.readRegionFromDocument(e)):dn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&dn(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(mt.includes(r.namespaceURI)&&r.localName=="Region"){const i=$t({},M7,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;mt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&dn(t,this.readRegionFromNode(r))}return t}readCamera(e){const t=[];if(typeof e=="string"){const r=pl(e);dn(t,this.readCameraFromDocument(r))}else ml(e)?dn(t,this.readCameraFromDocument(e)):dn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&dn(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(mt.includes(r.namespaceURI)&&r.localName==="Camera"){const i=$t({},mde,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;mt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&dn(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=af(mt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",zl[0]),r.setAttributeNS(i,"xmlns:xsi",Zx),r.setAttributeNS(Zx,"xsi:schemaLocation",hde);const s={node:r},a={};e.length>1?a.Document=e:e.length==1&&(a.Placemark=e[0]);const o=pde[r.namespaceURI],l=gs(a,o);return Mn(s,_de,ki,l,[t],o,this),r}}function Ede(n,e){const t=[0,0];let r="start";const i=n.getImage();if(i){const o=i.getSize();if(o&&o.length==2){const l=i.getScaleArray(),u=i.getAnchor();t[0]=l[0]*(o[0]-u[0]),t[1]=l[1]*(o[1]/2-u[1]),r="left"}}let s=n.getText();return s?(s=s.clone(),s.setFont(s.getFont()||gh.getFont()),s.setScale(s.getScale()||gh.getScale()),s.setFill(s.getFill()||gh.getFill()),s.setStroke(s.getStroke()||yI)):s=gh.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(r),new Fn({image:i,text:s})}function wde(n,e,t,r,i){return(function(s,a){let o=i,l="",u=[];if(o){const d=s.getGeometry();if(d)if(d instanceof Ha)u=d.getGeometriesArrayRecursive().filter(function(g){const p=g.getType();return p==="Point"||p==="MultiPoint"}),o=u.length>0;else{const g=d.getType();o=g==="Point"||g==="MultiPoint"}}o&&(l=s.get("name"),o=o&&!!l,o&&/&[^&]+;/.test(l)&&(ny||(ny=document.createElement("textarea")),ny.innerHTML=l,l=ny.value));let f=t;if(n?f=n:e&&(f=b7(e,t,r)),o){const d=Ede(f[0],l);if(u.length>0){d.setGeometry(new Ha(u));const g=new Fn({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null});return[d,g].concat(f.slice(1))}return d}return f})}function b7(n,e,t){return Array.isArray(n)?n:typeof n=="string"?b7(t[n],e,t):e}function SE(n){const e=to(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function k7(n){let e=to(n,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),a=parseFloat(i[2]),o=i[3]?parseFloat(i[3]):0;t.push(s,a,o),e=e.substr(i[0].length)}if(e==="")return t}function N7(n){const e=to(n,!1).trim();let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function L7(n){const e=to(n,!1).trim().replace(/^(?!.*#)/,"#");let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Sde(n){const e=n.getAttribute("xunits"),t=n.getAttribute("yunits");let r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(n.getAttribute("x")),xunits:pL[e],y:parseFloat(n.getAttribute("y")),yunits:pL[t],origin:r}}function O7(n){return en(n)}const Tde=nt(mt,{Pair:Yde});function D7(n,e){return $t(void 0,Tde,n,e,this)}const Ide=nt(mt,{Icon:Le(jde),color:Le(SE),heading:Le(en),hotSpot:Le(Sde),scale:Le(O7)});function Ade(n,e){const t=$t({},Ide,n,e);if(!t)return;const r=e[e.length-1],i="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(i).length>0;let a;const o=i.href;o?a=o:s&&(a=Jx);let l,u,f,d="bottom-left";const g=t.hotSpot;g?(l=[g.x,g.y],u=g.xunits,f=g.yunits,d=g.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(a.includes("pushpin")?(l=mI,u=Im,f=Am):a.includes("arrow-reverse")?(l=[54,42],u=Im,f=Am):a.includes("paddle")&&(l=[32,1],u=Im,f=Am));let p;const v=i.x,x=i.y;v!==void 0&&x!==void 0&&(p=[v,x]);let E;const I=i.w,T=i.h;I!==void 0&&T!==void 0&&(E=[I,T]);let M;const k=t.heading;k!==void 0&&(M=xl(k));const L=t.scale,z=t.color;if(s){a==Jx&&(E=Rm);const P=new t0({anchor:l,anchorOrigin:d,anchorXUnits:u,anchorYUnits:f,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:M,scale:L,size:E,src:this.iconUrlFunction_(a),color:z}),C=P.getScaleArray()[0],b=P.getSize();if(b===null){const F=P.getImageState();if(F===ht.IDLE||F===ht.LOADING){const j=function(){const U=P.getImageState();if(!(U===ht.IDLE||U===ht.LOADING)){const V=P.getSize();if(V&&V.length==2){const Te=ev(V);P.setScale(C*Te)}P.unlistenImageChange(j)}};P.listenImageChange(j),F===ht.IDLE&&P.load()}}else if(b.length==2){const F=ev(b);P.setScale(C*F)}r.imageStyle=P}else r.imageStyle=xC}const Rde=nt(mt,{color:Le(SE),scale:Le(O7)});function Cde(n,e){const t=$t({},Rde,n,e);if(!t)return;const r=e[e.length-1],i=new I0({fill:new mi({color:"color"in t?t.color:Ud}),scale:t.scale});r.textStyle=i}const Pde=nt(mt,{color:Le(SE),width:Le(en)});function Mde(n,e){const t=$t({},Pde,n,e);if(!t)return;const r=e[e.length-1],i=new Pi({color:"color"in t?t.color:Ud,width:"width"in t?t.width:1});r.strokeStyle=i}const bde=nt(mt,{color:Le(SE),fill:Le(hu),outline:Le(hu)});function kde(n,e){const t=$t({},bde,n,e);if(!t)return;const r=e[e.length-1],i=new mi({color:"color"in t?t.color:Ud});r.fillStyle=i;const s=t.fill;s!==void 0&&(r.fill=s);const a=t.outline;a!==void 0&&(r.outline=a)}const Nde=nt(mt,{coordinates:gC(k7)});function F7(n,e){return $t(null,Nde,n,e)}function Lde(n,e){const r=e[e.length-1].coordinates,i=to(n,!1),a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(a){const o=parseFloat(a[1]),l=parseFloat(a[2]),u=parseFloat(a[3]);r.push([o,l,u])}else r.push([])}const Ode=nt(zl,{Track:ja(V7)});function Dde(n,e){const t=$t([],Ode,n,e);if(t)return new Qc(t)}const Fde=nt(mt,{when:l0e},nt(zl,{coord:Lde}));function V7(n,e){const t=$t({coordinates:[],whens:[]},Fde,n,e);if(!t)return;const r=[],i=t.coordinates,s=t.whens;for(let a=0,o=Math.min(i.length,s.length);a<o;++a)i[a].length==3&&r.push(i[a][0],i[a][1],i[a][2],s[a]);return new Xa(r,"XYZM")}const Vde=nt(mt,{href:Le(N7)},nt(zl,{x:Le(en),y:Le(en),w:Le(en),h:Le(en)}));function jde(n,e){const t=$t({},Vde,n,e);return t||null}const Gde=nt(mt,{coordinates:gC(k7)});function vC(n,e){return $t(null,Gde,n,e)}const TE=nt(mt,{extrude:Le(hu),tessellate:Le(hu),altitudeMode:Le(Vt)});function j7(n,e){const t=$t({},TE,n,e),r=vC(n,e);if(r){const i=new Xa(r,"XYZ");return i.setProperties(t,!0),i}}function G7(n,e){const t=$t({},TE,n,e),r=vC(n,e);if(r){const i=new Za(r,"XYZ",[r.length]);return i.setProperties(t,!0),i}}const Bde=nt(mt,{LineString:ja(j7),LinearRing:ja(G7),MultiGeometry:ja(B7),Point:ja(U7),Polygon:ja(z7)});function B7(n,e){const t=$t([],Bde,n,e);if(!t)return null;if(t.length===0)return new Ha(t);let r,i=!0;const s=t[0].getType();let a;for(let o=1,l=t.length;o<l;++o)if(a=t[o],a.getType()!=s){i=!1;break}if(i){let o,l;if(s=="Point"){const u=t[0];o=u.getLayout(),l=u.getFlatCoordinates();for(let f=1,d=t.length;f<d;++f)a=t[f],dn(l,a.getFlatCoordinates());r=new T0(l,o),ES(r,t)}else if(s=="LineString")r=new Qc(t),ES(r,t);else if(s=="Polygon")r=new e0(t),ES(r,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new Ha(t);else throw new Error("Unknown geometry type found")}else r=new Ha(t);return r}function U7(n,e){const t=$t({},TE,n,e),r=vC(n,e);if(r){const i=new qa(r,"XYZ");return i.setProperties(t,!0),i}}const Ude=nt(mt,{innerBoundaryIs:i0e,outerBoundaryIs:a0e});function z7(n,e){const t=$t({},TE,n,e),r=$t([null],Ude,n,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let o=1,l=r.length;o<l;++o)dn(i,r[o]),s.push(i.length);const a=new Za(i,"XYZ",s);return a.setProperties(t,!0),a}}const zde=nt(mt,{IconStyle:Ade,LabelStyle:Cde,LineStyle:Mde,PolyStyle:kde});function EC(n,e){const t=$t({},zde,n,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:Vy;const i=t.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in t?t.imageStyle!=xC&&(s=t.imageStyle):s=pI;const a="textStyle"in t?t.textStyle:gh,o="strokeStyle"in t?t.strokeStyle:_I,l=t.outline;return l!==void 0&&!l?[new Fn({geometry:function(u){const f=u.getGeometry(),d=f.getType();if(d==="GeometryCollection"){const g=f;return new Ha(g.getGeometriesArrayRecursive().filter(function(p){const v=p.getType();return v!=="Polygon"&&v!=="MultiPolygon"}))}if(d!=="Polygon"&&d!=="MultiPolygon")return f},fill:r,image:s,stroke:o,text:a,zIndex:void 0}),new Fn({geometry:function(u){const f=u.getGeometry(),d=f.getType();if(d==="GeometryCollection"){const g=f;return new Ha(g.getGeometriesArrayRecursive().filter(function(p){const v=p.getType();return v==="Polygon"||v==="MultiPolygon"}))}if(d==="Polygon"||d==="MultiPolygon")return f},fill:r,stroke:null,zIndex:void 0})]:[new Fn({fill:r,image:s,stroke:o,text:a,zIndex:void 0})]}function ES(n,e){const t=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let a,o,l;a=!1,o=!1,l=!1;for(let u=0;u<t;++u){const f=e[u];r[u]=f.get("extrude"),i[u]=f.get("tessellate"),s[u]=f.get("altitudeMode"),a=a||r[u]!==void 0,o=o||i[u]!==void 0,l=l||s[u]}a&&n.set("extrude",r),o&&n.set("tessellate",i),l&&n.set("altitudeMode",s)}const $de=nt(mt,{displayName:Le(Vt),value:Le(Vt)});function Wde(n,e){const t=n.getAttribute("name");vu($de,n,e);const r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const Hde=nt(mt,{Data:Wde,SchemaData:Zde});function $7(n,e){vu(Hde,n,e)}function W7(n,e){vu(M7,n,e)}const Kde=nt(mt,{Style:Le(EC),key:Le(Vt),styleUrl:Le(L7)});function Yde(n,e){const t=$t({},Kde,n,e,this);if(!t)return;const r=t.key;if(r&&r=="normal"){const i=t.styleUrl;i&&(e[e.length-1]=i);const s=t.Style;s&&(e[e.length-1]=s)}}function Xde(n,e){const t=D7.call(this,n,e);if(!t)return;const r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const qde=nt(mt,{SimpleData:Qde});function Zde(n,e){vu(qde,n,e)}function Qde(n,e){const t=n.getAttribute("name");if(t!==null){const r=Vt(n),i=e[e.length-1];i[t]=r}}const Jde=nt(mt,{altitudeMode:Le(Vt),minAltitude:Le(en),maxAltitude:Le(en),north:Le(en),south:Le(en),east:Le(en),west:Le(en)});function e0e(n,e){const t=$t({},Jde,n,e);if(!t)return;const r=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=i,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}const t0e=nt(mt,{minLodPixels:Le(en),maxLodPixels:Le(en),minFadeExtent:Le(en),maxFadeExtent:Le(en)});function n0e(n,e){const t=$t({},t0e,n,e);if(!t)return;const r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}const r0e=nt(mt,{LinearRing:ja(F7)});function i0e(n,e){const t=$t([],r0e,n,e);t.length>0&&e[e.length-1].push(...t)}const s0e=nt(mt,{LinearRing:gC(F7)});function a0e(n,e){const t=$t(void 0,s0e,n,e);if(t){const r=e[e.length-1];r[0]=t}}function o0e(n,e){vu(gde,n,e)}function l0e(n,e){const r=e[e.length-1].whens,i=to(n,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function IE(n,e){const t=Rh(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const a=Math.floor(i[s]).toString(16);i[s]=a.length==1?"0"+a:a}ln(n,i.join(""))}function c0e(n,e,t){const r=t[t.length-1],i=r.layout,s=r.stride;let a;if(i=="XY"||i=="XYM")a=2;else if(i=="XYZ"||i=="XYZM")a=3;else throw new Error("Invalid geometry layout");const o=e.length;let l="";if(o>0){l+=e[0];for(let u=1;u<a;++u)l+=","+e[u];for(let u=s;u<o;u+=s){l+=" "+e[u];for(let f=1;f<a;++f)l+=","+e[u+f]}}ln(n,l)}const jy=nt(mt,{Data:We(u0e),value:We(f0e),displayName:We(h0e)});function u0e(n,e,t){n.setAttribute("name",e.name);const r={node:n},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&Mn(r,jy,ki,[i.displayName],t,["displayName"]),i!==null&&i.value&&Mn(r,jy,ki,[i.value],t,["value"])):Mn(r,jy,ki,[i],t,["value"])}function h0e(n,e){ln(n,e)}function f0e(n,e){ln(n,e)}const d0e=nt(mt,{Placemark:We(Y7)}),g0e=function(n,e,t){const r=e[e.length-1].node;return af(r.namespaceURI,"Placemark")};function m0e(n,e,t){Mn({node:n},d0e,g0e,e,t,void 0,this)}const p0e=no("Data");function _0e(n,e,t){const r={node:n},i=e.names,s=e.values,a=i.length;for(let o=0;o<a;o++)Mn(r,jy,p0e,[{name:i[o],value:s[o]}],t)}const yL=nt(mt,["href"],nt(zl,["x","y","w","h"])),xL=nt(mt,{href:We(ln)},nt(zl,{x:We(is),y:We(is),w:We(is),h:We(is)})),y0e=function(n,e,t){return af(zl[0],"gx:"+t)};function x0e(n,e,t){const r={node:n},i=t[t.length-1].node;let s=yL[i.namespaceURI],a=gs(e,s);Mn(r,xL,ki,a,t,s),s=yL[zl[0]],a=gs(e,s),Mn(r,xL,y0e,a,t,s)}const v0e=nt(mt,["scale","heading","Icon","color","hotSpot"]),E0e=nt(mt,{Icon:We(x0e),color:We(IE),heading:We(is),hotSpot:We(Y0e),scale:We(q7)});function w0e(n,e,t){const r={node:n},i={},s=e.getSrc(),a=e.getSize(),o=e.getImageSize(),l={href:s};if(a){l.w=a[0],l.h=a[1];const E=e.getAnchor(),I=e.getOrigin();if(I&&o&&I[0]!==0&&I[1]!==a[1]&&(l.x=I[0],l.y=o[1]-(I[1]+a[1])),E&&(E[0]!==a[0]/2||E[1]!==a[1]/2)){const T={x:E[0],xunits:"pixels",y:a[1]-E[1],yunits:"pixels"};i.hotSpot=T}}i.Icon=l;let u=e.getScaleArray()[0],f=a;if(f===null&&(f=Rm),f.length==2){const E=ev(f);u=u/E}u!==1&&(i.scale=u);const d=e.getRotation();d!==0&&(i.heading=d);const g=e.getColor();g&&(i.color=g);const p=t[t.length-1].node,v=v0e[p.namespaceURI],x=gs(i,v);Mn(r,E0e,ki,x,t,v)}const S0e=nt(mt,["color","scale"]),T0e=nt(mt,{color:We(IE),scale:We(q7)});function I0e(n,e,t){const r={node:n},i={},s=e.getFill();s&&(i.color=s.getColor());const a=e.getScale();a&&a!==1&&(i.scale=a);const o=t[t.length-1].node,l=S0e[o.namespaceURI],u=gs(i,l);Mn(r,T0e,ki,u,t,l)}const A0e=nt(mt,["color","width"]),R0e=nt(mt,{color:We(IE),width:We(is)});function C0e(n,e,t){const r={node:n},i={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,a=A0e[s.namespaceURI],o=gs(i,a);Mn(r,R0e,ki,o,t,a)}const P0e={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},H7=function(n,e,t){if(n){const r=e[e.length-1].node;return af(r.namespaceURI,P0e[n.getType()])}},M0e=no("Point"),b0e=no("LineString"),k0e=no("LinearRing"),N0e=no("Polygon"),L0e=nt(mt,{LineString:We(zd),Point:We(zd),Polygon:We(X7),GeometryCollection:We(K7)});function K7(n,e,t){const r={node:n},i=e.getType();let s=[],a;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(o){const l=o.getType();if(l==="MultiPoint")s=s.concat(o.getPoints());else if(l==="MultiLineString")s=s.concat(o.getLineStrings());else if(l==="MultiPolygon")s=s.concat(o.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(o);else throw new Error("Unknown geometry type")}),a=H7;else if(i==="MultiPoint")s=e.getPoints(),a=M0e;else if(i==="MultiLineString")s=e.getLineStrings(),a=b0e;else if(i==="MultiPolygon")s=e.getPolygons(),a=N0e;else throw new Error("Unknown geometry type");Mn(r,L0e,a,s,t)}const O0e=nt(mt,{LinearRing:We(zd)});function vL(n,e,t){Mn({node:n},O0e,k0e,[e],t)}const wS=nt(mt,{ExtendedData:We(_0e),MultiGeometry:We(K7),LineString:We(zd),LinearRing:We(zd),Point:We(zd),Polygon:We(X7),Style:We(K0e),address:We(ln),description:We(ln),name:We(ln),open:We(E0),phoneNumber:We(ln),styleUrl:We(ln),visibility:We(E0)}),D0e=nt(mt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),F0e=no("ExtendedData");function Y7(n,e,t){const r={node:n};e.getId()&&n.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const a=Object.keys(i||{}).sort().filter(function(p){return!s[p]}),o=e.getStyleFunction();if(o){const p=o(e,0);if(p){const v=Array.isArray(p)?p:[p];let x=v;if(e.getGeometry()&&(x=v.filter(function(E){const I=E.getGeometryFunction()(e);if(I){const T=I.getType();return T==="GeometryCollection"?I.getGeometriesArrayRecursive().filter(function(M){const k=M.getType();return k==="Point"||k==="MultiPoint"}).length:T==="Point"||T==="MultiPoint"}})),this.writeStyles_){let E=v,I=v;e.getGeometry()&&(E=v.filter(function(T){const M=T.getGeometryFunction()(e);if(M){const k=M.getType();return k==="GeometryCollection"?M.getGeometriesArrayRecursive().filter(function(L){const z=L.getType();return z==="LineString"||z==="MultiLineString"}).length:k==="LineString"||k==="MultiLineString"}}),I=v.filter(function(T){const M=T.getGeometryFunction()(e);if(M){const k=M.getType();return k==="GeometryCollection"?M.getGeometriesArrayRecursive().filter(function(L){const z=L.getType();return z==="Polygon"||z==="MultiPolygon"}).length:k==="Polygon"||k==="MultiPolygon"}})),i.Style={pointStyles:x,lineStyles:E,polyStyles:I}}if(x.length&&i.name===void 0){const E=x[0].getText();E&&(i.name=E.getText())}}}const l=t[t.length-1].node,u=D0e[l.namespaceURI],f=gs(i,u);if(Mn(r,wS,ki,f,t,u),a.length>0){const p=gs(i,a);Mn(r,wS,F0e,[{names:a,values:p}],t)}const d=t[0];let g=e.getGeometry();g&&(g=eo(g,!0,d)),Mn(r,wS,H7,[g],t)}const V0e=nt(mt,["extrude","tessellate","altitudeMode","coordinates"]),j0e=nt(mt,{extrude:We(E0),tessellate:We(E0),altitudeMode:We(ln),coordinates:We(c0e)});function zd(n,e,t){const r=e.getFlatCoordinates(),i={node:n};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const a=t[t.length-1].node,o=V0e[a.namespaceURI],l=gs(s,o);Mn(i,j0e,ki,l,t,o)}const G0e=nt(mt,["color","fill","outline"]),EL=nt(mt,{outerBoundaryIs:We(vL),innerBoundaryIs:We(vL)}),B0e=no("innerBoundaryIs"),U0e=no("outerBoundaryIs");function X7(n,e,t){const r=e.getLinearRings(),i=r.shift(),s={node:n};Mn(s,EL,B0e,r,t),Mn(s,EL,U0e,[i],t)}const z0e=nt(mt,{color:We(IE),fill:We(E0),outline:We(E0)});function $0e(n,e,t){const r={node:n},i=e.getFill(),s=e.getStroke(),a={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},o=t[t.length-1].node,l=G0e[o.namespaceURI],u=gs(a,l);Mn(r,z0e,ki,u,t,l)}function q7(n,e){is(n,Math.round(e*1e6)/1e6)}const W0e=nt(mt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),H0e=nt(mt,{IconStyle:We(w0e),LabelStyle:We(I0e),LineStyle:We(C0e),PolyStyle:We($0e)});function K0e(n,e,t){const r={node:n},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(i.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,a=W0e[s.namespaceURI],o=gs(i,a);Mn(r,H0e,ki,o,t,a)}function Y0e(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}function Z7(n){const e=Object.keys(n.defs),t=e.length;let r,i;for(r=0;r<t;++r){const s=e[r];if(!fy(s)){const a=n.defs(s);let o=a.units;!o&&a.projName==="longlat"&&(o="degrees"),Hy(new wv({code:s,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:o}))}}for(r=0;r<t;++r){const s=e[r],a=fy(s);for(i=0;i<t;++i){const o=e[i],l=fy(o);if(!dy(s,o))if(n.defs[s]===n.defs[o])jS([a,l]);else{const u=n(s,o);FB(a,l,vM(a,l,u.forward),vM(l,a,u.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");Zt.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");Z7(Zt);let mh=null,Cm=null,_d=null;function vI(n){mh&&(n.removeLayer(mh),mh=null),Cm&&(n.removeLayer(Cm),Cm=null),_d=null}async function X0e(n,e){try{const t=fn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${t[0].toFixed(5)}, ${t[1].toFixed(5)}`);const r=Zt("EPSG:4326","EPSG:28992",t);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;vI(n);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,a=Date.now(),o=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${a}`;console.log(" WFS URL:",o);const l=new AbortController,u=setTimeout(()=>l.abort(),1e4),f=await fetch(o,{signal:l.signal});if(clearTimeout(u),!f.ok)return console.error("WFS request failed:",f.status),!1;const d=await f.json();if(console.log(" WFS RESPONSE:",JSON.stringify(d).substring(0,500)),!d.features||d.features.length===0)return console.log("No parcel found at location"),!1;const g=d.features[0];console.log(" PARCEL ID:",g.id||g.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(g.bbox||"geen bbox"));const v=new fC().readFeature(g,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),x=v.getGeometry();if(!x)return console.log("No geometry in parcel feature"),!1;const E=g.properties||{};console.log(` Parcel: ${E.category||"unknown"} - ${E.gewasnaam||E.gewas||"geen gewas"}`),console.log(` Geometry type: ${x.getType()}, extent: ${x.getExtent().map(b=>b.toFixed(0)).join(", ")}`);const I=x.getExtent(),T=I[2]-I[0],M=I[3]-I[1],k=Math.max(T,M)*.05,L=[I[0]-k,I[1]-k,I[2]+k,I[3]+k],z=Math.max(T,M)*.3,P=[I[0]-z,I[1]-z,I[2]+z,I[3]+z];_d=x,mh=new b$({source:new iW({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:L,zIndex:998}),mh.on("prerender",b=>{if(!_d)return;const F=b.context;if(!F)return;const j=b.frameState;if(!j)return;F.save(),F.beginPath(),(_d.getType()==="Polygon"?_d.getCoordinates()[0]:_d.getCoordinates()[0][0]).forEach((V,Te)=>{const Me=n.getPixelFromCoordinate(V);if(!Me)return;const De=j.pixelRatio,be=Me[0]*De,le=Me[1]*De;Te===0?F.moveTo(be,le):F.lineTo(be,le)}),F.closePath(),F.clip()}),mh.on("postrender",b=>{const F=b.context;F&&F.restore()}),n.addLayer(mh);const C=new jp({features:[v]});return Cm=new zp({source:C,style:new Fn({fill:new mi({color:"rgba(0, 0, 0, 0)"}),stroke:new Pi({color:"#dc2626",width:3})}),zIndex:999}),n.addLayer(Cm),console.log(" Parcel height map displayed"),!0}catch(t){return console.error("Failed to show parcel height map:",t),!1}}var tv={};tv.version="0.18.5";var Q7=1252,q0e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],J7=function(n){q0e.indexOf(n)!=-1&&(Q7=n)};function Z0e(){J7(1252)}var wp=function(n){J7(n)};function Q0e(){wp(1200),Z0e()}var ry=function(e){return String.fromCharCode(e)},wL=function(e){return String.fromCharCode(e)},nv,Gc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Sp(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),e+=Gc.charAt(s)+Gc.charAt(a)+Gc.charAt(o)+Gc.charAt(l);return e}function Dl(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Gc.indexOf(n.charAt(u++)),a=Gc.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Gc.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Gc.indexOf(n.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var on=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),$l=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Wh(n){return on?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function SL(n){return on?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Ga=function(e){return on?$l(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function AE(n){if(typeof ArrayBuffer>"u")return Ga(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function y_(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function J0e(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var fi=on?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:$l(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function ege(n){for(var e=[],t=0,r=n.length+250,i=Wh(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Wh(65535),r=65530)}return e.push(i.slice(0,t)),fi(e)}var Pm=/\u0000/g,iy=/[\u0001-\u0006]/g;function $d(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function $a(n,e){var t=""+n;return t.length>=e?t:sr("0",e-t.length)+t}function wC(n,e){var t=""+n;return t.length>=e?t:sr(" ",e-t.length)+t}function rv(n,e){var t=""+n;return t.length>=e?t:t+sr(" ",e-t.length)}function tge(n,e){var t=""+Math.round(n);return t.length>=e?t:sr("0",e-t.length)+t}function nge(n,e){var t=""+n;return t.length>=e?t:sr("0",e-t.length)+t}var TL=Math.pow(2,32);function nd(n,e){if(n>TL||n<-TL)return tge(n,e);var t=Math.round(n);return nge(t,e)}function iv(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var IL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],SS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function rge(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var or={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},AL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},ige={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sv(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,l=1,u=0,f=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,f=d*u+l,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,l=u,u=f;if(f>e&&(u>e?(f=l,o=s):(f=u,o=a)),!t)return[0,r*o,f];var g=Math.floor(r*o/f);return[g,r*o-g*f,f]}function sy(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),t&&(s=hge(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var eV=new Date(1899,11,31,0,0,0),sge=eV.getTime(),age=new Date(1900,2,1,0,0,0);function tV(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=age&&(t+=1440*60*1e3),(t-(sge+(n.getTimezoneOffset()-eV.getTimezoneOffset())*6e4))/(1440*60*1e3)}function SC(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function oge(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function lge(n){var e=n<0?12:11,t=SC(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function cge(n){var e=SC(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function uge(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=lge(n):e===10?t=n.toFixed(10).substr(0,12):t=cge(n),SC(oge(t.toUpperCase()))}function EI(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):uge(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return fu(14,tV(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function hge(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function fge(n,e,t,r){var i="",s=0,a=0,o=t.y,l,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,u=e.length;break;case 3:return SS[t.m-1][1];case 5:return SS[t.m-1][0];default:return SS[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,u=e.length;break;case 3:return IL[t.q][0];default:return IL[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?$a(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=$a(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var f=u>0?$a(l,u):"";return f}function Bc(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var nV=/%/g;function dge(n,e,t){var r=e.replace(nV,""),i=e.length-r.length;return Il(n,r,t*Math.pow(10,2*i))+sr("%",i)}function gge(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Il(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function rV(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+rV(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,f){return l+u+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var iV=/# (\?+)( ?)\/( ?)(\d+)/;function mge(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?sr(" ",n[1].length+1+n[4].length):wC(a,n[1].length)+n[2]+"/"+n[3]+$a(o,n[4].length))}function pge(n,e,t){return t+(e===0?"":""+e)+sr(" ",n[1].length+2+n[4].length)}var sV=/^#*0*\.([0#]+)/,aV=/\).*[0#]/,oV=/\(###\) ###\\?-####/;function ji(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function RL(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function CL(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function _ge(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function yge(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function sa(n,e,t){if(n.charCodeAt(0)===40&&!e.match(aV)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?sa("n",r,t):"("+sa("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return gge(n,e,t);if(e.indexOf("%")!==-1)return dge(n,e,t);if(e.indexOf("E")!==-1)return rV(e,t);if(e.charCodeAt(0)===36)return"$"+sa(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+nd(l,e.length);if(e.match(/^[#?]+$/))return i=nd(t,0),i==="0"&&(i=""),i.length>e.length?i:ji(e.substr(0,e.length-i.length))+i;if(s=e.match(iV))return mge(s,l,u);if(e.match(/^#+0+$/))return u+nd(l,e.length-e.indexOf("0"));if(s=e.match(sV))return i=RL(t,s[1].length).replace(/^([^\.]+)$/,"$1."+ji(s[1])).replace(/\.$/,"."+ji(s[1])).replace(/\.(\d*)$/,function(v,x){return"."+x+sr("0",ji(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+RL(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Bc(nd(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+sa(n,e,-t):Bc(""+(Math.floor(t)+_ge(t,s[1].length)))+"."+$a(CL(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return sa(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=$d(sa(n,e.replace(/[\\-]/g,""),t)),a=0,$d($d(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(oV))return i=sa(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=sv(l,Math.pow(10,a)-1,!1),i=""+u,f=Il("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=rv(o[2],a),f.length<s[4].length&&(f=ji(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=sv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?wC(o[1],a)+s[2]+"/"+s[3]+rv(o[2],a):sr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=nd(t,0),e.length<=i.length?i:ji(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return ji(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=CL(t,s[1].length),t<0?"-"+sa(n,e,-t):Bc(yge(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?$a(0,3-v.length):"")+v})+"."+$a(a,s[1].length);switch(e){case"###,##0.00":return sa(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=Bc(nd(l,0));return p!=="0"?u+p:"";case"###,###.00":return sa(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return sa(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function xge(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Il(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function vge(n,e,t){var r=e.replace(nV,""),i=e.length-r.length;return Il(n,r,t*Math.pow(10,2*i))+sr("%",i)}function lV(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+lV(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,f){return l+u+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function vo(n,e,t){if(n.charCodeAt(0)===40&&!e.match(aV)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?vo("n",r,t):"("+vo("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return xge(n,e,t);if(e.indexOf("%")!==-1)return vge(n,e,t);if(e.indexOf("E")!==-1)return lV(e,t);if(e.charCodeAt(0)===36)return"$"+vo(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+$a(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:ji(e.substr(0,e.length-i.length))+i;if(s=e.match(iV))return pge(s,l,u);if(e.match(/^#+0+$/))return u+$a(l,e.length-e.indexOf("0"));if(s=e.match(sV))return i=(""+t).replace(/^([^\.]+)$/,"$1."+ji(s[1])).replace(/\.$/,"."+ji(s[1])),i=i.replace(/\.(\d*)$/,function(v,x){return"."+x+sr("0",ji(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Bc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+vo(n,e,-t):Bc(""+t)+"."+sr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return vo(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=$d(vo(n,e.replace(/[\\-]/g,""),t)),a=0,$d($d(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(oV))return i=vo(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=sv(l,Math.pow(10,a)-1,!1),i=""+u,f=Il("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=rv(o[2],a),f.length<s[4].length&&(f=ji(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=sv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?wC(o[1],a)+s[2]+"/"+s[3]+rv(o[2],a):sr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:ji(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return ji(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+vo(n,e,-t):Bc(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?$a(0,3-v.length):"")+v})+"."+$a(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Bc(""+l);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return vo(n,e.slice(0,e.lastIndexOf(".")),t)+ji(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Il(n,e,t){return(t|0)===t?vo(n,e,t):sa(n,e,t)}function Ege(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var cV=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function uV(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":iv(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(cV))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function wge(n,e,t,r){for(var i=[],s="",a=0,o="",l="t",u,f,d,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!iv(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=n.charAt(++a),v=p==="("||p===")"?p:"t";i[i.length]={t:v,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=sy(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=sy(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var x={t:o,v:o};if(u==null&&(u=sy(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",a+=5,g="h"):(x.t="t",++a),u==null&&x.t==="T")return"";i[i.length]=x,l=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(cV)){if(u==null&&(u=sy(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",uV(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var E=0,I=0,T;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",E<1&&(E=1);break;case"s":(T=i[a].v.match(/\.0+$/))&&(I=Math.max(I,T[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[a].v.match(/[Hh]/)&&(E=1),E<2&&i[a].v.match(/[Mm]/)&&(E=2),E<3&&i[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var M="",k;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=fge(i[a].t.charCodeAt(0),i[a].v,u,I),i[a].t="t";break;case"n":case"?":for(k=a+1;i[k]!=null&&((o=i[k].t)==="?"||o==="D"||(o===" "||o==="t")&&i[k+1]!=null&&(i[k+1].t==="?"||i[k+1].t==="t"&&i[k+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[k].v==="/"||i[k].v===" "&&i[k+1]!=null&&i[k+1].t=="?"));)i[a].v+=i[k].v,i[k]={v:"",t:";"},++k;M+=i[a].v,a=k-1;break;case"G":i[a].t="t",i[a].v=EI(e,t);break}var L="",z,P;if(M.length>0){M.charCodeAt(0)==40?(z=e<0&&M.charCodeAt(0)===45?-e:e,P=Il("n",M,z)):(z=e<0&&r>1?-e:e,P=Il("n",M,z),z<0&&i[0]&&i[0].t=="t"&&(P=P.substr(1),i[0].v="-"+i[0].v)),k=P.length-1;var C=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){C=a;break}var b=i.length;if(C===i.length&&P.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(k>=i[a].v.length-1?(k-=i[a].v.length,i[a].v=P.substr(k+1,i[a].v.length)):k<0?i[a].v="":(i[a].v=P.substr(0,k+1),k=-1),i[a].t="t",b=a);k>=0&&b<i.length&&(i[b].v=P.substr(0,k+1)+i[b].v)}else if(C!==i.length&&P.indexOf("E")===-1){for(k=P.indexOf(".")-1,a=C;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(f=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")-1:i[a].v.length-1,L=i[a].v.substr(f+1);f>=0;--f)k>=0&&(i[a].v.charAt(f)==="0"||i[a].v.charAt(f)==="#")&&(L=P.charAt(k--)+L);i[a].v=L,i[a].t="t",b=a}for(k>=0&&b<i.length&&(i[b].v=P.substr(0,k+1)+i[b].v),k=P.indexOf(".")+1,a=C;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==C)){for(f=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")+1:0,L=i[a].v.substr(0,f);f<i[a].v.length;++f)k<P.length&&(L+=P.charAt(k++));i[a].v=L,i[a].t="t",b=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(z=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Il(i[a].t,i[a].v,z),i[a].t="t");var F="";for(a=0;a!==i.length;++a)i[a]!=null&&(F+=i[a].v);return F}var PL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function ML(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function Sge(n,e){var t=Ege(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(PL),o=t[1].match(PL);return ML(e,a)?[r,t[0]]:ML(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function fu(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:or)[n],r==null&&(r=t.table&&t.table[AL[n]]||or[AL[n]]),r==null&&(r=ige[n]||"General");break}if(iv(r,0))return EI(e,t);e instanceof Date&&(e=tV(e,t.date1904));var i=Sge(r,e);if(iv(i[1]))return EI(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return wge(i[1],e,t,i[0])}function hV(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(or[t]==null){e<0&&(e=t);continue}if(or[t]==n){e=t;break}}e<0&&(e=391)}return or[e]=n,e}function RE(n){for(var e=0;e!=392;++e)n[e]!==void 0&&hV(n[e],e)}function CE(){or=rge()}var fV=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Tge(n){var e=typeof n=="number"?or[n]:n;return e=e.replace(fV,"(\\d+)"),new RegExp("^"+e+"$")}function Ige(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(fV)||[]).forEach(function(d,g){var p=parseInt(t[g+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:i=p;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:r==-1&&i==-1&&s==-1?f:u+"T"+f}var Age=(function(){var n={};n.version="1.2.0";function e(){for(var P=0,C=new Array(256),b=0;b!=256;++b)P=b,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,C[b]=P;return typeof Int32Array<"u"?new Int32Array(C):C}var t=e();function r(P){var C=0,b=0,F=0,j=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)j[F]=P[F];for(F=0;F!=256;++F)for(b=P[F],C=256+F;C<4096;C+=256)b=j[C]=b>>>8^P[b&255];var U=[];for(F=1;F!=16;++F)U[F-1]=typeof Int32Array<"u"?j.subarray(F*256,F*256+256):j.slice(F*256,F*256+256);return U}var i=r(t),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],f=i[5],d=i[6],g=i[7],p=i[8],v=i[9],x=i[10],E=i[11],I=i[12],T=i[13],M=i[14];function k(P,C){for(var b=C^-1,F=0,j=P.length;F<j;)b=b>>>8^t[(b^P.charCodeAt(F++))&255];return~b}function L(P,C){for(var b=C^-1,F=P.length-15,j=0;j<F;)b=M[P[j++]^b&255]^T[P[j++]^b>>8&255]^I[P[j++]^b>>16&255]^E[P[j++]^b>>>24]^x[P[j++]]^v[P[j++]]^p[P[j++]]^g[P[j++]]^d[P[j++]]^f[P[j++]]^u[P[j++]]^l[P[j++]]^o[P[j++]]^a[P[j++]]^s[P[j++]]^t[P[j++]];for(F+=15;j<F;)b=b>>>8^t[(b^P[j++])&255];return~b}function z(P,C){for(var b=C^-1,F=0,j=P.length,U=0,V=0;F<j;)U=P.charCodeAt(F++),U<128?b=b>>>8^t[(b^U)&255]:U<2048?(b=b>>>8^t[(b^(192|U>>6&31))&255],b=b>>>8^t[(b^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,V=P.charCodeAt(F++)&1023,b=b>>>8^t[(b^(240|U>>8&7))&255],b=b>>>8^t[(b^(128|U>>2&63))&255],b=b>>>8^t[(b^(128|V>>6&15|(U&3)<<4))&255],b=b>>>8^t[(b^(128|V&63))&255]):(b=b>>>8^t[(b^(224|U>>12&15))&255],b=b>>>8^t[(b^(128|U>>6&63))&255],b=b>>>8^t[(b^(128|U&63))&255]);return~b}return n.table=t,n.bstr=k,n.buf=L,n.str=z,n})(),Rn=(function(){var e={};e.version="1.2.1";function t(B,q){for(var K=B.split("/"),X=q.split("/"),Z=0,Q=0,_e=Math.min(K.length,X.length);Z<_e;++Z){if(Q=K[Z].length-X[Z].length)return Q;if(K[Z]!=X[Z])return K[Z]<X[Z]?-1:1}return K.length-X.length}function r(B){if(B.charAt(B.length-1)=="/")return B.slice(0,-1).indexOf("/")===-1?B:r(B.slice(0,-1));var q=B.lastIndexOf("/");return q===-1?B:B.slice(0,q+1)}function i(B){if(B.charAt(B.length-1)=="/")return i(B.slice(0,-1));var q=B.lastIndexOf("/");return q===-1?B:B.slice(q+1)}function s(B,q){typeof q=="string"&&(q=new Date(q));var K=q.getHours();K=K<<6|q.getMinutes(),K=K<<5|q.getSeconds()>>>1,B.write_shift(2,K);var X=q.getFullYear()-1980;X=X<<4|q.getMonth()+1,X=X<<5|q.getDate(),B.write_shift(2,X)}function a(B){var q=B.read_shift(2)&65535,K=B.read_shift(2)&65535,X=new Date,Z=K&31;K>>>=5;var Q=K&15;K>>>=4,X.setMilliseconds(0),X.setFullYear(K+1980),X.setMonth(Q-1),X.setDate(Z);var _e=q&31;q>>>=5;var Ce=q&63;return q>>>=6,X.setHours(q),X.setMinutes(Ce),X.setSeconds(_e<<1),X}function o(B){Ls(B,0);for(var q={},K=0;B.l<=B.length-4;){var X=B.read_shift(2),Z=B.read_shift(2),Q=B.l+Z,_e={};switch(X){case 21589:K=B.read_shift(1),K&1&&(_e.mtime=B.read_shift(4)),Z>5&&(K&2&&(_e.atime=B.read_shift(4)),K&4&&(_e.ctime=B.read_shift(4))),_e.mtime&&(_e.mt=new Date(_e.mtime*1e3));break}B.l=Q,q[X]=_e}return q}var l;function u(){return l||(l={})}function f(B,q){if(B[0]==80&&B[1]==75)return Gr(B,q);if((B[0]|32)==109&&(B[1]|32)==105)return Rr(B,q);if(B.length<512)throw new Error("CFB file size "+B.length+" < 512");var K=3,X=512,Z=0,Q=0,_e=0,Ce=0,pe=0,xe=[],ve=B.slice(0,512);Ls(ve,0);var Ge=d(ve);switch(K=Ge[0],K){case 3:X=512;break;case 4:X=4096;break;case 0:if(Ge[1]==0)return Gr(B,q);default:throw new Error("Major Version: Expected 3 or 4 saw "+K)}X!==512&&(ve=B.slice(0,X),Ls(ve,28));var Xe=B.slice(0,X);g(ve,K);var it=ve.read_shift(4,"i");if(K===3&&it!==0)throw new Error("# Directory Sectors: Expected 0 saw "+it);ve.l+=4,_e=ve.read_shift(4,"i"),ve.l+=4,ve.chk("00100000","Mini Stream Cutoff Size: "),Ce=ve.read_shift(4,"i"),Z=ve.read_shift(4,"i"),pe=ve.read_shift(4,"i"),Q=ve.read_shift(4,"i");for(var Be=-1,Ue=0;Ue<109&&(Be=ve.read_shift(4,"i"),!(Be<0));++Ue)xe[Ue]=Be;var Rt=p(B,X);E(pe,Q,Rt,X,xe);var hn=T(Rt,_e,xe,X);hn[_e].name="!Directory",Z>0&&Ce!==V&&(hn[Ce].name="!MiniFAT"),hn[xe[0]].name="!FAT",hn.fat_addrs=xe,hn.ssz=X;var _n={},Bn=[],Sa=[],Xs=[];M(_e,hn,Rt,Bn,Z,_n,Sa,Ce),v(Sa,Xs,Bn),Bn.shift();var Ts={FileIndex:Sa,FullPaths:Xs};return q&&q.raw&&(Ts.raw={header:Xe,sectors:Rt}),Ts}function d(B){if(B[B.l]==80&&B[B.l+1]==75)return[0,0];B.chk(Te,"Header Signature: "),B.l+=16;var q=B.read_shift(2,"u");return[B.read_shift(2,"u"),q]}function g(B,q){var K=9;switch(B.l+=2,K=B.read_shift(2)){case 9:if(q!=3)throw new Error("Sector Shift: Expected 9 saw "+K);break;case 12:if(q!=4)throw new Error("Sector Shift: Expected 12 saw "+K);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+K)}B.chk("0600","Mini Sector Shift: "),B.chk("000000000000","Reserved: ")}function p(B,q){for(var K=Math.ceil(B.length/q)-1,X=[],Z=1;Z<K;++Z)X[Z-1]=B.slice(Z*q,(Z+1)*q);return X[K-1]=B.slice(K*q),X}function v(B,q,K){for(var X=0,Z=0,Q=0,_e=0,Ce=0,pe=K.length,xe=[],ve=[];X<pe;++X)xe[X]=ve[X]=X,q[X]=K[X];for(;Ce<ve.length;++Ce)X=ve[Ce],Z=B[X].L,Q=B[X].R,_e=B[X].C,xe[X]===X&&(Z!==-1&&xe[Z]!==Z&&(xe[X]=xe[Z]),Q!==-1&&xe[Q]!==Q&&(xe[X]=xe[Q])),_e!==-1&&(xe[_e]=X),Z!==-1&&X!=xe[X]&&(xe[Z]=xe[X],ve.lastIndexOf(Z)<Ce&&ve.push(Z)),Q!==-1&&X!=xe[X]&&(xe[Q]=xe[X],ve.lastIndexOf(Q)<Ce&&ve.push(Q));for(X=1;X<pe;++X)xe[X]===X&&(Q!==-1&&xe[Q]!==Q?xe[X]=xe[Q]:Z!==-1&&xe[Z]!==Z&&(xe[X]=xe[Z]));for(X=1;X<pe;++X)if(B[X].type!==0){if(Ce=X,Ce!=xe[Ce])do Ce=xe[Ce],q[X]=q[Ce]+"/"+q[X];while(Ce!==0&&xe[Ce]!==-1&&Ce!=xe[Ce]);xe[X]=-1}for(q[0]+="/",X=1;X<pe;++X)B[X].type!==2&&(q[X]+="/")}function x(B,q,K){for(var X=B.start,Z=B.size,Q=[],_e=X;K&&Z>0&&_e>=0;)Q.push(q.slice(_e*U,_e*U+U)),Z-=U,_e=oh(K,_e*4);return Q.length===0?Re(0):fi(Q).slice(0,B.size)}function E(B,q,K,X,Z){var Q=V;if(B===V){if(q!==0)throw new Error("DIFAT chain shorter than expected")}else if(B!==-1){var _e=K[B],Ce=(X>>>2)-1;if(!_e)return;for(var pe=0;pe<Ce&&(Q=oh(_e,pe*4))!==V;++pe)Z.push(Q);E(oh(_e,X-4),q-1,K,X,Z)}}function I(B,q,K,X,Z){var Q=[],_e=[];Z||(Z=[]);var Ce=X-1,pe=0,xe=0;for(pe=q;pe>=0;){Z[pe]=!0,Q[Q.length]=pe,_e.push(B[pe]);var ve=K[Math.floor(pe*4/X)];if(xe=pe*4&Ce,X<4+xe)throw new Error("FAT boundary crossed: "+pe+" 4 "+X);if(!B[ve])break;pe=oh(B[ve],xe)}return{nodes:Q,data:VL([_e])}}function T(B,q,K,X){var Z=B.length,Q=[],_e=[],Ce=[],pe=[],xe=X-1,ve=0,Ge=0,Xe=0,it=0;for(ve=0;ve<Z;++ve)if(Ce=[],Xe=ve+q,Xe>=Z&&(Xe-=Z),!_e[Xe]){pe=[];var Be=[];for(Ge=Xe;Ge>=0;){Be[Ge]=!0,_e[Ge]=!0,Ce[Ce.length]=Ge,pe.push(B[Ge]);var Ue=K[Math.floor(Ge*4/X)];if(it=Ge*4&xe,X<4+it)throw new Error("FAT boundary crossed: "+Ge+" 4 "+X);if(!B[Ue]||(Ge=oh(B[Ue],it),Be[Ge]))break}Q[Xe]={nodes:Ce,data:VL([pe])}}return Q}function M(B,q,K,X,Z,Q,_e,Ce){for(var pe=0,xe=X.length?2:0,ve=q[B].data,Ge=0,Xe=0,it;Ge<ve.length;Ge+=128){var Be=ve.slice(Ge,Ge+128);Ls(Be,64),Xe=Be.read_shift(2),it=CC(Be,0,Xe-xe),X.push(it);var Ue={name:it,type:Be.read_shift(1),color:Be.read_shift(1),L:Be.read_shift(4,"i"),R:Be.read_shift(4,"i"),C:Be.read_shift(4,"i"),clsid:Be.read_shift(16),state:Be.read_shift(4,"i"),start:0,size:0},Rt=Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2);Rt!==0&&(Ue.ct=k(Be,Be.l-8));var hn=Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2)+Be.read_shift(2);hn!==0&&(Ue.mt=k(Be,Be.l-8)),Ue.start=Be.read_shift(4,"i"),Ue.size=Be.read_shift(4,"i"),Ue.size<0&&Ue.start<0&&(Ue.size=Ue.type=0,Ue.start=V,Ue.name=""),Ue.type===5?(pe=Ue.start,Z>0&&pe!==V&&(q[pe].name="!StreamData")):Ue.size>=4096?(Ue.storage="fat",q[Ue.start]===void 0&&(q[Ue.start]=I(K,Ue.start,q.fat_addrs,q.ssz)),q[Ue.start].name=Ue.name,Ue.content=q[Ue.start].data.slice(0,Ue.size)):(Ue.storage="minifat",Ue.size<0?Ue.size=0:pe!==V&&Ue.start!==V&&q[pe]&&(Ue.content=x(Ue,q[pe].data,(q[Ce]||{}).data))),Ue.content&&Ls(Ue.content,0),Q[it]=Ue,_e.push(Ue)}}function k(B,q){return new Date((Vs(B,q+4)/1e7*Math.pow(2,32)+Vs(B,q)/1e7-11644473600)*1e3)}function L(B,q){return u(),f(l.readFileSync(B),q)}function z(B,q){var K=q&&q.type;switch(K||on&&Buffer.isBuffer(B)&&(K="buffer"),K||"base64"){case"file":return L(B,q);case"base64":return f(Ga(Dl(B)),q);case"binary":return f(Ga(B),q)}return f(B,q)}function P(B,q){var K=q||{},X=K.root||"Root Entry";if(B.FullPaths||(B.FullPaths=[]),B.FileIndex||(B.FileIndex=[]),B.FullPaths.length!==B.FileIndex.length)throw new Error("inconsistent CFB structure");B.FullPaths.length===0&&(B.FullPaths[0]=X+"/",B.FileIndex[0]={name:X,type:5}),K.CLSID&&(B.FileIndex[0].clsid=K.CLSID),C(B)}function C(B){var q="Sh33tJ5";if(!Rn.find(B,"/"+q)){var K=Re(4);K[0]=55,K[1]=K[3]=50,K[2]=54,B.FileIndex.push({name:q,type:2,content:K,size:4,L:69,R:69,C:69}),B.FullPaths.push(B.FullPaths[0]+q),b(B)}}function b(B,q){P(B);for(var K=!1,X=!1,Z=B.FullPaths.length-1;Z>=0;--Z){var Q=B.FileIndex[Z];switch(Q.type){case 0:X?K=!0:(B.FileIndex.pop(),B.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(Q.R*Q.L*Q.C)&&(K=!0),Q.R>-1&&Q.L>-1&&Q.R==Q.L&&(K=!0);break;default:K=!0;break}}if(!(!K&&!q)){var _e=new Date(1987,1,19),Ce=0,pe=Object.create?Object.create(null):{},xe=[];for(Z=0;Z<B.FullPaths.length;++Z)pe[B.FullPaths[Z]]=!0,B.FileIndex[Z].type!==0&&xe.push([B.FullPaths[Z],B.FileIndex[Z]]);for(Z=0;Z<xe.length;++Z){var ve=r(xe[Z][0]);X=pe[ve],X||(xe.push([ve,{name:i(ve).replace("/",""),type:1,clsid:De,ct:_e,mt:_e,content:null}]),pe[ve]=!0)}for(xe.sort(function(it,Be){return t(it[0],Be[0])}),B.FullPaths=[],B.FileIndex=[],Z=0;Z<xe.length;++Z)B.FullPaths[Z]=xe[Z][0],B.FileIndex[Z]=xe[Z][1];for(Z=0;Z<xe.length;++Z){var Ge=B.FileIndex[Z],Xe=B.FullPaths[Z];if(Ge.name=i(Xe).replace("/",""),Ge.L=Ge.R=Ge.C=-(Ge.color=1),Ge.size=Ge.content?Ge.content.length:0,Ge.start=0,Ge.clsid=Ge.clsid||De,Z===0)Ge.C=xe.length>1?1:-1,Ge.size=0,Ge.type=5;else if(Xe.slice(-1)=="/"){for(Ce=Z+1;Ce<xe.length&&r(B.FullPaths[Ce])!=Xe;++Ce);for(Ge.C=Ce>=xe.length?-1:Ce,Ce=Z+1;Ce<xe.length&&r(B.FullPaths[Ce])!=r(Xe);++Ce);Ge.R=Ce>=xe.length?-1:Ce,Ge.type=1}else r(B.FullPaths[Z+1]||"")==r(Xe)&&(Ge.R=Z+1),Ge.type=2}}}function F(B,q){var K=q||{};if(K.fileType=="mad")return Cr(B,K);switch(b(B),K.fileType){case"zip":return un(B,K)}var X=(function(it){for(var Be=0,Ue=0,Rt=0;Rt<it.FileIndex.length;++Rt){var hn=it.FileIndex[Rt];if(hn.content){var _n=hn.content.length;_n>0&&(_n<4096?Be+=_n+63>>6:Ue+=_n+511>>9)}}for(var Bn=it.FullPaths.length+3>>2,Sa=Be+7>>3,Xs=Be+127>>7,Ts=Sa+Ue+Bn+Xs,cr=Ts+127>>7,Wl=cr<=109?0:Math.ceil((cr-109)/127);Ts+cr+Wl+127>>7>cr;)Wl=++cr<=109?0:Math.ceil((cr-109)/127);var Yn=[1,Wl,cr,Xs,Bn,Ue,Be,0];return it.FileIndex[0].size=Be<<6,Yn[7]=(it.FileIndex[0].start=Yn[0]+Yn[1]+Yn[2]+Yn[3]+Yn[4]+Yn[5])+(Yn[6]+7>>3),Yn})(B),Z=Re(X[7]<<9),Q=0,_e=0;{for(Q=0;Q<8;++Q)Z.write_shift(1,Me[Q]);for(Q=0;Q<8;++Q)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),Q=0;Q<3;++Q)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,X[2]),Z.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:V),Z.write_shift(4,X[3]),Z.write_shift(-4,X[1]?X[0]-1:V),Z.write_shift(4,X[1]),Q=0;Q<109;++Q)Z.write_shift(-4,Q<X[2]?X[1]+Q:-1)}if(X[1])for(_e=0;_e<X[1];++_e){for(;Q<236+_e*127;++Q)Z.write_shift(-4,Q<X[2]?X[1]+Q:-1);Z.write_shift(-4,_e===X[1]-1?V:_e+1)}var Ce=function(it){for(_e+=it;Q<_e-1;++Q)Z.write_shift(-4,Q+1);it&&(++Q,Z.write_shift(-4,V))};for(_e=Q=0,_e+=X[1];Q<_e;++Q)Z.write_shift(-4,be.DIFSECT);for(_e+=X[2];Q<_e;++Q)Z.write_shift(-4,be.FATSECT);Ce(X[3]),Ce(X[4]);for(var pe=0,xe=0,ve=B.FileIndex[0];pe<B.FileIndex.length;++pe)ve=B.FileIndex[pe],ve.content&&(xe=ve.content.length,!(xe<4096)&&(ve.start=_e,Ce(xe+511>>9)));for(Ce(X[6]+7>>3);Z.l&511;)Z.write_shift(-4,be.ENDOFCHAIN);for(_e=Q=0,pe=0;pe<B.FileIndex.length;++pe)ve=B.FileIndex[pe],ve.content&&(xe=ve.content.length,!(!xe||xe>=4096)&&(ve.start=_e,Ce(xe+63>>6)));for(;Z.l&511;)Z.write_shift(-4,be.ENDOFCHAIN);for(Q=0;Q<X[4]<<2;++Q){var Ge=B.FullPaths[Q];if(!Ge||Ge.length===0){for(pe=0;pe<17;++pe)Z.write_shift(4,0);for(pe=0;pe<3;++pe)Z.write_shift(4,-1);for(pe=0;pe<12;++pe)Z.write_shift(4,0);continue}ve=B.FileIndex[Q],Q===0&&(ve.start=ve.size?ve.start-1:V);var Xe=Q===0&&K.root||ve.name;if(xe=2*(Xe.length+1),Z.write_shift(64,Xe,"utf16le"),Z.write_shift(2,xe),Z.write_shift(1,ve.type),Z.write_shift(1,ve.color),Z.write_shift(-4,ve.L),Z.write_shift(-4,ve.R),Z.write_shift(-4,ve.C),ve.clsid)Z.write_shift(16,ve.clsid,"hex");else for(pe=0;pe<4;++pe)Z.write_shift(4,0);Z.write_shift(4,ve.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,ve.start),Z.write_shift(4,ve.size),Z.write_shift(4,0)}for(Q=1;Q<B.FileIndex.length;++Q)if(ve=B.FileIndex[Q],ve.size>=4096)if(Z.l=ve.start+1<<9,on&&Buffer.isBuffer(ve.content))ve.content.copy(Z,Z.l,0,ve.size),Z.l+=ve.size+511&-512;else{for(pe=0;pe<ve.size;++pe)Z.write_shift(1,ve.content[pe]);for(;pe&511;++pe)Z.write_shift(1,0)}for(Q=1;Q<B.FileIndex.length;++Q)if(ve=B.FileIndex[Q],ve.size>0&&ve.size<4096)if(on&&Buffer.isBuffer(ve.content))ve.content.copy(Z,Z.l,0,ve.size),Z.l+=ve.size+63&-64;else{for(pe=0;pe<ve.size;++pe)Z.write_shift(1,ve.content[pe]);for(;pe&63;++pe)Z.write_shift(1,0)}if(on)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function j(B,q){var K=B.FullPaths.map(function(pe){return pe.toUpperCase()}),X=K.map(function(pe){var xe=pe.split("/");return xe[xe.length-(pe.slice(-1)=="/"?2:1)]}),Z=!1;q.charCodeAt(0)===47?(Z=!0,q=K[0].slice(0,-1)+q):Z=q.indexOf("/")!==-1;var Q=q.toUpperCase(),_e=Z===!0?K.indexOf(Q):X.indexOf(Q);if(_e!==-1)return B.FileIndex[_e];var Ce=!Q.match(iy);for(Q=Q.replace(Pm,""),Ce&&(Q=Q.replace(iy,"!")),_e=0;_e<K.length;++_e)if((Ce?K[_e].replace(iy,"!"):K[_e]).replace(Pm,"")==Q||(Ce?X[_e].replace(iy,"!"):X[_e]).replace(Pm,"")==Q)return B.FileIndex[_e];return null}var U=64,V=-2,Te="d0cf11e0a1b11ae1",Me=[208,207,17,224,161,177,26,225],De="00000000000000000000000000000000",be={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:Te,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:De,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function le(B,q,K){u();var X=F(B,K);l.writeFileSync(q,X)}function Ae(B){for(var q=new Array(B.length),K=0;K<B.length;++K)q[K]=String.fromCharCode(B[K]);return q.join("")}function Ie(B,q){var K=F(B,q);switch(q&&q.type||"buffer"){case"file":return u(),l.writeFileSync(q.filename,K),K;case"binary":return typeof K=="string"?K:Ae(K);case"base64":return Sp(typeof K=="string"?K:Ae(K));case"buffer":if(on)return Buffer.isBuffer(K)?K:$l(K);case"array":return typeof K=="string"?Ga(K):K}return K}var Y;function O(B){try{var q=B.InflateRaw,K=new q;if(K._processChunk(new Uint8Array([3,0]),K._finishFlushFlag),K.bytesRead)Y=B;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function te(B,q){if(!Y)return vs(B,q);var K=Y.InflateRaw,X=new K,Z=X._processChunk(B.slice(B.l),X._finishFlushFlag);return B.l+=X.bytesRead,Z}function ne(B){return Y?Y.deflateRawSync(B):ys(B)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ne(B){var q=(B<<1|B<<11)&139536|(B<<5|B<<15)&558144;return(q>>16|q>>8|q)&255}for(var se=typeof Uint8Array<"u",re=se?new Uint8Array(256):[],D=0;D<256;++D)re[D]=Ne(D);function Ye(B,q){var K=re[B&255];return q<=8?K>>>8-q:(K=K<<8|re[B>>8&255],q<=16?K>>>16-q:(K=K<<8|re[B>>16&255],K>>>24-q))}function he(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=6?0:B[X+1]<<8))>>>K&3}function He(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=5?0:B[X+1]<<8))>>>K&7}function ue(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=4?0:B[X+1]<<8))>>>K&15}function W(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=3?0:B[X+1]<<8))>>>K&31}function ae(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=1?0:B[X+1]<<8))>>>K&127}function ot(B,q,K){var X=q&7,Z=q>>>3,Q=(1<<K)-1,_e=B[Z]>>>X;return K<8-X||(_e|=B[Z+1]<<8-X,K<16-X)||(_e|=B[Z+2]<<16-X,K<24-X)||(_e|=B[Z+3]<<24-X),_e&Q}function lt(B,q,K){var X=q&7,Z=q>>>3;return X<=5?B[Z]|=(K&7)<<X:(B[Z]|=K<<X&255,B[Z+1]=(K&7)>>8-X),q+3}function _t(B,q,K){var X=q&7,Z=q>>>3;return K=(K&1)<<X,B[Z]|=K,q+1}function Dt(B,q,K){var X=q&7,Z=q>>>3;return K<<=X,B[Z]|=K&255,K>>>=8,B[Z+1]=K,q+8}function Nn(B,q,K){var X=q&7,Z=q>>>3;return K<<=X,B[Z]|=K&255,K>>>=8,B[Z+1]=K&255,B[Z+2]=K>>>8,q+16}function rn(B,q){var K=B.length,X=2*K>q?2*K:q+5,Z=0;if(K>=q)return B;if(on){var Q=SL(X);if(B.copy)B.copy(Q);else for(;Z<B.length;++Z)Q[Z]=B[Z];return Q}else if(se){var _e=new Uint8Array(X);if(_e.set)_e.set(B);else for(;Z<K;++Z)_e[Z]=B[Z];return _e}return B.length=X,B}function Ir(B){for(var q=new Array(B),K=0;K<B;++K)q[K]=0;return q}function Jr(B,q,K){var X=1,Z=0,Q=0,_e=0,Ce=0,pe=B.length,xe=se?new Uint16Array(32):Ir(32);for(Q=0;Q<32;++Q)xe[Q]=0;for(Q=pe;Q<K;++Q)B[Q]=0;pe=B.length;var ve=se?new Uint16Array(pe):Ir(pe);for(Q=0;Q<pe;++Q)xe[Z=B[Q]]++,X<Z&&(X=Z),ve[Q]=0;for(xe[0]=0,Q=1;Q<=X;++Q)xe[Q+16]=Ce=Ce+xe[Q-1]<<1;for(Q=0;Q<pe;++Q)Ce=B[Q],Ce!=0&&(ve[Q]=xe[Ce+16]++);var Ge=0;for(Q=0;Q<pe;++Q)if(Ge=B[Q],Ge!=0)for(Ce=Ye(ve[Q],X)>>X-Ge,_e=(1<<X+4-Ge)-1;_e>=0;--_e)q[Ce|_e<<Ge]=Ge&15|Q<<4;return X}var Yi=se?new Uint16Array(512):Ir(512),Oi=se?new Uint16Array(32):Ir(32);if(!se){for(var jr=0;jr<512;++jr)Yi[jr]=0;for(jr=0;jr<32;++jr)Oi[jr]=0}(function(){for(var B=[],q=0;q<32;q++)B.push(5);Jr(B,Oi,32);var K=[];for(q=0;q<=143;q++)K.push(8);for(;q<=255;q++)K.push(9);for(;q<=279;q++)K.push(7);for(;q<=287;q++)K.push(8);Jr(K,Yi,288)})();var Ho=(function(){for(var q=se?new Uint8Array(32768):[],K=0,X=0;K<Se.length-1;++K)for(;X<Se[K+1];++X)q[X]=K;for(;X<32768;++X)q[X]=29;var Z=se?new Uint8Array(259):[];for(K=0,X=0;K<me.length-1;++K)for(;X<me[K+1];++X)Z[X]=K;function Q(Ce,pe){for(var xe=0;xe<Ce.length;){var ve=Math.min(65535,Ce.length-xe),Ge=xe+ve==Ce.length;for(pe.write_shift(1,+Ge),pe.write_shift(2,ve),pe.write_shift(2,~ve&65535);ve-- >0;)pe[pe.l++]=Ce[xe++]}return pe.l}function _e(Ce,pe){for(var xe=0,ve=0,Ge=se?new Uint16Array(32768):[];ve<Ce.length;){var Xe=Math.min(65535,Ce.length-ve);if(Xe<10){for(xe=lt(pe,xe,+(ve+Xe==Ce.length)),xe&7&&(xe+=8-(xe&7)),pe.l=xe/8|0,pe.write_shift(2,Xe),pe.write_shift(2,~Xe&65535);Xe-- >0;)pe[pe.l++]=Ce[ve++];xe=pe.l*8;continue}xe=lt(pe,xe,+(ve+Xe==Ce.length)+2);for(var it=0;Xe-- >0;){var Be=Ce[ve];it=(it<<5^Be)&32767;var Ue=-1,Rt=0;if((Ue=Ge[it])&&(Ue|=ve&-32768,Ue>ve&&(Ue-=32768),Ue<ve))for(;Ce[Ue+Rt]==Ce[ve+Rt]&&Rt<250;)++Rt;if(Rt>2){Be=Z[Rt],Be<=22?xe=Dt(pe,xe,re[Be+1]>>1)-1:(Dt(pe,xe,3),xe+=5,Dt(pe,xe,re[Be-23]>>5),xe+=3);var hn=Be<8?0:Be-4>>2;hn>0&&(Nn(pe,xe,Rt-me[Be]),xe+=hn),Be=q[ve-Ue],xe=Dt(pe,xe,re[Be]>>3),xe-=3;var _n=Be<4?0:Be-2>>1;_n>0&&(Nn(pe,xe,ve-Ue-Se[Be]),xe+=_n);for(var Bn=0;Bn<Rt;++Bn)Ge[it]=ve&32767,it=(it<<5^Ce[ve])&32767,++ve;Xe-=Rt-1}else Be<=143?Be=Be+48:xe=_t(pe,xe,1),xe=Dt(pe,xe,re[Be]),Ge[it]=ve&32767,++ve}xe=Dt(pe,xe,0)-1}return pe.l=(xe+7)/8|0,pe.l}return function(pe,xe){return pe.length<8?Q(pe,xe):_e(pe,xe)}})();function ys(B){var q=Re(50+Math.floor(B.length*1.1)),K=Ho(B,q);return q.slice(0,K)}var Di=se?new Uint16Array(32768):Ir(32768),Ko=se?new Uint16Array(32768):Ir(32768),xs=se?new Uint16Array(128):Ir(128),Ys=1,Ea=1;function ei(B,q){var K=W(B,q)+257;q+=5;var X=W(B,q)+1;q+=5;var Z=ue(B,q)+4;q+=4;for(var Q=0,_e=se?new Uint8Array(19):Ir(19),Ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pe=1,xe=se?new Uint8Array(8):Ir(8),ve=se?new Uint8Array(8):Ir(8),Ge=_e.length,Xe=0;Xe<Z;++Xe)_e[ee[Xe]]=Q=He(B,q),pe<Q&&(pe=Q),xe[Q]++,q+=3;var it=0;for(xe[0]=0,Xe=1;Xe<=pe;++Xe)ve[Xe]=it=it+xe[Xe-1]<<1;for(Xe=0;Xe<Ge;++Xe)(it=_e[Xe])!=0&&(Ce[Xe]=ve[it]++);var Be=0;for(Xe=0;Xe<Ge;++Xe)if(Be=_e[Xe],Be!=0){it=re[Ce[Xe]]>>8-Be;for(var Ue=(1<<7-Be)-1;Ue>=0;--Ue)xs[it|Ue<<Be]=Be&7|Xe<<3}var Rt=[];for(pe=1;Rt.length<K+X;)switch(it=xs[ae(B,q)],q+=it&7,it>>>=3){case 16:for(Q=3+he(B,q),q+=2,it=Rt[Rt.length-1];Q-- >0;)Rt.push(it);break;case 17:for(Q=3+He(B,q),q+=3;Q-- >0;)Rt.push(0);break;case 18:for(Q=11+ae(B,q),q+=7;Q-- >0;)Rt.push(0);break;default:Rt.push(it),pe<it&&(pe=it);break}var hn=Rt.slice(0,K),_n=Rt.slice(K);for(Xe=K;Xe<286;++Xe)hn[Xe]=0;for(Xe=X;Xe<30;++Xe)_n[Xe]=0;return Ys=Jr(hn,Di,286),Ea=Jr(_n,Ko,30),q}function wa(B,q){if(B[0]==3&&!(B[1]&3))return[Wh(q),2];for(var K=0,X=0,Z=SL(q||1<<18),Q=0,_e=Z.length>>>0,Ce=0,pe=0;(X&1)==0;){if(X=He(B,K),K+=3,X>>>1)X>>1==1?(Ce=9,pe=5):(K=ei(B,K),Ce=Ys,pe=Ea);else{K&7&&(K+=8-(K&7));var xe=B[K>>>3]|B[(K>>>3)+1]<<8;if(K+=32,xe>0)for(!q&&_e<Q+xe&&(Z=rn(Z,Q+xe),_e=Z.length);xe-- >0;)Z[Q++]=B[K>>>3],K+=8;continue}for(;;){!q&&_e<Q+32767&&(Z=rn(Z,Q+32767),_e=Z.length);var ve=ot(B,K,Ce),Ge=X>>>1==1?Yi[ve]:Di[ve];if(K+=Ge&15,Ge>>>=4,(Ge>>>8&255)===0)Z[Q++]=Ge;else{if(Ge==256)break;Ge-=257;var Xe=Ge<8?0:Ge-4>>2;Xe>5&&(Xe=0);var it=Q+me[Ge];Xe>0&&(it+=ot(B,K,Xe),K+=Xe),ve=ot(B,K,pe),Ge=X>>>1==1?Oi[ve]:Ko[ve],K+=Ge&15,Ge>>>=4;var Be=Ge<4?0:Ge-2>>1,Ue=Se[Ge];for(Be>0&&(Ue+=ot(B,K,Be),K+=Be),!q&&_e<it&&(Z=rn(Z,it+100),_e=Z.length);Q<it;)Z[Q]=Z[Q-Ue],++Q}}}return q?[Z,K+7>>>3]:[Z.slice(0,Q),K+7>>>3]}function vs(B,q){var K=B.slice(B.l||0),X=wa(K,q);return B.l+=X[1],X[0]}function Es(B,q){if(B)typeof console<"u"&&console.error(q);else throw new Error(q)}function Gr(B,q){var K=B;Ls(K,0);var X=[],Z=[],Q={FileIndex:X,FullPaths:Z};P(Q,{root:q.root});for(var _e=K.length-4;(K[_e]!=80||K[_e+1]!=75||K[_e+2]!=5||K[_e+3]!=6)&&_e>=0;)--_e;K.l=_e+4,K.l+=4;var Ce=K.read_shift(2);K.l+=6;var pe=K.read_shift(4);for(K.l=pe,_e=0;_e<Ce;++_e){K.l+=20;var xe=K.read_shift(4),ve=K.read_shift(4),Ge=K.read_shift(2),Xe=K.read_shift(2),it=K.read_shift(2);K.l+=8;var Be=K.read_shift(4),Ue=o(K.slice(K.l+Ge,K.l+Ge+Xe));K.l+=Ge+Xe+it;var Rt=K.l;K.l=Be+4,ti(K,xe,ve,Q,Ue),K.l=Rt}return Q}function ti(B,q,K,X,Z){B.l+=2;var Q=B.read_shift(2),_e=B.read_shift(2),Ce=a(B);if(Q&8257)throw new Error("Unsupported ZIP encryption");for(var pe=B.read_shift(4),xe=B.read_shift(4),ve=B.read_shift(4),Ge=B.read_shift(2),Xe=B.read_shift(2),it="",Be=0;Be<Ge;++Be)it+=String.fromCharCode(B[B.l++]);if(Xe){var Ue=o(B.slice(B.l,B.l+Xe));(Ue[21589]||{}).mt&&(Ce=Ue[21589].mt),((Z||{})[21589]||{}).mt&&(Ce=Z[21589].mt)}B.l+=Xe;var Rt=B.slice(B.l,B.l+xe);switch(_e){case 8:Rt=te(B,ve);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+_e)}var hn=!1;Q&8&&(pe=B.read_shift(4),pe==134695760&&(pe=B.read_shift(4),hn=!0),xe=B.read_shift(4),ve=B.read_shift(4)),xe!=q&&Es(hn,"Bad compressed size: "+q+" != "+xe),ve!=K&&Es(hn,"Bad uncompressed size: "+K+" != "+ve),Wt(X,it,Rt,{unsafe:!0,mt:Ce})}function un(B,q){var K=q||{},X=[],Z=[],Q=Re(1),_e=K.compression?8:0,Ce=0,pe=0,xe=0,ve=0,Ge=0,Xe=B.FullPaths[0],it=Xe,Be=B.FileIndex[0],Ue=[],Rt=0;for(pe=1;pe<B.FullPaths.length;++pe)if(it=B.FullPaths[pe].slice(Xe.length),Be=B.FileIndex[pe],!(!Be.size||!Be.content||it=="Sh33tJ5")){var hn=ve,_n=Re(it.length);for(xe=0;xe<it.length;++xe)_n.write_shift(1,it.charCodeAt(xe)&127);_n=_n.slice(0,_n.l),Ue[Ge]=Age.buf(Be.content,0);var Bn=Be.content;_e==8&&(Bn=ne(Bn)),Q=Re(30),Q.write_shift(4,67324752),Q.write_shift(2,20),Q.write_shift(2,Ce),Q.write_shift(2,_e),Be.mt?s(Q,Be.mt):Q.write_shift(4,0),Q.write_shift(-4,Ue[Ge]),Q.write_shift(4,Bn.length),Q.write_shift(4,Be.content.length),Q.write_shift(2,_n.length),Q.write_shift(2,0),ve+=Q.length,X.push(Q),ve+=_n.length,X.push(_n),ve+=Bn.length,X.push(Bn),Q=Re(46),Q.write_shift(4,33639248),Q.write_shift(2,0),Q.write_shift(2,20),Q.write_shift(2,Ce),Q.write_shift(2,_e),Q.write_shift(4,0),Q.write_shift(-4,Ue[Ge]),Q.write_shift(4,Bn.length),Q.write_shift(4,Be.content.length),Q.write_shift(2,_n.length),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(4,0),Q.write_shift(4,hn),Rt+=Q.l,Z.push(Q),Rt+=_n.length,Z.push(_n),++Ge}return Q=Re(22),Q.write_shift(4,101010256),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,Ge),Q.write_shift(2,Ge),Q.write_shift(4,Rt),Q.write_shift(4,ve),Q.write_shift(2,0),fi([fi(X),fi(Z),Q])}var ws={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ss(B,q){if(B.ctype)return B.ctype;var K=B.name||"",X=K.match(/\.([^\.]+)$/);return X&&ws[X[1]]||q&&(X=(K=q).match(/[\.\\]([^\.\\])+$/),X&&ws[X[1]])?ws[X[1]]:"application/octet-stream"}function Hn(B){for(var q=Sp(B),K=[],X=0;X<q.length;X+=76)K.push(q.slice(X,X+76));return K.join(`\r
`)+`\r
`}function Xi(B){var q=B.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(xe){var ve=xe.charCodeAt(0).toString(16).toUpperCase();return"="+(ve.length==1?"0"+ve:ve)});q=q.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),q.charAt(0)==`
`&&(q="=0D"+q.slice(1)),q=q.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var K=[],X=q.split(`\r
`),Z=0;Z<X.length;++Z){var Q=X[Z];if(Q.length==0){K.push("");continue}for(var _e=0;_e<Q.length;){var Ce=76,pe=Q.slice(_e,_e+Ce);pe.charAt(Ce-1)=="="?Ce--:pe.charAt(Ce-2)=="="?Ce-=2:pe.charAt(Ce-3)=="="&&(Ce-=3),pe=Q.slice(_e,_e+Ce),_e+=Ce,_e<Q.length&&(pe+="="),K.push(pe)}}return K.join(`\r
`)}function Ar(B){for(var q=[],K=0;K<B.length;++K){for(var X=B[K];K<=B.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+B[++K];q.push(X)}for(var Z=0;Z<q.length;++Z)q[Z]=q[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(Q){return String.fromCharCode(parseInt(Q.slice(1),16))});return Ga(q.join(`\r
`))}function Kn(B,q,K){for(var X="",Z="",Q="",_e,Ce=0;Ce<10;++Ce){var pe=q[Ce];if(!pe||pe.match(/^\s*$/))break;var xe=pe.match(/^(.*?):\s*([^\s].*)$/);if(xe)switch(xe[1].toLowerCase()){case"content-location":X=xe[2].trim();break;case"content-type":Q=xe[2].trim();break;case"content-transfer-encoding":Z=xe[2].trim();break}}switch(++Ce,Z.toLowerCase()){case"base64":_e=Ga(Dl(q.slice(Ce).join("")));break;case"quoted-printable":_e=Ar(q.slice(Ce));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var ve=Wt(B,X.slice(K.length),_e,{unsafe:!0});Q&&(ve.ctype=Q)}function Rr(B,q){if(Ae(B.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var K=q&&q.root||"",X=(on&&Buffer.isBuffer(B)?B.toString("binary"):Ae(B)).split(`\r
`),Z=0,Q="";for(Z=0;Z<X.length;++Z)if(Q=X[Z],!!/^Content-Location:/i.test(Q)&&(Q=Q.slice(Q.indexOf("file")),K||(K=Q.slice(0,Q.lastIndexOf("/")+1)),Q.slice(0,K.length)!=K))for(;K.length>0&&(K=K.slice(0,K.length-1),K=K.slice(0,K.lastIndexOf("/")+1),Q.slice(0,K.length)!=K););var _e=(X[1]||"").match(/boundary="(.*?)"/);if(!_e)throw new Error("MAD cannot find boundary");var Ce="--"+(_e[1]||""),pe=[],xe=[],ve={FileIndex:pe,FullPaths:xe};P(ve);var Ge,Xe=0;for(Z=0;Z<X.length;++Z){var it=X[Z];it!==Ce&&it!==Ce+"--"||(Xe++&&Kn(ve,X.slice(Ge,Z),K),Ge=Z)}return ve}function Cr(B,q){var K=q||{},X=K.boundary||"SheetJS";X="------="+X;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],Q=B.FullPaths[0],_e=Q,Ce=B.FileIndex[0],pe=1;pe<B.FullPaths.length;++pe)if(_e=B.FullPaths[pe].slice(Q.length),Ce=B.FileIndex[pe],!(!Ce.size||!Ce.content||_e=="Sh33tJ5")){_e=_e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Rt){return"_x"+Rt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Rt){return"_u"+Rt.charCodeAt(0).toString(16)+"_"});for(var xe=Ce.content,ve=on&&Buffer.isBuffer(xe)?xe.toString("binary"):Ae(xe),Ge=0,Xe=Math.min(1024,ve.length),it=0,Be=0;Be<=Xe;++Be)(it=ve.charCodeAt(Be))>=32&&it<128&&++Ge;var Ue=Ge>=Xe*4/5;Z.push(X),Z.push("Content-Location: "+(K.root||"file:///C:/SheetJS/")+_e),Z.push("Content-Transfer-Encoding: "+(Ue?"quoted-printable":"base64")),Z.push("Content-Type: "+Ss(Ce,_e)),Z.push(""),Z.push(Ue?Xi(ve):Hn(ve))}return Z.push(X+`--\r
`),Z.join(`\r
`)}function gr(B){var q={};return P(q,B),q}function Wt(B,q,K,X){var Z=X&&X.unsafe;Z||P(B);var Q=!Z&&Rn.find(B,q);if(!Q){var _e=B.FullPaths[0];q.slice(0,_e.length)==_e?_e=q:(_e.slice(-1)!="/"&&(_e+="/"),_e=(_e+q).replace("//","/")),Q={name:i(q),type:2},B.FileIndex.push(Q),B.FullPaths.push(_e),Z||Rn.utils.cfb_gc(B)}return Q.content=K,Q.size=K?K.length:0,X&&(X.CLSID&&(Q.clsid=X.CLSID),X.mt&&(Q.mt=X.mt),X.ct&&(Q.ct=X.ct)),Q}function er(B,q){P(B);var K=Rn.find(B,q);if(K){for(var X=0;X<B.FileIndex.length;++X)if(B.FileIndex[X]==K)return B.FileIndex.splice(X,1),B.FullPaths.splice(X,1),!0}return!1}function lr(B,q,K){P(B);var X=Rn.find(B,q);if(X){for(var Z=0;Z<B.FileIndex.length;++Z)if(B.FileIndex[Z]==X)return B.FileIndex[Z].name=i(K),B.FullPaths[Z]=K,!0}return!1}function qi(B){b(B,!0)}return e.find=j,e.read=z,e.parse=f,e.write=Ie,e.writeFile=le,e.utils={cfb_new:gr,cfb_add:Wt,cfb_del:er,cfb_mov:lr,cfb_gc:qi,ReadShift:bm,CheckField:MV,prep_blob:Ls,bconcat:fi,use_zlib:O,_deflateRaw:ys,_inflateRaw:vs,consts:be},e})();function Rge(n){return typeof n=="string"?AE(n):Array.isArray(n)?J0e(n):n}function x_(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=AE(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Ip(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([Rge(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=y_(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function _i(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function bL(n,e){for(var t=[],r=_i(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function TC(n){for(var e=[],t=_i(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function PE(n){for(var e=[],t=_i(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function Cge(n){for(var e=[],t=_i(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var av=new Date(1899,11,30,0,0,0);function ms(n,e){var t=n.getTime(),r=av.getTime()+(n.getTimezoneOffset()-av.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var dV=new Date,Pge=av.getTime()+(dV.getTimezoneOffset()-av.getTimezoneOffset())*6e4,kL=dV.getTimezoneOffset();function gV(n){var e=new Date;return e.setTime(n*24*60*60*1e3+Pge),e.getTimezoneOffset()!==kL&&e.setTime(e.getTime()+(e.getTimezoneOffset()-kL)*6e4),e}var NL=new Date("2017-02-19T19:06:09.000Z"),mV=isNaN(NL.getFullYear())?new Date("2/19/17"):NL,Mge=mV.getFullYear()==2017;function Ki(n,e){var t=new Date(n);if(Mge)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(mV.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function ME(n,e){if(on&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function ps(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=ps(n[t]));return e}function sr(n,e){for(var t="";t.length<e;)t+=n;return t}function Al(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var bge=["january","february","march","april","may","june","july","august","september","october","november","december"];function Tp(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&bge.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function Ft(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return on?r=$l(t):r=ege(t),Rn.utils.cfb_add(n,e,r)}Rn.utils.cfb_add(n,e,t)}else n.file(e,t)}function IC(){return Rn.utils.cfb_new()}var Tr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,kge={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},AC=TC(kge),RC=/[&<>'"]/g,Nge=/[\u0000-\u0008\u000b-\u001f]/g;function Tn(n){var e=n+"";return e.replace(RC,function(t){return AC[t]}).replace(Nge,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function LL(n){return Tn(n).replace(/ /g,"_x0020_")}var pV=/[\u0000-\u001f]/g;function Lge(n){var e=n+"";return e.replace(RC,function(t){return AC[t]}).replace(/\n/g,"<br/>").replace(pV,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function Oge(n){var e=n+"";return e.replace(RC,function(t){return AC[t]}).replace(pV,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function Dge(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function Fge(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function TS(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function OL(n){var e=Wh(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function DL(n){return $l(n,"binary").toString("utf8")}var ay="foo bar baz",Mm=on&&(DL(ay)==TS(ay)&&DL||OL(ay)==TS(ay)&&OL)||TS,Ip=on?function(n){return $l(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Vge=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}})(),_V=/(^\s|\s$|\n)/;function di(n,e){return"<"+n+(e.match(_V)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function Ap(n){return _i(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function qe(n,e,t){return"<"+n+(t!=null?Ap(t):"")+(e!=null?(e.match(_V)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function wI(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function jge(n,e){switch(typeof n){case"string":var t=qe("vt:lpwstr",Tn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return qe((n|0)==n?"vt:i4":"vt:r8",Tn(String(n)));case"boolean":return qe("vt:bool",n?"true":"false")}if(n instanceof Date)return qe("vt:filetime",wI(n));throw new Error("Unable to serialize "+n)}var Yr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},F0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Fs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Gge(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function Bge(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var FL=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},VL=on?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:$l(e)})):FL(n)}:FL,jL=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(rm(n,i)));return r.join("").replace(Pm,"")},CC=on?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(Pm,""):jL(n,e,t)}:jL,GL=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},yV=on?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):GL(n,e,t)}:GL,BL=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(yd(n,i)));return r.join("")},v_=on?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):BL(e,t,r)}:BL,xV=function(n,e){var t=Vs(n,e);return t>0?v_(n,e+4,e+4+t-1):""},vV=xV,EV=function(n,e){var t=Vs(n,e);return t>0?v_(n,e+4,e+4+t-1):""},wV=EV,SV=function(n,e){var t=2*Vs(n,e);return t>0?v_(n,e+4,e+4+t-1):""},TV=SV,IV=function(e,t){var r=Vs(e,t);return r>0?CC(e,t+4,t+4+r):""},AV=IV,RV=function(n,e){var t=Vs(n,e);return t>0?v_(n,e+4,e+4+t):""},CV=RV,PV=function(n,e){return Gge(n,e)},ov=PV,PC=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};on&&(vV=function(e,t){if(!Buffer.isBuffer(e))return xV(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},wV=function(e,t){if(!Buffer.isBuffer(e))return EV(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},TV=function(e,t){if(!Buffer.isBuffer(e))return SV(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},AV=function(e,t){if(!Buffer.isBuffer(e))return IV(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},CV=function(e,t){if(!Buffer.isBuffer(e))return RV(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},ov=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):PV(e,t)},PC=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var yd=function(n,e){return n[e]},rm=function(n,e){return n[e+1]*256+n[e]},Uge=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},Vs=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},oh=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},zge=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function bm(n,e){var t="",r,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,on&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(rm(this,u)),u+=2;n*=2;break;case"utf8":t=v_(this,this.l,this.l+n);break;case"utf16le":n*=2,t=CC(this,this.l,this.l+n);break;case"wstr":return bm.call(this,n,"dbcs");case"lpstr-ansi":t=vV(this,this.l),n=4+Vs(this,this.l);break;case"lpstr-cp":t=wV(this,this.l),n=4+Vs(this,this.l);break;case"lpwstr":t=TV(this,this.l),n=4+2*Vs(this,this.l);break;case"lpp4":n=4+Vs(this,this.l),t=AV(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+Vs(this,this.l),t=CV(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=yd(this,this.l+n++))!==0;)s.push(ry(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=rm(this,this.l+n))!==0;)s.push(ry(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=yd(this,u),this.l=u+1,o=bm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(ry(rm(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=yd(this,u),this.l=u+1,o=bm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(ry(yd(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=yd(this,this.l),this.l++,r;case 2:return r=(e==="i"?Uge:rm)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?oh:zge)(this,this.l),this.l+=4,r):(i=Vs(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=ov(this,this.l):i=ov([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=yV(this,this.l,n);break}}return this.l+=n,t}var $ge=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},Wge=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},Hge=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function Kge(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)Hge(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,$ge(this,e,this.l);break;case 8:if(r=8,t==="f"){Bge(this,e,this.l);break}case 16:break;case-4:r=4,Wge(this,e,this.l);break}return this.l+=r,this}function MV(n,e){var t=yV(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Ls(n,e){n.l=e,n.read_shift=bm,n.chk=MV,n.write_shift=Kge}function Bo(n,e){n.l+=e}function Re(n){var e=Wh(n);return Ls(e,0),e}function ds(){var n=[],e=on?256:2048,t=function(u){var f=Re(u);return Ls(f,0),f},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),fi(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function Oe(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=Gxe[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&PC(t)&&n.push(t)}}function km(n,e,t){var r=ps(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function UL(n,e,t){var r=ps(n);return r.s=km(r.s,e.s,t),r.e=km(r.e,e.s,t),r}function Nm(n,e){if(n.cRel&&n.c<0)for(n=ps(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=ps(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=An(n);return!n.cRel&&n.cRel!=null&&(t=qge(t)),!n.rRel&&n.rRel!=null&&(t=Yge(t)),t}function IS(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Ni(n.s.c)+":"+(n.e.cRel?"":"$")+Ni(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+pi(n.s.r)+":"+(n.e.rRel?"":"$")+pi(n.e.r):Nm(n.s,e.biff)+":"+Nm(n.e,e.biff)}function MC(n){return parseInt(Xge(n),10)-1}function pi(n){return""+(n+1)}function Yge(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Xge(n){return n.replace(/\$(\d+)$/,"$1")}function bC(n){for(var e=Zge(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Ni(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function qge(n){return n.replace(/^([A-Z])/,"$$$1")}function Zge(n){return n.replace(/^\$([A-Z])/,"$1")}function Qge(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function qr(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function An(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function Hs(n){var e=n.indexOf(":");return e==-1?{s:qr(n),e:qr(n)}:{s:qr(n.slice(0,e)),e:qr(n.slice(e+1))}}function wr(n,e){return typeof e>"u"||typeof e=="number"?wr(n.s,n.e):(typeof n!="string"&&(n=An(n)),typeof e!="string"&&(e=An(e)),n==e?n:n+":"+e)}function Gn(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function zL(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=fu(n.z,t?ms(e):e)}catch{}try{return n.w=fu((n.XF||{}).numFmtId||(t?14:0),t?ms(e):e)}catch{return""+e}}function Fl(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?E_[n.v]||n.v:e==null?zL(n,n.v):zL(n,e))}function of(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function bV(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?qr(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var f=Gn(s["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(u.e.r=a=f.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[d].length;++g)if(!(typeof e[d][g]>"u")){var p={v:e[d][g]},v=a+d,x=o+g;if(u.s.r>v&&(u.s.r=v),u.s.c>x&&(u.s.c=x),u.e.r<v&&(u.e.r=v),u.e.c<x&&(u.e.c=x),e[d][g]&&typeof e[d][g]=="object"&&!Array.isArray(e[d][g])&&!(e[d][g]instanceof Date))p=e[d][g];else if(Array.isArray(p.v)&&(p.f=e[d][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||or[14],r.cellDates?(p.t="d",p.w=fu(p.z,ms(p.v))):(p.t="n",p.v=ms(p.v),p.w=fu(p.z,p.v))):p.t="s";if(i)s[v]||(s[v]=[]),s[v][x]&&s[v][x].z&&(p.z=s[v][x].z),s[v][x]=p;else{var E=An({c:x,r:v});s[E]&&s[E].z&&(p.z=s[E].z),s[E]=p}}}return u.s.c<1e7&&(s["!ref"]=wr(u)),s}function V0(n,e){return bV(null,n,e)}function Jge(n){return n.read_shift(4,"i")}function Ya(n,e){return e||(e=Re(4)),e.write_shift(4,n),e}function Li(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function Zr(n,e){var t=!1;return e==null&&(t=!0,e=Re(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function eme(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function tme(n,e){return e||(e=Re(4)),e.write_shift(2,0),e.write_shift(2,0),e}function kC(n,e){var t=n.l,r=n.read_shift(1),i=Li(n),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=n.read_shift(4),l=0;l!=o;++l)s.push(eme(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function nme(n,e){var t=!1;return e==null&&(t=!0,e=Re(15+4*n.t.length)),e.write_shift(1,0),Zr(n.t,e),t?e.slice(0,e.l):e}var rme=kC;function ime(n,e){var t=!1;return e==null&&(t=!0,e=Re(23+4*n.t.length)),e.write_shift(1,1),Zr(n.t,e),e.write_shift(4,1),tme({},e),t?e.slice(0,e.l):e}function va(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function lf(n,e){return e==null&&(e=Re(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function cf(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function uf(n,e){return e==null&&(e=Re(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var sme=Li,kV=Zr;function NC(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function lv(n,e){var t=!1;return e==null&&(t=!0,e=Re(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var ame=Li,SI=NC,LC=lv;function NV(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?ov([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):oh(e,0)>>2;return t?i/100:i}function LV(n,e){e==null&&(e=Re(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function OV(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function ome(n,e){return e||(e=Re(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var hf=OV,j0=ome;function G0(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Hh(n,e){return(e||Re(8)).write_shift(8,n,"f")}function lme(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=_me[i];u&&(e.rgb=eO(u));break;case 2:e.rgb=eO([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function cv(n,e){if(e||(e=Re(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function cme(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function ume(n,e){e||(e=Re(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var DV=2,ks=3,oy=11,uv=19,ly=64,hme=65,fme=71,dme=4108,gme=4126,ci=80,$L={1:{n:"CodePage",t:DV},2:{n:"Category",t:ci},3:{n:"PresentationFormat",t:ci},4:{n:"ByteCount",t:ks},5:{n:"LineCount",t:ks},6:{n:"ParagraphCount",t:ks},7:{n:"SlideCount",t:ks},8:{n:"NoteCount",t:ks},9:{n:"HiddenCount",t:ks},10:{n:"MultimediaClipCount",t:ks},11:{n:"ScaleCrop",t:oy},12:{n:"HeadingPairs",t:dme},13:{n:"TitlesOfParts",t:gme},14:{n:"Manager",t:ci},15:{n:"Company",t:ci},16:{n:"LinksUpToDate",t:oy},17:{n:"CharacterCount",t:ks},19:{n:"SharedDoc",t:oy},22:{n:"HyperlinksChanged",t:oy},23:{n:"AppVersion",t:ks,p:"version"},24:{n:"DigSig",t:hme},26:{n:"ContentType",t:ci},27:{n:"ContentStatus",t:ci},28:{n:"Language",t:ci},29:{n:"Version",t:ci},255:{},2147483648:{n:"Locale",t:uv},2147483651:{n:"Behavior",t:uv},1919054434:{}},WL={1:{n:"CodePage",t:DV},2:{n:"Title",t:ci},3:{n:"Subject",t:ci},4:{n:"Author",t:ci},5:{n:"Keywords",t:ci},6:{n:"Comments",t:ci},7:{n:"Template",t:ci},8:{n:"LastAuthor",t:ci},9:{n:"RevNumber",t:ci},10:{n:"EditTime",t:ly},11:{n:"LastPrinted",t:ly},12:{n:"CreatedDate",t:ly},13:{n:"ModifiedDate",t:ly},14:{n:"PageCount",t:ks},15:{n:"WordCount",t:ks},16:{n:"CharCount",t:ks},17:{n:"Thumbnail",t:fme},18:{n:"Application",t:ci},19:{n:"DocSecurity",t:ks},255:{},2147483648:{n:"Locale",t:uv},2147483651:{n:"Behavior",t:uv},1919054434:{}};function mme(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var pme=mme([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_me=ps(pme),E_={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},yme={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},cy={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function FV(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function VV(n,e){var t=Cge(yme),r=[],i;r[r.length]=Tr,r[r.length]=qe("Types",null,{xmlns:Yr.CT,"xmlns:xsd":Yr.xsd,"xmlns:xsi":Yr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return qe("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){n[l]&&n[l].length>0&&(i=n[l][0],r[r.length]=qe("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:cy[l][e.bookType]||cy[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=qe("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:cy[l][e.bookType]||cy[l].xlsx})})},o=function(l){(n[l]||[]).forEach(function(u){r[r.length]=qe("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Jt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function jV(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function Wd(n){var e=[Tr,qe("Relationships",null,{xmlns:Yr.RELS})];return _i(n["!id"]).forEach(function(t){e[e.length]=qe("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function En(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[Jt.HLINK,Jt.XPATH,Jt.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function xme(n){var e=[Tr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function HL(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function vme(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Eme(n){var e=[Tr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(HL(n[t][0],n[t][1])),e.push(vme("",n[t][0]));return e.push(HL("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function GV(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+tv.version+"</meta:generator></office:meta></office:document-meta>"}var wh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function AS(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=Tn(e),r[r.length]=t?qe(n,e,t):di(n,e))}function BV(n,e){var t=e||{},r=[Tr,qe("cp:coreProperties",null,{"xmlns:cp":Yr.CORE_PROPS,"xmlns:dc":Yr.dc,"xmlns:dcterms":Yr.dcterms,"xmlns:dcmitype":Yr.dcmitype,"xmlns:xsi":Yr.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&AS("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:wI(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&AS("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:wI(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=wh.length;++s){var a=wh[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&AS(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Hd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],UV=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function zV(n){var e=[],t=qe;return n||(n={}),n.Application="SheetJS",e[e.length]=Tr,e[e.length]=qe("Properties",null,{xmlns:Yr.EXT_PROPS,"xmlns:vt":Yr.vt}),Hd.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Tn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Tn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function $V(n){var e=[Tr,qe("Properties",null,{xmlns:Yr.CUST_PROPS,"xmlns:vt":Yr.vt})];if(!n)return e.join("");var t=1;return _i(n).forEach(function(i){++t,e[e.length]=qe("property",jge(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Tn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var KL={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function wme(n,e){var t=[];return _i(KL).map(function(r){for(var i=0;i<wh.length;++i)if(wh[i][1]==r)return wh[i];for(i=0;i<Hd.length;++i)if(Hd[i][1]==r)return Hd[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(di(KL[r[1]]||r[1],i))}}),qe("DocumentProperties",t.join(""),{xmlns:Fs.o})}function Sme(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&_i(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<wh.length;++a)if(s==wh[a][1])return;for(a=0;a<Hd.length;++a)if(s==Hd[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(qe(LL(s),o,{"dt:dt":l}))}}),e&&_i(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(qe(LL(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Fs.o+'">'+i.join("")+"</"+r+">"}function Tme(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=Re(8);return a.write_shift(4,r),a.write_shift(4,i),a}function YL(n,e){var t=Re(4),r=Re(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=Re(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Tme(e);break;case 31:case 80:for(r=Re(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return fi([t,r])}var WV=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Ime(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function XL(n,e,t){var r=Re(8),i=[],s=[],a=8,o=0,l=Re(8),u=Re(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=Re(8),u.write_shift(4,0),i.unshift(u);var f=[Re(4)];for(f[0].write_shift(4,n.length),o=0;o<n.length;++o){var d=n[o][0];for(l=Re(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);f.push(l)}l=fi(f),s.unshift(l),a+=8+l.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(WV.indexOf(n[o][0])>-1||UV.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],p=0;if(e){p=+e[n[o][0]];var v=t[p];if(v.p=="version"&&typeof g=="string"){var x=g.split(".");g=(+x[0]<<16)+(+x[1]||0)}l=YL(v.t,g)}else{var E=Ime(g);E==-1&&(E=31,g=String(g)),l=YL(E,g)}s.push(l),u=Re(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+l.length}var I=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,I),I+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),fi([r].concat(i).concat(s))}function qL(n,e,t,r,i,s){var a=Re(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Rn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=XL(n,t,r);if(o.push(l),i){var u=XL(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return fi(o)}function Ame(n,e){e||(e=Re(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function Rme(n,e){return n.read_shift(e)===1}function Gi(n,e){return e||(e=Re(2)),e.write_shift(2,+!!n),e}function HV(n){return n.read_shift(2,"u")}function la(n,e){return e||(e=Re(2)),e.write_shift(2,n),e}function KV(n,e,t){return t||(t=Re(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function YV(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function Cme(n){var e=n.t||"",t=Re(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=Re(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return fi(i)}function Pme(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function Mme(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):Pme(n,r,t)}function bme(n,e,t){if(t.biff>5)return Mme(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function XV(n,e,t){return t||(t=Re(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function ZL(n,e){e||(e=Re(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function kme(n){var e=Re(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),ZL(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&ZL(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),t=0;t<r.length-3*l;++t)e.write_shift(1,r.charCodeAt(t+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Kh(n,e,t,r){return r||(r=Re(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function Nme(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function Lme(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function qV(n,e){return e||(e=Re(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function OC(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Re(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Ome(n,e){var t=!e||e.biff==8,r=Re(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function Dme(n,e){var t=!e||e.biff>=8?2:1,r=Re(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Fme(n,e){var t=Re(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=Cme(n[i]);var s=fi([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function Vme(){var n=Re(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function jme(n){var e=Re(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Gme(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=Re(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function Bme(n,e,t,r){var i=Re(10);return Kh(n,e,r,i),i.write_shift(4,t),i}function Ume(n,e,t,r,i){var s=!i||i.biff==8,a=Re(8+ +s+(1+s)*t.length);return Kh(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function zme(n,e,t,r){var i=t&&t.biff==5;r||(r=Re(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function $me(n,e){var t=e.biff==8||!e.biff?4:2,r=Re(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function QL(n,e,t,r){var i=t&&t.biff==5;r||(r=Re(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Wme(n){var e=Re(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Hme(n,e,t,r,i,s){var a=Re(8);return Kh(n,e,r,a),KV(t,s,a),a}function Kme(n,e,t,r){var i=Re(14);return Kh(n,e,r,i),Hh(t,i),i}function Yme(n,e,t){if(t.biff<8)return Xme(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(Nme(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function Xme(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=YV(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function qme(n){var e=Re(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)qV(n[t],e);return e}function Zme(n){var e=Re(24),t=qr(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return fi([e,kme(n[1])])}function Qme(n){var e=n[1].Tooltip,t=Re(10+2*(e.length+1));t.write_shift(2,2048);var r=qr(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function Jme(n){return n||(n=Re(4)),n.write_shift(2,1),n.write_shift(2,1),n}function epe(n,e,t){if(!t.cellStyles)return Bo(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(u.level=l>>8&7),u}function tpe(n,e){var t=Re(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function npe(n){for(var e=Re(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function rpe(n,e,t){var r=Re(15);return S_(r,n,e),r.write_shift(8,t,"f"),r}function ipe(n,e,t){var r=Re(9);return S_(r,n,e),r.write_shift(2,t),r}var spe=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=TC({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var u=[],f=Wh(1);switch(l.type){case"base64":f=Ga(Dl(o));break;case"binary":f=Ga(o);break;case"buffer":case"array":f=o;break}Ls(f,0);var d=f.read_shift(1),g=!!(d&136),p=!1,v=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var x=0,E=521;d==2&&(x=f.read_shift(2)),f.l+=3,d!=2&&(x=f.read_shift(4)),x>1048576&&(x=1e6),d!=2&&(E=f.read_shift(2));var I=f.read_shift(2),T=l.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(T=n[f[f.l]]),f.l+=1,f.l+=2),v&&(f.l+=36);for(var M=[],k={},L=Math.min(f.length,d==2?521:E-10-(p?264:0)),z=v?32:11;f.l<L&&f[f.l]!=13;)switch(k={},k.name=nv.utils.decode(T,f.slice(f.l,f.l+z)).replace(/[\u0000\r\n].*$/g,""),f.l+=z,k.type=String.fromCharCode(f.read_shift(1)),d!=2&&!v&&(k.offset=f.read_shift(4)),k.len=f.read_shift(1),d==2&&(k.offset=f.read_shift(2)),k.dec=f.read_shift(1),k.name.length&&M.push(k),d!=2&&(f.l+=v?13:14),k.type){case"B":(!p||k.len!=8)&&l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(f[f.l]!==13&&(f.l=E-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=E;var P=0,C=0;for(u[0]=[],C=0;C!=M.length;++C)u[0][C]=M[C].name;for(;x-- >0;){if(f[f.l]===42){f.l+=I;continue}for(++f.l,u[++P]=[],C=0,C=0;C!=M.length;++C){var b=f.slice(f.l,f.l+M[C].len);f.l+=M[C].len,Ls(b,0);var F=nv.utils.decode(T,b);switch(M[C].type){case"C":F.trim().length&&(u[P][C]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[P][C]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[P][C]=F;break;case"F":u[P][C]=parseFloat(F.trim());break;case"+":case"I":u[P][C]=v?b.read_shift(-4,"i")^2147483648:b.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[P][C]=!0;break;case"N":case"F":u[P][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[P][C]="##MEMO##"+(v?parseInt(F.trim(),10):b.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[P][C]=+F||0);break;case"@":u[P][C]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":u[P][C]=new Date((b.read_shift(4)-2440588)*864e5+b.read_shift(4));break;case"Y":u[P][C]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[P][C]=-b.read_shift(-8,"f");break;case"B":if(p&&M[C].len==8){u[P][C]=b.read_shift(8,"f");break}case"G":case"P":b.l+=M[C].len;break;case"0":if(M[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+M[C].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=M,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var f=V0(t(o,u),u);return f["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,f}function i(o,l){try{return of(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&wp(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=ds(),d=mv(o,{header:1,raw:!0,cellDates:!0}),g=d[0],p=d.slice(1),v=o["!cols"]||[],x=0,E=0,I=0,T=1;for(x=0;x<g.length;++x){if(((v[x]||{}).DBF||{}).name){g[x]=v[x].DBF.name,++I;continue}if(g[x]!=null){if(++I,typeof g[x]=="number"&&(g[x]=g[x].toString(10)),typeof g[x]!="string")throw new Error("DBF Invalid column name "+g[x]+" |"+typeof g[x]+"|");if(g.indexOf(g[x])!==x){for(E=0;E<1024;++E)if(g.indexOf(g[x]+"_"+E)==-1){g[x]+="_"+E;break}}}}var M=Gn(o["!ref"]),k=[],L=[],z=[];for(x=0;x<=M.e.c-M.s.c;++x){var P="",C="",b=0,F=[];for(E=0;E<p.length;++E)p[E][x]!=null&&F.push(p[E][x]);if(F.length==0||g[x]==null){k[x]="?";continue}for(E=0;E<F.length;++E){switch(typeof F[E]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=F[E]instanceof Date?"D":"C";break;default:C="C"}b=Math.max(b,String(F[E]).length),P=P&&P!=C?"C":C}b>250&&(b=250),C=((v[x]||{}).DBF||{}).type,C=="C"&&v[x].DBF.len>b&&(b=v[x].DBF.len),P=="B"&&C=="N"&&(P="N",z[x]=v[x].DBF.dec,b=v[x].DBF.len),L[x]=P=="C"||C=="N"?b:s[P]||0,T+=L[x],k[x]=P}var j=f.next(32);for(j.write_shift(4,318902576),j.write_shift(4,p.length),j.write_shift(2,296+32*I),j.write_shift(2,T),x=0;x<4;++x)j.write_shift(4,0);for(j.write_shift(4,0|(+e[Q7]||3)<<8),x=0,E=0;x<g.length;++x)if(g[x]!=null){var U=f.next(32),V=(g[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);U.write_shift(1,V,"sbcs"),U.write_shift(1,k[x]=="?"?"C":k[x],"sbcs"),U.write_shift(4,E),U.write_shift(1,L[x]||s[k[x]]||0),U.write_shift(1,z[x]||0),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(1,0),U.write_shift(4,0),U.write_shift(4,0),E+=L[x]||s[k[x]]||0}var Te=f.next(264);for(Te.write_shift(4,13),x=0;x<65;++x)Te.write_shift(4,0);for(x=0;x<p.length;++x){var Me=f.next(T);for(Me.write_shift(1,0),E=0;E<g.length;++E)if(g[E]!=null)switch(k[E]){case"L":Me.write_shift(1,p[x][E]==null?63:p[x][E]?84:70);break;case"B":Me.write_shift(8,p[x][E]||0,"f");break;case"N":var De="0";for(typeof p[x][E]=="number"&&(De=p[x][E].toFixed(z[E]||0)),I=0;I<L[E]-De.length;++I)Me.write_shift(1,32);Me.write_shift(1,De,"sbcs");break;case"D":p[x][E]?(Me.write_shift(4,("0000"+p[x][E].getFullYear()).slice(-4),"sbcs"),Me.write_shift(2,("00"+(p[x][E].getMonth()+1)).slice(-2),"sbcs"),Me.write_shift(2,("00"+p[x][E].getDate()).slice(-2),"sbcs")):Me.write_shift(8,"00000000","sbcs");break;case"C":var be=String(p[x][E]!=null?p[x][E]:"").slice(0,L[E]);for(Me.write_shift(1,be,"sbcs"),I=0;I<L[E]-be.length;++I)Me.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}})(),ape=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+_i(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var v=n[p];return typeof v=="number"?wL(v):v},r=function(g,p,v){var x=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return x==59?g:wL(x)};n["|"]=254;function i(g,p){switch(p.type){case"base64":return s(Dl(g),p);case"binary":return s(g,p);case"buffer":return s(on&&Buffer.isBuffer(g)?g.toString("binary"):y_(g),p);case"array":return s(ME(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var v=g.split(/[\n\r]+/),x=-1,E=-1,I=0,T=0,M=[],k=[],L=null,z={},P=[],C=[],b=[],F=0,j;for(+p.codepage>=0&&wp(+p.codepage);I!==v.length;++I){F=0;var U=v[I].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),V=U.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),Te=V[0],Me;if(U.length>0)switch(Te){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&k.push(U.slice(3).replace(/;;/g,";"));break;case"C":var De=!1,be=!1,le=!1,Ae=!1,Ie=-1,Y=-1;for(T=1;T<V.length;++T)switch(V[T].charAt(0)){case"A":break;case"X":E=parseInt(V[T].slice(1))-1,be=!0;break;case"Y":for(x=parseInt(V[T].slice(1))-1,be||(E=0),j=M.length;j<=x;++j)M[j]=[];break;case"K":Me=V[T].slice(1),Me.charAt(0)==='"'?Me=Me.slice(1,Me.length-1):Me==="TRUE"?Me=!0:Me==="FALSE"?Me=!1:isNaN(Al(Me))?isNaN(Tp(Me).getDate())||(Me=Ki(Me)):(Me=Al(Me),L!==null&&uV(L)&&(Me=gV(Me))),De=!0;break;case"E":Ae=!0;var O=i_e(V[T].slice(1),{r:x,c:E});M[x][E]=[M[x][E],O];break;case"S":le=!0,M[x][E]=[M[x][E],"S5S"];break;case"G":break;case"R":Ie=parseInt(V[T].slice(1))-1;break;case"C":Y=parseInt(V[T].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}if(De&&(M[x][E]&&M[x][E].length==2?M[x][E][0]=Me:M[x][E]=Me,L=null),le){if(Ae)throw new Error("SYLK shared formula cannot have own formula");var te=Ie>-1&&M[Ie][Y];if(!te||!te[1])throw new Error("SYLK shared formula cannot find base");M[x][E][1]=s_e(te[1],{r:x-Ie,c:E-Y})}break;case"F":var ne=0;for(T=1;T<V.length;++T)switch(V[T].charAt(0)){case"X":E=parseInt(V[T].slice(1))-1,++ne;break;case"Y":for(x=parseInt(V[T].slice(1))-1,j=M.length;j<=x;++j)M[j]=[];break;case"M":F=parseInt(V[T].slice(1))/20;break;case"F":break;case"G":break;case"P":L=k[parseInt(V[T].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(b=V[T].slice(1).split(" "),j=parseInt(b[0],10);j<=parseInt(b[1],10);++j)F=parseInt(b[2],10),C[j-1]=F===0?{hidden:!0}:{wch:F},DC(C[j-1]);break;case"C":E=parseInt(V[T].slice(1))-1,C[E]||(C[E]={});break;case"R":x=parseInt(V[T].slice(1))-1,P[x]||(P[x]={}),F>0?(P[x].hpt=F,P[x].hpx=tj(F)):F===0&&(P[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}ne<1&&(L=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}}return P.length>0&&(z["!rows"]=P),C.length>0&&(z["!cols"]=C),p&&p.sheetRows&&(M=M.slice(0,p.sheetRows)),[M,z]}function a(g,p){var v=i(g,p),x=v[0],E=v[1],I=V0(x,p);return _i(E).forEach(function(T){I[T]=E[T]}),I}function o(g,p){return of(a(g,p),p)}function l(g,p,v,x){var E="C;Y"+(v+1)+";X"+(x+1)+";K";switch(g.t){case"n":E+=g.v||0,g.f&&!g.F&&(E+=";E"+VC(g.f,{r:v,c:x}));break;case"b":E+=g.v?"TRUE":"FALSE";break;case"e":E+=g.w||g.v;break;case"d":E+='"'+(g.w||g.v)+'"';break;case"s":E+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(g,p){p.forEach(function(v,x){var E="F;W"+(x+1)+" "+(x+1)+" ";v.hidden?E+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=hv(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=fv(v.wpx)),typeof v.wch=="number"&&(E+=Math.round(v.wch))),E.charAt(E.length-1)!=" "&&g.push(E)})}function f(g,p){p.forEach(function(v,x){var E="F;";v.hidden?E+="M0;":v.hpt?E+="M"+20*v.hpt+";":v.hpx&&(E+="M"+20*dv(v.hpx)+";"),E.length>2&&g.push(E+"R"+(x+1))})}function d(g,p){var v=["ID;PWXL;N;E"],x=[],E=Gn(g["!ref"]),I,T=Array.isArray(g),M=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),g["!cols"]&&u(v,g["!cols"]),g["!rows"]&&f(v,g["!rows"]),v.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var k=E.s.r;k<=E.e.r;++k)for(var L=E.s.c;L<=E.e.c;++L){var z=An({r:k,c:L});I=T?(g[k]||[])[L]:g[z],!(!I||I.v==null&&(!I.f||I.F))&&x.push(l(I,g,k,L))}return v.join(M)+M+x.join(M)+M+"E"+M}return{to_workbook:o,to_sheet:a,from_sheet:d}})(),ope=(function(){function n(s,a){switch(a.type){case"base64":return e(Dl(s),a);case"binary":return e(s,a);case"buffer":return e(on&&Buffer.isBuffer(s)?s.toString("binary"):y_(s),a);case"array":return e(ME(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,f=0,d=[];f!==o.length;++f){if(o[f].trim()==="BOT"){d[++l]=[],u=0;continue}if(!(l<0)){var g=o[f].trim().split(","),p=g[0],v=g[1];++f;for(var x=o[f]||"";(x.match(/["]/g)||[]).length&1&&f<o.length-1;)x+=`
`+o[++f];switch(x=x.trim(),+p){case-1:if(x==="BOT"){d[++l]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?d[l][u]=!0:x==="FALSE"?d[l][u]=!1:isNaN(Al(v))?isNaN(Tp(v).getDate())?d[l][u]=v:d[l][u]=Ki(v):d[l][u]=Al(v),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),d[l][u++]=x!==""?x:null;break}if(x==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function t(s,a){return V0(n(s,a),a)}function r(s,a){return of(t(s,a),a)}var i=(function(){var s=function(l,u,f,d,g){l.push(u),l.push(f+","+d),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,u,f,d){l.push(u+","+f),l.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var u=[],f=Gn(l["!ref"]),d,g=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,f.e.r-f.s.r+1,""),s(u,"TUPLES",0,f.e.c-f.s.c+1,""),s(u,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){a(u,-1,0,"BOT");for(var v=f.s.c;v<=f.e.c;++v){var x=An({r:p,c:v});if(d=g?(l[p]||[])[v]:l[x],!d){a(u,1,0,"");continue}switch(d.t){case"n":var E=d.w;!E&&d.v!=null&&(E=d.v),E==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,E,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=fu(d.z||or[14],ms(Ki(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var I=`\r
`,T=u.join(I);return T}})();return{to_workbook:r,to_sheet:t,from_sheet:i}})(),ZV=(function(){function n(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,g){for(var p=d.split(`
`),v=-1,x=-1,E=0,I=[];E!==p.length;++E){var T=p[E].trim().split(":");if(T[0]==="cell"){var M=qr(T[1]);if(I.length<=M.r)for(v=I.length;v<=M.r;++v)I[v]||(I[v]=[]);switch(v=M.r,x=M.c,T[2]){case"t":I[v][x]=n(T[3]);break;case"v":I[v][x]=+T[3];break;case"vtf":var k=T[T.length-1];case"vtc":switch(T[3]){case"nl":I[v][x]=!!+T[4];break;default:I[v][x]=+T[4];break}T[2]=="vtf"&&(I[v][x]=[I[v][x],k])}}}return g&&g.sheetRows&&(I=I.slice(0,g.sheetRows)),I}function r(d,g){return V0(t(d,g),g)}function i(d,g){return of(r(d,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var g=[],p=[],v,x="",E=Hs(d["!ref"]),I=Array.isArray(d),T=E.s.r;T<=E.e.r;++T)for(var M=E.s.c;M<=E.e.c;++M)if(x=An({r:T,c:M}),v=I?(d[T]||[])[M]:d[x],!(!v||v.v==null||v.t==="z")){switch(p=["cell",x,"t"],v.t){case"s":case"str":p.push(e(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=e(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var k=ms(Ki(v.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=v.w||fu(v.z||or[14],k);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function f(d){return[s,a,o,a,u(d),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:f}})(),lpe=(function(){function n(f,d,g,p,v){v.raw?d[g][p]=f:f===""||(f==="TRUE"?d[g][p]=!0:f==="FALSE"?d[g][p]=!1:isNaN(Al(f))?isNaN(Tp(f).getDate())?d[g][p]=f:d[g][p]=Ki(f):d[g][p]=Al(f))}function e(f,d){var g=d||{},p=[];if(!f||f.length===0)return p;for(var v=f.split(/[\r\n]/),x=v.length-1;x>=0&&v[x].length===0;)--x;for(var E=10,I=0,T=0;T<=x;++T)I=v[T].indexOf(" "),I==-1?I=v[T].length:I++,E=Math.max(E,I);for(T=0;T<=x;++T){p[T]=[];var M=0;for(n(v[T].slice(0,E).trim(),p,T,M,g),M=1;M<=(v[T].length-E)/10+1;++M)n(v[T].slice(E+(M-1)*10,E+M*10).trim(),p,T,M,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(f){for(var d={},g=!1,p=0,v=0;p<f.length;++p)(v=f.charCodeAt(p))==34?g=!g:!g&&v in t&&(d[v]=(d[v]||0)+1);v=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&v.push([d[p],p]);if(!v.length){d=r;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&v.push([d[p],p])}return v.sort(function(x,E){return x[0]-E[0]||r[x[1]]-r[E[1]]}),t[v.pop()[1]]||44}function s(f,d){var g=d||{},p="",v=g.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=i(f.slice(0,1024)):g&&g.FS?p=g.FS:p=i(f.slice(0,1024));var E=0,I=0,T=0,M=0,k=0,L=p.charCodeAt(0),z=!1,P=0,C=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var b=g.dateNF!=null?Tge(g.dateNF):null;function F(){var j=f.slice(M,k),U={};if(j.charAt(0)=='"'&&j.charAt(j.length-1)=='"'&&(j=j.slice(1,-1).replace(/""/g,'"')),j.length===0)U.t="z";else if(g.raw)U.t="s",U.v=j;else if(j.trim().length===0)U.t="s",U.v=j;else if(j.charCodeAt(0)==61)j.charCodeAt(1)==34&&j.charCodeAt(j.length-1)==34?(U.t="s",U.v=j.slice(2,-1).replace(/""/g,'"')):a_e(j)?(U.t="n",U.f=j.slice(1)):(U.t="s",U.v=j);else if(j=="TRUE")U.t="b",U.v=!0;else if(j=="FALSE")U.t="b",U.v=!1;else if(!isNaN(T=Al(j)))U.t="n",g.cellText!==!1&&(U.w=j),U.v=T;else if(!isNaN(Tp(j).getDate())||b&&j.match(b)){U.z=g.dateNF||or[14];var V=0;b&&j.match(b)&&(j=Ige(j,g.dateNF,j.match(b)||[]),V=1),g.cellDates?(U.t="d",U.v=Ki(j,V)):(U.t="n",U.v=ms(Ki(j,V))),g.cellText!==!1&&(U.w=fu(U.z,U.v instanceof Date?ms(U.v):U.v)),g.cellNF||delete U.z}else U.t="s",U.v=j;if(U.t=="z"||(g.dense?(v[E]||(v[E]=[]),v[E][I]=U):v[An({c:I,r:E})]=U),M=k+1,C=f.charCodeAt(M),x.e.c<I&&(x.e.c=I),x.e.r<E&&(x.e.r=E),P==L)++I;else if(I=0,++E,g.sheetRows&&g.sheetRows<=E)return!0}e:for(;k<f.length;++k)switch(P=f.charCodeAt(k)){case 34:C===34&&(z=!z);break;case L:case 10:case 13:if(!z&&F())break e;break}return k-M>0&&F(),v["!ref"]=wr(x),v}function a(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?s(f,d):V0(e(f,d),d)}function o(f,d){var g="",p=d.type=="string"?[0,0,0,0]:vve(f,d);switch(d.type){case"base64":g=Dl(f);break;case"binary":g=f;break;case"buffer":d.codepage==65001?g=f.toString("utf8"):d.codepage&&typeof nv<"u"||(g=on&&Buffer.isBuffer(f)?f.toString("binary"):y_(f));break;case"array":g=ME(f);break;case"string":g=f;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=Mm(g.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?g=Mm(g):d.type=="binary"&&typeof nv<"u",g.slice(0,19)=="socialcalc:version:"?ZV.to_sheet(d.type=="string"?g:Mm(g),d):a(g,d)}function l(f,d){return of(o(f,d),d)}function u(f){for(var d=[],g=Gn(f["!ref"]),p,v=Array.isArray(f),x=g.s.r;x<=g.e.r;++x){for(var E=[],I=g.s.c;I<=g.e.c;++I){var T=An({r:x,c:I});if(p=v?(f[x]||[])[I]:f[T],!p||p.v==null){E.push("          ");continue}for(var M=(p.w||(Fl(p),p.w)||"").slice(0,10);M.length<10;)M+=" ";E.push(M+(I===0?" ":""))}d.push(E.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})(),JL=(function(){function n(O,te,ne){if(O){Ls(O,O.l||0);for(var ee=ne.Enum||Ie;O.l<O.length;){var me=O.read_shift(2),Se=ee[me]||ee[65535],Ne=O.read_shift(2),se=O.l+Ne,re=Se.f&&Se.f(O,Ne,ne);if(O.l=se,te(re,Se,me))return}}}function e(O,te){switch(te.type){case"base64":return t(Ga(Dl(O)),te);case"binary":return t(Ga(O),te);case"buffer":case"array":return t(O,te)}throw"Unsupported type "+te.type}function t(O,te){if(!O)return O;var ne=te||{},ee=ne.dense?[]:{},me="Sheet1",Se="",Ne=0,se={},re=[],D=[],Ye={s:{r:0,c:0},e:{r:0,c:0}},he=ne.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)ne.Enum=Ie,n(O,function(ae,ot,lt){switch(lt){case 0:ne.vers=ae,ae>=4096&&(ne.qpro=!0);break;case 6:Ye=ae;break;case 204:ae&&(Se=ae);break;case 222:Se=ae;break;case 15:case 51:ne.qpro||(ae[1].v=ae[1].v.slice(1));case 13:case 14:case 16:lt==14&&(ae[2]&112)==112&&(ae[2]&15)>1&&(ae[2]&15)<15&&(ae[1].z=ne.dateNF||or[14],ne.cellDates&&(ae[1].t="d",ae[1].v=gV(ae[1].v))),ne.qpro&&ae[3]>Ne&&(ee["!ref"]=wr(Ye),se[me]=ee,re.push(me),ee=ne.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ne=ae[3],me=Se||"Sheet"+(Ne+1),Se="");var _t=ne.dense?(ee[ae[0].r]||[])[ae[0].c]:ee[An(ae[0])];if(_t){_t.t=ae[1].t,_t.v=ae[1].v,ae[1].z!=null&&(_t.z=ae[1].z),ae[1].f!=null&&(_t.f=ae[1].f);break}ne.dense?(ee[ae[0].r]||(ee[ae[0].r]=[]),ee[ae[0].r][ae[0].c]=ae[1]):ee[An(ae[0])]=ae[1];break}},ne);else if(O[2]==26||O[2]==14)ne.Enum=Y,O[2]==14&&(ne.qpro=!0,O.l=0),n(O,function(ae,ot,lt){switch(lt){case 204:me=ae;break;case 22:ae[1].v=ae[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ae[3]>Ne&&(ee["!ref"]=wr(Ye),se[me]=ee,re.push(me),ee=ne.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ne=ae[3],me="Sheet"+(Ne+1)),he>0&&ae[0].r>=he)break;ne.dense?(ee[ae[0].r]||(ee[ae[0].r]=[]),ee[ae[0].r][ae[0].c]=ae[1]):ee[An(ae[0])]=ae[1],Ye.e.c<ae[0].c&&(Ye.e.c=ae[0].c),Ye.e.r<ae[0].r&&(Ye.e.r=ae[0].r);break;case 27:ae[14e3]&&(D[ae[14e3][0]]=ae[14e3][1]);break;case 1537:D[ae[0]]=ae[1],ae[0]==Ne&&(me=ae[1]);break}},ne);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(ee["!ref"]=wr(Ye),se[Se||me]=ee,re.push(Se||me),!D.length)return{SheetNames:re,Sheets:se};for(var He={},ue=[],W=0;W<D.length;++W)se[re[W]]?(ue.push(D[W]||re[W]),He[D[W]]=se[D[W]]||se[re[W]]):(ue.push(D[W]),He[D[W]]={"!ref":"A1"});return{SheetNames:ue,Sheets:He}}function r(O,te){var ne=te||{};if(+ne.codepage>=0&&wp(+ne.codepage),ne.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=ds(),me=Gn(O["!ref"]),Se=Array.isArray(O),Ne=[];Ze(ee,0,s(1030)),Ze(ee,6,l(me));for(var se=Math.min(me.e.r,8191),re=me.s.r;re<=se;++re)for(var D=pi(re),Ye=me.s.c;Ye<=me.e.c;++Ye){re===me.s.r&&(Ne[Ye]=Ni(Ye));var he=Ne[Ye]+D,He=Se?(O[re]||[])[Ye]:O[he];if(!(!He||He.t=="z"))if(He.t=="n")(He.v|0)==He.v&&He.v>=-32768&&He.v<=32767?Ze(ee,13,p(re,Ye,He.v)):Ze(ee,14,x(re,Ye,He.v));else{var ue=Fl(He);Ze(ee,15,d(re,Ye,ue.slice(0,239)))}}return Ze(ee,1),ee.end()}function i(O,te){var ne=te||{};if(+ne.codepage>=0&&wp(+ne.codepage),ne.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=ds();Ze(ee,0,a(O));for(var me=0,Se=0;me<O.SheetNames.length;++me)(O.Sheets[O.SheetNames[me]]||{})["!ref"]&&Ze(ee,27,Ae(O.SheetNames[me],Se++));var Ne=0;for(me=0;me<O.SheetNames.length;++me){var se=O.Sheets[O.SheetNames[me]];if(!(!se||!se["!ref"])){for(var re=Gn(se["!ref"]),D=Array.isArray(se),Ye=[],he=Math.min(re.e.r,8191),He=re.s.r;He<=he;++He)for(var ue=pi(He),W=re.s.c;W<=re.e.c;++W){He===re.s.r&&(Ye[W]=Ni(W));var ae=Ye[W]+ue,ot=D?(se[He]||[])[W]:se[ae];if(!(!ot||ot.t=="z"))if(ot.t=="n")Ze(ee,23,F(He,W,Ne,ot.v));else{var lt=Fl(ot);Ze(ee,22,P(He,W,Ne,lt.slice(0,239)))}}++Ne}}return Ze(ee,1),ee.end()}function s(O){var te=Re(2);return te.write_shift(2,O),te}function a(O){var te=Re(26);te.write_shift(2,4096),te.write_shift(2,4),te.write_shift(4,0);for(var ne=0,ee=0,me=0,Se=0;Se<O.SheetNames.length;++Se){var Ne=O.SheetNames[Se],se=O.Sheets[Ne];if(!(!se||!se["!ref"])){++me;var re=Hs(se["!ref"]);ne<re.e.r&&(ne=re.e.r),ee<re.e.c&&(ee=re.e.c)}}return ne>8191&&(ne=8191),te.write_shift(2,ne),te.write_shift(1,me),te.write_shift(1,ee),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(1,1),te.write_shift(1,2),te.write_shift(4,0),te.write_shift(4,0),te}function o(O,te,ne){var ee={s:{c:0,r:0},e:{c:0,r:0}};return te==8&&ne.qpro?(ee.s.c=O.read_shift(1),O.l++,ee.s.r=O.read_shift(2),ee.e.c=O.read_shift(1),O.l++,ee.e.r=O.read_shift(2),ee):(ee.s.c=O.read_shift(2),ee.s.r=O.read_shift(2),te==12&&ne.qpro&&(O.l+=2),ee.e.c=O.read_shift(2),ee.e.r=O.read_shift(2),te==12&&ne.qpro&&(O.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function l(O){var te=Re(8);return te.write_shift(2,O.s.c),te.write_shift(2,O.s.r),te.write_shift(2,O.e.c),te.write_shift(2,O.e.r),te}function u(O,te,ne){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return ne.qpro&&ne.vers!=20768?(ee[0].c=O.read_shift(1),ee[3]=O.read_shift(1),ee[0].r=O.read_shift(2),O.l+=2):(ee[2]=O.read_shift(1),ee[0].c=O.read_shift(2),ee[0].r=O.read_shift(2)),ee}function f(O,te,ne){var ee=O.l+te,me=u(O,te,ne);if(me[1].t="s",ne.vers==20768){O.l++;var Se=O.read_shift(1);return me[1].v=O.read_shift(Se,"utf8"),me}return ne.qpro&&O.l++,me[1].v=O.read_shift(ee-O.l,"cstr"),me}function d(O,te,ne){var ee=Re(7+ne.length);ee.write_shift(1,255),ee.write_shift(2,te),ee.write_shift(2,O),ee.write_shift(1,39);for(var me=0;me<ee.length;++me){var Se=ne.charCodeAt(me);ee.write_shift(1,Se>=128?95:Se)}return ee.write_shift(1,0),ee}function g(O,te,ne){var ee=u(O,te,ne);return ee[1].v=O.read_shift(2,"i"),ee}function p(O,te,ne){var ee=Re(7);return ee.write_shift(1,255),ee.write_shift(2,te),ee.write_shift(2,O),ee.write_shift(2,ne,"i"),ee}function v(O,te,ne){var ee=u(O,te,ne);return ee[1].v=O.read_shift(8,"f"),ee}function x(O,te,ne){var ee=Re(13);return ee.write_shift(1,255),ee.write_shift(2,te),ee.write_shift(2,O),ee.write_shift(8,ne,"f"),ee}function E(O,te,ne){var ee=O.l+te,me=u(O,te,ne);if(me[1].v=O.read_shift(8,"f"),ne.qpro)O.l=ee;else{var Se=O.read_shift(2);k(O.slice(O.l,O.l+Se),me),O.l+=Se}return me}function I(O,te,ne){var ee=te&32768;return te&=-32769,te=(ee?O:0)+(te>=8192?te-16384:te),(ee?"":"$")+(ne?Ni(te):pi(te))}var T={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},M=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(O,te){Ls(O,0);for(var ne=[],ee=0,me="",Se="",Ne="",se="";O.l<O.length;){var re=O[O.l++];switch(re){case 0:ne.push(O.read_shift(8,"f"));break;case 1:Se=I(te[0].c,O.read_shift(2),!0),me=I(te[0].r,O.read_shift(2),!1),ne.push(Se+me);break;case 2:{var D=I(te[0].c,O.read_shift(2),!0),Ye=I(te[0].r,O.read_shift(2),!1);Se=I(te[0].c,O.read_shift(2),!0),me=I(te[0].r,O.read_shift(2),!1),ne.push(D+Ye+":"+Se+me)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:ne.push("("+ne.pop()+")");break;case 5:ne.push(O.read_shift(2));break;case 6:{for(var he="";re=O[O.l++];)he+=String.fromCharCode(re);ne.push('"'+he.replace(/"/g,'""')+'"')}break;case 8:ne.push("-"+ne.pop());break;case 23:ne.push("+"+ne.pop());break;case 22:ne.push("NOT("+ne.pop()+")");break;case 20:case 21:se=ne.pop(),Ne=ne.pop(),ne.push(["AND","OR"][re-20]+"("+Ne+","+se+")");break;default:if(re<32&&M[re])se=ne.pop(),Ne=ne.pop(),ne.push(Ne+M[re]+se);else if(T[re]){if(ee=T[re][1],ee==69&&(ee=O[O.l++]),ee>ne.length){console.error("WK1 bad formula parse 0x"+re.toString(16)+":|"+ne.join("|")+"|");return}var He=ne.slice(-ee);ne.length-=ee,ne.push(T[re][0]+"("+He.join(",")+")")}else return re<=7?console.error("WK1 invalid opcode "+re.toString(16)):re<=24?console.error("WK1 unsupported op "+re.toString(16)):re<=30?console.error("WK1 invalid opcode "+re.toString(16)):re<=115?console.error("WK1 unsupported function opcode "+re.toString(16)):console.error("WK1 unrecognized opcode "+re.toString(16))}}ne.length==1?te[1].f=""+ne[0]:console.error("WK1 bad formula parse |"+ne.join("|")+"|")}function L(O){var te=[{c:0,r:0},{t:"n",v:0},0];return te[0].r=O.read_shift(2),te[3]=O[O.l++],te[0].c=O[O.l++],te}function z(O,te){var ne=L(O);return ne[1].t="s",ne[1].v=O.read_shift(te-4,"cstr"),ne}function P(O,te,ne,ee){var me=Re(6+ee.length);me.write_shift(2,O),me.write_shift(1,ne),me.write_shift(1,te),me.write_shift(1,39);for(var Se=0;Se<ee.length;++Se){var Ne=ee.charCodeAt(Se);me.write_shift(1,Ne>=128?95:Ne)}return me.write_shift(1,0),me}function C(O,te){var ne=L(O);ne[1].v=O.read_shift(2);var ee=ne[1].v>>1;if(ne[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return ne[1].v=ee,ne}function b(O,te){var ne=L(O),ee=O.read_shift(4),me=O.read_shift(4),Se=O.read_shift(2);if(Se==65535)return ee===0&&me===3221225472?(ne[1].t="e",ne[1].v=15):ee===0&&me===3489660928?(ne[1].t="e",ne[1].v=42):ne[1].v=0,ne;var Ne=Se&32768;return Se=(Se&32767)-16446,ne[1].v=(1-Ne*2)*(me*Math.pow(2,Se+32)+ee*Math.pow(2,Se)),ne}function F(O,te,ne,ee){var me=Re(14);if(me.write_shift(2,O),me.write_shift(1,ne),me.write_shift(1,te),ee==0)return me.write_shift(4,0),me.write_shift(4,0),me.write_shift(2,65535),me;var Se=0,Ne=0,se=0,re=0;return ee<0&&(Se=1,ee=-ee),Ne=Math.log2(ee)|0,ee/=Math.pow(2,Ne-31),re=ee>>>0,(re&2147483648)==0&&(ee/=2,++Ne,re=ee>>>0),ee-=re,re|=2147483648,re>>>=0,ee*=Math.pow(2,32),se=ee>>>0,me.write_shift(4,se),me.write_shift(4,re),Ne+=16383+(Se?32768:0),me.write_shift(2,Ne),me}function j(O,te){var ne=b(O);return O.l+=te-14,ne}function U(O,te){var ne=L(O),ee=O.read_shift(4);return ne[1].v=ee>>6,ne}function V(O,te){var ne=L(O),ee=O.read_shift(8,"f");return ne[1].v=ee,ne}function Te(O,te){var ne=V(O);return O.l+=te-10,ne}function Me(O,te){return O[O.l+te-1]==0?O.read_shift(te,"cstr"):""}function De(O,te){var ne=O[O.l++];ne>te-1&&(ne=te-1);for(var ee="";ee.length<ne;)ee+=String.fromCharCode(O[O.l++]);return ee}function be(O,te,ne){if(!(!ne.qpro||te<21)){var ee=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var me=O.read_shift(te-21,"cstr");return[ee,me]}}function le(O,te){for(var ne={},ee=O.l+te;O.l<ee;){var me=O.read_shift(2);if(me==14e3){for(ne[me]=[0,""],ne[me][0]=O.read_shift(2);O[O.l];)ne[me][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return ne}function Ae(O,te){var ne=Re(5+O.length);ne.write_shift(2,14e3),ne.write_shift(2,te);for(var ee=0;ee<O.length;++ee){var me=O.charCodeAt(ee);ne[ne.l++]=me>127?95:me}return ne[ne.l++]=0,ne}var Ie={0:{n:"BOF",f:HV},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:v},15:{n:"LABEL",f},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Me},222:{n:"SHEETNAMELP",f:De},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:z},23:{n:"NUMBER17",f:b},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:j},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:le},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:U},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:Te},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:be},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),cpe=/^\s|\s$|[\t\n\r]/;function QV(n,e){if(!e.bookSST)return"";var t=[Tr];t[t.length]=qe("sst",null,{xmlns:F0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(cpe)&&(s+=' xml:space="preserve"'),s+=">"+Tn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function upe(n){return[n.read_shift(4),n.read_shift(4)]}function hpe(n,e){return e||(e=Re(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var fpe=nme;function dpe(n){var e=ds();Oe(e,159,hpe(n));for(var t=0;t<n.length;++t)Oe(e,19,fpe(n[t]));return Oe(e,160),e.end()}function gpe(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function JV(n){var e=0,t,r=gpe(n),i=r.length+1,s,a,o,l,u;for(t=Wh(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var mpe=(function(){function n(i,s){switch(s.type){case"base64":return e(Dl(i),s);case"binary":return e(i,s);case"buffer":return e(on&&Buffer.isBuffer(i)?i.toString("binary"):y_(i),s);case"array":return e(ME(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,d){Array.isArray(o)&&(o[d]=[]);for(var g=/\\\w+\b/g,p=0,v,x=-1;v=g.exec(f);){switch(v[0]){case"\\cell":var E=f.slice(p,g.lastIndex-v[0].length);if(E[0]==" "&&(E=E.slice(1)),++x,E.length){var I={v:E,t:"s"};Array.isArray(o)?o[d][x]=I:o[An({r:d,c:x})]=I}break}p=g.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=wr(u),o}function t(i,s){return of(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=Gn(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var f=a.s.c;f<=a.e.c;++f)s.push("\\cellx"+(f+1));for(s.push("\\pard\\intbl"),f=a.s.c;f<=a.e.c;++f){var d=An({r:u,c:f});o=l?(i[u]||[])[f]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Fl(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function eO(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var ppe=6,Rl=ppe;function hv(n){return Math.floor((n+Math.round(128/Rl)/256)*Rl)}function fv(n){return Math.floor((n-5)/Rl*100+.5)/100}function TI(n){return Math.round((n*Rl+5)/Rl*256)/256}function DC(n){n.width?(n.wpx=hv(n.width),n.wch=fv(n.wpx),n.MDW=Rl):n.wpx?(n.wch=fv(n.wpx),n.width=TI(n.wch),n.MDW=Rl):typeof n.wch=="number"&&(n.width=TI(n.wch),n.wpx=hv(n.width),n.MDW=Rl),n.customWidth&&delete n.customWidth}var _pe=96,ej=_pe;function dv(n){return n*96/ej}function tj(n){return n*ej/96}function ype(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=qe("numFmt",null,{numFmtId:r,formatCode:Tn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=qe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function xpe(n){var e=[];return e[e.length]=qe("cellXfs",null),n.forEach(function(t){e[e.length]=qe("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=qe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function nj(n,e){var t=[Tr,qe("styleSheet",null,{xmlns:F0[0],"xmlns:vt":Yr.vt})],r;return n.SSF&&(r=ype(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=xpe(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function vpe(n,e){var t=n.read_shift(2),r=Li(n);return[t,r]}function Epe(n,e,t){t||(t=Re(6+4*e.length)),t.write_shift(2,n),Zr(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function wpe(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=cme(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=lme(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Li(n),r}function Spe(n,e){e||(e=Re(153)),e.write_shift(2,n.sz*20),ume(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),cv(n.color,e);var r=0;return r=2,e.write_shift(1,r),Zr(n.name,e),e.length>e.l?e.slice(0,e.l):e}var Tpe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],RS,Ipe=Bo;function tO(n,e){e||(e=Re(84)),RS||(RS=TC(Tpe));var t=RS[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(cv({auto:1},e),cv({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Ape(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function rj(n,e,t){t||(t=Re(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function jg(n,e){return e||(e=Re(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Rpe=Bo;function Cpe(n,e){return e||(e=Re(51)),e.write_shift(1,0),jg(null,e),jg(null,e),jg(null,e),jg(null,e),jg(null,e),e.length>e.l?e.slice(0,e.l):e}function Ppe(n,e){return e||(e=Re(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),lv(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Mpe(n,e,t){var r=Re(2052);return r.write_shift(4,n),lv(e,r),lv(t,r),r.length>r.l?r.slice(0,r.l):r}function bpe(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Oe(n,615,Ya(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Oe(n,44,Epe(i,e[i]))}),Oe(n,616))}}function kpe(n){var e=1;Oe(n,611,Ya(e)),Oe(n,43,Spe({sz:12,color:{theme:1},name:"Calibri",family:2})),Oe(n,612)}function Npe(n){var e=2;Oe(n,603,Ya(e)),Oe(n,45,tO({patternType:"none"})),Oe(n,45,tO({patternType:"gray125"})),Oe(n,604)}function Lpe(n){var e=1;Oe(n,613,Ya(e)),Oe(n,46,Cpe()),Oe(n,614)}function Ope(n){var e=1;Oe(n,626,Ya(e)),Oe(n,47,rj({numFmtId:0},65535)),Oe(n,627)}function Dpe(n,e){Oe(n,617,Ya(e.length)),e.forEach(function(t){Oe(n,47,rj(t,0))}),Oe(n,618)}function Fpe(n){var e=1;Oe(n,619,Ya(e)),Oe(n,48,Ppe({xfId:0,name:"Normal"})),Oe(n,620)}function Vpe(n){var e=0;Oe(n,505,Ya(e)),Oe(n,506)}function jpe(n){var e=0;Oe(n,508,Mpe(e,"TableStyleMedium9","PivotStyleMedium4")),Oe(n,509)}function Gpe(n,e){var t=ds();return Oe(t,278),bpe(t,n.SSF),kpe(t),Npe(t),Lpe(t),Ope(t),Dpe(t,e.cellXfs),Fpe(t),Vpe(t),jpe(t),Oe(t,279),t.end()}function ij(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[Tr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function Bpe(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:Li(n)}}function Upe(n){var e=Re(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),Zr(n.name,e),e.slice(0,e.l)}function zpe(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function $pe(n){var e=Re(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function Wpe(n,e){var t=Re(8+2*e.length);return t.write_shift(4,n),Zr(e,t),t.slice(0,t.l)}function Hpe(n){return n.l+=4,n.read_shift(4)!=0}function Kpe(n,e){var t=Re(8);return t.write_shift(4,n),t.write_shift(4,1),t}function Ype(){var n=ds();return Oe(n,332),Oe(n,334,Ya(1)),Oe(n,335,Upe({name:"XLDAPR",version:12e4,flags:3496657072})),Oe(n,336),Oe(n,339,Wpe(1,"XLDAPR")),Oe(n,52),Oe(n,35,Ya(514)),Oe(n,4096,Ya(0)),Oe(n,4097,la(1)),Oe(n,36),Oe(n,53),Oe(n,340),Oe(n,337,Kpe(1)),Oe(n,51,$pe([[1,0]])),Oe(n,338),Oe(n,333),n.end()}function sj(){var n=[Tr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function Xpe(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=An(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Md=1024;function aj(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[qe("xml",null,{"xmlns:v":Fs.v,"xmlns:o":Fs.o,"xmlns:x":Fs.x,"xmlns:mv":Fs.mv}).replace(/\/>/,">"),qe("o:shapelayout",qe("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),qe("v:shapetype",[qe("v:stroke",null,{joinstyle:"miter"}),qe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];Md<n*1e3;)Md+=1e3;return e.forEach(function(s){var a=qr(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?qe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=qe("v:fill",l,o),f={on:"t",obscured:"t"};++Md,i=i.concat(["<v:shape"+Ap({id:"_x0000_s"+Md,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,qe("v:shadow",null,f),qe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",di("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),di("x:AutoFill","False"),di("x:Row",String(a.r)),di("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function oj(n){var e=[Tr,qe("comments",null,{xmlns:F0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=Tn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=t.indexOf(Tn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(di("t",Tn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(di("t",Tn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function qpe(n,e,t){var r=[Tr,qe("ThreadedComments",null,{xmlns:Yr.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(qe("threadedComment",di("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Zpe(n){var e=[Tr,qe("personList",null,{xmlns:Yr.TCMNT,"xmlns:x":F0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(qe("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Qpe(n){var e={};e.iauthor=n.read_shift(4);var t=hf(n);return e.rfx=t.s,e.ref=An(t.s),n.l+=16,e}function Jpe(n,e){return e==null&&(e=Re(36)),e.write_shift(4,n[1].iauthor),j0(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var e_e=Li;function t_e(n){return Zr(n.slice(0,54))}function n_e(n){var e=ds(),t=[];return Oe(e,628),Oe(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Oe(e,632,t_e(i.a)))})}),Oe(e,631),Oe(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:qr(r[0]),e:qr(r[0])};Oe(e,635,Jpe([s,i])),i.t&&i.t.length>0&&Oe(e,637,ime(i)),Oe(e,636),delete i.iauthor})}),Oe(e,634),Oe(e,629),e.end()}function r_e(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Rn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var lj=["xlsb","xlsm","xlam","biff8","xla"],i_e=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,f=a.length>0?parseInt(a,10)|0:0;return o?f+=e.c:--f,l?u+=e.r:--u,i+(o?"":"$")+Ni(f)+(l?"":"$")+pi(u)}return function(i,s){return e=s,i.replace(n,t)}})(),FC=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,VC=(function(){return function(e,t){return e.replace(FC,function(r,i,s,a,o,l){var u=bC(a)-(s?0:t.c),f=MC(l)-(o?0:t.r),d=f==0?"":o?f+1:"["+f+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+g})}})();function s_e(n,e){return n.replace(FC,function(t,r,i,s,a,o){return r+(i=="$"?i+s:Ni(bC(s)+e.c))+(a=="$"?a+o:pi(MC(o)+e.r))})}function a_e(n){return n.length!=1}function _r(n){n.l+=1}function du(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function cj(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return uj(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=du(n),o=du(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function uj(n){var e=du(n),t=du(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function o_e(n,e,t){if(t.biff<8)return uj(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=du(n),a=du(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function hj(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return l_e(n);var r=n.read_shift(t&&t.biff==12?4:2),i=du(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function l_e(n){var e=du(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function c_e(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function u_e(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return h_e(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function h_e(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function f_e(n,e,t){var r=(n[n.l++]&96)>>5,i=cj(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function d_e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=cj(n,s,t);return[r,i,a]}function g_e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function m_e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function p_e(n,e,t){var r=(n[n.l++]&96)>>5,i=o_e(n,e-1,t);return[r,i]}function __e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function nO(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function y_e(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function x_e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function v_e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function E_e(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function w_e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function fj(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function S_e(n){return n.read_shift(2),fj(n)}function T_e(n){return n.read_shift(2),fj(n)}function I_e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=hj(n,0,t);return[r,i]}function A_e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=u_e(n,0,t);return[r,i]}function R_e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=hj(n,0,t);return[r,i,s]}function C_e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[C1e[i],mj[i],r]}function P_e(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:M_e(n);return[i,(s[0]===0?mj:R1e)[s[1]]]}function M_e(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function b_e(n,e,t){n.l+=t&&t.biff==2?3:4}function k_e(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function N_e(n){return n.l++,E_[n.read_shift(1)]}function L_e(n){return n.l++,n.read_shift(2)}function O_e(n){return n.l++,n.read_shift(1)!==0}function D_e(n){return n.l++,G0(n)}function F_e(n,e,t){return n.l++,YV(n,e-1,t)}function V_e(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=Rme(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=E_[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=G0(n);break;case 2:t[1]=bme(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function j_e(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?hf:Lme)(n));return i}function G_e(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=V_e(n,t.biff);return a}function B_e(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function U_e(n,e,t){if(t.biff==5)return z_e(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function z_e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function $_e(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function W_e(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function H_e(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function K_e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var Y_e=Bo,X_e=Bo,q_e=Bo;function w_(n,e,t){return n.l+=2,[c_e(n)]}function jC(n){return n.l+=6,[]}var Z_e=w_,Q_e=jC,J_e=jC,e1e=w_;function dj(n){return n.l+=2,[HV(n),n.read_shift(2)&1]}var t1e=w_,n1e=dj,r1e=jC,i1e=w_,s1e=w_,a1e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function o1e(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=a1e[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function l1e(n){return n.l+=2,[n.read_shift(4)]}function c1e(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function u1e(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function h1e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function f1e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function d1e(n){return n.l+=4,[0,0]}var rO={1:{n:"PtgExp",f:k_e},2:{n:"PtgTbl",f:q_e},3:{n:"PtgAdd",f:_r},4:{n:"PtgSub",f:_r},5:{n:"PtgMul",f:_r},6:{n:"PtgDiv",f:_r},7:{n:"PtgPower",f:_r},8:{n:"PtgConcat",f:_r},9:{n:"PtgLt",f:_r},10:{n:"PtgLe",f:_r},11:{n:"PtgEq",f:_r},12:{n:"PtgGe",f:_r},13:{n:"PtgGt",f:_r},14:{n:"PtgNe",f:_r},15:{n:"PtgIsect",f:_r},16:{n:"PtgUnion",f:_r},17:{n:"PtgRange",f:_r},18:{n:"PtgUplus",f:_r},19:{n:"PtgUminus",f:_r},20:{n:"PtgPercent",f:_r},21:{n:"PtgParen",f:_r},22:{n:"PtgMissArg",f:_r},23:{n:"PtgStr",f:F_e},26:{n:"PtgSheet",f:c1e},27:{n:"PtgEndSheet",f:u1e},28:{n:"PtgErr",f:N_e},29:{n:"PtgBool",f:O_e},30:{n:"PtgInt",f:L_e},31:{n:"PtgNum",f:D_e},32:{n:"PtgArray",f:__e},33:{n:"PtgFunc",f:C_e},34:{n:"PtgFuncVar",f:P_e},35:{n:"PtgName",f:B_e},36:{n:"PtgRef",f:I_e},37:{n:"PtgArea",f:f_e},38:{n:"PtgMemArea",f:$_e},39:{n:"PtgMemErr",f:Y_e},40:{n:"PtgMemNoMem",f:X_e},41:{n:"PtgMemFunc",f:W_e},42:{n:"PtgRefErr",f:H_e},43:{n:"PtgAreaErr",f:g_e},44:{n:"PtgRefN",f:A_e},45:{n:"PtgAreaN",f:p_e},46:{n:"PtgMemAreaN",f:h1e},47:{n:"PtgMemNoMemN",f:f1e},57:{n:"PtgNameX",f:U_e},58:{n:"PtgRef3d",f:R_e},59:{n:"PtgArea3d",f:d_e},60:{n:"PtgRefErr3d",f:K_e},61:{n:"PtgAreaErr3d",f:m_e},255:{}},g1e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},m1e={1:{n:"PtgElfLel",f:dj},2:{n:"PtgElfRw",f:i1e},3:{n:"PtgElfCol",f:Z_e},6:{n:"PtgElfRwV",f:s1e},7:{n:"PtgElfColV",f:e1e},10:{n:"PtgElfRadical",f:t1e},11:{n:"PtgElfRadicalS",f:r1e},13:{n:"PtgElfColS",f:Q_e},15:{n:"PtgElfColSV",f:J_e},16:{n:"PtgElfRadicalLel",f:n1e},25:{n:"PtgList",f:o1e},29:{n:"PtgSxName",f:l1e},255:{}},p1e={0:{n:"PtgAttrNoop",f:d1e},1:{n:"PtgAttrSemi",f:w_e},2:{n:"PtgAttrIf",f:v_e},4:{n:"PtgAttrChoose",f:y_e},8:{n:"PtgAttrGoto",f:x_e},16:{n:"PtgAttrSum",f:b_e},32:{n:"PtgAttrBaxcel",f:nO},33:{n:"PtgAttrBaxcel",f:nO},64:{n:"PtgAttrSpace",f:S_e},65:{n:"PtgAttrSpaceSemi",f:T_e},128:{n:"PtgAttrIfError",f:E_e},255:{}};function _1e(n,e,t,r){if(r.biff<8)return Bo(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=G_e(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=j_e(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(Bo(n,e)),s}function y1e(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=rO[s]||rO[g1e[s]],(s===24||s===25)&&(i=(s===24?m1e:p1e)[n[n.l+1]]),!i||!i.f?Bo(n,e):a.push([i.n,i.f(n,e,t)]);return a}function x1e(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var v1e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function E1e(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function gj(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function iO(n,e,t){var r=gj(n,e,t);return r=="#REF"?r:E1e(r,t)}function w0(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,f,d=0,g=0,p,v="";if(!n[0]||!n[0][0])return"";for(var x=-1,E="",I=0,T=n[0].length;I<T;++I){var M=n[0][I];switch(M[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),x>=0){switch(n[0][x][1][0]){case 0:E=sr(" ",n[0][x][1][1]);break;case 1:E=sr("\r",n[0][x][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][x][1][0])}u=u+E,x=-1}o.push(u+v1e[M[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=km(M[1][1],a,i),o.push(Nm(f,s));break;case"PtgRefN":f=t?km(M[1][1],t,i):M[1][1],o.push(Nm(f,s));break;case"PtgRef3d":d=M[1][1],f=km(M[1][2],a,i),v=iO(r,d,i),o.push(v+"!"+Nm(f,s));break;case"PtgFunc":case"PtgFuncVar":var k=M[1][0],L=M[1][1];k||(k=0),k&=127;var z=k==0?[]:o.slice(-k);o.length-=k,L==="User"&&(L=z.shift()),o.push(L+"("+z.join(",")+")");break;case"PtgBool":o.push(M[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(M[1]);break;case"PtgNum":o.push(String(M[1]));break;case"PtgStr":o.push('"'+M[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(M[1]);break;case"PtgAreaN":p=UL(M[1][1],t?{s:t}:a,i),o.push(IS(p,i));break;case"PtgArea":p=UL(M[1][1],a,i),o.push(IS(p,i));break;case"PtgArea3d":d=M[1][1],p=M[1][2],v=iO(r,d,i),o.push(v+"!"+IS(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=M[1][2];var P=(r.names||[])[g-1]||(r[0]||[])[g],C=P?P.Name:"SH33TJSNAME"+String(g);C&&C.slice(0,6)=="_xlfn."&&!i.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var b=M[1][1];g=M[1][2];var F;if(i.biff<=5)b<0&&(b=-b),r[b]&&(F=r[b][g]);else{var j="";if(((r[b]||[])[0]||[])[0]==14849||(((r[b]||[])[0]||[])[0]==1025?r[b][g]&&r[b][g].itab>0&&(j=r.SheetNames[r[b][g].itab-1]+"!"):j=r.SheetNames[g-1]+"!"),r[b]&&r[b][g])j+=r[b][g].Name;else if(r[0]&&r[0][g])j+=r[0][g].Name;else{var U=(gj(r,b,i)||"").split(";;");U[g-1]?j=U[g-1]:j+="SH33TJSERRX"}o.push(j);break}F||(F={Name:"SH33TJSERRY"}),o.push(F.Name);break;case"PtgParen":var V="(",Te=")";if(x>=0){switch(E="",n[0][x][1][0]){case 2:V=sr(" ",n[0][x][1][1])+V;break;case 3:V=sr("\r",n[0][x][1][1])+V;break;case 4:Te=sr(" ",n[0][x][1][1])+Te;break;case 5:Te=sr("\r",n[0][x][1][1])+Te;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][x][1][0])}x=-1}o.push(V+o.pop()+Te);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:M[1][1],r:M[1][0]};var Me={c:t.c,r:t.r};if(r.sharedf[An(f)]){var De=r.sharedf[An(f)];o.push(w0(De,a,Me,r,i))}else{var be=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){o.push(w0(u[1],a,Me,r,i)),be=!0;break}be||o.push(M[1])}break;case"PtgArray":o.push("{"+x1e(M[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=I;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+M[1].idx+"[#"+M[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(M));default:throw new Error("Unrecognized Formula Token: "+String(M))}var le=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&x>=0&&le.indexOf(n[0][I][0])==-1){M=n[0][x];var Ae=!0;switch(M[1][0]){case 4:Ae=!1;case 0:E=sr(" ",M[1][1]);break;case 5:Ae=!1;case 1:E=sr("\r",M[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+M[1][0])}o.push((Ae?E:"")+o.pop()+(Ae?"":E)),x=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function w1e(n){if(n==null){var e=Re(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Hh(n);return Hh(0)}function S1e(n,e,t,r,i){var s=Kh(e,t,i),a=w1e(n.v),o=Re(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Re(n.bf.length),f=0;f<n.bf.length;++f)u[f]=n.bf[f];var d=fi([s,a,o,u]);return d}function bE(n,e,t){var r=n.read_shift(4),i=y1e(n,r,t),s=n.read_shift(4),a=s>0?_1e(n,s,i,t):null;return[i,a]}var T1e=bE,kE=bE,I1e=bE,A1e=bE,R1e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},mj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},C1e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function P1e(n){var e="of:="+n.replace(FC,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function M1e(n){return n.replace(/\./,"!")}var Lm=typeof Map<"u";function GC(n,e,t){var r=0,i=n.length;if(t){if(Lm?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Lm?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(Lm?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function NE(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Rl=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=fv(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=TI(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function pj(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function Eu(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){hV(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function b1e(n,e,t){if(n&&n["!ref"]){var r=Gn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function k1e(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+wr(n[t])+'"/>';return e+"</mergeCells>"}function N1e(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}s=!0,a.codeName=Ip(Tn(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+qe("outlinePr",null,u)}!s&&!o||(i[i.length]=qe("sheetPr",o,a))}var L1e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],O1e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function D1e(n){var e={sheet:1};return L1e.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),O1e.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=JV(n.password).toString(16).toUpperCase()),qe("sheetProtection",null,e)}function F1e(n){return pj(n),qe("pageMargins",null,n)}function V1e(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=qe("col",null,NE(i,r)));return t[t.length]="</cols>",t.join("")}function j1e(n,e,t,r){var i=typeof n.ref=="string"?n.ref:wr(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=Hs(i);a.s.r==a.e.r&&(a.e.r=Hs(e["!ref"]).e.r,i=wr(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),qe("autoFilter",null,{ref:i})}function G1e(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),qe("sheetViews",qe("sheetView",null,i),{})}function B1e(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=E_[n.v];break;case"d":r&&r.cellDates?i=Ki(n.v,-1).toISOString():(n=ps(n),n.t="n",i=""+(n.v=ms(Ki(n.v)))),typeof n.z>"u"&&(n.z=or[14]);break;default:i=n.v;break}var o=di("v",Tn(i)),l={r:e},u=Eu(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=di("v",""+GC(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var f=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=qe("f",Tn(n.f),f)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(l.cm=1),qe("c",o,l)}function U1e(n,e,t,r){var i=[],s=[],a=Gn(n["!ref"]),o="",l,u="",f=[],d=0,g=0,p=n["!rows"],v=Array.isArray(n),x={r:u},E,I=-1;for(g=a.s.c;g<=a.e.c;++g)f[g]=Ni(g);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=pi(d),g=a.s.c;g<=a.e.c;++g){l=f[g]+u;var T=v?(n[d]||[])[g]:n[l];T!==void 0&&(o=B1e(T,l,n,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(x={r:u},p&&p[d]&&(E=p[d],E.hidden&&(x.hidden=1),I=-1,E.hpx?I=dv(E.hpx):E.hpt&&(I=E.hpt),I>-1&&(x.ht=I,x.customHeight=1),E.level&&(x.outlineLevel=E.level)),i[i.length]=qe("row",s.join(""),x))}if(p)for(;d<p.length;++d)p&&p[d]&&(x={r:d+1},E=p[d],E.hidden&&(x.hidden=1),I=-1,E.hpx?I=dv(E.hpx):E.hpt&&(I=E.hpt),I>-1&&(x.ht=I,x.customHeight=1),E.level&&(x.outlineLevel=E.level),i[i.length]=qe("row","",x));return i.join("")}function _j(n,e,t,r){var i=[Tr,qe("worksheet",null,{xmlns:F0[0],"xmlns:r":Yr.r})],s=t.SheetNames[n],a=0,o="",l=t.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",f=Gn(u);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=wr(f)}r||(r={}),l["!comments"]=[];var d=[];N1e(l,t,n,e,i),i[i.length]=qe("dimension",null,{ref:u}),i[i.length]=G1e(l,e,n,t),e.sheetFormat&&(i[i.length]=qe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=V1e(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=U1e(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=D1e(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=j1e(l["!autofilter"],l,t,n)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=k1e(l["!merges"]));var g=-1,p,v=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(v=En(r,-1,Tn(x[1].Target).replace(/#.*$/,""),Jt.HLINK),p["r:id"]="rId"+v),(g=x[1].Target.indexOf("#"))>-1&&(p.location=Tn(x[1].Target.slice(g+1))),x[1].Tooltip&&(p.tooltip=Tn(x[1].Tooltip)),i[i.length]=qe("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=F1e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=di("ignoredErrors",qe("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(v=En(r,-1,"../drawings/drawing"+(n+1)+".xml",Jt.DRAW),i[i.length]=qe("drawing",null,{"r:id":"rId"+v}),l["!drawing"]=d),l["!comments"].length>0&&(v=En(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Jt.VML),i[i.length]=qe("legacyDrawing",null,{"r:id":"rId"+v}),l["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function z1e(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function $1e(n,e,t){var r=Re(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=dv(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:n,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var d=-1,g=-1,p=f<<10;p<f+1<<10;++p){u.c=p;var v=Array.isArray(t)?(t[u.r]||[])[u.c]:t[An(u)];v&&(d<0&&(d=p),g=p)}d<0||(++o,r.write_shift(4,d),r.write_shift(4,g))}var x=r.l;return r.l=l,r.write_shift(4,o),r.l=x,r.length>r.l?r.slice(0,r.l):r}function W1e(n,e,t,r){var i=$1e(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Oe(n,0,i)}var H1e=hf,K1e=j0;function Y1e(){}function X1e(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=sme(n),t}function q1e(n,e,t){t==null&&(t=Re(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return cv({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),kV(n,t),t.slice(0,t.l)}function Z1e(n){var e=va(n);return[e]}function Q1e(n,e,t){return t==null&&(t=Re(8)),lf(e,t)}function J1e(n){var e=cf(n);return[e]}function eye(n,e,t){return t==null&&(t=Re(4)),uf(e,t)}function tye(n){var e=va(n),t=n.read_shift(1);return[e,t,"b"]}function nye(n,e,t){return t==null&&(t=Re(9)),lf(e,t),t.write_shift(1,n.v?1:0),t}function rye(n){var e=cf(n),t=n.read_shift(1);return[e,t,"b"]}function iye(n,e,t){return t==null&&(t=Re(5)),uf(e,t),t.write_shift(1,n.v?1:0),t}function sye(n){var e=va(n),t=n.read_shift(1);return[e,t,"e"]}function aye(n,e,t){return t==null&&(t=Re(9)),lf(e,t),t.write_shift(1,n.v),t}function oye(n){var e=cf(n),t=n.read_shift(1);return[e,t,"e"]}function lye(n,e,t){return t==null&&(t=Re(8)),uf(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function cye(n){var e=va(n),t=n.read_shift(4);return[e,t,"s"]}function uye(n,e,t){return t==null&&(t=Re(12)),lf(e,t),t.write_shift(4,e.v),t}function hye(n){var e=cf(n),t=n.read_shift(4);return[e,t,"s"]}function fye(n,e,t){return t==null&&(t=Re(8)),uf(e,t),t.write_shift(4,e.v),t}function dye(n){var e=va(n),t=G0(n);return[e,t,"n"]}function gye(n,e,t){return t==null&&(t=Re(16)),lf(e,t),Hh(n.v,t),t}function mye(n){var e=cf(n),t=G0(n);return[e,t,"n"]}function pye(n,e,t){return t==null&&(t=Re(12)),uf(e,t),Hh(n.v,t),t}function _ye(n){var e=va(n),t=NV(n);return[e,t,"n"]}function yye(n,e,t){return t==null&&(t=Re(12)),lf(e,t),LV(n.v,t),t}function xye(n){var e=cf(n),t=NV(n);return[e,t,"n"]}function vye(n,e,t){return t==null&&(t=Re(8)),uf(e,t),LV(n.v,t),t}function Eye(n){var e=va(n),t=kC(n);return[e,t,"is"]}function wye(n){var e=va(n),t=Li(n);return[e,t,"str"]}function Sye(n,e,t){return t==null&&(t=Re(12+4*n.v.length)),lf(e,t),Zr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Tye(n){var e=cf(n),t=Li(n);return[e,t,"str"]}function Iye(n,e,t){return t==null&&(t=Re(8+4*n.v.length)),uf(e,t),Zr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Aye(n,e,t){var r=n.l+e,i=va(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=kE(n,r-n.l,t);a[3]=w0(o,null,i,t.supbooks,t)}else n.l=r;return a}function Rye(n,e,t){var r=n.l+e,i=va(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=kE(n,r-n.l,t);a[3]=w0(o,null,i,t.supbooks,t)}else n.l=r;return a}function Cye(n,e,t){var r=n.l+e,i=va(n);i.r=t["!row"];var s=G0(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=kE(n,r-n.l,t);a[3]=w0(o,null,i,t.supbooks,t)}else n.l=r;return a}function Pye(n,e,t){var r=n.l+e,i=va(n);i.r=t["!row"];var s=Li(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=kE(n,r-n.l,t);a[3]=w0(o,null,i,t.supbooks,t)}else n.l=r;return a}var Mye=hf,bye=j0;function kye(n,e){return e==null&&(e=Re(4)),e.write_shift(4,n),e}function Nye(n,e){var t=n.l+e,r=hf(n),i=NC(n),s=Li(n),a=Li(n),o=Li(n);n.l=t;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function Lye(n,e){var t=Re(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));j0({s:qr(n[0]),e:qr(n[0])},t),LC("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return Zr(i||"",t),Zr(n[1].Tooltip||"",t),Zr("",t),t.slice(0,t.l)}function Oye(){}function Dye(n,e,t){var r=n.l+e,i=OV(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=T1e(n,r-n.l,t);a[1]=o}else n.l=r;return a}function Fye(n,e,t){var r=n.l+e,i=hf(n),s=[i];if(t.cellFormula){var a=A1e(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function Vye(n,e,t){t==null&&(t=Re(18));var r=NE(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var yj=["left","right","top","bottom","header","footer"];function jye(n){var e={};return yj.forEach(function(t){e[t]=G0(n)}),e}function Gye(n,e){return e==null&&(e=Re(48)),pj(n),yj.forEach(function(t){Hh(n[t],e)}),e}function Bye(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function Uye(n,e,t){t==null&&(t=Re(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function zye(n){var e=Re(24);return e.write_shift(4,4),e.write_shift(4,1),j0(n,e),e}function $ye(n,e){return e==null&&(e=Re(66)),e.write_shift(2,n.password?JV(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function Wye(){}function Hye(){}function Kye(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ps(e),e.z=e.z||or[14],e.v=ms(Ki(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:t,c:r};switch(l.s=Eu(i.cellXfs,e,i),e.l&&s["!links"].push([An(l),e.l]),e.c&&s["!comments"].push([An(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=GC(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?Oe(n,18,fye(e,l)):Oe(n,7,uye(e,l))):(l.t="str",a?Oe(n,17,Iye(e,l)):Oe(n,6,Sye(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Oe(n,13,vye(e,l)):Oe(n,2,yye(e,l)):a?Oe(n,16,pye(e,l)):Oe(n,5,gye(e,l)),!0;case"b":return l.t="b",a?Oe(n,15,iye(e,l)):Oe(n,4,nye(e,l)),!0;case"e":return l.t="e",a?Oe(n,14,lye(e,l)):Oe(n,3,aye(e,l)),!0}return a?Oe(n,12,eye(e,l)):Oe(n,1,Q1e(e,l)),!0}function Yye(n,e,t,r){var i=Gn(e["!ref"]||"A1"),s,a="",o=[];Oe(n,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var f=i.s.r;f<=u;++f){a=pi(f),W1e(n,e,i,f);var d=!1;if(f<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){f===i.s.r&&(o[g]=Ni(g)),s=o[g]+a;var p=l?(e[f]||[])[g]:e[s];if(!p){d=!1;continue}d=Kye(n,p,f,g,r,e,d)}}Oe(n,146)}function Xye(n,e){!e||!e["!merges"]||(Oe(n,177,kye(e["!merges"].length)),e["!merges"].forEach(function(t){Oe(n,176,bye(t))}),Oe(n,178))}function qye(n,e){!e||!e["!cols"]||(Oe(n,390),e["!cols"].forEach(function(t,r){t&&Oe(n,60,Vye(r,t))}),Oe(n,391))}function Zye(n,e){!e||!e["!ref"]||(Oe(n,648),Oe(n,649,zye(Gn(e["!ref"]))),Oe(n,650))}function Qye(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=En(t,-1,r[1].Target.replace(/#.*$/,""),Jt.HLINK);Oe(n,494,Lye(r,i))}}),delete e["!links"]}function Jye(n,e,t,r){if(e["!comments"].length>0){var i=En(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Jt.VML);Oe(n,551,LC("rId"+i)),e["!legacy"]=i}}function exe(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:wr(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=Hs(s);o.s.r==o.e.r&&(o.e.r=Hs(e["!ref"]).e.r,s=wr(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Oe(n,161,j0(Gn(s))),Oe(n,162)}}function txe(n,e,t){Oe(n,133),Oe(n,137,Uye(e,t)),Oe(n,138),Oe(n,134)}function nxe(n,e){e["!protect"]&&Oe(n,535,$ye(e["!protect"]))}function rxe(n,e,t,r){var i=ds(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var l=Gn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Oe(i,129),(t.vbaraw||a["!outline"])&&Oe(i,147,q1e(o,a["!outline"])),Oe(i,148,K1e(l)),txe(i,a,t.Workbook),qye(i,a),Yye(i,a,n,e),nxe(i,a),exe(i,a,t,n),Xye(i,a),Qye(i,a,r),a["!margins"]&&Oe(i,476,Gye(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Zye(i,a),Jye(i,a,n,r),Oe(i,130),i.end()}function ixe(n,e){n.l+=10;var t=Li(n);return{name:t}}var sxe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function axe(n){return!n.Workbook||!n.Workbook.WBProps?"false":Fge(n.Workbook.WBProps.date1904)?"true":"false"}var oxe="][*?/\\".split("");function xj(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return oxe.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function lxe(n,e,t){n.forEach(function(r,i){xj(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function cxe(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];lxe(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)b1e(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function vj(n){var e=[Tr];e[e.length]=qe("workbook",null,{xmlns:F0[0],"xmlns:r":Yr.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(sxe.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=qe("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:Tn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=qe("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=qe("definedName",Tn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function uxe(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=SI(n),t.name=Li(n),t}function hxe(n,e){return e||(e=Re(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),LC(n.strRelID,e),Zr(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function fxe(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?Li(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function dxe(n,e){e||(e=Re(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),kV(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function gxe(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=ame(n),a=I1e(n,0,t),o=NC(n);n.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function mxe(n,e){Oe(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Oe(n,156,hxe(i))}Oe(n,144)}function pxe(n,e){e||(e=Re(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Zr("SheetJS",e),Zr(tv.version,e),Zr(tv.version,e),Zr("7262",e),e.length>e.l?e.slice(0,e.l):e}function _xe(n,e){e||(e=Re(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function yxe(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Oe(n,135),Oe(n,158,_xe(i)),Oe(n,136))}}function xxe(n,e){var t=ds();return Oe(t,131),Oe(t,128,pxe()),Oe(t,153,dxe(n.Workbook&&n.Workbook.WBProps||null)),yxe(t,n),mxe(t,n),Oe(t,132),t.end()}function vxe(n,e,t){return(e.slice(-4)===".bin"?xxe:vj)(n)}function Exe(n,e,t,r,i){return(e.slice(-4)===".bin"?rxe:_j)(n,t,r,i)}function wxe(n,e,t){return(e.slice(-4)===".bin"?Gpe:nj)(n,t)}function Sxe(n,e,t){return(e.slice(-4)===".bin"?dpe:QV)(n,t)}function Txe(n,e,t){return(e.slice(-4)===".bin"?n_e:oj)(n)}function Ixe(n){return(n.slice(-4)===".bin"?Ype:sj)()}function Axe(n,e){var t=[];return n.Props&&t.push(wme(n.Props,e)),n.Custprops&&t.push(Sme(n.Props,n.Custprops)),t.join("")}function Rxe(){return""}function Cxe(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(qe("NumberFormat",null,{"ss:Format":Tn(or[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(qe("Style",s.join(""),a))}),qe("Styles",t.join(""))}function Ej(n){return qe("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+VC(n.Ref,{r:0,c:0})})}function Pxe(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(Ej(i)))}return qe("Names",t.join(""))}function Mxe(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(Ej(o)))}return s.join("")}function bxe(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(qe("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(qe("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(qe("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(qe("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(di("ProtectContents","True")),n["!protect"].objects&&i.push(di("ProtectObjects","True")),n["!protect"].scenarios&&i.push(di("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(di("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(di("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":qe("WorksheetOptions",i.join(""),{xmlns:Fs.x})}function kxe(n){return n.map(function(e){var t=Dge(e.t||""),r=qe("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return qe("Comment",r,{"ss:Author":e.a})}).join("")}function Nxe(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+Tn(VC(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var l=qr(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=Tn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=Tn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],f=0;f!=u.length;++f)u[f].s.c!=a.c||u[f].s.r!=a.r||(u[f].e.c>u[f].s.c&&(o["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(o["ss:MergeDown"]=u[f].e.r-u[f].s.r));var d="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",g=String(n.v);break;case"b":d="Boolean",g=n.v?"1":"0";break;case"e":d="Error",g=E_[n.v];break;case"d":d="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||or[14]);break;case"s":d="String",g=Oge(n.v||"");break}var p=Eu(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var v=n.v!=null?g:"",x=n.t=="z"?"":'<Data ss:Type="'+d+'">'+v+"</Data>";return(n.c||[]).length>0&&(x+=kxe(n.c)),qe("Cell",x,o)}function Lxe(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=tj(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Oxe(n,e,t,r){if(!n["!ref"])return"";var i=Gn(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(E,I){DC(E);var T=!!E.width,M=NE(I,E),k={"ss:Index":I+1};T&&(k["ss:Width"]=hv(M.width)),E.hidden&&(k["ss:Hidden"]="1"),o.push(qe("Column",null,k))});for(var l=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var f=[Lxe(u,(n["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:d},v=An(p),x=l?(n[u]||[])[d]:n[v];f.push(Nxe(x,v,n,e,t,r,p))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function Dxe(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?Mxe(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?Oxe(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(bxe(s,e,n,t)),r.join("")}function Fxe(n,e){e||(e={}),n.SSF||(n.SSF=ps(or)),n.SSF&&(CE(),RE(n.SSF),e.revssf=PE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Eu(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(Axe(n,e)),t.push(Rxe()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(qe("Worksheet",Dxe(r,e,n),{"ss:Name":Tn(n.SheetNames[r])}));return t[2]=Cxe(n,e),t[3]=Pxe(n),Tr+qe("Workbook",t.join(""),{xmlns:Fs.ss,"xmlns:o":Fs.o,"xmlns:x":Fs.x,"xmlns:ss":Fs.ss,"xmlns:dt":Fs.dt,"xmlns:html":Fs.html})}var CS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Vxe(n,e){var t=[],r=[],i=[],s=0,a,o=bL($L,"n"),l=bL(WL,"n");if(n.Props)for(a=_i(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=_i(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)WV.indexOf(i[s][0])>-1||UV.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&Rn.utils.cfb_add(e,"/SummaryInformation",qL(r,CS.SI,l,WL)),(t.length||u.length)&&Rn.utils.cfb_add(e,"/DocumentSummaryInformation",qL(t,CS.DSI,o,$L,u.length?u:null,CS.UDI))}function jxe(n,e){var t=e||{},r=Rn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Rn.utils.cfb_add(r,i,wj(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Vxe(n,r),t.biff==8&&n.vbaraw&&r_e(r,Rn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Gxe={0:{f:z1e},1:{f:Z1e},2:{f:_ye},3:{f:sye},4:{f:tye},5:{f:dye},6:{f:wye},7:{f:cye},8:{f:Pye},9:{f:Cye},10:{f:Aye},11:{f:Rye},12:{f:J1e},13:{f:xye},14:{f:oye},15:{f:rye},16:{f:mye},17:{f:Tye},18:{f:hye},19:{f:kC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:gxe},40:{},42:{},43:{f:wpe},44:{f:vpe},45:{f:Ipe},46:{f:Rpe},47:{f:Ape},48:{},49:{f:Jge},50:{},51:{f:zpe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:epe},62:{f:Eye},63:{f:Xpe},64:{f:Wye},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Bo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Bye},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:X1e},148:{f:H1e,p:16},151:{f:Oye},152:{},153:{f:fxe},154:{},155:{},156:{f:uxe},157:{},158:{},159:{T:1,f:upe},160:{T:-1},161:{T:1,f:hf},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Mye},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Bpe},336:{T:-1},337:{f:Hpe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:SI},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Yme},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Dye},427:{f:Fye},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:jye},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Y1e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Nye},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:SI},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:e_e},633:{T:1},634:{T:-1},635:{T:1,f:Qpe},636:{T:-1},637:{f:rme},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ixe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Hye},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ze(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&PC(t)&&n.push(t)}}function Bxe(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return Ze(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var f=n.next(4);for(f.write_shift(2,s),f.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u;l<i;){for(f=n.next(4),f.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;f.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u}}}function S_(n,e,t){return n||(n=Re(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function Uxe(n,e,t,r){var i=Re(9);return S_(i,n,e),KV(t,r||"b",i),i}function zxe(n,e,t){var r=Re(8+2*t.length);return S_(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function $xe(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?ms(Ki(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Ze(n,2,ipe(t,r,i)):Ze(n,3,rpe(t,r,i));return;case"b":case"e":Ze(n,5,Uxe(t,r,e.v,e.t));return;case"s":case"str":Ze(n,4,zxe(t,r,(e.v||"").slice(0,255)));return}Ze(n,1,S_(null,t,r))}function Wxe(n,e,t,r){var i=Array.isArray(e),s=Gn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=wr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=pi(u);for(var f=s.s.c;f<=s.e.c;++f){u===s.s.r&&(l[f]=Ni(f)),a=l[f]+o;var d=i?(e[u]||[])[f]:e[a];d&&$xe(n,d,u,f)}}}function Hxe(n,e){for(var t=e||{},r=ds(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return Ze(r,t.biff==4?1033:t.biff==3?521:9,OC(n,16,t)),Wxe(r,n.Sheets[n.SheetNames[i]],i,t),Ze(r,10),r.end()}function Kxe(n,e,t){Ze(n,49,Gme({sz:12,name:"Arial"},t))}function Yxe(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Ze(n,1054,zme(i,e[i],t))})}function Xxe(n,e){var t=Re(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),Ze(n,2151,t),t=Re(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),qV(Gn(e["!ref"]||"A1"),t),t.write_shift(4,4),Ze(n,2152,t)}function qxe(n,e){for(var t=0;t<16;++t)Ze(n,224,QL({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Ze(n,224,QL(r,0,e))})}function Zxe(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];Ze(n,440,Zme(r)),r[1].Tooltip&&Ze(n,2048,Qme(r))}delete e["!links"]}function Qxe(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&Ze(n,125,tpe(NE(i,r),i))})}}function Jxe(n,e,t,r,i){var s=16+Eu(i.cellXfs,e,i);if(e.v==null&&!e.bf){Ze(n,513,Kh(t,r,s));return}if(e.bf)Ze(n,6,S1e(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?ms(Ki(e.v)):e.v;Ze(n,515,Kme(t,r,a,s));break;case"b":case"e":Ze(n,517,Hme(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=GC(i.Strings,e.v,i.revStrings);Ze(n,253,Bme(t,r,o,s))}else Ze(n,516,Ume(t,r,(e.v||"").slice(0,255),s,i));break;default:Ze(n,513,Kh(t,r,s))}}function eve(n,e,t){var r=ds(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},l=Array.isArray(s),u=e.biff==8,f,d="",g=[],p=Gn(s["!ref"]||"A1"),v=u?65536:16384;if(p.e.c>255||p.e.r>=v){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}Ze(r,2057,OC(t,16,e)),Ze(r,13,la(1)),Ze(r,12,la(100)),Ze(r,15,Gi(!0)),Ze(r,17,Gi(!1)),Ze(r,16,Hh(.001)),Ze(r,95,Gi(!0)),Ze(r,42,Gi(!1)),Ze(r,43,Gi(!1)),Ze(r,130,la(1)),Ze(r,128,Wme()),Ze(r,131,Gi(!1)),Ze(r,132,Gi(!1)),u&&Qxe(r,s["!cols"]),Ze(r,512,$me(p,e)),u&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){d=pi(x);for(var E=p.s.c;E<=p.e.c;++E){x===p.s.r&&(g[E]=Ni(E)),f=g[E]+d;var I=l?(s[x]||[])[E]:s[f];I&&(Jxe(r,I,x,E,e),u&&I.l&&s["!links"].push([f,I.l]))}}var T=o.CodeName||o.name||i;return u&&Ze(r,574,jme((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&Ze(r,229,qme(s["!merges"])),u&&Zxe(r,s),Ze(r,442,XV(T)),u&&Xxe(r,s),Ze(r,10),r.end()}function tve(n,e,t){var r=ds(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,l=t.biff==5;if(Ze(r,2057,OC(n,5,t)),t.bookType=="xla"&&Ze(r,135),Ze(r,225,o?la(1200):null),Ze(r,193,Ame(2)),l&&Ze(r,191),l&&Ze(r,192),Ze(r,226),Ze(r,92,Ome("SheetJS",t)),Ze(r,66,la(o?1200:1252)),o&&Ze(r,353,la(0)),o&&Ze(r,448),Ze(r,317,npe(n.SheetNames.length)),o&&n.vbaraw&&Ze(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";Ze(r,442,XV(u))}Ze(r,156,la(17)),Ze(r,25,Gi(!1)),Ze(r,18,Gi(!1)),Ze(r,19,la(0)),o&&Ze(r,431,Gi(!1)),o&&Ze(r,444,la(0)),Ze(r,61,Vme()),Ze(r,64,Gi(!1)),Ze(r,141,la(0)),Ze(r,34,Gi(axe(n)=="true")),Ze(r,14,Gi(!0)),o&&Ze(r,439,Gi(!1)),Ze(r,218,la(0)),Kxe(r,n,t),Yxe(r,n.SSF,t),qxe(r,t),o&&Ze(r,352,Gi(!1));var f=r.end(),d=ds();o&&Ze(d,140,Jme()),o&&t.Strings&&Bxe(d,252,Fme(t.Strings)),Ze(d,10);var g=d.end(),p=ds(),v=0,x=0;for(x=0;x<n.SheetNames.length;++x)v+=(o?12:11)+(o?2:1)*n.SheetNames[x].length;var E=f.length+v+g.length;for(x=0;x<n.SheetNames.length;++x){var I=s[x]||{};Ze(p,133,Dme({pos:E,hs:I.Hidden||0,dt:0,name:n.SheetNames[x]},t)),E+=e[x].length}var T=p.end();if(v!=T.length)throw new Error("BS8 "+v+" != "+T.length);var M=[];return f.length&&M.push(f),T.length&&M.push(T),g.length&&M.push(g),fi(M)}function nve(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=ps(or)),n&&n.SSF&&(CE(),RE(n.SSF),t.revssf=PE(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,BC(t),t.cellXfs=[],Eu(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=eve(i,t,n);return r.unshift(tve(n,r,t)),fi(r)}function wj(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=Hs(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return nve(n,e);case 4:case 3:case 2:return Hxe(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function rve(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var f=An({r:t,c:a}),d=r.dense?(n[t]||[])[a]:n[f],g=d&&d.v!=null&&(d.h||Lge(d.w||(Fl(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?g='<span contenteditable="true">'+g+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),p.id=(r.id||"sjs")+"-"+f,s.push(qe("td",g,p))}}var v="<tr>";return v+s.join("")+"</tr>"}var ive='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',sve="</body></html>";function ave(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function Sj(n,e){var t=e||{},r=t.header!=null?t.header:ive,i=t.footer!=null?t.footer:sve,s=[r],a=Hs(n["!ref"]);t.dense=Array.isArray(n),s.push(ave(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(rve(n,a,o,t));return s.push("</table>"+i),s.join("")}function Tj(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?qr(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var f=Hs(n["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),i==-1&&(u.e.r=i=f.e.r+1)}var d=[],g=0,p=n["!rows"]||(n["!rows"]=[]),v=0,x=0,E=0,I=0,T=0,M=0;for(n["!cols"]||(n["!cols"]=[]);v<o.length&&x<l;++v){var k=o[v];if(sO(k)){if(r.display)continue;p[x]={hidden:!0}}var L=k.children;for(E=I=0;E<L.length;++E){var z=L[E];if(!(r.display&&sO(z))){var P=z.hasAttribute("data-v")?z.getAttribute("data-v"):z.hasAttribute("v")?z.getAttribute("v"):Vge(z.innerHTML),C=z.getAttribute("data-z")||z.getAttribute("z");for(g=0;g<d.length;++g){var b=d[g];b.s.c==I+s&&b.s.r<x+i&&x+i<=b.e.r&&(I=b.e.c+1-s,g=-1)}M=+z.getAttribute("colspan")||1,((T=+z.getAttribute("rowspan")||1)>1||M>1)&&d.push({s:{r:x+i,c:I+s},e:{r:x+i+(T||1)-1,c:I+s+(M||1)-1}});var F={t:"s",v:P},j=z.getAttribute("data-t")||z.getAttribute("t")||"";P!=null&&(P.length==0?F.t=j||"z":r.raw||P.trim().length==0||j=="s"||(P==="TRUE"?F={t:"b",v:!0}:P==="FALSE"?F={t:"b",v:!1}:isNaN(Al(P))?isNaN(Tp(P).getDate())||(F={t:"d",v:Ki(P)},r.cellDates||(F={t:"n",v:ms(F.v)}),F.z=r.dateNF||or[14]):F={t:"n",v:Al(P)})),F.z===void 0&&C!=null&&(F.z=C);var U="",V=z.getElementsByTagName("A");if(V&&V.length)for(var Te=0;Te<V.length&&!(V[Te].hasAttribute("href")&&(U=V[Te].getAttribute("href"),U.charAt(0)!="#"));++Te);U&&U.charAt(0)!="#"&&(F.l={Target:U}),r.dense?(n[x+i]||(n[x+i]=[]),n[x+i][I+s]=F):n[An({c:I+s,r:x+i})]=F,u.e.c<I+s&&(u.e.c=I+s),I+=M}}++x}return d.length&&(n["!merges"]=(n["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,x-1+i),n["!ref"]=wr(u),x>=l&&(n["!fullref"]=wr((u.e.r=o.length-v+x-1+i,u))),n}function Ij(n,e){var t=e||{},r=t.dense?[]:{};return Tj(r,n,e)}function ove(n,e){return of(Ij(n,e),e)}function sO(n){var e="",t=lve(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function lve(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var cve=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Ap({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Tr+e}})(),aO=(function(){var n=function(s){return Tn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var l=[];l.push('      <table:table table:name="'+Tn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,f=0,d=Hs(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,v=Array.isArray(s);if(s["!cols"])for(f=0;f<=d.e.c;++f)l.push("        <table:table-column"+(s["!cols"][f]?' table:style-name="co'+s["!cols"][f].ods+'"':"")+`></table:table-column>
`);var x="",E=s["!rows"]||[];for(u=0;u<d.s.r;++u)x=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=d.e.r;++u){for(x=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+x+`>
`),f=0;f<d.s.c;++f)l.push(e);for(;f<=d.e.c;++f){var I=!1,T={},M="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>f)&&!(g[p].s.r>u)&&!(g[p].e.c<f)&&!(g[p].e.r<u)){(g[p].s.c!=f||g[p].s.r!=u)&&(I=!0),T["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,T["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(I){l.push(t);continue}var k=An({r:u,c:f}),L=v?(s[u]||[])[f]:s[k];if(L&&L.f&&(T["table:formula"]=Tn(P1e(L.f)),L.F&&L.F.slice(0,k.length)==k)){var z=Hs(L.F);T["table:number-matrix-columns-spanned"]=z.e.c-z.s.c+1,T["table:number-matrix-rows-spanned"]=z.e.r-z.s.r+1}if(!L){l.push(e);continue}switch(L.t){case"b":M=L.v?"TRUE":"FALSE",T["office:value-type"]="boolean",T["office:boolean-value"]=L.v?"true":"false";break;case"n":M=L.w||String(L.v||0),T["office:value-type"]="float",T["office:value"]=L.v||0;break;case"s":case"str":M=L.v==null?"":L.v,T["office:value-type"]="string";break;case"d":M=L.w||Ki(L.v).toISOString(),T["office:value-type"]="date",T["office:date-value"]=Ki(L.v).toISOString(),T["table:style-name"]="ce1";break;default:l.push(e);continue}var P=n(M);if(L.l&&L.l.Target){var C=L.l.Target;C=C.charAt(0)=="#"?"#"+M1e(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),P=qe("text:a",P,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+qe("table:table-cell",qe("text:p",P,{}),T)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var d=u["!cols"][f];if(d.width==null&&d.wpx==null&&d.wch==null)continue;DC(d),d.ods=o;var g=u["!cols"][f].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=l;var d=u["!rows"][f].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Tr],u=Ap({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=Ap({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+f+`>
`),l.push(GV().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(r(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function Aj(n,e){if(e.bookType=="fods")return aO(n,e);var t=IC(),r="",i=[],s=[];return r="mimetype",Ft(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Ft(t,r,aO(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Ft(t,r,cve(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Ft(t,r,Tr+GV()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Ft(t,r,Eme(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Ft(t,r,xme(i)),t}function gv(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function uve(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Ga(Ip(n))}function hve(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function gu(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function fve(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Rp(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function vn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function Kd(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function br(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Rp(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Rp(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function ai(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(vn(r*8+i.type)),i.type==2&&e.push(vn(i.data.length)),e.push(i.data))})}),gu(e)}function ka(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Rp(n,r),s=br(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:Kd(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=br(o.data),u=Kd(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Kd(s[3][0].data)>>>0>0),t.push(a)}return t}function rd(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:vn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:vn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:vn(a.data.length)}],r[2].push({data:ai(a.meta),type:2})});var s=ai(r);e.push(vn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),gu(e)}function dve(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Rp(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[gu(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var f=gu(i);if(f.length!=r)throw new Error("Unexpected length: ".concat(f.length," != ").concat(r));return f}function Na(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(dve(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return gu(e)}function id(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=vn(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return gu(e)}function PS(n,e){var t=new Uint8Array(32),r=gv(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,fve(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function MS(n,e){var t=new Uint8Array(32),r=gv(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function wc(n){var e=br(n);return Rp(e[1][0].data)}function gve(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&Kd(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=gv(n[7][0].data),f=0,d=[],g=gv(n[4][0].data),p=0,v=[],x=0;x<e.length;++x){if(e[x]==null){u.setUint16(x*2,65535,!0),g.setUint16(x*2,65535);continue}u.setUint16(x*2,f,!0),g.setUint16(x*2,p,!0);var E,I;switch(typeof e[x]){case"string":E=PS({t:"s",v:e[x]},t),I=MS({t:"s",v:e[x]},t);break;case"number":E=PS({t:"n",v:e[x]},t),I=MS({t:"n",v:e[x]},t);break;case"boolean":E=PS({t:"b",v:e[x]},t),I=MS({t:"b",v:e[x]},t);break;default:throw new Error("Unsupported value "+e[x])}d.push(E),f+=E.length,v.push(I),p+=I.length,++l}for(n[2][0].data=vn(l);x<n[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),g.setUint16(x*2,65535,!0);return n[6][0].data=gu(d),n[3][0].data=gu(v),l}function mve(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Hs(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(wr(r)));var s=mv(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(te){return te.forEach(function(ne){typeof ne=="string"&&a.push(ne)})});var o={},l=[],u=Rn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(te,ne){return[te,u.FullPaths[ne]]}).forEach(function(te){var ne=te[0],ee=te[1];if(ne.type==2&&ne.name.match(/\.iwa/)){var me=ne.content,Se=Na(me),Ne=ka(Se);Ne.forEach(function(se){l.push(se.id),o[se.id]={deps:[],location:ee,type:Kd(se.messages[0].meta[1][0].data)}})}}),l.sort(function(te,ne){return te-ne});var f=l.filter(function(te){return te>1}).map(function(te){return[te,vn(te)]});u.FileIndex.map(function(te,ne){return[te,u.FullPaths[ne]]}).forEach(function(te){var ne=te[0];if(te[1],!!ne.name.match(/\.iwa/)){var ee=ka(Na(ne.content));ee.forEach(function(me){me.messages.forEach(function(Se){f.forEach(function(Ne){me.messages.some(function(se){return Kd(se.meta[1][0].data)!=11006&&hve(se.data,Ne[1])})&&o[Ne[0]].deps.push(me.id)})})})}});for(var d=Rn.find(u,o[1].location),g=ka(Na(d.content)),p,v=0;v<g.length;++v){var x=g[v];x.id==1&&(p=x)}var E=wc(br(p.messages[0].data)[1][0].data);for(d=Rn.find(u,o[E].location),g=ka(Na(d.content)),v=0;v<g.length;++v)x=g[v],x.id==E&&(p=x);for(E=wc(br(p.messages[0].data)[2][0].data),d=Rn.find(u,o[E].location),g=ka(Na(d.content)),v=0;v<g.length;++v)x=g[v],x.id==E&&(p=x);for(E=wc(br(p.messages[0].data)[2][0].data),d=Rn.find(u,o[E].location),g=ka(Na(d.content)),v=0;v<g.length;++v)x=g[v],x.id==E&&(p=x);var I=br(p.messages[0].data);{I[6][0].data=vn(r.e.r+1),I[7][0].data=vn(r.e.c+1);var T=wc(I[46][0].data),M=Rn.find(u,o[T].location),k=ka(Na(M.content));{for(var L=0;L<k.length&&k[L].id!=T;++L);if(k[L].id!=T)throw"Bad ColumnRowUIDMapArchive";var z=br(k[L].messages[0].data);z[1]=[],z[2]=[],z[3]=[];for(var P=0;P<=r.e.c;++P){var C=[];C[1]=C[2]=[{type:0,data:vn(P+420690)}],z[1].push({type:2,data:ai(C)}),z[2].push({type:0,data:vn(P)}),z[3].push({type:0,data:vn(P)})}z[4]=[],z[5]=[],z[6]=[];for(var b=0;b<=r.e.r;++b)C=[],C[1]=C[2]=[{type:0,data:vn(b+726270)}],z[4].push({type:2,data:ai(C)}),z[5].push({type:0,data:vn(b)}),z[6].push({type:0,data:vn(b)});k[L].messages[0].data=ai(z)}M.content=id(rd(k)),M.size=M.content.length,delete I[46];var F=br(I[4][0].data);{F[7][0].data=vn(r.e.r+1);var j=br(F[1][0].data),U=wc(j[2][0].data);M=Rn.find(u,o[U].location),k=ka(Na(M.content));{if(k[0].id!=U)throw"Bad HeaderStorageBucket";var V=br(k[0].messages[0].data);for(b=0;b<s.length;++b){var Te=br(V[2][0].data);Te[1][0].data=vn(b),Te[4][0].data=vn(s[b].length),V[2][b]={type:V[2][0].type,data:ai(Te)}}k[0].messages[0].data=ai(V)}M.content=id(rd(k)),M.size=M.content.length;var Me=wc(F[2][0].data);M=Rn.find(u,o[Me].location),k=ka(Na(M.content));{if(k[0].id!=Me)throw"Bad HeaderStorageBucket";for(V=br(k[0].messages[0].data),P=0;P<=r.e.c;++P)Te=br(V[2][0].data),Te[1][0].data=vn(P),Te[4][0].data=vn(r.e.r+1),V[2][P]={type:V[2][0].type,data:ai(Te)};k[0].messages[0].data=ai(V)}M.content=id(rd(k)),M.size=M.content.length;var De=wc(F[4][0].data);(function(){for(var te=Rn.find(u,o[De].location),ne=ka(Na(te.content)),ee,me=0;me<ne.length;++me){var Se=ne[me];Se.id==De&&(ee=Se)}var Ne=br(ee.messages[0].data);{Ne[3]=[];var se=[];a.forEach(function(Ye,he){se[1]=[{type:0,data:vn(he)}],se[2]=[{type:0,data:vn(1)}],se[3]=[{type:2,data:uve(Ye)}],Ne[3].push({type:2,data:ai(se)})})}ee.messages[0].data=ai(Ne);var re=rd(ne),D=id(re);te.content=D,te.size=te.content.length})();var be=br(F[3][0].data);{var le=be[1][0];delete be[2];var Ae=br(le.data);{var Ie=wc(Ae[2][0].data);(function(){for(var te=Rn.find(u,o[Ie].location),ne=ka(Na(te.content)),ee,me=0;me<ne.length;++me){var Se=ne[me];Se.id==Ie&&(ee=Se)}var Ne=br(ee.messages[0].data);{delete Ne[6],delete be[7];var se=new Uint8Array(Ne[5][0].data);Ne[5]=[];for(var re=0,D=0;D<=r.e.r;++D){var Ye=br(se);re+=gve(Ye,s[D],a),Ye[1][0].data=vn(D),Ne[5].push({data:ai(Ye),type:2})}Ne[1]=[{type:0,data:vn(r.e.c+1)}],Ne[2]=[{type:0,data:vn(r.e.r+1)}],Ne[3]=[{type:0,data:vn(re)}],Ne[4]=[{type:0,data:vn(r.e.r+1)}]}ee.messages[0].data=ai(Ne);var he=rd(ne),He=id(he);te.content=He,te.size=te.content.length})()}le.data=ai(Ae)}F[3][0].data=ai(be)}I[4][0].data=ai(F)}p.messages[0].data=ai(I);var Y=rd(g),O=id(Y);return d.content=O,d.size=d.content.length,u}function pve(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function BC(n){pve([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function _ve(n,e){return e.bookType=="ods"?Aj(n,e):e.bookType=="numbers"?mve(n,e):e.bookType=="xlsb"?yve(n,e):xve(n,e)}function yve(n,e){Md=1024,n&&!n.SSF&&(n.SSF=ps(or)),n&&n.SSF&&(CE(),RE(n.SSF),e.revssf=PE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Lm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=lj.indexOf(e.bookType)>-1,i=FV();BC(e=e||{});var s=IC(),a="",o=0;if(e.cellXfs=[],Eu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",Ft(s,a,BV(n.Props,e)),i.coreprops.push(a),En(e.rels,2,a,Jt.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,Ft(s,a,zV(n.Props)),i.extprops.push(a),En(e.rels,3,a,Jt.EXT_PROPS),n.Custprops!==n.Props&&_i(n.Custprops||{}).length>0&&(a="docProps/custom.xml",Ft(s,a,$V(n.Custprops)),i.custprops.push(a),En(e.rels,4,a,Jt.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var f={"!id":{}},d=n.Sheets[n.SheetNames[o-1]],g=(d||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,Ft(s,a,Exe(o-1,a,e,n,f)),i.sheets.push(a),En(e.wbrels,-1,"worksheets/sheet"+o+"."+t,Jt.WS[0])}if(d){var p=d["!comments"],v=!1,x="";p&&p.length>0&&(x="xl/comments"+o+"."+t,Ft(s,x,Txe(p,x)),i.comments.push(x),En(f,-1,"../comments"+o+"."+t,Jt.CMNT),v=!0),d["!legacy"]&&v&&Ft(s,"xl/drawings/vmlDrawing"+o+".vml",aj(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&Ft(s,jV(a),Wd(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Ft(s,a,Sxe(e.Strings,a,e)),i.strs.push(a),En(e.wbrels,-1,"sharedStrings."+t,Jt.SST)),a="xl/workbook."+t,Ft(s,a,vxe(n,a)),i.workbooks.push(a),En(e.rels,1,a,Jt.WB),a="xl/theme/theme1.xml",Ft(s,a,ij(n.Themes,e)),i.themes.push(a),En(e.wbrels,-1,"theme/theme1.xml",Jt.THEME),a="xl/styles."+t,Ft(s,a,wxe(n,a,e)),i.styles.push(a),En(e.wbrels,-1,"styles."+t,Jt.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",Ft(s,a,n.vbaraw),i.vba.push(a),En(e.wbrels,-1,"vbaProject.bin",Jt.VBA)),a="xl/metadata."+t,Ft(s,a,Ixe(a)),i.metadata.push(a),En(e.wbrels,-1,"metadata."+t,Jt.XLMETA),Ft(s,"[Content_Types].xml",VV(i,e)),Ft(s,"_rels/.rels",Wd(e.rels)),Ft(s,"xl/_rels/workbook."+t+".rels",Wd(e.wbrels)),delete e.revssf,delete e.ssf,s}function xve(n,e){Md=1024,n&&!n.SSF&&(n.SSF=ps(or)),n&&n.SSF&&(CE(),RE(n.SSF),e.revssf=PE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Lm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=lj.indexOf(e.bookType)>-1,i=FV();BC(e=e||{});var s=IC(),a="",o=0;if(e.cellXfs=[],Eu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",Ft(s,a,BV(n.Props,e)),i.coreprops.push(a),En(e.rels,2,a,Jt.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,Ft(s,a,zV(n.Props)),i.extprops.push(a),En(e.rels,3,a,Jt.EXT_PROPS),n.Custprops!==n.Props&&_i(n.Custprops||{}).length>0&&(a="docProps/custom.xml",Ft(s,a,$V(n.Custprops)),i.custprops.push(a),En(e.rels,4,a,Jt.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var d={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,Ft(s,a,_j(o-1,e,n,d)),i.sheets.push(a),En(e.wbrels,-1,"worksheets/sheet"+o+"."+t,Jt.WS[0])}if(g){var v=g["!comments"],x=!1,E="";if(v&&v.length>0){var I=!1;v.forEach(function(T){T[1].forEach(function(M){M.T==!0&&(I=!0)})}),I&&(E="xl/threadedComments/threadedComment"+o+"."+t,Ft(s,E,qpe(v,f,e)),i.threadedcomments.push(E),En(d,-1,"../threadedComments/threadedComment"+o+"."+t,Jt.TCMNT)),E="xl/comments"+o+"."+t,Ft(s,E,oj(v)),i.comments.push(E),En(d,-1,"../comments"+o+"."+t,Jt.CMNT),x=!0}g["!legacy"]&&x&&Ft(s,"xl/drawings/vmlDrawing"+o+".vml",aj(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}d["!id"].rId1&&Ft(s,jV(a),Wd(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Ft(s,a,QV(e.Strings,e)),i.strs.push(a),En(e.wbrels,-1,"sharedStrings."+t,Jt.SST)),a="xl/workbook."+t,Ft(s,a,vj(n)),i.workbooks.push(a),En(e.rels,1,a,Jt.WB),a="xl/theme/theme1.xml",Ft(s,a,ij(n.Themes,e)),i.themes.push(a),En(e.wbrels,-1,"theme/theme1.xml",Jt.THEME),a="xl/styles."+t,Ft(s,a,nj(n,e)),i.styles.push(a),En(e.wbrels,-1,"styles."+t,Jt.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",Ft(s,a,n.vbaraw),i.vba.push(a),En(e.wbrels,-1,"vbaProject.bin",Jt.VBA)),a="xl/metadata."+t,Ft(s,a,sj()),i.metadata.push(a),En(e.wbrels,-1,"metadata."+t,Jt.XLMETA),f.length>1&&(a="xl/persons/person.xml",Ft(s,a,Zpe(f)),i.people.push(a),En(e.wbrels,-1,"persons/person.xml",Jt.PEOPLE)),Ft(s,"[Content_Types].xml",VV(i,e)),Ft(s,"_rels/.rels",Wd(e.rels)),Ft(s,"xl/_rels/workbook."+t+".rels",Wd(e.wbrels)),delete e.revssf,delete e.ssf,s}function vve(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=Dl(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function Rj(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return x_(e.file,Rn.write(n,{type:on?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Rn.write(n,e)}function Eve(n,e){var t=ps(e||{}),r=_ve(n,t);return wve(r,t)}function wve(n,e){var t={},r=on?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?Rn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(AE(i))}return e.password&&typeof encrypt_agile<"u"?Rj(encrypt_agile(i,e.password),e):e.type==="file"?x_(e.file,i):e.type=="string"?Mm(i):i}function Sve(n,e){var t=e||{},r=jxe(n,t);return Rj(r,t)}function Eo(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Sp(Ip(r));case"binary":return Ip(r);case"string":return n;case"file":return x_(e.file,r,"utf8");case"buffer":return on?$l(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Eo(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Tve(n,e){switch(e.type){case"base64":return Sp(n);case"binary":return n;case"string":return n;case"file":return x_(e.file,n,"binary");case"buffer":return on?$l(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function uy(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Sp(t):e.type=="string"?Mm(t):t;case"file":return x_(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function Cj(n,e){Q0e(),cxe(n);var t=ps(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=Cj(n,t);return t.type="array",AE(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return Eo(Fxe(n,t),t);case"slk":case"sylk":return Eo(ape.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return Eo(Sj(n.Sheets[n.SheetNames[i]],t),t);case"txt":return Tve(Pj(n.Sheets[n.SheetNames[i]],t),t);case"csv":return Eo(UC(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return Eo(ope.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return uy(spe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return Eo(lpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return Eo(mpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return Eo(ZV.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return Eo(Aj(n,t),t);case"wk1":return uy(JL.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return uy(JL.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),uy(wj(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),Sve(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Eve(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function Ive(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function Ave(n,e,t){var r={};return r.type="file",r.file=e,Ive(r),Cj(n,r)}function Rve(n,e,t,r,i,s,a,o){var l=pi(t),u=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var p=e.s.c;p<=e.e.c;++p){var v=a?n[t][p]:n[r[p]+l];if(v===void 0||v.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var x=v.v;switch(v.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[p]!=null){if(x==null)if(v.t=="e"&&x===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(f&&x===null)g[s[p]]=null;else continue;else g[s[p]]=f&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?x:Fl(v,x,o);x!=null&&(d=!1)}}return{row:g,isempty:d}}function mv(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},f=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof f){case"string":l=Gn(f);break;case"number":l=Gn(n["!ref"]),l.s.r=f;break;default:l=f}r>0&&(i=0);var d=pi(l.s.r),g=[],p=[],v=0,x=0,E=Array.isArray(n),I=l.s.r,T=0,M={};E&&!n[I]&&(n[I]=[]);var k=u.skipHidden&&n["!cols"]||[],L=u.skipHidden&&n["!rows"]||[];for(T=l.s.c;T<=l.e.c;++T)if(!(k[T]||{}).hidden)switch(g[T]=Ni(T),t=E?n[I][T]:n[g[T]+d],r){case 1:s[T]=T-l.s.c;break;case 2:s[T]=g[T];break;case 3:s[T]=u.header[T-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=Fl(t,null,u),x=M[a]||0,!x)M[a]=1;else{do o=a+"_"+x++;while(M[o]);M[a]=x,M[o]=1}s[T]=o}for(I=l.s.r+i;I<=l.e.r;++I)if(!(L[I]||{}).hidden){var z=Rve(n,l,I,g,r,s,E,u);(z.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[v++]=z.row)}return p.length=v,p}var oO=/"/g;function Cve(n,e,t,r,i,s,a,o){for(var l=!0,u=[],f="",d=pi(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var p=o.dense?(n[t]||[])[g]:n[r[g]+d];if(p==null)f="";else if(p.v!=null){l=!1,f=""+(o.rawNumbers&&p.t=="n"?p.v:Fl(p,null,o));for(var v=0,x=0;v!==f.length;++v)if((x=f.charCodeAt(v))===i||x===s||x===34||o.forceQuotes){f='"'+f.replace(oO,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(l=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(oO,'""')+'"')):f="";u.push(f)}return o.blankrows===!1&&l?null:u.join(a)}function UC(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=Gn(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),f="",d=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(g[v]||{}).hidden||(d[v]=Ni(v));for(var x=0,E=i.s.r;E<=i.e.r;++E)(p[E]||{}).hidden||(f=Cve(n,i,E,d,a,l,s,r),f!=null&&(r.strip&&(f=f.replace(u,"")),(f||r.blankrows!==!1)&&t.push((x++?o:"")+f)));return delete r.dense,t.join("")}function Pj(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=UC(n,e);return t}function Pve(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=Gn(n["!ref"]),s="",a=[],o,l=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=Ni(o);for(var f=i.s.r;f<=i.e.r;++f)for(s=pi(f),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[f]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function Mj(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?qr(r.origin):r.origin;a=l.r,o=l.c}var u,f={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=Gn(s["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),a==-1&&(a=d.e.r+1,f.e.r=a+e.length-1+i)}else a==-1&&(a=0,f.e.r=e.length-1+i);var g=r.header||[],p=0;e.forEach(function(x,E){_i(x).forEach(function(I){(p=g.indexOf(I))==-1&&(g[p=g.length]=I);var T=x[I],M="z",k="",L=An({c:o+p,r:a+E+i});u=Cp(s,L),T&&typeof T=="object"&&!(T instanceof Date)?s[L]=T:(typeof T=="number"?M="n":typeof T=="boolean"?M="b":typeof T=="string"?M="s":T instanceof Date?(M="d",r.cellDates||(M="n",T=ms(T)),k=r.dateNF||or[14]):T===null&&r.nullError&&(M="e",T=0),u?(u.t=M,u.v=T,delete u.w,delete u.R,k&&(u.z=k)):s[L]=u={t:M,v:T},k&&(u.z=k))})}),f.e.c=Math.max(f.e.c,o+g.length-1);var v=pi(a);if(i)for(p=0;p<g.length;++p)s[Ni(p+o)+v]={t:"s",v:g[p]};return s["!ref"]=wr(f),s}function Mve(n,e){return Mj(null,n,e)}function Cp(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=qr(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?Cp(n,An(e)):Cp(n,An({r:e,c:t||0}))}function bve(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function kve(){return{SheetNames:[],Sheets:{}}}function Nve(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(xj(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function Lve(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=bve(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function Ove(n,e){return n.z=e,n}function bj(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function Dve(n,e,t){return bj(n,"#"+e,t)}function Fve(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function Vve(n,e,t,r){for(var i=typeof e!="string"?e:Gn(e),s=typeof e=="string"?e:wr(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=Cp(n,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=t,r&&(l.D=!0))}return n}var bS={encode_col:Ni,encode_row:pi,encode_cell:An,encode_range:wr,decode_col:bC,decode_row:MC,split_cell:Qge,decode_cell:qr,decode_range:Hs,format_cell:Fl,sheet_add_aoa:bV,sheet_add_json:Mj,sheet_add_dom:Tj,aoa_to_sheet:V0,json_to_sheet:Mve,table_to_sheet:Ij,table_to_book:ove,sheet_to_csv:UC,sheet_to_txt:Pj,sheet_to_json:mv,sheet_to_html:Sj,sheet_to_formulae:Pve,sheet_to_row_object_array:mv,sheet_get_cell:Cp,book_new:kve,book_append_sheet:Nve,book_set_sheet_visibility:Lve,cell_set_number_format:Ove,cell_set_hyperlink:bj,cell_set_internal_link:Dve,cell_add_comment:Fve,sheet_set_array_formula:Vve,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const B0=Ja()(fE((n,e)=>({vondsten:[],addVondst:t=>n(r=>({vondsten:[...r.vondsten,{...t,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:t=>n(r=>({vondsten:r.vondsten.filter(i=>i.id!==t)})),updateVondst:(t,r)=>n(i=>({vondsten:i.vondsten.map(s=>s.id===t?{...s,...r}:s)})),clearAll:()=>n({vondsten:[]}),exportAsGeoJSON:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:t.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:[o.location.lng,o.location.lat]},properties:{id:o.id,objectType:o.objectType,material:o.material,period:o.period,depth:o.depth,notes:o.notes,timestamp:o.timestamp,photoUrl:o.photoUrl,condition:o.condition,weight:o.weight,length:o.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},exportAsCSV:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=t.map(u=>{const f=new Date(u.timestamp).toLocaleDateString("nl-NL"),d=u.notes?`"${u.notes.replace(/"/g,'""')}"`:"";return`${u.id},${u.location.lat},${u.location.lng},${f},${u.objectType},${u.material},${u.period},${u.depth||""},${u.condition||""},${u.weight||""},${u.length||""},${d},${u.photoUrl||""}`}).join(`
`),s=r+i,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},exportAsExcel:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(o=>({ID:o.id,Latitude:o.location.lat,Longitude:o.location.lng,Datum:new Date(o.timestamp).toLocaleDateString("nl-NL"),Type:o.objectType,Materiaal:o.material,Periode:o.period,"Diepte (cm)":o.depth||"",Conditie:o.condition||"","Gewicht (g)":o.weight||"","Lengte (mm)":o.length||"",Notities:o.notes||"","Foto URL":o.photoUrl||""})),i=bS.json_to_sheet(r),s=bS.book_new();bS.book_append_sheet(s,i,"Vondsten");const a=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=a,Ave(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(l=>{const u=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${u}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},exportAsKML:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${t.map(l=>{const u=new Date(l.timestamp).toLocaleDateString("nl-NL"),f=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${u}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${f}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}}),{name:"detectorapp-local-vondsten"}));Zt.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");async function jve(n){try{const e=fn(n),t=Zt("EPSG:4326","EPSG:28992",e);if(t[0]<7e3||t[0]>3e5||t[1]<289e3||t[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${t[0]-r},${t[1]-r},${t[0]+r},${t[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,o=await(await fetch(s)).json();if(o.features&&o.features.length>0){const l=o.features[0].properties,u=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(u!=null){const f=typeof u=="number"?u:parseFloat(u);if(!isNaN(f))return f}}}catch(e){console.warn("AHN height query failed:",e)}return null}const Gve={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},Bve={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function Uve(){const n=Dr(le=>le.map),e=B0(le=>le.removeVondst),[t,r]=ce.useState([]),[i,s]=ce.useState(0),[a,o]=ce.useState(!1),[l,u]=ce.useState(null),[f,d]=ce.useState(!1),[g,p]=ce.useState(!1),[v,x]=ce.useState(null),[E,I]=ce.useState(()=>{const le=localStorage.getItem("popupTextScale");return le?parseInt(le):100}),T=le=>{I(le),localStorage.setItem("popupTextScale",le.toString())},M=t[i]||"",k=t.length>1,L=le=>{const Ae=le.match(/<strong[^>]*>(.*?)<\/strong>/);if(Ae){const Ie=Ae[1].replace(/<[^>]+>/g,""),Y=le.replace(Ae[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:Ie,contentWithoutTitle:Y}}return{title:"",contentWithoutTitle:le}},z=le=>le.replace(/class="([^"]*)"/g,(Ie,Y)=>{if(Y.includes("text-xs")){const O=Y.replace(/\btext-xs\b/g,"").trim();return O?`style="font-size:0.857em" class="${O}"`:'style="font-size:0.857em"'}if(Y.includes("text-sm")){const O=Y.replace(/\btext-sm\b/g,"").trim();return O?`class="${O}"`:""}return Ie}).replace(/class=""/g,""),{title:P,contentWithoutTitle:C}=L(M),b=z(C),F=M.includes("Landbouwperceel"),j=M.includes("data-vondst-id="),U=()=>{s(le=>(le-1+t.length)%t.length)},V=()=>{s(le=>(le+1)%t.length)},Te=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",l),!n||!l||g){console.log(" STOP - map:",!!n,"coord:",l,"loading:",g);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${l[0]}, ${l[1]}]`),p(!0);try{await X0e(n,l)&&d(!0)}catch(le){console.error("Failed to load height map:",le)}finally{p(!1)}},Me=()=>{n&&(vI(n),d(!1))};ce.useEffect(()=>{if(!n)return;const le=Y=>{let O='<strong class="text-purple-800">AMK Monument</strong>';if(Y.toponiem&&(O+=`<br/><span class="text-sm font-semibold">${Y.toponiem}</span>`),Y.kwaliteitswaarde&&(O+=`<br/><span class="text-sm text-purple-700">${Y.kwaliteitswaarde}</span>`),Y.omschrijving&&(O+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Y.omschrijving}</span>`),Y.txt_label){const te=Y.txt_label.split(", ").slice(0,3).join(", ");O+=`<br/><span class="text-xs text-gray-500 italic">${te}${Y.txt_label.split(", ").length>3?"...":""}</span>`}return O},Ae=async(Y,O)=>{const te=[],ne=n.getLayers().getArray().filter(ee=>ee instanceof Yu&&ee.getVisible()?ee.getSource()instanceof fW:!1);for(const ee of ne){const me=ee.getSource();if(!me)continue;const Se=ee.get("title")||"";if(Se==="Archeo Landschappen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-green-800">Archeologisch Landschap</strong>';(W.landschapsnaam||W.naam)&&(ae+=`<br/><span class="text-sm font-semibold">${W.landschapsnaam||W.naam}</span>`),W.omschrijving&&(ae+=`<br/><span class="text-xs text-gray-600">${W.omschrijving}</span>`),te.push(ae)}}catch(se){console.warn("Archeo Landschappen WMS query failed:",se)}continue}if(Se==="Essen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(W.naam||W.Naam||W.NAME)&&(ae+=`<br/><span class="text-sm font-semibold text-amber-700">${W.naam||W.Naam||W.NAME}</span>`),(W.type||W.Type||W.TYPE)&&(ae+=`<br/><span class="text-xs text-gray-600">${W.type||W.Type||W.TYPE}</span>`),(W.omschrijving||W.Omschrijving)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.omschrijving||W.Omschrijving}</span>`),te.push(ae)}}catch(se){console.warn("Essen WMS query failed:",se)}continue}if(Se==="FAMKE Steentijd"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=FAMKE_Advies_steentijd-bronstijd3339&QUERY_LAYERS=FAMKE_Advies_steentijd-bronstijd3339&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';(W.advies||W.Advies)&&(ae+=`<br/><span class="text-sm text-amber-700">${W.advies||W.Advies}</span>`),te.push(ae)}}catch(se){console.warn("FAMKE WMS query failed:",se)}continue}if(Se==="Archeo Onderzoeken"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-blue-800">Archeologisch Onderzoek</strong>';if(W.type_onderzoek&&(ae+=`<br/><span class="text-sm font-semibold">${W.type_onderzoek}</span>`),W.onderzoeksmeldingnummer&&(ae+=`<br/><span class="text-xs text-gray-500">Melding: ${W.onderzoeksmeldingnummer}</span>`),W.uitvoerder&&(ae+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${W.uitvoerder}</span>`),W.startdatum||W.einddatum){const ot=[W.startdatum,W.einddatum].filter(Boolean).join(" - ");ae+=`<br/><span class="text-xs text-gray-600">Periode: ${ot}</span>`}if(W.gemeente&&(ae+=`<br/><span class="text-xs text-gray-500">${W.gemeente}</span>`),W.type_uri){const ot=W.type_uri.replace("type_uri:","").trim();ot.startsWith("http")&&(ae+=`<br/><a href="${ot}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">Meer informatie </a>`)}for(const[ot,lt]of Object.entries(W))if(ot.toLowerCase().includes("uri")&&typeof lt=="string"&&ot!=="type_uri"){const _t=lt.replace(/^[a-z_]+:/i,"").trim();_t.startsWith("http")&&(ae+=`<br/><a href="${_t}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">${ot.replace("_uri","")} </a>`)}te.push(ae)}}catch(se){console.warn("Archeo Onderzoeken WMS query failed:",se)}continue}if(Se==="IKAW"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=500,he=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,ae=Math.round(W.PALETTE_INDEX||W.palette_index||0),ot=Bve[ae]||`Trefkans onbekend (${ae})`;let lt='<strong class="text-orange-800">IKAW (2008)</strong>';lt+=`<br/><span class="text-sm text-orange-700">${ot}</span>`,te.push(lt)}}catch(se){console.warn("IKAW WMS query failed:",se)}continue}if(Se==="Inundatiegebieden"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-blue-800">Inundatiegebied</strong>';(W["linie-naam"]||W.linie_naam)&&(ae+=`<br/><span class="text-sm font-semibold text-blue-700">${W["linie-naam"]||W.linie_naam}</span>`),W.naam&&(ae+=`<br/><span class="text-sm text-gray-700">${W.naam}</span>`),W.periode&&(ae+=`<br/><span class="text-xs text-gray-500">${W.periode}</span>`),W.lin_period&&(ae+=`<br/><span class="text-xs text-gray-400">${W.lin_period}</span>`),te.push(ae)}}catch(se){console.warn("Inundatiegebieden WMS query failed:",se)}continue}if(Se==="Militaire Objecten"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=50,he=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-stone-800">Militair Object</strong>';W.obj_soort&&(ae+=`<br/><span class="text-sm font-semibold text-stone-700">${W.obj_soort}</span>`),W.obj_naam&&(ae+=`<br/><span class="text-sm text-gray-700">${W.obj_naam}</span>`),W.lin_period&&(ae+=`<br/><span class="text-xs text-gray-500">${W.lin_period}</span>`),te.push(ae)}}catch(se){console.warn("Militaire Objecten WMS query failed:",se)}continue}if(Se==="Verdedigingslinies"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-amber-800">Verdedigingslinie</strong>';(W.naam||W.lin_naam)&&(ae+=`<br/><span class="text-sm font-semibold text-amber-700">${W.naam||W.lin_naam}</span>`),W.lin_period&&(ae+=`<br/><span class="text-xs text-gray-500">${W.lin_period}</span>`),W.status&&(ae+=`<br/><span class="text-xs text-gray-400">${W.status}</span>`),te.push(ae)}}catch(se){console.warn("Verdedigingslinies WMS query failed:",se)}continue}if(Se==="Rijksmonumenten"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=50,he=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-red-800">Rijksmonument</strong>';(W.cbsNaam||W.cbs_naam)&&(ae+=`<br/><span class="text-sm font-semibold">${W.cbsNaam||W.cbs_naam}</span>`),W.hoofdcategorie&&(ae+=`<br/><span class="text-sm text-red-700">${W.hoofdcategorie}</span>`),W.subcategorie&&(ae+=`<br/><span class="text-xs text-gray-600">${W.subcategorie}</span>`),W.rijksmonumentnummer&&(ae+=`<br/><span class="text-xs text-gray-500">Nr: ${W.rijksmonumentnummer}</span>`),(W.bouwjaar||W.oorspronkelijkebouwjaar)&&(ae+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${W.bouwjaar||W.oorspronkelijkebouwjaar}</span>`),te.push(ae)}}catch(se){console.warn("Rijksmonumenten WMS query failed:",se)}continue}if(Se==="Werelderfgoed"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=500,he=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(W.siteName||W.naam)&&(ae+=`<br/><span class="text-sm font-semibold text-cyan-700">${W.siteName||W.naam}</span>`),W.siteDesignation&&(ae+=`<br/><span class="text-xs text-gray-600">${W.siteDesignation}</span>`),te.push(ae)}}catch(se){console.warn("Werelderfgoed WMS query failed:",se)}continue}if(Se==="Terpen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=terpen3335&QUERY_LAYERS=terpen3335&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-orange-800">Terp</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-orange-700">${W.naam||W.NAAM}</span>`),(W.plaats||W.PLAATS)&&(ae+=`<br/><span class="text-xs text-gray-600">${W.plaats||W.PLAATS}</span>`),te.push(ae)}}catch(se){console.warn("Terpen WMS query failed:",se)}continue}if(Se==="Religieus Erfgoed"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=50,he=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-purple-800">Religieus Erfgoed</strong>';const ot=W.naam||W.NAAM||W.name||W.NAME;ot&&(ae+=`<br/><span class="text-sm font-semibold text-purple-700">${ot}</span>`);const lt=W.denominatie||W.DENOMINATIE||W.religie;lt&&(ae+=`<br/><span class="text-sm text-gray-700">${lt}</span>`);const _t=W.type||W.TYPE||W.functie;_t&&(ae+=`<br/><span class="text-xs text-gray-600">${_t}</span>`);const Dt=W.bouwjaar||W.BOUWJAAR||W.jaar;Dt&&(ae+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${Dt}</span>`);const Nn=W.gemeente||W.GEMEENTE||W.plaats;Nn&&(ae+=`<br/><span class="text-xs text-gray-400">${Nn}</span>`),te.push(ae)}}catch(se){console.warn("Religieus Erfgoed WMS query failed:",se)}continue}if(Se==="Gewaspercelen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=50,Ye=`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`,he=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${Ye}`,He=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${Ye}`,[ue,W]=await Promise.all([fetch(he),fetch(He).catch(()=>null)]),ae=await ue.json();if(ae.features&&ae.features.length>0){const ot=ae.features[0].properties;let lt='<strong class="text-green-800">Landbouwperceel</strong>';if((ot.gewas||ot.gewasnaam)&&(lt+=`<br/><span class="text-sm font-semibold text-green-700">${ot.gewas||ot.gewasnaam}</span>`),(ot.categorie||ot.category)&&(lt+=`<br/><span class="text-xs text-gray-600">${ot.categorie||ot.category}</span>`),ot.oppervlakte&&(lt+=`<br/><span class="text-xs text-gray-500">${ot.oppervlakte} ha</span>`),W)try{const _t=await W.json();if(_t.features&&_t.features.length>0){const Dt=_t.features[0].properties,Nn=Dt.first_soilname||Dt.soilname||Dt.bodemtype;Nn&&(lt+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${Nn}</span>`);const rn=Dt.first_soilcode||Dt.soilcode||Dt.maparea_soilcode;rn&&(lt+=`<br/><span class="text-xs text-gray-400">Bodemcode: ${rn}</span>`)}}catch{}te.push(lt)}}catch(se){console.warn("BRP Gewaspercelen WMS query failed:",se)}continue}if(Se==="Kadastrale Grenzen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=20,he=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if((W.perceelNummer||W.perceelnummer)&&(ae+=`<br/><span class="text-sm font-semibold text-indigo-700">${W.perceelNummer||W.perceelnummer}</span>`),W.kadastraleGemeenteCode||W.gemeentecode){const ot=String(W.kadastraleGemeenteCode||W.gemeentecode),lt=Gve[ot]||ot;ae+=`<br/><span class="text-xs text-gray-600">Gemeente: ${lt}</span>`}W.sectie&&(ae+=`<br/><span class="text-xs text-gray-500">Sectie: ${W.sectie}</span>`),W.oppervlakte&&(ae+=`<br/><span class="text-xs text-gray-500">${W.oppervlakte} m</span>`),te.push(ae)}}catch(se){console.warn("Kadastrale Grenzen WMS query failed:",se)}continue}if(Se==="Scheepswrakken"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-cyan-800">Scheepswrak</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-cyan-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.datering||W.DATERING)&&(ae+=`<br/><span class="text-xs text-gray-500">Datering: ${W.datering||W.DATERING}</span>`),(W.bron||W.BRON)&&(ae+=`<br/><span class="text-xs text-gray-400">${W.bron||W.BRON}</span>`),te.push(ae)}}catch(se){console.warn("Scheepswrakken WMS query failed:",se)}continue}if(Se==="Woonheuvels ZH"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-orange-800">Woonheuvel</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-orange-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),te.push(ae)}}catch(se){console.warn("Woonheuvels WMS query failed:",se)}continue}if(Se==="Romeinse Forten"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=200,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-red-800">Romeins Fort</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-red-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.periode||W.PERIODE)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.periode||W.PERIODE}</span>`),te.push(ae)}}catch(se){console.warn("Romeinse Forten WMS query failed:",se)}continue}if(Se==="Windmolens"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=50,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-amber-800">Windmolen</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-amber-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE||W.functie||W.FUNCTIE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE||W.functie||W.FUNCTIE}</span>`),(W.bouwjaar||W.BOUWJAAR)&&(ae+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${W.bouwjaar||W.BOUWJAAR}</span>`),te.push(ae)}}catch(se){console.warn("Windmolens WMS query failed:",se)}continue}if(Se==="Erfgoedlijnen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=200,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-purple-800">Erfgoedlijn</strong>';(W.naam||W.NAAM||W.erfgoedlijn)&&(ae+=`<br/><span class="text-sm font-semibold text-purple-700">${W.naam||W.NAAM||W.erfgoedlijn}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.omschrijving||W.OMSCHRIJVING)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.omschrijving||W.OMSCHRIJVING}</span>`),te.push(ae)}}catch(se){console.warn("Erfgoedlijnen WMS query failed:",se)}continue}if(Se==="Oude Kernen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=200,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-stone-800">Historische Kern</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-stone-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.periode||W.PERIODE)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.periode||W.PERIODE}</span>`),te.push(ae)}}catch(se){console.warn("Oude Kernen WMS query failed:",se)}continue}if(Se==="Relictenkaart Punten"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=50,he=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,ae={KV:"Kasteel/Vesting",K:"Kapel",KE:"Kerkhof",B:"Buitenhuis",OB:"Oud Bebouwingsrelict",OV:"Oude Verkaveling",NR:"Nijverheidsrelict",GH:"Grafheuvel",BP:"Begraafplaats",HH:"Havezate",RM:"Rosmolen",WM:"Windmolen",PM:"Poldermolen",EK:"Eendenkooi",SH:"Scholtenhoeve"},ot=W.type?.replace(/[0-9]/g,"")||"",lt=ae[ot]||W.type||"Cultuurhistorisch object";let _t='<strong class="text-emerald-800">Relict</strong>';_t+=`<br/><span class="text-sm font-semibold text-emerald-700">${lt}</span>`,W.type&&ot!==W.type&&(_t+=`<br/><span class="text-xs text-gray-500">Code: ${W.type}</span>`),W.streek&&(_t+=`<br/><span class="text-xs text-gray-400">Streek: ${W.streek}</span>`),te.push(_t)}}catch(se){console.warn("Relictenkaart Punten WMS query failed:",se)}continue}if(Se==="Relictenkaart Lijnen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=50,he=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,ot={1:"Sprengenbeek",2:"Oude waterloop",3:"Doorgaande weg",4:"Hessenweg",5:"Oude weg",6:"Historische grens",7:"Trekpad",8:"Jaagpad"}[W.klasse]||`Historisch lijnrelict (${W.klasse})`;let lt='<strong class="text-teal-800">Lijnrelict</strong>';lt+=`<br/><span class="text-sm font-semibold text-teal-700">${ot}</span>`,te.push(lt)}}catch(se){console.warn("Relictenkaart Lijnen WMS query failed:",se)}continue}if(Se==="Relictenkaart Vlakken"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,ot={1:"Onveranderd agrarisch (voor 1850)",2:"Jonge heideontginning (1850-1950)",3:"Open essencomplex",4:"Kampenlandschap",5:"Heiderelict (1850)",6:"Bosrelict (1850)",7:"Stuifzandrelict",8:"Oud bouwland",9:"Historisch grasland",10:"Beekdal"}[W.klasse]||`Historisch landschap (${W.klasse})`;let lt='<strong class="text-lime-800">Landschapsrelict</strong>';if(lt+=`<br/><span class="text-sm font-semibold text-lime-700">${ot}</span>`,W.st_area_shape_){const _t=(W.st_area_shape_/1e4).toFixed(1);lt+=`<br/><span class="text-xs text-gray-500">${_t} ha</span>`}te.push(lt)}}catch(se){console.warn("Relictenkaart Vlakken WMS query failed:",se)}continue}if(Se==="Verdronken Dorpen"){try{const se=fn(Y),re=Zt("EPSG:4326","EPSG:28992",se),D=200,he=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-blue-800">Verdronken Dorp</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-blue-700">${W.naam||W.NAAM}</span>`),(W.verdronken||W.VERDRONKEN||W.jaar||W.JAAR)&&(ae+=`<br/><span class="text-xs text-gray-600">Verdronken: ${W.verdronken||W.VERDRONKEN||W.jaar||W.JAAR}</span>`),(W.gemeente||W.GEMEENTE)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.gemeente||W.GEMEENTE}</span>`),(W.bron||W.BRON)&&(ae+=`<br/><span class="text-xs text-gray-400">${W.bron||W.BRON}</span>`),te.push(ae)}}catch(se){console.warn("Verdronken Dorpen WMS query failed:",se)}continue}const Ne=me.getFeatureInfoUrl(Y,O,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Ne)try{const re=await(await fetch(Ne)).json();if(re.features&&re.features.length>0){const D=re.features[0].properties;if(Se==="AHN 0.5m"){let he='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const He=D.value_list??D.GRAY_INDEX??D.value??D.gray_index??D.dtm_05m??D.DTM_05M??D.hoogte??D.HOOGTE??D.elevation??D.ELEVATION;if(He!=null&&!isNaN(Number(He))){const ue=typeof He=="number"?He.toFixed(2):Number(He).toFixed(2);he+=`<br/><span class="text-sm text-blue-700">Hoogte: ${ue} m NAP</span>`,te.push(he)}else{let ue=!1;const W=["geometry","id","fid","gml_id","bbox"];for(const[ae,ot]of Object.entries(D))!W.includes(ae.toLowerCase())&&ot!==null&&ot!==""&&(he+=`<br/><span class="text-xs text-gray-600">${ae}: ${ot}</span>`,ue=!0);ue&&te.push(he)}continue}if(Se==="Geomorfologie"){let he='<strong class="text-green-800">Geomorfologie</strong>',He=!1;const ue=D.landform_subgroup_description,W=D.relief_klasse,ae=D.relief_subklasse,ot=D.genese_description,lt=D.active_process;if(ue&&(he+=`<br/><span class="text-sm text-green-700">${ue}</span>`,He=!0),W){const _t=ae&&ae!==W?`${W} (${ae})`:W;he+=`<br/><span class="text-xs text-gray-600">Relief: ${_t}</span>`,He=!0}if(ot&&(he+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${ot}</span>`,He=!0),lt&&lt!=="onbekend"&&(he+=`<br/><span class="text-xs text-gray-500">Actief proces: ${lt}</span>`,He=!0),!He){const _t=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[Dt,Nn]of Object.entries(D))!_t.includes(Dt.toLowerCase())&&Nn!==null&&Nn!==""&&!Dt.includes("validfrom")&&!Dt.includes("validto")&&(he+=`<br/><span class="text-xs text-gray-600">${Dt}: ${Nn}</span>`)}te.push(he);continue}let Ye=`<strong>${Se}</strong>`;if((D.first_soilname||D.soilname)&&(Ye+=`<br/><span class="text-sm text-amber-700">${D.first_soilname||D.soilname}</span>`),(D.soilcode||D.first_soilcode)&&(Ye+=`<br/><span class="text-xs text-gray-500">Code: ${D.soilcode||D.first_soilcode}</span>`),D.soilslope&&D.soilslope!=="Niet opgenomen"&&(Ye+=`<br/><span class="text-xs text-gray-500">Helling: ${D.soilslope}</span>`),!D.first_soilname&&!D.soilname){const he=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[He,ue]of Object.entries(D))!he.includes(He)&&ue&&ue!=="Niet opgenomen"&&(Ye+=`<br/><span class="text-xs text-gray-600">${He}: ${ue}</span>`)}te.push(Ye)}}catch(se){console.warn("WMS GetFeatureInfo failed:",se)}}return te},Ie=async Y=>{const O=[],te=jve(Y.coordinate),ne=[];n.forEachFeatureAtPixel(Y.pixel,Ne=>{ne.push(Ne)});for(const Ne of ne){const se=Ne.getProperties(),{geometry:re,...D}=se;if(D.vondst){const ue=D.vondst,W=`<strong>${ue.objectType}</strong>
            <div data-vondst-id="${ue.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${ue.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${ue.period}</span>
            ${ue.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${ue.depth} cm</span>`:""}
            ${ue.condition&&ue.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${ue.condition}</span>`:""}
            ${ue.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${ue.weight} gram</span>`:""}
            ${ue.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${ue.notes}</span>`:""}
            ${ue.photoUrl?`<br/><a href="${ue.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(ue.timestamp).toLocaleDateString("nl-NL")}</span>`;O.push(W),x(ue.id);continue}if(D.kwaliteitswaarde&&D.kwaliteitswaarde.includes("archeologische waarde")){const ue=le(D);O.push(ue);continue}let Ye=D.name||D.naam||D.title||D.NAAM||D.NAME||D.label||D.route_name||D.road_name;Ye||(D.leisure==="playground"?Ye="Speeltuin":D.leisure==="park"?Ye="Park":D.leisure==="swimming_area"||D.sport==="swimming"?Ye="Zwemplek":D.tourism==="museum"?Ye="Museum":D.amenity==="cafe"||D.amenity==="restaurant"?Ye=D.amenity==="cafe"?"Caf":"Restaurant":D.historic==="castle"?Ye="Kasteel":Ye="Info");let he=`<strong>${Ye}</strong>`;if(D.category&&(he+=`<br/><span class="text-sm text-gray-600">Categorie: ${D.category}</span>`),D.from_to&&D.from_to!==Ye&&(he+=`<br/><span class="text-sm text-gray-600">${D.from_to}</span>`),D.route&&D.route!==Ye&&(he+=`<br/><span class="text-sm text-gray-600">${D.route}</span>`),D.TOPONIEM&&(he+=`<br/><span class="text-sm font-semibold text-gray-800">${D.TOPONIEM}</span>`,D.PLAATS&&(he+=`<br/><span class="text-xs text-gray-500">${D.PLAATS}</span>`)),(D.AARD_VINDP||D.Aard_vindp)&&(he+=`<br/><span class="text-sm text-gray-700">Aard: ${D.AARD_VINDP||D.Aard_vindp}</span>`),D.BEGIN_PER&&D.EIND_PER&&(he+=`<br/><span class="text-sm text-purple-700">Periode: ${D.BEGIN_PER} - ${D.EIND_PER}</span>`),(D.AARD_OPM||D.Aard_opmer)&&(he+=`<br/><span class="text-xs text-gray-600 italic">${D.AARD_OPM||D.Aard_opmer}</span>`),D.Gemeente&&(he+=`<br/><span class="text-sm text-gray-600">Gemeente: ${D.Gemeente}</span>`),D.Bron&&(he+=`<br/><span class="text-xs text-gray-500">Bron: ${D.Bron}</span>`),D.Bron_besch&&(he+=`<br/><span class="text-xs text-gray-500">${D.Bron_besch}</span>`),D.Dat_st_z&&D.Dat_ei_z&&(he+=`<br/><span class="text-sm text-purple-700">Datering: ${D.Dat_st_z} - ${D.Dat_ei_z}</span>`),D.Begin&&D.Einde&&(he+=`<br/><span class="text-sm text-purple-700">Periode: ${D.Begin} - ${D.Einde}</span>`),D.Uiterwaard&&(he+=`<br/><span class="text-sm font-semibold">${D.Uiterwaard}</span>`),D.rivier&&(he+=`<br/><span class="text-sm text-blue-600">Rivier: ${D.rivier}</span>`),D.Beschrijvi&&(he+=`<br/><span class="text-sm text-gray-700">${D.Beschrijvi}</span>`),D.leisure&&D.name){const ue=D.leisure==="playground"?"Speeltuin":D.leisure==="park"?"Park":D.leisure==="swimming_area"?"Zwemplek":null;ue&&(he+=`<br/><span class="text-xs text-green-600">${ue}</span>`)}if((D.tourism==="museum"||D.museum)&&D.name&&(he+='<br/><span class="text-xs text-purple-600">Museum</span>'),(D.leisure==="swimming_area"||D.sport==="swimming")&&D.name&&(he+='<br/><span class="text-xs text-cyan-600">Zwemplek</span>'),D.osm_id&&D.address!==void 0&&(he+='<br/><span class="text-xs text-lime-600">Kringloopwinkel</span>',D.address&&(he+=`<br/><span class="text-xs text-gray-500">${D.address}</span>`),D.phone&&(he+=`<br/><span class="text-xs text-gray-600">${D.phone}</span>`)),(D.historic==="castle"||D.castle_type)&&(D.name&&(he+='<br/><span class="text-xs text-purple-600">Kasteel</span>'),D.castle_type&&(he+=`<br/><span class="text-xs text-gray-500">Type: ${D.castle_type}</span>`),D.start_date&&(he+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${D.start_date}</span>`),D.heritage&&(he+='<br/><span class="text-xs text-amber-600">Rijksmonument</span>')),D.bron==="Paleobiology Database"&&(D.taxonomie&&D.taxonomie!=="Onbekend"&&(he+=`<br/><span class="text-xs text-amber-700">${D.taxonomie}</span>`),D.periode&&D.periode!=="Onbekend"&&(he+=`<br/><span class="text-sm text-purple-700">${D.periode}</span>`),D.ouderdom&&D.ouderdom!=="Onbekend"&&(he+=`<br/><span class="text-xs text-gray-600">Ouderdom: ${D.ouderdom}</span>`),D.aantal_fossielen&&(he+=`<br/><span class="text-xs text-green-700">Aantal fossielen: ${D.aantal_fossielen}</span>`),D.formatie&&(he+=`<br/><span class="text-xs text-gray-500">Formatie: ${D.formatie}</span>`),D.lid&&(he+=`<br/><span class="text-xs text-gray-500">Lid: ${D.lid}</span>`),D.gesteente&&(he+=`<br/><span class="text-xs text-gray-500">Gesteente: ${D.gesteente}</span>`),D.milieu&&(he+=`<br/><span class="text-xs text-blue-600">Milieu: ${D.milieu}</span>`),D.vindplaats&&(he+=`<br/><span class="text-xs text-gray-500 italic">${D.vindplaats}</span>`)),(D.inventarisnummer||D.locatie_naam)&&(D.locatie_naam&&(he+=`<br/><span class="text-sm font-semibold">${D.locatie_naam}</span>`),D.inventarisnummer&&(he+=`<br/><span class="text-xs text-gray-500">CAI: ${D.inventarisnummer}</span>`),D.datering_tekst&&(he+=`<br/><span class="text-sm text-purple-700">${D.datering_tekst}</span>`)),(D.veensoort||D.dikte)&&(D.veensoort&&(he+=`<br/><span class="text-sm text-amber-700">${D.veensoort}</span>`),D.dikte&&(he+=`<br/><span class="text-xs text-gray-600">Dikte: ${D.dikte}</span>`)),D.nature&&D.debut){he+=`<br/><span class="text-sm text-purple-700">${D.nature}</span>`;const ue=D.debut===D.fin?D.debut:`${D.debut} - ${D.fin}`;ue&&(he+=`<br/><span class="text-sm text-gray-700">Periode: ${ue}</span>`),D.structure&&(he+=`<br/><span class="text-xs text-gray-600">${D.structure}</span>`),D.commune&&(he+=`<br/><span class="text-xs text-gray-500">${D.commune}</span>`),D.decouvert&&(he+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${D.decouvert}</span>`),D.numero&&(he+=`<br/><span class="text-xs text-gray-400">${D.numero}</span>`)}if((D.NATURE_OPE||D.CODE_OPERA)&&(D.TITRE&&(he+=`<br/><span class="text-sm font-semibold">${D.TITRE}</span>`),D.NATURE_OPE&&(he+=`<br/><span class="text-sm text-amber-700">${D.NATURE_OPE}</span>`),D.AUTEUR&&(he+=`<br/><span class="text-xs text-gray-600">Auteur: ${D.AUTEUR}</span>`),D.DATE&&(he+=`<br/><span class="text-xs text-gray-500">Datum: ${D.DATE}</span>`),D.COMMUNE&&(he+=`<br/><span class="text-xs text-gray-500">${D.COMMUNE}</span>`)),D.type_protection&&(D.n_site||D.t_site)){const ue=D.type_protection==="Classe"?"text-red-700":"text-amber-700";he+=`<br/><span class="text-sm ${ue}">${D.type_protection}</span>`,D.n_site&&(he+=`<br/><span class="text-sm font-semibold">${D.n_site}</span>`),D.t_site&&(he+=`<br/><span class="text-xs text-gray-600">${D.t_site}</span>`),D.c_site&&(he+=`<br/><span class="text-xs text-gray-500">Code: ${D.c_site}</span>`),D.d_creation&&(he+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${D.d_creation}</span>`)}if(D.type_protection&&D.cod_diren){const ue=D.type_protection==="Classe"?"text-red-700":"text-amber-700";if(he+=`<br/><span class="text-sm ${ue}">${D.type_protection}</span>`,D.proced&&(he+=`<br/><span class="text-xs text-gray-600">${D.proced}</span>`),D.d_proced&&(he+=`<br/><span class="text-xs text-gray-500">Date: ${D.d_proced}</span>`),D.comment){const W=String(D.comment).slice(0,150);he+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(D.comment).length>150?"...":""}</span>`}}if(D.type_protection&&D.nomsite){const ue=D.type_protection==="Classe"?"text-red-700":"text-amber-700";if(he+=`<br/><span class="text-sm ${ue}">${D.type_protection}</span>`,D.caractere&&(he+=`<br/><span class="text-xs text-gray-600">${D.caractere}</span>`),D.datedecis&&(he+=`<br/><span class="text-xs text-gray-500">Date: ${D.datedecis}</span>`),D.descriptio){const W=String(D.descriptio).slice(0,150);he+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(D.descriptio).length>150?"...":""}</span>`}}if(D.secteur&&D.style){if(he+=`<br/><span class="text-sm text-gray-700">${D.secteur}</span>`,D["sous-secteur"]&&(he+=`<br/><span class="text-xs text-gray-600">${D["sous-secteur"]}</span>`),D.description){const ue=String(D.description).slice(0,150);he+=`<br/><span class="text-xs text-gray-600 italic">${ue}${String(D.description).length>150?"...":""}</span>`}D.url&&(he+=`<br/><a href="${D.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(D.nature_operation||D.synthese){D.nature_operation&&(he+=`<br/><span class="text-sm text-red-700">${D.nature_operation}</span>`),D.responsable_operation&&(he+=`<br/><span class="text-xs text-gray-600">Responsable: ${D.responsable_operation}</span>`),D.date_operation&&(he+=`<br/><span class="text-xs text-gray-500">Datum: ${D.date_operation}</span>`);const ue=[];if(D.prehistoire==="Oui"&&ue.push("Prehistorie"),D.protohistoire==="Oui"&&ue.push("Protohistorie"),D.antiquite==="Oui"&&ue.push("Romeins"),D.moyen_age==="Oui"&&ue.push("Middeleeuwen"),D.temps_modernes==="Oui"&&ue.push("Moderne tijd"),ue.length>0&&(he+=`<br/><span class="text-sm text-purple-700">${ue.join(", ")}</span>`),D.adresse&&(he+=`<br/><span class="text-xs text-gray-500">${D.adresse}</span>`),D.synthese){const W=String(D.synthese).slice(0,200);he+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(D.synthese).length>200?"...":""}</span>`}}if(D.operator&&(he+=`<br/><span class="text-sm text-gray-600">${D.operator}</span>`),D.opening_hours&&(he+=`<br/><span class="text-xs text-green-600">Open: ${D.opening_hours}</span>`),D.website&&(he+=`<br/><a href="${D.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`),D.addr_street){const ue=[D.addr_street,D.addr_housenumber,D.addr_postcode].filter(Boolean).join(" ");he+=`<br/><span class="text-xs text-gray-500">${ue}</span>`}const He=D.description||D.omschrijving||D.descr||D.info;He&&He!==Ye&&(he+=`<br/><span class="text-sm text-gray-600">${He}</span>`),O.push(he)}const ee=n.getView().getResolution()||1,me=await Ae(Y.coordinate,ee);O.push(...me);const Se=await te;if(O.length===0&&Se!==null){const Ne=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${Se.toFixed(2)} m NAP</span>
          </div>`;O.push(Ne)}O.length>0&&Se!==null&&(O[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${Se.toFixed(2)} m NAP</span>
        </div>`),O.length>0&&(r(O),s(0),console.log(` KLIK OPGESLAGEN: [${Y.coordinate[0].toFixed(0)}, ${Y.coordinate[1].toFixed(0)}]`),u(Y.coordinate),d(!1),o(!0))};return n.on("click",Ie),()=>{n.un("click",Ie)}},[n]);const De=()=>{o(!1),n&&f&&(vI(n),d(!1))},be=(le,Ae)=>{Ae.offset.y>100&&De()};return w.jsx(Ks,{children:a&&w.jsxs(w.Fragment,{children:[w.jsx(nn.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:De}),w.jsxs(nn.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl",style:{fontSize:`${14*E/100}px`},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:be,children:[w.jsx("div",{className:"flex justify-center pt-2 pb-1",children:w.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),w.jsxs("div",{className:"flex items-center gap-2 px-3 pb-2 border-b border-gray-100",children:[k&&w.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[w.jsx("button",{onClick:U,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Vorige laag",children:w.jsx(Ise,{size:18})}),w.jsxs("span",{className:"text-gray-500 font-medium min-w-[32px] text-center",style:{fontSize:"0.857em"},children:[i+1,"/",t.length]}),w.jsx("button",{onClick:V,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Volgende laag",children:w.jsx(B9,{size:18})})]}),w.jsx("span",{className:"flex-1 font-semibold text-gray-800 truncate",style:{fontSize:"1em"},children:P||"Info"}),w.jsx("button",{onClick:De,className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0","aria-label":"Sluiten",children:w.jsx(Bl,{size:18})})]}),w.jsx("div",{className:"px-4 py-3 max-h-[45vh] overflow-y-auto",dangerouslySetInnerHTML:{__html:b}}),w.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2",children:[w.jsx(Y9,{size:14,className:"text-gray-400 flex-shrink-0"}),w.jsx("input",{type:"range",min:"80",max:"150",value:E,onChange:le=>T(parseInt(le.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),w.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[E,"%"]})]}),j&&v&&w.jsx("div",{className:"px-4 pb-4",children:w.jsxs("button",{onClick:()=>{e(v),o(!1),x(null)},className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[w.jsx(eC,{size:16}),w.jsx("span",{children:"Vondst verwijderen"})]})}),F&&l&&w.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:f?w.jsxs("button",{onClick:Me,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[w.jsx(sI,{size:16}),w.jsx("span",{children:"Hoogtekaart verbergen"})]}):w.jsx("button",{onClick:Te,disabled:g,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${g?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:g?w.jsxs(w.Fragment,{children:[w.jsx(QR,{size:16,className:"animate-spin"}),w.jsx("span",{children:"Laden..."})]}):w.jsxs(w.Fragment,{children:[w.jsx(sI,{size:16}),w.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}const zve="https://router.project-osrm.org/route/v1/driving";function $ve(n,e){const t={depart:"Start de route",arrive:"U bent aangekomen","turn-left":"Sla linksaf","turn-right":"Sla rechtsaf","turn-slight-left":"Houd links aan","turn-slight-right":"Houd rechts aan","turn-sharp-left":"Sla scherp linksaf","turn-sharp-right":"Sla scherp rechtsaf",uturn:"Keer om",straight:"Ga rechtdoor",merge:"Voeg in","on-ramp":"Neem de oprit","off-ramp":"Neem de afrit","fork-left":"Houd links aan bij de splitsing","fork-right":"Houd rechts aan bij de splitsing","end-of-road-left":"Sla linksaf aan het einde van de weg","end-of-road-right":"Sla rechtsaf aan het einde van de weg",roundabout:"Neem de rotonde",rotary:"Neem de rotonde",continue:"Blijf de weg volgen",notification:"Let op"},r=e?`${n}-${e}`:n;return t[r]||t[n]||"Volg de route"}function lO(n,e){const r=(e.lat-n.lat)*Math.PI/180,i=(e.lng-n.lng)*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}const xr=Ja()(Jh((n,e)=>({isNavigating:!1,destination:null,destinationName:null,routeCoordinates:null,distance:null,duration:null,loading:!1,error:null,steps:[],currentStepIndex:0,voiceEnabled:!0,lastSpokenStep:-1,lastSpokenTime:0,lastSpokenDistance:-1,startNavigation:async(t,r,i)=>{n(s=>{s.loading=!0,s.error=null});try{const s=`${zve}/${i.lng},${i.lat};${t.lng},${t.lat}?overview=full&geometries=geojson&steps=true`,a=await fetch(s);if(!a.ok)throw new Error("Route berekening mislukt");const o=await a.json();if(o.code==="Ok"&&o.routes&&o.routes.length>0){const l=o.routes[0],u=l.geometry.coordinates.map(d=>({lng:d[0],lat:d[1]})),f=[];if(l.legs&&l.legs[0]&&l.legs[0].steps)for(const d of l.legs[0].steps){const g=d.maneuver?.type||"continue",p=d.maneuver?.modifier;f.push({instruction:$ve(g,p),maneuver:p?`${g}-${p}`:g,distance:d.distance||0,duration:d.duration||0,location:{lng:d.maneuver?.location?.[0]||i.lng,lat:d.maneuver?.location?.[1]||i.lat}})}if(n(d=>{d.isNavigating=!0,d.destination=t,d.destinationName=r,d.routeCoordinates=u,d.distance=l.distance,d.duration=l.duration,d.steps=f,d.currentStepIndex=0,d.lastSpokenStep=-1,d.loading=!1}),f.length>0){const d=f[0],g=d.distance>1e3?`${(d.distance/1e3).toFixed(1)} kilometer`:`${Math.round(d.distance)} meter`;e().speakInstruction(`${d.instruction}. Over ${g}.`)}console.log(` Navigation started to ${r}`),console.log(` Distance: ${(l.distance/1e3).toFixed(1)} km`),console.log(` Duration: ${Math.round(l.duration/60)} min`),console.log(` Steps: ${f.length}`)}else throw new Error(o.message||"Geen route gevonden")}catch(s){console.error("Navigation error:",s),n(a=>{a.loading=!1,a.error=s.message||"Navigatie fout"})}},stopNavigation:()=>{"speechSynthesis"in window&&window.speechSynthesis.cancel(),n(t=>{t.isNavigating=!1,t.destination=null,t.destinationName=null,t.routeCoordinates=null,t.distance=null,t.duration=null,t.error=null,t.steps=[],t.currentStepIndex=0,t.lastSpokenStep=-1,t.lastSpokenTime=0,t.lastSpokenDistance=-1}),console.log(" Navigation stopped")},clearError:()=>{n(t=>{t.error=null})},updateCurrentStep:t=>{const{steps:r,currentStepIndex:i,lastSpokenStep:s,lastSpokenTime:a,lastSpokenDistance:o,voiceEnabled:l}=e();if(r.length===0)return;const u=Date.now(),f=5e3;let d=i;for(let g=i;g<r.length;g++){const p=r[g].location;lO(t,p)<30&&(d=Math.min(g+1,r.length-1))}if(d!==i&&(n(g=>{g.currentStepIndex=d}),l&&d!==s&&d<r.length&&u-a>f)){const g=r[d],p=g.distance>1e3?`${(g.distance/1e3).toFixed(1)} kilometer`:`${Math.round(g.distance)} meter`;e().speakInstruction(`${g.instruction}. Over ${p}.`),n(v=>{v.lastSpokenStep=d,v.lastSpokenTime=u,v.lastSpokenDistance=-1})}if(l&&i<r.length){const g=r[i],p=lO(t,g.location);if(u-a<f)return;const v=[200,100,50];for(const x of v)if(p<=x&&p>x-30&&(o===-1||Math.abs(o-x)>30)&&g.maneuver!=="depart"&&g.maneuver!=="arrive"){e().speakInstruction(`Over ${x} meter, ${g.instruction.toLowerCase()}.`),n(E=>{E.lastSpokenTime=u,E.lastSpokenDistance=x});break}}},setVoiceEnabled:t=>{n(r=>{r.voiceEnabled=t}),!t&&"speechSynthesis"in window&&window.speechSynthesis.cancel()},speakInstruction:t=>{if(e().voiceEnabled&&"speechSynthesis"in window){window.speechSynthesis.cancel();const r=new SpeechSynthesisUtterance(t);r.lang="nl-NL",r.rate=1,r.pitch=1,r.volume=1;const s=window.speechSynthesis.getVoices().find(a=>a.lang.startsWith("nl"));s&&(r.voice=s),window.speechSynthesis.speak(r),console.log(` Speaking: ${t}`)}}})));function Wve(){const n=Dr(T=>T.map),e=zn(T=>T.position),t=xr(T=>T.startNavigation),r=xr(T=>T.isNavigating),i=Ba(T=>T.openVondstForm),[s,a]=ce.useState(null),[o,l]=ce.useState(!1),[u,f]=ce.useState(!1),d=ce.useRef(null),g=ce.useRef(null);ce.useEffect(()=>{if(!n){console.log(" LongPressMenu: map not ready");return}const T=n.getViewport();if(!T){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",T);const M=600,k=15,L=U=>{if(console.log(" Touch start, touches:",U.touches.length),U.touches.length!==1)return;const V=U.touches[0];g.current={x:V.clientX,y:V.clientY},console.log(" Starting long press timer at:",g.current),d.current&&clearTimeout(d.current),d.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",g.current),!g.current)return;const Te=window.__olMap;if(!Te){console.log(" Map not available (global)");return}const Me=T.getBoundingClientRect(),De=[g.current.x-Me.left,g.current.y-Me.top],be=Te.getCoordinateFromPixel(De);if(be){const le=fn(be);U.preventDefault(),a({pixel:[g.current.x,g.current.y],coordinate:le}),l(!0),f(!1),setTimeout(()=>f(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",le)}},M)},z=U=>{if(!d.current||!g.current)return;const V=U.touches[0],Te=V.clientX-g.current.x,Me=V.clientY-g.current.y,De=Math.sqrt(Te*Te+Me*Me);De>k&&(console.log(" Touch moved too much, cancelling. Distance:",De),clearTimeout(d.current),d.current=null)},P=()=>{console.log(" Touch end, timer active:",!!d.current),d.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(d.current),d.current=null),g.current=null},C=U=>{o&&U.preventDefault()},b=U=>{U.button===0&&(console.log(" Mouse down"),g.current={x:U.clientX,y:U.clientY},d.current&&clearTimeout(d.current),d.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!g.current)return;const V=window.__olMap;if(console.log(" __olMap:",V),console.log(" __olMap constructor:",V?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof V?.getCoordinateAtPixel),!V){console.log(" Map not available (global)");return}const Te=T.getBoundingClientRect(),Me=[g.current.x-Te.left,g.current.y-Te.top];console.log(" Pixel:",Me);const De=V.getCoordinateFromPixel(Me);if(console.log(" Coordinate:",De),De){const be=fn(De);a({pixel:[g.current.x,g.current.y],coordinate:be}),l(!0),f(!1),setTimeout(()=>f(!0),300),console.log(" Long press (mouse) detected at:",be)}},M))},F=U=>{if(!d.current||!g.current)return;const V=U.clientX-g.current.x,Te=U.clientY-g.current.y;Math.sqrt(V*V+Te*Te)>k&&(console.log(" Mouse moved, cancelling"),clearTimeout(d.current),d.current=null)},j=()=>{console.log(" Mouse up"),d.current&&(clearTimeout(d.current),d.current=null),g.current=null};return T.addEventListener("touchstart",L,{passive:!1}),T.addEventListener("touchmove",z,{passive:!0}),T.addEventListener("touchend",P),T.addEventListener("touchcancel",P),T.addEventListener("contextmenu",C),T.addEventListener("mousedown",b),T.addEventListener("mousemove",F),T.addEventListener("mouseup",j),T.addEventListener("mouseleave",j),()=>{T.removeEventListener("touchstart",L),T.removeEventListener("touchmove",z),T.removeEventListener("touchend",P),T.removeEventListener("touchcancel",P),T.removeEventListener("contextmenu",C),T.removeEventListener("mousedown",b),T.removeEventListener("mousemove",F),T.removeEventListener("mouseup",j),T.removeEventListener("mouseleave",j),d.current&&clearTimeout(d.current)}},[n,o]);const p=()=>{u&&(l(!1),a(null),f(!1))},v=async()=>{if(!s||!e)return;const[T,M]=s.coordinate,k=`${M.toFixed(4)}, ${T.toFixed(4)}`;await t({lng:T,lat:M},k,{lng:e.lng,lat:e.lat}),l(!1),a(null),f(!1)},x=()=>{l(!1),a(null),f(!1)},E=()=>{if(!s)return;const[T,M]=s.coordinate;i({lat:M,lng:T}),l(!1),a(null),f(!1)},I=T=>{const[M,k]=T;return`${k.toFixed(5)}N, ${M.toFixed(5)}E`};return w.jsx(Ks,{children:o&&s&&w.jsxs(w.Fragment,{children:[w.jsx(nn.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:p}),w.jsxs(nn.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(s.pixel[0],window.innerWidth-220),top:Math.min(s.pixel[1],window.innerHeight-180)},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[w.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600",children:w.jsxs("div",{className:"flex items-center gap-2 text-white",children:[w.jsx(lu,{size:16}),w.jsx("span",{className:"text-xs font-mono",children:I(s.coordinate)})]})}),w.jsxs("div",{className:"bg-white",children:[w.jsxs("button",{onClick:E,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[w.jsx(Ux,{size:20,className:"text-blue-500"}),w.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),w.jsxs("button",{onClick:v,disabled:!e||r,className:`w-full px-4 py-3 flex items-center gap-3 transition-colors bg-white border-0 outline-none ${e&&!r?"hover:bg-blue-50 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[w.jsx(Uh,{size:20,className:e&&!r?"text-blue-500":"text-gray-300"}),w.jsx("span",{className:"font-medium",children:"Navigeer hierheen"})]}),!e&&w.jsx("div",{className:"px-4 py-2 text-xs text-amber-600 bg-amber-50",children:"GPS positie niet beschikbaar"}),r&&w.jsx("div",{className:"px-4 py-2 text-xs text-blue-600 bg-blue-50",children:"Navigatie al actief"})]}),w.jsx("div",{className:"bg-white",children:w.jsxs("button",{onClick:x,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[w.jsx(Bl,{size:18}),w.jsx("span",{children:"Annuleren"})]})})]})]})})}function Hve(){return w.jsx("div",{className:"fixed bottom-2 left-[60px] z-[800] h-6 flex items-center px-1.5 bg-white/70 backdrop-blur-sm rounded shadow-sm text-[10px] font-mono text-gray-500",children:"v2.8.7"})}const Kve={Compass:Lse,TreePalm:Nae,Mountain:sI,Waves:Bae,Search:H9,Target:Mae,Layers:x0,Grid:Xse},Yve={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},Xve={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},qve=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],Zve=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function Qve(){const n=Xr(p=>p.setLayerVisibility),e=zn(p=>p.stopTracking),{presetsPanelOpen:t,togglePresetsPanel:r,toggleSettingsPanel:i,closeAllPanels:s}=Ba(),{presets:a,applyPreset:o}=l8(),{presetPanelFontScale:l,setPresetPanelFontScale:u}=xa(),f=12*l/100,d=()=>{s(),qve.forEach(p=>n(p,!1)),Zve.forEach(p=>{n(p,p==="CartoDB (licht)")}),e(),console.log(" Reset: CartoDB (licht), alle lagen uit, GPS uit")},g=p=>{o(p),s()};return w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:i,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Instellingen",children:w.jsx(K9,{size:22,className:"text-gray-600"})}),w.jsx("button",{onClick:d,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Reset - CartoDB, alle lagen uit, GPS uit",children:w.jsx(aI,{size:22,className:"text-gray-600"})}),w.jsx("button",{onClick:r,className:"fixed bottom-[112px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Presets",children:t?w.jsx(U9,{size:22,className:"text-blue-600"}):w.jsx(x0,{size:22,className:"text-blue-600"})}),w.jsx(Ks,{children:t&&w.jsxs(w.Fragment,{children:[w.jsx(nn.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r}),w.jsxs(nn.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:"fixed bottom-[112px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden min-w-[160px] backdrop-blur-sm z-[801]",children:[w.jsxs("div",{className:"flex items-center justify-between gap-3 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[w.jsx("span",{className:"text-xs font-medium",children:"Presets"}),w.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:l,onChange:p=>u(parseInt(p.target.value)),className:"w-12 h-1 rounded-full cursor-pointer opacity-60 hover:opacity-100 transition-opacity",style:{WebkitAppearance:"none",appearance:"none",background:"rgba(255,255,255,0.4)"},title:`Tekstgrootte: ${l}%`})]}),w.jsx("div",{className:"p-2",style:{fontSize:`${f}px`},children:a.map(p=>{const v=Kve[p.icon]||x0,x=Yve[p.icon]||"text-blue-600",E=Xve[p.icon]||"hover:bg-blue-50";return w.jsxs("button",{onClick:()=>g(p.id),className:`w-full flex items-center gap-2 px-2 py-1.5 ${E} rounded text-left transition-colors border-0 outline-none bg-transparent`,children:[w.jsx(v,{size:14,className:x}),w.jsx("span",{className:"text-gray-700",style:{fontSize:"1em"},children:p.name}),!p.isBuiltIn&&w.jsx("span",{className:"ml-auto text-gray-400",style:{fontSize:"0.8em"},children:"custom"})]},p.id)})})]})]})})]})}function Jve(){const{infoPanelOpen:n,toggleInfoPanel:e}=Ba(),[t,r]=ce.useState("info"),i=[{id:"info",label:"Info",icon:w.jsx(HN,{size:14})},{id:"functies",label:"Functies",icon:w.jsx(ZR,{size:14})},{id:"handleiding",label:"Handleiding",icon:w.jsx(_se,{size:14})}];return w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:e,className:"fixed top-3 right-2.5 z-[800] w-8 h-8 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-lg shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Info & Help",children:w.jsx(HN,{size:16,className:"text-gray-600"})}),w.jsx(Ks,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(nn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),w.jsxs(nn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[w.jsx("span",{className:"font-medium",children:"DetectorApp NL"}),w.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:w.jsx(Bl,{size:18})})]}),w.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>w.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${t===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[t==="info"&&w.jsx(eEe,{}),t==="functies"&&w.jsx(tEe,{}),t==="handleiding"&&w.jsx(nEe,{}),w.jsx("section",{className:"pt-2 border-t border-gray-200",children:w.jsx("p",{className:"text-xs text-gray-400 text-center",children:"DetectorApp NL v2.8.7"})})]})]})]})})]})}function eEe(){return w.jsxs(w.Fragment,{children:[w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),w.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d kaartapplicatie voor metaaldetectie en archeologische verkenning in Nederland. Met 50+ kaartlagen, GPS tracking en vondstenbeheer."})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),w.jsxs("ul",{className:"space-y-2 text-gray-600",children:[w.jsxs("li",{children:[w.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"AMK, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN, IKAW, Bodemkaart, Geomorfologie"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Parken, etc."})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Itiner-E"})," (CC BY 4.0)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"CARTO"})," (CC BY 3.0)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"CartoDB basiskaart"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Map5.nl / Kadaster"}),w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Friesland Geoportal"}),w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"FAMKE Steentijd, Terpen"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data"})]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy"}),w.jsxs("div",{className:"text-gray-600 space-y-2",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Locatiegegevens:"})," Alleen voor navigatie, niet opgeslagen of gedeeld."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Geen tracking:"})," Geen analytics of gebruiksstatistieken."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Lokale opslag:"})," Alle data blijft op je apparaat."]})]})]})]})}function tEe(){return w.jsxs(w.Fragment,{children:[w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(JR,{size:16,className:"text-blue-600"}),"Kaartlagen (50+)"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsxs("li",{children:[w.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Romeinse wegen, Kastelen, IKAW"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Percelen:"})," Gewaspercelen, Kadastrale Grenzen"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(Uh,{size:16,className:"text-green-600"}),"GPS & Navigatie"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),w.jsx("li",{children:"Heading-up mode (kaart draait mee)"}),w.jsx("li",{children:"Route navigatie naar locatie"}),w.jsx("li",{children:"Adres zoeken"})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(lu,{size:16,className:"text-orange-600"}),"Vondsten"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsx("li",{children:"Toevoegen via GPS, long-press of handmatig"}),w.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht, foto-link"}),w.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),w.jsx("li",{children:"Dashboard met statistieken"}),w.jsx("li",{children:"Lokale opslag (geen account nodig)"})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(x0,{size:16,className:"text-purple-600"}),"Presets"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsx("li",{children:"Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse"}),w.jsx("li",{children:"Eigen presets aanmaken en bewerken"}),w.jsx("li",{children:"Snel wisselen tussen configuraties"})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(dae,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsx("li",{children:"Klik op kaart voor perceelinfo (Kadaster)"}),w.jsx("li",{children:"Hoogtekaart per perceel (AHN4)"}),w.jsx("li",{children:"Eigenaar lookup"})]})]})]})}function nEe(){return w.jsxs(w.Fragment,{children:[w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),w.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[w.jsxs("li",{children:["Tik op de ",w.jsx("strong",{children:"GPS knop"})," (rechtsonder) om je locatie te zien"]}),w.jsxs("li",{children:["Kies een ",w.jsx("strong",{children:"preset"})," (links, laagjes-icoon) of selecteer kaartlagen handmatig"]}),w.jsxs("li",{children:["Tik op de ",w.jsx("strong",{children:"Kaartlagen knop"})," voor alle beschikbare lagen"]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst toevoegen"}),w.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Methode 1 - GPS:"})," Tik op de oranje + knop rechtsonder. Je huidige locatie wordt automatisch ingevuld."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Methode 2 - Long-press:"}),' Houd je vinger lang op de kaart. Kies "Vondst toevoegen" in het menu.']}),w.jsxs("p",{children:[w.jsx("strong",{children:"Methode 3 - Handmatig:"}),' In het vondstenformulier, tik "Kies op kaart" en selecteer de exacte locatie.']})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Perceelinformatie"}),w.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[w.jsx("p",{children:"Tik op een willekeurige plek op de kaart om perceelinfo te zien. Je krijgt:"}),w.jsxs("ul",{className:"list-disc list-inside ml-2",children:[w.jsx("li",{children:"Kadastrale gegevens"}),w.jsx("li",{children:"Oppervlakte"}),w.jsx("li",{children:"Hoogtekaart van het perceel (AHN4)"})]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),w.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Toepassen:"})," Tik op het laagjes-icoon links en kies een preset."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Nieuw aanmaken:"}),' Zet de gewenste lagen aan, ga naar Instellingen  Presets  "Huidige lagen als preset opslaan".']}),w.jsxs("p",{children:[w.jsx("strong",{children:"Bewerken:"})," Zet de gewenste lagen aan, ga naar Instellingen  Presets  tik op het potlood-icoon naast de preset."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Verwijderen:"})," Ga naar Instellingen  Presets  tik op het prullenbak-icoon."]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Navigatie"}),w.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Heading-up:"})," Tik op het kompas-icoon om de kaart mee te laten draaien met je looprichting."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Route:"}),' Long-press op een locatie en kies "Navigeer hierheen".']}),w.jsxs("p",{children:[w.jsx("strong",{children:"Zoeken:"})," Gebruik de zoekbalk bovenaan om een adres te vinden."]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor in het veld"}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[w.jsxs("li",{children:["Gebruik ",w.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),w.jsxs("li",{children:["Combineer ",w.jsx("strong",{children:"AMK"})," met ",w.jsx("strong",{children:"Gewaspercelen"})," voor detectie"]}),w.jsxs("li",{children:["Check de ",w.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),w.jsxs("li",{children:["Gebruik ",w.jsx("strong",{children:"historische kaarten"})," om oude structuren te vinden"]}),w.jsxs("li",{children:["Zet ",w.jsx("strong",{children:"GPS tracking"})," aan om je route te volgen"]})]})]})]})}function rEe(){const n=Dr(a=>a.map),[e,t]=ce.useState(0),[r,i]=ce.useState(!1);ce.useEffect(()=>{if(!n)return;const a=n.getView(),o=()=>{const l=a.getRotation(),u=l*180/Math.PI;t(u),i(Math.abs(l)>.087)};return o(),a.on("change:rotation",o),()=>{a.un("change:rotation",o)}},[n]);const s=()=>{n&&n.getView().animate({rotation:0,duration:300})};return w.jsx(Ks,{children:r&&w.jsx(nn.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-12 right-2.5 z-[800] w-9 h-9 flex items-center justify-center bg-white/90 hover:bg-white rounded-full shadow-md border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:w.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[w.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),w.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),w.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const iEe=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"World Hillshade",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Kadastrale Grenzen",color:"purple",default:.7},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],sEe={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function aEe(){const[n,e]=ce.useState(!1),[t,r]=ce.useState(!1),i=Xr(f=>f.visible),s=Xr(f=>f.opacity),a=Xr(f=>f.setLayerOpacity),o=iEe.filter(f=>i[f.name]);if(o.length===0)return null;const l=t?o:o.slice(0,3),u=o.length>3;return w.jsxs("div",{className:"fixed bottom-[112px] right-2 z-[900]",children:[w.jsxs(nn.button,{onClick:()=>e(!n),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:n?"Sluit opacity sliders":"Open opacity sliders",children:[w.jsx(Aae,{size:22,strokeWidth:2,className:"text-gray-500"}),o.length>0&&w.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:o.length})]}),w.jsx(Ks,{children:n&&w.jsxs(nn.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-lg shadow-lg p-3 min-w-[220px] max-h-[60vh] overflow-y-auto",children:[w.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide",children:"Transparantie"}),w.jsx("div",{className:"space-y-3",children:l.map(f=>{const d=s[f.name]??f.default;return w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:f.name,children:f.name}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("input",{type:"range",min:"0",max:"100",value:d*100,onChange:g=>a(f.name,parseInt(g.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${sEe[f.color]}`}),w.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(d*100),"%"]})]})]},f.name)})}),u&&w.jsx("button",{onClick:()=>r(!t),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:t?w.jsxs(w.Fragment,{children:[w.jsx(U9,{size:14}),"Minder tonen"]}):w.jsxs(w.Fragment,{children:[w.jsx(G9,{size:14}),o.length-3," meer..."]})})]})})]})}function oEe(){const n=Dr(T=>T.map),e=zn(T=>T.position),t=xr(T=>T.startNavigation);xr(T=>T.isNavigating);const r=xr(T=>T.loading),[i,s]=ce.useState(""),[a,o]=ce.useState([]),[l,u]=ce.useState(!1),[f,d]=ce.useState(!1),g=ce.useRef(null),p=ce.useRef();ce.useEffect(()=>{if(p.current&&clearTimeout(p.current),i.length<2){o([]);return}return p.current=window.setTimeout(async()=>{d(!0);try{const M=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(i)}&rows=7`)).json();M.response?.docs&&o(M.response.docs)}catch(T){console.error("Search error:",T),o([])}finally{d(!1)}},300),()=>{p.current&&clearTimeout(p.current)}},[i]);const v=async T=>{try{const k=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(T)}`)).json();if(k.response?.docs?.[0]?.centroide_ll){const z=k.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(z)return{lng:parseFloat(z[1]),lat:parseFloat(z[2])}}}catch(M){console.error("Lookup error:",M)}return null},x=async T=>{if(!n)return;const M=await v(T.id);M&&n.getView().animate({center:Cl([M.lng,M.lat]),zoom:16,duration:1e3}),s(""),o([]),u(!1)},E=async(T,M)=>{if(M.stopPropagation(),!e){alert("GPS positie niet beschikbaar. Zet GPS aan.");return}const k=await v(T.id);k&&await t(k,T.weergavenaam,{lng:e.lng,lat:e.lat}),s(""),o([]),u(!1)},I=()=>{s(""),o([]),g.current?.focus()};return w.jsxs("div",{className:"search-box",children:[w.jsxs("div",{className:"search-input-wrapper",children:[w.jsx(H9,{size:18,className:"search-icon"}),w.jsx("input",{ref:g,type:"text",value:i,onChange:T=>{s(T.target.value),u(!0)},onFocus:()=>u(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),i&&w.jsx("button",{onClick:I,className:"search-clear",children:w.jsx(Bl,{size:16})})]}),l&&a.length>0&&w.jsx("ul",{className:"search-results",children:a.map(T=>w.jsxs("li",{className:"search-result-item",children:[w.jsx("div",{className:"search-result-content",onClick:()=>x(T),children:w.jsx("span",{className:"search-result-text",children:T.weergavenaam})}),w.jsx("button",{className:"search-navigate-btn",onClick:M=>E(T,M),disabled:r||!e,title:e?"Navigeer hierheen":"GPS niet actief",children:w.jsx(Uh,{size:16})})]},T.id))}),l&&f&&w.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function lEe(){const n=Dr(r=>r.map),e=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},t=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return w.jsxs("div",{className:"fixed top-2.5 left-2.5 z-[800] flex flex-col gap-1",children:[w.jsx(nn.button,{className:"w-8 h-8 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-lg shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:w.jsx(Ux,{size:16,className:"text-gray-600"})}),w.jsx(nn.button,{className:"w-8 h-8 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-lg shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:w.jsx(uae,{size:16,className:"text-gray-600"})})]})}const cEe="detector2024",II="detectorapp-auth";function uEe({children:n}){const[e,t]=ce.useState(!1),[r,i]=ce.useState(""),[s,a]=ce.useState(!1),[o,l]=ce.useState(""),[u,f]=ce.useState(!0);ce.useEffect(()=>{localStorage.getItem(II)==="authenticated"&&t(!0),f(!1)},[]);const d=g=>{g.preventDefault(),l(""),r===cEe?(localStorage.setItem(II,"authenticated"),t(!0)):(l("Onjuist wachtwoord"),i(""))};return u?w.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:w.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?w.jsx(w.Fragment,{children:n}):w.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:w.jsxs(nn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[w.jsxs("div",{className:"text-center mb-6",children:[w.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:w.jsx(iae,{size:32,className:"text-blue-600"})}),w.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),w.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),w.jsxs("form",{onSubmit:d,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:s?"text":"password",value:r,onChange:g=>i(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),w.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?w.jsx($9,{size:20}):w.jsx(W9,{size:20})})]})]}),o&&w.jsx(nn.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:o}),w.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),w.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function hEe(){localStorage.removeItem(II),window.location.reload()}function fEe({isOpen:n,onClose:e}){const t=B0(l=>l.vondsten),r={total:t.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:t.slice(-5).reverse()};let i=0,s=0;t.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const a=l=>Object.entries(l).sort((u,f)=>f[1]-u[1]),o=l=>Math.max(...Object.values(l),1);return w.jsx(Ks,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(nn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),w.jsxs(nn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(j9,{size:18}),w.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),w.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:w.jsx(Bl,{size:18})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:t.length===0?w.jsxs("div",{className:"text-center py-8 text-gray-500",children:[w.jsx(lu,{size:48,className:"mx-auto mb-3 opacity-30"}),w.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),w.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[w.jsx(kS,{icon:w.jsx(lu,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),w.jsx(kS,{icon:w.jsx(vae,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),w.jsx(kS,{icon:w.jsx(wae,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),w.jsx(hy,{title:"Per Type",data:a(r.byType),max:o(r.byType),color:"bg-orange-500"}),w.jsx(hy,{title:"Per Periode",data:a(r.byPeriod),max:o(r.byPeriod),color:"bg-amber-500"}),w.jsx(hy,{title:"Per Materiaal",data:a(r.byMaterial),max:o(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&w.jsx(hy,{title:"Per Conditie",data:a(r.byCondition),max:o(r.byCondition),color:"bg-green-500"}),w.jsxs("div",{children:[w.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[w.jsx(xse,{size:14}),"Recente Vondsten"]}),w.jsx("div",{className:"space-y-2",children:r.recent.map(l=>w.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[w.jsxs("div",{children:[w.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),w.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),w.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),w.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function kS({icon:n,value:e,label:t,color:r}){return w.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[w.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:n}),w.jsx("div",{className:"text-xl font-bold",children:e}),w.jsx("div",{className:"text-xs opacity-70",children:t})]})}function hy({title:n,data:e,max:t,color:r}){return e.length===0?null:w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:n}),w.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),w.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:w.jsx(nn.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/t*100}%`},transition:{duration:.5,ease:"easeOut"}})}),w.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function dEe(n){const{type:e,coordinates:t}=n,r=o=>Cl(o),i=o=>o.map(r),s=o=>o.map(i),a=o=>o.map(s);switch(e){case"Point":return new qa(r(t));case"LineString":return new Xa(i(t));case"Polygon":return new Za(s(t));case"MultiPoint":return new T0(i(t));case"MultiLineString":return new Qc(s(t));case"MultiPolygon":return new e0(a(t));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function gEe(n,e,t){const r=n.color,i=10,s=5,a=14;let o=i;if(t>50?o=s:t>10?o=Math.max(s,i-(t-10)/10):t<2&&(o=a),e==="Point"||e==="MultiPoint")return new Fn({image:new Pl({radius:o,fill:new mi({color:r}),stroke:new Pi({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new Fn({stroke:new Pi({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=mEe(r,.3);return new Fn({fill:new mi({color:l}),stroke:new Pi({color:r,width:2})})}return new Fn({image:new Pl({radius:o,fill:new mi({color:r}),stroke:new Pi({color:"#ffffff",width:2})})})}function mEe(n,e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(t){const r=parseInt(t[1],16),i=parseInt(t[2],16),s=parseInt(t[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return n}function pEe(){const n=Dr(r=>r.map),e=dE(r=>r.layers),t=ce.useRef(new Map);return ce.useEffect(()=>{if(!n)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new jp;i.features.features.forEach((o,l)=>{if(!o.geometry)return;const u=dEe(o.geometry);if(!u)return;const f=new ya({geometry:u,properties:o.properties,layerId:i.id,featureIndex:l});f.setStyle((d,g)=>gEe(i,o.geometry.type,g)),s.addFeature(f)});const a=t.current.get(i.id);if(a)a.setSource(s),a.setVisible(i.visible),a.setOpacity(i.opacity);else{const o=new zp({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});n.addLayer(o),t.current.set(i.id,o)}}),t.current.forEach((i,s)=>{r.has(s)||(n.removeLayer(i),t.current.delete(s))})},[n,e]),ce.useEffect(()=>()=>{n&&(t.current.forEach(r=>{n.removeLayer(r)}),t.current.clear())},[n]),null}Zt.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");Z7(Zt);function _Ee(n){if(!n||n.length<2)return"unknown";const[e,t]=n;return e>=7e3&&e<=3e5&&t>=289e3&&t<=629e3?"RD":Math.abs(e)<=180&&Math.abs(t)<=90?"WGS84":"unknown"}function yEe(n){const[e,t]=n;return Zt("EPSG:28992","EPSG:4326",[e,t])}function kj(n,e){return typeof n[0]=="number"?e(n):n.map(t=>kj(t,e))}function xEe(n){const e=n.coordinates;return!e||Array.isArray(e)&&e.length===0?null:n.type==="Point"?e:n.type==="LineString"||n.type==="MultiPoint"?e[0]:n.type==="Polygon"||n.type==="MultiLineString"?e[0]?.[0]:n.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function vEe(n){const e=[],t=[];try{const r=await n.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((u,f)=>({type:"Feature",geometry:u,properties:{id:f}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&t.push("Geen features gevonden in bestand");let a="unknown",o=!1;if(s.length>0&&s[0].geometry){const u=xEe(s[0].geometry);u&&(a=_Ee(u))}a==="RD"&&(t.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),o=!0,s=s.map(u=>{if(!u.geometry)return u;const f=kj(u.geometry.coordinates,yEe);return{...u,geometry:{...u.geometry,coordinates:f}}}),a="WGS84");const l=[...new Set(s.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:t,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:a,transformed:o}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function EEe(n){const e=[],t=[];try{const r=await n.text(),s=new vde({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in KML bestand");const l=new fC().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((f,d)=>{const g={...f.properties},p=g.name||g.Name||`Feature ${d+1}`,v=g.description||g.Description||"";return{type:"Feature",geometry:f.geometry,properties:{...g,name:p,description:v}}}),u=[...new Set(l.filter(f=>f.geometry).map(f=>f.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function wEe(n){const e=[],t=[];try{const r=await n.text(),s=new Lfe().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in GPX bestand");const l=new fC().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((f,d)=>{const g={...f.properties},p=g.name||g.Name||`Waypoint ${d+1}`,v=g.desc||g.description||"",x=g.time||null,E=g.ele||null;return{type:"Feature",geometry:f.geometry,properties:{...g,name:p,description:v,time:x,elevation:E}}}),u=[...new Set(l.filter(f=>f.geometry).map(f=>f.geometry.type))];return u.includes("LineString")&&t.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function zC(n){switch(n.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function SEe(){return".geojson,.json,.kml,.gpx"}function $C(){return"GeoJSON, KML (Google My Maps), GPX"}async function TEe(n){switch(zC(n.name)){case"geojson":return vEe(n);case"kml":return EEe(n);case"gpx":return wEe(n);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${n.name}. Ondersteunde formaten: ${$C()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function IEe(n){return n.size>10485760?{valid:!1,error:`Bestand te groot (${(n.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:zC(n.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${$C()}`}:n.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function AEe({isOpen:n,onClose:e}){const t=dE(C=>C.addLayer),r=ce.useRef(null),[i,s]=ce.useState("idle"),[a,o]=ce.useState(null),[l,u]=ce.useState(null),[f,d]=ce.useState(""),[g,p]=ce.useState(null),[v,x]=ce.useState(!1),E=ce.useCallback(()=>{s("idle"),o(null),u(null),d(""),p(null),r.current&&(r.current.value="")},[]),I=ce.useCallback(()=>{E(),e()},[E,e]),T=ce.useCallback(async C=>{const b=IEe(C);if(!b.valid){p(b.error||"Ongeldig bestand"),s("error");return}o(C),s("parsing"),p(null);const F=C.name.replace(/\.[^/.]+$/,"");d(F);try{const j=await TEe(C);if(!j.success){p(j.errors.join(`
`)),s("error");return}if(j.features.features.length===0){p("Geen features gevonden in het bestand"),s("error");return}u(j),s("preview")}catch(j){p(j instanceof Error?j.message:"Onbekende fout bij parsen"),s("error")}},[]),M=ce.useCallback(C=>{const b=C.target.files?.[0];b&&T(b)},[T]),k=ce.useCallback(C=>{C.preventDefault(),x(!0)},[]),L=ce.useCallback(C=>{C.preventDefault(),x(!1)},[]),z=ce.useCallback(C=>{C.preventDefault(),x(!1);const b=C.dataTransfer.files?.[0];b&&T(b)},[T]),P=ce.useCallback(()=>{if(!l||!f.trim())return;const C=a?zC(a.name):"geojson";t({name:f.trim(),type:C==="unsupported"?"geojson":C,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:a?.name||"unknown"}),I()},[l,f,a,t,I]);return w.jsx(Ks,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(nn.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:I}),w.jsxs(nn.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(X9,{size:18}),w.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),w.jsx("button",{onClick:I,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:w.jsx(Bl,{size:18})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${v?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:k,onDragLeave:L,onDrop:z,children:[w.jsx(ZR,{size:40,className:"mx-auto text-gray-400 mb-3"}),w.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),w.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),w.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),w.jsx("input",{ref:r,type:"file",accept:SEe(),onChange:M,className:"hidden"})]}),w.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[w.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),w.jsx("p",{children:$C()})]})]}),i==="parsing"&&w.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[w.jsx(QR,{size:40,className:"text-purple-500 animate-spin mb-4"}),w.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),w.jsx("p",{className:"text-gray-400 text-sm",children:a?.name})]}),i==="error"&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[w.jsx(z9,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),w.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:g})]})]}),w.jsx("button",{onClick:E,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[w.jsx(Mse,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),w.jsx("p",{className:"text-sm text-green-600",children:a?.name})]})]}),l.warnings.length>0&&w.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[w.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),w.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((C,b)=>w.jsx("li",{children:C},b))})]}),w.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-500",children:"Features:"}),w.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-500",children:"Types:"}),w.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),w.jsx("input",{type:"text",value:f,onChange:C=>d(C.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&w.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[w.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),w.jsx("button",{onClick:P,disabled:!f.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function REe({layer:n}){const{toggleVisibility:e,removeLayer:t}=dE(),[r,i]=ce.useState(!1),s=n.features.features.length,a=[...new Set(n.features.features.map(l=>l.geometry?.type).filter(Boolean))],o=()=>{r?t(n.id):(i(!0),setTimeout(()=>i(!1),3e3))};return w.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[w.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[w.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"flex items-center gap-1",children:w.jsx("span",{className:"text-sm text-gray-700 truncate",children:n.name})}),w.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[w.jsx(ZR,{size:10}),w.jsxs("span",{children:[s," ",s===1?"feature":"features"]}),a.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"mx-0.5",children:""}),w.jsx("span",{children:a.join(", ")})]})]})]})]}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{onClick:()=>e(n.id),className:`p-1 rounded transition-colors border-0 outline-none ${n.visible?"text-purple-500 hover:bg-purple-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?w.jsx(W9,{size:14}):w.jsx($9,{size:14})}),w.jsx("button",{onClick:o,className:`p-1 rounded transition-colors border-0 outline-none ${r?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:r?"Klik nogmaals om te verwijderen":"Verwijderen",children:w.jsx(eC,{size:14})})]})]})}const CEe=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"];function PEe(){const{settingsPanelOpen:n,toggleSettingsPanel:e,vondstDashboardOpen:t,toggleVondstDashboard:r}=Ba(),i=xa(),{presets:s,createPreset:a,deletePreset:o,updatePreset:l}=l8(),u=Xr(L=>L.visible),f=B0(L=>L.vondsten),d=dE(L=>L.layers),[g,p]=ce.useState(""),[v,x]=ce.useState(!1),[E,I]=ce.useState(!1),T=14*i.fontScale/100,M=()=>{g.trim()&&(a(g.trim(),"Layers"),p(""),x(!1))},k=(L,z)=>{const P=Object.entries(u).filter(([C,b])=>b&&CEe.includes(C)).map(([C])=>C);if(P.length===0){alert("Zet eerst minimaal n kaartlaag aan voordat je de preset bijwerkt.");return}l(L,{layers:P}),console.log(` Preset "${z}" bijgewerkt met ${P.length} lagen`)};return w.jsxs(w.Fragment,{children:[w.jsx(Ks,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(nn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),w.jsxs(nn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(K9,{size:18}),w.jsx("span",{className:"font-medium",children:"Instellingen"})]}),w.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:w.jsx(Bl,{size:18})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${T}px`},children:[w.jsxs(Hu,{title:"Kaart",icon:w.jsx(JR,{size:16}),children:[w.jsx(MEe,{label:"Standaard achtergrond",children:w.jsxs("select",{value:i.defaultBackground,onChange:L=>i.setDefaultBackground(L.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[w.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),w.jsx("option",{value:"OpenStreetMap",children:"OSM"}),w.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),w.jsx(sd,{label:"Schaalbalk tonen",checked:i.showScaleBar,onChange:i.setShowScaleBar})]}),w.jsxs(Hu,{title:"GPS",icon:w.jsx(Uh,{size:16}),children:[w.jsx(sd,{label:"GPS aan bij start",checked:i.gpsAutoStart,onChange:i.setGpsAutoStart}),w.jsx(sd,{label:"Kaart draait mee (heading up)",checked:i.headingUpMode,onChange:i.setHeadingUpMode}),w.jsx(sd,{label:"Nauwkeurigheidscirkel",checked:i.showAccuracyCircle,onChange:i.setShowAccuracyCircle})]}),w.jsx(Hu,{title:"Feedback",icon:w.jsx(Cae,{size:16}),children:w.jsx(sd,{label:"Trillen bij acties",checked:i.hapticFeedback,onChange:i.setHapticFeedback})}),w.jsxs(Hu,{title:"Weergave",icon:w.jsx(Y9,{size:16}),children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:"Tekstgrootte"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:i.fontScale,onChange:L=>i.setFontScale(parseInt(L.target.value)),className:"w-24 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),w.jsxs("span",{className:"text-gray-400 w-10 text-right",style:{fontSize:"0.75em"},children:[i.fontScale,"%"]})]})]}),w.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.75em"},children:"Past de tekstgrootte aan voor menu's en knoppen."})]}),w.jsxs(Hu,{title:"Vondsten",icon:w.jsx(lu,{size:16}),children:[w.jsx(sd,{label:"Vondsten knop tonen",checked:i.showVondstButton,onChange:i.setShowVondstButton}),w.jsx("p",{className:"text-gray-500 mt-1 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),w.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[w.jsx(j9,{size:14}),w.jsxs("span",{children:["Dashboard (",f.length," vondsten)"]})]}),w.jsx(bEe,{})]}),w.jsx(Hu,{title:"Eigen Lagen",icon:w.jsx(X9,{size:16}),children:w.jsxs("div",{className:"space-y-1",children:[d.length===0?w.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen gemporteerd."}):d.map(L=>w.jsx(REe,{layer:L},L.id)),w.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-purple-600 hover:bg-purple-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[w.jsx(Ux,{size:14}),w.jsx("span",{children:"Laag importeren"})]}),w.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),w.jsx(Hu,{title:"Presets",icon:w.jsx(x0,{size:16}),children:w.jsxs("div",{className:"space-y-2",children:[s.map(L=>w.jsxs("div",{className:"flex items-center justify-between py-1",children:[w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[L.name,L.isBuiltIn&&w.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),w.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",L.layers.length," lagen)"]})]}),!L.isBuiltIn&&w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{onClick:()=>k(L.id,L.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Bijwerken met huidige lagen",children:w.jsx(pae,{size:14})}),w.jsx("button",{onClick:()=>o(L.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:w.jsx(eC,{size:14})})]})]},L.id)),v?w.jsxs("div",{className:"flex gap-2 mt-2",children:[w.jsx("input",{type:"text",value:g,onChange:L=>p(L.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:L=>L.key==="Enter"&&M(),autoFocus:!0}),w.jsx("button",{onClick:M,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),w.jsx("button",{onClick:()=>x(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):w.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[w.jsx(Ux,{size:14}),w.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),w.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${T}px`},children:[w.jsxs("button",{onClick:hEe,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[w.jsx(aae,{size:16}),w.jsx("span",{children:"Uitloggen"})]}),w.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),w.jsx(fEe,{isOpen:t,onClose:r}),w.jsx(AEe,{isOpen:E,onClose:()=>I(!1)})]})}function Hu({title:n,icon:e,children:t}){return w.jsxs("section",{children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[w.jsx("span",{className:"text-blue-600",children:e}),w.jsx("span",{className:"font-medium text-gray-800",style:{fontSize:"1em"},children:n})]}),w.jsx("div",{className:"space-y-2",children:t})]})}function MEe({label:n,children:e}){return w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),e]})}function sd({label:n,checked:e,onChange:t}){return w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),w.jsx("button",{onClick:()=>t(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:w.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function bEe(){const[n,e]=ce.useState(!1),{vondsten:t,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:a,exportAsKML:o}=B0(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:a,desc:"GPS apparaten"},{label:"KML",action:o,desc:"Google Earth"}],u=f=>{f(),e(!1)};return t.length===0?w.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[w.jsx(WN,{size:14}),w.jsx("span",{children:"Geen vondsten om te exporteren"})]}):w.jsxs("div",{className:"relative mt-2",children:[w.jsxs("button",{onClick:()=>e(!n),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(WN,{size:14}),w.jsxs("span",{children:["Exporteer vondsten (",t.length,")"]})]}),w.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),n&&w.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((f,d)=>w.jsxs("button",{onClick:()=>u(f.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[w.jsx("span",{className:"text-gray-700",children:f.label}),w.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:f.desc})]},d))})]})}function kEe(n,e){const r=(e.lat-n.lat)*Math.PI/180,i=(e.lng-n.lng)*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function NEe(n,e){let t=1/0,r=0;for(let i=0;i<e.length;i++){const s=kEe(n,e[i]);s<t&&(t=s,r=i)}return r}function LEe(){const n=Dr(o=>o.map),e=xr(o=>o.routeCoordinates),t=xr(o=>o.destination),r=xr(o=>o.isNavigating),i=zn(o=>o.position),s=ce.useRef(null),a=ce.useRef(0);return ce.useEffect(()=>{if(!n)return;const o=new jp;return s.current=new zp({source:o,zIndex:500}),n.addLayer(s.current),()=>{s.current&&n&&n.removeLayer(s.current)}},[n]),ce.useEffect(()=>{r||(a.current=0)},[r]),ce.useEffect(()=>{if(!s.current)return;const o=s.current.getSource();if(!o||(o.clear(),!r||!e||e.length===0))return;let l=0;if(i&&e.length>2){const g={lng:i.lng,lat:i.lat},p=NEe(g,e);p>a.current&&(a.current=p),l=a.current,l>e.length-2&&(l=e.length-2)}const f=e.slice(l).map(g=>Cl([g.lng,g.lat])),d=new ya({geometry:new Xa(f)});if(d.setStyle([new Fn({stroke:new Pi({color:"white",width:8,lineCap:"round",lineJoin:"round"})}),new Fn({stroke:new Pi({color:"#4285F4",width:5,lineCap:"round",lineJoin:"round"})})]),o.addFeature(d),t){const g=new ya({geometry:new qa(Cl([t.lng,t.lat]))});g.setStyle(new Fn({image:new Pl({radius:12,fill:new mi({color:"#EA4335"}),stroke:new Pi({color:"white",width:3})})})),o.addFeature(g)}if(n&&l===0){const g=o.getExtent();n.getView().fit(g,{padding:[80,80,80,80],duration:500})}},[n,r,e,t,i]),null}function OEe(n){const e={size:24,className:"text-white"};return n.includes("left")?n.includes("sharp")?w.jsx(Dse,{...e}):n.includes("slight")?w.jsx(hse,{...e}):w.jsx(ose,{...e}):n.includes("right")?n.includes("sharp")?w.jsx(Vse,{...e}):n.includes("slight")?w.jsx(dse,{...e}):w.jsx(cse,{...e}):n.includes("uturn")?w.jsx(aI,{...e}):n.includes("arrive")?w.jsx(kse,{...e}):n.includes("roundabout")||n.includes("rotary")?w.jsx(aI,{...e}):w.jsx(mse,{...e})}function DEe(){const n=xr(g=>g.isNavigating),e=xr(g=>g.destinationName),t=xr(g=>g.distance),r=xr(g=>g.duration),i=xr(g=>g.steps),s=xr(g=>g.currentStepIndex),a=xr(g=>g.voiceEnabled),o=xr(g=>g.setVoiceEnabled),l=xr(g=>g.stopNavigation),u=i[s],f=g=>g?g<1e3?`${Math.round(g)} m`:`${(g/1e3).toFixed(1)} km`:"--",d=g=>{if(!g)return"--";if(g<60)return`${Math.round(g)} sec`;const p=Math.round(g/60);if(p<60)return`${p} min`;const v=Math.floor(p/60),x=p%60;return`${v}u ${x}m`};return w.jsx(Ks,{children:n&&w.jsxs(nn.div,{className:"fixed top-16 left-2 right-2 z-[1100] bg-white rounded-xl shadow-md overflow-hidden",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[u&&w.jsxs("div",{className:"bg-blue-600 px-4 py-3 flex items-center gap-3",children:[w.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center flex-shrink-0",children:OEe(u.maneuver)}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-white font-bold text-lg truncate",children:u.instruction}),w.jsxs("div",{className:"text-blue-200 text-sm",children:["Over ",f(u.distance)]})]}),w.jsx("button",{onClick:()=>o(!a),className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 transition-colors ${a?"bg-blue-700 text-white":"bg-blue-800 text-blue-400"}`,title:a?"Geluid uit":"Geluid aan",children:a?w.jsx(Fae,{size:20}):w.jsx(jae,{size:20})})]}),w.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0",children:w.jsx(Uh,{size:20,className:"text-gray-600"})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[w.jsx(lu,{size:12}),w.jsx("span",{children:"Bestemming"})]}),w.jsx("div",{className:"font-medium text-gray-900 truncate text-sm",children:e||"Bestemming"})]}),w.jsxs("div",{className:"text-right flex-shrink-0",children:[w.jsx("div",{className:"text-lg font-bold text-blue-600",children:f(t)}),w.jsx("div",{className:"text-xs text-gray-500",children:d(r)})]}),w.jsx("button",{onClick:l,className:"w-10 h-10 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center flex-shrink-0 transition-colors",title:"Stop navigatie",children:w.jsx(Bl,{size:20,className:"text-white"})})]}),i.length>1&&w.jsxs("div",{className:"px-4 pb-2",children:[w.jsx("div",{className:"flex gap-1",children:i.map((g,p)=>w.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${p<s?"bg-green-500":p===s?"bg-blue-500":"bg-gray-200"}`},p))}),w.jsxs("div",{className:"text-xs text-gray-400 mt-1 text-center",children:["Stap ",s+1," van ",i.length]})]})]})})}function NS({value:n,onChange:e,options:t,label:r}){const[i,s]=ce.useState(!1),a=ce.useRef(null);return ce.useEffect(()=>{if(!i)return;const o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[i]),w.jsxs("div",{ref:a,className:"relative",children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:r}),w.jsxs("button",{type:"button",onClick:()=>s(!i),className:"w-full flex items-center justify-between px-3 py-1.5 bg-gray-50 rounded text-sm text-gray-600 hover:bg-blue-50 transition-colors text-left",style:{border:"none",outline:"none"},children:[w.jsx("span",{children:n}),w.jsx(G9,{size:14,className:`text-gray-400 transition-transform ${i?"rotate-180":""}`})]}),i&&w.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white rounded shadow-lg max-h-48 overflow-y-auto",children:t.map(o=>w.jsx("button",{type:"button",onClick:()=>{e(o),s(!1)},className:`w-full px-3 py-1.5 text-left text-sm transition-colors ${o===n?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-blue-50"}`,style:{border:"none",outline:"none"},children:o},o))})]})}function FEe({onClose:n,initialLocation:e}){const t=QD(Y=>Y.user),r=zn(Y=>Y.position),i=Dr(Y=>Y.map),s=Eee(Y=>Y.addVondst),a=B0(Y=>Y.addVondst),o=xa(Y=>Y.vondstenLocalOnly),[l,u]=ce.useState(""),[f,d]=ce.useState("Munt"),[g,p]=ce.useState("Brons"),[v,x]=ce.useState("Romeins (12 v.Chr.-450 n.Chr.)"),[E,I]=ce.useState(!0),[T,M]=ce.useState(!1),[k,L]=ce.useState(""),[z,P]=ce.useState(void 0),[C,b]=ce.useState(void 0),[F,j]=ce.useState(e?"map-pick":r?"gps":"map-center"),[U,V]=ce.useState(e||null),[Te,Me]=ce.useState(!1),De=()=>{if(F==="gps"&&r)return{lat:r.lat,lng:r.lng};if(F==="map-pick"&&U)return U;if(i){const Y=i.getView().getCenter();if(Y){const[O,te]=fn(Y);return{lat:te,lng:O}}}return null},be=De();ce.useEffect(()=>{if(!Te||!i)return;const Y=O=>{const[te,ne]=fn(O.coordinate);V({lat:ne,lng:te}),j("map-pick"),Me(!1)};return i.on("click",Y),()=>i.un("click",Y)},[Te,i]);const le=()=>{Me(!0)},Ae=()=>{r&&(j("gps"),V(null))},Ie=async Y=>{Y.preventDefault();const O=De();if(!O){alert("Geen locatie beschikbaar");return}if(!o&&!t){alert("Log in om vondsten in de cloud op te slaan");return}M(!0);try{o?(a({location:{lat:O.lat,lng:O.lng},notes:l,objectType:f,material:g,period:v,photoUrl:k||void 0,weight:z,length:C}),alert("Vondst lokaal opgeslagen! ")):(await s({userId:t.uid,location:{lat:O.lat,lng:O.lng,accuracy:F==="gps"?5:50},timestamp:new Date().toISOString(),photos:[],notes:l,objectType:f,material:g,period:v,tags:[v.toLowerCase(),f.toLowerCase()],private:E}),alert("Vondst opgeslagen in cloud! ")),n()}catch(te){alert("Fout bij opslaan: "+te.message)}finally{M(!1)}};return Te?w.jsx(nn.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:w.jsxs("div",{className:"bg-orange-500 text-white rounded-lg shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx($N,{size:24,className:"animate-pulse"}),w.jsxs("div",{children:[w.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),w.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),w.jsx("button",{onClick:()=>Me(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"Annuleren"})]})}):w.jsx(nn.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w.jsxs(nn.div,{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[w.jsxs("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 flex justify-between items-center",children:[w.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),w.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:""})]}),w.jsxs("form",{onSubmit:Ie,className:"p-4 space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Locatie"}),be&&w.jsxs("div",{className:`p-2 rounded text-sm flex items-center gap-2 ${F==="gps"?"bg-green-50 text-green-800":"bg-orange-50 text-orange-800"}`,children:[F==="gps"?w.jsx(Uh,{size:16,className:"text-green-600"}):w.jsx(lu,{size:16,className:"text-orange-600"}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"font-medium",children:[F==="gps"&&"GPS locatie",F==="map-center"&&"Kaart centrum",F==="map-pick"&&"Gekozen locatie"]}),w.jsxs("div",{className:"text-xs opacity-75",children:[be.lat.toFixed(6),", ",be.lng.toFixed(6)]})]})]}),w.jsxs("div",{className:"flex gap-2 mt-2",children:[r&&F!=="gps"&&w.jsxs("button",{type:"button",onClick:Ae,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors border-0 outline-none",children:[w.jsx(Uh,{size:14}),w.jsx("span",{children:"GPS gebruiken"})]}),w.jsxs("button",{type:"button",onClick:le,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs text-blue-700 rounded hover:bg-blue-100 transition-colors bg-blue-50 outline-none border-0",children:[w.jsx($N,{size:14}),w.jsx("span",{children:"Kies op kaart"})]})]})]}),w.jsx(NS,{label:"Object type",value:f,onChange:Y=>d(Y),options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"]}),w.jsx(NS,{label:"Materiaal",value:g,onChange:Y=>p(Y),options:["Brons","IJzer","Zilver","Goud","Keramiek","Steen","Glas","Onbekend"]}),w.jsx(NS,{label:"Periode",value:v,onChange:Y=>x(Y),options:["Romeins (12 v.Chr.-450 n.Chr.)","IJzertijd","Middeleeuws (450-1500)","Nieuwetijd (1500-1800)","Modern (1800+)","Onbekend"]}),w.jsxs("div",{className:"flex gap-3",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Gewicht (g)"}),w.jsx("input",{type:"number",value:z??"",onChange:Y=>P(Y.target.value?parseFloat(Y.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1",placeholder:"12.5"})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Lengte (mm)"}),w.jsx("input",{type:"number",value:C??"",onChange:Y=>b(Y.target.value?parseFloat(Y.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1",placeholder:"25"})]})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm text-gray-600 mb-1 flex items-center gap-1",children:[w.jsx(Jse,{size:12,className:"text-blue-500"}),"Foto link"]}),w.jsx("input",{type:"url",value:k,onChange:Y=>L(Y.target.value),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},placeholder:"https://photos.google.com/..."})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Notities"}),w.jsx("textarea",{value:l,onChange:Y=>u(Y.target.value),className:"w-full rounded px-3 py-1.5 h-16 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors resize-none",style:{border:"none"},placeholder:"Beschrijving..."})]}),w.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 rounded px-3 py-2",children:"Vondsten worden lokaal opgeslagen op dit apparaat."}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-1.5 rounded hover:bg-blue-50 transition-colors bg-gray-100 outline-none text-sm text-gray-600",style:{border:"none"},children:"Annuleren"}),w.jsx("button",{type:"submit",disabled:T||!be||Te,className:"flex-1 px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 outline-none text-sm",style:{border:"none"},children:T?"Opslaan...":"Opslaan"})]})]})]})})}function VEe(){const{user:n,setUser:e,setLoading:t}=QD();return ce.useEffect(()=>{const s=bQ(eS,a=>{e(a),t(!1)});return()=>s()},[e,t]),{user:n,loginAnonymous:async()=>{try{await IQ(eS)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await kQ(eS)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!n}}function jEe(){const{isAuthenticated:n,loginAnonymous:e}=VEe(),t=xa(u=>u.vondstenLocalOnly),r=xa(u=>u.showVondstButton),i=Ba(u=>u.vondstFormOpen),s=Ba(u=>u.vondstFormLocation),a=Ba(u=>u.openVondstForm),o=Ba(u=>u.closeVondstForm);if(!r)return null;const l=()=>{if(t){a();return}if(!n){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}a()};return w.jsxs(w.Fragment,{children:[w.jsx(nn.button,{className:"fixed bottom-2 right-[60px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:w.jsx(lu,{size:22,strokeWidth:2})}),w.jsx(Ks,{children:i&&w.jsx(FEe,{onClose:o,initialLocation:s||void 0})})]})}const cO={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},GEe={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function BEe(){const n=Dr(i=>i.map),e=B0(i=>i.vondsten),t=Xr(i=>i.visible["Mijn Vondsten"]),r=ce.useRef(null);return ce.useEffect(()=>{if(!n)return;const i=new jp;return e.forEach(s=>{const a=new ya({geometry:new qa(Cl([s.location.lng,s.location.lat])),vondst:s}),o=cO[s.objectType]||cO.Anders,l=GEe[s.objectType]||"?";a.setStyle((u,f)=>{let v=12;f>50?v=6:f>10?v=Math.max(6,12-(f-10)/10):f<2&&(v=14);const x=Math.max(8,Math.min(12,v-2));return new Fn({image:new Pl({radius:v,fill:new mi({color:o}),stroke:new Pi({color:"#ffffff",width:v>8?2:1})}),text:v>=8?new I0({text:l,font:`bold ${x}px sans-serif`,fill:new mi({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(a)}),r.current?r.current.setSource(i):(r.current=new zp({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(t),n.addLayer(r.current)),()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null)}},[n,e]),ce.useEffect(()=>{r.current&&r.current.setVisible(t)},[t]),null}function UEe(){const n=zn(r=>r.tracking),e=zn(r=>r.headingSource),t=zn(r=>r.updateHeading);ce.useEffect(()=>{if(!n||e!=="compass")return;let r=0;const i=100,s=l=>{const u=Date.now();u-r<i||(r=u,l.alpha!==null&&t(360-l.alpha,"compass"))},a=l=>{const u=Date.now();u-r<i||(r=u,l.alpha!==null&&t(360-l.alpha,"compass"))},o=l=>{const u=Date.now();u-r<i||(r=u,l.webkitCompassHeading!==void 0&&t(l.webkitCompassHeading,"compass"))};return window.addEventListener("deviceorientationabsolute",a),window.addEventListener("deviceorientation",s),window.addEventListener("deviceorientation",o),()=>{window.removeEventListener("deviceorientationabsolute",a),window.removeEventListener("deviceorientation",s),window.removeEventListener("deviceorientation",o)}},[n,e,t])}const zEe=n=>n<.5?2*n*n:-1+(4-2*n)*n;function $Ee(){const n=Dr(o=>o.map),e=Dr(o=>o.rotationEnabled),t=Dr(o=>o.setRotation),r=zn(o=>o.smoothHeading),i=zn(o=>o.tracking),s=xa(o=>o.headingUpMode),a=ce.useRef(null);ce.useEffect(()=>{if(!s){n&&n.getView().getRotation()!==0&&(n.getView().animate({rotation:0,duration:500}),t(0),a.current=null);return}if(!n||!i||!e||r===null){n&&!i&&(n.getView().animate({rotation:0,duration:500}),t(0),a.current=null);return}const o=-(r*Math.PI)/180,l=a.current??n.getView().getRotation();let u=o-l;for(;u>Math.PI;)u-=2*Math.PI;for(;u<-Math.PI;)u+=2*Math.PI;Math.abs(u)<.087||(n.getView().animate({rotation:o,duration:250,easing:zEe}),a.current=o,t(r))},[n,i,e,r,t,s])}function WEe(){const n=Dr(f=>f.map),e=zn(f=>f.position),t=zn(f=>f.tracking),r=zn(f=>f.navigationMode),i=zn(f=>f.toggleMode),s=xr(f=>f.isNavigating),a=xr(f=>f.updateCurrentStep),o=xr(f=>f.destination),l=ce.useRef(!1),u=ce.useRef(0);return ce.useEffect(()=>{s&&!l.current?(console.log(" Navigation started - activating drive mode"),r==="free"&&i(),l.current=!0):!s&&l.current&&(console.log(" Navigation stopped - deactivating drive mode"),r==="drive"&&i(),l.current=!1)},[s,r,i]),ce.useEffect(()=>{!s||!e||a({lng:e.lng,lat:e.lat})},[s,e,a]),ce.useEffect(()=>{if(!n||!e||!s||!t)return;const f=Date.now();if(f-u.current<500)return;u.current=f;const d=Cl([e.lng,e.lat]);n.getView().animate({center:d,duration:300})},[n,e,s,t]),ce.useEffect(()=>{if(!n||!s)return;(n.getView().getZoom()||15)<14&&n.getView().animate({zoom:15,duration:500})},[n,s,e]),{isNavigating:s,destination:o}}function HEe(){const n=Dr(i=>i.map),e=Xr(i=>i.setLayerOpacity),t=Xr(i=>i.visible),r=ce.useRef(null);ce.useEffect(()=>{if(!n)return;const i=()=>{const s=n.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const a=t["AHN 0.5m"],o=t["AHN4 Multi-Hillshade NL"];!a&&!o||(a&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),o&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return n.on("moveend",i),i(),()=>{n.un("moveend",i)}},[n,t,e])}function KEe(){UEe(),$Ee(),WEe(),HEe();const e=14*xa(t=>t.fontScale)/100;return w.jsx(uEe,{children:w.jsxs("div",{style:{fontSize:`${e}px`},children:[w.jsx(Cee,{}),w.jsx(Wae,{}),w.jsx(LEe,{}),w.jsx(BEe,{}),w.jsx(pEe,{}),w.jsx(Uve,{}),w.jsx(Wve,{}),w.jsx(oEe,{}),w.jsx(DEe,{}),w.jsx($ae,{}),w.jsx(lEe,{}),w.jsx(Kae,{}),w.jsx(Yae,{}),w.jsx(aEe,{}),w.jsx(Hve,{}),w.jsx(Qve,{}),w.jsx(jEe,{}),w.jsx(Jve,{}),w.jsx(rEe,{}),w.jsx(PEe,{})]})})}const YEe="2.8.7";console.log(`%c DetectorApp v${YEe}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");YG.createRoot(document.getElementById("root")).render(w.jsx(KEe,{}));export{mi as F,fC as G,b$ as I,qa as P,Fn as S,Yu as T,zp as V,cd as X,fW as a,iW as b,Pi as c,jp as d,I0 as e,ya as f,Cl as g,t0 as h,Zt as p,Z7 as r};
//# sourceMappingURL=index-BwivX5ZJ.js.map
